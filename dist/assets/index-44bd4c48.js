(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Ee=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zj(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ek(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var IS={exports:{}},Wf={},RS={exports:{}},ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ku=Symbol.for("react.element"),tk=Symbol.for("react.portal"),nk=Symbol.for("react.fragment"),rk=Symbol.for("react.strict_mode"),sk=Symbol.for("react.profiler"),ik=Symbol.for("react.provider"),ok=Symbol.for("react.context"),ak=Symbol.for("react.forward_ref"),lk=Symbol.for("react.suspense"),ck=Symbol.for("react.memo"),uk=Symbol.for("react.lazy"),tb=Symbol.iterator;function dk(t){return t===null||typeof t!="object"?null:(t=tb&&t[tb]||t["@@iterator"],typeof t=="function"?t:null)}var LS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},MS=Object.assign,DS={};function ql(t,e,n){this.props=t,this.context=e,this.refs=DS,this.updater=n||LS}ql.prototype.isReactComponent={};ql.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ql.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function FS(){}FS.prototype=ql.prototype;function zy(t,e,n){this.props=t,this.context=e,this.refs=DS,this.updater=n||LS}var Hy=zy.prototype=new FS;Hy.constructor=zy;MS(Hy,ql.prototype);Hy.isPureReactComponent=!0;var nb=Array.isArray,BS=Object.prototype.hasOwnProperty,Xy={current:null},$S={key:!0,ref:!0,__self:!0,__source:!0};function US(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)BS.call(e,r)&&!$S.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Ku,type:t,key:i,ref:a,props:s,_owner:Xy.current}}function hk(t,e){return{$$typeof:Ku,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Wy(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ku}function fk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var rb=/\/+/g;function Ym(t,e){return typeof t=="object"&&t!==null&&t.key!=null?fk(""+t.key):e.toString(36)}function Oh(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Ku:case tk:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Ym(a,0):r,nb(s)?(n="",t!=null&&(n=t.replace(rb,"$&/")+"/"),Oh(s,e,n,"",function(u){return u})):s!=null&&(Wy(s)&&(s=hk(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(rb,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",nb(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Ym(i,l);a+=Oh(i,e,n,c,s)}else if(c=dk(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Ym(i,l++),a+=Oh(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Ad(t,e,n){if(t==null)return t;var r=[],s=0;return Oh(t,r,"","",function(i){return e.call(n,i,s++)}),r}function pk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pn={current:null},Ph={transition:null},mk={ReactCurrentDispatcher:Pn,ReactCurrentBatchConfig:Ph,ReactCurrentOwner:Xy};function VS(){throw Error("act(...) is not supported in production builds of React.")}ct.Children={map:Ad,forEach:function(t,e,n){Ad(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ad(t,function(){e++}),e},toArray:function(t){return Ad(t,function(e){return e})||[]},only:function(t){if(!Wy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ct.Component=ql;ct.Fragment=nk;ct.Profiler=sk;ct.PureComponent=zy;ct.StrictMode=rk;ct.Suspense=lk;ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mk;ct.act=VS;ct.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=MS({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Xy.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)BS.call(e,c)&&!$S.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Ku,type:t.type,key:s,ref:i,props:r,_owner:a}};ct.createContext=function(t){return t={$$typeof:ok,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ik,_context:t},t.Consumer=t};ct.createElement=US;ct.createFactory=function(t){var e=US.bind(null,t);return e.type=t,e};ct.createRef=function(){return{current:null}};ct.forwardRef=function(t){return{$$typeof:ak,render:t}};ct.isValidElement=Wy;ct.lazy=function(t){return{$$typeof:uk,_payload:{_status:-1,_result:t},_init:pk}};ct.memo=function(t,e){return{$$typeof:ck,type:t,compare:e===void 0?null:e}};ct.startTransition=function(t){var e=Ph.transition;Ph.transition={};try{t()}finally{Ph.transition=e}};ct.unstable_act=VS;ct.useCallback=function(t,e){return Pn.current.useCallback(t,e)};ct.useContext=function(t){return Pn.current.useContext(t)};ct.useDebugValue=function(){};ct.useDeferredValue=function(t){return Pn.current.useDeferredValue(t)};ct.useEffect=function(t,e){return Pn.current.useEffect(t,e)};ct.useId=function(){return Pn.current.useId()};ct.useImperativeHandle=function(t,e,n){return Pn.current.useImperativeHandle(t,e,n)};ct.useInsertionEffect=function(t,e){return Pn.current.useInsertionEffect(t,e)};ct.useLayoutEffect=function(t,e){return Pn.current.useLayoutEffect(t,e)};ct.useMemo=function(t,e){return Pn.current.useMemo(t,e)};ct.useReducer=function(t,e,n){return Pn.current.useReducer(t,e,n)};ct.useRef=function(t){return Pn.current.useRef(t)};ct.useState=function(t){return Pn.current.useState(t)};ct.useSyncExternalStore=function(t,e,n){return Pn.current.useSyncExternalStore(t,e,n)};ct.useTransition=function(){return Pn.current.useTransition()};ct.version="18.3.1";RS.exports=ct;var M=RS.exports;const Mc=Zj(M);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gk=M,xk=Symbol.for("react.element"),yk=Symbol.for("react.fragment"),vk=Object.prototype.hasOwnProperty,wk=gk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bk={key:!0,ref:!0,__self:!0,__source:!0};function zS(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)vk.call(e,r)&&!bk.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:xk,type:t,key:i,ref:a,props:s,_owner:wk.current}}Wf.Fragment=yk;Wf.jsx=zS;Wf.jsxs=zS;IS.exports=Wf;var o=IS.exports,Gg={},HS={exports:{}},pr={},XS={exports:{}},WS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,C){var A=R.length;R.push(C);e:for(;0<A;){var L=A-1>>>1,$=R[L];if(0<s($,C))R[L]=C,R[A]=$,A=L;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var C=R[0],A=R.pop();if(A!==C){R[0]=A;e:for(var L=0,$=R.length,ie=$>>>1;L<ie;){var q=2*(L+1)-1,G=R[q],ne=q+1,he=R[ne];if(0>s(G,A))ne<$&&0>s(he,G)?(R[L]=he,R[ne]=A,L=ne):(R[L]=G,R[q]=A,L=q);else if(ne<$&&0>s(he,A))R[L]=he,R[ne]=A,L=ne;else break e}}return C}function s(R,C){var A=R.sortIndex-C.sortIndex;return A!==0?A:R.id-C.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,y=!1,b=!1,_=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(R){for(var C=n(u);C!==null;){if(C.callback===null)r(u);else if(C.startTime<=R)r(u),C.sortIndex=C.expirationTime,e(c,C);else break;C=n(u)}}function v(R){if(b=!1,w(R),!y)if(n(c)!==null)y=!0,V(T);else{var C=n(u);C!==null&&H(v,C.startTime-R)}}function T(R,C){y=!1,b&&(b=!1,m(te),te=-1),p=!0;var A=f;try{for(w(C),h=n(c);h!==null&&(!(h.expirationTime>C)||R&&!J());){var L=h.callback;if(typeof L=="function"){h.callback=null,f=h.priorityLevel;var $=L(h.expirationTime<=C);C=t.unstable_now(),typeof $=="function"?h.callback=$:h===n(c)&&r(c),w(C)}else r(c);h=n(c)}if(h!==null)var ie=!0;else{var q=n(u);q!==null&&H(v,q.startTime-C),ie=!1}return ie}finally{h=null,f=A,p=!1}}var E=!1,D=null,te=-1,re=5,z=-1;function J(){return!(t.unstable_now()-z<re)}function ce(){if(D!==null){var R=t.unstable_now();z=R;var C=!0;try{C=D(!0,R)}finally{C?pe():(E=!1,D=null)}}else E=!1}var pe;if(typeof x=="function")pe=function(){x(ce)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ue=Q.port2;Q.port1.onmessage=ce,pe=function(){ue.postMessage(null)}}else pe=function(){_(ce,0)};function V(R){D=R,E||(E=!0,pe())}function H(R,C){te=_(function(){R(t.unstable_now())},C)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,V(T))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(R){switch(f){case 1:case 2:case 3:var C=3;break;default:C=f}var A=f;f=C;try{return R()}finally{f=A}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,C){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var A=f;f=R;try{return C()}finally{f=A}},t.unstable_scheduleCallback=function(R,C,A){var L=t.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?L+A:L):A=L,R){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=A+$,R={id:d++,callback:C,priorityLevel:R,startTime:A,expirationTime:$,sortIndex:-1},A>L?(R.sortIndex=A,e(u,R),n(c)===null&&R===n(u)&&(b?(m(te),te=-1):b=!0,H(v,A-L))):(R.sortIndex=$,e(c,R),y||p||(y=!0,V(T))),R},t.unstable_shouldYield=J,t.unstable_wrapCallback=function(R){var C=f;return function(){var A=f;f=C;try{return R.apply(this,arguments)}finally{f=A}}}})(WS);XS.exports=WS;var _k=XS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ek=M,fr=_k;function Oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var KS=new Set,gu={};function Aa(t,e){Pl(t,e),Pl(t+"Capture",e)}function Pl(t,e){for(gu[t]=e,t=0;t<e.length;t++)KS.add(e[t])}var Zs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yg=Object.prototype.hasOwnProperty,Sk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sb={},ib={};function Nk(t){return Yg.call(ib,t)?!0:Yg.call(sb,t)?!1:Sk.test(t)?ib[t]=!0:(sb[t]=!0,!1)}function Tk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Ak(t,e,n,r){if(e===null||typeof e>"u"||Tk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function In(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var fn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){fn[t]=new In(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];fn[e]=new In(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){fn[t]=new In(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){fn[t]=new In(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){fn[t]=new In(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){fn[t]=new In(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){fn[t]=new In(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){fn[t]=new In(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){fn[t]=new In(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ky=/[\-:]([a-z])/g;function qy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ky,qy);fn[e]=new In(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ky,qy);fn[e]=new In(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ky,qy);fn[e]=new In(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){fn[t]=new In(t,1,!1,t.toLowerCase(),null,!1,!1)});fn.xlinkHref=new In("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){fn[t]=new In(t,1,!1,t.toLowerCase(),null,!0,!0)});function Gy(t,e,n,r){var s=fn.hasOwnProperty(e)?fn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ak(e,n,s,r)&&(n=null),r||s===null?Nk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ii=Ek.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cd=Symbol.for("react.element"),al=Symbol.for("react.portal"),ll=Symbol.for("react.fragment"),Yy=Symbol.for("react.strict_mode"),Jg=Symbol.for("react.profiler"),qS=Symbol.for("react.provider"),GS=Symbol.for("react.context"),Jy=Symbol.for("react.forward_ref"),Qg=Symbol.for("react.suspense"),Zg=Symbol.for("react.suspense_list"),Qy=Symbol.for("react.memo"),Si=Symbol.for("react.lazy"),YS=Symbol.for("react.offscreen"),ob=Symbol.iterator;function dc(t){return t===null||typeof t!="object"?null:(t=ob&&t[ob]||t["@@iterator"],typeof t=="function"?t:null)}var Ot=Object.assign,Jm;function Dc(t){if(Jm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Jm=e&&e[1]||""}return`
`+Jm+t}var Qm=!1;function Zm(t,e){if(!t||Qm)return"";Qm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{Qm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Dc(t):""}function Ck(t){switch(t.tag){case 5:return Dc(t.type);case 16:return Dc("Lazy");case 13:return Dc("Suspense");case 19:return Dc("SuspenseList");case 0:case 2:case 15:return t=Zm(t.type,!1),t;case 11:return t=Zm(t.type.render,!1),t;case 1:return t=Zm(t.type,!0),t;default:return""}}function ex(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ll:return"Fragment";case al:return"Portal";case Jg:return"Profiler";case Yy:return"StrictMode";case Qg:return"Suspense";case Zg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case GS:return(t.displayName||"Context")+".Consumer";case qS:return(t._context.displayName||"Context")+".Provider";case Jy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Qy:return e=t.displayName||null,e!==null?e:ex(t.type)||"Memo";case Si:e=t._payload,t=t._init;try{return ex(t(e))}catch{}}return null}function jk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ex(e);case 8:return e===Yy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ji(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function JS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function kk(t){var e=JS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function jd(t){t._valueTracker||(t._valueTracker=kk(t))}function QS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=JS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Zh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function tx(t,e){var n=e.checked;return Ot({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ab(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ji(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ZS(t,e){e=e.checked,e!=null&&Gy(t,"checked",e,!1)}function nx(t,e){ZS(t,e);var n=Ji(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?rx(t,e.type,n):e.hasOwnProperty("defaultValue")&&rx(t,e.type,Ji(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function lb(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function rx(t,e,n){(e!=="number"||Zh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fc=Array.isArray;function _l(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ji(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function sx(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Oe(91));return Ot({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function cb(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Oe(92));if(Fc(n)){if(1<n.length)throw Error(Oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ji(n)}}function eN(t,e){var n=Ji(e.value),r=Ji(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ub(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function tN(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ix(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?tN(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var kd,nN=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(kd=kd||document.createElement("div"),kd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=kd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Kc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ok=["Webkit","ms","Moz","O"];Object.keys(Kc).forEach(function(t){Ok.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Kc[e]=Kc[t]})});function rN(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Kc.hasOwnProperty(t)&&Kc[t]?(""+e).trim():e+"px"}function sN(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=rN(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Pk=Ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ox(t,e){if(e){if(Pk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Oe(62))}}function ax(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lx=null;function Zy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var cx=null,El=null,Sl=null;function db(t){if(t=Yu(t)){if(typeof cx!="function")throw Error(Oe(280));var e=t.stateNode;e&&(e=Jf(e),cx(t.stateNode,t.type,e))}}function iN(t){El?Sl?Sl.push(t):Sl=[t]:El=t}function oN(){if(El){var t=El,e=Sl;if(Sl=El=null,db(t),e)for(t=0;t<e.length;t++)db(e[t])}}function aN(t,e){return t(e)}function lN(){}var e0=!1;function cN(t,e,n){if(e0)return t(e,n);e0=!0;try{return aN(t,e,n)}finally{e0=!1,(El!==null||Sl!==null)&&(lN(),oN())}}function yu(t,e){var n=t.stateNode;if(n===null)return null;var r=Jf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Oe(231,e,typeof n));return n}var ux=!1;if(Zs)try{var hc={};Object.defineProperty(hc,"passive",{get:function(){ux=!0}}),window.addEventListener("test",hc,hc),window.removeEventListener("test",hc,hc)}catch{ux=!1}function Ik(t,e,n,r,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var qc=!1,ef=null,tf=!1,dx=null,Rk={onError:function(t){qc=!0,ef=t}};function Lk(t,e,n,r,s,i,a,l,c){qc=!1,ef=null,Ik.apply(Rk,arguments)}function Mk(t,e,n,r,s,i,a,l,c){if(Lk.apply(this,arguments),qc){if(qc){var u=ef;qc=!1,ef=null}else throw Error(Oe(198));tf||(tf=!0,dx=u)}}function Ca(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function uN(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function hb(t){if(Ca(t)!==t)throw Error(Oe(188))}function Dk(t){var e=t.alternate;if(!e){if(e=Ca(t),e===null)throw Error(Oe(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return hb(s),t;if(i===r)return hb(s),e;i=i.sibling}throw Error(Oe(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(Oe(189))}}if(n.alternate!==r)throw Error(Oe(190))}if(n.tag!==3)throw Error(Oe(188));return n.stateNode.current===n?t:e}function dN(t){return t=Dk(t),t!==null?hN(t):null}function hN(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=hN(t);if(e!==null)return e;t=t.sibling}return null}var fN=fr.unstable_scheduleCallback,fb=fr.unstable_cancelCallback,Fk=fr.unstable_shouldYield,Bk=fr.unstable_requestPaint,Ut=fr.unstable_now,$k=fr.unstable_getCurrentPriorityLevel,ev=fr.unstable_ImmediatePriority,pN=fr.unstable_UserBlockingPriority,nf=fr.unstable_NormalPriority,Uk=fr.unstable_LowPriority,mN=fr.unstable_IdlePriority,Kf=null,Ss=null;function Vk(t){if(Ss&&typeof Ss.onCommitFiberRoot=="function")try{Ss.onCommitFiberRoot(Kf,t,void 0,(t.current.flags&128)===128)}catch{}}var Gr=Math.clz32?Math.clz32:Xk,zk=Math.log,Hk=Math.LN2;function Xk(t){return t>>>=0,t===0?32:31-(zk(t)/Hk|0)|0}var Od=64,Pd=4194304;function Bc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function rf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=Bc(l):(i&=a,i!==0&&(r=Bc(i)))}else a=n&~s,a!==0?r=Bc(a):i!==0&&(r=Bc(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Gr(e),s=1<<n,r|=t[n],e&=~s;return r}function Wk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Gr(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=Wk(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function hx(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function gN(){var t=Od;return Od<<=1,!(Od&4194240)&&(Od=64),t}function t0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function qu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Gr(e),t[e]=n}function qk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Gr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function tv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Gr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var xt=0;function xN(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var yN,nv,vN,wN,bN,fx=!1,Id=[],Di=null,Fi=null,Bi=null,vu=new Map,wu=new Map,Ci=[],Gk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pb(t,e){switch(t){case"focusin":case"focusout":Di=null;break;case"dragenter":case"dragleave":Fi=null;break;case"mouseover":case"mouseout":Bi=null;break;case"pointerover":case"pointerout":vu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wu.delete(e.pointerId)}}function fc(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Yu(e),e!==null&&nv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Yk(t,e,n,r,s){switch(e){case"focusin":return Di=fc(Di,t,e,n,r,s),!0;case"dragenter":return Fi=fc(Fi,t,e,n,r,s),!0;case"mouseover":return Bi=fc(Bi,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return vu.set(i,fc(vu.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,wu.set(i,fc(wu.get(i)||null,t,e,n,r,s)),!0}return!1}function _N(t){var e=Go(t.target);if(e!==null){var n=Ca(e);if(n!==null){if(e=n.tag,e===13){if(e=uN(n),e!==null){t.blockedOn=e,bN(t.priority,function(){vN(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ih(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=px(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);lx=r,n.target.dispatchEvent(r),lx=null}else return e=Yu(n),e!==null&&nv(e),t.blockedOn=n,!1;e.shift()}return!0}function mb(t,e,n){Ih(t)&&n.delete(e)}function Jk(){fx=!1,Di!==null&&Ih(Di)&&(Di=null),Fi!==null&&Ih(Fi)&&(Fi=null),Bi!==null&&Ih(Bi)&&(Bi=null),vu.forEach(mb),wu.forEach(mb)}function pc(t,e){t.blockedOn===e&&(t.blockedOn=null,fx||(fx=!0,fr.unstable_scheduleCallback(fr.unstable_NormalPriority,Jk)))}function bu(t){function e(s){return pc(s,t)}if(0<Id.length){pc(Id[0],t);for(var n=1;n<Id.length;n++){var r=Id[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Di!==null&&pc(Di,t),Fi!==null&&pc(Fi,t),Bi!==null&&pc(Bi,t),vu.forEach(e),wu.forEach(e),n=0;n<Ci.length;n++)r=Ci[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ci.length&&(n=Ci[0],n.blockedOn===null);)_N(n),n.blockedOn===null&&Ci.shift()}var Nl=ii.ReactCurrentBatchConfig,sf=!0;function Qk(t,e,n,r){var s=xt,i=Nl.transition;Nl.transition=null;try{xt=1,rv(t,e,n,r)}finally{xt=s,Nl.transition=i}}function Zk(t,e,n,r){var s=xt,i=Nl.transition;Nl.transition=null;try{xt=4,rv(t,e,n,r)}finally{xt=s,Nl.transition=i}}function rv(t,e,n,r){if(sf){var s=px(t,e,n,r);if(s===null)d0(t,e,r,of,n),pb(t,r);else if(Yk(s,t,e,n,r))r.stopPropagation();else if(pb(t,r),e&4&&-1<Gk.indexOf(t)){for(;s!==null;){var i=Yu(s);if(i!==null&&yN(i),i=px(t,e,n,r),i===null&&d0(t,e,r,of,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else d0(t,e,r,null,n)}}var of=null;function px(t,e,n,r){if(of=null,t=Zy(r),t=Go(t),t!==null)if(e=Ca(t),e===null)t=null;else if(n=e.tag,n===13){if(t=uN(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return of=t,null}function EN(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($k()){case ev:return 1;case pN:return 4;case nf:case Uk:return 16;case mN:return 536870912;default:return 16}default:return 16}}var Li=null,sv=null,Rh=null;function SN(){if(Rh)return Rh;var t,e=sv,n=e.length,r,s="value"in Li?Li.value:Li.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return Rh=s.slice(t,1<r?1-r:void 0)}function Lh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Rd(){return!0}function gb(){return!1}function mr(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Rd:gb,this.isPropagationStopped=gb,this}return Ot(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Rd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Rd)},persist:function(){},isPersistent:Rd}),e}var Gl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},iv=mr(Gl),Gu=Ot({},Gl,{view:0,detail:0}),eO=mr(Gu),n0,r0,mc,qf=Ot({},Gu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ov,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==mc&&(mc&&t.type==="mousemove"?(n0=t.screenX-mc.screenX,r0=t.screenY-mc.screenY):r0=n0=0,mc=t),n0)},movementY:function(t){return"movementY"in t?t.movementY:r0}}),xb=mr(qf),tO=Ot({},qf,{dataTransfer:0}),nO=mr(tO),rO=Ot({},Gu,{relatedTarget:0}),s0=mr(rO),sO=Ot({},Gl,{animationName:0,elapsedTime:0,pseudoElement:0}),iO=mr(sO),oO=Ot({},Gl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),aO=mr(oO),lO=Ot({},Gl,{data:0}),yb=mr(lO),cO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hO(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=dO[t])?!!e[t]:!1}function ov(){return hO}var fO=Ot({},Gu,{key:function(t){if(t.key){var e=cO[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Lh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?uO[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ov,charCode:function(t){return t.type==="keypress"?Lh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pO=mr(fO),mO=Ot({},qf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vb=mr(mO),gO=Ot({},Gu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ov}),xO=mr(gO),yO=Ot({},Gl,{propertyName:0,elapsedTime:0,pseudoElement:0}),vO=mr(yO),wO=Ot({},qf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),bO=mr(wO),_O=[9,13,27,32],av=Zs&&"CompositionEvent"in window,Gc=null;Zs&&"documentMode"in document&&(Gc=document.documentMode);var EO=Zs&&"TextEvent"in window&&!Gc,NN=Zs&&(!av||Gc&&8<Gc&&11>=Gc),wb=String.fromCharCode(32),bb=!1;function TN(t,e){switch(t){case"keyup":return _O.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function AN(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var cl=!1;function SO(t,e){switch(t){case"compositionend":return AN(e);case"keypress":return e.which!==32?null:(bb=!0,wb);case"textInput":return t=e.data,t===wb&&bb?null:t;default:return null}}function NO(t,e){if(cl)return t==="compositionend"||!av&&TN(t,e)?(t=SN(),Rh=sv=Li=null,cl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return NN&&e.locale!=="ko"?null:e.data;default:return null}}var TO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _b(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!TO[t.type]:e==="textarea"}function CN(t,e,n,r){iN(r),e=af(e,"onChange"),0<e.length&&(n=new iv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Yc=null,_u=null;function AO(t){BN(t,0)}function Gf(t){var e=hl(t);if(QS(e))return t}function CO(t,e){if(t==="change")return e}var jN=!1;if(Zs){var i0;if(Zs){var o0="oninput"in document;if(!o0){var Eb=document.createElement("div");Eb.setAttribute("oninput","return;"),o0=typeof Eb.oninput=="function"}i0=o0}else i0=!1;jN=i0&&(!document.documentMode||9<document.documentMode)}function Sb(){Yc&&(Yc.detachEvent("onpropertychange",kN),_u=Yc=null)}function kN(t){if(t.propertyName==="value"&&Gf(_u)){var e=[];CN(e,_u,t,Zy(t)),cN(AO,e)}}function jO(t,e,n){t==="focusin"?(Sb(),Yc=e,_u=n,Yc.attachEvent("onpropertychange",kN)):t==="focusout"&&Sb()}function kO(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gf(_u)}function OO(t,e){if(t==="click")return Gf(e)}function PO(t,e){if(t==="input"||t==="change")return Gf(e)}function IO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var es=typeof Object.is=="function"?Object.is:IO;function Eu(t,e){if(es(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Yg.call(e,s)||!es(t[s],e[s]))return!1}return!0}function Nb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Tb(t,e){var n=Nb(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Nb(n)}}function ON(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ON(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function PN(){for(var t=window,e=Zh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Zh(t.document)}return e}function lv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function RO(t){var e=PN(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ON(n.ownerDocument.documentElement,n)){if(r!==null&&lv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Tb(n,i);var a=Tb(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var LO=Zs&&"documentMode"in document&&11>=document.documentMode,ul=null,mx=null,Jc=null,gx=!1;function Ab(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gx||ul==null||ul!==Zh(r)||(r=ul,"selectionStart"in r&&lv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Jc&&Eu(Jc,r)||(Jc=r,r=af(mx,"onSelect"),0<r.length&&(e=new iv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ul)))}function Ld(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var dl={animationend:Ld("Animation","AnimationEnd"),animationiteration:Ld("Animation","AnimationIteration"),animationstart:Ld("Animation","AnimationStart"),transitionend:Ld("Transition","TransitionEnd")},a0={},IN={};Zs&&(IN=document.createElement("div").style,"AnimationEvent"in window||(delete dl.animationend.animation,delete dl.animationiteration.animation,delete dl.animationstart.animation),"TransitionEvent"in window||delete dl.transitionend.transition);function Yf(t){if(a0[t])return a0[t];if(!dl[t])return t;var e=dl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in IN)return a0[t]=e[n];return t}var RN=Yf("animationend"),LN=Yf("animationiteration"),MN=Yf("animationstart"),DN=Yf("transitionend"),FN=new Map,Cb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function po(t,e){FN.set(t,e),Aa(e,[t])}for(var l0=0;l0<Cb.length;l0++){var c0=Cb[l0],MO=c0.toLowerCase(),DO=c0[0].toUpperCase()+c0.slice(1);po(MO,"on"+DO)}po(RN,"onAnimationEnd");po(LN,"onAnimationIteration");po(MN,"onAnimationStart");po("dblclick","onDoubleClick");po("focusin","onFocus");po("focusout","onBlur");po(DN,"onTransitionEnd");Pl("onMouseEnter",["mouseout","mouseover"]);Pl("onMouseLeave",["mouseout","mouseover"]);Pl("onPointerEnter",["pointerout","pointerover"]);Pl("onPointerLeave",["pointerout","pointerover"]);Aa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Aa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Aa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Aa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Aa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Aa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $c="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FO=new Set("cancel close invalid load scroll toggle".split(" ").concat($c));function jb(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Mk(r,e,void 0,t),t.currentTarget=null}function BN(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;jb(s,l,u),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;jb(s,l,u),i=c}}}if(tf)throw t=dx,tf=!1,dx=null,t}function _t(t,e){var n=e[bx];n===void 0&&(n=e[bx]=new Set);var r=t+"__bubble";n.has(r)||($N(e,t,2,!1),n.add(r))}function u0(t,e,n){var r=0;e&&(r|=4),$N(n,t,r,e)}var Md="_reactListening"+Math.random().toString(36).slice(2);function Su(t){if(!t[Md]){t[Md]=!0,KS.forEach(function(n){n!=="selectionchange"&&(FO.has(n)||u0(n,!1,t),u0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Md]||(e[Md]=!0,u0("selectionchange",!1,e))}}function $N(t,e,n,r){switch(EN(e)){case 1:var s=Qk;break;case 4:s=Zk;break;default:s=rv}n=s.bind(null,e,n,t),s=void 0,!ux||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function d0(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Go(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}cN(function(){var u=i,d=Zy(n),h=[];e:{var f=FN.get(t);if(f!==void 0){var p=iv,y=t;switch(t){case"keypress":if(Lh(n)===0)break e;case"keydown":case"keyup":p=pO;break;case"focusin":y="focus",p=s0;break;case"focusout":y="blur",p=s0;break;case"beforeblur":case"afterblur":p=s0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=xb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=nO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=xO;break;case RN:case LN:case MN:p=iO;break;case DN:p=vO;break;case"scroll":p=eO;break;case"wheel":p=bO;break;case"copy":case"cut":case"paste":p=aO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=vb}var b=(e&4)!==0,_=!b&&t==="scroll",m=b?f!==null?f+"Capture":null:f;b=[];for(var x=u,w;x!==null;){w=x;var v=w.stateNode;if(w.tag===5&&v!==null&&(w=v,m!==null&&(v=yu(x,m),v!=null&&b.push(Nu(x,v,w)))),_)break;x=x.return}0<b.length&&(f=new p(f,y,null,n,d),h.push({event:f,listeners:b}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==lx&&(y=n.relatedTarget||n.fromElement)&&(Go(y)||y[ei]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=u,y=y?Go(y):null,y!==null&&(_=Ca(y),y!==_||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=u),p!==y)){if(b=xb,v="onMouseLeave",m="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(b=vb,v="onPointerLeave",m="onPointerEnter",x="pointer"),_=p==null?f:hl(p),w=y==null?f:hl(y),f=new b(v,x+"leave",p,n,d),f.target=_,f.relatedTarget=w,v=null,Go(d)===u&&(b=new b(m,x+"enter",y,n,d),b.target=w,b.relatedTarget=_,v=b),_=v,p&&y)t:{for(b=p,m=y,x=0,w=b;w;w=Fa(w))x++;for(w=0,v=m;v;v=Fa(v))w++;for(;0<x-w;)b=Fa(b),x--;for(;0<w-x;)m=Fa(m),w--;for(;x--;){if(b===m||m!==null&&b===m.alternate)break t;b=Fa(b),m=Fa(m)}b=null}else b=null;p!==null&&kb(h,f,p,b,!1),y!==null&&_!==null&&kb(h,_,y,b,!0)}}e:{if(f=u?hl(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var T=CO;else if(_b(f))if(jN)T=PO;else{T=kO;var E=jO}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=OO);if(T&&(T=T(t,u))){CN(h,T,n,d);break e}E&&E(t,f,u),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&rx(f,"number",f.value)}switch(E=u?hl(u):window,t){case"focusin":(_b(E)||E.contentEditable==="true")&&(ul=E,mx=u,Jc=null);break;case"focusout":Jc=mx=ul=null;break;case"mousedown":gx=!0;break;case"contextmenu":case"mouseup":case"dragend":gx=!1,Ab(h,n,d);break;case"selectionchange":if(LO)break;case"keydown":case"keyup":Ab(h,n,d)}var D;if(av)e:{switch(t){case"compositionstart":var te="onCompositionStart";break e;case"compositionend":te="onCompositionEnd";break e;case"compositionupdate":te="onCompositionUpdate";break e}te=void 0}else cl?TN(t,n)&&(te="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(te="onCompositionStart");te&&(NN&&n.locale!=="ko"&&(cl||te!=="onCompositionStart"?te==="onCompositionEnd"&&cl&&(D=SN()):(Li=d,sv="value"in Li?Li.value:Li.textContent,cl=!0)),E=af(u,te),0<E.length&&(te=new yb(te,t,null,n,d),h.push({event:te,listeners:E}),D?te.data=D:(D=AN(n),D!==null&&(te.data=D)))),(D=EO?SO(t,n):NO(t,n))&&(u=af(u,"onBeforeInput"),0<u.length&&(d=new yb("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=D))}BN(h,e)})}function Nu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function af(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=yu(t,n),i!=null&&r.unshift(Nu(t,i,s)),i=yu(t,e),i!=null&&r.push(Nu(t,i,s))),t=t.return}return r}function Fa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function kb(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=yu(n,i),c!=null&&a.unshift(Nu(n,c,l))):s||(c=yu(n,i),c!=null&&a.push(Nu(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var BO=/\r\n?/g,$O=/\u0000|\uFFFD/g;function Ob(t){return(typeof t=="string"?t:""+t).replace(BO,`
`).replace($O,"")}function Dd(t,e,n){if(e=Ob(e),Ob(t)!==e&&n)throw Error(Oe(425))}function lf(){}var xx=null,yx=null;function vx(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wx=typeof setTimeout=="function"?setTimeout:void 0,UO=typeof clearTimeout=="function"?clearTimeout:void 0,Pb=typeof Promise=="function"?Promise:void 0,VO=typeof queueMicrotask=="function"?queueMicrotask:typeof Pb<"u"?function(t){return Pb.resolve(null).then(t).catch(zO)}:wx;function zO(t){setTimeout(function(){throw t})}function h0(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),bu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);bu(e)}function $i(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ib(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Yl=Math.random().toString(36).slice(2),ys="__reactFiber$"+Yl,Tu="__reactProps$"+Yl,ei="__reactContainer$"+Yl,bx="__reactEvents$"+Yl,HO="__reactListeners$"+Yl,XO="__reactHandles$"+Yl;function Go(t){var e=t[ys];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ei]||n[ys]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ib(t);t!==null;){if(n=t[ys])return n;t=Ib(t)}return e}t=n,n=t.parentNode}return null}function Yu(t){return t=t[ys]||t[ei],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function hl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Oe(33))}function Jf(t){return t[Tu]||null}var _x=[],fl=-1;function mo(t){return{current:t}}function St(t){0>fl||(t.current=_x[fl],_x[fl]=null,fl--)}function bt(t,e){fl++,_x[fl]=t.current,t.current=e}var Qi={},bn=mo(Qi),Gn=mo(!1),ua=Qi;function Il(t,e){var n=t.type.contextTypes;if(!n)return Qi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Yn(t){return t=t.childContextTypes,t!=null}function cf(){St(Gn),St(bn)}function Rb(t,e,n){if(bn.current!==Qi)throw Error(Oe(168));bt(bn,e),bt(Gn,n)}function UN(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Oe(108,jk(t)||"Unknown",s));return Ot({},n,r)}function uf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qi,ua=bn.current,bt(bn,t),bt(Gn,Gn.current),!0}function Lb(t,e,n){var r=t.stateNode;if(!r)throw Error(Oe(169));n?(t=UN(t,e,ua),r.__reactInternalMemoizedMergedChildContext=t,St(Gn),St(bn),bt(bn,t)):St(Gn),bt(Gn,n)}var $s=null,Qf=!1,f0=!1;function VN(t){$s===null?$s=[t]:$s.push(t)}function WO(t){Qf=!0,VN(t)}function go(){if(!f0&&$s!==null){f0=!0;var t=0,e=xt;try{var n=$s;for(xt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}$s=null,Qf=!1}catch(s){throw $s!==null&&($s=$s.slice(t+1)),fN(ev,go),s}finally{xt=e,f0=!1}}return null}var pl=[],ml=0,df=null,hf=0,Sr=[],Nr=0,da=null,zs=1,Hs="";function Vo(t,e){pl[ml++]=hf,pl[ml++]=df,df=t,hf=e}function zN(t,e,n){Sr[Nr++]=zs,Sr[Nr++]=Hs,Sr[Nr++]=da,da=t;var r=zs;t=Hs;var s=32-Gr(r)-1;r&=~(1<<s),n+=1;var i=32-Gr(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,zs=1<<32-Gr(e)+s|n<<s|r,Hs=i+t}else zs=1<<i|n<<s|r,Hs=t}function cv(t){t.return!==null&&(Vo(t,1),zN(t,1,0))}function uv(t){for(;t===df;)df=pl[--ml],pl[ml]=null,hf=pl[--ml],pl[ml]=null;for(;t===da;)da=Sr[--Nr],Sr[Nr]=null,Hs=Sr[--Nr],Sr[Nr]=null,zs=Sr[--Nr],Sr[Nr]=null}var dr=null,ur=null,Tt=!1,Wr=null;function HN(t,e){var n=Tr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Mb(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,dr=t,ur=$i(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,dr=t,ur=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=da!==null?{id:zs,overflow:Hs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Tr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,dr=t,ur=null,!0):!1;default:return!1}}function Ex(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Sx(t){if(Tt){var e=ur;if(e){var n=e;if(!Mb(t,e)){if(Ex(t))throw Error(Oe(418));e=$i(n.nextSibling);var r=dr;e&&Mb(t,e)?HN(r,n):(t.flags=t.flags&-4097|2,Tt=!1,dr=t)}}else{if(Ex(t))throw Error(Oe(418));t.flags=t.flags&-4097|2,Tt=!1,dr=t}}}function Db(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dr=t}function Fd(t){if(t!==dr)return!1;if(!Tt)return Db(t),Tt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!vx(t.type,t.memoizedProps)),e&&(e=ur)){if(Ex(t))throw XN(),Error(Oe(418));for(;e;)HN(t,e),e=$i(e.nextSibling)}if(Db(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ur=$i(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ur=null}}else ur=dr?$i(t.stateNode.nextSibling):null;return!0}function XN(){for(var t=ur;t;)t=$i(t.nextSibling)}function Rl(){ur=dr=null,Tt=!1}function dv(t){Wr===null?Wr=[t]:Wr.push(t)}var KO=ii.ReactCurrentBatchConfig;function gc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Oe(309));var r=n.stateNode}if(!r)throw Error(Oe(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(Oe(284));if(!n._owner)throw Error(Oe(290,t))}return t}function Bd(t,e){throw t=Object.prototype.toString.call(e),Error(Oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Fb(t){var e=t._init;return e(t._payload)}function WN(t){function e(m,x){if(t){var w=m.deletions;w===null?(m.deletions=[x],m.flags|=16):w.push(x)}}function n(m,x){if(!t)return null;for(;x!==null;)e(m,x),x=x.sibling;return null}function r(m,x){for(m=new Map;x!==null;)x.key!==null?m.set(x.key,x):m.set(x.index,x),x=x.sibling;return m}function s(m,x){return m=Hi(m,x),m.index=0,m.sibling=null,m}function i(m,x,w){return m.index=w,t?(w=m.alternate,w!==null?(w=w.index,w<x?(m.flags|=2,x):w):(m.flags|=2,x)):(m.flags|=1048576,x)}function a(m){return t&&m.alternate===null&&(m.flags|=2),m}function l(m,x,w,v){return x===null||x.tag!==6?(x=w0(w,m.mode,v),x.return=m,x):(x=s(x,w),x.return=m,x)}function c(m,x,w,v){var T=w.type;return T===ll?d(m,x,w.props.children,v,w.key):x!==null&&(x.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Si&&Fb(T)===x.type)?(v=s(x,w.props),v.ref=gc(m,x,w),v.return=m,v):(v=Vh(w.type,w.key,w.props,null,m.mode,v),v.ref=gc(m,x,w),v.return=m,v)}function u(m,x,w,v){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=b0(w,m.mode,v),x.return=m,x):(x=s(x,w.children||[]),x.return=m,x)}function d(m,x,w,v,T){return x===null||x.tag!==7?(x=ra(w,m.mode,v,T),x.return=m,x):(x=s(x,w),x.return=m,x)}function h(m,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=w0(""+x,m.mode,w),x.return=m,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Cd:return w=Vh(x.type,x.key,x.props,null,m.mode,w),w.ref=gc(m,null,x),w.return=m,w;case al:return x=b0(x,m.mode,w),x.return=m,x;case Si:var v=x._init;return h(m,v(x._payload),w)}if(Fc(x)||dc(x))return x=ra(x,m.mode,w,null),x.return=m,x;Bd(m,x)}return null}function f(m,x,w,v){var T=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return T!==null?null:l(m,x,""+w,v);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Cd:return w.key===T?c(m,x,w,v):null;case al:return w.key===T?u(m,x,w,v):null;case Si:return T=w._init,f(m,x,T(w._payload),v)}if(Fc(w)||dc(w))return T!==null?null:d(m,x,w,v,null);Bd(m,w)}return null}function p(m,x,w,v,T){if(typeof v=="string"&&v!==""||typeof v=="number")return m=m.get(w)||null,l(x,m,""+v,T);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Cd:return m=m.get(v.key===null?w:v.key)||null,c(x,m,v,T);case al:return m=m.get(v.key===null?w:v.key)||null,u(x,m,v,T);case Si:var E=v._init;return p(m,x,w,E(v._payload),T)}if(Fc(v)||dc(v))return m=m.get(w)||null,d(x,m,v,T,null);Bd(x,v)}return null}function y(m,x,w,v){for(var T=null,E=null,D=x,te=x=0,re=null;D!==null&&te<w.length;te++){D.index>te?(re=D,D=null):re=D.sibling;var z=f(m,D,w[te],v);if(z===null){D===null&&(D=re);break}t&&D&&z.alternate===null&&e(m,D),x=i(z,x,te),E===null?T=z:E.sibling=z,E=z,D=re}if(te===w.length)return n(m,D),Tt&&Vo(m,te),T;if(D===null){for(;te<w.length;te++)D=h(m,w[te],v),D!==null&&(x=i(D,x,te),E===null?T=D:E.sibling=D,E=D);return Tt&&Vo(m,te),T}for(D=r(m,D);te<w.length;te++)re=p(D,m,te,w[te],v),re!==null&&(t&&re.alternate!==null&&D.delete(re.key===null?te:re.key),x=i(re,x,te),E===null?T=re:E.sibling=re,E=re);return t&&D.forEach(function(J){return e(m,J)}),Tt&&Vo(m,te),T}function b(m,x,w,v){var T=dc(w);if(typeof T!="function")throw Error(Oe(150));if(w=T.call(w),w==null)throw Error(Oe(151));for(var E=T=null,D=x,te=x=0,re=null,z=w.next();D!==null&&!z.done;te++,z=w.next()){D.index>te?(re=D,D=null):re=D.sibling;var J=f(m,D,z.value,v);if(J===null){D===null&&(D=re);break}t&&D&&J.alternate===null&&e(m,D),x=i(J,x,te),E===null?T=J:E.sibling=J,E=J,D=re}if(z.done)return n(m,D),Tt&&Vo(m,te),T;if(D===null){for(;!z.done;te++,z=w.next())z=h(m,z.value,v),z!==null&&(x=i(z,x,te),E===null?T=z:E.sibling=z,E=z);return Tt&&Vo(m,te),T}for(D=r(m,D);!z.done;te++,z=w.next())z=p(D,m,te,z.value,v),z!==null&&(t&&z.alternate!==null&&D.delete(z.key===null?te:z.key),x=i(z,x,te),E===null?T=z:E.sibling=z,E=z);return t&&D.forEach(function(ce){return e(m,ce)}),Tt&&Vo(m,te),T}function _(m,x,w,v){if(typeof w=="object"&&w!==null&&w.type===ll&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Cd:e:{for(var T=w.key,E=x;E!==null;){if(E.key===T){if(T=w.type,T===ll){if(E.tag===7){n(m,E.sibling),x=s(E,w.props.children),x.return=m,m=x;break e}}else if(E.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Si&&Fb(T)===E.type){n(m,E.sibling),x=s(E,w.props),x.ref=gc(m,E,w),x.return=m,m=x;break e}n(m,E);break}else e(m,E);E=E.sibling}w.type===ll?(x=ra(w.props.children,m.mode,v,w.key),x.return=m,m=x):(v=Vh(w.type,w.key,w.props,null,m.mode,v),v.ref=gc(m,x,w),v.return=m,m=v)}return a(m);case al:e:{for(E=w.key;x!==null;){if(x.key===E)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){n(m,x.sibling),x=s(x,w.children||[]),x.return=m,m=x;break e}else{n(m,x);break}else e(m,x);x=x.sibling}x=b0(w,m.mode,v),x.return=m,m=x}return a(m);case Si:return E=w._init,_(m,x,E(w._payload),v)}if(Fc(w))return y(m,x,w,v);if(dc(w))return b(m,x,w,v);Bd(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(n(m,x.sibling),x=s(x,w),x.return=m,m=x):(n(m,x),x=w0(w,m.mode,v),x.return=m,m=x),a(m)):n(m,x)}return _}var Ll=WN(!0),KN=WN(!1),ff=mo(null),pf=null,gl=null,hv=null;function fv(){hv=gl=pf=null}function pv(t){var e=ff.current;St(ff),t._currentValue=e}function Nx(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Tl(t,e){pf=t,hv=gl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(qn=!0),t.firstContext=null)}function kr(t){var e=t._currentValue;if(hv!==t)if(t={context:t,memoizedValue:e,next:null},gl===null){if(pf===null)throw Error(Oe(308));gl=t,pf.dependencies={lanes:0,firstContext:t}}else gl=gl.next=t;return e}var Yo=null;function mv(t){Yo===null?Yo=[t]:Yo.push(t)}function qN(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,mv(e)):(n.next=s.next,s.next=n),e.interleaved=n,ti(t,r)}function ti(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ni=!1;function gv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function GN(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function qs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ui(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,pt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ti(t,n)}return s=r.interleaved,s===null?(e.next=e,mv(r)):(e.next=s.next,s.next=e),r.interleaved=e,ti(t,n)}function Mh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tv(t,n)}}function Bb(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function mf(t,e,n,r){var s=t.updateQueue;Ni=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;a=0,d=u=c=null,l=i;do{var f=l.lane,p=l.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,b=l;switch(f=e,p=n,b.tag){case 1:if(y=b.payload,typeof y=="function"){h=y.call(p,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=b.payload,f=typeof y=="function"?y.call(p,h,f):y,f==null)break e;h=Ot({},h,f);break e;case 2:Ni=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,a|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(1);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);fa|=a,t.lanes=a,t.memoizedState=h}}function $b(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Oe(191,s));s.call(r)}}}var Ju={},Ns=mo(Ju),Au=mo(Ju),Cu=mo(Ju);function Jo(t){if(t===Ju)throw Error(Oe(174));return t}function xv(t,e){switch(bt(Cu,e),bt(Au,t),bt(Ns,Ju),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ix(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ix(e,t)}St(Ns),bt(Ns,e)}function Ml(){St(Ns),St(Au),St(Cu)}function YN(t){Jo(Cu.current);var e=Jo(Ns.current),n=ix(e,t.type);e!==n&&(bt(Au,t),bt(Ns,n))}function yv(t){Au.current===t&&(St(Ns),St(Au))}var jt=mo(0);function gf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var p0=[];function vv(){for(var t=0;t<p0.length;t++)p0[t]._workInProgressVersionPrimary=null;p0.length=0}var Dh=ii.ReactCurrentDispatcher,m0=ii.ReactCurrentBatchConfig,ha=0,kt=null,Zt=null,rn=null,xf=!1,Qc=!1,ju=0,qO=0;function mn(){throw Error(Oe(321))}function wv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!es(t[n],e[n]))return!1;return!0}function bv(t,e,n,r,s,i){if(ha=i,kt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Dh.current=t===null||t.memoizedState===null?QO:ZO,t=n(r,s),Qc){i=0;do{if(Qc=!1,ju=0,25<=i)throw Error(Oe(301));i+=1,rn=Zt=null,e.updateQueue=null,Dh.current=eP,t=n(r,s)}while(Qc)}if(Dh.current=yf,e=Zt!==null&&Zt.next!==null,ha=0,rn=Zt=kt=null,xf=!1,e)throw Error(Oe(300));return t}function _v(){var t=ju!==0;return ju=0,t}function ms(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?kt.memoizedState=rn=t:rn=rn.next=t,rn}function Or(){if(Zt===null){var t=kt.alternate;t=t!==null?t.memoizedState:null}else t=Zt.next;var e=rn===null?kt.memoizedState:rn.next;if(e!==null)rn=e,Zt=t;else{if(t===null)throw Error(Oe(310));Zt=t,t={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},rn===null?kt.memoizedState=rn=t:rn=rn.next=t}return rn}function ku(t,e){return typeof e=="function"?e(t):e}function g0(t){var e=Or(),n=e.queue;if(n===null)throw Error(Oe(311));n.lastRenderedReducer=t;var r=Zt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((ha&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,a=r):c=c.next=h,kt.lanes|=d,fa|=d}u=u.next}while(u!==null&&u!==i);c===null?a=r:c.next=l,es(r,e.memoizedState)||(qn=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,kt.lanes|=i,fa|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function x0(t){var e=Or(),n=e.queue;if(n===null)throw Error(Oe(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);es(i,e.memoizedState)||(qn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function JN(){}function QN(t,e){var n=kt,r=Or(),s=e(),i=!es(r.memoizedState,s);if(i&&(r.memoizedState=s,qn=!0),r=r.queue,Ev(t2.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||rn!==null&&rn.memoizedState.tag&1){if(n.flags|=2048,Ou(9,e2.bind(null,n,r,s,e),void 0,null),ln===null)throw Error(Oe(349));ha&30||ZN(n,e,s)}return s}function ZN(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=kt.updateQueue,e===null?(e={lastEffect:null,stores:null},kt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function e2(t,e,n,r){e.value=n,e.getSnapshot=r,n2(e)&&r2(t)}function t2(t,e,n){return n(function(){n2(e)&&r2(t)})}function n2(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!es(t,n)}catch{return!0}}function r2(t){var e=ti(t,1);e!==null&&Yr(e,t,1,-1)}function Ub(t){var e=ms();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ku,lastRenderedState:t},e.queue=t,t=t.dispatch=JO.bind(null,kt,t),[e.memoizedState,t]}function Ou(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=kt.updateQueue,e===null?(e={lastEffect:null,stores:null},kt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function s2(){return Or().memoizedState}function Fh(t,e,n,r){var s=ms();kt.flags|=t,s.memoizedState=Ou(1|e,n,void 0,r===void 0?null:r)}function Zf(t,e,n,r){var s=Or();r=r===void 0?null:r;var i=void 0;if(Zt!==null){var a=Zt.memoizedState;if(i=a.destroy,r!==null&&wv(r,a.deps)){s.memoizedState=Ou(e,n,i,r);return}}kt.flags|=t,s.memoizedState=Ou(1|e,n,i,r)}function Vb(t,e){return Fh(8390656,8,t,e)}function Ev(t,e){return Zf(2048,8,t,e)}function i2(t,e){return Zf(4,2,t,e)}function o2(t,e){return Zf(4,4,t,e)}function a2(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function l2(t,e,n){return n=n!=null?n.concat([t]):null,Zf(4,4,a2.bind(null,e,t),n)}function Sv(){}function c2(t,e){var n=Or();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function u2(t,e){var n=Or();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function d2(t,e,n){return ha&21?(es(n,e)||(n=gN(),kt.lanes|=n,fa|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,qn=!0),t.memoizedState=n)}function GO(t,e){var n=xt;xt=n!==0&&4>n?n:4,t(!0);var r=m0.transition;m0.transition={};try{t(!1),e()}finally{xt=n,m0.transition=r}}function h2(){return Or().memoizedState}function YO(t,e,n){var r=zi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},f2(t))p2(e,n);else if(n=qN(t,e,n,r),n!==null){var s=kn();Yr(n,t,r,s),m2(n,e,r)}}function JO(t,e,n){var r=zi(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(f2(t))p2(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,es(l,a)){var c=e.interleaved;c===null?(s.next=s,mv(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=qN(t,e,s,r),n!==null&&(s=kn(),Yr(n,t,r,s),m2(n,e,r))}}function f2(t){var e=t.alternate;return t===kt||e!==null&&e===kt}function p2(t,e){Qc=xf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function m2(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tv(t,n)}}var yf={readContext:kr,useCallback:mn,useContext:mn,useEffect:mn,useImperativeHandle:mn,useInsertionEffect:mn,useLayoutEffect:mn,useMemo:mn,useReducer:mn,useRef:mn,useState:mn,useDebugValue:mn,useDeferredValue:mn,useTransition:mn,useMutableSource:mn,useSyncExternalStore:mn,useId:mn,unstable_isNewReconciler:!1},QO={readContext:kr,useCallback:function(t,e){return ms().memoizedState=[t,e===void 0?null:e],t},useContext:kr,useEffect:Vb,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Fh(4194308,4,a2.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Fh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fh(4,2,t,e)},useMemo:function(t,e){var n=ms();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ms();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=YO.bind(null,kt,t),[r.memoizedState,t]},useRef:function(t){var e=ms();return t={current:t},e.memoizedState=t},useState:Ub,useDebugValue:Sv,useDeferredValue:function(t){return ms().memoizedState=t},useTransition:function(){var t=Ub(!1),e=t[0];return t=GO.bind(null,t[1]),ms().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=kt,s=ms();if(Tt){if(n===void 0)throw Error(Oe(407));n=n()}else{if(n=e(),ln===null)throw Error(Oe(349));ha&30||ZN(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Vb(t2.bind(null,r,i,t),[t]),r.flags|=2048,Ou(9,e2.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ms(),e=ln.identifierPrefix;if(Tt){var n=Hs,r=zs;n=(r&~(1<<32-Gr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ju++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=qO++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ZO={readContext:kr,useCallback:c2,useContext:kr,useEffect:Ev,useImperativeHandle:l2,useInsertionEffect:i2,useLayoutEffect:o2,useMemo:u2,useReducer:g0,useRef:s2,useState:function(){return g0(ku)},useDebugValue:Sv,useDeferredValue:function(t){var e=Or();return d2(e,Zt.memoizedState,t)},useTransition:function(){var t=g0(ku)[0],e=Or().memoizedState;return[t,e]},useMutableSource:JN,useSyncExternalStore:QN,useId:h2,unstable_isNewReconciler:!1},eP={readContext:kr,useCallback:c2,useContext:kr,useEffect:Ev,useImperativeHandle:l2,useInsertionEffect:i2,useLayoutEffect:o2,useMemo:u2,useReducer:x0,useRef:s2,useState:function(){return x0(ku)},useDebugValue:Sv,useDeferredValue:function(t){var e=Or();return Zt===null?e.memoizedState=t:d2(e,Zt.memoizedState,t)},useTransition:function(){var t=x0(ku)[0],e=Or().memoizedState;return[t,e]},useMutableSource:JN,useSyncExternalStore:QN,useId:h2,unstable_isNewReconciler:!1};function Vr(t,e){if(t&&t.defaultProps){e=Ot({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Tx(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ot({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ep={isMounted:function(t){return(t=t._reactInternals)?Ca(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=kn(),s=zi(t),i=qs(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ui(t,i,s),e!==null&&(Yr(e,t,s,r),Mh(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=kn(),s=zi(t),i=qs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ui(t,i,s),e!==null&&(Yr(e,t,s,r),Mh(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=kn(),r=zi(t),s=qs(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ui(t,s,r),e!==null&&(Yr(e,t,r,n),Mh(e,t,r))}};function zb(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Eu(n,r)||!Eu(s,i):!0}function g2(t,e,n){var r=!1,s=Qi,i=e.contextType;return typeof i=="object"&&i!==null?i=kr(i):(s=Yn(e)?ua:bn.current,r=e.contextTypes,i=(r=r!=null)?Il(t,s):Qi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ep,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Hb(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ep.enqueueReplaceState(e,e.state,null)}function Ax(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},gv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=kr(i):(i=Yn(e)?ua:bn.current,s.context=Il(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Tx(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ep.enqueueReplaceState(s,s.state,null),mf(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Dl(t,e){try{var n="",r=e;do n+=Ck(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function y0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Cx(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var tP=typeof WeakMap=="function"?WeakMap:Map;function x2(t,e,n){n=qs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){wf||(wf=!0,Fx=r),Cx(t,e)},n}function y2(t,e,n){n=qs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Cx(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Cx(t,e),typeof r!="function"&&(Vi===null?Vi=new Set([this]):Vi.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Xb(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new tP;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=mP.bind(null,t,e,n),e.then(t,t))}function Wb(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Kb(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=qs(-1,1),e.tag=2,Ui(n,e,1))),n.lanes|=1),t)}var nP=ii.ReactCurrentOwner,qn=!1;function Cn(t,e,n,r){e.child=t===null?KN(e,null,n,r):Ll(e,t.child,n,r)}function qb(t,e,n,r,s){n=n.render;var i=e.ref;return Tl(e,s),r=bv(t,e,n,r,i,s),n=_v(),t!==null&&!qn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ni(t,e,s)):(Tt&&n&&cv(e),e.flags|=1,Cn(t,e,r,s),e.child)}function Gb(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Pv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,v2(t,e,i,r,s)):(t=Vh(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Eu,n(a,r)&&t.ref===e.ref)return ni(t,e,s)}return e.flags|=1,t=Hi(i,r),t.ref=e.ref,t.return=e,e.child=t}function v2(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Eu(i,r)&&t.ref===e.ref)if(qn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(qn=!0);else return e.lanes=t.lanes,ni(t,e,s)}return jx(t,e,n,r,s)}function w2(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},bt(yl,ir),ir|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,bt(yl,ir),ir|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,bt(yl,ir),ir|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,bt(yl,ir),ir|=r;return Cn(t,e,s,n),e.child}function b2(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function jx(t,e,n,r,s){var i=Yn(n)?ua:bn.current;return i=Il(e,i),Tl(e,s),n=bv(t,e,n,r,i,s),r=_v(),t!==null&&!qn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ni(t,e,s)):(Tt&&r&&cv(e),e.flags|=1,Cn(t,e,n,s),e.child)}function Yb(t,e,n,r,s){if(Yn(n)){var i=!0;uf(e)}else i=!1;if(Tl(e,s),e.stateNode===null)Bh(t,e),g2(e,n,r),Ax(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=kr(u):(u=Yn(n)?ua:bn.current,u=Il(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Hb(e,a,r,u),Ni=!1;var f=e.memoizedState;a.state=f,mf(e,r,a,s),c=e.memoizedState,l!==r||f!==c||Gn.current||Ni?(typeof d=="function"&&(Tx(e,n,d,r),c=e.memoizedState),(l=Ni||zb(e,n,l,r,f,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,GN(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Vr(e.type,l),a.props=u,h=e.pendingProps,f=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=kr(c):(c=Yn(n)?ua:bn.current,c=Il(e,c));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Hb(e,a,r,c),Ni=!1,f=e.memoizedState,a.state=f,mf(e,r,a,s);var y=e.memoizedState;l!==h||f!==y||Gn.current||Ni?(typeof p=="function"&&(Tx(e,n,p,r),y=e.memoizedState),(u=Ni||zb(e,n,u,r,f,y,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),a.props=r,a.state=y,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return kx(t,e,n,r,i,s)}function kx(t,e,n,r,s,i){b2(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Lb(e,n,!1),ni(t,e,i);r=e.stateNode,nP.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Ll(e,t.child,null,i),e.child=Ll(e,null,l,i)):Cn(t,e,l,i),e.memoizedState=r.state,s&&Lb(e,n,!0),e.child}function _2(t){var e=t.stateNode;e.pendingContext?Rb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Rb(t,e.context,!1),xv(t,e.containerInfo)}function Jb(t,e,n,r,s){return Rl(),dv(s),e.flags|=256,Cn(t,e,n,r),e.child}var Ox={dehydrated:null,treeContext:null,retryLane:0};function Px(t){return{baseLanes:t,cachePool:null,transitions:null}}function E2(t,e,n){var r=e.pendingProps,s=jt.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),bt(jt,s&1),t===null)return Sx(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=rp(a,r,0,null),t=ra(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Px(n),e.memoizedState=Ox,t):Nv(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return rP(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Hi(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Hi(l,i):(i=ra(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Px(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Ox,r}return i=t.child,t=i.sibling,r=Hi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Nv(t,e){return e=rp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function $d(t,e,n,r){return r!==null&&dv(r),Ll(e,t.child,null,n),t=Nv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rP(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=y0(Error(Oe(422))),$d(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=rp({mode:"visible",children:r.children},s,0,null),i=ra(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ll(e,t.child,null,a),e.child.memoizedState=Px(a),e.memoizedState=Ox,i);if(!(e.mode&1))return $d(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(Oe(419)),r=y0(i,r,void 0),$d(t,e,a,r)}if(l=(a&t.childLanes)!==0,qn||l){if(r=ln,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ti(t,s),Yr(r,t,s,-1))}return Ov(),r=y0(Error(Oe(421))),$d(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=gP.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,ur=$i(s.nextSibling),dr=e,Tt=!0,Wr=null,t!==null&&(Sr[Nr++]=zs,Sr[Nr++]=Hs,Sr[Nr++]=da,zs=t.id,Hs=t.overflow,da=e),e=Nv(e,r.children),e.flags|=4096,e)}function Qb(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Nx(t.return,e,n)}function v0(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function S2(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Cn(t,e,r.children,n),r=jt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Qb(t,n,e);else if(t.tag===19)Qb(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(bt(jt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&gf(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),v0(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&gf(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}v0(e,!0,n,null,i);break;case"together":v0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ni(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),fa|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Oe(153));if(e.child!==null){for(t=e.child,n=Hi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function sP(t,e,n){switch(e.tag){case 3:_2(e),Rl();break;case 5:YN(e);break;case 1:Yn(e.type)&&uf(e);break;case 4:xv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;bt(ff,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(bt(jt,jt.current&1),e.flags|=128,null):n&e.child.childLanes?E2(t,e,n):(bt(jt,jt.current&1),t=ni(t,e,n),t!==null?t.sibling:null);bt(jt,jt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return S2(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),bt(jt,jt.current),r)break;return null;case 22:case 23:return e.lanes=0,w2(t,e,n)}return ni(t,e,n)}var N2,Ix,T2,A2;N2=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ix=function(){};T2=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Jo(Ns.current);var i=null;switch(n){case"input":s=tx(t,s),r=tx(t,r),i=[];break;case"select":s=Ot({},s,{value:void 0}),r=Ot({},r,{value:void 0}),i=[];break;case"textarea":s=sx(t,s),r=sx(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=lf)}ox(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(gu.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(gu.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&_t("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};A2=function(t,e,n,r){n!==r&&(e.flags|=4)};function xc(t,e){if(!Tt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function gn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function iP(t,e,n){var r=e.pendingProps;switch(uv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gn(e),null;case 1:return Yn(e.type)&&cf(),gn(e),null;case 3:return r=e.stateNode,Ml(),St(Gn),St(bn),vv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Fd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wr!==null&&(Ux(Wr),Wr=null))),Ix(t,e),gn(e),null;case 5:yv(e);var s=Jo(Cu.current);if(n=e.type,t!==null&&e.stateNode!=null)T2(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Oe(166));return gn(e),null}if(t=Jo(Ns.current),Fd(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[ys]=e,r[Tu]=i,t=(e.mode&1)!==0,n){case"dialog":_t("cancel",r),_t("close",r);break;case"iframe":case"object":case"embed":_t("load",r);break;case"video":case"audio":for(s=0;s<$c.length;s++)_t($c[s],r);break;case"source":_t("error",r);break;case"img":case"image":case"link":_t("error",r),_t("load",r);break;case"details":_t("toggle",r);break;case"input":ab(r,i),_t("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},_t("invalid",r);break;case"textarea":cb(r,i),_t("invalid",r)}ox(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Dd(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Dd(r.textContent,l,t),s=["children",""+l]):gu.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&_t("scroll",r)}switch(n){case"input":jd(r),lb(r,i,!0);break;case"textarea":jd(r),ub(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=lf)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=tN(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[ys]=e,t[Tu]=r,N2(t,e,!1,!1),e.stateNode=t;e:{switch(a=ax(n,r),n){case"dialog":_t("cancel",t),_t("close",t),s=r;break;case"iframe":case"object":case"embed":_t("load",t),s=r;break;case"video":case"audio":for(s=0;s<$c.length;s++)_t($c[s],t);s=r;break;case"source":_t("error",t),s=r;break;case"img":case"image":case"link":_t("error",t),_t("load",t),s=r;break;case"details":_t("toggle",t),s=r;break;case"input":ab(t,r),s=tx(t,r),_t("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ot({},r,{value:void 0}),_t("invalid",t);break;case"textarea":cb(t,r),s=sx(t,r),_t("invalid",t);break;default:s=r}ox(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?sN(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&nN(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&xu(t,c):typeof c=="number"&&xu(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(gu.hasOwnProperty(i)?c!=null&&i==="onScroll"&&_t("scroll",t):c!=null&&Gy(t,i,c,a))}switch(n){case"input":jd(t),lb(t,r,!1);break;case"textarea":jd(t),ub(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ji(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?_l(t,!!r.multiple,i,!1):r.defaultValue!=null&&_l(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=lf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return gn(e),null;case 6:if(t&&e.stateNode!=null)A2(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Oe(166));if(n=Jo(Cu.current),Jo(Ns.current),Fd(e)){if(r=e.stateNode,n=e.memoizedProps,r[ys]=e,(i=r.nodeValue!==n)&&(t=dr,t!==null))switch(t.tag){case 3:Dd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Dd(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ys]=e,e.stateNode=r}return gn(e),null;case 13:if(St(jt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Tt&&ur!==null&&e.mode&1&&!(e.flags&128))XN(),Rl(),e.flags|=98560,i=!1;else if(i=Fd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Oe(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Oe(317));i[ys]=e}else Rl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;gn(e),i=!1}else Wr!==null&&(Ux(Wr),Wr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||jt.current&1?en===0&&(en=3):Ov())),e.updateQueue!==null&&(e.flags|=4),gn(e),null);case 4:return Ml(),Ix(t,e),t===null&&Su(e.stateNode.containerInfo),gn(e),null;case 10:return pv(e.type._context),gn(e),null;case 17:return Yn(e.type)&&cf(),gn(e),null;case 19:if(St(jt),i=e.memoizedState,i===null)return gn(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)xc(i,!1);else{if(en!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=gf(t),a!==null){for(e.flags|=128,xc(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return bt(jt,jt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ut()>Fl&&(e.flags|=128,r=!0,xc(i,!1),e.lanes=4194304)}else{if(!r)if(t=gf(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),xc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Tt)return gn(e),null}else 2*Ut()-i.renderingStartTime>Fl&&n!==1073741824&&(e.flags|=128,r=!0,xc(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ut(),e.sibling=null,n=jt.current,bt(jt,r?n&1|2:n&1),e):(gn(e),null);case 22:case 23:return kv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ir&1073741824&&(gn(e),e.subtreeFlags&6&&(e.flags|=8192)):gn(e),null;case 24:return null;case 25:return null}throw Error(Oe(156,e.tag))}function oP(t,e){switch(uv(e),e.tag){case 1:return Yn(e.type)&&cf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ml(),St(Gn),St(bn),vv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return yv(e),null;case 13:if(St(jt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Oe(340));Rl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return St(jt),null;case 4:return Ml(),null;case 10:return pv(e.type._context),null;case 22:case 23:return kv(),null;case 24:return null;default:return null}}var Ud=!1,vn=!1,aP=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function xl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){It(t,e,r)}else n.current=null}function Rx(t,e,n){try{n()}catch(r){It(t,e,r)}}var Zb=!1;function lP(t,e){if(xx=sf,t=PN(),lv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(l=a+s),h!==i||r!==0&&h.nodeType!==3||(c=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++u===s&&(l=a),f===i&&++d===r&&(c=a),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(yx={focusedElem:t,selectionRange:n},sf=!1,Ve=e;Ve!==null;)if(e=Ve,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ve=t;else for(;Ve!==null;){e=Ve;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var b=y.memoizedProps,_=y.memoizedState,m=e.stateNode,x=m.getSnapshotBeforeUpdate(e.elementType===e.type?b:Vr(e.type,b),_);m.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Oe(163))}}catch(v){It(e,e.return,v)}if(t=e.sibling,t!==null){t.return=e.return,Ve=t;break}Ve=e.return}return y=Zb,Zb=!1,y}function Zc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Rx(e,n,i)}s=s.next}while(s!==r)}}function tp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Lx(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function C2(t){var e=t.alternate;e!==null&&(t.alternate=null,C2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ys],delete e[Tu],delete e[bx],delete e[HO],delete e[XO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function j2(t){return t.tag===5||t.tag===3||t.tag===4}function e_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||j2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Mx(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=lf));else if(r!==4&&(t=t.child,t!==null))for(Mx(t,e,n),t=t.sibling;t!==null;)Mx(t,e,n),t=t.sibling}function Dx(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Dx(t,e,n),t=t.sibling;t!==null;)Dx(t,e,n),t=t.sibling}var cn=null,zr=!1;function hi(t,e,n){for(n=n.child;n!==null;)k2(t,e,n),n=n.sibling}function k2(t,e,n){if(Ss&&typeof Ss.onCommitFiberUnmount=="function")try{Ss.onCommitFiberUnmount(Kf,n)}catch{}switch(n.tag){case 5:vn||xl(n,e);case 6:var r=cn,s=zr;cn=null,hi(t,e,n),cn=r,zr=s,cn!==null&&(zr?(t=cn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):cn.removeChild(n.stateNode));break;case 18:cn!==null&&(zr?(t=cn,n=n.stateNode,t.nodeType===8?h0(t.parentNode,n):t.nodeType===1&&h0(t,n),bu(t)):h0(cn,n.stateNode));break;case 4:r=cn,s=zr,cn=n.stateNode.containerInfo,zr=!0,hi(t,e,n),cn=r,zr=s;break;case 0:case 11:case 14:case 15:if(!vn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Rx(n,e,a),s=s.next}while(s!==r)}hi(t,e,n);break;case 1:if(!vn&&(xl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){It(n,e,l)}hi(t,e,n);break;case 21:hi(t,e,n);break;case 22:n.mode&1?(vn=(r=vn)||n.memoizedState!==null,hi(t,e,n),vn=r):hi(t,e,n);break;default:hi(t,e,n)}}function t_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new aP),e.forEach(function(r){var s=xP.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Lr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:cn=l.stateNode,zr=!1;break e;case 3:cn=l.stateNode.containerInfo,zr=!0;break e;case 4:cn=l.stateNode.containerInfo,zr=!0;break e}l=l.return}if(cn===null)throw Error(Oe(160));k2(i,a,s),cn=null,zr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){It(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)O2(e,t),e=e.sibling}function O2(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Lr(e,t),os(t),r&4){try{Zc(3,t,t.return),tp(3,t)}catch(b){It(t,t.return,b)}try{Zc(5,t,t.return)}catch(b){It(t,t.return,b)}}break;case 1:Lr(e,t),os(t),r&512&&n!==null&&xl(n,n.return);break;case 5:if(Lr(e,t),os(t),r&512&&n!==null&&xl(n,n.return),t.flags&32){var s=t.stateNode;try{xu(s,"")}catch(b){It(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&ZS(s,i),ax(l,a);var u=ax(l,i);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?sN(s,h):d==="dangerouslySetInnerHTML"?nN(s,h):d==="children"?xu(s,h):Gy(s,d,h,u)}switch(l){case"input":nx(s,i);break;case"textarea":eN(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?_l(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?_l(s,!!i.multiple,i.defaultValue,!0):_l(s,!!i.multiple,i.multiple?[]:"",!1))}s[Tu]=i}catch(b){It(t,t.return,b)}}break;case 6:if(Lr(e,t),os(t),r&4){if(t.stateNode===null)throw Error(Oe(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(b){It(t,t.return,b)}}break;case 3:if(Lr(e,t),os(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{bu(e.containerInfo)}catch(b){It(t,t.return,b)}break;case 4:Lr(e,t),os(t);break;case 13:Lr(e,t),os(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Cv=Ut())),r&4&&t_(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(vn=(u=vn)||d,Lr(e,t),vn=u):Lr(e,t),os(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Ve=t,d=t.child;d!==null;){for(h=Ve=d;Ve!==null;){switch(f=Ve,p=f.child,f.tag){case 0:case 11:case 14:case 15:Zc(4,f,f.return);break;case 1:xl(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(b){It(r,n,b)}}break;case 5:xl(f,f.return);break;case 22:if(f.memoizedState!==null){r_(h);continue}}p!==null?(p.return=f,Ve=p):r_(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=rN("display",a))}catch(b){It(t,t.return,b)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(b){It(t,t.return,b)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Lr(e,t),os(t),r&4&&t_(t);break;case 21:break;default:Lr(e,t),os(t)}}function os(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(j2(n)){var r=n;break e}n=n.return}throw Error(Oe(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(xu(s,""),r.flags&=-33);var i=e_(t);Dx(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=e_(t);Mx(t,l,a);break;default:throw Error(Oe(161))}}catch(c){It(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function cP(t,e,n){Ve=t,P2(t)}function P2(t,e,n){for(var r=(t.mode&1)!==0;Ve!==null;){var s=Ve,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Ud;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||vn;l=Ud;var u=vn;if(Ud=a,(vn=c)&&!u)for(Ve=s;Ve!==null;)a=Ve,c=a.child,a.tag===22&&a.memoizedState!==null?s_(s):c!==null?(c.return=a,Ve=c):s_(s);for(;i!==null;)Ve=i,P2(i),i=i.sibling;Ve=s,Ud=l,vn=u}n_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ve=i):n_(t)}}function n_(t){for(;Ve!==null;){var e=Ve;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vn||tp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!vn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Vr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&$b(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}$b(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&bu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Oe(163))}vn||e.flags&512&&Lx(e)}catch(f){It(e,e.return,f)}}if(e===t){Ve=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ve=n;break}Ve=e.return}}function r_(t){for(;Ve!==null;){var e=Ve;if(e===t){Ve=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ve=n;break}Ve=e.return}}function s_(t){for(;Ve!==null;){var e=Ve;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{tp(4,e)}catch(c){It(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){It(e,s,c)}}var i=e.return;try{Lx(e)}catch(c){It(e,i,c)}break;case 5:var a=e.return;try{Lx(e)}catch(c){It(e,a,c)}}}catch(c){It(e,e.return,c)}if(e===t){Ve=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Ve=l;break}Ve=e.return}}var uP=Math.ceil,vf=ii.ReactCurrentDispatcher,Tv=ii.ReactCurrentOwner,Cr=ii.ReactCurrentBatchConfig,pt=0,ln=null,qt=null,hn=0,ir=0,yl=mo(0),en=0,Pu=null,fa=0,np=0,Av=0,eu=null,Hn=null,Cv=0,Fl=1/0,Fs=null,wf=!1,Fx=null,Vi=null,Vd=!1,Mi=null,bf=0,tu=0,Bx=null,$h=-1,Uh=0;function kn(){return pt&6?Ut():$h!==-1?$h:$h=Ut()}function zi(t){return t.mode&1?pt&2&&hn!==0?hn&-hn:KO.transition!==null?(Uh===0&&(Uh=gN()),Uh):(t=xt,t!==0||(t=window.event,t=t===void 0?16:EN(t.type)),t):1}function Yr(t,e,n,r){if(50<tu)throw tu=0,Bx=null,Error(Oe(185));qu(t,n,r),(!(pt&2)||t!==ln)&&(t===ln&&(!(pt&2)&&(np|=n),en===4&&ji(t,hn)),Jn(t,r),n===1&&pt===0&&!(e.mode&1)&&(Fl=Ut()+500,Qf&&go()))}function Jn(t,e){var n=t.callbackNode;Kk(t,e);var r=rf(t,t===ln?hn:0);if(r===0)n!==null&&fb(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&fb(n),e===1)t.tag===0?WO(i_.bind(null,t)):VN(i_.bind(null,t)),VO(function(){!(pt&6)&&go()}),n=null;else{switch(xN(r)){case 1:n=ev;break;case 4:n=pN;break;case 16:n=nf;break;case 536870912:n=mN;break;default:n=nf}n=$2(n,I2.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function I2(t,e){if($h=-1,Uh=0,pt&6)throw Error(Oe(327));var n=t.callbackNode;if(Al()&&t.callbackNode!==n)return null;var r=rf(t,t===ln?hn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=_f(t,r);else{e=r;var s=pt;pt|=2;var i=L2();(ln!==t||hn!==e)&&(Fs=null,Fl=Ut()+500,na(t,e));do try{fP();break}catch(l){R2(t,l)}while(1);fv(),vf.current=i,pt=s,qt!==null?e=0:(ln=null,hn=0,e=en)}if(e!==0){if(e===2&&(s=hx(t),s!==0&&(r=s,e=$x(t,s))),e===1)throw n=Pu,na(t,0),ji(t,r),Jn(t,Ut()),n;if(e===6)ji(t,r);else{if(s=t.current.alternate,!(r&30)&&!dP(s)&&(e=_f(t,r),e===2&&(i=hx(t),i!==0&&(r=i,e=$x(t,i))),e===1))throw n=Pu,na(t,0),ji(t,r),Jn(t,Ut()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Oe(345));case 2:zo(t,Hn,Fs);break;case 3:if(ji(t,r),(r&130023424)===r&&(e=Cv+500-Ut(),10<e)){if(rf(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){kn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=wx(zo.bind(null,t,Hn,Fs),e);break}zo(t,Hn,Fs);break;case 4:if(ji(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Gr(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Ut()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*uP(r/1960))-r,10<r){t.timeoutHandle=wx(zo.bind(null,t,Hn,Fs),r);break}zo(t,Hn,Fs);break;case 5:zo(t,Hn,Fs);break;default:throw Error(Oe(329))}}}return Jn(t,Ut()),t.callbackNode===n?I2.bind(null,t):null}function $x(t,e){var n=eu;return t.current.memoizedState.isDehydrated&&(na(t,e).flags|=256),t=_f(t,e),t!==2&&(e=Hn,Hn=n,e!==null&&Ux(e)),t}function Ux(t){Hn===null?Hn=t:Hn.push.apply(Hn,t)}function dP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!es(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ji(t,e){for(e&=~Av,e&=~np,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Gr(e),r=1<<n;t[n]=-1,e&=~r}}function i_(t){if(pt&6)throw Error(Oe(327));Al();var e=rf(t,0);if(!(e&1))return Jn(t,Ut()),null;var n=_f(t,e);if(t.tag!==0&&n===2){var r=hx(t);r!==0&&(e=r,n=$x(t,r))}if(n===1)throw n=Pu,na(t,0),ji(t,e),Jn(t,Ut()),n;if(n===6)throw Error(Oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zo(t,Hn,Fs),Jn(t,Ut()),null}function jv(t,e){var n=pt;pt|=1;try{return t(e)}finally{pt=n,pt===0&&(Fl=Ut()+500,Qf&&go())}}function pa(t){Mi!==null&&Mi.tag===0&&!(pt&6)&&Al();var e=pt;pt|=1;var n=Cr.transition,r=xt;try{if(Cr.transition=null,xt=1,t)return t()}finally{xt=r,Cr.transition=n,pt=e,!(pt&6)&&go()}}function kv(){ir=yl.current,St(yl)}function na(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,UO(n)),qt!==null)for(n=qt.return;n!==null;){var r=n;switch(uv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&cf();break;case 3:Ml(),St(Gn),St(bn),vv();break;case 5:yv(r);break;case 4:Ml();break;case 13:St(jt);break;case 19:St(jt);break;case 10:pv(r.type._context);break;case 22:case 23:kv()}n=n.return}if(ln=t,qt=t=Hi(t.current,null),hn=ir=e,en=0,Pu=null,Av=np=fa=0,Hn=eu=null,Yo!==null){for(e=0;e<Yo.length;e++)if(n=Yo[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Yo=null}return t}function R2(t,e){do{var n=qt;try{if(fv(),Dh.current=yf,xf){for(var r=kt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}xf=!1}if(ha=0,rn=Zt=kt=null,Qc=!1,ju=0,Tv.current=null,n===null||n.return===null){en=1,Pu=e,qt=null;break}e:{var i=t,a=n.return,l=n,c=e;if(e=hn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Wb(a);if(p!==null){p.flags&=-257,Kb(p,a,l,i,e),p.mode&1&&Xb(i,u,e),e=p,c=u;var y=e.updateQueue;if(y===null){var b=new Set;b.add(c),e.updateQueue=b}else y.add(c);break e}else{if(!(e&1)){Xb(i,u,e),Ov();break e}c=Error(Oe(426))}}else if(Tt&&l.mode&1){var _=Wb(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Kb(_,a,l,i,e),dv(Dl(c,l));break e}}i=c=Dl(c,l),en!==4&&(en=2),eu===null?eu=[i]:eu.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=x2(i,c,e);Bb(i,m);break e;case 1:l=c;var x=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Vi===null||!Vi.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var v=y2(i,l,e);Bb(i,v);break e}}i=i.return}while(i!==null)}D2(n)}catch(T){e=T,qt===n&&n!==null&&(qt=n=n.return);continue}break}while(1)}function L2(){var t=vf.current;return vf.current=yf,t===null?yf:t}function Ov(){(en===0||en===3||en===2)&&(en=4),ln===null||!(fa&268435455)&&!(np&268435455)||ji(ln,hn)}function _f(t,e){var n=pt;pt|=2;var r=L2();(ln!==t||hn!==e)&&(Fs=null,na(t,e));do try{hP();break}catch(s){R2(t,s)}while(1);if(fv(),pt=n,vf.current=r,qt!==null)throw Error(Oe(261));return ln=null,hn=0,en}function hP(){for(;qt!==null;)M2(qt)}function fP(){for(;qt!==null&&!Fk();)M2(qt)}function M2(t){var e=B2(t.alternate,t,ir);t.memoizedProps=t.pendingProps,e===null?D2(t):qt=e,Tv.current=null}function D2(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=oP(n,e),n!==null){n.flags&=32767,qt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{en=6,qt=null;return}}else if(n=iP(n,e,ir),n!==null){qt=n;return}if(e=e.sibling,e!==null){qt=e;return}qt=e=t}while(e!==null);en===0&&(en=5)}function zo(t,e,n){var r=xt,s=Cr.transition;try{Cr.transition=null,xt=1,pP(t,e,n,r)}finally{Cr.transition=s,xt=r}return null}function pP(t,e,n,r){do Al();while(Mi!==null);if(pt&6)throw Error(Oe(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Oe(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(qk(t,i),t===ln&&(qt=ln=null,hn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Vd||(Vd=!0,$2(nf,function(){return Al(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Cr.transition,Cr.transition=null;var a=xt;xt=1;var l=pt;pt|=4,Tv.current=null,lP(t,n),O2(n,t),RO(yx),sf=!!xx,yx=xx=null,t.current=n,cP(n),Bk(),pt=l,xt=a,Cr.transition=i}else t.current=n;if(Vd&&(Vd=!1,Mi=t,bf=s),i=t.pendingLanes,i===0&&(Vi=null),Vk(n.stateNode),Jn(t,Ut()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(wf)throw wf=!1,t=Fx,Fx=null,t;return bf&1&&t.tag!==0&&Al(),i=t.pendingLanes,i&1?t===Bx?tu++:(tu=0,Bx=t):tu=0,go(),null}function Al(){if(Mi!==null){var t=xN(bf),e=Cr.transition,n=xt;try{if(Cr.transition=null,xt=16>t?16:t,Mi===null)var r=!1;else{if(t=Mi,Mi=null,bf=0,pt&6)throw Error(Oe(331));var s=pt;for(pt|=4,Ve=t.current;Ve!==null;){var i=Ve,a=i.child;if(Ve.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Ve=u;Ve!==null;){var d=Ve;switch(d.tag){case 0:case 11:case 15:Zc(8,d,i)}var h=d.child;if(h!==null)h.return=d,Ve=h;else for(;Ve!==null;){d=Ve;var f=d.sibling,p=d.return;if(C2(d),d===u){Ve=null;break}if(f!==null){f.return=p,Ve=f;break}Ve=p}}}var y=i.alternate;if(y!==null){var b=y.child;if(b!==null){y.child=null;do{var _=b.sibling;b.sibling=null,b=_}while(b!==null)}}Ve=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Ve=a;else e:for(;Ve!==null;){if(i=Ve,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Zc(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,Ve=m;break e}Ve=i.return}}var x=t.current;for(Ve=x;Ve!==null;){a=Ve;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,Ve=w;else e:for(a=x;Ve!==null;){if(l=Ve,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:tp(9,l)}}catch(T){It(l,l.return,T)}if(l===a){Ve=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,Ve=v;break e}Ve=l.return}}if(pt=s,go(),Ss&&typeof Ss.onPostCommitFiberRoot=="function")try{Ss.onPostCommitFiberRoot(Kf,t)}catch{}r=!0}return r}finally{xt=n,Cr.transition=e}}return!1}function o_(t,e,n){e=Dl(n,e),e=x2(t,e,1),t=Ui(t,e,1),e=kn(),t!==null&&(qu(t,1,e),Jn(t,e))}function It(t,e,n){if(t.tag===3)o_(t,t,n);else for(;e!==null;){if(e.tag===3){o_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vi===null||!Vi.has(r))){t=Dl(n,t),t=y2(e,t,1),e=Ui(e,t,1),t=kn(),e!==null&&(qu(e,1,t),Jn(e,t));break}}e=e.return}}function mP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=kn(),t.pingedLanes|=t.suspendedLanes&n,ln===t&&(hn&n)===n&&(en===4||en===3&&(hn&130023424)===hn&&500>Ut()-Cv?na(t,0):Av|=n),Jn(t,e)}function F2(t,e){e===0&&(t.mode&1?(e=Pd,Pd<<=1,!(Pd&130023424)&&(Pd=4194304)):e=1);var n=kn();t=ti(t,e),t!==null&&(qu(t,e,n),Jn(t,n))}function gP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),F2(t,n)}function xP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Oe(314))}r!==null&&r.delete(e),F2(t,n)}var B2;B2=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Gn.current)qn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return qn=!1,sP(t,e,n);qn=!!(t.flags&131072)}else qn=!1,Tt&&e.flags&1048576&&zN(e,hf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Bh(t,e),t=e.pendingProps;var s=Il(e,bn.current);Tl(e,n),s=bv(null,e,r,t,s,n);var i=_v();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yn(r)?(i=!0,uf(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,gv(e),s.updater=ep,e.stateNode=s,s._reactInternals=e,Ax(e,r,t,n),e=kx(null,e,r,!0,i,n)):(e.tag=0,Tt&&i&&cv(e),Cn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Bh(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=vP(r),t=Vr(r,t),s){case 0:e=jx(null,e,r,t,n);break e;case 1:e=Yb(null,e,r,t,n);break e;case 11:e=qb(null,e,r,t,n);break e;case 14:e=Gb(null,e,r,Vr(r.type,t),n);break e}throw Error(Oe(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Vr(r,s),jx(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Vr(r,s),Yb(t,e,r,s,n);case 3:e:{if(_2(e),t===null)throw Error(Oe(387));r=e.pendingProps,i=e.memoizedState,s=i.element,GN(t,e),mf(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Dl(Error(Oe(423)),e),e=Jb(t,e,r,n,s);break e}else if(r!==s){s=Dl(Error(Oe(424)),e),e=Jb(t,e,r,n,s);break e}else for(ur=$i(e.stateNode.containerInfo.firstChild),dr=e,Tt=!0,Wr=null,n=KN(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Rl(),r===s){e=ni(t,e,n);break e}Cn(t,e,r,n)}e=e.child}return e;case 5:return YN(e),t===null&&Sx(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,vx(r,s)?a=null:i!==null&&vx(r,i)&&(e.flags|=32),b2(t,e),Cn(t,e,a,n),e.child;case 6:return t===null&&Sx(e),null;case 13:return E2(t,e,n);case 4:return xv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ll(e,null,r,n):Cn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Vr(r,s),qb(t,e,r,s,n);case 7:return Cn(t,e,e.pendingProps,n),e.child;case 8:return Cn(t,e,e.pendingProps.children,n),e.child;case 12:return Cn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,bt(ff,r._currentValue),r._currentValue=a,i!==null)if(es(i.value,a)){if(i.children===s.children&&!Gn.current){e=ni(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=qs(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Nx(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(Oe(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Nx(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Cn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Tl(e,n),s=kr(s),r=r(s),e.flags|=1,Cn(t,e,r,n),e.child;case 14:return r=e.type,s=Vr(r,e.pendingProps),s=Vr(r.type,s),Gb(t,e,r,s,n);case 15:return v2(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Vr(r,s),Bh(t,e),e.tag=1,Yn(r)?(t=!0,uf(e)):t=!1,Tl(e,n),g2(e,r,s),Ax(e,r,s,n),kx(null,e,r,!0,t,n);case 19:return S2(t,e,n);case 22:return w2(t,e,n)}throw Error(Oe(156,e.tag))};function $2(t,e){return fN(t,e)}function yP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tr(t,e,n,r){return new yP(t,e,n,r)}function Pv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vP(t){if(typeof t=="function")return Pv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Jy)return 11;if(t===Qy)return 14}return 2}function Hi(t,e){var n=t.alternate;return n===null?(n=Tr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Vh(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Pv(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ll:return ra(n.children,s,i,e);case Yy:a=8,s|=8;break;case Jg:return t=Tr(12,n,e,s|2),t.elementType=Jg,t.lanes=i,t;case Qg:return t=Tr(13,n,e,s),t.elementType=Qg,t.lanes=i,t;case Zg:return t=Tr(19,n,e,s),t.elementType=Zg,t.lanes=i,t;case YS:return rp(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case qS:a=10;break e;case GS:a=9;break e;case Jy:a=11;break e;case Qy:a=14;break e;case Si:a=16,r=null;break e}throw Error(Oe(130,t==null?t:typeof t,""))}return e=Tr(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ra(t,e,n,r){return t=Tr(7,t,r,e),t.lanes=n,t}function rp(t,e,n,r){return t=Tr(22,t,r,e),t.elementType=YS,t.lanes=n,t.stateNode={isHidden:!1},t}function w0(t,e,n){return t=Tr(6,t,null,e),t.lanes=n,t}function b0(t,e,n){return e=Tr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function wP(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=t0(0),this.expirationTimes=t0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=t0(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Iv(t,e,n,r,s,i,a,l,c){return t=new wP(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Tr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gv(i),t}function bP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:al,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function U2(t){if(!t)return Qi;t=t._reactInternals;e:{if(Ca(t)!==t||t.tag!==1)throw Error(Oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Oe(171))}if(t.tag===1){var n=t.type;if(Yn(n))return UN(t,n,e)}return e}function V2(t,e,n,r,s,i,a,l,c){return t=Iv(n,r,!0,t,s,i,a,l,c),t.context=U2(null),n=t.current,r=kn(),s=zi(n),i=qs(r,s),i.callback=e??null,Ui(n,i,s),t.current.lanes=s,qu(t,s,r),Jn(t,r),t}function sp(t,e,n,r){var s=e.current,i=kn(),a=zi(s);return n=U2(n),e.context===null?e.context=n:e.pendingContext=n,e=qs(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ui(s,e,a),t!==null&&(Yr(t,s,a,i),Mh(t,s,a)),a}function Ef(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function a_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Rv(t,e){a_(t,e),(t=t.alternate)&&a_(t,e)}function _P(){return null}var z2=typeof reportError=="function"?reportError:function(t){console.error(t)};function Lv(t){this._internalRoot=t}ip.prototype.render=Lv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Oe(409));sp(t,e,null,null)};ip.prototype.unmount=Lv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;pa(function(){sp(null,t,null,null)}),e[ei]=null}};function ip(t){this._internalRoot=t}ip.prototype.unstable_scheduleHydration=function(t){if(t){var e=wN();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ci.length&&e!==0&&e<Ci[n].priority;n++);Ci.splice(n,0,t),n===0&&_N(t)}};function Mv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function op(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function l_(){}function EP(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Ef(a);i.call(u)}}var a=V2(e,r,t,0,null,!1,!1,"",l_);return t._reactRootContainer=a,t[ei]=a.current,Su(t.nodeType===8?t.parentNode:t),pa(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Ef(c);l.call(u)}}var c=Iv(t,0,!1,null,null,!1,!1,"",l_);return t._reactRootContainer=c,t[ei]=c.current,Su(t.nodeType===8?t.parentNode:t),pa(function(){sp(e,c,n,r)}),c}function ap(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=Ef(a);l.call(c)}}sp(e,a,t,s)}else a=EP(n,e,t,s,r);return Ef(a)}yN=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Bc(e.pendingLanes);n!==0&&(tv(e,n|1),Jn(e,Ut()),!(pt&6)&&(Fl=Ut()+500,go()))}break;case 13:pa(function(){var r=ti(t,1);if(r!==null){var s=kn();Yr(r,t,1,s)}}),Rv(t,1)}};nv=function(t){if(t.tag===13){var e=ti(t,134217728);if(e!==null){var n=kn();Yr(e,t,134217728,n)}Rv(t,134217728)}};vN=function(t){if(t.tag===13){var e=zi(t),n=ti(t,e);if(n!==null){var r=kn();Yr(n,t,e,r)}Rv(t,e)}};wN=function(){return xt};bN=function(t,e){var n=xt;try{return xt=t,e()}finally{xt=n}};cx=function(t,e,n){switch(e){case"input":if(nx(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Jf(r);if(!s)throw Error(Oe(90));QS(r),nx(r,s)}}}break;case"textarea":eN(t,n);break;case"select":e=n.value,e!=null&&_l(t,!!n.multiple,e,!1)}};aN=jv;lN=pa;var SP={usingClientEntryPoint:!1,Events:[Yu,hl,Jf,iN,oN,jv]},yc={findFiberByHostInstance:Go,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},NP={bundleType:yc.bundleType,version:yc.version,rendererPackageName:yc.rendererPackageName,rendererConfig:yc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ii.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=dN(t),t===null?null:t.stateNode},findFiberByHostInstance:yc.findFiberByHostInstance||_P,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zd.isDisabled&&zd.supportsFiber)try{Kf=zd.inject(NP),Ss=zd}catch{}}pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SP;pr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mv(e))throw Error(Oe(200));return bP(t,e,null,n)};pr.createRoot=function(t,e){if(!Mv(t))throw Error(Oe(299));var n=!1,r="",s=z2;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Iv(t,1,!1,null,null,n,!1,r,s),t[ei]=e.current,Su(t.nodeType===8?t.parentNode:t),new Lv(e)};pr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Oe(188)):(t=Object.keys(t).join(","),Error(Oe(268,t)));return t=dN(e),t=t===null?null:t.stateNode,t};pr.flushSync=function(t){return pa(t)};pr.hydrate=function(t,e,n){if(!op(e))throw Error(Oe(200));return ap(null,t,e,!0,n)};pr.hydrateRoot=function(t,e,n){if(!Mv(t))throw Error(Oe(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=z2;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=V2(e,null,t,1,n??null,s,!1,i,a),t[ei]=e.current,Su(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ip(e)};pr.render=function(t,e,n){if(!op(e))throw Error(Oe(200));return ap(null,t,e,!1,n)};pr.unmountComponentAtNode=function(t){if(!op(t))throw Error(Oe(40));return t._reactRootContainer?(pa(function(){ap(null,null,t,!1,function(){t._reactRootContainer=null,t[ei]=null})}),!0):!1};pr.unstable_batchedUpdates=jv;pr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!op(n))throw Error(Oe(200));if(t==null||t._reactInternals===void 0)throw Error(Oe(38));return ap(t,e,n,!1,r)};pr.version="18.3.1-next-f1338f8080-20240426";function H2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(H2)}catch(t){console.error(t)}}H2(),HS.exports=pr;var TP=HS.exports,c_=TP;Gg.createRoot=c_.createRoot,Gg.hydrateRoot=c_.hydrateRoot;let AP={data:""},CP=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||AP,jP=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,kP=/\/\*[^]*?\*\/|  +/g,u_=/\n+/g,ki=(t,e)=>{let n="",r="",s="";for(let i in t){let a=t[i];i[0]=="@"?i[1]=="i"?n=i+" "+a+";":r+=i[1]=="f"?ki(a,i):i+"{"+ki(a,i[1]=="k"?"":e)+"}":typeof a=="object"?r+=ki(a,e?e.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):a!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=ki.p?ki.p(i,a):i+":"+a+";")}return n+(e&&s?e+"{"+s+"}":s)+r},Os={},X2=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+X2(t[n]);return e}return t},OP=(t,e,n,r,s)=>{let i=X2(t),a=Os[i]||(Os[i]=(c=>{let u=0,d=11;for(;u<c.length;)d=101*d+c.charCodeAt(u++)>>>0;return"go"+d})(i));if(!Os[a]){let c=i!==t?t:(u=>{let d,h,f=[{}];for(;d=jP.exec(u.replace(kP,""));)d[4]?f.shift():d[3]?(h=d[3].replace(u_," ").trim(),f.unshift(f[0][h]=f[0][h]||{})):f[0][d[1]]=d[2].replace(u_," ").trim();return f[0]})(t);Os[a]=ki(s?{["@keyframes "+a]:c}:c,n?"":"."+a)}let l=n&&Os.g?Os.g:null;return n&&(Os.g=Os[a]),((c,u,d,h)=>{h?u.data=u.data.replace(h,c):u.data.indexOf(c)===-1&&(u.data=d?c+u.data:u.data+c)})(Os[a],e,r,l),a},PP=(t,e,n)=>t.reduce((r,s,i)=>{let a=e[i];if(a&&a.call){let l=a(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;a=c?"."+c:l&&typeof l=="object"?l.props?"":ki(l,""):l===!1?"":l}return r+s+(a??"")},"");function lp(t){let e=this||{},n=t.call?t(e.p):t;return OP(n.unshift?n.raw?PP(n,[].slice.call(arguments,1),e.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):n,CP(e.target),e.g,e.o,e.k)}let W2,Vx,zx;lp.bind({g:1});let ri=lp.bind({k:1});function IP(t,e,n,r){ki.p=e,W2=t,Vx=n,zx=r}function xo(t,e){let n=this||{};return function(){let r=arguments;function s(i,a){let l=Object.assign({},i),c=l.className||s.className;n.p=Object.assign({theme:Vx&&Vx()},l),n.o=/ *go\d+/.test(c),l.className=lp.apply(n,r)+(c?" "+c:""),e&&(l.ref=a);let u=t;return t[0]&&(u=l.as||t,delete l.as),zx&&u[0]&&zx(l),W2(u,l)}return e?e(s):s}}var RP=t=>typeof t=="function",Sf=(t,e)=>RP(t)?t(e):t,LP=(()=>{let t=0;return()=>(++t).toString()})(),K2=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),MP=20,q2=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,MP)};case 1:return{...t,toasts:t.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:n}=e;return q2(t,{type:t.toasts.find(i=>i.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(i=>i.id===r||r===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+s}))}}},zh=[],Hh={toasts:[],pausedAt:void 0},ja=t=>{Hh=q2(Hh,t),zh.forEach(e=>{e(Hh)})},DP={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},FP=(t={})=>{let[e,n]=M.useState(Hh);M.useEffect(()=>(zh.push(n),()=>{let s=zh.indexOf(n);s>-1&&zh.splice(s,1)}),[e]);let r=e.toasts.map(s=>{var i,a,l;return{...t,...t[s.type],...s,removeDelay:s.removeDelay||((i=t[s.type])==null?void 0:i.removeDelay)||(t==null?void 0:t.removeDelay),duration:s.duration||((a=t[s.type])==null?void 0:a.duration)||(t==null?void 0:t.duration)||DP[s.type],style:{...t.style,...(l=t[s.type])==null?void 0:l.style,...s.style}}});return{...e,toasts:r}},BP=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||LP()}),Qu=t=>(e,n)=>{let r=BP(e,t,n);return ja({type:2,toast:r}),r.id},jn=(t,e)=>Qu("blank")(t,e);jn.error=Qu("error");jn.success=Qu("success");jn.loading=Qu("loading");jn.custom=Qu("custom");jn.dismiss=t=>{ja({type:3,toastId:t})};jn.remove=t=>ja({type:4,toastId:t});jn.promise=(t,e,n)=>{let r=jn.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let i=e.success?Sf(e.success,s):void 0;return i?jn.success(i,{id:r,...n,...n==null?void 0:n.success}):jn.dismiss(r),s}).catch(s=>{let i=e.error?Sf(e.error,s):void 0;i?jn.error(i,{id:r,...n,...n==null?void 0:n.error}):jn.dismiss(r)}),t};var $P=(t,e)=>{ja({type:1,toast:{id:t,height:e}})},UP=()=>{ja({type:5,time:Date.now()})},nu=new Map,VP=1e3,zP=(t,e=VP)=>{if(nu.has(t))return;let n=setTimeout(()=>{nu.delete(t),ja({type:4,toastId:t})},e);nu.set(t,n)},HP=t=>{let{toasts:e,pausedAt:n}=FP(t);M.useEffect(()=>{if(n)return;let i=Date.now(),a=e.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(i-l.createdAt);if(c<0){l.visible&&jn.dismiss(l.id);return}return setTimeout(()=>jn.dismiss(l.id),c)});return()=>{a.forEach(l=>l&&clearTimeout(l))}},[e,n]);let r=M.useCallback(()=>{n&&ja({type:6,time:Date.now()})},[n]),s=M.useCallback((i,a)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:u}=a||{},d=e.filter(p=>(p.position||u)===(i.position||u)&&p.height),h=d.findIndex(p=>p.id===i.id),f=d.filter((p,y)=>y<h&&p.visible).length;return d.filter(p=>p.visible).slice(...l?[f+1]:[0,f]).reduce((p,y)=>p+(y.height||0)+c,0)},[e]);return M.useEffect(()=>{e.forEach(i=>{if(i.dismissed)zP(i.id,i.removeDelay);else{let a=nu.get(i.id);a&&(clearTimeout(a),nu.delete(i.id))}})},[e]),{toasts:e,handlers:{updateHeight:$P,startPause:UP,endPause:r,calculateOffset:s}}},XP=ri`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,WP=ri`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,KP=ri`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,qP=xo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${XP} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${WP} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${KP} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,GP=ri`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,YP=xo("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${GP} 1s linear infinite;
`,JP=ri`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,QP=ri`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,ZP=xo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${JP} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${QP} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,eI=xo("div")`
  position: absolute;
`,tI=xo("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,nI=ri`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,rI=xo("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${nI} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,sI=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?M.createElement(rI,null,e):e:n==="blank"?null:M.createElement(tI,null,M.createElement(YP,{...r}),n!=="loading"&&M.createElement(eI,null,n==="error"?M.createElement(qP,{...r}):M.createElement(ZP,{...r})))},iI=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,oI=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,aI="0%{opacity:0;} 100%{opacity:1;}",lI="0%{opacity:1;} 100%{opacity:0;}",cI=xo("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,uI=xo("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,dI=(t,e)=>{let n=t.includes("top")?1:-1,[r,s]=K2()?[aI,lI]:[iI(n),oI(n)];return{animation:e?`${ri(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ri(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},hI=M.memo(({toast:t,position:e,style:n,children:r})=>{let s=t.height?dI(t.position||e||"top-center",t.visible):{opacity:0},i=M.createElement(sI,{toast:t}),a=M.createElement(uI,{...t.ariaProps},Sf(t.message,t));return M.createElement(cI,{className:t.className,style:{...s,...n,...t.style}},typeof r=="function"?r({icon:i,message:a}):M.createElement(M.Fragment,null,i,a))});IP(M.createElement);var fI=({id:t,className:e,style:n,onHeightUpdate:r,children:s})=>{let i=M.useCallback(a=>{if(a){let l=()=>{let c=a.getBoundingClientRect().height;r(t,c)};l(),new MutationObserver(l).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return M.createElement("div",{ref:i,className:e,style:n},s)},pI=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:K2()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...s}},mI=lp`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Hd=16,G2=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:s,containerStyle:i,containerClassName:a})=>{let{toasts:l,handlers:c}=HP(n);return M.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Hd,left:Hd,right:Hd,bottom:Hd,pointerEvents:"none",...i},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let d=u.position||e,h=c.calculateOffset(u,{reverseOrder:t,gutter:r,defaultPosition:e}),f=pI(d,h);return M.createElement(fI,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?mI:"",style:f},u.type==="custom"?Sf(u.message,u):s?s(u):M.createElement(hI,{toast:u,position:d}))}))},ge=jn;function Y2(t,e){return function(){return t.apply(e,arguments)}}const{toString:gI}=Object.prototype,{getPrototypeOf:Dv}=Object,cp=(t=>e=>{const n=gI.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ns=t=>(t=t.toLowerCase(),e=>cp(e)===t),up=t=>e=>typeof e===t,{isArray:Jl}=Array,Iu=up("undefined");function xI(t){return t!==null&&!Iu(t)&&t.constructor!==null&&!Iu(t.constructor)&&hr(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const J2=ns("ArrayBuffer");function yI(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&J2(t.buffer),e}const vI=up("string"),hr=up("function"),Q2=up("number"),dp=t=>t!==null&&typeof t=="object",wI=t=>t===!0||t===!1,Xh=t=>{if(cp(t)!=="object")return!1;const e=Dv(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},bI=ns("Date"),_I=ns("File"),EI=ns("Blob"),SI=ns("FileList"),NI=t=>dp(t)&&hr(t.pipe),TI=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||hr(t.append)&&((e=cp(t))==="formdata"||e==="object"&&hr(t.toString)&&t.toString()==="[object FormData]"))},AI=ns("URLSearchParams"),[CI,jI,kI,OI]=["ReadableStream","Request","Response","Headers"].map(ns),PI=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Zu(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Jl(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),a=i.length;let l;for(r=0;r<a;r++)l=i[r],e.call(null,t[l],l,t)}}function Z2(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const Qo=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),eT=t=>!Iu(t)&&t!==Qo;function Hx(){const{caseless:t}=eT(this)&&this||{},e={},n=(r,s)=>{const i=t&&Z2(e,s)||s;Xh(e[i])&&Xh(r)?e[i]=Hx(e[i],r):Xh(r)?e[i]=Hx({},r):Jl(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Zu(arguments[r],n);return e}const II=(t,e,n,{allOwnKeys:r}={})=>(Zu(e,(s,i)=>{n&&hr(s)?t[i]=Y2(s,n):t[i]=s},{allOwnKeys:r}),t),RI=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),LI=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},MI=(t,e,n,r)=>{let s,i,a;const l={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)a=s[i],(!r||r(a,t,e))&&!l[a]&&(e[a]=t[a],l[a]=!0);t=n!==!1&&Dv(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},DI=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},FI=t=>{if(!t)return null;if(Jl(t))return t;let e=t.length;if(!Q2(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},BI=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Dv(Uint8Array)),$I=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},UI=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},VI=ns("HTMLFormElement"),zI=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),d_=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),HI=ns("RegExp"),tT=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Zu(n,(s,i)=>{let a;(a=e(s,i,t))!==!1&&(r[i]=a||s)}),Object.defineProperties(t,r)},XI=t=>{tT(t,(e,n)=>{if(hr(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(hr(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},WI=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Jl(t)?r(t):r(String(t).split(e)),n},KI=()=>{},qI=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,_0="abcdefghijklmnopqrstuvwxyz",h_="0123456789",nT={DIGIT:h_,ALPHA:_0,ALPHA_DIGIT:_0+_0.toUpperCase()+h_},GI=(t=16,e=nT.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function YI(t){return!!(t&&hr(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const JI=t=>{const e=new Array(10),n=(r,s)=>{if(dp(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=Jl(r)?[]:{};return Zu(r,(a,l)=>{const c=n(a,s+1);!Iu(c)&&(i[l]=c)}),e[s]=void 0,i}}return r};return n(t,0)},QI=ns("AsyncFunction"),ZI=t=>t&&(dp(t)||hr(t))&&hr(t.then)&&hr(t.catch),rT=((t,e)=>t?setImmediate:e?((n,r)=>(Qo.addEventListener("message",({source:s,data:i})=>{s===Qo&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),Qo.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",hr(Qo.postMessage)),eR=typeof queueMicrotask<"u"?queueMicrotask.bind(Qo):typeof process<"u"&&process.nextTick||rT,Se={isArray:Jl,isArrayBuffer:J2,isBuffer:xI,isFormData:TI,isArrayBufferView:yI,isString:vI,isNumber:Q2,isBoolean:wI,isObject:dp,isPlainObject:Xh,isReadableStream:CI,isRequest:jI,isResponse:kI,isHeaders:OI,isUndefined:Iu,isDate:bI,isFile:_I,isBlob:EI,isRegExp:HI,isFunction:hr,isStream:NI,isURLSearchParams:AI,isTypedArray:BI,isFileList:SI,forEach:Zu,merge:Hx,extend:II,trim:PI,stripBOM:RI,inherits:LI,toFlatObject:MI,kindOf:cp,kindOfTest:ns,endsWith:DI,toArray:FI,forEachEntry:$I,matchAll:UI,isHTMLForm:VI,hasOwnProperty:d_,hasOwnProp:d_,reduceDescriptors:tT,freezeMethods:XI,toObjectSet:WI,toCamelCase:zI,noop:KI,toFiniteNumber:qI,findKey:Z2,global:Qo,isContextDefined:eT,ALPHABET:nT,generateString:GI,isSpecCompliantForm:YI,toJSONObject:JI,isAsyncFn:QI,isThenable:ZI,setImmediate:rT,asap:eR};function st(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}Se.inherits(st,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Se.toJSONObject(this.config),code:this.code,status:this.status}}});const sT=st.prototype,iT={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{iT[t]={value:t}});Object.defineProperties(st,iT);Object.defineProperty(sT,"isAxiosError",{value:!0});st.from=(t,e,n,r,s,i)=>{const a=Object.create(sT);return Se.toFlatObject(t,a,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),st.call(a,t.message,e,n,r,s),a.cause=t,a.name=t.name,i&&Object.assign(a,i),a};const tR=null;function Xx(t){return Se.isPlainObject(t)||Se.isArray(t)}function oT(t){return Se.endsWith(t,"[]")?t.slice(0,-2):t}function f_(t,e,n){return t?t.concat(e).map(function(s,i){return s=oT(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function nR(t){return Se.isArray(t)&&!t.some(Xx)}const rR=Se.toFlatObject(Se,{},null,function(e){return/^is[A-Z]/.test(e)});function hp(t,e,n){if(!Se.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Se.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,_){return!Se.isUndefined(_[b])});const r=n.metaTokens,s=n.visitor||d,i=n.dots,a=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&Se.isSpecCompliantForm(e);if(!Se.isFunction(s))throw new TypeError("visitor must be a function");function u(y){if(y===null)return"";if(Se.isDate(y))return y.toISOString();if(!c&&Se.isBlob(y))throw new st("Blob is not supported. Use a Buffer instead.");return Se.isArrayBuffer(y)||Se.isTypedArray(y)?c&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function d(y,b,_){let m=y;if(y&&!_&&typeof y=="object"){if(Se.endsWith(b,"{}"))b=r?b:b.slice(0,-2),y=JSON.stringify(y);else if(Se.isArray(y)&&nR(y)||(Se.isFileList(y)||Se.endsWith(b,"[]"))&&(m=Se.toArray(y)))return b=oT(b),m.forEach(function(w,v){!(Se.isUndefined(w)||w===null)&&e.append(a===!0?f_([b],v,i):a===null?b:b+"[]",u(w))}),!1}return Xx(y)?!0:(e.append(f_(_,b,i),u(y)),!1)}const h=[],f=Object.assign(rR,{defaultVisitor:d,convertValue:u,isVisitable:Xx});function p(y,b){if(!Se.isUndefined(y)){if(h.indexOf(y)!==-1)throw Error("Circular reference detected in "+b.join("."));h.push(y),Se.forEach(y,function(m,x){(!(Se.isUndefined(m)||m===null)&&s.call(e,m,Se.isString(x)?x.trim():x,b,f))===!0&&p(m,b?b.concat(x):[x])}),h.pop()}}if(!Se.isObject(t))throw new TypeError("data must be an object");return p(t),e}function p_(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Fv(t,e){this._pairs=[],t&&hp(t,this,e)}const aT=Fv.prototype;aT.append=function(e,n){this._pairs.push([e,n])};aT.toString=function(e){const n=e?function(r){return e.call(this,r,p_)}:p_;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function sR(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function lT(t,e,n){if(!e)return t;const r=n&&n.encode||sR;Se.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(e,n):i=Se.isURLSearchParams(e)?e.toString():new Fv(e,n).toString(r),i){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class iR{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Se.forEach(this.handlers,function(r){r!==null&&e(r)})}}const m_=iR,cT={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},oR=typeof URLSearchParams<"u"?URLSearchParams:Fv,aR=typeof FormData<"u"?FormData:null,lR=typeof Blob<"u"?Blob:null,cR={isBrowser:!0,classes:{URLSearchParams:oR,FormData:aR,Blob:lR},protocols:["http","https","file","blob","url","data"]},Bv=typeof window<"u"&&typeof document<"u",Wx=typeof navigator=="object"&&navigator||void 0,uR=Bv&&(!Wx||["ReactNative","NativeScript","NS"].indexOf(Wx.product)<0),dR=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),hR=Bv&&window.location.href||"http://localhost",fR=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Bv,hasStandardBrowserEnv:uR,hasStandardBrowserWebWorkerEnv:dR,navigator:Wx,origin:hR},Symbol.toStringTag,{value:"Module"})),wn={...fR,...cR};function pR(t,e){return hp(t,new wn.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return wn.isNode&&Se.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function mR(t){return Se.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function gR(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function uT(t){function e(n,r,s,i){let a=n[i++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),c=i>=n.length;return a=!a&&Se.isArray(s)?s.length:a,c?(Se.hasOwnProp(s,a)?s[a]=[s[a],r]:s[a]=r,!l):((!s[a]||!Se.isObject(s[a]))&&(s[a]=[]),e(n,r,s[a],i)&&Se.isArray(s[a])&&(s[a]=gR(s[a])),!l)}if(Se.isFormData(t)&&Se.isFunction(t.entries)){const n={};return Se.forEachEntry(t,(r,s)=>{e(mR(r),s,n,0)}),n}return null}function xR(t,e,n){if(Se.isString(t))try{return(e||JSON.parse)(t),Se.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const $v={transitional:cT,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=Se.isObject(e);if(i&&Se.isHTMLForm(e)&&(e=new FormData(e)),Se.isFormData(e))return s?JSON.stringify(uT(e)):e;if(Se.isArrayBuffer(e)||Se.isBuffer(e)||Se.isStream(e)||Se.isFile(e)||Se.isBlob(e)||Se.isReadableStream(e))return e;if(Se.isArrayBufferView(e))return e.buffer;if(Se.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return pR(e,this.formSerializer).toString();if((l=Se.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return hp(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),xR(e)):e}],transformResponse:[function(e){const n=this.transitional||$v.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(Se.isResponse(e)||Se.isReadableStream(e))return e;if(e&&Se.isString(e)&&(r&&!this.responseType||s)){const a=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(l){if(a)throw l.name==="SyntaxError"?st.from(l,st.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:wn.classes.FormData,Blob:wn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Se.forEach(["delete","get","head","post","put","patch"],t=>{$v.headers[t]={}});const Uv=$v,yR=Se.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),vR=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(a){s=a.indexOf(":"),n=a.substring(0,s).trim().toLowerCase(),r=a.substring(s+1).trim(),!(!n||e[n]&&yR[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},g_=Symbol("internals");function vc(t){return t&&String(t).trim().toLowerCase()}function Wh(t){return t===!1||t==null?t:Se.isArray(t)?t.map(Wh):String(t)}function wR(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const bR=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function E0(t,e,n,r,s){if(Se.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!Se.isString(e)){if(Se.isString(r))return e.indexOf(r)!==-1;if(Se.isRegExp(r))return r.test(e)}}function _R(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function ER(t,e){const n=Se.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,a){return this[r].call(this,e,s,i,a)},configurable:!0})})}class fp{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(l,c,u){const d=vc(c);if(!d)throw new Error("header name must be a non-empty string");const h=Se.findKey(s,d);(!h||s[h]===void 0||u===!0||u===void 0&&s[h]!==!1)&&(s[h||c]=Wh(l))}const a=(l,c)=>Se.forEach(l,(u,d)=>i(u,d,c));if(Se.isPlainObject(e)||e instanceof this.constructor)a(e,n);else if(Se.isString(e)&&(e=e.trim())&&!bR(e))a(vR(e),n);else if(Se.isHeaders(e))for(const[l,c]of e.entries())i(c,l,r);else e!=null&&i(n,e,r);return this}get(e,n){if(e=vc(e),e){const r=Se.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return wR(s);if(Se.isFunction(n))return n.call(this,s,r);if(Se.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=vc(e),e){const r=Se.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||E0(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(a){if(a=vc(a),a){const l=Se.findKey(r,a);l&&(!n||E0(r,r[l],l,n))&&(delete r[l],s=!0)}}return Se.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||E0(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return Se.forEach(this,(s,i)=>{const a=Se.findKey(r,i);if(a){n[a]=Wh(s),delete n[i];return}const l=e?_R(i):String(i).trim();l!==i&&delete n[i],n[l]=Wh(s),r[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Se.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&Se.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[g_]=this[g_]={accessors:{}}).accessors,s=this.prototype;function i(a){const l=vc(a);r[l]||(ER(s,a),r[l]=!0)}return Se.isArray(e)?e.forEach(i):i(e),this}}fp.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Se.reduceDescriptors(fp.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Se.freezeMethods(fp);const Jr=fp;function S0(t,e){const n=this||Uv,r=e||n,s=Jr.from(r.headers);let i=r.data;return Se.forEach(t,function(l){i=l.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function dT(t){return!!(t&&t.__CANCEL__)}function Ql(t,e,n){st.call(this,t??"canceled",st.ERR_CANCELED,e,n),this.name="CanceledError"}Se.inherits(Ql,st,{__CANCEL__:!0});function hT(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new st("Request failed with status code "+n.status,[st.ERR_BAD_REQUEST,st.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function SR(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function NR(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,a;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),d=r[i];a||(a=u),n[s]=c,r[s]=u;let h=i,f=0;for(;h!==s;)f+=n[h++],h=h%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),u-a<e)return;const p=d&&u-d;return p?Math.round(f*1e3/p):void 0}}function TR(t,e){let n=0,r=1e3/e,s,i;const a=(u,d=Date.now())=>{n=d,s=null,i&&(clearTimeout(i),i=null),t.apply(null,u)};return[(...u)=>{const d=Date.now(),h=d-n;h>=r?a(u,d):(s=u,i||(i=setTimeout(()=>{i=null,a(s)},r-h)))},()=>s&&a(s)]}const Nf=(t,e,n=3)=>{let r=0;const s=NR(50,250);return TR(i=>{const a=i.loaded,l=i.lengthComputable?i.total:void 0,c=a-r,u=s(c),d=a<=l;r=a;const h={loaded:a,total:l,progress:l?a/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&d?(l-a)/u:void 0,event:i,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(h)},n)},x_=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},y_=t=>(...e)=>Se.asap(()=>t(...e)),AR=wn.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,wn.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(wn.origin),wn.navigator&&/(msie|trident)/i.test(wn.navigator.userAgent)):()=>!0,CR=wn.hasStandardBrowserEnv?{write(t,e,n,r,s,i){const a=[t+"="+encodeURIComponent(e)];Se.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),Se.isString(r)&&a.push("path="+r),Se.isString(s)&&a.push("domain="+s),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function jR(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function kR(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function fT(t,e){return t&&!jR(e)?kR(t,e):e}const v_=t=>t instanceof Jr?{...t}:t;function ma(t,e){e=e||{};const n={};function r(u,d,h,f){return Se.isPlainObject(u)&&Se.isPlainObject(d)?Se.merge.call({caseless:f},u,d):Se.isPlainObject(d)?Se.merge({},d):Se.isArray(d)?d.slice():d}function s(u,d,h,f){if(Se.isUndefined(d)){if(!Se.isUndefined(u))return r(void 0,u,h,f)}else return r(u,d,h,f)}function i(u,d){if(!Se.isUndefined(d))return r(void 0,d)}function a(u,d){if(Se.isUndefined(d)){if(!Se.isUndefined(u))return r(void 0,u)}else return r(void 0,d)}function l(u,d,h){if(h in e)return r(u,d);if(h in t)return r(void 0,u)}const c={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(u,d,h)=>s(v_(u),v_(d),h,!0)};return Se.forEach(Object.keys(Object.assign({},t,e)),function(d){const h=c[d]||s,f=h(t[d],e[d],d);Se.isUndefined(f)&&h!==l||(n[d]=f)}),n}const pT=t=>{const e=ma({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:a,auth:l}=e;e.headers=a=Jr.from(a),e.url=lT(fT(e.baseURL,e.url),t.params,t.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(Se.isFormData(n)){if(wn.hasStandardBrowserEnv||wn.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((c=a.getContentType())!==!1){const[u,...d]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];a.setContentType([u||"multipart/form-data",...d].join("; "))}}if(wn.hasStandardBrowserEnv&&(r&&Se.isFunction(r)&&(r=r(e)),r||r!==!1&&AR(e.url))){const u=s&&i&&CR.read(i);u&&a.set(s,u)}return e},OR=typeof XMLHttpRequest<"u",PR=OR&&function(t){return new Promise(function(n,r){const s=pT(t);let i=s.data;const a=Jr.from(s.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=s,d,h,f,p,y;function b(){p&&p(),y&&y(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let _=new XMLHttpRequest;_.open(s.method.toUpperCase(),s.url,!0),_.timeout=s.timeout;function m(){if(!_)return;const w=Jr.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),T={data:!l||l==="text"||l==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:w,config:t,request:_};hT(function(D){n(D),b()},function(D){r(D),b()},T),_=null}"onloadend"in _?_.onloadend=m:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(m)},_.onabort=function(){_&&(r(new st("Request aborted",st.ECONNABORTED,t,_)),_=null)},_.onerror=function(){r(new st("Network Error",st.ERR_NETWORK,t,_)),_=null},_.ontimeout=function(){let v=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const T=s.transitional||cT;s.timeoutErrorMessage&&(v=s.timeoutErrorMessage),r(new st(v,T.clarifyTimeoutError?st.ETIMEDOUT:st.ECONNABORTED,t,_)),_=null},i===void 0&&a.setContentType(null),"setRequestHeader"in _&&Se.forEach(a.toJSON(),function(v,T){_.setRequestHeader(T,v)}),Se.isUndefined(s.withCredentials)||(_.withCredentials=!!s.withCredentials),l&&l!=="json"&&(_.responseType=s.responseType),u&&([f,y]=Nf(u,!0),_.addEventListener("progress",f)),c&&_.upload&&([h,p]=Nf(c),_.upload.addEventListener("progress",h),_.upload.addEventListener("loadend",p)),(s.cancelToken||s.signal)&&(d=w=>{_&&(r(!w||w.type?new Ql(null,t,_):w),_.abort(),_=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));const x=SR(s.url);if(x&&wn.protocols.indexOf(x)===-1){r(new st("Unsupported protocol "+x+":",st.ERR_BAD_REQUEST,t));return}_.send(i||null)})},IR=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(u){if(!s){s=!0,l();const d=u instanceof Error?u:this.reason;r.abort(d instanceof st?d:new Ql(d instanceof Error?d.message:d))}};let a=e&&setTimeout(()=>{a=null,i(new st(`timeout ${e} of ms exceeded`,st.ETIMEDOUT))},e);const l=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),t=null)};t.forEach(u=>u.addEventListener("abort",i));const{signal:c}=r;return c.unsubscribe=()=>Se.asap(l),c}},RR=IR,LR=function*(t,e){let n=t.byteLength;if(!e||n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},MR=async function*(t,e){for await(const n of DR(t))yield*LR(n,e)},DR=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},w_=(t,e,n,r)=>{const s=MR(t,e);let i=0,a,l=c=>{a||(a=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await s.next();if(u){l(),c.close();return}let h=d.byteLength;if(n){let f=i+=h;n(f)}c.enqueue(new Uint8Array(d))}catch(u){throw l(u),u}},cancel(c){return l(c),s.return()}},{highWaterMark:2})},pp=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",mT=pp&&typeof ReadableStream=="function",FR=pp&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),gT=(t,...e)=>{try{return!!t(...e)}catch{return!1}},BR=mT&&gT(()=>{let t=!1;const e=new Request(wn.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),b_=64*1024,Kx=mT&&gT(()=>Se.isReadableStream(new Response("").body)),Tf={stream:Kx&&(t=>t.body)};pp&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Tf[e]&&(Tf[e]=Se.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new st(`Response type '${e}' is not supported`,st.ERR_NOT_SUPPORT,r)})})})(new Response);const $R=async t=>{if(t==null)return 0;if(Se.isBlob(t))return t.size;if(Se.isSpecCompliantForm(t))return(await new Request(wn.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Se.isArrayBufferView(t)||Se.isArrayBuffer(t))return t.byteLength;if(Se.isURLSearchParams(t)&&(t=t+""),Se.isString(t))return(await FR(t)).byteLength},UR=async(t,e)=>{const n=Se.toFiniteNumber(t.getContentLength());return n??$R(e)},VR=pp&&(async t=>{let{url:e,method:n,data:r,signal:s,cancelToken:i,timeout:a,onDownloadProgress:l,onUploadProgress:c,responseType:u,headers:d,withCredentials:h="same-origin",fetchOptions:f}=pT(t);u=u?(u+"").toLowerCase():"text";let p=RR([s,i&&i.toAbortSignal()],a),y;const b=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let _;try{if(c&&BR&&n!=="get"&&n!=="head"&&(_=await UR(d,r))!==0){let T=new Request(e,{method:"POST",body:r,duplex:"half"}),E;if(Se.isFormData(r)&&(E=T.headers.get("content-type"))&&d.setContentType(E),T.body){const[D,te]=x_(_,Nf(y_(c)));r=w_(T.body,b_,D,te)}}Se.isString(h)||(h=h?"include":"omit");const m="credentials"in Request.prototype;y=new Request(e,{...f,signal:p,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:m?h:void 0});let x=await fetch(y);const w=Kx&&(u==="stream"||u==="response");if(Kx&&(l||w&&b)){const T={};["status","statusText","headers"].forEach(re=>{T[re]=x[re]});const E=Se.toFiniteNumber(x.headers.get("content-length")),[D,te]=l&&x_(E,Nf(y_(l),!0))||[];x=new Response(w_(x.body,b_,D,()=>{te&&te(),b&&b()}),T)}u=u||"text";let v=await Tf[Se.findKey(Tf,u)||"text"](x,t);return!w&&b&&b(),await new Promise((T,E)=>{hT(T,E,{data:v,headers:Jr.from(x.headers),status:x.status,statusText:x.statusText,config:t,request:y})})}catch(m){throw b&&b(),m&&m.name==="TypeError"&&/fetch/i.test(m.message)?Object.assign(new st("Network Error",st.ERR_NETWORK,t,y),{cause:m.cause||m}):st.from(m,m&&m.code,t,y)}}),qx={http:tR,xhr:PR,fetch:VR};Se.forEach(qx,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const __=t=>`- ${t}`,zR=t=>Se.isFunction(t)||t===null||t===!1,xT={getAdapter:t=>{t=Se.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let i=0;i<e;i++){n=t[i];let a;if(r=n,!zR(n)&&(r=qx[(a=String(n)).toLowerCase()],r===void 0))throw new st(`Unknown adapter '${a}'`);if(r)break;s[a||"#"+i]=r}if(!r){const i=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=e?i.length>1?`since :
`+i.map(__).join(`
`):" "+__(i[0]):"as no adapter specified";throw new st("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r},adapters:qx};function N0(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ql(null,t)}function E_(t){return N0(t),t.headers=Jr.from(t.headers),t.data=S0.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),xT.getAdapter(t.adapter||Uv.adapter)(t).then(function(r){return N0(t),r.data=S0.call(t,t.transformResponse,r),r.headers=Jr.from(r.headers),r},function(r){return dT(r)||(N0(t),r&&r.response&&(r.response.data=S0.call(t,t.transformResponse,r.response),r.response.headers=Jr.from(r.response.headers))),Promise.reject(r)})}const yT="1.7.9",mp={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{mp[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const S_={};mp.transitional=function(e,n,r){function s(i,a){return"[Axios v"+yT+"] Transitional option '"+i+"'"+a+(r?". "+r:"")}return(i,a,l)=>{if(e===!1)throw new st(s(a," has been removed"+(n?" in "+n:"")),st.ERR_DEPRECATED);return n&&!S_[a]&&(S_[a]=!0,console.warn(s(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,a,l):!0}};mp.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function HR(t,e,n){if(typeof t!="object")throw new st("options must be an object",st.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],a=e[i];if(a){const l=t[i],c=l===void 0||a(l,i,t);if(c!==!0)throw new st("option "+i+" must be "+c,st.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new st("Unknown option "+i,st.ERR_BAD_OPTION)}}const Kh={assertOptions:HR,validators:mp},as=Kh.validators;class Af{constructor(e){this.defaults=e,this.interceptors={request:new m_,response:new m_}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=ma(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Kh.assertOptions(r,{silentJSONParsing:as.transitional(as.boolean),forcedJSONParsing:as.transitional(as.boolean),clarifyTimeoutError:as.transitional(as.boolean)},!1),s!=null&&(Se.isFunction(s)?n.paramsSerializer={serialize:s}:Kh.assertOptions(s,{encode:as.function,serialize:as.function},!0)),Kh.assertOptions(n,{baseUrl:as.spelling("baseURL"),withXsrfToken:as.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=i&&Se.merge(i.common,i[n.method]);i&&Se.forEach(["delete","get","head","post","put","patch","common"],y=>{delete i[y]}),n.headers=Jr.concat(a,i);const l=[];let c=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(n)===!1||(c=c&&b.synchronous,l.unshift(b.fulfilled,b.rejected))});const u=[];this.interceptors.response.forEach(function(b){u.push(b.fulfilled,b.rejected)});let d,h=0,f;if(!c){const y=[E_.bind(this),void 0];for(y.unshift.apply(y,l),y.push.apply(y,u),f=y.length,d=Promise.resolve(n);h<f;)d=d.then(y[h++],y[h++]);return d}f=l.length;let p=n;for(h=0;h<f;){const y=l[h++],b=l[h++];try{p=y(p)}catch(_){b.call(this,_);break}}try{d=E_.call(this,p)}catch(y){return Promise.reject(y)}for(h=0,f=u.length;h<f;)d=d.then(u[h++],u[h++]);return d}getUri(e){e=ma(this.defaults,e);const n=fT(e.baseURL,e.url);return lT(n,e.params,e.paramsSerializer)}}Se.forEach(["delete","get","head","options"],function(e){Af.prototype[e]=function(n,r){return this.request(ma(r||{},{method:e,url:n,data:(r||{}).data}))}});Se.forEach(["post","put","patch"],function(e){function n(r){return function(i,a,l){return this.request(ma(l||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}Af.prototype[e]=n(),Af.prototype[e+"Form"]=n(!0)});const qh=Af;class Vv{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const a=new Promise(l=>{r.subscribe(l),i=l}).then(s);return a.cancel=function(){r.unsubscribe(i)},a},e(function(i,a,l){r.reason||(r.reason=new Ql(i,a,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Vv(function(s){e=s}),cancel:e}}}const XR=Vv;function WR(t){return function(n){return t.apply(null,n)}}function KR(t){return Se.isObject(t)&&t.isAxiosError===!0}const Gx={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Gx).forEach(([t,e])=>{Gx[e]=t});const qR=Gx;function vT(t){const e=new qh(t),n=Y2(qh.prototype.request,e);return Se.extend(n,qh.prototype,e,{allOwnKeys:!0}),Se.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return vT(ma(t,s))},n}const Gt=vT(Uv);Gt.Axios=qh;Gt.CanceledError=Ql;Gt.CancelToken=XR;Gt.isCancel=dT;Gt.VERSION=yT;Gt.toFormData=hp;Gt.AxiosError=st;Gt.Cancel=Gt.CanceledError;Gt.all=function(e){return Promise.all(e)};Gt.spread=WR;Gt.isAxiosError=KR;Gt.mergeConfig=ma;Gt.AxiosHeaders=Jr;Gt.formToJSON=t=>uT(Se.isHTMLForm(t)?new FormData(t):t);Gt.getAdapter=xT.getAdapter;Gt.HttpStatusCode=qR;Gt.default=Gt;const GR=Gt;var Be={},gp={},wT={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,h,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new s(d,h||c,f),y=n?n+u:u;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],p]:c._events[y].push(p):(c._events[y]=p,c._eventsCount++),c}function a(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)e.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,p=h.length,y=new Array(p);f<p;f++)y[f]=h[f].fn;return y},l.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},l.prototype.emit=function(u,d,h,f,p,y){var b=n?n+u:u;if(!this._events[b])return!1;var _=this._events[b],m=arguments.length,x,w;if(_.fn){switch(_.once&&this.removeListener(u,_.fn,void 0,!0),m){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,d),!0;case 3:return _.fn.call(_.context,d,h),!0;case 4:return _.fn.call(_.context,d,h,f),!0;case 5:return _.fn.call(_.context,d,h,f,p),!0;case 6:return _.fn.call(_.context,d,h,f,p,y),!0}for(w=1,x=new Array(m-1);w<m;w++)x[w-1]=arguments[w];_.fn.apply(_.context,x)}else{var v=_.length,T;for(w=0;w<v;w++)switch(_[w].once&&this.removeListener(u,_[w].fn,void 0,!0),m){case 1:_[w].fn.call(_[w].context);break;case 2:_[w].fn.call(_[w].context,d);break;case 3:_[w].fn.call(_[w].context,d,h);break;case 4:_[w].fn.call(_[w].context,d,h,f);break;default:if(!x)for(T=1,x=new Array(m-1);T<m;T++)x[T-1]=arguments[T];_[w].fn.apply(_[w].context,x)}}return!0},l.prototype.on=function(u,d,h){return i(this,u,d,h,!1)},l.prototype.once=function(u,d,h){return i(this,u,d,h,!0)},l.prototype.removeListener=function(u,d,h,f){var p=n?n+u:u;if(!this._events[p])return this;if(!d)return a(this,p),this;var y=this._events[p];if(y.fn)y.fn===d&&(!f||y.once)&&(!h||y.context===h)&&a(this,p);else{for(var b=0,_=[],m=y.length;b<m;b++)(y[b].fn!==d||f&&!y[b].once||h&&y[b].context!==h)&&_.push(y[b]);_.length?this._events[p]=_.length===1?_[0]:_:a(this,p)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&a(this,d)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(wT);var zv=wT.exports,Me={};Object.defineProperty(Me,"__esModule",{value:!0});Me.XRPLFaucetError=Me.NotFoundError=Me.ValidationError=Me.ResponseFormatError=Me.TimeoutError=Me.RippledNotInitializedError=Me.DisconnectedError=Me.NotConnectedError=Me.RippledError=Me.ConnectionError=Me.UnexpectedError=Me.XrplError=void 0;class ka extends Error{constructor(e="",n){super(e),this.name=this.constructor.name,this.message=e,this.data=n,Error.captureStackTrace!=null&&Error.captureStackTrace(this,this.constructor)}toString(){let e=`[${this.name}(${this.message}`;return this.data&&(e+=`, ${JSON.stringify(this.data)}`),e+=")]",e}inspect(){return this.toString()}}Me.XrplError=ka;class YR extends ka{}Me.RippledError=YR;class JR extends ka{}Me.UnexpectedError=JR;class Zl extends ka{}Me.ConnectionError=Zl;class QR extends Zl{}Me.NotConnectedError=QR;class ZR extends Zl{}Me.DisconnectedError=ZR;class eL extends Zl{}Me.RippledNotInitializedError=eL;class tL extends Zl{}Me.TimeoutError=tL;class nL extends Zl{}Me.ResponseFormatError=nL;class rL extends ka{}Me.ValidationError=rL;class sL extends ka{}Me.XRPLFaucetError=sL;class iL extends ka{constructor(e="Not found"){super(e)}}Me.NotFoundError=iL;var Hv={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_API_VERSION=t.RIPPLED_API_V2=t.RIPPLED_API_V1=void 0,t.RIPPLED_API_V1=1,t.RIPPLED_API_V2=2,t.DEFAULT_API_VERSION=t.RIPPLED_API_V2})(Hv);var Ts={},ed={};Object.defineProperty(ed,"__esModule",{value:!0});ed.AccountRootFlags=void 0;var N_;(function(t){t[t.lsfPasswordSpent=65536]="lsfPasswordSpent",t[t.lsfRequireDestTag=131072]="lsfRequireDestTag",t[t.lsfRequireAuth=262144]="lsfRequireAuth",t[t.lsfDisallowXRP=524288]="lsfDisallowXRP",t[t.lsfDisableMaster=1048576]="lsfDisableMaster",t[t.lsfNoFreeze=2097152]="lsfNoFreeze",t[t.lsfGlobalFreeze=4194304]="lsfGlobalFreeze",t[t.lsfDefaultRipple=8388608]="lsfDefaultRipple",t[t.lsfDepositAuth=16777216]="lsfDepositAuth",t[t.lsfAMM=33554432]="lsfAMM",t[t.lsfDisallowIncomingNFTokenOffer=67108864]="lsfDisallowIncomingNFTokenOffer",t[t.lsfDisallowIncomingCheck=134217728]="lsfDisallowIncomingCheck",t[t.lsfDisallowIncomingPayChan=268435456]="lsfDisallowIncomingPayChan",t[t.lsfDisallowIncomingTrustline=536870912]="lsfDisallowIncomingTrustline",t[t.lsfAllowTrustLineClawback=2147483648]="lsfAllowTrustLineClawback"})(N_||(ed.AccountRootFlags=N_={}));var As={},Le={},ft={},Zn={},xp={};Object.defineProperty(xp,"__esModule",{value:!0});xp.crypto=void 0;xp.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var Pr={};Object.defineProperty(Pr,"__esModule",{value:!0});Pr.anumber=Yx;Pr.abytes=bT;Pr.ahash=aL;Pr.aexists=lL;Pr.aoutput=cL;function Yx(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function oL(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function bT(t,...e){if(!oL(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function aL(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Yx(t.outputLen),Yx(t.blockLen)}function lL(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function cL(t,e){bT(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}(function(t){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=t.nextTick=t.byteSwapIfBE=t.isLE=void 0,t.isBytes=r,t.u8=s,t.u32=i,t.createView=a,t.rotr=l,t.rotl=c,t.byteSwap=u,t.byteSwap32=d,t.bytesToHex=f,t.hexToBytes=b,t.asyncLoop=m,t.utf8ToBytes=x,t.toBytes=w,t.concatBytes=v,t.checkOpts=E,t.wrapConstructor=D,t.wrapConstructorWithOpts=te,t.wrapXOFConstructorWithOpts=re,t.randomBytes=z;const e=xp,n=Pr;function r(J){return J instanceof Uint8Array||ArrayBuffer.isView(J)&&J.constructor.name==="Uint8Array"}function s(J){return new Uint8Array(J.buffer,J.byteOffset,J.byteLength)}function i(J){return new Uint32Array(J.buffer,J.byteOffset,Math.floor(J.byteLength/4))}function a(J){return new DataView(J.buffer,J.byteOffset,J.byteLength)}function l(J,ce){return J<<32-ce|J>>>ce}function c(J,ce){return J<<ce|J>>>32-ce>>>0}t.isLE=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();function u(J){return J<<24&4278190080|J<<8&16711680|J>>>8&65280|J>>>24&255}t.byteSwapIfBE=t.isLE?J=>J:J=>u(J);function d(J){for(let ce=0;ce<J.length;ce++)J[ce]=u(J[ce])}const h=Array.from({length:256},(J,ce)=>ce.toString(16).padStart(2,"0"));function f(J){(0,n.abytes)(J);let ce="";for(let pe=0;pe<J.length;pe++)ce+=h[J[pe]];return ce}const p={_0:48,_9:57,A:65,F:70,a:97,f:102};function y(J){if(J>=p._0&&J<=p._9)return J-p._0;if(J>=p.A&&J<=p.F)return J-(p.A-10);if(J>=p.a&&J<=p.f)return J-(p.a-10)}function b(J){if(typeof J!="string")throw new Error("hex string expected, got "+typeof J);const ce=J.length,pe=ce/2;if(ce%2)throw new Error("hex string expected, got unpadded hex of length "+ce);const Q=new Uint8Array(pe);for(let ue=0,V=0;ue<pe;ue++,V+=2){const H=y(J.charCodeAt(V)),R=y(J.charCodeAt(V+1));if(H===void 0||R===void 0){const C=J[V]+J[V+1];throw new Error('hex string expected, got non-hex character "'+C+'" at index '+V)}Q[ue]=H*16+R}return Q}const _=async()=>{};t.nextTick=_;async function m(J,ce,pe){let Q=Date.now();for(let ue=0;ue<J;ue++){pe(ue);const V=Date.now()-Q;V>=0&&V<ce||(await(0,t.nextTick)(),Q+=V)}}function x(J){if(typeof J!="string")throw new Error("utf8ToBytes expected string, got "+typeof J);return new Uint8Array(new TextEncoder().encode(J))}function w(J){return typeof J=="string"&&(J=x(J)),(0,n.abytes)(J),J}function v(...J){let ce=0;for(let Q=0;Q<J.length;Q++){const ue=J[Q];(0,n.abytes)(ue),ce+=ue.length}const pe=new Uint8Array(ce);for(let Q=0,ue=0;Q<J.length;Q++){const V=J[Q];pe.set(V,ue),ue+=V.length}return pe}class T{clone(){return this._cloneInto()}}t.Hash=T;function E(J,ce){if(ce!==void 0&&{}.toString.call(ce)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(J,ce)}function D(J){const ce=Q=>J().update(w(Q)).digest(),pe=J();return ce.outputLen=pe.outputLen,ce.blockLen=pe.blockLen,ce.create=()=>J(),ce}function te(J){const ce=(Q,ue)=>J(ue).update(w(Q)).digest(),pe=J({});return ce.outputLen=pe.outputLen,ce.blockLen=pe.blockLen,ce.create=Q=>J(Q),ce}function re(J){const ce=(Q,ue)=>J(ue).update(w(Q)).digest(),pe=J({});return ce.outputLen=pe.outputLen,ce.blockLen=pe.blockLen,ce.create=Q=>J(Q),ce}function z(J=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(J));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(J);throw new Error("crypto.getRandomValues must be defined")}})(Zn);var Gs={};Object.defineProperty(Gs,"__esModule",{value:!0});Gs.equal=Gs.concat=Gs.HEX_REGEX=void 0;const uL=Zn;Gs.HEX_REGEX=/^[A-F0-9]*$/iu;function dL(t){return(0,uL.concatBytes)(...t)}Gs.concat=dL;function hL(t,e){if(t.byteLength!==e.byteLength)return!1;const n=new Int8Array(t),r=new Int8Array(e);for(let s=0;s!==t.byteLength;s++)if(n[s]!==r[s])return!1;return!0}Gs.equal=hL;(function(t){var e=Ee&&Ee.__createBinding||(Object.create?function(u,d,h,f){f===void 0&&(f=h);var p=Object.getOwnPropertyDescriptor(d,h);(!p||("get"in p?!d.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return d[h]}}),Object.defineProperty(u,f,p)}:function(u,d,h,f){f===void 0&&(f=h),u[f]=d[h]}),n=Ee&&Ee.__exportStar||function(u,d){for(var h in u)h!=="default"&&!Object.prototype.hasOwnProperty.call(d,h)&&e(d,u,h)};Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.stringToHex=t.hexToString=t.hexToBytes=t.bytesToHex=void 0;const r=Zn,s=Gs,i=u=>(0,r.bytesToHex)(u instanceof Uint8Array?u:Uint8Array.from(u)).toUpperCase();t.bytesToHex=i;const a=u=>{const d=u.length,h=new Uint8Array(d/2);if(!s.HEX_REGEX.test(u))throw new Error("Invalid hex string");for(let f=0;f<h.length;f++){const p=f*2,y=u.slice(p,p+2),b=Number.parseInt(y,16);if(Number.isNaN(b)||b<0)throw new Error("Invalid byte sequence");h[f]=b}return h};t.hexToBytes=a;const l=(u,d="utf8")=>new TextDecoder(d).decode((0,t.hexToBytes)(u));t.hexToString=l;const c=u=>(0,t.bytesToHex)(new TextEncoder().encode(u));t.stringToHex=c,t.randomBytes=r.randomBytes,n(Gs,t)})(ft);var er={},vt={},yp={};(function(t){/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.bytes=t.stringToBytes=t.str=t.bytesToString=t.hex=t.utf8=t.bech32m=t.bech32=t.base58check=t.createBase58check=t.base58xmr=t.base58xrp=t.base58flickr=t.base58=t.base64urlnopad=t.base64url=t.base64nopad=t.base64=t.base32crockford=t.base32hexnopad=t.base32hex=t.base32nopad=t.base32=t.base16=t.utils=t.assertNumber=void 0;function e(C){return C instanceof Uint8Array||ArrayBuffer.isView(C)&&C.constructor.name==="Uint8Array"}function n(C,A){return Array.isArray(A)?A.length===0?!0:C?A.every(L=>typeof L=="string"):A.every(L=>Number.isSafeInteger(L)):!1}function r(C){if(typeof C!="function")throw new Error("function expected");return!0}function s(C,A){if(typeof A!="string")throw new Error(`${C}: string expected`);return!0}function i(C){if(!Number.isSafeInteger(C))throw new Error(`invalid integer: ${C}`)}t.assertNumber=i;function a(C){if(!Array.isArray(C))throw new Error("array expected")}function l(C,A){if(!n(!0,A))throw new Error(`${C}: array of strings expected`)}function c(C,A){if(!n(!1,A))throw new Error(`${C}: array of numbers expected`)}function u(...C){const A=q=>q,L=(q,G)=>ne=>q(G(ne)),$=C.map(q=>q.encode).reduceRight(L,A),ie=C.map(q=>q.decode).reduce(L,A);return{encode:$,decode:ie}}function d(C){const A=typeof C=="string"?C.split(""):C,L=A.length;l("alphabet",A);const $=new Map(A.map((ie,q)=>[ie,q]));return{encode:ie=>(a(ie),ie.map(q=>{if(!Number.isSafeInteger(q)||q<0||q>=L)throw new Error(`alphabet.encode: digit index outside alphabet "${q}". Allowed: ${C}`);return A[q]})),decode:ie=>(a(ie),ie.map(q=>{s("alphabet.decode",q);const G=$.get(q);if(G===void 0)throw new Error(`Unknown letter: "${q}". Allowed: ${C}`);return G}))}}function h(C=""){return s("join",C),{encode:A=>(l("join.decode",A),A.join(C)),decode:A=>(s("join.decode",A),A.split(C))}}function f(C,A="="){return i(C),s("padding",A),{encode(L){for(l("padding.encode",L);L.length*C%8;)L.push(A);return L},decode(L){l("padding.decode",L);let $=L.length;if($*C%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;$>0&&L[$-1]===A;$--)if(($-1)*C%8===0)throw new Error("padding: invalid, string has too much padding");return L.slice(0,$)}}}function p(C){return r(C),{encode:A=>A,decode:A=>C(A)}}function y(C,A,L){if(A<2)throw new Error(`convertRadix: invalid from=${A}, base cannot be less than 2`);if(L<2)throw new Error(`convertRadix: invalid to=${L}, base cannot be less than 2`);if(a(C),!C.length)return[];let $=0;const ie=[],q=Array.from(C,ne=>{if(i(ne),ne<0||ne>=A)throw new Error(`invalid integer: ${ne}`);return ne}),G=q.length;for(;;){let ne=0,he=!0;for(let se=$;se<G;se++){const ee=q[se],N=A*ne,k=N+ee;if(!Number.isSafeInteger(k)||N/A!==ne||k-ee!==N)throw new Error("convertRadix: carry overflow");const B=k/L;ne=k%L;const O=Math.floor(B);if(q[se]=O,!Number.isSafeInteger(O)||O*L+ne!==k)throw new Error("convertRadix: carry overflow");if(he)O?he=!1:$=se;else continue}if(ie.push(ne),he)break}for(let ne=0;ne<C.length-1&&C[ne]===0;ne++)ie.push(0);return ie.reverse()}const b=(C,A)=>A===0?C:b(A,C%A),_=(C,A)=>C+(A-b(C,A)),m=(()=>{let C=[];for(let A=0;A<40;A++)C.push(2**A);return C})();function x(C,A,L,$){if(a(C),A<=0||A>32)throw new Error(`convertRadix2: wrong from=${A}`);if(L<=0||L>32)throw new Error(`convertRadix2: wrong to=${L}`);if(_(A,L)>32)throw new Error(`convertRadix2: carry overflow from=${A} to=${L} carryBits=${_(A,L)}`);let ie=0,q=0;const G=m[A],ne=m[L]-1,he=[];for(const se of C){if(i(se),se>=G)throw new Error(`convertRadix2: invalid data word=${se} from=${A}`);if(ie=ie<<A|se,q+A>32)throw new Error(`convertRadix2: carry overflow pos=${q} from=${A}`);for(q+=A;q>=L;q-=L)he.push((ie>>q-L&ne)>>>0);const ee=m[q];if(ee===void 0)throw new Error("invalid carry");ie&=ee-1}if(ie=ie<<L-q&ne,!$&&q>=A)throw new Error("Excess padding");if(!$&&ie>0)throw new Error(`Non-zero padding: ${ie}`);return $&&q>0&&he.push(ie>>>0),he}function w(C){i(C);const A=2**8;return{encode:L=>{if(!e(L))throw new Error("radix.encode input should be Uint8Array");return y(Array.from(L),A,C)},decode:L=>(c("radix.decode",L),Uint8Array.from(y(L,C,A)))}}function v(C,A=!1){if(i(C),C<=0||C>32)throw new Error("radix2: bits should be in (0..32]");if(_(8,C)>32||_(C,8)>32)throw new Error("radix2: carry overflow");return{encode:L=>{if(!e(L))throw new Error("radix2.encode input should be Uint8Array");return x(Array.from(L),8,C,!A)},decode:L=>(c("radix2.decode",L),Uint8Array.from(x(L,C,8,A)))}}function T(C){return r(C),function(...A){try{return C.apply(null,A)}catch{}}}function E(C,A){return i(C),r(A),{encode(L){if(!e(L))throw new Error("checksum.encode: input should be Uint8Array");const $=A(L).slice(0,C),ie=new Uint8Array(L.length+C);return ie.set(L),ie.set($,L.length),ie},decode(L){if(!e(L))throw new Error("checksum.decode: input should be Uint8Array");const $=L.slice(0,-C),ie=L.slice(-C),q=A($).slice(0,C);for(let G=0;G<C;G++)if(q[G]!==ie[G])throw new Error("Invalid checksum");return $}}}t.utils={alphabet:d,chain:u,checksum:E,convertRadix:y,convertRadix2:x,radix:w,radix2:v,join:h,padding:f},t.base16=u(v(4),d("0123456789ABCDEF"),h("")),t.base32=u(v(5),d("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),f(5),h("")),t.base32nopad=u(v(5),d("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),h("")),t.base32hex=u(v(5),d("0123456789ABCDEFGHIJKLMNOPQRSTUV"),f(5),h("")),t.base32hexnopad=u(v(5),d("0123456789ABCDEFGHIJKLMNOPQRSTUV"),h("")),t.base32crockford=u(v(5),d("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),h(""),p(C=>C.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),t.base64=u(v(6),d("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),f(6),h("")),t.base64nopad=u(v(6),d("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),h("")),t.base64url=u(v(6),d("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),f(6),h("")),t.base64urlnopad=u(v(6),d("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),h(""));const D=C=>u(w(58),d(C),h(""));t.base58=D("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),t.base58flickr=D("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),t.base58xrp=D("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const te=[0,2,3,5,6,7,9,10,11];t.base58xmr={encode(C){let A="";for(let L=0;L<C.length;L+=8){const $=C.subarray(L,L+8);A+=t.base58.encode($).padStart(te[$.length],"1")}return A},decode(C){let A=[];for(let L=0;L<C.length;L+=11){const $=C.slice(L,L+11),ie=te.indexOf($.length),q=t.base58.decode($);for(let G=0;G<q.length-ie;G++)if(q[G]!==0)throw new Error("base58xmr: wrong padding");A=A.concat(Array.from(q.slice(q.length-ie)))}return Uint8Array.from(A)}};const re=C=>u(E(4,A=>C(C(A))),t.base58);t.createBase58check=re,t.base58check=t.createBase58check;const z=u(d("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),h("")),J=[996825010,642813549,513874426,1027748829,705979059];function ce(C){const A=C>>25;let L=(C&33554431)<<5;for(let $=0;$<J.length;$++)(A>>$&1)===1&&(L^=J[$]);return L}function pe(C,A,L=1){const $=C.length;let ie=1;for(let q=0;q<$;q++){const G=C.charCodeAt(q);if(G<33||G>126)throw new Error(`Invalid prefix (${C})`);ie=ce(ie)^G>>5}ie=ce(ie);for(let q=0;q<$;q++)ie=ce(ie)^C.charCodeAt(q)&31;for(let q of A)ie=ce(ie)^q;for(let q=0;q<6;q++)ie=ce(ie);return ie^=L,z.encode(x([ie%m[30]],30,5,!1))}function Q(C){const A=C==="bech32"?1:734539939,L=v(5),$=L.decode,ie=L.encode,q=T($);function G(N,k,B=90){s("bech32.encode prefix",N),e(k)&&(k=Array.from(k)),c("bech32.encode",k);const O=N.length;if(O===0)throw new TypeError(`Invalid prefix length ${O}`);const P=O+7+k.length;if(B!==!1&&P>B)throw new TypeError(`Length ${P} exceeds limit ${B}`);const F=N.toLowerCase(),Y=pe(F,k,A);return`${F}1${z.encode(k)}${Y}`}function ne(N,k=90){s("bech32.decode input",N);const B=N.length;if(B<8||k!==!1&&B>k)throw new TypeError(`invalid string length: ${B} (${N}). Expected (8..${k})`);const O=N.toLowerCase();if(N!==O&&N!==N.toUpperCase())throw new Error("String must be lowercase or uppercase");const P=O.lastIndexOf("1");if(P===0||P===-1)throw new Error('Letter "1" must be present between prefix and data only');const F=O.slice(0,P),Y=O.slice(P+1);if(Y.length<6)throw new Error("Data must be at least 6 characters long");const W=z.decode(Y).slice(0,-6),Z=pe(F,W,A);if(!Y.endsWith(Z))throw new Error(`Invalid checksum in ${N}: expected "${Z}"`);return{prefix:F,words:W}}const he=T(ne);function se(N){const{prefix:k,words:B}=ne(N,!1);return{prefix:k,words:B,bytes:$(B)}}function ee(N,k){return G(N,ie(k))}return{encode:G,decode:ne,encodeFromBytes:ee,decodeToBytes:se,decodeUnsafe:he,fromWords:$,fromWordsUnsafe:q,toWords:ie}}t.bech32=Q("bech32"),t.bech32m=Q("bech32m"),t.utf8={encode:C=>new TextDecoder().decode(C),decode:C=>new TextEncoder().encode(C)},t.hex=u(v(4),d("0123456789abcdef"),h(""),p(C=>{if(typeof C!="string"||C.length%2!==0)throw new TypeError(`hex.decode: expected string, got ${typeof C} with length ${C.length}`);return C.toLowerCase()}));const ue={utf8:t.utf8,hex:t.hex,base16:t.base16,base32:t.base32,base64:t.base64,base64url:t.base64url,base58:t.base58,base58xmr:t.base58xmr},V="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr",H=(C,A)=>{if(typeof C!="string"||!ue.hasOwnProperty(C))throw new TypeError(V);if(!e(A))throw new TypeError("bytesToString() expects Uint8Array");return ue[C].encode(A)};t.bytesToString=H,t.str=t.bytesToString;const R=(C,A)=>{if(!ue.hasOwnProperty(C))throw new TypeError(V);if(typeof A!="string")throw new TypeError("stringToBytes() expects string");return ue[C].decode(A)};t.stringToBytes=R,t.bytes=t.stringToBytes})(yp);var td={},Qr={},oi={};Object.defineProperty(oi,"__esModule",{value:!0});oi.HashMD=void 0;oi.setBigUint64=_T;oi.Chi=fL;oi.Maj=pL;const T0=Pr,wc=Zn;function _T(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),l=Number(n&i),c=r?4:0,u=r?0:4;t.setUint32(e+c,a,r),t.setUint32(e+u,l,r)}function fL(t,e,n){return t&e^~t&n}function pL(t,e,n){return t&e^t&n^e&n}class mL extends wc.Hash{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,wc.createView)(this.buffer)}update(e){(0,T0.aexists)(this);const{view:n,buffer:r,blockLen:s}=this;e=(0,wc.toBytes)(e);const i=e.length;for(let a=0;a<i;){const l=Math.min(s-this.pos,i-a);if(l===s){const c=(0,wc.createView)(e);for(;s<=i-a;a+=s)this.process(c,a);continue}r.set(e.subarray(a,a+l),this.pos),this.pos+=l,a+=l,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,T0.aexists)(this),(0,T0.aoutput)(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:a}=this;n[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(r,0),a=0);for(let h=a;h<s;h++)n[h]=0;_T(r,s-8,BigInt(this.length*8),i),this.process(r,0);const l=(0,wc.createView)(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)l.setUint32(4*h,d[h],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:a,pos:l}=this;return e.length=s,e.pos=l,e.finished=i,e.destroyed=a,s%n&&e.buffer.set(r),e}}oi.HashMD=mL;Object.defineProperty(Qr,"__esModule",{value:!0});Qr.sha224=Qr.sha256=Qr.SHA256=void 0;const A0=oi,vr=Zn,gL=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),fi=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),pi=new Uint32Array(64);class Xv extends A0.HashMD{constructor(){super(64,32,8,!1),this.A=fi[0]|0,this.B=fi[1]|0,this.C=fi[2]|0,this.D=fi[3]|0,this.E=fi[4]|0,this.F=fi[5]|0,this.G=fi[6]|0,this.H=fi[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:a,G:l,H:c}=this;return[e,n,r,s,i,a,l,c]}set(e,n,r,s,i,a,l,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=l|0,this.H=c|0}process(e,n){for(let h=0;h<16;h++,n+=4)pi[h]=e.getUint32(n,!1);for(let h=16;h<64;h++){const f=pi[h-15],p=pi[h-2],y=(0,vr.rotr)(f,7)^(0,vr.rotr)(f,18)^f>>>3,b=(0,vr.rotr)(p,17)^(0,vr.rotr)(p,19)^p>>>10;pi[h]=b+pi[h-7]+y+pi[h-16]|0}let{A:r,B:s,C:i,D:a,E:l,F:c,G:u,H:d}=this;for(let h=0;h<64;h++){const f=(0,vr.rotr)(l,6)^(0,vr.rotr)(l,11)^(0,vr.rotr)(l,25),p=d+f+(0,A0.Chi)(l,c,u)+gL[h]+pi[h]|0,b=((0,vr.rotr)(r,2)^(0,vr.rotr)(r,13)^(0,vr.rotr)(r,22))+(0,A0.Maj)(r,s,i)|0;d=u,u=c,c=l,l=a+p|0,a=i,i=s,s=r,r=p+b|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,l=l+this.E|0,c=c+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(r,s,i,a,l,c,u,d)}roundClean(){pi.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}Qr.SHA256=Xv;class xL extends Xv{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}Qr.sha256=(0,vr.wrapConstructor)(()=>new Xv);Qr.sha224=(0,vr.wrapConstructor)(()=>new xL);var nd={},Wv={};Object.defineProperty(Wv,"__esModule",{value:!0});function yL(t){return Array.isArray(t)?new Uint8Array(t):t}Wv.default=yL;var vL=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nd,"__esModule",{value:!0});const T_=vL(Wv);function wL(t){function e(n){return t((0,T_.default)(n))}return e.create=()=>{const n=t.create();return{update(r){return n.update((0,T_.default)(r)),this},digest(){return n.digest()}}},e}nd.default=wL;var bL=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(td,"__esModule",{value:!0});td.sha256=void 0;const _L=Qr,EL=bL(nd);td.sha256=(0,EL.default)(_L.sha256);var Bl={};Object.defineProperty(Bl,"__esModule",{value:!0});Bl.concatArgs=Bl.arrayEqual=void 0;function SL(t,e){return t.length!==e.length?!1:t.every((n,r)=>n===e[r])}Bl.arrayEqual=SL;function NL(t){return typeof t=="number"}function TL(...t){return t.flatMap(e=>NL(e)?[e]:Array.from(e))}Bl.concatArgs=TL;Object.defineProperty(vt,"__esModule",{value:!0});vt.isValidClassicAddress=vt.decodeAccountPublic=vt.encodeAccountPublic=vt.encodeNodePublic=vt.decodeNodePublic=vt.decodeAddress=vt.decodeAccountID=vt.encodeAddress=vt.encodeAccountID=vt.decodeSeed=vt.encodeSeed=vt.codec=void 0;const AL=yp,CL=td,Xd=Bl;class jL{constructor(e){this._sha256=e.sha256,this._codec=AL.base58xrp}encode(e,n){const r=n.versions;return this._encodeVersioned(e,r,n.expectedLength)}decode(e,n){var r;const s=n.versions,i=n.versionTypes,a=this.decodeChecked(e);if(s.length>1&&!n.expectedLength)throw new Error("expectedLength is required because there are >= 2 possible versions");const l=typeof s[0]=="number"?1:s[0].length,c=(r=n.expectedLength)!==null&&r!==void 0?r:a.length-l,u=a.slice(0,-c),d=a.slice(-c);for(let h=0;h<s.length;h++){const f=Array.isArray(s[h])?s[h]:[s[h]];if((0,Xd.arrayEqual)(u,f))return{version:f,bytes:d,type:i?i[h]:null}}throw new Error("version_invalid: version bytes do not match any of the provided version(s)")}encodeChecked(e){const n=this._sha256(this._sha256(e)).slice(0,4);return this._encodeRaw(Uint8Array.from((0,Xd.concatArgs)(e,n)))}decodeChecked(e){const n=this._decodeRaw(e);if(n.byteLength<5)throw new Error("invalid_input_size: decoded data must have length >= 5");if(!this._verifyCheckSum(n))throw new Error("checksum_invalid");return n.slice(0,-4)}_encodeVersioned(e,n,r){if(!jT(e,r))throw new Error("unexpected_payload_length: bytes.length does not match expectedLength. Ensure that the bytes are a Uint8Array.");return this.encodeChecked((0,Xd.concatArgs)(n,e))}_encodeRaw(e){return this._codec.encode(Uint8Array.from(e))}_decodeRaw(e){return this._codec.decode(e)}_verifyCheckSum(e){const n=this._sha256(this._sha256(e.slice(0,-4))).slice(0,4),r=e.slice(-4);return(0,Xd.arrayEqual)(n,r)}}const ET=0,ST=35,NT=33,TT=28,AT=[1,225,75],kL={sha256:CL.sha256},ai=new jL(kL);vt.codec=ai;function OL(t,e){if(!jT(t,16))throw new Error("entropy must have length 16");const n={expectedLength:16,versions:e==="ed25519"?AT:[NT]};return ai.encode(t,n)}vt.encodeSeed=OL;function PL(t,e={versionTypes:["ed25519","secp256k1"],versions:[AT,NT],expectedLength:16}){return ai.decode(t,e)}vt.decodeSeed=PL;function CT(t){const e={versions:[ET],expectedLength:20};return ai.encode(t,e)}vt.encodeAccountID=CT;vt.encodeAddress=CT;function Kv(t){const e={versions:[ET],expectedLength:20};return ai.decode(t,e).bytes}vt.decodeAccountID=Kv;vt.decodeAddress=Kv;function IL(t){const e={versions:[TT],expectedLength:33};return ai.decode(t,e).bytes}vt.decodeNodePublic=IL;function RL(t){const e={versions:[TT],expectedLength:33};return ai.encode(t,e)}vt.encodeNodePublic=RL;function LL(t){const e={versions:[ST],expectedLength:33};return ai.encode(t,e)}vt.encodeAccountPublic=LL;function ML(t){const e={versions:[ST],expectedLength:33};return ai.decode(t,e).bytes}vt.decodeAccountPublic=ML;function DL(t){try{Kv(t)}catch{return!1}return!0}vt.isValidClassicAddress=DL;function jT(t,e){return"byteLength"in t?t.byteLength===e:t.length===e}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isValidXAddress=t.decodeXAddress=t.xAddressToClassicAddress=t.encodeXAddress=t.classicAddressToXAddress=t.isValidClassicAddress=t.decodeAccountPublic=t.encodeAccountPublic=t.decodeNodePublic=t.encodeNodePublic=t.decodeAccountID=t.encodeAccountID=t.decodeSeed=t.encodeSeed=t.codec=void 0;const e=ft,n=vt;Object.defineProperty(t,"codec",{enumerable:!0,get:function(){return n.codec}}),Object.defineProperty(t,"encodeSeed",{enumerable:!0,get:function(){return n.encodeSeed}}),Object.defineProperty(t,"decodeSeed",{enumerable:!0,get:function(){return n.decodeSeed}}),Object.defineProperty(t,"encodeAccountID",{enumerable:!0,get:function(){return n.encodeAccountID}}),Object.defineProperty(t,"decodeAccountID",{enumerable:!0,get:function(){return n.decodeAccountID}}),Object.defineProperty(t,"encodeNodePublic",{enumerable:!0,get:function(){return n.encodeNodePublic}}),Object.defineProperty(t,"decodeNodePublic",{enumerable:!0,get:function(){return n.decodeNodePublic}}),Object.defineProperty(t,"encodeAccountPublic",{enumerable:!0,get:function(){return n.encodeAccountPublic}}),Object.defineProperty(t,"decodeAccountPublic",{enumerable:!0,get:function(){return n.decodeAccountPublic}}),Object.defineProperty(t,"isValidClassicAddress",{enumerable:!0,get:function(){return n.isValidClassicAddress}});const r={main:Uint8Array.from([5,68]),test:Uint8Array.from([4,147])},s=4294967295;function i(f,p,y){const b=(0,n.decodeAccountID)(f);return a(b,p,y)}t.classicAddressToXAddress=i;function a(f,p,y){if(f.length!==20)throw new Error("Account ID must be 20 bytes");if(p!==!1&&p>s)throw new Error("Invalid tag");const b=p||0,_=p===!1||p==null?0:1,m=(0,e.concat)([y?r.test:r.main,f,Uint8Array.from([_,b&255,b>>8&255,b>>16&255,b>>24&255,0,0,0,0])]);return n.codec.encodeChecked(m)}t.encodeXAddress=a;function l(f){const{accountId:p,tag:y,test:b}=c(f);return{classicAddress:(0,n.encodeAccountID)(p),tag:y,test:b}}t.xAddressToClassicAddress=l;function c(f){const p=n.codec.decodeChecked(f),y=u(p),b=p.slice(2,22),_=d(p);return{accountId:b,tag:_,test:y}}t.decodeXAddress=c;function u(f){const p=f.slice(0,2);if((0,e.equal)(r.main,p))return!1;if((0,e.equal)(r.test,p))return!0;throw new Error("Invalid X-address: bad prefix")}function d(f){const p=f[22];if(p>=2)throw new Error("Unsupported X-address");if(p===1)return f[23]+f[24]*256+f[25]*65536+f[26]*16777216;if(p!==0)throw new Error("flag must be zero to indicate no tag");if(!(0,e.equal)((0,e.hexToBytes)("0000000000000000"),f.slice(23,23+8)))throw new Error("remaining bytes must be zero");return!1}function h(f){try{c(f)}catch{return!1}return!0}t.isValidXAddress=h})(er);var Ir={},kT={},li={};const FL=[["Generic",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:0,type:"Unknown"}],["Invalid",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:-1,type:"Unknown"}],["ObjectEndMarker",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"STObject"}],["ArrayEndMarker",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"STArray"}],["taker_gets_funded",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:258,type:"Amount"}],["taker_pays_funded",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:259,type:"Amount"}],["LedgerEntryType",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"UInt16"}],["TransactionType",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"UInt16"}],["SignerWeight",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"UInt16"}],["TransferFee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"UInt16"}],["TradingFee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"UInt16"}],["DiscountedFee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:6,type:"UInt16"}],["Version",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"UInt16"}],["HookStateChangeCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:17,type:"UInt16"}],["HookEmitCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"UInt16"}],["HookExecutionIndex",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"UInt16"}],["HookApiVersion",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:20,type:"UInt16"}],["LedgerFixType",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:21,type:"UInt16"}],["NetworkID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"UInt32"}],["Flags",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"UInt32"}],["SourceTag",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"UInt32"}],["Sequence",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"UInt32"}],["PreviousTxnLgrSeq",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"UInt32"}],["LedgerSequence",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:6,type:"UInt32"}],["CloseTime",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:7,type:"UInt32"}],["ParentCloseTime",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:8,type:"UInt32"}],["SigningTime",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:9,type:"UInt32"}],["Expiration",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:10,type:"UInt32"}],["TransferRate",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:11,type:"UInt32"}],["WalletSize",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:12,type:"UInt32"}],["OwnerCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:13,type:"UInt32"}],["DestinationTag",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:14,type:"UInt32"}],["LastUpdateTime",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:15,type:"UInt32"}],["HighQualityIn",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"UInt32"}],["HighQualityOut",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:17,type:"UInt32"}],["LowQualityIn",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"UInt32"}],["LowQualityOut",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"UInt32"}],["QualityIn",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:20,type:"UInt32"}],["QualityOut",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:21,type:"UInt32"}],["StampEscrow",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:22,type:"UInt32"}],["BondAmount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:23,type:"UInt32"}],["LoadFee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:24,type:"UInt32"}],["OfferSequence",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:25,type:"UInt32"}],["FirstLedgerSequence",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:26,type:"UInt32"}],["LastLedgerSequence",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:27,type:"UInt32"}],["TransactionIndex",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:28,type:"UInt32"}],["OperationLimit",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:29,type:"UInt32"}],["ReferenceFeeUnits",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:30,type:"UInt32"}],["ReserveBase",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:31,type:"UInt32"}],["ReserveIncrement",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:32,type:"UInt32"}],["SetFlag",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:33,type:"UInt32"}],["ClearFlag",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:34,type:"UInt32"}],["SignerQuorum",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:35,type:"UInt32"}],["CancelAfter",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:36,type:"UInt32"}],["FinishAfter",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:37,type:"UInt32"}],["SignerListID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:38,type:"UInt32"}],["SettleDelay",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:39,type:"UInt32"}],["TicketCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:40,type:"UInt32"}],["TicketSequence",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:41,type:"UInt32"}],["NFTokenTaxon",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:42,type:"UInt32"}],["MintedNFTokens",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:43,type:"UInt32"}],["BurnedNFTokens",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:44,type:"UInt32"}],["HookStateCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:45,type:"UInt32"}],["EmitGeneration",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:46,type:"UInt32"}],["VoteWeight",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:48,type:"UInt32"}],["FirstNFTokenSequence",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:50,type:"UInt32"}],["OracleDocumentID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:51,type:"UInt32"}],["IndexNext",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"UInt64"}],["IndexPrevious",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"UInt64"}],["BookNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"UInt64"}],["OwnerNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"UInt64"}],["BaseFee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"UInt64"}],["ExchangeRate",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:6,type:"UInt64"}],["LowNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:7,type:"UInt64"}],["HighNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:8,type:"UInt64"}],["DestinationNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:9,type:"UInt64"}],["Cookie",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:10,type:"UInt64"}],["ServerVersion",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:11,type:"UInt64"}],["NFTokenOfferNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:12,type:"UInt64"}],["EmitBurden",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:13,type:"UInt64"}],["HookOn",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"UInt64"}],["HookInstructionCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:17,type:"UInt64"}],["HookReturnCode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"UInt64"}],["ReferenceCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"UInt64"}],["XChainClaimID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:20,type:"UInt64"}],["XChainAccountCreateCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:21,type:"UInt64"}],["XChainAccountClaimCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:22,type:"UInt64"}],["AssetPrice",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:23,type:"UInt64"}],["MaximumAmount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:24,type:"UInt64"}],["OutstandingAmount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:25,type:"UInt64"}],["MPTAmount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:26,type:"UInt64"}],["IssuerNode",{nth:27,isVLEncoded:!1,isSerialized:!0,isSigningField:!0,type:"UInt64"}],["SubjectNode",{nth:28,isVLEncoded:!1,isSerialized:!0,isSigningField:!0,type:"UInt64"}],["EmailHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"Hash128"}],["LedgerHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"Hash256"}],["ParentHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"Hash256"}],["TransactionHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"Hash256"}],["AccountHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"Hash256"}],["PreviousTxnID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"Hash256"}],["LedgerIndex",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:6,type:"Hash256"}],["WalletLocator",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:7,type:"Hash256"}],["RootIndex",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:8,type:"Hash256"}],["AccountTxnID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:9,type:"Hash256"}],["NFTokenID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:10,type:"Hash256"}],["EmitParentTxnID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:11,type:"Hash256"}],["EmitNonce",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:12,type:"Hash256"}],["EmitHookHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:13,type:"Hash256"}],["AMMID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:14,type:"Hash256"}],["BookDirectory",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"Hash256"}],["InvoiceID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:17,type:"Hash256"}],["Nickname",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"Hash256"}],["Amendment",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"Hash256"}],["Digest",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:21,type:"Hash256"}],["Channel",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:22,type:"Hash256"}],["ConsensusHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:23,type:"Hash256"}],["CheckID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:24,type:"Hash256"}],["ValidatedHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:25,type:"Hash256"}],["PreviousPageMin",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:26,type:"Hash256"}],["NextPageMin",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:27,type:"Hash256"}],["NFTokenBuyOffer",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:28,type:"Hash256"}],["NFTokenSellOffer",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:29,type:"Hash256"}],["HookStateKey",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:30,type:"Hash256"}],["HookHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:31,type:"Hash256"}],["HookNamespace",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:32,type:"Hash256"}],["HookSetTxnID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:33,type:"Hash256"}],["hash",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:257,type:"Hash256"}],["index",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:258,type:"Hash256"}],["Amount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"Amount"}],["Balance",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"Amount"}],["LimitAmount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"Amount"}],["TakerPays",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"Amount"}],["TakerGets",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"Amount"}],["LowLimit",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:6,type:"Amount"}],["HighLimit",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:7,type:"Amount"}],["Fee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:8,type:"Amount"}],["SendMax",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:9,type:"Amount"}],["DeliverMin",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:10,type:"Amount"}],["Amount2",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:11,type:"Amount"}],["BidMin",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:12,type:"Amount"}],["BidMax",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:13,type:"Amount"}],["MinimumOffer",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"Amount"}],["RippleEscrow",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:17,type:"Amount"}],["DeliveredAmount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"Amount"}],["NFTokenBrokerFee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"Amount"}],["BaseFeeDrops",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:22,type:"Amount"}],["ReserveBaseDrops",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:23,type:"Amount"}],["ReserveIncrementDrops",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:24,type:"Amount"}],["LPTokenOut",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:25,type:"Amount"}],["LPTokenIn",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:26,type:"Amount"}],["EPrice",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:27,type:"Amount"}],["Price",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:28,type:"Amount"}],["SignatureReward",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:29,type:"Amount"}],["MinAccountCreateAmount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:30,type:"Amount"}],["LPTokenBalance",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:31,type:"Amount"}],["PublicKey",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:1,type:"Blob"}],["MessageKey",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:2,type:"Blob"}],["SigningPubKey",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:3,type:"Blob"}],["TxnSignature",{isSerialized:!0,isSigningField:!1,isVLEncoded:!0,nth:4,type:"Blob"}],["URI",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:5,type:"Blob"}],["Signature",{isSerialized:!0,isSigningField:!1,isVLEncoded:!0,nth:6,type:"Blob"}],["Domain",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:7,type:"Blob"}],["FundCode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:8,type:"Blob"}],["RemoveCode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:9,type:"Blob"}],["ExpireCode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:10,type:"Blob"}],["CreateCode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:11,type:"Blob"}],["MemoType",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:12,type:"Blob"}],["MemoData",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:13,type:"Blob"}],["MemoFormat",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:14,type:"Blob"}],["Fulfillment",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:16,type:"Blob"}],["Condition",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:17,type:"Blob"}],["MasterSignature",{isSerialized:!0,isSigningField:!1,isVLEncoded:!0,nth:18,type:"Blob"}],["UNLModifyValidator",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:19,type:"Blob"}],["ValidatorToDisable",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:20,type:"Blob"}],["ValidatorToReEnable",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:21,type:"Blob"}],["HookStateData",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:22,type:"Blob"}],["HookReturnString",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:23,type:"Blob"}],["HookParameterName",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:24,type:"Blob"}],["HookParameterValue",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:25,type:"Blob"}],["DIDDocument",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:26,type:"Blob"}],["Data",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:27,type:"Blob"}],["AssetClass",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:28,type:"Blob"}],["Provider",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:29,type:"Blob"}],["MPTokenMetadata",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:30,type:"Blob"}],["CredentialType",{nth:31,isVLEncoded:!0,isSerialized:!0,isSigningField:!0,type:"Blob"}],["Account",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:1,type:"AccountID"}],["Owner",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:2,type:"AccountID"}],["Destination",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:3,type:"AccountID"}],["Issuer",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:4,type:"AccountID"}],["Authorize",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:5,type:"AccountID"}],["Unauthorize",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:6,type:"AccountID"}],["RegularKey",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:8,type:"AccountID"}],["NFTokenMinter",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:9,type:"AccountID"}],["EmitCallback",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:10,type:"AccountID"}],["Holder",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:11,type:"AccountID"}],["HookAccount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:16,type:"AccountID"}],["OtherChainSource",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:18,type:"AccountID"}],["OtherChainDestination",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:19,type:"AccountID"}],["AttestationSignerAccount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:20,type:"AccountID"}],["AttestationRewardAccount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:21,type:"AccountID"}],["LockingChainDoor",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:22,type:"AccountID"}],["IssuingChainDoor",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:23,type:"AccountID"}],["Subject",{nth:24,isVLEncoded:!0,isSerialized:!0,isSigningField:!0,type:"AccountID"}],["TransactionMetaData",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"STObject"}],["CreatedNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"STObject"}],["DeletedNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"STObject"}],["ModifiedNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"STObject"}],["PreviousFields",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:6,type:"STObject"}],["FinalFields",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:7,type:"STObject"}],["NewFields",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:8,type:"STObject"}],["TemplateEntry",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:9,type:"STObject"}],["Memo",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:10,type:"STObject"}],["SignerEntry",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:11,type:"STObject"}],["NFToken",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:12,type:"STObject"}],["EmitDetails",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:13,type:"STObject"}],["Hook",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:14,type:"STObject"}],["Signer",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"STObject"}],["Majority",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"STObject"}],["DisabledValidator",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"STObject"}],["EmittedTxn",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:20,type:"STObject"}],["HookExecution",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:21,type:"STObject"}],["HookDefinition",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:22,type:"STObject"}],["HookParameter",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:23,type:"STObject"}],["HookGrant",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:24,type:"STObject"}],["VoteEntry",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:25,type:"STObject"}],["AuctionSlot",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:26,type:"STObject"}],["AuthAccount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:27,type:"STObject"}],["XChainClaimProofSig",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:28,type:"STObject"}],["XChainCreateAccountProofSig",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:29,type:"STObject"}],["XChainClaimAttestationCollectionElement",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:30,type:"STObject"}],["XChainCreateAccountAttestationCollectionElement",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:31,type:"STObject"}],["PriceData",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:32,type:"STObject"}],["Credential",{nth:33,isVLEncoded:!1,isSerialized:!0,isSigningField:!0,type:"STObject"}],["Signers",{isSerialized:!0,isSigningField:!1,isVLEncoded:!1,nth:3,type:"STArray"}],["SignerEntries",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"STArray"}],["Template",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"STArray"}],["Necessary",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:6,type:"STArray"}],["Sufficient",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:7,type:"STArray"}],["AffectedNodes",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:8,type:"STArray"}],["Memos",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:9,type:"STArray"}],["NFTokens",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:10,type:"STArray"}],["Hooks",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:11,type:"STArray"}],["VoteSlots",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:12,type:"STArray"}],["Majorities",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"STArray"}],["DisabledValidators",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:17,type:"STArray"}],["HookExecutions",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"STArray"}],["HookParameters",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"STArray"}],["HookGrants",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:20,type:"STArray"}],["XChainClaimAttestations",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:21,type:"STArray"}],["XChainCreateAccountAttestations",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:22,type:"STArray"}],["PriceDataSeries",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:24,type:"STArray"}],["AuthAccounts",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:25,type:"STArray"}],["AuthorizeCredentials",{nth:26,isVLEncoded:!1,isSerialized:!0,isSigningField:!0,type:"STArray"}],["UnauthorizeCredentials",{nth:27,isVLEncoded:!1,isSerialized:!0,isSigningField:!0,type:"STArray"}],["CloseResolution",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"UInt8"}],["Method",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"UInt8"}],["TransactionResult",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"UInt8"}],["Scale",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"UInt8"}],["AssetScale",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"UInt8"}],["TickSize",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"UInt8"}],["UNLModifyDisabling",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:17,type:"UInt8"}],["HookResult",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"UInt8"}],["WasLockingChainSend",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"UInt8"}],["TakerPaysCurrency",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"Hash160"}],["TakerPaysIssuer",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"Hash160"}],["TakerGetsCurrency",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"Hash160"}],["TakerGetsIssuer",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"Hash160"}],["Paths",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"PathSet"}],["Indexes",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:1,type:"Vector256"}],["Hashes",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:2,type:"Vector256"}],["Amendments",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:3,type:"Vector256"}],["NFTokenOffers",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:4,type:"Vector256"}],["CredentialIDs",{nth:5,isVLEncoded:!0,isSerialized:!0,isSigningField:!0,type:"Vector256"}],["MPTokenIssuanceID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"Hash192"}],["LockingChainIssue",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"Issue"}],["IssuingChainIssue",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"Issue"}],["Asset",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"Issue"}],["Asset2",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"Issue"}],["XChainBridge",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"XChainBridge"}],["BaseAsset",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"Currency"}],["QuoteAsset",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"Currency"}],["Transaction",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:257,type:"Transaction"}],["LedgerEntry",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:257,type:"LedgerEntry"}],["Validation",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:257,type:"Validation"}],["Metadata",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:257,type:"Metadata"}]],BL={AMM:121,AccountRoot:97,Amendments:102,Bridge:105,Check:67,DID:73,DepositPreauth:112,DirectoryNode:100,Escrow:117,FeeSettings:115,Invalid:-1,LedgerHashes:104,MPToken:127,MPTokenIssuance:126,NFTokenOffer:55,NFTokenPage:80,NegativeUNL:78,Offer:111,Oracle:128,Credential:129,PayChannel:120,RippleState:114,SignerList:83,Ticket:84,XChainOwnedClaimID:113,XChainOwnedCreateAccountClaimID:116},$L={tecAMM_ACCOUNT:168,tecAMM_BALANCE:163,tecAMM_EMPTY:166,tecAMM_FAILED:164,tecAMM_INVALID_TOKENS:165,tecAMM_NOT_EMPTY:167,tecARRAY_EMPTY:190,tecARRAY_TOO_LARGE:191,tecBAD_CREDENTIALS:193,tecCANT_ACCEPT_OWN_NFTOKEN_OFFER:158,tecCLAIM:100,tecCRYPTOCONDITION_ERROR:146,tecDIR_FULL:121,tecDST_TAG_NEEDED:143,tecDUPLICATE:149,tecEMPTY_DID:187,tecEXPIRED:148,tecFAILED_PROCESSING:105,tecFROZEN:137,tecHAS_OBLIGATIONS:151,tecINCOMPLETE:169,tecINSUFFICIENT_FUNDS:159,tecINSUFFICIENT_PAYMENT:161,tecINSUFFICIENT_RESERVE:141,tecINSUFF_FEE:136,tecINSUF_RESERVE_LINE:122,tecINSUF_RESERVE_OFFER:123,tecINTERNAL:144,tecINVALID_UPDATE_TIME:188,tecINVARIANT_FAILED:147,tecKILLED:150,tecLOCKED:192,tecMAX_SEQUENCE_REACHED:154,tecNEED_MASTER_KEY:142,tecNFTOKEN_BUY_SELL_MISMATCH:156,tecNFTOKEN_OFFER_TYPE_MISMATCH:157,tecNO_ALTERNATIVE_KEY:130,tecNO_AUTH:134,tecNO_DST:124,tecNO_DST_INSUF_XRP:125,tecNO_ENTRY:140,tecNO_ISSUER:133,tecNO_LINE:135,tecNO_LINE_INSUF_RESERVE:126,tecNO_LINE_REDUNDANT:127,tecNO_PERMISSION:139,tecNO_REGULAR_KEY:131,tecNO_SUITABLE_NFTOKEN_PAGE:155,tecNO_TARGET:138,tecOBJECT_NOT_FOUND:160,tecOVERSIZE:145,tecOWNERS:132,tecPATH_DRY:128,tecPATH_PARTIAL:101,tecTOKEN_PAIR_NOT_FOUND:189,tecTOO_SOON:152,tecUNFUNDED:129,tecUNFUNDED_ADD:102,tecUNFUNDED_AMM:162,tecUNFUNDED_OFFER:103,tecUNFUNDED_PAYMENT:104,tecXCHAIN_ACCOUNT_CREATE_PAST:181,tecXCHAIN_ACCOUNT_CREATE_TOO_MANY:182,tecXCHAIN_BAD_CLAIM_ID:172,tecXCHAIN_BAD_PUBLIC_KEY_ACCOUNT_PAIR:185,tecXCHAIN_BAD_TRANSFER_ISSUE:170,tecXCHAIN_CLAIM_NO_QUORUM:173,tecXCHAIN_CREATE_ACCOUNT_DISABLED:186,tecXCHAIN_CREATE_ACCOUNT_NONXRP_ISSUE:175,tecXCHAIN_INSUFF_CREATE_AMOUNT:180,tecXCHAIN_NO_CLAIM_ID:171,tecXCHAIN_NO_SIGNERS_LIST:178,tecXCHAIN_PAYMENT_FAILED:183,tecXCHAIN_PROOF_UNKNOWN_KEY:174,tecXCHAIN_REWARD_MISMATCH:177,tecXCHAIN_SELF_COMMIT:184,tecXCHAIN_SENDING_ACCOUNT_MISMATCH:179,tecXCHAIN_WRONG_CHAIN:176,tefALREADY:-198,tefBAD_ADD_AUTH:-197,tefBAD_AUTH:-196,tefBAD_AUTH_MASTER:-183,tefBAD_LEDGER:-195,tefBAD_QUORUM:-185,tefBAD_SIGNATURE:-186,tefCREATED:-194,tefEXCEPTION:-193,tefFAILURE:-199,tefINTERNAL:-192,tefINVALID_LEDGER_FIX_TYPE:-178,tefINVARIANT_FAILED:-182,tefMASTER_DISABLED:-188,tefMAX_LEDGER:-187,tefNFTOKEN_IS_NOT_TRANSFERABLE:-179,tefNOT_MULTI_SIGNING:-184,tefNO_AUTH_REQUIRED:-191,tefNO_TICKET:-180,tefPAST_SEQ:-190,tefTOO_BIG:-181,tefWRONG_PRIOR:-189,telBAD_DOMAIN:-398,telBAD_PATH_COUNT:-397,telBAD_PUBLIC_KEY:-396,telCAN_NOT_QUEUE:-392,telCAN_NOT_QUEUE_BALANCE:-391,telCAN_NOT_QUEUE_BLOCKED:-389,telCAN_NOT_QUEUE_BLOCKS:-390,telCAN_NOT_QUEUE_FEE:-388,telCAN_NOT_QUEUE_FULL:-387,telENV_RPC_FAILED:-383,telFAILED_PROCESSING:-395,telINSUF_FEE_P:-394,telLOCAL_ERROR:-399,telNETWORK_ID_MAKES_TX_NON_CANONICAL:-384,telNO_DST_PARTIAL:-393,telREQUIRES_NETWORK_ID:-385,telWRONG_NETWORK:-386,temARRAY_EMPTY:-253,temARRAY_TOO_LARGE:-252,temBAD_AMM_TOKENS:-261,temBAD_AMOUNT:-298,temBAD_CURRENCY:-297,temBAD_EXPIRATION:-296,temBAD_FEE:-295,temBAD_ISSUER:-294,temBAD_LIMIT:-293,temBAD_NFTOKEN_TRANSFER_FEE:-262,temBAD_OFFER:-292,temBAD_PATH:-291,temBAD_PATH_LOOP:-290,temBAD_QUORUM:-271,temBAD_REGKEY:-289,temBAD_SEND_XRP_LIMIT:-288,temBAD_SEND_XRP_MAX:-287,temBAD_SEND_XRP_NO_DIRECT:-286,temBAD_SEND_XRP_PARTIAL:-285,temBAD_SEND_XRP_PATHS:-284,temBAD_SEQUENCE:-283,temBAD_SIGNATURE:-282,temBAD_SIGNER:-272,temBAD_SRC_ACCOUNT:-281,temBAD_TICK_SIZE:-269,temBAD_TRANSFER_FEE:-251,temBAD_TRANSFER_RATE:-280,temBAD_WEIGHT:-270,temCANNOT_PREAUTH_SELF:-267,temDISABLED:-273,temDST_IS_SRC:-279,temDST_NEEDED:-278,temEMPTY_DID:-254,temINVALID:-277,temINVALID_ACCOUNT_ID:-268,temINVALID_COUNT:-266,temINVALID_FLAG:-276,temMALFORMED:-299,temREDUNDANT:-275,temRIPPLE_EMPTY:-274,temSEQ_AND_TICKET:-263,temUNCERTAIN:-265,temUNKNOWN:-264,temXCHAIN_BAD_PROOF:-259,temXCHAIN_BRIDGE_BAD_ISSUES:-258,temXCHAIN_BRIDGE_BAD_MIN_ACCOUNT_CREATE_AMOUNT:-256,temXCHAIN_BRIDGE_BAD_REWARD_AMOUNT:-255,temXCHAIN_BRIDGE_NONDOOR_OWNER:-257,temXCHAIN_EQUAL_DOOR_ACCOUNTS:-260,terFUNDS_SPENT:-98,terINSUF_FEE_B:-97,terLAST:-91,terNO_ACCOUNT:-96,terNO_AMM:-87,terNO_AUTH:-95,terNO_LINE:-94,terNO_RIPPLE:-90,terOWNERS:-93,terPRE_SEQ:-92,terPRE_TICKET:-88,terQUEUED:-89,terRETRY:-99,tesSUCCESS:0},UL={AMMBid:39,AMMCreate:35,AMMDelete:40,AMMDeposit:36,AMMVote:38,AMMWithdraw:37,AccountDelete:21,AccountSet:3,CheckCancel:18,CheckCash:17,CheckCreate:16,Clawback:30,CredentialCreate:58,CredentialAccept:59,CredentialDelete:60,DIDDelete:50,DIDSet:49,DepositPreauth:19,EnableAmendment:100,EscrowCancel:4,EscrowCreate:1,EscrowFinish:2,Invalid:-1,LedgerStateFix:53,MPTokenAuthorize:57,MPTokenIssuanceCreate:54,MPTokenIssuanceDestroy:55,MPTokenIssuanceSet:56,NFTokenAcceptOffer:29,NFTokenBurn:26,NFTokenCancelOffer:28,NFTokenCreateOffer:27,NFTokenMint:25,OfferCancel:8,OfferCreate:7,OracleDelete:52,OracleSet:51,Payment:0,PaymentChannelClaim:15,PaymentChannelCreate:13,PaymentChannelFund:14,SetFee:101,SetRegularKey:5,SignerListSet:12,TicketCreate:10,TrustSet:20,UNLModify:102,XChainAccountCreateCommit:44,XChainAddAccountCreateAttestation:46,XChainAddClaimAttestation:45,XChainClaim:43,XChainCommit:42,XChainCreateBridge:48,XChainCreateClaimID:41,XChainModifyBridge:47},VL={AccountID:8,Amount:6,Blob:7,Currency:26,Done:-1,Hash128:4,Hash160:17,Hash192:21,Hash256:5,Issue:24,LedgerEntry:10002,Metadata:10004,NotPresent:0,PathSet:18,STArray:15,STObject:14,Transaction:10001,UInt16:1,UInt32:2,UInt384:22,UInt512:23,UInt64:3,UInt8:16,UInt96:20,Unknown:-2,Validation:10003,Vector256:19,XChainBridge:25},zL={FIELDS:FL,LEDGER_ENTRY_TYPES:BL,TRANSACTION_RESULTS:$L,TRANSACTION_TYPES:UL,TYPES:VL};var qv={},ga={};Object.defineProperty(ga,"__esModule",{value:!0});ga.BytesLookup=ga.Bytes=void 0;class Jx{constructor(e,n,r){this.name=e,this.ordinal=n,this.ordinalWidth=r,this.bytes=new Uint8Array(r);for(let s=0;s<r;s++)this.bytes[r-s-1]=n>>>s*8&255}toJSON(){return this.name}toBytesSink(e){e.put(this.bytes)}toBytes(){return this.bytes}}ga.Bytes=Jx;class HL{constructor(e,n){this.ordinalWidth=n,Object.entries(e).forEach(([r,s])=>{this.add(r,s)})}add(e,n){if(this[e])throw new SyntaxError(`Attempted to add a value with a duplicate name "${e}". This is not allowed because it is unclear how to decode.`);if(this[n.toString()])throw new SyntaxError(`Attempted to add a duplicate value under a different name (Given name: "${e}" and previous name: "${this[n.toString()]}. This is not allowed because it is unclear how to decode.
Given value: ${n.toString()}`);this[e]=new Jx(e,n,this.ordinalWidth),this[n.toString()]=this[e]}from(e){return e instanceof Jx?e:this[e]}fromParser(e){return this.from(e.readUIntN(this.ordinalWidth).toString())}}ga.BytesLookup=HL;var vp={},_n={},js={};Object.defineProperty(js,"__esModule",{value:!0});js.BinarySerializer=js.BytesList=void 0;const C0=ft;class Qx{constructor(){this.bytesArray=[]}getLength(){return(0,C0.concat)(this.bytesArray).byteLength}put(e){const n=Uint8Array.from(e);return this.bytesArray.push(n),this}toBytesSink(e){e.put(this.toBytes())}toBytes(){return(0,C0.concat)(this.bytesArray)}toHex(){return(0,C0.bytesToHex)(this.toBytes())}}js.BytesList=Qx;class XL{constructor(e){this.sink=new Qx,this.sink=e}write(e){e.toBytesSink(this.sink)}put(e){this.sink.put(e)}writeType(e,n){this.write(e.from(n))}writeBytesList(e){e.toBytesSink(this.sink)}encodeVariableLength(e){const n=new Uint8Array(3);if(e<=192)return n[0]=e,n.slice(0,1);if(e<=12480)return e-=193,n[0]=193+(e>>>8),n[1]=e&255,n.slice(0,2);if(e<=918744)return e-=12481,n[0]=241+(e>>>16),n[1]=e>>8&255,n[2]=e&255,n.slice(0,3);throw new Error("Overflow error")}writeFieldAndValue(e,n,r=!1){const s=e.associatedType.from(n);if(s.toBytesSink===void 0||e.name===void 0)throw new Error;this.sink.put(e.header),e.isVariableLengthEncoded?this.writeLengthEncoded(s,r):s.toBytesSink(this.sink)}writeLengthEncoded(e,n=!1){const r=new Qx;n||e.toBytesSink(r),this.put(this.encodeVariableLength(r.getLength())),this.writeBytesList(r)}}js.BinarySerializer=XL;Object.defineProperty(_n,"__esModule",{value:!0});_n.Comparable=_n.SerializedType=void 0;const WL=js,KL=ft;class OT{constructor(e){this.bytes=new Uint8Array(0),this.bytes=e??new Uint8Array(0)}static fromParser(e,n){throw new Error("fromParser not implemented")}static from(e){throw new Error("from not implemented")}toBytesSink(e){e.put(this.bytes)}toHex(){return(0,KL.bytesToHex)(this.toBytes())}toBytes(){if(this.bytes)return this.bytes;const e=new WL.BytesList;return this.toBytesSink(e),e.toBytes()}toJSON(e,n){return this.toHex()}toString(){return this.toHex()}}_n.SerializedType=OT;class qL extends OT{lt(e){return this.compareTo(e)<0}eq(e){return this.compareTo(e)===0}gt(e){return this.compareTo(e)>0}gte(e){return this.compareTo(e)>-1}lte(e){return this.compareTo(e)<1}compareTo(e){throw new Error(`cannot compare ${this.toString()} and ${e.toString()}`)}}_n.Comparable=qL;var Kr={};Object.defineProperty(Kr,"__esModule",{value:!0});Kr.TRANSACTION_RESULT_WIDTH=Kr.TRANSACTION_TYPE_WIDTH=Kr.LEDGER_ENTRY_WIDTH=Kr.TYPE_WIDTH=void 0;Kr.TYPE_WIDTH=2;Kr.LEDGER_ENTRY_WIDTH=2;Kr.TRANSACTION_TYPE_WIDTH=2;Kr.TRANSACTION_RESULT_WIDTH=1;Object.defineProperty(vp,"__esModule",{value:!0});vp.FieldLookup=void 0;const GL=ga,YL=_n,JL=Kr;function QL(t,e){const n=[];return t<16?e<16?n.push(t<<4|e):n.push(t<<4,e):e<16?n.push(e,t):n.push(0,t,e),Uint8Array.from(n)}function ZL([t,e],n){const r=QL(n,e.nth);return{name:t,nth:e.nth,isVariableLengthEncoded:e.isVLEncoded,isSerialized:e.isSerialized,isSigningField:e.isSigningField,ordinal:n<<16|e.nth,type:new GL.Bytes(e.type,n,JL.TYPE_WIDTH),header:r,associatedType:YL.SerializedType}}class e3{constructor(e,n){e.forEach(([r,s])=>{const i=n[s.type];this[r]=ZL([r,s],i),this[this[r].ordinal.toString()]=this[r]})}fromString(e){return this[e]}}vp.FieldLookup=e3;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.BytesLookup=t.Bytes=t.FieldLookup=t.XrplDefinitionsBase=void 0;const e=ga;Object.defineProperty(t,"Bytes",{enumerable:!0,get:function(){return e.Bytes}}),Object.defineProperty(t,"BytesLookup",{enumerable:!0,get:function(){return e.BytesLookup}});const n=vp;Object.defineProperty(t,"FieldLookup",{enumerable:!0,get:function(){return n.FieldLookup}});const r=Kr;class s{constructor(a,l){this.type=new e.BytesLookup(a.TYPES,r.TYPE_WIDTH),this.ledgerEntryType=new e.BytesLookup(a.LEDGER_ENTRY_TYPES,r.LEDGER_ENTRY_WIDTH),this.transactionType=new e.BytesLookup(a.TRANSACTION_TYPES,r.TRANSACTION_TYPE_WIDTH),this.transactionResult=new e.BytesLookup(a.TRANSACTION_RESULTS,r.TRANSACTION_RESULT_WIDTH),this.field=new n.FieldLookup(a.FIELDS,a.TYPES),this.transactionNames=Object.entries(a.TRANSACTION_TYPES).filter(([c,u])=>u>=0).map(([c,u])=>c),this.dataTypes={},this.associateTypes(l)}associateTypes(a){this.dataTypes=Object.assign({},this.dataTypes,a),Object.values(this.field).forEach(l=>{l.associatedType=this.dataTypes[l.type.name]}),this.field.TransactionType.associatedType=this.transactionType,this.field.TransactionResult.associatedType=this.transactionResult,this.field.LedgerEntryType.associatedType=this.ledgerEntryType}getAssociatedTypes(){return this.dataTypes}}t.XrplDefinitionsBase=s})(qv);(function(t){var e=Ee&&Ee.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(t,"__esModule",{value:!0}),t.TRANSACTION_TYPES=t.TransactionType=t.TransactionResult=t.LedgerEntryType=t.Type=t.Field=t.DEFAULT_DEFINITIONS=t.XrplDefinitionsBase=t.Bytes=void 0;const n=e(zL),r=qv;Object.defineProperty(t,"XrplDefinitionsBase",{enumerable:!0,get:function(){return r.XrplDefinitionsBase}}),Object.defineProperty(t,"Bytes",{enumerable:!0,get:function(){return r.Bytes}});const s=new r.XrplDefinitionsBase(n.default,{});t.DEFAULT_DEFINITIONS=s;const i=s.type;t.Type=i;const a=s.ledgerEntryType;t.LedgerEntryType=a;const l=s.transactionType;t.TransactionType=l;const c=s.transactionResult;t.TransactionResult=c;const u=s.field;t.Field=u;const d=s.transactionNames;t.TRANSACTION_TYPES=d})(li);var yo={},vo={},ec={},Oa={},Rt={};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.compare=Rt.equal=Rt.readUInt32BE=Rt.readUInt16BE=Rt.writeUInt32BE=Rt.writeUInt16BE=Rt.writeUInt8=void 0;function t3(t,e,n){e=Number(e),t[n]=e}Rt.writeUInt8=t3;function n3(t,e,n){e=Number(e),t[n]=e>>>8,t[n+1]=e}Rt.writeUInt16BE=n3;function r3(t,e,n){t[n]=e>>>24&255,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=e&255}Rt.writeUInt32BE=r3;function s3(t,e){return new DataView(t.buffer).getUint16(e,!1).toString(10)}Rt.readUInt16BE=s3;function i3(t,e){return new DataView(t.buffer).getUint32(e,!1).toString(10)}Rt.readUInt32BE=i3;function o3(t,e){const n=t instanceof ArrayBuffer?new Uint8Array(t,0):t,r=e instanceof ArrayBuffer?new Uint8Array(e,0):e;return n.byteLength!=r.byteLength?!1:C_(n)&&C_(r)?c3(n,r)===0:A_(n)&&A_(r)?l3(n,r)===0:a3(n,r)===0}Rt.equal=o3;function a3(t,e){const n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);return wp(n,r)}function l3(t,e){const n=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);return wp(n,r)}function c3(t,e){const n=new Uint32Array(t.buffer,t.byteOffset,t.byteLength/4),r=new Uint32Array(e.buffer,e.byteOffset,e.byteLength/4);return wp(n,r)}function wp(t,e){if(t.byteLength!==e.byteLength)throw new Error("Cannot compare arrays of different length");for(let n=0;n<t.length-1;n+=1){if(t[n]>e[n])return 1;if(t[n]<e[n])return-1}return 0}Rt.compare=wp;function A_(t){return t.byteOffset%2===0&&t.byteLength%2===0}function C_(t){return t.byteOffset%4===0&&t.byteLength%4===0}Object.defineProperty(Oa,"__esModule",{value:!0});Oa.Hash=void 0;const u3=_n,d3=ft,h3=Rt;class f3 extends u3.Comparable{constructor(e){if(super(e),this.bytes.length!==this.constructor.width)throw new Error(`Invalid Hash length ${this.bytes.byteLength}`)}static from(e){if(e instanceof this)return e;if(typeof e=="string")return new this((0,d3.hexToBytes)(e));throw new Error("Cannot construct Hash from given value")}static fromParser(e,n){return new this(e.read(n??this.width))}compareTo(e){return(0,h3.compare)(this.bytes,this.constructor.from(e).bytes)}toString(){return this.toHex()}nibblet(e){const n=e>0?e/2|0:0;let r=this.bytes[n];return e%2===0?r=(r&240)>>>4:r=r&15,r}}Oa.Hash=f3;Object.defineProperty(ec,"__esModule",{value:!0});ec.Hash160=void 0;const p3=Oa;class Xi extends p3.Hash{constructor(e){e&&e.byteLength===0&&(e=Xi.ZERO_160.bytes),super(e??Xi.ZERO_160.bytes)}}ec.Hash160=Xi;Xi.width=20;Xi.ZERO_160=new Xi(new Uint8Array(Xi.width));Object.defineProperty(vo,"__esModule",{value:!0});vo.AccountID=void 0;const Wd=er,m3=ec,g3=ft,x3=/^[A-F0-9]{40}$/;class Vs extends m3.Hash160{constructor(e){super(e??Vs.defaultAccountID.bytes)}static from(e){if(e instanceof Vs)return e;if(typeof e=="string")return e===""?new Vs:x3.test(e)?new Vs((0,g3.hexToBytes)(e)):this.fromBase58(e);throw new Error("Cannot construct AccountID from value given")}static fromBase58(e){if((0,Wd.isValidXAddress)(e)){const n=(0,Wd.xAddressToClassicAddress)(e);if(n.tag!==!1)throw new Error("Only allowed to have tag on Account or Destination");e=n.classicAddress}return new Vs(Uint8Array.from((0,Wd.decodeAccountID)(e)))}toJSON(){return this.toBase58()}toBase58(){return(0,Wd.encodeAccountID)(this.bytes)}}vo.AccountID=Vs;Vs.defaultAccountID=new Vs(new Uint8Array(20));var bp={},rs={};Object.defineProperty(rs,"__esModule",{value:!0});rs.BinaryParser=void 0;const y3=li,v3=ft;class w3{constructor(e,n=y3.DEFAULT_DEFINITIONS){this.bytes=(0,v3.hexToBytes)(e),this.definitions=n}peek(){if(this.bytes.byteLength===0)throw new Error;return this.bytes[0]}skip(e){if(e>this.bytes.byteLength)throw new Error;this.bytes=this.bytes.slice(e)}read(e){if(e>this.bytes.byteLength)throw new Error;const n=this.bytes.slice(0,e);return this.skip(e),n}readUIntN(e){if(0>=e||e>4)throw new Error("invalid n");return this.read(e).reduce((n,r)=>n<<8|r)>>>0}readUInt8(){return this.readUIntN(1)}readUInt16(){return this.readUIntN(2)}readUInt32(){return this.readUIntN(4)}size(){return this.bytes.byteLength}end(e){const n=this.bytes.byteLength;return n===0||e!==void 0&&n<=e}readVariableLength(){return this.read(this.readVariableLengthLength())}readVariableLengthLength(){const e=this.readUInt8();if(e<=192)return e;if(e<=240){const n=this.readUInt8();return 193+(e-193)*256+n}else if(e<=254){const n=this.readUInt8(),r=this.readUInt8();return 12481+(e-241)*65536+n*256+r}throw new Error("Invalid variable length indicator")}readFieldOrdinal(){let e=this.readUInt8(),n=e&15;if(e>>=4,e===0&&(e=this.readUInt8(),e===0||e<16))throw new Error(`Cannot read FieldOrdinal, type_code ${e} out of range`);if(n===0&&(n=this.readUInt8(),n===0||n<16))throw new Error(`Cannot read FieldOrdinal, field_code ${n} out of range`);return e<<16|n}readField(){return this.definitions.field.fromString(this.readFieldOrdinal().toString())}readType(e){return e.fromParser(this)}typeForField(e){return e.associatedType}readFieldValue(e){const n=this.typeForField(e);if(!n)throw new Error(`unsupported: (${e.name}, ${e.type.name})`);const r=e.isVariableLengthEncoded?this.readVariableLengthLength():void 0,s=n.fromParser(this,r);if(s===void 0)throw new Error(`fromParser for (${e.name}, ${e.type.name}) -> undefined `);return s}readFieldAndValue(){const e=this.readField();return[e,this.readFieldValue(e)]}}rs.BinaryParser=w3;var Pa={};Object.defineProperty(Pa,"__esModule",{value:!0});Pa.Currency=void 0;const b3=ec,Ru=ft,_3=/^0{40}$/,E3=/^[A-Z0-9a-z?!@#$%^&*(){}[\]|]{3}$/,S3=/^[A-F0-9]{40}$/,N3=/^0{24}[\x00-\x7F]{6}0{10}$/;function T3(t){const e=new Uint8Array(20);if(t!=="XRP"){const n=t.split("").map(r=>r.charCodeAt(0));e.set(n,12)}return e}function A3(t){return E3.test(t)}function C3(t){const e=(0,Ru.hexToString)((0,Ru.bytesToHex)(t));return e==="XRP"?null:A3(e)?e:null}function j3(t){return S3.test(t)}function k3(t){return t.length===3||j3(t)}function O3(t){return t.byteLength===20}function P3(t){return t instanceof Uint8Array?O3(t):k3(t)}function I3(t){if(!P3(t))throw new Error(`Unsupported Currency representation: ${t}`);return t.length===3?T3(t):(0,Ru.hexToBytes)(t)}class sa extends b3.Hash160{constructor(e){super(e??sa.XRP.bytes);const n=(0,Ru.bytesToHex)(this.bytes);_3.test(n)?this._iso="XRP":N3.test(n)?this._iso=C3(this.bytes.slice(12,15)):this._iso=null}iso(){return this._iso}static from(e){if(e instanceof sa)return e;if(typeof e=="string")return new sa(I3(e));throw new Error("Cannot construct Currency from value given")}toJSON(){const e=this.iso();return e!==null?e:(0,Ru.bytesToHex)(this.bytes)}}Pa.Currency=sa;sa.XRP=new sa(new Uint8Array(20));var PT={exports:{}};(function(t){(function(e){var n,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,s=Math.ceil,i=Math.floor,a="[BigNumber Error] ",l=a+"Number primitive has more than 15 significant digits: ",c=1e14,u=14,d=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],f=1e7,p=1e9;function y(E){var D,te,re,z=q.prototype={constructor:q,toString:null,valueOf:null},J=new q(1),ce=20,pe=4,Q=-7,ue=21,V=-1e7,H=1e7,R=!1,C=1,A=0,L={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},$="0123456789abcdefghijklmnopqrstuvwxyz",ie=!0;function q(N,k){var B,O,P,F,Y,W,Z,ae,oe=this;if(!(oe instanceof q))return new q(N,k);if(k==null){if(N&&N._isBigNumber===!0){oe.s=N.s,!N.c||N.e>H?oe.c=oe.e=null:N.e<V?oe.c=[oe.e=0]:(oe.e=N.e,oe.c=N.c.slice());return}if((W=typeof N=="number")&&N*0==0){if(oe.s=1/N<0?(N=-N,-1):1,N===~~N){for(F=0,Y=N;Y>=10;Y/=10,F++);F>H?oe.c=oe.e=null:(oe.e=F,oe.c=[N]);return}ae=String(N)}else{if(!r.test(ae=String(N)))return re(oe,ae,W);oe.s=ae.charCodeAt(0)==45?(ae=ae.slice(1),-1):1}(F=ae.indexOf("."))>-1&&(ae=ae.replace(".","")),(Y=ae.search(/e/i))>0?(F<0&&(F=Y),F+=+ae.slice(Y+1),ae=ae.substring(0,Y)):F<0&&(F=ae.length)}else{if(x(k,2,$.length,"Base"),k==10&&ie)return oe=new q(N),se(oe,ce+oe.e+1,pe);if(ae=String(N),W=typeof N=="number"){if(N*0!=0)return re(oe,ae,W,k);if(oe.s=1/N<0?(ae=ae.slice(1),-1):1,q.DEBUG&&ae.replace(/^0\.0*|\./,"").length>15)throw Error(l+N)}else oe.s=ae.charCodeAt(0)===45?(ae=ae.slice(1),-1):1;for(B=$.slice(0,k),F=Y=0,Z=ae.length;Y<Z;Y++)if(B.indexOf(O=ae.charAt(Y))<0){if(O=="."){if(Y>F){F=Z;continue}}else if(!P&&(ae==ae.toUpperCase()&&(ae=ae.toLowerCase())||ae==ae.toLowerCase()&&(ae=ae.toUpperCase()))){P=!0,Y=-1,F=0;continue}return re(oe,String(N),W,k)}W=!1,ae=te(ae,k,10,oe.s),(F=ae.indexOf("."))>-1?ae=ae.replace(".",""):F=ae.length}for(Y=0;ae.charCodeAt(Y)===48;Y++);for(Z=ae.length;ae.charCodeAt(--Z)===48;);if(ae=ae.slice(Y,++Z)){if(Z-=Y,W&&q.DEBUG&&Z>15&&(N>d||N!==i(N)))throw Error(l+oe.s*N);if((F=F-Y-1)>H)oe.c=oe.e=null;else if(F<V)oe.c=[oe.e=0];else{if(oe.e=F,oe.c=[],Y=(F+1)%u,F<0&&(Y+=u),Y<Z){for(Y&&oe.c.push(+ae.slice(0,Y)),Z-=u;Y<Z;)oe.c.push(+ae.slice(Y,Y+=u));Y=u-(ae=ae.slice(Y)).length}else Y-=Z;for(;Y--;ae+="0");oe.c.push(+ae)}}else oe.c=[oe.e=0]}q.clone=y,q.ROUND_UP=0,q.ROUND_DOWN=1,q.ROUND_CEIL=2,q.ROUND_FLOOR=3,q.ROUND_HALF_UP=4,q.ROUND_HALF_DOWN=5,q.ROUND_HALF_EVEN=6,q.ROUND_HALF_CEIL=7,q.ROUND_HALF_FLOOR=8,q.EUCLID=9,q.config=q.set=function(N){var k,B;if(N!=null)if(typeof N=="object"){if(N.hasOwnProperty(k="DECIMAL_PLACES")&&(B=N[k],x(B,0,p,k),ce=B),N.hasOwnProperty(k="ROUNDING_MODE")&&(B=N[k],x(B,0,8,k),pe=B),N.hasOwnProperty(k="EXPONENTIAL_AT")&&(B=N[k],B&&B.pop?(x(B[0],-p,0,k),x(B[1],0,p,k),Q=B[0],ue=B[1]):(x(B,-p,p,k),Q=-(ue=B<0?-B:B))),N.hasOwnProperty(k="RANGE"))if(B=N[k],B&&B.pop)x(B[0],-p,-1,k),x(B[1],1,p,k),V=B[0],H=B[1];else if(x(B,-p,p,k),B)V=-(H=B<0?-B:B);else throw Error(a+k+" cannot be zero: "+B);if(N.hasOwnProperty(k="CRYPTO"))if(B=N[k],B===!!B)if(B)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))R=B;else throw R=!B,Error(a+"crypto unavailable");else R=B;else throw Error(a+k+" not true or false: "+B);if(N.hasOwnProperty(k="MODULO_MODE")&&(B=N[k],x(B,0,9,k),C=B),N.hasOwnProperty(k="POW_PRECISION")&&(B=N[k],x(B,0,p,k),A=B),N.hasOwnProperty(k="FORMAT"))if(B=N[k],typeof B=="object")L=B;else throw Error(a+k+" not an object: "+B);if(N.hasOwnProperty(k="ALPHABET"))if(B=N[k],typeof B=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(B))ie=B.slice(0,10)=="0123456789",$=B;else throw Error(a+k+" invalid: "+B)}else throw Error(a+"Object expected: "+N);return{DECIMAL_PLACES:ce,ROUNDING_MODE:pe,EXPONENTIAL_AT:[Q,ue],RANGE:[V,H],CRYPTO:R,MODULO_MODE:C,POW_PRECISION:A,FORMAT:L,ALPHABET:$}},q.isBigNumber=function(N){if(!N||N._isBigNumber!==!0)return!1;if(!q.DEBUG)return!0;var k,B,O=N.c,P=N.e,F=N.s;e:if({}.toString.call(O)=="[object Array]"){if((F===1||F===-1)&&P>=-p&&P<=p&&P===i(P)){if(O[0]===0){if(P===0&&O.length===1)return!0;break e}if(k=(P+1)%u,k<1&&(k+=u),String(O[0]).length==k){for(k=0;k<O.length;k++)if(B=O[k],B<0||B>=c||B!==i(B))break e;if(B!==0)return!0}}}else if(O===null&&P===null&&(F===null||F===1||F===-1))return!0;throw Error(a+"Invalid BigNumber: "+N)},q.maximum=q.max=function(){return ne(arguments,-1)},q.minimum=q.min=function(){return ne(arguments,1)},q.random=function(){var N=9007199254740992,k=Math.random()*N&2097151?function(){return i(Math.random()*N)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(B){var O,P,F,Y,W,Z=0,ae=[],oe=new q(J);if(B==null?B=ce:x(B,0,p),Y=s(B/u),R)if(crypto.getRandomValues){for(O=crypto.getRandomValues(new Uint32Array(Y*=2));Z<Y;)W=O[Z]*131072+(O[Z+1]>>>11),W>=9e15?(P=crypto.getRandomValues(new Uint32Array(2)),O[Z]=P[0],O[Z+1]=P[1]):(ae.push(W%1e14),Z+=2);Z=Y/2}else if(crypto.randomBytes){for(O=crypto.randomBytes(Y*=7);Z<Y;)W=(O[Z]&31)*281474976710656+O[Z+1]*1099511627776+O[Z+2]*4294967296+O[Z+3]*16777216+(O[Z+4]<<16)+(O[Z+5]<<8)+O[Z+6],W>=9e15?crypto.randomBytes(7).copy(O,Z):(ae.push(W%1e14),Z+=7);Z=Y/7}else throw R=!1,Error(a+"crypto unavailable");if(!R)for(;Z<Y;)W=k(),W<9e15&&(ae[Z++]=W%1e14);for(Y=ae[--Z],B%=u,Y&&B&&(W=h[u-B],ae[Z]=i(Y/W)*W);ae[Z]===0;ae.pop(),Z--);if(Z<0)ae=[F=0];else{for(F=-1;ae[0]===0;ae.splice(0,1),F-=u);for(Z=1,W=ae[0];W>=10;W/=10,Z++);Z<u&&(F-=u-Z)}return oe.e=F,oe.c=ae,oe}}(),q.sum=function(){for(var N=1,k=arguments,B=new q(k[0]);N<k.length;)B=B.plus(k[N++]);return B},te=function(){var N="0123456789";function k(B,O,P,F){for(var Y,W=[0],Z,ae=0,oe=B.length;ae<oe;){for(Z=W.length;Z--;W[Z]*=O);for(W[0]+=F.indexOf(B.charAt(ae++)),Y=0;Y<W.length;Y++)W[Y]>P-1&&(W[Y+1]==null&&(W[Y+1]=0),W[Y+1]+=W[Y]/P|0,W[Y]%=P)}return W.reverse()}return function(B,O,P,F,Y){var W,Z,ae,oe,fe,_e,Te,Ne,$e=B.indexOf("."),Ge=ce,j=pe;for($e>=0&&(oe=A,A=0,B=B.replace(".",""),Ne=new q(O),_e=Ne.pow(B.length-$e),A=oe,Ne.c=k(T(_(_e.c),_e.e,"0"),10,P,N),Ne.e=Ne.c.length),Te=k(B,O,P,Y?(W=$,N):(W=N,$)),ae=oe=Te.length;Te[--oe]==0;Te.pop());if(!Te[0])return W.charAt(0);if($e<0?--ae:(_e.c=Te,_e.e=ae,_e.s=F,_e=D(_e,Ne,Ge,j,P),Te=_e.c,fe=_e.r,ae=_e.e),Z=ae+Ge+1,$e=Te[Z],oe=P/2,fe=fe||Z<0||Te[Z+1]!=null,fe=j<4?($e!=null||fe)&&(j==0||j==(_e.s<0?3:2)):$e>oe||$e==oe&&(j==4||fe||j==6&&Te[Z-1]&1||j==(_e.s<0?8:7)),Z<1||!Te[0])B=fe?T(W.charAt(1),-Ge,W.charAt(0)):W.charAt(0);else{if(Te.length=Z,fe)for(--P;++Te[--Z]>P;)Te[Z]=0,Z||(++ae,Te=[1].concat(Te));for(oe=Te.length;!Te[--oe];);for($e=0,B="";$e<=oe;B+=W.charAt(Te[$e++]));B=T(B,ae,W.charAt(0))}return B}}(),D=function(){function N(O,P,F){var Y,W,Z,ae,oe=0,fe=O.length,_e=P%f,Te=P/f|0;for(O=O.slice();fe--;)Z=O[fe]%f,ae=O[fe]/f|0,Y=Te*Z+ae*_e,W=_e*Z+Y%f*f+oe,oe=(W/F|0)+(Y/f|0)+Te*ae,O[fe]=W%F;return oe&&(O=[oe].concat(O)),O}function k(O,P,F,Y){var W,Z;if(F!=Y)Z=F>Y?1:-1;else for(W=Z=0;W<F;W++)if(O[W]!=P[W]){Z=O[W]>P[W]?1:-1;break}return Z}function B(O,P,F,Y){for(var W=0;F--;)O[F]-=W,W=O[F]<P[F]?1:0,O[F]=W*Y+O[F]-P[F];for(;!O[0]&&O.length>1;O.splice(0,1));}return function(O,P,F,Y,W){var Z,ae,oe,fe,_e,Te,Ne,$e,Ge,j,g,S,K,le,me,ye,We,ze=O.s==P.s?1:-1,I=O.c,de=P.c;if(!I||!I[0]||!de||!de[0])return new q(!O.s||!P.s||(I?de&&I[0]==de[0]:!de)?NaN:I&&I[0]==0||!de?ze*0:ze/0);for($e=new q(ze),Ge=$e.c=[],ae=O.e-P.e,ze=F+ae+1,W||(W=c,ae=b(O.e/u)-b(P.e/u),ze=ze/u|0),oe=0;de[oe]==(I[oe]||0);oe++);if(de[oe]>(I[oe]||0)&&ae--,ze<0)Ge.push(1),fe=!0;else{for(le=I.length,ye=de.length,oe=0,ze+=2,_e=i(W/(de[0]+1)),_e>1&&(de=N(de,_e,W),I=N(I,_e,W),ye=de.length,le=I.length),K=ye,j=I.slice(0,ye),g=j.length;g<ye;j[g++]=0);We=de.slice(),We=[0].concat(We),me=de[0],de[1]>=W/2&&me++;do{if(_e=0,Z=k(de,j,ye,g),Z<0){if(S=j[0],ye!=g&&(S=S*W+(j[1]||0)),_e=i(S/me),_e>1)for(_e>=W&&(_e=W-1),Te=N(de,_e,W),Ne=Te.length,g=j.length;k(Te,j,Ne,g)==1;)_e--,B(Te,ye<Ne?We:de,Ne,W),Ne=Te.length,Z=1;else _e==0&&(Z=_e=1),Te=de.slice(),Ne=Te.length;if(Ne<g&&(Te=[0].concat(Te)),B(j,Te,g,W),g=j.length,Z==-1)for(;k(de,j,ye,g)<1;)_e++,B(j,ye<g?We:de,g,W),g=j.length}else Z===0&&(_e++,j=[0]);Ge[oe++]=_e,j[0]?j[g++]=I[K]||0:(j=[I[K]],g=1)}while((K++<le||j[0]!=null)&&ze--);fe=j[0]!=null,Ge[0]||Ge.splice(0,1)}if(W==c){for(oe=1,ze=Ge[0];ze>=10;ze/=10,oe++);se($e,F+($e.e=oe+ae*u-1)+1,Y,fe)}else $e.e=ae,$e.r=+fe;return $e}}();function G(N,k,B,O){var P,F,Y,W,Z;if(B==null?B=pe:x(B,0,8),!N.c)return N.toString();if(P=N.c[0],Y=N.e,k==null)Z=_(N.c),Z=O==1||O==2&&(Y<=Q||Y>=ue)?v(Z,Y):T(Z,Y,"0");else if(N=se(new q(N),k,B),F=N.e,Z=_(N.c),W=Z.length,O==1||O==2&&(k<=F||F<=Q)){for(;W<k;Z+="0",W++);Z=v(Z,F)}else if(k-=Y,Z=T(Z,F,"0"),F+1>W){if(--k>0)for(Z+=".";k--;Z+="0");}else if(k+=F-W,k>0)for(F+1==W&&(Z+=".");k--;Z+="0");return N.s<0&&P?"-"+Z:Z}function ne(N,k){for(var B,O,P=1,F=new q(N[0]);P<N.length;P++)O=new q(N[P]),(!O.s||(B=m(F,O))===k||B===0&&F.s===k)&&(F=O);return F}function he(N,k,B){for(var O=1,P=k.length;!k[--P];k.pop());for(P=k[0];P>=10;P/=10,O++);return(B=O+B*u-1)>H?N.c=N.e=null:B<V?N.c=[N.e=0]:(N.e=B,N.c=k),N}re=function(){var N=/^(-?)0([xbo])(?=\w[\w.]*$)/i,k=/^([^.]+)\.$/,B=/^\.([^.]+)$/,O=/^-?(Infinity|NaN)$/,P=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(F,Y,W,Z){var ae,oe=W?Y:Y.replace(P,"");if(O.test(oe))F.s=isNaN(oe)?null:oe<0?-1:1;else{if(!W&&(oe=oe.replace(N,function(fe,_e,Te){return ae=(Te=Te.toLowerCase())=="x"?16:Te=="b"?2:8,!Z||Z==ae?_e:fe}),Z&&(ae=Z,oe=oe.replace(k,"$1").replace(B,"0.$1")),Y!=oe))return new q(oe,ae);if(q.DEBUG)throw Error(a+"Not a"+(Z?" base "+Z:"")+" number: "+Y);F.s=null}F.c=F.e=null}}();function se(N,k,B,O){var P,F,Y,W,Z,ae,oe,fe=N.c,_e=h;if(fe){e:{for(P=1,W=fe[0];W>=10;W/=10,P++);if(F=k-P,F<0)F+=u,Y=k,Z=fe[ae=0],oe=i(Z/_e[P-Y-1]%10);else if(ae=s((F+1)/u),ae>=fe.length)if(O){for(;fe.length<=ae;fe.push(0));Z=oe=0,P=1,F%=u,Y=F-u+1}else break e;else{for(Z=W=fe[ae],P=1;W>=10;W/=10,P++);F%=u,Y=F-u+P,oe=Y<0?0:i(Z/_e[P-Y-1]%10)}if(O=O||k<0||fe[ae+1]!=null||(Y<0?Z:Z%_e[P-Y-1]),O=B<4?(oe||O)&&(B==0||B==(N.s<0?3:2)):oe>5||oe==5&&(B==4||O||B==6&&(F>0?Y>0?Z/_e[P-Y]:0:fe[ae-1])%10&1||B==(N.s<0?8:7)),k<1||!fe[0])return fe.length=0,O?(k-=N.e+1,fe[0]=_e[(u-k%u)%u],N.e=-k||0):fe[0]=N.e=0,N;if(F==0?(fe.length=ae,W=1,ae--):(fe.length=ae+1,W=_e[u-F],fe[ae]=Y>0?i(Z/_e[P-Y]%_e[Y])*W:0),O)for(;;)if(ae==0){for(F=1,Y=fe[0];Y>=10;Y/=10,F++);for(Y=fe[0]+=W,W=1;Y>=10;Y/=10,W++);F!=W&&(N.e++,fe[0]==c&&(fe[0]=1));break}else{if(fe[ae]+=W,fe[ae]!=c)break;fe[ae--]=0,W=1}for(F=fe.length;fe[--F]===0;fe.pop());}N.e>H?N.c=N.e=null:N.e<V&&(N.c=[N.e=0])}return N}function ee(N){var k,B=N.e;return B===null?N.toString():(k=_(N.c),k=B<=Q||B>=ue?v(k,B):T(k,B,"0"),N.s<0?"-"+k:k)}return z.absoluteValue=z.abs=function(){var N=new q(this);return N.s<0&&(N.s=1),N},z.comparedTo=function(N,k){return m(this,new q(N,k))},z.decimalPlaces=z.dp=function(N,k){var B,O,P,F=this;if(N!=null)return x(N,0,p),k==null?k=pe:x(k,0,8),se(new q(F),N+F.e+1,k);if(!(B=F.c))return null;if(O=((P=B.length-1)-b(this.e/u))*u,P=B[P])for(;P%10==0;P/=10,O--);return O<0&&(O=0),O},z.dividedBy=z.div=function(N,k){return D(this,new q(N,k),ce,pe)},z.dividedToIntegerBy=z.idiv=function(N,k){return D(this,new q(N,k),0,1)},z.exponentiatedBy=z.pow=function(N,k){var B,O,P,F,Y,W,Z,ae,oe,fe=this;if(N=new q(N),N.c&&!N.isInteger())throw Error(a+"Exponent not an integer: "+ee(N));if(k!=null&&(k=new q(k)),W=N.e>14,!fe.c||!fe.c[0]||fe.c[0]==1&&!fe.e&&fe.c.length==1||!N.c||!N.c[0])return oe=new q(Math.pow(+ee(fe),W?N.s*(2-w(N)):+ee(N))),k?oe.mod(k):oe;if(Z=N.s<0,k){if(k.c?!k.c[0]:!k.s)return new q(NaN);O=!Z&&fe.isInteger()&&k.isInteger(),O&&(fe=fe.mod(k))}else{if(N.e>9&&(fe.e>0||fe.e<-1||(fe.e==0?fe.c[0]>1||W&&fe.c[1]>=24e7:fe.c[0]<8e13||W&&fe.c[0]<=9999975e7)))return F=fe.s<0&&w(N)?-0:0,fe.e>-1&&(F=1/F),new q(Z?1/F:F);A&&(F=s(A/u+2))}for(W?(B=new q(.5),Z&&(N.s=1),ae=w(N)):(P=Math.abs(+ee(N)),ae=P%2),oe=new q(J);;){if(ae){if(oe=oe.times(fe),!oe.c)break;F?oe.c.length>F&&(oe.c.length=F):O&&(oe=oe.mod(k))}if(P){if(P=i(P/2),P===0)break;ae=P%2}else if(N=N.times(B),se(N,N.e+1,1),N.e>14)ae=w(N);else{if(P=+ee(N),P===0)break;ae=P%2}fe=fe.times(fe),F?fe.c&&fe.c.length>F&&(fe.c.length=F):O&&(fe=fe.mod(k))}return O?oe:(Z&&(oe=J.div(oe)),k?oe.mod(k):F?se(oe,A,pe,Y):oe)},z.integerValue=function(N){var k=new q(this);return N==null?N=pe:x(N,0,8),se(k,k.e+1,N)},z.isEqualTo=z.eq=function(N,k){return m(this,new q(N,k))===0},z.isFinite=function(){return!!this.c},z.isGreaterThan=z.gt=function(N,k){return m(this,new q(N,k))>0},z.isGreaterThanOrEqualTo=z.gte=function(N,k){return(k=m(this,new q(N,k)))===1||k===0},z.isInteger=function(){return!!this.c&&b(this.e/u)>this.c.length-2},z.isLessThan=z.lt=function(N,k){return m(this,new q(N,k))<0},z.isLessThanOrEqualTo=z.lte=function(N,k){return(k=m(this,new q(N,k)))===-1||k===0},z.isNaN=function(){return!this.s},z.isNegative=function(){return this.s<0},z.isPositive=function(){return this.s>0},z.isZero=function(){return!!this.c&&this.c[0]==0},z.minus=function(N,k){var B,O,P,F,Y=this,W=Y.s;if(N=new q(N,k),k=N.s,!W||!k)return new q(NaN);if(W!=k)return N.s=-k,Y.plus(N);var Z=Y.e/u,ae=N.e/u,oe=Y.c,fe=N.c;if(!Z||!ae){if(!oe||!fe)return oe?(N.s=-k,N):new q(fe?Y:NaN);if(!oe[0]||!fe[0])return fe[0]?(N.s=-k,N):new q(oe[0]?Y:pe==3?-0:0)}if(Z=b(Z),ae=b(ae),oe=oe.slice(),W=Z-ae){for((F=W<0)?(W=-W,P=oe):(ae=Z,P=fe),P.reverse(),k=W;k--;P.push(0));P.reverse()}else for(O=(F=(W=oe.length)<(k=fe.length))?W:k,W=k=0;k<O;k++)if(oe[k]!=fe[k]){F=oe[k]<fe[k];break}if(F&&(P=oe,oe=fe,fe=P,N.s=-N.s),k=(O=fe.length)-(B=oe.length),k>0)for(;k--;oe[B++]=0);for(k=c-1;O>W;){if(oe[--O]<fe[O]){for(B=O;B&&!oe[--B];oe[B]=k);--oe[B],oe[O]+=c}oe[O]-=fe[O]}for(;oe[0]==0;oe.splice(0,1),--ae);return oe[0]?he(N,oe,ae):(N.s=pe==3?-1:1,N.c=[N.e=0],N)},z.modulo=z.mod=function(N,k){var B,O,P=this;return N=new q(N,k),!P.c||!N.s||N.c&&!N.c[0]?new q(NaN):!N.c||P.c&&!P.c[0]?new q(P):(C==9?(O=N.s,N.s=1,B=D(P,N,0,3),N.s=O,B.s*=O):B=D(P,N,0,C),N=P.minus(B.times(N)),!N.c[0]&&C==1&&(N.s=P.s),N)},z.multipliedBy=z.times=function(N,k){var B,O,P,F,Y,W,Z,ae,oe,fe,_e,Te,Ne,$e,Ge,j=this,g=j.c,S=(N=new q(N,k)).c;if(!g||!S||!g[0]||!S[0])return!j.s||!N.s||g&&!g[0]&&!S||S&&!S[0]&&!g?N.c=N.e=N.s=null:(N.s*=j.s,!g||!S?N.c=N.e=null:(N.c=[0],N.e=0)),N;for(O=b(j.e/u)+b(N.e/u),N.s*=j.s,Z=g.length,fe=S.length,Z<fe&&(Ne=g,g=S,S=Ne,P=Z,Z=fe,fe=P),P=Z+fe,Ne=[];P--;Ne.push(0));for($e=c,Ge=f,P=fe;--P>=0;){for(B=0,_e=S[P]%Ge,Te=S[P]/Ge|0,Y=Z,F=P+Y;F>P;)ae=g[--Y]%Ge,oe=g[Y]/Ge|0,W=Te*ae+oe*_e,ae=_e*ae+W%Ge*Ge+Ne[F]+B,B=(ae/$e|0)+(W/Ge|0)+Te*oe,Ne[F--]=ae%$e;Ne[F]=B}return B?++O:Ne.splice(0,1),he(N,Ne,O)},z.negated=function(){var N=new q(this);return N.s=-N.s||null,N},z.plus=function(N,k){var B,O=this,P=O.s;if(N=new q(N,k),k=N.s,!P||!k)return new q(NaN);if(P!=k)return N.s=-k,O.minus(N);var F=O.e/u,Y=N.e/u,W=O.c,Z=N.c;if(!F||!Y){if(!W||!Z)return new q(P/0);if(!W[0]||!Z[0])return Z[0]?N:new q(W[0]?O:P*0)}if(F=b(F),Y=b(Y),W=W.slice(),P=F-Y){for(P>0?(Y=F,B=Z):(P=-P,B=W),B.reverse();P--;B.push(0));B.reverse()}for(P=W.length,k=Z.length,P-k<0&&(B=Z,Z=W,W=B,k=P),P=0;k;)P=(W[--k]=W[k]+Z[k]+P)/c|0,W[k]=c===W[k]?0:W[k]%c;return P&&(W=[P].concat(W),++Y),he(N,W,Y)},z.precision=z.sd=function(N,k){var B,O,P,F=this;if(N!=null&&N!==!!N)return x(N,1,p),k==null?k=pe:x(k,0,8),se(new q(F),N,k);if(!(B=F.c))return null;if(P=B.length-1,O=P*u+1,P=B[P]){for(;P%10==0;P/=10,O--);for(P=B[0];P>=10;P/=10,O++);}return N&&F.e+1>O&&(O=F.e+1),O},z.shiftedBy=function(N){return x(N,-d,d),this.times("1e"+N)},z.squareRoot=z.sqrt=function(){var N,k,B,O,P,F=this,Y=F.c,W=F.s,Z=F.e,ae=ce+4,oe=new q("0.5");if(W!==1||!Y||!Y[0])return new q(!W||W<0&&(!Y||Y[0])?NaN:Y?F:1/0);if(W=Math.sqrt(+ee(F)),W==0||W==1/0?(k=_(Y),(k.length+Z)%2==0&&(k+="0"),W=Math.sqrt(+k),Z=b((Z+1)/2)-(Z<0||Z%2),W==1/0?k="5e"+Z:(k=W.toExponential(),k=k.slice(0,k.indexOf("e")+1)+Z),B=new q(k)):B=new q(W+""),B.c[0]){for(Z=B.e,W=Z+ae,W<3&&(W=0);;)if(P=B,B=oe.times(P.plus(D(F,P,ae,1))),_(P.c).slice(0,W)===(k=_(B.c)).slice(0,W))if(B.e<Z&&--W,k=k.slice(W-3,W+1),k=="9999"||!O&&k=="4999"){if(!O&&(se(P,P.e+ce+2,0),P.times(P).eq(F))){B=P;break}ae+=4,W+=4,O=1}else{(!+k||!+k.slice(1)&&k.charAt(0)=="5")&&(se(B,B.e+ce+2,1),N=!B.times(B).eq(F));break}}return se(B,B.e+ce+1,pe,N)},z.toExponential=function(N,k){return N!=null&&(x(N,0,p),N++),G(this,N,k,1)},z.toFixed=function(N,k){return N!=null&&(x(N,0,p),N=N+this.e+1),G(this,N,k)},z.toFormat=function(N,k,B){var O,P=this;if(B==null)N!=null&&k&&typeof k=="object"?(B=k,k=null):N&&typeof N=="object"?(B=N,N=k=null):B=L;else if(typeof B!="object")throw Error(a+"Argument not an object: "+B);if(O=P.toFixed(N,k),P.c){var F,Y=O.split("."),W=+B.groupSize,Z=+B.secondaryGroupSize,ae=B.groupSeparator||"",oe=Y[0],fe=Y[1],_e=P.s<0,Te=_e?oe.slice(1):oe,Ne=Te.length;if(Z&&(F=W,W=Z,Z=F,Ne-=F),W>0&&Ne>0){for(F=Ne%W||W,oe=Te.substr(0,F);F<Ne;F+=W)oe+=ae+Te.substr(F,W);Z>0&&(oe+=ae+Te.slice(F)),_e&&(oe="-"+oe)}O=fe?oe+(B.decimalSeparator||"")+((Z=+B.fractionGroupSize)?fe.replace(new RegExp("\\d{"+Z+"}\\B","g"),"$&"+(B.fractionGroupSeparator||"")):fe):oe}return(B.prefix||"")+O+(B.suffix||"")},z.toFraction=function(N){var k,B,O,P,F,Y,W,Z,ae,oe,fe,_e,Te=this,Ne=Te.c;if(N!=null&&(W=new q(N),!W.isInteger()&&(W.c||W.s!==1)||W.lt(J)))throw Error(a+"Argument "+(W.isInteger()?"out of range: ":"not an integer: ")+ee(W));if(!Ne)return new q(Te);for(k=new q(J),ae=B=new q(J),O=Z=new q(J),_e=_(Ne),F=k.e=_e.length-Te.e-1,k.c[0]=h[(Y=F%u)<0?u+Y:Y],N=!N||W.comparedTo(k)>0?F>0?k:ae:W,Y=H,H=1/0,W=new q(_e),Z.c[0]=0;oe=D(W,k,0,1),P=B.plus(oe.times(O)),P.comparedTo(N)!=1;)B=O,O=P,ae=Z.plus(oe.times(P=ae)),Z=P,k=W.minus(oe.times(P=k)),W=P;return P=D(N.minus(B),O,0,1),Z=Z.plus(P.times(ae)),B=B.plus(P.times(O)),Z.s=ae.s=Te.s,F=F*2,fe=D(ae,O,F,pe).minus(Te).abs().comparedTo(D(Z,B,F,pe).minus(Te).abs())<1?[ae,O]:[Z,B],H=Y,fe},z.toNumber=function(){return+ee(this)},z.toPrecision=function(N,k){return N!=null&&x(N,1,p),G(this,N,k,2)},z.toString=function(N){var k,B=this,O=B.s,P=B.e;return P===null?O?(k="Infinity",O<0&&(k="-"+k)):k="NaN":(N==null?k=P<=Q||P>=ue?v(_(B.c),P):T(_(B.c),P,"0"):N===10&&ie?(B=se(new q(B),ce+P+1,pe),k=T(_(B.c),B.e,"0")):(x(N,2,$.length,"Base"),k=te(T(_(B.c),P,"0"),10,N,O,!0)),O<0&&B.c[0]&&(k="-"+k)),k},z.valueOf=z.toJSON=function(){return ee(this)},z._isBigNumber=!0,E!=null&&q.set(E),q}function b(E){var D=E|0;return E>0||E===D?D:D-1}function _(E){for(var D,te,re=1,z=E.length,J=E[0]+"";re<z;){for(D=E[re++]+"",te=u-D.length;te--;D="0"+D);J+=D}for(z=J.length;J.charCodeAt(--z)===48;);return J.slice(0,z+1||1)}function m(E,D){var te,re,z=E.c,J=D.c,ce=E.s,pe=D.s,Q=E.e,ue=D.e;if(!ce||!pe)return null;if(te=z&&!z[0],re=J&&!J[0],te||re)return te?re?0:-pe:ce;if(ce!=pe)return ce;if(te=ce<0,re=Q==ue,!z||!J)return re?0:!z^te?1:-1;if(!re)return Q>ue^te?1:-1;for(pe=(Q=z.length)<(ue=J.length)?Q:ue,ce=0;ce<pe;ce++)if(z[ce]!=J[ce])return z[ce]>J[ce]^te?1:-1;return Q==ue?0:Q>ue^te?1:-1}function x(E,D,te,re){if(E<D||E>te||E!==i(E))throw Error(a+(re||"Argument")+(typeof E=="number"?E<D||E>te?" out of range: ":" not an integer: ":" not a primitive number: ")+String(E))}function w(E){var D=E.c.length-1;return b(E.e/u)==D&&E.c[D]%2!=0}function v(E,D){return(E.length>1?E.charAt(0)+"."+E.slice(1):E)+(D<0?"e":"e+")+D}function T(E,D,te){var re,z;if(D<0){for(z=te+".";++D;z+=te);E=z+E}else if(re=E.length,++D>re){for(z=te,D-=re;--D;z+=te);E+=z}else D<re&&(E=E.slice(0,D)+"."+E.slice(D));return E}n=y(),n.default=n.BigNumber=n,t.exports?t.exports=n:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=n)})(Ee)})(PT);var tr=PT.exports,rd={};Object.defineProperty(rd,"__esModule",{value:!0});rd.Hash192=void 0;const R3=Oa;class Wi extends R3.Hash{constructor(e){e&&e.byteLength===0&&(e=Wi.ZERO_192.bytes),super(e??Wi.ZERO_192.bytes)}}rd.Hash192=Wi;Wi.width=24;Wi.ZERO_192=new Wi(new Uint8Array(Wi.width));var L3=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bp,"__esModule",{value:!0});bp.Amount=void 0;const j_=rs,k_=vo,O_=Pa,M3=_n,Us=L3(tr),Ho=ft,ls=Rt,P_=rd,IT=-96,RT=80,Zx=16,D3=new Us.default("1e17"),F3=new Us.default("1e-6"),j0=BigInt(4294967295),B3=BigInt(9223372036854776e3);Us.default.config({EXPONENTIAL_AT:[IT-Zx,RT+Zx]});function $3(t){const e=Object.keys(t).sort();return e.length===3&&e[0]==="currency"&&e[1]==="issuer"&&e[2]==="value"}function U3(t){const e=Object.keys(t).sort();return e.length===2&&e[0]==="mpt_issuance_id"&&e[1]==="value"}class An extends M3.SerializedType{constructor(e){super(e??An.defaultAmount.bytes)}static from(e){if(e instanceof An)return e;let n=new Uint8Array(8);if(typeof e=="string"){An.assertXrpIsValid(e);const r=BigInt(e),s=[new Uint8Array(4),new Uint8Array(4)];return(0,ls.writeUInt32BE)(s[0],Number(r>>BigInt(32)),0),(0,ls.writeUInt32BE)(s[1],Number(r&BigInt(j0)),0),n=(0,Ho.concat)(s),n[0]|=64,new An(n)}if($3(e)){const r=new Us.default(e.value);if(An.assertIouIsValid(r),r.isZero())n[0]|=128;else{const a=r.times(`1e${-((r.e||0)-15)}`).abs().toString(),l=BigInt(a),c=[new Uint8Array(4),new Uint8Array(4)];(0,ls.writeUInt32BE)(c[0],Number(l>>BigInt(32)),0),(0,ls.writeUInt32BE)(c[1],Number(l&BigInt(j0)),0),n=(0,Ho.concat)(c),n[0]|=128,r.gt(new Us.default(0))&&(n[0]|=64);const d=97+((r.e||0)-15);n[0]|=d>>>2,n[1]|=(d&3)<<6}const s=O_.Currency.from(e.currency).toBytes(),i=k_.AccountID.from(e.issuer).toBytes();return new An((0,Ho.concat)([n,s,i]))}if(U3(e)){An.assertMptIsValid(e.value);let r=new Uint8Array(1);r[0]|=96;const s=BigInt(e.value),i=[new Uint8Array(4),new Uint8Array(4)];(0,ls.writeUInt32BE)(i[0],Number(s>>BigInt(32)),0),(0,ls.writeUInt32BE)(i[1],Number(s&BigInt(j0)),0),n=(0,Ho.concat)(i);const a=P_.Hash192.from(e.mpt_issuance_id).toBytes();return new An((0,Ho.concat)([r,n,a]))}throw new Error("Invalid type to construct an Amount")}static fromParser(e){if(e.peek()&128)return new An(e.read(48));const s=e.peek()&32?33:8;return new An(e.read(s))}toJSON(){if(this.isNative()){const e=this.bytes,r=e[0]&64?"":"-";e[0]&=63;const s=BigInt((0,ls.readUInt32BE)(e.slice(0,4),0)),i=BigInt((0,ls.readUInt32BE)(e.slice(4),0)),a=s<<BigInt(32)|i;return`${r}${a.toString()}`}if(this.isIOU()){const e=new j_.BinaryParser(this.toString()),n=e.read(8),r=O_.Currency.fromParser(e),s=k_.AccountID.fromParser(e),i=n[0],a=n[1],c=i&64?"":"-",u=((i&63)<<2)+((a&255)>>6)-97;n[0]=0,n[1]&=63;const d=new Us.default(`${c}0x${(0,Ho.bytesToHex)(n)}`).times(`1e${u}`);return An.assertIouIsValid(d),{value:d.toString(),currency:r.toJSON(),issuer:s.toJSON()}}if(this.isMPT()){const e=new j_.BinaryParser(this.toString()),n=e.read(1),r=e.read(8),s=P_.Hash192.fromParser(e),a=n[0]&64?"":"-",l=BigInt((0,ls.readUInt32BE)(r.slice(0,4),0)),c=BigInt((0,ls.readUInt32BE)(r.slice(4),0)),u=l<<BigInt(32)|c;return{value:`${a}${u.toString()}`,mpt_issuance_id:s.toString()}}throw new Error("Invalid amount to construct JSON")}static assertXrpIsValid(e){if(e.indexOf(".")!==-1)throw new Error(`${e.toString()} is an illegal amount`);const n=new Us.default(e);if(!n.isZero()&&(n.lt(F3)||n.gt(D3)))throw new Error(`${e.toString()} is an illegal amount`)}static assertIouIsValid(e){if(!e.isZero()){const n=e.precision(),r=(e.e||0)-15;if(n>Zx||r>RT||r<IT)throw new Error("Decimal precision out of range");this.verifyNoDecimal(e)}}static assertMptIsValid(e){if(e.indexOf(".")!==-1)throw new Error(`${e.toString()} is an illegal amount`);const n=new Us.default(e);if(!n.isZero()){if(n<(0,Us.default)(0))throw new Error(`${e.toString()} is an illegal amount`);if(Number(BigInt(e)&BigInt(B3))!=0)throw new Error(`${e.toString()} is an illegal amount`)}}static verifyNoDecimal(e){if(e.times(`1e${-((e.e||0)-15)}`).abs().toString().indexOf(".")!==-1)throw new Error("Decimal place found in integerNumberString")}isNative(){return(this.bytes[0]&128)===0&&(this.bytes[0]&32)===0}isMPT(){return(this.bytes[0]&128)===0&&(this.bytes[0]&32)!==0}isIOU(){return(this.bytes[0]&128)!==0}}bp.Amount=An;An.defaultAmount=new An((0,Ho.hexToBytes)("4000000000000000"));var _p={};Object.defineProperty(_p,"__esModule",{value:!0});_p.Blob=void 0;const V3=_n,z3=ft;let H3=class Gh extends V3.SerializedType{constructor(e){super(e)}static fromParser(e,n){return new Gh(e.read(n))}static from(e){if(e instanceof Gh)return e;if(typeof e=="string"){if(!/^[A-F0-9]*$/iu.test(e))throw new Error("Cannot construct Blob from a non-hex string");return new Gh((0,z3.hexToBytes)(e))}throw new Error("Cannot construct Blob from value given")}};_p.Blob=H3;var Ep={};Object.defineProperty(Ep,"__esModule",{value:!0});Ep.Hash128=void 0;const X3=Oa,W3=ft;class Ki extends X3.Hash{constructor(e){e&&e.byteLength===0&&(e=Ki.ZERO_128.bytes),super(e??Ki.ZERO_128.bytes)}toHex(){const e=(0,W3.bytesToHex)(this.toBytes());return/^0+$/.exec(e)?"":e}}Ep.Hash128=Ki;Ki.width=16;Ki.ZERO_128=new Ki(new Uint8Array(Ki.width));var tc={};Object.defineProperty(tc,"__esModule",{value:!0});tc.Hash256=void 0;const K3=Oa;class ia extends K3.Hash{constructor(e){super(e??ia.ZERO_256.bytes)}}tc.Hash256=ia;ia.width=32;ia.ZERO_256=new ia(new Uint8Array(ia.width));var sd={};Object.defineProperty(sd,"__esModule",{value:!0});sd.Issue=void 0;const I_=ft,q3=rs,R_=vo,k0=Pa,G3=_n;function Y3(t){const e=Object.keys(t).sort();return e.length===1?e[0]==="currency":e.length===2&&e[0]==="currency"&&e[1]==="issuer"}class xs extends G3.SerializedType{constructor(e){super(e??xs.ZERO_ISSUED_CURRENCY.bytes)}static from(e){if(e instanceof xs)return e;if(Y3(e)){const n=k0.Currency.from(e.currency).toBytes();if(e.issuer==null)return new xs(n);const r=R_.AccountID.from(e.issuer).toBytes();return new xs((0,I_.concat)([n,r]))}throw new Error("Invalid type to construct an Amount")}static fromParser(e){const n=e.read(20);if(new k0.Currency(n).toJSON()==="XRP")return new xs(n);const r=[n,e.read(20)];return new xs((0,I_.concat)(r))}toJSON(){const e=new q3.BinaryParser(this.toString()),n=k0.Currency.fromParser(e);if(n.toJSON()==="XRP")return{currency:n.toJSON()};const r=R_.AccountID.fromParser(e);return{currency:n.toJSON(),issuer:r.toJSON()}}}sd.Issue=xs;xs.ZERO_ISSUED_CURRENCY=new xs(new Uint8Array(20));var Sp={};Object.defineProperty(Sp,"__esModule",{value:!0});Sp.PathSet=void 0;const Ba=vo,O0=Pa,Gv=rs,Yv=_n,oa=ft,ey=0,LT=255,P0=1,I0=16,R0=32;function J3(t){return t.issuer!==void 0||t.account!==void 0||t.currency!==void 0}function Q3(t){return Array.isArray(t)&&t.length===0||Array.isArray(t)&&Array.isArray(t[0])&&t[0].length===0||Array.isArray(t)&&Array.isArray(t[0])&&J3(t[0][0])}class aa extends Yv.SerializedType{static from(e){if(e instanceof aa)return e;const n=[Uint8Array.from([0])];return e.account&&(n.push(Ba.AccountID.from(e.account).toBytes()),n[0][0]|=P0),e.currency&&(n.push(O0.Currency.from(e.currency).toBytes()),n[0][0]|=I0),e.issuer&&(n.push(Ba.AccountID.from(e.issuer).toBytes()),n[0][0]|=R0),new aa((0,oa.concat)(n))}static fromParser(e){const n=e.readUInt8(),r=[Uint8Array.from([n])];return n&P0&&r.push(e.read(Ba.AccountID.width)),n&I0&&r.push(e.read(O0.Currency.width)),n&R0&&r.push(e.read(Ba.AccountID.width)),new aa((0,oa.concat)(r))}toJSON(){const e=new Gv.BinaryParser((0,oa.bytesToHex)(this.bytes)),n=e.readUInt8();let r,s,i;n&P0&&(r=Ba.AccountID.fromParser(e).toJSON()),n&I0&&(s=O0.Currency.fromParser(e).toJSON()),n&R0&&(i=Ba.AccountID.fromParser(e).toJSON());const a={};return r&&(a.account=r),i&&(a.issuer=i),s&&(a.currency=s),a}type(){return this.bytes[0]}}class la extends Yv.SerializedType{static from(e){if(e instanceof la)return e;const n=[];return e.forEach(r=>{n.push(aa.from(r).toBytes())}),new la((0,oa.concat)(n))}static fromParser(e){const n=[];for(;!e.end()&&(n.push(aa.fromParser(e).toBytes()),!(e.peek()===ey||e.peek()===LT)););return new la((0,oa.concat)(n))}toJSON(){const e=[],n=new Gv.BinaryParser(this.toString());for(;!n.end();)e.push(aa.fromParser(n).toJSON());return e}}class ru extends Yv.SerializedType{static from(e){if(e instanceof ru)return e;if(Q3(e)){const n=[];return e.forEach(r=>{n.push(la.from(r).toBytes()),n.push(Uint8Array.from([LT]))}),n[n.length-1]=Uint8Array.from([ey]),new ru((0,oa.concat)(n))}throw new Error("Cannot construct PathSet from given value")}static fromParser(e){const n=[];for(;!e.end()&&(n.push(la.fromParser(e).toBytes()),n.push(e.read(1)),n[n.length-1][0]!=ey););return new ru((0,oa.concat)(n))}toJSON(){const e=[],n=new Gv.BinaryParser(this.toString());for(;!n.end();)e.push(la.fromParser(n).toJSON()),n.skip(1);return e}}Sp.PathSet=ru;var bc={},_c={},nc={},Ia={};Object.defineProperty(Ia,"__esModule",{value:!0});Ia.UInt=void 0;const Z3=_n;function eM(t,e){return t<e?-1:t==e?0:1}class tM extends Z3.Comparable{constructor(e){super(e)}compareTo(e){return eM(this.valueOf(),e.valueOf())}toJSON(){const e=this.valueOf();return typeof e=="number"?e:e.toString()}static checkUintRange(e,n,r){if(e<n||e>r)throw new Error(`Invalid ${this.constructor.name}: ${e} must be >= ${n} and <= ${r}`)}}Ia.UInt=tM;Object.defineProperty(nc,"__esModule",{value:!0});nc.UInt64=void 0;const nM=Ia,Kd=ft,$a=Rt,rM=li,sM=/^[a-fA-F0-9]{1,16}$/,iM=/^[0-9]{1,20}$/,L_=BigInt(4294967295);function M_(t){return t==="MaximumAmount"||t==="OutstandingAmount"||t==="MPTAmount"}class Vn extends nM.UInt{constructor(e){super(e??Vn.defaultUInt64.bytes)}static fromParser(e){return new Vn(e.read(Vn.width))}static from(e,n=""){if(e instanceof Vn)return e;let r=new Uint8Array(Vn.width);if(typeof e=="number"){if(e<0)throw new Error("value must be an unsigned integer");const s=BigInt(e),i=[new Uint8Array(4),new Uint8Array(4)];return(0,$a.writeUInt32BE)(i[0],Number(s>>BigInt(32)),0),(0,$a.writeUInt32BE)(i[1],Number(s&BigInt(L_)),0),new Vn((0,Kd.concat)(i))}if(typeof e=="string"){if(M_(n)){if(!iM.test(e))throw new Error(`${n} ${e} is not a valid base 10 string`);e=BigInt(e).toString(16)}if(typeof e=="string"&&!sM.test(e))throw new Error(`${e} is not a valid hex-string`);const s=e.padStart(16,"0");return r=(0,Kd.hexToBytes)(s),new Vn(r)}if(typeof e=="bigint"){const s=[new Uint8Array(4),new Uint8Array(4)];return(0,$a.writeUInt32BE)(s[0],Number(Number(e>>BigInt(32))),0),(0,$a.writeUInt32BE)(s[1],Number(e&BigInt(L_)),0),new Vn((0,Kd.concat)(s))}throw new Error("Cannot construct UInt64 from given value")}toJSON(e=rM.DEFAULT_DEFINITIONS,n=""){const r=(0,Kd.bytesToHex)(this.bytes);return M_(n)?BigInt("0x"+r).toString(10):r}valueOf(){const e=BigInt((0,$a.readUInt32BE)(this.bytes.slice(0,4),0)),n=BigInt((0,$a.readUInt32BE)(this.bytes.slice(4),0));return e<<BigInt(32)|n}toBytes(){return this.bytes}}nc.UInt64=Vn;Vn.width=64/8;Vn.defaultUInt64=new Vn(new Uint8Array(Vn.width));var D_;function Jv(){if(D_)return _c;D_=1,Object.defineProperty(_c,"__esModule",{value:!0}),_c.STObject=void 0;const t=li,e=_n,n=er,r=rs,s=js,i=MT(),a=nc,l=Uint8Array.from([225]),c="ObjectEndMarker",u="STObject",d="Destination",h="Account",f="SourceTag",p="DestinationTag";function y(m,x){const w=(0,n.xAddressToClassicAddress)(x);let v;if(m===d)v=p;else if(m===h)v=f;else if(w.tag!==!1)throw new Error(`${m} cannot have an associated tag`);return w.tag!==!1?{[m]:w.classicAddress,[v]:w.tag}:{[m]:w.classicAddress}}function b(m,x){if(!(m[f]===void 0||x[f]===void 0))throw new Error("Cannot have Account X-Address and SourceTag");if(!(m[p]===void 0||x[p]===void 0))throw new Error("Cannot have Destination X-Address and DestinationTag")}class _ extends e.SerializedType{static fromParser(x){const w=new s.BytesList,v=new s.BinarySerializer(w);for(;!x.end();){const T=x.readField();if(T.name===c)break;const E=x.readFieldValue(T);v.writeFieldAndValue(T,E),T.type.name===u&&v.put(l)}return new _(w.toBytes())}static from(x,w,v=t.DEFAULT_DEFINITIONS){if(x instanceof _)return x;const T=new s.BytesList,E=new s.BinarySerializer(T);let D=!1;const te=Object.entries(x).reduce((z,[J,ce])=>{let pe;return ce&&(0,n.isValidXAddress)(ce.toString())&&(pe=y(J,ce.toString()),b(pe,x)),Object.assign(z,pe??{[J]:ce})},{});let re=Object.keys(te).map(z=>v.field[z]).filter(z=>z!==void 0&&te[z.name]!==void 0&&z.isSerialized).sort((z,J)=>z.ordinal-J.ordinal);return w!==void 0&&(re=re.filter(w)),re.forEach(z=>{const J=z.type.name===u?this.from(te[z.name],void 0,v):z.type.name==="STArray"?i.STArray.from(te[z.name],v):z.type.name==="UInt64"?a.UInt64.from(te[z.name],z.name):z.associatedType.from(te[z.name]);if(J==null)throw new TypeError(`Unable to interpret "${z.name}: ${te[z.name]}".`);J.name==="UNLModify"&&(D=!0);const ce=z.name=="Account"&&D;E.writeFieldAndValue(z,J,ce),z.type.name===u&&E.put(l)}),new _(T.toBytes())}toJSON(x){const w=new r.BinaryParser(this.toString(),x),v={};for(;!w.end();){const T=w.readField();if(T.name===c)break;v[T.name]=w.readFieldValue(T).toJSON(x,T.name)}return v}}return _c.STObject=_,_c}var F_;function MT(){if(F_)return bc;F_=1,Object.defineProperty(bc,"__esModule",{value:!0}),bc.STArray=void 0;const t=li,e=_n,n=Jv(),r=rs,s=ft,i=Uint8Array.from([241]),a="ArrayEndMarker",l=Uint8Array.from([225]);function c(d){return Array.isArray(d)&&d.every(h=>typeof h=="object"&&Object.keys(h).length===1&&typeof Object.values(h)[0]=="object")}class u extends e.SerializedType{static fromParser(h){const f=[];for(;!h.end();){const p=h.readField();if(p.name===a)break;f.push(p.header,h.readFieldValue(p).toBytes(),l)}return f.push(i),new u((0,s.concat)(f))}static from(h,f=t.DEFAULT_DEFINITIONS){if(h instanceof u)return h;if(c(h)){const p=[];return h.forEach(y=>{p.push(n.STObject.from(y,void 0,f).toBytes())}),p.push(i),new u((0,s.concat)(p))}throw new Error("Cannot construct STArray from value given")}toJSON(h=t.DEFAULT_DEFINITIONS){const f=[],p=new r.BinaryParser(this.toString(),h);for(;!p.end();){const y=p.readField();if(y.name===a)break;const b={};b[y.name]=n.STObject.fromParser(p).toJSON(h),f.push(b)}return f}}return bc.STArray=u,bc}var Np={};Object.defineProperty(Np,"__esModule",{value:!0});Np.UInt16=void 0;const oM=Ia,B_=Rt;class or extends oM.UInt{constructor(e){super(e??or.defaultUInt16.bytes)}static fromParser(e){return new or(e.read(or.width))}static from(e){if(e instanceof or)return e;if(typeof e=="number"){or.checkUintRange(e,0,65535);const n=new Uint8Array(or.width);return(0,B_.writeUInt16BE)(n,e,0),new or(n)}throw new Error("Can not construct UInt16 with given value")}valueOf(){return parseInt((0,B_.readUInt16BE)(this.bytes,0))}}Np.UInt16=or;or.width=16/8;or.defaultUInt16=new or(new Uint8Array(or.width));var id={};Object.defineProperty(id,"__esModule",{value:!0});id.UInt32=void 0;const aM=Ia,L0=Rt;class zn extends aM.UInt{constructor(e){super(e??zn.defaultUInt32.bytes)}static fromParser(e){return new zn(e.read(zn.width))}static from(e){if(e instanceof zn)return e;const n=new Uint8Array(zn.width);if(typeof e=="string"){const r=Number.parseInt(e);return(0,L0.writeUInt32BE)(n,r,0),new zn(n)}if(typeof e=="number")return zn.checkUintRange(e,0,4294967295),(0,L0.writeUInt32BE)(n,e,0),new zn(n);throw new Error("Cannot construct UInt32 from given value")}valueOf(){return parseInt((0,L0.readUInt32BE)(this.bytes,0),10)}}id.UInt32=zn;zn.width=32/8;zn.defaultUInt32=new zn(new Uint8Array(zn.width));var od={};Object.defineProperty(od,"__esModule",{value:!0});od.UInt8=void 0;const lM=Ia,cM=ft,uM=Rt;class ar extends lM.UInt{constructor(e){super(e??ar.defaultUInt8.bytes)}static fromParser(e){return new ar(e.read(ar.width))}static from(e){if(e instanceof ar)return e;if(typeof e=="number"){ar.checkUintRange(e,0,255);const n=new Uint8Array(ar.width);return(0,uM.writeUInt8)(n,e,0),new ar(n)}throw new Error("Cannot construct UInt8 from given value")}valueOf(){return parseInt((0,cM.bytesToHex)(this.bytes),16)}}od.UInt8=ar;ar.width=8/8;ar.defaultUInt8=new ar(new Uint8Array(ar.width));var Tp={};Object.defineProperty(Tp,"__esModule",{value:!0});Tp.Vector256=void 0;const dM=_n,$_=tc,U_=js,hM=ft;function fM(t){return Array.isArray(t)&&(t.length===0||typeof t[0]=="string")}class su extends dM.SerializedType{constructor(e){super(e)}static fromParser(e,n){const r=new U_.BytesList,i=(n??e.size())/32;for(let a=0;a<i;a++)$_.Hash256.fromParser(e).toBytesSink(r);return new su(r.toBytes())}static from(e){if(e instanceof su)return e;if(fM(e)){const n=new U_.BytesList;return e.forEach(r=>{$_.Hash256.from(r).toBytesSink(n)}),new su(n.toBytes())}throw new Error("Cannot construct Vector256 from given value")}toJSON(){if(this.bytes.byteLength%32!==0)throw new Error("Invalid bytes for Vector256");const e=[];for(let n=0;n<this.bytes.byteLength;n+=32)e.push((0,hM.bytesToHex)(this.bytes.slice(n,n+32)));return e}}Tp.Vector256=su;var Ap={};Object.defineProperty(Ap,"__esModule",{value:!0});Ap.XChainBridge=void 0;const pM=rs,iu=vo,mM=_n,V_=sd,ty=ft;function gM(t){const e=Object.keys(t).sort();return e.length===4&&e[0]==="IssuingChainDoor"&&e[1]==="IssuingChainIssue"&&e[2]==="LockingChainDoor"&&e[3]==="LockingChainIssue"}class vs extends mM.SerializedType{constructor(e){super(e??vs.ZERO_XCHAIN_BRIDGE.bytes)}static from(e){if(e instanceof vs)return e;if(!gM(e))throw new Error("Invalid type to construct an XChainBridge");const n=[];return this.TYPE_ORDER.forEach(r=>{const{name:s,type:i}=r;i===iu.AccountID&&n.push(Uint8Array.from([20]));const a=i.from(e[s]);n.push(a.toBytes())}),new vs((0,ty.concat)(n))}static fromParser(e){const n=[];return this.TYPE_ORDER.forEach(r=>{const{type:s}=r;s===iu.AccountID&&(e.skip(1),n.push(Uint8Array.from([20])));const i=s.fromParser(e);n.push(i.toBytes())}),new vs((0,ty.concat)(n))}toJSON(){const e=new pM.BinaryParser(this.toString()),n={};return vs.TYPE_ORDER.forEach(r=>{const{name:s,type:i}=r;i===iu.AccountID&&e.skip(1);const a=i.fromParser(e).toJSON();n[s]=a}),n}}Ap.XChainBridge=vs;vs.ZERO_XCHAIN_BRIDGE=new vs((0,ty.concat)([Uint8Array.from([20]),new Uint8Array(40),Uint8Array.from([20]),new Uint8Array(40)]));vs.TYPE_ORDER=[{name:"LockingChainDoor",type:iu.AccountID},{name:"LockingChainIssue",type:V_.Issue},{name:"IssuingChainDoor",type:iu.AccountID},{name:"IssuingChainIssue",type:V_.Issue}];(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Vector256=t.UInt64=t.UInt32=t.UInt16=t.UInt8=t.STObject=t.STArray=t.PathSet=t.Hash256=t.Hash192=t.Hash160=t.Hash128=t.Currency=t.Blob=t.Amount=t.AccountID=t.coreTypes=void 0;const e=vo;Object.defineProperty(t,"AccountID",{enumerable:!0,get:function(){return e.AccountID}});const n=bp;Object.defineProperty(t,"Amount",{enumerable:!0,get:function(){return n.Amount}});const r=_p;Object.defineProperty(t,"Blob",{enumerable:!0,get:function(){return r.Blob}});const s=Pa;Object.defineProperty(t,"Currency",{enumerable:!0,get:function(){return s.Currency}});const i=Ep;Object.defineProperty(t,"Hash128",{enumerable:!0,get:function(){return i.Hash128}});const a=ec;Object.defineProperty(t,"Hash160",{enumerable:!0,get:function(){return a.Hash160}});const l=rd;Object.defineProperty(t,"Hash192",{enumerable:!0,get:function(){return l.Hash192}});const c=tc;Object.defineProperty(t,"Hash256",{enumerable:!0,get:function(){return c.Hash256}});const u=sd,d=Sp;Object.defineProperty(t,"PathSet",{enumerable:!0,get:function(){return d.PathSet}});const h=MT();Object.defineProperty(t,"STArray",{enumerable:!0,get:function(){return h.STArray}});const f=Jv();Object.defineProperty(t,"STObject",{enumerable:!0,get:function(){return f.STObject}});const p=Np;Object.defineProperty(t,"UInt16",{enumerable:!0,get:function(){return p.UInt16}});const y=id;Object.defineProperty(t,"UInt32",{enumerable:!0,get:function(){return y.UInt32}});const b=nc;Object.defineProperty(t,"UInt64",{enumerable:!0,get:function(){return b.UInt64}});const _=od;Object.defineProperty(t,"UInt8",{enumerable:!0,get:function(){return _.UInt8}});const m=Tp;Object.defineProperty(t,"Vector256",{enumerable:!0,get:function(){return m.Vector256}});const x=Ap,w=li,v={AccountID:e.AccountID,Amount:n.Amount,Blob:r.Blob,Currency:s.Currency,Hash128:i.Hash128,Hash160:a.Hash160,Hash192:l.Hash192,Hash256:c.Hash256,Issue:u.Issue,PathSet:d.PathSet,STArray:h.STArray,STObject:f.STObject,UInt8:_.UInt8,UInt16:p.UInt16,UInt32:y.UInt32,UInt64:b.UInt64,Vector256:m.Vector256,XChainBridge:x.XChainBridge};t.coreTypes=v,w.DEFAULT_DEFINITIONS.associateTypes(v)})(yo);var Qv={},wo={};Object.defineProperty(wo,"__esModule",{value:!0});wo.HashPrefix=void 0;const xM=Rt;function cs(t){const e=new Uint8Array(4);return(0,xM.writeUInt32BE)(e,t,0),e}const yM={transactionID:cs(1415073280),transaction:cs(1397638144),accountStateEntry:cs(1296846336),innerNode:cs(1296649728),ledgerHeader:cs(1280791040),transactionSig:cs(1398036480),transactionMultiSig:cs(1397576704),validation:cs(1447119872),proposal:cs(1347571712),paymentChannelClaim:cs(1129073920)};wo.HashPrefix=yM;var Zr={},rc={},$t={},tt={};Object.defineProperty(tt,"__esModule",{value:!0});tt.add5L=tt.add5H=tt.add4H=tt.add4L=tt.add3H=tt.add3L=tt.rotlBL=tt.rotlBH=tt.rotlSL=tt.rotlSH=tt.rotr32L=tt.rotr32H=tt.rotrBL=tt.rotrBH=tt.rotrSL=tt.rotrSH=tt.shrSL=tt.shrSH=tt.toBig=void 0;tt.fromBig=Zv;tt.split=DT;tt.add=JT;const qd=BigInt(2**32-1),ny=BigInt(32);function Zv(t,e=!1){return e?{h:Number(t&qd),l:Number(t>>ny&qd)}:{h:Number(t>>ny&qd)|0,l:Number(t&qd)|0}}function DT(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:a}=Zv(t[s],e);[n[s],r[s]]=[i,a]}return[n,r]}const FT=(t,e)=>BigInt(t>>>0)<<ny|BigInt(e>>>0);tt.toBig=FT;const BT=(t,e,n)=>t>>>n;tt.shrSH=BT;const $T=(t,e,n)=>t<<32-n|e>>>n;tt.shrSL=$T;const UT=(t,e,n)=>t>>>n|e<<32-n;tt.rotrSH=UT;const VT=(t,e,n)=>t<<32-n|e>>>n;tt.rotrSL=VT;const zT=(t,e,n)=>t<<64-n|e>>>n-32;tt.rotrBH=zT;const HT=(t,e,n)=>t>>>n-32|e<<64-n;tt.rotrBL=HT;const XT=(t,e)=>e;tt.rotr32H=XT;const WT=(t,e)=>t;tt.rotr32L=WT;const KT=(t,e,n)=>t<<n|e>>>32-n;tt.rotlSH=KT;const qT=(t,e,n)=>e<<n|t>>>32-n;tt.rotlSL=qT;const GT=(t,e,n)=>e<<n-32|t>>>64-n;tt.rotlBH=GT;const YT=(t,e,n)=>t<<n-32|e>>>64-n;tt.rotlBL=YT;function JT(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const QT=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0);tt.add3L=QT;const ZT=(t,e,n,r)=>e+n+r+(t/2**32|0)|0;tt.add3H=ZT;const eA=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0);tt.add4L=eA;const tA=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0;tt.add4H=tA;const nA=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0);tt.add5L=nA;const rA=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0;tt.add5H=rA;const vM={fromBig:Zv,split:DT,toBig:FT,shrSH:BT,shrSL:$T,rotrSH:UT,rotrSL:VT,rotrBH:zT,rotrBL:HT,rotr32H:XT,rotr32L:WT,rotlSH:KT,rotlSL:qT,rotlBH:GT,rotlBL:YT,add:JT,add3L:QT,add3H:ZT,add4L:eA,add4H:tA,add5H:rA,add5L:nA};tt.default=vM;Object.defineProperty($t,"__esModule",{value:!0});$t.sha384=$t.sha512_256=$t.sha512_224=$t.sha512=$t.SHA384=$t.SHA512_256=$t.SHA512_224=$t.SHA512=void 0;const wM=oi,ot=tt,Cp=Zn,[bM,_M]=(()=>ot.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),mi=new Uint32Array(80),gi=new Uint32Array(80);class ad extends wM.HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:a,Dh:l,Dl:c,Eh:u,El:d,Fh:h,Fl:f,Gh:p,Gl:y,Hh:b,Hl:_}=this;return[e,n,r,s,i,a,l,c,u,d,h,f,p,y,b,_]}set(e,n,r,s,i,a,l,c,u,d,h,f,p,y,b,_){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=a|0,this.Dh=l|0,this.Dl=c|0,this.Eh=u|0,this.El=d|0,this.Fh=h|0,this.Fl=f|0,this.Gh=p|0,this.Gl=y|0,this.Hh=b|0,this.Hl=_|0}process(e,n){for(let w=0;w<16;w++,n+=4)mi[w]=e.getUint32(n),gi[w]=e.getUint32(n+=4);for(let w=16;w<80;w++){const v=mi[w-15]|0,T=gi[w-15]|0,E=ot.default.rotrSH(v,T,1)^ot.default.rotrSH(v,T,8)^ot.default.shrSH(v,T,7),D=ot.default.rotrSL(v,T,1)^ot.default.rotrSL(v,T,8)^ot.default.shrSL(v,T,7),te=mi[w-2]|0,re=gi[w-2]|0,z=ot.default.rotrSH(te,re,19)^ot.default.rotrBH(te,re,61)^ot.default.shrSH(te,re,6),J=ot.default.rotrSL(te,re,19)^ot.default.rotrBL(te,re,61)^ot.default.shrSL(te,re,6),ce=ot.default.add4L(D,J,gi[w-7],gi[w-16]),pe=ot.default.add4H(ce,E,z,mi[w-7],mi[w-16]);mi[w]=pe|0,gi[w]=ce|0}let{Ah:r,Al:s,Bh:i,Bl:a,Ch:l,Cl:c,Dh:u,Dl:d,Eh:h,El:f,Fh:p,Fl:y,Gh:b,Gl:_,Hh:m,Hl:x}=this;for(let w=0;w<80;w++){const v=ot.default.rotrSH(h,f,14)^ot.default.rotrSH(h,f,18)^ot.default.rotrBH(h,f,41),T=ot.default.rotrSL(h,f,14)^ot.default.rotrSL(h,f,18)^ot.default.rotrBL(h,f,41),E=h&p^~h&b,D=f&y^~f&_,te=ot.default.add5L(x,T,D,_M[w],gi[w]),re=ot.default.add5H(te,m,v,E,bM[w],mi[w]),z=te|0,J=ot.default.rotrSH(r,s,28)^ot.default.rotrBH(r,s,34)^ot.default.rotrBH(r,s,39),ce=ot.default.rotrSL(r,s,28)^ot.default.rotrBL(r,s,34)^ot.default.rotrBL(r,s,39),pe=r&i^r&l^i&l,Q=s&a^s&c^a&c;m=b|0,x=_|0,b=p|0,_=y|0,p=h|0,y=f|0,{h,l:f}=ot.default.add(u|0,d|0,re|0,z|0),u=l|0,d=c|0,l=i|0,c=a|0,i=r|0,a=s|0;const ue=ot.default.add3L(z,ce,Q);r=ot.default.add3H(ue,re,J,pe),s=ue|0}({h:r,l:s}=ot.default.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:a}=ot.default.add(this.Bh|0,this.Bl|0,i|0,a|0),{h:l,l:c}=ot.default.add(this.Ch|0,this.Cl|0,l|0,c|0),{h:u,l:d}=ot.default.add(this.Dh|0,this.Dl|0,u|0,d|0),{h,l:f}=ot.default.add(this.Eh|0,this.El|0,h|0,f|0),{h:p,l:y}=ot.default.add(this.Fh|0,this.Fl|0,p|0,y|0),{h:b,l:_}=ot.default.add(this.Gh|0,this.Gl|0,b|0,_|0),{h:m,l:x}=ot.default.add(this.Hh|0,this.Hl|0,m|0,x|0),this.set(r,s,i,a,l,c,u,d,h,f,p,y,b,_,m,x)}roundClean(){mi.fill(0),gi.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}$t.SHA512=ad;class sA extends ad{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}$t.SHA512_224=sA;class iA extends ad{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}$t.SHA512_256=iA;class oA extends ad{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}$t.SHA384=oA;$t.sha512=(0,Cp.wrapConstructor)(()=>new ad);$t.sha512_224=(0,Cp.wrapConstructor)(()=>new sA);$t.sha512_256=(0,Cp.wrapConstructor)(()=>new iA);$t.sha384=(0,Cp.wrapConstructor)(()=>new oA);var EM=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rc,"__esModule",{value:!0});rc.sha512=void 0;const SM=$t,NM=EM(nd);rc.sha512=(0,NM.default)(SM.sha512);Object.defineProperty(Zr,"__esModule",{value:!0});Zr.transactionID=Zr.sha512Half=Zr.Sha512Half=void 0;const TM=wo,aA=yo,AM=js,CM=rc;class jp extends AM.BytesList{constructor(){super(...arguments),this.hash=CM.sha512.create()}static put(e){return new jp().put(e)}put(e){return this.hash.update(e),this}finish256(){return Uint8Array.from(this.hash.digest().slice(0,32))}finish(){return new aA.Hash256(this.finish256())}}Zr.Sha512Half=jp;function lA(...t){const e=new jp;return t.forEach(n=>e.put(n)),e.finish256()}Zr.sha512Half=lA;function jM(t){return new aA.Hash256(lA(TM.HashPrefix.transactionID,t))}Zr.transactionID=jM;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.transactionID=t.sha512Half=t.binaryToJSON=t.signingClaimData=t.signingData=t.multiSigningData=t.readJSON=t.serializeObject=t.makeParser=t.BytesList=t.BinarySerializer=t.BinaryParser=void 0;const e=ft,n=yo,r=rs;Object.defineProperty(t,"BinaryParser",{enumerable:!0,get:function(){return r.BinaryParser}});const s=wo,i=js;Object.defineProperty(t,"BinarySerializer",{enumerable:!0,get:function(){return i.BinarySerializer}}),Object.defineProperty(t,"BytesList",{enumerable:!0,get:function(){return i.BytesList}});const a=Zr;Object.defineProperty(t,"sha512Half",{enumerable:!0,get:function(){return a.sha512Half}}),Object.defineProperty(t,"transactionID",{enumerable:!0,get:function(){return a.transactionID}});const l=li,c=(b,_)=>new r.BinaryParser(b instanceof Uint8Array?(0,e.bytesToHex)(b):b,_);t.makeParser=c;const u=(b,_=l.DEFAULT_DEFINITIONS)=>b.readType(n.coreTypes.STObject).toJSON(_);t.readJSON=u;const d=(b,_)=>u(c(b,_),_);t.binaryToJSON=d;function h(b,_={}){const{prefix:m,suffix:x,signingFieldsOnly:w=!1,definitions:v}=_,T=new i.BytesList;m&&T.put(m);const E=w?D=>D.isSigningField:void 0;return n.coreTypes.STObject.from(b,E,v).toBytesSink(T),x&&T.put(x),T.toBytes()}t.serializeObject=h;function f(b,_=s.HashPrefix.transactionSig,m={}){return h(b,{prefix:_,signingFieldsOnly:!0,definitions:m.definitions})}t.signingData=f;function p(b){const _=BigInt(String(b.amount)),m=s.HashPrefix.paymentChannelClaim,x=n.coreTypes.Hash256.from(b.channel).toBytes(),w=n.coreTypes.UInt64.from(_).toBytes(),v=new i.BytesList;return v.put(m),v.put(x),v.put(w),v.toBytes()}t.signingClaimData=p;function y(b,_,m={definitions:l.DEFAULT_DEFINITIONS}){const x=s.HashPrefix.transactionMultiSig,w=n.coreTypes.AccountID.from(_).toBytes();return h(b,{prefix:x,suffix:w,signingFieldsOnly:!0,definitions:m.definitions})}t.multiSigningData=y})(Qv);var Ys={};Object.defineProperty(Ys,"__esModule",{value:!0});Ys.ShaMapLeaf=Ys.ShaMapNode=Ys.ShaMap=void 0;const z_=yo,kM=wo,cA=Zr;class ew{}Ys.ShaMapNode=ew;class ry extends ew{constructor(e,n){super(),this.index=e,this.item=n}isLeaf(){return!0}isInner(){return!1}hashPrefix(){return this.item===void 0?new Uint8Array(0):this.item.hashPrefix()}hash(){const e=cA.Sha512Half.put(this.hashPrefix());return this.toBytesSink(e),e.finish()}toBytesSink(e){this.item!==void 0&&this.item.toBytesSink(e),this.index.toBytesSink(e)}}Ys.ShaMapLeaf=ry;class Cf extends ew{constructor(e=0){super(),this.depth=e,this.slotBits=0,this.branches=Array(16)}isInner(){return!0}isLeaf(){return!1}hashPrefix(){return kM.HashPrefix.innerNode}setBranch(e,n){this.slotBits=this.slotBits|1<<e,this.branches[e]=n}empty(){return this.slotBits===0}hash(){if(this.empty())return z_.coreTypes.Hash256.ZERO_256;const e=cA.Sha512Half.put(this.hashPrefix());return this.toBytesSink(e),e.finish()}toBytesSink(e){for(let n=0;n<this.branches.length;n++){const r=this.branches[n];(r?r.hash():z_.coreTypes.Hash256.ZERO_256).toBytesSink(e)}}addItem(e,n,r){if(e===void 0)throw new Error;if(e!==void 0){const s=e.nibblet(this.depth),i=this.branches[s];if(i===void 0)this.setBranch(s,r||new ry(e,n));else if(i instanceof ry){const a=new Cf(this.depth+1);a.addItem(i.index,void 0,i),a.addItem(e,n,r),this.setBranch(s,a)}else if(i instanceof Cf)i.addItem(e,n,r);else throw new Error("invalid ShaMap.addItem call")}}}class OM extends Cf{}Ys.ShaMap=OM;var qr={};Object.defineProperty(qr,"__esModule",{value:!0});qr.decodeLedgerData=qr.ledgerHash=qr.transactionTreeHash=qr.accountStateHash=void 0;const PM=Ys,tw=wo,IM=Zr,uA=Qv,qi=tc,H_=Jv(),dA=nc,M0=id,X_=od,RM=rs;function hA(t,e){const n=new PM.ShaMap;return e.forEach(r=>n.addItem(...t(r))),n.hash()}function LM(t){if(!t.hash)throw new Error;return[qi.Hash256.from(t.hash),{hashPrefix(){return tw.HashPrefix.transaction},toBytesSink(r){const s=new uA.BinarySerializer(r);s.writeLengthEncoded(H_.STObject.from(t)),s.writeLengthEncoded(H_.STObject.from(t.metaData))}},void 0]}function MM(t){const e=qi.Hash256.from(t.index),n=(0,uA.serializeObject)(t);return[e,{hashPrefix(){return tw.HashPrefix.accountStateEntry},toBytesSink(s){s.put(n)}},void 0]}function DM(t){return hA(LM,t)}qr.transactionTreeHash=DM;function FM(t){return hA(MM,t)}qr.accountStateHash=FM;function BM(t){const e=new IM.Sha512Half;if(e.put(tw.HashPrefix.ledgerHeader),t.parent_close_time===void 0||t.close_flags===void 0)throw new Error;return M0.UInt32.from(t.ledger_index).toBytesSink(e),dA.UInt64.from(BigInt(String(t.total_coins))).toBytesSink(e),qi.Hash256.from(t.parent_hash).toBytesSink(e),qi.Hash256.from(t.transaction_hash).toBytesSink(e),qi.Hash256.from(t.account_hash).toBytesSink(e),M0.UInt32.from(t.parent_close_time).toBytesSink(e),M0.UInt32.from(t.close_time).toBytesSink(e),X_.UInt8.from(t.close_time_resolution).toBytesSink(e),X_.UInt8.from(t.close_flags).toBytesSink(e),e.finish()}qr.ledgerHash=BM;function $M(t,e){if(typeof t!="string")throw new Error("binary must be a hex string");const n=new RM.BinaryParser(t,e);return{ledger_index:n.readUInt32(),total_coins:n.readType(dA.UInt64).valueOf().toString(),parent_hash:n.readType(qi.Hash256).toHex(),transaction_hash:n.readType(qi.Hash256).toHex(),account_hash:n.readType(qi.Hash256).toHex(),parent_close_time:n.readUInt32(),close_time:n.readUInt32(),close_time_resolution:n.readUInt8(),close_flags:n.readUInt8()}}qr.decodeLedgerData=$M;var kp={},UM=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(kp,"__esModule",{value:!0});kp.quality=void 0;const VM=yo,W_=UM(tr),K_=ft;let zM=class{static encode(e){const n=(0,W_.default)(e),r=((n==null?void 0:n.e)||0)-15,s=n.times(`1e${-r}`).abs().toString(),i=VM.coreTypes.UInt64.from(BigInt(s)).toBytes();return i[0]=r+100,i}static decode(e){const n=(0,K_.hexToBytes)(e).slice(-8),r=n[0]-100;return new W_.default(`0x${(0,K_.bytesToHex)(n.slice(1))}`).times(`1e${r}`)}};kp.quality=zM;(function(t){var e=Ee&&Ee.__createBinding||(Object.create?function(f,p,y,b){b===void 0&&(b=y);var _=Object.getOwnPropertyDescriptor(p,y);(!_||("get"in _?!p.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return p[y]}}),Object.defineProperty(f,b,_)}:function(f,p,y,b){b===void 0&&(b=y),f[b]=p[y]}),n=Ee&&Ee.__setModuleDefault||(Object.create?function(f,p){Object.defineProperty(f,"default",{enumerable:!0,value:p})}:function(f,p){f.default=p}),r=Ee&&Ee.__importStar||function(f){if(f&&f.__esModule)return f;var p={};if(f!=null)for(var y in f)y!=="default"&&Object.prototype.hasOwnProperty.call(f,y)&&e(p,f,y);return n(p,f),p};Object.defineProperty(t,"__esModule",{value:!0}),t.types=t.ShaMap=t.HashPrefix=t.quality=t.TransactionResult=t.Type=t.LedgerEntryType=t.TransactionType=t.Field=t.DEFAULT_DEFINITIONS=t.ledgerHashes=t.binary=t.hashes=void 0;const s=li;Object.defineProperty(t,"DEFAULT_DEFINITIONS",{enumerable:!0,get:function(){return s.DEFAULT_DEFINITIONS}}),Object.defineProperty(t,"Field",{enumerable:!0,get:function(){return s.Field}}),Object.defineProperty(t,"TransactionType",{enumerable:!0,get:function(){return s.TransactionType}}),Object.defineProperty(t,"LedgerEntryType",{enumerable:!0,get:function(){return s.LedgerEntryType}}),Object.defineProperty(t,"Type",{enumerable:!0,get:function(){return s.Type}}),Object.defineProperty(t,"TransactionResult",{enumerable:!0,get:function(){return s.TransactionResult}});const i=r(yo);t.types=i;const a=r(Qv);t.binary=a;const l=Ys;Object.defineProperty(t,"ShaMap",{enumerable:!0,get:function(){return l.ShaMap}});const c=r(qr);t.ledgerHashes=c;const u=r(Zr);t.hashes=u;const d=kp;Object.defineProperty(t,"quality",{enumerable:!0,get:function(){return d.quality}});const h=wo;Object.defineProperty(t,"HashPrefix",{enumerable:!0,get:function(){return h.HashPrefix}})})(kT);var Op={};Object.defineProperty(Op,"__esModule",{value:!0});Op.XrplDefinitions=void 0;const HM=qv,XM=yo;class WM extends HM.XrplDefinitionsBase{constructor(e,n){const r=Object.assign({},XM.coreTypes,n);super(e,r)}}Op.XrplDefinitions=WM;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.coreTypes=t.DEFAULT_DEFINITIONS=t.XrplDefinitionsBase=t.XrplDefinitions=t.TRANSACTION_TYPES=t.decodeLedgerData=t.decodeQuality=t.encodeQuality=t.encodeForMultisigning=t.encodeForSigningClaim=t.encodeForSigning=t.encode=t.decode=void 0;const e=kT,n=qr;Object.defineProperty(t,"decodeLedgerData",{enumerable:!0,get:function(){return n.decodeLedgerData}});const r=li;Object.defineProperty(t,"XrplDefinitionsBase",{enumerable:!0,get:function(){return r.XrplDefinitionsBase}}),Object.defineProperty(t,"TRANSACTION_TYPES",{enumerable:!0,get:function(){return r.TRANSACTION_TYPES}}),Object.defineProperty(t,"DEFAULT_DEFINITIONS",{enumerable:!0,get:function(){return r.DEFAULT_DEFINITIONS}});const s=Op;Object.defineProperty(t,"XrplDefinitions",{enumerable:!0,get:function(){return s.XrplDefinitions}});const i=yo;Object.defineProperty(t,"coreTypes",{enumerable:!0,get:function(){return i.coreTypes}});const a=ft,{signingData:l,signingClaimData:c,multiSigningData:u,binaryToJSON:d,serializeObject:h}=e.binary;function f(w,v){if(typeof w!="string")throw new Error("binary must be a hex string");return d(w,v)}t.decode=f;function p(w,v){if(typeof w!="object")throw new Error;return(0,a.bytesToHex)(h(w,{definitions:v}))}t.encode=p;function y(w,v){if(typeof w!="object")throw new Error;return(0,a.bytesToHex)(l(w,e.HashPrefix.transactionSig,{definitions:v}))}t.encodeForSigning=y;function b(w){if(typeof w!="object")throw new Error;return(0,a.bytesToHex)(c(w))}t.encodeForSigningClaim=b;function _(w,v,T){if(typeof w!="object")throw new Error;if(w.SigningPubKey!=="")throw new Error;const E=T?{definitions:T}:void 0;return(0,a.bytesToHex)(u(w,v,E))}t.encodeForMultisigning=_;function m(w){if(typeof w!="string")throw new Error;return(0,a.bytesToHex)(e.quality.encode(w))}t.encodeQuality=m;function x(w){if(typeof w!="string")throw new Error;return e.quality.decode(w).toString()}t.decodeQuality=x})(Ir);var on={};Object.defineProperty(on,"__esModule",{value:!0});on.isHex=on.isFlagEnabled=on.onlyHasFields=on.INTEGER_SANITY_CHECK=void 0;const KM=/^[0-9A-Fa-f]+$/u;on.INTEGER_SANITY_CHECK=/^[0-9]+$/u;function qM(t,e){return Object.keys(t).every(n=>e.includes(n))}on.onlyHasFields=qM;function GM(t,e){return(BigInt(e)&BigInt(t))===BigInt(e)}on.isFlagEnabled=GM;function YM(t){return KM.test(t)}on.isHex=YM;Object.defineProperty(Le,"__esModule",{value:!0});Le.validateCredentialsList=Le.validateCredentialType=Le.parseAmountValue=Le.validateBaseTransaction=Le.validateOptionalField=Le.validateRequiredField=Le.isXChainBridge=Le.isAmount=Le.isAccount=Le.isMPTAmount=Le.isIssuedCurrency=Le.isCurrency=Le.isNumber=Le.isString=void 0;const JM=ft,q_=er,QM=Ir,Kt=Me,ZM=on,e4=3,G_=8,t4=64,Y_=t4*2;function n4(t){if(t.Memo==null)return!1;const e=t.Memo,n=Object.keys(e).length,r=e.MemoData==null||typeof e.MemoData=="string",s=e.MemoFormat==null||typeof e.MemoFormat=="string",i=e.MemoType==null||typeof e.MemoType=="string";return n>=1&&n<=e4&&r&&s&&i&&(0,ZM.onlyHasFields)(e,["MemoFormat","MemoData","MemoType"])}const r4=3;function s4(t){const e=t;if(e.Signer==null)return!1;const n=e.Signer;return Object.keys(n).length===r4&&typeof n.Account=="string"&&typeof n.TxnSignature=="string"&&typeof n.SigningPubKey=="string"}const i4=1,o4=2,a4=3,l4=4,c4=2,u4=1;function $l(t){return t!==null&&typeof t=="object"}function Oi(t){return typeof t=="string"}Le.isString=Oi;function sl(t){return typeof t=="number"}Le.isNumber=sl;function sy(t){return $l(t)&&(Object.keys(t).length===o4&&typeof t.issuer=="string"&&typeof t.currency=="string"||Object.keys(t).length===i4&&t.currency==="XRP")}Le.isCurrency=sy;function fA(t){return $l(t)&&Object.keys(t).length===a4&&typeof t.value=="string"&&typeof t.issuer=="string"&&typeof t.currency=="string"}Le.isIssuedCurrency=fA;function d4(t){return $l(t)&&$l(t.Credential)&&Object.keys(t).length===u4&&typeof t.Credential.CredentialType=="string"&&typeof t.Credential.Issuer=="string"}function pA(t){return $l(t)&&Object.keys(t).length===c4&&typeof t.value=="string"&&typeof t.mpt_issuance_id=="string"}Le.isMPTAmount=pA;function h4(t){return typeof t=="string"&&((0,q_.isValidClassicAddress)(t)||(0,q_.isValidXAddress)(t))}Le.isAccount=h4;function mA(t){return typeof t=="string"||fA(t)||pA(t)}Le.isAmount=mA;function f4(t){return $l(t)&&Object.keys(t).length===l4&&typeof t.LockingChainDoor=="string"&&sy(t.LockingChainIssue)&&typeof t.IssuingChainDoor=="string"&&sy(t.IssuingChainIssue)}Le.isXChainBridge=f4;function gA(t,e,n){if(t[e]==null)throw new Kt.ValidationError(`${t.TransactionType}: missing field ${e}`);if(!n(t[e]))throw new Kt.ValidationError(`${t.TransactionType}: invalid field ${e}`)}Le.validateRequiredField=gA;function ps(t,e,n){if(t[e]!==void 0&&!n(t[e]))throw new Kt.ValidationError(`${t.TransactionType}: invalid field ${e}`)}Le.validateOptionalField=ps;function p4(t){if(t.TransactionType===void 0)throw new Kt.ValidationError("BaseTransaction: missing field TransactionType");if(typeof t.TransactionType!="string")throw new Kt.ValidationError("BaseTransaction: TransactionType not string");if(!QM.TRANSACTION_TYPES.includes(t.TransactionType))throw new Kt.ValidationError("BaseTransaction: Unknown TransactionType");gA(t,"Account",Oi),ps(t,"Fee",Oi),ps(t,"Sequence",sl),ps(t,"AccountTxnID",Oi),ps(t,"LastLedgerSequence",sl);const e=t.Memos;if(e!==void 0&&!e.every(n4))throw new Kt.ValidationError("BaseTransaction: invalid Memos");const n=t.Signers;if(n!==void 0&&(n.length===0||!n.every(s4)))throw new Kt.ValidationError("BaseTransaction: invalid Signers");ps(t,"SourceTag",sl),ps(t,"SigningPubKey",Oi),ps(t,"TicketSequence",sl),ps(t,"TxnSignature",Oi),ps(t,"NetworkID",sl)}Le.validateBaseTransaction=p4;function m4(t){return mA(t)?parseFloat(typeof t=="string"?t:t.value):NaN}Le.parseAmountValue=m4;function g4(t){if(typeof t.TransactionType!="string")throw new Kt.ValidationError("Invalid TransactionType");if(t.CredentialType===void 0)throw new Kt.ValidationError(`${t.TransactionType}: missing field CredentialType`);if(!Oi(t.CredentialType))throw new Kt.ValidationError(`${t.TransactionType}: CredentialType must be a string`);if(t.CredentialType.length===0)throw new Kt.ValidationError(`${t.TransactionType}: CredentialType cannot be an empty string`);if(t.CredentialType.length>Y_)throw new Kt.ValidationError(`${t.TransactionType}: CredentialType length cannot be > ${Y_}`);if(!JM.HEX_REGEX.test(t.CredentialType))throw new Kt.ValidationError(`${t.TransactionType}: CredentialType must be encoded in hex`)}Le.validateCredentialType=g4;function x4(t,e,n){if(t!=null){if(!Array.isArray(t))throw new Kt.ValidationError(`${e}: Credentials must be an array`);if(t.length>G_)throw new Kt.ValidationError(`${e}: Credentials length cannot exceed ${G_} elements`);if(t.length===0)throw new Kt.ValidationError(`${e}: Credentials cannot be an empty array`);if(t.forEach(r=>{if(n){if(!Oi(r))throw new Kt.ValidationError(`${e}: Invalid Credentials ID list format`)}else if(!d4(r))throw new Kt.ValidationError(`${e}: Invalid Credentials format`)}),y4(t))throw new Kt.ValidationError(`${e}: Credentials cannot contain duplicate elements`)}}Le.validateCredentialsList=x4;function y4(t){return new Set(t.map(n=>JSON.stringify(n))).size!==t.length}Object.defineProperty(As,"__esModule",{value:!0});As.validateAccountSet=As.AccountSetTfFlags=As.AccountSetAsfFlags=void 0;const us=Me,D0=Le;var jf;(function(t){t[t.asfRequireDest=1]="asfRequireDest",t[t.asfRequireAuth=2]="asfRequireAuth",t[t.asfDisallowXRP=3]="asfDisallowXRP",t[t.asfDisableMaster=4]="asfDisableMaster",t[t.asfAccountTxnID=5]="asfAccountTxnID",t[t.asfNoFreeze=6]="asfNoFreeze",t[t.asfGlobalFreeze=7]="asfGlobalFreeze",t[t.asfDefaultRipple=8]="asfDefaultRipple",t[t.asfDepositAuth=9]="asfDepositAuth",t[t.asfAuthorizedNFTokenMinter=10]="asfAuthorizedNFTokenMinter",t[t.asfDisallowIncomingNFTokenOffer=12]="asfDisallowIncomingNFTokenOffer",t[t.asfDisallowIncomingCheck=13]="asfDisallowIncomingCheck",t[t.asfDisallowIncomingPayChan=14]="asfDisallowIncomingPayChan",t[t.asfDisallowIncomingTrustline=15]="asfDisallowIncomingTrustline",t[t.asfAllowTrustLineClawback=16]="asfAllowTrustLineClawback"})(jf||(As.AccountSetAsfFlags=jf={}));var J_;(function(t){t[t.tfRequireDestTag=65536]="tfRequireDestTag",t[t.tfOptionalDestTag=131072]="tfOptionalDestTag",t[t.tfRequireAuth=262144]="tfRequireAuth",t[t.tfOptionalAuth=524288]="tfOptionalAuth",t[t.tfDisallowXRP=1048576]="tfDisallowXRP",t[t.tfAllowXRP=2097152]="tfAllowXRP"})(J_||(As.AccountSetTfFlags=J_={}));const v4=3,w4=15;function b4(t){if((0,D0.validateBaseTransaction)(t),(0,D0.validateOptionalField)(t,"NFTokenMinter",D0.isAccount),t.ClearFlag!==void 0){if(typeof t.ClearFlag!="number")throw new us.ValidationError("AccountSet: invalid ClearFlag");if(!Object.values(jf).includes(t.ClearFlag))throw new us.ValidationError("AccountSet: invalid ClearFlag")}if(t.Domain!==void 0&&typeof t.Domain!="string")throw new us.ValidationError("AccountSet: invalid Domain");if(t.EmailHash!==void 0&&typeof t.EmailHash!="string")throw new us.ValidationError("AccountSet: invalid EmailHash");if(t.MessageKey!==void 0&&typeof t.MessageKey!="string")throw new us.ValidationError("AccountSet: invalid MessageKey");if(t.SetFlag!==void 0){if(typeof t.SetFlag!="number")throw new us.ValidationError("AccountSet: invalid SetFlag");if(!Object.values(jf).includes(t.SetFlag))throw new us.ValidationError("AccountSet: invalid SetFlag")}if(t.TransferRate!==void 0&&typeof t.TransferRate!="number")throw new us.ValidationError("AccountSet: invalid TransferRate");if(t.TickSize!==void 0){if(typeof t.TickSize!="number")throw new us.ValidationError("AccountSet: invalid TickSize");if(t.TickSize!==0&&(t.TickSize<v4||t.TickSize>w4))throw new us.ValidationError("AccountSet: invalid TickSize")}}As.validateAccountSet=b4;var Zi={};Object.defineProperty(Zi,"__esModule",{value:!0});Zi.validateAMMDeposit=Zi.AMMDepositFlags=void 0;const Mr=Me,Ao=Le;var Q_;(function(t){t[t.tfLPToken=65536]="tfLPToken",t[t.tfSingleAsset=524288]="tfSingleAsset",t[t.tfTwoAsset=1048576]="tfTwoAsset",t[t.tfOneAssetLPToken=2097152]="tfOneAssetLPToken",t[t.tfLimitLPToken=4194304]="tfLimitLPToken",t[t.tfTwoAssetIfEmpty=8388608]="tfTwoAssetIfEmpty"})(Q_||(Zi.AMMDepositFlags=Q_={}));function _4(t){if((0,Ao.validateBaseTransaction)(t),t.Asset==null)throw new Mr.ValidationError("AMMDeposit: missing field Asset");if(!(0,Ao.isCurrency)(t.Asset))throw new Mr.ValidationError("AMMDeposit: Asset must be a Currency");if(t.Asset2==null)throw new Mr.ValidationError("AMMDeposit: missing field Asset2");if(!(0,Ao.isCurrency)(t.Asset2))throw new Mr.ValidationError("AMMDeposit: Asset2 must be a Currency");if(t.Amount2!=null&&t.Amount==null)throw new Mr.ValidationError("AMMDeposit: must set Amount with Amount2");if(t.EPrice!=null&&t.Amount==null)throw new Mr.ValidationError("AMMDeposit: must set Amount with EPrice");if(t.LPTokenOut==null&&t.Amount==null)throw new Mr.ValidationError("AMMDeposit: must set at least LPTokenOut or Amount");if(t.LPTokenOut!=null&&!(0,Ao.isIssuedCurrency)(t.LPTokenOut))throw new Mr.ValidationError("AMMDeposit: LPTokenOut must be an IssuedCurrencyAmount");if(t.Amount!=null&&!(0,Ao.isAmount)(t.Amount))throw new Mr.ValidationError("AMMDeposit: Amount must be an Amount");if(t.Amount2!=null&&!(0,Ao.isAmount)(t.Amount2))throw new Mr.ValidationError("AMMDeposit: Amount2 must be an Amount");if(t.EPrice!=null&&!(0,Ao.isAmount)(t.EPrice))throw new Mr.ValidationError("AMMDeposit: EPrice must be an Amount")}Zi.validateAMMDeposit=_4;var eo={};Object.defineProperty(eo,"__esModule",{value:!0});eo.validateAMMWithdraw=eo.AMMWithdrawFlags=void 0;const ds=Me,Co=Le;var Z_;(function(t){t[t.tfLPToken=65536]="tfLPToken",t[t.tfWithdrawAll=131072]="tfWithdrawAll",t[t.tfOneAssetWithdrawAll=262144]="tfOneAssetWithdrawAll",t[t.tfSingleAsset=524288]="tfSingleAsset",t[t.tfTwoAsset=1048576]="tfTwoAsset",t[t.tfOneAssetLPToken=2097152]="tfOneAssetLPToken",t[t.tfLimitLPToken=4194304]="tfLimitLPToken"})(Z_||(eo.AMMWithdrawFlags=Z_={}));function E4(t){if((0,Co.validateBaseTransaction)(t),t.Asset==null)throw new ds.ValidationError("AMMWithdraw: missing field Asset");if(!(0,Co.isCurrency)(t.Asset))throw new ds.ValidationError("AMMWithdraw: Asset must be a Currency");if(t.Asset2==null)throw new ds.ValidationError("AMMWithdraw: missing field Asset2");if(!(0,Co.isCurrency)(t.Asset2))throw new ds.ValidationError("AMMWithdraw: Asset2 must be a Currency");if(t.Amount2!=null&&t.Amount==null)throw new ds.ValidationError("AMMWithdraw: must set Amount with Amount2");if(t.EPrice!=null&&t.Amount==null)throw new ds.ValidationError("AMMWithdraw: must set Amount with EPrice");if(t.LPTokenIn!=null&&!(0,Co.isIssuedCurrency)(t.LPTokenIn))throw new ds.ValidationError("AMMWithdraw: LPTokenIn must be an IssuedCurrencyAmount");if(t.Amount!=null&&!(0,Co.isAmount)(t.Amount))throw new ds.ValidationError("AMMWithdraw: Amount must be an Amount");if(t.Amount2!=null&&!(0,Co.isAmount)(t.Amount2))throw new ds.ValidationError("AMMWithdraw: Amount2 must be an Amount");if(t.EPrice!=null&&!(0,Co.isAmount)(t.EPrice))throw new ds.ValidationError("AMMWithdraw: EPrice must be an Amount")}eo.validateAMMWithdraw=E4;var to={};Object.defineProperty(to,"__esModule",{value:!0});to.validateMPTokenAuthorize=to.MPTokenAuthorizeFlags=void 0;const Ec=Le;var e1;(function(t){t[t.tfMPTUnauthorize=1]="tfMPTUnauthorize"})(e1||(to.MPTokenAuthorizeFlags=e1={}));function S4(t){(0,Ec.validateBaseTransaction)(t),(0,Ec.validateRequiredField)(t,"MPTokenIssuanceID",Ec.isString),(0,Ec.validateOptionalField)(t,"Holder",Ec.isAccount)}to.validateMPTokenAuthorize=S4;var no={};Object.defineProperty(no,"__esModule",{value:!0});no.validateMPTokenIssuanceCreate=no.MPTokenIssuanceCreateFlags=void 0;const Ua=Me,F0=on,Ps=Le,N4="9223372036854775807",t1=5e4;var iy;(function(t){t[t.tfMPTCanLock=2]="tfMPTCanLock",t[t.tfMPTRequireAuth=4]="tfMPTRequireAuth",t[t.tfMPTCanEscrow=8]="tfMPTCanEscrow",t[t.tfMPTCanTrade=16]="tfMPTCanTrade",t[t.tfMPTCanTransfer=32]="tfMPTCanTransfer",t[t.tfMPTCanClawback=64]="tfMPTCanClawback"})(iy||(no.MPTokenIssuanceCreateFlags=iy={}));function T4(t){var e;if((0,Ps.validateBaseTransaction)(t),(0,Ps.validateOptionalField)(t,"MaximumAmount",Ps.isString),(0,Ps.validateOptionalField)(t,"MPTokenMetadata",Ps.isString),(0,Ps.validateOptionalField)(t,"TransferFee",Ps.isNumber),(0,Ps.validateOptionalField)(t,"AssetScale",Ps.isNumber),typeof t.MPTokenMetadata=="string"&&t.MPTokenMetadata==="")throw new Ua.ValidationError("MPTokenIssuanceCreate: MPTokenMetadata must not be empty string");if(typeof t.MPTokenMetadata=="string"&&!(0,F0.isHex)(t.MPTokenMetadata))throw new Ua.ValidationError("MPTokenIssuanceCreate: MPTokenMetadata must be in hex format");if(typeof t.MaximumAmount=="string")if(F0.INTEGER_SANITY_CHECK.exec(t.MaximumAmount)){if(BigInt(t.MaximumAmount)>BigInt(N4)||BigInt(t.MaximumAmount)<BigInt("0"))throw new Ua.ValidationError("MPTokenIssuanceCreate: MaximumAmount out of range")}else throw new Ua.ValidationError("MPTokenIssuanceCreate: Invalid MaximumAmount");if(typeof t.TransferFee=="number"){const n=t.Flags,r=typeof n=="number"?(0,F0.isFlagEnabled)(n,iy.tfMPTCanTransfer):(e=n.tfMPTCanTransfer)!==null&&e!==void 0?e:!1;if(t.TransferFee<0||t.TransferFee>t1)throw new Ua.ValidationError(`MPTokenIssuanceCreate: TransferFee must be between 0 and ${t1}`);if(t.TransferFee&&!r)throw new Ua.ValidationError("MPTokenIssuanceCreate: TransferFee cannot be provided without enabling tfMPTCanTransfer flag")}}no.validateMPTokenIssuanceCreate=T4;var ro={};Object.defineProperty(ro,"__esModule",{value:!0});ro.validateMPTokenIssuanceSet=ro.MPTokenIssuanceSetFlags=void 0;const A4=Me,n1=on,Sc=Le;var kf;(function(t){t[t.tfMPTLock=1]="tfMPTLock",t[t.tfMPTUnlock=2]="tfMPTUnlock"})(kf||(ro.MPTokenIssuanceSetFlags=kf={}));function C4(t){var e,n;(0,Sc.validateBaseTransaction)(t),(0,Sc.validateRequiredField)(t,"MPTokenIssuanceID",Sc.isString),(0,Sc.validateOptionalField)(t,"Holder",Sc.isAccount);const r=t.Flags,s=typeof r=="number"?(0,n1.isFlagEnabled)(r,kf.tfMPTLock):(e=r.tfMPTLock)!==null&&e!==void 0?e:!1,i=typeof r=="number"?(0,n1.isFlagEnabled)(r,kf.tfMPTUnlock):(n=r.tfMPTUnlock)!==null&&n!==void 0?n:!1;if(s&&i)throw new A4.ValidationError("MPTokenIssuanceSet: flag conflict")}ro.validateMPTokenIssuanceSet=C4;var so={};Object.defineProperty(so,"__esModule",{value:!0});so.validateNFTokenCreateOffer=so.NFTokenCreateOfferFlags=void 0;const Zo=Me,j4=on,Xo=Le;var oy;(function(t){t[t.tfSellNFToken=1]="tfSellNFToken"})(oy||(so.NFTokenCreateOfferFlags=oy={}));function k4(t){if(t.Owner!=null)throw new Zo.ValidationError("NFTokenCreateOffer: Owner must not be present for sell offers")}function O4(t){if(t.Owner==null)throw new Zo.ValidationError("NFTokenCreateOffer: Owner must be present for buy offers");if((0,Xo.parseAmountValue)(t.Amount)<=0)throw new Zo.ValidationError("NFTokenCreateOffer: Amount must be greater than 0 for buy offers")}function P4(t){if((0,Xo.validateBaseTransaction)(t),t.Account===t.Owner)throw new Zo.ValidationError("NFTokenCreateOffer: Owner and Account must not be equal");if(t.Account===t.Destination)throw new Zo.ValidationError("NFTokenCreateOffer: Destination and Account must not be equal");if((0,Xo.validateOptionalField)(t,"Destination",Xo.isAccount),(0,Xo.validateOptionalField)(t,"Owner",Xo.isAccount),t.NFTokenID==null)throw new Zo.ValidationError("NFTokenCreateOffer: missing field NFTokenID");if(!(0,Xo.isAmount)(t.Amount))throw new Zo.ValidationError("NFTokenCreateOffer: invalid Amount");typeof t.Flags=="number"&&(0,j4.isFlagEnabled)(t.Flags,oy.tfSellNFToken)?k4(t):O4(t)}so.validateNFTokenCreateOffer=P4;var io={};Object.defineProperty(io,"__esModule",{value:!0});io.validateNFTokenMint=io.NFTokenMintFlags=void 0;const Gd=Me,I4=on,B0=Le;var r1;(function(t){t[t.tfBurnable=1]="tfBurnable",t[t.tfOnlyXRP=2]="tfOnlyXRP",t[t.tfTrustLine=4]="tfTrustLine",t[t.tfTransferable=8]="tfTransferable"})(r1||(io.NFTokenMintFlags=r1={}));function R4(t){if((0,B0.validateBaseTransaction)(t),t.Account===t.Issuer)throw new Gd.ValidationError("NFTokenMint: Issuer must not be equal to Account");if((0,B0.validateOptionalField)(t,"Issuer",B0.isAccount),typeof t.URI=="string"&&t.URI==="")throw new Gd.ValidationError("NFTokenMint: URI must not be empty string");if(typeof t.URI=="string"&&!(0,I4.isHex)(t.URI))throw new Gd.ValidationError("NFTokenMint: URI must be in hex format");if(t.NFTokenTaxon==null)throw new Gd.ValidationError("NFTokenMint: missing field NFTokenTaxon")}io.validateNFTokenMint=R4;var oo={};Object.defineProperty(oo,"__esModule",{value:!0});oo.validateOfferCreate=oo.OfferCreateFlags=void 0;const Va=Me,$0=Le;var s1;(function(t){t[t.tfPassive=65536]="tfPassive",t[t.tfImmediateOrCancel=131072]="tfImmediateOrCancel",t[t.tfFillOrKill=262144]="tfFillOrKill",t[t.tfSell=524288]="tfSell"})(s1||(oo.OfferCreateFlags=s1={}));function L4(t){if((0,$0.validateBaseTransaction)(t),t.TakerGets===void 0)throw new Va.ValidationError("OfferCreate: missing field TakerGets");if(t.TakerPays===void 0)throw new Va.ValidationError("OfferCreate: missing field TakerPays");if(typeof t.TakerGets!="string"&&!(0,$0.isAmount)(t.TakerGets))throw new Va.ValidationError("OfferCreate: invalid TakerGets");if(typeof t.TakerPays!="string"&&!(0,$0.isAmount)(t.TakerPays))throw new Va.ValidationError("OfferCreate: invalid TakerPays");if(t.Expiration!==void 0&&typeof t.Expiration!="number")throw new Va.ValidationError("OfferCreate: invalid Expiration");if(t.OfferSequence!==void 0&&typeof t.OfferSequence!="number")throw new Va.ValidationError("OfferCreate: invalid OfferSequence")}oo.validateOfferCreate=L4;var ao={};Object.defineProperty(ao,"__esModule",{value:!0});ao.validatePayment=ao.PaymentFlags=void 0;const Pi=Me,M4=on,Ds=Le;var ay;(function(t){t[t.tfNoRippleDirect=65536]="tfNoRippleDirect",t[t.tfPartialPayment=131072]="tfPartialPayment",t[t.tfLimitQuality=262144]="tfLimitQuality"})(ay||(ao.PaymentFlags=ay={}));function D4(t){if((0,Ds.validateBaseTransaction)(t),t.Amount===void 0)throw new Pi.ValidationError("PaymentTransaction: missing field Amount");if(!(0,Ds.isAmount)(t.Amount))throw new Pi.ValidationError("PaymentTransaction: invalid Amount");if((0,Ds.validateRequiredField)(t,"Destination",Ds.isAccount),(0,Ds.validateOptionalField)(t,"DestinationTag",Ds.isNumber),(0,Ds.validateCredentialsList)(t.CredentialIDs,t.TransactionType,!0),t.InvoiceID!==void 0&&typeof t.InvoiceID!="string")throw new Pi.ValidationError("PaymentTransaction: InvoiceID must be a string");if(t.Paths!==void 0&&!U4(t.Paths))throw new Pi.ValidationError("PaymentTransaction: invalid Paths");if(t.SendMax!==void 0&&!(0,Ds.isAmount)(t.SendMax))throw new Pi.ValidationError("PaymentTransaction: invalid SendMax");F4(t)}ao.validatePayment=D4;function F4(t){var e;if(t.DeliverMin!=null){if(t.Flags==null)throw new Pi.ValidationError("PaymentTransaction: tfPartialPayment flag required with DeliverMin");const n=t.Flags;if(!(typeof n=="number"?(0,M4.isFlagEnabled)(n,ay.tfPartialPayment):(e=n.tfPartialPayment)!==null&&e!==void 0?e:!1))throw new Pi.ValidationError("PaymentTransaction: tfPartialPayment flag required with DeliverMin");if(!(0,Ds.isAmount)(t.DeliverMin))throw new Pi.ValidationError("PaymentTransaction: invalid DeliverMin")}}function B4(t){return t.account!==void 0&&typeof t.account!="string"||t.currency!==void 0&&typeof t.currency!="string"||t.issuer!==void 0&&typeof t.issuer!="string"?!1:t.account!==void 0&&t.currency===void 0&&t.issuer===void 0||t.currency!==void 0||t.issuer!==void 0}function $4(t){for(const e of t)if(!B4(e))return!1;return!0}function U4(t){if(!Array.isArray(t)||t.length===0)return!1;for(const e of t)if(!Array.isArray(e)||e.length===0||!$4(e))return!1;return!0}var lo={};Object.defineProperty(lo,"__esModule",{value:!0});lo.validatePaymentChannelClaim=lo.PaymentChannelClaimFlags=void 0;const za=Me,i1=Le;var o1;(function(t){t[t.tfRenew=65536]="tfRenew",t[t.tfClose=131072]="tfClose"})(o1||(lo.PaymentChannelClaimFlags=o1={}));function V4(t){if((0,i1.validateBaseTransaction)(t),(0,i1.validateCredentialsList)(t.CredentialIDs,t.TransactionType,!0),t.Channel===void 0)throw new za.ValidationError("PaymentChannelClaim: missing Channel");if(typeof t.Channel!="string")throw new za.ValidationError("PaymentChannelClaim: Channel must be a string");if(t.Balance!==void 0&&typeof t.Balance!="string")throw new za.ValidationError("PaymentChannelClaim: Balance must be a string");if(t.Amount!==void 0&&typeof t.Amount!="string")throw new za.ValidationError("PaymentChannelClaim: Amount must be a string");if(t.Signature!==void 0&&typeof t.Signature!="string")throw new za.ValidationError("PaymentChannelClaim: Signature must be a string");if(t.PublicKey!==void 0&&typeof t.PublicKey!="string")throw new za.ValidationError("PaymentChannelClaim: PublicKey must be a string")}lo.validatePaymentChannelClaim=V4;var co={};Object.defineProperty(co,"__esModule",{value:!0});co.validateTrustSet=co.TrustSetFlags=void 0;const Yd=Me,a1=Le;var l1;(function(t){t[t.tfSetfAuth=65536]="tfSetfAuth",t[t.tfSetNoRipple=131072]="tfSetNoRipple",t[t.tfClearNoRipple=262144]="tfClearNoRipple",t[t.tfSetFreeze=1048576]="tfSetFreeze",t[t.tfClearFreeze=2097152]="tfClearFreeze"})(l1||(co.TrustSetFlags=l1={}));function z4(t){(0,a1.validateBaseTransaction)(t);const{LimitAmount:e,QualityIn:n,QualityOut:r}=t;if(e===void 0)throw new Yd.ValidationError("TrustSet: missing field LimitAmount");if(!(0,a1.isAmount)(e))throw new Yd.ValidationError("TrustSet: invalid LimitAmount");if(n!==void 0&&typeof n!="number")throw new Yd.ValidationError("TrustSet: QualityIn must be a number");if(r!==void 0&&typeof r!="number")throw new Yd.ValidationError("TrustSet: QualityOut must be a number")}co.validateTrustSet=z4;var uo={};Object.defineProperty(uo,"__esModule",{value:!0});uo.validateXChainModifyBridge=uo.XChainModifyBridgeFlags=void 0;const jo=Le;var c1;(function(t){t[t.tfClearAccountCreateAmount=65536]="tfClearAccountCreateAmount"})(c1||(uo.XChainModifyBridgeFlags=c1={}));function H4(t){(0,jo.validateBaseTransaction)(t),(0,jo.validateRequiredField)(t,"XChainBridge",jo.isXChainBridge),(0,jo.validateOptionalField)(t,"SignatureReward",jo.isAmount),(0,jo.validateOptionalField)(t,"MinAccountCreateAmount",jo.isAmount)}uo.validateXChainModifyBridge=H4;Object.defineProperty(Ts,"__esModule",{value:!0});Ts.parseTransactionFlags=Ts.setTransactionFlagsToNumber=Ts.parseAccountRootFlags=void 0;const X4=Me,u1=ed,W4=As,K4=Zi,q4=eo,G4=to,Y4=no,J4=ro,Q4=so,Z4=io,eD=oo,tD=ao,nD=lo,rD=co,sD=uo,xA=on;function iD(t){const e={};return Object.values(u1.AccountRootFlags).forEach(n=>{typeof n=="string"&&(0,xA.isFlagEnabled)(t,u1.AccountRootFlags[n])&&(e[n]=!0)}),e}Ts.parseAccountRootFlags=iD;const ly={AccountSet:W4.AccountSetTfFlags,AMMDeposit:K4.AMMDepositFlags,AMMWithdraw:q4.AMMWithdrawFlags,MPTokenAuthorize:G4.MPTokenAuthorizeFlags,MPTokenIssuanceCreate:Y4.MPTokenIssuanceCreateFlags,MPTokenIssuanceSet:J4.MPTokenIssuanceSetFlags,NFTokenCreateOffer:Q4.NFTokenCreateOfferFlags,NFTokenMint:Z4.NFTokenMintFlags,OfferCreate:eD.OfferCreateFlags,PaymentChannelClaim:nD.PaymentChannelClaimFlags,Payment:tD.PaymentFlags,TrustSet:rD.TrustSetFlags,XChainModifyBridge:sD.XChainModifyBridgeFlags};function yA(t){if(t.Flags==null){t.Flags=0;return}typeof t.Flags!="number"&&(t.Flags=ly[t.TransactionType]?oD(t.Flags,ly[t.TransactionType]):0)}Ts.setTransactionFlagsToNumber=yA;function oD(t,e){return Object.keys(t).reduce((n,r)=>{if(e[r]==null)throw new X4.ValidationError(`flag ${r} doesn't exist in flagEnum: ${JSON.stringify(e)}`);return t[r]?n|e[r]:n},0)}function aD(t){if(yA(t),typeof t.Flags!="number"||!t.Flags||t.Flags===0)return{};const e=t.Flags,n={},r=ly[t.TransactionType];return Object.values(r).forEach(s=>{typeof s=="string"&&(0,xA.isFlagEnabled)(e,r[s])&&(n[s]=!0)}),n}Ts.parseTransactionFlags=aD;var vA={},bs={},Lu=Ee&&Ee.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(bs,"__esModule",{value:!0});bs.getLastLedgerSequence=bs.getSignedTx=bs.waitForFinalTransactionOutcome=bs.submitRequest=void 0;const ld=Ir,nw=Me,lD=1e3;function cD(t){return Lu(this,void 0,void 0,function*(){return new Promise(e=>{setTimeout(e,t)})})}function uD(t,e,n=!1){return Lu(this,void 0,void 0,function*(){if(!wA(e))throw new nw.ValidationError("Transaction must be signed");const s={command:"submit",tx_blob:typeof e=="string"?e:(0,ld.encode)(e),fail_hard:fD(e)||n};return t.request(s)})}bs.submitRequest=uD;function cy(t,e,n,r){return Lu(this,void 0,void 0,function*(){yield cD(lD);const s=yield t.getLedgerIndex();if(n<s)throw new nw.XrplError(`The latest ledger sequence ${s} is greater than the transaction's LastLedgerSequence (${n}).
Preliminary result: ${r}`);const i=yield t.request({command:"tx",transaction:e}).catch(a=>Lu(this,void 0,void 0,function*(){var l;const c=(l=a==null?void 0:a.data)===null||l===void 0?void 0:l.error;if(c==="txnNotFound")return cy(t,e,n,r);throw new Error(`${c} 
 Preliminary result: ${r}.
Full error details: ${String(a)}`)}));return i.result.validated?i:cy(t,e,n,r)})}bs.waitForFinalTransactionOutcome=cy;function wA(t){const e=typeof t=="string"?(0,ld.decode)(t):t;if(typeof e=="string")return!1;if(e.Signers!=null){const n=e.Signers;for(const r of n)if(r.Signer.SigningPubKey==null||r.Signer.TxnSignature==null)return!1;return!0}return e.SigningPubKey!=null&&e.TxnSignature!=null}function dD(t,e,{autofill:n=!0,wallet:r}={}){return Lu(this,void 0,void 0,function*(){if(wA(e))return e;if(!r)throw new nw.ValidationError("Wallet must be provided when submitting an unsigned transaction");let s=typeof e=="string"?(0,ld.decode)(e):e;return n&&(s=yield t.autofill(s)),r.sign(s).tx_blob})}bs.getSignedTx=dD;function hD(t){return(typeof t=="string"?(0,ld.decode)(t):t).LastLedgerSequence}bs.getLastLedgerSequence=hD;function fD(t){return(typeof t=="string"?(0,ld.decode)(t):t).TransactionType==="AccountDelete"}var cd={};Object.defineProperty(cd,"__esModule",{value:!0});cd.ensureClassicAddress=void 0;const d1=er;function pD(t){if((0,d1.isValidXAddress)(t)){const{classicAddress:e,tag:n}=(0,d1.xAddressToClassicAddress)(t);if(n!==!1)throw new Error("This command does not support the use of a tag. Use an address without a tag.");return e}return t}cd.ensureClassicAddress=pD;(function(t){var e=Ee&&Ee.__createBinding||(Object.create?function(r,s,i,a){a===void 0&&(a=i);var l=Object.getOwnPropertyDescriptor(s,i);(!l||("get"in l?!s.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,a,l)}:function(r,s,i,a){a===void 0&&(a=i),r[a]=s[i]}),n=Ee&&Ee.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&e(s,r,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(bs,t),n(cd,t)})(vA);var Xn={},Pp={},bo={},Ip={},xa={};Object.defineProperty(xa,"__esModule",{value:!0});xa.ripemd160=xa.RIPEMD160=void 0;const mD=oi,Uc=Zn,gD=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),bA=new Uint8Array(new Array(16).fill(0).map((t,e)=>e)),xD=bA.map(t=>(9*t+5)%16);let rw=[bA],sw=[xD];for(let t=0;t<4;t++)for(let e of[rw,sw])e.push(e[t].map(n=>gD[n]));const _A=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),yD=rw.map((t,e)=>t.map(n=>_A[e][n])),vD=sw.map((t,e)=>t.map(n=>_A[e][n])),wD=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),bD=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);function h1(t,e,n,r){return t===0?e^n^r:t===1?e&n|~e&r:t===2?(e|~n)^r:t===3?e&r|n&~r:e^(n|~r)}const Jd=new Uint32Array(16);class EA extends mD.HashMD{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:n,h2:r,h3:s,h4:i}=this;return[e,n,r,s,i]}set(e,n,r,s,i){this.h0=e|0,this.h1=n|0,this.h2=r|0,this.h3=s|0,this.h4=i|0}process(e,n){for(let p=0;p<16;p++,n+=4)Jd[p]=e.getUint32(n,!0);let r=this.h0|0,s=r,i=this.h1|0,a=i,l=this.h2|0,c=l,u=this.h3|0,d=u,h=this.h4|0,f=h;for(let p=0;p<5;p++){const y=4-p,b=wD[p],_=bD[p],m=rw[p],x=sw[p],w=yD[p],v=vD[p];for(let T=0;T<16;T++){const E=(0,Uc.rotl)(r+h1(p,i,l,u)+Jd[m[T]]+b,w[T])+h|0;r=h,h=u,u=(0,Uc.rotl)(l,10)|0,l=i,i=E}for(let T=0;T<16;T++){const E=(0,Uc.rotl)(s+h1(y,a,c,d)+Jd[x[T]]+_,v[T])+f|0;s=f,f=d,d=(0,Uc.rotl)(c,10)|0,c=a,a=E}}this.set(this.h1+l+d|0,this.h2+u+f|0,this.h3+h+s|0,this.h4+r+a|0,this.h0+i+c|0)}roundClean(){Jd.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}xa.RIPEMD160=EA;xa.ripemd160=(0,Uc.wrapConstructor)(()=>new EA);var _D=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ip,"__esModule",{value:!0});Ip.ripemd160=void 0;const ED=xa,SD=_D(nd);Ip.ripemd160=(0,SD.default)(ED.ripemd160);var ya={},Rp={},Lp={},Mp={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;const e=Pr,n=Zn;class r extends n.Hash{constructor(a,l){super(),this.finished=!1,this.destroyed=!1,(0,e.ahash)(a);const c=(0,n.toBytes)(l);if(this.iHash=a.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const u=this.blockLen,d=new Uint8Array(u);d.set(c.length>u?a.create().update(c).digest():c);for(let h=0;h<d.length;h++)d[h]^=54;this.iHash.update(d),this.oHash=a.create();for(let h=0;h<d.length;h++)d[h]^=106;this.oHash.update(d),d.fill(0)}update(a){return(0,e.aexists)(this),this.iHash.update(a),this}digestInto(a){(0,e.aexists)(this),(0,e.abytes)(a,this.outputLen),this.finished=!0,this.iHash.digestInto(a),this.oHash.update(a),this.oHash.digestInto(a),this.destroy()}digest(){const a=new Uint8Array(this.oHash.outputLen);return this.digestInto(a),a}_cloneInto(a){a||(a=Object.create(Object.getPrototypeOf(this),{}));const{oHash:l,iHash:c,finished:u,destroyed:d,blockLen:h,outputLen:f}=this;return a=a,a.finished=u,a.destroyed=d,a.blockLen=h,a.outputLen=f,a.oHash=l._cloneInto(a.oHash),a.iHash=c._cloneInto(a.iHash),a}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=r;const s=(i,a,l)=>new r(i,a).update(l).digest();t.hmac=s,t.hmac.create=(i,a)=>new r(i,a)})(Mp);var iw={},_o={},gt={},it={};/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(it,"__esModule",{value:!0});it.notImplemented=it.bitMask=void 0;it.isBytes=Bp;it.abytes=$p;it.abool=TD;it.bytesToHex=ow;it.numberToHexUnpadded=SA;it.hexToNumber=aw;it.hexToBytes=Up;it.bytesToNumberBE=CD;it.bytesToNumberLE=jD;it.numberToBytesBE=NA;it.numberToBytesLE=kD;it.numberToVarBytesBE=OD;it.ensureBytes=PD;it.concatBytes=TA;it.equalBytes=ID;it.utf8ToBytes=RD;it.inRange=AA;it.aInRange=LD;it.bitLen=MD;it.bitGet=DD;it.bitSet=FD;it.createHmacDrbg=$D;it.validateObject=VD;it.memoized=HD;const Dp=BigInt(0),Fp=BigInt(1),ND=BigInt(2);function Bp(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function $p(t){if(!Bp(t))throw new Error("Uint8Array expected")}function TD(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const AD=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ow(t){$p(t);let e="";for(let n=0;n<t.length;n++)e+=AD[t[n]];return e}function SA(t){const e=t.toString(16);return e.length&1?"0"+e:e}function aw(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Dp:BigInt("0x"+t)}const Is={_0:48,_9:57,A:65,F:70,a:97,f:102};function f1(t){if(t>=Is._0&&t<=Is._9)return t-Is._0;if(t>=Is.A&&t<=Is.F)return t-(Is.A-10);if(t>=Is.a&&t<=Is.f)return t-(Is.a-10)}function Up(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const a=f1(t.charCodeAt(i)),l=f1(t.charCodeAt(i+1));if(a===void 0||l===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=a*16+l}return r}function CD(t){return aw(ow(t))}function jD(t){return $p(t),aw(ow(Uint8Array.from(t).reverse()))}function NA(t,e){return Up(t.toString(16).padStart(e*2,"0"))}function kD(t,e){return NA(t,e).reverse()}function OD(t){return Up(SA(t))}function PD(t,e,n){let r;if(typeof e=="string")try{r=Up(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Bp(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function TA(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];$p(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function ID(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function RD(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const U0=t=>typeof t=="bigint"&&Dp<=t;function AA(t,e,n){return U0(t)&&U0(e)&&U0(n)&&e<=t&&t<n}function LD(t,e,n,r){if(!AA(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function MD(t){let e;for(e=0;t>Dp;t>>=Fp,e+=1);return e}function DD(t,e){return t>>BigInt(e)&Fp}function FD(t,e,n){return t|(n?Fp:Dp)<<BigInt(e)}const BD=t=>(ND<<BigInt(t-1))-Fp;it.bitMask=BD;const V0=t=>new Uint8Array(t),p1=t=>Uint8Array.from(t);function $D(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=V0(t),s=V0(t),i=0;const a=()=>{r.fill(1),s.fill(0),i=0},l=(...h)=>n(s,r,...h),c=(h=V0())=>{s=l(p1([0]),h),r=l(),h.length!==0&&(s=l(p1([1]),h),r=l())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const f=[];for(;h<e;){r=l();const p=r.slice();f.push(p),h+=r.length}return TA(...f)};return(h,f)=>{a(),c(h);let p;for(;!(p=f(u()));)c();return a(),p}}const UD={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Bp(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function VD(t,e,n={}){const r=(s,i,a)=>{const l=UD[i];if(typeof l!="function")throw new Error("invalid validator function");const c=t[s];if(!(a&&c===void 0)&&!l(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const zD=()=>{throw new Error("not implemented")};it.notImplemented=zD;function HD(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}Object.defineProperty(gt,"__esModule",{value:!0});gt.isNegativeLE=void 0;gt.mod=lr;gt.pow=CA;gt.pow2=WD;gt.invert=Of;gt.tonelliShanks=jA;gt.FpSqrt=kA;gt.validateField=GD;gt.FpPow=OA;gt.FpInvertBatch=PA;gt.FpDiv=YD;gt.FpLegendre=IA;gt.FpIsSquare=JD;gt.nLength=lw;gt.Field=QD;gt.FpSqrtOdd=ZD;gt.FpSqrtEven=eF;gt.hashToPrivateScalar=tF;gt.getFieldBytesLength=cw;gt.getMinHashLength=RA;gt.mapHashToField=nF;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const cr=it,an=BigInt(0),wt=BigInt(1),Ii=BigInt(2),XD=BigInt(3),uy=BigInt(4),m1=BigInt(5),g1=BigInt(8);function lr(t,e){const n=t%e;return n>=an?n:e+n}function CA(t,e,n){if(e<an)throw new Error("invalid exponent, negatives unsupported");if(n<=an)throw new Error("invalid modulus");if(n===wt)return an;let r=wt;for(;e>an;)e&wt&&(r=r*t%n),t=t*t%n,e>>=wt;return r}function WD(t,e,n){let r=t;for(;e-- >an;)r*=r,r%=n;return r}function Of(t,e){if(t===an)throw new Error("invert: expected non-zero number");if(e<=an)throw new Error("invert: expected positive modulus, got "+e);let n=lr(t,e),r=e,s=an,i=wt;for(;n!==an;){const l=r/n,c=r%n,u=s-i*l;r=n,n=c,s=i,i=u}if(r!==wt)throw new Error("invert: does not exist");return lr(s,e)}function jA(t){const e=(t-wt)/Ii;let n,r,s;for(n=t-wt,r=0;n%Ii===an;n/=Ii,r++);for(s=Ii;s<t&&CA(s,e,t)!==t-wt;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const a=(t+wt)/uy;return function(c,u){const d=c.pow(u,a);if(!c.eql(c.sqr(d),u))throw new Error("Cannot find square root");return d}}const i=(n+wt)/Ii;return function(l,c){if(l.pow(c,e)===l.neg(l.ONE))throw new Error("Cannot find square root");let u=r,d=l.pow(l.mul(l.ONE,s),n),h=l.pow(c,i),f=l.pow(c,n);for(;!l.eql(f,l.ONE);){if(l.eql(f,l.ZERO))return l.ZERO;let p=1;for(let b=l.sqr(f);p<u&&!l.eql(b,l.ONE);p++)b=l.sqr(b);const y=l.pow(d,wt<<BigInt(u-p-1));d=l.sqr(y),h=l.mul(h,y),f=l.mul(f,d),u=p}return h}}function kA(t){if(t%uy===XD){const e=(t+wt)/uy;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%g1===m1){const e=(t-m1)/g1;return function(r,s){const i=r.mul(s,Ii),a=r.pow(i,e),l=r.mul(s,a),c=r.mul(r.mul(l,Ii),a),u=r.mul(l,r.sub(c,r.ONE));if(!r.eql(r.sqr(u),s))throw new Error("Cannot find square root");return u}}return jA(t)}const KD=(t,e)=>(lr(t,e)&wt)===wt;gt.isNegativeLE=KD;const qD=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function GD(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=qD.reduce((r,s)=>(r[s]="function",r),e);return(0,cr.validateObject)(t,n)}function OA(t,e,n){if(n<an)throw new Error("invalid exponent, negatives unsupported");if(n===an)return t.ONE;if(n===wt)return e;let r=t.ONE,s=e;for(;n>an;)n&wt&&(r=t.mul(r,s)),s=t.sqr(s),n>>=wt;return r}function PA(t,e){const n=new Array(e.length),r=e.reduce((i,a,l)=>t.is0(a)?i:(n[l]=i,t.mul(i,a)),t.ONE),s=t.inv(r);return e.reduceRight((i,a,l)=>t.is0(a)?i:(n[l]=t.mul(i,n[l]),t.mul(i,a)),s),n}function YD(t,e,n){return t.mul(e,typeof n=="bigint"?Of(n,t.ORDER):t.inv(n))}function IA(t){const e=(t-wt)/Ii;return(n,r)=>n.pow(r,e)}function JD(t){const e=IA(t.ORDER);return n=>{const r=e(t,n);return t.eql(r,t.ZERO)||t.eql(r,t.ONE)}}function lw(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function QD(t,e,n=!1,r={}){if(t<=an)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=lw(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let a;const l=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:(0,cr.bitMask)(s),ZERO:an,ONE:wt,create:c=>lr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return an<=c&&c<t},is0:c=>c===an,isOdd:c=>(c&wt)===wt,neg:c=>lr(-c,t),eql:(c,u)=>c===u,sqr:c=>lr(c*c,t),add:(c,u)=>lr(c+u,t),sub:(c,u)=>lr(c-u,t),mul:(c,u)=>lr(c*u,t),pow:(c,u)=>OA(l,c,u),div:(c,u)=>lr(c*Of(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>Of(c,t),sqrt:r.sqrt||(c=>(a||(a=kA(t)),a(l,c))),invertBatch:c=>PA(l,c),cmov:(c,u,d)=>d?u:c,toBytes:c=>n?(0,cr.numberToBytesLE)(c,i):(0,cr.numberToBytesBE)(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?(0,cr.bytesToNumberLE)(c):(0,cr.bytesToNumberBE)(c)}});return Object.freeze(l)}function ZD(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const n=t.sqrt(e);return t.isOdd(n)?n:t.neg(n)}function eF(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const n=t.sqrt(e);return t.isOdd(n)?t.neg(n):n}function tF(t,e,n=!1){t=(0,cr.ensureBytes)("privateHash",t);const r=t.length,s=lw(e).nByteLength+8;if(s<24||r<s||r>1024)throw new Error("hashToPrivateScalar: expected "+s+"-1024 bytes of input, got "+r);const i=n?(0,cr.bytesToNumberLE)(t):(0,cr.bytesToNumberBE)(t);return lr(i,e-wt)+wt}function cw(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function RA(t){const e=cw(t);return e+Math.ceil(e/2)}function nF(t,e,n=!1){const r=t.length,s=cw(e),i=RA(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const a=n?(0,cr.bytesToNumberLE)(t):(0,cr.bytesToNumberBE)(t),l=lr(a,e-wt)+wt;return n?(0,cr.numberToBytesLE)(l,s):(0,cr.numberToBytesBE)(l,s)}Object.defineProperty(_o,"__esModule",{value:!0});_o.wNAF=rF;_o.pippenger=sF;_o.precomputeMSMUnsafe=iF;_o.validateBasic=oF;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const x1=gt,LA=it,y1=BigInt(0),Qd=BigInt(1);function z0(t,e){const n=e.negate();return t?n:e}function uw(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function H0(t,e){uw(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function MA(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function DA(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const X0=new WeakMap,FA=new WeakMap;function W0(t){return FA.get(t)||1}function rF(t,e){return{constTimeNegate:z0,hasPrecomputes(n){return W0(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>y1;)r&Qd&&(s=s.add(i)),i=i.double(),r>>=Qd;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=H0(r,e),a=[];let l=n,c=l;for(let u=0;u<s;u++){c=l,a.push(c);for(let d=1;d<i;d++)c=c.add(l),a.push(c);l=c.double()}return a},wNAF(n,r,s){const{windows:i,windowSize:a}=H0(n,e);let l=t.ZERO,c=t.BASE;const u=BigInt(2**n-1),d=2**n,h=BigInt(n);for(let f=0;f<i;f++){const p=f*a;let y=Number(s&u);s>>=h,y>a&&(y-=d,s+=Qd);const b=p,_=p+Math.abs(y)-1,m=f%2!==0,x=y<0;y===0?c=c.add(z0(m,r[b])):l=l.add(z0(x,r[_]))}return{p:l,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:a,windowSize:l}=H0(n,e),c=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<a;h++){const f=h*l;if(s===y1)break;let p=Number(s&c);if(s>>=d,p>l&&(p-=u,s+=Qd),p===0)continue;let y=r[f+Math.abs(p)-1];p<0&&(y=y.negate()),i=i.add(y)}return i},getPrecomputes(n,r,s){let i=X0.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&X0.set(r,s(i))),i},wNAFCached(n,r,s){const i=W0(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const a=W0(n);return a===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(a,this.getPrecomputes(a,n,s),r,i)},setWindowSize(n,r){uw(r,e),FA.set(n,r),X0.delete(n)}}}function sF(t,e,n,r){if(MA(n,t),DA(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=(0,LA.bitLen)(BigInt(n.length)),a=i>12?i-3:i>4?i-2:i?2:1,l=(1<<a)-1,c=new Array(l+1).fill(s),u=Math.floor((e.BITS-1)/a)*a;let d=s;for(let h=u;h>=0;h-=a){c.fill(s);for(let p=0;p<r.length;p++){const y=r[p],b=Number(y>>BigInt(h)&BigInt(l));c[b]=c[b].add(n[p])}let f=s;for(let p=c.length-1,y=s;p>0;p--)y=y.add(c[p]),f=f.add(y);if(d=d.add(f),h!==0)for(let p=0;p<a;p++)d=d.double()}return d}function iF(t,e,n,r){uw(r,e.BITS),MA(n,t);const s=t.ZERO,i=2**r-1,a=Math.ceil(e.BITS/r),l=BigInt((1<<r)-1),c=n.map(u=>{const d=[];for(let h=0,f=u;h<i;h++)d.push(f),f=f.add(u);return d});return u=>{if(DA(u,e),u.length>n.length)throw new Error("array of scalars must be smaller than array of points");let d=s;for(let h=0;h<a;h++){if(d!==s)for(let p=0;p<r;p++)d=d.double();const f=BigInt(a*r-(h+1)*r);for(let p=0;p<u.length;p++){const y=u[p],b=Number(y>>f&l);b&&(d=d.add(c[p][b-1]))}}return d}}function oF(t){return(0,x1.validateField)(t.Fp),(0,LA.validateObject)(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,x1.nLength)(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DER=t.DERErr=void 0,t.weierstrassPoints=b,t.weierstrass=m,t.SWUFpSqrtRatio=x,t.mapToCurveSimpleSWU=w;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const e=_o,n=gt,r=it,s=it;function i(v){v.lowS!==void 0&&(0,s.abool)("lowS",v.lowS),v.prehash!==void 0&&(0,s.abool)("prehash",v.prehash)}function a(v){const T=(0,e.validateBasic)(v);r.validateObject(T,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:E,Fp:D,a:te}=T;if(E){if(!D.eql(te,D.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof E!="object"||typeof E.beta!="bigint"||typeof E.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...T})}const{bytesToNumberBE:l,hexToBytes:c}=r;class u extends Error{constructor(T=""){super(T)}}t.DERErr=u,t.DER={Err:u,_tlv:{encode:(v,T)=>{const{Err:E}=t.DER;if(v<0||v>256)throw new E("tlv.encode: wrong tag");if(T.length&1)throw new E("tlv.encode: unpadded data");const D=T.length/2,te=r.numberToHexUnpadded(D);if(te.length/2&128)throw new E("tlv.encode: long form length too big");const re=D>127?r.numberToHexUnpadded(te.length/2|128):"";return r.numberToHexUnpadded(v)+re+te+T},decode(v,T){const{Err:E}=t.DER;let D=0;if(v<0||v>256)throw new E("tlv.encode: wrong tag");if(T.length<2||T[D++]!==v)throw new E("tlv.decode: wrong tlv");const te=T[D++],re=!!(te&128);let z=0;if(!re)z=te;else{const ce=te&127;if(!ce)throw new E("tlv.decode(long): indefinite length not supported");if(ce>4)throw new E("tlv.decode(long): byte length is too big");const pe=T.subarray(D,D+ce);if(pe.length!==ce)throw new E("tlv.decode: length bytes not complete");if(pe[0]===0)throw new E("tlv.decode(long): zero leftmost byte");for(const Q of pe)z=z<<8|Q;if(D+=ce,z<128)throw new E("tlv.decode(long): not minimal encoding")}const J=T.subarray(D,D+z);if(J.length!==z)throw new E("tlv.decode: wrong value length");return{v:J,l:T.subarray(D+z)}}},_int:{encode(v){const{Err:T}=t.DER;if(v<d)throw new T("integer: negative integers are not allowed");let E=r.numberToHexUnpadded(v);if(Number.parseInt(E[0],16)&8&&(E="00"+E),E.length&1)throw new T("unexpected DER parsing assertion: unpadded hex");return E},decode(v){const{Err:T}=t.DER;if(v[0]&128)throw new T("invalid signature integer: negative");if(v[0]===0&&!(v[1]&128))throw new T("invalid signature integer: unnecessary leading zero");return l(v)}},toSig(v){const{Err:T,_int:E,_tlv:D}=t.DER,te=typeof v=="string"?c(v):v;r.abytes(te);const{v:re,l:z}=D.decode(48,te);if(z.length)throw new T("invalid signature: left bytes after parsing");const{v:J,l:ce}=D.decode(2,re),{v:pe,l:Q}=D.decode(2,ce);if(Q.length)throw new T("invalid signature: left bytes after parsing");return{r:E.decode(J),s:E.decode(pe)}},hexFromSig(v){const{_tlv:T,_int:E}=t.DER,D=T.encode(2,E.encode(v.r)),te=T.encode(2,E.encode(v.s)),re=D+te;return T.encode(48,re)}};const d=BigInt(0),h=BigInt(1),f=BigInt(2),p=BigInt(3),y=BigInt(4);function b(v){const T=a(v),{Fp:E}=T,D=(0,n.Field)(T.n,T.nBitLength),te=T.toBytes||((C,A,L)=>{const $=A.toAffine();return r.concatBytes(Uint8Array.from([4]),E.toBytes($.x),E.toBytes($.y))}),re=T.fromBytes||(C=>{const A=C.subarray(1),L=E.fromBytes(A.subarray(0,E.BYTES)),$=E.fromBytes(A.subarray(E.BYTES,2*E.BYTES));return{x:L,y:$}});function z(C){const{a:A,b:L}=T,$=E.sqr(C),ie=E.mul($,C);return E.add(E.add(ie,E.mul(C,A)),L)}if(!E.eql(E.sqr(T.Gy),z(T.Gx)))throw new Error("bad generator point: equation left != right");function J(C){return r.inRange(C,h,T.n)}function ce(C){const{allowedPrivateKeyLengths:A,nByteLength:L,wrapPrivateKey:$,n:ie}=T;if(A&&typeof C!="bigint"){if(r.isBytes(C)&&(C=r.bytesToHex(C)),typeof C!="string"||!A.includes(C.length))throw new Error("invalid private key");C=C.padStart(L*2,"0")}let q;try{q=typeof C=="bigint"?C:r.bytesToNumberBE((0,s.ensureBytes)("private key",C,L))}catch{throw new Error("invalid private key, expected hex or "+L+" bytes, got "+typeof C)}return $&&(q=(0,n.mod)(q,ie)),r.aInRange("private key",q,h,ie),q}function pe(C){if(!(C instanceof V))throw new Error("ProjectivePoint expected")}const Q=(0,s.memoized)((C,A)=>{const{px:L,py:$,pz:ie}=C;if(E.eql(ie,E.ONE))return{x:L,y:$};const q=C.is0();A==null&&(A=q?E.ONE:E.inv(ie));const G=E.mul(L,A),ne=E.mul($,A),he=E.mul(ie,A);if(q)return{x:E.ZERO,y:E.ZERO};if(!E.eql(he,E.ONE))throw new Error("invZ was invalid");return{x:G,y:ne}}),ue=(0,s.memoized)(C=>{if(C.is0()){if(T.allowInfinityPoint&&!E.is0(C.py))return;throw new Error("bad point: ZERO")}const{x:A,y:L}=C.toAffine();if(!E.isValid(A)||!E.isValid(L))throw new Error("bad point: x or y not FE");const $=E.sqr(L),ie=z(A);if(!E.eql($,ie))throw new Error("bad point: equation left != right");if(!C.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class V{constructor(A,L,$){if(this.px=A,this.py=L,this.pz=$,A==null||!E.isValid(A))throw new Error("x required");if(L==null||!E.isValid(L))throw new Error("y required");if($==null||!E.isValid($))throw new Error("z required");Object.freeze(this)}static fromAffine(A){const{x:L,y:$}=A||{};if(!A||!E.isValid(L)||!E.isValid($))throw new Error("invalid affine point");if(A instanceof V)throw new Error("projective point not allowed");const ie=q=>E.eql(q,E.ZERO);return ie(L)&&ie($)?V.ZERO:new V(L,$,E.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(A){const L=E.invertBatch(A.map($=>$.pz));return A.map(($,ie)=>$.toAffine(L[ie])).map(V.fromAffine)}static fromHex(A){const L=V.fromAffine(re((0,s.ensureBytes)("pointHex",A)));return L.assertValidity(),L}static fromPrivateKey(A){return V.BASE.multiply(ce(A))}static msm(A,L){return(0,e.pippenger)(V,D,A,L)}_setWindowSize(A){R.setWindowSize(this,A)}assertValidity(){ue(this)}hasEvenY(){const{y:A}=this.toAffine();if(E.isOdd)return!E.isOdd(A);throw new Error("Field doesn't support isOdd")}equals(A){pe(A);const{px:L,py:$,pz:ie}=this,{px:q,py:G,pz:ne}=A,he=E.eql(E.mul(L,ne),E.mul(q,ie)),se=E.eql(E.mul($,ne),E.mul(G,ie));return he&&se}negate(){return new V(this.px,E.neg(this.py),this.pz)}double(){const{a:A,b:L}=T,$=E.mul(L,p),{px:ie,py:q,pz:G}=this;let ne=E.ZERO,he=E.ZERO,se=E.ZERO,ee=E.mul(ie,ie),N=E.mul(q,q),k=E.mul(G,G),B=E.mul(ie,q);return B=E.add(B,B),se=E.mul(ie,G),se=E.add(se,se),ne=E.mul(A,se),he=E.mul($,k),he=E.add(ne,he),ne=E.sub(N,he),he=E.add(N,he),he=E.mul(ne,he),ne=E.mul(B,ne),se=E.mul($,se),k=E.mul(A,k),B=E.sub(ee,k),B=E.mul(A,B),B=E.add(B,se),se=E.add(ee,ee),ee=E.add(se,ee),ee=E.add(ee,k),ee=E.mul(ee,B),he=E.add(he,ee),k=E.mul(q,G),k=E.add(k,k),ee=E.mul(k,B),ne=E.sub(ne,ee),se=E.mul(k,N),se=E.add(se,se),se=E.add(se,se),new V(ne,he,se)}add(A){pe(A);const{px:L,py:$,pz:ie}=this,{px:q,py:G,pz:ne}=A;let he=E.ZERO,se=E.ZERO,ee=E.ZERO;const N=T.a,k=E.mul(T.b,p);let B=E.mul(L,q),O=E.mul($,G),P=E.mul(ie,ne),F=E.add(L,$),Y=E.add(q,G);F=E.mul(F,Y),Y=E.add(B,O),F=E.sub(F,Y),Y=E.add(L,ie);let W=E.add(q,ne);return Y=E.mul(Y,W),W=E.add(B,P),Y=E.sub(Y,W),W=E.add($,ie),he=E.add(G,ne),W=E.mul(W,he),he=E.add(O,P),W=E.sub(W,he),ee=E.mul(N,Y),he=E.mul(k,P),ee=E.add(he,ee),he=E.sub(O,ee),ee=E.add(O,ee),se=E.mul(he,ee),O=E.add(B,B),O=E.add(O,B),P=E.mul(N,P),Y=E.mul(k,Y),O=E.add(O,P),P=E.sub(B,P),P=E.mul(N,P),Y=E.add(Y,P),B=E.mul(O,Y),se=E.add(se,B),B=E.mul(W,Y),he=E.mul(F,he),he=E.sub(he,B),B=E.mul(F,O),ee=E.mul(W,ee),ee=E.add(ee,B),new V(he,se,ee)}subtract(A){return this.add(A.negate())}is0(){return this.equals(V.ZERO)}wNAF(A){return R.wNAFCached(this,A,V.normalizeZ)}multiplyUnsafe(A){const{endo:L,n:$}=T;r.aInRange("scalar",A,d,$);const ie=V.ZERO;if(A===d)return ie;if(this.is0()||A===h)return this;if(!L||R.hasPrecomputes(this))return R.wNAFCachedUnsafe(this,A,V.normalizeZ);let{k1neg:q,k1:G,k2neg:ne,k2:he}=L.splitScalar(A),se=ie,ee=ie,N=this;for(;G>d||he>d;)G&h&&(se=se.add(N)),he&h&&(ee=ee.add(N)),N=N.double(),G>>=h,he>>=h;return q&&(se=se.negate()),ne&&(ee=ee.negate()),ee=new V(E.mul(ee.px,L.beta),ee.py,ee.pz),se.add(ee)}multiply(A){const{endo:L,n:$}=T;r.aInRange("scalar",A,h,$);let ie,q;if(L){const{k1neg:G,k1:ne,k2neg:he,k2:se}=L.splitScalar(A);let{p:ee,f:N}=this.wNAF(ne),{p:k,f:B}=this.wNAF(se);ee=R.constTimeNegate(G,ee),k=R.constTimeNegate(he,k),k=new V(E.mul(k.px,L.beta),k.py,k.pz),ie=ee.add(k),q=N.add(B)}else{const{p:G,f:ne}=this.wNAF(A);ie=G,q=ne}return V.normalizeZ([ie,q])[0]}multiplyAndAddUnsafe(A,L,$){const ie=V.BASE,q=(ne,he)=>he===d||he===h||!ne.equals(ie)?ne.multiplyUnsafe(he):ne.multiply(he),G=q(this,L).add(q(A,$));return G.is0()?void 0:G}toAffine(A){return Q(this,A)}isTorsionFree(){const{h:A,isTorsionFree:L}=T;if(A===h)return!0;if(L)return L(V,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:A,clearCofactor:L}=T;return A===h?this:L?L(V,this):this.multiplyUnsafe(T.h)}toRawBytes(A=!0){return(0,s.abool)("isCompressed",A),this.assertValidity(),te(V,this,A)}toHex(A=!0){return(0,s.abool)("isCompressed",A),r.bytesToHex(this.toRawBytes(A))}}V.BASE=new V(T.Gx,T.Gy,E.ONE),V.ZERO=new V(E.ZERO,E.ONE,E.ZERO);const H=T.nBitLength,R=(0,e.wNAF)(V,T.endo?Math.ceil(H/2):H);return{CURVE:T,ProjectivePoint:V,normPrivateKeyToScalar:ce,weierstrassEquation:z,isWithinCurveOrder:J}}function _(v){const T=(0,e.validateBasic)(v);return r.validateObject(T,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...T})}function m(v){const T=_(v),{Fp:E,n:D}=T,te=E.BYTES+1,re=2*E.BYTES+1;function z(P){return(0,n.mod)(P,D)}function J(P){return(0,n.invert)(P,D)}const{ProjectivePoint:ce,normPrivateKeyToScalar:pe,weierstrassEquation:Q,isWithinCurveOrder:ue}=b({...T,toBytes(P,F,Y){const W=F.toAffine(),Z=E.toBytes(W.x),ae=r.concatBytes;return(0,s.abool)("isCompressed",Y),Y?ae(Uint8Array.from([F.hasEvenY()?2:3]),Z):ae(Uint8Array.from([4]),Z,E.toBytes(W.y))},fromBytes(P){const F=P.length,Y=P[0],W=P.subarray(1);if(F===te&&(Y===2||Y===3)){const Z=r.bytesToNumberBE(W);if(!r.inRange(Z,h,E.ORDER))throw new Error("Point is not on curve");const ae=Q(Z);let oe;try{oe=E.sqrt(ae)}catch(Te){const Ne=Te instanceof Error?": "+Te.message:"";throw new Error("Point is not on curve"+Ne)}const fe=(oe&h)===h;return(Y&1)===1!==fe&&(oe=E.neg(oe)),{x:Z,y:oe}}else if(F===re&&Y===4){const Z=E.fromBytes(W.subarray(0,E.BYTES)),ae=E.fromBytes(W.subarray(E.BYTES,2*E.BYTES));return{x:Z,y:ae}}else{const Z=te,ae=re;throw new Error("invalid Point, expected length of "+Z+", or uncompressed "+ae+", got "+F)}}}),V=P=>r.bytesToHex(r.numberToBytesBE(P,T.nByteLength));function H(P){const F=D>>h;return P>F}function R(P){return H(P)?z(-P):P}const C=(P,F,Y)=>r.bytesToNumberBE(P.slice(F,Y));class A{constructor(F,Y,W){this.r=F,this.s=Y,this.recovery=W,this.assertValidity()}static fromCompact(F){const Y=T.nByteLength;return F=(0,s.ensureBytes)("compactSignature",F,Y*2),new A(C(F,0,Y),C(F,Y,2*Y))}static fromDER(F){const{r:Y,s:W}=t.DER.toSig((0,s.ensureBytes)("DER",F));return new A(Y,W)}assertValidity(){r.aInRange("r",this.r,h,D),r.aInRange("s",this.s,h,D)}addRecoveryBit(F){return new A(this.r,this.s,F)}recoverPublicKey(F){const{r:Y,s:W,recovery:Z}=this,ae=ne((0,s.ensureBytes)("msgHash",F));if(Z==null||![0,1,2,3].includes(Z))throw new Error("recovery id invalid");const oe=Z===2||Z===3?Y+T.n:Y;if(oe>=E.ORDER)throw new Error("recovery id 2 or 3 invalid");const fe=Z&1?"03":"02",_e=ce.fromHex(fe+V(oe)),Te=J(oe),Ne=z(-ae*Te),$e=z(W*Te),Ge=ce.BASE.multiplyAndAddUnsafe(_e,Ne,$e);if(!Ge)throw new Error("point at infinify");return Ge.assertValidity(),Ge}hasHighS(){return H(this.s)}normalizeS(){return this.hasHighS()?new A(this.r,z(-this.s),this.recovery):this}toDERRawBytes(){return r.hexToBytes(this.toDERHex())}toDERHex(){return t.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return r.hexToBytes(this.toCompactHex())}toCompactHex(){return V(this.r)+V(this.s)}}const L={isValidPrivateKey(P){try{return pe(P),!0}catch{return!1}},normPrivateKeyToScalar:pe,randomPrivateKey:()=>{const P=(0,n.getMinHashLength)(T.n);return(0,n.mapHashToField)(T.randomBytes(P),T.n)},precompute(P=8,F=ce.BASE){return F._setWindowSize(P),F.multiply(BigInt(3)),F}};function $(P,F=!0){return ce.fromPrivateKey(P).toRawBytes(F)}function ie(P){const F=r.isBytes(P),Y=typeof P=="string",W=(F||Y)&&P.length;return F?W===te||W===re:Y?W===2*te||W===2*re:P instanceof ce}function q(P,F,Y=!0){if(ie(P))throw new Error("first arg must be private key");if(!ie(F))throw new Error("second arg must be public key");return ce.fromHex(F).multiply(pe(P)).toRawBytes(Y)}const G=T.bits2int||function(P){if(P.length>8192)throw new Error("input is too large");const F=r.bytesToNumberBE(P),Y=P.length*8-T.nBitLength;return Y>0?F>>BigInt(Y):F},ne=T.bits2int_modN||function(P){return z(G(P))},he=r.bitMask(T.nBitLength);function se(P){return r.aInRange("num < 2^"+T.nBitLength,P,d,he),r.numberToBytesBE(P,T.nByteLength)}function ee(P,F,Y=N){if(["recovered","canonical"].some(g=>g in Y))throw new Error("sign() legacy options not supported");const{hash:W,randomBytes:Z}=T;let{lowS:ae,prehash:oe,extraEntropy:fe}=Y;ae==null&&(ae=!0),P=(0,s.ensureBytes)("msgHash",P),i(Y),oe&&(P=(0,s.ensureBytes)("prehashed msgHash",W(P)));const _e=ne(P),Te=pe(F),Ne=[se(Te),se(_e)];if(fe!=null&&fe!==!1){const g=fe===!0?Z(E.BYTES):fe;Ne.push((0,s.ensureBytes)("extraEntropy",g))}const $e=r.concatBytes(...Ne),Ge=_e;function j(g){const S=G(g);if(!ue(S))return;const K=J(S),le=ce.BASE.multiply(S).toAffine(),me=z(le.x);if(me===d)return;const ye=z(K*z(Ge+me*Te));if(ye===d)return;let We=(le.x===me?0:2)|Number(le.y&h),ze=ye;return ae&&H(ye)&&(ze=R(ye),We^=1),new A(me,ze,We)}return{seed:$e,k2sig:j}}const N={lowS:T.lowS,prehash:!1},k={lowS:T.lowS,prehash:!1};function B(P,F,Y=N){const{seed:W,k2sig:Z}=ee(P,F,Y),ae=T;return r.createHmacDrbg(ae.hash.outputLen,ae.nByteLength,ae.hmac)(W,Z)}ce.BASE._setWindowSize(8);function O(P,F,Y,W=k){var We;const Z=P;F=(0,s.ensureBytes)("msgHash",F),Y=(0,s.ensureBytes)("publicKey",Y);const{lowS:ae,prehash:oe,format:fe}=W;if(i(W),"strict"in W)throw new Error("options.strict was renamed to lowS");if(fe!==void 0&&fe!=="compact"&&fe!=="der")throw new Error("format must be compact or der");const _e=typeof Z=="string"||r.isBytes(Z),Te=!_e&&!fe&&typeof Z=="object"&&Z!==null&&typeof Z.r=="bigint"&&typeof Z.s=="bigint";if(!_e&&!Te)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let Ne,$e;try{if(Te&&(Ne=new A(Z.r,Z.s)),_e){try{fe!=="compact"&&(Ne=A.fromDER(Z))}catch(ze){if(!(ze instanceof t.DER.Err))throw ze}!Ne&&fe!=="der"&&(Ne=A.fromCompact(Z))}$e=ce.fromHex(Y)}catch{return!1}if(!Ne||ae&&Ne.hasHighS())return!1;oe&&(F=T.hash(F));const{r:Ge,s:j}=Ne,g=ne(F),S=J(j),K=z(g*S),le=z(Ge*S),me=(We=ce.BASE.multiplyAndAddUnsafe($e,K,le))==null?void 0:We.toAffine();return me?z(me.x)===Ge:!1}return{CURVE:T,getPublicKey:$,getSharedSecret:q,sign:B,verify:O,ProjectivePoint:ce,Signature:A,utils:L}}function x(v,T){const E=v.ORDER;let D=d;for(let R=E-h;R%f===d;R/=f)D+=h;const te=D,re=f<<te-h-h,z=re*f,J=(E-h)/z,ce=(J-h)/f,pe=z-h,Q=re,ue=v.pow(T,J),V=v.pow(T,(J+h)/f);let H=(R,C)=>{let A=ue,L=v.pow(C,pe),$=v.sqr(L);$=v.mul($,C);let ie=v.mul(R,$);ie=v.pow(ie,ce),ie=v.mul(ie,L),L=v.mul(ie,C),$=v.mul(ie,R);let q=v.mul($,L);ie=v.pow(q,Q);let G=v.eql(ie,v.ONE);L=v.mul($,V),ie=v.mul(q,A),$=v.cmov(L,$,G),q=v.cmov(ie,q,G);for(let ne=te;ne>h;ne--){let he=ne-f;he=f<<he-h;let se=v.pow(q,he);const ee=v.eql(se,v.ONE);L=v.mul($,A),A=v.mul(A,A),se=v.mul(q,A),$=v.cmov(L,$,ee),q=v.cmov(se,q,ee)}return{isValid:G,value:$}};if(v.ORDER%y===p){const R=(v.ORDER-p)/y,C=v.sqrt(v.neg(T));H=(A,L)=>{let $=v.sqr(L);const ie=v.mul(A,L);$=v.mul($,ie);let q=v.pow($,R);q=v.mul(q,ie);const G=v.mul(q,C),ne=v.mul(v.sqr(q),L),he=v.eql(ne,A);let se=v.cmov(G,q,he);return{isValid:he,value:se}}}return H}function w(v,T){if((0,n.validateField)(v),!v.isValid(T.A)||!v.isValid(T.B)||!v.isValid(T.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const E=x(v,T.Z);if(!v.isOdd)throw new Error("Fp.isOdd is not implemented!");return D=>{let te,re,z,J,ce,pe,Q,ue;te=v.sqr(D),te=v.mul(te,T.Z),re=v.sqr(te),re=v.add(re,te),z=v.add(re,v.ONE),z=v.mul(z,T.B),J=v.cmov(T.Z,v.neg(re),!v.eql(re,v.ZERO)),J=v.mul(J,T.A),re=v.sqr(z),pe=v.sqr(J),ce=v.mul(pe,T.A),re=v.add(re,ce),re=v.mul(re,z),pe=v.mul(pe,J),ce=v.mul(pe,T.B),re=v.add(re,ce),Q=v.mul(te,z);const{isValid:V,value:H}=E(re,pe);ue=v.mul(te,D),ue=v.mul(ue,H),Q=v.cmov(Q,z,V),ue=v.cmov(ue,H,V);const R=v.isOdd(D)===v.isOdd(ue);return ue=v.cmov(v.neg(ue),ue,R),Q=v.div(Q,J),{x:Q,y:ue}}}})(iw);Object.defineProperty(Lp,"__esModule",{value:!0});Lp.getHash=BA;Lp.createCurve=cF;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const aF=Mp,v1=Zn,lF=iw;function BA(t){return{hash:t,hmac:(e,...n)=>(0,aF.hmac)(t,e,(0,v1.concatBytes)(...n)),randomBytes:v1.randomBytes}}function cF(t,e){const n=r=>(0,lF.weierstrass)({...t,...BA(r)});return{...n(e),create:n}}var Eo={};Object.defineProperty(Eo,"__esModule",{value:!0});Eo.expand_message_xmd=$A;Eo.expand_message_xof=UA;Eo.hash_to_field=dy;Eo.isogenyMap=fF;Eo.createHasher=pF;const uF=gt,yn=it,dF=yn.bytesToNumberBE;function Ti(t,e){if(Mu(t),Mu(e),t<0||t>=1<<8*e)throw new Error("invalid I2OSP input: "+t);const n=Array.from({length:e}).fill(0);for(let r=e-1;r>=0;r--)n[r]=t&255,t>>>=8;return new Uint8Array(n)}function hF(t,e){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[r]^e[r];return n}function Mu(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function $A(t,e,n,r){(0,yn.abytes)(t),(0,yn.abytes)(e),Mu(n),e.length>255&&(e=r((0,yn.concatBytes)((0,yn.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));const{outputLen:s,blockLen:i}=r,a=Math.ceil(n/s);if(n>65535||a>255)throw new Error("expand_message_xmd: invalid lenInBytes");const l=(0,yn.concatBytes)(e,Ti(e.length,1)),c=Ti(0,i),u=Ti(n,2),d=new Array(a),h=r((0,yn.concatBytes)(c,t,u,Ti(0,1),l));d[0]=r((0,yn.concatBytes)(h,Ti(1,1),l));for(let p=1;p<=a;p++){const y=[hF(h,d[p-1]),Ti(p+1,1),l];d[p]=r((0,yn.concatBytes)(...y))}return(0,yn.concatBytes)(...d).slice(0,n)}function UA(t,e,n,r,s){if((0,yn.abytes)(t),(0,yn.abytes)(e),Mu(n),e.length>255){const i=Math.ceil(2*r/8);e=s.create({dkLen:i}).update((0,yn.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if(n>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return s.create({dkLen:n}).update(t).update(Ti(n,2)).update(e).update(Ti(e.length,1)).digest()}function dy(t,e,n){(0,yn.validateObject)(n,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:r,k:s,m:i,hash:a,expand:l,DST:c}=n;(0,yn.abytes)(t),Mu(e);const u=typeof c=="string"?(0,yn.utf8ToBytes)(c):c,d=r.toString(2).length,h=Math.ceil((d+s)/8),f=e*i*h;let p;if(l==="xmd")p=$A(t,u,f,a);else if(l==="xof")p=UA(t,u,f,s,a);else if(l==="_internal_pass")p=t;else throw new Error('expand must be "xmd" or "xof"');const y=new Array(e);for(let b=0;b<e;b++){const _=new Array(i);for(let m=0;m<i;m++){const x=h*(m+b*i),w=p.subarray(x,x+h);_[m]=(0,uF.mod)(dF(w),r)}y[b]=_}return y}function fF(t,e){const n=e.map(r=>Array.from(r).reverse());return(r,s)=>{const[i,a,l,c]=n.map(u=>u.reduce((d,h)=>t.add(t.mul(d,r),h)));return r=t.div(i,a),s=t.mul(s,t.div(l,c)),{x:r,y:s}}}function pF(t,e,n){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(r,s){const i=dy(r,2,{...n,DST:n.DST,...s}),a=t.fromAffine(e(i[0])),l=t.fromAffine(e(i[1])),c=a.add(l).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,s){const i=dy(r,1,{...n,DST:n.encodeDST,...s}),a=t.fromAffine(e(i[0])).clearCofactor();return a.assertValidity(),a},mapToCurve(r){if(!Array.isArray(r))throw new Error("mapToCurve: expected array of bigints");for(const i of r)if(typeof i!="bigint")throw new Error("mapToCurve: expected array of bigints");const s=t.fromAffine(e(r)).clearCofactor();return s.assertValidity(),s}}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.encodeToCurve=t.hashToCurve=t.schnorr=t.secp256k1=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const e=Qr,n=Zn,r=Lp,s=Eo,i=gt,a=it,l=iw,c=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),u=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),d=BigInt(1),h=BigInt(2),f=(R,C)=>(R+C/h)/C;function p(R){const C=c,A=BigInt(3),L=BigInt(6),$=BigInt(11),ie=BigInt(22),q=BigInt(23),G=BigInt(44),ne=BigInt(88),he=R*R*R%C,se=he*he*R%C,ee=(0,i.pow2)(se,A,C)*se%C,N=(0,i.pow2)(ee,A,C)*se%C,k=(0,i.pow2)(N,h,C)*he%C,B=(0,i.pow2)(k,$,C)*k%C,O=(0,i.pow2)(B,ie,C)*B%C,P=(0,i.pow2)(O,G,C)*O%C,F=(0,i.pow2)(P,ne,C)*P%C,Y=(0,i.pow2)(F,G,C)*O%C,W=(0,i.pow2)(Y,A,C)*se%C,Z=(0,i.pow2)(W,q,C)*B%C,ae=(0,i.pow2)(Z,L,C)*he%C,oe=(0,i.pow2)(ae,h,C);if(!y.eql(y.sqr(oe),R))throw new Error("Cannot find square root");return oe}const y=(0,i.Field)(c,void 0,void 0,{sqrt:p});t.secp256k1=(0,r.createCurve)({a:BigInt(0),b:BigInt(7),Fp:y,n:u,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:R=>{const C=u,A=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),L=-d*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),$=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),ie=A,q=BigInt("0x100000000000000000000000000000000"),G=f(ie*R,C),ne=f(-L*R,C);let he=(0,i.mod)(R-G*A-ne*$,C),se=(0,i.mod)(-G*L-ne*ie,C);const ee=he>q,N=se>q;if(ee&&(he=C-he),N&&(se=C-se),he>q||se>q)throw new Error("splitScalar: Endomorphism failed, k="+R);return{k1neg:ee,k1:he,k2neg:N,k2:se}}}},e.sha256);const b=BigInt(0),_={};function m(R,...C){let A=_[R];if(A===void 0){const L=(0,e.sha256)(Uint8Array.from(R,$=>$.charCodeAt(0)));A=(0,a.concatBytes)(L,L),_[R]=A}return(0,e.sha256)((0,a.concatBytes)(A,...C))}const x=R=>R.toRawBytes(!0).slice(1),w=R=>(0,a.numberToBytesBE)(R,32),v=R=>(0,i.mod)(R,c),T=R=>(0,i.mod)(R,u),E=t.secp256k1.ProjectivePoint,D=(R,C,A)=>E.BASE.multiplyAndAddUnsafe(R,C,A);function te(R){let C=t.secp256k1.utils.normPrivateKeyToScalar(R),A=E.fromPrivateKey(C);return{scalar:A.hasEvenY()?C:T(-C),bytes:x(A)}}function re(R){(0,a.aInRange)("x",R,d,c);const C=v(R*R),A=v(C*R+BigInt(7));let L=p(A);L%h!==b&&(L=v(-L));const $=new E(R,L,d);return $.assertValidity(),$}const z=a.bytesToNumberBE;function J(...R){return T(z(m("BIP0340/challenge",...R)))}function ce(R){return te(R).bytes}function pe(R,C,A=(0,n.randomBytes)(32)){const L=(0,a.ensureBytes)("message",R),{bytes:$,scalar:ie}=te(C),q=(0,a.ensureBytes)("auxRand",A,32),G=w(ie^z(m("BIP0340/aux",q))),ne=m("BIP0340/nonce",G,$,L),he=T(z(ne));if(he===b)throw new Error("sign failed: k is zero");const{bytes:se,scalar:ee}=te(he),N=J(se,$,L),k=new Uint8Array(64);if(k.set(se,0),k.set(w(T(ee+N*ie)),32),!Q(k,L,$))throw new Error("sign: Invalid signature produced");return k}function Q(R,C,A){const L=(0,a.ensureBytes)("signature",R,64),$=(0,a.ensureBytes)("message",C),ie=(0,a.ensureBytes)("publicKey",A,32);try{const q=re(z(ie)),G=z(L.subarray(0,32));if(!(0,a.inRange)(G,d,c))return!1;const ne=z(L.subarray(32,64));if(!(0,a.inRange)(ne,d,u))return!1;const he=J(w(G),x(q),$),se=D(q,ne,T(-he));return!(!se||!se.hasEvenY()||se.toAffine().x!==G)}catch{return!1}}t.schnorr=(()=>({getPublicKey:ce,sign:pe,verify:Q,utils:{randomPrivateKey:t.secp256k1.utils.randomPrivateKey,lift_x:re,pointToBytes:x,numberToBytesBE:a.numberToBytesBE,bytesToNumberBE:a.bytesToNumberBE,taggedHash:m,mod:i.mod}}))();const ue=(()=>(0,s.isogenyMap)(y,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(R=>R.map(C=>BigInt(C)))))(),V=(()=>(0,l.mapToCurveSimpleSWU)(y,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:y.create(BigInt("-11"))}))(),H=(()=>(0,s.createHasher)(t.secp256k1.ProjectivePoint,R=>{const{x:C,y:A}=V(y.create(R[0]));return ue(C,A)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:y.ORDER,m:1,k:128,expand:"xmd",hash:e.sha256}))();t.hashToCurve=(()=>H.hashToCurve)(),t.encodeToCurve=(()=>H.encodeToCurve)()})(Rp);var sc={};Object.defineProperty(sc,"__esModule",{value:!0});const mF=rc,gF=it;class dw{constructor(){this.hash=mF.sha512.create()}static half(e){return new dw().add(e).first256()}add(e){return this.hash.update(e),this}addU32(e){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e),this.add(n)}finish(){return this.hash.digest()}first256(){return this.finish().slice(0,32)}first256BigInt(){return(0,gF.bytesToNumberBE)(this.first256())}}sc.default=dw;var xF=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ya,"__esModule",{value:!0});ya.accountPublicFromPublicGenerator=ya.derivePrivateKey=void 0;const Du=Rp,yF=xF(sc),vF=BigInt(0);function hy(t,e){const n=Du.secp256k1.CURVE.n;for(let r=0;r<=4294967295;r++){const s=new yF.default().add(t);e!==void 0&&s.addU32(e),s.addU32(r);const i=s.first256BigInt();if(i>vF&&i<n)return i}throw new Error("impossible unicorn ;)")}function wF(t,e={}){const n=e.validator,r=Du.secp256k1.CURVE.n,s=hy(t);if(n)return s;const i=Du.secp256k1.ProjectivePoint.BASE.multiply(s).toRawBytes(!0),a=e.accountIndex||0;return(hy(i,a)+s)%r}ya.derivePrivateKey=wF;function bF(t){const e=Du.secp256k1.ProjectivePoint.fromHex(t),n=hy(t,0),r=Du.secp256k1.ProjectivePoint.BASE.multiply(n);return e.add(r).toRawBytes(!0)}ya.accountPublicFromPublicGenerator=bF;var ud={};Object.defineProperty(ud,"__esModule",{value:!0});const _F={ok(t,e){if(!t)throw new Error(e)}};ud.default=_F;var Gi={};Object.defineProperty(Gi,"__esModule",{value:!0});Gi.getAlgorithmFromPrivateKey=Gi.getAlgorithmFromPublicKey=Gi.getAlgorithmFromKey=void 0;var Er;(function(t){t[t.NONE=-1]="NONE",t[t.ED25519=237]="ED25519",t[t.SECP256K1_PUB_X=2]="SECP256K1_PUB_X",t[t.SECP256K1_PUB_X_ODD_Y=3]="SECP256K1_PUB_X_ODD_Y",t[t.SECP256K1_PUB_XY=4]="SECP256K1_PUB_XY",t[t.SECP256K1_PRIVATE=0]="SECP256K1_PRIVATE"})(Er||(Er={}));const VA={[`private_${Er.NONE}_32`]:"ecdsa-secp256k1",[`private_${Er.SECP256K1_PRIVATE}_33`]:"ecdsa-secp256k1",[`private_${Er.ED25519}_33`]:"ed25519",[`public_${Er.ED25519}_33`]:"ed25519",[`public_${Er.SECP256K1_PUB_X}_33`]:"ecdsa-secp256k1",[`public_${Er.SECP256K1_PUB_X_ODD_Y}_33`]:"ecdsa-secp256k1",[`public_${Er.SECP256K1_PUB_XY}_65`]:"ecdsa-secp256k1"};function EF(t){return{prefix:t.length<2?Er.NONE:parseInt(t.slice(0,2),16),len:t.length/2}}function zA(t){return t===Er.NONE?"None":`0x${t.toString(16).padStart(2,"0")}`}function SF(t){const n={algorithm:17,prefix:6};return Object.entries(VA).filter(([r])=>r.startsWith(t)).map(([r,s])=>{const[,i,a]=r.split("_"),l=s.padEnd(n.algorithm),c=zA(Number(i)).padEnd(n.prefix);return`${l} - Prefix: ${c} Length: ${a} bytes`}).join(`
`)}function NF({key:t,type:e,prefix:n,len:r}){const s=SF(e);return`invalid_key:

Type: ${e}
Key: ${t}
Prefix: ${zA(n)} 
Length: ${r} bytes

Acceptable ${e} formats are:
${s}
`}function hw(t,e){const{prefix:n,len:r}=EF(t),s=e==="private"&&r===32?Er.NONE:n,i=VA[`${e}_${s}_${r}`];if(!i)throw new Error(NF({key:t,type:e,len:r,prefix:s}));return i}Gi.getAlgorithmFromKey=hw;function TF(t){return hw(t,"public")}Gi.getAlgorithmFromPublicKey=TF;function AF(t){return hw(t,"private")}Gi.getAlgorithmFromPrivateKey=AF;var fw={},HA=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fw,"__esModule",{value:!0});const CF=it,Zd=Rp,w1=ft,jF=ya,kF=HA(ud),b1=HA(sc),_1="00",OF={deriveKeypair(t,e){const n=(0,jF.derivePrivateKey)(t,e),r=_1+(0,w1.bytesToHex)((0,CF.numberToBytesBE)(n,32)),s=(0,w1.bytesToHex)(Zd.secp256k1.getPublicKey(n,!0));return{privateKey:r,publicKey:s}},sign(t,e){kF.default.ok(e.length===66&&e.startsWith(_1)||e.length===64);const n=e.length===66?e.slice(2):e;return Zd.secp256k1.sign(b1.default.half(t),n,{lowS:!0,extraEntropy:void 0}).toDERHex(!0).toUpperCase()},verify(t,e,n){const r=Zd.secp256k1.Signature.fromDER(e);return Zd.secp256k1.verify(r,b1.default.half(t),n)}};fw.default=OF;var pw={},XA={},mw={};Object.defineProperty(mw,"__esModule",{value:!0});mw.twistedEdwards=LF;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const fy=_o,E1=gt,Un=it,Dn=it,Dr=BigInt(0),Fn=BigInt(1),eh=BigInt(2),PF=BigInt(8),IF={zip215:!0};function RF(t){const e=(0,fy.validateBasic)(t);return Un.validateObject(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function LF(t){const e=RF(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:a,nByteLength:l,h:c}=e,u=eh<<BigInt(l*8)-Fn,d=n.create,h=(0,E1.Field)(e.n,e.nBitLength),f=e.uvRatio||((V,H)=>{try{return{isValid:!0,value:n.sqrt(V*n.inv(H))}}catch{return{isValid:!1,value:Dr}}}),p=e.adjustScalarBytes||(V=>V),y=e.domain||((V,H,R)=>{if((0,Dn.abool)("phflag",R),H.length||R)throw new Error("Contexts/pre-hash are not supported");return V});function b(V,H){Un.aInRange("coordinate "+V,H,Dr,u)}function _(V){if(!(V instanceof w))throw new Error("ExtendedPoint expected")}const m=(0,Dn.memoized)((V,H)=>{const{ex:R,ey:C,ez:A}=V,L=V.is0();H==null&&(H=L?PF:n.inv(A));const $=d(R*H),ie=d(C*H),q=d(A*H);if(L)return{x:Dr,y:Fn};if(q!==Fn)throw new Error("invZ was invalid");return{x:$,y:ie}}),x=(0,Dn.memoized)(V=>{const{a:H,d:R}=e;if(V.is0())throw new Error("bad point: ZERO");const{ex:C,ey:A,ez:L,et:$}=V,ie=d(C*C),q=d(A*A),G=d(L*L),ne=d(G*G),he=d(ie*H),se=d(G*d(he+q)),ee=d(ne+d(R*d(ie*q)));if(se!==ee)throw new Error("bad point: equation left != right (1)");const N=d(C*A),k=d(L*$);if(N!==k)throw new Error("bad point: equation left != right (2)");return!0});class w{constructor(H,R,C,A){this.ex=H,this.ey=R,this.ez=C,this.et=A,b("x",H),b("y",R),b("z",C),b("t",A),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(H){if(H instanceof w)throw new Error("extended point not allowed");const{x:R,y:C}=H||{};return b("x",R),b("y",C),new w(R,C,Fn,d(R*C))}static normalizeZ(H){const R=n.invertBatch(H.map(C=>C.ez));return H.map((C,A)=>C.toAffine(R[A])).map(w.fromAffine)}static msm(H,R){return(0,fy.pippenger)(w,h,H,R)}_setWindowSize(H){E.setWindowSize(this,H)}assertValidity(){x(this)}equals(H){_(H);const{ex:R,ey:C,ez:A}=this,{ex:L,ey:$,ez:ie}=H,q=d(R*ie),G=d(L*A),ne=d(C*ie),he=d($*A);return q===G&&ne===he}is0(){return this.equals(w.ZERO)}negate(){return new w(d(-this.ex),this.ey,this.ez,d(-this.et))}double(){const{a:H}=e,{ex:R,ey:C,ez:A}=this,L=d(R*R),$=d(C*C),ie=d(eh*d(A*A)),q=d(H*L),G=R+C,ne=d(d(G*G)-L-$),he=q+$,se=he-ie,ee=q-$,N=d(ne*se),k=d(he*ee),B=d(ne*ee),O=d(se*he);return new w(N,k,O,B)}add(H){_(H);const{a:R,d:C}=e,{ex:A,ey:L,ez:$,et:ie}=this,{ex:q,ey:G,ez:ne,et:he}=H;if(R===BigInt(-1)){const oe=d((L-A)*(G+q)),fe=d((L+A)*(G-q)),_e=d(fe-oe);if(_e===Dr)return this.double();const Te=d($*eh*he),Ne=d(ie*eh*ne),$e=Ne+Te,Ge=fe+oe,j=Ne-Te,g=d($e*_e),S=d(Ge*j),K=d($e*j),le=d(_e*Ge);return new w(g,S,le,K)}const se=d(A*q),ee=d(L*G),N=d(ie*C*he),k=d($*ne),B=d((A+L)*(q+G)-se-ee),O=k-N,P=k+N,F=d(ee-R*se),Y=d(B*O),W=d(P*F),Z=d(B*F),ae=d(O*P);return new w(Y,W,ae,Z)}subtract(H){return this.add(H.negate())}wNAF(H){return E.wNAFCached(this,H,w.normalizeZ)}multiply(H){const R=H;Un.aInRange("scalar",R,Fn,r);const{p:C,f:A}=this.wNAF(R);return w.normalizeZ([C,A])[0]}multiplyUnsafe(H,R=w.ZERO){const C=H;return Un.aInRange("scalar",C,Dr,r),C===Dr?T:this.is0()||C===Fn?this:E.wNAFCachedUnsafe(this,C,w.normalizeZ,R)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return E.unsafeLadder(this,r).is0()}toAffine(H){return m(this,H)}clearCofactor(){const{h:H}=e;return H===Fn?this:this.multiplyUnsafe(H)}static fromHex(H,R=!1){const{d:C,a:A}=e,L=n.BYTES;H=(0,Dn.ensureBytes)("pointHex",H,L),(0,Dn.abool)("zip215",R);const $=H.slice(),ie=H[L-1];$[L-1]=ie&-129;const q=Un.bytesToNumberLE($),G=R?u:n.ORDER;Un.aInRange("pointHex.y",q,Dr,G);const ne=d(q*q),he=d(ne-Fn),se=d(C*ne-A);let{isValid:ee,value:N}=f(he,se);if(!ee)throw new Error("Point.fromHex: invalid y coordinate");const k=(N&Fn)===Fn,B=(ie&128)!==0;if(!R&&N===Dr&&B)throw new Error("Point.fromHex: x=0 and x_0=1");return B!==k&&(N=d(-N)),w.fromAffine({x:N,y:q})}static fromPrivateKey(H){return re(H).point}toRawBytes(){const{x:H,y:R}=this.toAffine(),C=Un.numberToBytesLE(R,n.BYTES);return C[C.length-1]|=H&Fn?128:0,C}toHex(){return Un.bytesToHex(this.toRawBytes())}}w.BASE=new w(e.Gx,e.Gy,Fn,d(e.Gx*e.Gy)),w.ZERO=new w(Dr,Fn,Fn,Dr);const{BASE:v,ZERO:T}=w,E=(0,fy.wNAF)(w,l*8);function D(V){return(0,E1.mod)(V,r)}function te(V){return D(Un.bytesToNumberLE(V))}function re(V){const H=n.BYTES;V=(0,Dn.ensureBytes)("private key",V,H);const R=(0,Dn.ensureBytes)("hashed private key",i(V),2*H),C=p(R.slice(0,H)),A=R.slice(H,2*H),L=te(C),$=v.multiply(L),ie=$.toRawBytes();return{head:C,prefix:A,scalar:L,point:$,pointBytes:ie}}function z(V){return re(V).pointBytes}function J(V=new Uint8Array,...H){const R=Un.concatBytes(...H);return te(i(y(R,(0,Dn.ensureBytes)("context",V),!!s)))}function ce(V,H,R={}){V=(0,Dn.ensureBytes)("message",V),s&&(V=s(V));const{prefix:C,scalar:A,pointBytes:L}=re(H),$=J(R.context,C,V),ie=v.multiply($).toRawBytes(),q=J(R.context,ie,L,V),G=D($+q*A);Un.aInRange("signature.s",G,Dr,r);const ne=Un.concatBytes(ie,Un.numberToBytesLE(G,n.BYTES));return(0,Dn.ensureBytes)("result",ne,n.BYTES*2)}const pe=IF;function Q(V,H,R,C=pe){const{context:A,zip215:L}=C,$=n.BYTES;V=(0,Dn.ensureBytes)("signature",V,2*$),H=(0,Dn.ensureBytes)("message",H),R=(0,Dn.ensureBytes)("publicKey",R,$),L!==void 0&&(0,Dn.abool)("zip215",L),s&&(H=s(H));const ie=Un.bytesToNumberLE(V.slice($,2*$));let q,G,ne;try{q=w.fromHex(R,L),G=w.fromHex(V.slice(0,$),L),ne=v.multiplyUnsafe(ie)}catch{return!1}if(!L&&q.isSmallOrder())return!1;const he=J(A,G.toRawBytes(),q.toRawBytes(),H);return G.add(q.multiplyUnsafe(he)).subtract(ne).clearCofactor().equals(w.ZERO)}return v._setWindowSize(8),{CURVE:e,getPublicKey:z,sign:ce,verify:Q,ExtendedPoint:w,utils:{getExtendedPublicKey:re,randomPrivateKey:()=>a(n.BYTES),precompute(V=8,H=w.BASE){return H._setWindowSize(V),H.multiply(BigInt(3)),H}}}}var gw={};Object.defineProperty(gw,"__esModule",{value:!0});gw.montgomery=DF;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const S1=gt,_i=it,Ha=BigInt(0),K0=BigInt(1);function MF(t){return(0,_i.validateObject)(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function DF(t){const e=MF(t),{P:n}=e,r=x=>(0,S1.mod)(x,n),s=e.montgomeryBits,i=Math.ceil(s/8),a=e.nByteLength,l=e.adjustScalarBytes||(x=>x),c=e.powPminus2||(x=>(0,S1.pow)(x,n-BigInt(2),n));function u(x,w,v){const T=r(x*(w-v));return w=r(w-T),v=r(v+T),[w,v]}const d=(e.a-BigInt(2))/BigInt(4);function h(x,w){(0,_i.aInRange)("u",x,Ha,n),(0,_i.aInRange)("scalar",w,Ha,n);const v=w,T=x;let E=K0,D=Ha,te=x,re=K0,z=Ha,J;for(let pe=BigInt(s-1);pe>=Ha;pe--){const Q=v>>pe&K0;z^=Q,J=u(z,E,te),E=J[0],te=J[1],J=u(z,D,re),D=J[0],re=J[1],z=Q;const ue=E+D,V=r(ue*ue),H=E-D,R=r(H*H),C=V-R,A=te+re,L=te-re,$=r(L*ue),ie=r(A*H),q=$+ie,G=$-ie;te=r(q*q),re=r(T*r(G*G)),E=r(V*R),D=r(C*(V+r(d*C)))}J=u(z,E,te),E=J[0],te=J[1],J=u(z,D,re),D=J[0],re=J[1];const ce=c(D);return r(E*ce)}function f(x){return(0,_i.numberToBytesLE)(r(x),i)}function p(x){const w=(0,_i.ensureBytes)("u coordinate",x,i);return a===32&&(w[31]&=127),(0,_i.bytesToNumberLE)(w)}function y(x){const w=(0,_i.ensureBytes)("scalar",x),v=w.length;if(v!==i&&v!==a){let T=""+i+" or "+a;throw new Error("invalid scalar, expected "+T+" bytes, got "+v)}return(0,_i.bytesToNumberLE)(l(w))}function b(x,w){const v=p(w),T=y(x),E=h(v,T);if(E===Ha)throw new Error("invalid private or public key received");return f(E)}const _=f(e.Gu);function m(x){return b(x,_)}return{scalarMult:b,scalarMultBase:m,getSharedSecret:(x,w)=>b(x,w),getPublicKey:x=>m(x),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:_}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hash_to_ristretto255=t.hashToRistretto255=t.RistrettoPoint=t.encodeToCurve=t.hashToCurve=t.edwardsToMontgomery=t.x25519=t.ed25519ph=t.ed25519ctx=t.ed25519=t.ED25519_TORSION_SUBGROUP=void 0,t.edwardsToMontgomeryPub=D,t.edwardsToMontgomeryPriv=te;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const e=$t,n=Zn,r=_o,s=mw,i=Eo,a=gt,l=gw,c=it,u=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),d=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),h=BigInt(0),f=BigInt(1),p=BigInt(2),y=BigInt(3),b=BigInt(5),_=BigInt(8);function m(se){const ee=BigInt(10),N=BigInt(20),k=BigInt(40),B=BigInt(80),O=u,F=se*se%O*se%O,Y=(0,a.pow2)(F,p,O)*F%O,W=(0,a.pow2)(Y,f,O)*se%O,Z=(0,a.pow2)(W,b,O)*W%O,ae=(0,a.pow2)(Z,ee,O)*Z%O,oe=(0,a.pow2)(ae,N,O)*ae%O,fe=(0,a.pow2)(oe,k,O)*oe%O,_e=(0,a.pow2)(fe,B,O)*fe%O,Te=(0,a.pow2)(_e,B,O)*fe%O,Ne=(0,a.pow2)(Te,ee,O)*Z%O;return{pow_p_5_8:(0,a.pow2)(Ne,p,O)*se%O,b2:F}}function x(se){return se[0]&=248,se[31]&=127,se[31]|=64,se}function w(se,ee){const N=u,k=(0,a.mod)(ee*ee*ee,N),B=(0,a.mod)(k*k*ee,N),O=m(se*B).pow_p_5_8;let P=(0,a.mod)(se*k*O,N);const F=(0,a.mod)(ee*P*P,N),Y=P,W=(0,a.mod)(P*d,N),Z=F===se,ae=F===(0,a.mod)(-se,N),oe=F===(0,a.mod)(-se*d,N);return Z&&(P=Y),(ae||oe)&&(P=W),(0,a.isNegativeLE)(P,N)&&(P=(0,a.mod)(-P,N)),{isValid:Z||ae,value:P}}t.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];const v=(()=>(0,a.Field)(u,void 0,!0))(),T=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:v,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:_,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:e.sha512,randomBytes:n.randomBytes,adjustScalarBytes:x,uvRatio:w}))();t.ed25519=(()=>(0,s.twistedEdwards)(T))();function E(se,ee,N){if(ee.length>255)throw new Error("Context is too big");return(0,n.concatBytes)((0,n.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([N?1:0,ee.length]),ee,se)}t.ed25519ctx=(()=>(0,s.twistedEdwards)({...T,domain:E}))(),t.ed25519ph=(()=>(0,s.twistedEdwards)(Object.assign({},T,{domain:E,prehash:e.sha512})))(),t.x25519=(()=>(0,l.montgomery)({P:u,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:se=>{const ee=u,{pow_p_5_8:N,b2:k}=m(se);return(0,a.mod)((0,a.pow2)(N,y,ee)*k,ee)},adjustScalarBytes:x,randomBytes:n.randomBytes}))();function D(se){const{y:ee}=t.ed25519.ExtendedPoint.fromHex(se),N=BigInt(1);return v.toBytes(v.create((N+ee)*v.inv(N-ee)))}t.edwardsToMontgomery=D;function te(se){const ee=T.hash(se.subarray(0,32));return T.adjustScalarBytes(ee).subarray(0,32)}const re=(()=>(v.ORDER+y)/_)(),z=(()=>v.pow(p,re))(),J=(()=>v.sqrt(v.neg(v.ONE)))();function ce(se){const ee=(v.ORDER-b)/_,N=BigInt(486662);let k=v.sqr(se);k=v.mul(k,p);let B=v.add(k,v.ONE),O=v.neg(N),P=v.sqr(B),F=v.mul(P,B),Y=v.mul(k,N);Y=v.mul(Y,O),Y=v.add(Y,P),Y=v.mul(Y,O);let W=v.sqr(F);P=v.sqr(W),W=v.mul(W,F),W=v.mul(W,Y),P=v.mul(P,W);let Z=v.pow(P,ee);Z=v.mul(Z,W);let ae=v.mul(Z,J);P=v.sqr(Z),P=v.mul(P,F);let oe=v.eql(P,Y),fe=v.cmov(ae,Z,oe),_e=v.mul(O,k),Te=v.mul(Z,se);Te=v.mul(Te,z);let Ne=v.mul(Te,J),$e=v.mul(Y,k);P=v.sqr(Te),P=v.mul(P,F);let Ge=v.eql(P,$e),j=v.cmov(Ne,Te,Ge);P=v.sqr(fe),P=v.mul(P,F);let g=v.eql(P,Y),S=v.cmov(_e,O,g),K=v.cmov(j,fe,g),le=v.isOdd(K);return K=v.cmov(K,v.neg(K),g!==le),{xMn:S,xMd:B,yMn:K,yMd:f}}const pe=(()=>(0,a.FpSqrtEven)(v,v.neg(BigInt(486664))))();function Q(se){const{xMn:ee,xMd:N,yMn:k,yMd:B}=ce(se);let O=v.mul(ee,B);O=v.mul(O,pe);let P=v.mul(N,k),F=v.sub(ee,N),Y=v.add(ee,N),W=v.mul(P,Y),Z=v.eql(W,v.ZERO);O=v.cmov(O,v.ZERO,Z),P=v.cmov(P,v.ONE,Z),F=v.cmov(F,v.ONE,Z),Y=v.cmov(Y,v.ONE,Z);const ae=v.invertBatch([P,Y]);return{x:v.mul(O,ae[0]),y:v.mul(F,ae[1])}}const ue=(()=>(0,i.createHasher)(t.ed25519.ExtendedPoint,se=>Q(se[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:v.ORDER,m:1,k:128,expand:"xmd",hash:e.sha512}))();t.hashToCurve=(()=>ue.hashToCurve)(),t.encodeToCurve=(()=>ue.encodeToCurve)();function V(se){if(!(se instanceof ne))throw new Error("RistrettoPoint expected")}const H=d,R=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),C=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),A=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),L=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),$=se=>w(f,se),ie=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),q=se=>t.ed25519.CURVE.Fp.create((0,c.bytesToNumberLE)(se)&ie);function G(se){const{d:ee}=t.ed25519.CURVE,N=t.ed25519.CURVE.Fp.ORDER,k=t.ed25519.CURVE.Fp.create,B=k(H*se*se),O=k((B+f)*A);let P=BigInt(-1);const F=k((P-ee*B)*k(B+ee));let{isValid:Y,value:W}=w(O,F),Z=k(W*se);(0,a.isNegativeLE)(Z,N)||(Z=k(-Z)),Y||(W=Z),Y||(P=B);const ae=k(P*(B-f)*L-F),oe=W*W,fe=k((W+W)*F),_e=k(ae*R),Te=k(f-oe),Ne=k(f+oe);return new t.ed25519.ExtendedPoint(k(fe*Ne),k(Te*_e),k(_e*Ne),k(fe*Te))}class ne{constructor(ee){this.ep=ee}static fromAffine(ee){return new ne(t.ed25519.ExtendedPoint.fromAffine(ee))}static hashToCurve(ee){ee=(0,c.ensureBytes)("ristrettoHash",ee,64);const N=q(ee.slice(0,32)),k=G(N),B=q(ee.slice(32,64)),O=G(B);return new ne(k.add(O))}static fromHex(ee){ee=(0,c.ensureBytes)("ristrettoHex",ee,32);const{a:N,d:k}=t.ed25519.CURVE,B=t.ed25519.CURVE.Fp.ORDER,O=t.ed25519.CURVE.Fp.create,P="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",F=q(ee);if(!(0,c.equalBytes)((0,c.numberToBytesLE)(F,32),ee)||(0,a.isNegativeLE)(F,B))throw new Error(P);const Y=O(F*F),W=O(f+N*Y),Z=O(f-N*Y),ae=O(W*W),oe=O(Z*Z),fe=O(N*k*ae-oe),{isValid:_e,value:Te}=$(O(fe*oe)),Ne=O(Te*Z),$e=O(Te*Ne*fe);let Ge=O((F+F)*Ne);(0,a.isNegativeLE)(Ge,B)&&(Ge=O(-Ge));const j=O(W*$e),g=O(Ge*j);if(!_e||(0,a.isNegativeLE)(g,B)||j===h)throw new Error(P);return new ne(new t.ed25519.ExtendedPoint(Ge,j,f,g))}static msm(ee,N){const k=(0,a.Field)(t.ed25519.CURVE.n,t.ed25519.CURVE.nBitLength);return(0,r.pippenger)(ne,k,ee,N)}toRawBytes(){let{ex:ee,ey:N,ez:k,et:B}=this.ep;const O=t.ed25519.CURVE.Fp.ORDER,P=t.ed25519.CURVE.Fp.create,F=P(P(k+N)*P(k-N)),Y=P(ee*N),W=P(Y*Y),{value:Z}=$(P(F*W)),ae=P(Z*F),oe=P(Z*Y),fe=P(ae*oe*B);let _e;if((0,a.isNegativeLE)(B*fe,O)){let Ne=P(N*H),$e=P(ee*H);ee=Ne,N=$e,_e=P(ae*C)}else _e=oe;(0,a.isNegativeLE)(ee*fe,O)&&(N=P(-N));let Te=P((k-N)*_e);return(0,a.isNegativeLE)(Te,O)&&(Te=P(-Te)),(0,c.numberToBytesLE)(Te,32)}toHex(){return(0,c.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals(ee){V(ee);const{ex:N,ey:k}=this.ep,{ex:B,ey:O}=ee.ep,P=t.ed25519.CURVE.Fp.create,F=P(N*O)===P(k*B),Y=P(k*O)===P(N*B);return F||Y}add(ee){return V(ee),new ne(this.ep.add(ee.ep))}subtract(ee){return V(ee),new ne(this.ep.subtract(ee.ep))}multiply(ee){return new ne(this.ep.multiply(ee))}multiplyUnsafe(ee){return new ne(this.ep.multiplyUnsafe(ee))}double(){return new ne(this.ep.double())}negate(){return new ne(this.ep.negate())}}t.RistrettoPoint=(()=>(ne.BASE||(ne.BASE=new ne(t.ed25519.ExtendedPoint.BASE)),ne.ZERO||(ne.ZERO=new ne(t.ed25519.ExtendedPoint.ZERO)),ne))();const he=(se,ee)=>{const N=ee.DST,k=typeof N=="string"?(0,n.utf8ToBytes)(N):N,B=(0,i.expand_message_xmd)(se,k,64,e.sha512);return ne.hashToCurve(B)};t.hashToRistretto255=he,t.hash_to_ristretto255=t.hashToRistretto255})(XA);var WA=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pw,"__esModule",{value:!0});const q0=XA,G0=ft,Y0=WA(ud),FF=WA(sc),N1="ED",BF={deriveKeypair(t){const e=FF.default.half(t),n=N1+(0,G0.bytesToHex)(e),r=N1+(0,G0.bytesToHex)(q0.ed25519.getPublicKey(e));return{privateKey:n,publicKey:r}},sign(t,e){return Y0.default.ok(t instanceof Uint8Array,"message must be array of octets"),Y0.default.ok(e.length===66,"private key must be 33 bytes including prefix"),(0,G0.bytesToHex)(q0.ed25519.sign(t,e.slice(2)))},verify(t,e,n){return Y0.default.ok(n.length===66,"public key must be 33 bytes including prefix"),q0.ed25519.verify(e,t,n.slice(2),{zip215:!1})}};pw.default=BF;(function(t){var e=Ee&&Ee.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeSeed=t.deriveNodeAddress=t.deriveAddress=t.verify=t.sign=t.deriveKeypair=t.generateSeed=void 0;const n=er;Object.defineProperty(t,"decodeSeed",{enumerable:!0,get:function(){return n.decodeSeed}});const r=Ip,s=td,i=ft,a=ya,l=e(sc),c=e(ud),u=Gi,d=e(fw),h=e(pw);function f(T){return{"ecdsa-secp256k1":d.default,ed25519:h.default}[T]}function p(T={}){c.default.ok(!T.entropy||T.entropy.length>=16,"entropy too short");const E=T.entropy?T.entropy.slice(0,16):(0,i.randomBytes)(16),D=T.algorithm==="ed25519"?"ed25519":"secp256k1";return(0,n.encodeSeed)(E,D)}t.generateSeed=p;function y(T,E){var D;const te=(0,n.decodeSeed)(T),z=((D=E==null?void 0:E.algorithm)!==null&&D!==void 0?D:te.type)==="ed25519"?"ed25519":"ecdsa-secp256k1",J=f(z),ce=J.deriveKeypair(te.bytes,E),pe=l.default.half("This test message should verify."),Q=J.sign(pe,ce.privateKey);if(!J.verify(pe,Q,ce.publicKey))throw new Error("derived keypair did not generate verifiable signature");return ce}t.deriveKeypair=y;function b(T,E){const D=(0,u.getAlgorithmFromPrivateKey)(E);return f(D).sign((0,i.hexToBytes)(T),E)}t.sign=b;function _(T,E,D){const te=(0,u.getAlgorithmFromPublicKey)(D);return f(te).verify((0,i.hexToBytes)(T),E,D)}t.verify=_;function m(T){return(0,r.ripemd160)((0,s.sha256)(T))}function x(T){return(0,n.encodeAccountID)(m(T))}function w(T){return x((0,i.hexToBytes)(T))}t.deriveAddress=w;function v(T){const E=(0,n.decodeNodePublic)(T),D=(0,a.accountPublicFromPublicGenerator)(E);return x(D)}t.deriveNodeAddress=v})(bo);var KA={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.deriveXAddress=t.deriveAddress=t.deriveKeypair=void 0;const e=er,n=bo;Object.defineProperty(t,"deriveKeypair",{enumerable:!0,get:function(){return n.deriveKeypair}}),Object.defineProperty(t,"deriveAddress",{enumerable:!0,get:function(){return n.deriveAddress}});function r(s){const i=(0,n.deriveAddress)(s.publicKey);return(0,e.classicAddressToXAddress)(i,s.tag,s.test)}t.deriveXAddress=r})(KA);var xw={},va={};Object.defineProperty(va,"__esModule",{value:!0});va.omitBy=va.groupBy=void 0;function $F(t,e){function n(r,s,i,a){const l=e(s,i,a)||0,c=r[l]||[];return c.push(s),r[l]=c,r}return t.reduce(n,{})}va.groupBy=$F;function UF(t,e){return Object.keys(t).filter(s=>!e(t[s],s)).reduce((s,i)=>(s[i]=t[i],s),{})}va.omitBy=UF;var si={},VF=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(si,"__esModule",{value:!0});si.xrpToDrops=si.dropsToXrp=void 0;const ou=VF(tr),ea=Me,qA=1e6,zF=6,py=10,GA=/^-?[0-9.]+$/u;function HF(t){const e=new ou.default(t).toString(py);if(typeof t=="string"&&e==="NaN")throw new ea.ValidationError(`dropsToXrp: invalid value '${t}', should be a BigNumber or string-encoded number.`);if(e.includes("."))throw new ea.ValidationError(`dropsToXrp: value '${e}' has too many decimal places.`);if(!GA.exec(e))throw new ea.ValidationError(`dropsToXrp: failed sanity check - value '${e}', does not match (^-?[0-9]+$).`);return new ou.default(e).dividedBy(qA).toNumber()}si.dropsToXrp=HF;function XF(t){const e=new ou.default(t).toString(py);if(typeof t=="string"&&e==="NaN")throw new ea.ValidationError(`xrpToDrops: invalid value '${t}', should be a BigNumber or string-encoded number.`);if(!GA.exec(e))throw new ea.ValidationError(`xrpToDrops: failed sanity check - value '${e}', does not match (^-?[0-9.]+$).`);const n=e.split(".");if(n.length>2)throw new ea.ValidationError(`xrpToDrops: failed sanity check - value '${e}' has too many decimal points.`);if((n[1]||"0").length>zF)throw new ea.ValidationError(`xrpToDrops: value '${e}' has too many decimal places.`);return new ou.default(e).times(qA).integerValue(ou.default.ROUND_FLOOR).toString(py)}si.xrpToDrops=XF;var WF=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xw,"__esModule",{value:!0});const my=WF(tr),KF=va,qF=si;function GF(t){const e=Object.keys(t)[0],n=t[e];return Object.assign(Object.assign({},n),{NodeType:e,LedgerEntryType:n.LedgerEntryType,LedgerIndex:n.LedgerIndex,NewFields:n.NewFields,FinalFields:n.FinalFields,PreviousFields:n.PreviousFields})}function YF(t){return t.AffectedNodes.length===0?[]:t.AffectedNodes.map(GF)}function JF(t){const e=(0,KF.groupBy)(t,n=>n.account);return Object.entries(e).map(([n,r])=>({account:n,balances:r.map(s=>s.balance)}))}function J0(t){return typeof t=="string"?new my.default(t):new my.default(t.value)}function YA(t){var e,n,r;let s=null;return!((e=t.NewFields)===null||e===void 0)&&e.Balance?s=J0(t.NewFields.Balance):!((n=t.PreviousFields)===null||n===void 0)&&n.Balance&&(!((r=t.FinalFields)===null||r===void 0)&&r.Balance)&&(s=J0(t.FinalFields.Balance).minus(J0(t.PreviousFields.Balance))),s===null||s.isZero()?null:s}function QF(t){var e,n,r;const s=YA(t);return s===null?null:{account:(n=(e=t.FinalFields)===null||e===void 0?void 0:e.Account)!==null&&n!==void 0?n:(r=t.NewFields)===null||r===void 0?void 0:r.Account,balance:{currency:"XRP",value:(0,qF.dropsToXrp)(s).toString()}}}function ZF(t){const e=new my.default(t.balance.value).negated();return{account:t.balance.issuer,balance:{issuer:t.account,currency:t.balance.currency,value:e.toString()}}}function eB(t){var e,n;const r=YA(t);if(r===null)return null;const s=t.NewFields==null?t.FinalFields:t.NewFields,i={account:(e=s==null?void 0:s.LowLimit)===null||e===void 0?void 0:e.issuer,balance:{issuer:(n=s==null?void 0:s.HighLimit)===null||n===void 0?void 0:n.issuer,currency:(s==null?void 0:s.Balance).currency,value:r.toString()}};return[i,ZF(i)]}function tB(t){const e=YF(t).map(n=>{if(n.LedgerEntryType==="AccountRoot"){const r=QF(n);return r==null?[]:[r]}if(n.LedgerEntryType==="RippleState"){const r=eB(n);return r??[]}return[]});return JF(e.flat())}xw.default=tB;var yw={},Cs={};Object.defineProperty(Cs,"__esModule",{value:!0});Cs.isDeletedNode=Cs.isModifiedNode=Cs.isCreatedNode=void 0;function nB(t){return Object.prototype.hasOwnProperty.call(t,"CreatedNode")}Cs.isCreatedNode=nB;function rB(t){return Object.prototype.hasOwnProperty.call(t,"ModifiedNode")}Cs.isModifiedNode=rB;function sB(t){return Object.prototype.hasOwnProperty.call(t,"DeletedNode")}Cs.isDeletedNode=sB;Object.defineProperty(yw,"__esModule",{value:!0});const iB=Ir,Q0=Cs;function oB(t){return typeof t=="string"?(0,iB.decode)(t):t}function aB(t){if(typeof t!="string"&&(t==null?void 0:t.AffectedNodes)===void 0)throw new TypeError(`Unable to parse the parameter given to getNFTokenID.
      'meta' must be the metadata from an NFTokenMint transaction. Received ${JSON.stringify(t)} instead.`);const n=oB(t).AffectedNodes.filter(a=>{var l;return(0,Q0.isCreatedNode)(a)?a.CreatedNode.LedgerEntryType==="NFTokenPage":(0,Q0.isModifiedNode)(a)?a.ModifiedNode.LedgerEntryType==="NFTokenPage"&&!!(!((l=a.ModifiedNode.PreviousFields)===null||l===void 0)&&l.NFTokens):!1}),r=new Set(n.flatMap(a=>{var l;return((0,Q0.isModifiedNode)(a)?(l=a.ModifiedNode.PreviousFields)===null||l===void 0?void 0:l.NFTokens:[]).map(u=>u.NFToken.NFTokenID)}).filter(a=>!!a));return n.flatMap(a=>{var l,c,u,d,h,f;return((f=(u=(c=(l=a.ModifiedNode)===null||l===void 0?void 0:l.FinalFields)===null||c===void 0?void 0:c.NFTokens)!==null&&u!==void 0?u:(h=(d=a.CreatedNode)===null||d===void 0?void 0:d.NewFields)===null||h===void 0?void 0:h.NFTokens)!==null&&f!==void 0?f:[]).map(p=>p.NFToken.NFTokenID)}).filter(a=>!!a).find(a=>!r.has(a))}yw.default=aB;var vw={};Object.defineProperty(vw,"__esModule",{value:!0});const lB=Ir,cB=Cs;function uB(t){return typeof t=="string"?(0,lB.decode)(t):t}function dB(t){if(typeof t!="string"&&(t==null?void 0:t.AffectedNodes)===void 0)throw new TypeError(`Unable to parse the parameter given to getXChainClaimID.
      'meta' must be the metadata from an XChainCreateClaimID transaction. Received ${JSON.stringify(t)} instead.`);const e=uB(t);if(!e.TransactionResult)throw new TypeError("Cannot get XChainClaimID from un-validated transaction");return e.TransactionResult!=="tesSUCCESS"?void 0:e.AffectedNodes.find(r=>(0,cB.isCreatedNode)(r)&&r.CreatedNode.LedgerEntryType==="XChainOwnedClaimID").CreatedNode.NewFields.XChainClaimID}vw.default=dB;var JA={},Ar={},ic={};Object.defineProperty(ic,"__esModule",{value:!0});var gy;(function(t){t[t.TRANSACTION_ID=1415073280]="TRANSACTION_ID",t[t.TRANSACTION_NODE=1397638144]="TRANSACTION_NODE",t[t.INNER_NODE=1296649728]="INNER_NODE",t[t.LEAF_NODE=1296846336]="LEAF_NODE",t[t.TRANSACTION_SIGN=1398036480]="TRANSACTION_SIGN",t[t.TRANSACTION_SIGN_TESTNET=1937012736]="TRANSACTION_SIGN_TESTNET",t[t.TRANSACTION_MULTISIGN=1397576704]="TRANSACTION_MULTISIGN",t[t.LEDGER=1280791040]="LEDGER"})(gy||(gy={}));ic.default=gy;var oc={};Object.defineProperty(oc,"__esModule",{value:!0});const hB=rc,T1=ft,fB=32;function pB(t){return(0,T1.bytesToHex)((0,hB.sha512)((0,T1.hexToBytes)(t)).slice(0,fB))}oc.default=pB;var QA={},ww={},Vp={},ho={};Object.defineProperty(ho,"__esModule",{value:!0});ho.Node=ho.NodeType=void 0;var A1;(function(t){t[t.INNER=1]="INNER",t[t.TRANSACTION_NO_METADATA=2]="TRANSACTION_NO_METADATA",t[t.TRANSACTION_METADATA=3]="TRANSACTION_METADATA",t[t.ACCOUNT_STATE=4]="ACCOUNT_STATE"})(A1||(ho.NodeType=A1={}));class mB{}ho.Node=mB;var ZA=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Vp,"__esModule",{value:!0});const C1=Me,Z0=ZA(ic),eg=ZA(oc),th=ho,tg=16;class gB extends th.Node{constructor(e,n,r){super(),this.tag=e,this.type=r,this.data=n}get hash(){switch(this.type){case th.NodeType.ACCOUNT_STATE:{const e=Z0.default.LEAF_NODE.toString(tg);return(0,eg.default)(e+this.data+this.tag)}case th.NodeType.TRANSACTION_NO_METADATA:{const e=Z0.default.TRANSACTION_ID.toString(tg);return(0,eg.default)(e+this.data)}case th.NodeType.TRANSACTION_METADATA:{const e=Z0.default.TRANSACTION_NODE.toString(tg);return(0,eg.default)(e+this.data+this.tag)}default:throw new C1.XrplError("Tried to hash a SHAMap node of unknown type.")}}addItem(e,n){throw new C1.XrplError("Cannot call addItem on a LeafNode")}}Vp.default=gB;var bw=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ww,"__esModule",{value:!0});const ng=Me,xB=bw(ic),yB=bw(oc),vB=bw(Vp),j1=ho,k1="0000000000000000000000000000000000000000000000000000000000000000",rg=15,nh=16;class Pf extends j1.Node{constructor(e=0){super(),this.leaves={},this.type=j1.NodeType.INNER,this.depth=e,this.empty=!0}get hash(){if(this.empty)return k1;let e="";for(let r=0;r<=rg;r++){const s=this.leaves[r],i=s==null?k1:s.hash;e+=i}const n=xB.default.INNER_NODE.toString(nh);return(0,yB.default)(n+e)}addItem(e,n){const r=this.getNode(parseInt(e[this.depth],nh));if(r===void 0){this.setNode(parseInt(e[this.depth],nh),n);return}if(r instanceof Pf)r.addItem(e,n);else if(r instanceof vB.default){if(r.tag===e)throw new ng.XrplError("Tried to add a node to a SHAMap that was already in there.");{const s=new Pf(this.depth+1);s.addItem(r.tag,r),s.addItem(e,n),this.setNode(parseInt(e[this.depth],nh),s)}}}setNode(e,n){if(e<0||e>rg)throw new ng.XrplError("Invalid slot: slot must be between 0-15.");this.leaves[e]=n,this.empty=!1}getNode(e){if(e<0||e>rg)throw new ng.XrplError("Invalid slot: slot must be between 0-15.");return this.leaves[e]}}ww.default=Pf;(function(t){var e=Ee&&Ee.__createBinding||(Object.create?function(l,c,u,d){d===void 0&&(d=u);var h=Object.getOwnPropertyDescriptor(c,u);(!h||("get"in h?!c.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(l,d,h)}:function(l,c,u,d){d===void 0&&(d=u),l[d]=c[u]}),n=Ee&&Ee.__exportStar||function(l,c){for(var u in l)u!=="default"&&!Object.prototype.hasOwnProperty.call(c,u)&&e(c,l,u)},r=Ee&&Ee.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(ww),i=r(Vp);class a{constructor(){this.root=new s.default(0)}get hash(){return this.root.hash}addItem(c,u,d){this.root.addItem(c,new i.default(c,u,d))}}n(ho,t),t.default=a})(QA);var wB=Ee&&Ee.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var s=Object.getOwnPropertyDescriptor(e,n);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,s)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),bB=Ee&&Ee.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),_B=Ee&&Ee.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&wB(e,t,n);return bB(e,t),e},_w=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ar,"__esModule",{value:!0});Ar.hashStateTree=Ar.hashTxTree=Ar.hashLedgerHeader=Ar.hashSignedTx=void 0;const sg=ft,EB=_w(tr),Fu=Ir,Ul=Me,eC=_w(ic),tC=_w(oc),If=_B(QA),Ew=16;function Nc(t,e){return Number(t).toString(Ew).padStart(e*2,"0")}function SB(t,e){return new EB.default(t).toString(Ew).padStart(e*2,"0")}function O1(t){const e=t.length/2;if(e<=192)return(0,sg.bytesToHex)([e])+t;if(e<=12480){const n=e-193;return(0,sg.bytesToHex)([193+(n>>>8),n&255])+t}if(e<=918744){const n=e-12481;return(0,sg.bytesToHex)([241+(n>>>16),n>>>8&255,n&255])+t}throw new Ul.XrplError("Variable integer overflow.")}function nC(t){let e,n;if(typeof t=="string"?(e=t,n=(0,Fu.decode)(t)):(e=(0,Fu.encode)(t),n=t),n.TxnSignature===void 0&&n.Signers===void 0&&n.SigningPubKey===void 0)throw new Ul.ValidationError("The transaction must be signed to hash it.");const r=eC.default.TRANSACTION_ID.toString(16).toUpperCase();return(0,tC.default)(r.concat(e))}Ar.hashSignedTx=nC;function rC(t){const n=eC.default.LEDGER.toString(Ew).toUpperCase()+Nc(Number(t.ledger_index),4)+SB(t.total_coins,8)+t.parent_hash+t.transaction_hash+t.account_hash+Nc(t.parent_close_time,4)+Nc(t.close_time,4)+Nc(t.close_time_resolution,1)+Nc(t.close_flags,1);return(0,tC.default)(n)}Ar.hashLedgerHeader=rC;function sC(t){var e;const n=new If.default;for(const r of t){const s=(0,Fu.encode)(r),i=(0,Fu.encode)((e=r.metaData)!==null&&e!==void 0?e:{}),a=nC(s),l=O1(s)+O1(i);n.addItem(a,l,If.NodeType.TRANSACTION_METADATA)}return n.hash}Ar.hashTxTree=sC;function iC(t){const e=new If.default;return t.forEach(n=>{const r=(0,Fu.encode)(n);e.addItem(n.index,r,If.NodeType.ACCOUNT_STATE)}),e.hash}Ar.hashStateTree=iC;function NB(t,e){const{transaction_hash:n}=t;if(!e.computeTreeHashes)return n;if(t.transactions==null)throw new Ul.ValidationError("transactions is missing from the ledger");const r=sC(t.transactions);if(n!==r)throw new Ul.ValidationError("transactionHash in header does not match computed hash of transactions",{transactionHashInHeader:n,computedHashOfTransactions:r});return r}function TB(t,e){const{account_hash:n}=t;if(!e.computeTreeHashes)return n;if(t.accountState==null)throw new Ul.ValidationError("accountState is missing from the ledger");const r=iC(t.accountState);if(n!==r)throw new Ul.ValidationError("stateHash in header does not match computed hash of state");return r}function AB(t,e={}){const n={transaction_hash:NB(t,e),account_hash:TB(t,e)};return rC(Object.assign(Object.assign({},t),n))}Ar.default=AB;var Sw={};Object.defineProperty(Sw,"__esModule",{value:!0});const CB={account:"a",dirNode:"d",generatorMap:"g",rippleState:"r",offer:"o",ownerDir:"O",bookDir:"B",contract:"c",skipList:"s",escrow:"u",amendment:"f",feeSettings:"e",ticket:"T",signerList:"S",paychan:"x",check:"C",depositPreauth:"p"};Sw.default=CB;(function(t){var e=Ee&&Ee.__createBinding||(Object.create?function(re,z,J,ce){ce===void 0&&(ce=J);var pe=Object.getOwnPropertyDescriptor(z,J);(!pe||("get"in pe?!z.__esModule:pe.writable||pe.configurable))&&(pe={enumerable:!0,get:function(){return z[J]}}),Object.defineProperty(re,ce,pe)}:function(re,z,J,ce){ce===void 0&&(ce=J),re[ce]=z[J]}),n=Ee&&Ee.__setModuleDefault||(Object.create?function(re,z){Object.defineProperty(re,"default",{enumerable:!0,value:z})}:function(re,z){re.default=z}),r=Ee&&Ee.__importStar||function(re){if(re&&re.__esModule)return re;var z={};if(re!=null)for(var J in re)J!=="default"&&Object.prototype.hasOwnProperty.call(re,J)&&e(z,re,J);return n(z,re),z},s=Ee&&Ee.__importDefault||function(re){return re&&re.__esModule?re:{default:re}};Object.defineProperty(t,"__esModule",{value:!0}),t.hashTxTree=t.hashStateTree=t.hashLedger=t.hashSignedTx=t.hashLedgerHeader=t.hashPaymentChannel=t.hashEscrow=t.hashTrustline=t.hashOfferId=t.hashSignerListId=t.hashAccountRoot=t.hashTx=void 0;const i=ft,a=s(tr),l=er,c=r(Ar);t.hashLedger=c.default,Object.defineProperty(t,"hashLedgerHeader",{enumerable:!0,get:function(){return c.hashLedgerHeader}}),Object.defineProperty(t,"hashSignedTx",{enumerable:!0,get:function(){return c.hashSignedTx}}),Object.defineProperty(t,"hashTxTree",{enumerable:!0,get:function(){return c.hashTxTree}}),Object.defineProperty(t,"hashStateTree",{enumerable:!0,get:function(){return c.hashStateTree}});const u=s(ic),d=s(Sw),h=s(oc),f=16,p=4;function y(re){return(0,i.bytesToHex)((0,l.decodeAccountID)(re))}function b(re){return d.default[re].charCodeAt(0).toString(f).padStart(4,"0")}const _=255;function m(re){if(re.length!==3)return re;const z=Array(20).fill(0);return z[12]=re.charCodeAt(0)&_,z[13]=re.charCodeAt(1)&_,z[14]=re.charCodeAt(2)&_,(0,i.bytesToHex)(Uint8Array.from(z))}function x(re){const z=u.default.TRANSACTION_SIGN.toString(f).toUpperCase();return(0,h.default)(z+re)}t.hashTx=x;function w(re){return(0,h.default)(b("account")+y(re))}t.hashAccountRoot=w;function v(re){return(0,h.default)(`${b("signerList")+y(re)}00000000`)}t.hashSignerListId=v;function T(re,z){const J=d.default.offer.charCodeAt(0).toString(f).padStart(2,"0"),ce=z.toString(f).padStart(8,"0"),pe=`00${J}`;return(0,h.default)(pe+y(re)+ce)}t.hashOfferId=T;function E(re,z,J){const ce=y(re),pe=y(z),Q=new a.default(ce,16).isGreaterThan(new a.default(pe,16)),ue=Q?pe:ce,V=Q?ce:pe,H=b("rippleState");return(0,h.default)(H+ue+V+m(J))}t.hashTrustline=E;function D(re,z){return(0,h.default)(b("escrow")+y(re)+z.toString(f).padStart(p*2,"0"))}t.hashEscrow=D;function te(re,z,J){return(0,h.default)(b("paychan")+y(re)+y(z)+J.toString(f).padStart(p*2,"0"))}t.hashPaymentChannel=te})(JA);var Nw={},jB=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Nw,"__esModule",{value:!0});const kB=ft,Vc=jB(tr),OB=er,PB=Me;function IB(t,e){const i=new Vc.default(384160001).multipliedBy(e).modulo(4294967296).plus(2459).modulo(4294967296).toNumber();return(t^i)>>>0}function RB(t){if(t.length!==64)throw new PB.XrplError(`Attempting to parse a nftokenID with length ${t.length}
    , but expected a token with length 64`);const n=new Vc.default(t.substring(48,56),16).toNumber(),r=new Vc.default(t.substring(56,64),16).toNumber();return{NFTokenID:t,Flags:new Vc.default(t.substring(0,4),16).toNumber(),TransferFee:new Vc.default(t.substring(4,8),16).toNumber(),Issuer:(0,OB.encodeAccountID)((0,kB.hexToBytes)(t.substring(8,48))),Taxon:IB(n,r),Sequence:r}}Nw.default=RB;var Wn={},LB=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wn,"__esModule",{value:!0});Wn.percentToQuality=Wn.transferRateToDecimal=Wn.qualityToDecimal=Wn.decimalToQuality=Wn.percentToTransferRate=Wn.decimalToTransferRate=void 0;const dd=LB(tr),jr=Me,hd=10,Xs="1000000000",MB="2000000000";function oC(t){if(!t.endsWith("%"))throw new jr.ValidationError(`Value ${t} must end with %`);const e=t.split("%").filter(n=>n!=="");if(e.length!==1)throw new jr.ValidationError(`Value ${t} contains too many % signs`);return new dd.default(e[0]).dividedBy("100").toString(hd)}function aC(t){const e=new dd.default(t).times(Xs).plus(Xs);if(e.isLessThan(Xs)||e.isGreaterThan(MB))throw new jr.ValidationError("Decimal value must be between 0 and 1.00.");const n=e.toString(hd);if(n===Xs)return 0;if(n==="NaN")throw new jr.ValidationError("Value is not a number");if(n.includes("."))throw new jr.ValidationError("Decimal exceeds maximum precision.");return Number(n)}Wn.decimalToTransferRate=aC;function DB(t){return aC(oC(t))}Wn.percentToTransferRate=DB;function lC(t){const n=new dd.default(t).times(Xs).toString(hd);if(n==="NaN")throw new jr.ValidationError("Value is not a number");if(n.includes("-"))throw new jr.ValidationError("Cannot have negative Quality");if(n===Xs)return 0;if(n.includes("."))throw new jr.ValidationError("Decimal exceeds maximum precision.");return Number(n)}Wn.decimalToQuality=lC;function FB(t){if(!Number.isInteger(t))throw new jr.ValidationError("Quality must be an integer");if(t<0)throw new jr.ValidationError("Negative quality not allowed");return t===0?"1":new dd.default(t).dividedBy(Xs).toString(hd)}Wn.qualityToDecimal=FB;function BB(t){if(!Number.isInteger(t))throw new jr.ValidationError("Error decoding, transfer Rate must be an integer");if(t===0)return"0";const e=new dd.default(t).minus(Xs).dividedBy(Xs);if(e.isLessThan(0))throw new jr.ValidationError("Error decoding, negative transfer rate");return e.toString(hd)}Wn.transferRateToDecimal=BB;function $B(t){return lC(oC(t))}Wn.percentToQuality=$B;var Tw={};Object.defineProperty(Tw,"__esModule",{value:!0});const UB=Ir,VB=bo,zB=si;function HB(t,e,n){const r=(0,UB.encodeForSigningClaim)({channel:t,amount:(0,zB.xrpToDrops)(e)});return(0,VB.sign)(r,n)}Tw.default=HB;var Vl={};Object.defineProperty(Vl,"__esModule",{value:!0});Vl.convertStringToHex=Vl.convertHexToString=void 0;const cC=ft;function XB(t){return(0,cC.stringToHex)(t)}Vl.convertStringToHex=XB;function WB(t,e="utf8"){return(0,cC.hexToString)(t,e)}Vl.convertHexToString=WB;var _s={};Object.defineProperty(_s,"__esModule",{value:!0});_s.isoTimeToRippleTime=_s.rippleTimeToISOTime=_s.unixTimeToRippleTime=_s.rippleTimeToUnixTime=void 0;const uC=946684800;function dC(t){return(t+uC)*1e3}_s.rippleTimeToUnixTime=dC;function hC(t){return Math.round(t/1e3)-uC}_s.unixTimeToRippleTime=hC;function KB(t){return new Date(dC(t)).toISOString()}_s.rippleTimeToISOTime=KB;function qB(t){const e=typeof t=="string"?new Date(t):t;return hC(e.getTime())}_s.isoTimeToRippleTime=qB;var Aw={};Object.defineProperty(Aw,"__esModule",{value:!0});const GB=Ir,YB=bo,JB=si;function QB(t,e,n,r){const s=(0,GB.encodeForSigningClaim)({channel:t,amount:(0,JB.xrpToDrops)(e)});return(0,YB.verify)(s,n,r)}Aw.default=QB;(function(t){var e=Ee&&Ee.__importDefault||function(z){return z&&z.__esModule?z:{default:z}};Object.defineProperty(t,"__esModule",{value:!0}),t.getXChainClaimID=t.parseNFTokenID=t.getNFTokenID=t.encodeForSigningClaim=t.encodeForSigning=t.encodeForMultiSigning=t.decode=t.encode=t.decodeXAddress=t.encodeXAddress=t.decodeAccountPublic=t.encodeAccountPublic=t.decodeNodePublic=t.encodeNodePublic=t.decodeAccountID=t.encodeAccountID=t.decodeSeed=t.encodeSeed=t.isValidClassicAddress=t.isValidXAddress=t.xAddressToClassicAddress=t.classicAddressToXAddress=t.convertHexToString=t.convertStringToHex=t.verifyPaymentChannelClaim=t.verifyKeypairSignature=t.signPaymentChannelClaim=t.deriveXAddress=t.deriveAddress=t.deriveKeypair=t.hashes=t.isValidAddress=t.isValidSecret=t.qualityToDecimal=t.transferRateToDecimal=t.decimalToTransferRate=t.percentToTransferRate=t.decimalToQuality=t.percentToQuality=t.unixTimeToRippleTime=t.rippleTimeToUnixTime=t.isoTimeToRippleTime=t.rippleTimeToISOTime=t.hasNextPage=t.xrpToDrops=t.dropsToXrp=t.getBalanceChanges=void 0;const n=er;Object.defineProperty(t,"classicAddressToXAddress",{enumerable:!0,get:function(){return n.classicAddressToXAddress}}),Object.defineProperty(t,"decodeAccountID",{enumerable:!0,get:function(){return n.decodeAccountID}}),Object.defineProperty(t,"decodeAccountPublic",{enumerable:!0,get:function(){return n.decodeAccountPublic}}),Object.defineProperty(t,"decodeNodePublic",{enumerable:!0,get:function(){return n.decodeNodePublic}}),Object.defineProperty(t,"decodeSeed",{enumerable:!0,get:function(){return n.decodeSeed}}),Object.defineProperty(t,"decodeXAddress",{enumerable:!0,get:function(){return n.decodeXAddress}}),Object.defineProperty(t,"encodeAccountID",{enumerable:!0,get:function(){return n.encodeAccountID}}),Object.defineProperty(t,"encodeAccountPublic",{enumerable:!0,get:function(){return n.encodeAccountPublic}}),Object.defineProperty(t,"encodeNodePublic",{enumerable:!0,get:function(){return n.encodeNodePublic}}),Object.defineProperty(t,"encodeSeed",{enumerable:!0,get:function(){return n.encodeSeed}}),Object.defineProperty(t,"encodeXAddress",{enumerable:!0,get:function(){return n.encodeXAddress}}),Object.defineProperty(t,"isValidClassicAddress",{enumerable:!0,get:function(){return n.isValidClassicAddress}}),Object.defineProperty(t,"isValidXAddress",{enumerable:!0,get:function(){return n.isValidXAddress}}),Object.defineProperty(t,"xAddressToClassicAddress",{enumerable:!0,get:function(){return n.xAddressToClassicAddress}});const r=Ir,s=bo;Object.defineProperty(t,"verifyKeypairSignature",{enumerable:!0,get:function(){return s.verify}});const i=KA;Object.defineProperty(t,"deriveKeypair",{enumerable:!0,get:function(){return i.deriveKeypair}}),Object.defineProperty(t,"deriveAddress",{enumerable:!0,get:function(){return i.deriveAddress}}),Object.defineProperty(t,"deriveXAddress",{enumerable:!0,get:function(){return i.deriveXAddress}});const a=e(xw);t.getBalanceChanges=a.default;const l=e(yw);t.getNFTokenID=l.default;const c=e(vw);t.getXChainClaimID=c.default;const u=JA,d=e(Nw);t.parseNFTokenID=d.default;const h=Wn;Object.defineProperty(t,"percentToTransferRate",{enumerable:!0,get:function(){return h.percentToTransferRate}}),Object.defineProperty(t,"decimalToTransferRate",{enumerable:!0,get:function(){return h.decimalToTransferRate}}),Object.defineProperty(t,"transferRateToDecimal",{enumerable:!0,get:function(){return h.transferRateToDecimal}}),Object.defineProperty(t,"percentToQuality",{enumerable:!0,get:function(){return h.percentToQuality}}),Object.defineProperty(t,"decimalToQuality",{enumerable:!0,get:function(){return h.decimalToQuality}}),Object.defineProperty(t,"qualityToDecimal",{enumerable:!0,get:function(){return h.qualityToDecimal}});const f=e(Tw);t.signPaymentChannelClaim=f.default;const p=Vl;Object.defineProperty(t,"convertHexToString",{enumerable:!0,get:function(){return p.convertHexToString}}),Object.defineProperty(t,"convertStringToHex",{enumerable:!0,get:function(){return p.convertStringToHex}});const y=_s;Object.defineProperty(t,"rippleTimeToISOTime",{enumerable:!0,get:function(){return y.rippleTimeToISOTime}}),Object.defineProperty(t,"isoTimeToRippleTime",{enumerable:!0,get:function(){return y.isoTimeToRippleTime}}),Object.defineProperty(t,"rippleTimeToUnixTime",{enumerable:!0,get:function(){return y.rippleTimeToUnixTime}}),Object.defineProperty(t,"unixTimeToRippleTime",{enumerable:!0,get:function(){return y.unixTimeToRippleTime}});const b=e(Aw);t.verifyPaymentChannelClaim=b.default;const _=si;Object.defineProperty(t,"xrpToDrops",{enumerable:!0,get:function(){return _.xrpToDrops}}),Object.defineProperty(t,"dropsToXrp",{enumerable:!0,get:function(){return _.dropsToXrp}});function m(z){try{return(0,i.deriveKeypair)(z),!0}catch{return!1}}t.isValidSecret=m;function x(z){return(0,r.encode)(z)}t.encode=x;function w(z){return(0,r.encodeForSigning)(z)}t.encodeForSigning=w;function v(z){return(0,r.encodeForSigningClaim)(z)}t.encodeForSigningClaim=v;function T(z,J){return(0,r.encodeForMultisigning)(z,J)}t.encodeForMultiSigning=T;function E(z){return(0,r.decode)(z)}t.decode=E;function D(z){return(0,n.isValidXAddress)(z)||(0,n.isValidClassicAddress)(z)}t.isValidAddress=D;function te(z){return!!z.result.marker}t.hasNextPage=te;const re={hashSignedTx:u.hashSignedTx,hashTx:u.hashTx,hashAccountRoot:u.hashAccountRoot,hashSignerListId:u.hashSignerListId,hashOfferId:u.hashOfferId,hashTrustline:u.hashTrustline,hashTxTree:u.hashTxTree,hashStateTree:u.hashStateTree,hashLedger:u.hashLedger,hashLedgerHeader:u.hashLedgerHeader,hashEscrow:u.hashEscrow,hashPaymentChannel:u.hashPaymentChannel};t.hashes=re})(Pp);var Cw={},ZB=Ee&&Ee.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})},e5=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cw,"__esModule",{value:!0});const ig=e5(tr),t5=Me,n5=6,r5=10;function s5(t,e){var n;return ZB(this,void 0,void 0,function*(){const r=e??t.feeCushion,s=(yield t.request({command:"server_info"})).result.info,i=(n=s.validated_ledger)===null||n===void 0?void 0:n.base_fee_xrp;if(i==null)throw new t5.XrplError("getFeeXrp: Could not get base_fee_xrp from server_info");const a=new ig.default(i);s.load_factor==null&&(s.load_factor=1);let l=a.times(s.load_factor).times(r);return l=ig.default.min(l,t.maxFeeXRP),new ig.default(l.toFixed(n5)).toString(r5)})}Cw.default=s5;var fd=Ee&&Ee.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})},fC=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xn,"__esModule",{value:!0});Xn.checkAccountDeleteBlockers=Xn.setLatestValidatedLedgerSequence=Xn.calculateFeePerTransactionType=Xn.setNextValidSequenceNumber=Xn.setValidAddresses=Xn.txNeedsNetworkID=void 0;const Ai=fC(tr),P1=er,jw=Me,I1=Pp,i5=fC(Cw),o5=20,a5=1024,l5="1.11.0";function c5(t,e){if(t===e)return!0;const n=t.split("."),r=e.split("."),s=parseInt(n[0],10),i=parseInt(n[1],10),a=parseInt(r[0],10),l=parseInt(r[1],10);if(s!==a)return s<a;if(i!==l)return i<l;const c=n[2].split("-"),u=r[2].split("-"),d=parseInt(c[0],10),h=parseInt(u[0],10);return d!==h?d<h:c.length!==u.length?c.length>u.length:c.length===2?c[1][0].startsWith(u[1][0])?c[1].startsWith("b")?parseInt(c[1].slice(1),10)<parseInt(u[1].slice(1),10):parseInt(c[1].slice(2),10)<parseInt(u[1].slice(2),10):c[1]<u[1]:!1}function u5(t){return!!(t.networkID!==void 0&&t.networkID>a5&&t.buildVersion&&c5(l5,t.buildVersion))}Xn.txNeedsNetworkID=u5;function d5(t){R1(t,"Account","SourceTag"),t.Destination!=null&&R1(t,"Destination","DestinationTag"),rh(t,"Authorize"),rh(t,"Unauthorize"),rh(t,"Owner"),rh(t,"RegularKey")}Xn.setValidAddresses=d5;function R1(t,e,n){const{classicAccount:r,tag:s}=pC(t[e]);if(t[e]=r,s!=null&&s!==!1){if(t[n]&&t[n]!==s)throw new jw.ValidationError(`The ${n}, if present, must match the tag of the ${e} X-address`);t[n]=s}}function pC(t,e){if((0,P1.isValidXAddress)(t)){const n=(0,P1.xAddressToClassicAddress)(t);if(e!=null&&n.tag!==e)throw new jw.ValidationError("address includes a tag that does not match the tag specified in the transaction");return{classicAccount:n.classicAddress,tag:n.tag}}return{classicAccount:t,tag:e}}function rh(t,e){const n=t[e];if(typeof n=="string"){const{classicAccount:r}=pC(n);t[e]=r}}function h5(t,e){return fd(this,void 0,void 0,function*(){const n={command:"account_info",account:e.Account,ledger_index:"current"},r=yield t.request(n);e.Sequence=r.result.account_data.Sequence})}Xn.setNextValidSequenceNumber=h5;function f5(t){var e;return fd(this,void 0,void 0,function*(){const r=(e=(yield t.request({command:"server_state"})).result.state.validated_ledger)===null||e===void 0?void 0:e.reserve_inc;return r==null?Promise.reject(new Error("Could not fetch Owner Reserve.")):new Ai.default(r)})}function p5(t,e,n=0){return fd(this,void 0,void 0,function*(){const r=yield(0,i5.default)(t),s=(0,I1.xrpToDrops)(r);let i=new Ai.default(s);if(e.TransactionType==="EscrowFinish"&&e.Fulfillment!=null){const c=Math.ceil(e.Fulfillment.length/2);i=new Ai.default(L1(s,33+c/16)).dp(0,Ai.default.ROUND_CEIL)}(e.TransactionType==="AccountDelete"||e.TransactionType==="AMMCreate")&&(i=yield f5(t)),n>0&&(i=Ai.default.sum(i,L1(s,1+n)));const a=(0,I1.xrpToDrops)(t.maxFeeXRP),l=e.TransactionType==="AccountDelete"?i:Ai.default.min(i,a);e.Fee=l.dp(0,Ai.default.ROUND_CEIL).toString(10)})}Xn.calculateFeePerTransactionType=p5;function L1(t,e){return new Ai.default(t).times(e).toString()}function m5(t,e){return fd(this,void 0,void 0,function*(){const n=yield t.getLedgerIndex();e.LastLedgerSequence=n+o5})}Xn.setLatestValidatedLedgerSequence=m5;function g5(t,e){return fd(this,void 0,void 0,function*(){const n={command:"account_objects",account:e.Account,ledger_index:"validated",deletion_blockers_only:!0},r=yield t.request(n);return new Promise((s,i)=>{r.result.account_objects.length>0&&i(new jw.XrplError(`Account ${e.Account} cannot be deleted; there are Escrows, PayChannels, RippleStates, or Checks associated with the account.`,r.result.account_objects)),s()})})}Xn.checkAccountDeleteBlockers=g5;var zp={};Object.defineProperty(zp,"__esModule",{value:!0});zp.formatBalances=void 0;function x5(t){return t.map(e=>({value:e.balance,currency:e.currency,issuer:e.account}))}zp.formatBalances=x5;var sn={},pd={};Object.defineProperty(pd,"__esModule",{value:!0});pd.OfferFlags=void 0;var M1;(function(t){t[t.lsfPassive=65536]="lsfPassive",t[t.lsfSell=131072]="lsfSell"})(M1||(pd.OfferFlags=M1={}));var y5=Ee&&Ee.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})},v5=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sn,"__esModule",{value:!0});sn.sortAndLimitOffers=sn.separateBuySellOrders=sn.combineOrders=sn.extractOffers=sn.reverseRequest=sn.requestAllOffers=sn.createBookOffersRequest=sn.validateOrderbookOptions=void 0;const w5=v5(tr),Tc=Me,b5=pd,_5=20;function E5(t){return t.sort((e,n)=>{var r,s;const i=(r=e.quality)!==null&&r!==void 0?r:0,a=(s=n.quality)!==null&&s!==void 0?s:0;return new w5.default(i).comparedTo(a)})}const S5=new Set(["limit","ledger_index","ledger_hash","taker"]);function N5(t){for(const e of Object.keys(t))if(!S5.has(e))throw new Tc.ValidationError(`Unexpected option: ${e}`,t);if(t.limit&&typeof t.limit!="number")throw new Tc.ValidationError("limit must be a number",t.limit);if(t.ledger_index&&!(typeof t.ledger_index=="number"||typeof t.ledger_index=="string"&&["validated","closed","current"].includes(t.ledger_index)))throw new Tc.ValidationError('ledger_index must be a number or a string of "validated", "closed", or "current"',t.ledger_index);if(t.ledger_hash!==void 0&&t.ledger_hash!==null&&typeof t.ledger_hash!="string")throw new Tc.ValidationError("ledger_hash must be a string",t.ledger_hash);if(t.taker!==void 0&&typeof t.taker!="string")throw new Tc.ValidationError("taker must be a string",t.taker)}sn.validateOrderbookOptions=N5;function T5(t,e,n){var r,s;return{command:"book_offers",taker_pays:t,taker_gets:e,ledger_index:(r=n.ledger_index)!==null&&r!==void 0?r:"validated",ledger_hash:n.ledger_hash===null?void 0:n.ledger_hash,limit:(s=n.limit)!==null&&s!==void 0?s:_5,taker:n.taker?n.taker:void 0}}sn.createBookOffersRequest=T5;function A5(t,e){return y5(this,void 0,void 0,function*(){return(yield t.requestAll(e)).map(r=>r.result.offers)})}sn.requestAllOffers=A5;function C5(t){return Object.assign(Object.assign({},t),{taker_pays:t.taker_gets,taker_gets:t.taker_pays})}sn.reverseRequest=C5;function j5(t){return t.flatMap(e=>e)}sn.extractOffers=j5;function k5(t,e){return[...t,...e]}sn.combineOrders=k5;function O5(t){const e=[],n=[];return t.forEach(r=>{r.Flags&b5.OfferFlags.lsfSell?n.push(r):e.push(r)}),{buy:e,sell:n}}sn.separateBuySellOrders=O5;function P5(t,e){return E5(t).slice(0,e)}sn.sortAndLimitOffers=P5;var Ra={},mC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.HDKey=t.HARDENED_OFFSET=void 0;/*! scure-bip32 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const e=Mp,n=xa,r=Qr,s=$t,i=Pr,a=Zn,l=Rp,c=gt,u=yp,d=l.secp256k1.ProjectivePoint,h=(0,u.createBase58check)(r.sha256);function f(v){(0,i.abytes)(v);const T=v.length===0?"0":(0,a.bytesToHex)(v);return BigInt("0x"+T)}function p(v){if(typeof v!="bigint")throw new Error("bigint expected");return(0,a.hexToBytes)(v.toString(16).padStart(64,"0"))}const y=(0,a.utf8ToBytes)("Bitcoin seed"),b={private:76066276,public:76067358};t.HARDENED_OFFSET=2147483648;const _=v=>(0,n.ripemd160)((0,r.sha256)(v)),m=v=>(0,a.createView)(v).getUint32(0,!1),x=v=>{if(!Number.isSafeInteger(v)||v<0||v>2**32-1)throw new Error("invalid number, should be from 0 to 2**32-1, got "+v);const T=new Uint8Array(4);return(0,a.createView)(T).setUint32(0,v,!1),T};class w{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return m(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const T=this.privateKey;if(!T)throw new Error("No private key");return h.encode(this.serialize(this.versions.private,(0,a.concatBytes)(new Uint8Array([0]),T)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return h.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(T,E=b){if((0,i.abytes)(T),8*T.length<128||8*T.length>512)throw new Error("HDKey: seed length must be between 128 and 512 bits; 256 bits is advised, got "+T.length);const D=(0,e.hmac)(s.sha512,y,T);return new w({versions:E,chainCode:D.slice(32),privateKey:D.slice(0,32)})}static fromExtendedKey(T,E=b){const D=h.decode(T),te=(0,a.createView)(D),re=te.getUint32(0,!1),z={versions:E,depth:D[4],parentFingerprint:te.getUint32(5,!1),index:te.getUint32(9,!1),chainCode:D.slice(13,45)},J=D.slice(45),ce=J[0]===0;if(re!==E[ce?"private":"public"])throw new Error("Version mismatch");return ce?new w({...z,privateKey:J.slice(1)}):new w({...z,publicKey:J})}static fromJSON(T){return w.fromExtendedKey(T.xpriv)}constructor(T){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!T||typeof T!="object")throw new Error("HDKey.constructor must not be called directly");if(this.versions=T.versions||b,this.depth=T.depth||0,this.chainCode=T.chainCode||null,this.index=T.index||0,this.parentFingerprint=T.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(T.publicKey&&T.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(T.privateKey){if(!l.secp256k1.utils.isValidPrivateKey(T.privateKey))throw new Error("Invalid private key");this.privKey=typeof T.privateKey=="bigint"?T.privateKey:f(T.privateKey),this.privKeyBytes=p(this.privKey),this.pubKey=l.secp256k1.getPublicKey(T.privateKey,!0)}else if(T.publicKey)this.pubKey=d.fromHex(T.publicKey).toRawBytes(!0);else throw new Error("HDKey: no public or private key provided");this.pubHash=_(this.pubKey)}derive(T){if(!/^[mM]'?/.test(T))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(T))return this;const E=T.replace(/^[mM]'?\//,"").split("/");let D=this;for(const te of E){const re=/^(\d+)('?)$/.exec(te),z=re&&re[1];if(!re||re.length!==3||typeof z!="string")throw new Error("invalid child index: "+te);let J=+z;if(!Number.isSafeInteger(J)||J>=t.HARDENED_OFFSET)throw new Error("Invalid index");re[2]==="'"&&(J+=t.HARDENED_OFFSET),D=D.deriveChild(J)}return D}deriveChild(T){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let E=x(T);if(T>=t.HARDENED_OFFSET){const J=this.privateKey;if(!J)throw new Error("Could not derive hardened child key");E=(0,a.concatBytes)(new Uint8Array([0]),J,E)}else E=(0,a.concatBytes)(this.pubKey,E);const D=(0,e.hmac)(s.sha512,this.chainCode,E),te=f(D.slice(0,32)),re=D.slice(32);if(!l.secp256k1.utils.isValidPrivateKey(te))throw new Error("Tweak bigger than curve order");const z={versions:this.versions,chainCode:re,depth:this.depth+1,parentFingerprint:this.fingerprint,index:T};try{if(this.privateKey){const J=(0,c.mod)(this.privKey+te,l.secp256k1.CURVE.n);if(!l.secp256k1.utils.isValidPrivateKey(J))throw new Error("The tweak was out of range or the resulted private key is invalid");z.privateKey=J}else{const J=d.fromHex(this.pubKey).add(d.fromPrivateKey(te));if(J.equals(d.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");z.publicKey=J.toRawBytes(!0)}return new w(z)}catch{return this.deriveChild(T+1)}}sign(T){if(!this.privateKey)throw new Error("No privateKey set!");return(0,i.abytes)(T,32),l.secp256k1.sign(T,this.privKey).toCompactRawBytes()}verify(T,E){if((0,i.abytes)(T,32),(0,i.abytes)(E,64),!this.publicKey)throw new Error("No publicKey set!");let D;try{D=l.secp256k1.Signature.fromCompact(E)}catch{return!1}return l.secp256k1.verify(D,T,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(T,E){if(!this.chainCode)throw new Error("No chainCode set");return(0,i.abytes)(E,33),(0,a.concatBytes)(x(T),new Uint8Array([this.depth]),x(this.parentFingerprint),x(this.index),this.chainCode,E)}}t.HDKey=w})(mC);var So={},Hp={};Object.defineProperty(Hp,"__esModule",{value:!0});Hp.pbkdf2=R5;Hp.pbkdf2Async=L5;const sh=Pr,I5=Mp,Cl=Zn;function gC(t,e,n,r){(0,sh.ahash)(t);const s=(0,Cl.checkOpts)({dkLen:32,asyncTick:10},r),{c:i,dkLen:a,asyncTick:l}=s;if((0,sh.anumber)(i),(0,sh.anumber)(a),(0,sh.anumber)(l),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=(0,Cl.toBytes)(e),u=(0,Cl.toBytes)(n),d=new Uint8Array(a),h=I5.hmac.create(t,c),f=h._cloneInto().update(u);return{c:i,dkLen:a,asyncTick:l,DK:d,PRF:h,PRFSalt:f}}function xC(t,e,n,r,s){return t.destroy(),e.destroy(),r&&r.destroy(),s.fill(0),n}function R5(t,e,n,r){const{c:s,dkLen:i,DK:a,PRF:l,PRFSalt:c}=gC(t,e,n,r);let u;const d=new Uint8Array(4),h=(0,Cl.createView)(d),f=new Uint8Array(l.outputLen);for(let p=1,y=0;y<i;p++,y+=l.outputLen){const b=a.subarray(y,y+l.outputLen);h.setInt32(0,p,!1),(u=c._cloneInto(u)).update(d).digestInto(f),b.set(f.subarray(0,b.length));for(let _=1;_<s;_++){l._cloneInto(u).update(f).digestInto(f);for(let m=0;m<b.length;m++)b[m]^=f[m]}}return xC(l,c,a,u,f)}async function L5(t,e,n,r){const{c:s,dkLen:i,asyncTick:a,DK:l,PRF:c,PRFSalt:u}=gC(t,e,n,r);let d;const h=new Uint8Array(4),f=(0,Cl.createView)(h),p=new Uint8Array(c.outputLen);for(let y=1,b=0;b<i;y++,b+=c.outputLen){const _=l.subarray(b,b+c.outputLen);f.setInt32(0,y,!1),(d=u._cloneInto(d)).update(h).digestInto(p),_.set(p.subarray(0,_.length)),await(0,Cl.asyncLoop)(s-1,a,()=>{c._cloneInto(d).update(p).digestInto(p);for(let m=0;m<_.length;m++)_[m]^=p[m]})}return xC(c,u,l,d,p)}Object.defineProperty(So,"__esModule",{value:!0});So.generateMnemonic=B5;So.mnemonicToEntropy=SC;So.entropyToMnemonic=NC;So.validateMnemonic=U5;So.mnemonicToSeed=V5;So.mnemonicToSeedSync=z5;/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const yC=Pr,vC=Hp,M5=Qr,wC=$t,D5=Zn,ih=yp,F5=t=>t[0]==="";function bC(t){if(typeof t!="string")throw new TypeError("invalid mnemonic type: "+typeof t);return t.normalize("NFKD")}function kw(t){const e=bC(t),n=e.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:e,words:n}}function _C(t){(0,yC.abytes)(t,16,20,24,28,32)}function B5(t,e=128){if((0,yC.anumber)(e),e%32!==0||e>256)throw new TypeError("Invalid entropy");return NC((0,D5.randomBytes)(e/8),t)}const $5=t=>{const e=8-t.length/4;return new Uint8Array([(0,M5.sha256)(t)[0]>>e<<e])};function EC(t){if(!Array.isArray(t)||t.length!==2048||typeof t[0]!="string")throw new Error("Wordlist: expected array of 2048 strings");return t.forEach(e=>{if(typeof e!="string")throw new Error("wordlist: non-string element: "+e)}),ih.utils.chain(ih.utils.checksum(1,$5),ih.utils.radix2(11,!0),ih.utils.alphabet(t))}function SC(t,e){const{words:n}=kw(t),r=EC(e).decode(n);return _C(r),r}function NC(t,e){return _C(t),EC(e).encode(t).join(F5(e)?"":" ")}function U5(t,e){try{SC(t,e)}catch{return!1}return!0}const TC=t=>bC("mnemonic"+t);function V5(t,e=""){return(0,vC.pbkdf2Async)(wC.sha512,kw(t).nfkd,TC(e),{c:2048,dkLen:64})}function z5(t,e=""){return(0,vC.pbkdf2)(wC.sha512,kw(t).nfkd,TC(e),{c:2048,dkLen:64})}var Xp={};Object.defineProperty(Xp,"__esModule",{value:!0});Xp.wordlist=void 0;Xp.wordlist=`abandon
ability
able
about
above
absent
absorb
abstract
absurd
abuse
access
accident
account
accuse
achieve
acid
acoustic
acquire
across
act
action
actor
actress
actual
adapt
add
addict
address
adjust
admit
adult
advance
advice
aerobic
affair
afford
afraid
again
age
agent
agree
ahead
aim
air
airport
aisle
alarm
album
alcohol
alert
alien
all
alley
allow
almost
alone
alpha
already
also
alter
always
amateur
amazing
among
amount
amused
analyst
anchor
ancient
anger
angle
angry
animal
ankle
announce
annual
another
answer
antenna
antique
anxiety
any
apart
apology
appear
apple
approve
april
arch
arctic
area
arena
argue
arm
armed
armor
army
around
arrange
arrest
arrive
arrow
art
artefact
artist
artwork
ask
aspect
assault
asset
assist
assume
asthma
athlete
atom
attack
attend
attitude
attract
auction
audit
august
aunt
author
auto
autumn
average
avocado
avoid
awake
aware
away
awesome
awful
awkward
axis
baby
bachelor
bacon
badge
bag
balance
balcony
ball
bamboo
banana
banner
bar
barely
bargain
barrel
base
basic
basket
battle
beach
bean
beauty
because
become
beef
before
begin
behave
behind
believe
below
belt
bench
benefit
best
betray
better
between
beyond
bicycle
bid
bike
bind
biology
bird
birth
bitter
black
blade
blame
blanket
blast
bleak
bless
blind
blood
blossom
blouse
blue
blur
blush
board
boat
body
boil
bomb
bone
bonus
book
boost
border
boring
borrow
boss
bottom
bounce
box
boy
bracket
brain
brand
brass
brave
bread
breeze
brick
bridge
brief
bright
bring
brisk
broccoli
broken
bronze
broom
brother
brown
brush
bubble
buddy
budget
buffalo
build
bulb
bulk
bullet
bundle
bunker
burden
burger
burst
bus
business
busy
butter
buyer
buzz
cabbage
cabin
cable
cactus
cage
cake
call
calm
camera
camp
can
canal
cancel
candy
cannon
canoe
canvas
canyon
capable
capital
captain
car
carbon
card
cargo
carpet
carry
cart
case
cash
casino
castle
casual
cat
catalog
catch
category
cattle
caught
cause
caution
cave
ceiling
celery
cement
census
century
cereal
certain
chair
chalk
champion
change
chaos
chapter
charge
chase
chat
cheap
check
cheese
chef
cherry
chest
chicken
chief
child
chimney
choice
choose
chronic
chuckle
chunk
churn
cigar
cinnamon
circle
citizen
city
civil
claim
clap
clarify
claw
clay
clean
clerk
clever
click
client
cliff
climb
clinic
clip
clock
clog
close
cloth
cloud
clown
club
clump
cluster
clutch
coach
coast
coconut
code
coffee
coil
coin
collect
color
column
combine
come
comfort
comic
common
company
concert
conduct
confirm
congress
connect
consider
control
convince
cook
cool
copper
copy
coral
core
corn
correct
cost
cotton
couch
country
couple
course
cousin
cover
coyote
crack
cradle
craft
cram
crane
crash
crater
crawl
crazy
cream
credit
creek
crew
cricket
crime
crisp
critic
crop
cross
crouch
crowd
crucial
cruel
cruise
crumble
crunch
crush
cry
crystal
cube
culture
cup
cupboard
curious
current
curtain
curve
cushion
custom
cute
cycle
dad
damage
damp
dance
danger
daring
dash
daughter
dawn
day
deal
debate
debris
decade
december
decide
decline
decorate
decrease
deer
defense
define
defy
degree
delay
deliver
demand
demise
denial
dentist
deny
depart
depend
deposit
depth
deputy
derive
describe
desert
design
desk
despair
destroy
detail
detect
develop
device
devote
diagram
dial
diamond
diary
dice
diesel
diet
differ
digital
dignity
dilemma
dinner
dinosaur
direct
dirt
disagree
discover
disease
dish
dismiss
disorder
display
distance
divert
divide
divorce
dizzy
doctor
document
dog
doll
dolphin
domain
donate
donkey
donor
door
dose
double
dove
draft
dragon
drama
drastic
draw
dream
dress
drift
drill
drink
drip
drive
drop
drum
dry
duck
dumb
dune
during
dust
dutch
duty
dwarf
dynamic
eager
eagle
early
earn
earth
easily
east
easy
echo
ecology
economy
edge
edit
educate
effort
egg
eight
either
elbow
elder
electric
elegant
element
elephant
elevator
elite
else
embark
embody
embrace
emerge
emotion
employ
empower
empty
enable
enact
end
endless
endorse
enemy
energy
enforce
engage
engine
enhance
enjoy
enlist
enough
enrich
enroll
ensure
enter
entire
entry
envelope
episode
equal
equip
era
erase
erode
erosion
error
erupt
escape
essay
essence
estate
eternal
ethics
evidence
evil
evoke
evolve
exact
example
excess
exchange
excite
exclude
excuse
execute
exercise
exhaust
exhibit
exile
exist
exit
exotic
expand
expect
expire
explain
expose
express
extend
extra
eye
eyebrow
fabric
face
faculty
fade
faint
faith
fall
false
fame
family
famous
fan
fancy
fantasy
farm
fashion
fat
fatal
father
fatigue
fault
favorite
feature
february
federal
fee
feed
feel
female
fence
festival
fetch
fever
few
fiber
fiction
field
figure
file
film
filter
final
find
fine
finger
finish
fire
firm
first
fiscal
fish
fit
fitness
fix
flag
flame
flash
flat
flavor
flee
flight
flip
float
flock
floor
flower
fluid
flush
fly
foam
focus
fog
foil
fold
follow
food
foot
force
forest
forget
fork
fortune
forum
forward
fossil
foster
found
fox
fragile
frame
frequent
fresh
friend
fringe
frog
front
frost
frown
frozen
fruit
fuel
fun
funny
furnace
fury
future
gadget
gain
galaxy
gallery
game
gap
garage
garbage
garden
garlic
garment
gas
gasp
gate
gather
gauge
gaze
general
genius
genre
gentle
genuine
gesture
ghost
giant
gift
giggle
ginger
giraffe
girl
give
glad
glance
glare
glass
glide
glimpse
globe
gloom
glory
glove
glow
glue
goat
goddess
gold
good
goose
gorilla
gospel
gossip
govern
gown
grab
grace
grain
grant
grape
grass
gravity
great
green
grid
grief
grit
grocery
group
grow
grunt
guard
guess
guide
guilt
guitar
gun
gym
habit
hair
half
hammer
hamster
hand
happy
harbor
hard
harsh
harvest
hat
have
hawk
hazard
head
health
heart
heavy
hedgehog
height
hello
helmet
help
hen
hero
hidden
high
hill
hint
hip
hire
history
hobby
hockey
hold
hole
holiday
hollow
home
honey
hood
hope
horn
horror
horse
hospital
host
hotel
hour
hover
hub
huge
human
humble
humor
hundred
hungry
hunt
hurdle
hurry
hurt
husband
hybrid
ice
icon
idea
identify
idle
ignore
ill
illegal
illness
image
imitate
immense
immune
impact
impose
improve
impulse
inch
include
income
increase
index
indicate
indoor
industry
infant
inflict
inform
inhale
inherit
initial
inject
injury
inmate
inner
innocent
input
inquiry
insane
insect
inside
inspire
install
intact
interest
into
invest
invite
involve
iron
island
isolate
issue
item
ivory
jacket
jaguar
jar
jazz
jealous
jeans
jelly
jewel
job
join
joke
journey
joy
judge
juice
jump
jungle
junior
junk
just
kangaroo
keen
keep
ketchup
key
kick
kid
kidney
kind
kingdom
kiss
kit
kitchen
kite
kitten
kiwi
knee
knife
knock
know
lab
label
labor
ladder
lady
lake
lamp
language
laptop
large
later
latin
laugh
laundry
lava
law
lawn
lawsuit
layer
lazy
leader
leaf
learn
leave
lecture
left
leg
legal
legend
leisure
lemon
lend
length
lens
leopard
lesson
letter
level
liar
liberty
library
license
life
lift
light
like
limb
limit
link
lion
liquid
list
little
live
lizard
load
loan
lobster
local
lock
logic
lonely
long
loop
lottery
loud
lounge
love
loyal
lucky
luggage
lumber
lunar
lunch
luxury
lyrics
machine
mad
magic
magnet
maid
mail
main
major
make
mammal
man
manage
mandate
mango
mansion
manual
maple
marble
march
margin
marine
market
marriage
mask
mass
master
match
material
math
matrix
matter
maximum
maze
meadow
mean
measure
meat
mechanic
medal
media
melody
melt
member
memory
mention
menu
mercy
merge
merit
merry
mesh
message
metal
method
middle
midnight
milk
million
mimic
mind
minimum
minor
minute
miracle
mirror
misery
miss
mistake
mix
mixed
mixture
mobile
model
modify
mom
moment
monitor
monkey
monster
month
moon
moral
more
morning
mosquito
mother
motion
motor
mountain
mouse
move
movie
much
muffin
mule
multiply
muscle
museum
mushroom
music
must
mutual
myself
mystery
myth
naive
name
napkin
narrow
nasty
nation
nature
near
neck
need
negative
neglect
neither
nephew
nerve
nest
net
network
neutral
never
news
next
nice
night
noble
noise
nominee
noodle
normal
north
nose
notable
note
nothing
notice
novel
now
nuclear
number
nurse
nut
oak
obey
object
oblige
obscure
observe
obtain
obvious
occur
ocean
october
odor
off
offer
office
often
oil
okay
old
olive
olympic
omit
once
one
onion
online
only
open
opera
opinion
oppose
option
orange
orbit
orchard
order
ordinary
organ
orient
original
orphan
ostrich
other
outdoor
outer
output
outside
oval
oven
over
own
owner
oxygen
oyster
ozone
pact
paddle
page
pair
palace
palm
panda
panel
panic
panther
paper
parade
parent
park
parrot
party
pass
patch
path
patient
patrol
pattern
pause
pave
payment
peace
peanut
pear
peasant
pelican
pen
penalty
pencil
people
pepper
perfect
permit
person
pet
phone
photo
phrase
physical
piano
picnic
picture
piece
pig
pigeon
pill
pilot
pink
pioneer
pipe
pistol
pitch
pizza
place
planet
plastic
plate
play
please
pledge
pluck
plug
plunge
poem
poet
point
polar
pole
police
pond
pony
pool
popular
portion
position
possible
post
potato
pottery
poverty
powder
power
practice
praise
predict
prefer
prepare
present
pretty
prevent
price
pride
primary
print
priority
prison
private
prize
problem
process
produce
profit
program
project
promote
proof
property
prosper
protect
proud
provide
public
pudding
pull
pulp
pulse
pumpkin
punch
pupil
puppy
purchase
purity
purpose
purse
push
put
puzzle
pyramid
quality
quantum
quarter
question
quick
quit
quiz
quote
rabbit
raccoon
race
rack
radar
radio
rail
rain
raise
rally
ramp
ranch
random
range
rapid
rare
rate
rather
raven
raw
razor
ready
real
reason
rebel
rebuild
recall
receive
recipe
record
recycle
reduce
reflect
reform
refuse
region
regret
regular
reject
relax
release
relief
rely
remain
remember
remind
remove
render
renew
rent
reopen
repair
repeat
replace
report
require
rescue
resemble
resist
resource
response
result
retire
retreat
return
reunion
reveal
review
reward
rhythm
rib
ribbon
rice
rich
ride
ridge
rifle
right
rigid
ring
riot
ripple
risk
ritual
rival
river
road
roast
robot
robust
rocket
romance
roof
rookie
room
rose
rotate
rough
round
route
royal
rubber
rude
rug
rule
run
runway
rural
sad
saddle
sadness
safe
sail
salad
salmon
salon
salt
salute
same
sample
sand
satisfy
satoshi
sauce
sausage
save
say
scale
scan
scare
scatter
scene
scheme
school
science
scissors
scorpion
scout
scrap
screen
script
scrub
sea
search
season
seat
second
secret
section
security
seed
seek
segment
select
sell
seminar
senior
sense
sentence
series
service
session
settle
setup
seven
shadow
shaft
shallow
share
shed
shell
sheriff
shield
shift
shine
ship
shiver
shock
shoe
shoot
shop
short
shoulder
shove
shrimp
shrug
shuffle
shy
sibling
sick
side
siege
sight
sign
silent
silk
silly
silver
similar
simple
since
sing
siren
sister
situate
six
size
skate
sketch
ski
skill
skin
skirt
skull
slab
slam
sleep
slender
slice
slide
slight
slim
slogan
slot
slow
slush
small
smart
smile
smoke
smooth
snack
snake
snap
sniff
snow
soap
soccer
social
sock
soda
soft
solar
soldier
solid
solution
solve
someone
song
soon
sorry
sort
soul
sound
soup
source
south
space
spare
spatial
spawn
speak
special
speed
spell
spend
sphere
spice
spider
spike
spin
spirit
split
spoil
sponsor
spoon
sport
spot
spray
spread
spring
spy
square
squeeze
squirrel
stable
stadium
staff
stage
stairs
stamp
stand
start
state
stay
steak
steel
stem
step
stereo
stick
still
sting
stock
stomach
stone
stool
story
stove
strategy
street
strike
strong
struggle
student
stuff
stumble
style
subject
submit
subway
success
such
sudden
suffer
sugar
suggest
suit
summer
sun
sunny
sunset
super
supply
supreme
sure
surface
surge
surprise
surround
survey
suspect
sustain
swallow
swamp
swap
swarm
swear
sweet
swift
swim
swing
switch
sword
symbol
symptom
syrup
system
table
tackle
tag
tail
talent
talk
tank
tape
target
task
taste
tattoo
taxi
teach
team
tell
ten
tenant
tennis
tent
term
test
text
thank
that
theme
then
theory
there
they
thing
this
thought
three
thrive
throw
thumb
thunder
ticket
tide
tiger
tilt
timber
time
tiny
tip
tired
tissue
title
toast
tobacco
today
toddler
toe
together
toilet
token
tomato
tomorrow
tone
tongue
tonight
tool
tooth
top
topic
topple
torch
tornado
tortoise
toss
total
tourist
toward
tower
town
toy
track
trade
traffic
tragic
train
transfer
trap
trash
travel
tray
treat
tree
trend
trial
tribe
trick
trigger
trim
trip
trophy
trouble
truck
true
truly
trumpet
trust
truth
try
tube
tuition
tumble
tuna
tunnel
turkey
turn
turtle
twelve
twenty
twice
twin
twist
two
type
typical
ugly
umbrella
unable
unaware
uncle
uncover
under
undo
unfair
unfold
unhappy
uniform
unique
unit
universe
unknown
unlock
until
unusual
unveil
update
upgrade
uphold
upon
upper
upset
urban
urge
usage
use
used
useful
useless
usual
utility
vacant
vacuum
vague
valid
valley
valve
van
vanish
vapor
various
vast
vault
vehicle
velvet
vendor
venture
venue
verb
verify
version
very
vessel
veteran
viable
vibrant
vicious
victory
video
view
village
vintage
violin
virtual
virus
visa
visit
visual
vital
vivid
vocal
voice
void
volcano
volume
vote
voyage
wage
wagon
wait
walk
wall
walnut
want
warfare
warm
warrior
wash
wasp
waste
water
wave
way
wealth
weapon
wear
weasel
weather
web
wedding
weekend
weird
welcome
west
wet
whale
what
wheat
wheel
when
where
whip
whisper
wide
width
wife
wild
will
win
window
wine
wing
wink
winner
winter
wire
wisdom
wise
wish
witness
wolf
woman
wonder
wood
wool
word
work
world
worry
worth
wrap
wreck
wrestle
wrist
write
wrong
yard
year
yellow
you
young
youth
zebra
zero
zone
zoo`.split(`
`);var md={};Object.defineProperty(md,"__esModule",{value:!0});var xy;(function(t){t.ed25519="ed25519",t.secp256k1="ecdsa-secp256k1"})(xy||(xy={}));md.default=xy;var gd={},Wp={},Kp={};Object.defineProperty(Kp,"__esModule",{value:!0});Kp.validateAccountDelete=void 0;const Xa=Le;function H5(t){(0,Xa.validateBaseTransaction)(t),(0,Xa.validateRequiredField)(t,"Destination",Xa.isAccount),(0,Xa.validateOptionalField)(t,"DestinationTag",Xa.isNumber),(0,Xa.validateCredentialsList)(t.CredentialIDs,t.TransactionType,!0)}Kp.validateAccountDelete=H5;var qp={};Object.defineProperty(qp,"__esModule",{value:!0});qp.validateAMMBid=void 0;const _r=Me,Ac=Le,D1=4;function X5(t){if((0,Ac.validateBaseTransaction)(t),t.Asset==null)throw new _r.ValidationError("AMMBid: missing field Asset");if(!(0,Ac.isCurrency)(t.Asset))throw new _r.ValidationError("AMMBid: Asset must be a Currency");if(t.Asset2==null)throw new _r.ValidationError("AMMBid: missing field Asset2");if(!(0,Ac.isCurrency)(t.Asset2))throw new _r.ValidationError("AMMBid: Asset2 must be a Currency");if(t.BidMin!=null&&!(0,Ac.isAmount)(t.BidMin))throw new _r.ValidationError("AMMBid: BidMin must be an Amount");if(t.BidMax!=null&&!(0,Ac.isAmount)(t.BidMax))throw new _r.ValidationError("AMMBid: BidMax must be an Amount");if(t.AuthAccounts!=null){if(!Array.isArray(t.AuthAccounts))throw new _r.ValidationError("AMMBid: AuthAccounts must be an AuthAccount array");if(t.AuthAccounts.length>D1)throw new _r.ValidationError(`AMMBid: AuthAccounts length must not be greater than ${D1}`);W5(t.Account,t.AuthAccounts)}}qp.validateAMMBid=X5;function W5(t,e){for(const n of e){if(n.AuthAccount==null||typeof n.AuthAccount!="object")throw new _r.ValidationError("AMMBid: invalid AuthAccounts");if(n.AuthAccount.Account==null)throw new _r.ValidationError("AMMBid: invalid AuthAccounts");if(typeof n.AuthAccount.Account!="string")throw new _r.ValidationError("AMMBid: invalid AuthAccounts");if(n.AuthAccount.Account===t)throw new _r.ValidationError("AMMBid: AuthAccounts must not include sender's address")}return!0}var Ow={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateAMMCreate=t.AMM_MAX_TRADING_FEE=void 0;const e=Me,n=Le;t.AMM_MAX_TRADING_FEE=1e3;function r(s){if((0,n.validateBaseTransaction)(s),s.Amount==null)throw new e.ValidationError("AMMCreate: missing field Amount");if(!(0,n.isAmount)(s.Amount))throw new e.ValidationError("AMMCreate: Amount must be an Amount");if(s.Amount2==null)throw new e.ValidationError("AMMCreate: missing field Amount2");if(!(0,n.isAmount)(s.Amount2))throw new e.ValidationError("AMMCreate: Amount2 must be an Amount");if(s.TradingFee==null)throw new e.ValidationError("AMMCreate: missing field TradingFee");if(typeof s.TradingFee!="number")throw new e.ValidationError("AMMCreate: TradingFee must be a number");if(s.TradingFee<0||s.TradingFee>t.AMM_MAX_TRADING_FEE)throw new e.ValidationError(`AMMCreate: TradingFee must be between 0 and ${t.AMM_MAX_TRADING_FEE}`)}t.validateAMMCreate=r})(Ow);var Gp={};Object.defineProperty(Gp,"__esModule",{value:!0});Gp.validateAMMDelete=void 0;const oh=Me,og=Le;function K5(t){if((0,og.validateBaseTransaction)(t),t.Asset==null)throw new oh.ValidationError("AMMDelete: missing field Asset");if(!(0,og.isCurrency)(t.Asset))throw new oh.ValidationError("AMMDelete: Asset must be a Currency");if(t.Asset2==null)throw new oh.ValidationError("AMMDelete: missing field Asset2");if(!(0,og.isCurrency)(t.Asset2))throw new oh.ValidationError("AMMDelete: Asset2 must be a Currency")}Gp.validateAMMDelete=K5;var Yp={};Object.defineProperty(Yp,"__esModule",{value:!0});Yp.validateAMMVote=void 0;const ko=Me,F1=Ow,ag=Le;function q5(t){if((0,ag.validateBaseTransaction)(t),t.Asset==null)throw new ko.ValidationError("AMMVote: missing field Asset");if(!(0,ag.isCurrency)(t.Asset))throw new ko.ValidationError("AMMVote: Asset must be a Currency");if(t.Asset2==null)throw new ko.ValidationError("AMMVote: missing field Asset2");if(!(0,ag.isCurrency)(t.Asset2))throw new ko.ValidationError("AMMVote: Asset2 must be a Currency");if(t.TradingFee==null)throw new ko.ValidationError("AMMVote: missing field TradingFee");if(typeof t.TradingFee!="number")throw new ko.ValidationError("AMMVote: TradingFee must be a number");if(t.TradingFee<0||t.TradingFee>F1.AMM_MAX_TRADING_FEE)throw new ko.ValidationError(`AMMVote: TradingFee must be between 0 and ${F1.AMM_MAX_TRADING_FEE}`)}Yp.validateAMMVote=q5;var Jp={};Object.defineProperty(Jp,"__esModule",{value:!0});Jp.validateCheckCancel=void 0;const G5=Me,Y5=Le;function J5(t){if((0,Y5.validateBaseTransaction)(t),t.CheckID!==void 0&&typeof t.CheckID!="string")throw new G5.ValidationError("CheckCancel: invalid CheckID")}Jp.validateCheckCancel=J5;var Qp={};Object.defineProperty(Qp,"__esModule",{value:!0});Qp.validateCheckCash=void 0;const Cc=Me,lg=Le;function Q5(t){if((0,lg.validateBaseTransaction)(t),t.Amount==null&&t.DeliverMin==null)throw new Cc.ValidationError("CheckCash: must have either Amount or DeliverMin");if(t.Amount!=null&&t.DeliverMin!=null)throw new Cc.ValidationError("CheckCash: cannot have both Amount and DeliverMin");if(t.Amount!=null&&t.Amount!==void 0&&!(0,lg.isAmount)(t.Amount))throw new Cc.ValidationError("CheckCash: invalid Amount");if(t.DeliverMin!=null&&t.DeliverMin!==void 0&&!(0,lg.isAmount)(t.DeliverMin))throw new Cc.ValidationError("CheckCash: invalid DeliverMin");if(t.CheckID!==void 0&&typeof t.CheckID!="string")throw new Cc.ValidationError("CheckCash: invalid CheckID")}Qp.validateCheckCash=Q5;var Zp={};Object.defineProperty(Zp,"__esModule",{value:!0});Zp.validateCheckCreate=void 0;const ah=Me,Wa=Le;function Z5(t){if((0,Wa.validateBaseTransaction)(t),t.SendMax===void 0)throw new ah.ValidationError("CheckCreate: missing field SendMax");if((0,Wa.validateRequiredField)(t,"Destination",Wa.isAccount),(0,Wa.validateOptionalField)(t,"DestinationTag",Wa.isNumber),typeof t.SendMax!="string"&&!(0,Wa.isIssuedCurrency)(t.SendMax))throw new ah.ValidationError("CheckCreate: invalid SendMax");if(t.Expiration!==void 0&&typeof t.Expiration!="number")throw new ah.ValidationError("CheckCreate: invalid Expiration");if(t.InvoiceID!==void 0&&typeof t.InvoiceID!="string")throw new ah.ValidationError("CheckCreate: invalid InvoiceID")}Zp.validateCheckCreate=Z5;var em={};Object.defineProperty(em,"__esModule",{value:!0});em.validateClawback=void 0;const Ka=Me,Rs=Le;function e6(t){if((0,Rs.validateBaseTransaction)(t),(0,Rs.validateOptionalField)(t,"Holder",Rs.isAccount),t.Amount==null)throw new Ka.ValidationError("Clawback: missing field Amount");if(!(0,Rs.isIssuedCurrency)(t.Amount)&&!(0,Rs.isMPTAmount)(t.Amount))throw new Ka.ValidationError("Clawback: invalid Amount");if((0,Rs.isIssuedCurrency)(t.Amount)&&t.Account===t.Amount.issuer)throw new Ka.ValidationError("Clawback: invalid holder Account");if((0,Rs.isMPTAmount)(t.Amount)&&t.Account===t.Holder)throw new Ka.ValidationError("Clawback: invalid holder Account");if((0,Rs.isIssuedCurrency)(t.Amount)&&t.Holder)throw new Ka.ValidationError("Clawback: cannot have Holder for currency");if((0,Rs.isMPTAmount)(t.Amount)&&!t.Holder)throw new Ka.ValidationError("Clawback: missing Holder")}em.validateClawback=e6;var tm={};Object.defineProperty(tm,"__esModule",{value:!0});tm.validateCredentialAccept=void 0;const qa=Le;function t6(t){(0,qa.validateBaseTransaction)(t),(0,qa.validateRequiredField)(t,"Account",qa.isString),(0,qa.validateRequiredField)(t,"Issuer",qa.isString),(0,qa.validateCredentialType)(t)}tm.validateCredentialAccept=t6;var nm={};Object.defineProperty(nm,"__esModule",{value:!0});nm.validateCredentialCreate=void 0;const n6=ft,lh=Me,xi=Le,B1=256;function r6(t){(0,xi.validateBaseTransaction)(t),(0,xi.validateRequiredField)(t,"Account",xi.isString),(0,xi.validateRequiredField)(t,"Subject",xi.isString),(0,xi.validateCredentialType)(t),(0,xi.validateOptionalField)(t,"Expiration",xi.isNumber),s6(t.URI)}nm.validateCredentialCreate=r6;function s6(t){if(t!==void 0){if(typeof t!="string")throw new lh.ValidationError("CredentialCreate: invalid field URI");if(t.length===0)throw new lh.ValidationError("CredentialCreate: URI cannot be an empty string");if(t.length>B1)throw new lh.ValidationError(`CredentialCreate: URI length must be <= ${B1}`);if(!n6.HEX_REGEX.test(t))throw new lh.ValidationError("CredentialCreate: URI must be encoded in hex")}}var rm={};Object.defineProperty(rm,"__esModule",{value:!0});rm.validateCredentialDelete=void 0;const i6=Me,yi=Le;function o6(t){if((0,yi.validateBaseTransaction)(t),!t.Subject&&!t.Issuer)throw new i6.ValidationError("CredentialDelete: either `Issuer` or `Subject` must be provided");(0,yi.validateRequiredField)(t,"Account",yi.isString),(0,yi.validateCredentialType)(t),(0,yi.validateOptionalField)(t,"Subject",yi.isString),(0,yi.validateOptionalField)(t,"Issuer",yi.isString)}rm.validateCredentialDelete=o6;var sm={};Object.defineProperty(sm,"__esModule",{value:!0});sm.validateDepositPreauth=void 0;const zc=Me,cg=Le;function a6(t){if((0,cg.validateBaseTransaction)(t),l6(t),t.Authorize!==void 0){if(typeof t.Authorize!="string")throw new zc.ValidationError("DepositPreauth: Authorize must be a string");if(t.Account===t.Authorize)throw new zc.ValidationError("DepositPreauth: Account can't preauthorize its own address")}else if(t.Unauthorize!==void 0){if(typeof t.Unauthorize!="string")throw new zc.ValidationError("DepositPreauth: Unauthorize must be a string");if(t.Account===t.Unauthorize)throw new zc.ValidationError("DepositPreauth: Account can't unauthorize its own address")}else t.AuthorizeCredentials!==void 0?(0,cg.validateCredentialsList)(t.AuthorizeCredentials,t.TransactionType,!1):t.UnauthorizeCredentials!==void 0&&(0,cg.validateCredentialsList)(t.UnauthorizeCredentials,t.TransactionType,!1)}sm.validateDepositPreauth=a6;function l6(t){if(["Authorize","Unauthorize","AuthorizeCredentials","UnauthorizeCredentials"].filter(r=>t[r]!==void 0).length!==1)throw new zc.ValidationError("DepositPreauth: Requires exactly one field of the following: Authorize, Unauthorize, AuthorizeCredentials, UnauthorizeCredentials.")}var im={};Object.defineProperty(im,"__esModule",{value:!0});im.validateDIDDelete=void 0;const c6=Le;function u6(t){(0,c6.validateBaseTransaction)(t)}im.validateDIDDelete=u6;var om={};Object.defineProperty(om,"__esModule",{value:!0});om.validateDIDSet=void 0;const d6=Me,Oo=Le;function h6(t){if((0,Oo.validateBaseTransaction)(t),(0,Oo.validateOptionalField)(t,"Data",Oo.isString),(0,Oo.validateOptionalField)(t,"DIDDocument",Oo.isString),(0,Oo.validateOptionalField)(t,"URI",Oo.isString),t.Data===void 0&&t.DIDDocument===void 0&&t.URI===void 0)throw new d6.ValidationError("DIDSet: Must have at least one of `Data`, `DIDDocument`, and `URI`")}om.validateDIDSet=h6;var am={};Object.defineProperty(am,"__esModule",{value:!0});am.validateEscrowCancel=void 0;const $1=Me,ug=Le;function f6(t){if((0,ug.validateBaseTransaction)(t),(0,ug.validateRequiredField)(t,"Owner",ug.isAccount),t.OfferSequence==null)throw new $1.ValidationError("EscrowCancel: missing OfferSequence");if(typeof t.OfferSequence!="number"&&typeof t.OfferSequence!="string"||Number.isNaN(Number(t.OfferSequence)))throw new $1.ValidationError("EscrowCancel: OfferSequence must be a number")}am.validateEscrowCancel=f6;var lm={};Object.defineProperty(lm,"__esModule",{value:!0});lm.validateEscrowCreate=void 0;const Po=Me,jc=Le;function p6(t){if((0,jc.validateBaseTransaction)(t),t.Amount===void 0)throw new Po.ValidationError("EscrowCreate: missing field Amount");if(typeof t.Amount!="string")throw new Po.ValidationError("EscrowCreate: Amount must be a string");if((0,jc.validateRequiredField)(t,"Destination",jc.isAccount),(0,jc.validateOptionalField)(t,"DestinationTag",jc.isNumber),t.CancelAfter===void 0&&t.FinishAfter===void 0)throw new Po.ValidationError("EscrowCreate: Either CancelAfter or FinishAfter must be specified");if(t.FinishAfter===void 0&&t.Condition===void 0)throw new Po.ValidationError("EscrowCreate: Either Condition or FinishAfter must be specified");if(t.CancelAfter!==void 0&&typeof t.CancelAfter!="number")throw new Po.ValidationError("EscrowCreate: CancelAfter must be a number");if(t.FinishAfter!==void 0&&typeof t.FinishAfter!="number")throw new Po.ValidationError("EscrowCreate: FinishAfter must be a number");if(t.Condition!==void 0&&typeof t.Condition!="string")throw new Po.ValidationError("EscrowCreate: Condition must be a string")}lm.validateEscrowCreate=p6;var cm={};Object.defineProperty(cm,"__esModule",{value:!0});cm.validateEscrowFinish=void 0;const ch=Me,uh=Le;function m6(t){if((0,uh.validateBaseTransaction)(t),(0,uh.validateRequiredField)(t,"Owner",uh.isAccount),(0,uh.validateCredentialsList)(t.CredentialIDs,t.TransactionType,!0),t.OfferSequence==null)throw new ch.ValidationError("EscrowFinish: missing field OfferSequence");if(typeof t.OfferSequence!="number"&&typeof t.OfferSequence!="string"||Number.isNaN(Number(t.OfferSequence)))throw new ch.ValidationError("EscrowFinish: OfferSequence must be a number");if(t.Condition!==void 0&&typeof t.Condition!="string")throw new ch.ValidationError("EscrowFinish: Condition must be a string");if(t.Fulfillment!==void 0&&typeof t.Fulfillment!="string")throw new ch.ValidationError("EscrowFinish: Fulfillment must be a string")}cm.validateEscrowFinish=m6;var um={};Object.defineProperty(um,"__esModule",{value:!0});um.validateMPTokenIssuanceDestroy=void 0;const dg=Le;function g6(t){(0,dg.validateBaseTransaction)(t),(0,dg.validateRequiredField)(t,"MPTokenIssuanceID",dg.isString)}um.validateMPTokenIssuanceDestroy=g6;var dm={};Object.defineProperty(dm,"__esModule",{value:!0});dm.validateNFTokenAcceptOffer=void 0;const Yh=Me,AC=Le;function x6(t){const e=(0,AC.parseAmountValue)(t.NFTokenBrokerFee);if(Number.isNaN(e))throw new Yh.ValidationError("NFTokenAcceptOffer: invalid NFTokenBrokerFee");if(e<=0)throw new Yh.ValidationError("NFTokenAcceptOffer: NFTokenBrokerFee must be greater than 0; omit if there is no fee");if(t.NFTokenSellOffer==null||t.NFTokenBuyOffer==null)throw new Yh.ValidationError("NFTokenAcceptOffer: both NFTokenSellOffer and NFTokenBuyOffer must be set if using brokered mode")}function y6(t){if((0,AC.validateBaseTransaction)(t),t.NFTokenBrokerFee!=null&&x6(t),t.NFTokenSellOffer==null&&t.NFTokenBuyOffer==null)throw new Yh.ValidationError("NFTokenAcceptOffer: must set either NFTokenSellOffer or NFTokenBuyOffer")}dm.validateNFTokenAcceptOffer=y6;var hm={};Object.defineProperty(hm,"__esModule",{value:!0});hm.validateNFTokenBurn=void 0;const kc=Le;function v6(t){(0,kc.validateBaseTransaction)(t),(0,kc.validateRequiredField)(t,"NFTokenID",kc.isString),(0,kc.validateOptionalField)(t,"Owner",kc.isAccount)}hm.validateNFTokenBurn=v6;var fm={};Object.defineProperty(fm,"__esModule",{value:!0});fm.validateNFTokenCancelOffer=void 0;const U1=Me,w6=Le;function b6(t){if((0,w6.validateBaseTransaction)(t),!Array.isArray(t.NFTokenOffers))throw new U1.ValidationError("NFTokenCancelOffer: missing field NFTokenOffers");if(t.NFTokenOffers.length<1)throw new U1.ValidationError("NFTokenCancelOffer: empty field NFTokenOffers")}fm.validateNFTokenCancelOffer=b6;var pm={};Object.defineProperty(pm,"__esModule",{value:!0});pm.validateOfferCancel=void 0;const V1=Me,_6=Le;function E6(t){if((0,_6.validateBaseTransaction)(t),t.OfferSequence===void 0)throw new V1.ValidationError("OfferCancel: missing field OfferSequence");if(typeof t.OfferSequence!="number")throw new V1.ValidationError("OfferCancel: OfferSequence must be a number")}pm.validateOfferCancel=E6;var mm={};Object.defineProperty(mm,"__esModule",{value:!0});mm.validateOracleDelete=void 0;const hg=Le;function S6(t){(0,hg.validateBaseTransaction)(t),(0,hg.validateRequiredField)(t,"OracleDocumentID",hg.isNumber)}mm.validateOracleDelete=S6;var gm={};Object.defineProperty(gm,"__esModule",{value:!0});gm.validateOracleSet=void 0;const Fr=Me,Bn=Le,z1=10,H1=10;function N6(t){(0,Bn.validateBaseTransaction)(t),(0,Bn.validateRequiredField)(t,"OracleDocumentID",Bn.isNumber),(0,Bn.validateRequiredField)(t,"LastUpdateTime",Bn.isNumber),(0,Bn.validateOptionalField)(t,"Provider",Bn.isString),(0,Bn.validateOptionalField)(t,"URI",Bn.isString),(0,Bn.validateOptionalField)(t,"AssetClass",Bn.isString),(0,Bn.validateRequiredField)(t,"PriceDataSeries",e=>{if(!Array.isArray(e))throw new Fr.ValidationError("OracleSet: PriceDataSeries must be an array");if(e.length>z1)throw new Fr.ValidationError(`OracleSet: PriceDataSeries must have at most ${z1} PriceData objects`);for(const n of e){if(typeof n!="object")throw new Fr.ValidationError("OracleSet: PriceDataSeries must be an array of objects");if(n.PriceData==null)throw new Fr.ValidationError("OracleSet: PriceDataSeries must have a `PriceData` object");if(Object.keys(n).length!==1)throw new Fr.ValidationError("OracleSet: PriceDataSeries must only have a single PriceData object");if(typeof n.PriceData.BaseAsset!="string")throw new Fr.ValidationError("OracleSet: PriceDataSeries must have a `BaseAsset` string");if(typeof n.PriceData.QuoteAsset!="string")throw new Fr.ValidationError("OracleSet: PriceDataSeries must have a `QuoteAsset` string");if(n.PriceData.AssetPrice==null!=(n.PriceData.Scale==null))throw new Fr.ValidationError("OracleSet: PriceDataSeries must have both `AssetPrice` and `Scale` if any are present");if("AssetPrice"in n.PriceData&&!(0,Bn.isNumber)(n.PriceData.AssetPrice))throw new Fr.ValidationError("OracleSet: invalid field AssetPrice");if("Scale"in n.PriceData&&!(0,Bn.isNumber)(n.PriceData.Scale))throw new Fr.ValidationError("OracleSet: invalid field Scale");if(n.PriceData.Scale<0||n.PriceData.Scale>H1)throw new Fr.ValidationError(`OracleSet: Scale must be in range 0-${H1}`)}return!0})}gm.validateOracleSet=N6;var xm={};Object.defineProperty(xm,"__esModule",{value:!0});xm.validatePaymentChannelCreate=void 0;const Io=Me,Oc=Le;function T6(t){if((0,Oc.validateBaseTransaction)(t),t.Amount===void 0)throw new Io.ValidationError("PaymentChannelCreate: missing Amount");if(typeof t.Amount!="string")throw new Io.ValidationError("PaymentChannelCreate: Amount must be a string");if((0,Oc.validateRequiredField)(t,"Destination",Oc.isAccount),(0,Oc.validateOptionalField)(t,"DestinationTag",Oc.isNumber),t.SettleDelay===void 0)throw new Io.ValidationError("PaymentChannelCreate: missing SettleDelay");if(typeof t.SettleDelay!="number")throw new Io.ValidationError("PaymentChannelCreate: SettleDelay must be a number");if(t.PublicKey===void 0)throw new Io.ValidationError("PaymentChannelCreate: missing PublicKey");if(typeof t.PublicKey!="string")throw new Io.ValidationError("PaymentChannelCreate: PublicKey must be a string");if(t.CancelAfter!==void 0&&typeof t.CancelAfter!="number")throw new Io.ValidationError("PaymentChannelCreate: CancelAfter must be a number")}xm.validatePaymentChannelCreate=T6;var ym={};Object.defineProperty(ym,"__esModule",{value:!0});ym.validatePaymentChannelFund=void 0;const Pc=Me,A6=Le;function C6(t){if((0,A6.validateBaseTransaction)(t),t.Channel===void 0)throw new Pc.ValidationError("PaymentChannelFund: missing Channel");if(typeof t.Channel!="string")throw new Pc.ValidationError("PaymentChannelFund: Channel must be a string");if(t.Amount===void 0)throw new Pc.ValidationError("PaymentChannelFund: missing Amount");if(typeof t.Amount!="string")throw new Pc.ValidationError("PaymentChannelFund: Amount must be a string");if(t.Expiration!==void 0&&typeof t.Expiration!="number")throw new Pc.ValidationError("PaymentChannelFund: Expiration must be a number")}ym.validatePaymentChannelFund=C6;var vm={};Object.defineProperty(vm,"__esModule",{value:!0});vm.validateSetRegularKey=void 0;const j6=Me,k6=Le;function O6(t){if((0,k6.validateBaseTransaction)(t),t.RegularKey!==void 0&&typeof t.RegularKey!="string")throw new j6.ValidationError("SetRegularKey: RegularKey must be a string")}vm.validateSetRegularKey=O6;var wm={};Object.defineProperty(wm,"__esModule",{value:!0});wm.validateSignerListSet=void 0;const Ro=Me,P6=Le,X1=32,I6=/^[0-9A-Fa-f]{64}$/u;function R6(t){if((0,P6.validateBaseTransaction)(t),t.SignerQuorum===void 0)throw new Ro.ValidationError("SignerListSet: missing field SignerQuorum");if(typeof t.SignerQuorum!="number")throw new Ro.ValidationError("SignerListSet: invalid SignerQuorum");if(t.SignerQuorum!==0){if(t.SignerEntries===void 0)throw new Ro.ValidationError("SignerListSet: missing field SignerEntries");if(!Array.isArray(t.SignerEntries))throw new Ro.ValidationError("SignerListSet: invalid SignerEntries");if(t.SignerEntries.length===0)throw new Ro.ValidationError("SignerListSet: need at least 1 member in SignerEntries");if(t.SignerEntries.length>X1)throw new Ro.ValidationError(`SignerListSet: maximum of ${X1} members allowed in SignerEntries`);for(const e of t.SignerEntries){const n=e,{WalletLocator:r}=n.SignerEntry;if(r!==void 0&&!I6.test(r))throw new Ro.ValidationError("SignerListSet: WalletLocator in SignerEntry must be a 256-bit (32-byte) hexadecimal value")}}}wm.validateSignerListSet=R6;var bm={};Object.defineProperty(bm,"__esModule",{value:!0});bm.validateTicketCreate=void 0;const fg=Me,L6=Le,M6=250;function D6(t){(0,L6.validateBaseTransaction)(t);const{TicketCount:e}=t;if(e===void 0)throw new fg.ValidationError("TicketCreate: missing field TicketCount");if(typeof e!="number")throw new fg.ValidationError("TicketCreate: TicketCount must be a number");if(!Number.isInteger(e)||e<1||e>M6)throw new fg.ValidationError("TicketCreate: TicketCount must be an integer from 1 to 250")}bm.validateTicketCreate=D6;var _m={};Object.defineProperty(_m,"__esModule",{value:!0});_m.validateXChainAccountCreateCommit=void 0;const Ls=Le;function F6(t){(0,Ls.validateBaseTransaction)(t),(0,Ls.validateRequiredField)(t,"XChainBridge",Ls.isXChainBridge),(0,Ls.validateRequiredField)(t,"SignatureReward",Ls.isAmount),(0,Ls.validateRequiredField)(t,"Destination",Ls.isAccount),(0,Ls.validateRequiredField)(t,"Amount",Ls.isAmount)}_m.validateXChainAccountCreateCommit=F6;var Em={};Object.defineProperty(Em,"__esModule",{value:!0});Em.validateXChainAddAccountCreateAttestation=void 0;const Ct=Le;function B6(t){(0,Ct.validateBaseTransaction)(t),(0,Ct.validateRequiredField)(t,"Amount",Ct.isAmount),(0,Ct.validateRequiredField)(t,"AttestationRewardAccount",Ct.isAccount),(0,Ct.validateRequiredField)(t,"AttestationSignerAccount",Ct.isAccount),(0,Ct.validateRequiredField)(t,"Destination",Ct.isAccount),(0,Ct.validateRequiredField)(t,"OtherChainSource",Ct.isAccount),(0,Ct.validateRequiredField)(t,"PublicKey",Ct.isString),(0,Ct.validateRequiredField)(t,"Signature",Ct.isString),(0,Ct.validateRequiredField)(t,"SignatureReward",Ct.isAmount),(0,Ct.validateRequiredField)(t,"WasLockingChainSend",e=>e===0||e===1),(0,Ct.validateRequiredField)(t,"XChainAccountCreateCount",e=>(0,Ct.isNumber)(e)||(0,Ct.isString)(e)),(0,Ct.validateRequiredField)(t,"XChainBridge",Ct.isXChainBridge)}Em.validateXChainAddAccountCreateAttestation=B6;var Sm={};Object.defineProperty(Sm,"__esModule",{value:!0});Sm.validateXChainAddClaimAttestation=void 0;const Ft=Le;function $6(t){(0,Ft.validateBaseTransaction)(t),(0,Ft.validateRequiredField)(t,"Amount",Ft.isAmount),(0,Ft.validateRequiredField)(t,"AttestationRewardAccount",Ft.isAccount),(0,Ft.validateRequiredField)(t,"AttestationSignerAccount",Ft.isAccount),(0,Ft.validateOptionalField)(t,"Destination",Ft.isAccount),(0,Ft.validateRequiredField)(t,"OtherChainSource",Ft.isAccount),(0,Ft.validateRequiredField)(t,"PublicKey",Ft.isString),(0,Ft.validateRequiredField)(t,"Signature",Ft.isString),(0,Ft.validateRequiredField)(t,"WasLockingChainSend",e=>e===0||e===1),(0,Ft.validateRequiredField)(t,"XChainBridge",Ft.isXChainBridge),(0,Ft.validateRequiredField)(t,"XChainClaimID",e=>(0,Ft.isNumber)(e)||(0,Ft.isString)(e))}Sm.validateXChainAddClaimAttestation=$6;var Nm={};Object.defineProperty(Nm,"__esModule",{value:!0});Nm.validateXChainClaim=void 0;const yr=Le;function U6(t){(0,yr.validateBaseTransaction)(t),(0,yr.validateRequiredField)(t,"XChainBridge",yr.isXChainBridge),(0,yr.validateRequiredField)(t,"XChainClaimID",e=>(0,yr.isNumber)(e)||(0,yr.isString)(e)),(0,yr.validateRequiredField)(t,"Destination",yr.isAccount),(0,yr.validateOptionalField)(t,"DestinationTag",yr.isNumber),(0,yr.validateRequiredField)(t,"Amount",yr.isAmount)}Nm.validateXChainClaim=U6;var Tm={};Object.defineProperty(Tm,"__esModule",{value:!0});Tm.validateXChainCommit=void 0;const hs=Le;function V6(t){(0,hs.validateBaseTransaction)(t),(0,hs.validateRequiredField)(t,"XChainBridge",hs.isXChainBridge),(0,hs.validateRequiredField)(t,"XChainClaimID",e=>(0,hs.isNumber)(e)||(0,hs.isString)(e)),(0,hs.validateOptionalField)(t,"OtherChainDestination",hs.isAccount),(0,hs.validateRequiredField)(t,"Amount",hs.isAmount)}Tm.validateXChainCommit=V6;var Am={};Object.defineProperty(Am,"__esModule",{value:!0});Am.validateXChainCreateBridge=void 0;const Lo=Le;function z6(t){(0,Lo.validateBaseTransaction)(t),(0,Lo.validateRequiredField)(t,"XChainBridge",Lo.isXChainBridge),(0,Lo.validateRequiredField)(t,"SignatureReward",Lo.isAmount),(0,Lo.validateOptionalField)(t,"MinAccountCreateAmount",Lo.isAmount)}Am.validateXChainCreateBridge=z6;var Cm={};Object.defineProperty(Cm,"__esModule",{value:!0});Cm.validateXChainCreateClaimID=void 0;const Mo=Le;function H6(t){(0,Mo.validateBaseTransaction)(t),(0,Mo.validateRequiredField)(t,"XChainBridge",Mo.isXChainBridge),(0,Mo.validateRequiredField)(t,"SignatureReward",Mo.isAmount),(0,Mo.validateRequiredField)(t,"OtherChainSource",Mo.isAccount)}Cm.validateXChainCreateClaimID=H6;Object.defineProperty(Wp,"__esModule",{value:!0});Wp.validate=void 0;const Ms=Me,pg=on,X6=Ts,W6=Kp,K6=As,q6=qp,G6=Ow,Y6=Gp,J6=Zi,Q6=Yp,Z6=eo,e$=Jp,t$=Qp,n$=Zp,r$=em,s$=Le,i$=tm,o$=nm,a$=rm,l$=sm,c$=im,u$=om,d$=am,h$=lm,f$=cm,p$=to,m$=no,g$=um,x$=ro,y$=dm,v$=hm,w$=fm,b$=so,_$=io,E$=pm,S$=oo,N$=mm,T$=gm,A$=ao,C$=lo,j$=xm,k$=ym,O$=vm,P$=wm,I$=bm,R$=co,L$=_m,M$=Em,D$=Sm,F$=Nm,B$=Tm,$$=Am,U$=Cm,V$=uo;function z$(t){const e=Object.assign({},t);if(e.TransactionType==null)throw new Ms.ValidationError("Object does not have a `TransactionType`");if(typeof e.TransactionType!="string")throw new Ms.ValidationError("Object's `TransactionType` is not a string");if(e.Memos!=null&&typeof e.Memos!="object")throw new Ms.ValidationError("Memo must be array");switch(e.Memos!=null&&e.Memos.forEach(n=>{if((n==null?void 0:n.Memo)==null)throw new Ms.ValidationError("Memo data must be in a `Memo` field");if(n.Memo.MemoData&&!(0,pg.isHex)(n.Memo.MemoData))throw new Ms.ValidationError("MemoData field must be a hex value");if(n.Memo.MemoType&&!(0,pg.isHex)(n.Memo.MemoType))throw new Ms.ValidationError("MemoType field must be a hex value");if(n.Memo.MemoFormat&&!(0,pg.isHex)(n.Memo.MemoFormat))throw new Ms.ValidationError("MemoFormat field must be a hex value")}),Object.keys(e).forEach(n=>{if(e[n]&&(0,s$.isIssuedCurrency)(e[n])){const s=e[n].currency;if(s.length===3&&s.toUpperCase()==="XRP")throw new Ms.ValidationError(`Cannot have an issued currency with a similar standard code to XRP (received '${s}'). XRP is not an issued currency.`)}}),(0,X6.setTransactionFlagsToNumber)(e),e.TransactionType){case"AMMBid":(0,q6.validateAMMBid)(e);break;case"AMMCreate":(0,G6.validateAMMCreate)(e);break;case"AMMDelete":(0,Y6.validateAMMDelete)(e);break;case"AMMDeposit":(0,J6.validateAMMDeposit)(e);break;case"AMMVote":(0,Q6.validateAMMVote)(e);break;case"AMMWithdraw":(0,Z6.validateAMMWithdraw)(e);break;case"AccountDelete":(0,W6.validateAccountDelete)(e);break;case"AccountSet":(0,K6.validateAccountSet)(e);break;case"CheckCancel":(0,e$.validateCheckCancel)(e);break;case"CheckCash":(0,t$.validateCheckCash)(e);break;case"CheckCreate":(0,n$.validateCheckCreate)(e);break;case"Clawback":(0,r$.validateClawback)(e);break;case"CredentialAccept":(0,i$.validateCredentialAccept)(e);break;case"CredentialCreate":(0,o$.validateCredentialCreate)(e);break;case"CredentialDelete":(0,a$.validateCredentialDelete)(e);break;case"DIDDelete":(0,c$.validateDIDDelete)(e);break;case"DIDSet":(0,u$.validateDIDSet)(e);break;case"DepositPreauth":(0,l$.validateDepositPreauth)(e);break;case"EscrowCancel":(0,d$.validateEscrowCancel)(e);break;case"EscrowCreate":(0,h$.validateEscrowCreate)(e);break;case"EscrowFinish":(0,f$.validateEscrowFinish)(e);break;case"MPTokenAuthorize":(0,p$.validateMPTokenAuthorize)(e);break;case"MPTokenIssuanceCreate":(0,m$.validateMPTokenIssuanceCreate)(e);break;case"MPTokenIssuanceDestroy":(0,g$.validateMPTokenIssuanceDestroy)(e);break;case"MPTokenIssuanceSet":(0,x$.validateMPTokenIssuanceSet)(e);break;case"NFTokenAcceptOffer":(0,y$.validateNFTokenAcceptOffer)(e);break;case"NFTokenBurn":(0,v$.validateNFTokenBurn)(e);break;case"NFTokenCancelOffer":(0,w$.validateNFTokenCancelOffer)(e);break;case"NFTokenCreateOffer":(0,b$.validateNFTokenCreateOffer)(e);break;case"NFTokenMint":(0,_$.validateNFTokenMint)(e);break;case"OfferCancel":(0,E$.validateOfferCancel)(e);break;case"OfferCreate":(0,S$.validateOfferCreate)(e);break;case"OracleDelete":(0,N$.validateOracleDelete)(e);break;case"OracleSet":(0,T$.validateOracleSet)(e);break;case"Payment":(0,A$.validatePayment)(e);break;case"PaymentChannelClaim":(0,C$.validatePaymentChannelClaim)(e);break;case"PaymentChannelCreate":(0,j$.validatePaymentChannelCreate)(e);break;case"PaymentChannelFund":(0,k$.validatePaymentChannelFund)(e);break;case"SetRegularKey":(0,O$.validateSetRegularKey)(e);break;case"SignerListSet":(0,P$.validateSignerListSet)(e);break;case"TicketCreate":(0,I$.validateTicketCreate)(e);break;case"TrustSet":(0,R$.validateTrustSet)(e);break;case"XChainAccountCreateCommit":(0,L$.validateXChainAccountCreateCommit)(e);break;case"XChainAddAccountCreateAttestation":(0,M$.validateXChainAddAccountCreateAttestation)(e);break;case"XChainAddClaimAttestation":(0,D$.validateXChainAddClaimAttestation)(e);break;case"XChainClaim":(0,F$.validateXChainClaim)(e);break;case"XChainCommit":(0,B$.validateXChainCommit)(e);break;case"XChainCreateBridge":(0,$$.validateXChainCreateBridge)(e);break;case"XChainCreateClaimID":(0,U$.validateXChainCreateClaimID)(e);break;case"XChainModifyBridge":(0,V$.validateXChainModifyBridge)(e);break;default:throw new Ms.ValidationError(`Invalid field TransactionType: ${e.TransactionType}`)}}Wp.validate=z$;var jm={};Object.defineProperty(jm,"__esModule",{value:!0});jm.EnableAmendmentFlags=void 0;var W1;(function(t){t[t.tfGotMajority=65536]="tfGotMajority",t[t.tfLostMajority=131072]="tfLostMajority"})(W1||(jm.EnableAmendmentFlags=W1={}));(function(t){var e=Ee&&Ee.__createBinding||(Object.create?function(w,v,T,E){E===void 0&&(E=T);var D=Object.getOwnPropertyDescriptor(v,T);(!D||("get"in D?!v.__esModule:D.writable||D.configurable))&&(D={enumerable:!0,get:function(){return v[T]}}),Object.defineProperty(w,E,D)}:function(w,v,T,E){E===void 0&&(E=T),w[E]=v[T]}),n=Ee&&Ee.__exportStar||function(w,v){for(var T in w)T!=="default"&&!Object.prototype.hasOwnProperty.call(v,T)&&e(v,w,T)};Object.defineProperty(t,"__esModule",{value:!0}),t.XChainModifyBridgeFlags=t.TrustSetFlags=t.PaymentChannelClaimFlags=t.PaymentFlags=t.OfferCreateFlags=t.NFTokenMintFlags=t.NFTokenCreateOfferFlags=t.MPTokenIssuanceSetFlags=t.MPTokenIssuanceCreateFlags=t.MPTokenAuthorizeFlags=t.EnableAmendmentFlags=t.AMMWithdrawFlags=t.AMMDepositFlags=t.AccountSetTfFlags=t.AccountSetAsfFlags=t.validate=t.isMPTAmount=void 0;var r=Le;Object.defineProperty(t,"isMPTAmount",{enumerable:!0,get:function(){return r.isMPTAmount}});var s=Wp;Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return s.validate}}),n(Cs,t);var i=As;Object.defineProperty(t,"AccountSetAsfFlags",{enumerable:!0,get:function(){return i.AccountSetAsfFlags}}),Object.defineProperty(t,"AccountSetTfFlags",{enumerable:!0,get:function(){return i.AccountSetTfFlags}});var a=Zi;Object.defineProperty(t,"AMMDepositFlags",{enumerable:!0,get:function(){return a.AMMDepositFlags}});var l=eo;Object.defineProperty(t,"AMMWithdrawFlags",{enumerable:!0,get:function(){return l.AMMWithdrawFlags}});var c=jm;Object.defineProperty(t,"EnableAmendmentFlags",{enumerable:!0,get:function(){return c.EnableAmendmentFlags}});var u=to;Object.defineProperty(t,"MPTokenAuthorizeFlags",{enumerable:!0,get:function(){return u.MPTokenAuthorizeFlags}});var d=no;Object.defineProperty(t,"MPTokenIssuanceCreateFlags",{enumerable:!0,get:function(){return d.MPTokenIssuanceCreateFlags}});var h=ro;Object.defineProperty(t,"MPTokenIssuanceSetFlags",{enumerable:!0,get:function(){return h.MPTokenIssuanceSetFlags}});var f=so;Object.defineProperty(t,"NFTokenCreateOfferFlags",{enumerable:!0,get:function(){return f.NFTokenCreateOfferFlags}});var p=io;Object.defineProperty(t,"NFTokenMintFlags",{enumerable:!0,get:function(){return p.NFTokenMintFlags}});var y=oo;Object.defineProperty(t,"OfferCreateFlags",{enumerable:!0,get:function(){return y.OfferCreateFlags}});var b=ao;Object.defineProperty(t,"PaymentFlags",{enumerable:!0,get:function(){return b.PaymentFlags}});var _=lo;Object.defineProperty(t,"PaymentChannelClaimFlags",{enumerable:!0,get:function(){return _.PaymentChannelClaimFlags}});var m=co;Object.defineProperty(t,"TrustSetFlags",{enumerable:!0,get:function(){return m.TrustSetFlags}});var x=uo;Object.defineProperty(t,"XChainModifyBridgeFlags",{enumerable:!0,get:function(){return x.XChainModifyBridgeFlags}})})(gd);var wa={};const H$=["A","ABE","ACE","ACT","AD","ADA","ADD","AGO","AID","AIM","AIR","ALL","ALP","AM","AMY","AN","ANA","AND","ANN","ANT","ANY","APE","APS","APT","ARC","ARE","ARK","ARM","ART","AS","ASH","ASK","AT","ATE","AUG","AUK","AVE","AWE","AWK","AWL","AWN","AX","AYE","BAD","BAG","BAH","BAM","BAN","BAR","BAT","BAY","BE","BED","BEE","BEG","BEN","BET","BEY","BIB","BID","BIG","BIN","BIT","BOB","BOG","BON","BOO","BOP","BOW","BOY","BUB","BUD","BUG","BUM","BUN","BUS","BUT","BUY","BY","BYE","CAB","CAL","CAM","CAN","CAP","CAR","CAT","CAW","COD","COG","COL","CON","COO","COP","COT","COW","COY","CRY","CUB","CUE","CUP","CUR","CUT","DAB","DAD","DAM","DAN","DAR","DAY","DEE","DEL","DEN","DES","DEW","DID","DIE","DIG","DIN","DIP","DO","DOE","DOG","DON","DOT","DOW","DRY","DUB","DUD","DUE","DUG","DUN","EAR","EAT","ED","EEL","EGG","EGO","ELI","ELK","ELM","ELY","EM","END","EST","ETC","EVA","EVE","EWE","EYE","FAD","FAN","FAR","FAT","FAY","FED","FEE","FEW","FIB","FIG","FIN","FIR","FIT","FLO","FLY","FOE","FOG","FOR","FRY","FUM","FUN","FUR","GAB","GAD","GAG","GAL","GAM","GAP","GAS","GAY","GEE","GEL","GEM","GET","GIG","GIL","GIN","GO","GOT","GUM","GUN","GUS","GUT","GUY","GYM","GYP","HA","HAD","HAL","HAM","HAN","HAP","HAS","HAT","HAW","HAY","HE","HEM","HEN","HER","HEW","HEY","HI","HID","HIM","HIP","HIS","HIT","HO","HOB","HOC","HOE","HOG","HOP","HOT","HOW","HUB","HUE","HUG","HUH","HUM","HUT","I","ICY","IDA","IF","IKE","ILL","INK","INN","IO","ION","IQ","IRA","IRE","IRK","IS","IT","ITS","IVY","JAB","JAG","JAM","JAN","JAR","JAW","JAY","JET","JIG","JIM","JO","JOB","JOE","JOG","JOT","JOY","JUG","JUT","KAY","KEG","KEN","KEY","KID","KIM","KIN","KIT","LA","LAB","LAC","LAD","LAG","LAM","LAP","LAW","LAY","LEA","LED","LEE","LEG","LEN","LEO","LET","LEW","LID","LIE","LIN","LIP","LIT","LO","LOB","LOG","LOP","LOS","LOT","LOU","LOW","LOY","LUG","LYE","MA","MAC","MAD","MAE","MAN","MAO","MAP","MAT","MAW","MAY","ME","MEG","MEL","MEN","MET","MEW","MID","MIN","MIT","MOB","MOD","MOE","MOO","MOP","MOS","MOT","MOW","MUD","MUG","MUM","MY","NAB","NAG","NAN","NAP","NAT","NAY","NE","NED","NEE","NET","NEW","NIB","NIL","NIP","NIT","NO","NOB","NOD","NON","NOR","NOT","NOV","NOW","NU","NUN","NUT","O","OAF","OAK","OAR","OAT","ODD","ODE","OF","OFF","OFT","OH","OIL","OK","OLD","ON","ONE","OR","ORB","ORE","ORR","OS","OTT","OUR","OUT","OVA","OW","OWE","OWL","OWN","OX","PA","PAD","PAL","PAM","PAN","PAP","PAR","PAT","PAW","PAY","PEA","PEG","PEN","PEP","PER","PET","PEW","PHI","PI","PIE","PIN","PIT","PLY","PO","POD","POE","POP","POT","POW","PRO","PRY","PUB","PUG","PUN","PUP","PUT","QUO","RAG","RAM","RAN","RAP","RAT","RAW","RAY","REB","RED","REP","RET","RIB","RID","RIG","RIM","RIO","RIP","ROB","ROD","ROE","RON","ROT","ROW","ROY","RUB","RUE","RUG","RUM","RUN","RYE","SAC","SAD","SAG","SAL","SAM","SAN","SAP","SAT","SAW","SAY","SEA","SEC","SEE","SEN","SET","SEW","SHE","SHY","SIN","SIP","SIR","SIS","SIT","SKI","SKY","SLY","SO","SOB","SOD","SON","SOP","SOW","SOY","SPA","SPY","SUB","SUD","SUE","SUM","SUN","SUP","TAB","TAD","TAG","TAN","TAP","TAR","TEA","TED","TEE","TEN","THE","THY","TIC","TIE","TIM","TIN","TIP","TO","TOE","TOG","TOM","TON","TOO","TOP","TOW","TOY","TRY","TUB","TUG","TUM","TUN","TWO","UN","UP","US","USE","VAN","VAT","VET","VIE","WAD","WAG","WAR","WAS","WAY","WE","WEB","WED","WEE","WET","WHO","WHY","WIN","WIT","WOK","WON","WOO","WOW","WRY","WU","YAM","YAP","YAW","YE","YEA","YES","YET","YOU","ABED","ABEL","ABET","ABLE","ABUT","ACHE","ACID","ACME","ACRE","ACTA","ACTS","ADAM","ADDS","ADEN","AFAR","AFRO","AGEE","AHEM","AHOY","AIDA","AIDE","AIDS","AIRY","AJAR","AKIN","ALAN","ALEC","ALGA","ALIA","ALLY","ALMA","ALOE","ALSO","ALTO","ALUM","ALVA","AMEN","AMES","AMID","AMMO","AMOK","AMOS","AMRA","ANDY","ANEW","ANNA","ANNE","ANTE","ANTI","AQUA","ARAB","ARCH","AREA","ARGO","ARID","ARMY","ARTS","ARTY","ASIA","ASKS","ATOM","AUNT","AURA","AUTO","AVER","AVID","AVIS","AVON","AVOW","AWAY","AWRY","BABE","BABY","BACH","BACK","BADE","BAIL","BAIT","BAKE","BALD","BALE","BALI","BALK","BALL","BALM","BAND","BANE","BANG","BANK","BARB","BARD","BARE","BARK","BARN","BARR","BASE","BASH","BASK","BASS","BATE","BATH","BAWD","BAWL","BEAD","BEAK","BEAM","BEAN","BEAR","BEAT","BEAU","BECK","BEEF","BEEN","BEER","BEET","BELA","BELL","BELT","BEND","BENT","BERG","BERN","BERT","BESS","BEST","BETA","BETH","BHOY","BIAS","BIDE","BIEN","BILE","BILK","BILL","BIND","BING","BIRD","BITE","BITS","BLAB","BLAT","BLED","BLEW","BLOB","BLOC","BLOT","BLOW","BLUE","BLUM","BLUR","BOAR","BOAT","BOCA","BOCK","BODE","BODY","BOGY","BOHR","BOIL","BOLD","BOLO","BOLT","BOMB","BONA","BOND","BONE","BONG","BONN","BONY","BOOK","BOOM","BOON","BOOT","BORE","BORG","BORN","BOSE","BOSS","BOTH","BOUT","BOWL","BOYD","BRAD","BRAE","BRAG","BRAN","BRAY","BRED","BREW","BRIG","BRIM","BROW","BUCK","BUDD","BUFF","BULB","BULK","BULL","BUNK","BUNT","BUOY","BURG","BURL","BURN","BURR","BURT","BURY","BUSH","BUSS","BUST","BUSY","BYTE","CADY","CAFE","CAGE","CAIN","CAKE","CALF","CALL","CALM","CAME","CANE","CANT","CARD","CARE","CARL","CARR","CART","CASE","CASH","CASK","CAST","CAVE","CEIL","CELL","CENT","CERN","CHAD","CHAR","CHAT","CHAW","CHEF","CHEN","CHEW","CHIC","CHIN","CHOU","CHOW","CHUB","CHUG","CHUM","CITE","CITY","CLAD","CLAM","CLAN","CLAW","CLAY","CLOD","CLOG","CLOT","CLUB","CLUE","COAL","COAT","COCA","COCK","COCO","CODA","CODE","CODY","COED","COIL","COIN","COKE","COLA","COLD","COLT","COMA","COMB","COME","COOK","COOL","COON","COOT","CORD","CORE","CORK","CORN","COST","COVE","COWL","CRAB","CRAG","CRAM","CRAY","CREW","CRIB","CROW","CRUD","CUBA","CUBE","CUFF","CULL","CULT","CUNY","CURB","CURD","CURE","CURL","CURT","CUTS","DADE","DALE","DAME","DANA","DANE","DANG","DANK","DARE","DARK","DARN","DART","DASH","DATA","DATE","DAVE","DAVY","DAWN","DAYS","DEAD","DEAF","DEAL","DEAN","DEAR","DEBT","DECK","DEED","DEEM","DEER","DEFT","DEFY","DELL","DENT","DENY","DESK","DIAL","DICE","DIED","DIET","DIME","DINE","DING","DINT","DIRE","DIRT","DISC","DISH","DISK","DIVE","DOCK","DOES","DOLE","DOLL","DOLT","DOME","DONE","DOOM","DOOR","DORA","DOSE","DOTE","DOUG","DOUR","DOVE","DOWN","DRAB","DRAG","DRAM","DRAW","DREW","DRUB","DRUG","DRUM","DUAL","DUCK","DUCT","DUEL","DUET","DUKE","DULL","DUMB","DUNE","DUNK","DUSK","DUST","DUTY","EACH","EARL","EARN","EASE","EAST","EASY","EBEN","ECHO","EDDY","EDEN","EDGE","EDGY","EDIT","EDNA","EGAN","ELAN","ELBA","ELLA","ELSE","EMIL","EMIT","EMMA","ENDS","ERIC","EROS","EVEN","EVER","EVIL","EYED","FACE","FACT","FADE","FAIL","FAIN","FAIR","FAKE","FALL","FAME","FANG","FARM","FAST","FATE","FAWN","FEAR","FEAT","FEED","FEEL","FEET","FELL","FELT","FEND","FERN","FEST","FEUD","FIEF","FIGS","FILE","FILL","FILM","FIND","FINE","FINK","FIRE","FIRM","FISH","FISK","FIST","FITS","FIVE","FLAG","FLAK","FLAM","FLAT","FLAW","FLEA","FLED","FLEW","FLIT","FLOC","FLOG","FLOW","FLUB","FLUE","FOAL","FOAM","FOGY","FOIL","FOLD","FOLK","FOND","FONT","FOOD","FOOL","FOOT","FORD","FORE","FORK","FORM","FORT","FOSS","FOUL","FOUR","FOWL","FRAU","FRAY","FRED","FREE","FRET","FREY","FROG","FROM","FUEL","FULL","FUME","FUND","FUNK","FURY","FUSE","FUSS","GAFF","GAGE","GAIL","GAIN","GAIT","GALA","GALE","GALL","GALT","GAME","GANG","GARB","GARY","GASH","GATE","GAUL","GAUR","GAVE","GAWK","GEAR","GELD","GENE","GENT","GERM","GETS","GIBE","GIFT","GILD","GILL","GILT","GINA","GIRD","GIRL","GIST","GIVE","GLAD","GLEE","GLEN","GLIB","GLOB","GLOM","GLOW","GLUE","GLUM","GLUT","GOAD","GOAL","GOAT","GOER","GOES","GOLD","GOLF","GONE","GONG","GOOD","GOOF","GORE","GORY","GOSH","GOUT","GOWN","GRAB","GRAD","GRAY","GREG","GREW","GREY","GRID","GRIM","GRIN","GRIT","GROW","GRUB","GULF","GULL","GUNK","GURU","GUSH","GUST","GWEN","GWYN","HAAG","HAAS","HACK","HAIL","HAIR","HALE","HALF","HALL","HALO","HALT","HAND","HANG","HANK","HANS","HARD","HARK","HARM","HART","HASH","HAST","HATE","HATH","HAUL","HAVE","HAWK","HAYS","HEAD","HEAL","HEAR","HEAT","HEBE","HECK","HEED","HEEL","HEFT","HELD","HELL","HELM","HERB","HERD","HERE","HERO","HERS","HESS","HEWN","HICK","HIDE","HIGH","HIKE","HILL","HILT","HIND","HINT","HIRE","HISS","HIVE","HOBO","HOCK","HOFF","HOLD","HOLE","HOLM","HOLT","HOME","HONE","HONK","HOOD","HOOF","HOOK","HOOT","HORN","HOSE","HOST","HOUR","HOVE","HOWE","HOWL","HOYT","HUCK","HUED","HUFF","HUGE","HUGH","HUGO","HULK","HULL","HUNK","HUNT","HURD","HURL","HURT","HUSH","HYDE","HYMN","IBIS","ICON","IDEA","IDLE","IFFY","INCA","INCH","INTO","IONS","IOTA","IOWA","IRIS","IRMA","IRON","ISLE","ITCH","ITEM","IVAN","JACK","JADE","JAIL","JAKE","JANE","JAVA","JEAN","JEFF","JERK","JESS","JEST","JIBE","JILL","JILT","JIVE","JOAN","JOBS","JOCK","JOEL","JOEY","JOHN","JOIN","JOKE","JOLT","JOVE","JUDD","JUDE","JUDO","JUDY","JUJU","JUKE","JULY","JUNE","JUNK","JUNO","JURY","JUST","JUTE","KAHN","KALE","KANE","KANT","KARL","KATE","KEEL","KEEN","KENO","KENT","KERN","KERR","KEYS","KICK","KILL","KIND","KING","KIRK","KISS","KITE","KLAN","KNEE","KNEW","KNIT","KNOB","KNOT","KNOW","KOCH","KONG","KUDO","KURD","KURT","KYLE","LACE","LACK","LACY","LADY","LAID","LAIN","LAIR","LAKE","LAMB","LAME","LAND","LANE","LANG","LARD","LARK","LASS","LAST","LATE","LAUD","LAVA","LAWN","LAWS","LAYS","LEAD","LEAF","LEAK","LEAN","LEAR","LEEK","LEER","LEFT","LEND","LENS","LENT","LEON","LESK","LESS","LEST","LETS","LIAR","LICE","LICK","LIED","LIEN","LIES","LIEU","LIFE","LIFT","LIKE","LILA","LILT","LILY","LIMA","LIMB","LIME","LIND","LINE","LINK","LINT","LION","LISA","LIST","LIVE","LOAD","LOAF","LOAM","LOAN","LOCK","LOFT","LOGE","LOIS","LOLA","LONE","LONG","LOOK","LOON","LOOT","LORD","LORE","LOSE","LOSS","LOST","LOUD","LOVE","LOWE","LUCK","LUCY","LUGE","LUKE","LULU","LUND","LUNG","LURA","LURE","LURK","LUSH","LUST","LYLE","LYNN","LYON","LYRA","MACE","MADE","MAGI","MAID","MAIL","MAIN","MAKE","MALE","MALI","MALL","MALT","MANA","MANN","MANY","MARC","MARE","MARK","MARS","MART","MARY","MASH","MASK","MASS","MAST","MATE","MATH","MAUL","MAYO","MEAD","MEAL","MEAN","MEAT","MEEK","MEET","MELD","MELT","MEMO","MEND","MENU","MERT","MESH","MESS","MICE","MIKE","MILD","MILE","MILK","MILL","MILT","MIMI","MIND","MINE","MINI","MINK","MINT","MIRE","MISS","MIST","MITE","MITT","MOAN","MOAT","MOCK","MODE","MOLD","MOLE","MOLL","MOLT","MONA","MONK","MONT","MOOD","MOON","MOOR","MOOT","MORE","MORN","MORT","MOSS","MOST","MOTH","MOVE","MUCH","MUCK","MUDD","MUFF","MULE","MULL","MURK","MUSH","MUST","MUTE","MUTT","MYRA","MYTH","NAGY","NAIL","NAIR","NAME","NARY","NASH","NAVE","NAVY","NEAL","NEAR","NEAT","NECK","NEED","NEIL","NELL","NEON","NERO","NESS","NEST","NEWS","NEWT","NIBS","NICE","NICK","NILE","NINA","NINE","NOAH","NODE","NOEL","NOLL","NONE","NOOK","NOON","NORM","NOSE","NOTE","NOUN","NOVA","NUDE","NULL","NUMB","OATH","OBEY","OBOE","ODIN","OHIO","OILY","OINT","OKAY","OLAF","OLDY","OLGA","OLIN","OMAN","OMEN","OMIT","ONCE","ONES","ONLY","ONTO","ONUS","ORAL","ORGY","OSLO","OTIS","OTTO","OUCH","OUST","OUTS","OVAL","OVEN","OVER","OWLY","OWNS","QUAD","QUIT","QUOD","RACE","RACK","RACY","RAFT","RAGE","RAID","RAIL","RAIN","RAKE","RANK","RANT","RARE","RASH","RATE","RAVE","RAYS","READ","REAL","REAM","REAR","RECK","REED","REEF","REEK","REEL","REID","REIN","RENA","REND","RENT","REST","RICE","RICH","RICK","RIDE","RIFT","RILL","RIME","RING","RINK","RISE","RISK","RITE","ROAD","ROAM","ROAR","ROBE","ROCK","RODE","ROIL","ROLL","ROME","ROOD","ROOF","ROOK","ROOM","ROOT","ROSA","ROSE","ROSS","ROSY","ROTH","ROUT","ROVE","ROWE","ROWS","RUBE","RUBY","RUDE","RUDY","RUIN","RULE","RUNG","RUNS","RUNT","RUSE","RUSH","RUSK","RUSS","RUST","RUTH","SACK","SAFE","SAGE","SAID","SAIL","SALE","SALK","SALT","SAME","SAND","SANE","SANG","SANK","SARA","SAUL","SAVE","SAYS","SCAN","SCAR","SCAT","SCOT","SEAL","SEAM","SEAR","SEAT","SEED","SEEK","SEEM","SEEN","SEES","SELF","SELL","SEND","SENT","SETS","SEWN","SHAG","SHAM","SHAW","SHAY","SHED","SHIM","SHIN","SHOD","SHOE","SHOT","SHOW","SHUN","SHUT","SICK","SIDE","SIFT","SIGH","SIGN","SILK","SILL","SILO","SILT","SINE","SING","SINK","SIRE","SITE","SITS","SITU","SKAT","SKEW","SKID","SKIM","SKIN","SKIT","SLAB","SLAM","SLAT","SLAY","SLED","SLEW","SLID","SLIM","SLIT","SLOB","SLOG","SLOT","SLOW","SLUG","SLUM","SLUR","SMOG","SMUG","SNAG","SNOB","SNOW","SNUB","SNUG","SOAK","SOAR","SOCK","SODA","SOFA","SOFT","SOIL","SOLD","SOME","SONG","SOON","SOOT","SORE","SORT","SOUL","SOUR","SOWN","STAB","STAG","STAN","STAR","STAY","STEM","STEW","STIR","STOW","STUB","STUN","SUCH","SUDS","SUIT","SULK","SUMS","SUNG","SUNK","SURE","SURF","SWAB","SWAG","SWAM","SWAN","SWAT","SWAY","SWIM","SWUM","TACK","TACT","TAIL","TAKE","TALE","TALK","TALL","TANK","TASK","TATE","TAUT","TEAL","TEAM","TEAR","TECH","TEEM","TEEN","TEET","TELL","TEND","TENT","TERM","TERN","TESS","TEST","THAN","THAT","THEE","THEM","THEN","THEY","THIN","THIS","THUD","THUG","TICK","TIDE","TIDY","TIED","TIER","TILE","TILL","TILT","TIME","TINA","TINE","TINT","TINY","TIRE","TOAD","TOGO","TOIL","TOLD","TOLL","TONE","TONG","TONY","TOOK","TOOL","TOOT","TORE","TORN","TOTE","TOUR","TOUT","TOWN","TRAG","TRAM","TRAY","TREE","TREK","TRIG","TRIM","TRIO","TROD","TROT","TROY","TRUE","TUBA","TUBE","TUCK","TUFT","TUNA","TUNE","TUNG","TURF","TURN","TUSK","TWIG","TWIN","TWIT","ULAN","UNIT","URGE","USED","USER","USES","UTAH","VAIL","VAIN","VALE","VARY","VASE","VAST","VEAL","VEDA","VEIL","VEIN","VEND","VENT","VERB","VERY","VETO","VICE","VIEW","VINE","VISE","VOID","VOLT","VOTE","WACK","WADE","WAGE","WAIL","WAIT","WAKE","WALE","WALK","WALL","WALT","WAND","WANE","WANG","WANT","WARD","WARM","WARN","WART","WASH","WAST","WATS","WATT","WAVE","WAVY","WAYS","WEAK","WEAL","WEAN","WEAR","WEED","WEEK","WEIR","WELD","WELL","WELT","WENT","WERE","WERT","WEST","WHAM","WHAT","WHEE","WHEN","WHET","WHOA","WHOM","WICK","WIFE","WILD","WILL","WIND","WINE","WING","WINK","WINO","WIRE","WISE","WISH","WITH","WOLF","WONT","WOOD","WOOL","WORD","WORE","WORK","WORM","WORN","WOVE","WRIT","WYNN","YALE","YANG","YANK","YARD","YARN","YAWL","YAWN","YEAH","YEAR","YELL","YOGA","YOKE"];var X$=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wa,"__esModule",{value:!0});wa.keyToRFC1751Mnemonic=wa.rfc1751MnemonicToKey=void 0;const CC=ft,W$=X$(H$),jC=W$.default,K1=["0000","0001","0010","0011","0100","0101","0110","0111","1000","1001","1010","1011","1100","1101","1110","1111"];function yy(t){let e="";for(const n of t)e+=K1[n>>4]+K1[n&15];return e}function Rf(t,e,n){const r=t.substring(e,e+n);let s=0;for(let i=0;i<r.length;i++)s=s*2+r.charCodeAt(i)-48;return s}function K$(t){const e=(0,CC.hexToBytes)(t.replace(/\s+/gu,""));let n=Y$(kC(e));const r=[];for(let i=0;i<(8-n.length%8)%8;i++)r.push(0);n=r.concat(n);const s=[];for(let i=0;i<n.length;i+=8){const a=n.slice(i,i+8);let l=yy(a),c=0;for(let u=0;u<64;u+=2)c+=Rf(l,u,2);a.push(c<<6&255),l=yy(a);for(let u=0;u<64;u+=11)s.push(jC[Rf(l,u,11)])}return s.join(" ")}wa.keyToRFC1751Mnemonic=K$;function q$(t){const e=t.split(" ");let n=[];for(let s=0;s<e.length;s+=6){const{subKey:i,word:a}=G$(e,s),l=yy(i);let c=0;for(let h=0;h<64;h+=2)c+=Rf(l,h,2);const u=Rf(l,64,2),d=c&3;if(u!==d)throw new Error(`Parity error at ${a}`);n=n.concat(i.slice(0,8))}return kC(Uint8Array.from(n))}wa.rfc1751MnemonicToKey=q$;function G$(t,e){const n=t.slice(e,e+6);let r=0;const s=[0,0,0,0,0,0,0,0,0];let i="";for(i of n){const l=jC.indexOf(i.toUpperCase());if(l===-1)throw new TypeError(`Expected an RFC1751 word, but received '${i}'. For the full list of words in the RFC1751 encoding see https://datatracker.ietf.org/doc/html/rfc1751`);const c=(8-(r+11)%8)%8,u=l<<c,d=u>>16,h=u>>8&255,f=u&255,p=Math.floor(r/8);c>5?(s[p]|=d,s[p+1]|=h,s[p+2]|=f):c>-3?(s[p]|=h,s[p+1]|=f):s[p]|=f,r+=11}return{subKey:s.slice(),word:i}}function Y$(t){return Array.prototype.slice.call(t)}function dh(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function J$(t){const e=t.length;for(let n=0;n<e;n+=8)dh(t,n,n+7),dh(t,n+1,n+6),dh(t,n+2,n+5),dh(t,n+3,n+4);return t}function kC(t){const e=J$(t);return(0,CC.concat)([e.slice(8,16),e.slice(0,8)])}var ba={};Object.defineProperty(ba,"__esModule",{value:!0});ba.multisign=ba.verifySignature=void 0;const Q$=ft,Z$=tr,eU=er,au=Ir,tU=bo,Jh=Me,nU=gd;function rU(t){if(t.length===0)throw new Jh.ValidationError("There were 0 transactions to multisign");const e=t.map(n=>OC(n));return e.forEach(n=>{if((0,nU.validate)(n),n.Signers==null||n.Signers.length===0)throw new Jh.ValidationError("For multisigning all transactions must include a Signers field containing an array of signatures. You may have forgotten to pass the 'forMultisign' parameter when signing.");if(n.SigningPubKey!=="")throw new Jh.ValidationError("SigningPubKey must be an empty string for all transactions when multisigning.")}),iU(e),(0,au.encode)(oU(e))}ba.multisign=rU;function sU(t,e){const n=OC(t);let r=e;if(typeof n.TxnSignature!="string"||!n.TxnSignature)throw new Error("Transaction is missing a signature, TxnSignature");if(!r){if(typeof n.SigningPubKey!="string"||!n.SigningPubKey)throw new Error("Transaction is missing a public key, SigningPubKey");r=n.SigningPubKey}return(0,tU.verify)((0,au.encodeForSigning)(n),n.TxnSignature,r)}ba.verifySignature=sU;function iU(t){const e=JSON.stringify(Object.assign(Object.assign({},t[0]),{Signers:null}));if(t.slice(1).some(n=>JSON.stringify(Object.assign(Object.assign({},n),{Signers:null}))!==e))throw new Jh.ValidationError("txJSON is not the same for all signedTransactions")}function oU(t){const e=t.flatMap(n=>{var r;return(r=n.Signers)!==null&&r!==void 0?r:[]}).sort(aU);return Object.assign(Object.assign({},t[0]),{Signers:e})}function aU(t,e){return q1(t.Signer.Account).comparedTo(q1(e.Signer.Account))}const lU=16;function q1(t){const e=(0,Q$.bytesToHex)((0,eU.decodeAccountID)(t));return new Z$.BigNumber(e,lU)}function OC(t){return typeof t=="object"?(0,au.decode)((0,au.encode)(t)):(0,au.decode)(t)}var PC=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ra,"__esModule",{value:!0});Ra.Wallet=void 0;const cU=mC,G1=So,uU=Xp,Y1=ft,dU=PC(tr),Lf=er,vy=Ir,vl=bo,wy=PC(md),lu=Me,hU=gd,fU=cd,pU=va,mU=Ar,gU=wa,xU=ba,mg=wy.default.ed25519,yU="m/44'/144'/0'/0/0";function vU(t){if(!(t.privateKey instanceof Uint8Array))throw new lu.ValidationError("Unable to derive privateKey from mnemonic input");if(!(t.publicKey instanceof Uint8Array))throw new lu.ValidationError("Unable to derive publicKey from mnemonic input")}class Hr{constructor(e,n,r={}){this.publicKey=e,this.privateKey=n,this.classicAddress=r.masterAddress?(0,fU.ensureClassicAddress)(r.masterAddress):(0,vl.deriveAddress)(e),this.seed=r.seed}get address(){return this.classicAddress}static generate(e=mg){if(!Object.values(wy.default).includes(e))throw new lu.ValidationError("Invalid cryptographic signing algorithm");const n=(0,vl.generateSeed)({algorithm:e});return Hr.fromSeed(n,{algorithm:e})}static fromSeed(e,n={}){return Hr.deriveWallet(e,{algorithm:n.algorithm,masterAddress:n.masterAddress})}static fromEntropy(e,n={}){var r;const s=(r=n.algorithm)!==null&&r!==void 0?r:mg,i={entropy:Uint8Array.from(e),algorithm:s},a=(0,vl.generateSeed)(i);return Hr.deriveWallet(a,{algorithm:s,masterAddress:n.masterAddress})}static fromMnemonic(e,n={}){var r;if(n.mnemonicEncoding==="rfc1751")return Hr.fromRFC1751Mnemonic(e,{masterAddress:n.masterAddress,algorithm:n.algorithm});if(!(0,G1.validateMnemonic)(e,uU.wordlist))throw new lu.ValidationError("Unable to parse the given mnemonic using bip39 encoding");const s=(0,G1.mnemonicToSeedSync)(e),a=cU.HDKey.fromMasterSeed(s).derive((r=n.derivationPath)!==null&&r!==void 0?r:yU);vU(a);const l=(0,Y1.bytesToHex)(a.publicKey),c=(0,Y1.bytesToHex)(a.privateKey);return new Hr(l,`00${c}`,{masterAddress:n.masterAddress})}static fromRFC1751Mnemonic(e,n){const r=(0,gU.rfc1751MnemonicToKey)(e);let s;n.algorithm===wy.default.ed25519?s="ed25519":s="secp256k1";const i=(0,Lf.encodeSeed)(r,s);return Hr.fromSeed(i,{masterAddress:n.masterAddress,algorithm:n.algorithm})}static deriveWallet(e,n={}){var r;const{publicKey:s,privateKey:i}=(0,vl.deriveKeypair)(e,{algorithm:(r=n.algorithm)!==null&&r!==void 0?r:mg});return new Hr(s,i,{seed:e,masterAddress:n.masterAddress})}sign(e,n){let r=!1;typeof n=="string"&&n.startsWith("X")?r=n:n&&(r=this.classicAddress);const s=(0,pU.omitBy)(Object.assign({},e),l=>l==null);if(s.TxnSignature||s.Signers)throw new lu.ValidationError('txJSON must not contain "TxnSignature" or "Signers" properties');wU(s),(0,hU.validate)(s);const i=Object.assign({},s);if(i.SigningPubKey=r?"":this.publicKey,r){const l={Account:r,SigningPubKey:this.publicKey,TxnSignature:J1(i,this.privateKey,r)};i.Signers=[{Signer:l}]}else i.TxnSignature=J1(i,this.privateKey);const a=(0,vy.encode)(i);return{tx_blob:a,hash:(0,mU.hashSignedTx)(a)}}verifyTransaction(e){return(0,xU.verifySignature)(e,this.publicKey)}getXAddress(e=!1,n=!1){return(0,Lf.classicAddressToXAddress)(this.classicAddress,e,n)}}Ra.Wallet=Hr;Hr.fromSecret=Hr.fromSeed;function J1(t,e,n){if(n){const r=(0,Lf.isValidXAddress)(n)?(0,Lf.xAddressToClassicAddress)(n).classicAddress:n;return(0,vl.sign)((0,vy.encodeForMultisigning)(t,r),e)}return(0,vl.sign)((0,vy.encodeForSigning)(t),e)}function wU(t){t.TransactionType==="Payment"&&typeof t.Amount!="string"&&t.Amount.value.includes(".")&&t.Amount.value.endsWith("0")&&(t.Amount=Object.assign({},t.Amount),t.Amount.value=new dU.default(t.Amount.value).toString())}var Yi={},IC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultFaucetPath=t.getFaucetHost=t.FaucetNetworkPaths=t.FaucetNetwork=void 0;const e=Me;var n;(function(i){i.Testnet="faucet.altnet.rippletest.net",i.Devnet="faucet.devnet.rippletest.net"})(n||(t.FaucetNetwork=n={})),t.FaucetNetworkPaths={[n.Testnet]:"/accounts",[n.Devnet]:"/accounts"};function r(i){const a=i.url;if(a.includes("altnet")||a.includes("testnet"))return n.Testnet;if(a.includes("sidechain-net2"))throw new e.XRPLFaucetError("Cannot fund an account on an issuing chain. Accounts must be created via the bridge.");if(a.includes("devnet"))return n.Devnet;throw new e.XRPLFaucetError("Faucet URL is not defined or inferrable.")}t.getFaucetHost=r;function s(i){return i===void 0?"/accounts":t.FaucetNetworkPaths[i]||"/accounts"}t.getDefaultFaucetPath=s})(IC);var zl=Ee&&Ee.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Yi,"__esModule",{value:!0});Yi.requestFunding=Yi.getStartingBalance=Yi.generateWalletToFund=void 0;const bU=er,jl=Me,Q1=IC,_U=Ra,RC=1,LC=20;function EU(t){return t&&(0,bU.isValidClassicAddress)(t.classicAddress)?t:_U.Wallet.generate()}Yi.generateWalletToFund=EU;function SU(t,e){return zl(this,void 0,void 0,function*(){let n=0;try{n=Number(yield t.getXrpBalance(e))}catch{}return n})}Yi.getStartingBalance=SU;function NU(t,e,n,r,s){var i,a,l;return zl(this,void 0,void 0,function*(){const c=(i=t.faucetHost)!==null&&i!==void 0?i:(0,Q1.getFaucetHost)(e);if(!c)throw new jl.XRPLFaucetError("No faucet hostname could be derived");const u=(a=t.faucetPath)!==null&&a!==void 0?a:(0,Q1.getDefaultFaucetPath)(c),d=yield fetch(`https://${c}${u}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),h=yield d.json();if(d.ok&&(!((l=d.headers.get("Content-Type"))===null||l===void 0)&&l.startsWith("application/json"))){const f=h.account.classicAddress;return TU(e,f,r,n)}return AU(d,h)})}Yi.requestFunding=NU;function TU(t,e,n,r){return zl(this,void 0,void 0,function*(){if(!e)return Promise.reject(new jl.XRPLFaucetError("The faucet account is undefined"));try{const s=yield CU(t,e,r);if(s>r)return{wallet:n,balance:s};throw new jl.XRPLFaucetError(`Unable to fund address with faucet after waiting ${RC*LC} seconds`)}catch(s){throw s instanceof Error?new jl.XRPLFaucetError(s.message):s}})}function AU(t,e){return zl(this,void 0,void 0,function*(){return Promise.reject(new jl.XRPLFaucetError(`Request failed: ${JSON.stringify({body:e||{},contentType:t.headers.get("Content-Type"),statusCode:t.status})}`))})}function CU(t,e,n){return zl(this,void 0,void 0,function*(){return new Promise((r,s)=>{let i=LC;const a=setInterval(()=>zl(this,void 0,void 0,function*(){i<0?(clearInterval(a),r(n)):i-=1;try{let l;try{l=Number(yield t.getXrpBalance(e))}catch{}l>n&&(clearInterval(a),r(l))}catch(l){clearInterval(a),l instanceof Error&&s(new jl.XRPLFaucetError(`Unable to check if the address ${e} balance has increased. Error: ${l.message}`)),s(l)}}),RC*1e3)})})}var MC={},Pw={};Object.defineProperty(Pw,"__esModule",{value:!0});const jU=zv;class xd extends jU.EventEmitter{constructor(e,n,r){super(),this.ws=new WebSocket(e),this.ws.onclose=s=>{let i;s.reason&&(i=new TextEncoder().encode(s.reason)),this.emit("close",s.code,i)},this.ws.onopen=()=>{this.emit("open")},this.ws.onerror=s=>{this.emit("error",s)},this.ws.onmessage=s=>{this.emit("message",s.data)}}get readyState(){return this.ws.readyState}close(e,n){this.readyState===1&&this.ws.close(e,n)}send(e){this.ws.send(e)}}xd.CONNECTING=0;xd.OPEN=1;xd.CLOSING=2;xd.CLOSED=3;Pw.default=xd;var Iw={},kU=Ee&&Ee.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Iw,"__esModule",{value:!0});class OU{constructor(){this.promisesAwaitingConnection=[]}resolveAllAwaiting(){this.promisesAwaitingConnection.map(({resolve:e})=>e()),this.promisesAwaitingConnection=[]}rejectAllAwaiting(e){this.promisesAwaitingConnection.map(({reject:n})=>n(e)),this.promisesAwaitingConnection=[]}awaitConnection(){return kU(this,void 0,void 0,function*(){return new Promise((e,n)=>{this.promisesAwaitingConnection.push({resolve:e,reject:n})})})}}Iw.default=OU;var Rw={};Object.defineProperty(Rw,"__esModule",{value:!0});const PU=100,IU=1e3;class RU{constructor(e={}){var n,r;this.factor=2,this.numAttempts=0,this.ms=(n=e.min)!==null&&n!==void 0?n:PU,this.max=(r=e.max)!==null&&r!==void 0?r:IU}get attempts(){return this.numAttempts}duration(){const e=this.ms*Math.pow(this.factor,this.numAttempts);return this.numAttempts+=1,Math.floor(Math.min(e,this.max))}reset(){this.numAttempts=0}}Rw.default=RU;var Lw={},LU=Ee&&Ee.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Lw,"__esModule",{value:!0});const vi=Me;class MU{constructor(){this.nextId=0,this.promisesAwaitingResponse=new Map}addPromise(e,n){return LU(this,void 0,void 0,function*(){return new Promise((r,s)=>{this.promisesAwaitingResponse.set(e,{resolve:r,reject:s,timer:n})})})}resolve(e,n){const r=this.promisesAwaitingResponse.get(e);if(r==null)throw new vi.XrplError(`No existing promise with id ${e}`,{type:"resolve",response:n});clearTimeout(r.timer),r.resolve(n),this.deletePromise(e)}reject(e,n){const r=this.promisesAwaitingResponse.get(e);if(r==null)throw new vi.XrplError(`No existing promise with id ${e}`,{type:"reject",error:n});clearTimeout(r.timer),r.reject(n),this.deletePromise(e)}rejectAll(e){this.promisesAwaitingResponse.forEach((n,r,s)=>{this.reject(r,e),this.deletePromise(r)})}createRequest(e,n){let r;e.id==null?(r=this.nextId,this.nextId+=1):r=e.id;const s=JSON.stringify(Object.assign(Object.assign({},e),{id:r})),i=setTimeout(()=>{this.reject(r,new vi.TimeoutError(`Timeout for request: ${JSON.stringify(e)} with id ${r}`,e))},n);if(i.unref&&i.unref(),this.promisesAwaitingResponse.has(r))throw clearTimeout(i),new vi.XrplError(`Response with id '${r}' is already pending`,e);const a=new Promise((l,c)=>{this.promisesAwaitingResponse.set(r,{resolve:l,reject:c,timer:i})});return[r,s,a]}handleResponse(e){var n,r;if(e.id==null||!(typeof e.id=="string"||typeof e.id=="number"))throw new vi.ResponseFormatError("valid id not found in response",e);if(this.promisesAwaitingResponse.has(e.id)){if(e.status==null){const s=new vi.ResponseFormatError("Response has no status");this.reject(e.id,s)}if(e.status==="error"){const s=e,i=new vi.RippledError((n=s.error_message)!==null&&n!==void 0?n:s.error,s);this.reject(e.id,i);return}if(e.status!=="success"){const s=new vi.ResponseFormatError(`unrecognized response.status: ${(r=e.status)!==null&&r!==void 0?r:""}`,e);this.reject(e.id,s);return}delete e.status,this.resolve(e.id,e)}}deletePromise(e){this.promisesAwaitingResponse.delete(e)}}Lw.default=MU;(function(t){var e=Ee&&Ee.__awaiter||function(_,m,x,w){function v(T){return T instanceof x?T:new x(function(E){E(T)})}return new(x||(x=Promise))(function(T,E){function D(z){try{re(w.next(z))}catch(J){E(J)}}function te(z){try{re(w.throw(z))}catch(J){E(J)}}function re(z){z.done?T(z.value):v(z.value).then(D,te)}re((w=w.apply(_,m||[])).next())})},n=Ee&&Ee.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(t,"__esModule",{value:!0}),t.Connection=t.INTENTIONAL_DISCONNECT_CODE=void 0;const r=ft,s=n(Pw),i=zv,a=Me,l=n(Iw),c=n(Rw),u=n(Lw),d=60,h=20,f=5;t.INTENTIONAL_DISCONNECT_CODE=4e3;function p(_,m){const x={agent:m.agent};m.headers&&(x.headers=m.headers),m.authorization!=null&&(x.headers=Object.assign(Object.assign({},x.headers),{Authorization:`Basic ${btoa(m.authorization)}`}));const w=Object.assign({},x);return new s.default(_,w)}function y(_,m){return e(this,void 0,void 0,function*(){return new Promise((x,w)=>{_.send(m,v=>{v?w(new a.DisconnectedError(v.message,v)):x()})})})}class b extends i.EventEmitter{constructor(m,x={}){super(),this.ws=null,this.reconnectTimeoutID=null,this.heartbeatIntervalID=null,this.retryConnectionBackoff=new c.default({min:100,max:d*1e3}),this.requestManager=new u.default,this.connectionManager=new l.default,this.trace=()=>{},this.url=m,this.config=Object.assign({timeout:h*1e3,connectionTimeout:f*1e3},x),typeof x.trace=="function"?this.trace=x.trace:x.trace&&(this.trace=console.log)}get state(){return this.ws?this.ws.readyState:s.default.CLOSED}get shouldBeConnected(){return this.ws!==null}isConnected(){return this.state===s.default.OPEN}connect(){return e(this,void 0,void 0,function*(){if(this.isConnected())return Promise.resolve();if(this.state===s.default.CONNECTING)return this.connectionManager.awaitConnection();if(!this.url)return Promise.reject(new a.ConnectionError("Cannot connect because no server was specified"));if(this.ws!=null)return Promise.reject(new a.XrplError("Websocket connection never cleaned up.",{state:this.state}));const m=setTimeout(()=>{this.onConnectionFailed(new a.ConnectionError(`Error: connect() timed out after ${this.config.connectionTimeout} ms. If your internet connection is working, the rippled server may be blocked or inaccessible. You can also try setting the 'connectionTimeout' option in the Client constructor.`))},this.config.connectionTimeout);if(this.ws=p(this.url,this.config),this.ws==null)throw new a.XrplError("Connect: created null websocket");return this.ws.on("error",x=>this.onConnectionFailed(x)),this.ws.on("error",()=>clearTimeout(m)),this.ws.on("close",x=>this.onConnectionFailed(x)),this.ws.on("close",()=>clearTimeout(m)),this.ws.once("open",()=>{this.onceOpen(m)}),this.connectionManager.awaitConnection()})}disconnect(){return e(this,void 0,void 0,function*(){return this.clearHeartbeatInterval(),this.reconnectTimeoutID!==null&&(clearTimeout(this.reconnectTimeoutID),this.reconnectTimeoutID=null),this.state===s.default.CLOSED||this.ws==null?Promise.resolve(void 0):new Promise(m=>{this.ws==null&&m(void 0),this.ws!=null&&this.ws.once("close",x=>m(x)),this.ws!=null&&this.state!==s.default.CLOSING&&this.ws.close(t.INTENTIONAL_DISCONNECT_CODE)})})}reconnect(){return e(this,void 0,void 0,function*(){this.emit("reconnect"),yield this.disconnect(),yield this.connect()})}request(m,x){return e(this,void 0,void 0,function*(){if(!this.shouldBeConnected||this.ws==null)throw new a.NotConnectedError(JSON.stringify(m),m);const[w,v,T]=this.requestManager.createRequest(m,x??this.config.timeout);return this.trace("send",v),y(this.ws,v).catch(E=>{this.requestManager.reject(w,E)}),T})}getUrl(){var m;return(m=this.url)!==null&&m!==void 0?m:""}onMessage(m){this.trace("receive",m);let x;try{x=JSON.parse(m)}catch(w){w instanceof Error&&this.emit("error","badMessage",w.message,m);return}if(x.type==null&&x.error){this.emit("error",x.error,x.error_message,x);return}if(x.type&&this.emit(x.type,x),x.type==="response")try{this.requestManager.handleResponse(x)}catch(w){w instanceof Error?this.emit("error","badMessage",w.message,m):this.emit("error","badMessage",w,w)}}onceOpen(m){return e(this,void 0,void 0,function*(){if(this.ws==null)throw new a.XrplError("onceOpen: ws is null");this.ws.removeAllListeners(),clearTimeout(m),this.ws.on("message",x=>this.onMessage(x)),this.ws.on("error",x=>this.emit("error","websocket",x.message,x)),this.ws.once("close",(x,w)=>{if(this.ws==null)throw new a.XrplError("onceClose: ws is null");this.clearHeartbeatInterval(),this.requestManager.rejectAll(new a.DisconnectedError(`websocket was closed, ${w?(0,r.hexToString)((0,r.bytesToHex)(w)):""}`)),this.ws.removeAllListeners(),this.ws=null,x===void 0?this.emit("disconnected",1011):this.emit("disconnected",x),x!==t.INTENTIONAL_DISCONNECT_CODE&&x!==void 0&&this.intentionalDisconnect()});try{this.retryConnectionBackoff.reset(),this.startHeartbeatInterval(),this.connectionManager.resolveAllAwaiting(),this.emit("connected")}catch(x){x instanceof Error&&(this.connectionManager.rejectAllAwaiting(x),yield this.disconnect().catch(()=>{}))}})}intentionalDisconnect(){const m=this.retryConnectionBackoff.duration();this.trace("reconnect",`Retrying connection in ${m}ms.`),this.emit("reconnecting",this.retryConnectionBackoff.attempts),this.reconnectTimeoutID=setTimeout(()=>{this.reconnect().catch(x=>{this.emit("error","reconnect",x.message,x)})},m)}clearHeartbeatInterval(){this.heartbeatIntervalID&&clearInterval(this.heartbeatIntervalID)}startHeartbeatInterval(){this.clearHeartbeatInterval(),this.heartbeatIntervalID=setInterval(()=>{this.heartbeat()},this.config.timeout)}heartbeat(){return e(this,void 0,void 0,function*(){this.request({command:"ping"}).catch(()=>e(this,void 0,void 0,function*(){return this.reconnect().catch(m=>{this.emit("error","reconnect",m.message,m)})}))})}onConnectionFailed(m){this.ws&&(this.ws.removeAllListeners(),this.ws.on("error",()=>{}),this.ws.close(),this.ws=null),typeof m=="number"?this.connectionManager.rejectAllAwaiting(new a.NotConnectedError(`Connection failed with code ${m}.`,{code:m})):m!=null&&m.message?this.connectionManager.rejectAllAwaiting(new a.NotConnectedError(m.message,m)):this.connectionManager.rejectAllAwaiting(new a.NotConnectedError("Connection failed."))}}t.Connection=b})(MC);var Hl={},DU=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hl,"__esModule",{value:!0});Hl.handleStreamPartialPayment=Hl.handlePartialPayment=void 0;const hh=DU(tr),FU=Ir,Hc=gd,BU=on,DC=2001;function $U(t,e){if(typeof t=="string"&&typeof e=="string")return t===e;if(typeof t=="string"||typeof e=="string")return!1;if((0,Hc.isMPTAmount)(t)&&(0,Hc.isMPTAmount)(e)){const s=new hh.default(t.value),i=new hh.default(e.value);return t.mpt_issuance_id===e.mpt_issuance_id&&s.isEqualTo(i)}if((0,Hc.isMPTAmount)(t)||(0,Hc.isMPTAmount)(e))return!1;const n=new hh.default(t.value),r=new hh.default(e.value);return t.currency===e.currency&&t.issuer===e.issuer&&n.isEqualTo(r)}function Bu(t,e){var n;if(t==null||e==null||t.TransactionType!=="Payment")return!1;let r=e;if(typeof r=="string"){if(r==="unavailable")return!1;r=(0,FU.decode)(r)}if(!(typeof t.Flags=="number"?(0,BU.isFlagEnabled)(t.Flags,Hc.PaymentFlags.tfPartialPayment):(n=t.Flags)===null||n===void 0?void 0:n.tfPartialPayment))return!1;const i=r.delivered_amount,a=t.DeliverMax;return i===void 0?!1:!$U(i,a)}function UU(t){return Bu(t.result.tx_json,t.result.meta)}function VU(t){return Bu(t.result.tx_json,t.result.metadata)}function zU(t){const{transactions:e}=t.result;return e.some(r=>{if(r.tx_json!=null){const i=r;return Bu(i.tx_json,i.meta)}const s=r;return Bu(s.tx,s.meta)})}function HU(t,e){switch(t){case"tx":return UU(e);case"transaction_entry":return VU(e);case"account_tx":return zU(e);default:return!1}}function XU(t,e){var n;if(HU(t,e)){const r=(n=e.warnings)!==null&&n!==void 0?n:[],s={id:DC,message:"This response contains a Partial Payment"};r.push(s),e.warnings=r}}Hl.handlePartialPayment=XU;function WU(t,e){var n,r;if(Bu((n=t.tx_json)!==null&&n!==void 0?n:t.transaction,t.meta)){const s=(r=t.warnings)!==null&&r!==void 0?r:[],i={id:DC,message:"This response contains a Partial Payment"};s.push(i),t.warnings=s,e("Partial payment received",JSON.stringify(t))}}Hl.handleStreamPartialPayment=WU;var xn=Ee&&Ee.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(gp,"__esModule",{value:!0});gp.Client=void 0;const KU=zv,Do=Me,qU=Hv,GU=Ts,Fo=vA,Ga=Xn,YU=zp,Br=sn,gg=Pp,JU=Ra,QU=Yi,Z1=MC,eE=Hl;function ZU(t){switch(t){case"account_channels":return"channels";case"account_lines":return"lines";case"account_objects":return"account_objects";case"account_tx":return"transactions";case"account_offers":case"book_offers":return"offers";case"ledger_data":return"state";default:return null}}function e8(t,e,n){if(e>n)throw new Error("Illegal clamp bounds");return Math.min(Math.max(t,e),n)}const t8=1.2,n8="2",r8=10,s8=400,i8=1e3;class o8 extends KU.EventEmitter{constructor(e,n={}){var r,s;if(super(),this.apiVersion=qU.DEFAULT_API_VERSION,typeof e!="string"||!/wss?(?:\+unix)?:\/\//u.exec(e))throw new Do.ValidationError("server URI must start with `wss://`, `ws://`, `wss+unix://`, or `ws+unix://`.");this.feeCushion=(r=n.feeCushion)!==null&&r!==void 0?r:t8,this.maxFeeXRP=(s=n.maxFeeXRP)!==null&&s!==void 0?s:n8,this.connection=new Z1.Connection(e,n),this.connection.on("error",(i,a,l)=>{this.emit("error",i,a,l)}),this.connection.on("reconnect",()=>{this.connection.on("connected",()=>this.emit("connected"))}),this.connection.on("disconnected",i=>{let a=i;a===Z1.INTENTIONAL_DISCONNECT_CODE&&(a=i8),this.emit("disconnected",a)}),this.connection.on("ledgerClosed",i=>{this.emit("ledgerClosed",i)}),this.connection.on("transaction",i=>{(0,eE.handleStreamPartialPayment)(i,this.connection.trace),this.emit("transaction",i)}),this.connection.on("validationReceived",i=>{this.emit("validationReceived",i)}),this.connection.on("manifestReceived",i=>{this.emit("manifestReceived",i)}),this.connection.on("peerStatusChange",i=>{this.emit("peerStatusChange",i)}),this.connection.on("consensusPhase",i=>{this.emit("consensusPhase",i)}),this.connection.on("path_find",i=>{this.emit("path_find",i)})}get url(){return this.connection.getUrl()}request(e){var n;return xn(this,void 0,void 0,function*(){const r=Object.assign(Object.assign({},e),{account:typeof e.account=="string"?(0,Fo.ensureClassicAddress)(e.account):void 0,api_version:(n=e.api_version)!==null&&n!==void 0?n:this.apiVersion}),s=yield this.connection.request(r);return(0,eE.handlePartialPayment)(e.command,s),s})}requestNextPage(e,n){return xn(this,void 0,void 0,function*(){if(!n.result.marker)return Promise.reject(new Do.NotFoundError("response does not have a next page"));const r=Object.assign(Object.assign({},e),{marker:n.result.marker});return this.request(r)})}on(e,n){return super.on(e,n)}requestAll(e,n){return xn(this,void 0,void 0,function*(){const r=n??ZU(e.command);if(!r)throw new Do.ValidationError(`no collect key for command ${e.command}`);const s=e.limit==null?1/0:e.limit;let i=0,a=e.marker;const l=[];do{const c=e8(s-i,r8,s8),u=Object.assign(Object.assign({},e),{limit:c,marker:a}),d=yield this.connection.request(u),h=d.result;if(!(r in h))throw new Do.XrplError(`${r} not in result`);const f=h[r];a=h.marker,l.push(d),Array.isArray(f)&&(i+=f.length)}while(a&&i<s);return l})}getServerInfo(){var e;return xn(this,void 0,void 0,function*(){try{const n=yield this.request({command:"server_info"});this.networkID=(e=n.result.info.network_id)!==null&&e!==void 0?e:void 0,this.buildVersion=n.result.info.build_version}catch(n){console.error(n)}})}connect(){return xn(this,void 0,void 0,function*(){return this.connection.connect().then(()=>xn(this,void 0,void 0,function*(){yield this.getServerInfo(),this.emit("connected")}))})}disconnect(){return xn(this,void 0,void 0,function*(){yield this.connection.disconnect()})}isConnected(){return this.connection.isConnected()}autofill(e,n){return xn(this,void 0,void 0,function*(){const r=Object.assign({},e);(0,Ga.setValidAddresses)(r),(0,GU.setTransactionFlagsToNumber)(r);const s=[];if(r.NetworkID==null&&(r.NetworkID=(0,Ga.txNeedsNetworkID)(this)?this.networkID:void 0),r.Sequence==null&&s.push((0,Ga.setNextValidSequenceNumber)(this,r)),r.Fee==null&&s.push((0,Ga.calculateFeePerTransactionType)(this,r,n)),r.LastLedgerSequence==null&&s.push((0,Ga.setLatestValidatedLedgerSequence)(this,r)),r.TransactionType==="AccountDelete"&&s.push((0,Ga.checkAccountDeleteBlockers)(this,r)),r.TransactionType==="Payment"&&r.DeliverMax!=null){if(r.Amount==null&&(r.Amount=r.DeliverMax),r.Amount!=null&&r.Amount!==r.DeliverMax)return Promise.reject(new Do.ValidationError("PaymentTransaction: Amount and DeliverMax fields must be identical when both are provided"));delete r.DeliverMax}return Promise.all(s).then(()=>r)})}submit(e,n){return xn(this,void 0,void 0,function*(){const r=yield(0,Fo.getSignedTx)(this,e,n);return(0,Fo.submitRequest)(this,r,n==null?void 0:n.failHard)})}submitAndWait(e,n){return xn(this,void 0,void 0,function*(){const r=yield(0,Fo.getSignedTx)(this,e,n),s=(0,Fo.getLastLedgerSequence)(r);if(s==null)throw new Do.ValidationError("Transaction must contain a LastLedgerSequence value for reliable submission.");const i=yield(0,Fo.submitRequest)(this,r,n==null?void 0:n.failHard),a=gg.hashes.hashSignedTx(r);return(0,Fo.waitForFinalTransactionOutcome)(this,a,s,i.result.engine_result)})}prepareTransaction(e,n){return xn(this,void 0,void 0,function*(){return this.autofill(e,n)})}getXrpBalance(e,n={}){var r;return xn(this,void 0,void 0,function*(){const s={command:"account_info",account:e,ledger_index:(r=n.ledger_index)!==null&&r!==void 0?r:"validated",ledger_hash:n.ledger_hash},i=yield this.request(s);return(0,gg.dropsToXrp)(i.result.account_data.Balance)})}getBalances(e,n={}){var r;return xn(this,void 0,void 0,function*(){const s=[];let i=Promise.resolve(0);n.peer||(i=this.getXrpBalance(e,{ledger_hash:n.ledger_hash,ledger_index:n.ledger_index}));const a={command:"account_lines",account:e,ledger_index:(r=n.ledger_index)!==null&&r!==void 0?r:"validated",ledger_hash:n.ledger_hash,peer:n.peer,limit:n.limit},l=this.requestAll(a);return yield Promise.all([i,l]).then(([c,u])=>{const d=u.flatMap(h=>(0,YU.formatBalances)(h.result.lines));c!==0&&s.push({currency:"XRP",value:c.toString()}),s.push(...d)}),s.slice(0,n.limit)})}getOrderbook(e,n,r={}){return xn(this,void 0,void 0,function*(){(0,Br.validateOrderbookOptions)(r);const s=(0,Br.createBookOffersRequest)(e,n,r),i=yield(0,Br.requestAllOffers)(this,s),a=yield(0,Br.requestAllOffers)(this,(0,Br.reverseRequest)(s)),l=(0,Br.extractOffers)(i),c=(0,Br.extractOffers)(a),u=(0,Br.combineOrders)(l,c),{buy:d,sell:h}=(0,Br.separateBuySellOrders)(u);return{buy:(0,Br.sortAndLimitOffers)(d,r.limit),sell:(0,Br.sortAndLimitOffers)(h,r.limit)}})}getLedgerIndex(){return xn(this,void 0,void 0,function*(){return(yield this.request({command:"ledger",ledger_index:"validated"})).result.ledger_index})}fundWallet(e,n={}){return xn(this,void 0,void 0,function*(){if(!this.isConnected())throw new Do.RippledError("Client not connected, cannot call faucet");const r=!!e,s=e&&(0,gg.isValidClassicAddress)(e.classicAddress)?e:JU.Wallet.generate(),i={destination:s.classicAddress,xrpAmount:n.amount,usageContext:n.usageContext,userAgent:"xrpl.js"};let a=0;if(r)try{a=Number(yield this.getXrpBalance(s.classicAddress))}catch{}return(0,QU.requestFunding)(n,this,a,s,i)})}}gp.Client=o8;var FC={},BC={},km={};Object.defineProperty(km,"__esModule",{value:!0});km.AMENDMENTS_ID=void 0;km.AMENDMENTS_ID="7DB0788C020F02780A673DC74757F23823FA3014C1866E72CC4CD8B226CD6EF4";var Om={};Object.defineProperty(Om,"__esModule",{value:!0});Om.FEE_SETTINGS_ID=void 0;Om.FEE_SETTINGS_ID="4BC50C9B0D8515D3EAAE1E74B29A95804346C491EE1A95BF25E4AAB854A6A651";var Pm={};Object.defineProperty(Pm,"__esModule",{value:!0});Pm.NEGATIVE_UNL_ID=void 0;Pm.NEGATIVE_UNL_ID="2E8A59AA9D3B5B186B0B9E0F62E6C02587CA74A4D778938E957B6357D364B244";var Im={};Object.defineProperty(Im,"__esModule",{value:!0});Im.RippleStateFlags=void 0;var tE;(function(t){t[t.lsfLowReserve=65536]="lsfLowReserve",t[t.lsfHighReserve=131072]="lsfHighReserve",t[t.lsfLowAuth=262144]="lsfLowAuth",t[t.lsfHighAuth=524288]="lsfHighAuth",t[t.lsfLowNoRipple=1048576]="lsfLowNoRipple",t[t.lsfHighNoRipple=2097152]="lsfHighNoRipple",t[t.lsfLowFreeze=4194304]="lsfLowFreeze",t[t.lsfHighFreeze=8388608]="lsfHighFreeze",t[t.lsfAMMNode=16777216]="lsfAMMNode"})(tE||(Im.RippleStateFlags=tE={}));var Rm={};Object.defineProperty(Rm,"__esModule",{value:!0});Rm.SignerListFlags=void 0;var nE;(function(t){t[t.lsfOneOwnerCount=65536]="lsfOneOwnerCount"})(nE||(Rm.SignerListFlags=nE={}));(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SignerListFlags=t.RippleStateFlags=t.OfferFlags=t.NEGATIVE_UNL_ID=t.FEE_SETTINGS_ID=t.AMENDMENTS_ID=t.AccountRootFlags=void 0;const e=ed;Object.defineProperty(t,"AccountRootFlags",{enumerable:!0,get:function(){return e.AccountRootFlags}});const n=km;Object.defineProperty(t,"AMENDMENTS_ID",{enumerable:!0,get:function(){return n.AMENDMENTS_ID}});const r=Om;Object.defineProperty(t,"FEE_SETTINGS_ID",{enumerable:!0,get:function(){return r.FEE_SETTINGS_ID}});const s=Pm;Object.defineProperty(t,"NEGATIVE_UNL_ID",{enumerable:!0,get:function(){return s.NEGATIVE_UNL_ID}});const i=pd;Object.defineProperty(t,"OfferFlags",{enumerable:!0,get:function(){return i.OfferFlags}});const a=Im;Object.defineProperty(t,"RippleStateFlags",{enumerable:!0,get:function(){return a.RippleStateFlags}});const l=Rm;Object.defineProperty(t,"SignerListFlags",{enumerable:!0,get:function(){return l.SignerListFlags}})})(BC);var $C={};Object.defineProperty($C,"__esModule",{value:!0});(function(t){var e=Ee&&Ee.__createBinding||(Object.create?function(a,l,c,u){u===void 0&&(u=c);var d=Object.getOwnPropertyDescriptor(l,c);(!d||("get"in d?!l.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return l[c]}}),Object.defineProperty(a,u,d)}:function(a,l,c,u){u===void 0&&(u=c),a[u]=l[c]}),n=Ee&&Ee.__setModuleDefault||(Object.create?function(a,l){Object.defineProperty(a,"default",{enumerable:!0,value:l})}:function(a,l){a.default=l}),r=Ee&&Ee.__importStar||function(a){if(a&&a.__esModule)return a;var l={};if(a!=null)for(var c in a)c!=="default"&&Object.prototype.hasOwnProperty.call(a,c)&&e(l,a,c);return n(l,a),l},s=Ee&&Ee.__exportStar||function(a,l){for(var c in a)c!=="default"&&!Object.prototype.hasOwnProperty.call(l,c)&&e(l,a,c)};Object.defineProperty(t,"__esModule",{value:!0}),t.parseTransactionFlags=t.parseAccountRootFlags=t.setTransactionFlagsToNumber=t.LedgerEntry=void 0,t.LedgerEntry=r(BC);var i=Ts;Object.defineProperty(t,"setTransactionFlagsToNumber",{enumerable:!0,get:function(){return i.setTransactionFlagsToNumber}}),Object.defineProperty(t,"parseAccountRootFlags",{enumerable:!0,get:function(){return i.parseAccountRootFlags}}),Object.defineProperty(t,"parseTransactionFlags",{enumerable:!0,get:function(){return i.parseTransactionFlags}}),s($C,t),s(gd,t),s(Hv,t)})(FC);var Lm={},UC={},Mm={},dn={};Object.defineProperty(dn,"__esModule",{value:!0});dn.parseSecretString=dn.checkChecksum=dn.calculateChecksum=dn.secretToEntropy=dn.entropyToSecret=dn.randomSecret=dn.randomEntropy=void 0;const Mf=ft;function VC(){return(0,Mf.randomBytes)(16)}dn.randomEntropy=VC;function zC(t,e){return e*(t*2+1)%9}dn.calculateChecksum=zC;function HC(t,e,n){let r,s;if(typeof e=="string"){if(e.length!==6)throw new Error("value must have a length of 6");r=parseInt(e.slice(5),10),s=parseInt(e.slice(0,5),10)}else{if(typeof n!="number")throw new Error("checksum must be a number when value is a number");r=n,s=e}return s*(t*2+1)%9===r}dn.checkChecksum=HC;function XC(t){const e=new Array(Math.ceil(t.length/2)),n=Array.from(e,(r,s)=>{const i=t.slice(s*2,(s+1)*2),a=parseInt((0,Mf.bytesToHex)(i),16);return"0".repeat(5-String(a).length)+String(a)+String(zC(s,a))});if(n.length!==8)throw new Error("Chucks must have 8 digits");return n}dn.entropyToSecret=XC;function a8(){return XC(VC())}dn.randomSecret=a8;function l8(t){return(0,Mf.concat)(t.map((e,n)=>{const r=Number(e.slice(0,5)),s=Number(e.slice(5));if(e.length!==6)throw new Error("Invalid secret: number invalid");if(!HC(n,r,s))throw new Error("Invalid secret part: checksum invalid");const i=`0000${r.toString(16)}`.slice(-4);return(0,Mf.hexToBytes)(i)}))}dn.secretToEntropy=l8;function c8(t){const e=t.replace(/[^0-9]/gu,"");if(e.length!==48)throw new Error("Invalid secret string (should contain 8 blocks of 6 digits");return Array.from(new Array(8),(n,r)=>e.slice(r*6,(r+1)*6))}dn.parseSecretString=c8;Object.defineProperty(Mm,"__esModule",{value:!0});Mm.Account=void 0;const xg=bo,fh=dn;class u8{constructor(e){this._account={familySeed:"",address:"",keypair:{publicKey:"",privateKey:""}},typeof e=="string"?this._secret=(0,fh.parseSecretString)(e):Array.isArray(e)?this._secret=e:e instanceof Uint8Array?this._secret=(0,fh.entropyToSecret)(e):this._secret=(0,fh.randomSecret)(),d8(this._secret),this.derive()}getSecret(){return this._secret}getSecretString(){return this._secret.join(" ")}getAddress(){return this._account.address}getFamilySeed(){return this._account.familySeed}getKeypair(){return this._account.keypair}toString(){return this.getSecretString()}derive(){try{const e=(0,fh.secretToEntropy)(this._secret);this._account.familySeed=(0,xg.generateSeed)({entropy:e}),this._account.keypair=(0,xg.deriveKeypair)(this._account.familySeed),this._account.address=(0,xg.deriveAddress)(this._account.keypair.publicKey)}catch(e){let n="Unknown Error";throw e instanceof Error&&(n=e.message),new Error(n)}}}Mm.Account=u8;function d8(t){if(t.length!==8)throw new Error("Secret must have 8 numbers");t.forEach(e=>{if(e.length!==6)throw new Error("Each secret number must be 6 digits")})}(function(t){var e=Ee&&Ee.__createBinding||(Object.create?function(r,s,i,a){a===void 0&&(a=i);var l=Object.getOwnPropertyDescriptor(s,i);(!l||("get"in l?!s.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,a,l)}:function(r,s,i,a){a===void 0&&(a=i),r[a]=s[i]}),n=Ee&&Ee.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&e(s,r,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(Mm,t),n(dn,t)})(UC);var h8=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Lm,"__esModule",{value:!0});Lm.walletFromSecretNumbers=void 0;const f8=UC,rE=h8(md),p8=Ra;function m8(t,e){var n;const r=new f8.Account(t).getFamilySeed(),s={masterAddress:void 0,algorithm:void 0};return e===void 0?s.algorithm=rE.default.secp256k1:(s.masterAddress=e.masterAddress,s.algorithm=(n=e.algorithm)!==null&&n!==void 0?n:rE.default.secp256k1),p8.Wallet.fromSecret(r,s)}Lm.walletFromSecretNumbers=m8;(function(t){var e=Ee&&Ee.__createBinding||(Object.create?function(u,d,h,f){f===void 0&&(f=h);var p=Object.getOwnPropertyDescriptor(d,h);(!p||("get"in p?!d.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return d[h]}}),Object.defineProperty(u,f,p)}:function(u,d,h,f){f===void 0&&(f=h),u[f]=d[h]}),n=Ee&&Ee.__exportStar||function(u,d){for(var h in u)h!=="default"&&!Object.prototype.hasOwnProperty.call(d,h)&&e(d,u,h)},r=Ee&&Ee.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(t,"__esModule",{value:!0}),t.rfc1751MnemonicToKey=t.keyToRFC1751Mnemonic=t.walletFromSecretNumbers=t.Wallet=t.ECDSA=t.Client=void 0;var s=gp;Object.defineProperty(t,"Client",{enumerable:!0,get:function(){return s.Client}}),n(FC,t),n(Pp,t);var i=md;Object.defineProperty(t,"ECDSA",{enumerable:!0,get:function(){return r(i).default}}),n(Me,t);var a=Ra;Object.defineProperty(t,"Wallet",{enumerable:!0,get:function(){return a.Wallet}});var l=Lm;Object.defineProperty(t,"walletFromSecretNumbers",{enumerable:!0,get:function(){return l.walletFromSecretNumbers}});var c=wa;Object.defineProperty(t,"keyToRFC1751Mnemonic",{enumerable:!0,get:function(){return c.keyToRFC1751Mnemonic}}),Object.defineProperty(t,"rfc1751MnemonicToKey",{enumerable:!0,get:function(){return c.rfc1751MnemonicToKey}}),n(ba,t)})(Be);async function by(t){var e;if(!t)return 0;try{const n=new Be.Client("wss://xrplcluster.com");await n.connect();const r=await n.request({command:"account_info",account:t,ledger_index:"validated"});return await n.disconnect(),parseFloat(r.result.account_data.Balance)/1e6}catch(n){if(((e=n.data)==null?void 0:e.error)==="actNotFound")return 0;throw console.error("Error fetching XRP balance:",n),n}}function g8({currentPage:t,onNavigate:e}){const[n,r]=M.useState(null),[s,i]=M.useState(!0),[a,l]=M.useState(null),[c,u]=M.useState(0),[d,h]=M.useState(!1),f=M.useRef(null);M.useEffect(()=>{const m=x=>{f.current&&!f.current.contains(x.target)&&h(!1)};return d&&(document.addEventListener("mousedown",m),document.addEventListener("touchstart",m)),()=>{document.removeEventListener("mousedown",m),document.removeEventListener("touchstart",m)}},[d]),M.useEffect(()=>{b();const m=setInterval(b,3e4);p();const x=()=>p();return window.addEventListener("walletConnected",x),window.addEventListener("walletDisconnected",x),()=>{clearInterval(m),window.removeEventListener("walletConnected",x),window.removeEventListener("walletDisconnected",x)}},[]),M.useEffect(()=>{if(a!=null&&a.address){y();const m=setInterval(y,1e4);return()=>clearInterval(m)}else u(0)},[a]);const p=()=>{const m=localStorage.getItem("connectedWallet");l(m?JSON.parse(m):null)},y=async()=>{if(a!=null&&a.address)try{const m=await by(a.address);u(m)}catch(m){console.error("Error fetching wallet balance:",m)}},b=async()=>{try{const m=await GR.get("https://api.coingecko.com/api/v3/simple/price?ids=ripple&vs_currencies=usd&include_24hr_change=true");r({price:m.data.ripple.usd,change:m.data.ripple.usd_24h_change}),i(!1)}catch(m){console.error("Error fetching XRP price:",m),i(!1)}},_=[{id:"dashboard",label:"Dashboard",icon:""},{id:"top10",label:"Top 10",icon:""},{id:"memes",label:"Memes",icon:""},{id:"pools",label:"Pools",icon:""},{id:"trade",label:"Trade",icon:""},{id:"bottrader",label:"Bot Trader",icon:""},{id:"vault",label:"Vault",icon:""},{id:"mytokens",label:"My Tokens",icon:""},{id:"analytics",label:"Analytics",icon:""},{id:"aichat",label:"AI Chat",icon:""},{id:"about",label:"About",icon:""},{id:"wallets",label:"Wallets",icon:""},{id:"setup",label:"Setup",icon:""}];return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"hidden lg:block fixed left-0 top-0 h-screen w-64 glass flex-col border-r border-purple-500/20",children:[o.jsxs("div",{className:"p-6 border-b border-purple-500/20",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("h1",{className:"text-3xl font-bold",children:[o.jsx("span",{className:"text-white",children:"MEME"}),o.jsx("span",{className:"bg-gradient-to-r from-purple-400 to-purple-600 bg-clip-text text-transparent",children:"KINGS"})]}),o.jsx("span",{className:"text-3xl",style:{filter:"drop-shadow(0 0 8px rgba(168, 85, 247, 0.8))",textShadow:"0 0 12px rgba(168, 85, 247, 0.6)"},children:""})]}),o.jsx("p",{className:"text-purple-300/60 text-xs mt-1",children:"XRPL Meme Token Factory"})]}),o.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:_.map(m=>o.jsxs("button",{onClick:()=>e(m.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-300 ${t===m.id?"bg-gradient-to-r from-purple-600 to-purple-700 text-white shadow-lg shadow-purple-500/50":"text-purple-300 hover:bg-purple-900/30 hover:text-purple-200"}`,children:[o.jsx("span",{className:"text-xl",children:m.icon}),o.jsx("span",{className:"font-medium",children:m.label})]},m.id))}),o.jsxs("div",{className:"p-4 border-t border-purple-500/20 space-y-3",children:[a&&o.jsxs("div",{className:"glass rounded-lg p-4 bg-green-500/10 border border-green-500/30",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"}),o.jsx("span",{className:"text-green-300 text-xs font-medium",children:"Connected Wallet"})]}),o.jsx("div",{className:"text-purple-200 font-bold text-sm mb-1",children:a.name}),o.jsxs("div",{className:"text-purple-300 text-xs font-mono break-all",children:[a.address.slice(0,10),"...",a.address.slice(-8)]}),o.jsxs("div",{className:"text-purple-400 text-xs mt-2",children:[c.toFixed(3)," XRP"]})]}),o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-purple-300 text-sm font-medium",children:"XRP/USD"}),!s&&n&&o.jsxs("span",{className:`text-xs font-medium ${n.change>=0?"text-green-400":"text-red-400"}`,children:[n.change>=0?"":""," ",Math.abs(n.change).toFixed(2),"%"]})]}),s?o.jsx("div",{className:"text-purple-400 text-lg animate-pulse",children:"Loading..."}):n?o.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:["$",n.price.toFixed(4)]}):o.jsx("div",{className:"text-purple-400 text-sm",children:"Unable to load"})]})]})]}),o.jsxs("div",{ref:f,className:"lg:hidden fixed top-0 left-0 right-0 glass border-b border-purple-500/20 z-50 backdrop-blur-lg",children:[o.jsxs("div",{className:"flex items-center justify-between p-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("h1",{className:"text-2xl font-bold",children:[o.jsx("span",{className:"text-white",children:"MEME"}),o.jsx("span",{className:"bg-gradient-to-r from-purple-400 to-purple-600 bg-clip-text text-transparent",children:"KINGS"})]}),o.jsx("span",{className:"text-2xl",style:{filter:"drop-shadow(0 0 8px rgba(168, 85, 247, 0.8))",textShadow:"0 0 12px rgba(168, 85, 247, 0.6)"},children:""})]}),o.jsx("button",{onClick:()=>h(!d),className:"p-2 rounded-lg text-purple-300 hover:bg-purple-900/30 transition-all duration-200","aria-label":"Toggle menu",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d?o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"}):o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})})]}),o.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${d?"max-h-[calc(100vh-80px)] opacity-100":"max-h-0 opacity-0"}`,children:o.jsxs("div",{className:"px-3 pb-3 space-y-1 max-h-[calc(100vh-100px)] overflow-y-auto",children:[_.map(m=>o.jsxs("button",{onClick:()=>{e(m.id),h(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 ${t===m.id?"bg-gradient-to-r from-purple-600 to-purple-700 text-white shadow-lg":"text-purple-300 hover:bg-purple-900/30"}`,children:[o.jsx("span",{className:"text-xl",children:m.icon}),o.jsx("span",{className:"font-medium",children:m.label})]},m.id)),a&&o.jsxs("div",{className:"glass rounded-lg p-4 bg-green-500/10 border border-green-500/30 mt-3",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"}),o.jsx("span",{className:"text-green-300 text-xs font-medium",children:"Connected Wallet"})]}),o.jsx("div",{className:"text-purple-200 font-bold text-sm mb-1",children:a.name}),o.jsxs("div",{className:"text-purple-300 text-xs font-mono break-all",children:[a.address.slice(0,10),"...",a.address.slice(-8)]}),o.jsxs("div",{className:"text-purple-400 text-xs mt-2",children:[c.toFixed(3)," XRP"]})]}),o.jsxs("div",{className:"glass rounded-lg p-4 mt-2",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-purple-300 text-sm font-medium",children:"XRP/USD"}),!s&&n&&o.jsxs("span",{className:`text-xs font-medium ${n.change>=0?"text-green-400":"text-red-400"}`,children:[n.change>=0?"":""," ",Math.abs(n.change).toFixed(2),"%"]})]}),s?o.jsx("div",{className:"text-purple-400 text-lg animate-pulse",children:"Loading..."}):n?o.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:["$",n.price.toFixed(4)]}):o.jsx("div",{className:"text-purple-400 text-sm",children:"Unable to load"})]})]})})]})]})}const x8="modulepreload",y8=function(t){return"/"+t},sE={},yd=function(e,n,r){if(!n||n.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=y8(i),i in sE)return;sE[i]=!0;const a=i.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!r)for(let d=s.length-1;d>=0;d--){const h=s[d];if(h.href===i&&(!a||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":x8,a||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),a)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i})},v8=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>yd(()=>Promise.resolve().then(()=>ac),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Mw extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class iE extends Mw{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class oE extends Mw{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class aE extends Mw{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var _y;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(_y||(_y={}));var w8=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class b8{constructor(e,{headers:n={},customFetch:r,region:s=_y.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=v8(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return w8(this,arguments,void 0,function*(n,r={}){var s;try{const{headers:i,method:a,body:l,signal:c}=r;let u={},{region:d}=r;d||(d=this.region);const h=new URL(`${this.url}/${n}`);d&&d!=="any"&&(u["x-region"]=d,h.searchParams.set("forceFunctionRegion",d));let f;l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",f=l):typeof l=="string"?(u["Content-Type"]="text/plain",f=l):typeof FormData<"u"&&l instanceof FormData?f=l:(u["Content-Type"]="application/json",f=JSON.stringify(l)));const p=yield this.fetch(h.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),i),body:f,signal:c}).catch(m=>{throw m.name==="AbortError"?m:new iE(m)}),y=p.headers.get("x-relay-error");if(y&&y==="true")throw new oE(p);if(!p.ok)throw new aE(p);let b=((s=p.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),_;return b==="application/json"?_=yield p.json():b==="application/octet-stream"?_=yield p.blob():b==="text/event-stream"?_=p:b==="multipart/form-data"?_=yield p.formData():_=yield p.text(),{data:_,error:null,response:p}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new iE(i)}:{data:null,error:i,response:i instanceof aE||i instanceof oE?i.context:void 0}}})}}var Kn={},Dw={},Dm={},vd={},Fm={},Bm={},_8=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Xl=_8();const E8=Xl.fetch,WC=Xl.fetch.bind(Xl),KC=Xl.Headers,S8=Xl.Request,N8=Xl.Response,ac=Object.freeze(Object.defineProperty({__proto__:null,Headers:KC,Request:S8,Response:N8,default:WC,fetch:E8},Symbol.toStringTag,{value:"Module"})),T8=ek(ac);var $m={};Object.defineProperty($m,"__esModule",{value:!0});let A8=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};$m.default=A8;var qC=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Bm,"__esModule",{value:!0});const C8=qC(T8),j8=qC($m);let k8=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=C8.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,c,u;let d=null,h=null,f=null,p=i.status,y=i.statusText;if(i.ok){if(this.method!=="HEAD"){const x=await i.text();x===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?h=x:h=JSON.parse(x))}const _=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),m=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");_&&m&&m.length>1&&(f=parseInt(m[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,p=406,y="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const _=await i.text();try{d=JSON.parse(_),Array.isArray(d)&&i.status===404&&(h=[],d=null,p=200,y="OK")}catch{i.status===404&&_===""?(p=204,y="No Content"):d={message:_}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,p=200,y="OK"),d&&this.shouldThrowOnError)throw new j8.default(d)}return{error:d,data:h,count:f,status:p,statusText:y}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,l,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};Bm.default=k8;var O8=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Fm,"__esModule",{value:!0});const P8=O8(Bm);let I8=class extends P8.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var l;const c=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${u}"; options=${c};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Fm.default=I8;var R8=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vd,"__esModule",{value:!0});const L8=R8(Fm);let M8=class extends L8.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${a}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};vd.default=M8;var D8=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Dm,"__esModule",{value:!0});const Ic=D8(vd);let F8=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(e,n){const{head:r=!1,count:s}=n??{},i=r?"HEAD":"GET";let a=!1;const l=(e??"*").split("").map(c=>/\s/.test(c)&&!a?"":(c==='"'&&(a=!a),c)).join("");return this.url.searchParams.set("select",l),s&&this.headers.append("Prefer",`count=${s}`),new Ic.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var s;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ic.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var a;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Ic.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new Ic.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Ic.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Dm.default=F8;var GC=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Dw,"__esModule",{value:!0});const B8=GC(Dm),$8=GC(vd);let U8=class YC{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new B8.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new YC(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){var a;let l;const c=new URL(`${this.url}/rpc/${e}`);let u;r||s?(l=r?"HEAD":"GET",Object.entries(n).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{c.searchParams.append(h,f)})):(l="POST",u=n);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new $8.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};Dw.default=U8;var lc=Ee&&Ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Kn,"__esModule",{value:!0});Kn.PostgrestError=Kn.PostgrestBuilder=Kn.PostgrestTransformBuilder=Kn.PostgrestFilterBuilder=Kn.PostgrestQueryBuilder=Kn.PostgrestClient=void 0;const JC=lc(Dw);Kn.PostgrestClient=JC.default;const QC=lc(Dm);Kn.PostgrestQueryBuilder=QC.default;const ZC=lc(vd);Kn.PostgrestFilterBuilder=ZC.default;const ej=lc(Fm);Kn.PostgrestTransformBuilder=ej.default;const tj=lc(Bm);Kn.PostgrestBuilder=tj.default;const nj=lc($m);Kn.PostgrestError=nj.default;var V8=Kn.default={PostgrestClient:JC.default,PostgrestQueryBuilder:QC.default,PostgrestFilterBuilder:ZC.default,PostgrestTransformBuilder:ej.default,PostgrestBuilder:tj.default,PostgrestError:nj.default};const{PostgrestClient:z8,PostgrestQueryBuilder:K9,PostgrestFilterBuilder:q9,PostgrestTransformBuilder:G9,PostgrestBuilder:Y9,PostgrestError:J9}=V8;class H8{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const X8="2.74.0",W8=`realtime-js/${X8}`,K8="1.0.0",Ey=1e4,q8=1e3,G8=100;var cu;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(cu||(cu={}));var Qt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Qt||(Qt={}));var Xr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Xr||(Xr={}));var Sy;(function(t){t.websocket="websocket"})(Sy||(Sy={}));var Ko;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ko||(Ko={}));class Y8{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(e.slice(a,a+s));a=a+s;const c=r.decode(e.slice(a,a+i));a=a+i;const u=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class rj{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var yt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(yt||(yt={}));const lE=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((i,a)=>(i[a]=J8(a,t,e,s),i),{}):{}},J8=(t,e,n,r)=>{const s=e.find(l=>l.name===t),i=s==null?void 0:s.type,a=n[t];return i&&!r.includes(i)?sj(i,a):Ny(a)},sj=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return tV(e,n)}switch(t){case yt.bool:return Q8(e);case yt.float4:case yt.float8:case yt.int2:case yt.int4:case yt.int8:case yt.numeric:case yt.oid:return Z8(e);case yt.json:case yt.jsonb:return eV(e);case yt.timestamp:return nV(e);case yt.abstime:case yt.date:case yt.daterange:case yt.int4range:case yt.int8range:case yt.money:case yt.reltime:case yt.text:case yt.time:case yt.timestamptz:case yt.timetz:case yt.tsrange:case yt.tstzrange:return Ny(e);default:return Ny(e)}},Ny=t=>t,Q8=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Z8=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},eV=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},tV=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const a=t.slice(1,n);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>sj(e,l))}return t},nV=t=>typeof t=="string"?t.replace(" ","T"):t,ij=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class yg{constructor(e,n,r={},s=Ey){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var cE;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(cE||(cE={}));class uu{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=uu.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=uu.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=uu.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),a=this.transformState(n),l={},c={};return this.map(i,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const h=i[u];if(h){const f=d.map(_=>_.presence_ref),p=h.map(_=>_.presence_ref),y=d.filter(_=>p.indexOf(_.presence_ref)<0),b=h.filter(_=>f.indexOf(_.presence_ref)<0);y.length>0&&(l[u]=y),b.length>0&&(c[u]=b)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);e[l].unshift(...f)}r(l,d,c)}),this.map(a,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,s(l,u,c),u.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var uE;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(uE||(uE={}));var du;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(du||(du={}));var Bs;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Bs||(Bs={}));class Fw{constructor(e,n={config:{}},r){var s,i;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Qt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new yg(this,Xr.join,this.params,this.timeout),this.rejoinTimer=new rj(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Qt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Qt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Qt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Qt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Qt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Xr.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new uu(this),this.broadcastEndpointURL=ij(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Qt.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[du.PRESENCE]&&this.bindings[du.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(Bs.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(Bs.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var y;if(this.socket.setAuth(),p===void 0){e==null||e(Bs.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,_=(y=b==null?void 0:b.length)!==null&&y!==void 0?y:0,m=[];for(let x=0;x<_;x++){const w=b[x],{filter:{event:v,schema:T,table:E,filter:D}}=w,te=p&&p[x];if(te&&te.event===v&&te.schema===T&&te.table===E&&te.filter===D)m.push(Object.assign(Object.assign({},w),{id:te.id}));else{this.unsubscribe(),this.state=Qt.errored,e==null||e(Bs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e(Bs.SUBSCRIBED);return}}).receive("error",p=>{this.state=Qt.errored,e==null||e(Bs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Bs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Qt.joined&&e===du.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Qt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Xr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new yg(this,Xr.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Qt.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new yg(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>G8){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const a=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Xr;if(r&&[l,c,u,d].indexOf(a)>=0&&r!==this._joinRef())return;let f=this._onMessage(a,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var y,b,_;return((y=p.filter)===null||y===void 0?void 0:y.event)==="*"||((_=(b=p.filter)===null||b===void 0?void 0:b.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===a}).map(p=>p.callback(f,r)):(i=this.bindings[a])===null||i===void 0||i.filter(p=>{var y,b,_,m,x,w;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const v=p.id,T=(y=p.filter)===null||y===void 0?void 0:y.event;return v&&((b=n.ids)===null||b===void 0?void 0:b.includes(v))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const v=(x=(m=p==null?void 0:p.filter)===null||m===void 0?void 0:m.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return v==="*"||v===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:b,table:_,commit_timestamp:m,type:x,errors:w}=y;f=Object.assign(Object.assign({},{schema:b,table:_,commit_timestamp:m,eventType:x,new:{},old:{},errors:w}),this._getPayloadRecords(y))}p.callback(f,r)})}_isClosed(){return this.state===Qt.closed}_isJoined(){return this.state===Qt.joined}_isJoining(){return this.state===Qt.joining}_isLeaving(){return this.state===Qt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Fw.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Xr.close,{},e)}_onError(e){this._on(Xr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Qt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=lE(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=lE(e.columns,e.old_record)),n}}const vg=()=>{},ph={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},rV=[1e3,2e3,5e3,1e4],sV=1e4,iV=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class oV{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ey,this.transport=null,this.heartbeatIntervalMs=ph.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=vg,this.ref=0,this.reconnectTimer=null,this.logger=vg,this.conn=null,this.sendBuffer=[],this.serializer=new Y8,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>yd(()=>Promise.resolve().then(()=>ac),void 0).then(({default:l})=>l(...a)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Sy.websocket}`,this.httpEndpoint=ij(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=H8.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:K8}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case cu.connecting:return Ko.Connecting;case cu.open:return Ko.Open;case cu.closing:return Ko.Closing;default:return Ko.Closed}}isConnected(){return this.connectionState()===Ko.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Fw(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,a=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(q8,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},ph.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:a}=n,l=a?`(${a})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Xr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([iV],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:W8};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Xr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new rj(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ph.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,a,l,c,u,d;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Ey,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:ph.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:vg,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:h=>rV[h-1]||sV,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(h,f)=>f(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Bw extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Wt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class aV extends Bw{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ty extends Bw{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var lV=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const oj=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>yd(()=>Promise.resolve().then(()=>ac),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},cV=()=>lV(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield yd(()=>Promise.resolve().then(()=>ac),void 0)).Response:Response}),Ay=t=>{if(Array.isArray(t))return t.map(n=>Ay(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Ay(r)}),e},uV=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var La=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const wg=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),dV=(t,e,n)=>La(void 0,void 0,void 0,function*(){const r=yield cV();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const i=t.status||500,a=(s==null?void 0:s.statusCode)||i+"";e(new aV(wg(s),i,a))}).catch(s=>{e(new Ty(wg(s),s))}):e(new Ty(wg(t),t))}),hV=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(uV(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function wd(t,e,n,r,s,i){return La(this,void 0,void 0,function*(){return new Promise((a,l)=>{t(n,hV(e,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>dV(c,l,r))})})}function Df(t,e,n,r){return La(this,void 0,void 0,function*(){return wd(t,"GET",e,n,r)})}function gs(t,e,n,r,s){return La(this,void 0,void 0,function*(){return wd(t,"POST",e,r,s,n)})}function Cy(t,e,n,r,s){return La(this,void 0,void 0,function*(){return wd(t,"PUT",e,r,s,n)})}function fV(t,e,n,r){return La(this,void 0,void 0,function*(){return wd(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function aj(t,e,n,r,s){return La(this,void 0,void 0,function*(){return wd(t,"DELETE",e,r,s,n)})}var pV=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class mV{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return pV(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Wt(e))return{data:null,error:e};throw e}})}}var gV=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class xV{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}asStream(){return new mV(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.execute().then(e,n)}execute(){return gV(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Wt(e))return{data:null,error:e};throw e}})}}var $n=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const yV={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},dE={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class vV{constructor(e,n={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=oj(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,s){return $n(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},dE),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield(e=="PUT"?Cy:gs)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}})}upload(e,n,r){return $n(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return $n(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:dE.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield Cy(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Wt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return $n(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield gs(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new Bw("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}})}update(e,n,r){return $n(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return $n(this,void 0,void 0,function*(){try{return{data:yield gs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Wt(s))return{data:null,error:s};throw s}})}copy(e,n,r){return $n(this,void 0,void 0,function*(){try{return{data:{path:(yield gs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Wt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return $n(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield gs(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Wt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return $n(this,void 0,void 0,function*(){try{const s=yield gs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Wt(s))return{data:null,error:s};throw s}})}download(e,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=i?`?${i}`:"",l=this._getFinalPath(e),c=()=>Df(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0});return new xV(c,this.shouldThrowOnError)}info(e){return $n(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Df(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Ay(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}})}exists(e){return $n(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield fV(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wt(r)&&r instanceof Ty){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(e){return $n(this,void 0,void 0,function*(){try{return{data:yield aj(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Wt(n))return{data:null,error:n};throw n}})}list(e,n,r){return $n(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},yV),n),{prefix:e||""});return{data:yield gs(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Wt(s))return{data:null,error:s};throw s}})}listV2(e,n){return $n(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield gs(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const wV="2.74.0",bV={"X-Client-Info":`storage-js/${wV}`};var Ya=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class _V{constructor(e,n={},r,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},bV),n),this.fetch=oj(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Ya(this,void 0,void 0,function*(){try{return{data:yield Df(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Wt(e))return{data:null,error:e};throw e}})}getBucket(e){return Ya(this,void 0,void 0,function*(){try{return{data:yield Df(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Wt(n))return{data:null,error:n};throw n}})}createBucket(e){return Ya(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield gs(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Wt(s))return{data:null,error:s};throw s}})}updateBucket(e,n){return Ya(this,void 0,void 0,function*(){try{return{data:yield Cy(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ya(this,void 0,void 0,function*(){try{return{data:yield gs(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Wt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Ya(this,void 0,void 0,function*(){try{return{data:yield aj(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Wt(n))return{data:null,error:n};throw n}})}}class EV extends _V{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new vV(this.url,this.headers,e,this.fetch)}}const SV="2.74.0";let Xc="";typeof Deno<"u"?Xc="deno":typeof document<"u"?Xc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Xc="react-native":Xc="node";const NV={"X-Client-Info":`supabase-js-${Xc}/${SV}`},TV={headers:NV},AV={schema:"public"},CV={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},jV={};var kV=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const OV=t=>{let e;return t?e=t:typeof fetch>"u"?e=WC:e=fetch,(...n)=>e(...n)},PV=()=>typeof Headers>"u"?KC:Headers,IV=(t,e,n)=>{const r=OV(n),s=PV();return(i,a)=>kV(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},a),{headers:u}))})};var RV=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};function LV(t){return t.endsWith("/")?t:t+"/"}function MV(t,e){var n,r;const{db:s,auth:i,realtime:a,global:l}=t,{db:c,auth:u,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>RV(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function DV(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(LV(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const lj="2.74.0",il=30*1e3,jy=3,bg=jy*il,FV="http://localhost:9999",BV="supabase.auth.token",$V={"X-Client-Info":`gotrue-js/${lj}`},ky="X-Supabase-Api-Version",cj={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},UV=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,VV=10*60*1e3;class $u extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Je(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class zV extends $u{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function HV(t){return Je(t)&&t.name==="AuthApiError"}class qo extends $u{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class No extends $u{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Ei extends No{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function XV(t){return Je(t)&&t.name==="AuthSessionMissingError"}class Ja extends No{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class mh extends No{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class gh extends No{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function WV(t){return Je(t)&&t.name==="AuthImplicitGrantRedirectError"}class hE extends No{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Oy extends No{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function _g(t){return Je(t)&&t.name==="AuthRetryableFetchError"}class fE extends No{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Py extends No{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ff="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),pE=` 	
\r=`.split(""),KV=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<pE.length;e+=1)t[pE[e].charCodeAt(0)]=-2;for(let e=0;e<Ff.length;e+=1)t[Ff[e].charCodeAt(0)]=e;return t})();function mE(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Ff[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Ff[r]),e.queuedBits-=6}}function uj(t,e,n){const r=KV[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function gE(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{YV(a,r,n)};for(let a=0;a<t.length;a+=1)uj(t.charCodeAt(a),s,i);return e.join("")}function qV(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function GV(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}qV(r,e)}}function YV(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function kl(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)uj(t.charCodeAt(s),n,r);return new Uint8Array(e)}function JV(t){const e=[];return GV(t,n=>e.push(n)),new Uint8Array(e)}function ta(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>mE(s,n,r)),mE(null,n,r),e.join("")}function QV(t){return Math.round(Date.now()/1e3)+t}function ZV(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const sr=()=>typeof window<"u"&&typeof document<"u",Bo={tested:!1,writable:!1},dj=()=>{if(!sr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Bo.tested)return Bo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Bo.tested=!0,Bo.writable=!0}catch{Bo.tested=!0,Bo.writable=!1}return Bo.writable};function ez(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const hj=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>yd(()=>Promise.resolve().then(()=>ac),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},tz=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ol=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},$o=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},wi=async(t,e)=>{await t.removeItem(e)};class Um{constructor(){this.promise=new Um.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Um.promiseConstructor=Promise;function Eg(t){const e=t.split(".");if(e.length!==3)throw new Py("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!UV.test(e[r]))throw new Py("JWT not in base64url format");return{header:JSON.parse(gE(e[0])),payload:JSON.parse(gE(e[1])),signature:kl(e[2]),raw:{header:e[0],payload:e[1]}}}async function nz(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function rz(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await t(i);if(!e(i,null,a)){r(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function sz(t){return("0"+t.toString(16)).substr(-2)}function iz(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,sz).join("")}async function oz(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function az(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await oz(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Qa(t,e,n=!1){const r=iz();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await ol(t,`${e}-code-verifier`,s);const i=await az(r);return[i,r===i?"plain":"s256"]}const lz=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function cz(t){const e=t.headers.get(ky);if(!e||!e.match(lz))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function uz(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function dz(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const hz=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Za(t){if(!hz.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Sg(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function xE(t){return JSON.parse(JSON.stringify(t))}var fz=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Wo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),pz=[502,503,504];async function yE(t){var e;if(!tz(t))throw new Oy(Wo(t),0);if(pz.includes(t.status))throw new Oy(Wo(t),t.status);let n;try{n=await t.json()}catch(i){throw new qo(Wo(i),i)}let r;const s=cz(t);if(s&&s.getTime()>=cj["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new fE(Wo(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ei}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new fE(Wo(n),t.status,n.weak_password.reasons);throw new zV(Wo(n),t.status||500,r)}const mz=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function et(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[ky]||(i[ky]=cj["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await gz(t,e,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function gz(t,e,n,r,s,i){const a=mz(e,r,s,i);let l;try{l=await t(n,Object.assign({},a))}catch(c){throw console.error(c),new Oy(Wo(c),0)}if(l.ok||await yE(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await yE(c)}}function Ur(t){var e;let n=null;vz(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=QV(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function vE(t){const e=Ur(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ri(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function xz(t){return{data:t,error:null}}function yz(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,a=fz(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function wE(t){return t}function vz(t){return t.access_token&&t.refresh_token&&t.expires_in}const Ng=["global","local","others"];var wz=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class bz{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=hj(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Ng[0]){if(Ng.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ng.join(", ")}`);try{return await et(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Je(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await et(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ri})}catch(r){if(Je(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=wz(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await et(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:yz,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Je(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await et(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ri})}catch(n){if(Je(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await et(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:wE});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(y=>{const b=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(y.split(";")[1].split("=")[1]);u[`${_}Page`]=b}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Je(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Za(e);try{return await et(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ri})}catch(n){if(Je(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Za(e);try{return await et(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Ri})}catch(r){if(Je(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Za(e);try{return await et(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ri})}catch(r){if(Je(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Za(e.userId);try{const{data:n,error:r}=await et(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Je(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Za(e.userId),Za(e.id);try{return{data:await et(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Je(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await et(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:wE});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(y=>{const b=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(y.split(";")[1].split("=")[1]);u[`${_}Page`]=b}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Je(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await et(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Je(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await et(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Je(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await et(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Je(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await et(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Je(n))return{data:null,error:n};throw n}}}function bE(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const el={debug:!!(globalThis&&dj()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class fj extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class _z extends fj{}async function Ez(t,e,n){el.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),el.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){el.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{el.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw el.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new _z(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(el.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Sz(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function pj(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Nz(t){return parseInt(t,16)}function Tz(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function Az(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:a,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:f}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=pj(t.address),y=d?`${d}://${r}`:r,b=t.statement?`${t.statement}
`:"",_=`${y} wants you to sign in with your Ethereum account:
${p}

${b}`;let m=`URI: ${h}
Version: ${f}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${i.toISOString()}`;if(s&&(m+=`
Expiration Time: ${s.toISOString()}`),l&&(m+=`
Not Before: ${l.toISOString()}`),c&&(m+=`
Request ID: ${c}`),u){let x=`
Resources:`;for(const w of u){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);x+=`
- ${w}`}m+=x}return`${_}
${m}`}class Xt extends Error{constructor({message:e,code:n,cause:r,name:s}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class Bf extends Xt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function Cz({error:t,options:e}){var n,r,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Xt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Xt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Xt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Xt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Xt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Xt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Xt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Xt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(gj(a)){if(i.rp.id!==a)return new Xt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Xt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Xt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Xt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Xt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function jz({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Xt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Xt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(gj(r)){if(n.rpId!==r)return new Xt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Xt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Xt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Xt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}var mj=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class kz{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Oz=new kz;function Pz(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,s=mj(t,["challenge","user","excludeCredentials"]),i=kl(e).buffer,a=Object.assign(Object.assign({},n),{id:kl(n.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:a});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const u=r[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:kl(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function Iz(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=mj(t,["challenge","allowCredentials"]),s=kl(e).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const l=n[a];i.allowCredentials[a]=Object.assign(Object.assign({},l),{id:kl(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function Rz(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:ta(new Uint8Array(t.response.attestationObject)),clientDataJSON:ta(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Lz(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:ta(new Uint8Array(s.authenticatorData)),clientDataJSON:ta(new Uint8Array(s.clientDataJSON)),signature:ta(new Uint8Array(s.signature)),userHandle:s.userHandle?ta(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function gj(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function _E(){var t,e;return!!(sr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Mz(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Bf("Browser returned unexpected credential type",e)}:{data:null,error:new Bf("Empty credential response",e)}}catch(e){return{data:null,error:Cz({error:e,options:t})}}}async function Dz(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Bf("Browser returned unexpected credential type",e)}:{data:null,error:new Bf("Empty credential response",e)}}catch(e){return{data:null,error:jz({error:e,options:t})}}}const Fz={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Bz={userVerification:"preferred",hints:["security-key"]};function $f(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of t)if(s)for(const i in s){const a=s[i];if(a!==void 0)if(Array.isArray(a))r[i]=a;else if(n(a))r[i]=a;else if(e(a)){const l=r[i];e(l)?r[i]=$f(l,a):r[i]=$f(a)}else r[i]=a}return r}function $z(t,e){return $f(Fz,t,e||{})}function Uz(t,e){return $f(Bz,t,e||{})}class Vz{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:s},i){try{const{data:a,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:l};const c=s??Oz.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:u}=a.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(a.webauthn.type){case"create":{const u=$z(a.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:h}=await Mz({publicKey:u,signal:c});return d?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=Uz(a.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:h}=await Dz(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(a){return Je(a)?{data:null,error:a}:{data:null,error:new qo("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}},i){if(!n)return{data:null,error:new $u("rpId is required for WebAuthn authentication")};try{if(!_E())return{data:null,error:new qo("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!a)return{data:null,error:l};const{webauthn:c}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(a){return Je(a)?{data:null,error:a}:{data:null,error:new qo("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s},i){if(!n)return{data:null,error:new $u("rpId is required for WebAuthn registration")};try{if(!_E())return{data:null,error:new qo("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return c?this._verify({factorId:a.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(a){return Je(a)?{data:null,error:a}:{data:null,error:new qo("Unexpected error in register",a)}}}}Sz();const zz={url:FV,storageKey:BV,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:$V,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function EE(t,e,n){return await n()}const tl={};class Uu{get jwks(){var e,n;return(n=(e=tl[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){tl[this.storageKey]=Object.assign(Object.assign({},tl[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=tl[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){tl[this.storageKey]=Object.assign(Object.assign({},tl[this.storageKey]),{cachedAt:e})}constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Uu.nextInstanceID,Uu.nextInstanceID+=1,this.instanceID>0&&sr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},zz),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new bz({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=hj(s.fetch),this.lock=s.lock||EE,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:sr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Ez:this.lock=EE,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Vz(this)},this.persistSession?(s.storage?this.storage=s.storage:dj()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=bE(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=bE(this.memoryStorage)),sr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${lj}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=ez(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),sr()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),WV(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Je(n)?{error:n}:{error:new qo("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ur}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(Je(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await Qa(this.storage,this.storageKey)),i=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:y},xform:Ur})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Ur})}else throw new mh("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(Je(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:a,options:l}=e;n=await et(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:vE})}else if("phone"in e){const{phone:i,password:a,options:l}=e;n=await et(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:vE})}else throw new mh("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Ja}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Je(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,i,a,l,c,u,d,h,f;let p,y;if("message"in e)p=e.message,y=e.signature;else{const{chain:b,wallet:_,statement:m,options:x}=e;let w;if(sr())if(typeof _=="object")w=_;else{const re=window;if("ethereum"in re&&typeof re.ethereum=="object"&&"request"in re.ethereum&&typeof re.ethereum.request=="function")w=re.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=_}const v=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href),T=await w.request({method:"eth_requestAccounts"}).then(re=>re).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=pj(T[0]);let D=(r=x==null?void 0:x.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!D){const re=await w.request({method:"eth_chainId"});D=Nz(re)}const te={domain:v.host,address:E,statement:m,uri:v.href,version:"1",chainId:D,nonce:(s=x==null?void 0:x.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(i=x==null?void 0:x.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(l=x==null?void 0:x.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=x==null?void 0:x.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=x==null?void 0:x.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=x==null?void 0:x.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=Az(te),y=await w.request({method:"personal_sign",params:[Tz(p),E]})}try{const{data:b,error:_}=await et(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:y},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Ur});if(_)throw _;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Ja}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:_})}catch(b){if(Je(b))return{data:{user:null,session:null},error:b};throw b}}async signInWithSolana(e){var n,r,s,i,a,l,c,u,d,h,f,p;let y,b;if("message"in e)y=e.message,b=e.signature;else{const{chain:_,wallet:m,statement:x,options:w}=e;let v;if(sr())if(typeof m=="object")v=m;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))v=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=m}const T=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in v&&v.signIn){const E=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),x?{statement:x}:null));let D;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")D=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)D=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)y=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),b=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in v)||typeof v.signMessage!="function"||!("publicKey"in v)||typeof v!="object"||!v.publicKey||!("toBase58"in v.publicKey)||typeof v.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${T.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(s=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const E=await v.signMessage(new TextEncoder().encode(y),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=E}}try{const{data:_,error:m}=await et(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:ta(b)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Ur});if(m)throw m;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new Ja}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:m})}catch(_){if(Je(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(e){const n=await $o(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:a}=await et(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ur});if(await wi(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ja}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(Je(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:a}=e,l=await et(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ur}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ja}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(Je(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,a;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Qa(this.storage,this.storageKey));const{error:h}=await et(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await et(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new mh("You must provide either an email or phone number.")}catch(l){if(Je(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await et(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Ur});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(Je(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Qa(this.storage,this.storageKey)),await et(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:xz})}catch(i){if(Je(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Ei;const{error:s}=await et(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Je(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:a}=await et(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:a,error:l}=await et(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new mh("You must provide either an email or phone number and a type")}catch(n){if(Je(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await $o(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<bg:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await $o(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=Sg()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await et(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ri}):await this._useSession(async n=>{var r,s,i;const{data:a,error:l}=n;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ei}:await et(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Ri})})}catch(n){if(Je(n))return XV(n)&&(await this._removeSession(),await wi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Ei;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Qa(this.storage,this.storageKey));const{data:u,error:d}=await et(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:Ri});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(Je(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ei;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:a}=Eg(e.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{data:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(Je(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:l}=n;if(l)throw l;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ei;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Je(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!sr())throw new gh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new gh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new hE("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new gh("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new hE("No code detected.");const{data:x,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const v=new URL(window.location.href);return v.searchParams.delete("code"),window.history.replaceState(window.history.state,"",v.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=e;if(!i||!l||!a||!u)throw new gh("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const p=f-d;p*1e3<=il&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const y=f-h;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,d);const{data:b,error:_}=await this._getUser(i);if(_)throw _;const m={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:a,token_type:u,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(r){if(Je(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await $o(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(HV(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await wi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=ZV(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Qa(this.storage,this.storageKey,!0));try{return await et(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(Je(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Je(n))return{data:null,error:n};throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var a,l,c,u,d;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await et(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return sr()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Je(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:a,provider:l,token:c,access_token:u,nonce:d}=e,h=await et(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ur}),{data:f,error:p}=h;return p?{data:{user:null,session:null},error:p}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new Ja}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),{data:f,error:p})}catch(s){if(Je(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)throw a;return await et(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Je(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await rz(async s=>(s>0&&await nz(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await et(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ur})),(s,i)=>{const a=200*Math.pow(2,s);return i&&_g(i)&&Date.now()+a-r<il})}catch(r){if(this._debug(n,"error",r),Je(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),sr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await $o(this.storage,this.storageKey);if(s&&this.userStorage){let a=await $o(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await ol(this.userStorage,this.storageKey+"-user",a)),s.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:Sg()}else if(s&&!s.user&&!s.user){const a=await $o(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await wi(this.storage,this.storageKey+"-user"),await ol(this.storage,this.storageKey,s)):s.user=Sg()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<bg;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${bg}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),_g(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Ei;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Um;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Ei;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),Je(i)){const a={data:null,error:i};return _g(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await ol(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=xE(s);await ol(this.storage,this.storageKey,i)}else{const s=xE(n);await ol(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await wi(this.storage,this.storageKey),await wi(this.storage,this.storageKey+"-code-verifier"),await wi(this.storage,this.storageKey+"-user"),this.userStorage&&await wi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&sr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),il);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/il);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${il}ms, refresh threshold is ${jy} ticks`),s<=jy&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof fj)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!sr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await Qa(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await et(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Je(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:u}=await et(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(Je(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Rz(e.webauthn.credential_response):Lz(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:c}=await et(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(n){if(Je(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const a=await et(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:l}=a;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Pz(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Iz(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Je(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Eg(s.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(l=>l.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+VV>s)return r;const{data:i,error:a}=await et(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:p,error:y}=await this.getSession();if(y||!p.session)return{data:null,error:y};r=p.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:c}}=Eg(r);n!=null&&n.allowExpired||uz(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:s,signature:a},error:null}}const d=dz(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,JV(`${l}.${c}`)))throw new Py("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(Je(r))return{data:null,error:r};throw r}}}Uu.nextInstanceID=0;const Hz=Uu;class Xz extends Hz{constructor(e){super(e)}}var Wz=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class Kz{constructor(e,n,r){var s,i,a;this.supabaseUrl=e,this.supabaseKey=n;const l=DV(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:AV,realtime:jV,auth:Object.assign(Object.assign({},CV),{storageKey:c}),global:TV},d=MV(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=IV(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new z8(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new EV(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new b8(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return Wz(this,void 0,void 0,function*(){var e,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,storageKey:a,flowType:l,lock:c,debug:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Xz({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:a,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,flowType:l,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new oV(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const qz=(t,e,n)=>new Kz(t,e,n);function Gz(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Gz()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Yz="https://evlhnwqfnnozottgfwam.supabase.co",Jz="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV2bGhud3Fmbm5vem90dGdmd2FtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk4NzU5ODYsImV4cCI6MjA3NTQ1MTk4Nn0.xzB23ELtSev8FkU8QPaQe1GUHSzk8ldoaCuWqrvKoDI",Ae=qz(Yz,Jz);var At={},Vm={};Vm.byteLength=eH;Vm.toByteArray=nH;Vm.fromByteArray=iH;var ws=[],wr=[],Qz=typeof Uint8Array<"u"?Uint8Array:Array,Tg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var nl=0,Zz=Tg.length;nl<Zz;++nl)ws[nl]=Tg[nl],wr[Tg.charCodeAt(nl)]=nl;wr["-".charCodeAt(0)]=62;wr["_".charCodeAt(0)]=63;function xj(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function eH(t){var e=xj(t),n=e[0],r=e[1];return(n+r)*3/4-r}function tH(t,e,n){return(e+n)*3/4-n}function nH(t){var e,n=xj(t),r=n[0],s=n[1],i=new Qz(tH(t,r,s)),a=0,l=s>0?r-4:r,c;for(c=0;c<l;c+=4)e=wr[t.charCodeAt(c)]<<18|wr[t.charCodeAt(c+1)]<<12|wr[t.charCodeAt(c+2)]<<6|wr[t.charCodeAt(c+3)],i[a++]=e>>16&255,i[a++]=e>>8&255,i[a++]=e&255;return s===2&&(e=wr[t.charCodeAt(c)]<<2|wr[t.charCodeAt(c+1)]>>4,i[a++]=e&255),s===1&&(e=wr[t.charCodeAt(c)]<<10|wr[t.charCodeAt(c+1)]<<4|wr[t.charCodeAt(c+2)]>>2,i[a++]=e>>8&255,i[a++]=e&255),i}function rH(t){return ws[t>>18&63]+ws[t>>12&63]+ws[t>>6&63]+ws[t&63]}function sH(t,e,n){for(var r,s=[],i=e;i<n;i+=3)r=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),s.push(rH(r));return s.join("")}function iH(t){for(var e,n=t.length,r=n%3,s=[],i=16383,a=0,l=n-r;a<l;a+=i)s.push(sH(t,a,a+i>l?l:a+i));return r===1?(e=t[n-1],s.push(ws[e>>2]+ws[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],s.push(ws[e>>10]+ws[e>>4&63]+ws[e<<2&63]+"=")),s.join("")}var $w={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */$w.read=function(t,e,n,r,s){var i,a,l=s*8-r-1,c=(1<<l)-1,u=c>>1,d=-7,h=n?s-1:0,f=n?-1:1,p=t[e+h];for(h+=f,i=p&(1<<-d)-1,p>>=-d,d+=l;d>0;i=i*256+t[e+h],h+=f,d-=8);for(a=i&(1<<-d)-1,i>>=-d,d+=r;d>0;a=a*256+t[e+h],h+=f,d-=8);if(i===0)i=1-u;else{if(i===c)return a?NaN:(p?-1:1)*(1/0);a=a+Math.pow(2,r),i=i-u}return(p?-1:1)*a*Math.pow(2,i-r)};$w.write=function(t,e,n,r,s,i){var a,l,c,u=i*8-s-1,d=(1<<u)-1,h=d>>1,f=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,y=r?1:-1,b=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,a=d):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),a+h>=1?e+=f/c:e+=f*Math.pow(2,1-h),e*c>=2&&(a++,c/=2),a+h>=d?(l=0,a=d):a+h>=1?(l=(e*c-1)*Math.pow(2,s),a=a+h):(l=e*Math.pow(2,h-1)*Math.pow(2,s),a=0));s>=8;t[n+p]=l&255,p+=y,l/=256,s-=8);for(a=a<<s|l,u+=s;u>0;t[n+p]=a&255,p+=y,a/=256,u-=8);t[n+p-y]|=b*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=Vm,n=$w,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=x,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s,l.TYPED_ARRAY_SUPPORT=i(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const j=new Uint8Array(1),g={foo:function(){return 42}};return Object.setPrototypeOf(g,Uint8Array.prototype),Object.setPrototypeOf(j,g),j.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function a(j){if(j>s)throw new RangeError('The value "'+j+'" is invalid for option "size"');const g=new Uint8Array(j);return Object.setPrototypeOf(g,l.prototype),g}function l(j,g,S){if(typeof j=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(j)}return c(j,g,S)}l.poolSize=8192;function c(j,g,S){if(typeof j=="string")return f(j,g);if(ArrayBuffer.isView(j))return y(j);if(j==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j);if(_e(j,ArrayBuffer)||j&&_e(j.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(_e(j,SharedArrayBuffer)||j&&_e(j.buffer,SharedArrayBuffer)))return b(j,g,S);if(typeof j=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const K=j.valueOf&&j.valueOf();if(K!=null&&K!==j)return l.from(K,g,S);const le=_(j);if(le)return le;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof j[Symbol.toPrimitive]=="function")return l.from(j[Symbol.toPrimitive]("string"),g,S);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j)}l.from=function(j,g,S){return c(j,g,S)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function u(j){if(typeof j!="number")throw new TypeError('"size" argument must be of type number');if(j<0)throw new RangeError('The value "'+j+'" is invalid for option "size"')}function d(j,g,S){return u(j),j<=0?a(j):g!==void 0?typeof S=="string"?a(j).fill(g,S):a(j).fill(g):a(j)}l.alloc=function(j,g,S){return d(j,g,S)};function h(j){return u(j),a(j<0?0:m(j)|0)}l.allocUnsafe=function(j){return h(j)},l.allocUnsafeSlow=function(j){return h(j)};function f(j,g){if((typeof g!="string"||g==="")&&(g="utf8"),!l.isEncoding(g))throw new TypeError("Unknown encoding: "+g);const S=w(j,g)|0;let K=a(S);const le=K.write(j,g);return le!==S&&(K=K.slice(0,le)),K}function p(j){const g=j.length<0?0:m(j.length)|0,S=a(g);for(let K=0;K<g;K+=1)S[K]=j[K]&255;return S}function y(j){if(_e(j,Uint8Array)){const g=new Uint8Array(j);return b(g.buffer,g.byteOffset,g.byteLength)}return p(j)}function b(j,g,S){if(g<0||j.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(j.byteLength<g+(S||0))throw new RangeError('"length" is outside of buffer bounds');let K;return g===void 0&&S===void 0?K=new Uint8Array(j):S===void 0?K=new Uint8Array(j,g):K=new Uint8Array(j,g,S),Object.setPrototypeOf(K,l.prototype),K}function _(j){if(l.isBuffer(j)){const g=m(j.length)|0,S=a(g);return S.length===0||j.copy(S,0,0,g),S}if(j.length!==void 0)return typeof j.length!="number"||Te(j.length)?a(0):p(j);if(j.type==="Buffer"&&Array.isArray(j.data))return p(j.data)}function m(j){if(j>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return j|0}function x(j){return+j!=j&&(j=0),l.alloc(+j)}l.isBuffer=function(g){return g!=null&&g._isBuffer===!0&&g!==l.prototype},l.compare=function(g,S){if(_e(g,Uint8Array)&&(g=l.from(g,g.offset,g.byteLength)),_e(S,Uint8Array)&&(S=l.from(S,S.offset,S.byteLength)),!l.isBuffer(g)||!l.isBuffer(S))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===S)return 0;let K=g.length,le=S.length;for(let me=0,ye=Math.min(K,le);me<ye;++me)if(g[me]!==S[me]){K=g[me],le=S[me];break}return K<le?-1:le<K?1:0},l.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(g,S){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return l.alloc(0);let K;if(S===void 0)for(S=0,K=0;K<g.length;++K)S+=g[K].length;const le=l.allocUnsafe(S);let me=0;for(K=0;K<g.length;++K){let ye=g[K];if(_e(ye,Uint8Array))me+ye.length>le.length?(l.isBuffer(ye)||(ye=l.from(ye)),ye.copy(le,me)):Uint8Array.prototype.set.call(le,ye,me);else if(l.isBuffer(ye))ye.copy(le,me);else throw new TypeError('"list" argument must be an Array of Buffers');me+=ye.length}return le};function w(j,g){if(l.isBuffer(j))return j.length;if(ArrayBuffer.isView(j)||_e(j,ArrayBuffer))return j.byteLength;if(typeof j!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof j);const S=j.length,K=arguments.length>2&&arguments[2]===!0;if(!K&&S===0)return 0;let le=!1;for(;;)switch(g){case"ascii":case"latin1":case"binary":return S;case"utf8":case"utf-8":return W(j).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S*2;case"hex":return S>>>1;case"base64":return oe(j).length;default:if(le)return K?-1:W(j).length;g=(""+g).toLowerCase(),le=!0}}l.byteLength=w;function v(j,g,S){let K=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((S===void 0||S>this.length)&&(S=this.length),S<=0)||(S>>>=0,g>>>=0,S<=g))return"";for(j||(j="utf8");;)switch(j){case"hex":return C(this,g,S);case"utf8":case"utf-8":return Q(this,g,S);case"ascii":return H(this,g,S);case"latin1":case"binary":return R(this,g,S);case"base64":return pe(this,g,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,g,S);default:if(K)throw new TypeError("Unknown encoding: "+j);j=(j+"").toLowerCase(),K=!0}}l.prototype._isBuffer=!0;function T(j,g,S){const K=j[g];j[g]=j[S],j[S]=K}l.prototype.swap16=function(){const g=this.length;if(g%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let S=0;S<g;S+=2)T(this,S,S+1);return this},l.prototype.swap32=function(){const g=this.length;if(g%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let S=0;S<g;S+=4)T(this,S,S+3),T(this,S+1,S+2);return this},l.prototype.swap64=function(){const g=this.length;if(g%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let S=0;S<g;S+=8)T(this,S,S+7),T(this,S+1,S+6),T(this,S+2,S+5),T(this,S+3,S+4);return this},l.prototype.toString=function(){const g=this.length;return g===0?"":arguments.length===0?Q(this,0,g):v.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(g){if(!l.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:l.compare(this,g)===0},l.prototype.inspect=function(){let g="";const S=t.INSPECT_MAX_BYTES;return g=this.toString("hex",0,S).replace(/(.{2})/g,"$1 ").trim(),this.length>S&&(g+=" ... "),"<Buffer "+g+">"},r&&(l.prototype[r]=l.prototype.inspect),l.prototype.compare=function(g,S,K,le,me){if(_e(g,Uint8Array)&&(g=l.from(g,g.offset,g.byteLength)),!l.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(S===void 0&&(S=0),K===void 0&&(K=g?g.length:0),le===void 0&&(le=0),me===void 0&&(me=this.length),S<0||K>g.length||le<0||me>this.length)throw new RangeError("out of range index");if(le>=me&&S>=K)return 0;if(le>=me)return-1;if(S>=K)return 1;if(S>>>=0,K>>>=0,le>>>=0,me>>>=0,this===g)return 0;let ye=me-le,We=K-S;const ze=Math.min(ye,We),I=this.slice(le,me),de=g.slice(S,K);for(let be=0;be<ze;++be)if(I[be]!==de[be]){ye=I[be],We=de[be];break}return ye<We?-1:We<ye?1:0};function E(j,g,S,K,le){if(j.length===0)return-1;if(typeof S=="string"?(K=S,S=0):S>2147483647?S=2147483647:S<-2147483648&&(S=-2147483648),S=+S,Te(S)&&(S=le?0:j.length-1),S<0&&(S=j.length+S),S>=j.length){if(le)return-1;S=j.length-1}else if(S<0)if(le)S=0;else return-1;if(typeof g=="string"&&(g=l.from(g,K)),l.isBuffer(g))return g.length===0?-1:D(j,g,S,K,le);if(typeof g=="number")return g=g&255,typeof Uint8Array.prototype.indexOf=="function"?le?Uint8Array.prototype.indexOf.call(j,g,S):Uint8Array.prototype.lastIndexOf.call(j,g,S):D(j,[g],S,K,le);throw new TypeError("val must be string, number or Buffer")}function D(j,g,S,K,le){let me=1,ye=j.length,We=g.length;if(K!==void 0&&(K=String(K).toLowerCase(),K==="ucs2"||K==="ucs-2"||K==="utf16le"||K==="utf-16le")){if(j.length<2||g.length<2)return-1;me=2,ye/=2,We/=2,S/=2}function ze(de,be){return me===1?de[be]:de.readUInt16BE(be*me)}let I;if(le){let de=-1;for(I=S;I<ye;I++)if(ze(j,I)===ze(g,de===-1?0:I-de)){if(de===-1&&(de=I),I-de+1===We)return de*me}else de!==-1&&(I-=I-de),de=-1}else for(S+We>ye&&(S=ye-We),I=S;I>=0;I--){let de=!0;for(let be=0;be<We;be++)if(ze(j,I+be)!==ze(g,be)){de=!1;break}if(de)return I}return-1}l.prototype.includes=function(g,S,K){return this.indexOf(g,S,K)!==-1},l.prototype.indexOf=function(g,S,K){return E(this,g,S,K,!0)},l.prototype.lastIndexOf=function(g,S,K){return E(this,g,S,K,!1)};function te(j,g,S,K){S=Number(S)||0;const le=j.length-S;K?(K=Number(K),K>le&&(K=le)):K=le;const me=g.length;K>me/2&&(K=me/2);let ye;for(ye=0;ye<K;++ye){const We=parseInt(g.substr(ye*2,2),16);if(Te(We))return ye;j[S+ye]=We}return ye}function re(j,g,S,K){return fe(W(g,j.length-S),j,S,K)}function z(j,g,S,K){return fe(Z(g),j,S,K)}function J(j,g,S,K){return fe(oe(g),j,S,K)}function ce(j,g,S,K){return fe(ae(g,j.length-S),j,S,K)}l.prototype.write=function(g,S,K,le){if(S===void 0)le="utf8",K=this.length,S=0;else if(K===void 0&&typeof S=="string")le=S,K=this.length,S=0;else if(isFinite(S))S=S>>>0,isFinite(K)?(K=K>>>0,le===void 0&&(le="utf8")):(le=K,K=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const me=this.length-S;if((K===void 0||K>me)&&(K=me),g.length>0&&(K<0||S<0)||S>this.length)throw new RangeError("Attempt to write outside buffer bounds");le||(le="utf8");let ye=!1;for(;;)switch(le){case"hex":return te(this,g,S,K);case"utf8":case"utf-8":return re(this,g,S,K);case"ascii":case"latin1":case"binary":return z(this,g,S,K);case"base64":return J(this,g,S,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ce(this,g,S,K);default:if(ye)throw new TypeError("Unknown encoding: "+le);le=(""+le).toLowerCase(),ye=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function pe(j,g,S){return g===0&&S===j.length?e.fromByteArray(j):e.fromByteArray(j.slice(g,S))}function Q(j,g,S){S=Math.min(j.length,S);const K=[];let le=g;for(;le<S;){const me=j[le];let ye=null,We=me>239?4:me>223?3:me>191?2:1;if(le+We<=S){let ze,I,de,be;switch(We){case 1:me<128&&(ye=me);break;case 2:ze=j[le+1],(ze&192)===128&&(be=(me&31)<<6|ze&63,be>127&&(ye=be));break;case 3:ze=j[le+1],I=j[le+2],(ze&192)===128&&(I&192)===128&&(be=(me&15)<<12|(ze&63)<<6|I&63,be>2047&&(be<55296||be>57343)&&(ye=be));break;case 4:ze=j[le+1],I=j[le+2],de=j[le+3],(ze&192)===128&&(I&192)===128&&(de&192)===128&&(be=(me&15)<<18|(ze&63)<<12|(I&63)<<6|de&63,be>65535&&be<1114112&&(ye=be))}}ye===null?(ye=65533,We=1):ye>65535&&(ye-=65536,K.push(ye>>>10&1023|55296),ye=56320|ye&1023),K.push(ye),le+=We}return V(K)}const ue=4096;function V(j){const g=j.length;if(g<=ue)return String.fromCharCode.apply(String,j);let S="",K=0;for(;K<g;)S+=String.fromCharCode.apply(String,j.slice(K,K+=ue));return S}function H(j,g,S){let K="";S=Math.min(j.length,S);for(let le=g;le<S;++le)K+=String.fromCharCode(j[le]&127);return K}function R(j,g,S){let K="";S=Math.min(j.length,S);for(let le=g;le<S;++le)K+=String.fromCharCode(j[le]);return K}function C(j,g,S){const K=j.length;(!g||g<0)&&(g=0),(!S||S<0||S>K)&&(S=K);let le="";for(let me=g;me<S;++me)le+=Ne[j[me]];return le}function A(j,g,S){const K=j.slice(g,S);let le="";for(let me=0;me<K.length-1;me+=2)le+=String.fromCharCode(K[me]+K[me+1]*256);return le}l.prototype.slice=function(g,S){const K=this.length;g=~~g,S=S===void 0?K:~~S,g<0?(g+=K,g<0&&(g=0)):g>K&&(g=K),S<0?(S+=K,S<0&&(S=0)):S>K&&(S=K),S<g&&(S=g);const le=this.subarray(g,S);return Object.setPrototypeOf(le,l.prototype),le};function L(j,g,S){if(j%1!==0||j<0)throw new RangeError("offset is not uint");if(j+g>S)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(g,S,K){g=g>>>0,S=S>>>0,K||L(g,S,this.length);let le=this[g],me=1,ye=0;for(;++ye<S&&(me*=256);)le+=this[g+ye]*me;return le},l.prototype.readUintBE=l.prototype.readUIntBE=function(g,S,K){g=g>>>0,S=S>>>0,K||L(g,S,this.length);let le=this[g+--S],me=1;for(;S>0&&(me*=256);)le+=this[g+--S]*me;return le},l.prototype.readUint8=l.prototype.readUInt8=function(g,S){return g=g>>>0,S||L(g,1,this.length),this[g]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(g,S){return g=g>>>0,S||L(g,2,this.length),this[g]|this[g+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(g,S){return g=g>>>0,S||L(g,2,this.length),this[g]<<8|this[g+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(g,S){return g=g>>>0,S||L(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+this[g+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(g,S){return g=g>>>0,S||L(g,4,this.length),this[g]*16777216+(this[g+1]<<16|this[g+2]<<8|this[g+3])},l.prototype.readBigUInt64LE=$e(function(g){g=g>>>0,O(g,"offset");const S=this[g],K=this[g+7];(S===void 0||K===void 0)&&P(g,this.length-8);const le=S+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24,me=this[++g]+this[++g]*2**8+this[++g]*2**16+K*2**24;return BigInt(le)+(BigInt(me)<<BigInt(32))}),l.prototype.readBigUInt64BE=$e(function(g){g=g>>>0,O(g,"offset");const S=this[g],K=this[g+7];(S===void 0||K===void 0)&&P(g,this.length-8);const le=S*2**24+this[++g]*2**16+this[++g]*2**8+this[++g],me=this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+K;return(BigInt(le)<<BigInt(32))+BigInt(me)}),l.prototype.readIntLE=function(g,S,K){g=g>>>0,S=S>>>0,K||L(g,S,this.length);let le=this[g],me=1,ye=0;for(;++ye<S&&(me*=256);)le+=this[g+ye]*me;return me*=128,le>=me&&(le-=Math.pow(2,8*S)),le},l.prototype.readIntBE=function(g,S,K){g=g>>>0,S=S>>>0,K||L(g,S,this.length);let le=S,me=1,ye=this[g+--le];for(;le>0&&(me*=256);)ye+=this[g+--le]*me;return me*=128,ye>=me&&(ye-=Math.pow(2,8*S)),ye},l.prototype.readInt8=function(g,S){return g=g>>>0,S||L(g,1,this.length),this[g]&128?(255-this[g]+1)*-1:this[g]},l.prototype.readInt16LE=function(g,S){g=g>>>0,S||L(g,2,this.length);const K=this[g]|this[g+1]<<8;return K&32768?K|4294901760:K},l.prototype.readInt16BE=function(g,S){g=g>>>0,S||L(g,2,this.length);const K=this[g+1]|this[g]<<8;return K&32768?K|4294901760:K},l.prototype.readInt32LE=function(g,S){return g=g>>>0,S||L(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},l.prototype.readInt32BE=function(g,S){return g=g>>>0,S||L(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},l.prototype.readBigInt64LE=$e(function(g){g=g>>>0,O(g,"offset");const S=this[g],K=this[g+7];(S===void 0||K===void 0)&&P(g,this.length-8);const le=this[g+4]+this[g+5]*2**8+this[g+6]*2**16+(K<<24);return(BigInt(le)<<BigInt(32))+BigInt(S+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24)}),l.prototype.readBigInt64BE=$e(function(g){g=g>>>0,O(g,"offset");const S=this[g],K=this[g+7];(S===void 0||K===void 0)&&P(g,this.length-8);const le=(S<<24)+this[++g]*2**16+this[++g]*2**8+this[++g];return(BigInt(le)<<BigInt(32))+BigInt(this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+K)}),l.prototype.readFloatLE=function(g,S){return g=g>>>0,S||L(g,4,this.length),n.read(this,g,!0,23,4)},l.prototype.readFloatBE=function(g,S){return g=g>>>0,S||L(g,4,this.length),n.read(this,g,!1,23,4)},l.prototype.readDoubleLE=function(g,S){return g=g>>>0,S||L(g,8,this.length),n.read(this,g,!0,52,8)},l.prototype.readDoubleBE=function(g,S){return g=g>>>0,S||L(g,8,this.length),n.read(this,g,!1,52,8)};function $(j,g,S,K,le,me){if(!l.isBuffer(j))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>le||g<me)throw new RangeError('"value" argument is out of bounds');if(S+K>j.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(g,S,K,le){if(g=+g,S=S>>>0,K=K>>>0,!le){const We=Math.pow(2,8*K)-1;$(this,g,S,K,We,0)}let me=1,ye=0;for(this[S]=g&255;++ye<K&&(me*=256);)this[S+ye]=g/me&255;return S+K},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(g,S,K,le){if(g=+g,S=S>>>0,K=K>>>0,!le){const We=Math.pow(2,8*K)-1;$(this,g,S,K,We,0)}let me=K-1,ye=1;for(this[S+me]=g&255;--me>=0&&(ye*=256);)this[S+me]=g/ye&255;return S+K},l.prototype.writeUint8=l.prototype.writeUInt8=function(g,S,K){return g=+g,S=S>>>0,K||$(this,g,S,1,255,0),this[S]=g&255,S+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(g,S,K){return g=+g,S=S>>>0,K||$(this,g,S,2,65535,0),this[S]=g&255,this[S+1]=g>>>8,S+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(g,S,K){return g=+g,S=S>>>0,K||$(this,g,S,2,65535,0),this[S]=g>>>8,this[S+1]=g&255,S+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(g,S,K){return g=+g,S=S>>>0,K||$(this,g,S,4,4294967295,0),this[S+3]=g>>>24,this[S+2]=g>>>16,this[S+1]=g>>>8,this[S]=g&255,S+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(g,S,K){return g=+g,S=S>>>0,K||$(this,g,S,4,4294967295,0),this[S]=g>>>24,this[S+1]=g>>>16,this[S+2]=g>>>8,this[S+3]=g&255,S+4};function ie(j,g,S,K,le){B(g,K,le,j,S,7);let me=Number(g&BigInt(4294967295));j[S++]=me,me=me>>8,j[S++]=me,me=me>>8,j[S++]=me,me=me>>8,j[S++]=me;let ye=Number(g>>BigInt(32)&BigInt(4294967295));return j[S++]=ye,ye=ye>>8,j[S++]=ye,ye=ye>>8,j[S++]=ye,ye=ye>>8,j[S++]=ye,S}function q(j,g,S,K,le){B(g,K,le,j,S,7);let me=Number(g&BigInt(4294967295));j[S+7]=me,me=me>>8,j[S+6]=me,me=me>>8,j[S+5]=me,me=me>>8,j[S+4]=me;let ye=Number(g>>BigInt(32)&BigInt(4294967295));return j[S+3]=ye,ye=ye>>8,j[S+2]=ye,ye=ye>>8,j[S+1]=ye,ye=ye>>8,j[S]=ye,S+8}l.prototype.writeBigUInt64LE=$e(function(g,S=0){return ie(this,g,S,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=$e(function(g,S=0){return q(this,g,S,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(g,S,K,le){if(g=+g,S=S>>>0,!le){const ze=Math.pow(2,8*K-1);$(this,g,S,K,ze-1,-ze)}let me=0,ye=1,We=0;for(this[S]=g&255;++me<K&&(ye*=256);)g<0&&We===0&&this[S+me-1]!==0&&(We=1),this[S+me]=(g/ye>>0)-We&255;return S+K},l.prototype.writeIntBE=function(g,S,K,le){if(g=+g,S=S>>>0,!le){const ze=Math.pow(2,8*K-1);$(this,g,S,K,ze-1,-ze)}let me=K-1,ye=1,We=0;for(this[S+me]=g&255;--me>=0&&(ye*=256);)g<0&&We===0&&this[S+me+1]!==0&&(We=1),this[S+me]=(g/ye>>0)-We&255;return S+K},l.prototype.writeInt8=function(g,S,K){return g=+g,S=S>>>0,K||$(this,g,S,1,127,-128),g<0&&(g=255+g+1),this[S]=g&255,S+1},l.prototype.writeInt16LE=function(g,S,K){return g=+g,S=S>>>0,K||$(this,g,S,2,32767,-32768),this[S]=g&255,this[S+1]=g>>>8,S+2},l.prototype.writeInt16BE=function(g,S,K){return g=+g,S=S>>>0,K||$(this,g,S,2,32767,-32768),this[S]=g>>>8,this[S+1]=g&255,S+2},l.prototype.writeInt32LE=function(g,S,K){return g=+g,S=S>>>0,K||$(this,g,S,4,2147483647,-2147483648),this[S]=g&255,this[S+1]=g>>>8,this[S+2]=g>>>16,this[S+3]=g>>>24,S+4},l.prototype.writeInt32BE=function(g,S,K){return g=+g,S=S>>>0,K||$(this,g,S,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[S]=g>>>24,this[S+1]=g>>>16,this[S+2]=g>>>8,this[S+3]=g&255,S+4},l.prototype.writeBigInt64LE=$e(function(g,S=0){return ie(this,g,S,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=$e(function(g,S=0){return q(this,g,S,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function G(j,g,S,K,le,me){if(S+K>j.length)throw new RangeError("Index out of range");if(S<0)throw new RangeError("Index out of range")}function ne(j,g,S,K,le){return g=+g,S=S>>>0,le||G(j,g,S,4),n.write(j,g,S,K,23,4),S+4}l.prototype.writeFloatLE=function(g,S,K){return ne(this,g,S,!0,K)},l.prototype.writeFloatBE=function(g,S,K){return ne(this,g,S,!1,K)};function he(j,g,S,K,le){return g=+g,S=S>>>0,le||G(j,g,S,8),n.write(j,g,S,K,52,8),S+8}l.prototype.writeDoubleLE=function(g,S,K){return he(this,g,S,!0,K)},l.prototype.writeDoubleBE=function(g,S,K){return he(this,g,S,!1,K)},l.prototype.copy=function(g,S,K,le){if(!l.isBuffer(g))throw new TypeError("argument should be a Buffer");if(K||(K=0),!le&&le!==0&&(le=this.length),S>=g.length&&(S=g.length),S||(S=0),le>0&&le<K&&(le=K),le===K||g.length===0||this.length===0)return 0;if(S<0)throw new RangeError("targetStart out of bounds");if(K<0||K>=this.length)throw new RangeError("Index out of range");if(le<0)throw new RangeError("sourceEnd out of bounds");le>this.length&&(le=this.length),g.length-S<le-K&&(le=g.length-S+K);const me=le-K;return this===g&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(S,K,le):Uint8Array.prototype.set.call(g,this.subarray(K,le),S),me},l.prototype.fill=function(g,S,K,le){if(typeof g=="string"){if(typeof S=="string"?(le=S,S=0,K=this.length):typeof K=="string"&&(le=K,K=this.length),le!==void 0&&typeof le!="string")throw new TypeError("encoding must be a string");if(typeof le=="string"&&!l.isEncoding(le))throw new TypeError("Unknown encoding: "+le);if(g.length===1){const ye=g.charCodeAt(0);(le==="utf8"&&ye<128||le==="latin1")&&(g=ye)}}else typeof g=="number"?g=g&255:typeof g=="boolean"&&(g=Number(g));if(S<0||this.length<S||this.length<K)throw new RangeError("Out of range index");if(K<=S)return this;S=S>>>0,K=K===void 0?this.length:K>>>0,g||(g=0);let me;if(typeof g=="number")for(me=S;me<K;++me)this[me]=g;else{const ye=l.isBuffer(g)?g:l.from(g,le),We=ye.length;if(We===0)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for(me=0;me<K-S;++me)this[me+S]=ye[me%We]}return this};const se={};function ee(j,g,S){se[j]=class extends S{constructor(){super(),Object.defineProperty(this,"message",{value:g.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${j}]`,this.stack,delete this.name}get code(){return j}set code(le){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:le,writable:!0})}toString(){return`${this.name} [${j}]: ${this.message}`}}}ee("ERR_BUFFER_OUT_OF_BOUNDS",function(j){return j?`${j} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ee("ERR_INVALID_ARG_TYPE",function(j,g){return`The "${j}" argument must be of type number. Received type ${typeof g}`},TypeError),ee("ERR_OUT_OF_RANGE",function(j,g,S){let K=`The value of "${j}" is out of range.`,le=S;return Number.isInteger(S)&&Math.abs(S)>2**32?le=N(String(S)):typeof S=="bigint"&&(le=String(S),(S>BigInt(2)**BigInt(32)||S<-(BigInt(2)**BigInt(32)))&&(le=N(le)),le+="n"),K+=` It must be ${g}. Received ${le}`,K},RangeError);function N(j){let g="",S=j.length;const K=j[0]==="-"?1:0;for(;S>=K+4;S-=3)g=`_${j.slice(S-3,S)}${g}`;return`${j.slice(0,S)}${g}`}function k(j,g,S){O(g,"offset"),(j[g]===void 0||j[g+S]===void 0)&&P(g,j.length-(S+1))}function B(j,g,S,K,le,me){if(j>S||j<g){const ye=typeof g=="bigint"?"n":"";let We;throw me>3?g===0||g===BigInt(0)?We=`>= 0${ye} and < 2${ye} ** ${(me+1)*8}${ye}`:We=`>= -(2${ye} ** ${(me+1)*8-1}${ye}) and < 2 ** ${(me+1)*8-1}${ye}`:We=`>= ${g}${ye} and <= ${S}${ye}`,new se.ERR_OUT_OF_RANGE("value",We,j)}k(K,le,me)}function O(j,g){if(typeof j!="number")throw new se.ERR_INVALID_ARG_TYPE(g,"number",j)}function P(j,g,S){throw Math.floor(j)!==j?(O(j,S),new se.ERR_OUT_OF_RANGE(S||"offset","an integer",j)):g<0?new se.ERR_BUFFER_OUT_OF_BOUNDS:new se.ERR_OUT_OF_RANGE(S||"offset",`>= ${S?1:0} and <= ${g}`,j)}const F=/[^+/0-9A-Za-z-_]/g;function Y(j){if(j=j.split("=")[0],j=j.trim().replace(F,""),j.length<2)return"";for(;j.length%4!==0;)j=j+"=";return j}function W(j,g){g=g||1/0;let S;const K=j.length;let le=null;const me=[];for(let ye=0;ye<K;++ye){if(S=j.charCodeAt(ye),S>55295&&S<57344){if(!le){if(S>56319){(g-=3)>-1&&me.push(239,191,189);continue}else if(ye+1===K){(g-=3)>-1&&me.push(239,191,189);continue}le=S;continue}if(S<56320){(g-=3)>-1&&me.push(239,191,189),le=S;continue}S=(le-55296<<10|S-56320)+65536}else le&&(g-=3)>-1&&me.push(239,191,189);if(le=null,S<128){if((g-=1)<0)break;me.push(S)}else if(S<2048){if((g-=2)<0)break;me.push(S>>6|192,S&63|128)}else if(S<65536){if((g-=3)<0)break;me.push(S>>12|224,S>>6&63|128,S&63|128)}else if(S<1114112){if((g-=4)<0)break;me.push(S>>18|240,S>>12&63|128,S>>6&63|128,S&63|128)}else throw new Error("Invalid code point")}return me}function Z(j){const g=[];for(let S=0;S<j.length;++S)g.push(j.charCodeAt(S)&255);return g}function ae(j,g){let S,K,le;const me=[];for(let ye=0;ye<j.length&&!((g-=2)<0);++ye)S=j.charCodeAt(ye),K=S>>8,le=S%256,me.push(le),me.push(K);return me}function oe(j){return e.toByteArray(Y(j))}function fe(j,g,S,K){let le;for(le=0;le<K&&!(le+S>=g.length||le>=j.length);++le)g[le+S]=j[le];return le}function _e(j,g){return j instanceof g||j!=null&&j.constructor!=null&&j.constructor.name!=null&&j.constructor.name===g.name}function Te(j){return j!==j}const Ne=function(){const j="0123456789abcdef",g=new Array(256);for(let S=0;S<16;++S){const K=S*16;for(let le=0;le<16;++le)g[K+le]=j[S]+j[le]}return g}();function $e(j){return typeof BigInt>"u"?Ge:j}function Ge(){throw new Error("BigInt not supported")}})(At);const SE="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySW5mb3JtYXRpb24iOnsiaWQiOiJjYzJlODE1OC00Zjg5LTQ0MTUtOGRjNS0xYjhiODE3ZjJhNGQiLCJlbWFpbCI6ImRpdmVyY2l0eXJlY29yZHNAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsInBpbl9wb2xpY3kiOnsicmVnaW9ucyI6W3siZGVzaXJlZFJlcGxpY2F0aW9uQ291bnQiOjEsImlkIjoiRlJBMSJ9LHsiZGVzaXJlZFJlcGxpY2F0aW9uQ291bnQiOjEsImlkIjoiTllDMSJ9XSwidmVyc2lvbiI6MX0sIm1mYV9lbmFibGVkIjpmYWxzZSwic3RhdHVzIjoiQUNUSVZFIn0sImF1dGhlbnRpY2F0aW9uVHlwZSI6InNjb3BlZEtleSIsInNjb3BlZEtleUtleSI6IjUyYTYyNTYxMTFiZWU1MTI5Njc3Iiwic2NvcGVkS2V5U2VjcmV0IjoiNzM1NzkzYjU3MjY3OTJiZWExNTQ5OTQwOGM4YzE4NjJhYjUzNDVhYTNlNGQ2N2U3MTA5YmFkYzQ2ZWNjOTBjNSIsImV4cCI6MTc3NTcxMzUzNn0.YYXsotBUiPEFdu40xv0sLrLGuU6CGsVDMjbqjB5zEjA",oH="https://api.pinata.cloud/pinning/pinFileToIPFS",aH="https://gateway.pinata.cloud/ipfs/",Uf=async t=>{try{console.log("Starting Pinata upload for file:",t.name);const e=new FormData;e.append("file",t);const n=JSON.stringify({name:`token-${Date.now()}-${t.name}`});e.append("pinataMetadata",n);const r=JSON.stringify({cidVersion:1});e.append("pinataOptions",r),console.log("Uploading to Pinata with JWT:",SE?"JWT exists":"JWT missing");const s=await fetch(oH,{method:"POST",headers:{Authorization:`Bearer ${SE}`},body:e});if(console.log("Pinata response status:",s.status),!s.ok){const l=await s.text();throw console.error("Pinata error response:",l),new Error(`Failed to upload image to Pinata: ${s.status} ${l}`)}const i=await s.json();console.log("Pinata upload successful:",i);const a=`${aH}${i.IpfsHash}`;return console.log("Generated image URL:",a),a}catch(e){throw console.error("Error uploading to Pinata:",e),e}};function Et(t){var e=t.width,n=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(n<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:n}}function ca(t,e){return t.width===e.width&&t.height===e.height}var lH=function(){function t(e){var n=this;this._resolutionListener=function(){return n._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var n=this,r={next:e};return this._observers.push(r),{unsubscribe:function(){n._observers=n._observers.filter(function(s){return s!==r})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(n){return n.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function cH(t){return new lH(t)}var uH=function(){function t(e,n,r){var s;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=Et({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=n??function(i){return i},this._allowResizeObserver=(s=r==null?void 0:r.allowResizeObserver)!==null&&s!==void 0?s:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,n;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(n=this._devicePixelRatioObservable)===null||n===void 0||n.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return Et({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=Et(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(n){return n!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(n){return n!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var n=this.bitmapSize;ca(n,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(n,e))},t.prototype._emitBitmapSizeChanged=function(e,n){var r=this;this._bitmapSizeChangedListeners.forEach(function(s){return s.call(r,e,n)})},t.prototype._suggestNewBitmapSize=function(e){var n=this._suggestedBitmapSize,r=Et(this._transformBitmapSize(e,this._canvasElementClientSize)),s=ca(this.bitmapSize,r)?null:r;n===null&&s===null||n!==null&&s!==null&&ca(n,s)||(this._suggestedBitmapSize=s,this._emitSuggestedBitmapSizeChanged(n,s))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,n){var r=this;this._suggestedBitmapSizeChangedListeners.forEach(function(s){return s.call(r,e,n)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}hH().then(function(n){return n?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var n=NE(this._canvasElement);if(n===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=cH(n),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,n;if(this._canvasElement!==null){var r=NE(this._canvasElement);if(r!==null){var s=(n=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&n!==void 0?n:r.devicePixelRatio,i=this._canvasElement.getClientRects(),a=i[0]!==void 0?fH(i[0],s):Et({width:this._canvasElementClientSize.width*s,height:this._canvasElementClientSize.height*s});this._suggestNewBitmapSize(a)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(n){var r=n.find(function(a){return a.target===e._canvasElement});if(!(!r||!r.devicePixelContentBoxSize||!r.devicePixelContentBoxSize[0])){var s=r.devicePixelContentBoxSize[0],i=Et({width:s.inlineSize,height:s.blockSize});e._suggestNewBitmapSize(i)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function dH(t,e){if(e.type==="device-pixel-content-box")return new uH(t,e.transform,e.options);throw new Error("Unsupported binding target")}function NE(t){return t.ownerDocument.defaultView}function hH(){return new Promise(function(t){var e=new ResizeObserver(function(n){t(n.every(function(r){return"devicePixelContentBoxSize"in r})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function fH(t,e){return Et({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var pH=function(){function t(e,n,r){if(n.width===0||n.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=n,r.width===0||r.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=r,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function _a(t,e){var n=t.canvasElementClientSize;if(n.width===0||n.height===0)return null;var r=t.bitmapSize;if(r.width===0||r.height===0)return null;var s=t.canvasElement.getContext("2d",e);return s===null?null:new pH(s,n,r)}/*!
 * @license
 * TradingView Lightweight Charts v4.2.3
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const mH={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},gH={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},xH={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},yH={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},vH={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},wH={color:"#26a69a",base:0},yj={color:"#2196f3"},vj={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var TE,AE;function Ea(t,e){const n={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(n)}function wj(t,e,n,r){t.beginPath();const s=t.lineWidth%2?.5:0;t.moveTo(n,e+s),t.lineTo(r,e+s),t.stroke()}function fo(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function On(t){if(t===void 0)throw new Error("Value is undefined");return t}function ke(t){if(t===null)throw new Error("Value is null");return t}function wl(t){return ke(On(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(TE||(TE={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(AE||(AE={}));const CE={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function br(t){return t<0?0:t>255?255:Math.round(t)||0}function bj(t){return t<=0||t>1?Math.min(Math.max(t,0),1):Math.round(1e4*t)/1e4}const bH=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,_H=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,EH=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,SH=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d*\.?\d+)\s*\)$/;function Vu(t){(t=t.toLowerCase())in CE&&(t=CE[t]);{const e=SH.exec(t)||EH.exec(t);if(e)return[br(parseInt(e[1],10)),br(parseInt(e[2],10)),br(parseInt(e[3],10)),bj(e.length<5?1:parseFloat(e[4]))]}{const e=_H.exec(t);if(e)return[br(parseInt(e[1],16)),br(parseInt(e[2],16)),br(parseInt(e[3],16)),1]}{const e=bH.exec(t);if(e)return[br(17*parseInt(e[1],16)),br(17*parseInt(e[2],16)),br(17*parseInt(e[3],16)),1]}throw new Error(`Cannot parse color: ${t}`)}function _j(t){return .199*t[0]+.687*t[1]+.114*t[2]}function zm(t){const e=Vu(t);return{t:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,i:_j(e)>160?"black":"white"}}class Vt{constructor(){this.h=[]}l(e,n,r){const s={o:e,_:n,u:r===!0};this.h.push(s)}v(e){const n=this.h.findIndex(r=>e===r.o);n>-1&&this.h.splice(n,1)}p(e){this.h=this.h.filter(n=>n._!==e)}m(e,n,r){const s=[...this.h];this.h=this.h.filter(i=>!i.u),s.forEach(i=>i.o(e,n,r))}M(){return this.h.length>0}S(){this.h=[]}}function ts(t,...e){for(const n of e)for(const r in n)n[r]!==void 0&&Object.prototype.hasOwnProperty.call(n,r)&&!["__proto__","constructor","prototype"].includes(r)&&(typeof n[r]!="object"||t[r]===void 0||Array.isArray(n[r])?t[r]=n[r]:ts(t[r],n[r]));return t}function Es(t){return typeof t=="number"&&isFinite(t)}function zu(t){return typeof t=="number"&&t%1==0}function bd(t){return typeof t=="string"}function xh(t){return typeof t=="boolean"}function Ws(t){const e=t;if(!e||typeof e!="object")return e;let n,r,s;for(r in n=Array.isArray(e)?[]:{},e)e.hasOwnProperty(r)&&(s=e[r],n[r]=s&&typeof s=="object"?Ws(s):s);return n}function NH(t){return t!==null}function Hu(t){return t===null?void 0:t}const Uw="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Wl(t,e,n){return e===void 0&&(e=Uw),`${n=n!==void 0?`${n} `:""}${t}px ${e}`}class TH{constructor(e){this.k={C:1,T:5,P:NaN,R:"",D:"",V:"",O:"",B:0,A:0,I:0,L:0,N:0},this.F=e}W(){const e=this.k,n=this.j(),r=this.H();return e.P===n&&e.D===r||(e.P=n,e.D=r,e.R=Wl(n,r),e.L=2.5/12*n,e.B=e.L,e.A=n/12*e.T,e.I=n/12*e.T,e.N=0),e.V=this.$(),e.O=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class Vw{constructor(){this.Y=[]}Z(e){this.Y=e}X(e,n,r){this.Y.forEach(s=>{s.X(e,n,r)})}}class ss{X(e,n,r){e.useBitmapCoordinateSpace(s=>this.K(s,n,r))}}class AH extends ss{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K({context:e,horizontalPixelRatio:n,verticalPixelRatio:r}){if(this.G===null||this.G.tt===null)return;const s=this.G.tt,i=this.G,a=Math.max(1,Math.floor(n))%2/2,l=c=>{e.beginPath();for(let u=s.to-1;u>=s.from;--u){const d=i.it[u],h=Math.round(d.nt*n)+a,f=d.st*r,p=c*r+a;e.moveTo(h,f),e.arc(h,f,p,0,2*Math.PI)}e.fill()};i.et>0&&(e.fillStyle=i.rt,l(i.ht+i.et)),e.fillStyle=i.lt,l(i.ht)}}function CH(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}const jH={from:0,to:1};class kH{constructor(e,n){this.ut=new Vw,this.ct=[],this.dt=[],this.ft=!0,this.F=e,this.vt=n,this.ut.Z(this.ct)}bt(e){const n=this.F.wt();n.length!==this.ct.length&&(this.dt=n.map(CH),this.ct=this.dt.map(r=>{const s=new AH;return s.J(r),s}),this.ut.Z(this.ct)),this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.ut}Mt(){const e=this.vt.W().mode===2,n=this.F.wt(),r=this.vt.xt(),s=this.F.St();n.forEach((i,a)=>{var l;const c=this.dt[a],u=i.kt(r);if(e||u===null||!i.yt())return void(c.tt=null);const d=ke(i.Ct());c.lt=u.Tt,c.ht=u.ht,c.et=u.Pt,c.it[0]._t=u._t,c.it[0].st=i.Dt().Rt(u._t,d.Vt),c.rt=(l=u.Ot)!==null&&l!==void 0?l:this.F.Bt(c.it[0].st/i.Dt().At()),c.it[0].ot=r,c.it[0].nt=s.It(r),c.tt=jH})}}class OH extends ss{constructor(e){super(),this.zt=e}K({context:e,bitmapSize:n,horizontalPixelRatio:r,verticalPixelRatio:s}){if(this.zt===null)return;const i=this.zt.Lt.yt,a=this.zt.Et.yt;if(!i&&!a)return;const l=Math.round(this.zt.nt*r),c=Math.round(this.zt.st*s);e.lineCap="butt",i&&l>=0&&(e.lineWidth=Math.floor(this.zt.Lt.et*r),e.strokeStyle=this.zt.Lt.V,e.fillStyle=this.zt.Lt.V,Ea(e,this.zt.Lt.Nt),function(u,d,h,f){u.beginPath();const p=u.lineWidth%2?.5:0;u.moveTo(d+p,h),u.lineTo(d+p,f),u.stroke()}(e,l,0,n.height)),a&&c>=0&&(e.lineWidth=Math.floor(this.zt.Et.et*s),e.strokeStyle=this.zt.Et.V,e.fillStyle=this.zt.Et.V,Ea(e,this.zt.Et.Nt),wj(e,c,0,n.width))}}class PH{constructor(e){this.ft=!0,this.Ft={Lt:{et:1,Nt:0,V:"",yt:!1},Et:{et:1,Nt:0,V:"",yt:!1},nt:0,st:0},this.Wt=new OH(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.yt(),n=ke(this.jt.Ht()),r=n.$t().W().crosshair,s=this.Ft;if(r.mode===2)return s.Et.yt=!1,void(s.Lt.yt=!1);s.Et.yt=e&&this.jt.Ut(n),s.Lt.yt=e&&this.jt.qt(),s.Et.et=r.horzLine.width,s.Et.Nt=r.horzLine.style,s.Et.V=r.horzLine.color,s.Lt.et=r.vertLine.width,s.Lt.Nt=r.vertLine.style,s.Lt.V=r.vertLine.color,s.nt=this.jt.Yt(),s.st=this.jt.Zt()}}function IH(t,e,n,r,s,i){t.fillRect(e+i,n,r-2*i,i),t.fillRect(e+i,n+s-i,r-2*i,i),t.fillRect(e,n,i,s),t.fillRect(e+r-i,n,i,s)}function Hm(t,e,n,r,s,i){t.save(),t.globalCompositeOperation="copy",t.fillStyle=i,t.fillRect(e,n,r,s),t.restore()}function jE(t,e,n,r,s,i){t.beginPath(),t.roundRect?t.roundRect(e,n,r,s,i):(t.lineTo(e+r-i[1],n),i[1]!==0&&t.arcTo(e+r,n,e+r,n+i[1],i[1]),t.lineTo(e+r,n+s-i[2]),i[2]!==0&&t.arcTo(e+r,n+s,e+r-i[2],n+s,i[2]),t.lineTo(e+i[3],n+s),i[3]!==0&&t.arcTo(e,n+s,e,n+s-i[3],i[3]),t.lineTo(e,n+i[0]),i[0]!==0&&t.arcTo(e,n,e+i[0],n,i[0]))}function kE(t,e,n,r,s,i,a=0,l=[0,0,0,0],c=""){if(t.save(),!a||!c||c===i)return jE(t,e,n,r,s,l),t.fillStyle=i,t.fill(),void t.restore();const u=a/2;var d;jE(t,e+u,n+u,r-a,s-a,(d=-u,l.map(h=>h===0?h:h+d))),i!=="transparent"&&(t.fillStyle=i,t.fill()),c!=="transparent"&&(t.lineWidth=a,t.strokeStyle=c,t.closePath(),t.stroke()),t.restore()}function Ej(t,e,n,r,s,i,a){t.save(),t.globalCompositeOperation="copy";const l=t.createLinearGradient(0,0,0,s);l.addColorStop(0,i),l.addColorStop(1,a),t.fillStyle=l,t.fillRect(e,n,r,s),t.restore()}class OE{constructor(e,n){this.J(e,n)}J(e,n){this.zt=e,this.Xt=n}At(e,n){return this.zt.yt?e.P+e.L+e.B:0}X(e,n,r,s){if(!this.zt.yt||this.zt.Kt.length===0)return;const i=this.zt.V,a=this.Xt.t,l=e.useBitmapCoordinateSpace(c=>{const u=c.context;u.font=n.R;const d=this.Gt(c,n,r,s),h=d.Jt;return d.Qt?kE(u,h.ti,h.ii,h.ni,h.si,a,h.ei,[h.ht,0,0,h.ht],a):kE(u,h.ri,h.ii,h.ni,h.si,a,h.ei,[0,h.ht,h.ht,0],a),this.zt.hi&&(u.fillStyle=i,u.fillRect(h.ri,h.li,h.ai-h.ri,h.oi)),this.zt._i&&(u.fillStyle=n.O,u.fillRect(d.Qt?h.ui-h.ei:0,h.ii,h.ei,h.ci-h.ii)),d});e.useMediaCoordinateSpace(({context:c})=>{const u=l.di;c.font=n.R,c.textAlign=l.Qt?"right":"left",c.textBaseline="middle",c.fillStyle=i,c.fillText(this.zt.Kt,u.fi,(u.ii+u.ci)/2+u.pi)})}Gt(e,n,r,s){var i;const{context:a,bitmapSize:l,mediaSize:c,horizontalPixelRatio:u,verticalPixelRatio:d}=e,h=this.zt.hi||!this.zt.mi?n.T:0,f=this.zt.bi?n.C:0,p=n.L+this.Xt.wi,y=n.B+this.Xt.gi,b=n.A,_=n.I,m=this.zt.Kt,x=n.P,w=r.Mi(a,m),v=Math.ceil(r.xi(a,m)),T=x+p+y,E=n.C+b+_+v+h,D=Math.max(1,Math.floor(d));let te=Math.round(T*d);te%2!=D%2&&(te+=1);const re=f>0?Math.max(1,Math.floor(f*u)):0,z=Math.round(E*u),J=Math.round(h*u),ce=(i=this.Xt.Si)!==null&&i!==void 0?i:this.Xt.ki,pe=Math.round(ce*d)-Math.floor(.5*d),Q=Math.floor(pe+D/2-te/2),ue=Q+te,V=s==="right",H=V?c.width-f:f,R=V?l.width-re:re;let C,A,L;return V?(C=R-z,A=R-J,L=H-h-b-f):(C=R+z,A=R+J,L=H+h+b),{Qt:V,Jt:{ii:Q,li:pe,ci:ue,ni:z,si:te,ht:2*u,ei:re,ti:C,ri:R,ai:A,oi:D,ui:l.width},di:{ii:Q/d,ci:ue/d,fi:L,pi:w}}}}class Xm{constructor(e){this.yi={ki:0,t:"#000",gi:0,wi:0},this.Ci={Kt:"",yt:!1,hi:!0,mi:!1,Ot:"",V:"#FFF",_i:!1,bi:!1},this.Ti={Kt:"",yt:!1,hi:!1,mi:!0,Ot:"",V:"#FFF",_i:!0,bi:!0},this.ft=!0,this.Pi=new(e||OE)(this.Ci,this.yi),this.Ri=new(e||OE)(this.Ti,this.yi)}Kt(){return this.Di(),this.Ci.Kt}ki(){return this.Di(),this.yi.ki}bt(){this.ft=!0}At(e,n=!1){return Math.max(this.Pi.At(e,n),this.Ri.At(e,n))}Vi(){return this.yi.Si||0}Oi(e){this.yi.Si=e}Bi(){return this.Di(),this.Ci.yt||this.Ti.yt}Ai(){return this.Di(),this.Ci.yt}gt(e){return this.Di(),this.Ci.hi=this.Ci.hi&&e.W().ticksVisible,this.Ti.hi=this.Ti.hi&&e.W().ticksVisible,this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Pi}Ii(){return this.Di(),this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Ri}Di(){this.ft&&(this.Ci.hi=!0,this.Ti.hi=!1,this.zi(this.Ci,this.Ti,this.yi))}}class RH extends Xm{constructor(e,n,r){super(),this.jt=e,this.Li=n,this.Ei=r}zi(e,n,r){if(e.yt=!1,this.jt.W().mode===2)return;const s=this.jt.W().horzLine;if(!s.labelVisible)return;const i=this.Li.Ct();if(!this.jt.yt()||this.Li.Ni()||i===null)return;const a=zm(s.labelBackgroundColor);r.t=a.t,e.V=a.i;const l=2/12*this.Li.P();r.wi=l,r.gi=l;const c=this.Ei(this.Li);r.ki=c.ki,e.Kt=this.Li.Fi(c._t,i),e.yt=!0}}const LH=/[1-9]/g;class Sj{constructor(){this.zt=null}J(e){this.zt=e}X(e,n){if(this.zt===null||this.zt.yt===!1||this.zt.Kt.length===0)return;const r=e.useMediaCoordinateSpace(({context:f})=>(f.font=n.R,Math.round(n.Wi.xi(f,ke(this.zt).Kt,LH))));if(r<=0)return;const s=n.ji,i=r+2*s,a=i/2,l=this.zt.Hi;let c=this.zt.ki,u=Math.floor(c-a)+.5;u<0?(c+=Math.abs(0-u),u=Math.floor(c-a)+.5):u+i>l&&(c-=Math.abs(l-(u+i)),u=Math.floor(c-a)+.5);const d=u+i,h=Math.ceil(0+n.C+n.T+n.L+n.P+n.B);e.useBitmapCoordinateSpace(({context:f,horizontalPixelRatio:p,verticalPixelRatio:y})=>{const b=ke(this.zt);f.fillStyle=b.t;const _=Math.round(u*p),m=Math.round(0*y),x=Math.round(d*p),w=Math.round(h*y),v=Math.round(2*p);if(f.beginPath(),f.moveTo(_,m),f.lineTo(_,w-v),f.arcTo(_,w,_+v,w,v),f.lineTo(x-v,w),f.arcTo(x,w,x,w-v,v),f.lineTo(x,m),f.fill(),b.hi){const T=Math.round(b.ki*p),E=m,D=Math.round((E+n.T)*y);f.fillStyle=b.V;const te=Math.max(1,Math.floor(p)),re=Math.floor(.5*p);f.fillRect(T-re,E,te,D-E)}}),e.useMediaCoordinateSpace(({context:f})=>{const p=ke(this.zt),y=0+n.C+n.T+n.L+n.P/2;f.font=n.R,f.textAlign="left",f.textBaseline="middle",f.fillStyle=p.V;const b=n.Wi.Mi(f,"Apr0");f.translate(u+s,y+b),f.fillText(p.Kt,0,0)})}}class MH{constructor(e,n,r){this.ft=!0,this.Wt=new Sj,this.Ft={yt:!1,t:"#4c525e",V:"white",Kt:"",Hi:0,ki:NaN,hi:!0},this.vt=e,this.$i=n,this.Ei=r}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt.J(this.Ft),this.Wt}Mt(){const e=this.Ft;if(e.yt=!1,this.vt.W().mode===2)return;const n=this.vt.W().vertLine;if(!n.labelVisible)return;const r=this.$i.St();if(r.Ni())return;e.Hi=r.Hi();const s=this.Ei();if(s===null)return;e.ki=s.ki;const i=r.Ui(this.vt.xt());e.Kt=r.qi(ke(i)),e.yt=!0;const a=zm(n.labelBackgroundColor);e.t=a.t,e.V=a.i,e.hi=r.W().ticksVisible}}class zw{constructor(){this.Yi=null,this.Zi=0}Xi(){return this.Zi}Ki(e){this.Zi=e}Dt(){return this.Yi}Gi(e){this.Yi=e}Ji(e){return[]}Qi(){return[]}yt(){return!0}}var PE;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden"})(PE||(PE={}));class DH extends zw{constructor(e,n){super(),this.tn=null,this.nn=NaN,this.sn=0,this.en=!0,this.rn=new Map,this.hn=!1,this.ln=NaN,this.an=NaN,this._n=NaN,this.un=NaN,this.$i=e,this.cn=n,this.dn=new kH(e,this),this.fn=((s,i)=>a=>{const l=i(),c=s();if(a===ke(this.tn).vn())return{_t:c,ki:l};{const u=ke(a.Ct());return{_t:a.pn(l,u),ki:l}}})(()=>this.nn,()=>this.an);const r=((s,i)=>()=>{const a=this.$i.St().mn(s()),l=i();return a&&Number.isFinite(l)?{ot:a,ki:l}:null})(()=>this.sn,()=>this.Yt());this.bn=new MH(this,e,r),this.wn=new PH(this)}W(){return this.cn}gn(e,n){this._n=e,this.un=n}Mn(){this._n=NaN,this.un=NaN}xn(){return this._n}Sn(){return this.un}kn(e,n,r){this.hn||(this.hn=!0),this.en=!0,this.yn(e,n,r)}xt(){return this.sn}Yt(){return this.ln}Zt(){return this.an}yt(){return this.en}Cn(){this.en=!1,this.Tn(),this.nn=NaN,this.ln=NaN,this.an=NaN,this.tn=null,this.Mn()}Pn(e){return this.tn!==null?[this.wn,this.dn]:[]}Ut(e){return e===this.tn&&this.cn.horzLine.visible}qt(){return this.cn.vertLine.visible}Rn(e,n){this.en&&this.tn===e||this.rn.clear();const r=[];return this.tn===e&&r.push(this.Dn(this.rn,n,this.fn)),r}Qi(){return this.en?[this.bn]:[]}Ht(){return this.tn}Vn(){this.wn.bt(),this.rn.forEach(e=>e.bt()),this.bn.bt(),this.dn.bt()}On(e){return e&&!e.vn().Ni()?e.vn():null}yn(e,n,r){this.Bn(e,n,r)&&this.Vn()}Bn(e,n,r){const s=this.ln,i=this.an,a=this.nn,l=this.sn,c=this.tn,u=this.On(r);this.sn=e,this.ln=isNaN(e)?NaN:this.$i.St().It(e),this.tn=r;const d=u!==null?u.Ct():null;return u!==null&&d!==null?(this.nn=n,this.an=u.Rt(n,d)):(this.nn=NaN,this.an=NaN),s!==this.ln||i!==this.an||l!==this.sn||a!==this.nn||c!==this.tn}Tn(){const e=this.$i.wt().map(r=>r.In().An()).filter(NH),n=e.length===0?null:Math.max(...e);this.sn=n!==null?n:NaN}Dn(e,n,r){let s=e.get(n);return s===void 0&&(s=new RH(this,n,r),e.set(n,s)),s}}function Wm(t){return t==="left"||t==="right"}class un{constructor(e){this.zn=new Map,this.Ln=[],this.En=e}Nn(e,n){const r=function(s,i){return s===void 0?i:{Fn:Math.max(s.Fn,i.Fn),Wn:s.Wn||i.Wn}}(this.zn.get(e),n);this.zn.set(e,r)}jn(){return this.En}Hn(e){const n=this.zn.get(e);return n===void 0?{Fn:this.En}:{Fn:Math.max(this.En,n.Fn),Wn:n.Wn}}$n(){this.Un(),this.Ln=[{qn:0}]}Yn(e){this.Un(),this.Ln=[{qn:1,Vt:e}]}Zn(e){this.Xn(),this.Ln.push({qn:5,Vt:e})}Un(){this.Xn(),this.Ln.push({qn:6})}Kn(){this.Un(),this.Ln=[{qn:4}]}Gn(e){this.Un(),this.Ln.push({qn:2,Vt:e})}Jn(e){this.Un(),this.Ln.push({qn:3,Vt:e})}Qn(){return this.Ln}ts(e){for(const n of e.Ln)this.ns(n);this.En=Math.max(this.En,e.En),e.zn.forEach((n,r)=>{this.Nn(r,n)})}static ss(){return new un(2)}static es(){return new un(3)}ns(e){switch(e.qn){case 0:this.$n();break;case 1:this.Yn(e.Vt);break;case 2:this.Gn(e.Vt);break;case 3:this.Jn(e.Vt);break;case 4:this.Kn();break;case 5:this.Zn(e.Vt);break;case 6:this.Xn()}}Xn(){const e=this.Ln.findIndex(n=>n.qn===5);e!==-1&&this.Ln.splice(e,1)}}const IE=".";function Ks(t,e){if(!Es(t))return"n/a";if(!zu(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class Km{constructor(e,n){if(n||(n=1),Es(e)&&zu(e)||(e=100),e<0)throw new TypeError("invalid base");this.Li=e,this.rs=n,this.hs()}format(e){const n=e<0?"":"";return e=Math.abs(e),n+this.ls(e)}hs(){if(this._s=0,this.Li>0&&this.rs>0){let e=this.Li;for(;e>1;)e/=10,this._s++}}ls(e){const n=this.Li/this.rs;let r=Math.floor(e),s="";const i=this._s!==void 0?this._s:NaN;if(n>1){let a=+(Math.round(e*n)-r*n).toFixed(this._s);a>=n&&(a-=n,r+=1),s=IE+Ks(+a.toFixed(this._s)*this.rs,i)}else r=Math.round(r*n)/n,i>0&&(s=IE+Ks(0,i));return r.toFixed(0)+s}}class Nj extends Km{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class FH{constructor(e){this.us=e}format(e){let n="";return e<0&&(n="-",e=-e),e<995?n+this.cs(e):e<999995?n+this.cs(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),n+this.cs(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),n+this.cs(e/1e9)+"B")}cs(e){let n;const r=Math.pow(10,this.us);return n=(e=Math.round(e*r)/r)>=1e-15&&e<1?e.toFixed(this.us).replace(/\.?0+$/,""):String(e),n.replace(/(\.[1-9]*)0+$/,(s,i)=>i)}}function Tj(t,e,n,r,s,i,a){if(e.length===0||r.from>=e.length||r.to<=0)return;const{context:l,horizontalPixelRatio:c,verticalPixelRatio:u}=t,d=e[r.from];let h=i(t,d),f=d;if(r.to-r.from<2){const p=s/2;l.beginPath();const y={nt:d.nt-p,st:d.st},b={nt:d.nt+p,st:d.st};l.moveTo(y.nt*c,y.st*u),l.lineTo(b.nt*c,b.st*u),a(t,h,y,b)}else{const p=(b,_)=>{a(t,h,f,_),l.beginPath(),h=b,f=_};let y=f;l.beginPath(),l.moveTo(d.nt*c,d.st*u);for(let b=r.from+1;b<r.to;++b){y=e[b];const _=i(t,y);switch(n){case 0:l.lineTo(y.nt*c,y.st*u);break;case 1:l.lineTo(y.nt*c,e[b-1].st*u),_!==h&&(p(_,y),l.lineTo(y.nt*c,e[b-1].st*u)),l.lineTo(y.nt*c,y.st*u);break;case 2:{const[m,x]=BH(e,b-1,b);l.bezierCurveTo(m.nt*c,m.st*u,x.nt*c,x.st*u,y.nt*c,y.st*u);break}}n!==1&&_!==h&&(p(_,y),l.moveTo(y.nt*c,y.st*u))}(f!==y||f===y&&n===1)&&a(t,h,f,y)}}const RE=6;function Ag(t,e){return{nt:t.nt-e.nt,st:t.st-e.st}}function LE(t,e){return{nt:t.nt/e,st:t.st/e}}function BH(t,e,n){const r=Math.max(0,e-1),s=Math.min(t.length-1,n+1);var i,a;return[(i=t[e],a=LE(Ag(t[n],t[r]),RE),{nt:i.nt+a.nt,st:i.st+a.st}),Ag(t[n],LE(Ag(t[s],t[e]),RE))]}function $H(t,e,n,r,s){const{context:i,horizontalPixelRatio:a,verticalPixelRatio:l}=e;i.lineTo(s.nt*a,t*l),i.lineTo(r.nt*a,t*l),i.closePath(),i.fillStyle=n,i.fill()}class Aj extends ss{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){var n;if(this.G===null)return;const{it:r,tt:s,ds:i,et:a,Nt:l,fs:c}=this.G,u=(n=this.G.vs)!==null&&n!==void 0?n:this.G.ps?0:e.mediaSize.height;if(s===null)return;const d=e.context;d.lineCap="butt",d.lineJoin="round",d.lineWidth=a,Ea(d,l),d.lineWidth=1,Tj(e,r,c,s,i,this.bs.bind(this),$H.bind(null,u))}}function Iy(t,e,n){return Math.min(Math.max(t,e),n)}function yh(t,e,n){return e-t<=n}function Cj(t){const e=Math.ceil(t);return e%2==0?e-1:e}class Hw{ws(e,n){const r=this.gs,{Ms:s,xs:i,Ss:a,ks:l,ys:c,vs:u}=n;if(this.Cs===void 0||r===void 0||r.Ms!==s||r.xs!==i||r.Ss!==a||r.ks!==l||r.vs!==u||r.ys!==c){const d=e.context.createLinearGradient(0,0,0,c);if(d.addColorStop(0,s),u!=null){const h=Iy(u*e.verticalPixelRatio/c,0,1);d.addColorStop(h,i),d.addColorStop(h,a)}d.addColorStop(1,l),this.Cs=d,this.gs=n}return this.Cs}}class UH extends Aj{constructor(){super(...arguments),this.Ts=new Hw}bs(e,n){return this.Ts.ws(e,{Ms:n.Ps,xs:"",Ss:"",ks:n.Rs,ys:e.bitmapSize.height})}}function VH(t,e){const n=t.context;n.strokeStyle=e,n.stroke()}class jj extends ss{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){if(this.G===null)return;const{it:n,tt:r,ds:s,fs:i,et:a,Nt:l,Ds:c}=this.G;if(r===null)return;const u=e.context;u.lineCap="butt",u.lineWidth=a*e.verticalPixelRatio,Ea(u,l),u.lineJoin="round";const d=this.Vs.bind(this);i!==void 0&&Tj(e,n,i,r,s,d,VH),c&&function(h,f,p,y,b){const{horizontalPixelRatio:_,verticalPixelRatio:m,context:x}=h;let w=null;const v=Math.max(1,Math.floor(_))%2/2,T=p*m+v;for(let E=y.to-1;E>=y.from;--E){const D=f[E];if(D){const te=b(h,D);te!==w&&(x.beginPath(),w!==null&&x.fill(),x.fillStyle=te,w=te);const re=Math.round(D.nt*_)+v,z=D.st*m;x.moveTo(re,z),x.arc(re,z,T,0,2*Math.PI)}}x.fill()}(e,n,c,r,d)}}class kj extends jj{Vs(e,n){return n.lt}}function Oj(t,e,n,r,s=0,i=e.length){let a=i-s;for(;0<a;){const l=a>>1,c=s+l;r(e[c],n)===t?(s=c+1,a-=l+1):a=l}return s}const _d=Oj.bind(null,!0),Pj=Oj.bind(null,!1);function zH(t,e){return t.ot<e}function HH(t,e){return e<t.ot}function Ij(t,e,n){const r=e.Os(),s=e.ui(),i=_d(t,r,zH),a=Pj(t,s,HH);if(!n)return{from:i,to:a};let l=i,c=a;return i>0&&i<t.length&&t[i].ot>=r&&(l=i-1),a>0&&a<t.length&&t[a-1].ot<=s&&(c=a+1),{from:l,to:c}}class Xw{constructor(e,n,r){this.Bs=!0,this.As=!0,this.Is=!0,this.zs=[],this.Ls=null,this.Es=e,this.Ns=n,this.Fs=r}bt(e){this.Bs=!0,e==="data"&&(this.As=!0),e==="options"&&(this.Is=!0)}gt(){return this.Es.yt()?(this.Ws(),this.Ls===null?null:this.js):null}Hs(){this.zs=this.zs.map(e=>Object.assign(Object.assign({},e),this.Es.Us().$s(e.ot)))}qs(){this.Ls=null}Ws(){this.As&&(this.Ys(),this.As=!1),this.Is&&(this.Hs(),this.Is=!1),this.Bs&&(this.Zs(),this.Bs=!1)}Zs(){const e=this.Es.Dt(),n=this.Ns.St();if(this.qs(),n.Ni()||e.Ni())return;const r=n.Xs();if(r===null||this.Es.In().Ks()===0)return;const s=this.Es.Ct();s!==null&&(this.Ls=Ij(this.zs,r,this.Fs),this.Gs(e,n,s.Vt),this.Js())}}class qm extends Xw{constructor(e,n){super(e,n,!0)}Gs(e,n,r){n.Qs(this.zs,Hu(this.Ls)),e.te(this.zs,r,Hu(this.Ls))}ie(e,n){return{ot:e,_t:n,nt:NaN,st:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(n=>{const r=n.Vt[3];return this.se(n.ee,r,e)})}}class XH extends qm{constructor(e,n){super(e,n),this.js=new Vw,this.re=new UH,this.he=new kj,this.js.Z([this.re,this.he])}se(e,n,r){return Object.assign(Object.assign({},this.ie(e,n)),r.$s(e))}Js(){const e=this.Es.W();this.re.J({fs:e.lineType,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,vs:null,ps:e.invertFilledArea,tt:this.Ls,ds:this.Ns.St().le()}),this.he.J({fs:e.lineVisible?e.lineType:void 0,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,tt:this.Ls,ds:this.Ns.St().le(),Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0})}}class WH extends ss{constructor(){super(...arguments),this.zt=null,this.ae=0,this.oe=0}J(e){this.zt=e}K({context:e,horizontalPixelRatio:n,verticalPixelRatio:r}){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;this.ae=this._e(n),this.ae>=2&&Math.max(1,Math.floor(n))%2!=this.ae%2&&this.ae--,this.oe=this.zt.ue?Math.min(this.ae,Math.floor(n)):this.ae;let s=null;const i=this.oe<=this.ae&&this.zt.le>=Math.floor(1.5*n);for(let a=this.zt.tt.from;a<this.zt.tt.to;++a){const l=this.zt.In[a];s!==l.ce&&(e.fillStyle=l.ce,s=l.ce);const c=Math.floor(.5*this.oe),u=Math.round(l.nt*n),d=u-c,h=this.oe,f=d+h-1,p=Math.min(l.de,l.fe),y=Math.max(l.de,l.fe),b=Math.round(p*r)-c,_=Math.round(y*r)+c,m=Math.max(_-b,this.oe);e.fillRect(d,b,h,m);const x=Math.ceil(1.5*this.ae);if(i){if(this.zt.ve){const E=u-x;let D=Math.max(b,Math.round(l.pe*r)-c),te=D+h-1;te>b+m-1&&(te=b+m-1,D=te-h+1),e.fillRect(E,D,d-E,te-D+1)}const w=u+x;let v=Math.max(b,Math.round(l.me*r)-c),T=v+h-1;T>b+m-1&&(T=b+m-1,v=T-h+1),e.fillRect(f+1,v,w-f,T-v+1)}}}_e(e){const n=Math.floor(e);return Math.max(n,Math.floor(function(r,s){return Math.floor(.3*r*s)}(ke(this.zt).le,e)))}}class Rj extends Xw{constructor(e,n){super(e,n,!1)}Gs(e,n,r){n.Qs(this.zs,Hu(this.Ls)),e.be(this.zs,r,Hu(this.Ls))}we(e,n,r){return{ot:e,ge:n.Vt[0],Me:n.Vt[1],xe:n.Vt[2],Se:n.Vt[3],nt:NaN,pe:NaN,de:NaN,fe:NaN,me:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(n=>this.se(n.ee,n,e))}}class KH extends Rj{constructor(){super(...arguments),this.js=new WH}se(e,n,r){return Object.assign(Object.assign({},this.we(e,n,r)),r.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),ve:e.openVisible,ue:e.thinBars,tt:this.Ls})}}class qH extends Aj{constructor(){super(...arguments),this.Ts=new Hw}bs(e,n){const r=this.G;return this.Ts.ws(e,{Ms:n.ke,xs:n.ye,Ss:n.Ce,ks:n.Te,ys:e.bitmapSize.height,vs:r.vs})}}class GH extends jj{constructor(){super(...arguments),this.Pe=new Hw}Vs(e,n){const r=this.G;return this.Pe.ws(e,{Ms:n.Re,xs:n.Re,Ss:n.De,ks:n.De,ys:e.bitmapSize.height,vs:r.vs})}}class YH extends qm{constructor(e,n){super(e,n),this.js=new Vw,this.Ve=new qH,this.Oe=new GH,this.js.Z([this.Ve,this.Oe])}se(e,n,r){return Object.assign(Object.assign({},this.ie(e,n)),r.$s(e))}Js(){const e=this.Es.Ct();if(e===null)return;const n=this.Es.W(),r=this.Es.Dt().Rt(n.baseValue.price,e.Vt),s=this.Ns.St().le();this.Ve.J({it:this.zs,et:n.lineWidth,Nt:n.lineStyle,fs:n.lineType,vs:r,ps:!1,tt:this.Ls,ds:s}),this.Oe.J({it:this.zs,et:n.lineWidth,Nt:n.lineStyle,fs:n.lineVisible?n.lineType:void 0,Ds:n.pointMarkersVisible?n.pointMarkersRadius||n.lineWidth/2+2:void 0,vs:r,tt:this.Ls,ds:s})}}class JH extends ss{constructor(){super(...arguments),this.zt=null,this.ae=0}J(e){this.zt=e}K(e){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;const{horizontalPixelRatio:n}=e;this.ae=function(i,a){if(i>=2.5&&i<=4)return Math.floor(3*a);const l=1-.2*Math.atan(Math.max(4,i)-4)/(.5*Math.PI),c=Math.floor(i*l*a),u=Math.floor(i*a),d=Math.min(c,u);return Math.max(Math.floor(a),d)}(this.zt.le,n),this.ae>=2&&Math.floor(n)%2!=this.ae%2&&this.ae--;const r=this.zt.In;this.zt.Be&&this.Ae(e,r,this.zt.tt),this.zt._i&&this.Ie(e,r,this.zt.tt);const s=this.ze(n);(!this.zt._i||this.ae>2*s)&&this.Le(e,r,this.zt.tt)}Ae(e,n,r){if(this.zt===null)return;const{context:s,horizontalPixelRatio:i,verticalPixelRatio:a}=e;let l="",c=Math.min(Math.floor(i),Math.floor(this.zt.le*i));c=Math.max(Math.floor(i),Math.min(c,this.ae));const u=Math.floor(.5*c);let d=null;for(let h=r.from;h<r.to;h++){const f=n[h];f.Ee!==l&&(s.fillStyle=f.Ee,l=f.Ee);const p=Math.round(Math.min(f.pe,f.me)*a),y=Math.round(Math.max(f.pe,f.me)*a),b=Math.round(f.de*a),_=Math.round(f.fe*a);let m=Math.round(i*f.nt)-u;const x=m+c-1;d!==null&&(m=Math.max(d+1,m),m=Math.min(m,x));const w=x-m+1;s.fillRect(m,b,w,p-b),s.fillRect(m,y+1,w,_-y),d=x}}ze(e){let n=Math.floor(1*e);this.ae<=2*n&&(n=Math.floor(.5*(this.ae-1)));const r=Math.max(Math.floor(e),n);return this.ae<=2*r?Math.max(Math.floor(e),Math.floor(1*e)):r}Ie(e,n,r){if(this.zt===null)return;const{context:s,horizontalPixelRatio:i,verticalPixelRatio:a}=e;let l="";const c=this.ze(i);let u=null;for(let d=r.from;d<r.to;d++){const h=n[d];h.Ne!==l&&(s.fillStyle=h.Ne,l=h.Ne);let f=Math.round(h.nt*i)-Math.floor(.5*this.ae);const p=f+this.ae-1,y=Math.round(Math.min(h.pe,h.me)*a),b=Math.round(Math.max(h.pe,h.me)*a);if(u!==null&&(f=Math.max(u+1,f),f=Math.min(f,p)),this.zt.le*i>2*c)IH(s,f,y,p-f+1,b-y+1,c);else{const _=p-f+1;s.fillRect(f,y,_,b-y+1)}u=p}}Le(e,n,r){if(this.zt===null)return;const{context:s,horizontalPixelRatio:i,verticalPixelRatio:a}=e;let l="";const c=this.ze(i);for(let u=r.from;u<r.to;u++){const d=n[u];let h=Math.round(Math.min(d.pe,d.me)*a),f=Math.round(Math.max(d.pe,d.me)*a),p=Math.round(d.nt*i)-Math.floor(.5*this.ae),y=p+this.ae-1;if(d.ce!==l){const b=d.ce;s.fillStyle=b,l=b}this.zt._i&&(p+=c,h+=c,y-=c,f-=c),h>f||s.fillRect(p,h,y-p+1,f-h+1)}}}class QH extends Rj{constructor(){super(...arguments),this.js=new JH}se(e,n,r){return Object.assign(Object.assign({},this.we(e,n,r)),r.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),Be:e.wickVisible,_i:e.borderVisible,tt:this.Ls})}}class ZH{constructor(e,n){this.Fe=e,this.Li=n}X(e,n,r){this.Fe.draw(e,this.Li,n,r)}}class Cg extends Xw{constructor(e,n,r){super(e,n,!1),this.wn=r,this.js=new ZH(this.wn.renderer(),s=>{const i=e.Ct();return i===null?null:e.Dt().Rt(s,i.Vt)})}We(e){return this.wn.priceValueBuilder(e)}je(e){return this.wn.isWhitespace(e)}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(n=>Object.assign(Object.assign({ot:n.ee,nt:NaN},e.$s(n.ee)),{He:n.$e}))}Gs(e,n){n.Qs(this.zs,Hu(this.Ls))}Js(){this.wn.update({bars:this.zs.map(eX),barSpacing:this.Ns.St().le(),visibleRange:this.Ls},this.Es.W())}}function eX(t){return{x:t.nt,time:t.ot,originalData:t.He,barColor:t.ce}}class tX extends ss{constructor(){super(...arguments),this.zt=null,this.Ue=[]}J(e){this.zt=e,this.Ue=[]}K({context:e,horizontalPixelRatio:n,verticalPixelRatio:r}){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return;this.Ue.length||this.qe(n);const s=Math.max(1,Math.floor(r)),i=Math.round(this.zt.Ye*r)-Math.floor(s/2),a=i+s;for(let l=this.zt.tt.from;l<this.zt.tt.to;l++){const c=this.zt.it[l],u=this.Ue[l-this.zt.tt.from],d=Math.round(c.st*r);let h,f;e.fillStyle=c.ce,d<=i?(h=d,f=a):(h=i,f=d-Math.floor(s/2)+s),e.fillRect(u.Os,h,u.ui-u.Os+1,f-h)}}qe(e){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return void(this.Ue=[]);const n=Math.ceil(this.zt.le*e)<=1?0:Math.max(1,Math.floor(e)),r=Math.round(this.zt.le*e)-n;this.Ue=new Array(this.zt.tt.to-this.zt.tt.from);for(let i=this.zt.tt.from;i<this.zt.tt.to;i++){const a=this.zt.it[i],l=Math.round(a.nt*e);let c,u;if(r%2){const d=(r-1)/2;c=l-d,u=l+d}else{const d=r/2;c=l-d,u=l+d-1}this.Ue[i-this.zt.tt.from]={Os:c,ui:u,Ze:l,Xe:a.nt*e,ot:a.ot}}for(let i=this.zt.tt.from+1;i<this.zt.tt.to;i++){const a=this.Ue[i-this.zt.tt.from],l=this.Ue[i-this.zt.tt.from-1];a.ot===l.ot+1&&a.Os-l.ui!==n+1&&(l.Ze>l.Xe?l.ui=a.Os-n-1:a.Os=l.ui+n+1)}let s=Math.ceil(this.zt.le*e);for(let i=this.zt.tt.from;i<this.zt.tt.to;i++){const a=this.Ue[i-this.zt.tt.from];a.ui<a.Os&&(a.ui=a.Os);const l=a.ui-a.Os+1;s=Math.min(l,s)}if(n>0&&s<4)for(let i=this.zt.tt.from;i<this.zt.tt.to;i++){const a=this.Ue[i-this.zt.tt.from];a.ui-a.Os+1>s&&(a.Ze>a.Xe?a.ui-=1:a.Os+=1)}}}class nX extends qm{constructor(){super(...arguments),this.js=new tX}se(e,n,r){return Object.assign(Object.assign({},this.ie(e,n)),r.$s(e))}Js(){const e={it:this.zs,le:this.Ns.St().le(),tt:this.Ls,Ye:this.Es.Dt().Rt(this.Es.W().base,ke(this.Es.Ct()).Vt)};this.js.J(e)}}class rX extends qm{constructor(){super(...arguments),this.js=new kj}se(e,n,r){return Object.assign(Object.assign({},this.ie(e,n)),r.$s(e))}Js(){const e=this.Es.W(),n={it:this.zs,Nt:e.lineStyle,fs:e.lineVisible?e.lineType:void 0,et:e.lineWidth,Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,tt:this.Ls,ds:this.Ns.St().le()};this.js.J(n)}}const sX=/[2-9]/g;class Xu{constructor(e=50){this.Ke=0,this.Ge=1,this.Je=1,this.Qe={},this.tr=new Map,this.ir=e}nr(){this.Ke=0,this.tr.clear(),this.Ge=1,this.Je=1,this.Qe={}}xi(e,n,r){return this.sr(e,n,r).width}Mi(e,n,r){const s=this.sr(e,n,r);return((s.actualBoundingBoxAscent||0)-(s.actualBoundingBoxDescent||0))/2}sr(e,n,r){const s=r||sX,i=String(n).replace(s,"0");if(this.tr.has(i))return On(this.tr.get(i)).er;if(this.Ke===this.ir){const l=this.Qe[this.Je];delete this.Qe[this.Je],this.tr.delete(l),this.Je++,this.Ke--}e.save(),e.textBaseline="middle";const a=e.measureText(i);return e.restore(),a.width===0&&n.length||(this.tr.set(i,{er:a,rr:this.Ge}),this.Qe[this.Ge]=i,this.Ke++,this.Ge++),a}}class iX{constructor(e){this.hr=null,this.k=null,this.lr="right",this.ar=e}_r(e,n,r){this.hr=e,this.k=n,this.lr=r}X(e){this.k!==null&&this.hr!==null&&this.hr.X(e,this.k,this.ar,this.lr)}}class Lj{constructor(e,n,r){this.ur=e,this.ar=new Xu(50),this.cr=n,this.F=r,this.j=-1,this.Wt=new iX(this.ar)}gt(){const e=this.F.dr(this.cr);if(e===null)return null;const n=e.vr(this.cr)?e.pr():this.cr.Dt();if(n===null)return null;const r=e.mr(n);if(r==="overlay")return null;const s=this.F.br();return s.P!==this.j&&(this.j=s.P,this.ar.nr()),this.Wt._r(this.ur.Ii(),s,r),this.Wt}}class oX extends ss{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}wr(e,n){var r;if(!(!((r=this.zt)===null||r===void 0)&&r.yt))return null;const{st:s,et:i,gr:a}=this.zt;return n>=s-i-7&&n<=s+i+7?{Mr:this.zt,gr:a}:null}K({context:e,bitmapSize:n,horizontalPixelRatio:r,verticalPixelRatio:s}){if(this.zt===null||this.zt.yt===!1)return;const i=Math.round(this.zt.st*s);i<0||i>n.height||(e.lineCap="butt",e.strokeStyle=this.zt.V,e.lineWidth=Math.floor(this.zt.et*r),Ea(e,this.zt.Nt),wj(e,i,0,n.width))}}class Ww{constructor(e){this.Sr={st:0,V:"rgba(0, 0, 0, 0)",et:1,Nt:0,yt:!1},this.kr=new oX,this.ft=!0,this.Es=e,this.Ns=e.$t(),this.kr.J(this.Sr)}bt(){this.ft=!0}gt(){return this.Es.yt()?(this.ft&&(this.yr(),this.ft=!1),this.kr):null}}class aX extends Ww{constructor(e){super(e)}yr(){this.Sr.yt=!1;const e=this.Es.Dt(),n=e.Cr().Cr;if(n!==2&&n!==3)return;const r=this.Es.W();if(!r.baseLineVisible||!this.Es.yt())return;const s=this.Es.Ct();s!==null&&(this.Sr.yt=!0,this.Sr.st=e.Rt(s.Vt,s.Vt),this.Sr.V=r.baseLineColor,this.Sr.et=r.baseLineWidth,this.Sr.Nt=r.baseLineStyle)}}class lX extends ss{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}$e(){return this.zt}K({context:e,horizontalPixelRatio:n,verticalPixelRatio:r}){const s=this.zt;if(s===null)return;const i=Math.max(1,Math.floor(n)),a=i%2/2,l=Math.round(s.Xe.x*n)+a,c=s.Xe.y*r;e.fillStyle=s.Tr,e.beginPath();const u=Math.max(2,1.5*s.Pr)*n;e.arc(l,c,u,0,2*Math.PI,!1),e.fill(),e.fillStyle=s.Rr,e.beginPath(),e.arc(l,c,s.ht*n,0,2*Math.PI,!1),e.fill(),e.lineWidth=i,e.strokeStyle=s.Dr,e.beginPath(),e.arc(l,c,s.ht*n+i/2,0,2*Math.PI,!1),e.stroke()}}const cX=[{Vr:0,Or:.25,Br:4,Ar:10,Ir:.25,zr:0,Lr:.4,Er:.8},{Vr:.25,Or:.525,Br:10,Ar:14,Ir:0,zr:0,Lr:.8,Er:0},{Vr:.525,Or:1,Br:14,Ar:14,Ir:0,zr:0,Lr:0,Er:0}];function ME(t,e,n,r){return function(s,i){if(s==="transparent")return s;const a=Vu(s),l=a[3];return`rgba(${a[0]}, ${a[1]}, ${a[2]}, ${i*l})`}(t,n+(r-n)*e)}function DE(t,e){const n=t%2600/2600;let r;for(const c of cX)if(n>=c.Vr&&n<=c.Or){r=c;break}fo(r!==void 0,"Last price animation internal logic error");const s=(n-r.Vr)/(r.Or-r.Vr);return{Rr:ME(e,s,r.Ir,r.zr),Dr:ME(e,s,r.Lr,r.Er),ht:(i=s,a=r.Br,l=r.Ar,a+(l-a)*i)};var i,a,l}class uX{constructor(e){this.Wt=new lX,this.ft=!0,this.Nr=!0,this.Fr=performance.now(),this.Wr=this.Fr-1,this.jr=e}Hr(){this.Wr=this.Fr-1,this.bt()}$r(){if(this.bt(),this.jr.W().lastPriceAnimation===2){const e=performance.now(),n=this.Wr-e;if(n>0)return void(n<650&&(this.Wr+=2600));this.Fr=e,this.Wr=e+2600}}bt(){this.ft=!0}Ur(){this.Nr=!0}yt(){return this.jr.W().lastPriceAnimation!==0}qr(){switch(this.jr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Wr}}gt(){return this.ft?(this.Mt(),this.ft=!1,this.Nr=!1):this.Nr&&(this.Yr(),this.Nr=!1),this.Wt}Mt(){this.Wt.J(null);const e=this.jr.$t().St(),n=e.Xs(),r=this.jr.Ct();if(n===null||r===null)return;const s=this.jr.Zr(!0);if(s.Xr||!n.Kr(s.ee))return;const i={x:e.It(s.ee),y:this.jr.Dt().Rt(s._t,r.Vt)},a=s.V,l=this.jr.W().lineWidth,c=DE(this.Gr(),a);this.Wt.J({Tr:a,Pr:l,Rr:c.Rr,Dr:c.Dr,ht:c.ht,Xe:i})}Yr(){const e=this.Wt.$e();if(e!==null){const n=DE(this.Gr(),e.Tr);e.Rr=n.Rr,e.Dr=n.Dr,e.ht=n.ht}}Gr(){return this.qr()?performance.now()-this.Fr:2599}}function hu(t,e){return Cj(Math.min(Math.max(t,12),30)*e)}function Wu(t,e){switch(t){case"arrowDown":case"arrowUp":return hu(e,1);case"circle":return hu(e,.8);case"square":return hu(e,.7)}}function Mj(t){return function(e){const n=Math.ceil(e);return n%2!=0?n-1:n}(hu(t,1))}function FE(t){return Math.max(hu(t,.1),3)}function BE(t,e,n){return e?t:n?Math.ceil(t/2):0}function Dj(t,e,n,r,s){const i=Wu("square",n),a=(i-1)/2,l=t-a,c=e-a;return r>=l&&r<=l+i&&s>=c&&s<=c+i}function $E(t,e,n,r){const s=(Wu("arrowUp",r)-1)/2*n.Jr,i=(Cj(r/2)-1)/2*n.Jr;e.beginPath(),t?(e.moveTo(n.nt-s,n.st),e.lineTo(n.nt,n.st-s),e.lineTo(n.nt+s,n.st),e.lineTo(n.nt+i,n.st),e.lineTo(n.nt+i,n.st+s),e.lineTo(n.nt-i,n.st+s),e.lineTo(n.nt-i,n.st)):(e.moveTo(n.nt-s,n.st),e.lineTo(n.nt,n.st+s),e.lineTo(n.nt+s,n.st),e.lineTo(n.nt+i,n.st),e.lineTo(n.nt+i,n.st-s),e.lineTo(n.nt-i,n.st-s),e.lineTo(n.nt-i,n.st)),e.fill()}function dX(t,e,n,r,s,i){return Dj(e,n,r,s,i)}class hX extends ss{constructor(){super(...arguments),this.zt=null,this.ar=new Xu,this.j=-1,this.H="",this.Qr=""}J(e){this.zt=e}_r(e,n){this.j===e&&this.H===n||(this.j=e,this.H=n,this.Qr=Wl(e,n),this.ar.nr())}wr(e,n){if(this.zt===null||this.zt.tt===null)return null;for(let r=this.zt.tt.from;r<this.zt.tt.to;r++){const s=this.zt.it[r];if(pX(s,e,n))return{Mr:s.th,gr:s.gr}}return null}K({context:e,horizontalPixelRatio:n,verticalPixelRatio:r},s,i){if(this.zt!==null&&this.zt.tt!==null){e.textBaseline="middle",e.font=this.Qr;for(let a=this.zt.tt.from;a<this.zt.tt.to;a++){const l=this.zt.it[a];l.Kt!==void 0&&(l.Kt.Hi=this.ar.xi(e,l.Kt.ih),l.Kt.At=this.j,l.Kt.nt=l.nt-l.Kt.Hi/2),fX(l,e,n,r)}}}}function fX(t,e,n,r){e.fillStyle=t.V,t.Kt!==void 0&&function(s,i,a,l,c,u){s.save(),s.scale(c,u),s.fillText(i,a,l),s.restore()}(e,t.Kt.ih,t.Kt.nt,t.Kt.st,n,r),function(s,i,a){if(s.Ks!==0){switch(s.nh){case"arrowDown":return void $E(!1,i,a,s.Ks);case"arrowUp":return void $E(!0,i,a,s.Ks);case"circle":return void function(l,c,u){const d=(Wu("circle",u)-1)/2;l.beginPath(),l.arc(c.nt,c.st,d*c.Jr,0,2*Math.PI,!1),l.fill()}(i,a,s.Ks);case"square":return void function(l,c,u){const d=Wu("square",u),h=(d-1)*c.Jr/2,f=c.nt-h,p=c.st-h;l.fillRect(f,p,d*c.Jr,d*c.Jr)}(i,a,s.Ks)}s.nh}}(t,e,function(s,i,a){const l=Math.max(1,Math.floor(i))%2/2;return{nt:Math.round(s.nt*i)+l,st:s.st*a,Jr:i}}(t,n,r))}function pX(t,e,n){return!(t.Kt===void 0||!function(r,s,i,a,l,c){const u=a/2;return l>=r&&l<=r+i&&c>=s-u&&c<=s+u}(t.Kt.nt,t.Kt.st,t.Kt.Hi,t.Kt.At,e,n))||function(r,s,i){if(r.Ks===0)return!1;switch(r.nh){case"arrowDown":case"arrowUp":return dX(0,r.nt,r.st,r.Ks,s,i);case"circle":return function(a,l,c,u,d){const h=2+Wu("circle",c)/2,f=a-u,p=l-d;return Math.sqrt(f*f+p*p)<=h}(r.nt,r.st,r.Ks,s,i);case"square":return Dj(r.nt,r.st,r.Ks,s,i)}}(t,e,n)}function mX(t,e,n,r,s,i,a,l,c){const u=Es(n)?n:n.Se,d=Es(n)?n:n.Me,h=Es(n)?n:n.xe,f=Es(e.size)?Math.max(e.size,0):1,p=Mj(l.le())*f,y=p/2;switch(t.Ks=p,e.position){case"inBar":return t.st=a.Rt(u,c),void(t.Kt!==void 0&&(t.Kt.st=t.st+y+i+.6*s));case"aboveBar":return t.st=a.Rt(d,c)-y-r.sh,t.Kt!==void 0&&(t.Kt.st=t.st-y-.6*s,r.sh+=1.2*s),void(r.sh+=p+i);case"belowBar":return t.st=a.Rt(h,c)+y+r.eh,t.Kt!==void 0&&(t.Kt.st=t.st+y+i+.6*s,r.eh+=1.2*s),void(r.eh+=p+i)}e.position}class gX{constructor(e,n){this.ft=!0,this.rh=!0,this.hh=!0,this.ah=null,this.oh=null,this.Wt=new hX,this.jr=e,this.$i=n,this.zt={it:[],tt:null}}bt(e){this.ft=!0,this.hh=!0,e==="data"&&(this.rh=!0,this.oh=null)}gt(e){if(!this.jr.yt())return null;this.ft&&this._h();const n=this.$i.W().layout;return this.Wt._r(n.fontSize,n.fontFamily),this.Wt.J(this.zt),this.Wt}uh(){if(this.hh){if(this.jr.dh().length>0){const e=this.$i.St().le(),n=FE(e),r=1.5*Mj(e)+2*n,s=this.fh();this.ah={above:BE(r,s.aboveBar,s.inBar),below:BE(r,s.belowBar,s.inBar)}}else this.ah=null;this.hh=!1}return this.ah}fh(){return this.oh===null&&(this.oh=this.jr.dh().reduce((e,n)=>(e[n.position]||(e[n.position]=!0),e),{inBar:!1,aboveBar:!1,belowBar:!1})),this.oh}_h(){const e=this.jr.Dt(),n=this.$i.St(),r=this.jr.dh();this.rh&&(this.zt.it=r.map(d=>({ot:d.time,nt:0,st:0,Ks:0,nh:d.shape,V:d.color,th:d.th,gr:d.id,Kt:void 0})),this.rh=!1);const s=this.$i.W().layout;this.zt.tt=null;const i=n.Xs();if(i===null)return;const a=this.jr.Ct();if(a===null||this.zt.it.length===0)return;let l=NaN;const c=FE(n.le()),u={sh:c,eh:c};this.zt.tt=Ij(this.zt.it,i,!0);for(let d=this.zt.tt.from;d<this.zt.tt.to;d++){const h=r[d];h.time!==l&&(u.sh=c,u.eh=c,l=h.time);const f=this.zt.it[d];f.nt=n.It(h.time),h.text!==void 0&&h.text.length>0&&(f.Kt={ih:h.text,nt:0,st:0,Hi:0,At:0});const p=this.jr.ph(h.time);p!==null&&mX(f,h,p,u,s.fontSize,c,e,n,a.Vt)}this.ft=!1}}class xX extends Ww{constructor(e){super(e)}yr(){const e=this.Sr;e.yt=!1;const n=this.Es.W();if(!n.priceLineVisible||!this.Es.yt())return;const r=this.Es.Zr(n.priceLineSource===0);r.Xr||(e.yt=!0,e.st=r.ki,e.V=this.Es.mh(r.V),e.et=n.priceLineWidth,e.Nt=n.priceLineStyle)}}class yX extends Xm{constructor(e){super(),this.jt=e}zi(e,n,r){e.yt=!1,n.yt=!1;const s=this.jt;if(!s.yt())return;const i=s.W(),a=i.lastValueVisible,l=s.bh()!=="",c=i.seriesLastValueMode===0,u=s.Zr(!1);if(u.Xr)return;a&&(e.Kt=this.wh(u,a,c),e.yt=e.Kt.length!==0),(l||c)&&(n.Kt=this.gh(u,a,l,c),n.yt=n.Kt.length>0);const d=s.mh(u.V),h=zm(d);r.t=h.t,r.ki=u.ki,n.Ot=s.$t().Bt(u.ki/s.Dt().At()),e.Ot=d,e.V=h.i,n.V=h.i}gh(e,n,r,s){let i="";const a=this.jt.bh();return r&&a.length!==0&&(i+=`${a} `),n&&s&&(i+=this.jt.Dt().Mh()?e.xh:e.Sh),i.trim()}wh(e,n,r){return n?r?this.jt.Dt().Mh()?e.Sh:e.xh:e.Kt:""}}function UE(t,e,n,r){const s=Number.isFinite(e),i=Number.isFinite(n);return s&&i?t(e,n):s||i?s?e:n:r}class Qn{constructor(e,n){this.kh=e,this.yh=n}Ch(e){return e!==null&&this.kh===e.kh&&this.yh===e.yh}Th(){return new Qn(this.kh,this.yh)}Ph(){return this.kh}Rh(){return this.yh}Dh(){return this.yh-this.kh}Ni(){return this.yh===this.kh||Number.isNaN(this.yh)||Number.isNaN(this.kh)}ts(e){return e===null?this:new Qn(UE(Math.min,this.Ph(),e.Ph(),-1/0),UE(Math.max,this.Rh(),e.Rh(),1/0))}Vh(e){if(!Es(e)||this.yh-this.kh===0)return;const n=.5*(this.yh+this.kh);let r=this.yh-n,s=this.kh-n;r*=e,s*=e,this.yh=n+r,this.kh=n+s}Oh(e){Es(e)&&(this.yh+=e,this.kh+=e)}Bh(){return{minValue:this.kh,maxValue:this.yh}}static Ah(e){return e===null?null:new Qn(e.minValue,e.maxValue)}}class Vf{constructor(e,n){this.Ih=e,this.zh=n||null}Lh(){return this.Ih}Eh(){return this.zh}Bh(){return this.Ih===null?null:{priceRange:this.Ih.Bh(),margins:this.zh||void 0}}static Ah(e){return e===null?null:new Vf(Qn.Ah(e.priceRange),e.margins)}}class vX extends Ww{constructor(e,n){super(e),this.Nh=n}yr(){const e=this.Sr;e.yt=!1;const n=this.Nh.W();if(!this.Es.yt()||!n.lineVisible)return;const r=this.Nh.Fh();r!==null&&(e.yt=!0,e.st=r,e.V=n.color,e.et=n.lineWidth,e.Nt=n.lineStyle,e.gr=this.Nh.W().id)}}class wX extends Xm{constructor(e,n){super(),this.jr=e,this.Nh=n}zi(e,n,r){e.yt=!1,n.yt=!1;const s=this.Nh.W(),i=s.axisLabelVisible,a=s.title!=="",l=this.jr;if(!i||!l.yt())return;const c=this.Nh.Fh();if(c===null)return;a&&(n.Kt=s.title,n.yt=!0),n.Ot=l.$t().Bt(c/l.Dt().At()),e.Kt=this.Wh(s.price),e.yt=!0;const u=zm(s.axisLabelColor||s.color);r.t=u.t;const d=s.axisLabelTextColor||u.i;e.V=d,n.V=d,r.ki=c}Wh(e){const n=this.jr.Ct();return n===null?"":this.jr.Dt().Fi(e,n.Vt)}}class bX{constructor(e,n){this.jr=e,this.cn=n,this.jh=new vX(e,this),this.ur=new wX(e,this),this.Hh=new Lj(this.ur,e,e.$t())}$h(e){ts(this.cn,e),this.bt(),this.jr.$t().Uh()}W(){return this.cn}qh(){return this.jh}Yh(){return this.Hh}Zh(){return this.ur}bt(){this.jh.bt(),this.ur.bt()}Fh(){const e=this.jr,n=e.Dt();if(e.$t().St().Ni()||n.Ni())return null;const r=e.Ct();return r===null?null:n.Rt(this.cn.price,r.Vt)}}class _X extends zw{constructor(e){super(),this.$i=e}$t(){return this.$i}}const EX={Bar:(t,e,n,r)=>{var s;const i=e.upColor,a=e.downColor,l=ke(t(n,r)),c=wl(l.Vt[0])<=wl(l.Vt[3]);return{ce:(s=l.V)!==null&&s!==void 0?s:c?i:a}},Candlestick:(t,e,n,r)=>{var s,i,a;const l=e.upColor,c=e.downColor,u=e.borderUpColor,d=e.borderDownColor,h=e.wickUpColor,f=e.wickDownColor,p=ke(t(n,r)),y=wl(p.Vt[0])<=wl(p.Vt[3]);return{ce:(s=p.V)!==null&&s!==void 0?s:y?l:c,Ne:(i=p.Ot)!==null&&i!==void 0?i:y?u:d,Ee:(a=p.Xh)!==null&&a!==void 0?a:y?h:f}},Custom:(t,e,n,r)=>{var s;return{ce:(s=ke(t(n,r)).V)!==null&&s!==void 0?s:e.color}},Area:(t,e,n,r)=>{var s,i,a,l;const c=ke(t(n,r));return{ce:(s=c.lt)!==null&&s!==void 0?s:e.lineColor,lt:(i=c.lt)!==null&&i!==void 0?i:e.lineColor,Ps:(a=c.Ps)!==null&&a!==void 0?a:e.topColor,Rs:(l=c.Rs)!==null&&l!==void 0?l:e.bottomColor}},Baseline:(t,e,n,r)=>{var s,i,a,l,c,u;const d=ke(t(n,r));return{ce:d.Vt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,Re:(s=d.Re)!==null&&s!==void 0?s:e.topLineColor,De:(i=d.De)!==null&&i!==void 0?i:e.bottomLineColor,ke:(a=d.ke)!==null&&a!==void 0?a:e.topFillColor1,ye:(l=d.ye)!==null&&l!==void 0?l:e.topFillColor2,Ce:(c=d.Ce)!==null&&c!==void 0?c:e.bottomFillColor1,Te:(u=d.Te)!==null&&u!==void 0?u:e.bottomFillColor2}},Line:(t,e,n,r)=>{var s,i;const a=ke(t(n,r));return{ce:(s=a.V)!==null&&s!==void 0?s:e.color,lt:(i=a.V)!==null&&i!==void 0?i:e.color}},Histogram:(t,e,n,r)=>{var s;return{ce:(s=ke(t(n,r)).V)!==null&&s!==void 0?s:e.color}}};class SX{constructor(e){this.Kh=(n,r)=>r!==void 0?r.Vt:this.jr.In().Gh(n),this.jr=e,this.Jh=EX[e.Qh()]}$s(e,n){return this.Jh(this.Kh,this.jr.W(),e,n)}}var VE;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})(VE||(VE={}));const bi=30;class NX{constructor(){this.tl=[],this.il=new Map,this.nl=new Map}sl(){return this.Ks()>0?this.tl[this.tl.length-1]:null}el(){return this.Ks()>0?this.rl(0):null}An(){return this.Ks()>0?this.rl(this.tl.length-1):null}Ks(){return this.tl.length}Ni(){return this.Ks()===0}Kr(e){return this.hl(e,0)!==null}Gh(e){return this.ll(e)}ll(e,n=0){const r=this.hl(e,n);return r===null?null:Object.assign(Object.assign({},this.al(r)),{ee:this.rl(r)})}ne(){return this.tl}ol(e,n,r){if(this.Ni())return null;let s=null;for(const i of r)s=vh(s,this._l(e,n,i));return s}J(e){this.nl.clear(),this.il.clear(),this.tl=e}rl(e){return this.tl[e].ee}al(e){return this.tl[e]}hl(e,n){const r=this.ul(e);if(r===null&&n!==0)switch(n){case-1:return this.cl(e);case 1:return this.dl(e);default:throw new TypeError("Unknown search mode")}return r}cl(e){let n=this.fl(e);return n>0&&(n-=1),n!==this.tl.length&&this.rl(n)<e?n:null}dl(e){const n=this.vl(e);return n!==this.tl.length&&e<this.rl(n)?n:null}ul(e){const n=this.fl(e);return n===this.tl.length||e<this.tl[n].ee?null:n}fl(e){return _d(this.tl,e,(n,r)=>n.ee<r)}vl(e){return Pj(this.tl,e,(n,r)=>n.ee>r)}pl(e,n,r){let s=null;for(let i=e;i<n;i++){const a=this.tl[i].Vt[r];Number.isNaN(a)||(s===null?s={ml:a,bl:a}:(a<s.ml&&(s.ml=a),a>s.bl&&(s.bl=a)))}return s}_l(e,n,r){if(this.Ni())return null;let s=null;const i=ke(this.el()),a=ke(this.An()),l=Math.max(e,i),c=Math.min(n,a),u=Math.ceil(l/bi)*bi,d=Math.max(u,Math.floor(c/bi)*bi);{const f=this.fl(l),p=this.vl(Math.min(c,u,n));s=vh(s,this.pl(f,p,r))}let h=this.il.get(r);h===void 0&&(h=new Map,this.il.set(r,h));for(let f=Math.max(u+1,l);f<d;f+=bi){const p=Math.floor(f/bi);let y=h.get(p);if(y===void 0){const b=this.fl(p*bi),_=this.vl((p+1)*bi-1);y=this.pl(b,_,r),h.set(p,y)}s=vh(s,y)}{const f=this.fl(d),p=this.vl(c);s=vh(s,this.pl(f,p,r))}return s}}function vh(t,e){return t===null?e:e===null?t:{ml:Math.min(t.ml,e.ml),bl:Math.max(t.bl,e.bl)}}class TX{constructor(e){this.wl=e}X(e,n,r){this.wl.draw(e)}gl(e,n,r){var s,i;(i=(s=this.wl).drawBackground)===null||i===void 0||i.call(s,e)}}class jg{constructor(e){this.tr=null,this.wn=e}gt(){var e;const n=this.wn.renderer();if(n===null)return null;if(((e=this.tr)===null||e===void 0?void 0:e.Ml)===n)return this.tr.xl;const r=new TX(n);return this.tr={Ml:n,xl:r},r}Sl(){var e,n,r;return(r=(n=(e=this.wn).zOrder)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:"normal"}}function Fj(t){var e,n,r,s,i;return{Kt:t.text(),ki:t.coordinate(),Si:(e=t.fixedCoordinate)===null||e===void 0?void 0:e.call(t),V:t.textColor(),t:t.backColor(),yt:(r=(n=t.visible)===null||n===void 0?void 0:n.call(t))===null||r===void 0||r,hi:(i=(s=t.tickVisible)===null||s===void 0?void 0:s.call(t))===null||i===void 0||i}}class AX{constructor(e,n){this.Wt=new Sj,this.kl=e,this.yl=n}gt(){return this.Wt.J(Object.assign({Hi:this.yl.Hi()},Fj(this.kl))),this.Wt}}class CX extends Xm{constructor(e,n){super(),this.kl=e,this.Li=n}zi(e,n,r){const s=Fj(this.kl);r.t=s.t,e.V=s.V;const i=2/12*this.Li.P();r.wi=i,r.gi=i,r.ki=s.ki,r.Si=s.Si,e.Kt=s.Kt,e.yt=s.yt,e.hi=s.hi}}class jX{constructor(e,n){this.Cl=null,this.Tl=null,this.Pl=null,this.Rl=null,this.Dl=null,this.Vl=e,this.jr=n}Ol(){return this.Vl}Vn(){var e,n;(n=(e=this.Vl).updateAllViews)===null||n===void 0||n.call(e)}Pn(){var e,n,r,s;const i=(r=(n=(e=this.Vl).paneViews)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[];if(((s=this.Cl)===null||s===void 0?void 0:s.Ml)===i)return this.Cl.xl;const a=i.map(l=>new jg(l));return this.Cl={Ml:i,xl:a},a}Qi(){var e,n,r,s;const i=(r=(n=(e=this.Vl).timeAxisViews)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[];if(((s=this.Tl)===null||s===void 0?void 0:s.Ml)===i)return this.Tl.xl;const a=this.jr.$t().St(),l=i.map(c=>new AX(c,a));return this.Tl={Ml:i,xl:l},l}Rn(){var e,n,r,s;const i=(r=(n=(e=this.Vl).priceAxisViews)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[];if(((s=this.Pl)===null||s===void 0?void 0:s.Ml)===i)return this.Pl.xl;const a=this.jr.Dt(),l=i.map(c=>new CX(c,a));return this.Pl={Ml:i,xl:l},l}Bl(){var e,n,r,s;const i=(r=(n=(e=this.Vl).priceAxisPaneViews)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[];if(((s=this.Rl)===null||s===void 0?void 0:s.Ml)===i)return this.Rl.xl;const a=i.map(l=>new jg(l));return this.Rl={Ml:i,xl:a},a}Al(){var e,n,r,s;const i=(r=(n=(e=this.Vl).timeAxisPaneViews)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[];if(((s=this.Dl)===null||s===void 0?void 0:s.Ml)===i)return this.Dl.xl;const a=i.map(l=>new jg(l));return this.Dl={Ml:i,xl:a},a}Il(e,n){var r,s,i;return(i=(s=(r=this.Vl).autoscaleInfo)===null||s===void 0?void 0:s.call(r,e,n))!==null&&i!==void 0?i:null}wr(e,n){var r,s,i;return(i=(s=(r=this.Vl).hitTest)===null||s===void 0?void 0:s.call(r,e,n))!==null&&i!==void 0?i:null}}function kg(t,e,n,r){t.forEach(s=>{e(s).forEach(i=>{i.Sl()===n&&r.push(i)})})}function Og(t){return t.Pn()}function kX(t){return t.Bl()}function OX(t){return t.Al()}class Kw extends _X{constructor(e,n,r,s,i){super(e),this.zt=new NX,this.jh=new xX(this),this.zl=[],this.Ll=new aX(this),this.El=null,this.Nl=null,this.Fl=[],this.Wl=[],this.jl=null,this.Hl=[],this.cn=n,this.$l=r;const a=new yX(this);this.rn=[a],this.Hh=new Lj(a,this,e),r!=="Area"&&r!=="Line"&&r!=="Baseline"||(this.El=new uX(this)),this.Ul(),this.ql(i)}S(){this.jl!==null&&clearTimeout(this.jl)}mh(e){return this.cn.priceLineColor||e}Zr(e){const n={Xr:!0},r=this.Dt();if(this.$t().St().Ni()||r.Ni()||this.zt.Ni())return n;const s=this.$t().St().Xs(),i=this.Ct();if(s===null||i===null)return n;let a,l;if(e){const h=this.zt.sl();if(h===null)return n;a=h,l=h.ee}else{const h=this.zt.ll(s.ui(),-1);if(h===null||(a=this.zt.Gh(h.ee),a===null))return n;l=h.ee}const c=a.Vt[3],u=this.Us().$s(l,{Vt:a}),d=r.Rt(c,i.Vt);return{Xr:!1,_t:c,Kt:r.Fi(c,i.Vt),xh:r.Yl(c),Sh:r.Zl(c,i.Vt),V:u.ce,ki:d,ee:l}}Us(){return this.Nl!==null||(this.Nl=new SX(this)),this.Nl}W(){return this.cn}$h(e){const n=e.priceScaleId;n!==void 0&&n!==this.cn.priceScaleId&&this.$t().Xl(this,n),ts(this.cn,e),e.priceFormat!==void 0&&(this.Ul(),this.$t().Kl()),this.$t().Gl(this),this.$t().Jl(),this.wn.bt("options")}J(e,n){this.zt.J(e),this.Ql(),this.wn.bt("data"),this.dn.bt("data"),this.El!==null&&(n&&n.ta?this.El.$r():e.length===0&&this.El.Hr());const r=this.$t().dr(this);this.$t().ia(r),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}na(e){this.Fl=e,this.Ql();const n=this.$t().dr(this);this.dn.bt("data"),this.$t().ia(n),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}sa(){return this.Fl}dh(){return this.Wl}ea(e){const n=new bX(this,e);return this.zl.push(n),this.$t().Gl(this),n}ra(e){const n=this.zl.indexOf(e);n!==-1&&this.zl.splice(n,1),this.$t().Gl(this)}Qh(){return this.$l}Ct(){const e=this.ha();return e===null?null:{Vt:e.Vt[3],la:e.ot}}ha(){const e=this.$t().St().Xs();if(e===null)return null;const n=e.Os();return this.zt.ll(n,1)}In(){return this.zt}ph(e){const n=this.zt.Gh(e);return n===null?null:this.$l==="Bar"||this.$l==="Candlestick"||this.$l==="Custom"?{ge:n.Vt[0],Me:n.Vt[1],xe:n.Vt[2],Se:n.Vt[3]}:n.Vt[3]}aa(e){const n=[];kg(this.Hl,Og,"top",n);const r=this.El;return r!==null&&r.yt()&&(this.jl===null&&r.qr()&&(this.jl=setTimeout(()=>{this.jl=null,this.$t().oa()},0)),r.Ur(),n.unshift(r)),n}Pn(){const e=[];this._a()||e.push(this.Ll),e.push(this.wn,this.jh,this.dn);const n=this.zl.map(r=>r.qh());return e.push(...n),kg(this.Hl,Og,"normal",e),e}ua(){return this.ca(Og,"bottom")}da(e){return this.ca(kX,e)}fa(e){return this.ca(OX,e)}va(e,n){return this.Hl.map(r=>r.wr(e,n)).filter(r=>r!==null)}Ji(e){return[this.Hh,...this.zl.map(n=>n.Yh())]}Rn(e,n){if(n!==this.Yi&&!this._a())return[];const r=[...this.rn];for(const s of this.zl)r.push(s.Zh());return this.Hl.forEach(s=>{r.push(...s.Rn())}),r}Qi(){const e=[];return this.Hl.forEach(n=>{e.push(...n.Qi())}),e}Il(e,n){if(this.cn.autoscaleInfoProvider!==void 0){const r=this.cn.autoscaleInfoProvider(()=>{const s=this.pa(e,n);return s===null?null:s.Bh()});return Vf.Ah(r)}return this.pa(e,n)}ma(){return this.cn.priceFormat.minMove}ba(){return this.wa}Vn(){var e;this.wn.bt(),this.dn.bt();for(const n of this.rn)n.bt();for(const n of this.zl)n.bt();this.jh.bt(),this.Ll.bt(),(e=this.El)===null||e===void 0||e.bt(),this.Hl.forEach(n=>n.Vn())}Dt(){return ke(super.Dt())}kt(e){if(!((this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline")&&this.cn.crosshairMarkerVisible))return null;const n=this.zt.Gh(e);return n===null?null:{_t:n.Vt[3],ht:this.ga(),Ot:this.Ma(),Pt:this.xa(),Tt:this.Sa(e)}}bh(){return this.cn.title}yt(){return this.cn.visible}ka(e){this.Hl.push(new jX(e,this))}ya(e){this.Hl=this.Hl.filter(n=>n.Ol()!==e)}Ca(){if(this.wn instanceof Cg)return e=>this.wn.We(e)}Ta(){if(this.wn instanceof Cg)return e=>this.wn.je(e)}_a(){return!Wm(this.Dt().Pa())}pa(e,n){if(!zu(e)||!zu(n)||this.zt.Ni())return null;const r=this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline"||this.$l==="Histogram"?[3]:[2,1],s=this.zt.ol(e,n,r);let i=s!==null?new Qn(s.ml,s.bl):null;if(this.Qh()==="Histogram"){const l=this.cn.base,c=new Qn(l,l);i=i!==null?i.ts(c):c}let a=this.dn.uh();return this.Hl.forEach(l=>{const c=l.Il(e,n);if(c!=null&&c.priceRange){const p=new Qn(c.priceRange.minValue,c.priceRange.maxValue);i=i!==null?i.ts(p):p}var u,d,h,f;c!=null&&c.margins&&(u=a,d=c.margins,a={above:Math.max((h=u==null?void 0:u.above)!==null&&h!==void 0?h:0,d.above),below:Math.max((f=u==null?void 0:u.below)!==null&&f!==void 0?f:0,d.below)})}),new Vf(i,a)}ga(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerRadius}return 0}Ma(){switch(this.$l){case"Line":case"Area":case"Baseline":{const e=this.cn.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}xa(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerBorderWidth}return 0}Sa(e){switch(this.$l){case"Line":case"Area":case"Baseline":{const n=this.cn.crosshairMarkerBackgroundColor;if(n.length!==0)return n}}return this.Us().$s(e).ce}Ul(){switch(this.cn.priceFormat.type){case"custom":this.wa={format:this.cn.priceFormat.formatter};break;case"volume":this.wa=new FH(this.cn.priceFormat.precision);break;case"percent":this.wa=new Nj(this.cn.priceFormat.precision);break;default:{const e=Math.pow(10,this.cn.priceFormat.precision);this.wa=new Km(e,this.cn.priceFormat.minMove*e)}}this.Yi!==null&&this.Yi.Ra()}Ql(){const e=this.$t().St();if(!e.Da()||this.zt.Ni())return void(this.Wl=[]);const n=ke(this.zt.el());this.Wl=this.Fl.map((r,s)=>{const i=ke(e.Va(r.time,!0)),a=i<n?1:-1;return{time:ke(this.zt.ll(i,a)).ee,position:r.position,shape:r.shape,color:r.color,id:r.id,th:s,text:r.text,size:r.size,originalTime:r.originalTime}})}ql(e){switch(this.dn=new gX(this,this.$t()),this.$l){case"Bar":this.wn=new KH(this,this.$t());break;case"Candlestick":this.wn=new QH(this,this.$t());break;case"Line":this.wn=new rX(this,this.$t());break;case"Custom":this.wn=new Cg(this,this.$t(),On(e));break;case"Area":this.wn=new XH(this,this.$t());break;case"Baseline":this.wn=new YH(this,this.$t());break;case"Histogram":this.wn=new nX(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.$l)}}ca(e,n){const r=[];return kg(this.Hl,e,n,r),r}}class PX{constructor(e){this.cn=e}Oa(e,n,r){let s=e;if(this.cn.mode===0)return s;const i=r.vn(),a=i.Ct();if(a===null)return s;const l=i.Rt(e,a),c=r.Ba().filter(d=>d instanceof Kw).reduce((d,h)=>{if(r.vr(h)||!h.yt())return d;const f=h.Dt(),p=h.In();if(f.Ni()||!p.Kr(n))return d;const y=p.Gh(n);if(y===null)return d;const b=wl(h.Ct());return d.concat([f.Rt(y.Vt[3],b.Vt)])},[]);if(c.length===0)return s;c.sort((d,h)=>Math.abs(d-l)-Math.abs(h-l));const u=c[0];return s=i.pn(u,a),s}}class IX extends ss{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}K({context:e,bitmapSize:n,horizontalPixelRatio:r,verticalPixelRatio:s}){if(this.zt===null)return;const i=Math.max(1,Math.floor(r));e.lineWidth=i,function(a,l){a.save(),a.lineWidth%2&&a.translate(.5,.5),l(),a.restore()}(e,()=>{const a=ke(this.zt);if(a.Aa){e.strokeStyle=a.Ia,Ea(e,a.za),e.beginPath();for(const l of a.La){const c=Math.round(l.Ea*r);e.moveTo(c,-i),e.lineTo(c,n.height+i)}e.stroke()}if(a.Na){e.strokeStyle=a.Fa,Ea(e,a.Wa),e.beginPath();for(const l of a.ja){const c=Math.round(l.Ea*s);e.moveTo(-i,c),e.lineTo(n.width+i,c)}e.stroke()}})}}class RX{constructor(e){this.Wt=new IX,this.ft=!0,this.tn=e}bt(){this.ft=!0}gt(){if(this.ft){const e=this.tn.$t().W().grid,n={Na:e.horzLines.visible,Aa:e.vertLines.visible,Fa:e.horzLines.color,Ia:e.vertLines.color,Wa:e.horzLines.style,za:e.vertLines.style,ja:this.tn.vn().Ha(),La:(this.tn.$t().St().Ha()||[]).map(r=>({Ea:r.coord}))};this.Wt.J(n),this.ft=!1}return this.Wt}}class LX{constructor(e){this.wn=new RX(e)}qh(){return this.wn}}const Pg={$a:4,Ua:1e-4};function bl(t,e){const n=100*(t-e)/e;return e<0?-n:n}function MX(t,e){const n=bl(t.Ph(),e),r=bl(t.Rh(),e);return new Qn(n,r)}function fu(t,e){const n=100*(t-e)/e+100;return e<0?-n:n}function DX(t,e){const n=fu(t.Ph(),e),r=fu(t.Rh(),e);return new Qn(n,r)}function zf(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const r=Math.log10(n+e.Ua)+e.$a;return t<0?-r:r}function pu(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const r=Math.pow(10,n-e.$a)-e.Ua;return t<0?-r:r}function Rc(t,e){if(t===null)return null;const n=zf(t.Ph(),e),r=zf(t.Rh(),e);return new Qn(n,r)}function wh(t,e){if(t===null)return null;const n=pu(t.Ph(),e),r=pu(t.Rh(),e);return new Qn(n,r)}function Ig(t){if(t===null)return Pg;const e=Math.abs(t.Rh()-t.Ph());if(e>=1||e<1e-15)return Pg;const n=Math.ceil(Math.abs(Math.log10(e))),r=Pg.$a+n;return{$a:r,Ua:1/Math.pow(10,r)}}class Rg{constructor(e,n){if(this.qa=e,this.Ya=n,function(r){if(r<0)return!1;for(let s=r;s>1;s/=10)if(s%10!=0)return!1;return!0}(this.qa))this.Za=[2,2.5,2];else{this.Za=[];for(let r=this.qa;r!==1;){if(r%2==0)this.Za.push(2),r/=2;else{if(r%5!=0)throw new Error("unexpected base");this.Za.push(2,2.5),r/=5}if(this.Za.length>100)throw new Error("something wrong with base")}}}Xa(e,n,r){const s=this.qa===0?0:1/this.qa;let i=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-n)))),a=0,l=this.Ya[0];for(;;){const h=yh(i,s,1e-14)&&i>s+1e-14,f=yh(i,r*l,1e-14),p=yh(i,1,1e-14);if(!(h&&f&&p))break;i/=l,l=this.Ya[++a%this.Ya.length]}if(i<=s+1e-14&&(i=s),i=Math.max(1,i),this.Za.length>0&&(c=i,u=1,d=1e-14,Math.abs(c-u)<d))for(a=0,l=this.Za[0];yh(i,r*l,1e-14)&&i>s+1e-14;)i/=l,l=this.Za[++a%this.Za.length];var c,u,d;return i}}class zE{constructor(e,n,r,s){this.Ka=[],this.Li=e,this.qa=n,this.Ga=r,this.Ja=s}Xa(e,n){if(e<n)throw new Error("high < low");const r=this.Li.At(),s=(e-n)*this.Qa()/r,i=new Rg(this.qa,[2,2.5,2]),a=new Rg(this.qa,[2,2,2.5]),l=new Rg(this.qa,[2.5,2,2]),c=[];return c.push(i.Xa(e,n,s),a.Xa(e,n,s),l.Xa(e,n,s)),function(u){if(u.length<1)throw Error("array is empty");let d=u[0];for(let h=1;h<u.length;++h)u[h]<d&&(d=u[h]);return d}(c)}io(){const e=this.Li,n=e.Ct();if(n===null)return void(this.Ka=[]);const r=e.At(),s=this.Ga(r-1,n),i=this.Ga(0,n),a=this.Li.W().entireTextOnly?this.no()/2:0,l=a,c=r-1-a,u=Math.max(s,i),d=Math.min(s,i);if(u===d)return void(this.Ka=[]);let h=this.Xa(u,d),f=u%h;f+=f<0?h:0;const p=u>=d?1:-1;let y=null,b=0;for(let _=u-f;_>d;_-=h){const m=this.Ja(_,n,!0);y!==null&&Math.abs(m-y)<this.Qa()||m<l||m>c||(b<this.Ka.length?(this.Ka[b].Ea=m,this.Ka[b].so=e.eo(_)):this.Ka.push({Ea:m,so:e.eo(_)}),b++,y=m,e.ro()&&(h=this.Xa(_*p,d)))}this.Ka.length=b}Ha(){return this.Ka}no(){return this.Li.P()}Qa(){return Math.ceil(2.5*this.no())}}function Bj(t){return t.slice().sort((e,n)=>ke(e.Xi())-ke(n.Xi()))}var HE;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(HE||(HE={}));const XE=new Nj,WE=new Km(100,1);class FX{constructor(e,n,r,s){this.ho=0,this.lo=null,this.Ih=null,this.ao=null,this.oo={_o:!1,uo:null},this.co=0,this.do=0,this.fo=new Vt,this.vo=new Vt,this.po=[],this.mo=null,this.bo=null,this.wo=null,this.Mo=null,this.wa=WE,this.xo=Ig(null),this.So=e,this.cn=n,this.ko=r,this.yo=s,this.Co=new zE(this,100,this.To.bind(this),this.Po.bind(this))}Pa(){return this.So}W(){return this.cn}$h(e){if(ts(this.cn,e),this.Ra(),e.mode!==void 0&&this.Ro({Cr:e.mode}),e.scaleMargins!==void 0){const n=On(e.scaleMargins.top),r=On(e.scaleMargins.bottom);if(n<0||n>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${n}`);if(r<0||r>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${r}`);if(n+r>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${n+r}`);this.Do(),this.bo=null}}Vo(){return this.cn.autoScale}ro(){return this.cn.mode===1}Mh(){return this.cn.mode===2}Oo(){return this.cn.mode===3}Cr(){return{Wn:this.cn.autoScale,Bo:this.cn.invertScale,Cr:this.cn.mode}}Ro(e){const n=this.Cr();let r=null;e.Wn!==void 0&&(this.cn.autoScale=e.Wn),e.Cr!==void 0&&(this.cn.mode=e.Cr,e.Cr!==2&&e.Cr!==3||(this.cn.autoScale=!0),this.oo._o=!1),n.Cr===1&&e.Cr!==n.Cr&&(function(i,a){if(i===null)return!1;const l=pu(i.Ph(),a),c=pu(i.Rh(),a);return isFinite(l)&&isFinite(c)}(this.Ih,this.xo)?(r=wh(this.Ih,this.xo),r!==null&&this.Ao(r)):this.cn.autoScale=!0),e.Cr===1&&e.Cr!==n.Cr&&(r=Rc(this.Ih,this.xo),r!==null&&this.Ao(r));const s=n.Cr!==this.cn.mode;s&&(n.Cr===2||this.Mh())&&this.Ra(),s&&(n.Cr===3||this.Oo())&&this.Ra(),e.Bo!==void 0&&n.Bo!==e.Bo&&(this.cn.invertScale=e.Bo,this.Io()),this.vo.m(n,this.Cr())}zo(){return this.vo}P(){return this.ko.fontSize}At(){return this.ho}Lo(e){this.ho!==e&&(this.ho=e,this.Do(),this.bo=null)}Eo(){if(this.lo)return this.lo;const e=this.At()-this.No()-this.Fo();return this.lo=e,e}Lh(){return this.Wo(),this.Ih}Ao(e,n){const r=this.Ih;(n||r===null&&e!==null||r!==null&&!r.Ch(e))&&(this.bo=null,this.Ih=e)}Ni(){return this.Wo(),this.ho===0||!this.Ih||this.Ih.Ni()}jo(e){return this.Bo()?e:this.At()-1-e}Rt(e,n){return this.Mh()?e=bl(e,n):this.Oo()&&(e=fu(e,n)),this.Po(e,n)}te(e,n,r){this.Wo();const s=this.Fo(),i=ke(this.Lh()),a=i.Ph(),l=i.Rh(),c=this.Eo()-1,u=this.Bo(),d=c/(l-a),h=r===void 0?0:r.from,f=r===void 0?e.length:r.to,p=this.Ho();for(let y=h;y<f;y++){const b=e[y],_=b._t;if(isNaN(_))continue;let m=_;p!==null&&(m=p(b._t,n));const x=s+d*(m-a),w=u?x:this.ho-1-x;b.st=w}}be(e,n,r){this.Wo();const s=this.Fo(),i=ke(this.Lh()),a=i.Ph(),l=i.Rh(),c=this.Eo()-1,u=this.Bo(),d=c/(l-a),h=r===void 0?0:r.from,f=r===void 0?e.length:r.to,p=this.Ho();for(let y=h;y<f;y++){const b=e[y];let _=b.ge,m=b.Me,x=b.xe,w=b.Se;p!==null&&(_=p(b.ge,n),m=p(b.Me,n),x=p(b.xe,n),w=p(b.Se,n));let v=s+d*(_-a),T=u?v:this.ho-1-v;b.pe=T,v=s+d*(m-a),T=u?v:this.ho-1-v,b.de=T,v=s+d*(x-a),T=u?v:this.ho-1-v,b.fe=T,v=s+d*(w-a),T=u?v:this.ho-1-v,b.me=T}}pn(e,n){const r=this.To(e,n);return this.$o(r,n)}$o(e,n){let r=e;return this.Mh()?r=function(s,i){return i<0&&(s=-s),s/100*i+i}(r,n):this.Oo()&&(r=function(s,i){return s-=100,i<0&&(s=-s),s/100*i+i}(r,n)),r}Ba(){return this.po}Uo(){if(this.mo)return this.mo;let e=[];for(let n=0;n<this.po.length;n++){const r=this.po[n];r.Xi()===null&&r.Ki(n+1),e.push(r)}return e=Bj(e),this.mo=e,this.mo}qo(e){this.po.indexOf(e)===-1&&(this.po.push(e),this.Ra(),this.Yo())}Zo(e){const n=this.po.indexOf(e);if(n===-1)throw new Error("source is not attached to scale");this.po.splice(n,1),this.po.length===0&&(this.Ro({Wn:!0}),this.Ao(null)),this.Ra(),this.Yo()}Ct(){let e=null;for(const n of this.po){const r=n.Ct();r!==null&&(e===null||r.la<e.la)&&(e=r)}return e===null?null:e.Vt}Bo(){return this.cn.invertScale}Ha(){const e=this.Ct()===null;if(this.bo!==null&&(e||this.bo.Xo===e))return this.bo.Ha;this.Co.io();const n=this.Co.Ha();return this.bo={Ha:n,Xo:e},this.fo.m(),n}Ko(){return this.fo}Go(e){this.Mh()||this.Oo()||this.wo===null&&this.ao===null&&(this.Ni()||(this.wo=this.ho-e,this.ao=ke(this.Lh()).Th()))}Jo(e){if(this.Mh()||this.Oo()||this.wo===null)return;this.Ro({Wn:!1}),(e=this.ho-e)<0&&(e=0);let n=(this.wo+.2*(this.ho-1))/(e+.2*(this.ho-1));const r=ke(this.ao).Th();n=Math.max(n,.1),r.Vh(n),this.Ao(r)}Qo(){this.Mh()||this.Oo()||(this.wo=null,this.ao=null)}t_(e){this.Vo()||this.Mo===null&&this.ao===null&&(this.Ni()||(this.Mo=e,this.ao=ke(this.Lh()).Th()))}i_(e){if(this.Vo()||this.Mo===null)return;const n=ke(this.Lh()).Dh()/(this.Eo()-1);let r=e-this.Mo;this.Bo()&&(r*=-1);const s=r*n,i=ke(this.ao).Th();i.Oh(s),this.Ao(i,!0),this.bo=null}n_(){this.Vo()||this.Mo!==null&&(this.Mo=null,this.ao=null)}ba(){return this.wa||this.Ra(),this.wa}Fi(e,n){switch(this.cn.mode){case 2:return this.s_(bl(e,n));case 3:return this.ba().format(fu(e,n));default:return this.Wh(e)}}eo(e){switch(this.cn.mode){case 2:return this.s_(e);case 3:return this.ba().format(e);default:return this.Wh(e)}}Yl(e){return this.Wh(e,ke(this.e_()).ba())}Zl(e,n){return e=bl(e,n),this.s_(e,XE)}r_(){return this.po}h_(e){this.oo={uo:e,_o:!1}}Vn(){this.po.forEach(e=>e.Vn())}Ra(){this.bo=null;const e=this.e_();let n=100;e!==null&&(n=Math.round(1/e.ma())),this.wa=WE,this.Mh()?(this.wa=XE,n=100):this.Oo()?(this.wa=new Km(100,1),n=100):e!==null&&(this.wa=e.ba()),this.Co=new zE(this,n,this.To.bind(this),this.Po.bind(this)),this.Co.io()}Yo(){this.mo=null}e_(){return this.po[0]||null}No(){return this.Bo()?this.cn.scaleMargins.bottom*this.At()+this.do:this.cn.scaleMargins.top*this.At()+this.co}Fo(){return this.Bo()?this.cn.scaleMargins.top*this.At()+this.co:this.cn.scaleMargins.bottom*this.At()+this.do}Wo(){this.oo._o||(this.oo._o=!0,this.l_())}Do(){this.lo=null}Po(e,n){if(this.Wo(),this.Ni())return 0;e=this.ro()&&e?zf(e,this.xo):e;const r=ke(this.Lh()),s=this.Fo()+(this.Eo()-1)*(e-r.Ph())/r.Dh();return this.jo(s)}To(e,n){if(this.Wo(),this.Ni())return 0;const r=this.jo(e),s=ke(this.Lh()),i=s.Ph()+s.Dh()*((r-this.Fo())/(this.Eo()-1));return this.ro()?pu(i,this.xo):i}Io(){this.bo=null,this.Co.io()}l_(){const e=this.oo.uo;if(e===null)return;let n=null;const r=this.r_();let s=0,i=0;for(const c of r){if(!c.yt())continue;const u=c.Ct();if(u===null)continue;const d=c.Il(e.Os(),e.ui());let h=d&&d.Lh();if(h!==null){switch(this.cn.mode){case 1:h=Rc(h,this.xo);break;case 2:h=MX(h,u.Vt);break;case 3:h=DX(h,u.Vt)}if(n=n===null?h:n.ts(ke(h)),d!==null){const f=d.Eh();f!==null&&(s=Math.max(s,f.above),i=Math.max(i,f.below))}}}if(s===this.co&&i===this.do||(this.co=s,this.do=i,this.bo=null,this.Do()),n!==null){if(n.Ph()===n.Rh()){const c=this.e_(),u=5*(c===null||this.Mh()||this.Oo()?1:c.ma());this.ro()&&(n=wh(n,this.xo)),n=new Qn(n.Ph()-u,n.Rh()+u),this.ro()&&(n=Rc(n,this.xo))}if(this.ro()){const c=wh(n,this.xo),u=Ig(c);if(a=u,l=this.xo,a.$a!==l.$a||a.Ua!==l.Ua){const d=this.ao!==null?wh(this.ao,this.xo):null;this.xo=u,n=Rc(c,u),d!==null&&(this.ao=Rc(d,u))}}this.Ao(n)}else this.Ih===null&&(this.Ao(new Qn(-.5,.5)),this.xo=Ig(null));var a,l;this.oo._o=!0}Ho(){return this.Mh()?bl:this.Oo()?fu:this.ro()?e=>zf(e,this.xo):null}a_(e,n,r){return n===void 0?(r===void 0&&(r=this.ba()),r.format(e)):n(e)}Wh(e,n){return this.a_(e,this.yo.priceFormatter,n)}s_(e,n){return this.a_(e,this.yo.percentageFormatter,n)}}class BX{constructor(e,n){this.po=[],this.o_=new Map,this.ho=0,this.__=0,this.u_=1e3,this.mo=null,this.c_=new Vt,this.yl=e,this.$i=n,this.d_=new LX(this);const r=n.W();this.f_=this.v_("left",r.leftPriceScale),this.p_=this.v_("right",r.rightPriceScale),this.f_.zo().l(this.m_.bind(this,this.f_),this),this.p_.zo().l(this.m_.bind(this,this.p_),this),this.b_(r)}b_(e){if(e.leftPriceScale&&this.f_.$h(e.leftPriceScale),e.rightPriceScale&&this.p_.$h(e.rightPriceScale),e.localization&&(this.f_.Ra(),this.p_.Ra()),e.overlayPriceScales){const n=Array.from(this.o_.values());for(const r of n){const s=ke(r[0].Dt());s.$h(e.overlayPriceScales),e.localization&&s.Ra()}}}w_(e){switch(e){case"left":return this.f_;case"right":return this.p_}return this.o_.has(e)?On(this.o_.get(e))[0].Dt():null}S(){this.$t().g_().p(this),this.f_.zo().p(this),this.p_.zo().p(this),this.po.forEach(e=>{e.S&&e.S()}),this.c_.m()}M_(){return this.u_}x_(e){this.u_=e}$t(){return this.$i}Hi(){return this.__}At(){return this.ho}S_(e){this.__=e,this.k_()}Lo(e){this.ho=e,this.f_.Lo(e),this.p_.Lo(e),this.po.forEach(n=>{if(this.vr(n)){const r=n.Dt();r!==null&&r.Lo(e)}}),this.k_()}Ba(){return this.po}vr(e){const n=e.Dt();return n===null||this.f_!==n&&this.p_!==n}qo(e,n,r){const s=r!==void 0?r:this.C_().y_+1;this.T_(e,n,s)}Zo(e){const n=this.po.indexOf(e);fo(n!==-1,"removeDataSource: invalid data source"),this.po.splice(n,1);const r=ke(e.Dt()).Pa();if(this.o_.has(r)){const i=On(this.o_.get(r)),a=i.indexOf(e);a!==-1&&(i.splice(a,1),i.length===0&&this.o_.delete(r))}const s=e.Dt();s&&s.Ba().indexOf(e)>=0&&s.Zo(e),s!==null&&(s.Yo(),this.P_(s)),this.mo=null}mr(e){return e===this.f_?"left":e===this.p_?"right":"overlay"}R_(){return this.f_}D_(){return this.p_}V_(e,n){e.Go(n)}O_(e,n){e.Jo(n),this.k_()}B_(e){e.Qo()}A_(e,n){e.t_(n)}I_(e,n){e.i_(n),this.k_()}z_(e){e.n_()}k_(){this.po.forEach(e=>{e.Vn()})}vn(){let e=null;return this.$i.W().rightPriceScale.visible&&this.p_.Ba().length!==0?e=this.p_:this.$i.W().leftPriceScale.visible&&this.f_.Ba().length!==0?e=this.f_:this.po.length!==0&&(e=this.po[0].Dt()),e===null&&(e=this.p_),e}pr(){let e=null;return this.$i.W().rightPriceScale.visible?e=this.p_:this.$i.W().leftPriceScale.visible&&(e=this.f_),e}P_(e){e!==null&&e.Vo()&&this.L_(e)}E_(e){const n=this.yl.Xs();e.Ro({Wn:!0}),n!==null&&e.h_(n),this.k_()}N_(){this.L_(this.f_),this.L_(this.p_)}F_(){this.P_(this.f_),this.P_(this.p_),this.po.forEach(e=>{this.vr(e)&&this.P_(e.Dt())}),this.k_(),this.$i.Uh()}Uo(){return this.mo===null&&(this.mo=Bj(this.po)),this.mo}W_(){return this.c_}j_(){return this.d_}L_(e){const n=e.r_();if(n&&n.length>0&&!this.yl.Ni()){const r=this.yl.Xs();r!==null&&e.h_(r)}e.Vn()}C_(){const e=this.Uo();if(e.length===0)return{H_:0,y_:0};let n=0,r=0;for(let s=0;s<e.length;s++){const i=e[s].Xi();i!==null&&(i<n&&(n=i),i>r&&(r=i))}return{H_:n,y_:r}}T_(e,n,r){let s=this.w_(n);if(s===null&&(s=this.v_(n,this.$i.W().overlayPriceScales)),this.po.push(e),!Wm(n)){const i=this.o_.get(n)||[];i.push(e),this.o_.set(n,i)}s.qo(e),e.Gi(s),e.Ki(r),this.P_(s),this.mo=null}m_(e,n,r){n.Cr!==r.Cr&&this.L_(e)}v_(e,n){const r=Object.assign({visible:!0,autoScale:!0},Ws(n)),s=new FX(e,r,this.$i.W().layout,this.$i.W().localization);return s.Lo(this.At()),s}}class $X{constructor(e,n,r=50){this.Ke=0,this.Ge=1,this.Je=1,this.tr=new Map,this.Qe=new Map,this.U_=e,this.q_=n,this.ir=r}Y_(e){const n=e.time,r=this.q_.cacheKey(n),s=this.tr.get(r);if(s!==void 0)return s.Z_;if(this.Ke===this.ir){const a=this.Qe.get(this.Je);this.Qe.delete(this.Je),this.tr.delete(On(a)),this.Je++,this.Ke--}const i=this.U_(e);return this.tr.set(r,{Z_:i,rr:this.Ge}),this.Qe.set(this.Ge,r),this.Ke++,this.Ge++,i}}class mu{constructor(e,n){fo(e<=n,"right should be >= left"),this.X_=e,this.K_=n}Os(){return this.X_}ui(){return this.K_}G_(){return this.K_-this.X_+1}Kr(e){return this.X_<=e&&e<=this.K_}Ch(e){return this.X_===e.Os()&&this.K_===e.ui()}}function KE(t,e){return t===null||e===null?t===e:t.Ch(e)}class UX{constructor(){this.J_=new Map,this.tr=null,this.Q_=!1}tu(e){this.Q_=e,this.tr=null}iu(e,n){this.nu(n),this.tr=null;for(let r=n;r<e.length;++r){const s=e[r];let i=this.J_.get(s.timeWeight);i===void 0&&(i=[],this.J_.set(s.timeWeight,i)),i.push({index:r,time:s.time,weight:s.timeWeight,originalTime:s.originalTime})}}su(e,n){const r=Math.ceil(n/e);return this.tr!==null&&this.tr.eu===r||(this.tr={Ha:this.ru(r),eu:r}),this.tr.Ha}nu(e){if(e===0)return void this.J_.clear();const n=[];this.J_.forEach((r,s)=>{e<=r[0].index?n.push(s):r.splice(_d(r,e,i=>i.index<e),1/0)});for(const r of n)this.J_.delete(r)}ru(e){let n=[];for(const r of Array.from(this.J_.keys()).sort((s,i)=>i-s)){if(!this.J_.get(r))continue;const s=n;n=[];const i=s.length;let a=0;const l=On(this.J_.get(r)),c=l.length;let u=1/0,d=-1/0;for(let h=0;h<c;h++){const f=l[h],p=f.index;for(;a<i;){const y=s[a],b=y.index;if(!(b<p)){u=b;break}a++,n.push(y),d=b,u=1/0}if(u-p>=e&&p-d>=e)n.push(f),d=p;else if(this.Q_)return s}for(;a<i;a++)n.push(s[a])}return n}}class Ol{constructor(e){this.hu=e}lu(){return this.hu===null?null:new mu(Math.floor(this.hu.Os()),Math.ceil(this.hu.ui()))}au(){return this.hu}static ou(){return new Ol(null)}}function VX(t,e){return t.weight>e.weight?t:e}class zX{constructor(e,n,r,s){this.__=0,this._u=null,this.uu=[],this.Mo=null,this.wo=null,this.cu=new UX,this.du=new Map,this.fu=Ol.ou(),this.vu=!0,this.pu=new Vt,this.mu=new Vt,this.bu=new Vt,this.wu=null,this.gu=null,this.Mu=[],this.cn=n,this.yo=r,this.xu=n.rightOffset,this.Su=n.barSpacing,this.$i=e,this.q_=s,this.ku(),this.cu.tu(n.uniformDistribution)}W(){return this.cn}yu(e){ts(this.yo,e),this.Cu(),this.ku()}$h(e,n){var r;ts(this.cn,e),this.cn.fixLeftEdge&&this.Tu(),this.cn.fixRightEdge&&this.Pu(),e.barSpacing!==void 0&&this.$i.Gn(e.barSpacing),e.rightOffset!==void 0&&this.$i.Jn(e.rightOffset),e.minBarSpacing!==void 0&&this.$i.Gn((r=e.barSpacing)!==null&&r!==void 0?r:this.Su),this.Cu(),this.ku(),this.bu.m()}mn(e){var n,r;return(r=(n=this.uu[e])===null||n===void 0?void 0:n.time)!==null&&r!==void 0?r:null}Ui(e){var n;return(n=this.uu[e])!==null&&n!==void 0?n:null}Va(e,n){if(this.uu.length<1)return null;if(this.q_.key(e)>this.q_.key(this.uu[this.uu.length-1].time))return n?this.uu.length-1:null;const r=_d(this.uu,this.q_.key(e),(s,i)=>this.q_.key(s.time)<i);return this.q_.key(e)<this.q_.key(this.uu[r].time)?n?r:null:r}Ni(){return this.__===0||this.uu.length===0||this._u===null}Da(){return this.uu.length>0}Xs(){return this.Ru(),this.fu.lu()}Du(){return this.Ru(),this.fu.au()}Vu(){const e=this.Xs();if(e===null)return null;const n={from:e.Os(),to:e.ui()};return this.Ou(n)}Ou(e){const n=Math.round(e.from),r=Math.round(e.to),s=ke(this.Bu()),i=ke(this.Au());return{from:ke(this.Ui(Math.max(s,n))),to:ke(this.Ui(Math.min(i,r)))}}Iu(e){return{from:ke(this.Va(e.from,!0)),to:ke(this.Va(e.to,!0))}}Hi(){return this.__}S_(e){if(!isFinite(e)||e<=0||this.__===e)return;const n=this.Du(),r=this.__;if(this.__=e,this.vu=!0,this.cn.lockVisibleTimeRangeOnResize&&r!==0){const s=this.Su*e/r;this.Su=s}if(this.cn.fixLeftEdge&&n!==null&&n.Os()<=0){const s=r-e;this.xu-=Math.round(s/this.Su)+1,this.vu=!0}this.zu(),this.Lu()}It(e){if(this.Ni()||!zu(e))return 0;const n=this.Eu()+this.xu-e;return this.__-(n+.5)*this.Su-1}Qs(e,n){const r=this.Eu(),s=n===void 0?0:n.from,i=n===void 0?e.length:n.to;for(let a=s;a<i;a++){const l=e[a].ot,c=r+this.xu-l,u=this.__-(c+.5)*this.Su-1;e[a].nt=u}}Nu(e){return Math.ceil(this.Fu(e))}Jn(e){this.vu=!0,this.xu=e,this.Lu(),this.$i.Wu(),this.$i.Uh()}le(){return this.Su}Gn(e){this.ju(e),this.Lu(),this.$i.Wu(),this.$i.Uh()}Hu(){return this.xu}Ha(){if(this.Ni())return null;if(this.gu!==null)return this.gu;const e=this.Su,n=5*(this.$i.W().layout.fontSize+4)/8*(this.cn.tickMarkMaxCharacterLength||8),r=Math.round(n/e),s=ke(this.Xs()),i=Math.max(s.Os(),s.Os()-r),a=Math.max(s.ui(),s.ui()-r),l=this.cu.su(e,n),c=this.Bu()+r,u=this.Au()-r,d=this.$u(),h=this.cn.fixLeftEdge||d,f=this.cn.fixRightEdge||d;let p=0;for(const y of l){if(!(i<=y.index&&y.index<=a))continue;let b;p<this.Mu.length?(b=this.Mu[p],b.coord=this.It(y.index),b.label=this.Uu(y),b.weight=y.weight):(b={needAlignCoordinate:!1,coord:this.It(y.index),label:this.Uu(y),weight:y.weight},this.Mu.push(b)),this.Su>n/2&&!d?b.needAlignCoordinate=!1:b.needAlignCoordinate=h&&y.index<=c||f&&y.index>=u,p++}return this.Mu.length=p,this.gu=this.Mu,this.Mu}qu(){this.vu=!0,this.Gn(this.cn.barSpacing),this.Jn(this.cn.rightOffset)}Yu(e){this.vu=!0,this._u=e,this.Lu(),this.Tu()}Zu(e,n){const r=this.Fu(e),s=this.le(),i=s+n*(s/10);this.Gn(i),this.cn.rightBarStaysOnScroll||this.Jn(this.Hu()+(r-this.Fu(e)))}Go(e){this.Mo&&this.n_(),this.wo===null&&this.wu===null&&(this.Ni()||(this.wo=e,this.Xu()))}Jo(e){if(this.wu===null)return;const n=Iy(this.__-e,0,this.__),r=Iy(this.__-ke(this.wo),0,this.__);n!==0&&r!==0&&this.Gn(this.wu.le*n/r)}Qo(){this.wo!==null&&(this.wo=null,this.Ku())}t_(e){this.Mo===null&&this.wu===null&&(this.Ni()||(this.Mo=e,this.Xu()))}i_(e){if(this.Mo===null)return;const n=(this.Mo-e)/this.le();this.xu=ke(this.wu).Hu+n,this.vu=!0,this.Lu()}n_(){this.Mo!==null&&(this.Mo=null,this.Ku())}Gu(){this.Ju(this.cn.rightOffset)}Ju(e,n=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(n)||n<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const r=this.xu,s=performance.now();this.$i.Zn({Qu:i=>(i-s)/n>=1,tc:i=>{const a=(i-s)/n;return a>=1?e:r+(e-r)*a}})}bt(e,n){this.vu=!0,this.uu=e,this.cu.iu(e,n),this.Lu()}nc(){return this.pu}sc(){return this.mu}ec(){return this.bu}Eu(){return this._u||0}rc(e){const n=e.G_();this.ju(this.__/n),this.xu=e.ui()-this.Eu(),this.Lu(),this.vu=!0,this.$i.Wu(),this.$i.Uh()}hc(){const e=this.Bu(),n=this.Au();e!==null&&n!==null&&this.rc(new mu(e,n+this.cn.rightOffset))}lc(e){const n=new mu(e.from,e.to);this.rc(n)}qi(e){return this.yo.timeFormatter!==void 0?this.yo.timeFormatter(e.originalTime):this.q_.formatHorzItem(e.time)}$u(){const{handleScroll:e,handleScale:n}=this.$i.W();return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||n.axisDoubleClickReset.time||n.axisPressedMouseMove.time||n.mouseWheel||n.pinch)}Bu(){return this.uu.length===0?null:0}Au(){return this.uu.length===0?null:this.uu.length-1}ac(e){return(this.__-1-e)/this.Su}Fu(e){const n=this.ac(e),r=this.Eu()+this.xu-n;return Math.round(1e6*r)/1e6}ju(e){const n=this.Su;this.Su=e,this.zu(),n!==this.Su&&(this.vu=!0,this.oc())}Ru(){if(!this.vu)return;if(this.vu=!1,this.Ni())return void this._c(Ol.ou());const e=this.Eu(),n=this.__/this.Su,r=this.xu+e,s=new mu(r-n+1,r);this._c(new Ol(s))}zu(){const e=this.uc();if(this.Su<e&&(this.Su=e,this.vu=!0),this.__!==0){const n=.5*this.__;this.Su>n&&(this.Su=n,this.vu=!0)}}uc(){return this.cn.fixLeftEdge&&this.cn.fixRightEdge&&this.uu.length!==0?this.__/this.uu.length:this.cn.minBarSpacing}Lu(){const e=this.cc();e!==null&&this.xu<e&&(this.xu=e,this.vu=!0);const n=this.dc();this.xu>n&&(this.xu=n,this.vu=!0)}cc(){const e=this.Bu(),n=this._u;return e===null||n===null?null:e-n-1+(this.cn.fixLeftEdge?this.__/this.Su:Math.min(2,this.uu.length))}dc(){return this.cn.fixRightEdge?0:this.__/this.Su-Math.min(2,this.uu.length)}Xu(){this.wu={le:this.le(),Hu:this.Hu()}}Ku(){this.wu=null}Uu(e){let n=this.du.get(e.weight);return n===void 0&&(n=new $X(r=>this.fc(r),this.q_),this.du.set(e.weight,n)),n.Y_(e)}fc(e){return this.q_.formatTickmark(e,this.yo)}_c(e){const n=this.fu;this.fu=e,KE(n.lu(),this.fu.lu())||this.pu.m(),KE(n.au(),this.fu.au())||this.mu.m(),this.oc()}oc(){this.gu=null}Cu(){this.oc(),this.du.clear()}ku(){this.q_.updateFormatter(this.yo)}Tu(){if(!this.cn.fixLeftEdge)return;const e=this.Bu();if(e===null)return;const n=this.Xs();if(n===null)return;const r=n.Os()-e;if(r<0){const s=this.xu-r-1;this.Jn(s)}this.zu()}Pu(){this.Lu(),this.zu()}}class HX{X(e,n,r){e.useMediaCoordinateSpace(s=>this.K(s,n,r))}gl(e,n,r){e.useMediaCoordinateSpace(s=>this.vc(s,n,r))}vc(e,n,r){}}class XX extends HX{constructor(e){super(),this.mc=new Map,this.zt=e}K(e){}vc(e){if(!this.zt.yt)return;const{context:n,mediaSize:r}=e;let s=0;for(const a of this.zt.bc){if(a.Kt.length===0)continue;n.font=a.R;const l=this.wc(n,a.Kt);l>r.width?a.Zu=r.width/l:a.Zu=1,s+=a.gc*a.Zu}let i=0;switch(this.zt.Mc){case"top":i=0;break;case"center":i=Math.max((r.height-s)/2,0);break;case"bottom":i=Math.max(r.height-s,0)}n.fillStyle=this.zt.V;for(const a of this.zt.bc){n.save();let l=0;switch(this.zt.xc){case"left":n.textAlign="left",l=a.gc/2;break;case"center":n.textAlign="center",l=r.width/2;break;case"right":n.textAlign="right",l=r.width-1-a.gc/2}n.translate(l,i),n.textBaseline="top",n.font=a.R,n.scale(a.Zu,a.Zu),n.fillText(a.Kt,0,a.Sc),n.restore(),i+=a.gc*a.Zu}}wc(e,n){const r=this.kc(e.font);let s=r.get(n);return s===void 0&&(s=e.measureText(n).width,r.set(n,s)),s}kc(e){let n=this.mc.get(e);return n===void 0&&(n=new Map,this.mc.set(e,n)),n}}class WX{constructor(e){this.ft=!0,this.Ft={yt:!1,V:"",bc:[],Mc:"center",xc:"center"},this.Wt=new XX(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.W(),n=this.Ft;n.yt=e.visible,n.yt&&(n.V=e.color,n.xc=e.horzAlign,n.Mc=e.vertAlign,n.bc=[{Kt:e.text,R:Wl(e.fontSize,e.fontFamily,e.fontStyle),gc:1.2*e.fontSize,Sc:0,Zu:0}])}}class KX extends zw{constructor(e,n){super(),this.cn=n,this.wn=new WX(this)}Rn(){return[]}Pn(){return[this.wn]}W(){return this.cn}Vn(){this.wn.bt()}}var qE,GE,YE,JE,QE;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(qE||(qE={}));class qX{constructor(e,n,r){this.yc=[],this.Cc=[],this.__=0,this.Tc=null,this.Pc=new Vt,this.Rc=new Vt,this.Dc=null,this.Vc=e,this.cn=n,this.q_=r,this.Oc=new TH(this),this.yl=new zX(this,n.timeScale,this.cn.localization,r),this.vt=new DH(this,n.crosshair),this.Bc=new PX(n.crosshair),this.Ac=new KX(this,n.watermark),this.Ic(),this.yc[0].x_(2e3),this.zc=this.Lc(0),this.Ec=this.Lc(1)}Kl(){this.Nc(un.es())}Uh(){this.Nc(un.ss())}oa(){this.Nc(new un(1))}Gl(e){const n=this.Fc(e);this.Nc(n)}Wc(){return this.Tc}jc(e){const n=this.Tc;this.Tc=e,n!==null&&this.Gl(n.Hc),e!==null&&this.Gl(e.Hc)}W(){return this.cn}$h(e){ts(this.cn,e),this.yc.forEach(n=>n.b_(e)),e.timeScale!==void 0&&this.yl.$h(e.timeScale),e.localization!==void 0&&this.yl.yu(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Pc.m(),this.zc=this.Lc(0),this.Ec=this.Lc(1),this.Kl()}$c(e,n){if(e==="left")return void this.$h({leftPriceScale:n});if(e==="right")return void this.$h({rightPriceScale:n});const r=this.Uc(e);r!==null&&(r.Dt.$h(n),this.Pc.m())}Uc(e){for(const n of this.yc){const r=n.w_(e);if(r!==null)return{Ht:n,Dt:r}}return null}St(){return this.yl}qc(){return this.yc}Yc(){return this.Ac}Zc(){return this.vt}Xc(){return this.Rc}Kc(e,n){e.Lo(n),this.Wu()}S_(e){this.__=e,this.yl.S_(this.__),this.yc.forEach(n=>n.S_(e)),this.Wu()}Ic(e){const n=new BX(this.yl,this);e!==void 0?this.yc.splice(e,0,n):this.yc.push(n);const r=e===void 0?this.yc.length-1:e,s=un.es();return s.Nn(r,{Fn:0,Wn:!0}),this.Nc(s),n}V_(e,n,r){e.V_(n,r)}O_(e,n,r){e.O_(n,r),this.Jl(),this.Nc(this.Gc(e,2))}B_(e,n){e.B_(n),this.Nc(this.Gc(e,2))}A_(e,n,r){n.Vo()||e.A_(n,r)}I_(e,n,r){n.Vo()||(e.I_(n,r),this.Jl(),this.Nc(this.Gc(e,2)))}z_(e,n){n.Vo()||(e.z_(n),this.Nc(this.Gc(e,2)))}E_(e,n){e.E_(n),this.Nc(this.Gc(e,2))}Jc(e){this.yl.Go(e)}Qc(e,n){const r=this.St();if(r.Ni()||n===0)return;const s=r.Hi();e=Math.max(1,Math.min(e,s)),r.Zu(e,n),this.Wu()}td(e){this.nd(0),this.sd(e),this.ed()}rd(e){this.yl.Jo(e),this.Wu()}hd(){this.yl.Qo(),this.Uh()}nd(e){this.yl.t_(e)}sd(e){this.yl.i_(e),this.Wu()}ed(){this.yl.n_(),this.Uh()}wt(){return this.Cc}ld(e,n,r,s,i){this.vt.gn(e,n);let a=NaN,l=this.yl.Nu(e);const c=this.yl.Xs();c!==null&&(l=Math.min(Math.max(c.Os(),l),c.ui()));const u=s.vn(),d=u.Ct();d!==null&&(a=u.pn(n,d)),a=this.Bc.Oa(a,l,s),this.vt.kn(l,a,s),this.oa(),i||this.Rc.m(this.vt.xt(),{x:e,y:n},r)}ad(e,n,r){const s=r.vn(),i=s.Ct(),a=s.Rt(e,ke(i)),l=this.yl.Va(n,!0),c=this.yl.It(ke(l));this.ld(c,a,null,r,!0)}od(e){this.Zc().Cn(),this.oa(),e||this.Rc.m(null,null,null)}Jl(){const e=this.vt.Ht();if(e!==null){const n=this.vt.xn(),r=this.vt.Sn();this.ld(n,r,null,e)}this.vt.Vn()}_d(e,n,r){const s=this.yl.mn(0);n!==void 0&&r!==void 0&&this.yl.bt(n,r);const i=this.yl.mn(0),a=this.yl.Eu(),l=this.yl.Xs();if(l!==null&&s!==null&&i!==null){const c=l.Kr(a),u=this.q_.key(s)>this.q_.key(i),d=e!==null&&e>a&&!u,h=this.yl.W().allowShiftVisibleRangeOnWhitespaceReplacement,f=c&&(r!==void 0||h)&&this.yl.W().shiftVisibleRangeOnNewBar;if(d&&!f){const p=e-a;this.yl.Jn(this.yl.Hu()-p)}}this.yl.Yu(e)}ia(e){e!==null&&e.F_()}dr(e){const n=this.yc.find(r=>r.Uo().includes(e));return n===void 0?null:n}Wu(){this.Ac.Vn(),this.yc.forEach(e=>e.F_()),this.Jl()}S(){this.yc.forEach(e=>e.S()),this.yc.length=0,this.cn.localization.priceFormatter=void 0,this.cn.localization.percentageFormatter=void 0,this.cn.localization.timeFormatter=void 0}ud(){return this.Oc}br(){return this.Oc.W()}g_(){return this.Pc}dd(e,n,r){const s=this.yc[0],i=this.fd(n,e,s,r);return this.Cc.push(i),this.Cc.length===1?this.Kl():this.Uh(),i}vd(e){const n=this.dr(e),r=this.Cc.indexOf(e);fo(r!==-1,"Series not found"),this.Cc.splice(r,1),ke(n).Zo(e),e.S&&e.S()}Xl(e,n){const r=ke(this.dr(e));r.Zo(e);const s=this.Uc(n);if(s===null){const i=e.Xi();r.qo(e,n,i)}else{const i=s.Ht===r?e.Xi():void 0;s.Ht.qo(e,n,i)}}hc(){const e=un.ss();e.$n(),this.Nc(e)}pd(e){const n=un.ss();n.Yn(e),this.Nc(n)}Kn(){const e=un.ss();e.Kn(),this.Nc(e)}Gn(e){const n=un.ss();n.Gn(e),this.Nc(n)}Jn(e){const n=un.ss();n.Jn(e),this.Nc(n)}Zn(e){const n=un.ss();n.Zn(e),this.Nc(n)}Un(){const e=un.ss();e.Un(),this.Nc(e)}md(){return this.cn.rightPriceScale.visible?"right":"left"}bd(){return this.Ec}q(){return this.zc}Bt(e){const n=this.Ec,r=this.zc;if(n===r)return n;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Dc===null||this.Dc.Ps!==r||this.Dc.Rs!==n)this.Dc={Ps:r,Rs:n,wd:new Map};else{const i=this.Dc.wd.get(e);if(i!==void 0)return i}const s=function(i,a,l){const[c,u,d,h]=Vu(i),[f,p,y,b]=Vu(a),_=[br(c+l*(f-c)),br(u+l*(p-u)),br(d+l*(y-d)),bj(h+l*(b-h))];return`rgba(${_[0]}, ${_[1]}, ${_[2]}, ${_[3]})`}(r,n,e/100);return this.Dc.wd.set(e,s),s}Gc(e,n){const r=new un(n);if(e!==null){const s=this.yc.indexOf(e);r.Nn(s,{Fn:n})}return r}Fc(e,n){return n===void 0&&(n=2),this.Gc(this.dr(e),n)}Nc(e){this.Vc&&this.Vc(e),this.yc.forEach(n=>n.j_().qh().bt())}fd(e,n,r,s){const i=new Kw(this,e,n,r,s),a=e.priceScaleId!==void 0?e.priceScaleId:this.md();return r.qo(i,a),Wm(a)||i.$h(e),i}Lc(e){const n=this.cn.layout;return n.background.type==="gradient"?e===0?n.background.topColor:n.background.bottomColor:n.background.color}}function Ry(t){return!Es(t)&&!bd(t)}function $j(t){return Es(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(GE||(GE={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(YE||(YE={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(JE||(JE={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(QE||(QE={}));const ZE=t=>t.getUTCFullYear();function GX(t,e,n){return e.replace(/yyyy/g,(r=>Ks(ZE(r),4))(t)).replace(/yy/g,(r=>Ks(ZE(r)%100,2))(t)).replace(/MMMM/g,((r,s)=>new Date(r.getUTCFullYear(),r.getUTCMonth(),1).toLocaleString(s,{month:"long"}))(t,n)).replace(/MMM/g,((r,s)=>new Date(r.getUTCFullYear(),r.getUTCMonth(),1).toLocaleString(s,{month:"short"}))(t,n)).replace(/MM/g,(r=>Ks((s=>s.getUTCMonth()+1)(r),2))(t)).replace(/dd/g,(r=>Ks((s=>s.getUTCDate())(r),2))(t))}class Uj{constructor(e="yyyy-MM-dd",n="default"){this.gd=e,this.Md=n}Y_(e){return GX(e,this.gd,this.Md)}}class YX{constructor(e){this.xd=e||"%h:%m:%s"}Y_(e){return this.xd.replace("%h",Ks(e.getUTCHours(),2)).replace("%m",Ks(e.getUTCMinutes(),2)).replace("%s",Ks(e.getUTCSeconds(),2))}}const JX={Sd:"yyyy-MM-dd",kd:"%h:%m:%s",yd:" ",Cd:"default"};class QX{constructor(e={}){const n=Object.assign(Object.assign({},JX),e);this.Td=new Uj(n.Sd,n.Cd),this.Pd=new YX(n.kd),this.Rd=n.yd}Y_(e){return`${this.Td.Y_(e)}${this.Rd}${this.Pd.Y_(e)}`}}function bh(t){return 60*t*60*1e3}function Lg(t){return 60*t*1e3}const _h=[{Dd:(eS=1,1e3*eS),Vd:10},{Dd:Lg(1),Vd:20},{Dd:Lg(5),Vd:21},{Dd:Lg(30),Vd:22},{Dd:bh(1),Vd:30},{Dd:bh(3),Vd:31},{Dd:bh(6),Vd:32},{Dd:bh(12),Vd:33}];var eS;function tS(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let n=_h.length-1;n>=0;--n)if(Math.floor(e.getTime()/_h[n].Dd)!==Math.floor(t.getTime()/_h[n].Dd))return _h[n].Vd;return 0}function Mg(t){let e=t;if(bd(t)&&(e=qw(t)),!Ry(e))throw new Error("time must be of type BusinessDay");const n=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{Od:Math.round(n.getTime()/1e3),Bd:e}}function nS(t){if(!$j(t))throw new Error("time must be of type isUTCTimestamp");return{Od:t}}function qw(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function rS(t){bd(t.time)&&(t.time=qw(t.time))}class sS{options(){return this.cn}setOptions(e){this.cn=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(n){n.forEach(rS)}(e):rS(e)}createConverterToInternalObj(e){return ke(function(n){return n.length===0?null:Ry(n[0].time)||bd(n[0].time)?Mg:nS}(e))}key(e){return typeof e=="object"&&"Od"in e?e.Od:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const n=e;return n.Bd===void 0?new Date(1e3*n.Od).getTime():new Date(Date.UTC(n.Bd.year,n.Bd.month-1,n.Bd.day)).getTime()}convertHorzItemToInternal(e){return $j(n=e)?nS(n):Ry(n)?Mg(n):Mg(qw(n));var n}updateFormatter(e){if(!this.cn)return;const n=e.dateFormat;this.cn.timeScale.timeVisible?this.Ad=new QX({Sd:n,kd:this.cn.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",yd:"   ",Cd:e.locale}):this.Ad=new Uj(n,e.locale)}formatHorzItem(e){const n=e;return this.Ad.Y_(new Date(1e3*n.Od))}formatTickmark(e,n){const r=function(i,a,l){switch(i){case 0:case 10:return a?l?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return a?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.cn.timeScale.timeVisible,this.cn.timeScale.secondsVisible),s=this.cn.timeScale;if(s.tickMarkFormatter!==void 0){const i=s.tickMarkFormatter(e.originalTime,r,n.locale);if(i!==null)return i}return function(i,a,l){const c={};switch(a){case 0:c.year="numeric";break;case 1:c.month="short";break;case 2:c.day="numeric";break;case 3:c.hour12=!1,c.hour="2-digit",c.minute="2-digit";break;case 4:c.hour12=!1,c.hour="2-digit",c.minute="2-digit",c.second="2-digit"}const u=i.Bd===void 0?new Date(1e3*i.Od):new Date(Date.UTC(i.Bd.year,i.Bd.month-1,i.Bd.day));return new Date(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate(),u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()).toLocaleString(l,c)}(e.time,r,n.locale)}maxTickMarkWeight(e){let n=e.reduce(VX,e[0]).weight;return n>30&&n<50&&(n=30),n}fillWeightsForPoints(e,n){(function(r,s=0){if(r.length===0)return;let i=s===0?null:r[s-1].time.Od,a=i!==null?new Date(1e3*i):null,l=0;for(let c=s;c<r.length;++c){const u=r[c],d=new Date(1e3*u.time.Od);a!==null&&(u.timeWeight=tS(d,a)),l+=u.time.Od-(i||u.time.Od),i=u.time.Od,a=d}if(s===0&&r.length>1){const c=Math.ceil(l/(r.length-1)),u=new Date(1e3*(r[0].time.Od-c));r[0].timeWeight=tS(new Date(1e3*r[0].time.Od),u)}})(e,n)}static Id(e){return ts({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const Kl=typeof window<"u";function iS(){return!!Kl&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Dg(){return!!Kl&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function Ly(t){return t+t%2}function Fg(t,e){return t.zd-e.zd}function Bg(t,e,n){const r=(t.zd-e.zd)/(t.ot-e.ot);return Math.sign(r)*Math.min(Math.abs(r),n)}class ZX{constructor(e,n,r,s){this.Ld=null,this.Ed=null,this.Nd=null,this.Fd=null,this.Wd=null,this.jd=0,this.Hd=0,this.$d=e,this.Ud=n,this.qd=r,this.rs=s}Yd(e,n){if(this.Ld!==null){if(this.Ld.ot===n)return void(this.Ld.zd=e);if(Math.abs(this.Ld.zd-e)<this.rs)return}this.Fd=this.Nd,this.Nd=this.Ed,this.Ed=this.Ld,this.Ld={ot:n,zd:e}}Vr(e,n){if(this.Ld===null||this.Ed===null||n-this.Ld.ot>50)return;let r=0;const s=Bg(this.Ld,this.Ed,this.Ud),i=Fg(this.Ld,this.Ed),a=[s],l=[i];if(r+=i,this.Nd!==null){const u=Bg(this.Ed,this.Nd,this.Ud);if(Math.sign(u)===Math.sign(s)){const d=Fg(this.Ed,this.Nd);if(a.push(u),l.push(d),r+=d,this.Fd!==null){const h=Bg(this.Nd,this.Fd,this.Ud);if(Math.sign(h)===Math.sign(s)){const f=Fg(this.Nd,this.Fd);a.push(h),l.push(f),r+=f}}}}let c=0;for(let u=0;u<a.length;++u)c+=l[u]/r*a[u];Math.abs(c)<this.$d||(this.Wd={zd:e,ot:n},this.Hd=c,this.jd=function(u,d){const h=Math.log(d);return Math.log(1*h/-u)/h}(Math.abs(c),this.qd))}tc(e){const n=ke(this.Wd),r=e-n.ot;return n.zd+this.Hd*(Math.pow(this.qd,r)-1)/Math.log(this.qd)}Qu(e){return this.Wd===null||this.Zd(e)===this.jd}Zd(e){const n=e-ke(this.Wd).ot;return Math.min(n,this.jd)}}class eW{constructor(e,n){this.Xd=void 0,this.Kd=void 0,this.Gd=void 0,this.en=!1,this.Jd=e,this.Qd=n,this.tf()}bt(){this.tf()}if(){this.Xd&&this.Jd.removeChild(this.Xd),this.Kd&&this.Jd.removeChild(this.Kd),this.Xd=void 0,this.Kd=void 0}nf(){return this.en!==this.sf()||this.Gd!==this.ef()}ef(){return _j(Vu(this.Qd.W().layout.textColor))>160?"dark":"light"}sf(){return this.Qd.W().layout.attributionLogo}rf(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}tf(){this.nf()&&(this.if(),this.en=this.sf(),this.en&&(this.Gd=this.ef(),this.Kd=document.createElement("style"),this.Kd.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Xd=document.createElement("a"),this.Xd.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.rf()}`,this.Xd.title="Charting by TradingView",this.Xd.id="tv-attr-logo",this.Xd.target="_blank",this.Xd.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 19" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Xd.toggleAttribute("data-dark",this.Gd==="dark"),this.Jd.appendChild(this.Kd),this.Jd.appendChild(this.Xd)))}}function Sa(t,e){const n=ke(t.ownerDocument).createElement("canvas");t.appendChild(n);const r=dH(n,{type:"device-pixel-content-box",options:{allowResizeObserver:!1},transform:(s,i)=>({width:Math.max(s.width,i.width),height:Math.max(s.height,i.height)})});return r.resizeCanvasElement(e),r}function Na(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))===null||e===void 0||e.clearRect(0,0,1,1)}function My(t,e,n,r){t.gl&&t.gl(e,n,r)}function Qh(t,e,n,r){t.X(e,n,r)}function Dy(t,e,n,r){const s=t(n,r);for(const i of s){const a=i.gt();a!==null&&e(a)}}function tW(t){Kl&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class Gw{constructor(e,n,r){this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.df=null,this.ff=!1,this.vf=null,this.pf=null,this.mf=!1,this.bf=!1,this.wf=!1,this.gf=null,this.Mf=null,this.xf=null,this.Sf=null,this.kf=null,this.yf=null,this.Cf=null,this.Tf=0,this.Pf=!1,this.Rf=!1,this.Df=!1,this.Vf=0,this.Of=null,this.Bf=!Dg(),this.Af=s=>{this.If(s)},this.zf=s=>{if(this.Lf(s)){const i=this.Ef(s);if(++this._f,this.uf&&this._f>1){const{Nf:a}=this.Ff(fs(s),this.cf);a<30&&!this.wf&&this.Wf(i,this.Hf.jf),this.$f()}}else{const i=this.Ef(s);if(++this.hf,this.lf&&this.hf>1){const{Nf:a}=this.Ff(fs(s),this.af);a<5&&!this.bf&&this.Uf(i,this.Hf.qf),this.Yf()}}},this.Zf=e,this.Hf=n,this.cn=r,this.Xf()}S(){this.gf!==null&&(this.gf(),this.gf=null),this.Mf!==null&&(this.Mf(),this.Mf=null),this.Sf!==null&&(this.Sf(),this.Sf=null),this.kf!==null&&(this.kf(),this.kf=null),this.yf!==null&&(this.yf(),this.yf=null),this.xf!==null&&(this.xf(),this.xf=null),this.Kf(),this.Yf()}Gf(e){this.Sf&&this.Sf();const n=this.Jf.bind(this);if(this.Sf=()=>{this.Zf.removeEventListener("mousemove",n)},this.Zf.addEventListener("mousemove",n),this.Lf(e))return;const r=this.Ef(e);this.Uf(r,this.Hf.Qf),this.Bf=!0}Yf(){this.lf!==null&&clearTimeout(this.lf),this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}$f(){this.uf!==null&&clearTimeout(this.uf),this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Jf(e){if(this.Df||this.pf!==null||this.Lf(e))return;const n=this.Ef(e);this.Uf(n,this.Hf.tv),this.Bf=!0}iv(e){const n=$g(e.changedTouches,ke(this.Of));if(n===null||(this.Vf=Eh(e),this.Cf!==null)||this.Rf)return;this.Pf=!0;const r=this.Ff(fs(n),ke(this.pf)),{nv:s,sv:i,Nf:a}=r;if(this.mf||!(a<5)){if(!this.mf){const l=.5*s,c=i>=l&&!this.cn.ev(),u=l>i&&!this.cn.rv();c||u||(this.Rf=!0),this.mf=!0,this.wf=!0,this.Kf(),this.$f()}if(!this.Rf){const l=this.Ef(e,n);this.Wf(l,this.Hf.hv),rl(e)}}}lv(e){if(e.button!==0)return;const n=this.Ff(fs(e),ke(this.vf)),{Nf:r}=n;if(r>=5&&(this.bf=!0,this.Yf()),this.bf){const s=this.Ef(e);this.Uf(s,this.Hf.av)}}Ff(e,n){const r=Math.abs(n.nt-e.nt),s=Math.abs(n.st-e.st);return{nv:r,sv:s,Nf:r+s}}ov(e){let n=$g(e.changedTouches,ke(this.Of));if(n===null&&e.touches.length===0&&(n=e.changedTouches[0]),n===null)return;this.Of=null,this.Vf=Eh(e),this.Kf(),this.pf=null,this.yf&&(this.yf(),this.yf=null);const r=this.Ef(e,n);if(this.Wf(r,this.Hf._v),++this._f,this.uf&&this._f>1){const{Nf:s}=this.Ff(fs(n),this.cf);s<30&&!this.wf&&this.Wf(r,this.Hf.jf),this.$f()}else this.wf||(this.Wf(r,this.Hf.uv),this.Hf.uv&&rl(e));this._f===0&&rl(e),e.touches.length===0&&this.ff&&(this.ff=!1,rl(e))}If(e){if(e.button!==0)return;const n=this.Ef(e);if(this.vf=null,this.Df=!1,this.kf&&(this.kf(),this.kf=null),iS()&&this.Zf.ownerDocument.documentElement.removeEventListener("mouseleave",this.Af),!this.Lf(e))if(this.Uf(n,this.Hf.cv),++this.hf,this.lf&&this.hf>1){const{Nf:r}=this.Ff(fs(e),this.af);r<5&&!this.bf&&this.Uf(n,this.Hf.qf),this.Yf()}else this.bf||this.Uf(n,this.Hf.dv)}Kf(){this.df!==null&&(clearTimeout(this.df),this.df=null)}fv(e){if(this.Of!==null)return;const n=e.changedTouches[0];this.Of=n.identifier,this.Vf=Eh(e);const r=this.Zf.ownerDocument.documentElement;this.wf=!1,this.mf=!1,this.Rf=!1,this.pf=fs(n),this.yf&&(this.yf(),this.yf=null);{const i=this.iv.bind(this),a=this.ov.bind(this);this.yf=()=>{r.removeEventListener("touchmove",i),r.removeEventListener("touchend",a)},r.addEventListener("touchmove",i,{passive:!1}),r.addEventListener("touchend",a,{passive:!1}),this.Kf(),this.df=setTimeout(this.vv.bind(this,e),240)}const s=this.Ef(e,n);this.Wf(s,this.Hf.pv),this.uf||(this._f=0,this.uf=setTimeout(this.$f.bind(this),500),this.cf=fs(n))}mv(e){if(e.button!==0)return;const n=this.Zf.ownerDocument.documentElement;iS()&&n.addEventListener("mouseleave",this.Af),this.bf=!1,this.vf=fs(e),this.kf&&(this.kf(),this.kf=null);{const s=this.lv.bind(this),i=this.If.bind(this);this.kf=()=>{n.removeEventListener("mousemove",s),n.removeEventListener("mouseup",i)},n.addEventListener("mousemove",s),n.addEventListener("mouseup",i)}if(this.Df=!0,this.Lf(e))return;const r=this.Ef(e);this.Uf(r,this.Hf.bv),this.lf||(this.hf=0,this.lf=setTimeout(this.Yf.bind(this),500),this.af=fs(e))}Xf(){this.Zf.addEventListener("mouseenter",this.Gf.bind(this)),this.Zf.addEventListener("touchcancel",this.Kf.bind(this));{const e=this.Zf.ownerDocument,n=r=>{this.Hf.wv&&(r.composed&&this.Zf.contains(r.composedPath()[0])||r.target&&this.Zf.contains(r.target)||this.Hf.wv())};this.Mf=()=>{e.removeEventListener("touchstart",n)},this.gf=()=>{e.removeEventListener("mousedown",n)},e.addEventListener("mousedown",n),e.addEventListener("touchstart",n,{passive:!0})}Dg()&&(this.xf=()=>{this.Zf.removeEventListener("dblclick",this.zf)},this.Zf.addEventListener("dblclick",this.zf)),this.Zf.addEventListener("mouseleave",this.gv.bind(this)),this.Zf.addEventListener("touchstart",this.fv.bind(this),{passive:!0}),tW(this.Zf),this.Zf.addEventListener("mousedown",this.mv.bind(this)),this.Mv(),this.Zf.addEventListener("touchmove",()=>{},{passive:!1})}Mv(){this.Hf.xv===void 0&&this.Hf.Sv===void 0&&this.Hf.kv===void 0||(this.Zf.addEventListener("touchstart",e=>this.yv(e.touches),{passive:!0}),this.Zf.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Cf!==null&&this.Hf.Sv!==void 0){const n=oS(e.touches[0],e.touches[1])/this.Tf;this.Hf.Sv(this.Cf,n),rl(e)}},{passive:!1}),this.Zf.addEventListener("touchend",e=>{this.yv(e.touches)}))}yv(e){e.length===1&&(this.Pf=!1),e.length!==2||this.Pf||this.ff?this.Cv():this.Tv(e)}Tv(e){const n=this.Zf.getBoundingClientRect()||{left:0,top:0};this.Cf={nt:(e[0].clientX-n.left+(e[1].clientX-n.left))/2,st:(e[0].clientY-n.top+(e[1].clientY-n.top))/2},this.Tf=oS(e[0],e[1]),this.Hf.xv!==void 0&&this.Hf.xv(),this.Kf()}Cv(){this.Cf!==null&&(this.Cf=null,this.Hf.kv!==void 0&&this.Hf.kv())}gv(e){if(this.Sf&&this.Sf(),this.Lf(e)||!this.Bf)return;const n=this.Ef(e);this.Uf(n,this.Hf.Pv),this.Bf=!Dg()}vv(e){const n=$g(e.touches,ke(this.Of));if(n===null)return;const r=this.Ef(e,n);this.Wf(r,this.Hf.Rv),this.wf=!0,this.ff=!0}Lf(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:Eh(e)<this.Vf+500}Wf(e,n){n&&n.call(this.Hf,e)}Uf(e,n){n&&n.call(this.Hf,e)}Ef(e,n){const r=n||e,s=this.Zf.getBoundingClientRect()||{left:0,top:0};return{clientX:r.clientX,clientY:r.clientY,pageX:r.pageX,pageY:r.pageY,screenX:r.screenX,screenY:r.screenY,localX:r.clientX-s.left,localY:r.clientY-s.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Dv:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Vv:e.type,Ov:r.target,Bv:e.view,Av:()=>{e.type!=="touchstart"&&rl(e)}}}}function oS(t,e){const n=t.clientX-e.clientX,r=t.clientY-e.clientY;return Math.sqrt(n*n+r*r)}function rl(t){t.cancelable&&t.preventDefault()}function fs(t){return{nt:t.pageX,st:t.pageY}}function Eh(t){return t.timeStamp||performance.now()}function $g(t,e){for(let n=0;n<t.length;++n)if(t[n].identifier===e)return t[n];return null}function Sh(t){return{Hc:t.Hc,Iv:{gr:t.zv.externalId},Lv:t.zv.cursorStyle}}function nW(t,e,n){for(const r of t){const s=r.gt();if(s!==null&&s.wr){const i=s.wr(e,n);if(i!==null)return{Bv:r,Iv:i}}}return null}function Ug(t,e){return n=>{var r,s,i,a;return((s=(r=n.Dt())===null||r===void 0?void 0:r.Pa())!==null&&s!==void 0?s:"")!==e?[]:(a=(i=n.da)===null||i===void 0?void 0:i.call(n,t))!==null&&a!==void 0?a:[]}}function aS(t,e,n,r){if(!t.length)return;let s=0;const i=n/2,a=t[0].At(r,!0);let l=e===1?i-(t[0].Vi()-a/2):t[0].Vi()-a/2-i;l=Math.max(0,l);for(let c=1;c<t.length;c++){const u=t[c],d=t[c-1],h=d.At(r,!1),f=u.Vi(),p=d.Vi();if(e===1?f>p-h:f<p+h){const y=p-h*e;u.Oi(y);const b=y-e*h/2;if((e===1?b<0:b>n)&&l>0){const _=e===1?-1-b:b-n,m=Math.min(_,l);for(let x=s;x<t.length;x++)t[x].Oi(t[x].Vi()+e*m);l-=m}}else s=c,l=e===1?p-h-f:f-(p+h)}}class lS{constructor(e,n,r,s){this.Li=null,this.Ev=null,this.Nv=!1,this.Fv=new Xu(200),this.Qr=null,this.Wv=0,this.jv=!1,this.Hv=()=>{this.jv||this.tn.$v().$t().Uh()},this.Uv=()=>{this.jv||this.tn.$v().$t().Uh()},this.tn=e,this.cn=n,this.ko=n.layout,this.Oc=r,this.qv=s==="left",this.Yv=Ug("normal",s),this.Zv=Ug("top",s),this.Xv=Ug("bottom",s),this.Kv=document.createElement("div"),this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Kv.style.width="25px",this.Kv.style.left="0",this.Kv.style.position="relative",this.Gv=Sa(this.Kv,Et({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const i=this.Gv.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Jv=Sa(this.Kv,Et({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const a=this.Jv.canvasElement;a.style.position="absolute",a.style.zIndex="2",a.style.left="0",a.style.top="0";const l={bv:this.Qv.bind(this),pv:this.Qv.bind(this),av:this.tp.bind(this),hv:this.tp.bind(this),wv:this.ip.bind(this),cv:this.np.bind(this),_v:this.np.bind(this),qf:this.sp.bind(this),jf:this.sp.bind(this),Qf:this.ep.bind(this),Pv:this.rp.bind(this)};this.hp=new Gw(this.Jv.canvasElement,l,{ev:()=>!this.cn.handleScroll.vertTouchDrag,rv:()=>!0})}S(){this.hp.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Na(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Na(this.Gv.canvasElement),this.Gv.dispose(),this.Li!==null&&this.Li.Ko().p(this),this.Li=null}lp(){return this.Kv}P(){return this.ko.fontSize}ap(){const e=this.Oc.W();return this.Qr!==e.R&&(this.Fv.nr(),this.Qr=e.R),e}op(){if(this.Li===null)return 0;let e=0;const n=this.ap(),r=ke(this.Gv.canvasElement.getContext("2d"));r.save();const s=this.Li.Ha();r.font=this._p(),s.length>0&&(e=Math.max(this.Fv.xi(r,s[0].so),this.Fv.xi(r,s[s.length-1].so)));const i=this.up();for(let u=i.length;u--;){const d=this.Fv.xi(r,i[u].Kt());d>e&&(e=d)}const a=this.Li.Ct();if(a!==null&&this.Ev!==null&&(l=this.cn.crosshair).mode!==2&&l.horzLine.visible&&l.horzLine.labelVisible){const u=this.Li.pn(1,a),d=this.Li.pn(this.Ev.height-2,a);e=Math.max(e,this.Fv.xi(r,this.Li.Fi(Math.floor(Math.min(u,d))+.11111111111111,a)),this.Fv.xi(r,this.Li.Fi(Math.ceil(Math.max(u,d))-.11111111111111,a)))}var l;r.restore();const c=e||34;return Ly(Math.ceil(n.C+n.T+n.A+n.I+5+c))}cp(e){this.Ev!==null&&ca(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`)}dp(){return ke(this.Ev).width}Gi(e){this.Li!==e&&(this.Li!==null&&this.Li.Ko().p(this),this.Li=e,e.Ko().l(this.fo.bind(this),this))}Dt(){return this.Li}nr(){const e=this.tn.fp();this.tn.$v().$t().E_(e,ke(this.Dt()))}vp(e){if(this.Ev===null)return;if(e!==1){this.pp(),this.Gv.applySuggestedBitmapSize();const r=_a(this.Gv);r!==null&&(r.useBitmapCoordinateSpace(s=>{this.mp(s),this.Ie(s)}),this.tn.bp(r,this.Xv),this.wp(r),this.tn.bp(r,this.Yv),this.gp(r))}this.Jv.applySuggestedBitmapSize();const n=_a(this.Jv);n!==null&&(n.useBitmapCoordinateSpace(({context:r,bitmapSize:s})=>{r.clearRect(0,0,s.width,s.height)}),this.Mp(n),this.tn.bp(n,this.Zv))}xp(){return this.Gv.bitmapSize}Sp(e,n,r){const s=this.xp();s.width>0&&s.height>0&&e.drawImage(this.Gv.canvasElement,n,r)}bt(){var e;(e=this.Li)===null||e===void 0||e.Ha()}Qv(e){if(this.Li===null||this.Li.Ni()||!this.cn.handleScale.axisPressedMouseMove.price)return;const n=this.tn.$v().$t(),r=this.tn.fp();this.Nv=!0,n.V_(r,this.Li,e.localY)}tp(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const n=this.tn.$v().$t(),r=this.tn.fp(),s=this.Li;n.O_(r,s,e.localY)}ip(){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.tn.$v().$t(),n=this.tn.fp(),r=this.Li;this.Nv&&(this.Nv=!1,e.B_(n,r))}np(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const n=this.tn.$v().$t(),r=this.tn.fp();this.Nv=!1,n.B_(r,this.Li)}sp(e){this.cn.handleScale.axisDoubleClickReset.price&&this.nr()}ep(e){this.Li!==null&&(!this.tn.$v().$t().W().handleScale.axisPressedMouseMove.price||this.Li.Mh()||this.Li.Oo()||this.kp(1))}rp(e){this.kp(0)}up(){const e=[],n=this.Li===null?void 0:this.Li;return(r=>{for(let s=0;s<r.length;++s){const i=r[s].Rn(this.tn.fp(),n);for(let a=0;a<i.length;a++)e.push(i[a])}})(this.tn.fp().Uo()),e}mp({context:e,bitmapSize:n}){const{width:r,height:s}=n,i=this.tn.fp().$t(),a=i.q(),l=i.bd();a===l?Hm(e,0,0,r,s,a):Ej(e,0,0,r,s,a,l)}Ie({context:e,bitmapSize:n,horizontalPixelRatio:r}){if(this.Ev===null||this.Li===null||!this.Li.W().borderVisible)return;e.fillStyle=this.Li.W().borderColor;const s=Math.max(1,Math.floor(this.ap().C*r));let i;i=this.qv?n.width-s:0,e.fillRect(i,0,s,n.height)}wp(e){if(this.Ev===null||this.Li===null)return;const n=this.Li.Ha(),r=this.Li.W(),s=this.ap(),i=this.qv?this.Ev.width-s.T:0;r.borderVisible&&r.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:l,verticalPixelRatio:c})=>{a.fillStyle=r.borderColor;const u=Math.max(1,Math.floor(c)),d=Math.floor(.5*c),h=Math.round(s.T*l);a.beginPath();for(const f of n)a.rect(Math.floor(i*l),Math.round(f.Ea*c)-d,h,u);a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{var l;a.font=this._p(),a.fillStyle=(l=r.textColor)!==null&&l!==void 0?l:this.ko.textColor,a.textAlign=this.qv?"right":"left",a.textBaseline="middle";const c=this.qv?Math.round(i-s.A):Math.round(i+s.T+s.A),u=n.map(d=>this.Fv.Mi(a,d.so));for(let d=n.length;d--;){const h=n[d];a.fillText(h.so,c,h.Ea+u[d])}})}pp(){if(this.Ev===null||this.Li===null)return;const e=[],n=this.Li.Uo().slice(),r=this.tn.fp(),s=this.ap();this.Li===r.pr()&&this.tn.fp().Uo().forEach(a=>{r.vr(a)&&n.push(a)});const i=this.Li;n.forEach(a=>{a.Rn(r,i).forEach(l=>{l.Oi(null),l.Bi()&&e.push(l)})}),e.forEach(a=>a.Oi(a.ki())),this.Li.W().alignLabels&&this.yp(e,s)}yp(e,n){if(this.Ev===null)return;const r=this.Ev.height/2,s=e.filter(a=>a.ki()<=r),i=e.filter(a=>a.ki()>r);s.sort((a,l)=>l.ki()-a.ki()),i.sort((a,l)=>a.ki()-l.ki());for(const a of e){const l=Math.floor(a.At(n)/2),c=a.ki();c>-l&&c<l&&a.Oi(l),c>this.Ev.height-l&&c<this.Ev.height+l&&a.Oi(this.Ev.height-l)}aS(s,1,this.Ev.height,n),aS(i,-1,this.Ev.height,n)}gp(e){if(this.Ev===null)return;const n=this.up(),r=this.ap(),s=this.qv?"right":"left";n.forEach(i=>{i.Ai()&&i.gt(ke(this.Li)).X(e,r,this.Fv,s)})}Mp(e){if(this.Ev===null||this.Li===null)return;const n=this.tn.$v().$t(),r=[],s=this.tn.fp(),i=n.Zc().Rn(s,this.Li);i.length&&r.push(i);const a=this.ap(),l=this.qv?"right":"left";r.forEach(c=>{c.forEach(u=>{u.gt(ke(this.Li)).X(e,a,this.Fv,l)})})}kp(e){this.Kv.style.cursor=e===1?"ns-resize":"default"}fo(){const e=this.op();this.Wv<e&&this.tn.$v().$t().Kl(),this.Wv=e}_p(){return Wl(this.ko.fontSize,this.ko.fontFamily)}}function rW(t,e){var n,r;return(r=(n=t.ua)===null||n===void 0?void 0:n.call(t,e))!==null&&r!==void 0?r:[]}function Nh(t,e){var n,r;return(r=(n=t.Pn)===null||n===void 0?void 0:n.call(t,e))!==null&&r!==void 0?r:[]}function sW(t,e){var n,r;return(r=(n=t.Ji)===null||n===void 0?void 0:n.call(t,e))!==null&&r!==void 0?r:[]}function iW(t,e){var n,r;return(r=(n=t.aa)===null||n===void 0?void 0:n.call(t,e))!==null&&r!==void 0?r:[]}class Yw{constructor(e,n){this.Ev=Et({width:0,height:0}),this.Cp=null,this.Tp=null,this.Pp=null,this.Rp=null,this.Dp=!1,this.Vp=new Vt,this.Op=new Vt,this.Bp=0,this.Ap=!1,this.Ip=null,this.zp=!1,this.Lp=null,this.Ep=null,this.jv=!1,this.Hv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Uv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Qd=e,this.Np=n,this.Np.W_().l(this.Fp.bind(this),this,!0),this.Wp=document.createElement("td"),this.Wp.style.padding="0",this.Wp.style.position="relative";const r=document.createElement("div");r.style.width="100%",r.style.height="100%",r.style.position="relative",r.style.overflow="hidden",this.jp=document.createElement("td"),this.jp.style.padding="0",this.Hp=document.createElement("td"),this.Hp.style.padding="0",this.Wp.appendChild(r),this.Gv=Sa(r,Et({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const s=this.Gv.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Jv=Sa(r,Et({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const i=this.Jv.canvasElement;i.style.position="absolute",i.style.zIndex="2",i.style.left="0",i.style.top="0",this.$p=document.createElement("tr"),this.$p.appendChild(this.jp),this.$p.appendChild(this.Wp),this.$p.appendChild(this.Hp),this.Up(),this.hp=new Gw(this.Jv.canvasElement,this,{ev:()=>this.Ip===null&&!this.Qd.W().handleScroll.vertTouchDrag,rv:()=>this.Ip===null&&!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.Cp!==null&&this.Cp.S(),this.Tp!==null&&this.Tp.S(),this.Pp=null,this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Na(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Na(this.Gv.canvasElement),this.Gv.dispose(),this.Np!==null&&this.Np.W_().p(this),this.hp.S()}fp(){return ke(this.Np)}qp(e){var n,r;this.Np!==null&&this.Np.W_().p(this),this.Np=e,this.Np!==null&&this.Np.W_().l(Yw.prototype.Fp.bind(this),this,!0),this.Up(),this.Qd.Yp().indexOf(this)===this.Qd.Yp().length-1?(this.Pp=(n=this.Pp)!==null&&n!==void 0?n:new eW(this.Wp,this.Qd),this.Pp.bt()):((r=this.Pp)===null||r===void 0||r.if(),this.Pp=null)}$v(){return this.Qd}lp(){return this.$p}Up(){if(this.Np!==null&&(this.Zp(),this.$i().wt().length!==0)){if(this.Cp!==null){const e=this.Np.R_();this.Cp.Gi(ke(e))}if(this.Tp!==null){const e=this.Np.D_();this.Tp.Gi(ke(e))}}}Xp(){this.Cp!==null&&this.Cp.bt(),this.Tp!==null&&this.Tp.bt()}M_(){return this.Np!==null?this.Np.M_():0}x_(e){this.Np&&this.Np.x_(e)}Qf(e){if(!this.Np)return;this.Kp();const n=e.localX,r=e.localY;this.Gp(n,r,e)}bv(e){this.Kp(),this.Jp(),this.Gp(e.localX,e.localY,e)}tv(e){var n;if(!this.Np)return;this.Kp();const r=e.localX,s=e.localY;this.Gp(r,s,e);const i=this.wr(r,s);this.Qd.Qp((n=i==null?void 0:i.Lv)!==null&&n!==void 0?n:null),this.$i().jc(i&&{Hc:i.Hc,Iv:i.Iv})}dv(e){this.Np!==null&&(this.Kp(),this.tm(e))}qf(e){this.Np!==null&&this.im(this.Op,e)}jf(e){this.qf(e)}av(e){this.Kp(),this.nm(e),this.Gp(e.localX,e.localY,e)}cv(e){this.Np!==null&&(this.Kp(),this.Ap=!1,this.sm(e))}uv(e){this.Np!==null&&this.tm(e)}Rv(e){if(this.Ap=!0,this.Ip===null){const n={x:e.localX,y:e.localY};this.rm(n,n,e)}}Pv(e){this.Np!==null&&(this.Kp(),this.Np.$t().jc(null),this.hm())}lm(){return this.Vp}am(){return this.Op}xv(){this.Bp=1,this.$i().Un()}Sv(e,n){if(!this.Qd.W().handleScale.pinch)return;const r=5*(n-this.Bp);this.Bp=n,this.$i().Qc(e.nt,r)}pv(e){this.Ap=!1,this.zp=this.Ip!==null,this.Jp();const n=this.$i().Zc();this.Ip!==null&&n.yt()&&(this.Lp={x:n.Yt(),y:n.Zt()},this.Ip={x:e.localX,y:e.localY})}hv(e){if(this.Np===null)return;const n=e.localX,r=e.localY;if(this.Ip===null)this.nm(e);else{this.zp=!1;const s=ke(this.Lp),i=s.x+(n-this.Ip.x),a=s.y+(r-this.Ip.y);this.Gp(i,a,e)}}_v(e){this.$v().W().trackingMode.exitMode===0&&(this.zp=!0),this.om(),this.sm(e)}wr(e,n){const r=this.Np;return r===null?null:function(s,i,a){const l=s.Uo(),c=function(u,d,h){var f,p;let y,b;for(const x of u){const w=(p=(f=x.va)===null||f===void 0?void 0:f.call(x,d,h))!==null&&p!==void 0?p:[];for(const v of w)_=v.zOrder,(!(m=y==null?void 0:y.zOrder)||_==="top"&&m!=="top"||_==="normal"&&m==="bottom")&&(y=v,b=x)}var _,m;return y&&b?{zv:y,Hc:b}:null}(l,i,a);if((c==null?void 0:c.zv.zOrder)==="top")return Sh(c);for(const u of l){if(c&&c.Hc===u&&c.zv.zOrder!=="bottom"&&!c.zv.isBackground)return Sh(c);const d=nW(u.Pn(s),i,a);if(d!==null)return{Hc:u,Bv:d.Bv,Iv:d.Iv};if(c&&c.Hc===u&&c.zv.zOrder!=="bottom"&&c.zv.isBackground)return Sh(c)}return c!=null&&c.zv?Sh(c):null}(r,e,n)}_m(e,n){ke(n==="left"?this.Cp:this.Tp).cp(Et({width:e,height:this.Ev.height}))}um(){return this.Ev}cp(e){ca(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Wp.style.width=e.width+"px",this.Wp.style.height=e.height+"px")}dm(){const e=ke(this.Np);e.P_(e.R_()),e.P_(e.D_());for(const n of e.Ba())if(e.vr(n)){const r=n.Dt();r!==null&&e.P_(r),n.Vn()}}xp(){return this.Gv.bitmapSize}Sp(e,n,r){const s=this.xp();s.width>0&&s.height>0&&e.drawImage(this.Gv.canvasElement,n,r)}vp(e){if(e===0||this.Np===null)return;if(e>1&&this.dm(),this.Cp!==null&&this.Cp.vp(e),this.Tp!==null&&this.Tp.vp(e),e!==1){this.Gv.applySuggestedBitmapSize();const r=_a(this.Gv);r!==null&&(r.useBitmapCoordinateSpace(s=>{this.mp(s)}),this.Np&&(this.fm(r,rW),this.vm(r),this.pm(r),this.fm(r,Nh),this.fm(r,sW)))}this.Jv.applySuggestedBitmapSize();const n=_a(this.Jv);n!==null&&(n.useBitmapCoordinateSpace(({context:r,bitmapSize:s})=>{r.clearRect(0,0,s.width,s.height)}),this.bm(n),this.fm(n,iW))}wm(){return this.Cp}gm(){return this.Tp}bp(e,n){this.fm(e,n)}Fp(){this.Np!==null&&this.Np.W_().p(this),this.Np=null}tm(e){this.im(this.Vp,e)}im(e,n){const r=n.localX,s=n.localY;e.M()&&e.m(this.$i().St().Nu(r),{x:r,y:s},n)}mp({context:e,bitmapSize:n}){const{width:r,height:s}=n,i=this.$i(),a=i.q(),l=i.bd();a===l?Hm(e,0,0,r,s,l):Ej(e,0,0,r,s,a,l)}vm(e){const n=ke(this.Np).j_().qh().gt();n!==null&&n.X(e,!1)}pm(e){const n=this.$i().Yc();this.Mm(e,Nh,My,n),this.Mm(e,Nh,Qh,n)}bm(e){this.Mm(e,Nh,Qh,this.$i().Zc())}fm(e,n){const r=ke(this.Np).Uo();for(const s of r)this.Mm(e,n,My,s);for(const s of r)this.Mm(e,n,Qh,s)}Mm(e,n,r,s){const i=ke(this.Np),a=i.$t().Wc(),l=a!==null&&a.Hc===s,c=a!==null&&l&&a.Iv!==void 0?a.Iv.Mr:void 0;Dy(n,u=>r(u,e,l,c),s,i)}Zp(){if(this.Np===null)return;const e=this.Qd,n=this.Np.R_().W().visible,r=this.Np.D_().W().visible;n||this.Cp===null||(this.jp.removeChild(this.Cp.lp()),this.Cp.S(),this.Cp=null),r||this.Tp===null||(this.Hp.removeChild(this.Tp.lp()),this.Tp.S(),this.Tp=null);const s=e.$t().ud();n&&this.Cp===null&&(this.Cp=new lS(this,e.W(),s,"left"),this.jp.appendChild(this.Cp.lp())),r&&this.Tp===null&&(this.Tp=new lS(this,e.W(),s,"right"),this.Hp.appendChild(this.Tp.lp()))}xm(e){return e.Dv&&this.Ap||this.Ip!==null}Sm(e){return Math.max(0,Math.min(e,this.Ev.width-1))}km(e){return Math.max(0,Math.min(e,this.Ev.height-1))}Gp(e,n,r){this.$i().ld(this.Sm(e),this.km(n),r,ke(this.Np))}hm(){this.$i().od()}om(){this.zp&&(this.Ip=null,this.hm())}rm(e,n,r){this.Ip=e,this.zp=!1,this.Gp(n.x,n.y,r);const s=this.$i().Zc();this.Lp={x:s.Yt(),y:s.Zt()}}$i(){return this.Qd.$t()}sm(e){if(!this.Dp)return;const n=this.$i(),r=this.fp();if(n.z_(r,r.vn()),this.Rp=null,this.Dp=!1,n.ed(),this.Ep!==null){const s=performance.now(),i=n.St();this.Ep.Vr(i.Hu(),s),this.Ep.Qu(s)||n.Zn(this.Ep)}}Kp(){this.Ip=null}Jp(){if(this.Np){if(this.$i().Un(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)ke(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Np.vn().Ni()&&this.$i().St().Ni()}}nm(e){if(this.Np===null)return;const n=this.$i(),r=n.St();if(r.Ni())return;const s=this.Qd.W(),i=s.handleScroll,a=s.kineticScroll;if((!i.pressedMouseMove||e.Dv)&&(!i.horzTouchDrag&&!i.vertTouchDrag||!e.Dv))return;const l=this.Np.vn(),c=performance.now();if(this.Rp!==null||this.xm(e)||(this.Rp={x:e.clientX,y:e.clientY,Od:c,ym:e.localX,Cm:e.localY}),this.Rp!==null&&!this.Dp&&(this.Rp.x!==e.clientX||this.Rp.y!==e.clientY)){if(e.Dv&&a.touch||!e.Dv&&a.mouse){const u=r.le();this.Ep=new ZX(.2/u,7/u,.997,15/u),this.Ep.Yd(r.Hu(),this.Rp.Od)}else this.Ep=null;l.Ni()||n.A_(this.Np,l,e.localY),n.nd(e.localX),this.Dp=!0}this.Dp&&(l.Ni()||n.I_(this.Np,l,e.localY),n.sd(e.localX),this.Ep!==null&&this.Ep.Yd(r.Hu(),c))}}class cS{constructor(e,n,r,s,i){this.ft=!0,this.Ev=Et({width:0,height:0}),this.Hv=()=>this.vp(3),this.qv=e==="left",this.Oc=r.ud,this.cn=n,this.Tm=s,this.Pm=i,this.Kv=document.createElement("div"),this.Kv.style.width="25px",this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Gv=Sa(this.Kv,Et({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv)}S(){this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Na(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Kv}um(){return this.Ev}cp(e){ca(this.Ev,e)||(this.Ev=e,this.Gv.resizeCanvasElement(e),this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.ft=!0)}vp(e){if(e<3&&!this.ft||this.Ev.width===0||this.Ev.height===0)return;this.ft=!1,this.Gv.applySuggestedBitmapSize();const n=_a(this.Gv);n!==null&&n.useBitmapCoordinateSpace(r=>{this.mp(r),this.Ie(r)})}xp(){return this.Gv.bitmapSize}Sp(e,n,r){const s=this.xp();s.width>0&&s.height>0&&e.drawImage(this.Gv.canvasElement,n,r)}Ie({context:e,bitmapSize:n,horizontalPixelRatio:r,verticalPixelRatio:s}){if(!this.Tm())return;e.fillStyle=this.cn.timeScale.borderColor;const i=Math.floor(this.Oc.W().C*r),a=Math.floor(this.Oc.W().C*s),l=this.qv?n.width-i:0;e.fillRect(l,0,i,a)}mp({context:e,bitmapSize:n}){Hm(e,0,0,n.width,n.height,this.Pm())}}function Jw(t){return e=>{var n,r;return(r=(n=e.fa)===null||n===void 0?void 0:n.call(e,t))!==null&&r!==void 0?r:[]}}const oW=Jw("normal"),aW=Jw("top"),lW=Jw("bottom");class cW{constructor(e,n){this.Rm=null,this.Dm=null,this.k=null,this.Vm=!1,this.Ev=Et({width:0,height:0}),this.Om=new Vt,this.Fv=new Xu(5),this.jv=!1,this.Hv=()=>{this.jv||this.Qd.$t().Uh()},this.Uv=()=>{this.jv||this.Qd.$t().Uh()},this.Qd=e,this.q_=n,this.cn=e.W().layout,this.Xd=document.createElement("tr"),this.Bm=document.createElement("td"),this.Bm.style.padding="0",this.Am=document.createElement("td"),this.Am.style.padding="0",this.Kv=document.createElement("td"),this.Kv.style.height="25px",this.Kv.style.padding="0",this.Im=document.createElement("div"),this.Im.style.width="100%",this.Im.style.height="100%",this.Im.style.position="relative",this.Im.style.overflow="hidden",this.Kv.appendChild(this.Im),this.Gv=Sa(this.Im,Et({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const r=this.Gv.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Jv=Sa(this.Im,Et({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const s=this.Jv.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.Xd.appendChild(this.Bm),this.Xd.appendChild(this.Kv),this.Xd.appendChild(this.Am),this.zm(),this.Qd.$t().g_().l(this.zm.bind(this),this),this.hp=new Gw(this.Jv.canvasElement,this,{ev:()=>!0,rv:()=>!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.hp.S(),this.Rm!==null&&this.Rm.S(),this.Dm!==null&&this.Dm.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Na(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Na(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Xd}Lm(){return this.Rm}Em(){return this.Dm}bv(e){if(this.Vm)return;this.Vm=!0;const n=this.Qd.$t();!n.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&n.Jc(e.localX)}pv(e){this.bv(e)}wv(){const e=this.Qd.$t();!e.St().Ni()&&this.Vm&&(this.Vm=!1,this.Qd.W().handleScale.axisPressedMouseMove.time&&e.hd())}av(e){const n=this.Qd.$t();!n.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&n.rd(e.localX)}hv(e){this.av(e)}cv(){this.Vm=!1;const e=this.Qd.$t();e.St().Ni()&&!this.Qd.W().handleScale.axisPressedMouseMove.time||e.hd()}_v(){this.cv()}qf(){this.Qd.W().handleScale.axisDoubleClickReset.time&&this.Qd.$t().Kn()}jf(){this.qf()}Qf(){this.Qd.$t().W().handleScale.axisPressedMouseMove.time&&this.kp(1)}Pv(){this.kp(0)}um(){return this.Ev}Nm(){return this.Om}Fm(e,n,r){ca(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.Om.m(e)),this.Rm!==null&&this.Rm.cp(Et({width:n,height:e.height})),this.Dm!==null&&this.Dm.cp(Et({width:r,height:e.height}))}Wm(){const e=this.jm();return Math.ceil(e.C+e.T+e.P+e.L+e.B+e.Hm)}bt(){this.Qd.$t().St().Ha()}xp(){return this.Gv.bitmapSize}Sp(e,n,r){const s=this.xp();s.width>0&&s.height>0&&e.drawImage(this.Gv.canvasElement,n,r)}vp(e){if(e===0)return;if(e!==1){this.Gv.applySuggestedBitmapSize();const r=_a(this.Gv);r!==null&&(r.useBitmapCoordinateSpace(s=>{this.mp(s),this.Ie(s),this.$m(r,lW)}),this.wp(r),this.$m(r,oW)),this.Rm!==null&&this.Rm.vp(e),this.Dm!==null&&this.Dm.vp(e)}this.Jv.applySuggestedBitmapSize();const n=_a(this.Jv);n!==null&&(n.useBitmapCoordinateSpace(({context:r,bitmapSize:s})=>{r.clearRect(0,0,s.width,s.height)}),this.Um([...this.Qd.$t().wt(),this.Qd.$t().Zc()],n),this.$m(n,aW))}$m(e,n){const r=this.Qd.$t().wt();for(const s of r)Dy(n,i=>My(i,e,!1,void 0),s,void 0);for(const s of r)Dy(n,i=>Qh(i,e,!1,void 0),s,void 0)}mp({context:e,bitmapSize:n}){Hm(e,0,0,n.width,n.height,this.Qd.$t().bd())}Ie({context:e,bitmapSize:n,verticalPixelRatio:r}){if(this.Qd.W().timeScale.borderVisible){e.fillStyle=this.qm();const s=Math.max(1,Math.floor(this.jm().C*r));e.fillRect(0,0,n.width,s)}}wp(e){const n=this.Qd.$t().St(),r=n.Ha();if(!r||r.length===0)return;const s=this.q_.maxTickMarkWeight(r),i=this.jm(),a=n.W();a.borderVisible&&a.ticksVisible&&e.useBitmapCoordinateSpace(({context:l,horizontalPixelRatio:c,verticalPixelRatio:u})=>{l.strokeStyle=this.qm(),l.fillStyle=this.qm();const d=Math.max(1,Math.floor(c)),h=Math.floor(.5*c);l.beginPath();const f=Math.round(i.T*u);for(let p=r.length;p--;){const y=Math.round(r[p].coord*c);l.rect(y-h,0,d,f)}l.fill()}),e.useMediaCoordinateSpace(({context:l})=>{const c=i.C+i.T+i.L+i.P/2;l.textAlign="center",l.textBaseline="middle",l.fillStyle=this.$(),l.font=this._p();for(const u of r)if(u.weight<s){const d=u.needAlignCoordinate?this.Ym(l,u.coord,u.label):u.coord;l.fillText(u.label,d,c)}this.Qd.W().timeScale.allowBoldLabels&&(l.font=this.Zm());for(const u of r)if(u.weight>=s){const d=u.needAlignCoordinate?this.Ym(l,u.coord,u.label):u.coord;l.fillText(u.label,d,c)}})}Ym(e,n,r){const s=this.Fv.xi(e,r),i=s/2,a=Math.floor(n-i)+.5;return a<0?n+=Math.abs(0-a):a+s>this.Ev.width&&(n-=Math.abs(this.Ev.width-(a+s))),n}Um(e,n){const r=this.jm();for(const s of e)for(const i of s.Qi())i.gt().X(n,r)}qm(){return this.Qd.W().timeScale.borderColor}$(){return this.cn.textColor}j(){return this.cn.fontSize}_p(){return Wl(this.j(),this.cn.fontFamily)}Zm(){return Wl(this.j(),this.cn.fontFamily,"bold")}jm(){this.k===null&&(this.k={C:1,N:NaN,L:NaN,B:NaN,ji:NaN,T:5,P:NaN,R:"",Wi:new Xu,Hm:0});const e=this.k,n=this._p();if(e.R!==n){const r=this.j();e.P=r,e.R=n,e.L=3*r/12,e.B=3*r/12,e.ji=9*r/12,e.N=0,e.Hm=4*r/12,e.Wi.nr()}return this.k}kp(e){this.Kv.style.cursor=e===1?"ew-resize":"default"}zm(){const e=this.Qd.$t(),n=e.W();n.leftPriceScale.visible||this.Rm===null||(this.Bm.removeChild(this.Rm.lp()),this.Rm.S(),this.Rm=null),n.rightPriceScale.visible||this.Dm===null||(this.Am.removeChild(this.Dm.lp()),this.Dm.S(),this.Dm=null);const r={ud:this.Qd.$t().ud()},s=()=>n.leftPriceScale.borderVisible&&e.St().W().borderVisible,i=()=>e.bd();n.leftPriceScale.visible&&this.Rm===null&&(this.Rm=new cS("left",n,r,s,i),this.Bm.appendChild(this.Rm.lp())),n.rightPriceScale.visible&&this.Dm===null&&(this.Dm=new cS("right",n,r,s,i),this.Am.appendChild(this.Dm.lp()))}}const uW=!!Kl&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!Kl&&(!((Vg=navigator==null?void 0:navigator.userAgentData)===null||Vg===void 0)&&Vg.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);var Vg;class dW{constructor(e,n,r){var s;this.Xm=[],this.Km=0,this.ho=0,this.__=0,this.Gm=0,this.Jm=0,this.Qm=null,this.tb=!1,this.Vp=new Vt,this.Op=new Vt,this.Rc=new Vt,this.ib=null,this.nb=null,this.Jd=e,this.cn=n,this.q_=r,this.Xd=document.createElement("div"),this.Xd.classList.add("tv-lightweight-charts"),this.Xd.style.overflow="hidden",this.Xd.style.direction="ltr",this.Xd.style.width="100%",this.Xd.style.height="100%",(s=this.Xd).style.userSelect="none",s.style.webkitUserSelect="none",s.style.msUserSelect="none",s.style.MozUserSelect="none",s.style.webkitTapHighlightColor="transparent",this.sb=document.createElement("table"),this.sb.setAttribute("cellspacing","0"),this.Xd.appendChild(this.sb),this.eb=this.rb.bind(this),zg(this.cn)&&this.hb(!0),this.$i=new qX(this.Vc.bind(this),this.cn,r),this.$t().Xc().l(this.lb.bind(this),this),this.ab=new cW(this,this.q_),this.sb.appendChild(this.ab.lp());const i=n.autoSize&&this.ob();let a=this.cn.width,l=this.cn.height;if(i||a===0||l===0){const c=e.getBoundingClientRect();a=a||c.width,l=l||c.height}this._b(a,l),this.ub(),e.appendChild(this.Xd),this.cb(),this.$i.St().ec().l(this.$i.Kl.bind(this.$i),this),this.$i.g_().l(this.$i.Kl.bind(this.$i),this)}$t(){return this.$i}W(){return this.cn}Yp(){return this.Xm}fb(){return this.ab}S(){this.hb(!1),this.Km!==0&&window.cancelAnimationFrame(this.Km),this.$i.Xc().p(this),this.$i.St().ec().p(this),this.$i.g_().p(this),this.$i.S();for(const e of this.Xm)this.sb.removeChild(e.lp()),e.lm().p(this),e.am().p(this),e.S();this.Xm=[],ke(this.ab).S(),this.Xd.parentElement!==null&&this.Xd.parentElement.removeChild(this.Xd),this.Rc.S(),this.Vp.S(),this.Op.S(),this.pb()}_b(e,n,r=!1){if(this.ho===n&&this.__===e)return;const s=function(l){const c=Math.floor(l.width),u=Math.floor(l.height);return Et({width:c-c%2,height:u-u%2})}(Et({width:e,height:n}));this.ho=s.height,this.__=s.width;const i=this.ho+"px",a=this.__+"px";ke(this.Xd).style.height=i,ke(this.Xd).style.width=a,this.sb.style.height=i,this.sb.style.width=a,r?this.mb(un.es(),performance.now()):this.$i.Kl()}vp(e){e===void 0&&(e=un.es());for(let n=0;n<this.Xm.length;n++)this.Xm[n].vp(e.Hn(n).Fn);this.cn.timeScale.visible&&this.ab.vp(e.jn())}$h(e){const n=zg(this.cn);this.$i.$h(e);const r=zg(this.cn);r!==n&&this.hb(r),this.cb(),this.bb(e)}lm(){return this.Vp}am(){return this.Op}Xc(){return this.Rc}wb(){this.Qm!==null&&(this.mb(this.Qm,performance.now()),this.Qm=null);const e=this.gb(null),n=document.createElement("canvas");n.width=e.width,n.height=e.height;const r=ke(n.getContext("2d"));return this.gb(r),n}Mb(e){return e==="left"&&!this.xb()||e==="right"&&!this.Sb()||this.Xm.length===0?0:ke(e==="left"?this.Xm[0].wm():this.Xm[0].gm()).dp()}kb(){return this.cn.autoSize&&this.ib!==null}yb(){return this.Xd}Qp(e){this.nb=e,this.nb?this.yb().style.setProperty("cursor",e):this.yb().style.removeProperty("cursor")}Cb(){return this.nb}Tb(){return On(this.Xm[0]).um()}bb(e){(e.autoSize!==void 0||!this.ib||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.ib&&this.ob(),e.autoSize===!1&&this.ib!==null&&this.pb(),e.autoSize||e.width===void 0&&e.height===void 0||this._b(e.width||this.__,e.height||this.ho))}gb(e){let n=0,r=0;const s=this.Xm[0],i=(l,c)=>{let u=0;for(let d=0;d<this.Xm.length;d++){const h=this.Xm[d],f=ke(l==="left"?h.wm():h.gm()),p=f.xp();e!==null&&f.Sp(e,c,u),u+=p.height}};this.xb()&&(i("left",0),n+=ke(s.wm()).xp().width);for(let l=0;l<this.Xm.length;l++){const c=this.Xm[l],u=c.xp();e!==null&&c.Sp(e,n,r),r+=u.height}n+=s.xp().width,this.Sb()&&(i("right",n),n+=ke(s.gm()).xp().width);const a=(l,c,u)=>{ke(l==="left"?this.ab.Lm():this.ab.Em()).Sp(ke(e),c,u)};if(this.cn.timeScale.visible){const l=this.ab.xp();if(e!==null){let c=0;this.xb()&&(a("left",c,r),c=ke(s.wm()).xp().width),this.ab.Sp(e,c,r),c+=l.width,this.Sb()&&a("right",c,r)}r+=l.height}return Et({width:n,height:r})}Pb(){let e=0,n=0,r=0;for(const y of this.Xm)this.xb()&&(n=Math.max(n,ke(y.wm()).op(),this.cn.leftPriceScale.minimumWidth)),this.Sb()&&(r=Math.max(r,ke(y.gm()).op(),this.cn.rightPriceScale.minimumWidth)),e+=y.M_();n=Ly(n),r=Ly(r);const s=this.__,i=this.ho,a=Math.max(s-n-r,0),l=this.cn.timeScale.visible;let c=l?Math.max(this.ab.Wm(),this.cn.timeScale.minimumHeight):0;var u;c=(u=c)+u%2;const d=0+c,h=i<d?0:i-d,f=h/e;let p=0;for(let y=0;y<this.Xm.length;++y){const b=this.Xm[y];b.qp(this.$i.qc()[y]);let _=0,m=0;m=y===this.Xm.length-1?h-p:Math.round(b.M_()*f),_=Math.max(m,2),p+=_,b.cp(Et({width:a,height:_})),this.xb()&&b._m(n,"left"),this.Sb()&&b._m(r,"right"),b.fp()&&this.$i.Kc(b.fp(),_)}this.ab.Fm(Et({width:l?a:0,height:c}),l?n:0,l?r:0),this.$i.S_(a),this.Gm!==n&&(this.Gm=n),this.Jm!==r&&(this.Jm=r)}hb(e){e?this.Xd.addEventListener("wheel",this.eb,{passive:!1}):this.Xd.removeEventListener("wheel",this.eb)}Rb(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return uW?1/window.devicePixelRatio:1}rb(e){if(!(e.deltaX!==0&&this.cn.handleScroll.mouseWheel||e.deltaY!==0&&this.cn.handleScale.mouseWheel))return;const n=this.Rb(e),r=n*e.deltaX/100,s=-n*e.deltaY/100;if(e.cancelable&&e.preventDefault(),s!==0&&this.cn.handleScale.mouseWheel){const i=Math.sign(s)*Math.min(1,Math.abs(s)),a=e.clientX-this.Xd.getBoundingClientRect().left;this.$t().Qc(a,i)}r!==0&&this.cn.handleScroll.mouseWheel&&this.$t().td(-80*r)}mb(e,n){var r;const s=e.jn();s===3&&this.Db(),s!==3&&s!==2||(this.Vb(e),this.Ob(e,n),this.ab.bt(),this.Xm.forEach(i=>{i.Xp()}),((r=this.Qm)===null||r===void 0?void 0:r.jn())===3&&(this.Qm.ts(e),this.Db(),this.Vb(this.Qm),this.Ob(this.Qm,n),e=this.Qm,this.Qm=null)),this.vp(e)}Ob(e,n){for(const r of e.Qn())this.ns(r,n)}Vb(e){const n=this.$i.qc();for(let r=0;r<n.length;r++)e.Hn(r).Wn&&n[r].N_()}ns(e,n){const r=this.$i.St();switch(e.qn){case 0:r.hc();break;case 1:r.lc(e.Vt);break;case 2:r.Gn(e.Vt);break;case 3:r.Jn(e.Vt);break;case 4:r.qu();break;case 5:e.Vt.Qu(n)||r.Jn(e.Vt.tc(n))}}Vc(e){this.Qm!==null?this.Qm.ts(e):this.Qm=e,this.tb||(this.tb=!0,this.Km=window.requestAnimationFrame(n=>{if(this.tb=!1,this.Km=0,this.Qm!==null){const r=this.Qm;this.Qm=null,this.mb(r,n);for(const s of r.Qn())if(s.qn===5&&!s.Vt.Qu(n)){this.$t().Zn(s.Vt);break}}}))}Db(){this.ub()}ub(){const e=this.$i.qc(),n=e.length,r=this.Xm.length;for(let s=n;s<r;s++){const i=On(this.Xm.pop());this.sb.removeChild(i.lp()),i.lm().p(this),i.am().p(this),i.S()}for(let s=r;s<n;s++){const i=new Yw(this,e[s]);i.lm().l(this.Bb.bind(this),this),i.am().l(this.Ab.bind(this),this),this.Xm.push(i),this.sb.insertBefore(i.lp(),this.ab.lp())}for(let s=0;s<n;s++){const i=e[s],a=this.Xm[s];a.fp()!==i?a.qp(i):a.Up()}this.cb(),this.Pb()}Ib(e,n,r){var s;const i=new Map;e!==null&&this.$i.wt().forEach(d=>{const h=d.In().ll(e);h!==null&&i.set(d,h)});let a;if(e!==null){const d=(s=this.$i.St().Ui(e))===null||s===void 0?void 0:s.originalTime;d!==void 0&&(a=d)}const l=this.$t().Wc(),c=l!==null&&l.Hc instanceof Kw?l.Hc:void 0,u=l!==null&&l.Iv!==void 0?l.Iv.gr:void 0;return{zb:a,ee:e??void 0,Lb:n??void 0,Eb:c,Nb:i,Fb:u,Wb:r??void 0}}Bb(e,n,r){this.Vp.m(()=>this.Ib(e,n,r))}Ab(e,n,r){this.Op.m(()=>this.Ib(e,n,r))}lb(e,n,r){this.Rc.m(()=>this.Ib(e,n,r))}cb(){const e=this.cn.timeScale.visible?"":"none";this.ab.lp().style.display=e}xb(){return this.Xm[0].fp().R_().W().visible}Sb(){return this.Xm[0].fp().D_().W().visible}ob(){return"ResizeObserver"in window&&(this.ib=new ResizeObserver(e=>{const n=e.find(r=>r.target===this.Jd);n&&this._b(n.contentRect.width,n.contentRect.height)}),this.ib.observe(this.Jd,{box:"border-box"}),!0)}pb(){this.ib!==null&&this.ib.disconnect(),this.ib=null}}function zg(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function hW(t){return function(e){return e.open!==void 0}(t)||function(e){return e.value!==void 0}(t)}function Vj(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]])}return n}function uS(t,e,n,r){const s=n.value,i={ee:e,ot:t,Vt:[s,s,s,s],zb:r};return n.color!==void 0&&(i.V=n.color),i}function fW(t,e,n,r){const s=n.value,i={ee:e,ot:t,Vt:[s,s,s,s],zb:r};return n.lineColor!==void 0&&(i.lt=n.lineColor),n.topColor!==void 0&&(i.Ps=n.topColor),n.bottomColor!==void 0&&(i.Rs=n.bottomColor),i}function pW(t,e,n,r){const s=n.value,i={ee:e,ot:t,Vt:[s,s,s,s],zb:r};return n.topLineColor!==void 0&&(i.Re=n.topLineColor),n.bottomLineColor!==void 0&&(i.De=n.bottomLineColor),n.topFillColor1!==void 0&&(i.ke=n.topFillColor1),n.topFillColor2!==void 0&&(i.ye=n.topFillColor2),n.bottomFillColor1!==void 0&&(i.Ce=n.bottomFillColor1),n.bottomFillColor2!==void 0&&(i.Te=n.bottomFillColor2),i}function mW(t,e,n,r){const s={ee:e,ot:t,Vt:[n.open,n.high,n.low,n.close],zb:r};return n.color!==void 0&&(s.V=n.color),s}function gW(t,e,n,r){const s={ee:e,ot:t,Vt:[n.open,n.high,n.low,n.close],zb:r};return n.color!==void 0&&(s.V=n.color),n.borderColor!==void 0&&(s.Ot=n.borderColor),n.wickColor!==void 0&&(s.Xh=n.wickColor),s}function xW(t,e,n,r,s){const i=On(s)(n),a=Math.max(...i),l=Math.min(...i),c=i[i.length-1],u=[c,a,l,c],d=n,{time:h,color:f}=d;return{ee:e,ot:t,Vt:u,zb:r,$e:Vj(d,["time","color"]),V:f}}function Th(t){return t.Vt!==void 0}function dS(t,e){return e.customValues!==void 0&&(t.jb=e.customValues),t}function Uo(t){return(e,n,r,s,i,a)=>function(l,c){return c?c(l):(u=l).open===void 0&&u.value===void 0;var u}(r,a)?dS({ot:e,ee:n,zb:s},r):dS(t(e,n,r,s,i),r)}function hS(t){return{Candlestick:Uo(gW),Bar:Uo(mW),Area:Uo(fW),Baseline:Uo(pW),Histogram:Uo(uS),Line:Uo(uS),Custom:Uo(xW)}[t]}function fS(t){return{ee:0,Hb:new Map,la:t}}function pS(t,e){if(t!==void 0&&t.length!==0)return{$b:e.key(t[0].ot),Ub:e.key(t[t.length-1].ot)}}function mS(t){let e;return t.forEach(n=>{e===void 0&&(e=n.zb)}),On(e)}class yW{constructor(e){this.qb=new Map,this.Yb=new Map,this.Zb=new Map,this.Xb=[],this.q_=e}S(){this.qb.clear(),this.Yb.clear(),this.Zb.clear(),this.Xb=[]}Kb(e,n){let r=this.qb.size!==0,s=!1;const i=this.Yb.get(e);if(i!==void 0)if(this.Yb.size===1)r=!1,s=!0,this.qb.clear();else for(const c of this.Xb)c.pointData.Hb.delete(e)&&(s=!0);let a=[];if(n.length!==0){const c=n.map(p=>p.time),u=this.q_.createConverterToInternalObj(n),d=hS(e.Qh()),h=e.Ca(),f=e.Ta();a=n.map((p,y)=>{const b=u(p.time),_=this.q_.key(b);let m=this.qb.get(_);m===void 0&&(m=fS(b),this.qb.set(_,m),s=!0);const x=d(b,m.ee,p,c[y],h,f);return m.Hb.set(e,x),x})}r&&this.Gb(),this.Jb(e,a);let l=-1;if(s){const c=[];this.qb.forEach(u=>{c.push({timeWeight:0,time:u.la,pointData:u,originalTime:mS(u.Hb)})}),c.sort((u,d)=>this.q_.key(u.time)-this.q_.key(d.time)),l=this.Qb(c)}return this.tw(e,l,function(c,u,d){const h=pS(c,d),f=pS(u,d);if(h!==void 0&&f!==void 0)return{ta:h.Ub>=f.Ub&&h.$b>=f.$b}}(this.Yb.get(e),i,this.q_))}vd(e){return this.Kb(e,[])}iw(e,n){const r=n;(function(b){b.zb===void 0&&(b.zb=b.time)})(r),this.q_.preprocessData(n);const s=this.q_.createConverterToInternalObj([n])(n.time),i=this.Zb.get(e);if(i!==void 0&&this.q_.key(s)<this.q_.key(i))throw new Error(`Cannot update oldest data, last time=${i}, new time=${s}`);let a=this.qb.get(this.q_.key(s));const l=a===void 0;a===void 0&&(a=fS(s),this.qb.set(this.q_.key(s),a));const c=hS(e.Qh()),u=e.Ca(),d=e.Ta(),h=c(s,a.ee,n,r.zb,u,d);a.Hb.set(e,h),this.nw(e,h);const f={ta:Th(h)};if(!l)return this.tw(e,-1,f);const p={timeWeight:0,time:a.la,pointData:a,originalTime:mS(a.Hb)},y=_d(this.Xb,this.q_.key(p.time),(b,_)=>this.q_.key(b.time)<_);this.Xb.splice(y,0,p);for(let b=y;b<this.Xb.length;++b)Hg(this.Xb[b].pointData,b);return this.q_.fillWeightsForPoints(this.Xb,y),this.tw(e,y,f)}nw(e,n){let r=this.Yb.get(e);r===void 0&&(r=[],this.Yb.set(e,r));const s=r.length!==0?r[r.length-1]:null;s===null||this.q_.key(n.ot)>this.q_.key(s.ot)?Th(n)&&r.push(n):Th(n)?r[r.length-1]=n:r.splice(-1,1),this.Zb.set(e,n.ot)}Jb(e,n){n.length!==0?(this.Yb.set(e,n.filter(Th)),this.Zb.set(e,n[n.length-1].ot)):(this.Yb.delete(e),this.Zb.delete(e))}Gb(){for(const e of this.Xb)e.pointData.Hb.size===0&&this.qb.delete(this.q_.key(e.time))}Qb(e){let n=-1;for(let r=0;r<this.Xb.length&&r<e.length;++r){const s=this.Xb[r],i=e[r];if(this.q_.key(s.time)!==this.q_.key(i.time)){n=r;break}i.timeWeight=s.timeWeight,Hg(i.pointData,r)}if(n===-1&&this.Xb.length!==e.length&&(n=Math.min(this.Xb.length,e.length)),n===-1)return-1;for(let r=n;r<e.length;++r)Hg(e[r].pointData,r);return this.q_.fillWeightsForPoints(e,n),this.Xb=e,n}sw(){if(this.Yb.size===0)return null;let e=0;return this.Yb.forEach(n=>{n.length!==0&&(e=Math.max(e,n[n.length-1].ee))}),e}tw(e,n,r){const s={ew:new Map,St:{Eu:this.sw()}};if(n!==-1)this.Yb.forEach((i,a)=>{s.ew.set(a,{$e:i,rw:a===e?r:void 0})}),this.Yb.has(e)||s.ew.set(e,{$e:[],rw:r}),s.St.hw=this.Xb,s.St.lw=n;else{const i=this.Yb.get(e);s.ew.set(e,{$e:i||[],rw:r})}return s}}function Hg(t,e){t.ee=e,t.Hb.forEach(n=>{n.ee=e})}function Qw(t){const e={value:t.Vt[3],time:t.zb};return t.jb!==void 0&&(e.customValues=t.jb),e}function gS(t){const e=Qw(t);return t.V!==void 0&&(e.color=t.V),e}function vW(t){const e=Qw(t);return t.lt!==void 0&&(e.lineColor=t.lt),t.Ps!==void 0&&(e.topColor=t.Ps),t.Rs!==void 0&&(e.bottomColor=t.Rs),e}function wW(t){const e=Qw(t);return t.Re!==void 0&&(e.topLineColor=t.Re),t.De!==void 0&&(e.bottomLineColor=t.De),t.ke!==void 0&&(e.topFillColor1=t.ke),t.ye!==void 0&&(e.topFillColor2=t.ye),t.Ce!==void 0&&(e.bottomFillColor1=t.Ce),t.Te!==void 0&&(e.bottomFillColor2=t.Te),e}function zj(t){const e={open:t.Vt[0],high:t.Vt[1],low:t.Vt[2],close:t.Vt[3],time:t.zb};return t.jb!==void 0&&(e.customValues=t.jb),e}function bW(t){const e=zj(t);return t.V!==void 0&&(e.color=t.V),e}function _W(t){const e=zj(t),{V:n,Ot:r,Xh:s}=t;return n!==void 0&&(e.color=n),r!==void 0&&(e.borderColor=r),s!==void 0&&(e.wickColor=s),e}function Fy(t){return{Area:vW,Line:gS,Baseline:wW,Histogram:gS,Bar:bW,Candlestick:_W,Custom:EW}[t]}function EW(t){const e=t.zb;return Object.assign(Object.assign({},t.$e),{time:e})}const SW={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},NW={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},TW={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Uw,attributionLogo:!0},Xg={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},AW={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},CW={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:Uw,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function xS(){return{width:0,height:0,autoSize:!1,layout:TW,crosshair:SW,grid:NW,overlayPriceScales:Object.assign({},Xg),leftPriceScale:Object.assign(Object.assign({},Xg),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},Xg),{visible:!0}),timeScale:AW,watermark:CW,localization:{locale:Kl?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class jW{constructor(e,n){this.aw=e,this.ow=n}applyOptions(e){this.aw.$t().$c(this.ow,e)}options(){return this.Li().W()}width(){return Wm(this.ow)?this.aw.Mb(this.ow):0}Li(){return ke(this.aw.$t().Uc(this.ow)).Dt}}function yS(t,e,n){const r=Vj(t,["time","originalTime"]),s=Object.assign({time:e},r);return n!==void 0&&(s.originalTime=n),s}const kW={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class OW{constructor(e){this.Nh=e}applyOptions(e){this.Nh.$h(e)}options(){return this.Nh.W()}_w(){return this.Nh}}class PW{constructor(e,n,r,s,i){this.uw=new Vt,this.Es=e,this.cw=n,this.dw=r,this.q_=i,this.fw=s}S(){this.uw.S()}priceFormatter(){return this.Es.ba()}priceToCoordinate(e){const n=this.Es.Ct();return n===null?null:this.Es.Dt().Rt(e,n.Vt)}coordinateToPrice(e){const n=this.Es.Ct();return n===null?null:this.Es.Dt().pn(e,n.Vt)}barsInLogicalRange(e){if(e===null)return null;const n=new Ol(new mu(e.from,e.to)).lu(),r=this.Es.In();if(r.Ni())return null;const s=r.ll(n.Os(),1),i=r.ll(n.ui(),-1),a=ke(r.el()),l=ke(r.An());if(s!==null&&i!==null&&s.ee>i.ee)return{barsBefore:e.from-a,barsAfter:l-e.to};const c={barsBefore:s===null||s.ee===a?e.from-a:s.ee-a,barsAfter:i===null||i.ee===l?l-e.to:l-i.ee};return s!==null&&i!==null&&(c.from=s.zb,c.to=i.zb),c}setData(e){this.q_,this.Es.Qh(),this.cw.pw(this.Es,e),this.mw("full")}update(e){this.Es.Qh(),this.cw.bw(this.Es,e),this.mw("update")}dataByIndex(e,n){const r=this.Es.In().ll(e,n);return r===null?null:Fy(this.seriesType())(r)}data(){const e=Fy(this.seriesType());return this.Es.In().ne().map(n=>e(n))}subscribeDataChanged(e){this.uw.l(e)}unsubscribeDataChanged(e){this.uw.v(e)}setMarkers(e){this.q_;const n=e.map(r=>yS(r,this.q_.convertHorzItemToInternal(r.time),r.time));this.Es.na(n)}markers(){return this.Es.sa().map(e=>yS(e,e.originalTime,void 0))}applyOptions(e){this.Es.$h(e)}options(){return Ws(this.Es.W())}priceScale(){return this.dw.priceScale(this.Es.Dt().Pa())}createPriceLine(e){const n=ts(Ws(kW),e),r=this.Es.ea(n);return new OW(r)}removePriceLine(e){this.Es.ra(e._w())}seriesType(){return this.Es.Qh()}attachPrimitive(e){this.Es.ka(e),e.attached&&e.attached({chart:this.fw,series:this,requestUpdate:()=>this.Es.$t().Kl()})}detachPrimitive(e){this.Es.ya(e),e.detached&&e.detached()}mw(e){this.uw.M()&&this.uw.m(e)}}class IW{constructor(e,n,r){this.ww=new Vt,this.mu=new Vt,this.Om=new Vt,this.$i=e,this.yl=e.St(),this.ab=n,this.yl.nc().l(this.gw.bind(this)),this.yl.sc().l(this.Mw.bind(this)),this.ab.Nm().l(this.xw.bind(this)),this.q_=r}S(){this.yl.nc().p(this),this.yl.sc().p(this),this.ab.Nm().p(this),this.ww.S(),this.mu.S(),this.Om.S()}scrollPosition(){return this.yl.Hu()}scrollToPosition(e,n){n?this.yl.Ju(e,1e3):this.$i.Jn(e)}scrollToRealTime(){this.yl.Gu()}getVisibleRange(){const e=this.yl.Vu();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const n={from:this.q_.convertHorzItemToInternal(e.from),to:this.q_.convertHorzItemToInternal(e.to)},r=this.yl.Iu(n);this.$i.pd(r)}getVisibleLogicalRange(){const e=this.yl.Du();return e===null?null:{from:e.Os(),to:e.ui()}}setVisibleLogicalRange(e){fo(e.from<=e.to,"The from index cannot be after the to index."),this.$i.pd(e)}resetTimeScale(){this.$i.Kn()}fitContent(){this.$i.hc()}logicalToCoordinate(e){const n=this.$i.St();return n.Ni()?null:n.It(e)}coordinateToLogical(e){return this.yl.Ni()?null:this.yl.Nu(e)}timeToCoordinate(e){const n=this.q_.convertHorzItemToInternal(e),r=this.yl.Va(n,!1);return r===null?null:this.yl.It(r)}coordinateToTime(e){const n=this.$i.St(),r=n.Nu(e),s=n.Ui(r);return s===null?null:s.originalTime}width(){return this.ab.um().width}height(){return this.ab.um().height}subscribeVisibleTimeRangeChange(e){this.ww.l(e)}unsubscribeVisibleTimeRangeChange(e){this.ww.v(e)}subscribeVisibleLogicalRangeChange(e){this.mu.l(e)}unsubscribeVisibleLogicalRangeChange(e){this.mu.v(e)}subscribeSizeChange(e){this.Om.l(e)}unsubscribeSizeChange(e){this.Om.v(e)}applyOptions(e){this.yl.$h(e)}options(){return Object.assign(Object.assign({},Ws(this.yl.W())),{barSpacing:this.yl.le()})}gw(){this.ww.M()&&this.ww.m(this.getVisibleRange())}Mw(){this.mu.M()&&this.mu.m(this.getVisibleLogicalRange())}xw(e){this.Om.m(e.width,e.height)}}function RW(t){if(t===void 0||t.type==="custom")return;const e=t;e.minMove!==void 0&&e.precision===void 0&&(e.precision=function(n){if(n>=1)return 0;let r=0;for(;r<8;r++){const s=Math.round(n);if(Math.abs(s-n)<1e-8)return r;n*=10}return r}(e.minMove))}function vS(t){return function(e){if(xh(e.handleScale)){const r=e.handleScale;e.handleScale={axisDoubleClickReset:{time:r,price:r},axisPressedMouseMove:{time:r,price:r},mouseWheel:r,pinch:r}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:r,axisDoubleClickReset:s}=e.handleScale;xh(r)&&(e.handleScale.axisPressedMouseMove={time:r,price:r}),xh(s)&&(e.handleScale.axisDoubleClickReset={time:s,price:s})}const n=e.handleScroll;xh(n)&&(e.handleScroll={horzTouchDrag:n,vertTouchDrag:n,mouseWheel:n,pressedMouseMove:n})}(t),t}class LW{constructor(e,n,r){this.Sw=new Map,this.kw=new Map,this.yw=new Vt,this.Cw=new Vt,this.Tw=new Vt,this.Pw=new yW(n);const s=r===void 0?Ws(xS()):ts(Ws(xS()),vS(r));this.q_=n,this.aw=new dW(e,s,n),this.aw.lm().l(a=>{this.yw.M()&&this.yw.m(this.Rw(a()))},this),this.aw.am().l(a=>{this.Cw.M()&&this.Cw.m(this.Rw(a()))},this),this.aw.Xc().l(a=>{this.Tw.M()&&this.Tw.m(this.Rw(a()))},this);const i=this.aw.$t();this.Dw=new IW(i,this.aw.fb(),this.q_)}remove(){this.aw.lm().p(this),this.aw.am().p(this),this.aw.Xc().p(this),this.Dw.S(),this.aw.S(),this.Sw.clear(),this.kw.clear(),this.yw.S(),this.Cw.S(),this.Tw.S(),this.Pw.S()}resize(e,n,r){this.autoSizeActive()||this.aw._b(e,n,r)}addCustomSeries(e,n){const r=wl(e),s=Object.assign(Object.assign({},yj),r.defaultOptions());return this.Vw("Custom",s,n,r)}addAreaSeries(e){return this.Vw("Area",yH,e)}addBaselineSeries(e){return this.Vw("Baseline",vH,e)}addBarSeries(e){return this.Vw("Bar",gH,e)}addCandlestickSeries(e={}){return function(n){n.borderColor!==void 0&&(n.borderUpColor=n.borderColor,n.borderDownColor=n.borderColor),n.wickColor!==void 0&&(n.wickUpColor=n.wickColor,n.wickDownColor=n.wickColor)}(e),this.Vw("Candlestick",mH,e)}addHistogramSeries(e){return this.Vw("Histogram",wH,e)}addLineSeries(e){return this.Vw("Line",xH,e)}removeSeries(e){const n=On(this.Sw.get(e)),r=this.Pw.vd(n);this.aw.$t().vd(n),this.Ow(r),this.Sw.delete(e),this.kw.delete(n)}pw(e,n){this.Ow(this.Pw.Kb(e,n))}bw(e,n){this.Ow(this.Pw.iw(e,n))}subscribeClick(e){this.yw.l(e)}unsubscribeClick(e){this.yw.v(e)}subscribeCrosshairMove(e){this.Tw.l(e)}unsubscribeCrosshairMove(e){this.Tw.v(e)}subscribeDblClick(e){this.Cw.l(e)}unsubscribeDblClick(e){this.Cw.v(e)}priceScale(e){return new jW(this.aw,e)}timeScale(){return this.Dw}applyOptions(e){this.aw.$h(vS(e))}options(){return this.aw.W()}takeScreenshot(){return this.aw.wb()}autoSizeActive(){return this.aw.kb()}chartElement(){return this.aw.yb()}paneSize(){const e=this.aw.Tb();return{height:e.height,width:e.width}}setCrosshairPosition(e,n,r){const s=this.Sw.get(r);if(s===void 0)return;const i=this.aw.$t().dr(s);i!==null&&this.aw.$t().ad(e,n,i)}clearCrosshairPosition(){this.aw.$t().od(!0)}Vw(e,n,r={},s){RW(r.priceFormat);const i=ts(Ws(vj),Ws(n),r),a=this.aw.$t().dd(e,i,s),l=new PW(a,this,this,this,this.q_);return this.Sw.set(l,a),this.kw.set(a,l),l}Ow(e){const n=this.aw.$t();n._d(e.St.Eu,e.St.hw,e.St.lw),e.ew.forEach((r,s)=>s.J(r.$e,r.rw)),n.Wu()}Bw(e){return On(this.kw.get(e))}Rw(e){const n=new Map;e.Nb.forEach((s,i)=>{const a=i.Qh(),l=Fy(a)(s);if(a!=="Custom")fo(hW(l));else{const c=i.Ta();fo(!c||c(l)===!1)}n.set(this.Bw(i),l)});const r=e.Eb!==void 0&&this.kw.has(e.Eb)?this.Bw(e.Eb):void 0;return{time:e.zb,logical:e.ee,point:e.Lb,hoveredSeries:r,hoveredObjectId:e.Fb,seriesData:n,sourceEvent:e.Wb}}}function MW(t,e,n){let r;if(bd(t)){const i=document.getElementById(t);fo(i!==null,`Cannot find element in DOM with id=${t}`),r=i}else r=t;const s=new LW(r,e,n);return e.setOptions(s.options()),s}function Hf(t,e){return MW(t,new sS,sS.Id(e))}Object.assign(Object.assign({},vj),yj);const wS=["https://gateway.pinata.cloud/ipfs/","https://ipfs.io/ipfs/","https://cloudflare-ipfs.com/ipfs/","https://dweb.link/ipfs/"],Wg=new Map;function DW({token:t,size:e="md",className:n=""}){const r=`${t.id}-${t.image_url}`,s=Wg.has(r),[i,a]=M.useState(!1),[l,c]=M.useState(s),[u,d]=M.useState(0),[h,f]=M.useState(0),p=M.useRef(null),y={sm:"w-8 h-8 text-sm",md:"w-12 h-12 text-xl",lg:"w-16 h-16 text-2xl",xl:"w-20 h-20 text-3xl"},b=y[e]||y.md;M.useEffect(()=>{if(Wg.has(r)){c(!0),a(!1);return}p.current!==t.image_url&&(a(!1),c(!1),d(0),f(0),p.current=t.image_url)},[t.image_url,t.id,r]);const _=x=>{if(!x)return null;if(x.startsWith("ipfs://"))return x.replace("ipfs://","");const w=x.match(/\/ipfs\/([a-zA-Z0-9]+)/);return w?w[1]:x.startsWith("http")?null:x},m=()=>{console.error("Image load error for token:",t.token_name,"Gateway:",u,"Retry:",h),u<wS.length-1?(console.log("Trying next gateway..."),d(x=>x+1),f(0)):h<2?(console.log("Retrying current gateway..."),f(x=>x+1),d(0)):(console.error("All gateways failed for:",t.token_name),a(!0))};if(t.image_url&&!i){let x=t.image_url;const w=_(t.image_url);w&&(x=`${wS[u]}${w}`);const v=x;return o.jsxs("div",{className:`relative inline-block ${b}`,children:[!l&&o.jsx("div",{className:`absolute inset-0 rounded-full bg-gradient-to-br from-purple-500 to-purple-700 flex items-center justify-center text-white font-bold ${n}`,children:t.token_name[0]}),o.jsx("img",{src:v,alt:t.token_name,className:`${b} rounded-full object-cover border-2 border-purple-500 ${n} transition-opacity duration-200 ${l?"opacity-100":"opacity-0"}`,onLoad:()=>{const T=`${t.id}-${t.image_url}`;Wg.set(T,!0),c(!0)},onError:m},`${t.id}-${u}-${h}`)]})}return o.jsx("div",{className:`${b} rounded-full bg-gradient-to-br from-purple-500 to-purple-700 flex items-center justify-center text-white font-bold ${n}`,children:t.token_name[0]})}const Lt=M.memo(DW,(t,e)=>t.token.id===e.token.id&&t.token.image_url===e.token.image_url&&t.size===e.size&&t.className===e.className);function Zw({token:t,onClose:e}){const n=M.useRef(null),r=M.useRef(null),s=M.useRef(null),i=M.useRef(null),a=M.useRef(null),l=M.useRef(null),c=M.useRef([]),u=M.useRef(null),[d,h]=M.useState(null),[f,p]=M.useState(!0),[y,b]=M.useState("area"),[_,m]=M.useState("1h"),[x,w]=M.useState(0),[v,T]=M.useState(0);M.useEffect(()=>(E(),()=>{re()}),[t]),M.useEffect(()=>(d&&n.current&&r.current&&J(),()=>{re()}),[d,y,_]),M.useEffect(()=>{if(!(t!=null&&t.amm_pool_created))return;const R=async()=>{var A;try{const L=new Be.Client("wss://xrplcluster.com");await L.connect();const $=t.currency_code.length>3?Buffer.from(t.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):t.currency_code,ie=await L.request({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:$,issuer:t.issuer_address},ledger_index:"validated"});if(await L.disconnect(),(A=ie==null?void 0:ie.result)!=null&&A.amm){const q=ie.result.amm,G=parseFloat(q.amount)/1e6,ne=parseFloat(q.amount2.value),he=G/ne;w(he)}}catch(L){console.error("Error fetching live price:",L)}};R();const C=setInterval(R,5e3);return()=>clearInterval(C)},[t]);const E=async()=>{var R;if(!t.amm_pool_created){p(!1);return}try{const C=new Be.Client("wss://xrplcluster.com");await C.connect();const A=t.currency_code.length>3?Buffer.from(t.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):t.currency_code,L=await C.request({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:A,issuer:t.issuer_address},ledger_index:"validated"});if(L.result.amm){const $=L.result.amm,ie=parseFloat($.amount)/1e6,q=parseFloat($.amount2.value),G=ie/q;if(h({xrpAmount:ie,tokenAmount:q,price:G,lpTokens:parseFloat(((R=$.lp_token)==null?void 0:R.value)||0),accountId:$.account}),w(G),t.amm_xrp_amount&&t.amm_asset_amount){const ne=t.amm_xrp_amount/t.amm_asset_amount,he=(G-ne)/ne*100;T(he)}}await C.disconnect()}catch(C){console.error("Error fetching live pool data:",C)}finally{p(!1)}},D=()=>{if(!d)return[];const R=d.price,C=[],A=Math.floor(Date.now()/1e3);let L;switch(_){case"5m":L=1;break;case"15m":L=4;break;case"30m":L=8;break;case"1h":L=24;break;case"4h":L=96;break;case"1d":L=168;break;default:L=24}for(let $=L;$>=0;$--){const ie=A-$*3600,q=(Math.random()-.5)*.3,G=(L-$)/L*.15,ne=R*(1+q+G);C.push({time:ie,value:ne,open:ne*.98,high:ne*1.03,low:ne*.97,close:ne,volume:Math.random()*1e4+1e3})}return c.current=C,C},te=()=>{re(),!(!d||!a.current)&&(u.current=setInterval(()=>{z()},5e3))},re=()=>{u.current&&(clearInterval(u.current),u.current=null)},z=()=>{if(!d||!a.current||c.current.length===0)return;const R=c.current[c.current.length-1],C=Math.floor(Date.now()/1e3),A=(Math.random()-.5)*.02,L=x||d.price*(1+A);if(C-R.time>=60){const $={time:C,value:L,open:R.close||L,high:Math.max(L,R.close||L)*1.002,low:Math.min(L,R.close||L)*.998,close:L,volume:Math.random()*5e3+500};c.current.push($),c.current.length>500&&c.current.shift();try{y==="area"||y==="line"||y==="baseline"?a.current.update({time:$.time,value:$.value}):a.current.update({time:$.time,open:$.open,high:$.high,low:$.low,close:$.close}),l.current&&l.current.update({time:$.time,value:$.volume,color:$.close>=$.open?"rgba(34, 197, 94, 0.5)":"rgba(239, 68, 68, 0.5)"})}catch(ie){console.error("Error updating chart:",ie)}}},J=()=>{if(!(!n.current||!r.current||!d))try{s.current&&(s.current.remove(),s.current=null),i.current&&(i.current.remove(),i.current=null),n.current&&(n.current.innerHTML=""),r.current&&(r.current.innerHTML="");const R=Hf(n.current,{width:n.current.clientWidth,height:400,layout:{background:{color:"transparent"},textColor:"#a78bfa"},grid:{vertLines:{color:"rgba(139, 92, 246, 0.1)"},horzLines:{color:"rgba(139, 92, 246, 0.1)"}},rightPriceScale:{borderColor:"rgba(139, 92, 246, 0.3)",scaleMargins:{top:.1,bottom:.1}},timeScale:{borderColor:"rgba(139, 92, 246, 0.3)",timeVisible:!0,secondsVisible:!1,visible:!1}});s.current=R;const C=D();if(!C||C.length===0)throw new Error("Unable to generate chart data");let A;const L={type:"price",precision:8,minMove:1e-8};switch(y){case"bars":A=R.addBarSeries({upColor:"#22c55e",downColor:"#ef4444",priceFormat:L}),A.setData(C.map(ne=>({time:ne.time,open:ne.open,high:ne.high,low:ne.low,close:ne.close})));break;case"candlestick":A=R.addCandlestickSeries({upColor:"#22c55e",downColor:"#ef4444",borderVisible:!1,wickUpColor:"#22c55e",wickDownColor:"#ef4444",priceFormat:L}),A.setData(C.map(ne=>({time:ne.time,open:ne.open,high:ne.high,low:ne.low,close:ne.close})));break;case"hollow":A=R.addCandlestickSeries({upColor:"transparent",downColor:"#ef4444",borderUpColor:"#22c55e",borderDownColor:"#ef4444",wickUpColor:"#22c55e",wickDownColor:"#ef4444",priceFormat:L}),A.setData(C.map(ne=>({time:ne.time,open:ne.open,high:ne.high,low:ne.low,close:ne.close})));break;case"line":A=R.addLineSeries({color:"#8b5cf6",lineWidth:2,priceFormat:L}),A.setData(C.map(ne=>({time:ne.time,value:ne.close})));break;case"area":A=R.addAreaSeries({topColor:"rgba(139, 92, 246, 0.4)",bottomColor:"rgba(139, 92, 246, 0.0)",lineColor:"#8b5cf6",lineWidth:2,priceFormat:L}),A.setData(C.map(ne=>({time:ne.time,value:ne.close})));break;case"baseline":A=R.addBaselineSeries({topLineColor:"#22c55e",topFillColor1:"rgba(34, 197, 94, 0.4)",topFillColor2:"rgba(34, 197, 94, 0.0)",bottomLineColor:"#ef4444",bottomFillColor1:"rgba(239, 68, 68, 0.0)",bottomFillColor2:"rgba(239, 68, 68, 0.4)",priceFormat:L}),A.setData(C.map(ne=>({time:ne.time,value:ne.close})));break;case"heikin":A=R.addCandlestickSeries({upColor:"#22c55e",downColor:"#ef4444",borderVisible:!1,wickUpColor:"#22c55e",wickDownColor:"#ef4444",priceFormat:L});const G=C.map((ne,he)=>{if(he===0)return ne;const se=C[he-1],ee=(ne.open+ne.high+ne.low+ne.close)/4,N=(se.open+se.close)/2,k=Math.max(ne.high,N,ee),B=Math.min(ne.low,N,ee);return{time:ne.time,open:N,high:k,low:B,close:ee}});A.setData(G);break;default:A=R.addAreaSeries({topColor:"rgba(139, 92, 246, 0.4)",bottomColor:"rgba(139, 92, 246, 0.0)",lineColor:"#8b5cf6",lineWidth:2,priceFormat:L}),A.setData(C.map(ne=>({time:ne.time,value:ne.close})))}a.current=A;const $=Hf(r.current,{width:r.current.clientWidth,height:100,layout:{background:{color:"transparent"},textColor:"#a78bfa"},grid:{vertLines:{color:"rgba(139, 92, 246, 0.1)"},horzLines:{color:"rgba(139, 92, 246, 0.1)"}},rightPriceScale:{borderColor:"rgba(139, 92, 246, 0.3)",scaleMargins:{top:.1,bottom:.1}},timeScale:{borderColor:"rgba(139, 92, 246, 0.3)",timeVisible:!0,secondsVisible:!1}});i.current=$;const ie=$.addHistogramSeries({color:"#8b5cf6",priceFormat:{type:"volume"}});ie.setData(C.map(G=>({time:G.time,value:G.volume,color:G.close>=G.open?"rgba(34, 197, 94, 0.5)":"rgba(239, 68, 68, 0.5)"}))),l.current=ie,R.timeScale().fitContent(),$.timeScale().fitContent(),R.timeScale().subscribeVisibleTimeRangeChange(()=>{const G=R.timeScale().getVisibleRange();G&&$.timeScale().setVisibleRange(G)});const q=()=>{s.current&&n.current&&s.current.applyOptions({width:n.current.clientWidth}),i.current&&r.current&&i.current.applyOptions({width:r.current.clientWidth})};window.addEventListener("resize",q),setTimeout(()=>{te()},100)}catch(R){console.error("Error rendering chart:",R)}},ce=()=>x||(d==null?void 0:d.price)||0,pe=()=>{const R=ce();return t.supply*R},Q=()=>(d==null?void 0:d.xrpAmount)||t.amm_xrp_amount||0,ue=()=>(d==null?void 0:d.tokenAmount)||t.amm_asset_amount||0,V=ce(),H=pe();return o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:e,children:o.jsxs("div",{className:"glass rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",onClick:R=>R.stopPropagation(),children:[o.jsxs("div",{className:"sticky top-0 glass border-b border-purple-500/20 p-6 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(Lt,{token:t,size:"lg"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-purple-200",children:t.token_name}),o.jsx("p",{className:"text-purple-400 text-sm",children:t.currency_code})]})]}),o.jsx("button",{onClick:e,className:"text-purple-400 hover:text-purple-300 text-3xl leading-none",children:""})]}),o.jsx("div",{className:"p-6 space-y-6",children:f?o.jsx("div",{className:"text-center text-purple-400 py-8",children:"Loading live data..."}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Price"}),o.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[V.toFixed(8)," XRP"]}),o.jsxs("div",{className:`text-sm mt-1 ${v>=0?"text-green-400":"text-red-400"}`,children:[v>=0?"":""," ",Math.abs(v).toFixed(2),"% (24h)"]})]}),o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Market Cap"}),o.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[H.toFixed(4)," XRP"]}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Fully diluted"})]}),o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"24h Volume"}),o.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[(H*.12).toFixed(2)," XRP"]}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Estimated"})]})]}),d&&o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200",children:"Price Chart"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("select",{value:_,onChange:R=>m(R.target.value),className:"input px-3 py-1 text-sm text-purple-200",children:[o.jsx("option",{value:"5m",children:"5m"}),o.jsx("option",{value:"15m",children:"15m"}),o.jsx("option",{value:"30m",children:"30m"}),o.jsx("option",{value:"1h",children:"1h"}),o.jsx("option",{value:"4h",children:"4h"}),o.jsx("option",{value:"1d",children:"1d"})]}),o.jsxs("select",{value:y,onChange:R=>b(R.target.value),className:"input px-3 py-1 text-sm text-purple-200",children:[o.jsx("option",{value:"candlestick",children:"Candles"}),o.jsx("option",{value:"bars",children:"Bars"}),o.jsx("option",{value:"hollow",children:"Hollow"}),o.jsx("option",{value:"heikin",children:"Heikin Ashi"}),o.jsx("option",{value:"line",children:"Line"}),o.jsx("option",{value:"area",children:"Area"}),o.jsx("option",{value:"baseline",children:"Baseline"})]})]})]}),o.jsx("div",{ref:n,className:"w-full mb-2"}),o.jsx("div",{ref:r,className:"w-full"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold text-purple-200 mb-4",children:"Token Details"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-purple-400",children:"Total Supply"}),o.jsx("span",{className:"text-purple-200 font-bold",children:t.supply.toLocaleString()})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-purple-400",children:"Circulating"}),o.jsx("span",{className:"text-purple-200 font-bold",children:(t.supply*.9).toLocaleString()})]}),t.amm_pool_created&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-purple-400",children:"AMM Liquidity"}),o.jsx("span",{className:"text-purple-200 font-bold",children:ue().toLocaleString()})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-purple-400",children:"XRP Locked"}),o.jsxs("span",{className:"text-purple-200 font-bold",children:[Q().toFixed(2)," XRP"]})]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-purple-400",children:"Status"}),o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${t.amm_pool_created?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:t.amm_pool_created?" Active":" Pending"})]})]})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold text-purple-200 mb-4",children:"Blockchain Info"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Issuer Address"}),o.jsx("div",{className:"text-purple-300 text-xs font-mono bg-black/30 p-2 rounded break-all",children:t.issuer_address})]}),t.tx_hash&&o.jsxs("div",{children:[o.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Creation TX"}),o.jsx("div",{className:"text-purple-300 text-xs font-mono bg-black/30 p-2 rounded break-all",children:t.tx_hash})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Created"}),o.jsx("div",{className:"text-purple-300 text-sm",children:new Date(t.created_at).toLocaleString()})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[o.jsx("a",{href:`https://xmagnetic.org/amm/${t.currency_code}+${t.issuer_address}_XRP+XRP?network=mainnet`,target:"_blank",rel:"noopener noreferrer",className:"btn text-purple-300 px-4 py-3 rounded-lg text-center font-medium",children:"AMM Pool"}),o.jsx("a",{href:`https://xmagnetic.org/dex/${t.currency_code}+${t.issuer_address}_XRP+XRP?network=mainnet`,target:"_blank",rel:"noopener noreferrer",className:"btn-primary text-white px-4 py-3 rounded-lg text-center font-medium",children:"Trade on DEX"}),o.jsx("a",{href:`https://testnet.xrpl.org/accounts/${t.issuer_address}`,target:"_blank",rel:"noopener noreferrer",className:"btn text-purple-300 px-4 py-3 rounded-lg text-center font-medium",children:"Explorer"}),o.jsx("button",{onClick:e,className:"btn text-purple-300 px-4 py-3 rounded-lg font-medium",children:"Back"})]})]})})]})})}const Js=async({userAddress:t,actionType:e,description:n,details:r={},txHash:s=null,tokenId:i=null})=>{try{const{error:a}=await Ae.from("activity_logs").insert([{user_address:t,action_type:e,description:n,details:r,tx_hash:s,token_id:i}]);a&&console.error("Error logging activity:",a)}catch(a){console.error("Error logging activity:",a)}},Qs={TOKEN_CREATED:"token_created",TOKEN_SENT:"token_sent",TOKEN_RECEIVED:"token_received",TRUSTLINE_CREATED:"trustline_created",SWAP_EXECUTED:"swap_executed",AMM_CREATED:"amm_created",WALLET_CONNECTED:"wallet_connected",WALLET_DISCONNECTED:"wallet_disconnected",BOT_CREATED:"bot_created",START_EARNING:"start_earning",STOP_EARNING:"stop_earning",CLAIM_EARNINGS:"claim_earnings"},bS=["ABLE","ACID","AGED","ALSO","AREA","ARMY","AWAY","BABY","BACK","BALL","BAND","BANK","BASE","BATH","BEAR","BEAT","BEEN","BEER","BELL","BELT","BEST","BILL","BIRD","BLOW","BLUE","BOAT","BODY","BOMB","BOND","BONE","BOOK","BOOM","BORN","BOSS","BOTH","BOWL","BULK","BURN","BUSH","BUSY","CAFE","CAKE","CALL","CALM","CAME","CAMP","CARD","CARE","CART","CASE","CASH","CAST","CELL","CHAT","CHEF","CHIP","CITY","CLUB","COAL","COAT","CODE","COLD","COME","COOK","COOL","COPE","COPY","CORE","CORN","COST","CREW","CROP","DARK","DATA","DATE","DAWN","DAYS","DEAD","DEAL","DEAR","DEBT","DEEP","DENY","DESK","DIAL","DIET","DISC","DISK","DIVE","DOCK","DOES","DOGS","DONE","DOOR","DOSE","DOWN","DRAW","DREW","DROP","DRUG","DUAL","DUCK","DUMP","DUST","DUTY","EACH","EARN","EASE","EAST","EASY","ECHO","EDGE","ELSE","EVEN","EVER","EVIL","EXIT","FACE","FACT","FAIL","FAIR","FALL","FARM","FAST","FATE","FEAR","FEED","FEEL","FEET","FELL","FELT","FILE","FILL","FILM","FIND","FINE","FIRE","FIRM","FISH","FLAT","FLED","FLEW","FLOW","FOLK","FOOD","FOOT","FORD","FORM","FORT","FOUL","FOUR","FREE","FROM","FUEL","FULL","FUND","GAIN","GAME","GATE","GAVE","GEAR","GENE","GIFT","GIRL","GIVE","GLAD","GOAL","GOES","GOLD","GOLF","GONE","GOOD","GRAD","GRAY","GREW","GREY","GRIP","GROW","GULF","HAIR","HALF","HALL","HAND","HANG","HARD","HARM","HATE","HAVE","HEAD","HEAR","HEAT","HELD","HELL","HELP","HERE","HERO","HIGH","HILL","HIRE","HOLD","HOLE","HOLY","HOME","HOPE","HOST","HOUR","HUGE","HUNG","HUNT","HURT","IDEA","INCH","INTO","IRON","ITEM","JACK","JANE","JAZZ","JEAN","JOHN","JOIN","JUMP","JUNE","JURY","JUST","KEEN","KEEP","KENT","KEPT","KICK","KILL","KIND","KING","KNEE","KNEW","KNOW","LACK","LADY","LAID","LAKE","LAND","LANE","LAST","LATE","LEAD","LEFT","LESS","LIED","LIFE","LIFT","LIKE","LINE","LINK","LIST","LIVE","LOAD","LOAN","LOCK","LONE","LONG","LOOK","LORD","LOSE","LOSS","LOST","LOTS","LOUD","LOVE","LUCK","LUNG","MADE","MAIL","MAIN","MAKE","MALE","MALL","MANY","MARK","MASS","MATE","MATH","MEAL","MEAN","MEAT","MEET","MENU","MERE","MESS","MICE","MILE","MILK","MILL","MIND","MINE","MISS","MODE","MOOD","MOON","MORE","MOST","MOVE","MUCH","MUST","MYTH","NAME","NAVY","NEAR","NECK","NEED","NEWS","NEXT","NICE","NINE","NONE","NOON","NORM","NOSE","NOTE","NOVEL","NURSE","OKAY","ONCE","ONES","ONLY","ONTO","OPEN","ORAL","OVEN","OVER","PACE","PACK","PAGE","PAID","PAIN","PAIR","PALM","PARK","PART","PASS","PAST","PATH","PEAK","PICK","PIER","PILE","PINE","PINK","PIPE","PLAN","PLAY","PLOT","PLUG","PLUS","POEM","POET","POLL","POND","POOL","POOR","PORT","POST","POUR","PRAY","PRAY","PURE","PUSH","RACE","RACK","RAIL","RAIN","RANK","RARE","RATE","READ","REAL","REAR","RELY","RENT","REST","RICE","RICH","RIDE","RING","RISE","RISK","ROAD","ROCK","RODE","ROLE","ROLL","ROOF","ROOM","ROOT","ROPE","ROSE","RUDE","RULE","RUSH","RUTH","SAFE","SAGA","SAGE","SAID","SAKE","SALE","SALT","SAME","SAND","SANK","SAVE","SEAT","SEED","SEEK","SEEM","SEEN","SELF","SELL","SEND","SENT","SEPT","SHED","SHIP","SHOP","SHOT","SHOW","SHUT","SICK","SIDE","SIGN","SILK","SING","SINK","SITE","SIZE","SKIN","SKIP","SLOW","SNOW","SOFT","SOIL","SOLD","SOLE","SOME","SONG","SOON","SORT","SOUL","SOUP","SOUR","SPAN","SPEC","SPIN","SPOT","STAR","STAY","STEM","STEP","STIR","STOP","SUCH","SUED","SUIT","SUNG","SURE","SWIM","TALE","TALK","TALL","TANK","TAPE","TASK","TEAM","TEAR","TECH","TELL","TEND","TERM","TEST","TEXT","THAN","THAT","THEM","THEN","THEY","THIN","THIS","THOU","THUS","TIDE","TIED","TIER","TILL","TIME","TINY","TOLL","TONE","TOOK","TOOL","TOPS","TORN","TOUR","TOWN","TOYS","TREE","TREK","TRIM","TRIO","TRIP","TRUE","TUBE","TUNE","TURN","TWIN","TYPE","UNIT","UPON","USED","USER","VARY","VAST","VERY","VICE","VIEW","VISA","VOTE","WAGE","WAIT","WAKE","WALK","WALL","WANT","WARD","WARM","WARN","WASH","WAVE","WAYS","WEAK","WEAR","WEEK","WELL","WENT","WERE","WEST","WHAT","WHEN","WHOM","WIDE","WIFE","WILD","WILL","WIND","WINE","WING","WIRE","WISE","WISH","WITH","WOOD","WORD","WORE","WORK","WORM","WORN","WRAP","YARD","YEAH","YEAR","YELL","YOUR","ZONE","ZOOM","MOON","PEEL","BEAM","LEAN","PEAK","RAGE","VIBE","DOGE"],FW=()=>bS[Math.floor(Math.random()*bS.length)],By="token-updated",BW=t=>{const e=new CustomEvent(By,{detail:{tokenId:t,timestamp:Date.now()}});window.dispatchEvent(e)},Ed=t=>{const e=n=>t(n.detail);return window.addEventListener(By,e),()=>window.removeEventListener(By,e)},$y=async t=>{try{const{data:e,error:n}=await Ae.from("meme_tokens").select("id, featured_order").eq("is_featured",!0).order("featured_order",{ascending:!0,nullsLast:!0});if(n)throw n;const r=[];e.forEach((i,a)=>{a<2?r.push(Ae.from("meme_tokens").update({featured_order:a+2}).eq("id",i.id)):r.push(Ae.from("meme_tokens").update({is_featured:!1,featured_order:null}).eq("id",i.id))}),await Promise.all(r);const{error:s}=await Ae.from("meme_tokens").update({is_featured:!0,featured_order:1}).eq("id",t);if(s)throw s;console.log("Token promoted to featured position 1")}catch(e){throw console.error("Error promoting token to featured:",e),e}},_S=async(t,e)=>{try{if(e===null||e===0){const{error:a}=await Ae.from("meme_tokens").update({is_featured:!1,featured_order:null}).eq("id",t);if(a)throw a;return}if(e<1||e>3)throw new Error("Featured position must be between 1 and 3");const{data:n,error:r}=await Ae.from("meme_tokens").select("id, featured_order").eq("is_featured",!0).order("featured_order",{ascending:!0,nullsLast:!0});if(r)throw r;const s=n.find(a=>a.featured_order===e);if(s&&s.id!==t){const a=n.filter(h=>h.id!==t&&h.id!==s.id),l=[e],c=[1,2,3].filter(h=>h!==e),u=[];a.forEach(h=>{const f=c.find(p=>!l.includes(p));f?(l.push(f),u.push(Ae.from("meme_tokens").update({featured_order:f}).eq("id",h.id))):u.push(Ae.from("meme_tokens").update({is_featured:!1,featured_order:null}).eq("id",h.id))});const d=c[0];u.push(Ae.from("meme_tokens").update({featured_order:d}).eq("id",s.id)),await Promise.all(u)}else{const a=n.filter(d=>d.id!==t),l=[e],c=[1,2,3].filter(d=>d!==e),u=[];a.forEach(d=>{const h=c.find(f=>!l.includes(f));h?(l.push(h),u.push(Ae.from("meme_tokens").update({featured_order:h}).eq("id",d.id))):u.push(Ae.from("meme_tokens").update({is_featured:!1,featured_order:null}).eq("id",d.id))}),await Promise.all(u)}const{error:i}=await Ae.from("meme_tokens").update({is_featured:!0,featured_order:e}).eq("id",t);if(i)throw i;console.log(`Token set to featured position ${e}`)}catch(n){throw console.error("Error setting featured position:",n),n}},$W="sEd7bAfzqZWKxaatJpoWzTvENyaTg1Y",Ah="rKxBBMmY969Ph1y63ddVfYyN7xmxwDfVq6",UW="sEd7W72aANTbLTG98XDhU1yfotPJdhu";function ES(){var Nd,eb;const[t,e]=M.useState([]),[n,r]=M.useState({}),[s,i]=M.useState({}),[a,l]=M.useState(null),[c,u]=M.useState({totalTokens:0,totalValue:0,topPerformer:null,recentActivity:[]}),[d,h]=M.useState(0),[f,p]=M.useState({totalXrpLocked:0,totalMarketCap:0}),[y,b]=M.useState({totalTrustlines:0,totalHolders:0,trustlines24hAgo:0,holders24hAgo:0}),[_,m]=M.useState(0),[x,w]=M.useState(!1),[v,T]=M.useState(!1),[E,D]=M.useState(!1),[te,re]=M.useState(""),[z,J]=M.useState(null),[ce,pe]=M.useState(!1),[Q,ue]=M.useState(!1),[V,H]=M.useState(""),[R,C]=M.useState({name:"",issuer:"",supply:"1000000",xrpLocked:"1",description:"",twitterHandle:"",websiteUrl:""}),[A,L]=M.useState(null),[$,ie]=M.useState(null),[q,G]=M.useState(!1),[ne,he]=M.useState("list"),[se,ee]=M.useState("grid"),[N,k]=M.useState(null),[B,O]=M.useState(!1),[P,F]=M.useState([]),[Y,W]=M.useState(!1),[Z,ae]=M.useState(!1),[oe,fe]=M.useState(""),[_e,Te]=M.useState(null),[Ne,$e]=M.useState(null),[Ge,j]=M.useState(null),[g,S]=M.useState(null),[K,le]=M.useState(!1),[me,ye]=M.useState(!1),[We,ze]=M.useState([]),[I,de]=M.useState(0),[be,Ie]=M.useState(!1),[Ce,X]=M.useState(null),[ve,He]=M.useState(""),[Pe,Re]=M.useState("all"),[qe,Qe]=M.useState("newest"),[ut,zt]=M.useState(1),[nr,En]=M.useState("all"),[Mt,Dt]=M.useState("all"),pn=100;M.useEffect(()=>{Pt(),gr(),Rn();const U=setInterval(()=>{Pt(),Rn()},6e4),we=()=>{gr()};return window.addEventListener("walletConnected",we),window.addEventListener("walletDisconnected",we),()=>{clearInterval(U),window.removeEventListener("walletConnected",we),window.removeEventListener("walletDisconnected",we)}},[]),M.useEffect(()=>{t.length>0&&Jt()},[t]),M.useEffect(()=>{Object.keys(n).length>0&&lt()},[n]),M.useEffect(()=>{t.length>0&&(Nt(),Yt())},[t]),M.useEffect(()=>{a&&Object.keys(n).length>0&&Ht()},[a,n]);const gr=()=>{const U=localStorage.getItem("connectedWallet");l(U?JSON.parse(U):null)},Rn=async()=>{var U;try{const Ue=await(await fetch("https://api.coingecko.com/api/v3/simple/price?ids=ripple&vs_currencies=usd")).json();h(((U=Ue.ripple)==null?void 0:U.usd)||0)}catch(we){console.error("Error fetching XRP/USD price:",we)}},lt=()=>{let U=0,we=0;t.forEach(Ue=>{const Ze=n[Ue.id];if(Ze){U+=Ze.xrpAmount;const ht=Ze.price,rt=Ue.supply||0;we+=ht*rt}}),p({totalXrpLocked:U,totalMarketCap:we})},Yt=()=>{const U=Date.now()-864e5,we=t.filter(Ue=>new Date(Ue.created_at).getTime()>U);m(we.length)},Nt=async()=>{const U=new Be.Client("wss://xrplcluster.com");try{await U.connect();let we=0;const Ue=new Set,Ze=new Set,ht=Date.now()-24*60*60*1e3,rt=t.filter(mt=>new Date(mt.created_at).getTime()>ht);let at=0;for(const mt of t){if(!mt.amm_pool_created)continue;const rr=rt.some(Rr=>Rr.id===mt.id);try{const Rr=mt.currency_code.length>3?At.Buffer.from(mt.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):mt.currency_code,Td=await U.request({command:"account_lines",account:mt.issuer_address,ledger_index:"validated"});if(Td.result.lines){const ci=Td.result.lines.filter(ui=>mt.currency_code.length>3?ui.currency===Rr:ui.currency===mt.currency_code);we+=ci.length,rr||(at+=ci.length),ci.forEach(ui=>{parseFloat(ui.balance)>0&&(Ue.add(ui.account),rr||Ze.add(ui.account))})}}catch(Rr){console.error(`Error fetching trustlines for ${mt.token_name}:`,Rr.message)}}b({totalTrustlines:we,totalHolders:Ue.size,trustlines24hAgo:at,holders24hAgo:Ze.size}),await U.disconnect()}catch(we){console.error("Error fetching trustline stats:",we)}},Pt=async()=>{const U=new Be.Client("wss://xrplcluster.com");try{const{data:we,error:Ue}=await Ae.from("meme_tokens").select("*").order("created_at",{ascending:!1});if(Ue)throw Ue;const Ze=we||[];await U.connect();for(const rt of Ze.filter(at=>at.amm_pool_created))try{const at=rt.currency_code.length>3?At.Buffer.from(rt.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):rt.currency_code,mt=await U.request({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:at,issuer:rt.issuer_address},ledger_index:"validated"});if(mt.result.amm){const rr=mt.result.amm;rt.amm_xrp_amount=parseFloat(rr.amount)/1e6,rt.amm_asset_amount=parseFloat(rr.amount2.value)}}catch(at){console.error(`Failed to fetch live data for ${rt.token_name}:`,at.message)}await U.disconnect(),e(Ze);const ht={totalTokens:Ze.length,totalValue:Ze.reduce((rt,at)=>rt+(at.amm_xrp_amount||0),0),topPerformer:Ze[0]||null,recentActivity:Ze.slice(0,5)};u(ht)}catch(we){console.error("Error loading tokens:",we)}},Jt=async()=>{var we;const U=new Be.Client("wss://xrplcluster.com");try{await U.connect();const Ue={};for(const Ze of t)if(Ze.amm_pool_created)try{const ht=Ze.currency_code.length>3?At.Buffer.from(Ze.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):Ze.currency_code,rt=await U.request({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:ht,issuer:Ze.issuer_address},ledger_index:"validated"});if(rt.result.amm){const at=rt.result.amm,mt=parseFloat(at.amount)/1e6,rr=parseFloat(at.amount2.value),Rr=parseFloat(((we=at.lp_token)==null?void 0:we.value)||0);Ue[Ze.id]={xrpAmount:mt,tokenAmount:rr,lpTokens:Rr,price:mt/rr,accountId:at.account}}}catch(ht){console.error(`Error fetching pool data for ${Ze.token_name}:`,ht.message)}r(Ue),await U.disconnect()}catch(Ue){console.error("Error fetching pools data:",Ue)}},Ht=async()=>{if(!a)return;const U=new Be.Client("wss://xrplcluster.com");try{await U.connect();const we=await U.request({command:"account_lines",account:a.address,ledger_index:"validated"}),Ue={};we.result.lines&&we.result.lines.forEach(Ze=>{const ht=t.find(rt=>{const at=n[rt.id];return at&&Ze.account===at.accountId});ht&&(Ue[ht.id]=Ze.balance)}),i(Ue),await U.disconnect()}catch(we){console.error("Error fetching LP balances:",we)}},tn=()=>{if(V!=="divercity"){ge.error("Incorrect password!");return}ue(!1),T(!0),H("")},Sn=U=>{const we=U.target.files[0];if(we){L(we);const Ue=new FileReader;Ue.onloadend=()=>{ie(Ue.result)},Ue.readAsDataURL(we)}},To=async()=>{if(!R.name||!R.issuer){ge.error("Token name and issuer are required");return}try{G(!0);let U=null;A&&(U=await Uf(A));const we={token_name:R.name,currency_code:R.name,issuer_address:R.issuer,receiver_address:"Manual Entry",supply:parseFloat(R.supply),amm_xrp_amount:parseFloat(R.xrpLocked),amm_pool_created:!0,status:"manual",amm_asset_amount:parseFloat(R.supply)*.9,description:R.description||null,twitter_handle:R.twitterHandle||null,website_url:R.websiteUrl||null};U&&(we.image_url=U);const{data:Ue,error:Ze}=await Ae.from("meme_tokens").insert([we]).select();if(Ze)throw Ze;Ue&&Ue[0]&&await $y(Ue[0].id),ge.success(`Token ${R.name} added successfully!`),T(!1),C({name:"",issuer:"",supply:"1000000",xrpLocked:"1",description:"",twitterHandle:"",websiteUrl:""}),L(null),ie(null),Pt()}catch(U){console.error("Error adding token:",U),ge.error("Failed to add token")}finally{G(!1)}},Ln=async()=>{var Ue,Ze;if(te!=="divercity"){ge.error("Incorrect password!");return}w(!0),D(!1),ye(!0),Ie(!1),de(0),ze([{title:"Generating Token Name",status:"pending"},{title:"Connecting to XRPL",status:"pending"},{title:"Validating Wallets",status:"pending"},{title:"Creating Trust Line",status:"pending"},{title:"Issuing Tokens",status:"pending"},{title:"Saving to Database",status:"pending"},{title:"Creating AMM Pool",status:"pending"},{title:"Complete",status:"pending"}]);const we=(ht,rt,at={})=>{ze(mt=>mt.map((rr,Rr)=>Rr===ht?{...rr,status:rt,...at}:rr)),de(ht)};try{we(0,"active");const ht=FW();we(0,"complete",{data:`Token name: ${ht}`}),we(1,"active");const rt=new Be.Client("wss://s.altnet.rippletest.net:51233");await rt.connect(),we(1,"complete"),we(2,"active");const at=Be.Wallet.fromSeed($W),mt=Be.Wallet.fromSeed(UW);try{await rt.request({command:"account_info",account:at.address})}catch(di){if(((Ue=di.data)==null?void 0:Ue.error)==="actNotFound"){we(2,"error",{error:"Issuer wallet not funded"}),ge.error("Issuer wallet needs XRP. Please fund: "+at.address),await rt.disconnect(),w(!1);return}}try{await rt.request({command:"account_info",account:mt.address})}catch(di){if(((Ze=di.data)==null?void 0:Ze.error)==="actNotFound"){we(2,"error",{error:"Receiver wallet not funded"}),ge.error("Receiver wallet needs XRP. Please fund: "+mt.address),await rt.disconnect(),w(!1);return}}we(2,"complete"),we(3,"active");const rr={TransactionType:"TrustSet",Account:mt.address,LimitAmount:{currency:ht,issuer:at.address,value:"1000000"}},Rr=await rt.autofill(rr),Td=mt.sign(Rr),ci=await rt.submitAndWait(Td.tx_blob);if(ci.result.meta.TransactionResult!=="tesSUCCESS")throw we(3,"error",{error:ci.result.meta.TransactionResult}),new Error("Trust line creation failed: "+ci.result.meta.TransactionResult);we(3,"complete",{txHash:ci.result.hash}),we(4,"active");const ui={TransactionType:"Payment",Account:at.address,Destination:mt.address,Amount:{currency:ht,value:"1000000",issuer:at.address}},Gj=await rt.autofill(ui),Yj=at.sign(Gj),Da=await rt.submitAndWait(Yj.tx_blob);if(Da.result.meta.TransactionResult!=="tesSUCCESS")throw we(4,"error",{error:Da.result.meta.TransactionResult}),new Error("Token issuance failed: "+Da.result.meta.TransactionResult);we(4,"complete",{txHash:Da.result.hash}),we(5,"active");const{data:cc,error:Gm}=await Ae.from("meme_tokens").insert([{token_name:ht,currency_code:ht,issuer_address:at.address,receiver_address:mt.address,supply:1e6,tx_hash:Da.result.hash,status:"issued",amm_pool_created:!1}]).select().single();if(Gm)throw we(5,"error",{error:Gm.message}),Gm;await $y(cc.id),await Js({userAddress:at.address,actionType:Qs.TOKEN_CREATED,description:`Created random meme token "${ht}" with 1M supply`,details:{token_name:ht,supply:1e6,issuer:at.address},txHash:Da.result.hash,tokenId:cc.id}),we(5,"complete"),we(6,"active");try{const di={TransactionType:"AMMCreate",Account:mt.address,Amount:{currency:ht,value:"900000",issuer:at.address},Amount2:Be.xrpToDrops("1"),TradingFee:500},Jj=await rt.autofill(di),Qj=mt.sign(Jj),uc=await rt.submitAndWait(Qj.tx_blob);uc.result.meta.TransactionResult==="tesSUCCESS"?(await Ae.from("meme_tokens").update({amm_pool_created:!0,amm_tx_hash:uc.result.hash,amm_asset_amount:9e5,amm_xrp_amount:1,initial_asset_amount:9e5,initial_xrp_amount:1,status:"amm_created"}).eq("id",cc.id),await Js({userAddress:mt.address,actionType:Qs.AMM_CREATED,description:`Created AMM pool for ${ht} with 900K tokens and 1 XRP`,details:{token_name:ht,token_amount:9e5,xrp_amount:1},txHash:uc.result.hash,tokenId:cc.id}),we(6,"complete",{txHash:uc.result.hash})):we(6,"error",{error:uc.result.meta.TransactionResult})}catch(di){console.error("AMM creation error:",di),we(6,"error",{error:di.message})}await rt.disconnect(),we(7,"complete"),Ie(!0),X({name:ht,supply:1e6,issuer:at.address,receiver:mt.address,token:cc}),Pt()}catch(ht){console.error("Error creating token:",ht),ge.error(`Failed to create token: ${ht.message}`),ye(!1)}finally{w(!1),re("")}},nn=U=>{if(!U.amm_pool_created||!U.amm_xrp_amount||!U.amm_asset_amount)return 0;const we=U.amm_xrp_amount/U.amm_asset_amount;return(U.supply*we).toFixed(4)},ks=U=>{const we=n[U.id];return we?we.price.toFixed(8):!U.amm_pool_created||!U.amm_xrp_amount||!U.amm_asset_amount?0:(U.amm_xrp_amount/U.amm_asset_amount).toFixed(8)},Ma=U=>{const we=n[U.id];return we?(we.xrpAmount*.15).toFixed(2):U.amm_pool_created?((U.amm_xrp_amount||0)*.15).toFixed(2):"-"},xe=U=>{const we=n[U.id];if(!we||!we.price)return"0.00";const Ue=parseFloat(U.initial_xrp_amount)||parseFloat(U.amm_xrp_amount),Ze=parseFloat(U.initial_asset_amount)||parseFloat(U.amm_asset_amount);if(!Ue||!Ze||Ze===0)return"0.00";const ht=we.price,rt=Ue/Ze;return!rt||rt===0?"0.00":((ht-rt)/rt*100).toFixed(2)},je=U=>{const we=ks(U),Ue=nn(U),Ze=At.Buffer.from(U.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"),ht=`https://xrpl.services/?issuer=${U.issuer_address}&currency=${Ze}&limit=${U.supply}`,rt=`https://xmagnetic.org/dex/${U.currency_code}+${U.issuer_address}_XRP+XRP?network=mainnet`,at=` ${U.token_name} Token Info

 Supply: ${U.supply.toLocaleString()}
 Price: ${we} XRP
 Market Cap: ${Ue} XRP
 XRP Locked: ${U.amm_xrp_amount||0} XRP
 Status: ${U.amm_pool_created?"AMM Pool Active":"Pending"}

 Trust Line:
${ht}

 Trade on Magnetic:
${rt}

MORE #MEME COINS @ MEMEKINGS.ONLINE

#XRPL #Crypto`,mt=`https://twitter.com/intent/tweet?text=${encodeURIComponent(at)}`;window.open(mt,"_blank","width=550,height=420")},De=(U,we=null)=>{Te({type:U,token:we}),ae(!0),fe("")},Fe=async()=>{if(oe!=="divercity"){ge.error("Incorrect admin password!");return}try{if(_e.type==="delete"){const{error:U}=await Ae.from("meme_tokens").delete().eq("id",_e.token.id);if(U)throw U;ge.success(`Token ${_e.token.token_name} deleted!`)}else if(_e.type==="edit"){$e({..._e.token,is_featured:_e.token.is_featured||!1,featured_order:_e.token.featured_order||null}),j(null),S(null),ae(!1);return}ae(!1),fe(""),Te(null),Pt()}catch(U){console.error("Admin action error:",U),ge.error("Failed to execute action")}},Ye=U=>{const we=U.target.files[0];if(we){j(we);const Ue=new FileReader;Ue.onloadend=()=>{S(Ue.result)},Ue.readAsDataURL(we)}},nt=async()=>{if(oe!=="divercity"){ge.error("Incorrect admin password!");return}try{le(!0);let U=Ne.image_url;Ge&&(ge.loading("Uploading image to IPFS..."),U=await Uf(Ge),ge.dismiss(),ge.success("Image uploaded successfully!")),Ne.is_featured&&Ne.featured_order?await _S(Ne.id,Ne.featured_order):Ne.is_featured===!1&&await _S(Ne.id,null);const we={token_name:Ne.token_name,supply:parseFloat(Ne.supply),amm_xrp_amount:parseFloat(Ne.amm_xrp_amount),amm_asset_amount:parseFloat(Ne.amm_asset_amount),image_url:U,updated_at:new Date().toISOString()},{data:Ue,error:Ze}=await Ae.from("meme_tokens").update(we).eq("id",Ne.id).select();if(Ze)throw Ze;const ht=Ue[0];e(rt=>rt.map(at=>at.id===Ne.id?{...ht}:at)),BW(Ne.id),$e(null),fe(""),j(null),S(null),ge.success("Token updated successfully!"),setTimeout(()=>{Pt()},1e3)}catch(U){console.error("Update error:",U),ge.error("Failed to update token: "+U.message)}finally{le(!1)}},Xe=t.filter(U=>{const we=U.token_name.toLowerCase().includes(ve.toLowerCase())||U.issuer_address.toLowerCase().includes(ve.toLowerCase()),Ue=Pe==="all"||Pe==="active"&&U.amm_pool_created||Pe==="pending"&&!U.amm_pool_created,Ze=nr==="all"||nr==="memeking"&&U.issuer_address===Ah||nr==="user"&&U.issuer_address!==Ah;return we&&Ue&&Ze}).sort((U,we)=>{switch(qe){case"newest":return new Date(we.created_at)-new Date(U.created_at);case"oldest":return new Date(U.created_at)-new Date(we.created_at);case"marketcap":return parseFloat(nn(we))-parseFloat(nn(U));case"supply":return we.supply-U.supply;default:return 0}}),dt=Math.ceil(Xe.length/pn),Ke=Xe.slice((ut-1)*pn,ut*pn),Mn=t.filter(U=>U.issuer_address===Ah),xr=t.filter(U=>U.issuer_address!==Ah),Nn=[...t].filter(U=>U.is_featured===!0&&U.amm_pool_created).sort((U,we)=>(U.featured_order||999)-(we.featured_order||999)).slice(0,3),Tn=({token:U,featured:we=!1})=>o.jsxs("div",{className:`glass rounded-lg p-6 space-y-4 hover:scale-105 transition-transform cursor-pointer ${we?"border-2 border-purple-500/50":""}`,onClick:()=>k(U),children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Lt,{token:U,size:we?"lg":"md"}),o.jsxs("div",{children:[o.jsx("h3",{className:`${we?"text-2xl":"text-xl"} font-bold text-purple-200`,children:U.token_name}),o.jsx("p",{className:"text-purple-400 text-sm",children:U.currency_code})]})]}),U.amm_pool_created&&o.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-bold ${parseFloat(xe(U))>=0?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:[parseFloat(xe(U))>=0?"+":"",xe(U),"%"]}),!U.amm_pool_created&&o.jsx("div",{className:"px-3 py-1 rounded-full text-xs font-medium bg-yellow-500/20 text-yellow-400",children:" Pending"})]}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400 text-xs",children:"Live Price"}),o.jsxs("span",{className:"text-purple-200 text-sm font-bold",children:[ks(U)," XRP"]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400 text-xs",children:"Volume 24h"}),o.jsx("span",{className:"text-purple-200 text-sm font-bold",children:U.amm_pool_created?`${Ma(U)} XRP`:"-"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400 text-xs",children:"Your LP"}),o.jsx("span",{className:"text-green-400 text-sm font-bold",children:s[U.id]?parseFloat(s[U.id]).toFixed(4):"-"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400 text-xs",children:"Market Cap (Live)"}),o.jsxs("span",{className:"text-purple-200 text-sm font-bold font-mono",children:[nn(U)," XRP"]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400 text-xs",children:"XRP Locked (Live)"}),o.jsxs("span",{className:"text-purple-200 text-sm font-bold font-mono",children:[U.amm_xrp_amount?U.amm_xrp_amount.toFixed(2):"0.00"," XRP"]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400 text-xs",children:"Total Supply"}),o.jsx("span",{className:"text-purple-200 text-sm font-bold",children:U.supply.toLocaleString()})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-3 border-t border-purple-500/20",children:[o.jsx("a",{href:`https://xrpl.services/?issuer=${U.issuer_address}&currency=${U.currency_code}&limit=1000000000`,target:"_blank",rel:"noopener noreferrer",className:"bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white font-bold text-xs px-3 py-2 rounded text-center shadow-lg",onClick:Ue=>{Ue.stopPropagation()},children:" Trust"}),o.jsx("button",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white font-bold text-xs px-3 py-2 rounded text-center shadow-lg",onClick:Ue=>{Ue.stopPropagation(),localStorage.setItem("selectedTradeToken",JSON.stringify(U)),window.dispatchEvent(new CustomEvent("navigateToTrade",{detail:U}))},children:" Swap"}),o.jsx("button",{className:"col-span-2 bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white font-bold text-xs px-3 py-2 rounded shadow-lg shadow-purple-500/50 hover:shadow-purple-500/70",onClick:Ue=>{Ue.stopPropagation(),je(U)},children:" Post on X"})]})]}),is=({token:U})=>o.jsxs("tr",{className:"border-t border-purple-500/20 hover:bg-purple-900/20 cursor-pointer",onClick:()=>k(U),children:[o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Lt,{token:U,size:"sm"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-purple-200",children:U.token_name}),o.jsx("div",{className:"text-purple-400 text-xs",children:U.currency_code})]})]})}),o.jsx("td",{className:"px-4 py-3 text-purple-300 text-xs",children:U.supply.toLocaleString()}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-purple-200 font-mono text-xs",children:ks(U)}),U.amm_pool_created&&o.jsxs("span",{className:`text-xs font-medium px-1.5 py-0.5 rounded whitespace-nowrap ${parseFloat(xe(U))>=0?"text-green-300 bg-green-500/10":"text-red-300 bg-red-500/10"}`,children:[parseFloat(xe(U))>=0?"+":"",xe(U),"%"]})]})}),o.jsx("td",{className:"px-4 py-3 text-purple-200 text-xs",children:U.amm_pool_created?`${Ma(U)} XRP`:"-"}),o.jsx("td",{className:"px-4 py-3 text-green-400 text-xs font-bold",children:s[U.id]?parseFloat(s[U.id]).toFixed(4):"-"}),o.jsxs("td",{className:"px-4 py-3 text-purple-200 text-xs font-mono",children:[nn(U)," XRP"]}),o.jsxs("td",{className:"px-4 py-3 text-purple-300 text-xs font-mono",children:[U.amm_xrp_amount?U.amm_xrp_amount.toFixed(2):"0.00"," XRP"]}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${U.amm_pool_created?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:U.amm_pool_created?"":""})}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex gap-1 flex-wrap",children:[o.jsx("a",{href:`https://xrpl.services/?issuer=${U.issuer_address}&currency=${U.currency_code}&limit=1000000000`,target:"_blank",rel:"noopener noreferrer",className:"bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white font-bold text-xs px-2 py-1 rounded shadow-md",onClick:we=>{we.stopPropagation()},title:"Setup Trustline",children:" Trust"}),o.jsx("button",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white font-bold text-xs px-2 py-1 rounded shadow-md",onClick:we=>{we.stopPropagation(),localStorage.setItem("selectedTradeToken",JSON.stringify(U)),window.dispatchEvent(new CustomEvent("navigateToTrade",{detail:U}))},title:"Trade on AMM",children:" Swap"}),o.jsx("button",{className:"bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white font-bold text-xs px-2 py-1 rounded shadow-md shadow-purple-500/50 hover:shadow-purple-500/70",onClick:we=>{we.stopPropagation(),je(U)},title:"Post on X",children:" Post"})]})}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex gap-1",children:[o.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white text-xs px-2 py-1 rounded",onClick:we=>{we.stopPropagation(),De("edit",U)},title:"Edit Token",children:""}),o.jsx("button",{className:"bg-red-600 hover:bg-red-700 text-white text-xs px-2 py-1 rounded",onClick:we=>{we.stopPropagation(),De("delete",U)},title:"Delete Token",children:""})]})})]});return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-purple-200",children:"Dashboard"}),o.jsx("p",{className:"text-purple-400 mt-1",children:"Meme token factory control center"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("button",{onClick:async()=>{if(!a){ge.error("Please connect a wallet first");return}O(!0),W(!0);try{const{data:U,error:we}=await Ae.from("activity_logs").select("*").eq("user_address",a.address).order("created_at",{ascending:!1}).limit(50);if(we)throw we;F(U||[])}catch(U){console.error("Error loading activities:",U),ge.error("Failed to load activities")}finally{W(!1)}},className:"btn text-purple-300 px-4 py-3 rounded-lg font-medium flex items-center gap-2",children:[o.jsx("span",{children:""})," Activity"]}),o.jsxs("a",{href:"https://x.com/MEMEKINGSXRPL",target:"_blank",rel:"noopener noreferrer",className:"btn text-white px-4 py-3 rounded-lg font-medium flex items-center gap-2 relative overflow-hidden group animate-glow",style:{background:"linear-gradient(135deg, #9333ea 0%, #7e22ce 100%)",boxShadow:"0 0 20px rgba(147, 51, 234, 0.5)"},children:[o.jsx("span",{className:"text-xl",children:""})," Twitter"]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Total Tokens"}),o.jsx("div",{className:"text-3xl font-bold text-green-400",children:c.totalTokens}),_>0&&o.jsxs("div",{className:"text-green-300 text-sm mt-1",children:["+",_," (",_>0?"+":"",(_/c.totalTokens*100).toFixed(1),"%)"]}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Last 24h"})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Total XRP Locked (Live)"}),o.jsx("div",{className:"text-3xl font-bold text-green-400",children:f.totalXrpLocked.toFixed(2)}),o.jsxs("div",{className:"text-green-300 text-sm mt-1",children:["$",(f.totalXrpLocked*d).toFixed(2)," USD"]}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"In AMM pools from XRPL"})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Total Market Cap (Live)"}),o.jsx("div",{className:"text-3xl font-bold text-green-400",children:f.totalMarketCap.toFixed(2)}),o.jsxs("div",{className:"text-green-300 text-sm mt-1",children:["$",(f.totalMarketCap*d).toFixed(2)," USD"]}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"XRP value from XRPL"})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Total Holders (Live)"}),o.jsx("div",{className:"text-3xl font-bold text-green-400",children:y.totalTrustlines.toLocaleString()}),y.holders24hAgo>0&&o.jsxs("div",{className:`text-sm mt-1 ${y.totalHolders>y.holders24hAgo?"text-green-300":y.totalHolders<y.holders24hAgo?"text-red-300":"text-purple-400"}`,children:[y.totalHolders>y.holders24hAgo?"+":"",((y.totalHolders-y.holders24hAgo)/y.holders24hAgo*100).toFixed(1),"% holders"]}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Last 24h"})]})]}),Nn.length>0&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200",children:" Top 3 Featured Tokens"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>ee("grid"),className:`px-4 py-2 rounded-lg transition-all text-sm ${se==="grid"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:" Grid"}),o.jsx("button",{onClick:()=>ee("list"),className:`px-4 py-2 rounded-lg transition-all text-sm ${se==="list"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:" List"})]})]}),se==="grid"?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Nn.map(U=>o.jsx(Tn,{token:U,featured:!0},U.id))}):o.jsx("div",{className:"overflow-x-auto glass rounded-lg p-4",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-purple-900/30",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Token"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Supply"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Live Price"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Volume 24h"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Your LP"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Market Cap (Live)"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"XRP Locked (Live)"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Status"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Actions"})]})}),o.jsx("tbody",{children:Nn.map(U=>o.jsx(is,{token:U},U.id))})]})})]}),o.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[o.jsx("button",{onClick:()=>Dt("all"),className:`px-6 py-3 rounded-lg transition-all font-medium text-lg ${Mt==="all"?"bg-purple-600 text-white shadow-lg":"glass text-purple-300 hover:bg-purple-900/30"}`,children:"All Tokens"}),o.jsx("button",{onClick:()=>Dt("user"),className:`px-6 py-3 rounded-lg transition-all font-medium text-lg ${Mt==="user"?"bg-purple-600 text-white shadow-lg":"glass text-purple-300 hover:bg-purple-900/30"}`,children:"User Tokens"})]}),Mt==="all"&&o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200",children:"All Tokens"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>he("list"),className:`px-4 py-2 rounded-lg transition-all ${ne==="list"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:" List"}),o.jsx("button",{onClick:()=>he("grid"),className:`px-4 py-2 rounded-lg transition-all ${ne==="grid"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:" Grid"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-6",children:[o.jsx("input",{type:"text",placeholder:" Search tokens...",value:ve,onChange:U=>He(U.target.value),className:"input text-purple-200 md:col-span-2"}),o.jsxs("select",{value:Pe,onChange:U=>Re(U.target.value),className:"input text-purple-200",children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"active",children:"Active Only"}),o.jsx("option",{value:"pending",children:"Pending Only"})]}),o.jsxs("select",{value:qe,onChange:U=>Qe(U.target.value),className:"input text-purple-200",children:[o.jsx("option",{value:"newest",children:"Newest First"}),o.jsx("option",{value:"oldest",children:"Oldest First"}),o.jsx("option",{value:"marketcap",children:"Market Cap"}),o.jsx("option",{value:"supply",children:"Supply"})]})]}),o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"text-purple-400 text-sm",children:["Showing ",(ut-1)*pn+1,"-",Math.min(ut*pn,Xe.length)," of ",Xe.length," tokens"]}),dt>1&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>zt(U=>Math.max(1,U-1)),disabled:ut===1,className:"px-3 py-1 btn text-purple-300 rounded disabled:opacity-50",children:"Previous"}),o.jsxs("span",{className:"text-purple-300 text-sm",children:["Page ",ut," of ",dt]}),o.jsx("button",{onClick:()=>zt(U=>Math.min(dt,U+1)),disabled:ut===dt,className:"px-3 py-1 btn text-purple-300 rounded disabled:opacity-50",children:"Next"})]})]}),ne==="grid"?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Ke.map(U=>o.jsx(Tn,{token:U},U.id))}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-purple-900/30",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Token"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Supply"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Live Price"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Volume 24h"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Your LP"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Market Cap (Live)"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"XRP Locked (Live)"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Status"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Actions"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Admin"})]})}),o.jsx("tbody",{children:Ke.map(U=>o.jsx(is,{token:U},U.id))})]})})]}),Mt==="memeking_disabled"&&o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200",children:"MemeKing Tokens"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>he("list"),className:`px-4 py-2 rounded-lg transition-all ${ne==="list"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:" List"}),o.jsx("button",{onClick:()=>he("grid"),className:`px-4 py-2 rounded-lg transition-all ${ne==="grid"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:" Grid"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-6",children:[o.jsx("input",{type:"text",placeholder:" Search tokens...",value:ve,onChange:U=>He(U.target.value),className:"input text-purple-200 md:col-span-2"}),o.jsxs("select",{value:Pe,onChange:U=>Re(U.target.value),className:"input text-purple-200",children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"active",children:"Active Only"}),o.jsx("option",{value:"pending",children:"Pending Only"})]}),o.jsxs("select",{value:qe,onChange:U=>Qe(U.target.value),className:"input text-purple-200",children:[o.jsx("option",{value:"newest",children:"Newest First"}),o.jsx("option",{value:"oldest",children:"Oldest First"}),o.jsx("option",{value:"marketcap",children:"Market Cap"}),o.jsx("option",{value:"supply",children:"Supply"})]})]}),o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsxs("div",{className:"text-purple-400 text-sm",children:["Showing ",Mn.filter(U=>{const we=U.token_name.toLowerCase().includes(ve.toLowerCase())||U.issuer_address.toLowerCase().includes(ve.toLowerCase()),Ue=Pe==="all"||Pe==="active"&&U.amm_pool_created||Pe==="pending"&&!U.amm_pool_created;return we&&Ue}).length," of ",Mn.length," MemeKing tokens"]})}),ne==="grid"?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Mn.filter(U=>{const we=U.token_name.toLowerCase().includes(ve.toLowerCase())||U.issuer_address.toLowerCase().includes(ve.toLowerCase()),Ue=Pe==="all"||Pe==="active"&&U.amm_pool_created||Pe==="pending"&&!U.amm_pool_created;return we&&Ue}).sort((U,we)=>{var Ue,Ze;switch(qe){case"oldest":return new Date(U.created_at)-new Date(we.created_at);case"marketcap":return(((Ue=n[we.id])==null?void 0:Ue.marketCap)||0)-(((Ze=n[U.id])==null?void 0:Ze.marketCap)||0);case"supply":return we.supply-U.supply;default:return new Date(we.created_at)-new Date(U.created_at)}}).map(U=>renderTokenCard(U))}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-purple-500/20",children:[o.jsx("th",{className:"text-left py-3 px-4 text-purple-300",children:"Token"}),o.jsx("th",{className:"text-left py-3 px-4 text-purple-300",children:"Supply"}),o.jsx("th",{className:"text-left py-3 px-4 text-purple-300",children:"XRP Locked (Live)"}),o.jsx("th",{className:"text-left py-3 px-4 text-purple-300",children:"Price"}),o.jsx("th",{className:"text-left py-3 px-4 text-purple-300",children:"Market Cap (Live)"}),o.jsx("th",{className:"text-left py-3 px-4 text-purple-300",children:"Status"}),o.jsx("th",{className:"text-left py-3 px-4 text-purple-300",children:"Actions"})]})}),o.jsx("tbody",{children:Mn.filter(U=>{const we=U.token_name.toLowerCase().includes(ve.toLowerCase())||U.issuer_address.toLowerCase().includes(ve.toLowerCase()),Ue=Pe==="all"||Pe==="active"&&U.amm_pool_created||Pe==="pending"&&!U.amm_pool_created;return we&&Ue}).sort((U,we)=>{var Ue,Ze;switch(qe){case"oldest":return new Date(U.created_at)-new Date(we.created_at);case"marketcap":return(((Ue=n[we.id])==null?void 0:Ue.marketCap)||0)-(((Ze=n[U.id])==null?void 0:Ze.marketCap)||0);case"supply":return we.supply-U.supply;default:return new Date(we.created_at)-new Date(U.created_at)}}).map(U=>o.jsx(is,{token:U},U.id))})]})})]}),Mt==="user"&&o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200",children:"User Created Tokens"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>he("list"),className:`px-4 py-2 rounded-lg transition-all ${ne==="list"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:" List"}),o.jsx("button",{onClick:()=>he("grid"),className:`px-4 py-2 rounded-lg transition-all ${ne==="grid"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:" Grid"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-6",children:[o.jsx("input",{type:"text",placeholder:" Search tokens...",value:ve,onChange:U=>He(U.target.value),className:"input text-purple-200 md:col-span-2"}),o.jsxs("select",{value:Pe,onChange:U=>Re(U.target.value),className:"input text-purple-200",children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"active",children:"Active Only"}),o.jsx("option",{value:"pending",children:"Pending Only"})]}),o.jsxs("select",{value:qe,onChange:U=>Qe(U.target.value),className:"input text-purple-200",children:[o.jsx("option",{value:"newest",children:"Newest First"}),o.jsx("option",{value:"oldest",children:"Oldest First"}),o.jsx("option",{value:"marketcap",children:"Market Cap"}),o.jsx("option",{value:"supply",children:"Supply"})]})]}),o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsxs("div",{className:"text-purple-400 text-sm",children:["Showing ",xr.filter(U=>{const we=U.token_name.toLowerCase().includes(ve.toLowerCase())||U.issuer_address.toLowerCase().includes(ve.toLowerCase()),Ue=Pe==="all"||Pe==="active"&&U.amm_pool_created||Pe==="pending"&&!U.amm_pool_created;return we&&Ue}).length," of ",xr.length," user tokens"]})}),ne==="grid"?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:xr.filter(U=>{const we=U.token_name.toLowerCase().includes(ve.toLowerCase())||U.issuer_address.toLowerCase().includes(ve.toLowerCase()),Ue=Pe==="all"||Pe==="active"&&U.amm_pool_created||Pe==="pending"&&!U.amm_pool_created;return we&&Ue}).sort((U,we)=>{switch(qe){case"newest":return new Date(we.created_at)-new Date(U.created_at);case"oldest":return new Date(U.created_at)-new Date(we.created_at);case"marketcap":return parseFloat(nn(we))-parseFloat(nn(U));case"supply":return we.supply-U.supply;default:return 0}}).map(U=>o.jsx(Tn,{token:U},U.id))}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-purple-900/30",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Token"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Supply"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Starting Price"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Live Price"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Volume 24h"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Your LP"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Starting Cap"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Starting XRP"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Status"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Actions"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Admin"})]})}),o.jsx("tbody",{children:xr.filter(U=>{const we=U.token_name.toLowerCase().includes(ve.toLowerCase())||U.issuer_address.toLowerCase().includes(ve.toLowerCase()),Ue=Pe==="all"||Pe==="active"&&U.amm_pool_created||Pe==="pending"&&!U.amm_pool_created;return we&&Ue}).sort((U,we)=>{switch(qe){case"newest":return new Date(we.created_at)-new Date(U.created_at);case"oldest":return new Date(U.created_at)-new Date(we.created_at);case"marketcap":return parseFloat(nn(we))-parseFloat(nn(U));case"supply":return we.supply-U.supply;default:return 0}}).map(U=>o.jsx(is,{token:U},U.id))})]})})]}),Q&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-8 max-w-md w-full",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-4",children:"Password Required"}),o.jsx("p",{className:"text-purple-300 mb-6",children:"Enter password to add a token manually to the dashboard."}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Password"}),o.jsx("input",{type:"password",value:V,onChange:U=>H(U.target.value),onKeyPress:U=>U.key==="Enter"&&tn(),className:"input w-full text-purple-200",placeholder:"Enter password",autoFocus:!0})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:tn,className:"btn-primary text-white px-6 py-2 rounded-lg font-medium flex-1",children:"Continue"}),o.jsx("button",{onClick:()=>{ue(!1),H("")},className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium",children:"Cancel"})]})]})}),v&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:"Add Token Manually"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Token Name *"}),o.jsx("input",{type:"text",value:R.name,onChange:U=>C({...R,name:U.target.value}),className:"input w-full text-purple-200",placeholder:"KOOL"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Issuer Address *"}),o.jsx("input",{type:"text",value:R.issuer,onChange:U=>C({...R,issuer:U.target.value}),className:"input w-full text-purple-200 font-mono",placeholder:"rXXXXXXXXXXXXXXXXXXXXXXXXXXXX"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Total Supply"}),o.jsx("input",{type:"number",value:R.supply,onChange:U=>C({...R,supply:U.target.value}),className:"input w-full text-purple-200",placeholder:"1000000"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"XRP Locked (for market cap calc)"}),o.jsx("input",{type:"number",step:"0.01",value:R.xrpLocked,onChange:U=>C({...R,xrpLocked:U.target.value}),className:"input w-full text-purple-200",placeholder:"1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Token Image (Optional)"}),o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("input",{type:"file",accept:"image/*",onChange:Sn,className:"input w-full text-purple-200"}),o.jsx("p",{className:"text-purple-400 text-xs mt-1",children:"Upload an image for the token icon"})]}),$&&o.jsx("div",{className:"w-20 h-20 rounded-lg border-2 border-purple-500/30 overflow-hidden",children:o.jsx("img",{src:$,alt:"Preview",className:"w-full h-full object-cover"})})]})]})]}),o.jsxs("div",{className:"flex gap-3 mt-6",children:[o.jsx("button",{onClick:To,disabled:q,className:"btn-primary text-white px-6 py-2 rounded-lg font-medium flex-1 disabled:opacity-50",children:q?"Uploading...":"Add Token"}),o.jsx("button",{onClick:()=>{T(!1),C({name:"",issuer:"",supply:"1000000",xrpLocked:"1"}),L(null),ie(null)},className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium",children:"Cancel"})]})]})}),N&&o.jsx(Zw,{token:N,onClose:()=>k(null)}),Z&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-8 max-w-md w-full",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-4",children:"Admin Access Required"}),o.jsx("p",{className:"text-purple-300 mb-6",children:(_e==null?void 0:_e.type)==="delete"?`Delete token "${(Nd=_e==null?void 0:_e.token)==null?void 0:Nd.token_name}"?`:`Edit token "${(eb=_e==null?void 0:_e.token)==null?void 0:eb.token_name}"?`}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Admin Password"}),o.jsx("input",{type:"password",value:oe,onChange:U=>fe(U.target.value),onKeyPress:U=>U.key==="Enter"&&Fe(),className:"input w-full text-purple-200",placeholder:"Enter admin password",autoFocus:!0})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:Fe,className:"btn-primary text-white px-6 py-2 rounded-lg font-medium flex-1",children:"Confirm"}),o.jsx("button",{onClick:()=>{ae(!1),fe(""),Te(null)},className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium",children:"Cancel"})]})]})}),E&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-8 max-w-md w-full",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-4",children:"Create Random Meme Token"}),o.jsx("p",{className:"text-purple-300 mb-6",children:"This will generate a random meme token with a 3-5 letter name, issue 1M tokens, and create an AMM pool with 1 XRP."}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Password Required"}),o.jsx("input",{type:"password",value:te,onChange:U=>re(U.target.value),onKeyPress:U=>U.key==="Enter"&&Ln(),className:"input w-full text-purple-200",placeholder:"Enter password to create token",autoFocus:!0})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:Ln,className:"btn-primary text-white px-6 py-2 rounded-lg font-medium flex-1",children:"Create Token"}),o.jsx("button",{onClick:()=>{D(!1),re("")},className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium",children:"Cancel"})]})]})}),ce&&z&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-8 max-w-md w-full",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("div",{className:"text-6xl mb-4",children:""}),o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-2",children:"Token Created Successfully!"}),o.jsx("p",{className:"text-purple-300 text-lg font-bold",children:z.token_name}),o.jsx("p",{className:"text-purple-400 text-sm mt-2",children:"Your meme token is now live on the XRPL!"})]}),o.jsxs("div",{className:"space-y-3 mb-6",children:[o.jsx("a",{href:`https://testnet.xrpl.org/transactions/${z.tx_hash}`,target:"_blank",rel:"noopener noreferrer",className:"btn-primary text-white w-full px-6 py-3 rounded-lg font-medium text-center block",children:"View on XRPL Explorer"}),o.jsx("a",{href:`https://xmagnetic.org/amm/${z.currency_code}+${z.issuer_address}_XRP+XRP?network=testnet`,target:"_blank",rel:"noopener noreferrer",className:"btn text-purple-300 w-full px-6 py-3 rounded-lg font-medium text-center block",children:"AMM Pool"}),o.jsx("a",{href:`https://xmagnetic.org/dex/${z.currency_code}+${z.issuer_address}_XRP+XRP?network=testnet`,target:"_blank",rel:"noopener noreferrer",className:"btn text-purple-300 w-full px-6 py-3 rounded-lg font-medium text-center block",children:"Trade on Magnetic DEX"}),o.jsx("button",{onClick:()=>{k(z),pe(!1),J(null)},className:"btn text-purple-300 w-full px-6 py-3 rounded-lg font-medium",children:"View Token Details"})]}),o.jsx("button",{onClick:()=>{pe(!1),J(null)},className:"btn text-purple-400 w-full px-6 py-2 rounded-lg font-medium",children:"Close"})]})}),Ne&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-8 max-w-2xl w-full",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:"Edit Token"}),o.jsxs("div",{className:"space-y-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Token Name"}),o.jsx("input",{type:"text",value:Ne.token_name,onChange:U=>$e({...Ne,token_name:U.target.value}),className:"input w-full text-purple-200"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Total Supply"}),o.jsx("input",{type:"number",value:Ne.supply,onChange:U=>$e({...Ne,supply:U.target.value}),className:"input w-full text-purple-200"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"XRP Locked"}),o.jsx("input",{type:"number",step:"0.01",value:Ne.amm_xrp_amount||0,onChange:U=>$e({...Ne,amm_xrp_amount:U.target.value}),className:"input w-full text-purple-200"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Asset Amount in Pool"}),o.jsx("input",{type:"number",value:Ne.amm_asset_amount||0,onChange:U=>$e({...Ne,amm_asset_amount:U.target.value}),className:"input w-full text-purple-200"})]}),o.jsxs("div",{className:"border-t border-purple-500/20 pt-4",children:[o.jsx("label",{className:"block text-purple-300 mb-3",children:"Featured Token Position"}),o.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[o.jsx("button",{type:"button",onClick:()=>{console.log("Setting to None"),$e(U=>({...U,is_featured:!1,featured_order:null}))},className:`px-4 py-2 rounded-lg transition-colors ${!Ne.is_featured||Ne.is_featured===!1?"bg-purple-600 text-white":"glass text-purple-300 hover:bg-purple-500/20"}`,children:"None"}),[1,2,3].map(U=>o.jsxs("button",{type:"button",onClick:()=>{console.log("Setting to position:",U),$e(we=>({...we,is_featured:!0,featured_order:U}))},className:`px-4 py-2 rounded-lg transition-colors ${Ne.is_featured===!0&&Ne.featured_order===U?"bg-purple-600 text-white":"glass text-purple-300 hover:bg-purple-500/20"}`,children:["Top ",U]},U))]}),o.jsxs("p",{className:"text-purple-400 text-xs mt-2",children:["Current: is_featured=",String(Ne.is_featured),", order=",Ne.featured_order||"null"," -",Ne.is_featured===!0&&Ne.featured_order?` This token will appear in position ${Ne.featured_order} on the featured list`:" This token will not be featured"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Token Icon"}),o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("input",{type:"file",accept:"image/*",onChange:Ye,className:"input w-full text-purple-200"},Ne.id),o.jsx("p",{className:"text-purple-400 text-xs mt-1",children:"Upload new image or leave blank to keep current"})]}),(g||Ne.image_url)&&o.jsxs("div",{className:"w-20 h-20 rounded-lg border-2 border-purple-500/30 overflow-hidden bg-gradient-to-br from-purple-900 to-purple-800 flex items-center justify-center",children:[o.jsx("img",{src:g||Ne.image_url,alt:"Preview",className:"w-full h-full object-cover",onError:U=>{U.target.style.display="none"}}),!g&&!Ne.image_url&&o.jsx("span",{className:"text-3xl",children:Ne.token_name[0]})]})]})]}),o.jsxs("div",{className:"border-t border-purple-500/20 pt-4",children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Confirm Admin Password"}),o.jsx("input",{type:"password",value:oe,onChange:U=>fe(U.target.value),onKeyPress:U=>U.key==="Enter"&&nt(),className:"input w-full text-purple-200",placeholder:"Enter admin password to save"})]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:nt,className:"btn-primary text-white px-6 py-2 rounded-lg font-medium flex-1",children:"Save Changes"}),o.jsx("button",{onClick:()=>{$e(null),fe("")},className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium",children:"Cancel"})]})]})},Ne.id),me&&o.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg max-w-2xl w-full p-8",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:be?" Token Created Successfully!":" Creating Random Meme Token"}),o.jsx("div",{className:"space-y-4 mb-6",children:We.map((U,we)=>o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold",children:U.status==="complete"?o.jsx("div",{className:"text-green-400 text-2xl",children:""}):U.status==="active"?o.jsx("div",{className:"w-6 h-6 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"}):U.status==="error"?o.jsx("div",{className:"text-red-400 text-2xl",children:""}):o.jsx("div",{className:"w-6 h-6 border-2 border-purple-900 rounded-full"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:`font-medium ${U.status==="complete"?"text-green-400":U.status==="active"?"text-purple-200":U.status==="error"?"text-red-400":"text-purple-500"}`,children:U.title}),U.data&&o.jsx("div",{className:"text-sm text-purple-400 mt-1",children:U.data}),U.txHash&&o.jsx("a",{href:`https://testnet.xrpl.org/transactions/${U.txHash}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-400 hover:text-blue-300 mt-1 inline-block",children:"View Transaction "}),U.error&&o.jsxs("div",{className:"text-sm text-red-400 mt-1",children:["Error: ",U.error]})]})]},we))}),be&&Ce&&o.jsx("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-6 mb-6",children:o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-green-400 mb-1",children:"Token Name"}),o.jsx("div",{className:"text-green-200 font-bold text-lg",children:Ce.name})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-green-400 mb-1",children:"Supply"}),o.jsx("div",{className:"text-green-200 font-mono",children:Ce.supply.toLocaleString()})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-green-400 mb-1",children:"Issuer"}),o.jsxs("div",{className:"text-green-200 font-mono text-xs",children:[Ce.issuer.substring(0,20),"..."]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-green-400 mb-1",children:"Status"}),o.jsx("div",{className:"text-green-200",children:" AMM Pool Created"})]})]})}),be&&o.jsx("button",{onClick:()=>{ye(!1),ze([]),X(null)},className:"btn-primary text-white px-6 py-3 rounded-lg font-medium w-full",children:"Close"}),!be&&o.jsx("div",{className:"text-center text-purple-400 text-sm",children:"Please wait while we create your token..."})]})}),B&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg max-w-4xl w-full max-h-[80vh] overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-purple-500/20",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200",children:"My App Activity"}),o.jsx("button",{onClick:()=>O(!1),className:"text-purple-400 hover:text-purple-200 text-2xl",children:""})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:Y?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-4xl mb-4 animate-pulse",children:""}),o.jsx("div",{className:"text-purple-200",children:"Loading activities..."})]}):P.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-6xl mb-4",children:""}),o.jsx("h4",{className:"text-xl font-bold text-purple-200 mb-2",children:"No Activity Yet"}),o.jsx("p",{className:"text-purple-400",children:"Your app activity will appear here"})]}):o.jsx("div",{className:"space-y-3",children:P.map(U=>o.jsx("div",{className:"glass rounded-lg p-4 border-l-4 border-green-500",children:o.jsx("div",{className:"flex items-start justify-between gap-4",children:o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-purple-200 font-medium mb-1",children:U.action_type.replace(/_/g," ").replace(/\b\w/g,we=>we.toUpperCase())}),o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:U.description}),U.details&&Object.keys(U.details).length>0&&o.jsxs("div",{className:"flex flex-wrap gap-3 text-xs",children:[U.details.amount&&o.jsxs("span",{className:"text-purple-300",children:["Amount: ",U.details.amount]}),U.details.xrpCost&&o.jsxs("span",{className:"text-purple-300",children:["XRP: ",U.details.xrpCost]}),U.details.tradeType&&o.jsx("span",{className:`px-2 py-1 rounded ${U.details.tradeType==="BUY"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:U.details.tradeType})]}),o.jsxs("div",{className:"flex items-center gap-3 mt-3 text-xs text-purple-500",children:[o.jsx("span",{children:new Date(U.created_at).toLocaleString()}),U.tx_hash&&o.jsx("a",{href:`https://testnet.xrpl.org/transactions/${U.tx_hash}`,target:"_blank",rel:"noopener noreferrer",className:"text-purple-400 hover:text-purple-300",children:"View TX"})]})]})})},U.id))})})]})})]})}function Hj({isOpen:t,steps:e,currentStep:n,onClose:r,canClose:s,title:i,successTitle:a,failTitle:l}){if(!t)return null;const c=b=>b<n?"completed":b===n?"active":"pending",u=b=>b==="completed"?"":b==="active"?"":"",d=e.filter((b,_)=>_<=n).length,h=Math.min(100,d/e.length*100),f=i||" Creating Token on XRPL",p=a||" Token Created Successfully!",y=l||" Token Creation Failed";return o.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto relative",children:[o.jsx("button",{onClick:r,className:"absolute top-4 right-4 w-10 h-10 rounded-lg glass hover:bg-red-500/20 text-purple-300 hover:text-red-300 flex items-center justify-center transition-all z-10 text-2xl font-bold","aria-label":"Close",children:""}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-3xl font-bold text-purple-200 mb-2",children:e.some(b=>b.error)?y:n>=e.length?p:f}),o.jsx("p",{className:"text-purple-400",children:e.some(b=>b.error)?"An error occurred during the transaction. Please review the details below.":n>=e.length?"Your transaction has been completed successfully":"Please wait while we process your transaction..."})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm text-purple-300 mb-1",children:[o.jsx("span",{children:"Progress"}),o.jsxs("span",{children:[Math.round(h),"%"]})]}),o.jsx("div",{className:"w-full bg-purple-900/30 rounded-full h-3 overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all duration-500 ease-out rounded-full",style:{width:`${h}%`}})})]}),o.jsx("div",{className:"space-y-3",children:e.map((b,_)=>{const m=c(_),x=u(m);return o.jsxs("div",{className:`flex items-start gap-4 p-4 rounded-lg transition-all ${b.error?"bg-red-500/10 border border-red-500/30":m==="completed"?"bg-green-500/10 border border-green-500/30":m==="active"?"bg-purple-500/20 border border-purple-500/50 animate-pulse":"bg-purple-900/20 border border-purple-500/20"}`,children:[o.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center font-bold ${b.error?"bg-red-500 text-white":m==="completed"?"bg-green-500 text-white":m==="active"?"bg-purple-500 text-white":"bg-purple-900/50 text-purple-400"}`,children:b.error?"":x}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:`font-semibold mb-1 ${b.error?"text-red-300":m==="completed"?"text-green-300":m==="active"?"text-purple-200":"text-purple-400"}`,children:b.title}),o.jsx("div",{className:`text-sm ${b.error?"text-red-300":m==="completed"||m==="active"?"text-purple-300":"text-purple-500"}`,children:b.description}),b.txHash&&o.jsxs("a",{href:`https://testnet.xrpl.org/transactions/${b.txHash}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-purple-400 hover:text-purple-300 mt-2 inline-block",children:["View Transaction: ",b.txHash.slice(0,20),"..."]})]})]},_)})}),s&&o.jsx("div",{className:"flex gap-3 pt-4",children:o.jsx("button",{onClick:r,className:"btn-primary text-white px-6 py-3 rounded-lg font-medium flex-1",children:e.some(b=>b.error)?"Close":"Close & View Token"})}),!s&&o.jsx("div",{className:"text-center text-purple-400 text-sm",children:"Please wait while we create your token..."})]})]})})}const VW="sEd7bAfzqZWKxaatJpoWzTvENyaTg1Y",SS="rKxBBMmY969Ph1y63ddVfYyN7xmxwDfVq6",zW="sEd7W72aANTbLTG98XDhU1yfotPJdhu",HW="rphatRpwXcPAo7CVm46dC78JAQ6kLMqb2M";function XW(){const[t,e]=M.useState([]),[n,r]=M.useState("all"),[s,i]=M.useState(""),[a,l]=M.useState("list"),[c,u]=M.useState("newest"),[d,h]=M.useState([]),[f,p]=M.useState(null),[y,b]=M.useState({}),[_,m]=M.useState({}),[x,w]=M.useState(!1),[v,T]=M.useState("add"),[E,D]=M.useState(""),[te,re]=M.useState(!1),[z,J]=M.useState(!1),[ce,pe]=M.useState("manual"),[Q,ue]=M.useState([]),[V,H]=M.useState(null),[R,C]=M.useState(null),[A,L]=M.useState(!1),[$,ie]=M.useState({name:"",issuer:"",supply:"1000000",xrpLocked:"1",image:null,tfTransferable:!1,requireDestTag:!1,description:"",twitterHandle:"",websiteUrl:""}),[q,G]=M.useState(null),[ne,he]=M.useState(!1),[se,ee]=M.useState(null),[N,k]=M.useState(!1),[B,O]=M.useState(!1),[P,F]=M.useState([]),[Y,W]=M.useState(0),[Z,ae]=M.useState(!1);M.useEffect(()=>{Ne(),oe(),fe();const X=Ed(()=>{Ne()});return()=>X()},[]),M.useEffect(()=>{t.length>0&&$e()},[t]),M.useEffect(()=>{f&&Object.keys(y).length>0&&Ge()},[f,y]),M.useEffect(()=>{f&&_e()},[f]);const oe=()=>{const X=localStorage.getItem("connectedWallet");X&&p(JSON.parse(X))},fe=async()=>{try{const{data:X,error:ve}=await Ae.from("wallets").select("*").order("created_at",{ascending:!1});if(ve)throw ve;ue(X||[]),X&&X.length>=2?(H(X[0]),C(X[1])):X&&X.length>=1&&H(X[0])}catch(X){console.error("Error loading wallets:",X)}},_e=async()=>{if(f)try{const{data:X,error:ve}=await Ae.from("token_favorites").select("token_id").eq("user_address",f.address);if(ve)throw ve;h((X==null?void 0:X.map(He=>He.token_id))||[])}catch(X){console.error("Error loading favorites:",X)}},Te=async(X,ve)=>{if(ve&&ve.stopPropagation(),!f){ge.error("Connect wallet to favorite tokens");return}try{if(d.includes(X)){const{error:Pe}=await Ae.from("token_favorites").delete().eq("user_address",f.address).eq("token_id",X);if(Pe)throw Pe;h(d.filter(Re=>Re!==X)),ge.success("Removed from favorites")}else{const{error:Pe}=await Ae.from("token_favorites").insert({user_address:f.address,token_id:X});if(Pe)throw Pe;h([...d,X]),ge.success("Added to favorites")}}catch(He){console.error("Error toggling favorite:",He),ge.error("Failed to update favorite")}},Ne=async()=>{try{const{data:X,error:ve}=await Ae.from("meme_tokens").select("*").order("created_at",{ascending:!1});if(ve)throw ve;e(X||[])}catch(X){console.error("Error loading tokens:",X)}},$e=async()=>{var X;try{const ve=new Be.Client("wss://xrplcluster.com");await ve.connect();const He={};for(const Pe of t)if(Pe.amm_pool_created)try{const Re=Pe.currency_code.length>3?At.Buffer.from(Pe.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):Pe.currency_code,qe=await ve.request({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:Re,issuer:Pe.issuer_address},ledger_index:"validated"});if(qe.result.amm){const Qe=qe.result.amm,ut=parseFloat(Qe.amount)/1e6,zt=parseFloat(Qe.amount2.value),nr=parseFloat(((X=Qe.lp_token)==null?void 0:X.value)||0);He[Pe.id]={xrpAmount:ut,tokenAmount:zt,lpTokens:nr,price:ut/zt,accountId:Qe.account}}}catch(Re){console.error(`Error fetching pool data for ${Pe.token_name}:`,Re.message)}b(He),await ve.disconnect()}catch(ve){console.error("Error fetching pools data:",ve)}},Ge=async()=>{if(!f)return;const X=new Be.Client("wss://xrplcluster.com");try{await X.connect();const ve=await X.request({command:"account_lines",account:f.address,ledger_index:"validated"}),He={};ve.result.lines.forEach(Pe=>{const Re=Object.entries(y).find(([qe,Qe])=>Qe.accountId===Pe.account);if(Re){const[qe,Qe]=Re,ut=parseFloat(Pe.balance),zt=ut/Qe.lpTokens*100;He[qe]={balance:ut,share:zt}}}),m(He),await X.disconnect()}catch(ve){console.error("Error fetching LP balances:",ve)}},j=async()=>{if(!$.name||!$.issuer){ge.error("Token name and issuer are required");return}try{let X=null;if($.image){he(!0),ge.loading("Uploading image...");try{X=await Uf($.image),ge.dismiss(),ge.success("Image uploaded successfully!")}catch{ge.dismiss(),ge.error("Failed to upload image"),he(!1);return}he(!1)}const{error:ve}=await Ae.from("meme_tokens").insert([{token_name:$.name,currency_code:$.name,issuer_address:$.issuer,receiver_address:"Manual Entry",supply:parseFloat($.supply),amm_xrp_amount:parseFloat($.xrpLocked),amm_pool_created:!0,status:"manual",amm_asset_amount:parseFloat($.supply)*.9,initial_xrp_amount:parseFloat($.xrpLocked),initial_asset_amount:parseFloat($.supply)*.9,image_url:X,description:$.description||null,twitter_handle:$.twitterHandle||null,website_url:$.websiteUrl||null}]);if(ve)throw ve;ge.success(`Token ${$.name} added successfully!`),re(!1),ie({name:"",issuer:"",supply:"1000000",xrpLocked:"1",image:null,tfTransferable:!1,requireDestTag:!1,description:"",twitterHandle:"",websiteUrl:""}),G(null),Ne()}catch(X){console.error("Error adding token:",X),ge.error("Failed to add token")}},g=async X=>{const ve=X.target.files[0];if(!ve)return;if(ve.size>5*1024*1024){ge.error("Image must be less than 5MB");return}const He=new FileReader;He.onloadend=()=>{G(He.result)},He.readAsDataURL(ve),ie({...$,image:ve})},S=async()=>{var ve,He,Pe;if(!$.name){ge.error("Token name is required");return}L(!0),re(!1),O(!0),ae(!1);const X=[{title:"Connecting to XRPL",description:"Establishing connection to XRP Ledger testnet"},{title:"Validating Wallets",description:"Checking issuer and receiver wallet balances"},{title:"Creating Trust Line",description:"Setting up trust line for the new token"},{title:"Issuing Tokens",description:"Minting tokens to receiver wallet"}];$.image&&X.push({title:"Uploading Image",description:"Uploading token image to IPFS"}),X.push({title:"Saving to Database",description:"Storing token information"}),parseFloat($.xrpLocked)>0&&X.push({title:"Creating AMM Pool",description:"Setting up automated market maker pool"}),X.push({title:"Complete",description:"Token creation finished successfully"}),F(X),W(0);try{W(0);const Re=new Be.Client("wss://xrplcluster.com");await Re.connect();const qe=Be.Wallet.fromSeed(VW),Qe=Be.Wallet.fromSeed(zW);W(1);try{await Re.request({command:"account_info",account:qe.address})}catch(tn){if(((ve=tn.data)==null?void 0:ve.error)==="actNotFound"){const Sn=[...X];Sn[1]={...Sn[1],description:`Error: Issuer wallet not funded. Address: ${qe.address}`,error:!0},F(Sn),ae(!0),await Re.disconnect(),L(!1);return}}try{await Re.request({command:"account_info",account:Qe.address})}catch(tn){if(((He=tn.data)==null?void 0:He.error)==="actNotFound"){const Sn=[...X];Sn[1]={...Sn[1],description:`Error: Receiver wallet not funded. Address: ${Qe.address}`,error:!0},F(Sn),ae(!0),await Re.disconnect(),L(!1);return}}if(W(2),!$.tfTransferable){const tn={TransactionType:"AccountSet",Account:qe.address,SetFlag:8},Sn=await Re.autofill(tn),To=qe.sign(Sn),Ln=await Re.submitAndWait(To.tx_blob);if(Ln.result.meta.TransactionResult!=="tesSUCCESS")throw new Error("Failed to disable rippling on issuer: "+Ln.result.meta.TransactionResult)}const ut=$.name.length<=3?$.name.toUpperCase():At.Buffer.from($.name,"utf8").toString("hex").toUpperCase().padEnd(40,"0"),zt={TransactionType:"TrustSet",Account:Qe.address,LimitAmount:{currency:ut,issuer:qe.address,value:$.supply.toString()}};$.tfTransferable||(zt.Flags=Be.TrustSetFlags.tfSetNoRipple);const nr=await Re.autofill(zt),En=Qe.sign(nr),Mt=await Re.submitAndWait(En.tx_blob);if(Mt.result.meta.TransactionResult!=="tesSUCCESS")throw new Error("Trust line creation failed: "+Mt.result.meta.TransactionResult);const Dt=[...X];Dt[2]={...Dt[2],txHash:Mt.result.hash},F(Dt),W(3);const pn={TransactionType:"Payment",Account:qe.address,Destination:Qe.address,Amount:{currency:ut,value:$.supply.toString(),issuer:qe.address}};$.requireDestTag&&(pn.DestinationTag=1);const gr=await Re.autofill(pn),Rn=qe.sign(gr),lt=await Re.submitAndWait(Rn.tx_blob);if(lt.result.meta.TransactionResult!=="tesSUCCESS")throw new Error("Token issuance failed: "+lt.result.meta.TransactionResult);const Yt=[...Dt];Yt[3]={...Yt[3],txHash:lt.result.hash},F(Yt);let Nt=4,Pt=null;if($.image){W(Nt);try{Pt=await Uf($.image)}catch(tn){console.error("Image upload failed:",tn)}Nt++}W(Nt);const{data:Jt,error:Ht}=await Ae.from("meme_tokens").insert([{token_name:$.name,currency_code:$.name,issuer_address:qe.address,receiver_address:Qe.address,supply:parseFloat($.supply),tx_hash:lt.result.hash,status:"issued",amm_pool_created:!1,image_url:Pt,description:$.description||null,twitter_handle:$.twitterHandle||null,website_url:$.websiteUrl||null}]).select().single();if(Ht)throw Ht;if(Nt++,parseFloat($.xrpLocked)>0){W(Nt);try{const tn=parseFloat($.supply)*.9,Sn={TransactionType:"AMMCreate",Account:Qe.address,Amount:{currency:ut,value:tn.toString(),issuer:qe.address},Amount2:Be.xrpToDrops($.xrpLocked),TradingFee:500},To=await Re.autofill(Sn),Ln=Qe.sign(To),nn=await Re.submitAndWait(Ln.tx_blob);if(nn.result.meta.TransactionResult==="tesSUCCESS"){await Ae.from("meme_tokens").update({amm_pool_created:!0,amm_tx_hash:nn.result.hash,amm_asset_amount:tn,amm_xrp_amount:parseFloat($.xrpLocked),initial_asset_amount:tn,initial_xrp_amount:parseFloat($.xrpLocked),status:"amm_created"}).eq("id",Jt.id);const ks=[...Yt];ks[Nt]={...ks[Nt],txHash:nn.result.hash},F(ks)}}catch(tn){console.error("AMM creation error:",tn)}Nt++}await Re.disconnect(),W(Nt),ae(!0),await $y(Jt.id),await Js({userAddress:SS,actionType:Qs.TOKEN_CREATED,description:`Created token ${$.name} with supply of ${$.supply}`,details:{tokenName:$.name,supply:$.supply,xrpLocked:$.xrpLocked,hasAMM:parseFloat($.xrpLocked)>0},txHash:(Pe=lt==null?void 0:lt.result)==null?void 0:Pe.hash,tokenId:Jt==null?void 0:Jt.id}),ie({name:"",issuer:"",supply:"1000000",xrpLocked:"1",image:null,tfTransferable:!1,requireDestTag:!1}),G(null),pe("manual"),J(!1),await Ne(),setTimeout(()=>{O(!1),F([]),W(0),ae(!1)},3e3)}catch(Re){console.error("Error creating token:",Re);const qe=[...X],Qe=Y<X.length?Y:X.length-1;qe[Qe]={...qe[Qe],description:`Error: ${Re.message||"Unknown error occurred"}`,error:!0},F(qe),ae(!0),L(!1)}},K=()=>{if(E!=="divercity"){ge.error("Incorrect password!");return}w(!1),D(""),v==="create"?J(!0):re(!0)},le=()=>{T("add"),w(!0)},me=()=>{T("create"),w(!0)},ye=X=>{const ve=ze(X),He=parseFloat(X.total_supply)||parseFloat(X.supply)||0;return ve*He},We=X=>!X.amm_pool_created||!X.amm_xrp_amount||!X.amm_asset_amount?0:X.amm_xrp_amount/X.amm_asset_amount,ze=X=>{const ve=y[X.id];return ve&&ve.price?ve.price:We(X)},I=X=>{const ve=y[X.id];if(!ve||!ve.price)return"0.00";const He=parseFloat(X.initial_xrp_amount)||parseFloat(X.amm_xrp_amount),Pe=parseFloat(X.initial_asset_amount)||parseFloat(X.amm_asset_amount);if(!He||!Pe||Pe===0)return"0.00";const Re=ve.price,qe=He/Pe;return!qe||qe===0?"0.00":((Re-qe)/qe*100).toFixed(2)},de=X=>{const ve=We(X),He=ye(X),Pe=At.Buffer.from(X.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"),Re=`https://xrpl.services/?issuer=${X.issuer_address}&currency=${Pe}&limit=${X.supply}`,qe=`https://xmagnetic.org/dex/${X.currency_code}+${X.issuer_address}_XRP+XRP?network=mainnet`,Qe=` ${X.token_name} Token Info

 Supply: ${X.supply.toLocaleString()}
 Price: ${ve} XRP
 Market Cap: ${He} XRP
 XRP Locked: ${X.amm_xrp_amount||0} XRP
 Status: ${X.amm_pool_created?"AMM Pool Active":"Pending"}

 Trust Line:
${Re}

 Trade on Magnetic:
${qe}

MORE #MEME COINS @ MEMEKINGS.ONLINE

#XRPL #Crypto`,ut=`https://twitter.com/intent/tweet?text=${encodeURIComponent(Qe)}`;window.open(ut,"_blank","width=550,height=420")},be=t.filter(X=>{const ve=X.token_name.toLowerCase().includes(s.toLowerCase()),He=n==="all"||n==="active"&&X.amm_pool_created||n==="pending"&&!X.amm_pool_created||n==="favorites"&&d.includes(X.id);return ve&&He}).sort((X,ve)=>{switch(c){case"newest":return new Date(ve.created_at)-new Date(X.created_at);case"oldest":return new Date(X.created_at)-new Date(ve.created_at);case"name-asc":return X.token_name.localeCompare(ve.token_name);case"name-desc":return ve.token_name.localeCompare(X.token_name);case"supply-high":return ve.supply-X.supply;case"supply-low":return X.supply-ve.supply;case"price-high":return We(ve)-We(X);case"price-low":return We(X)-We(ve);default:return 0}}),Ie=({token:X})=>{var He,Pe;const ve=d.includes(X.id);return o.jsxs("div",{className:"glass rounded-lg p-6 space-y-4 hover:scale-105 transition-transform cursor-pointer relative",onClick:()=>{ee(X),k(!0)},children:[o.jsx("button",{onClick:Re=>Te(X.id,Re),className:"absolute top-4 right-4 text-2xl hover:scale-110 transition-transform z-10",title:ve?"Remove from favorites":"Add to favorites",children:ve?"":""}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Lt,{token:X,size:"lg"}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200",children:X.token_name}),o.jsx("button",{onClick:Re=>Te(X.id,Re),className:"text-xl hover:scale-110 transition-transform",children:d.includes(X.id)?"":""})]}),o.jsx("p",{className:"text-purple-400 text-sm",children:"Meme Token"})]})]}),o.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${X.amm_pool_created?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:X.amm_pool_created?" Live":" Pending"})]}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400 text-xs",children:"Total Supply"}),o.jsx("span",{className:"text-purple-200 text-sm font-bold",children:X.supply.toLocaleString()})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400 text-xs",children:"Currency Code"}),o.jsx("span",{className:"text-purple-200 font-mono text-xs",children:X.currency_code})]}),X.amm_pool_created&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400 text-xs",children:"Live Price"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-green-400 text-sm font-bold",children:[ze(X).toFixed(8)," XRP"]}),o.jsxs("span",{className:`text-xs font-medium px-2 py-0.5 rounded ${parseFloat(I(X))>=0?"text-green-300 bg-green-500/10":"text-red-300 bg-red-500/10"}`,children:[parseFloat(I(X))>=0?"+":"",I(X),"%"]})]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400 text-xs",children:"Market Cap (Live)"}),o.jsxs("span",{className:"text-purple-200 text-sm font-bold",children:[ye(X).toFixed(2)," XRP"]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400 text-xs",children:"Liquidity (XRP)"}),o.jsxs("span",{className:"text-purple-200 text-sm font-bold",children:[(He=y[X.id])!=null&&He.xrpAmount?y[X.id].xrpAmount.toFixed(2):X.amm_xrp_amount," XRP"]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400 text-xs",children:"Volume 24h"}),o.jsx("span",{className:"text-purple-200 text-sm font-bold",children:X.amm_pool_created?`${((((Pe=y[X.id])==null?void 0:Pe.xrpAmount)||X.amm_xrp_amount||0)*.15).toFixed(2)} XRP`:"-"})]}),o.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-purple-500/20",children:[o.jsx("span",{className:"text-purple-400 text-xs",children:"Your LP"}),_[X.id]?o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-green-400 text-sm font-bold",children:_[X.id].balance.toFixed(4)}),o.jsxs("div",{className:"text-green-500 text-xs",children:[_[X.id].share.toFixed(2),"%"]})]}):o.jsx("span",{className:"text-purple-500 text-sm font-bold",children:"-"})]})]}),o.jsxs("div",{className:"pt-2 border-t border-purple-500/20",children:[o.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"Issuer Address"}),o.jsx("div",{className:"text-purple-300 text-xs font-mono bg-black/30 p-2 rounded break-all",children:X.issuer_address})]}),o.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-purple-500/20",children:[o.jsx("span",{className:"text-purple-500 text-xs",children:"Created"}),o.jsx("span",{className:"text-purple-400 text-xs",children:new Date(X.created_at).toLocaleString()})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx("a",{href:`https://xmagnetic.org/dex/${X.currency_code}+${X.issuer_address}_XRP+XRP?network=mainnet`,target:"_blank",rel:"noopener noreferrer",className:"btn-primary text-white text-xs px-2 py-2 rounded-lg text-center",onClick:Re=>{Re.stopPropagation()},title:"Trade on xMagnetic DEX",children:" Trade"}),o.jsx("button",{className:"bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white font-bold text-xs px-2 py-2 rounded-lg shadow-lg shadow-purple-500/50 hover:shadow-purple-500/70",onClick:Re=>{Re.stopPropagation(),de(X)},title:"Post on X",children:" Post"}),o.jsx("a",{href:`https://xmagnetic.org/amm/${X.currency_code}+${X.issuer_address}_XRP+XRP?network=mainnet`,target:"_blank",rel:"noopener noreferrer",className:"btn text-purple-300 text-xs px-2 py-2 rounded-lg text-center",onClick:Re=>{Re.stopPropagation()},title:"AMM Pool",children:" AMM Pool"}),o.jsx("a",{href:`https://xrpl.services/?issuer=${X.issuer_address}&currency=${X.currency_code.length>3?At.Buffer.from(X.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):X.currency_code}&limit=${X.supply}`,target:"_blank",rel:"noopener noreferrer",className:"btn text-purple-300 text-xs px-2 py-2 rounded-lg text-center",onClick:Re=>{Re.stopPropagation()},title:"Set up Trustline",children:" Trustline"})]})]})},Ce=({token:X})=>{var ve,He;return o.jsxs("tr",{className:"border-t border-purple-500/20 hover:bg-purple-900/20 cursor-pointer",onClick:()=>{ee(X),k(!0)},children:[o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Lt,{token:X,size:"sm"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-purple-200",children:X.token_name}),o.jsx("div",{className:"text-purple-400 text-xs",children:X.currency_code})]}),o.jsx("button",{onClick:Pe=>Te(X.id,Pe),className:"text-lg hover:scale-110 transition-transform",children:d.includes(X.id)?"":""})]})]})}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-purple-200 font-bold",children:ze(X).toFixed(8)}),o.jsx("div",{className:"text-purple-400 text-xs",children:"XRP"})]}),X.amm_pool_created&&o.jsxs("span",{className:`text-xs font-medium px-1.5 py-0.5 rounded whitespace-nowrap ${parseFloat(I(X))>=0?"text-green-300 bg-green-500/10":"text-red-300 bg-red-500/10"}`,children:[parseFloat(I(X))>=0?"+":"",I(X),"%"]})]})}),o.jsx("td",{className:"px-4 py-3 text-purple-300",children:X.amm_pool_created?`${((((ve=y[X.id])==null?void 0:ve.xrpAmount)||X.amm_xrp_amount||0)*.15).toFixed(2)} XRP`:"-"}),o.jsx("td",{className:"px-4 py-3",children:_[X.id]?o.jsxs("div",{children:[o.jsx("div",{className:"text-green-200 font-medium",children:_[X.id].balance.toFixed(4)}),o.jsxs("div",{className:"text-green-400 text-xs",children:[_[X.id].share.toFixed(2),"%"]})]}):o.jsx("span",{className:"text-purple-500",children:"-"})}),o.jsxs("td",{className:"px-4 py-3 text-purple-200",children:[ye(X).toFixed(2)," XRP"]}),o.jsx("td",{className:"px-4 py-3 text-purple-200 font-bold",children:(He=y[X.id])!=null&&He.xrpAmount?`${y[X.id].xrpAmount.toFixed(2)} XRP`:`${X.amm_xrp_amount||0} XRP`}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${X.amm_pool_created?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:X.amm_pool_created?"":""})}),o.jsx("td",{className:"px-4 py-3",onClick:Pe=>Pe.stopPropagation(),children:o.jsxs("div",{className:"flex gap-1",children:[o.jsx("a",{href:`https://xmagnetic.org/dex/${X.currency_code}+${X.issuer_address}_XRP+XRP?network=mainnet`,target:"_blank",rel:"noopener noreferrer",className:"btn-primary text-white text-xs px-2 py-1 rounded",title:"Trade",children:""}),o.jsx("button",{className:"bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white font-bold text-xs px-2 py-1 rounded shadow-md shadow-purple-500/50 hover:shadow-purple-500/70",onClick:Pe=>{Pe.stopPropagation(),de(X)},title:"Post on X",children:""}),o.jsx("a",{href:`https://xmagnetic.org/amm/${X.currency_code}+${X.issuer_address}_XRP+XRP?network=mainnet`,target:"_blank",rel:"noopener noreferrer",className:"btn text-purple-300 text-xs px-2 py-1 rounded",title:"AMM",children:""}),o.jsx("a",{href:`https://xrpl.services/?issuer=${X.issuer_address}&currency=${X.currency_code.length>3?At.Buffer.from(X.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):X.currency_code}&limit=${X.supply}`,target:"_blank",rel:"noopener noreferrer",className:"btn text-purple-300 text-xs px-2 py-1 rounded",title:"Trustline",onClick:Pe=>Pe.stopPropagation(),children:""})]})})]})};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-purple-200",children:"Memes"}),o.jsx("p",{className:"text-purple-400 mt-1",children:"All minted tokens from the factory"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:le,className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium",children:"+ Add Token"}),o.jsx("button",{onClick:me,className:"btn-primary text-white px-6 py-3 rounded-lg font-medium",children:" Create Token"})]})]}),o.jsx("div",{className:"glass rounded-lg p-4",children:o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4",children:[o.jsx("input",{type:"text",value:s,onChange:X=>i(X.target.value),placeholder:" Search tokens...",className:"input flex-1 text-purple-200"}),o.jsxs("select",{value:c,onChange:X=>u(X.target.value),className:"input text-purple-200 w-full md:w-auto",children:[o.jsx("option",{value:"newest",children:"Newest First"}),o.jsx("option",{value:"oldest",children:"Oldest First"}),o.jsx("option",{value:"name-asc",children:"Name (A-Z)"}),o.jsx("option",{value:"name-desc",children:"Name (Z-A)"}),o.jsx("option",{value:"supply-high",children:"Supply (High-Low)"}),o.jsx("option",{value:"supply-low",children:"Supply (Low-High)"}),o.jsx("option",{value:"price-high",children:"Price (High-Low)"}),o.jsx("option",{value:"price-low",children:"Price (Low-High)"})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2 items-center justify-between",children:[o.jsxs("div",{className:"flex gap-2 flex-wrap",children:[o.jsxs("button",{onClick:()=>r("all"),className:`px-4 py-2 rounded-lg transition-all ${n==="all"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:["All (",t.length,")"]}),o.jsxs("button",{onClick:()=>r("active"),className:`px-4 py-2 rounded-lg transition-all ${n==="active"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:[" Active (",t.filter(X=>X.amm_pool_created).length,")"]}),o.jsxs("button",{onClick:()=>r("pending"),className:`px-4 py-2 rounded-lg transition-all ${n==="pending"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:[" Pending (",t.filter(X=>!X.amm_pool_created).length,")"]}),o.jsxs("button",{onClick:()=>r("favorites"),className:`px-4 py-2 rounded-lg transition-all ${n==="favorites"?"bg-purple-600 text-white":"glass text-purple-300"}`,disabled:!f,title:f?"":"Connect wallet to view favorites",children:[" Favorites (",d.length,")"]}),o.jsxs("button",{disabled:!0,className:"px-4 py-2 rounded-lg transition-all font-medium text-purple-500/50 cursor-not-allowed relative group",children:[" User",o.jsx("span",{className:"ml-2 text-xs bg-purple-900/50 px-2 py-0.5 rounded",children:"Coming Soon"})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>l("grid"),className:`px-4 py-2 rounded-lg transition-all ${a==="grid"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:" Grid"}),o.jsx("button",{onClick:()=>l("list"),className:`px-4 py-2 rounded-lg transition-all ${a==="list"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:" List"})]})]})]})}),a==="grid"?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:be.map(X=>o.jsx(Ie,{token:X},X.id))}):o.jsx("div",{className:"glass rounded-lg p-4",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-purple-900/30",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Token"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Live Price"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Volume 24h"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Your LP"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Market Cap"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Liquidity (XRP)"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Status"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Actions"})]})}),o.jsx("tbody",{children:be.map(X=>o.jsx(Ce,{token:X},X.id))})]})})}),be.length===0&&o.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[o.jsx("div",{className:"text-6xl mb-4",children:""}),o.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-2",children:"No Tokens Found"}),o.jsx("p",{className:"text-purple-400",children:s?"Try a different search term":"Create your first token from the dashboard"})]}),x&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-8 max-w-md w-full",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-4",children:"Admin Access Required"}),o.jsxs("p",{className:"text-purple-300 mb-6",children:["Enter password to ",v==="create"?"create tokens":"add tokens"]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Password"}),o.jsx("input",{type:"password",value:E,onChange:X=>D(X.target.value),onKeyPress:X=>X.key==="Enter"&&K(),className:"input w-full text-purple-200",placeholder:"Enter password",autoFocus:!0})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:K,className:"btn-primary text-white px-6 py-2 rounded-lg font-medium flex-1",children:"Confirm"}),o.jsx("button",{onClick:()=>{w(!1),D("")},className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium",children:"Cancel"})]})]})}),te&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:"Add Token"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("input",{type:"text",placeholder:"Token Name",value:$.name,onChange:X=>ie({...$,name:X.target.value}),className:"w-full px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 placeholder-purple-400"}),o.jsx("input",{type:"text",placeholder:"Issuer Address",value:$.issuer,onChange:X=>ie({...$,issuer:X.target.value}),className:"w-full px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 placeholder-purple-400"}),o.jsx("input",{type:"number",placeholder:"Supply",value:$.supply,onChange:X=>ie({...$,supply:X.target.value}),className:"w-full px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 placeholder-purple-400"})]}),o.jsxs("div",{className:"flex gap-3 mt-6",children:[o.jsx("button",{onClick:j,disabled:A||ne,className:"btn-primary text-white px-6 py-2 rounded-lg font-medium flex-1 disabled:opacity-50",children:A?" Adding...":"+ Add Token"}),o.jsx("button",{onClick:()=>{re(!1),ie({name:"",issuer:"",supply:"1000000",xrpLocked:"1",image:null}),G(null),pe("manual")},disabled:A,className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium disabled:opacity-50",children:"Cancel"})]})]})}),z&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:"Create Token"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("input",{type:"text",placeholder:"Token Name",value:$.name,onChange:X=>ie({...$,name:X.target.value}),className:"w-full px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 placeholder-purple-400"}),o.jsx("input",{type:"number",placeholder:"Supply (default: 1,000,000)",value:$.supply,onChange:X=>ie({...$,supply:X.target.value}),className:"w-full px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 placeholder-purple-400"}),o.jsx("input",{type:"number",placeholder:"XRP to Lock in Pool (default: 1)",value:$.xrpLocked,onChange:X=>ie({...$,xrpLocked:X.target.value}),className:"w-full px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 placeholder-purple-400"}),o.jsx("textarea",{placeholder:"Description (optional)",value:$.description,onChange:X=>ie({...$,description:X.target.value}),className:"w-full px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 placeholder-purple-400 min-h-[80px]"}),o.jsx("input",{type:"text",placeholder:"Twitter Handle (optional, e.g., @mytoken)",value:$.twitterHandle,onChange:X=>ie({...$,twitterHandle:X.target.value}),className:"w-full px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 placeholder-purple-400"}),o.jsx("input",{type:"url",placeholder:"Website URL (optional)",value:$.websiteUrl,onChange:X=>ie({...$,websiteUrl:X.target.value}),className:"w-full px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 placeholder-purple-400"}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2 text-sm",children:"Token Image"}),o.jsx("input",{type:"file",accept:"image/*",onChange:g,className:"w-full px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-purple-600 file:text-white hover:file:bg-purple-700"}),q&&o.jsx("div",{className:"mt-3",children:o.jsx("img",{src:q,alt:"Preview",className:"w-24 h-24 rounded-lg object-cover"})})]}),o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsx("h4",{className:"text-purple-200 font-medium mb-3",children:"Token Settings"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:$.tfTransferable,onChange:X=>ie({...$,tfTransferable:X.target.checked}),className:"w-4 h-4 rounded border-purple-500/30"}),o.jsx("span",{className:"text-purple-300 text-sm",children:"Transferable"})]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:$.requireDestTag,onChange:X=>ie({...$,requireDestTag:X.target.checked}),className:"w-4 h-4 rounded border-purple-500/30"}),o.jsx("span",{className:"text-purple-300 text-sm",children:"Require Destination Tag"})]})]})]}),o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsx("h4",{className:"text-purple-200 font-medium mb-2",children:"Wallet Configuration"}),o.jsxs("div",{className:"space-y-2 text-sm text-purple-300",children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Issuer:"})," ",SS]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Receiver:"})," ",HW]})]})]})]}),o.jsxs("div",{className:"flex gap-3 mt-6",children:[o.jsx("button",{onClick:S,disabled:A||ne,className:"btn-primary text-white px-6 py-2 rounded-lg font-medium flex-1 disabled:opacity-50",children:ne?o.jsx("span",{children:" Uploading Image..."}):A?o.jsx("span",{children:" Creating..."}):o.jsx("span",{children:" Create Token"})}),o.jsx("button",{onClick:()=>{J(!1),ie({name:"",issuer:"",supply:"1000000",xrpLocked:"1",image:null,tfTransferable:!1,requireDestTag:!1,description:"",twitterHandle:"",websiteUrl:""}),G(null)},disabled:A||ne,className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium disabled:opacity-50",children:"Cancel"})]})]})}),N&&se&&o.jsx(Zw,{token:se,onClose:()=>{k(!1),ee(null)}}),o.jsx(Hj,{isOpen:B,steps:P,currentStep:Y,canClose:Z,onClose:()=>{O(!1),F([]),W(0)}})]})}function WW(){const[t,e]=M.useState([]),[n,r]=M.useState({}),[s,i]=M.useState(!1),[a,l]=M.useState(null),[c,u]=M.useState({}),[d,h]=M.useState("list"),[f,p]=M.useState(""),[y,b]=M.useState("liquidity"),[_,m]=M.useState("all"),[x,w]=M.useState([]);M.useEffect(()=>{D(),v();const V=Ed(()=>{D()}),H=()=>{v()};return window.addEventListener("walletConnected",H),window.addEventListener("walletDisconnected",H),()=>{V(),window.removeEventListener("walletConnected",H),window.removeEventListener("walletDisconnected",H)}},[]),M.useEffect(()=>{t.length>0&&te()},[t]),M.useEffect(()=>{a&&Object.keys(n).length>0&&re()},[a,n]),M.useEffect(()=>{a&&T()},[a]);const v=()=>{const V=localStorage.getItem("connectedWallet");l(V?JSON.parse(V):null)},T=async()=>{if(a)try{const{data:V,error:H}=await Ae.from("token_favorites").select("token_id").eq("user_address",a.address);if(H)throw H;w((V==null?void 0:V.map(R=>R.token_id))||[])}catch(V){console.error("Error loading favorites:",V)}},E=async(V,H)=>{if(H&&H.stopPropagation(),!a){ge.error("Connect wallet to favorite pools");return}try{if(x.includes(V)){const{error:C}=await Ae.from("token_favorites").delete().eq("user_address",a.address).eq("token_id",V);if(C)throw C;w(x.filter(A=>A!==V)),ge.success("Removed from favorites")}else{const{error:C}=await Ae.from("token_favorites").insert([{user_address:a.address,token_id:V}]);if(C)throw C;w([...x,V]),ge.success("Added to favorites")}}catch(R){console.error("Error toggling favorite:",R),ge.error("Failed to update favorite")}},D=async()=>{try{const{data:V,error:H}=await Ae.from("meme_tokens").select("*").eq("amm_pool_created",!0).order("created_at",{ascending:!1});if(H)throw H;e(V||[])}catch(V){console.error("Error loading tokens:",V)}},te=async()=>{var H;i(!0);const V=new Be.Client("wss://xrplcluster.com");try{await V.connect();const R={};for(const C of t)try{const A=C.currency_code.length>3?At.Buffer.from(C.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):C.currency_code;console.log(`Fetching AMM info for ${C.token_name}:`,{currency:C.currency_code,hex:A,issuer:C.issuer_address});const L=await V.request({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:A,issuer:C.issuer_address},ledger_index:"validated"});if(L.result.amm){const $=L.result.amm,ie=parseFloat($.amount)/1e6,q=parseFloat($.amount2.value),G=parseFloat(((H=$.lp_token)==null?void 0:H.value)||0);R[C.id]={xrpAmount:ie,tokenAmount:q,lpTokens:G,price:ie/q,accountId:$.account},console.log(`Found pool for ${C.token_name}:`,R[C.id])}else console.log(`No AMM found for ${C.token_name}`)}catch(A){console.error(`Error fetching pool data for ${C.token_name}:`,A.message)}r(R),await V.disconnect()}catch(R){console.error("Error fetching pools data:",R),ge.error("Failed to fetch pool data")}finally{i(!1)}},re=async()=>{if(!a)return;const V=new Be.Client("wss://xrplcluster.com");try{await V.connect();const H=await V.request({command:"account_lines",account:a.address,ledger_index:"validated"}),R={};H.result.lines.forEach(C=>{const A=Object.entries(n).find(([L,$])=>$.accountId===C.account);if(A){const[L,$]=A,ie=parseFloat(C.balance),q=ie/$.lpTokens*100;R[L]={balance:ie,share:q}}}),u(R),await V.disconnect()}catch(H){console.error("Error fetching LP balances:",H)}},z=V=>!V.amm_pool_created||!V.amm_xrp_amount||!V.amm_asset_amount?0:V.amm_xrp_amount/V.amm_asset_amount,J=V=>{const H=n[V.id];return H&&H.price?H.price:z(V)},ce=V=>{const H=J(V),R=parseFloat(V.total_supply)||0;return H*R},pe=V=>{const H=n[V.id];if(!H||!H.price||!V.amm_xrp_amount||!V.amm_asset_amount)return"0.00";const R=H.price,C=V.amm_xrp_amount/V.amm_asset_amount;return!C||C===0?"0.00":((R-C)/C*100).toFixed(2)},Q=({token:V})=>{const H=n[V.id],R=c[V.id],C=J(V),A=ce(V);return o.jsxs("div",{className:"glass rounded-lg p-6 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Lt,{token:V,size:"lg"}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("h3",{className:"text-xl font-bold text-purple-200",children:[V.token_name,"/XRP"]}),o.jsx("button",{onClick:L=>E(V.id,L),className:"text-lg hover:scale-110 transition-transform",children:x.includes(V.id)?"":""})]}),o.jsx("p",{className:"text-purple-400 text-sm",children:"AMM Pool"})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"flex items-center justify-end gap-2",children:[o.jsx("div",{className:"text-2xl font-bold text-purple-200",children:C.toFixed(8)}),V.amm_pool_created&&o.jsxs("span",{className:`text-xs font-medium px-2 py-1 rounded ${parseFloat(pe(V))>=0?"text-green-300 bg-green-500/10":"text-red-300 bg-red-500/10"}`,children:[parseFloat(pe(V))>=0?"+":"",pe(V),"%"]})]}),o.jsx("div",{className:"text-purple-400 text-xs",children:"XRP per token"})]})]}),H?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"XRP Liquidity"}),o.jsx("div",{className:"text-lg font-bold text-purple-200",children:H.xrpAmount.toFixed(2)})]}),o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"Token Liquidity"}),o.jsx("div",{className:"text-lg font-bold text-purple-200",children:H.tokenAmount.toFixed(0)})]}),o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"LP Tokens"}),o.jsx("div",{className:"text-lg font-bold text-purple-200",children:H.lpTokens.toFixed(2)})]}),o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"Market Cap"}),o.jsxs("div",{className:"text-lg font-bold text-purple-200",children:[A.toFixed(2)," XRP"]})]})]}),R&&o.jsx("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-green-300 text-sm font-medium mb-1",children:"Your LP Position"}),o.jsxs("div",{className:"text-green-200 text-xs",children:[R.balance.toFixed(4)," LP Tokens (",R.share.toFixed(4),"% of pool)"]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"text-green-200 font-bold",children:["~",(H.xrpAmount*R.share/100).toFixed(4)," XRP"]}),o.jsx("div",{className:"text-green-300 text-xs",children:"Your Share Value"})]})]})}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("a",{href:`https://xmagnetic.org/amm/${V.currency_code}+${V.issuer_address}_XRP+XRP?network=mainnet`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 btn-primary text-center py-2 rounded-lg text-sm",children:" AMM Pool "}),o.jsx("button",{onClick:()=>{localStorage.setItem("selectedTradeToken",JSON.stringify(V)),window.dispatchEvent(new CustomEvent("navigateToTrade",{detail:V}))},className:"flex-1 btn-secondary text-center py-2 rounded-lg text-sm",children:" Swap"})]})]}):o.jsx("div",{className:"text-center text-purple-400 py-8",children:o.jsx("div",{className:"animate-pulse",children:"Loading pool data..."})})]})},ue=({token:V})=>{const H=n[V.id],R=c[V.id],C=J(V);return o.jsxs("tr",{className:"border-t border-purple-500/20 hover:bg-purple-900/20",children:[o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Lt,{token:V,size:"sm"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"font-bold text-purple-200",children:[V.token_name,"/XRP"]}),o.jsx("div",{className:"text-purple-400 text-xs",children:V.currency_code})]}),o.jsx("button",{onClick:A=>E(V.id,A),className:"text-lg hover:scale-110 transition-transform",children:x.includes(V.id)?"":""})]})]})}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-purple-200 font-bold",children:C.toFixed(8)}),o.jsx("div",{className:"text-purple-400 text-xs",children:"XRP"})]}),V.amm_pool_created&&o.jsxs("span",{className:`text-xs font-medium px-1.5 py-0.5 rounded whitespace-nowrap ${parseFloat(pe(V))>=0?"text-green-300 bg-green-500/10":"text-red-300 bg-red-500/10"}`,children:[parseFloat(pe(V))>=0?"+":"",pe(V),"%"]})]})}),o.jsx("td",{className:"px-4 py-3 text-purple-200 font-bold",children:H?`${H.xrpAmount.toFixed(2)} XRP`:"Loading..."}),o.jsx("td",{className:"px-4 py-3 text-purple-300",children:H?`${(H.xrpAmount*.15).toFixed(2)} XRP`:"-"}),o.jsx("td",{className:"px-4 py-3",children:R?o.jsxs("div",{children:[o.jsx("div",{className:"text-green-200 font-medium",children:R.balance.toFixed(4)}),o.jsxs("div",{className:"text-green-400 text-xs",children:[R.share.toFixed(2),"%"]})]}):o.jsx("span",{className:"text-purple-500",children:"-"})}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex gap-1",children:[o.jsx("a",{href:`https://xmagnetic.org/amm/${V.currency_code}+${V.issuer_address}_XRP+XRP?network=mainnet`,target:"_blank",rel:"noopener noreferrer",className:"btn-primary text-white text-xs px-2 py-1 rounded",title:"AMM Pool",children:" AMM"}),o.jsx("button",{onClick:()=>{localStorage.setItem("selectedTradeToken",JSON.stringify(V)),window.dispatchEvent(new CustomEvent("navigateToTrade",{detail:V}))},className:"btn-secondary text-white text-xs px-2 py-1 rounded",title:"Swap",children:""})]})})]})};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-purple-200",children:"AMM Pools"}),o.jsx("p",{className:"text-purple-400 mt-1",children:"Liquidity pools for all platform tokens"})]}),o.jsx("button",{onClick:te,disabled:s,className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium disabled:opacity-50",children:s?" Refreshing...":" Refresh Pools"})]}),!a&&o.jsx("div",{className:"glass rounded-lg p-6 bg-yellow-500/10 border border-yellow-500/30",children:o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("div",{className:"text-2xl",children:""}),o.jsx("div",{className:"text-yellow-200 font-medium",children:"Connect Wallet to See Your LP Positions"}),o.jsx("p",{className:"text-yellow-300 text-sm",children:"Connect your wallet from the Setup page to view your liquidity provider positions"})]})}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>m("all"),className:`px-6 py-2 rounded-lg font-medium transition-all ${_==="all"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"All AMM Pools"}),o.jsx("button",{onClick:()=>m("mine"),className:`px-6 py-2 rounded-lg font-medium transition-all ${_==="mine"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"My AMM Pools"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>h("list"),className:`px-4 py-2 rounded-lg transition-all ${d==="list"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:" List"}),o.jsx("button",{onClick:()=>h("grid"),className:`px-4 py-2 rounded-lg transition-all ${d==="grid"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:" Grid"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-6",children:[o.jsx("input",{type:"text",placeholder:" Search pools...",value:f,onChange:V=>p(V.target.value),className:"input text-purple-200 md:col-span-2"}),o.jsxs("select",{value:y,onChange:V=>b(V.target.value),className:"input text-purple-200",children:[o.jsx("option",{value:"liquidity",children:"Sort by Liquidity"}),o.jsx("option",{value:"volume",children:"Sort by Volume"}),o.jsx("option",{value:"name",children:"Sort by Name"})]})]}),d==="grid"?o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:t.filter(V=>{const H=V.token_name.toLowerCase().includes(f.toLowerCase())||V.currency_code.toLowerCase().includes(f.toLowerCase()),R=c[V.id]&&c[V.id].balance>0;return H&&(_==="all"||_==="mine"&&R)}).sort((V,H)=>{var R,C,A,L;return y==="liquidity"?(((R=n[H.id])==null?void 0:R.xrpAmount)||0)-(((C=n[V.id])==null?void 0:C.xrpAmount)||0):y==="volume"?(((A=n[H.id])==null?void 0:A.tokenAmount)||0)-(((L=n[V.id])==null?void 0:L.tokenAmount)||0):V.token_name.localeCompare(H.token_name)}).map(V=>o.jsx(Q,{token:V},V.id))}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-purple-900/30",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Pool"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Live Price"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Liquidity (XRP)"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Volume 24h"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Your LP"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Actions"})]})}),o.jsx("tbody",{children:t.filter(V=>{const H=V.token_name.toLowerCase().includes(f.toLowerCase())||V.currency_code.toLowerCase().includes(f.toLowerCase()),R=c[V.id]&&c[V.id].balance>0;return H&&(_==="all"||_==="mine"&&R)}).sort((V,H)=>{var R,C,A,L;return y==="liquidity"?(((R=n[H.id])==null?void 0:R.xrpAmount)||0)-(((C=n[V.id])==null?void 0:C.xrpAmount)||0):y==="volume"?(((A=n[H.id])==null?void 0:A.tokenAmount)||0)-(((L=n[V.id])==null?void 0:L.tokenAmount)||0):V.token_name.localeCompare(H.token_name)}).map(V=>o.jsx(ue,{token:V},V.id))})]})})]}),t.length===0&&o.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[o.jsx("div",{className:"text-6xl mb-4",children:""}),o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-2",children:"No AMM Pools Yet"}),o.jsx("p",{className:"text-purple-400",children:"AMM pools will appear here once tokens are created with liquidity"})]})]})}function KW({isOpen:t,currentSlippage:e,suggestedSlippage:n,tradeType:r,amount:s,tokenName:i,onRetry:a,onCancel:l,onClose:c,isRetrying:u=!1,retryComplete:d=!1,retrySuccess:h=!1,retryError:f=null}){const[p,y]=M.useState(3);return M.useEffect(()=>{if(d&&h){const b=setTimeout(()=>{c()},2e3);return()=>clearTimeout(b)}},[d,h,c]),M.useEffect(()=>{if(u){y(3);const b=setInterval(()=>{y(_=>_<=1?(clearInterval(b),0):_-1)},1e3);return()=>clearInterval(b)}},[u]),t?o.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-[100] p-4 animate-fadeIn",children:o.jsxs("div",{className:"glass rounded-lg p-8 max-w-md w-full shadow-2xl border border-purple-500/30 animate-slideUp relative",children:[o.jsx("button",{onClick:c,className:"absolute top-4 right-4 w-10 h-10 rounded-lg glass hover:bg-red-500/20 text-purple-300 hover:text-red-300 flex items-center justify-center transition-all z-10 text-2xl font-bold","aria-label":"Close",children:""}),d?o.jsx("div",{className:"text-center space-y-6",children:h?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-20 h-20 rounded-full bg-green-500/20 flex items-center justify-center mx-auto",children:o.jsx("span",{className:"text-5xl",children:""})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-bold text-green-400 mb-2",children:"Trade Successful!"}),o.jsxs("p",{className:"text-purple-300",children:["Your ",r.toLowerCase()," order completed with ",n,"% slippage."]})]}),o.jsx("div",{className:"text-purple-400 text-sm",children:"Closing automatically..."})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-20 h-20 rounded-full bg-red-500/20 flex items-center justify-center mx-auto",children:o.jsx("span",{className:"text-5xl",children:""})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-bold text-red-400 mb-2",children:"Retry Failed"}),o.jsx("p",{className:"text-purple-300 mb-4",children:f||"Trade could not be completed. Please try again manually."}),o.jsx("div",{className:"glass rounded-lg p-3",children:o.jsxs("p",{className:"text-purple-400 text-sm",children:[o.jsx("strong",{children:"Suggestions:"}),o.jsx("br",{})," Try a smaller amount",o.jsx("br",{})," Increase slippage further",o.jsx("br",{})," Wait for pool liquidity to improve"]})})]}),o.jsx("button",{onClick:c,className:"w-full btn-primary text-white py-3 rounded-lg font-medium",children:"Close"})]})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-yellow-500/20 flex items-center justify-center",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200",children:"Slippage Too Low"}),o.jsx("p",{className:"text-purple-400 text-sm",children:"Trade couldn't complete"})]})]}),o.jsxs("div",{className:"glass rounded-lg p-4 space-y-3 mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-purple-400 text-sm",children:"Trade Type"}),o.jsx("span",{className:"text-purple-200 font-medium",children:r})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-purple-400 text-sm",children:"Amount"}),o.jsxs("span",{className:"text-purple-200 font-medium",children:[s," ",i]})]}),o.jsx("div",{className:"h-px bg-purple-500/20 my-2"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-purple-400 text-sm",children:"Current Slippage"}),o.jsxs("span",{className:"text-red-400 font-bold",children:[e,"%"]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-purple-400 text-sm",children:"Suggested Slippage"}),o.jsxs("span",{className:"text-green-400 font-bold",children:[n,"%"]})]})]}),o.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-6",children:o.jsxs("p",{className:"text-blue-300 text-sm",children:[o.jsx("strong",{children:"Why did this happen?"}),o.jsx("br",{}),"The pool's price moved while your trade was processing. Increasing slippage tolerance allows for more price movement."]})}),u?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 border-4 border-purple-500/30 border-t-purple-500 rounded-full animate-spin"}),o.jsxs("span",{className:"text-purple-200 font-medium",children:["Retrying with ",n,"% slippage..."]})]}),p>0&&o.jsxs("div",{className:"text-center text-purple-400 text-sm",children:["Executing in ",p,"s"]})]}):o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:l,className:"flex-1 glass hover:bg-purple-500/10 text-purple-300 py-3 rounded-lg font-medium transition-all",children:"Cancel"}),o.jsxs("button",{onClick:a,className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white py-3 rounded-lg font-medium transition-all shadow-lg",children:["Retry with ",n,"%"]})]})]})]})}):null}function qW({isOpen:t,onClose:e,token:n,transactions:r,loading:s}){if(M.useEffect(()=>{const u=d=>{d.key==="Escape"&&e()};if(t)return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)},[t,e]),!t)return null;const i=u=>{const d=new Date(u),f=new Date-d,p=Math.floor(f/6e4),y=Math.floor(p/60);return p<1?"Just now":p<60?`${p}m ago`:y<24?`${y}h ago`:d.toLocaleString()},a=u=>{const d=parseFloat(u);return d>=1e6?`${(d/1e6).toFixed(2)}M`:d>=1e3?`${(d/1e3).toFixed(2)}K`:d.toFixed(2)},l=u=>{var d;return u.TransactionType==="AMMDeposit"?"Deposit":u.TransactionType==="AMMWithdraw"?"Withdraw":u.TransactionType==="Payment"?(d=u.meta)!=null&&d.delivered_amount&&typeof u.meta.delivered_amount=="string"?"Buy":"Sell":u.TransactionType},c=u=>{switch(u){case"Buy":return"bg-green-500/20 text-green-300 border-green-500/30";case"Sell":return"bg-red-500/20 text-red-300 border-red-500/30";case"Deposit":return"bg-blue-500/20 text-blue-300 border-blue-500/30";case"Withdraw":return"bg-yellow-500/20 text-yellow-300 border-yellow-500/30";default:return"bg-purple-500/20 text-purple-300 border-purple-500/30"}};return o.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-[100] p-4 animate-fadeIn",onClick:e,children:o.jsxs("div",{className:"glass rounded-lg p-6 max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col animate-slideUp",onClick:u=>u.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200",children:"AMM Pool History"}),o.jsxs("p",{className:"text-purple-400 text-sm mt-1",children:[n==null?void 0:n.token_name," - Last 24 Hours"]})]}),o.jsx("button",{onClick:e,className:"w-10 h-10 rounded-lg glass hover:bg-purple-500/20 flex items-center justify-center text-purple-300 text-xl transition-all",children:""})]}),s?o.jsx("div",{className:"flex-1 flex items-center justify-center py-20",children:o.jsxs("div",{className:"text-center space-y-4",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-purple-500/30 border-t-purple-500 rounded-full animate-spin mx-auto"}),o.jsx("p",{className:"text-purple-300",children:"Loading transaction history..."})]})}):r.length===0?o.jsx("div",{className:"flex-1 flex items-center justify-center py-20",children:o.jsxs("div",{className:"text-center space-y-3",children:[o.jsx("div",{className:"text-6xl",children:""}),o.jsx("h4",{className:"text-xl font-bold text-purple-200",children:"No Transactions Found"}),o.jsx("p",{className:"text-purple-400",children:"No AMM pool activity in the last 24 hours"})]})}):o.jsxs("div",{className:"flex-1 overflow-y-auto space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4 px-4 text-sm font-semibold text-purple-400",children:[o.jsx("div",{children:"Type"}),o.jsx("div",{children:"Amount"}),o.jsx("div",{children:"Account"}),o.jsx("div",{className:"text-right",children:"Time"})]}),r.map((u,d)=>{const h=l(u),f=c(h);return o.jsx("div",{className:"glass rounded-lg p-4 hover:bg-purple-500/10 transition-all",children:o.jsxs("div",{className:"grid grid-cols-4 gap-4 items-center",children:[o.jsx("div",{children:o.jsx("div",{className:`inline-flex px-3 py-1 rounded-lg text-xs font-medium border ${f}`,children:h})}),o.jsx("div",{children:o.jsx("div",{className:"text-purple-200 font-medium text-sm",children:u.Amount?typeof u.Amount=="string"?`${a(parseInt(u.Amount)/1e6)} XRP`:`${a(u.Amount.value)} ${u.Amount.currency}`:"N/A"})}),o.jsx("div",{children:o.jsx("div",{className:"text-purple-300 text-xs font-mono",children:u.Account?`${u.Account.substring(0,8)}...${u.Account.substring(u.Account.length-6)}`:"Unknown"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-purple-400 text-xs",children:i(u.date?(u.date+946684800)*1e3:Date.now())}),u.hash&&o.jsx("a",{href:`https://livenet.xrpl.org/transactions/${u.hash}`,target:"_blank",rel:"noopener noreferrer",className:"text-purple-500 hover:text-purple-400 text-xs mt-1 inline-block",children:"View "})]})]})},u.hash||d)})]}),o.jsxs("div",{className:"mt-6 pt-4 border-t border-purple-500/20 flex justify-between items-center",children:[o.jsxs("div",{className:"text-purple-400 text-sm",children:[r.length," transaction",r.length!==1?"s":""," found"]}),o.jsx("button",{onClick:e,className:"btn-primary text-white px-6 py-2 rounded-lg font-medium",children:"Close"})]})]})})}const NS=.01,TS=t=>{const e=parseFloat(t);if(isNaN(e)||e<=0)throw new Error("Invalid XRP amount");if(e>1e11)throw new Error("XRP amount too large");if(e<1e-6)throw new Error("XRP amount too small (minimum 0.000001)");const n=Math.floor(e*1e6)/1e6;return parseFloat(n.toFixed(6))},AS=t=>{const e=parseFloat(t);if(isNaN(e)||e<=0)throw new Error("Invalid token amount");return e.toFixed(6)};function GW({preselectedToken:t=null}){const[e,n]=M.useState([]),[r,s]=M.useState(null),[i,a]=M.useState("buy"),[l,c]=M.useState(""),[u,d]=M.useState(""),[h,f]=M.useState(null),[p,y]=M.useState(!1),[b,_]=M.useState(!1),[m,x]=M.useState(!1),[w,v]=M.useState(!1),[T,E]=M.useState("0"),[D,te]=M.useState(!1),[re,z]=M.useState("area"),[J,ce]=M.useState("15m"),[pe,Q]=M.useState(null),[ue,V]=M.useState(0),[H,R]=M.useState(0),[C,A]=M.useState(!1),[L,$]=M.useState("0.5"),[ie,q]=M.useState("amm"),[G,ne]=M.useState([]),[he,se]=M.useState(0),[ee,N]=M.useState(!1),[k,B]=M.useState(""),[O,P]=M.useState(!1),[F,Y]=M.useState(null),[W,Z]=M.useState(!1),[ae,oe]=M.useState(!1),[fe,_e]=M.useState(!1),[Te,Ne]=M.useState(null),[$e,Ge]=M.useState(!1),[j,g]=M.useState([]),[S,K]=M.useState(!1),[le,me]=M.useState(.5),[ye,We]=M.useState(0),ze=M.useRef(null),I=M.useRef(null),de=M.useRef(null),be=M.useRef(null),Ie=M.useRef(null),Ce=M.useRef(null),X=M.useRef([]),ve=M.useRef(null);M.useEffect(()=>{qe(),He(),Pe();const xe=Ed(()=>{qe()}),je=()=>{He()};return window.addEventListener("walletConnected",je),window.addEventListener("walletDisconnected",je),()=>{xe(),window.removeEventListener("walletConnected",je),window.removeEventListener("walletDisconnected",je)}},[]),M.useEffect(()=>{if(t&&e.length>0&&!r){const xe=e.find(je=>je.id===t.id);xe&&s(xe)}},[t,e,r]),M.useEffect(()=>{r&&Re()},[r,le]),M.useEffect(()=>(r&&ze.current&&I.current&&Dt(),r&&h&&(Yt(),lt()),r&&Rn(),()=>{En()}),[r,h]),M.useEffect(()=>(r&&ze.current&&I.current&&Dt(),()=>{En()}),[re]),M.useEffect(()=>(r&&ze.current&&I.current&&Dt(),()=>{En()}),[J]),M.useEffect(()=>{gr()},[l,u,L,i,pe]),M.useEffect(()=>{if(!r)return;const xe=async()=>{var De;try{const Fe=new Be.Client("wss://xrplcluster.com");await Fe.connect();const Ye=r.currency_code.length>3?At.Buffer.from(r.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):r.currency_code,nt=await Fe.request({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:Ye,issuer:r.issuer_address},ledger_index:"validated"});if(await Fe.disconnect(),(De=nt==null?void 0:nt.result)!=null&&De.amm){const Xe=nt.result.amm,dt=parseFloat(Xe.amount)/1e6,Ke=parseFloat(Xe.amount2.value),Mn=dt/Ke;if(V(Mn),r.amm_xrp_amount&&r.amm_asset_amount){const xr=r.amm_xrp_amount/r.amm_asset_amount,Nn=(Mn-xr)/xr*100;R(Nn)}}}catch(Fe){console.error("Error fetching live price:",Fe)}};xe();const je=setInterval(xe,5e3);return()=>clearInterval(je)},[r]);const He=async()=>{const xe=localStorage.getItem("connectedWallet");if(xe){const je=JSON.parse(xe);if(!je.seed&&je.id)try{const{data:De,error:Fe}=await Ae.from("wallets").select("*").eq("id",je.id).maybeSingle();if(De){const Ye={...De,seed:De.encrypted_seed||De.seed};localStorage.setItem("connectedWallet",JSON.stringify(Ye)),f(Ye);return}}catch(De){console.error("Error refreshing wallet:",De)}f(je)}else f(null)},Pe=async()=>{var xe;try{const De=await(await fetch("https://api.coingecko.com/api/v3/simple/price?ids=ripple&vs_currencies=usd")).json();me(((xe=De.ripple)==null?void 0:xe.usd)||.5)}catch(je){console.error("Error fetching XRP/USD price:",je),me(.5)}},Re=()=>{if(!r||!r.total_supply){We(0);return}const xe=Qe(r),je=parseFloat(r.total_supply),Fe=xe*je*le;We(Fe)},qe=async()=>{try{const{data:xe,error:je}=await Ae.from("meme_tokens").select("*").eq("amm_pool_created",!0).order("created_at",{ascending:!1});if(je)throw je;n(xe||[]);const De=localStorage.getItem("selectedTradeToken");if(De)try{const Fe=JSON.parse(De),Ye=xe==null?void 0:xe.find(nt=>nt.id===Fe.id||nt.currency_code===Fe.currency_code&&nt.issuer_address===Fe.issuer_address);if(Ye){s(Ye),localStorage.removeItem("selectedTradeToken");return}}catch(Fe){console.error("Error parsing stored token:",Fe)}xe&&xe.length>0&&!r&&s(xe[0])}catch(xe){console.error("Error loading tokens:",xe)}},Qe=xe=>!xe||!xe.amm_xrp_amount||!xe.amm_asset_amount?0:xe.amm_xrp_amount/xe.amm_asset_amount,ut=xe=>{if(!xe||!xe.amm_xrp_amount||!xe.amm_asset_amount)return 0;const je=xe.amm_xrp_amount/xe.amm_asset_amount;return xe.supply*je},zt=()=>{if(!r)return console.log("No token selected for chart data"),[];try{const xe=Qe(r);if(!xe||isNaN(xe)||xe<=0)return console.error("Invalid base price:",xe),[];const je=[],De=Math.floor(Date.now()/1e3),Fe=48;for(let Ye=Fe;Ye>=0;Ye--){const nt=De-Ye*3600,Xe=(Math.random()-.5)*.3,dt=(Fe-Ye)/Fe*.15,Ke=xe*(1+Xe+dt);je.push({time:nt,value:Ke,open:Ke*.98,high:Ke*1.03,low:Ke*.97,close:Ke,volume:Math.random()*1e4+1e3})}return X.current=je,je}catch(xe){return console.error("Error generating chart data:",xe),[]}},nr=()=>{En(),!(!r||!Ie.current)&&(ve.current=setInterval(()=>{Mt()},5e3))},En=()=>{ve.current&&(clearInterval(ve.current),ve.current=null)},Mt=()=>{if(!r||!Ie.current||X.current.length===0)return;const xe=Qe(r),je=X.current[X.current.length-1],De=Math.floor(Date.now()/1e3),Fe=(Math.random()-.5)*.02,Ye=xe*(1+Fe);if(De-je.time>=60){const nt={time:De,value:Ye,open:je.close||Ye,high:Math.max(Ye,je.close||Ye)*1.002,low:Math.min(Ye,je.close||Ye)*.998,close:Ye,volume:Math.random()*5e3+500};X.current.push(nt),X.current.length>500&&X.current.shift();try{re==="area"||re==="line"||re==="baseline"?Ie.current.update({time:nt.time,value:nt.value}):Ie.current.update({time:nt.time,open:nt.open,high:nt.high,low:nt.low,close:nt.close}),Ce.current&&Ce.current.update({time:nt.time,value:nt.volume,color:nt.close>=nt.open?"rgba(34, 197, 94, 0.5)":"rgba(239, 68, 68, 0.5)"})}catch(Xe){console.error("Error updating chart:",Xe)}}},Dt=()=>{if(!ze.current||!I.current||!r){console.log("Chart render skipped - missing refs or token");return}try{if(de.current){try{de.current.remove()}catch(dt){console.error("Error removing price chart:",dt)}de.current=null}if(be.current){try{be.current.remove()}catch(dt){console.error("Error removing volume chart:",dt)}be.current=null}ze.current&&(ze.current.innerHTML=""),I.current&&(I.current.innerHTML="");const xe=Hf(ze.current,{width:ze.current.clientWidth,height:500,layout:{background:{color:"transparent"},textColor:"#a78bfa"},grid:{vertLines:{color:"rgba(139, 92, 246, 0.1)"},horzLines:{color:"rgba(139, 92, 246, 0.1)"}},rightPriceScale:{borderColor:"rgba(139, 92, 246, 0.3)",scaleMargins:{top:.1,bottom:.1}},timeScale:{borderColor:"rgba(139, 92, 246, 0.3)",timeVisible:!0,secondsVisible:!1,visible:!1},handleScale:{axisPressedMouseMove:{time:!0,price:!0}}});de.current=xe;const je=zt();if(!je||je.length===0)throw console.error("No chart data generated"),new Error("Unable to generate chart data. Please check token configuration.");let De;const Fe={type:"price",precision:8,minMove:1e-8};switch(re){case"bars":De=xe.addBarSeries({upColor:"#22c55e",downColor:"#ef4444",priceFormat:Fe}),De.setData(je.map(Ke=>({time:Ke.time,open:Ke.open,high:Ke.high,low:Ke.low,close:Ke.close})));break;case"candlestick":De=xe.addCandlestickSeries({upColor:"#22c55e",downColor:"#ef4444",borderVisible:!1,wickUpColor:"#22c55e",wickDownColor:"#ef4444",priceFormat:Fe}),De.setData(je.map(Ke=>({time:Ke.time,open:Ke.open,high:Ke.high,low:Ke.low,close:Ke.close})));break;case"hollow":De=xe.addCandlestickSeries({upColor:"transparent",downColor:"#ef4444",borderUpColor:"#22c55e",borderDownColor:"#ef4444",wickUpColor:"#22c55e",wickDownColor:"#ef4444",priceFormat:Fe}),De.setData(je.map(Ke=>({time:Ke.time,open:Ke.open,high:Ke.high,low:Ke.low,close:Ke.close})));break;case"line":De=xe.addLineSeries({color:"#8b5cf6",lineWidth:2,priceFormat:Fe}),De.setData(je.map(Ke=>({time:Ke.time,value:Ke.close})));break;case"area":De=xe.addAreaSeries({topColor:"rgba(139, 92, 246, 0.4)",bottomColor:"rgba(139, 92, 246, 0.0)",lineColor:"#8b5cf6",lineWidth:2,priceFormat:Fe}),De.setData(je.map(Ke=>({time:Ke.time,value:Ke.close})));break;case"baseline":De=xe.addBaselineSeries({topLineColor:"#22c55e",topFillColor1:"rgba(34, 197, 94, 0.4)",topFillColor2:"rgba(34, 197, 94, 0.0)",bottomLineColor:"#ef4444",bottomFillColor1:"rgba(239, 68, 68, 0.0)",bottomFillColor2:"rgba(239, 68, 68, 0.4)",priceFormat:Fe}),De.setData(je.map(Ke=>({time:Ke.time,value:Ke.close})));break;case"heikin":De=xe.addCandlestickSeries({upColor:"#22c55e",downColor:"#ef4444",borderVisible:!1,wickUpColor:"#22c55e",wickDownColor:"#ef4444",priceFormat:Fe});const dt=je.map((Ke,Mn)=>{if(Mn===0)return Ke;const xr=je[Mn-1],Nn=(Ke.open+Ke.high+Ke.low+Ke.close)/4,Tn=(xr.open+xr.close)/2,is=Math.max(Ke.high,Tn,Nn),Nd=Math.min(Ke.low,Tn,Nn);return{time:Ke.time,open:Tn,high:is,low:Nd,close:Nn}});De.setData(dt);break;default:De=xe.addCandlestickSeries({upColor:"#22c55e",downColor:"#ef4444",borderVisible:!1,wickUpColor:"#22c55e",wickDownColor:"#ef4444",priceFormat:Fe}),De.setData(je.map(Ke=>({time:Ke.time,open:Ke.open,high:Ke.high,low:Ke.low,close:Ke.close})))}Ie.current=De;const Ye=Hf(I.current,{width:I.current.clientWidth,height:120,layout:{background:{color:"transparent"},textColor:"#a78bfa"},grid:{vertLines:{color:"rgba(139, 92, 246, 0.1)"},horzLines:{color:"rgba(139, 92, 246, 0.1)"}},rightPriceScale:{borderColor:"rgba(139, 92, 246, 0.3)",scaleMargins:{top:.1,bottom:.1}},timeScale:{borderColor:"rgba(139, 92, 246, 0.3)",timeVisible:!0,secondsVisible:!1}});be.current=Ye;const nt=Ye.addHistogramSeries({color:"#8b5cf6",priceFormat:{type:"volume"}});nt.setData(je.map(dt=>({time:dt.time,value:dt.volume,color:dt.close>=dt.open?"rgba(34, 197, 94, 0.5)":"rgba(239, 68, 68, 0.5)"}))),Ce.current=nt,xe.timeScale().fitContent(),Ye.timeScale().fitContent(),xe.timeScale().subscribeVisibleTimeRangeChange(()=>{const dt=xe.timeScale().getVisibleRange();dt&&Ye.timeScale().setVisibleRange(dt)});const Xe=()=>{de.current&&ze.current&&de.current.applyOptions({width:ze.current.clientWidth}),be.current&&I.current&&be.current.applyOptions({width:I.current.clientWidth})};window.addEventListener("resize",Xe),setTimeout(()=>{nr()},100)}catch(xe){if(console.error("Error rendering chart:",xe),ge.error("Failed to render chart. Please refresh the page."),de.current){try{de.current.remove()}catch(je){console.error("Error cleaning up price chart:",je)}de.current=null}if(be.current){try{be.current.remove()}catch(je){console.error("Error cleaning up volume chart:",je)}be.current=null}}},pn=()=>{if(!r||!l||isNaN(l))return{tokenAmount:0,xrpAmount:0,priceImpact:0,fee:0};const xe=Qe(r);if(i==="buy"){const je=parseFloat(l),De=je/xe,Fe=je/r.amm_xrp_amount*100;return{tokenAmount:De.toFixed(4),xrpAmount:je.toFixed(4),priceImpact:Fe.toFixed(2),fee:NS.toFixed(2)}}else{const je=parseFloat(l),De=je*xe,Fe=je/r.amm_asset_amount*100;return{tokenAmount:je.toFixed(4),xrpAmount:De.toFixed(4),priceImpact:Fe.toFixed(2),fee:NS.toFixed(2)}}},gr=()=>{if(!pe||!l||!u){B("");return}const xe=pn();if(!xe){B("");return}pe.liquidity;const je=parseFloat(xe.priceImpact),De=parseFloat(L);let Fe=.5;je>10?Fe=Math.max(15,je*1.5):je>5?Fe=Math.max(10,je*1.3):je>2?Fe=Math.max(5,je*1.2):je>1?Fe=3:je>.5&&(Fe=1),De<Fe?B(` Low slippage detected. Recommended: ${Fe.toFixed(1)}% (Price Impact: ${je}%)`):B("")},Rn=async()=>{if(r)try{A(!0);const xe=new Be.Client("wss://xrplcluster.com");await xe.connect();const je=await xe.request({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:r.currency_code,issuer:r.issuer_address},ledger_index:"validated"});if(je.result.amm){const De=je.result.amm,Fe=parseFloat(De.amount)/1e6,Ye=parseFloat(De.amount2.value),nt=Fe/Ye,Xe=nt*r.supply,dt=Fe*.15;Q({marketCap:Xe,liquidity:Fe,volume24h:dt,poolSize:Ye,price:nt})}await xe.disconnect()}catch(xe){console.error("Error fetching market data:",xe),Q(null)}finally{A(!1)}},lt=async()=>{if(!r||!h){E("0");return}try{te(!0);const xe=new Be.Client("wss://xrplcluster.com");await xe.connect();const je=await xe.request({command:"account_lines",account:h.address,ledger_index:"validated"}),De=r.currency_code.length>3?At.Buffer.from(r.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):r.currency_code,Fe=je.result.lines.find(Ye=>Ye.account===r.issuer_address&&(Ye.currency===r.currency_code||Ye.currency===De||Ye.currency===r.currency_code.substring(0,3)));E(Fe?Fe.balance:"0"),await xe.disconnect()}catch(xe){console.error("Error fetching token balance:",xe),E("0")}finally{te(!1)}},Yt=async()=>{if(!r||!h){y(!1);return}try{_(!0);const xe=new Be.Client("wss://xrplcluster.com");await xe.connect();const je=await xe.request({command:"account_lines",account:h.address,ledger_index:"validated"}),De=r.currency_code.length>3?At.Buffer.from(r.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):r.currency_code,Fe=je.result.lines.some(Ye=>Ye.account===r.issuer_address&&(Ye.currency===r.currency_code||Ye.currency===De||Ye.currency===r.currency_code.substring(0,3)));y(Fe),await xe.disconnect()}catch(xe){console.error("Error checking trustline:",xe),y(!1)}finally{_(!1)}},Nt=async()=>{if(!r||!h||!h.seed){ge.error("Wallet seed required for trustline setup");return}try{x(!0);const xe=new Be.Client("wss://xrplcluster.com");await xe.connect();const je=Be.Wallet.fromSeed(h.seed),De={TransactionType:"TrustSet",Account:h.address,LimitAmount:{currency:r.currency_code,issuer:r.issuer_address,value:"1000000000"}},Fe=await xe.autofill(De),Ye=je.sign(Fe);(await xe.submitAndWait(Ye.tx_blob)).result.meta.TransactionResult==="tesSUCCESS"?(ge.success("Trustline established successfully!"),y(!0),lt()):ge.error("Failed to establish trustline"),await xe.disconnect()}catch(xe){console.error("Error setting up trustline:",xe),ge.error("Failed to setup trustline: "+xe.message)}finally{x(!1)}},Pt=(xe,je,De={})=>{ne(Fe=>{const Ye=[...Fe];return je==="error"?Ye[xe]={...Ye[xe],error:!0,description:De.error||Ye[xe].description}:je==="success"&&(Ye[xe]={...Ye[xe],description:De.description||Ye[xe].description,txHash:De.txHash}),Ye}),je!=="error"&&se(xe+1)},Jt=async()=>{var Ye;if(!h||!h.seed){ge.error("Wallet seed required for trading");return}if(!p){ge.error("Please setup trustline first");return}const xe=pn(),De=[{title:"Connecting to XRPL",description:"Establishing connection to the XRP Ledger network"},{title:`${i==="buy"?"Buying":"Selling"} ${r.token_name}`,description:`Swapping ${i==="buy"?xe.xrpAmount+" XRP for "+xe.tokenAmount:xe.tokenAmount+" for "+xe.xrpAmount+" XRP"} ${r.token_name}`},{title:"Transaction Complete",description:"Trade executed successfully"}];ne(De),se(0),N(!0),v(!0);let Fe=null;try{Pt(0,"loading"),Fe=new Be.Client("wss://xrplcluster.com"),await Fe.connect(),Pt(0,"success",{description:"Connected to XRPL successfully"});const nt=Be.Wallet.fromSeed(h.seed),Xe=r.currency_code.length>3?At.Buffer.from(r.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):r.currency_code,dt=1+parseFloat(L)/100;Pt(1,"loading");let Ke;if(i==="buy"){const Tn=parseFloat(xe.tokenAmount)/dt,is=parseFloat(xe.xrpAmount)*dt;Ke={TransactionType:"Payment",Account:h.address,Destination:h.address,Amount:{currency:Xe,issuer:r.issuer_address,value:AS(Tn)},SendMax:Be.xrpToDrops(TS(is).toString())}}else{const Tn=parseFloat(xe.tokenAmount)*dt,is=parseFloat(xe.xrpAmount)/dt;Ke={TransactionType:"Payment",Account:h.address,Destination:h.address,Amount:Be.xrpToDrops(TS(is).toString()),SendMax:{currency:Xe,issuer:r.issuer_address,value:AS(Tn)}}}console.log(`
 ${i.toUpperCase()} Swap:`),console.log(`   ${i==="buy"?"Spending":"Receiving"}: ${xe.xrpAmount} XRP`),console.log(`   ${i==="buy"?"Receiving":"Spending"}: ${xe.tokenAmount} ${r.token_name}`),console.log(`   Slippage: ${L}%`);const Mn=await Fe.autofill(Ke),xr=nt.sign(Mn),Nn=await Fe.submitAndWait(xr.tx_blob,{timeout:45e3});if(Nn.result.meta.TransactionResult==="tesSUCCESS"){const Tn=i==="buy"?parseFloat(((Ye=Nn.result.meta.delivered_amount)==null?void 0:Ye.value)||xe.tokenAmount):xe.tokenAmount;Pt(1,"success",{description:`${i==="buy"?"Bought":"Sold"} ${Tn.toFixed(4)} ${r.token_name}`,txHash:Nn.result.hash}),await Js({userAddress:h.address,actionType:Qs.SWAP_EXECUTED,description:`${i==="buy"?"Bought":"Sold"} ${Tn.toFixed(4)} ${r.token_name}`,details:{tradeType:i,tokenAmount:Tn.toFixed(4),xrpAmount:xe.xrpAmount},txHash:Nn.result.hash,tokenId:r.id}),Pt(2,"success",{description:"Trade completed successfully"}),await lt(),setTimeout(()=>{N(!1),c(""),d("")},2e3),ge.success(`Successfully ${i==="buy"?"bought":"sold"} ${xe.tokenAmount} ${r.token_name}!`)}else throw new Error(`Transaction failed: ${Nn.result.meta.TransactionResult}`);Fe&&Fe.isConnected()&&await Fe.disconnect()}catch(nt){console.error("Error executing trade:",nt);let Xe=nt.message||"Unknown error occurred";if(Xe.includes("xrpToDrops")||Xe.includes("decimal")||Xe.includes("precision")||Xe.includes("Decimal precision out of range"))Xe="Amount precision error. Use round numbers (e.g., 1.50 instead of 1.5678).";else if(Xe.includes("too small")||Xe.includes("too large"))Xe=Xe;else if(Xe.includes("Invalid XRP amount")||Xe.includes("Invalid token amount"))Xe="Invalid amount entered. Please check your trade amounts.";else if(Xe.includes("tecPATH_DRY"))Xe="Insufficient liquidity in the pool. Try a smaller amount or increase slippage.";else if(Xe.includes("tecUNFUNDED_PAYMENT"))Xe="Insufficient funds for this transaction. Check your balance.";else if(Xe.includes("tecUNFUNDED"))Xe="Insufficient XRP balance for this transaction and fees.";else if(Xe.includes("tecNO_LINE"))Xe="Trustline not found. Please set up trustline first.";else if(Xe.includes("tecPATH_PARTIAL")){const Ke=parseFloat(L),Mn=Math.min(Ke*2,50);Y({currentSlippage:Ke,suggestedSlippage:Mn,tradeType:i.charAt(0).toUpperCase()+i.slice(1),amount:l,tokenName:r.token_name}),P(!0),oe(!1),_e(!1),Ne(null),Z(!1);return}else Xe.includes("tecNO_AUTH")?Xe="Token issuer requires authorization. Cannot trade this token.":Xe.includes("temREDUNDANT")?Xe="Transaction expired. Please try again.":Xe.includes("LastLedgerSequence")?Xe="Transaction took too long to process. Please try again.":Xe.includes("timeout")||Xe.includes("Connection timeout")?Xe="Connection timeout. Please check your internet and try again.":Xe.includes("Failed to fetch")?Xe="Network error. Please check your connection and try again.":Xe.includes("WebSocket")&&(Xe="Connection to XRPL failed. Please try again.");const dt=Math.min(he,G.length-1);Pt(dt,"error",{error:Xe}),ge.error(Ke=>o.jsxs("div",{className:"flex items-start gap-3 max-w-md",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-semibold mb-1",children:"Trade failed"}),o.jsx("div",{className:"text-sm opacity-90",children:Xe})]}),o.jsx("button",{onClick:()=>ge.dismiss(Ke.id),className:"flex-shrink-0 ml-2 text-white/70 hover:text-white transition-colors",children:""})]}),{duration:1e4,style:{background:"#991b1b",color:"#fef2f2",border:"1px solid #dc2626",maxWidth:"500px"}})}finally{if(v(!1),Fe&&Fe.isConnected())try{await Fe.disconnect()}catch(nt){console.error("Error disconnecting client:",nt)}}},Ht=async()=>{F&&(Z(!0),$(F.suggestedSlippage.toString()),setTimeout(async()=>{try{await Jt(),oe(!0),_e(!0)}catch(xe){oe(!0),_e(!1),Ne(xe.message||"Trade failed. Please try again.")}finally{Z(!1)}},3e3))},tn=()=>{P(!1),Y(null),Z(!1),oe(!1),_e(!1),Ne(null)},Sn=()=>{P(!1),Y(null),Z(!1),oe(!1),_e(!1),Ne(null),N(!1),c(""),d("")},To=async()=>{if(r){K(!0),Ge(!0);try{const xe=new Be.Client("wss://s1.ripple.com");await xe.connect();const De=Date.now()-24*60*60*1e3,Fe=Math.floor(De/1e3)-946684800,nt=(await xe.request({command:"account_tx",account:r.issuer_address,ledger_index_min:-1,ledger_index_max:-1,limit:200})).result.transactions.filter(Xe=>Xe.tx.date>=Fe).filter(Xe=>{const dt=Xe.tx.TransactionType;return["Payment","AMMDeposit","AMMWithdraw"].includes(dt)}).map(Xe=>({...Xe.tx,meta:Xe.meta,hash:Xe.tx.hash})).sort((Xe,dt)=>dt.date-Xe.date);g(nt),await xe.disconnect()}catch(xe){console.error("Error fetching pool history:",xe),ge.error("Failed to load transaction history"),g([])}finally{K(!1)}}};M.useEffect(()=>{$e&&r&&j.length===0&&To()},[$e]);const Ln=pn(),nn=ue>0?ue:r?Qe(r):0,ks=r?ut(r):0,Ma=H||(r&&r.amm_xrp_amount?((nn-r.amm_xrp_amount/r.amm_asset_amount*.95)/(r.amm_xrp_amount/r.amm_asset_amount*.95)*100).toFixed(2):"0.00");return r&&At.Buffer.from(r.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-purple-200",children:"Trade"}),o.jsx("p",{className:"text-purple-400 text-sm",children:"Buy and sell meme tokens"})]}),r&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>Ge(!0),className:"btn-primary text-white px-4 py-2 rounded-lg font-medium text-sm",children:" History"}),o.jsx("a",{href:`https://xmagnetic.org/dex/${r.currency_code}+${r.issuer_address}_XRP+XRP?network=mainnet`,target:"_blank",rel:"noopener noreferrer",className:"btn-primary text-white px-4 py-2 rounded-lg font-medium text-sm",children:"Magnetic DEX "})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:h-[calc(100vh-12rem)]",children:[o.jsxs("div",{className:"lg:col-span-2 flex flex-col space-y-4",children:[o.jsxs("div",{className:"glass rounded-lg p-4 overflow-hidden",children:[r&&o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Lt,{token:r,size:"sm"}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-base font-bold text-purple-200",children:[r.token_name,"/XRP"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"text-lg font-bold text-purple-200",children:[nn.toFixed(8)," XRP"]}),o.jsxs("span",{className:`text-xs font-medium px-1.5 py-0.5 rounded ${parseFloat(Ma)>=0?"text-green-300 bg-green-500/10":"text-red-300 bg-red-500/10"}`,children:[parseFloat(Ma)>=0?"+":"",Ma,"%"]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("select",{value:J,onChange:xe=>ce(xe.target.value),className:"input px-2 py-1 text-xs text-purple-200",children:[o.jsx("option",{value:"5m",children:"5m"}),o.jsx("option",{value:"15m",children:"15m"}),o.jsx("option",{value:"30m",children:"30m"}),o.jsx("option",{value:"1h",children:"1h"}),o.jsx("option",{value:"4h",children:"4h"}),o.jsx("option",{value:"1d",children:"1D"})]}),o.jsxs("select",{value:re,onChange:xe=>z(xe.target.value),className:"input px-2 py-1 text-xs text-purple-200",children:[o.jsx("option",{value:"candlestick",children:" Candles"}),o.jsx("option",{value:"bars",children:" Bars"}),o.jsx("option",{value:"hollow",children:" Hollow"}),o.jsx("option",{value:"heikin",children:" Heikin Ashi"}),o.jsx("option",{value:"line",children:" Line"}),o.jsx("option",{value:"area",children:" Area"}),o.jsx("option",{value:"baseline",children:" Baseline"})]}),o.jsx("button",{onClick:Rn,disabled:C,className:"btn-secondary px-2 py-1 text-xs disabled:opacity-50",children:""})]})]}),r?o.jsxs(o.Fragment,{children:[o.jsx("div",{ref:ze,className:"w-full h-[500px] overflow-hidden bg-purple-900/20 rounded"}),o.jsx("div",{ref:I,className:"w-full h-[120px] overflow-hidden bg-purple-900/20 rounded mt-1"})]}):o.jsx("div",{className:"w-full h-[620px] flex items-center justify-center bg-purple-900/20 rounded",children:o.jsxs("div",{className:"text-center text-purple-400",children:[o.jsx("div",{className:"text-4xl mb-2",children:""}),o.jsx("p",{children:"Select a token to view chart"})]})})]}),o.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[o.jsxs("div",{className:"glass rounded-lg p-2",children:[o.jsx("div",{className:"text-purple-400 text-xs",children:"Market Cap"}),o.jsxs("div",{className:"text-sm font-bold text-purple-200",children:[pe?pe.marketCap.toFixed(2):ks.toFixed(2)," XRP"]}),ye>0&&o.jsxs("div",{className:"text-xs text-purple-400",children:["$",ye>=1e6?`${(ye/1e6).toFixed(2)}M`:ye>=1e3?`${(ye/1e3).toFixed(2)}K`:ye.toFixed(2)]})]}),o.jsxs("div",{className:"glass rounded-lg p-2",children:[o.jsx("div",{className:"text-purple-400 text-xs",children:"Liquidity"}),o.jsxs("div",{className:"text-sm font-bold text-purple-200",children:[pe?pe.liquidity.toFixed(2):r?r.amm_xrp_amount.toFixed(2):0," XRP"]})]}),o.jsxs("div",{className:"glass rounded-lg p-2",children:[o.jsx("div",{className:"text-purple-400 text-xs",children:"Volume 24h"}),o.jsxs("div",{className:"text-sm font-bold text-purple-200",children:[pe?pe.volume24h.toFixed(2):r?(r.amm_xrp_amount*.15).toFixed(2):0," XRP"]})]}),o.jsxs("div",{className:"glass rounded-lg p-2",children:[o.jsx("div",{className:"text-purple-400 text-xs",children:"Pool Size"}),o.jsxs("div",{className:"text-sm font-bold text-purple-200",children:[pe?(pe.poolSize/1e3).toFixed(0):r?(r.amm_asset_amount/1e3).toFixed(0):0,"K"]})]})]}),o.jsxs("div",{className:"glass rounded-lg p-3 flex-1",children:[o.jsx("h3",{className:"text-base font-bold text-purple-200 mb-2",children:"Token Info"}),o.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1.5 text-xs",children:[o.jsxs("div",{className:"flex flex-col py-1",children:[o.jsx("span",{className:"text-purple-400 text-[10px]",children:"Supply"}),o.jsx("span",{className:"text-purple-200 font-bold text-xs",children:r?r.supply.toLocaleString():0})]}),o.jsxs("div",{className:"flex flex-col py-1",children:[o.jsx("span",{className:"text-purple-400 text-[10px]",children:"Circulating"}),o.jsx("span",{className:"text-purple-200 font-bold text-xs",children:r?(r.supply*.9).toLocaleString():0})]}),o.jsxs("div",{className:"flex flex-col py-1",children:[o.jsx("span",{className:"text-purple-400 text-[10px]",children:"Price"}),o.jsxs("span",{className:"text-purple-200 font-bold text-xs",children:[r?nn.toFixed(8):0," XRP"]})]}),o.jsxs("div",{className:"flex flex-col py-1",children:[o.jsx("span",{className:"text-purple-400 text-[10px]",children:"Liquidity"}),o.jsxs("span",{className:"text-purple-200 font-bold text-xs",children:[pe?pe.liquidity.toFixed(2):r?r.amm_xrp_amount.toFixed(2):0," XRP"]})]}),o.jsxs("div",{className:"col-span-2 pt-2 border-t border-purple-500/20",children:[o.jsx("div",{className:"text-purple-400 text-[10px] mb-1",children:"Currency Code"}),o.jsx("div",{className:"text-purple-300 text-[11px] font-mono bg-black/30 px-2 py-1 rounded",children:r?r.currency_code:""})]}),o.jsxs("div",{className:"col-span-2 pt-2 border-t border-purple-500/20",children:[o.jsx("div",{className:"text-purple-400 text-[10px] mb-1",children:"Issuer Address"}),o.jsx("div",{className:"text-purple-300 text-[10px] font-mono bg-black/30 px-2 py-1 rounded break-all",children:r?r.issuer_address:""})]})]})]})]}),o.jsxs("div",{className:"space-y-3",children:[!h&&o.jsx("div",{className:"glass rounded-lg p-4 bg-yellow-500/10 border border-yellow-500/30",children:o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("div",{className:"text-3xl",children:""}),o.jsx("h3",{className:"text-sm font-bold text-yellow-200",children:"Wallet Not Connected"}),o.jsx("p",{className:"text-yellow-300 text-xs",children:"Connect wallet from Setup"})]})}),o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsx("h3",{className:"text-lg font-bold text-purple-200 mb-3",children:"Select Token"}),o.jsxs("select",{value:(r==null?void 0:r.id)||"",onChange:xe=>{const je=e.find(De=>De.id===xe.target.value);s(je)},className:"input w-full mb-3 text-purple-200",children:[o.jsx("option",{value:"",children:"Choose a token..."}),e.map(xe=>o.jsxs("option",{value:xe.id,children:[xe.token_name," - ",Qe(xe).toFixed(8)," XRP"]},xe.id))]}),r&&o.jsx("div",{className:"glass rounded-lg p-3 bg-blue-500/10 border border-blue-500/30 mb-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"text-blue-400 text-xs",children:"Trading Pair"}),o.jsxs("div",{className:"text-blue-200 font-bold",children:[r.currency_code,"/XRP"]})]})}),r&&h&&o.jsxs("div",{className:"mt-3 space-y-2",children:[o.jsxs("div",{className:"glass rounded-lg p-3 bg-purple-500/10 border border-purple-500/30",children:[o.jsx("div",{className:"text-purple-300 text-xs mb-1",children:"Your Balance"}),o.jsx("div",{className:"text-lg font-bold text-purple-200",children:D?o.jsx("span",{className:"animate-pulse",children:"Loading..."}):`${parseFloat(T).toFixed(4)} ${r.token_name}`})]}),b?o.jsx("div",{className:"glass rounded-lg p-4 text-center",children:o.jsx("div",{className:"text-purple-300 animate-pulse",children:"Checking trustline..."})}):p?o.jsx("div",{className:"glass rounded-lg p-4 bg-green-500/10 border border-green-500/30",children:o.jsxs("div",{className:"flex items-center gap-2 justify-center text-green-300",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),o.jsx("span",{className:"text-sm font-medium",children:"Trustline Active"})]})}):o.jsx("button",{onClick:Nt,disabled:m,className:"w-full btn-primary text-white py-3 rounded-lg font-medium disabled:opacity-50",children:m?"Setting up Trustline...":" Setup Trustline"})]})]}),o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-lg font-bold text-purple-200",children:"Trade"}),o.jsxs("select",{value:ie,onChange:xe=>q(xe.target.value),className:"input px-3 py-1.5 text-sm text-purple-200 bg-purple-900/50 border-purple-500/30",children:[o.jsx("option",{value:"amm",children:"AMM Pool"}),o.jsx("option",{value:"market",children:"Market"})]})]}),o.jsxs("div",{className:"flex gap-2 mb-3",children:[o.jsx("button",{onClick:()=>a("buy"),className:`flex-1 py-3 rounded-lg font-medium transition-all ${i==="buy"?"bg-green-600 text-white":"glass text-purple-300"}`,children:"Buy"}),o.jsx("button",{onClick:()=>a("sell"),className:`flex-1 py-3 rounded-lg font-medium transition-all ${i==="sell"?"bg-red-600 text-white":"glass text-purple-300"}`,children:"Sell"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:i==="buy"?"XRP Amount":"Token Amount"}),o.jsx("input",{type:"number",value:l,onChange:xe=>{const je=xe.target.value;c(je)},placeholder:"0.00",step:"0.000001",className:"input w-full text-purple-200 text-lg"}),o.jsx("div",{className:"text-purple-400 text-xs mt-1",children:i==="buy"?"Enter XRP to spend":`Enter ${(r==null?void 0:r.token_name)||"tokens"} to sell`})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Slippage Tolerance"}),o.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[["0.1","0.5","1","3"].map(xe=>o.jsxs("button",{onClick:()=>$(xe),className:`py-2 rounded-lg text-sm font-medium transition-all ${L===xe?"bg-purple-600 text-white":"glass text-purple-300 hover:bg-purple-900/30"}`,children:[xe,"%"]},xe)),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"number",value:L,onChange:xe=>$(xe.target.value),placeholder:"0.5",className:"input w-full px-2 py-2 text-sm text-purple-200 text-center",step:"0.1",min:"0.1",max:"50"}),o.jsx("div",{className:"absolute inset-y-0 right-2 flex items-center pointer-events-none text-purple-400 text-xs",children:"%"})]})]}),o.jsxs("div",{className:"text-purple-400 text-xs mt-1",children:["Trade will revert if price changes by more than ",L,"%"]}),k&&o.jsxs("div",{className:"mt-2 p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:[o.jsx("p",{className:"text-yellow-400 text-sm",children:k}),o.jsx("button",{onClick:()=>{const xe=pn();if(xe){const je=parseFloat(xe.priceImpact);let De=.5;je>10?De=Math.max(15,je*1.5):je>5?De=Math.max(10,je*1.3):je>2?De=Math.max(5,je*1.2):je>1?De=3:je>.5&&(De=1),$(De.toFixed(1))}},className:"mt-2 text-xs px-3 py-1 bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-300 rounded-lg transition-colors",children:"Use Recommended Slippage"})]})]}),l&&!isNaN(l)&&parseFloat(l)>0&&o.jsxs("div",{className:"glass rounded-lg p-4 space-y-3",children:[o.jsx("h4",{className:"font-bold text-purple-200",children:"Estimate"}),o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{className:"text-purple-400 text-sm",children:["You ",i==="buy"?"Receive":"Get"]}),o.jsx("span",{className:"text-purple-200 font-bold",children:i==="buy"?`${Ln.tokenAmount} ${(r==null?void 0:r.token_name)||""}`:`${Ln.xrpAmount} XRP`})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-purple-400 text-sm",children:"Price"}),o.jsxs("span",{className:"text-purple-200",children:[nn.toFixed(8)," XRP"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-purple-400 text-sm",children:"Price Impact"}),o.jsxs("span",{className:`font-medium ${parseFloat(Ln.priceImpact)>5?"text-red-400":"text-green-400"}`,children:[Ln.priceImpact,"%"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-purple-400 text-sm",children:"Trading Fee"}),o.jsxs("span",{className:"text-purple-200",children:[Ln.fee," XRP"]})]}),parseFloat(Ln.priceImpact)>10&&o.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded p-3 text-yellow-200 text-xs",children:" High price impact! Consider reducing trade size."})]}),o.jsx("button",{onClick:Jt,disabled:!h||!p||!l||isNaN(l)||parseFloat(l)<=0||w,className:`w-full py-4 rounded-lg font-bold text-lg transition-all ${i==="buy"?"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800":"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800"} text-white shadow-lg disabled:opacity-50 disabled:cursor-not-allowed`,children:w?"Processing...":h?p?`${i==="buy"?" Buy":" Sell"} ${(r==null?void 0:r.currency_code)||"Token"}`:"Setup Trustline First":"Connect Wallet First"})]})]})]})]}),o.jsx(Hj,{isOpen:ee,steps:G,currentStep:he,onClose:()=>N(!1),canClose:he>=G.length||G.some(xe=>xe.error),title:i==="buy"?" Buying Token on XRPL":" Selling Token on XRPL",successTitle:i==="buy"?" Purchase Successful!":" Sale Successful!",failTitle:i==="buy"?" Purchase Failed":" Sale Failed"}),F&&o.jsx(KW,{isOpen:O,currentSlippage:F.currentSlippage,suggestedSlippage:F.suggestedSlippage,tradeType:F.tradeType,amount:F.amount,tokenName:F.tokenName,onRetry:Ht,onCancel:tn,onClose:Sn,isRetrying:W,retryComplete:ae,retrySuccess:fe,retryError:Te}),o.jsx(qW,{isOpen:$e,onClose:()=>Ge(!1),token:r,transactions:j,loading:S})]})}function YW({bot:t,onClose:e}){const[n,r]=M.useState([]),[s,i]=M.useState(!0);M.useEffect(()=>{a()},[t.id]);const a=async()=>{try{i(!0);const{data:u,error:d}=await Ae.from("bot_trades").select("*").eq("bot_id",t.id).order("created_at",{ascending:!1}).limit(100);if(d)throw d;r(u||[])}catch(u){console.error("Error loading trades:",u)}finally{i(!1)}},l=u=>u.status==="failed"?"text-red-400":u.trade_type==="BUY"?"text-green-400":u.trade_type==="SELL"?"text-yellow-400":"text-gray-400",c=u=>u.status==="failed"?"":u.trade_type==="BUY"?"":u.trade_type==="SELL"?"":"";return o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h3",{className:"text-2xl font-bold text-purple-200",children:["Trade History: ",t.name]}),o.jsx("button",{onClick:e,className:"text-purple-400 hover:text-purple-200 text-2xl",children:""})]}),o.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[o.jsxs("div",{className:"glass rounded-lg p-4 bg-purple-500/10",children:[o.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"Total Trades"}),o.jsx("div",{className:"text-2xl font-bold text-purple-200",children:t.total_trades||0})]}),o.jsxs("div",{className:"glass rounded-lg p-4 bg-green-500/10",children:[o.jsx("div",{className:"text-green-400 text-xs mb-1",children:"Successful"}),o.jsx("div",{className:"text-2xl font-bold text-green-400",children:t.successful_trades||0})]}),o.jsxs("div",{className:"glass rounded-lg p-4 bg-red-500/10",children:[o.jsx("div",{className:"text-red-400 text-xs mb-1",children:"Failed"}),o.jsx("div",{className:"text-2xl font-bold text-red-400",children:t.failed_trades||0})]}),o.jsxs("div",{className:"glass rounded-lg p-4 bg-blue-500/10",children:[o.jsx("div",{className:"text-blue-400 text-xs mb-1",children:"Success Rate"}),o.jsxs("div",{className:"text-2xl font-bold text-blue-400",children:[t.total_trades>0?(t.successful_trades/t.total_trades*100).toFixed(1):0,"%"]})]})]}),s?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-4xl mb-4",children:""}),o.jsx("p",{className:"text-purple-300",children:"Loading trades..."})]}):n.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-6xl mb-4",children:""}),o.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-2",children:"No Trades Yet"}),o.jsx("p",{className:"text-purple-400",children:"This bot hasn't executed any trades yet"})]}):o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"grid grid-cols-7 gap-4 px-4 py-2 text-purple-400 text-sm font-medium border-b border-purple-500/30",children:[o.jsx("div",{children:"Type"}),o.jsx("div",{className:"text-right",children:"Amount"}),o.jsx("div",{className:"text-right",children:"XRP Cost"}),o.jsx("div",{className:"text-right",children:"Price"}),o.jsx("div",{className:"text-right",children:"Status"}),o.jsx("div",{className:"text-right",children:"Time"}),o.jsx("div",{className:"text-center",children:"TX"})]}),n.map(u=>o.jsxs("div",{className:"glass rounded-lg p-4 grid grid-cols-7 gap-4 items-center hover:bg-purple-500/5 transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:c(u)}),o.jsx("span",{className:`font-bold ${l(u)}`,children:u.trade_type})]}),o.jsx("div",{className:"text-right text-purple-200 font-medium",children:parseFloat(u.amount).toFixed(4)}),o.jsxs("div",{className:"text-right text-purple-200 font-medium",children:[parseFloat(u.xrp_cost).toFixed(4)," XRP"]}),o.jsx("div",{className:"text-right text-purple-300 text-sm",children:parseFloat(u.price).toFixed(8)}),o.jsx("div",{className:"text-right",children:o.jsx("span",{className:`px-2 py-1 rounded text-xs ${u.status==="success"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:u.status})}),o.jsx("div",{className:"text-right text-purple-400 text-xs",children:new Date(u.created_at).toLocaleTimeString()}),o.jsx("div",{className:"text-center",children:u.tx_hash?o.jsxs("a",{href:`https://xrpscan.com/tx/${u.tx_hash}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 text-xs underline flex items-center justify-center gap-1",title:"View on XRPScan (Mainnet)",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"View"})]}):o.jsx("span",{className:"text-gray-500 text-xs",children:"-"})})]},u.id))]}),o.jsx("div",{className:"flex justify-end pt-4 border-t border-purple-500/30",children:o.jsx("button",{onClick:e,className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium",children:"Close"})})]})})}const JW=(t,e=6)=>{const n=parseFloat(t);if(isNaN(n)||n<=0)throw new Error("Invalid amount");const r=Math.pow(10,e);return Math.floor(n*r)/r},Uy=t=>JW(t,6),CS=t=>{const e=parseFloat(t);if(isNaN(e)||e<=0)throw new Error("Invalid token amount");return e.toFixed(6)},Ch=t=>parseFloat(t).toFixed(2),jS=(t,e)=>{const n=e-t,r=t+Math.random()*n;return Uy(r)},jh=5,Kg="rphatRpwXcPAo7CVm46dC78JAQ6kLMqb2M",$r=.1,qg=100,Bt={ACCUMULATE:"accumulate",DISTRIBUTE:"distribute",BALANCED:"balanced"};function QW(){const[t,e]=M.useState([]),[n,r]=M.useState({}),[s,i]=M.useState(null),[a,l]=M.useState([]),[c,u]=M.useState(!1),[d,h]=M.useState(!1),[f,p]=M.useState(null),[y,b]=M.useState(null),[_,m]=M.useState({}),[x,w]=M.useState({}),[v,T]=M.useState({}),[E,D]=M.useState("grid"),[te,re]=M.useState(""),[z,J]=M.useState([]),[ce,pe]=M.useState("grid"),[Q,ue]=M.useState(""),[V,H]=M.useState([]),[R,C]=M.useState("name"),[A,L]=M.useState({name:"",tokenId:"",strategy:Bt.BALANCED,interval:15,minAmount:.5,maxAmount:2,slippage:10,buyProbability:50}),[$,ie]=M.useState(!1),[q,G]=M.useState({show:!1,message:""}),[ne,he]=M.useState(0),se=M.useRef({}),ee=M.useRef(new Set);M.useEffect(()=>{F(),N(),k()},[]),M.useEffect(()=>{const I=setInterval(()=>{he(de=>de+1)},1e3);return()=>clearInterval(I)},[]),M.useEffect(()=>{t.length>0&&Y()},[t]),M.useEffect(()=>{if(s){ae(),k(),B();const I=setInterval(()=>{Z()},5e3);return()=>clearInterval(I)}},[s]),M.useEffect(()=>{const I=()=>{N()};return window.addEventListener("walletConnected",I),window.addEventListener("walletDisconnected",I),()=>{window.removeEventListener("walletConnected",I),window.removeEventListener("walletDisconnected",I)}},[]);const N=()=>{const I=localStorage.getItem("connectedWallet");I&&i(JSON.parse(I))},k=async()=>{if(s)try{const{data:I,error:de}=await Ae.from("token_favorites").select("token_id").eq("wallet_address",s.address);if(de)throw de;J((I==null?void 0:I.map(be=>be.token_id))||[])}catch(I){console.error("Error loading favorites:",I)}},B=()=>{if(s)try{const I=localStorage.getItem(`bot_favorites_${s.address}`);I&&H(JSON.parse(I))}catch(I){console.error("Error loading bot favorites:",I)}},O=I=>{if(!s)return;const de=V.includes(I),be=de?V.filter(Ie=>Ie!==I):[...V,I];H(be),localStorage.setItem(`bot_favorites_${s.address}`,JSON.stringify(be)),ge.success(de?"Removed from favorites":"Added to favorites")},P=async I=>{if(!s)return;const de=z.includes(I);try{if(de){const{error:be}=await Ae.from("token_favorites").delete().eq("wallet_address",s.address).eq("token_id",I);if(be)throw be;J(Ie=>Ie.filter(Ce=>Ce!==I)),ge.success("Removed from favorites")}else{const{error:be}=await Ae.from("token_favorites").insert({wallet_address:s.address,token_id:I});if(be)throw be;J(Ie=>[...Ie,I]),ge.success("Added to favorites")}}catch(be){console.error("Error toggling favorite:",be),ge.error("Failed to update favorites")}},F=async()=>{try{const{data:I,error:de}=await Ae.from("meme_tokens").select("*").eq("amm_pool_created",!0).order("created_at",{ascending:!1});if(de)throw de;e(I||[])}catch(I){console.error("Error loading tokens:",I)}},Y=async()=>{const I=t.filter(Ie=>!n[Ie.id]&&!ee.current.has(Ie.id));if(I.length===0)return;I.forEach(Ie=>ee.current.add(Ie.id));const de=I.map(async Ie=>{try{const Ce=await W(Ie);return{tokenId:Ie.id,poolData:Ce}}catch(Ce){return console.error(`Error fetching pool data for ${Ie.token_name}:`,Ce),{tokenId:Ie.id,poolData:null}}finally{ee.current.delete(Ie.id)}}),be=await Promise.all(de);r(Ie=>{const Ce={...Ie};return be.forEach(({tokenId:X,poolData:ve})=>{ve&&(Ce[X]=ve)}),Ce})},W=async I=>{var de;try{const be=new Be.Client("wss://xrplcluster.com");await be.connect();const Ie=I.currency_code.length>3?At.Buffer.from(I.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):I.currency_code,Ce={command:"amm_info",asset:{currency:"XRP"},asset2:{currency:Ie,issuer:I.issuer_address},ledger_index:"validated"},X=await be.request(Ce);if(await be.disconnect(),(de=X==null?void 0:X.result)!=null&&de.amm){const ve=X.result.amm,He=parseFloat(ve.amount)/1e6,Pe=parseFloat(ve.amount2.value),Re=He/Pe;return{amm_xrp_amount:He,amm_asset_amount:Pe,price:Re}}}catch(be){console.error(`Error fetching pool for ${I.token_name}:`,be)}return null},Z=async()=>{if(s)try{const{data:I,error:de}=await Ae.from("trading_bots").select("*").eq("wallet_address",s.address).order("created_at",{ascending:!1});if(de)throw de;l(be=>(I||[]).map(Ce=>{const X=be.find(ve=>ve.id===Ce.id);return Ce.next_trade_time&&Ce.next_action&&(m(ve=>({...ve,[Ce.id]:new Date(Ce.next_trade_time).getTime()})),w(ve=>({...ve,[Ce.id]:{action:Ce.next_action,tokenAmount:Ce.next_token_amount,xrpAmount:Ce.next_xrp_amount,estimatedPrice:Ce.next_price}}))),X?{...Ce,_localStatus:X._localStatus}:Ce}))}catch(I){console.error("Error refreshing bots:",I)}},ae=async()=>{if(s)try{ie(!0);const{data:I,error:de}=await Ae.from("trading_bots").select("*").eq("wallet_address",s.address).order("created_at",{ascending:!1});if(de)throw de;if(l(I||[]),I&&I.length>0&&t.length>0){const Ie=[...new Set(I.map(X=>X.token_id))],Ce=t.filter(X=>Ie.includes(X.id));for(const X of Ce)!n[X.id]&&!ee.current.has(X.id)&&(ee.current.add(X.id),W(X).then(ve=>{ve&&r(He=>({...He,[X.id]:ve}))}).finally(()=>{ee.current.delete(X.id)}))}const be=JSON.parse(localStorage.getItem("runningBots")||"[]");I==null||I.forEach(Ie=>{if(Ie.next_trade_time&&Ie.next_action&&(m(Ce=>({...Ce,[Ie.id]:new Date(Ie.next_trade_time).getTime()})),w(Ce=>({...Ce,[Ie.id]:{action:Ie.next_action,tokenAmount:Ie.next_token_amount,xrpAmount:Ie.next_xrp_amount,estimatedPrice:Ie.next_price}}))),be.includes(Ie.id)){const Ce=t.find(X=>X.id===Ie.token_id);Ce&&n[Ce.id]&&_e(Ie)}})}catch(I){console.error("Error loading bots:",I),ge.error("Failed to load bots")}finally{ie(!1)}},oe=async()=>{if(!A.name||!A.tokenId){ge.error("Bot name and token are required");return}if(!s){ge.error("Connect wallet to create trading bots");return}if(A.interval<1){ge.error("Minimum interval is 1 minute");return}if(A.minAmount<$r||A.maxAmount>qg){ge.error(`XRP amounts must be between ${$r} and ${qg}`);return}if(A.minAmount>=A.maxAmount){ge.error("Min amount must be less than max amount");return}let I=null;const de=s.address===Kg;try{if(ie(!0),de)G({show:!0,message:"Receiver wallet detected - Creating bot for free..."}),await new Promise(X=>setTimeout(X,500));else{G({show:!0,message:`Processing ${jh} XRP bot creation fee...`});try{I=new Be.Client("wss://xrplcluster.com"),await I.connect();const X=Be.Wallet.fromSeed(s.seed),ve={TransactionType:"Payment",Account:s.address,Destination:Kg,Amount:Be.xrpToDrops(jh.toString()),Memos:[{Memo:{MemoData:At.Buffer.from(`Bot Creation Fee: ${A.name}`,"utf8").toString("hex").toUpperCase()}}]},He=await I.autofill(ve),Pe=X.sign(He),Re=await I.submitAndWait(Pe.tx_blob);if(Re.result.meta.TransactionResult!=="tesSUCCESS")throw new Error(`Payment failed: ${Re.result.meta.TransactionResult}`);await I.disconnect(),I=null}catch(X){throw I&&I.isConnected()&&await I.disconnect(),new Error(X.message||"Payment processing failed")}}const{data:be,error:Ie}=await Ae.from("trading_bots").insert([{name:A.name,wallet_address:s.address,token_id:A.tokenId,interval:A.interval,min_amount:parseFloat(A.minAmount),max_amount:parseFloat(A.maxAmount),trade_mode:A.buyProbability,slippage:parseFloat(A.slippage),status:"stopped",strategy:A.strategy}]).select().single();if(Ie)throw Ie;ge.success("Trading bot created successfully!"),l([be,...a]);const Ce=t.find(X=>X.id===A.tokenId);if(Ce&&!n[Ce.id]&&!ee.current.has(Ce.id)){ee.current.add(Ce.id);try{const X=await W(Ce);X&&r(ve=>({...ve,[Ce.id]:X}))}finally{ee.current.delete(Ce.id)}}G({show:!1,message:""}),u(!1),L({name:"",tokenId:"",strategy:Bt.BALANCED,interval:15,minAmount:.5,maxAmount:2,slippage:10,buyProbability:50}),await Js({userAddress:s.address,actionType:Qs.BOT_CREATED,description:`Created trading bot: ${be.name}`})}catch(be){console.error("Error creating bot:",be),ge.error(be.message||"Failed to create bot"),G({show:!1,message:""})}finally{I&&I.isConnected()&&await I.disconnect(),ie(!1)}},fe=(I,de)=>{const be=I.strategy||Bt.BALANCED,Ie=(I.trade_mode||50)/100;let Ce=!1;switch(be){case Bt.ACCUMULATE:Ce=Math.random()<.8;break;case Bt.DISTRIBUTE:Ce=Math.random()<.2;break;default:Ce=Math.random()<Ie}const X=jS(I.min_amount,I.max_amount),ve=de.price,He=X/ve;return{action:Ce?"BUY":"SELL",xrpAmount:X.toFixed(4),tokenAmount:Ch(He),estimatedPrice:ve.toFixed(8)}},_e=async I=>{const de=typeof I=="string"?I:I.id,be=typeof I=="string"?a.find(Re=>Re.id===I):I;if(!be){ge.error("Bot not found");return}if(se.current[de])return;const Ie=t.find(Re=>Re.id===be.token_id);if(!Ie||!n[Ie.id]){ge.error("Pool data not available");return}const Ce=fe(be,n[Ie.id]);w(Re=>({...Re,[be.id]:Ce}));const X=Date.now()+be.interval*60*1e3;m(Re=>({...Re,[be.id]:X})),await Ae.from("trading_bots").update({next_trade_time:new Date(X).toISOString(),next_action:Ce.action,next_token_amount:Ce.tokenAmount,next_xrp_amount:Ce.xrpAmount,next_price:Ce.estimatedPrice}).eq("id",be.id);const ve=async()=>{try{const{data:Re}=await Ae.from("trading_bots").select("*").eq("id",be.id).maybeSingle();if(!Re||Re.status!=="running")return;l(Qe=>Qe.map(ut=>ut.id===be.id?{...ut,...Re}:ut)),await g(Re);const qe=n[Ie.id];if(qe){const Qe=fe(Re,qe);w(zt=>({...zt,[Re.id]:Qe}));const ut=Date.now()+Re.interval*60*1e3;m(zt=>({...zt,[Re.id]:ut})),await Ae.from("trading_bots").update({next_trade_time:new Date(ut).toISOString(),next_action:Qe.action,next_token_amount:Qe.tokenAmount,next_xrp_amount:Qe.xrpAmount,next_price:Qe.estimatedPrice}).eq("id",Re.id)}}catch(Re){console.error(`Error in bot ${be.name}:`,Re)}};ve();const He=setInterval(()=>{ve()},be.interval*60*1e3);se.current[be.id]=He,l(Re=>Re.map(qe=>qe.id===be.id?{...qe,status:"running"}:qe));const Pe=JSON.parse(localStorage.getItem("runningBots")||"[]");Pe.includes(be.id)||(Pe.push(be.id),localStorage.setItem("runningBots",JSON.stringify(Pe))),Ae.from("trading_bots").update({status:"running"}).eq("id",be.id).then(()=>{})},Te=async I=>{const de=typeof I=="string"?I:I.id,be=typeof I=="string"?a.find(X=>X.id===I):I;if(!be){ge.error("Bot not found");return}se.current[de]&&(clearInterval(se.current[de]),delete se.current[de]);const Ce=JSON.parse(localStorage.getItem("runningBots")||"[]").filter(X=>X!==de);localStorage.setItem("runningBots",JSON.stringify(Ce));try{await Ae.from("trading_bots").update({status:"paused"}).eq("id",de),l(X=>X.map(ve=>ve.id===de?{...ve,status:"paused"}:ve)),ge.success(`Bot ${be.name} paused`)}catch(X){console.error("Error pausing bot:",X)}},Ne=async I=>{const de=typeof I=="string"?I:I.id,be=typeof I=="string"?a.find(X=>X.id===I):I;if(!be){ge.error("Bot not found");return}se.current[de]&&(clearInterval(se.current[de]),delete se.current[de]),m(X=>{const ve={...X};return delete ve[de],ve}),w(X=>{const ve={...X};return delete ve[de],ve}),T(X=>{const ve={...X};return delete ve[de],ve}),await Ae.from("trading_bots").update({next_trade_time:null,next_action:null,next_token_amount:null,next_xrp_amount:null,next_price:null}).eq("id",de);const Ce=JSON.parse(localStorage.getItem("runningBots")||"[]").filter(X=>X!==de);localStorage.setItem("runningBots",JSON.stringify(Ce));try{await Ae.from("trading_bots").update({status:"stopped"}).eq("id",de),l(X=>X.map(ve=>ve.id===de?{...ve,status:"stopped"}:ve)),ge.success(`Bot ${be.name} stopped`)}catch(X){console.error("Error stopping bot:",X)}},$e=I=>{if(I.status==="running"){ge.error("Stop the bot before editing");return}p({...I,minAmount:I.min_amount,maxAmount:I.max_amount,buyProbability:I.trade_mode}),h(!0)},Ge=async()=>{if(!f)return;if(!f.name||f.name.trim()===""){ge.error("Bot name is required");return}const I=parseInt(f.interval);if(isNaN(I)||I<1){ge.error("Minimum interval is 1 minute");return}const de=parseFloat(f.minAmount),be=parseFloat(f.maxAmount);if(isNaN(de)||de<$r){ge.error(`Minimum amount must be at least ${$r} XRP`);return}if(isNaN(be)||be<$r){ge.error(`Maximum amount must be at least ${$r} XRP`);return}if(de>=be){ge.error("Min amount must be less than max amount");return}const Ie=parseFloat(f.slippage);if(isNaN(Ie)||Ie<1||Ie>30){ge.error("Slippage must be between 1% and 30%");return}try{ie(!0);const{error:Ce}=await Ae.from("trading_bots").update({name:f.name.trim(),interval:I,min_amount:de,max_amount:be,slippage:Ie,strategy:f.strategy,trade_mode:f.buyProbability}).eq("id",f.id);if(Ce)throw console.error("Supabase error:",Ce),Ce;l(X=>X.map(ve=>ve.id===f.id?{...ve,name:f.name.trim(),interval:I,min_amount:de,max_amount:be,slippage:Ie,strategy:f.strategy,trade_mode:f.buyProbability}:ve)),ge.success("Bot updated successfully!"),h(!1),p(null)}catch(Ce){console.error("Error updating bot:",Ce),ge.error(Ce.message||"Failed to update bot")}finally{ie(!1)}},j=async I=>{if(window.confirm(`Are you sure you want to delete bot "${I.name}"?`)){se.current[I.id]&&(clearInterval(se.current[I.id]),delete se.current[I.id]);try{const{error:de}=await Ae.from("trading_bots").delete().eq("id",I.id);if(de)throw de;l(be=>be.filter(Ie=>Ie.id!==I.id)),ge.success(`Bot ${I.name} deleted`)}catch(de){console.error("Error deleting bot:",de),ge.error("Failed to delete bot")}}},g=async I=>{var Ie;let de=null,be=!0;try{const Ce=t.find(lt=>lt.id===I.token_id);if(!Ce)return;const X=n[Ce.id];if(!X){T(lt=>({...lt,[I.id]:" Waiting for pool data..."}));return}const ve=I.strategy||Bt.BALANCED,He=(I.trade_mode||50)/100;switch(ve){case Bt.ACCUMULATE:be=Math.random()<.8;break;case Bt.DISTRIBUTE:be=Math.random()<.2;break;default:be=Math.random()<He}const Pe=jS(I.min_amount,I.max_amount),Re=X.price,qe=Pe/Re;de=new Be.Client("wss://xrplcluster.com"),await de.connect();const Qe=await de.request({command:"account_info",account:s.address,ledger_index:"validated"}),ut=parseFloat(Be.dropsToXrp(Qe.result.account_data.Balance)),zt=10;if(be){const lt=Pe*(1+parseFloat(I.slippage)/100)+1;if(ut-zt<lt){T(Yt=>({...Yt,[I.id]:` Insufficient XRP (need ${lt.toFixed(2)})`})),await de.disconnect();return}}else{const Yt=(await de.request({command:"account_lines",account:s.address,ledger_index:"validated"})).result.lines.find(Jt=>Jt.currency===Ce.currency_code&&Jt.account===Ce.issuer_address),Nt=Yt?parseFloat(Yt.balance):0,Pt=qe*(1+parseFloat(I.slippage)/100);if(Nt<Pt){T(Jt=>({...Jt,[I.id]:` Insufficient ${Ce.token_name} (need ${Ch(Pt)})`})),await de.disconnect();return}}T(lt=>({...lt,[I.id]:`${be?" Buying":" Selling"} ${Ch(qe)} ${Ce.token_name} for ${Pe.toFixed(4)} XRP...`}));const nr=Be.Wallet.fromSeed(s.seed),En=Ce.currency_code.length>3?At.Buffer.from(Ce.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):Ce.currency_code,Mt=1+parseFloat(I.slippage)/100;let Dt;if(be){const lt=parseFloat(qe)/Mt,Yt=parseFloat(Pe)*Mt;Dt={TransactionType:"Payment",Account:s.address,Destination:s.address,Amount:{currency:En,issuer:Ce.issuer_address,value:CS(lt)},SendMax:Be.xrpToDrops(Uy(Yt).toString())}}else{const lt=parseFloat(qe)*Mt,Yt=parseFloat(Pe)/Mt;Dt={TransactionType:"Payment",Account:s.address,Destination:s.address,Amount:Be.xrpToDrops(Uy(Yt).toString()),SendMax:{currency:En,issuer:Ce.issuer_address,value:CS(lt)}}}const pn=await de.autofill(Dt),gr=nr.sign(pn),Rn=await de.submitAndWait(gr.tx_blob,{timeout:6e4});if(Rn.result.meta.TransactionResult==="tesSUCCESS"){const lt=be?parseFloat(((Ie=Rn.result.meta.delivered_amount)==null?void 0:Ie.value)||qe):qe,Yt=Rn.result.hash;await Ae.from("bot_trades").insert([{bot_id:I.id,trade_type:be?"BUY":"SELL",amount:lt,xrp_cost:Pe,price:Re,status:"success",tx_hash:Yt}]);const Nt={total_trades:(I.total_trades||0)+1,successful_trades:(I.successful_trades||0)+1};be?(Nt.total_xrp_spent=(I.total_xrp_spent||0)+Pe,Nt.total_tokens_earned=(I.total_tokens_earned||0)+lt):(Nt.total_xrp_received=(I.total_xrp_received||0)+Pe,Nt.total_tokens_spent=(I.total_tokens_spent||0)+lt);const Pt=(Nt.total_xrp_received||I.total_xrp_received||0)-(Nt.total_xrp_spent||I.total_xrp_spent||0);Nt.net_profit=Pt,await Ae.from("trading_bots").update(Nt).eq("id",I.id),l(Jt=>Jt.map(Ht=>Ht.id===I.id?{...Ht,total_trades:(Ht.total_trades||0)+1,successful_trades:(Ht.successful_trades||0)+1,total_xrp_spent:be?(Ht.total_xrp_spent||0)+Pe:Ht.total_xrp_spent,total_xrp_received:be?Ht.total_xrp_received:(Ht.total_xrp_received||0)+Pe,total_tokens_earned:be?(Ht.total_tokens_earned||0)+lt:Ht.total_tokens_earned,total_tokens_spent:be?Ht.total_tokens_spent:(Ht.total_tokens_spent||0)+lt,net_profit:Pt}:Ht)),T(Jt=>({...Jt,[I.id]:` ${be?"Bought":"Sold"} ${Ch(lt)} ${Ce.token_name} for ${Pe.toFixed(4)} XRP`}))}else throw new Error(`Transaction failed: ${Rn.result.meta.TransactionResult}`);await de.disconnect()}catch(Ce){console.error(`Bot ${I.name} trade error:`,Ce);const X=Ce.message||Ce.toString();let ve=" Trade failed";if(X.includes("tecPATH_DRY"))ve=" No liquidity path found";else if(X.includes("tecPATH_PARTIAL"))if(I.slippage>=25)ve=` Slippage tolerance reached (${I.slippage}%) - Low liquidity or high volatility`;else{const He=Math.min(Math.max(Math.ceil(I.slippage*1.5),I.slippage+5),30);ve=` Slippage too low - Increase from ${I.slippage}% to ${He}%`}else X.includes("tecUNFUNDED")?ve=" Insufficient funds":X.includes("tefPAST_SEQ")&&(ve=" Transaction timing issue - Will retry");T(He=>({...He,[I.id]:ve}));try{await Ae.from("trading_bots").update({failed_trades:(I.failed_trades||0)+1}).eq("id",I.id)}catch(He){console.error("Error logging to database:",He)}de&&de.isConnected()&&await de.disconnect()}},S=M.useMemo(()=>{const I={};return t.forEach(de=>{I[de.id]=de}),I},[t]),K=M.memo(({bot:I,token:de,poolData:be,nextTradeTime:Ie,nextAction:Ce,announcement:X,onPause:ve,onStop:He,onStart:Pe,onEdit:Re,onViewActivity:qe,onDelete:Qe})=>{const ut=Ie?Math.max(0,Ie-Date.now()):0,zt=Math.floor(ut/6e4),nr=Math.floor(ut%6e4/1e3),En=I.total_trades>0?(I.successful_trades/I.total_trades*100).toFixed(1):0,Mt=I.net_profit||0,Dt=Mt>0,gr=(Rn=>{const lt={[Bt.ACCUMULATE]:{label:"Accumulate",color:"bg-green-500/20 text-green-300",icon:""},[Bt.DISTRIBUTE]:{label:"Distribute",color:"bg-red-500/20 text-red-300",icon:""},[Bt.BALANCED]:{label:"Balanced",color:"bg-blue-500/20 text-blue-300",icon:""}};return lt[Rn]||lt[Bt.BALANCED]})(I.strategy);return o.jsxs("div",{className:"glass rounded-lg p-6 space-y-4 hover:border-blue-500/40 transition-all",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[de&&o.jsx(Lt,{token:de,size:"md"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-blue-200",children:I.name}),o.jsx("p",{className:"text-blue-400 text-xs",children:(de==null?void 0:de.token_name)||"Unknown Token"}),de&&be&&o.jsx("div",{className:"flex items-center gap-2 mt-1",children:o.jsxs("span",{className:"text-blue-300 text-xs font-mono",children:[be.price.toFixed(8)," XRP"]})})]})]}),o.jsx("div",{className:`px-3 py-1.5 rounded-full text-xs font-medium flex items-center gap-1 ${I.status==="running"?"bg-green-500/20 text-green-300":I.status==="paused"?"bg-yellow-500/20 text-yellow-300":"bg-gray-500/20 text-gray-300"}`,children:I.status==="running"?" Running":I.status==="paused"?" Paused":" Stopped"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:`px-3 py-1.5 rounded-lg text-xs font-medium flex items-center gap-1.5 ${gr.color}`,children:[o.jsx("span",{children:gr.icon}),o.jsx("span",{children:gr.label})]}),o.jsxs("div",{className:"px-3 py-1.5 rounded-lg text-xs font-medium bg-purple-500/20 text-purple-300",children:["Buy: ",I.trade_mode||50,"%"]}),En>0&&o.jsxs("div",{className:`px-3 py-1.5 rounded-lg text-xs font-medium ${En>=75?"bg-green-500/20 text-green-300":En>=50?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"}`,children:[En,"% success"]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[o.jsxs("div",{className:"glass bg-blue-500/5 rounded-lg p-2.5",children:[o.jsx("div",{className:"text-blue-400 text-xs mb-0.5",children:"Interval"}),o.jsxs("div",{className:"text-blue-200 font-semibold",children:[I.interval," min"]})]}),o.jsxs("div",{className:"glass bg-blue-500/5 rounded-lg p-2.5",children:[o.jsx("div",{className:"text-blue-400 text-xs mb-0.5",children:"Range"}),o.jsxs("div",{className:"text-blue-200 font-semibold",children:[I.min_amount,"-",I.max_amount," XRP"]})]}),o.jsxs("div",{className:"glass bg-blue-500/5 rounded-lg p-2.5",children:[o.jsx("div",{className:"text-blue-400 text-xs mb-0.5",children:"Total Trades"}),o.jsx("div",{className:"text-blue-200 font-semibold",children:I.total_trades||0})]}),o.jsxs("div",{className:"glass bg-blue-500/5 rounded-lg p-2.5",children:[o.jsx("div",{className:"text-blue-400 text-xs mb-0.5",children:"Slippage"}),o.jsxs("div",{className:"text-blue-200 font-semibold",children:[I.slippage,"%"]})]}),o.jsxs("div",{className:"glass bg-green-500/5 rounded-lg p-2.5",children:[o.jsx("div",{className:"text-green-400 text-xs mb-0.5",children:"XRP Earned"}),o.jsx("div",{className:"text-green-200 font-semibold",children:I.total_xrp_received?`+${I.total_xrp_received.toFixed(4)}`:"0.0000"})]}),o.jsxs("div",{className:"glass bg-blue-500/5 rounded-lg p-2.5",children:[o.jsx("div",{className:"text-blue-400 text-xs mb-0.5",children:"XRP Spent"}),o.jsx("div",{className:"text-blue-200 font-semibold",children:I.total_xrp_spent?I.total_xrp_spent.toFixed(4):"0.0000"})]})]}),Mt!==0&&o.jsxs("div",{className:`glass rounded-lg p-3 ${Dt?"bg-green-500/10 border-green-500/30":"bg-red-500/10 border-red-500/30"}`,children:[o.jsx("div",{className:"text-xs text-purple-400 mb-1 text-center",children:"Net P/L"}),o.jsxs("div",{className:`text-lg font-bold text-center ${Dt?"text-green-300":"text-red-300"}`,children:[Dt?"+":"",Mt.toFixed(4)," XRP"]}),I.total_xrp_spent>0&&o.jsxs("div",{className:`text-xs mt-1 text-center ${Dt?"text-green-400":"text-red-400"}`,children:[Dt?"+":"",(Mt/I.total_xrp_spent*100).toFixed(2),"% ROI"]})]}),X&&o.jsx("div",{className:`glass rounded-lg p-3 text-sm ${X.includes("")?"bg-green-500/10 text-green-200 border-green-500/30":X.includes("")||X.includes("")?"bg-red-500/10 text-red-200 border-red-500/30":"bg-blue-500/10 text-blue-200"}`,children:X}),I.status==="running"&&Ie&&Ce&&o.jsxs("div",{className:"glass bg-gradient-to-br from-purple-500/20 to-blue-500/20 border border-purple-500/30 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("div",{className:"text-purple-300 text-xs font-semibold",children:"Next Trade Countdown"}),o.jsxs("div",{className:"text-purple-200 text-2xl font-bold font-mono",children:[zt,":",nr.toString().padStart(2,"0")]})]}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-purple-400",children:"Action:"}),o.jsx("span",{className:`font-semibold ${Ce.action==="BUY"?"text-green-300":"text-red-300"}`,children:Ce.action==="BUY"?" BUY":" SELL"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-purple-400",children:"Amount:"}),o.jsxs("span",{className:"text-purple-200 font-semibold",children:[Ce.tokenAmount," ",de==null?void 0:de.token_name]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-purple-400",children:"XRP:"}),o.jsxs("span",{className:"text-purple-200 font-semibold",children:[Ce.xrpAmount," XRP"]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-purple-400",children:"Est. Price:"}),o.jsxs("span",{className:"text-purple-200 font-mono text-xs",children:[Ce.estimatedPrice," XRP"]})]})]})]}),I.status==="stopped"&&o.jsxs("div",{className:"glass bg-gray-500/10 border border-gray-500/30 rounded-lg p-4 text-center",children:[o.jsx("div",{className:"text-gray-400 text-sm",children:"Bot is stopped"}),o.jsx("div",{className:"text-gray-300 text-xs mt-1",children:"Start the bot to begin trading"})]}),I.status==="paused"&&o.jsxs("div",{className:"glass bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4 text-center",children:[o.jsx("div",{className:"text-yellow-400 text-sm",children:"Bot is paused"}),o.jsx("div",{className:"text-yellow-300 text-xs mt-1",children:"Resume to continue trading"})]}),o.jsxs("div",{className:"flex gap-2",children:[I.status==="running"?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:ve,className:"flex-1 glass hover:bg-yellow-500/10 text-yellow-200 py-2.5 rounded-lg text-sm font-medium transition-all",children:" Pause"}),o.jsx("button",{onClick:He,className:"flex-1 glass hover:bg-red-500/10 text-red-200 py-2.5 rounded-lg text-sm font-medium transition-all",children:" Stop"})]}):I.status==="paused"?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:Pe,className:"flex-1 btn-primary text-white py-2.5 rounded-lg text-sm font-medium",children:" Resume"}),o.jsx("button",{onClick:He,className:"flex-1 glass hover:bg-red-500/10 text-red-200 py-2.5 rounded-lg text-sm font-medium transition-all",children:" Stop"})]}):o.jsx("button",{onClick:Pe,className:"flex-1 btn-primary text-white py-2.5 rounded-lg text-sm font-medium",children:" Start"}),o.jsx("button",{onClick:Re,className:`flex-1 glass hover:bg-blue-500/10 text-blue-200 py-2.5 rounded-lg text-sm font-medium transition-all ${I.status==="running"?"opacity-50 cursor-not-allowed":""}`,disabled:I.status==="running",children:" Edit"}),o.jsx("button",{onClick:qe,className:"flex-1 glass hover:bg-blue-500/10 text-blue-200 py-2.5 rounded-lg text-sm font-medium transition-all",children:" Activity"}),o.jsx("button",{onClick:Qe,className:"px-4 py-2.5 rounded-lg bg-red-500/20 text-red-300 hover:bg-red-500/30 transition-all text-sm font-medium",children:""})]})]})},(I,de)=>{var Ie,Ce,X,ve,He,Pe,Re,qe,Qe,ut;const be=Math.floor((I.nextTradeTime||0)/1e3)!==Math.floor((de.nextTradeTime||0)/1e3);return I.bot.id===de.bot.id&&I.bot.status===de.bot.status&&I.bot.total_trades===de.bot.total_trades&&I.bot.successful_trades===de.bot.successful_trades&&I.bot.net_profit===de.bot.net_profit&&I.bot.total_xrp_received===de.bot.total_xrp_received&&I.bot.total_xrp_spent===de.bot.total_xrp_spent&&((Ie=I.token)==null?void 0:Ie.id)===((Ce=de.token)==null?void 0:Ce.id)&&((X=I.token)==null?void 0:X.image_url)===((ve=de.token)==null?void 0:ve.image_url)&&((He=I.poolData)==null?void 0:He.price)===((Pe=de.poolData)==null?void 0:Pe.price)&&!be&&((Re=I.nextAction)==null?void 0:Re.action)===((qe=de.nextAction)==null?void 0:qe.action)&&((Qe=I.nextAction)==null?void 0:Qe.tokenAmount)===((ut=de.nextAction)==null?void 0:ut.tokenAmount)&&I.announcement===de.announcement}),le=M.useMemo(()=>{const I={};return a.forEach(de=>{I[de.id]={onPause:()=>Te(de.id),onStop:()=>Ne(de.id),onStart:()=>_e(de.id),onEdit:()=>$e(de),onViewActivity:()=>b(de),onDelete:()=>j(de)}}),I},[a.map(I=>`${I.id}-${I.status}`).join(",")]),ye=[...a.filter(I=>{const de=S[I.token_id];return I.name.toLowerCase().includes(Q.toLowerCase())||(de==null?void 0:de.token_name.toLowerCase().includes(Q.toLowerCase()))||(de==null?void 0:de.currency_code.toLowerCase().includes(Q.toLowerCase()))})].sort((I,de)=>{const be=V.includes(I.id),Ie=V.includes(de.id);if(be&&!Ie)return-1;if(!be&&Ie)return 1;const Ce=t.find(ve=>ve.id===I.token_id),X=t.find(ve=>ve.id===de.token_id);return R==="name"?I.name.localeCompare(de.name):R==="token"?((Ce==null?void 0:Ce.token_name)||"").localeCompare((X==null?void 0:X.token_name)||""):R==="status"?I.is_active&&!de.is_active?-1:!I.is_active&&de.is_active?1:0:0}),ze=[...t.filter(I=>I.token_name.toLowerCase().includes(te.toLowerCase())||I.currency_code.toLowerCase().includes(te.toLowerCase()))].sort((I,de)=>{const be=z.includes(I.id),Ie=z.includes(de.id);return be&&!Ie?-1:!be&&Ie?1:0});return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-3xl font-bold text-blue-200",children:"Trading Bots"}),s&&o.jsx("button",{onClick:()=>u(!0),className:"btn-primary text-white px-6 py-3 rounded-lg font-medium",disabled:$,children:"+ Create Bot"})]}),!s&&o.jsx("div",{className:"glass rounded-lg p-6 bg-yellow-500/10 border border-yellow-500/30",children:o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("div",{className:"text-2xl",children:""}),o.jsx("div",{className:"text-yellow-200 font-medium",children:"Connect Wallet to Use Trading Bots"}),o.jsx("p",{className:"text-yellow-300 text-sm",children:"Connect your wallet from the Setup page to create and manage trading bots"})]})}),$&&a.length===0&&o.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[o.jsx("div",{className:"text-4xl mb-4",children:""}),o.jsx("p",{className:"text-blue-300",children:"Loading bots..."})]}),s&&a.length>0&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-2xl font-bold text-blue-200",children:["My Bots (",ye.length,")"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>pe("list"),className:`px-4 py-2 rounded-lg transition-colors ${ce==="list"?"bg-blue-600 text-white":"glass text-blue-300"}`,children:"List"}),o.jsx("button",{onClick:()=>pe("grid"),className:`px-4 py-2 rounded-lg transition-colors ${ce==="grid"?"bg-blue-600 text-white":"glass text-blue-300"}`,children:"Grid"})]})]}),o.jsxs("div",{className:"glass rounded-lg p-4 space-y-3",children:[o.jsx("input",{type:"text",placeholder:"Search bots by name or token...",value:Q,onChange:I=>ue(I.target.value),className:"input w-full"}),o.jsx("div",{className:"flex gap-2",children:o.jsxs("select",{value:R,onChange:I=>C(I.target.value),className:"input flex-1",children:[o.jsx("option",{value:"name",children:"Sort by Name"}),o.jsx("option",{value:"token",children:"Sort by Token"}),o.jsx("option",{value:"status",children:"Sort by Status"})]})})]}),ce==="grid"?o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:ye.map(I=>{const de=S[I.token_id],be=de?n[de.id]:null,Ie=le[I.id]||{};return o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:()=>O(I.id),className:"absolute top-2 right-2 z-10 text-2xl hover:scale-110 transition-transform bg-black/50 rounded-full w-8 h-8 flex items-center justify-center",children:V.includes(I.id)?"":""}),o.jsx(K,{bot:I,token:de,poolData:be,nextTradeTime:_[I.id],nextAction:x[I.id],announcement:v[I.id],...Ie})]},I.id)})}):o.jsx("div",{className:"glass rounded-lg overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-blue-500/20 border-b border-blue-500/30",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-blue-200",children:"Fav"}),o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-blue-200",children:"Bot Name"}),o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-blue-200",children:"Token"}),o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-blue-200",children:"Status"}),o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-blue-200",children:"Strategy"}),o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-blue-200",children:"Interval"}),o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-blue-200",children:"Amount Range"}),o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-blue-200",children:"Total Trades"}),o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-blue-200",children:"Next Trade"}),o.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-blue-200",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-blue-500/20",children:ye.map(I=>{const de=S[I.token_id],be=_[I.id],Ie=be?Math.max(0,Math.floor((be-Date.now())/1e3)):0,Ce=Math.floor(Ie/60),X=Ie%60;return o.jsxs("tr",{className:"hover:bg-blue-500/10 transition-colors",children:[o.jsx("td",{className:"px-4 py-3",children:o.jsx("button",{onClick:()=>O(I.id),className:"text-2xl hover:scale-110 transition-transform",children:V.includes(I.id)?"":""})}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("div",{className:"font-medium text-blue-200",children:I.name})}),o.jsx("td",{className:"px-4 py-3",children:de&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Lt,{token:de,size:"sm"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-blue-200",children:de.token_name}),o.jsx("div",{className:"text-xs text-blue-400",children:de.currency_code})]})]})}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${I.status==="running"?"bg-green-500/20 text-green-300":I.status==="paused"?"bg-yellow-500/20 text-yellow-300":"bg-gray-500/20 text-gray-400"}`,children:I.status==="running"?" Running":I.status==="paused"?" Paused":" Stopped"})}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("span",{className:"text-sm text-blue-300",children:[I.strategy===Bt.BALANCED&&" Balanced",I.strategy===Bt.ACCUMULATE&&" Accumulate",I.strategy===Bt.DISTRIBUTE&&" Distribute"]})}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("span",{className:"text-sm text-blue-300",children:[I.trade_interval,"m"]})}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("span",{className:"text-sm text-blue-300",children:[I.min_amount," - ",I.max_amount," XRP"]})}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("span",{className:"text-sm text-blue-300",children:I.total_trades||0})}),o.jsx("td",{className:"px-4 py-3",children:I.status==="running"?o.jsxs("span",{className:"text-sm text-blue-300",children:[Ce,"m ",X,"s"]}):o.jsx("span",{className:"text-sm text-gray-500",children:"-"})}),o.jsx("td",{className:"px-4 py-3 text-right",children:o.jsxs("div",{className:"flex gap-2 justify-end",children:[I.status==="running"?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>Te(I.id),className:"px-3 py-1 bg-yellow-600 text-white rounded text-sm hover:bg-yellow-700",title:"Pause Bot",children:" Pause"}),o.jsx("button",{onClick:()=>Ne(I.id),className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",title:"Stop Bot",children:" Stop"})]}):I.status==="paused"?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>_e(I.id),className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",title:"Resume Bot",children:" Resume"}),o.jsx("button",{onClick:()=>Ne(I.id),className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",title:"Stop Bot",children:" Stop"})]}):o.jsx("button",{onClick:()=>_e(I.id),className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",title:"Start Bot",children:" Start"}),o.jsx("button",{onClick:()=>b(I),className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",title:"View Details",children:" View"}),o.jsx("button",{onClick:()=>{p(I),h(!0)},className:"px-3 py-1 bg-purple-600 text-white rounded text-sm hover:bg-purple-700",title:"Edit Bot",children:" Edit"})]})})]},I.id)})})]})})})]}),!$&&a.length===0&&s&&o.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[o.jsx("div",{className:"text-6xl mb-4",children:""}),o.jsx("h3",{className:"text-2xl font-bold text-blue-200 mb-2",children:"No Trading Bots Yet"}),o.jsx("p",{className:"text-blue-400 mb-6",children:"Create your first automated trading bot to start trading"})]}),s&&t.length>0&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-2xl font-bold text-blue-200",children:"Available Tokens"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>D("list"),className:`px-4 py-2 rounded-lg transition-colors ${E==="list"?"bg-blue-600 text-white":"glass text-blue-300"}`,children:"List"}),o.jsx("button",{onClick:()=>D("grid"),className:`px-4 py-2 rounded-lg transition-colors ${E==="grid"?"bg-blue-600 text-white":"glass text-blue-300"}`,children:"Grid"})]})]}),o.jsx("div",{className:"glass rounded-lg p-4",children:o.jsx("input",{type:"text",placeholder:"Search tokens by name or code...",value:te,onChange:I=>re(I.target.value),className:"input w-full"})}),E==="grid"?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:ze.map(I=>o.jsxs("div",{className:"glass rounded-lg p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Lt,{token:I,size:"md"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-blue-200",children:I.token_name}),o.jsx("div",{className:"text-xs text-blue-400",children:I.currency_code})]})]}),o.jsx("button",{onClick:()=>P(I.id),className:"text-2xl hover:scale-110 transition-transform",children:z.includes(I.id)?"":""})]}),n[I.id]&&o.jsxs("div",{className:"text-xs text-blue-300 text-center",children:[n[I.id].price.toFixed(8)," XRP"]}),o.jsx("button",{onClick:()=>{L({...A,tokenId:I.id}),u(!0)},className:"w-full btn-primary text-white px-4 py-2 rounded-lg text-sm",children:"Create Bot"})]},I.id))}):o.jsx("div",{className:"space-y-2",children:ze.map(I=>{var de;return o.jsxs("div",{className:"glass rounded-lg p-4 flex items-center justify-between hover:bg-blue-500/10 transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[o.jsx("button",{onClick:()=>P(I.id),className:"text-2xl hover:scale-110 transition-transform",children:z.includes(I.id)?"":""}),o.jsx(Lt,{token:I,size:"md"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-semibold text-blue-200",children:I.token_name}),o.jsx("div",{className:"text-sm text-blue-400",children:I.currency_code})]}),n[I.id]&&o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"text-sm text-blue-300",children:["Price: ",((de=n[I.id].price)==null?void 0:de.toFixed(6))||"N/A"," XRP"]}),o.jsxs("div",{className:"text-xs text-blue-400",children:[a.filter(be=>be.token_id===I.id).length," bot(s)"]})]})]}),o.jsx("button",{onClick:()=>{L({...A,tokenId:I.id}),u(!0)},className:"btn-primary text-white px-6 py-2 rounded-lg ml-4",children:"Create Bot"})]},I.id)})})]}),c&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-6 max-w-2xl w-full space-y-4 max-h-[90vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-2xl font-bold text-blue-200",children:"Create Trading Bot"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-blue-300 mb-2",children:"Bot Name"}),o.jsx("input",{type:"text",value:A.name,onChange:I=>L({...A,name:I.target.value}),className:"input w-full",placeholder:"My Trading Bot"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-blue-300 mb-2",children:"Select Token"}),o.jsxs("select",{value:A.tokenId,onChange:I=>L({...A,tokenId:I.target.value}),className:"input w-full",children:[o.jsx("option",{value:"",children:"Select a token..."}),t.map(I=>o.jsxs("option",{value:I.id,children:[I.token_name," (",I.currency_code,")"]},I.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-blue-300 mb-2",children:"Strategy"}),o.jsxs("select",{value:A.strategy,onChange:I=>L({...A,strategy:I.target.value}),className:"input w-full",children:[o.jsx("option",{value:Bt.BALANCED,children:" Balanced (50/50 Buy/Sell)"}),o.jsx("option",{value:Bt.ACCUMULATE,children:" Accumulate (80% Buy / 20% Sell)"}),o.jsx("option",{value:Bt.DISTRIBUTE,children:" Distribute (20% Buy / 80% Sell)"})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-blue-300 mb-2",children:["Buy Probability: ",A.buyProbability,"%"]}),o.jsx("input",{type:"range",value:A.buyProbability,onChange:I=>L({...A,buyProbability:parseInt(I.target.value)}),className:"w-full",min:"0",max:"100"}),o.jsxs("div",{className:"flex justify-between text-xs text-blue-400 mt-1",children:[o.jsx("span",{children:"More Selling"}),o.jsx("span",{children:"Balanced"}),o.jsx("span",{children:"More Buying"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-blue-300 mb-2",children:"Interval (minutes)"}),o.jsx("input",{type:"number",value:A.interval,onChange:I=>L({...A,interval:Math.max(1,parseInt(I.target.value)||1)}),className:"input w-full",min:"1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-blue-300 mb-2",children:"Slippage (%)"}),o.jsx("input",{type:"number",value:A.slippage,onChange:I=>L({...A,slippage:Math.max(1,parseFloat(I.target.value)||10)}),className:"input w-full",min:"1",max:"20",step:"0.5"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-blue-300 mb-2",children:"Min Amount (XRP)"}),o.jsx("input",{type:"number",value:A.minAmount,onChange:I=>L({...A,minAmount:parseFloat(I.target.value)||.1}),className:"input w-full",min:$r,step:"0.1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-blue-300 mb-2",children:"Max Amount (XRP)"}),o.jsx("input",{type:"number",value:A.maxAmount,onChange:I=>L({...A,maxAmount:parseFloat(I.target.value)||1}),className:"input w-full",min:$r,step:"0.1"})]})]})]}),o.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:o.jsxs("div",{className:"text-yellow-200 text-sm space-y-1",children:[o.jsx("p",{className:"font-semibold",children:"Important:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[(s==null?void 0:s.address)===Kg?o.jsx("li",{className:"text-green-300",children:" Receiver wallet - Bot creation is FREE"}):o.jsxs("li",{children:["Bot creation fee: ",jh," XRP"]}),o.jsx("li",{children:"Bots can be edited when stopped or paused"}),o.jsxs("li",{children:["XRP range must be between ",$r," and ",qg]})]})]})}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{onClick:()=>u(!1),className:"flex-1 btn-secondary",children:"Cancel"}),o.jsx("button",{onClick:oe,className:"flex-1 btn-primary",disabled:$,children:$?"Creating...":`Create Bot (${jh} XRP)`})]})]})}),d&&f&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-6 max-w-2xl w-full space-y-4 max-h-[90vh] overflow-y-auto",children:[o.jsxs("h3",{className:"text-2xl font-bold text-blue-200",children:["Edit Bot: ",f.name]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-blue-300 mb-2",children:"Bot Name"}),o.jsx("input",{type:"text",value:f.name,onChange:I=>p({...f,name:I.target.value}),className:"input w-full",placeholder:"Enter bot name"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-blue-300 mb-2",children:"Strategy"}),o.jsxs("select",{value:f.strategy,onChange:I=>p({...f,strategy:I.target.value}),className:"input w-full",children:[o.jsx("option",{value:Bt.BALANCED,children:" Balanced (50/50)"}),o.jsx("option",{value:Bt.ACCUMULATE,children:" Accumulate (80/20)"}),o.jsx("option",{value:Bt.DISTRIBUTE,children:" Distribute (20/80)"})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-blue-300 mb-2",children:["Buy Probability: ",f.buyProbability,"%"]}),o.jsx("input",{type:"range",value:f.buyProbability,onChange:I=>p({...f,buyProbability:parseInt(I.target.value)}),className:"w-full",min:"0",max:"100"}),o.jsxs("div",{className:"flex justify-between text-xs text-blue-400 mt-1",children:[o.jsx("span",{children:"More Selling"}),o.jsx("span",{children:"Balanced"}),o.jsx("span",{children:"More Buying"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-blue-300 mb-2",children:"Interval (minutes)"}),o.jsx("input",{type:"number",value:f.interval||"",onChange:I=>p({...f,interval:I.target.value}),className:"input w-full",min:"1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-blue-300 mb-2",children:"Slippage (%)"}),o.jsx("input",{type:"number",value:f.slippage||"",onChange:I=>p({...f,slippage:I.target.value}),className:"input w-full",min:"1",max:"30",step:"0.5"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-blue-300 mb-2",children:"Min Amount (XRP)"}),o.jsx("input",{type:"number",value:f.minAmount||"",onChange:I=>p({...f,minAmount:I.target.value}),className:"input w-full",min:$r,step:"0.1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-blue-300 mb-2",children:"Max Amount (XRP)"}),o.jsx("input",{type:"number",value:f.maxAmount||"",onChange:I=>p({...f,maxAmount:I.target.value}),className:"input w-full",min:$r,step:"0.1"})]})]})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{onClick:()=>{h(!1),p(null)},className:"flex-1 btn-secondary",children:"Cancel"}),o.jsx("button",{onClick:Ge,className:"flex-1 btn-primary",disabled:$,children:$?"Updating...":"Update Bot"})]})]})}),q.show&&o.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-8 max-w-md w-full space-y-6 text-center",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-xl font-bold text-blue-200",children:"Processing Payment"}),o.jsx("p",{className:"text-blue-300",children:q.message})]})]})}),y&&o.jsx(YW,{bot:y,onClose:()=>b(null)})]})}function Xj({type:t,value:e,network:n}){const r=`https://${n==="mainnet"?"":"test."}xrpscan.com`,s=t==="address"?"/account/":"/tx/";return o.jsxs("a",{href:`${r}${s}${e}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-600 hover:underline",children:[e.substring(0,12),"...",e.substring(e.length-8)]})}const kh=.1,ZW=31536e3,kS=.01,Lc="rphatRpwXcPAo7CVm46dC78JAQ6kLMqb2M",e9="sEd7W72aANTbLTG98XDhU1yfotPJdhu";function t9(){var q;const[t,e]=M.useState([]),[n,r]=M.useState(null),[s,i]=M.useState({}),[a,l]=M.useState({}),[c,u]=M.useState({}),[d,h]=M.useState({}),[f,p]=M.useState({}),[y,b]=M.useState(!1),[_,m]=M.useState("list"),[x,w]=M.useState(""),[v,T]=M.useState([]),[E,D]=M.useState(null),[te,re]=M.useState({totalBalance:0,totalEarned:0,activeTokens:0});M.useEffect(()=>{pe(),ce(),z();const G=Ed(()=>{pe()}),ne=()=>ce();return window.addEventListener("walletConnected",ne),window.addEventListener("walletDisconnected",ne),()=>{G(),window.removeEventListener("walletConnected",ne),window.removeEventListener("walletDisconnected",ne)}},[]),M.useEffect(()=>{n&&t.length>0&&Q()},[n,t]),M.useEffect(()=>{if(n&&Object.keys(a).length>0){ue();const G=setInterval(()=>{i(ne=>({...ne}))},1e3);return()=>clearInterval(G)}},[n,a]);const z=async()=>{if(n)try{const{data:G}=await Ae.from("token_favorites").select("token_id").eq("wallet_address",n==null?void 0:n.address);T((G==null?void 0:G.map(ne=>ne.token_id))||[])}catch(G){console.error("Error loading favorites:",G)}},J=async G=>{if(n)try{v.includes(G)?(await Ae.from("token_favorites").delete().eq("wallet_address",n.address).eq("token_id",G),T(ne=>ne.filter(he=>he!==G)),ge.success("Removed from favorites")):(await Ae.from("token_favorites").insert([{wallet_address:n.address,token_id:G}]),T(ne=>[...ne,G]),ge.success("Added to favorites"))}catch(ne){console.error("Error toggling favorite:",ne),ge.error("Failed to update favorite")}},ce=async()=>{const G=localStorage.getItem("connectedWallet");if(G){const ne=JSON.parse(G);if(!ne.seed&&ne.id)try{const{data:he}=await Ae.from("wallets").select("*").eq("id",ne.id).maybeSingle();if(he){const se={...he,seed:he.encrypted_seed||he.seed};localStorage.setItem("connectedWallet",JSON.stringify(se)),r(se);return}}catch(he){console.error("Error refreshing wallet:",he)}r(ne)}else r(null)},pe=async()=>{const{data:G}=await Ae.from("meme_tokens").select("*").order("created_at",{ascending:!1});e(G||[])},Q=async()=>{if(!n||t.length===0)return;b(!0);const G=new Be.Client("wss://xrplcluster.com");try{await G.connect();const ne=await G.request({command:"account_lines",account:n.address,ledger_index:"validated"}),he={};let se=0;ne.result.lines.forEach(ee=>{const N=t.find(k=>{if(k.issuer_address!==ee.account)return!1;const B=k.currency_code.length>3?At.Buffer.from(k.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):k.currency_code;return ee.currency===B||ee.currency===k.currency_code});if(N){const k=parseFloat(ee.balance);he[N.id]=k,se+=k}}),l(he),re(ee=>({...ee,totalBalance:se})),await G.disconnect()}catch(ne){console.error("Error loading balances:",ne),ge.error("Failed to load token balances")}finally{b(!1)}},ue=async()=>{if(!(!n||Object.keys(a).length===0))try{const{data:G,error:ne}=await Ae.from("token_earnings").select("*").eq("wallet_address",n.address);if(ne)throw ne;const he={};let se=0,ee=0;G==null||G.forEach(N=>{he[N.token_id]=N,se+=parseFloat(N.total_earned||0),N.is_earning&&ee++}),i(he),re(N=>({...N,totalEarned:se,activeTokens:ee}))}catch(G){console.error("Error loading earnings:",G)}},V=G=>{const ne=s[G];if(!ne||!ne.is_earning)return 0;const he=parseFloat(ne.balance_snapshot||0),se=new Date(ne.earning_started_at).getTime(),N=(Date.now()-se)/1e3,k=kh/ZW;return he*k*N},H=async G=>{if(!n){ge.error("Connect wallet first");return}const ne=a[G.id];if(!ne||ne<=0){ge.error("You need tokens in your wallet to start earning");return}try{h(ee=>({...ee,[G.id]:!0}));const{data:he,error:se}=await Ae.from("token_earnings").upsert({wallet_address:n.address,token_id:G.id,balance_snapshot:ne,is_earning:!0,earning_started_at:new Date().toISOString(),pending_amount:0,updated_at:new Date().toISOString()},{onConflict:"wallet_address,token_id"}).select().single();if(se)throw se;i(ee=>({...ee,[G.id]:he})),re(ee=>({...ee,activeTokens:ee.activeTokens+1})),ge.success(`Started earning on ${G.token_name}`),await Js({actionType:Qs.START_EARNING,userAddress:n.address,description:`Started earning on ${G.token_name}`,tokenId:G.id,details:{amount:ne}})}catch(he){console.error("Error starting earnings:",he),ge.error("Failed to start earning")}finally{h(he=>({...he,[G.id]:!1}))}},R=async G=>{var ne;try{p(N=>({...N,[G.id]:!0}));const he=V(G.id),se=parseFloat(((ne=s[G.id])==null?void 0:ne.total_earned)||0)+he,{error:ee}=await Ae.from("token_earnings").update({is_earning:!1,pending_amount:he,total_earned:se,updated_at:new Date().toISOString()}).eq("wallet_address",n.address).eq("token_id",G.id);if(ee)throw ee;i(N=>({...N,[G.id]:{...N[G.id],is_earning:!1,pending_amount:he,total_earned:se}})),re(N=>({...N,activeTokens:Math.max(0,N.activeTokens-1),totalEarned:N.totalEarned+he})),ge.success("Stopped earning. You can now claim your earnings."),await Js({actionType:Qs.STOP_EARNING,userAddress:n.address,description:`Stopped earning on ${G.token_name}`,tokenId:G.id,details:{amount:he}})}catch(he){console.error("Error stopping earnings:",he),ge.error("Failed to stop earning")}finally{p(he=>({...he,[G.id]:!1}))}},C=async G=>{var se,ee,N,k;if(!n){ge.error("Please connect your wallet first");return}if(n.address===Lc){ge.error("Cannot claim earnings to the receiver wallet. Please connect a different wallet.");return}const ne=s[G.id];if(!ne){ge.error("No earnings data found");return}const he=ne.is_earning?V(G.id):parseFloat(ne.pending_amount||0);if(he<1e-4){ge.error("Minimum claim amount is 0.0001");return}try{u(g=>({...g,[G.id]:!0})),D({step:1,message:"Connecting to XRPL...",token:G.token_name,amount:he});const B=new Be.Client("wss://xrplcluster.com");await B.connect();const O=Be.Wallet.fromSeed(e9);D(g=>({...g,step:2,message:"Checking trustlines..."}));const P=await B.request({command:"account_lines",account:Lc,ledger_index:"validated"}),F=G.currency_code.length>3?At.Buffer.from(G.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):G.currency_code;if(!P.result.lines.some(g=>g.account===G.issuer_address&&(g.currency===F||g.currency===G.currency_code))){D(me=>({...me,step:3,message:"Setting up trustline..."}));const g={TransactionType:"TrustSet",Account:Lc,LimitAmount:{currency:F,issuer:G.issuer_address,value:"1000000000"}},S=await B.autofill(g),K=O.sign(S);if((await B.submitAndWait(K.tx_blob)).result.meta.TransactionResult!=="tesSUCCESS")throw new Error("Failed to set up trustline")}if(!(await B.request({command:"account_lines",account:n.address,ledger_index:"validated"})).result.lines.some(g=>g.account===G.issuer_address&&(g.currency===F||g.currency===G.currency_code))){D(null),ge.error(`Your wallet needs a trustline for ${G.currency_code}. Please set up trustline first.`),u(g=>({...g,[G.id]:!1})),await B.disconnect();return}D(g=>({...g,step:4,message:"Processing claim fee..."}));const ae={TransactionType:"Payment",Account:n.address,Destination:Lc,Amount:String(kS*1e6)},oe=Be.Wallet.fromSeed(n.seed),fe=await B.autofill(ae),_e=oe.sign(fe);if((await B.submitAndWait(_e.tx_blob)).result.meta.TransactionResult!=="tesSUCCESS")throw new Error("Failed to process claim fee");D(g=>({...g,step:5,message:"Sending earnings..."}));const Ne={TransactionType:"Payment",Account:Lc,Destination:n.address,Amount:{currency:F,issuer:G.issuer_address,value:he.toString()}},$e=await B.autofill(Ne),Ge=O.sign($e),j=await B.submitAndWait(Ge.tx_blob);if(j.result.meta.TransactionResult==="tesSUCCESS"){const g=parseFloat(((se=s[G.id])==null?void 0:se.total_earned)||0)+he;await Ae.from("token_earnings").update({balance_snapshot:a[G.id]||0,last_claim_at:new Date().toISOString(),total_earned:g,pending_amount:0,is_earning:!0,earning_started_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("wallet_address",n.address).eq("token_id",G.id),await Js({actionType:Qs.CLAIM_EARNINGS,userAddress:n.address,description:`Claimed ${he.toFixed(4)} ${G.token_name}`,tokenId:G.id,details:{amount:he},txHash:j.result.hash}),D({step:6,message:"Claim successful!",token:G.token_name,amount:he,txHash:j.result.hash,complete:!0}),await ue(),await Q()}else throw new Error(`Transaction failed: ${j.result.meta.TransactionResult}`);await B.disconnect()}catch(B){console.error("Claim error:",B),D(null),(ee=B.message)!=null&&ee.includes("tecNO_DST_INSUF_XRP")?ge.error("Destination wallet needs at least 10 XRP reserve"):(N=B.message)!=null&&N.includes("tecPATH_DRY")?ge.error("Insufficient balance in receiver wallet"):(k=B.message)!=null&&k.includes("tecNO_LINE")?ge.error("Trustline issue detected. Please ensure both wallets have trustlines."):ge.error(`Failed to claim earnings: ${B.message||"Unknown error"}`)}finally{u(B=>({...B,[G.id]:!1}))}},A=({token:G,isListView:ne=!1})=>{const he=a[G.id]||0,se=s[G.id],ee=V(G.id),N=parseFloat((se==null?void 0:se.total_earned)||0)+ee,k=v.includes(G.id),B=he*kh/365,O=he*kh/12,P=he*kh,F=se!=null&&se.last_claim_at?new Date(se.last_claim_at):null;return ne?o.jsxs("div",{className:"glass rounded-lg p-4 flex items-center gap-4",children:[o.jsx("button",{onClick:()=>J(G.id),className:`text-2xl ${k?"text-yellow-400":"text-gray-500 hover:text-yellow-400"}`,children:k?"":""}),o.jsx(Lt,{token:G,size:"md"}),o.jsxs("div",{className:"flex-1 grid grid-cols-9 gap-3 items-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-lg font-bold text-purple-200",children:G.token_name}),o.jsx("div",{className:"text-purple-400 text-sm",children:G.currency_code})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-purple-400 text-xs",children:"Balance"}),o.jsx("div",{className:"text-purple-200 font-bold",children:he.toFixed(2)})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-purple-400 text-xs",children:"Total Earned"}),o.jsx("div",{className:"text-green-400 font-bold",children:N.toFixed(6)})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-purple-400 text-xs",children:"Pending"}),o.jsx("div",{className:"text-yellow-400 font-bold",children:ee.toFixed(6)})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-purple-400 text-xs",children:"Daily Est."}),o.jsx("div",{className:"text-blue-300 font-bold",children:B.toFixed(6)})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-purple-400 text-xs",children:"Monthly Est."}),o.jsx("div",{className:"text-cyan-400 font-bold",children:O.toFixed(6)})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-purple-400 text-xs",children:"Yearly Est."}),o.jsx("div",{className:"text-emerald-400 font-bold",children:P.toFixed(4)})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-purple-400 text-xs",children:"Last Claim"}),o.jsx("div",{className:"text-purple-300 font-medium text-xs",children:F?o.jsxs(o.Fragment,{children:[o.jsx("div",{children:F.toLocaleDateString()}),o.jsx("div",{className:"text-purple-500",children:F.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}):o.jsx("span",{className:"text-gray-500",children:"Never"})})]}),o.jsx("div",{className:"flex gap-2 justify-end",children:se!=null&&se.is_earning?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>R(G),disabled:f[G.id],className:"btn px-4 py-2 rounded-lg text-sm",children:f[G.id]?"...":"Stop"}),o.jsx("button",{onClick:()=>C(G),disabled:c[G.id]||se.is_earning,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm",children:c[G.id]?"...":"Claim"})]}):o.jsx("button",{onClick:()=>H(G),disabled:d[G.id],className:"btn-primary px-4 py-2 rounded-lg text-sm",children:d[G.id]?"...":"Start"})})]})]}):o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Lt,{token:G,size:"lg"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200",children:G.token_name}),o.jsx("p",{className:"text-purple-400 text-sm",children:G.currency_code})]})]}),o.jsx("button",{onClick:()=>J(G.id),className:`text-3xl ${k?"text-yellow-400":"text-gray-500 hover:text-yellow-400"}`,children:k?"":""})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"glass rounded-lg p-4 bg-purple-500/10",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Your Balance"}),o.jsx("div",{className:"text-3xl font-bold text-purple-200",children:he.toFixed(2)}),o.jsx("div",{className:"text-purple-400 text-xs mt-1",children:G.currency_code})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"glass rounded-lg p-3 bg-purple-500/5",children:[o.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"Total Earned"}),o.jsx("div",{className:"text-lg font-bold text-green-400",children:N.toFixed(6)})]}),o.jsxs("div",{className:"glass rounded-lg p-3 bg-purple-500/5",children:[o.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"Pending"}),o.jsx("div",{className:"text-lg font-bold text-yellow-400",children:ee.toFixed(6)})]})]}),(se==null?void 0:se.is_earning)&&o.jsxs("div",{className:"glass rounded-lg p-3 bg-green-500/10 border border-green-500/30",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),o.jsx("div",{className:"text-green-400 text-sm font-medium",children:"Earning Active"})]}),o.jsxs("div",{className:"text-green-300 text-xs",children:["Started: ",new Date(se.start_earning_at).toLocaleString()]})]}),o.jsxs("div",{className:"glass rounded-lg p-3 bg-blue-500/5",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("div",{className:"text-blue-400 text-xs font-medium",children:" Earnings Projection"}),o.jsx("div",{className:"text-blue-300 text-xs",children:"10% APY"})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-blue-400 text-xs",children:"Daily"}),o.jsxs("div",{className:"text-blue-200 font-bold text-sm",children:["+",B.toFixed(4)]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-blue-400 text-xs",children:"Monthly"}),o.jsxs("div",{className:"text-blue-200 font-bold text-sm",children:["+",(B*30).toFixed(4)]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-blue-400 text-xs",children:"Yearly"}),o.jsxs("div",{className:"text-blue-200 font-bold text-sm",children:["+",P.toFixed(2)]})]})]})]}),o.jsx("div",{className:"flex gap-2",children:se!=null&&se.is_earning?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>C(G),disabled:c[G.id]||V(G.id)<1e-4,className:"flex-1 bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg font-medium",children:c[G.id]?"Claiming...":"Claim Earnings"}),o.jsx("button",{onClick:()=>R(G),disabled:f[G.id],className:"flex-1 btn text-purple-300 px-6 py-3 rounded-lg font-medium",children:f[G.id]?"Stopping...":"Stop Earning"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>H(G),disabled:d[G.id]||he<=0,className:"flex-1 btn-primary text-white px-6 py-3 rounded-lg font-medium",children:d[G.id]?"Starting...":"Start Earning"}),(se==null?void 0:se.pending_amount)>0&&o.jsx("button",{onClick:()=>C(G),disabled:c[G.id]||parseFloat(se.pending_amount)<1e-4,className:"flex-1 bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg font-medium",children:c[G.id]?"Claiming...":`Claim ${parseFloat(se.pending_amount).toFixed(4)}`})]})}),(se==null?void 0:se.last_claim_at)&&o.jsxs("div",{className:"text-purple-400 text-xs text-center",children:["Last claimed: ",new Date(se.last_claim_at).toLocaleString()]})]})]})};if(!n)return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-purple-200 mb-2",children:"Passive Earnings Vault"}),o.jsx("p",{className:"text-purple-400",children:"Earn 10% APY on your token holdings automatically"})]}),o.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[o.jsx("div",{className:"text-6xl mb-4",children:""}),o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-2",children:"Connect Your Wallet"}),o.jsx("p",{className:"text-purple-400",children:"Connect your wallet to start earning passive income on your tokens"})]})]});const ie=[...t.filter(G=>parseFloat(a[G.id]||0)>0).filter(G=>G.token_name.toLowerCase().includes(x.toLowerCase())||G.currency_code.toLowerCase().includes(x.toLowerCase()))].sort((G,ne)=>{const he=v.includes(G.id),se=v.includes(ne.id);return he&&!se?-1:!he&&se?1:0});return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-purple-200 mb-2",children:"Passive Earnings Vault"}),o.jsx("p",{className:"text-purple-400",children:"Earn 10% APY automatically just by holding tokens in your wallet"})]}),o.jsx("div",{className:"flex items-center gap-3",children:o.jsxs("div",{className:"flex items-center gap-2 glass rounded-lg p-2",children:[o.jsx("button",{onClick:()=>m("grid"),className:`p-2 rounded ${_==="grid"?"bg-purple-600 text-white":"text-purple-400"}`,title:"Grid View",children:""}),o.jsx("button",{onClick:()=>m("list"),className:`p-2 rounded ${_==="list"?"bg-purple-600 text-white":"text-purple-400"}`,title:"List View",children:""})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Total Balance"}),o.jsx("div",{className:"text-3xl font-bold text-purple-200",children:te.totalBalance.toFixed(2)}),o.jsx("div",{className:"text-purple-400 text-xs mt-1",children:"Tokens in wallet"})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Total Earned"}),o.jsx("div",{className:"text-3xl font-bold text-green-400",children:te.totalEarned.toFixed(6)}),o.jsx("div",{className:"text-purple-400 text-xs mt-1",children:"All time earnings"})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Active Tokens"}),o.jsx("div",{className:"text-3xl font-bold text-blue-400",children:te.activeTokens}),o.jsx("div",{className:"text-purple-400 text-xs mt-1",children:"Currently earning"})]})]}),o.jsx("div",{className:"glass rounded-lg p-4",children:o.jsx("input",{type:"text",value:x,onChange:G=>w(G.target.value),placeholder:"Search tokens...",className:"input w-full"})}),y?o.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[o.jsx("div",{className:"text-4xl mb-4",children:""}),o.jsx("p",{className:"text-purple-300",children:"Loading your tokens..."})]}):ie.length===0?o.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[o.jsx("div",{className:"text-6xl mb-4",children:""}),o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-2",children:"No Tokens Found"}),o.jsx("p",{className:"text-purple-400",children:x?"No tokens match your search.":"You need tokens in your wallet to start earning."})]}):_==="grid"?o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:ie.map(G=>o.jsx(A,{token:G},G.id))}):o.jsx("div",{className:"space-y-3",children:ie.map(G=>o.jsx(A,{token:G,isListView:!0},G.id))}),E&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-6 max-w-md w-full space-y-4",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200 text-center",children:E.complete?" Claim Complete!":" Claiming Earnings"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"glass rounded-lg p-4 bg-purple-500/10",children:[o.jsx("div",{className:"text-purple-400 text-sm",children:"Token"}),o.jsx("div",{className:"text-purple-200 font-bold",children:E.token})]}),o.jsxs("div",{className:"glass rounded-lg p-4 bg-green-500/10",children:[o.jsx("div",{className:"text-green-400 text-sm",children:"Amount"}),o.jsx("div",{className:"text-green-300 font-bold text-xl",children:(q=E.amount)==null?void 0:q.toFixed(6)})]}),!E.complete&&o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsxs("div",{className:"text-purple-200 font-medium mb-2",children:["Step ",E.step," of 5"]}),o.jsx("div",{className:"text-purple-400 text-sm",children:E.message}),o.jsx("div",{className:"mt-3 w-full bg-purple-900/30 rounded-full h-2",children:o.jsx("div",{className:"bg-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${E.step/5*100}%`}})})]}),E.complete&&E.txHash&&o.jsxs("div",{className:"glass rounded-lg p-4 bg-blue-500/10",children:[o.jsx("div",{className:"text-blue-400 text-sm mb-2",children:"Transaction"}),o.jsx(Xj,{type:"tx",value:E.txHash,network:"mainnet"})]}),E.complete&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"glass rounded-lg p-4 bg-yellow-500/10 border border-yellow-500/30",children:o.jsxs("div",{className:"text-yellow-200 text-sm",children:[" Claim fee of ",kS," XRP was sent to the receiver wallet"]})}),o.jsx("button",{onClick:()=>D(null),className:"w-full btn-primary text-white px-6 py-3 rounded-lg font-medium",children:"Close"})]})]})]})})]})}const OS=.01;function n9({token:t,balance:e,wallet:n,onClose:r,onSuccess:s}){const[i,a]=M.useState(""),[l,c]=M.useState(""),[u,d]=M.useState(!1),h=async()=>{if(!i||!l){ge.error("Please fill in all fields");return}if(parseFloat(l)<=0){ge.error("Amount must be greater than 0");return}if(parseFloat(l)>parseFloat(e)){ge.error("Insufficient balance");return}if(!Be.isValidClassicAddress(i)){ge.error("Invalid recipient address");return}d(!0);try{const f=new Be.Client("wss://s.altnet.rippletest.net:51233");await f.connect();const p=Be.Wallet.fromSeed(n.seed),y={TransactionType:"Payment",Account:n.address,Destination:i,Amount:{currency:t.currency_code,value:l,issuer:t.issuer_address}},b=await f.autofill(y),_=p.sign(b),m=await f.submitAndWait(_.tx_blob);if(m.result.meta.TransactionResult==="tesSUCCESS")await Js({userAddress:n.address,actionType:Qs.TOKEN_SENT,description:`Sent ${l} ${t.token_name} to ${i.slice(0,8)}...`,details:{amount:l,token_name:t.token_name,from:n.address,to:i},txHash:m.result.hash,tokenId:t.id}),ge.success(`Sent ${l} ${t.token_name} successfully! Fee: ${OS} XRP`),await f.disconnect(),s(),r();else throw new Error("Transaction failed: "+m.result.meta.TransactionResult)}catch(f){console.error("Send error:",f),ge.error("Failed to send tokens: "+f.message)}finally{d(!1)}};return o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:r,children:o.jsxs("div",{className:"glass rounded-lg max-w-lg w-full p-6",onClick:f=>f.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h3",{className:"text-2xl font-bold text-purple-200",children:["Send ",t.token_name]}),o.jsx("button",{onClick:r,className:"text-purple-400 hover:text-purple-300 text-2xl",children:""})]}),o.jsxs("div",{className:"flex items-center gap-4 mb-6 p-4 glass rounded-lg",children:[o.jsx(Lt,{token:t,size:"lg"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-purple-200 font-bold",children:t.token_name}),o.jsxs("div",{className:"text-purple-400 text-sm",children:["Available: ",parseFloat(e).toFixed(4)]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Recipient Address"}),o.jsx("input",{type:"text",value:i,onChange:f=>a(f.target.value),placeholder:"rXXXXXXXXXXXXXXXXXXXXXXXXXXXX",className:"input w-full text-purple-200 font-mono text-sm"}),o.jsx("div",{className:"text-purple-400 text-xs mt-1",children:"Enter the XRPL address to send to"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Amount"}),o.jsx("input",{type:"number",value:l,onChange:f=>c(f.target.value),placeholder:"0.00",step:"0.0001",className:"input w-full text-purple-200 text-lg"}),o.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[o.jsx("span",{className:"text-purple-400",children:"Min: 0.0001"}),o.jsxs("button",{onClick:()=>c(e),className:"text-purple-400 hover:text-purple-300",children:["Max: ",parseFloat(e).toFixed(4)]})]})]}),o.jsxs("div",{className:"glass rounded-lg p-4 bg-blue-500/10 border border-blue-500/30",children:[o.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[o.jsx("span",{className:"text-blue-300",children:"Network Fee"}),o.jsxs("span",{className:"text-blue-200 font-bold",children:[OS," XRP"]})]}),o.jsx("div",{className:"text-blue-400 text-xs",children:"Platform fee for processing the transaction"})]}),o.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:[o.jsx("div",{className:"text-yellow-200 font-medium mb-1",children:" Important"}),o.jsx("p",{className:"text-yellow-300 text-xs",children:"Double-check the recipient address. Transactions cannot be reversed once confirmed."})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:h,disabled:u||!i||!l,className:"flex-1 btn-primary text-white py-3 rounded-lg font-medium disabled:opacity-50",children:u?" Sending...":` Send ${l||"0"} ${t.token_name}`}),o.jsx("button",{onClick:r,disabled:u,className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium disabled:opacity-50",children:"Cancel"})]})]})]})})}var r9=Object.defineProperty,Xf=Object.getOwnPropertySymbols,Wj=Object.prototype.hasOwnProperty,Kj=Object.prototype.propertyIsEnumerable,PS=(t,e,n)=>e in t?r9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,s9=(t,e)=>{for(var n in e||(e={}))Wj.call(e,n)&&PS(t,n,e[n]);if(Xf)for(var n of Xf(e))Kj.call(e,n)&&PS(t,n,e[n]);return t},i9=(t,e)=>{var n={};for(var r in t)Wj.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Xf)for(var r of Xf(t))e.indexOf(r)<0&&Kj.call(t,r)&&(n[r]=t[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Ta;(t=>{const e=class{constructor(c,u,d,h){if(this.version=c,this.errorCorrectionLevel=u,this.modules=[],this.isFunction=[],c<e.MIN_VERSION||c>e.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=c*4+17;let f=[];for(let y=0;y<this.size;y++)f.push(!1);for(let y=0;y<this.size;y++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const p=this.addEccAndInterleave(d);if(this.drawCodewords(p),h==-1){let y=1e9;for(let b=0;b<8;b++){this.applyMask(b),this.drawFormatBits(b);const _=this.getPenaltyScore();_<y&&(h=b,y=_),this.applyMask(b)}}i(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(c,u){const d=t.QrSegment.makeSegments(c);return e.encodeSegments(d,u)}static encodeBinary(c,u){const d=t.QrSegment.makeBytes(c);return e.encodeSegments([d],u)}static encodeSegments(c,u,d=1,h=40,f=-1,p=!0){if(!(e.MIN_VERSION<=d&&d<=h&&h<=e.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let y,b;for(y=d;;y++){const w=e.getNumDataCodewords(y,u)*8,v=l.getTotalBits(c,y);if(v<=w){b=v;break}if(y>=h)throw new RangeError("Data too long")}for(const w of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])p&&b<=e.getNumDataCodewords(y,w)*8&&(u=w);let _=[];for(const w of c){r(w.mode.modeBits,4,_),r(w.numChars,w.mode.numCharCountBits(y),_);for(const v of w.getData())_.push(v)}i(_.length==b);const m=e.getNumDataCodewords(y,u)*8;i(_.length<=m),r(0,Math.min(4,m-_.length),_),r(0,(8-_.length%8)%8,_),i(_.length%8==0);for(let w=236;_.length<m;w^=253)r(w,8,_);let x=[];for(;x.length*8<_.length;)x.push(0);return _.forEach((w,v)=>x[v>>>3]|=w<<7-(v&7)),new e(y,u,x,f)}getModule(c,u){return 0<=c&&c<this.size&&0<=u&&u<this.size&&this.modules[u][c]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const c=this.getAlignmentPatternPositions(),u=c.length;for(let d=0;d<u;d++)for(let h=0;h<u;h++)d==0&&h==0||d==0&&h==u-1||d==u-1&&h==0||this.drawAlignmentPattern(c[d],c[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(c){const u=this.errorCorrectionLevel.formatBits<<3|c;let d=u;for(let f=0;f<10;f++)d=d<<1^(d>>>9)*1335;const h=(u<<10|d)^21522;i(h>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,s(h,f));this.setFunctionModule(8,7,s(h,6)),this.setFunctionModule(8,8,s(h,7)),this.setFunctionModule(7,8,s(h,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,s(h,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,s(h,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,s(h,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let c=this.version;for(let d=0;d<12;d++)c=c<<1^(c>>>11)*7973;const u=this.version<<12|c;i(u>>>18==0);for(let d=0;d<18;d++){const h=s(u,d),f=this.size-11+d%3,p=Math.floor(d/3);this.setFunctionModule(f,p,h),this.setFunctionModule(p,f,h)}}drawFinderPattern(c,u){for(let d=-4;d<=4;d++)for(let h=-4;h<=4;h++){const f=Math.max(Math.abs(h),Math.abs(d)),p=c+h,y=u+d;0<=p&&p<this.size&&0<=y&&y<this.size&&this.setFunctionModule(p,y,f!=2&&f!=4)}}drawAlignmentPattern(c,u){for(let d=-2;d<=2;d++)for(let h=-2;h<=2;h++)this.setFunctionModule(c+h,u+d,Math.max(Math.abs(h),Math.abs(d))!=1)}setFunctionModule(c,u,d){this.modules[u][c]=d,this.isFunction[u][c]=!0}addEccAndInterleave(c){const u=this.version,d=this.errorCorrectionLevel;if(c.length!=e.getNumDataCodewords(u,d))throw new RangeError("Invalid argument");const h=e.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][u],f=e.ECC_CODEWORDS_PER_BLOCK[d.ordinal][u],p=Math.floor(e.getNumRawDataModules(u)/8),y=h-p%h,b=Math.floor(p/h);let _=[];const m=e.reedSolomonComputeDivisor(f);for(let w=0,v=0;w<h;w++){let T=c.slice(v,v+b-f+(w<y?0:1));v+=T.length;const E=e.reedSolomonComputeRemainder(T,m);w<y&&T.push(0),_.push(T.concat(E))}let x=[];for(let w=0;w<_[0].length;w++)_.forEach((v,T)=>{(w!=b-f||T>=y)&&x.push(v[w])});return i(x.length==p),x}drawCodewords(c){if(c.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let u=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let h=0;h<this.size;h++)for(let f=0;f<2;f++){const p=d-f,b=(d+1&2)==0?this.size-1-h:h;!this.isFunction[b][p]&&u<c.length*8&&(this.modules[b][p]=s(c[u>>>3],7-(u&7)),u++)}}i(u==c.length*8)}applyMask(c){if(c<0||c>7)throw new RangeError("Mask value out of range");for(let u=0;u<this.size;u++)for(let d=0;d<this.size;d++){let h;switch(c){case 0:h=(d+u)%2==0;break;case 1:h=u%2==0;break;case 2:h=d%3==0;break;case 3:h=(d+u)%3==0;break;case 4:h=(Math.floor(d/3)+Math.floor(u/2))%2==0;break;case 5:h=d*u%2+d*u%3==0;break;case 6:h=(d*u%2+d*u%3)%2==0;break;case 7:h=((d+u)%2+d*u%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[u][d]&&h&&(this.modules[u][d]=!this.modules[u][d])}}getPenaltyScore(){let c=0;for(let f=0;f<this.size;f++){let p=!1,y=0,b=[0,0,0,0,0,0,0];for(let _=0;_<this.size;_++)this.modules[f][_]==p?(y++,y==5?c+=e.PENALTY_N1:y>5&&c++):(this.finderPenaltyAddHistory(y,b),p||(c+=this.finderPenaltyCountPatterns(b)*e.PENALTY_N3),p=this.modules[f][_],y=1);c+=this.finderPenaltyTerminateAndCount(p,y,b)*e.PENALTY_N3}for(let f=0;f<this.size;f++){let p=!1,y=0,b=[0,0,0,0,0,0,0];for(let _=0;_<this.size;_++)this.modules[_][f]==p?(y++,y==5?c+=e.PENALTY_N1:y>5&&c++):(this.finderPenaltyAddHistory(y,b),p||(c+=this.finderPenaltyCountPatterns(b)*e.PENALTY_N3),p=this.modules[_][f],y=1);c+=this.finderPenaltyTerminateAndCount(p,y,b)*e.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let p=0;p<this.size-1;p++){const y=this.modules[f][p];y==this.modules[f][p+1]&&y==this.modules[f+1][p]&&y==this.modules[f+1][p+1]&&(c+=e.PENALTY_N2)}let u=0;for(const f of this.modules)u=f.reduce((p,y)=>p+(y?1:0),u);const d=this.size*this.size,h=Math.ceil(Math.abs(u*20-d*10)/d)-1;return i(0<=h&&h<=9),c+=h*e.PENALTY_N4,i(0<=c&&c<=2568888),c}getAlignmentPatternPositions(){if(this.version==1)return[];{const c=Math.floor(this.version/7)+2,u=this.version==32?26:Math.ceil((this.version*4+4)/(c*2-2))*2;let d=[6];for(let h=this.size-7;d.length<c;h-=u)d.splice(1,0,h);return d}}static getNumRawDataModules(c){if(c<e.MIN_VERSION||c>e.MAX_VERSION)throw new RangeError("Version number out of range");let u=(16*c+128)*c+64;if(c>=2){const d=Math.floor(c/7)+2;u-=(25*d-10)*d-55,c>=7&&(u-=36)}return i(208<=u&&u<=29648),u}static getNumDataCodewords(c,u){return Math.floor(e.getNumRawDataModules(c)/8)-e.ECC_CODEWORDS_PER_BLOCK[u.ordinal][c]*e.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][c]}static reedSolomonComputeDivisor(c){if(c<1||c>255)throw new RangeError("Degree out of range");let u=[];for(let h=0;h<c-1;h++)u.push(0);u.push(1);let d=1;for(let h=0;h<c;h++){for(let f=0;f<u.length;f++)u[f]=e.reedSolomonMultiply(u[f],d),f+1<u.length&&(u[f]^=u[f+1]);d=e.reedSolomonMultiply(d,2)}return u}static reedSolomonComputeRemainder(c,u){let d=u.map(h=>0);for(const h of c){const f=h^d.shift();d.push(0),u.forEach((p,y)=>d[y]^=e.reedSolomonMultiply(p,f))}return d}static reedSolomonMultiply(c,u){if(c>>>8||u>>>8)throw new RangeError("Byte out of range");let d=0;for(let h=7;h>=0;h--)d=d<<1^(d>>>7)*285,d^=(u>>>h&1)*c;return i(d>>>8==0),d}finderPenaltyCountPatterns(c){const u=c[1];i(u<=this.size*3);const d=u>0&&c[2]==u&&c[3]==u*3&&c[4]==u&&c[5]==u;return(d&&c[0]>=u*4&&c[6]>=u?1:0)+(d&&c[6]>=u*4&&c[0]>=u?1:0)}finderPenaltyTerminateAndCount(c,u,d){return c&&(this.finderPenaltyAddHistory(u,d),u=0),u+=this.size,this.finderPenaltyAddHistory(u,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(c,u){u[0]==0&&(c+=this.size),u.pop(),u.unshift(c)}};let n=e;n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=n;function r(c,u,d){if(u<0||u>31||c>>>u)throw new RangeError("Value out of range");for(let h=u-1;h>=0;h--)d.push(c>>>h&1)}function s(c,u){return(c>>>u&1)!=0}function i(c){if(!c)throw new Error("Assertion error")}const a=class{constructor(c,u,d){if(this.mode=c,this.numChars=u,this.bitData=d,u<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(c){let u=[];for(const d of c)r(d,8,u);return new a(a.Mode.BYTE,c.length,u)}static makeNumeric(c){if(!a.isNumeric(c))throw new RangeError("String contains non-numeric characters");let u=[];for(let d=0;d<c.length;){const h=Math.min(c.length-d,3);r(parseInt(c.substr(d,h),10),h*3+1,u),d+=h}return new a(a.Mode.NUMERIC,c.length,u)}static makeAlphanumeric(c){if(!a.isAlphanumeric(c))throw new RangeError("String contains unencodable characters in alphanumeric mode");let u=[],d;for(d=0;d+2<=c.length;d+=2){let h=a.ALPHANUMERIC_CHARSET.indexOf(c.charAt(d))*45;h+=a.ALPHANUMERIC_CHARSET.indexOf(c.charAt(d+1)),r(h,11,u)}return d<c.length&&r(a.ALPHANUMERIC_CHARSET.indexOf(c.charAt(d)),6,u),new a(a.Mode.ALPHANUMERIC,c.length,u)}static makeSegments(c){return c==""?[]:a.isNumeric(c)?[a.makeNumeric(c)]:a.isAlphanumeric(c)?[a.makeAlphanumeric(c)]:[a.makeBytes(a.toUtf8ByteArray(c))]}static makeEci(c){let u=[];if(c<0)throw new RangeError("ECI assignment value out of range");if(c<128)r(c,8,u);else if(c<16384)r(2,2,u),r(c,14,u);else if(c<1e6)r(6,3,u),r(c,21,u);else throw new RangeError("ECI assignment value out of range");return new a(a.Mode.ECI,0,u)}static isNumeric(c){return a.NUMERIC_REGEX.test(c)}static isAlphanumeric(c){return a.ALPHANUMERIC_REGEX.test(c)}getData(){return this.bitData.slice()}static getTotalBits(c,u){let d=0;for(const h of c){const f=h.mode.numCharCountBits(u);if(h.numChars>=1<<f)return 1/0;d+=4+f+h.bitData.length}return d}static toUtf8ByteArray(c){c=encodeURI(c);let u=[];for(let d=0;d<c.length;d++)c.charAt(d)!="%"?u.push(c.charCodeAt(d)):(u.push(parseInt(c.substr(d+1,2),16)),d+=2);return u}};let l=a;l.NUMERIC_REGEX=/^[0-9]*$/,l.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,l.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=l})(Ta||(Ta={}));(t=>{(e=>{const n=class{constructor(s,i){this.ordinal=s,this.formatBits=i}};let r=n;r.LOW=new n(0,1),r.MEDIUM=new n(1,0),r.QUARTILE=new n(2,3),r.HIGH=new n(3,2),e.Ecc=r})(t.QrCode||(t.QrCode={}))})(Ta||(Ta={}));(t=>{(e=>{const n=class{constructor(s,i){this.modeBits=s,this.numBitsCharCount=i}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};let r=n;r.NUMERIC=new n(1,[10,12,14]),r.ALPHANUMERIC=new n(2,[9,11,13]),r.BYTE=new n(4,[8,16,16]),r.KANJI=new n(8,[8,10,12]),r.ECI=new n(7,[0,0,0]),e.Mode=r})(t.QrSegment||(t.QrSegment={}))})(Ta||(Ta={}));var Wc=Ta;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var o9={L:Wc.QrCode.Ecc.LOW,M:Wc.QrCode.Ecc.MEDIUM,Q:Wc.QrCode.Ecc.QUARTILE,H:Wc.QrCode.Ecc.HIGH},a9=128,l9="L",c9="#FFFFFF",u9="#000000",d9=!1,qj=4,h9=.1;function f9(t,e=0){const n=[];return t.forEach(function(r,s){let i=null;r.forEach(function(a,l){if(!a&&i!==null){n.push(`M${i+e} ${s+e}h${l-i}v1H${i+e}z`),i=null;return}if(l===r.length-1){if(!a)return;i===null?n.push(`M${l+e},${s+e} h1v1H${l+e}z`):n.push(`M${i+e},${s+e} h${l+1-i}v1H${i+e}z`);return}a&&i===null&&(i=l)})}),n.join("")}function p9(t,e){return t.slice().map((n,r)=>r<e.y||r>=e.y+e.h?n:n.map((s,i)=>i<e.x||i>=e.x+e.w?s:!1))}function m9(t,e,n,r){if(r==null)return null;const s=n?qj:0,i=t.length+s*2,a=Math.floor(e*h9),l=i/e,c=(r.width||a)*l,u=(r.height||a)*l,d=r.x==null?t.length/2-c/2:r.x*l,h=r.y==null?t.length/2-u/2:r.y*l;let f=null;if(r.excavate){let p=Math.floor(d),y=Math.floor(h),b=Math.ceil(c+d-p),_=Math.ceil(u+h-y);f={x:p,y,w:b,h:_}}return{x:d,y:h,h:u,w:c,excavation:f}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function g9(t){const e=t,{value:n,size:r=a9,level:s=l9,bgColor:i=c9,fgColor:a=u9,includeMargin:l=d9,imageSettings:c}=e,u=i9(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let d=Wc.QrCode.encodeText(n,o9[s]).getModules();const h=l?qj:0,f=d.length+h*2,p=m9(d,r,l,c);let y=null;c!=null&&p!=null&&(p.excavation!=null&&(d=p9(d,p.excavation)),y=Mc.createElement("image",{xlinkHref:c.src,height:p.h,width:p.w,x:p.x+h,y:p.y+h,preserveAspectRatio:"none"}));const b=f9(d,h);return Mc.createElement("svg",s9({height:r,width:r,viewBox:`0 0 ${f} ${f}`},u),Mc.createElement("path",{fill:i,d:`M0,0 h${f}v${f}H0z`,shapeRendering:"crispEdges"}),Mc.createElement("path",{fill:a,d:b,shapeRendering:"crispEdges"}),y)}function x9({token:t,wallet:e,onClose:n}){const[r,s]=M.useState(!1),i=()=>{navigator.clipboard.writeText(e.address),s(!0),ge.success("Address copied to clipboard!"),setTimeout(()=>s(!1),2e3)};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 rounded-xl shadow-2xl max-w-md w-full border border-slate-700",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-white",children:"Receive Tokens"}),o.jsx("button",{onClick:n,className:"text-slate-400 hover:text-white text-2xl",children:""})]}),o.jsx("div",{className:"mb-6 text-center",children:o.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[o.jsx(Lt,{token:t,size:"lg"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:t.token_name}),o.jsx("p",{className:"text-sm text-slate-400",children:t.currency_code})]})]})}),o.jsx("div",{className:"bg-white p-4 rounded-lg mb-4 flex justify-center",children:o.jsx(g9,{value:e.address,size:200,level:"H",includeMargin:!0})}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Your Wallet Address"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",value:e.address,readOnly:!0,className:"flex-1 px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white font-mono text-sm"}),o.jsx("button",{onClick:i,className:`px-4 py-2 rounded-lg font-medium transition-all ${r?"bg-green-500 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,children:r?" Copied":" Copy"})]})]}),o.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4 mb-4",children:o.jsxs("p",{className:"text-yellow-200 text-sm",children:[o.jsx("strong",{children:"Important:"})," Make sure the sender has set up a trustline for this token before sending. Share your wallet address with them."]})}),o.jsx("div",{className:"flex gap-3",children:o.jsx("button",{onClick:n,className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white font-bold py-3 rounded-lg transition-all",children:"Close"})})]})})})}function y9(){const[t,e]=M.useState(null),[n,r]=M.useState([]),[s,i]=M.useState({}),[a,l]=M.useState(!1),[c,u]=M.useState(!1),[d,h]=M.useState(!1),[f,p]=M.useState(null),[y,b]=M.useState({totalValue:0,totalTokens:0,lpPositions:0,totalValueChange24h:0,lpValueChange24h:0}),[_,m]=M.useState(""),[x,w]=M.useState("24hChange"),[v,T]=M.useState("desc"),[E,D]=M.useState([]),[te,re]=M.useState(!0),[z,J]=M.useState(2.5);M.useEffect(()=>{ue();const H=()=>{ue()};return window.addEventListener("walletConnected",H),window.addEventListener("walletDisconnected",H),()=>{window.removeEventListener("walletConnected",H),window.removeEventListener("walletDisconnected",H)}},[]),M.useEffect(()=>{const H=Ed(()=>{localStorage.getItem("connectedWallet")&&V()});return()=>{H()}},[]),M.useEffect(()=>{t&&(V(),pe())},[t]),M.useEffect(()=>{ce()},[]);const ce=async()=>{var H;try{const C=await(await fetch("https://api.coingecko.com/api/v3/simple/price?ids=ripple&vs_currencies=usd")).json();(H=C.ripple)!=null&&H.usd&&J(C.ripple.usd)}catch(R){console.error("Failed to fetch XRP price:",R)}},pe=async()=>{if(t)try{const{data:H}=await Ae.from("token_favorites").select("token_id").eq("wallet_address",t.address);D((H==null?void 0:H.map(R=>R.token_id))||[])}catch(H){console.error("Error loading favorites:",H)}},Q=async H=>{if(t)try{E.includes(H)?(await Ae.from("token_favorites").delete().eq("wallet_address",t.address).eq("token_id",H),D(R=>R.filter(C=>C!==H)),ge.success("Removed from favorites")):(await Ae.from("token_favorites").insert([{wallet_address:t.address,token_id:H}]),D(R=>[...R,H]),ge.success("Added to favorites"))}catch(R){console.error("Error toggling favorite:",R),ge.error("Failed to update favorite")}},ue=()=>{const H=localStorage.getItem("connectedWallet");H?e(JSON.parse(H)):(e(null),r([]))},V=async()=>{var R,C;if(!t)return;console.log(`
 Fetching token holdings...`),l(!0);const H=new Be.Client("wss://xrplcluster.com");try{await H.connect();const A=await H.request({command:"account_lines",account:t.address,ledger_index:"validated"});console.log(` Found ${((R=A.result.lines)==null?void 0:R.length)||0} trust lines`);const $=(await Ae.from("meme_tokens").select("*")).data||[];console.log(` Loaded ${$.length} tokens from database`);const ie={},q={};for(const F of $){const Y=`${F.issuer_address}-${F.currency_code}`;ie[Y]=F;const W=F.currency_code.length>3?At.Buffer.from(F.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):F.currency_code;q[W]=F}const G={},ne={};for(const F of $.filter(Y=>Y.amm_pool_created))try{const Y=F.currency_code.length>3?At.Buffer.from(F.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):F.currency_code,W=await H.request({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:Y,issuer:F.issuer_address},ledger_index:"validated"});if(W.result.amm){const Z=W.result.amm,ae=parseFloat(Z.amount)/1e6,oe=parseFloat(Z.amount2.value),fe=parseFloat(((C=Z.lp_token)==null?void 0:C.value)||0),_e=ae/oe;G[F.id]={xrpAmount:ae,tokenAmount:oe,lpTokens:fe,price:_e,accountId:Z.account},ne[Z.account]=F.id,console.log(`    ${F.token_name}: Pool loaded - Price ${_e.toFixed(8)} XRP`)}}catch{console.error(`    ${F.token_name}: Failed to load pool`)}const he=[],se=new Set;let ee=0,N=0,k=0,B=0;for(const F of A.result.lines){const Y=parseFloat(F.balance);if(Y===0)continue;const W=`${F.account}-${F.currency}`;if(se.has(W))continue;if(se.add(W),ne[F.account]){const oe=ne[F.account],fe=$.find(Te=>Te.id===oe),_e=G[oe];if(fe&&_e){const Te=Y/_e.lpTokens*_e.xrpAmount*2;ee+=Te,B+=Te,N++,he.push({token:fe,balance:Y,price:_e.price,value:Te,isLPToken:!0,lpShare:Y/_e.lpTokens*100}),console.log(`    LP: ${fe.token_name} - ${Y.toFixed(4)} tokens (${Te.toFixed(4)} XRP)`);continue}}const Z=`${F.account}-${F.currency}`;let ae=ie[Z];if(ae||(ae=q[F.currency],ae&&ae.issuer_address!==F.account&&(ae=null)),ae){const oe=G[ae.id],fe=(oe==null?void 0:oe.price)||0,_e=Y*fe;ee+=_e,k+=_e;const Te=((Math.random()-.3)*20).toFixed(2);he.push({token:ae,balance:Y,price:fe,value:_e,isLPToken:!1,lpShare:0,priceChange24h:parseFloat(Te)}),console.log(`    Token: ${ae.token_name} - ${Y.toFixed(4)} tokens (${_e.toFixed(4)} XRP)`)}else console.log(`    Unknown token: ${F.currency} from ${F.account.substring(0,8)}...`)}console.log(`
 Total holdings: ${he.length} (${N} LP positions)`),console.log(` Total value: ${ee.toFixed(4)} XRP
`);const O=((Math.random()-.3)*20).toFixed(2),P=((Math.random()-.3)*15).toFixed(2);r(he),i(G),b({totalValue:ee.toFixed(4),totalTokens:he.length,lpPositions:N,totalValueChange24h:parseFloat(O),lpValueChange24h:parseFloat(P)}),await H.disconnect()}catch(A){console.error("Error fetching holdings:",A),ge.error("Failed to fetch token holdings")}finally{l(!1)}};return t?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-purple-200",children:"My Tokens"}),o.jsx("p",{className:"text-purple-400 mt-1",children:"Your token holdings and LP positions"})]}),o.jsx("button",{onClick:V,disabled:a,className:"bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white font-medium px-4 py-2 rounded-lg transition-all disabled:opacity-50",children:a?" Loading...":" Refresh"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Total Portfolio Value"}),o.jsxs("div",{className:"text-3xl font-bold text-purple-200",children:[y.totalValue," XRP"]}),o.jsxs("div",{className:"text-purple-400 text-sm mt-1",children:["$",(parseFloat(y.totalValue)*z).toFixed(2)," USD"]}),o.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[o.jsx("span",{className:"text-purple-500 text-xs",children:"Estimated"}),o.jsxs("span",{className:`text-xs font-bold ${y.totalValueChange24h>=0?"text-green-400":"text-red-400"}`,children:[y.totalValueChange24h>=0?"+":"",y.totalValueChange24h.toFixed(2),"% 24h"]})]})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Total Tokens"}),o.jsx("div",{className:"text-3xl font-bold text-purple-200",children:y.totalTokens}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Unique holdings"})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"LP Positions"}),o.jsx("div",{className:"text-3xl font-bold text-purple-200",children:y.lpPositions}),o.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[o.jsx("span",{className:"text-purple-500 text-xs",children:"Active pools"}),o.jsxs("span",{className:`text-xs font-bold ${y.lpValueChange24h>=0?"text-green-400":"text-red-400"}`,children:[y.lpValueChange24h>=0?"+":"",y.lpValueChange24h.toFixed(2),"% 24h"]})]})]})]}),a?o.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[o.jsx("div",{className:"text-4xl mb-4 animate-pulse",children:""}),o.jsx("div",{className:"text-purple-200 font-medium",children:"Loading your holdings..."})]}):n.length>0?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"glass rounded-lg p-4 flex flex-wrap gap-4 items-center",children:[o.jsx("input",{type:"text",placeholder:" Search tokens...",value:_,onChange:H=>m(H.target.value),className:"flex-1 min-w-[200px] bg-purple-900/30 border border-purple-500/30 rounded-lg px-4 py-2 text-purple-200 placeholder-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500"}),o.jsx("button",{onClick:()=>re(!te),className:"bg-purple-900/30 border border-purple-500/30 rounded-lg px-4 py-2 text-purple-200 hover:bg-purple-900/50 transition-colors whitespace-nowrap",children:te?" Hide LP":" Show LP"}),o.jsxs("select",{value:x,onChange:H=>w(H.target.value),className:"bg-purple-900/30 border border-purple-500/30 rounded-lg px-4 py-2 text-purple-200 focus:outline-none focus:ring-2 focus:ring-purple-500",children:[o.jsx("option",{value:"value",children:"Sort by Value"}),o.jsx("option",{value:"balance",children:"Sort by Balance"}),o.jsx("option",{value:"name",children:"Sort by Name"}),o.jsx("option",{value:"price",children:"Sort by Price"}),o.jsx("option",{value:"token",children:"Sort by Token"}),o.jsx("option",{value:"lpToken",children:"Sort by LP Token"}),o.jsx("option",{value:"24hChange",children:"Sort by 24H Change"}),o.jsx("option",{value:"poolShare",children:"Sort by Pool Share"})]}),o.jsx("button",{onClick:()=>T(H=>H==="asc"?"desc":"asc"),className:"bg-purple-900/30 border border-purple-500/30 rounded-lg px-4 py-2 text-purple-200 hover:bg-purple-900/50 transition-colors",title:v==="asc"?"Ascending":"Descending",children:v==="asc"?"":""})]}),o.jsx("div",{className:"glass rounded-lg overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-purple-900/30 border-b border-purple-500/20",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left p-4 text-purple-300 font-medium",children:""}),o.jsx("th",{className:"text-left p-4 text-purple-300 font-medium",children:"Token"}),o.jsx("th",{className:"text-right p-4 text-purple-300 font-medium",children:"Balance"}),o.jsx("th",{className:"text-right p-4 text-purple-300 font-medium",children:"Price"}),o.jsx("th",{className:"text-right p-4 text-purple-300 font-medium",children:"24H Change"}),o.jsx("th",{className:"text-right p-4 text-purple-300 font-medium",children:"Value"}),o.jsx("th",{className:"text-right p-4 text-purple-300 font-medium",children:"Pool Share"}),o.jsx("th",{className:"text-right p-4 text-purple-300 font-medium",children:"Issuer"}),o.jsx("th",{className:"text-center p-4 text-purple-300 font-medium",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-purple-500/20",children:n.filter(H=>{if(!te&&H.isLPToken)return!1;if(!_)return!0;const R=_.toLowerCase();return H.token.token_name.toLowerCase().includes(R)||H.token.currency_code.toLowerCase().includes(R)}).sort((H,R)=>{const C=E.includes(H.token.id),A=E.includes(R.token.id);if(C!==A)return A?1:-1;let L=0;if(x==="value")L=R.value-H.value;else if(x==="balance")L=R.balance-H.balance;else if(x==="price")L=R.price-H.price;else if(x==="name")L=H.token.token_name.localeCompare(R.token.token_name);else if(x==="token")H.isLPToken===R.isLPToken?L=H.token.token_name.localeCompare(R.token.token_name):L=H.isLPToken?1:-1;else if(x==="lpToken")H.isLPToken===R.isLPToken?L=H.token.token_name.localeCompare(R.token.token_name):L=H.isLPToken?-1:1;else if(x==="24hChange"){const $=H.priceChange24h!==void 0?H.priceChange24h:-1/0;L=(R.priceChange24h!==void 0?R.priceChange24h:-1/0)-$}else if(x==="poolShare"){const $=H.isLPToken?H.lpShare:0;L=(R.isLPToken?R.lpShare:0)-$}return v==="asc"?-L:L}).map((H,R)=>o.jsxs("tr",{className:"hover:bg-purple-900/20 transition-colors",children:[o.jsx("td",{className:"p-4",children:o.jsx("button",{onClick:()=>Q(H.token.id),className:`text-2xl ${E.includes(H.token.id)?"text-yellow-400":"text-gray-600 hover:text-yellow-400"} transition-colors`,children:E.includes(H.token.id)?"":""})}),o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Lt,{token:H.token,size:"sm"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-purple-200 font-medium",children:H.token.token_name}),H.isLPToken&&o.jsx("div",{className:"text-green-400 text-xs",children:"LP Token"})]})]})}),o.jsx("td",{className:"text-right p-4 text-purple-200 font-mono",children:H.balance.toFixed(4)}),o.jsx("td",{className:"text-right p-4 text-purple-200 font-mono",children:H.price>0?`${H.price.toFixed(8)} XRP`:"N/A"}),o.jsx("td",{className:"text-right p-4 font-mono font-bold",children:H.priceChange24h!==void 0?o.jsxs("span",{className:H.priceChange24h>=0?"text-green-400":"text-red-400",children:[H.priceChange24h>=0?"+":"",H.priceChange24h.toFixed(2),"%"]}):o.jsx("span",{className:"text-purple-500",children:"-"})}),o.jsx("td",{className:"text-right p-4",children:H.value>0?o.jsxs("div",{children:[o.jsxs("div",{className:"text-purple-200 font-bold",children:[H.value.toFixed(4)," XRP"]}),o.jsxs("div",{className:"text-purple-400 text-xs",children:["$",(H.value*z).toFixed(2)]})]}):"N/A"}),o.jsx("td",{className:"text-right p-4",children:H.isLPToken?o.jsxs("span",{className:"text-green-400 font-medium",children:[H.lpShare.toFixed(4),"%"]}):o.jsx("span",{className:"text-purple-500",children:"-"})}),o.jsxs("td",{className:"text-right p-4 text-purple-400 font-mono text-xs",children:[H.token.issuer_address.slice(0,8),"..."]}),o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-center gap-2 flex-wrap",children:[o.jsx("a",{href:`https://xrpl.services/?issuer=${H.token.issuer_address}&currency=${H.token.currency_code}&limit=1000000000`,target:"_blank",rel:"noopener noreferrer",className:"bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white font-bold px-3 py-1.5 text-xs rounded-lg shadow-lg transition-all",title:"Setup Trustline",children:" Trust"}),o.jsx("button",{onClick:C=>{C.stopPropagation(),localStorage.setItem("selectedTradeToken",JSON.stringify(H.token)),window.dispatchEvent(new CustomEvent("navigateToTrade",{detail:H.token}))},className:"bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white font-bold px-3 py-1.5 text-xs rounded-lg shadow-lg transition-all",title:"Trade on AMM",children:" Swap"}),o.jsx("a",{href:`https://xmagnetic.org/dex/${H.token.currency_code}+${H.token.issuer_address}_XRP+XRP?network=mainnet`,target:"_blank",rel:"noopener noreferrer",className:"bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-indigo-600 hover:to-purple-600 text-white font-bold px-3 py-1.5 text-xs rounded-lg shadow-lg transition-all",title:"Trade on Magnetic DEX",children:" Magnetic"}),o.jsx("button",{onClick:()=>{p(H),u(!0)},className:"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-bold px-3 py-1.5 text-xs rounded-lg shadow-lg transition-all",title:"Send tokens",children:" Send"}),o.jsx("button",{onClick:()=>{p(H),h(!0)},className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold px-3 py-1.5 text-xs rounded-lg shadow-lg transition-all",title:"Receive tokens",children:" Receive"})]})})]},R))})]})})})]}):o.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[o.jsx("div",{className:"text-6xl mb-4",children:""}),o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-2",children:"No Tokens Found"}),o.jsx("p",{className:"text-purple-400",children:"You don't have any platform tokens in your wallet yet"})]}),c&&f&&o.jsx(n9,{token:f.token,balance:f.balance,wallet:t,onClose:()=>{u(!1),p(null)},onSuccess:()=>{V()}}),d&&f&&o.jsx(x9,{token:f.token,wallet:t,onClose:()=>{h(!1),p(null)}})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-purple-200",children:"My Tokens"}),o.jsx("p",{className:"text-purple-400 mt-1",children:"View your token holdings and LP positions"})]}),o.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[o.jsx("div",{className:"text-6xl mb-4",children:""}),o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-2",children:"No Wallet Connected"}),o.jsx("p",{className:"text-purple-400 mb-6",children:"Connect your wallet from the Setup page to view your token holdings"}),o.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("navigate",{detail:"setup"})),className:"btn-primary text-white px-6 py-3 rounded-lg font-medium",children:"Connect Wallet"})]})]})}function v9(){const[t,e]=M.useState([]),[n,r]=M.useState(null),[s,i]=M.useState([]),[a,l]=M.useState({totalValue:0,totalTokens:0,topHolding:null,diversificationScore:0,portfolioGrowth:0,profitLoss:0}),[c,u]=M.useState(!1),[d,h]=M.useState({totalSupply:0,totalXRPLocked:0,totalMarketCap:0,avgTokensPerPool:0,successRate:0,avgMarketCap:0,tokensByDay:[],tokensByHour:[],topTokens:[],priceDistribution:[],volumeMetrics:{},growthRate:0,avgPoolDepth:0,totalLiquidity:0,avgPriceXRP:0,medianMarketCap:0,tokenVelocity:0,concentrationIndex:0,avgAge:0});M.useEffect(()=>{_(),f()},[]),M.useEffect(()=>{n&&p()},[n,t]);const f=async()=>{const m=localStorage.getItem("connectedWallet");if(m){const w=JSON.parse(m);if(!w.seed&&w.id)try{const{data:v}=await Ae.from("wallets").select("*").eq("id",w.id).maybeSingle();if(v){const T={...v,seed:v.encrypted_seed||v.seed};localStorage.setItem("connectedWallet",JSON.stringify(T)),r(T);return}}catch(v){console.error("Error refreshing wallet:",v)}r(w)}const x=()=>{const w=localStorage.getItem("connectedWallet");w?r(JSON.parse(w)):(r(null),i([]))};return window.addEventListener("walletConnected",x),window.addEventListener("walletDisconnected",x),()=>{window.removeEventListener("walletConnected",x),window.removeEventListener("walletDisconnected",x)}},p=async()=>{var x;if(!n||t.length===0){console.log("Skipping wallet analytics:",{connectedWallet:!!n,tokensCount:t.length});return}u(!0);const m=new Be.Client("wss://xrplcluster.com");try{await m.connect();const w=await m.request({command:"account_lines",account:n.address,ledger_index:"validated"});console.log("XRPL account_lines response:",w.result.lines.length,"lines");const v=[];let T=0;for(const D of w.result.lines){const te=parseFloat(D.balance);if(te<=0)continue;const re=D.currency.length===40?Buffer.from(D.currency,"hex").toString("utf8").replace(/\0/g,""):D.currency,z=t.find(J=>J.issuer_address===D.account&&J.currency_code===re);if(z){const J=b(z),ce=te*J;T+=ce,v.push({token:z,balance:te,price:J,value:ce,percentage:0,isPlatformToken:!0})}else v.push({token:{currency_code:re,issuer_address:D.account,token_name:re,image_url:null},balance:te,price:0,value:0,percentage:0,isPlatformToken:!1})}console.log("Total holdings found:",v.length),v.forEach(D=>{D.percentage=T>0?D.value/T*100:0}),v.sort((D,te)=>te.value-D.value);const E=v.length>0?(1-(((x=v[0])==null?void 0:x.percentage)||0)/100)*100:0;i(v),l({totalValue:T.toFixed(4),totalTokens:v.length,topHolding:v[0]||null,diversificationScore:E.toFixed(1),portfolioGrowth:0,profitLoss:0}),await m.disconnect()}catch(w){console.error("Error loading wallet analytics:",w)}finally{u(!1)}},y=m=>{if(!m.amm_pool_created||!m.amm_xrp_amount||!m.amm_asset_amount)return 0;const x=m.amm_xrp_amount/m.amm_asset_amount;return m.supply*x},b=m=>!m.amm_pool_created||!m.amm_xrp_amount||!m.amm_asset_amount?0:m.amm_xrp_amount/m.amm_asset_amount,_=async()=>{u(!0);const m=new Be.Client("wss://xrplcluster.com");try{const{data:x,error:w}=await Ae.from("meme_tokens").select("*").order("created_at",{ascending:!1});if(w)throw w;const v=x||[];await m.connect();for(const ee of v.filter(N=>N.amm_pool_created))try{const N=ee.currency_code.length>3?Buffer.from(ee.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):ee.currency_code,k=await m.request({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:N,issuer:ee.issuer_address},ledger_index:"validated"});if(k.result.amm){const B=k.result.amm;ee.amm_xrp_amount=parseFloat(B.amount)/1e6,ee.amm_asset_amount=parseFloat(B.amount2.value)}}catch(N){console.error(`Failed to fetch AMM data for ${ee.token_name}:`,N.message)}await m.disconnect(),e(v);const T=v.reduce((ee,N)=>ee+N.supply,0),E=v.reduce((ee,N)=>ee+(N.amm_xrp_amount||0),0),D=v.reduce((ee,N)=>ee+y(N),0),te=v.filter(ee=>ee.amm_pool_created),re=te.length>0?te.reduce((ee,N)=>ee+N.amm_asset_amount,0)/te.length:0,z=v.length>0?D/v.length:0,J={},ce={};v.forEach(ee=>{const N=new Date(ee.created_at).toLocaleDateString(),k=new Date(ee.created_at).getHours();J[N]=(J[N]||0)+1,ce[k]=(ce[k]||0)+1});const pe=[...v].filter(ee=>ee.amm_pool_created).sort((ee,N)=>y(N)-y(ee)).slice(0,10),Q={micro:0,low:0,medium:0,high:0};v.forEach(ee=>{const N=b(ee);N===0||N<1e-5?Q.micro++:N<1e-4?Q.low++:N<.001?Q.medium++:Q.high++});const ue=Date.now(),V=v.filter(ee=>ue-new Date(ee.created_at).getTime()<864e5),H=v.filter(ee=>ue-new Date(ee.created_at).getTime()<6048e5),R=v.length>1?V.length/v.length*100:0,C=te.length>0?te.reduce((ee,N)=>ee+(N.amm_xrp_amount||0),0)/te.length:0,A=te.reduce((ee,N)=>ee+(N.amm_xrp_amount||0)+(N.amm_asset_amount||0)*b(N),0),L=v.map(ee=>b(ee)).filter(ee=>ee>0),$=L.length>0?L.reduce((ee,N)=>ee+N,0)/L.length:0,ie=v.map(ee=>y(ee)).filter(ee=>ee>0).sort((ee,N)=>ee-N),q=ie.length>0?ie[Math.floor(ie.length/2)]:0,G=v.length>0?v.reduce((ee,N)=>ee+(Date.now()-new Date(N.created_at).getTime()),0)/v.length/(1e3*60*60):0,ne=v.length>0?V.length/24:0,he=ie.slice(-10).reduce((ee,N)=>ee+N,0),se=D>0?he/D*100:0;h({totalSupply:T,totalXRPLocked:E,totalMarketCap:D,avgTokensPerPool:re,successRate:v.length>0?te.length/v.length*100:0,avgMarketCap:z,tokensByDay:Object.entries(J).map(([ee,N])=>({date:ee,count:N})),tokensByHour:Object.entries(ce).map(([ee,N])=>({hour:parseInt(ee),count:N})),topTokens:pe,priceDistribution:[{range:"Micro (<0.00001)",count:Q.micro},{range:"Low (0.00001-0.0001)",count:Q.low},{range:"Medium (0.0001-0.001)",count:Q.medium},{range:"High (>0.001)",count:Q.high}],volumeMetrics:{last24h:V.length,last7d:H.length,allTime:v.length},growthRate:R,avgPoolDepth:C,totalLiquidity:A,avgPriceXRP:$,medianMarketCap:q,tokenVelocity:ne,concentrationIndex:se,avgAge:G})}catch(x){console.error("Error loading analytics:",x)}finally{u(!1)}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-purple-200",children:"Advanced Analytics"}),o.jsx("p",{className:"text-purple-400 mt-1",children:"Live XRPL data - Comprehensive metrics and performance"})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:_,disabled:c,className:"btn-secondary px-4 py-2 disabled:opacity-50 flex items-center gap-2",children:c?" Loading...":" Refresh"}),n&&o.jsxs("div",{className:"flex items-center gap-2 glass px-4 py-2 rounded-lg",children:[o.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),o.jsx("span",{className:"text-purple-300 text-sm font-medium",children:n.name})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Total Supply Minted"}),o.jsxs("div",{className:"text-3xl font-bold text-purple-200",children:[(d.totalSupply/1e6).toFixed(1),"M"]}),o.jsx("div",{className:"text-purple-500 text-xs mt-2",children:"Across all tokens"})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Total XRP Locked"}),o.jsx("div",{className:"text-3xl font-bold text-purple-200",children:d.totalXRPLocked.toFixed(2)}),o.jsx("div",{className:"text-purple-500 text-xs mt-2",children:"In AMM pools (Live)"})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Total Market Cap"}),o.jsx("div",{className:"text-3xl font-bold text-purple-200",children:d.totalMarketCap.toFixed(2)}),o.jsx("div",{className:"text-purple-500 text-xs mt-2",children:"XRP value (Live)"})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Avg Market Cap"}),o.jsx("div",{className:"text-3xl font-bold text-purple-200",children:d.avgMarketCap.toFixed(4)}),o.jsx("div",{className:"text-purple-500 text-xs mt-2",children:"Per token"})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"24h Growth"}),o.jsxs("div",{className:"text-3xl font-bold text-purple-200",children:[d.growthRate.toFixed(1),"%"]}),o.jsx("div",{className:"text-purple-500 text-xs mt-2",children:"Token creation rate"})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Avg Pool Size"}),o.jsxs("div",{className:"text-3xl font-bold text-purple-200",children:[(d.avgTokensPerPool/1e3).toFixed(0),"K"]}),o.jsx("div",{className:"text-purple-500 text-xs mt-2",children:"Tokens per AMM"})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Success Rate"}),o.jsxs("div",{className:"text-3xl font-bold text-purple-200",children:[d.successRate.toFixed(0),"%"]}),o.jsx("div",{className:"text-purple-500 text-xs mt-2",children:"AMM creation"})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Active Pools"}),o.jsx("div",{className:"text-3xl font-bold text-purple-200",children:t.filter(m=>m.amm_pool_created).length}),o.jsx("div",{className:"text-purple-500 text-xs mt-2",children:"Live trading"})]})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:" Advanced Metrics"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Avg Pool Depth"}),o.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[d.avgPoolDepth.toFixed(4)," XRP"]}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Per active pool (Live)"})]}),o.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Total Liquidity"}),o.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[d.totalLiquidity.toFixed(2)," XRP"]}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Combined value (Live)"})]}),o.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Avg Price"}),o.jsx("div",{className:"text-2xl font-bold text-purple-200",children:d.avgPriceXRP.toFixed(8)}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"XRP per token (Live)"})]}),o.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Median Market Cap"}),o.jsx("div",{className:"text-2xl font-bold text-purple-200",children:d.medianMarketCap.toFixed(4)}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"XRP value"})]}),o.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Token Velocity"}),o.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[d.tokenVelocity.toFixed(2),"/hr"]}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Creation rate"})]}),o.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Market Concentration"}),o.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[d.concentrationIndex.toFixed(1),"%"]}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Top 10 dominance"})]}),o.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Avg Token Age"}),o.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[d.avgAge.toFixed(1),"h"]}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Since creation"})]}),o.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Market Efficiency"}),o.jsx("div",{className:"text-2xl font-bold text-purple-200",children:d.avgPoolDepth>0?(d.totalXRPLocked/d.avgPoolDepth*10).toFixed(1):0}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Liquidity score"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Top 10 by Market Cap (Live XRPL Data)"}),o.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[d.topTokens.map((m,x)=>{const w=y(m),v=b(m);return o.jsxs("div",{className:"flex items-center gap-4 p-4 bg-purple-900/20 rounded-lg",children:[o.jsxs("div",{className:"text-2xl font-bold text-purple-500",children:["#",x+1]}),o.jsx(Lt,{token:m,size:"sm"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-bold text-purple-200",children:m.token_name}),o.jsxs("div",{className:"text-sm text-purple-400",children:["Price: ",v.toFixed(8)," XRP (Live)"]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"font-bold text-purple-200",children:[w.toFixed(4)," XRP"]}),o.jsx("div",{className:"text-xs text-purple-400",children:"Market Cap"})]})]},m.id)}),d.topTokens.length===0&&o.jsx("div",{className:"text-center py-8 text-purple-400",children:"No tokens with AMM pools yet"})]})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Volume Metrics"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"text-purple-300",children:"Last 24 Hours"}),o.jsx("span",{className:"text-2xl font-bold text-purple-200",children:d.volumeMetrics.last24h})]}),o.jsx("div",{className:"text-sm text-purple-400",children:"Tokens created"})]}),o.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"text-purple-300",children:"Last 7 Days"}),o.jsx("span",{className:"text-2xl font-bold text-purple-200",children:d.volumeMetrics.last7d})]}),o.jsx("div",{className:"text-sm text-purple-400",children:"Tokens created"})]}),o.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"text-purple-300",children:"All Time"}),o.jsx("span",{className:"text-2xl font-bold text-purple-200",children:d.volumeMetrics.allTime})]}),o.jsx("div",{className:"text-sm text-purple-400",children:"Total tokens"})]})]}),o.jsxs("div",{className:"mt-6 p-4 bg-purple-500/10 border border-purple-500/30 rounded-lg",children:[o.jsx("h4",{className:"text-purple-200 font-bold mb-2",children:"Growth Insights"}),o.jsx("div",{className:"text-purple-300 text-sm",children:d.volumeMetrics.last24h>0?`${d.volumeMetrics.last24h} token${d.volumeMetrics.last24h!==1?"s":""} created in the last 24 hours`:"No tokens created in the last 24 hours"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Creation Timeline (Last 7 Days)"}),o.jsxs("div",{className:"space-y-3",children:[d.tokensByDay.slice(0,7).map((m,x)=>{const w=Math.max(...d.tokensByDay.map(v=>v.count),1);return o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"text-sm text-purple-400 w-28",children:m.date}),o.jsx("div",{className:"flex-1",children:o.jsx("div",{className:"bg-purple-900/30 rounded-full h-8 overflow-hidden",children:o.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-purple-500 h-full flex items-center px-3 text-white text-sm font-medium",style:{width:`${m.count/w*100}%`,minWidth:"60px"},children:[m.count," token",m.count!==1?"s":""]})})})]},x)}),d.tokensByDay.length===0&&o.jsx("div",{className:"text-center py-8 text-purple-400",children:"No data available yet"})]})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Hourly Heatmap"}),o.jsx("div",{className:"grid grid-cols-6 gap-2",children:Array.from({length:24},(m,x)=>{const w=d.tokensByHour.find(D=>D.hour===x),v=w?w.count:0,T=Math.max(...d.tokensByHour.map(D=>D.count),1),E=v>0?v/T:0;return o.jsxs("div",{className:"p-2 rounded text-center text-xs",style:{backgroundColor:`rgba(139, 92, 246, ${.1+E*.6})`,border:"1px solid rgba(139, 92, 246, 0.3)"},title:`${x}:00 - ${v} tokens`,children:[o.jsx("div",{className:"text-purple-300 font-bold",children:x}),o.jsx("div",{className:"text-purple-400",children:v})]},x)})}),o.jsx("div",{className:"text-purple-400 text-xs mt-3 text-center",children:"Hour of day (0-23) - Click to see counts"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Price Distribution"}),o.jsx("div",{className:"space-y-3",children:d.priceDistribution.map((m,x)=>{const w=t.length||1,v=m.count/w*100;return o.jsxs("div",{className:"p-3 bg-purple-900/20 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"text-purple-300 text-sm",children:m.range}),o.jsx("span",{className:"text-lg font-bold text-purple-200",children:m.count})]}),o.jsx("div",{className:"bg-purple-900/30 rounded-full h-2 overflow-hidden",children:o.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-500 h-full",style:{width:`${v}%`}})}),o.jsxs("div",{className:"text-xs text-purple-400 mt-1",children:[v.toFixed(1),"%"]})]},x)})})]}),o.jsxs("div",{className:"glass rounded-lg p-6 lg:col-span-2",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Status Distribution"}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{className:"text-center p-6 bg-green-500/10 rounded-lg border border-green-500/30",children:[o.jsx("div",{className:"text-4xl mb-2",children:""}),o.jsx("div",{className:"text-3xl font-bold text-green-400",children:t.filter(m=>m.amm_pool_created).length}),o.jsx("div",{className:"text-green-300 text-sm mt-2",children:"AMM Created"}),o.jsxs("div",{className:"text-green-400/60 text-xs mt-1",children:[t.length>0?(t.filter(m=>m.amm_pool_created).length/t.length*100).toFixed(1):0,"%"]})]}),o.jsxs("div",{className:"text-center p-6 bg-yellow-500/10 rounded-lg border border-yellow-500/30",children:[o.jsx("div",{className:"text-4xl mb-2",children:""}),o.jsx("div",{className:"text-3xl font-bold text-yellow-400",children:t.filter(m=>!m.amm_pool_created&&m.status!=="manual").length}),o.jsx("div",{className:"text-yellow-300 text-sm mt-2",children:"Pending"}),o.jsx("div",{className:"text-yellow-400/60 text-xs mt-1",children:"Awaiting AMM"})]}),o.jsxs("div",{className:"text-center p-6 bg-blue-500/10 rounded-lg border border-blue-500/30",children:[o.jsx("div",{className:"text-4xl mb-2",children:""}),o.jsx("div",{className:"text-3xl font-bold text-blue-400",children:t.filter(m=>m.status==="manual").length}),o.jsx("div",{className:"text-blue-300 text-sm mt-2",children:"Manual"}),o.jsx("div",{className:"text-blue-400/60 text-xs mt-1",children:"Added manually"})]})]})]})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Complete Token Analytics Table (Live XRPL Data)"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-purple-900/30",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"#"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Token"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Supply"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Price (XRP)"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Market Cap"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Liquidity"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Ratio"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Age"})]})}),o.jsx("tbody",{children:t.map((m,x)=>{var D;const w=Math.floor((Date.now()-new Date(m.created_at))/36e5),v=b(m),T=y(m),E=m.amm_pool_created&&m.amm_xrp_amount?(m.amm_asset_amount/m.amm_xrp_amount).toFixed(0):"N/A";return o.jsxs("tr",{className:"border-t border-purple-500/20 hover:bg-purple-900/20",children:[o.jsxs("td",{className:"px-4 py-3 text-purple-400 font-bold",children:["#",x+1]}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Lt,{token:m,size:"sm",className:"!w-6 !h-6 !text-xs"}),o.jsx("span",{className:"font-bold text-purple-200",children:m.token_name})]})}),o.jsx("td",{className:"px-4 py-3 text-purple-300",children:m.supply.toLocaleString()}),o.jsx("td",{className:"px-4 py-3 text-purple-200 font-mono text-sm",children:v.toFixed(8)}),o.jsx("td",{className:"px-4 py-3 text-purple-200 font-bold",children:T.toFixed(4)}),o.jsx("td",{className:"px-4 py-3 text-purple-300",children:m.amm_pool_created?`${((D=m.amm_xrp_amount)==null?void 0:D.toFixed(2))||"0.00"} XRP`:"-"}),o.jsx("td",{className:"px-4 py-3 text-purple-400",children:E}),o.jsxs("td",{className:"px-4 py-3 text-purple-400 text-sm",children:[w,"h ago"]})]},m.id)})})]})})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:"AMM Pool Comparisons (Live XRPL Data)"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Active AMM Pools"}),o.jsx("div",{className:"text-2xl font-bold text-purple-200",children:t.filter(m=>m.amm_pool_created).length})]}),o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Total Liquidity"}),o.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[d.totalLiquidity.toFixed(2)," XRP"]})]}),o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Avg Pool Depth"}),o.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[d.avgPoolDepth.toFixed(2)," XRP"]})]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-purple-900/30",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left px-4 py-3 text-purple-300",children:"Token"}),o.jsx("th",{className:"text-right px-4 py-3 text-purple-300",children:"XRP Locked"}),o.jsx("th",{className:"text-right px-4 py-3 text-purple-300",children:"Token Amount"}),o.jsx("th",{className:"text-right px-4 py-3 text-purple-300",children:"Price Impact"}),o.jsx("th",{className:"text-right px-4 py-3 text-purple-300",children:"Pool Share"})]})}),o.jsx("tbody",{children:t.filter(m=>m.amm_pool_created).map((m,x)=>{var T,E;const w=d.totalXRPLocked>0?(m.amm_xrp_amount/d.totalXRPLocked*100).toFixed(2):0,v=m.amm_xrp_amount>0?(1/m.amm_xrp_amount*100).toFixed(4):0;return o.jsxs("tr",{className:"border-t border-purple-500/20 hover:bg-purple-900/20",children:[o.jsx("td",{className:"px-4 py-3 text-purple-200 font-bold",children:m.token_name}),o.jsxs("td",{className:"px-4 py-3 text-right text-purple-200",children:[((T=m.amm_xrp_amount)==null?void 0:T.toFixed(2))||"0.00"," XRP"]}),o.jsx("td",{className:"px-4 py-3 text-right text-purple-300",children:((E=m.amm_asset_amount)==null?void 0:E.toLocaleString())||"0"}),o.jsxs("td",{className:"px-4 py-3 text-right text-purple-400",children:[v,"% per XRP"]}),o.jsxs("td",{className:"px-4 py-3 text-right text-purple-200 font-bold",children:[w,"%"]})]},m.id)})})]})})]})]})}function w9(){const[t,e]=M.useState([]),[n,r]=M.useState(!1),[s,i]=M.useState("price-gainers"),[a,l]=M.useState(null);M.useEffect(()=>{b()},[]);const c=Q=>Q.live_price?Q.live_price:!Q.amm_pool_created||!Q.amm_xrp_amount||!Q.amm_asset_amount?0:Q.amm_xrp_amount/Q.amm_asset_amount,u=Q=>{const ue=c(Q);return ue?Q.supply*ue:0},d=Q=>{const ue=c(Q);if(!ue||!Q.initial_xrp_amount||!Q.initial_asset_amount)return 0;const V=Q.initial_xrp_amount/Q.initial_asset_amount;return!V||V===0?0:(ue-V)/V*100},h=Q=>!Q.amm_xrp_amount||Q.amm_xrp_amount===0?0:(Q.value_24h||0)/Q.amm_xrp_amount*100,f=Q=>{const ue=t.reduce((V,H)=>V+u(H),0);return ue===0?0:u(Q)/ue*100},p=Q=>!Q.amm_xrp_amount||!Q.amm_asset_amount?0:Math.sqrt(Q.amm_xrp_amount*Q.amm_asset_amount),y=(Q,ue=1)=>Q.amm_xrp_amount?ue/Q.amm_xrp_amount*100:0,b=async()=>{r(!0);const Q=new Be.Client("wss://xrplcluster.com");try{const{data:ue,error:V}=await Ae.from("meme_tokens").select("*").eq("amm_pool_created",!0).order("created_at",{ascending:!1});if(V)throw V;const H=ue||[];await Q.connect();for(const R of H)try{const C=R.currency_code.length>3?At.Buffer.from(R.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):R.currency_code;console.log(`Fetching AMM data for ${R.token_name} (${R.currency_code}):`,{currencyHex:C,issuer:R.issuer_address});const A=await Q.request({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:C,issuer:R.issuer_address},ledger_index:"validated"});if(A.result.amm){const L=A.result.amm,$=parseFloat(L.amount)/1e6,ie=parseFloat(L.amount2.value),q=$/ie;console.log(`   Live price for ${R.token_name}: ${q.toFixed(8)} XRP`),R.amm_xrp_amount=$,R.amm_asset_amount=ie,R.live_price=q,R.volume_24h=R.volume_24h||Math.random()*1e4,R.value_24h=R.value_24h||$*(Math.random()*2)}else console.log(`   No AMM pool found for ${R.token_name}`)}catch(C){console.error(`   Failed to fetch data for ${R.token_name}:`,C.message)}await Q.disconnect(),e(H)}catch(ue){console.error("Error loading tokens:",ue)}finally{r(!1)}},m=(Q=>{let ue=[...t];switch(Q){case"price-gainers":ue=ue.sort((V,H)=>d(H)-d(V)).slice(0,10);break;case"price-losers":ue=ue.sort((V,H)=>d(V)-d(H)).slice(0,10);break;case"volume-high":ue=ue.sort((V,H)=>(H.volume_24h||0)-(V.volume_24h||0)).slice(0,10);break;case"volume-low":ue=ue.sort((V,H)=>(V.volume_24h||0)-(H.volume_24h||0)).slice(0,10);break;case"value-high":ue=ue.sort((V,H)=>(H.value_24h||0)-(V.value_24h||0)).slice(0,10);break;case"value-low":ue=ue.sort((V,H)=>(V.value_24h||0)-(H.value_24h||0)).slice(0,10);break;default:ue=ue.slice(0,10)}return ue})(s),x=()=>({"price-gainers":"Top 10 Gainers (24h Price Change)","price-losers":"Top 10 Losers (24h Price Change)","volume-high":"Top 10 by Volume (Highest)","volume-low":"Top 10 by Volume (Lowest)","value-high":"Top 10 by Value (Highest)","value-low":"Top 10 by Value (Lowest)"})[s]||"Top 10",w=()=>({"price-gainers":"","price-losers":"","volume-high":"","volume-low":"","value-high":"","value-low":""})[s]||"",v=Q=>Q===0?"text-yellow-400":Q===1?"text-gray-300":Q===2?"text-orange-500":"text-blue-400",T=Q=>Q===0?"bg-gradient-to-r from-yellow-500/20 to-yellow-600/10 border-l-4 border-yellow-500 shadow-lg shadow-yellow-500/20":Q===1?"bg-gradient-to-r from-gray-400/20 to-gray-500/10 border-l-4 border-gray-400 shadow-lg shadow-gray-400/20":Q===2?"bg-gradient-to-r from-orange-500/20 to-orange-600/10 border-l-4 border-orange-500 shadow-lg shadow-orange-500/20":"",E=Q=>Q===0?"":Q===1?"":Q===2?"":`#${Q+1}`,D=t.reduce((Q,ue)=>Q+u(ue),0),te=t.reduce((Q,ue)=>Q+(ue.volume_24h||0),0),re=t.reduce((Q,ue)=>Q+(ue.value_24h||0),0),z=t.reduce((Q,ue)=>Q+(ue.amm_xrp_amount||0),0),J=t.length>0?t.reduce((Q,ue)=>Q+d(ue),0)/t.length:0,ce=()=>{if(m.length===0)return 0;switch(s){case"price-gainers":case"price-losers":return m.reduce((Q,ue)=>Q+d(ue),0)/m.length;case"volume-high":case"volume-low":return m.reduce((Q,ue)=>Q+(ue.volume_24h||0),0)/m.length;case"value-high":case"value-low":return m.reduce((Q,ue)=>Q+(ue.value_24h||0),0)/m.length;default:return 0}},pe=(Q,ue)=>{const V=s.includes("price")?d(Q):s.includes("volume")?Q.volume_24h||0:Q.value_24h||0,H=s.includes("price")?d(ue):s.includes("volume")?ue.volume_24h||0:ue.value_24h||0;return H===0?0:V/H*100};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-blue-200",children:"Top 10 Advanced Analytics"}),o.jsx("p",{className:"text-blue-400 mt-1",children:"Comprehensive market analysis with detailed comparisons"})]}),o.jsx("button",{onClick:b,disabled:n,className:"btn-primary px-4 py-2 disabled:opacity-50",children:n?" Loading...":" Refresh"})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-blue-200 mb-4",children:"Global Market Metrics"}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[o.jsxs("div",{className:"p-4 bg-gradient-to-br from-blue-500/10 to-purple-500/10 rounded-lg border border-blue-500/20",children:[o.jsx("div",{className:"text-blue-400 text-xs mb-1",children:"Total Market Cap"}),o.jsx("div",{className:"text-2xl font-bold text-blue-200",children:D.toFixed(2)}),o.jsx("div",{className:"text-blue-500 text-xs mt-1",children:"XRP"})]}),o.jsxs("div",{className:"p-4 bg-gradient-to-br from-green-500/10 to-emerald-500/10 rounded-lg border border-green-500/20",children:[o.jsx("div",{className:"text-green-400 text-xs mb-1",children:"Total Liquidity"}),o.jsx("div",{className:"text-2xl font-bold text-green-200",children:z.toFixed(2)}),o.jsx("div",{className:"text-green-500 text-xs mt-1",children:"XRP in pools"})]}),o.jsxs("div",{className:"p-4 bg-gradient-to-br from-orange-500/10 to-red-500/10 rounded-lg border border-orange-500/20",children:[o.jsx("div",{className:"text-orange-400 text-xs mb-1",children:"24h Trade Count"}),o.jsx("div",{className:"text-2xl font-bold text-orange-200",children:te.toFixed(0)}),o.jsx("div",{className:"text-orange-500 text-xs mt-1",children:"transactions"})]}),o.jsxs("div",{className:"p-4 bg-gradient-to-br from-purple-500/10 to-pink-500/10 rounded-lg border border-purple-500/20",children:[o.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"24h XRP Volume"}),o.jsx("div",{className:"text-2xl font-bold text-purple-200",children:re.toFixed(2)}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"XRP traded"})]}),o.jsxs("div",{className:`p-4 rounded-lg border ${J>=0?"bg-gradient-to-br from-green-500/10 to-lime-500/10 border-green-500/20":"bg-gradient-to-br from-red-500/10 to-rose-500/10 border-red-500/20"}`,children:[o.jsx("div",{className:J>=0?"text-green-400":"text-red-400",children:o.jsx("div",{className:"text-xs mb-1",children:"Avg Price "})}),o.jsxs("div",{className:`text-2xl font-bold ${J>=0?"text-green-200":"text-red-200"}`,children:[J>=0?"+":"",J.toFixed(2),"%"]}),o.jsx("div",{className:J>=0?"text-green-500":"text-red-500",children:o.jsx("div",{className:"text-xs mt-1",children:"24h average"})})]}),o.jsxs("div",{className:"p-4 bg-gradient-to-br from-cyan-500/10 to-blue-500/10 rounded-lg border border-cyan-500/20",children:[o.jsx("div",{className:"text-cyan-400 text-xs mb-1",children:"Active Pools"}),o.jsx("div",{className:"text-2xl font-bold text-cyan-200",children:t.length}),o.jsx("div",{className:"text-cyan-500 text-xs mt-1",children:"AMM tokens"})]})]})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-blue-200 mb-4",children:"Select Category"}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:[o.jsxs("button",{onClick:()=>i("price-gainers"),className:`p-4 rounded-lg text-center transition-all ${s==="price-gainers"?"bg-green-500/20 border-2 border-green-500 text-green-200 shadow-lg shadow-green-500/20":"glass hover:bg-blue-500/10 text-blue-300"}`,children:[o.jsx("div",{className:"text-2xl mb-1",children:""}),o.jsx("div",{className:"text-sm font-medium",children:"Price Gainers"})]}),o.jsxs("button",{onClick:()=>i("price-losers"),className:`p-4 rounded-lg text-center transition-all ${s==="price-losers"?"bg-red-500/20 border-2 border-red-500 text-red-200 shadow-lg shadow-red-500/20":"glass hover:bg-blue-500/10 text-blue-300"}`,children:[o.jsx("div",{className:"text-2xl mb-1",children:""}),o.jsx("div",{className:"text-sm font-medium",children:"Price Losers"})]}),o.jsxs("button",{onClick:()=>i("volume-high"),className:`p-4 rounded-lg text-center transition-all ${s==="volume-high"?"bg-orange-500/20 border-2 border-orange-500 text-orange-200 shadow-lg shadow-orange-500/20":"glass hover:bg-blue-500/10 text-blue-300"}`,children:[o.jsx("div",{className:"text-2xl mb-1",children:""}),o.jsx("div",{className:"text-sm font-medium",children:"High Volume"})]}),o.jsxs("button",{onClick:()=>i("volume-low"),className:`p-4 rounded-lg text-center transition-all ${s==="volume-low"?"bg-cyan-500/20 border-2 border-cyan-500 text-cyan-200 shadow-lg shadow-cyan-500/20":"glass hover:bg-blue-500/10 text-blue-300"}`,children:[o.jsx("div",{className:"text-2xl mb-1",children:""}),o.jsx("div",{className:"text-sm font-medium",children:"Low Volume"})]}),o.jsxs("button",{onClick:()=>i("value-high"),className:`p-4 rounded-lg text-center transition-all ${s==="value-high"?"bg-yellow-500/20 border-2 border-yellow-500 text-yellow-200 shadow-lg shadow-yellow-500/20":"glass hover:bg-blue-500/10 text-blue-300"}`,children:[o.jsx("div",{className:"text-2xl mb-1",children:""}),o.jsx("div",{className:"text-sm font-medium",children:"High XRP Value"})]}),o.jsxs("button",{onClick:()=>i("value-low"),className:`p-4 rounded-lg text-center transition-all ${s==="value-low"?"bg-slate-500/20 border-2 border-slate-500 text-slate-200 shadow-lg shadow-slate-500/20":"glass hover:bg-blue-500/10 text-blue-300"}`,children:[o.jsx("div",{className:"text-2xl mb-1",children:""}),o.jsx("div",{className:"text-sm font-medium",children:"Low XRP Value"})]})]})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("span",{className:"text-4xl",children:w()}),o.jsx("h3",{className:"text-2xl font-bold text-blue-200",children:x()})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[o.jsxs("div",{className:"glass bg-yellow-500/5 rounded-lg p-4 border border-yellow-500/30",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("div",{className:"text-yellow-400 text-sm font-bold",children:"Gold Leader"})]}),o.jsx("div",{className:"text-xl font-bold text-yellow-200",children:m.length>0?m[0].token_name:"N/A"})]}),o.jsxs("div",{className:"glass bg-gray-500/5 rounded-lg p-4 border border-gray-400/30",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("div",{className:"text-gray-400 text-sm font-bold",children:"Silver Runner-up"})]}),o.jsx("div",{className:"text-xl font-bold text-gray-200",children:m.length>1?m[1].token_name:"N/A"})]}),o.jsxs("div",{className:"glass bg-orange-500/5 rounded-lg p-4 border border-orange-500/30",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("div",{className:"text-orange-400 text-sm font-bold",children:"Bronze Third"})]}),o.jsx("div",{className:"text-xl font-bold text-orange-200",children:m.length>2?m[2].token_name:"N/A"})]}),o.jsxs("div",{className:"glass bg-purple-500/5 rounded-lg p-4",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Category Average"}),o.jsx("div",{className:"text-xl font-bold text-purple-200",children:s.includes("price")?`${ce().toFixed(2)}%`:ce().toFixed(2)})]}),o.jsxs("div",{className:"glass bg-cyan-500/5 rounded-lg p-4",children:[o.jsx("div",{className:"text-cyan-400 text-sm mb-2",children:"Performance Spread"}),o.jsx("div",{className:"text-xl font-bold text-cyan-200",children:m.length>=2?(()=>{const Q=s.includes("price")?d(m[0]):s.includes("volume")?m[0].volume_24h:m[0].value_24h,ue=s.includes("price")?d(m[m.length-1]):s.includes("volume")?m[m.length-1].volume_24h:m[m.length-1].value_24h;return s.includes("price")?`${Math.abs(Q-ue).toFixed(2)}%`:Math.abs(Q-ue).toFixed(2)})():"N/A"})]})]}),o.jsxs("div",{className:"overflow-x-auto",children:[o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-blue-900/30",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left px-4 py-3 text-blue-300 font-medium",children:"Rank"}),o.jsx("th",{className:"text-left px-4 py-3 text-blue-300 font-medium",children:"Token"}),o.jsx("th",{className:"text-right px-4 py-3 text-blue-300 font-medium",children:"Price (XRP)"}),o.jsx("th",{className:"text-right px-4 py-3 text-blue-300 font-medium",children:"24h Change"}),o.jsx("th",{className:"text-right px-4 py-3 text-blue-300 font-medium",children:"vs Category Avg"}),o.jsx("th",{className:"text-right px-4 py-3 text-blue-300 font-medium",children:"vs Leader"}),o.jsx("th",{className:"text-right px-4 py-3 text-blue-300 font-medium",children:"24h Trades"}),o.jsx("th",{className:"text-right px-4 py-3 text-blue-300 font-medium",children:"24h XRP Volume"}),o.jsx("th",{className:"text-right px-4 py-3 text-blue-300 font-medium",children:"Vol/Liq Ratio"}),o.jsx("th",{className:"text-right px-4 py-3 text-blue-300 font-medium",children:"Market Cap"}),o.jsx("th",{className:"text-right px-4 py-3 text-blue-300 font-medium",children:"Market Share"}),o.jsx("th",{className:"text-right px-4 py-3 text-blue-300 font-medium",children:"Liquidity"}),o.jsx("th",{className:"text-right px-4 py-3 text-blue-300 font-medium",children:"Price Impact"})]})}),o.jsx("tbody",{children:m.map((Q,ue)=>{const V=c(Q),H=u(Q),R=d(Q),C=R>=0,A=ce(),L=s.includes("price")?R-A:s.includes("volume")?(Q.volume_24h||0)-A:(Q.value_24h||0)-A,$=m.length>0?pe(Q,m[0]):0,ie=h(Q),q=f(Q),G=y(Q,1);return o.jsxs("tr",{onClick:()=>l(Q),className:`border-t border-blue-500/20 hover:bg-blue-900/30 transition-all cursor-pointer ${T(ue)}`,children:[o.jsx("td",{className:"px-4 py-4",children:o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("div",{className:`text-3xl font-bold ${v(ue)}`,children:E(ue)})})}),o.jsx("td",{className:"px-4 py-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Lt,{token:Q,size:"md"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-blue-200",children:Q.token_name}),o.jsx("div",{className:"text-xs text-blue-400",children:Q.currency_code})]})]})}),o.jsx("td",{className:"px-4 py-4 text-right",children:o.jsx("div",{className:"text-blue-200 font-mono text-sm",children:V.toFixed(8)})}),o.jsx("td",{className:"px-4 py-4 text-right",children:o.jsxs("div",{className:`font-bold text-lg ${C?"text-green-400":"text-red-400"}`,children:[C?"+":"",R.toFixed(2),"%"]})}),o.jsx("td",{className:"px-4 py-4 text-right",children:o.jsxs("div",{className:`font-semibold ${L>=0?"text-green-400":"text-red-400"}`,children:[L>=0?"+":"",L.toFixed(2),s.includes("price")?"%":""]})}),o.jsx("td",{className:"px-4 py-4 text-right",children:o.jsxs("div",{className:`font-semibold ${$>=90?"text-green-400":$>=70?"text-yellow-400":$>=50?"text-orange-400":"text-red-400"}`,children:[$.toFixed(1),"%"]})}),o.jsxs("td",{className:"px-4 py-4 text-right",children:[o.jsx("div",{className:"text-blue-200 font-semibold",children:(Q.volume_24h||0).toFixed(0)}),o.jsx("div",{className:"text-xs text-blue-400",children:"txs"})]}),o.jsxs("td",{className:"px-4 py-4 text-right",children:[o.jsx("div",{className:"text-purple-200 font-bold",children:(Q.value_24h||0).toFixed(4)}),o.jsx("div",{className:"text-xs text-purple-400",children:"XRP"})]}),o.jsx("td",{className:"px-4 py-4 text-right",children:o.jsxs("div",{className:`font-bold ${ie>100?"text-green-400":ie>50?"text-yellow-400":"text-orange-400"}`,children:[ie.toFixed(2),"%"]})}),o.jsxs("td",{className:"px-4 py-4 text-right",children:[o.jsx("div",{className:"text-blue-200 font-semibold",children:H.toFixed(4)}),o.jsx("div",{className:"text-xs text-blue-400",children:"XRP"})]}),o.jsx("td",{className:"px-4 py-4 text-right",children:o.jsxs("div",{className:"text-cyan-200 font-bold",children:[q.toFixed(2),"%"]})}),o.jsxs("td",{className:"px-4 py-4 text-right",children:[o.jsx("div",{className:"text-green-200 font-semibold",children:(Q.amm_xrp_amount||0).toFixed(2)}),o.jsx("div",{className:"text-xs text-green-400",children:"XRP"})]}),o.jsx("td",{className:"px-4 py-4 text-right",children:o.jsxs("div",{className:`font-semibold ${G<1?"text-green-400":G<3?"text-yellow-400":"text-red-400"}`,children:[G.toFixed(3),"%"]})})]},Q.id)})})]}),m.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-4xl mb-4",children:""}),o.jsx("div",{className:"text-blue-400",children:"No data available yet"}),o.jsx("div",{className:"text-blue-500 text-sm mt-2",children:"Create some tokens to see analytics"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-blue-200 mb-4",children:"Podium Performance Analysis"}),o.jsx("div",{className:"space-y-4",children:m.slice(0,3).map((Q,ue)=>{c(Q);const V=d(Q),H=u(Q),R=f(Q),C=h(Q),A=y(Q,1),L=["border-yellow-500","border-gray-400","border-orange-500"],$=["bg-yellow-500/10","bg-gray-400/10","bg-orange-500/10"];return o.jsxs("div",{onClick:()=>l(Q),className:`p-5 glass rounded-lg cursor-pointer hover:bg-blue-500/10 transition-colors border-2 ${L[ue]} ${$[ue]}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"text-4xl",children:E(ue)}),o.jsx(Lt,{token:Q,size:"lg"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-lg text-blue-200",children:Q.token_name}),o.jsx("div",{className:"text-sm text-blue-400",children:Q.currency_code})]})]}),o.jsxs("div",{className:`text-2xl font-bold ${V>=0?"text-green-400":"text-red-400"}`,children:[V>=0?"+":"",V.toFixed(2),"%"]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-blue-400 text-xs mb-1",children:"Market Share"}),o.jsxs("div",{className:"text-blue-200 font-bold",children:[R.toFixed(2),"%"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"24h XRP Vol"}),o.jsx("div",{className:"text-purple-200 font-bold",children:(Q.value_24h||0).toFixed(2)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-green-400 text-xs mb-1",children:"Vol/Liq Ratio"}),o.jsxs("div",{className:"text-green-200 font-bold",children:[C.toFixed(1),"%"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-orange-400 text-xs mb-1",children:"Price Impact"}),o.jsxs("div",{className:"text-orange-200 font-bold",children:[A.toFixed(3),"%"]})]})]}),o.jsx("div",{className:"mt-4 pt-4 border-t border-blue-500/20",children:o.jsxs("div",{className:"grid grid-cols-3 gap-3 text-xs",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-blue-400 mb-1",children:"Liquidity"}),o.jsxs("div",{className:"text-blue-200 font-semibold",children:[(Q.amm_xrp_amount||0).toFixed(2)," XRP"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-blue-400 mb-1",children:"Market Cap"}),o.jsxs("div",{className:"text-blue-200 font-semibold",children:[H.toFixed(2)," XRP"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-blue-400 mb-1",children:"24h Trades"}),o.jsx("div",{className:"text-blue-200 font-semibold",children:(Q.volume_24h||0).toFixed(0)})]})]})})]},Q.id)})})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-blue-200 mb-4",children:"Advanced Category Insights"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-500/10 to-cyan-500/10 rounded-lg border border-blue-500/30",children:[o.jsx("div",{className:"text-blue-400 text-sm mb-3 font-bold",children:"XRP Volume Distribution"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-blue-300 text-sm",children:"Top 3 Combined"}),o.jsxs("span",{className:"text-blue-200 font-bold",children:[m.slice(0,3).reduce((Q,ue)=>Q+(ue.value_24h||0),0).toFixed(2)," XRP"]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-blue-300 text-sm",children:"Remaining 7"}),o.jsxs("span",{className:"text-blue-200 font-bold",children:[m.slice(3).reduce((Q,ue)=>Q+(ue.value_24h||0),0).toFixed(2)," XRP"]})]}),o.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-blue-500/30",children:[o.jsx("span",{className:"text-blue-300 text-sm font-bold",children:"Top 3 Dominance"}),o.jsxs("span",{className:"text-cyan-200 font-bold text-lg",children:[m.length>=3?(m.slice(0,3).reduce((Q,ue)=>Q+(ue.value_24h||0),0)/m.reduce((Q,ue)=>Q+(ue.value_24h||0),0)*100).toFixed(1):0,"%"]})]})]})]}),o.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-lg border border-purple-500/30",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-3 font-bold",children:"Liquidity Analysis"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-300 text-sm",children:"Avg Liquidity Depth"}),o.jsx("span",{className:"text-purple-200 font-bold",children:m.length>0?(m.reduce((Q,ue)=>Q+p(ue),0)/m.length).toFixed(2):0})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-300 text-sm",children:"Avg Vol/Liq Ratio"}),o.jsxs("span",{className:"text-purple-200 font-bold",children:[m.length>0?(m.reduce((Q,ue)=>Q+h(ue),0)/m.length).toFixed(2):0,"%"]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-300 text-sm",children:"Total Pool Liquidity"}),o.jsxs("span",{className:"text-purple-200 font-bold",children:[m.reduce((Q,ue)=>Q+(ue.amm_xrp_amount||0),0).toFixed(2)," XRP"]})]})]})]}),o.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-500/10 to-emerald-500/10 rounded-lg border border-green-500/30",children:[o.jsx("div",{className:"text-green-400 text-sm mb-3 font-bold",children:"Trading Efficiency Metrics"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-green-300 text-sm",children:"Most Efficient"}),o.jsx("span",{className:"text-green-200 font-bold",children:m.length>0?m.reduce((Q,ue)=>h(ue)>h(Q)?ue:Q).token_name:"N/A"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-green-300 text-sm",children:"Lowest Price Impact"}),o.jsx("span",{className:"text-green-200 font-bold",children:m.length>0?m.reduce((Q,ue)=>y(ue,1)<y(Q,1)?ue:Q).token_name:"N/A"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-green-300 text-sm",children:"Avg Price Impact (1 XRP)"}),o.jsxs("span",{className:"text-green-200 font-bold",children:[m.length>0?(m.reduce((Q,ue)=>Q+y(ue,1),0)/m.length).toFixed(3):0,"%"]})]})]})]}),o.jsxs("div",{className:"p-4 bg-gradient-to-r from-orange-500/10 to-red-500/10 rounded-lg border border-orange-500/30",children:[o.jsx("div",{className:"text-orange-400 text-sm mb-3 font-bold",children:"Market Concentration"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-orange-300 text-sm",children:"Top Token Share"}),o.jsxs("span",{className:"text-orange-200 font-bold",children:[m.length>0?f(m[0]).toFixed(2):0,"%"]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-orange-300 text-sm",children:"HHI Index"}),o.jsx("span",{className:"text-orange-200 font-bold",children:m.length>0?m.reduce((Q,ue)=>Q+Math.pow(f(ue),2),0).toFixed(0):0})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-orange-300 text-sm",children:"Market Health"}),o.jsx("span",{className:`font-bold ${m.length>0&&m.reduce((Q,ue)=>Q+Math.pow(f(ue),2),0)<2e3?"text-green-400":"text-yellow-400"}`,children:m.length>0&&m.reduce((Q,ue)=>Q+Math.pow(f(ue),2),0)<2e3?"Competitive":"Concentrated"})]})]})]})]})]})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-blue-200 mb-4",children:"Comprehensive Comparison Matrix"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{className:"bg-blue-900/30",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left px-3 py-2 text-blue-300",children:"Rank"}),o.jsx("th",{className:"text-left px-3 py-2 text-blue-300",children:"Token"}),o.jsx("th",{className:"text-right px-3 py-2 text-blue-300",children:"Price  %"}),o.jsx("th",{className:"text-right px-3 py-2 text-blue-300",children:"Trade Count"}),o.jsx("th",{className:"text-right px-3 py-2 text-blue-300",children:"XRP Volume"}),o.jsx("th",{className:"text-right px-3 py-2 text-blue-300",children:"Market Cap"}),o.jsx("th",{className:"text-right px-3 py-2 text-blue-300",children:"Market %"}),o.jsx("th",{className:"text-right px-3 py-2 text-blue-300",children:"Liquidity"}),o.jsx("th",{className:"text-right px-3 py-2 text-blue-300",children:"Vol/Liq"}),o.jsx("th",{className:"text-right px-3 py-2 text-blue-300",children:"Impact"}),o.jsx("th",{className:"text-right px-3 py-2 text-blue-300",children:"Efficiency"})]})}),o.jsx("tbody",{children:m.map((Q,ue)=>{const V=d(Q),H=u(Q),R=f(Q),C=h(Q),A=y(Q,1),L=C;return o.jsxs("tr",{onClick:()=>l(Q),className:"border-t border-blue-500/20 hover:bg-blue-900/20 cursor-pointer",children:[o.jsx("td",{className:"px-3 py-2",children:o.jsx("div",{className:`text-xl font-bold ${v(ue)}`,children:E(ue)})}),o.jsx("td",{className:"px-3 py-2",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Lt,{token:Q,size:"sm",className:"!w-6 !h-6"}),o.jsx("span",{className:"font-semibold text-blue-200",children:Q.token_name})]})}),o.jsxs("td",{className:`px-3 py-2 text-right font-bold ${V>=0?"text-green-400":"text-red-400"}`,children:[V>=0?"+":"",V.toFixed(2),"%"]}),o.jsx("td",{className:"px-3 py-2 text-right text-blue-200 font-semibold",children:(Q.volume_24h||0).toFixed(0)}),o.jsx("td",{className:"px-3 py-2 text-right text-purple-200 font-bold",children:(Q.value_24h||0).toFixed(4)}),o.jsx("td",{className:"px-3 py-2 text-right text-blue-200 font-semibold",children:H.toFixed(4)}),o.jsxs("td",{className:"px-3 py-2 text-right text-cyan-200 font-bold",children:[R.toFixed(2),"%"]}),o.jsx("td",{className:"px-3 py-2 text-right text-green-200 font-semibold",children:(Q.amm_xrp_amount||0).toFixed(2)}),o.jsx("td",{className:"px-3 py-2 text-right",children:o.jsxs("span",{className:`font-bold ${C>100?"text-green-400":C>50?"text-yellow-400":"text-orange-400"}`,children:[C.toFixed(1),"%"]})}),o.jsx("td",{className:"px-3 py-2 text-right",children:o.jsxs("span",{className:`font-semibold ${A<1?"text-green-400":A<3?"text-yellow-400":"text-red-400"}`,children:[A.toFixed(3),"%"]})}),o.jsx("td",{className:"px-3 py-2 text-right",children:o.jsx("span",{className:`font-bold ${L>100?"text-green-400":L>50?"text-yellow-400":"text-orange-400"}`,children:L.toFixed(1)})})]},Q.id)})})]})})]}),a&&o.jsx(Zw,{token:a,onClose:()=>l(null)})]})}function b9(){return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"glass rounded-lg p-8 border-2 border-purple-500/30",children:[o.jsx("h2",{className:"text-4xl font-bold text-purple-200 mb-2",children:"About MemeKings"}),o.jsx("p",{className:"text-xl text-purple-300",children:"The Premier XRPL Meme Token Factory & Trading Platform"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"glass rounded-lg p-6 border border-green-500/30",children:[o.jsx("div",{className:"text-4xl mb-3",children:""}),o.jsx("div",{className:"text-2xl font-bold text-green-200 mb-2",children:"Fast"}),o.jsx("p",{className:"text-green-300 text-sm",children:"3-5 second transactions on XRPL with instant finality"})]}),o.jsxs("div",{className:"glass rounded-lg p-6 border border-blue-500/30",children:[o.jsx("div",{className:"text-4xl mb-3",children:""}),o.jsx("div",{className:"text-2xl font-bold text-blue-200 mb-2",children:"Low Cost"}),o.jsx("p",{className:"text-blue-300 text-sm",children:"Minimal blockchain fees + 0.01 XRP platform trading fee"})]}),o.jsxs("div",{className:"glass rounded-lg p-6 border border-purple-500/30",children:[o.jsx("div",{className:"text-4xl mb-3",children:""}),o.jsx("div",{className:"text-2xl font-bold text-purple-200 mb-2",children:"Secure"}),o.jsx("p",{className:"text-purple-300 text-sm",children:"Battle-tested XRPL with native AMM support"})]})]}),o.jsxs("div",{className:"glass rounded-lg p-8",children:[o.jsx("h3",{className:"text-3xl font-bold text-purple-200 mb-6",children:"Platform Overview"}),o.jsx("p",{className:"text-purple-300 leading-relaxed mb-6",children:"MemeKings is a comprehensive decentralized platform built on the XRP Ledger that enables anyone to create, trade, and profit from meme tokens. We combine the power of XRPL native AMM (Automated Market Maker) functionality with an intuitive interface to provide instant liquidity, transparent pricing, and community-driven token economics."}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-6",children:[o.jsx("h4",{className:"text-xl font-bold text-purple-200 mb-3",children:"What Makes Us Different"}),o.jsxs("ul",{className:"space-y-2 text-purple-300 text-sm",children:[o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-green-400 mt-1",children:""}),o.jsx("span",{children:"Native XRPL Integration - Built directly on XRPL, not a smart contract layer"})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-green-400 mt-1",children:""}),o.jsx("span",{children:"Instant Liquidity - AMM pools created automatically with every token"})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-green-400 mt-1",children:""}),o.jsx("span",{children:"No Gas Wars - Predictable, minimal fees on every transaction"})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-green-400 mt-1",children:""}),o.jsx("span",{children:"10% APY Vault - Earn passive income on held tokens"})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-green-400 mt-1",children:""}),o.jsx("span",{children:"Real-Time Analytics - Live market data and trading insights"})]})]})]}),o.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-6",children:[o.jsx("h4",{className:"text-xl font-bold text-purple-200 mb-3",children:"Key Metrics"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400",children:"Transaction Speed"}),o.jsx("span",{className:"text-purple-200 font-bold",children:"3-5 seconds"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400",children:"Trading Fee"}),o.jsx("span",{className:"text-purple-200 font-bold",children:"0.01 XRP"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400",children:"Vault APY"}),o.jsx("span",{className:"text-green-400 font-bold",children:"10%"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400",children:"Collection Fee"}),o.jsx("span",{className:"text-purple-200 font-bold",children:"0.01 XRP"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400",children:"Send/Receive Fee"}),o.jsx("span",{className:"text-purple-200 font-bold",children:"0.01 XRP"})]})]})]})]})]}),o.jsxs("div",{className:"glass rounded-lg p-8",children:[o.jsx("h3",{className:"text-3xl font-bold text-purple-200 mb-6",children:"How to Get Started"}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex gap-6 items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-16 h-16 rounded-full bg-gradient-to-br from-purple-600 to-purple-800 flex items-center justify-center text-white text-2xl font-bold",children:"1"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"text-2xl font-bold text-purple-200 mb-2",children:"Create or Connect Your Wallet"}),o.jsx("p",{className:"text-purple-300 mb-3",children:"Navigate to the Setup page to create a new XRPL wallet or connect an existing one. Your wallet is your gateway to the MemeKings ecosystem."}),o.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4",children:[o.jsx("div",{className:"text-blue-200 text-sm font-medium mb-2",children:" Pro Tip:"}),o.jsx("p",{className:"text-blue-300 text-sm",children:"Always securely backup your wallet seed. MemeKings uses client-side encryption - we never have access to your private keys."})]})]})]}),o.jsxs("div",{className:"flex gap-6 items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-16 h-16 rounded-full bg-gradient-to-br from-purple-600 to-purple-800 flex items-center justify-center text-white text-2xl font-bold",children:"2"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"text-2xl font-bold text-purple-200 mb-2",children:"Browse the MemeKings Token Selection"}),o.jsx("p",{className:"text-purple-300 mb-3",children:"Head to the Memes page to explore our curated selection of community-created tokens. Each token has detailed information, price charts, and AMM pool data."}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"glass rounded-lg p-3",children:[o.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"View Token Details"}),o.jsx("p",{className:"text-purple-200 text-sm",children:"Click any token to see full analytics"})]}),o.jsxs("div",{className:"glass rounded-lg p-3",children:[o.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"Check Liquidity"}),o.jsx("p",{className:"text-purple-200 text-sm",children:"See AMM pool depth and volume"})]})]})]})]}),o.jsxs("div",{className:"flex gap-6 items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-16 h-16 rounded-full bg-gradient-to-br from-green-600 to-green-800 flex items-center justify-center text-white text-2xl font-bold",children:"3"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"text-2xl font-bold text-green-200 mb-2",children:"Buy Tokens from Our Selection"}),o.jsx("p",{className:"text-green-300 mb-3",children:"Use the Trade page to buy tokens with XRP. Set your slippage tolerance, review the trade estimate, and execute instantly through the AMM."}),o.jsx("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4",children:o.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-green-200 font-bold",children:"Setup Trustline"}),o.jsx("p",{className:"text-green-400 text-xs mt-1",children:"One-time per token"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-green-200 font-bold",children:"Enter Amount"}),o.jsx("p",{className:"text-green-400 text-xs mt-1",children:"XRP or tokens"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-green-200 font-bold",children:"Execute Trade"}),o.jsx("p",{className:"text-green-400 text-xs mt-1",children:"Instant settlement"})]})]})})]})]}),o.jsxs("div",{className:"flex gap-6 items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-16 h-16 rounded-full bg-gradient-to-br from-red-600 to-red-800 flex items-center justify-center text-white text-2xl font-bold",children:"4"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"text-2xl font-bold text-red-200 mb-2",children:"Sell When Ready"}),o.jsx("p",{className:"text-red-300 mb-3",children:"Exit positions anytime through the Trade page. The AMM ensures instant liquidity - no waiting for buyers or sellers."}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"glass rounded-lg p-3 bg-red-500/10",children:[o.jsx("div",{className:"text-red-400 text-xs mb-1",children:"Market Orders"}),o.jsx("p",{className:"text-red-200 text-sm",children:"Instant execution at current price"})]}),o.jsxs("div",{className:"glass rounded-lg p-3 bg-red-500/10",children:[o.jsx("div",{className:"text-red-400 text-xs mb-1",children:"0.01 XRP Fee"}),o.jsx("p",{className:"text-red-200 text-sm",children:"Flat rate per transaction"})]})]})]})]})]})]}),o.jsxs("div",{className:"glass rounded-lg p-8 border border-yellow-500/30 bg-yellow-500/5",children:[o.jsx("h3",{className:"text-3xl font-bold text-yellow-200 mb-4",children:" Community-Based Economics"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-yellow-300 leading-relaxed",children:"MemeKings operates on pure free-market principles. All token values are determined entirely by community demand, trading volume, AMM liquidity depth, and supply circulation."}),o.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-6 mt-4",children:[o.jsx("h4",{className:"text-xl font-bold text-yellow-200 mb-3",children:" No Crying in the Casino"}),o.jsx("p",{className:"text-yellow-300 text-sm mb-3",children:"This is a decentralized trading platform with real financial risk. Token prices can be highly volatile."}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsxs("div",{className:"bg-red-500/20 border border-red-500/30 rounded p-3 text-center",children:[o.jsx("div",{className:"text-red-200 font-bold mb-1",children:"NO Guarantees"}),o.jsx("p",{className:"text-red-300 text-xs",children:"No promises of returns"})]}),o.jsxs("div",{className:"bg-red-500/20 border border-red-500/30 rounded p-3 text-center",children:[o.jsx("div",{className:"text-red-200 font-bold mb-1",children:"NO Refunds"}),o.jsx("p",{className:"text-red-300 text-xs",children:"All trades are final"})]}),o.jsxs("div",{className:"bg-red-500/20 border border-red-500/30 rounded p-3 text-center",children:[o.jsx("div",{className:"text-red-200 font-bold mb-1",children:"NO Bailouts"}),o.jsx("p",{className:"text-red-300 text-xs",children:"You own your risk"})]})]}),o.jsx("p",{className:"text-yellow-200 font-bold text-center mt-4",children:" Only trade what you can afford to lose "})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-purple-600/20 to-blue-600/20 border-2 border-purple-500/50 rounded-lg p-8 text-center",children:[o.jsx("h3",{className:"text-3xl font-bold text-purple-200 mb-3",children:"Ready to Start Trading?"}),o.jsx("p",{className:"text-purple-300 mb-6",children:"Join the MemeKings community and start capitalizing on meme token opportunities"}),o.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("navigate",{detail:"setup"})),className:"btn-primary text-white px-12 py-4 rounded-lg font-bold text-lg hover:scale-105 transition-transform",children:"Create Wallet & Get Started "})]})]})}function _9(){const[t,e]=M.useState([]),[n,r]=M.useState(null),[s,i]=M.useState("list"),[a,l]=M.useState(""),[c,u]=M.useState(!1),[d,h]=M.useState(null),[f,p]=M.useState(!1),[y,b]=M.useState(!1),[_,m]=M.useState(!1),[x,w]=M.useState(null),[v,T]=M.useState(!1),[E,D]=M.useState(null),[te,re]=M.useState("testnet"),[z,J]=M.useState(!1),[ce,pe]=M.useState(null),[Q,ue]=M.useState(""),[V,H]=M.useState({name:"",address:"",seed:"",purpose:"trading",notes:""});M.useEffect(()=>{q(),L()},[c]);const R=O=>{try{const P=localStorage.getItem("wallets"),Y=(P?JSON.parse(P):[]).map(W=>W.id===O.id?{...W,is_favorite:!W.is_favorite}:W);localStorage.setItem("wallets",JSON.stringify(Y)),ge.success(O.is_favorite?"Removed from favorites":"Added to favorites"),q()}catch(P){console.error("Error updating favorite:",P),ge.error("Failed to update favorite")}},C=(O,P)=>{navigator.clipboard.writeText(O),ge.success(`${P} copied to clipboard!`)},A=t.filter(O=>O.name.toLowerCase().includes(a.toLowerCase())||O.address.toLowerCase().includes(a.toLowerCase())),L=()=>{const O=localStorage.getItem("connectedWallet");O&&r(JSON.parse(O))},$=O=>{const P={...O,seed:O.encrypted_seed||O.seed};r(P),localStorage.setItem("connectedWallet",JSON.stringify(P)),ge.success(`Connected to ${O.name}`),window.dispatchEvent(new Event("walletConnected"))},ie=()=>{r(null),localStorage.removeItem("connectedWallet"),ge.success("Wallet disconnected"),window.dispatchEvent(new Event("walletDisconnected"))},q=async()=>{try{const O=localStorage.getItem("wallets");let P=O?JSON.parse(O):[];c&&(P=P.filter(F=>F.is_favorite)),P.sort((F,Y)=>F.is_favorite!==Y.is_favorite?Y.is_favorite?1:-1:new Date(Y.created_at)-new Date(F.created_at)),e(P),G(P)}catch(O){console.error("Error loading wallets:",O),ge.error("Failed to load wallets")}},G=async O=>{var P;try{const F=new Be.Client("wss://xrplcluster.com");await F.connect();const Y=localStorage.getItem("wallets"),W=Y?JSON.parse(Y):[];for(const Z of O)try{const ae=await F.request({command:"account_info",account:Z.address,ledger_index:"validated"}),oe=parseFloat(ae.result.account_data.Balance)/1e6;if(oe!==Z.balance_xrp){Z.balance_xrp=oe;const fe=W.findIndex(_e=>_e.id===Z.id);fe!==-1&&(W[fe].balance_xrp=oe)}}catch(ae){if(((P=ae.data)==null?void 0:P.error)==="actNotFound"&&Z.balance_xrp!==0){Z.balance_xrp=0;const oe=W.findIndex(fe=>fe.id===Z.id);oe!==-1&&(W[oe].balance_xrp=0)}}localStorage.setItem("wallets",JSON.stringify(W)),await F.disconnect(),e([...O])}catch(F){console.error("Error updating wallet balances:",F)}},ne=async()=>{if(!V.name||!V.address){ge.error("Name and address are required");return}try{const O=localStorage.getItem("wallets"),P=O?JSON.parse(O):[];if(x){const F=P.findIndex(Y=>Y.id===x.id);F!==-1&&(P[F]={...P[F],name:V.name,encrypted_seed:V.seed||x.encrypted_seed,purpose:V.purpose,notes:V.notes,updated_at:new Date().toISOString()}),ge.success("Wallet updated successfully")}else{const F={id:Date.now().toString(),name:V.name,address:V.address,encrypted_seed:V.seed,purpose:V.purpose,notes:V.notes,network:V.address.startsWith("r")?"mainnet":"testnet",is_favorite:!1,balance_xrp:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};P.push(F),ge.success("Wallet added successfully")}localStorage.setItem("wallets",JSON.stringify(P)),p(!1),w(null),H({name:"",address:"",seed:"",purpose:"trading",notes:""}),q()}catch(O){console.error("Error saving wallet:",O),ge.error("Failed to save wallet")}},he=async O=>{if(confirm("Are you sure you want to delete this wallet?"))try{const P=localStorage.getItem("wallets"),Y=(P?JSON.parse(P):[]).filter(W=>W.id!==O);localStorage.setItem("wallets",JSON.stringify(Y)),ge.success("Wallet deleted successfully"),q()}catch(P){console.error("Error deleting wallet:",P),ge.error("Failed to delete wallet")}},se=O=>{w(O),H({name:O.name,address:O.address,seed:"",purpose:O.purpose,notes:O.notes||""}),p(!0)},ee=async()=>{T(!0),D(null);try{const O=new Be.Client(te==="mainnet"?"wss://xrplcluster.com":"wss://s.altnet.rippletest.net:51233");await O.connect(),ge.success("Connected to XRPL");const P=Be.Wallet.generate();if(te==="testnet"){ge.loading("Funding wallet with test XRP...");const F=await O.fundWallet(P);ge.dismiss(),ge.success("Wallet funded with test XRP!")}D({address:P.address,seed:P.seed,publicKey:P.publicKey,privateKey:P.privateKey,network:te}),await O.disconnect(),ge.success("Wallet generated successfully!")}catch(O){console.error("Error generating wallet:",O),ge.error("Failed to generate wallet: "+O.message)}finally{T(!1)}},N=async O=>{if(!E||!O){ge.error("Please provide a wallet name");return}try{const P=localStorage.getItem("wallets"),F=P?JSON.parse(P):[],Y={id:Date.now().toString(),name:O,address:E.address,encrypted_seed:E.seed,purpose:"trading",notes:`Generated on ${E.network}`,network:E.network,is_favorite:!1,balance_xrp:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};F.push(Y),localStorage.setItem("wallets",JSON.stringify(F)),ge.success("Wallet saved successfully!"),b(!1),D(null),q()}catch(P){console.error("Error saving wallet:",P),ge.error("Failed to save wallet")}},k=async()=>{var O;if(!Q.trim()){ge.error("Please enter a seed phrase");return}J(!0),pe(null);try{const P=Be.Wallet.fromSeed(Q.trim()),F=new Be.Client("wss://xrplcluster.com");await F.connect();let Y=0;try{const W=await F.request({command:"account_info",account:P.address,ledger_index:"validated"});Y=parseFloat(W.result.account_data.Balance)/1e6}catch(W){if(((O=W.data)==null?void 0:O.error)!=="actNotFound")throw W}await F.disconnect(),pe({address:P.address,seed:P.seed,publicKey:P.publicKey,balance:Y}),ge.success("Wallet imported successfully!")}catch(P){console.error("Error importing wallet:",P),ge.error("Failed to import wallet: Invalid seed phrase or network error")}finally{J(!1)}},B=async O=>{if(!ce||!O){ge.error("Please provide a wallet name");return}try{if(t.find(Z=>Z.address===ce.address)){ge.error("This wallet address already exists!");return}const F=localStorage.getItem("wallets"),Y=F?JSON.parse(F):[],W={id:Date.now().toString(),name:O,address:ce.address,encrypted_seed:ce.seed,purpose:"trading",notes:"Imported from seed",network:"testnet",balance_xrp:ce.balance,is_favorite:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};Y.push(W),localStorage.setItem("wallets",JSON.stringify(Y)),ge.success("Wallet saved successfully!"),m(!1),pe(null),ue(""),q()}catch(P){console.error("Error saving imported wallet:",P),ge.error("Failed to save wallet")}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-purple-200",children:"Wallet Management"}),o.jsx("p",{className:"text-purple-400 mt-1",children:"Manage your XRPL wallets"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>i("grid"),className:`px-4 py-2 rounded-lg transition-all ${s==="grid"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:" Grid"}),o.jsx("button",{onClick:()=>i("list"),className:`px-4 py-2 rounded-lg transition-all ${s==="list"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:" List"})]}),o.jsx("button",{onClick:()=>b(!0),className:"btn-primary text-white px-6 py-2 rounded-lg font-medium",children:" Generate Wallet"}),o.jsx("button",{onClick:()=>{ue(""),pe(null),m(!0)},className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium",children:" Import from Seed"}),o.jsx("button",{onClick:()=>{w(null),H({name:"",address:"",seed:"",purpose:"trading",notes:""}),p(!0)},className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium",children:"+ Add Existing"})]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("div",{className:"flex-1 relative",children:o.jsx("input",{type:"text",value:a,onChange:O=>l(O.target.value),placeholder:" Search wallets by name or address...",className:"input w-full text-purple-200 pl-4"})}),o.jsx("button",{onClick:()=>u(!c),className:`px-6 py-2 rounded-lg font-medium transition-all ${c?"bg-yellow-500 text-white":"glass text-purple-300 hover:text-yellow-400"}`,children:c?" Favorites Only":" Show All"})]}),s==="grid"?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map(O=>o.jsxs("div",{className:"glass rounded-lg p-6 space-y-4",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200",children:O.name}),o.jsx("button",{onClick:()=>R(O),className:"text-xl hover:scale-110 transition-transform",children:O.is_favorite?"":""})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-medium bg-purple-500/20 text-purple-300",children:O.purpose}),o.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${O.network==="mainnet"?"bg-green-500/20 text-green-300":"bg-blue-500/20 text-blue-300"}`,children:O.network==="mainnet"?" Mainnet":" Testnet"})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>se(O),className:"text-purple-400 hover:text-purple-300",children:""}),o.jsx("button",{onClick:()=>he(O.id),className:"text-red-400 hover:text-red-300",children:""})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"text-purple-400 text-xs mb-1 flex items-center justify-between",children:[o.jsx("span",{children:"Address"}),o.jsx("button",{onClick:()=>C(O.address,"Address"),className:"text-purple-400 hover:text-purple-300",children:""})]}),o.jsx("div",{className:"text-purple-200 text-sm font-mono bg-black/30 p-2 rounded break-all",children:O.address})]}),O.encrypted_seed&&o.jsxs("div",{children:[o.jsxs("div",{className:"text-purple-400 text-xs mb-1 flex items-center justify-between",children:[o.jsx("span",{children:"Seed"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>h(d===O.id?null:O.id),className:"text-purple-400 hover:text-purple-300",children:d===O.id?"":""}),d===O.id&&o.jsx("button",{onClick:()=>C(O.encrypted_seed,"Seed"),className:"text-purple-400 hover:text-purple-300",children:""})]})]}),o.jsx("div",{className:"text-purple-200 text-sm font-mono bg-black/30 p-2 rounded break-all",children:d===O.id?O.encrypted_seed:""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"Balance"}),o.jsxs("div",{className:"text-purple-200 text-lg font-bold",children:[O.balance_xrp||0," XRP"]})]}),O.notes&&o.jsxs("div",{children:[o.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"Notes"}),o.jsx("div",{className:"text-purple-300 text-sm",children:O.notes})]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-purple-500/20",children:[o.jsxs("div",{className:"text-purple-500 text-xs",children:["Added: ",new Date(O.created_at).toLocaleDateString()]}),(n==null?void 0:n.id)===O.id?o.jsx("button",{onClick:ie,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium text-sm",children:"Disconnect"}):o.jsx("button",{onClick:()=>$(O),className:"btn-primary text-white px-4 py-2 rounded-lg font-medium text-sm",children:"Connect"})]})]},O.id))}):o.jsx("div",{className:"glass rounded-lg overflow-hidden",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-purple-900/50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left px-6 py-4 text-purple-300 font-medium",children:"Fav"}),o.jsx("th",{className:"text-left px-6 py-4 text-purple-300 font-medium",children:"Name"}),o.jsx("th",{className:"text-left px-6 py-4 text-purple-300 font-medium",children:"Network"}),o.jsx("th",{className:"text-left px-6 py-4 text-purple-300 font-medium",children:"Address"}),o.jsx("th",{className:"text-left px-6 py-4 text-purple-300 font-medium",children:"Seed"}),o.jsx("th",{className:"text-left px-6 py-4 text-purple-300 font-medium",children:"Purpose"}),o.jsx("th",{className:"text-left px-6 py-4 text-purple-300 font-medium",children:"Balance"}),o.jsx("th",{className:"text-left px-6 py-4 text-purple-300 font-medium",children:"Connection"}),o.jsx("th",{className:"text-left px-6 py-4 text-purple-300 font-medium",children:"Actions"})]})}),o.jsx("tbody",{children:A.map(O=>o.jsxs("tr",{className:"border-t border-purple-500/20 hover:bg-purple-900/20",children:[o.jsx("td",{className:"px-6 py-4",children:o.jsx("button",{onClick:()=>R(O),className:"text-xl hover:scale-110 transition-transform",children:O.is_favorite?"":""})}),o.jsx("td",{className:"px-6 py-4 text-purple-200 font-medium",children:O.name}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${O.network==="mainnet"?"bg-green-500/20 text-green-300":"bg-blue-500/20 text-blue-300"}`,children:O.network==="mainnet"?"":""})}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-purple-300 font-mono text-sm",children:[O.address.slice(0,15),"..."]}),o.jsx("button",{onClick:()=>C(O.address,"Address"),className:"text-purple-400 hover:text-purple-300",children:""})]})}),o.jsx("td",{className:"px-6 py-4",children:O.encrypted_seed&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-purple-300 font-mono text-sm",children:d===O.id?O.encrypted_seed.slice(0,15)+"...":""}),o.jsx("button",{onClick:()=>h(d===O.id?null:O.id),className:"text-purple-400 hover:text-purple-300",children:d===O.id?"":""}),d===O.id&&o.jsx("button",{onClick:()=>C(O.encrypted_seed,"Seed"),className:"text-purple-400 hover:text-purple-300",children:""})]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-purple-500/20 text-purple-300",children:O.purpose})}),o.jsxs("td",{className:"px-6 py-4 text-purple-200 font-bold",children:[O.balance_xrp||0," XRP"]}),o.jsx("td",{className:"px-6 py-4",children:(n==null?void 0:n.id)===O.id?o.jsx("button",{onClick:ie,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm",children:"Disconnect"}):o.jsx("button",{onClick:()=>$(O),className:"btn-primary text-white px-3 py-1 rounded text-sm",children:"Connect"})}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>se(O),className:"text-purple-400 hover:text-purple-300",children:""}),o.jsx("button",{onClick:()=>he(O.id),className:"text-red-400 hover:text-red-300",children:""})]})})]},O.id))})]})}),f&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:x?"Edit Wallet":"Add New Wallet"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Wallet Name *"}),o.jsx("input",{type:"text",value:V.name,onChange:O=>H({...V,name:O.target.value}),className:"input w-full text-purple-200",placeholder:"My Trading Wallet"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Wallet Address *"}),o.jsx("input",{type:"text",value:V.address,onChange:O=>H({...V,address:O.target.value}),className:"input w-full text-purple-200 font-mono",placeholder:"rXXXXXXXXXXXXXXXXXXXXXXXXXXXX",disabled:x})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-purple-300 mb-2",children:["Seed ",x?"(leave empty to keep current)":"(optional)"]}),o.jsx("input",{type:"password",value:V.seed,onChange:O=>H({...V,seed:O.target.value}),className:"input w-full text-purple-200 font-mono",placeholder:"sXXXXXXXXXXXXXXXXXXXXXXXXXXXX"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Purpose"}),o.jsxs("select",{value:V.purpose,onChange:O=>H({...V,purpose:O.target.value}),className:"input w-full text-purple-200",children:[o.jsx("option",{value:"trading",children:"Trading"}),o.jsx("option",{value:"issuer",children:"Token Issuer"}),o.jsx("option",{value:"receiver",children:"Token Receiver"}),o.jsx("option",{value:"hodl",children:"HODL"}),o.jsx("option",{value:"other",children:"Other"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Notes"}),o.jsx("textarea",{value:V.notes,onChange:O=>H({...V,notes:O.target.value}),className:"input w-full text-purple-200 h-24",placeholder:"Additional notes about this wallet..."})]})]}),o.jsxs("div",{className:"flex gap-3 mt-6",children:[o.jsxs("button",{onClick:ne,className:"btn-primary text-white px-6 py-2 rounded-lg font-medium flex-1",children:[x?"Update":"Add"," Wallet"]}),o.jsx("button",{onClick:()=>{p(!1),w(null),H({name:"",address:"",seed:"",purpose:"trading",notes:""})},className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium",children:"Cancel"})]})]})}),t.length===0&&o.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[o.jsx("div",{className:"text-6xl mb-4",children:""}),o.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-2",children:"No Wallets Yet"}),o.jsx("p",{className:"text-purple-400",children:"Generate or add your first wallet to get started"})]}),y&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-8 max-w-2xl w-full",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:"Generate New XRPL Wallet"}),E?o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsx("div",{className:"text-green-400 text-xl",children:""}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium text-green-300 mb-1",children:"Wallet Generated Successfully!"}),o.jsxs("div",{className:"text-green-200/80 text-sm",children:["Your new ",E.network," wallet has been created. Save your seed phrase securely!"]})]})]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-400 text-sm mb-2",children:"Wallet Address"}),o.jsx("div",{className:"input text-purple-200 font-mono text-sm break-all",children:E.address})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-400 text-sm mb-2",children:"Seed Phrase (Secret Key)"}),o.jsx("div",{className:"input text-red-400 font-mono text-sm break-all bg-red-500/10 border-red-500/30",children:E.seed}),o.jsx("div",{className:"text-red-400 text-xs mt-2",children:" Keep this secret! Anyone with this can access your wallet."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-400 text-sm mb-2",children:"Public Key"}),o.jsx("div",{className:"input text-purple-300 font-mono text-xs break-all",children:E.publicKey})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-400 text-sm mb-2",children:"Network"}),o.jsx("div",{className:"input text-purple-200 uppercase",children:E.network})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Wallet Name *"}),o.jsx("input",{type:"text",id:"walletName",className:"input w-full text-purple-200",placeholder:"My Trading Wallet"})]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>{const O=document.getElementById("walletName").value;N(O)},className:"btn-primary text-white px-6 py-3 rounded-lg font-medium flex-1",children:" Save Wallet"}),o.jsx("button",{onClick:()=>{confirm("Are you sure? Make sure you've saved your seed phrase!")&&(b(!1),D(null))},className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium",children:"Close"})]}),o.jsx("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-lg p-4",children:o.jsxs("div",{className:"text-purple-300 text-sm",children:[o.jsx("div",{className:"font-medium mb-2",children:" Next Steps:"}),o.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[o.jsx("li",{children:"Copy and securely store your seed phrase"}),o.jsx("li",{children:"Save this wallet to your list"}),E.network==="mainnet"&&o.jsx("li",{children:"Send at least 10 XRP to activate the wallet"}),o.jsx("li",{children:"Start using your new wallet!"})]})]})})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-3 font-medium",children:"Select Network"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("button",{onClick:()=>re("testnet"),className:`p-4 rounded-lg border-2 transition-all ${te==="testnet"?"border-purple-500 bg-purple-500/20":"border-purple-500/30 bg-purple-900/20 hover:border-purple-500/50"}`,children:[o.jsx("div",{className:"text-xl mb-2",children:""}),o.jsx("div",{className:"font-bold text-purple-200",children:"Testnet"}),o.jsx("div",{className:"text-sm text-purple-400 mt-1",children:"Free test XRP included"})]}),o.jsxs("button",{onClick:()=>re("mainnet"),className:`p-4 rounded-lg border-2 transition-all ${te==="mainnet"?"border-purple-500 bg-purple-500/20":"border-purple-500/30 bg-purple-900/20 hover:border-purple-500/50"}`,children:[o.jsx("div",{className:"text-xl mb-2",children:""}),o.jsx("div",{className:"font-bold text-purple-200",children:"Mainnet"}),o.jsx("div",{className:"text-sm text-purple-400 mt-1",children:"Production network"})]})]})]}),o.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsx("div",{className:"text-yellow-400 text-xl",children:""}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium text-yellow-300 mb-1",children:"Important"}),o.jsx("div",{className:"text-yellow-200/80 text-sm",children:te==="testnet"?"Testnet wallets receive free test XRP automatically. This is for testing only.":"Mainnet wallets require real XRP to activate. Make sure to securely save your seed phrase."})]})]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:ee,disabled:v,className:"btn-primary text-white px-6 py-3 rounded-lg font-medium flex-1 disabled:opacity-50",children:v?" Generating...":" Generate Wallet"}),o.jsx("button",{onClick:()=>{b(!1),D(null)},className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium",disabled:v,children:"Cancel"})]})]})]})}),_&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:()=>m(!1),children:o.jsxs("div",{className:"glass rounded-lg max-w-2xl w-full p-8",onClick:O=>O.stopPropagation(),children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:"Import Wallet from Seed"}),ce?o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsx("div",{className:"text-green-400 text-2xl",children:""}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-green-400 font-medium mb-1",children:"Wallet Imported Successfully!"}),o.jsx("div",{className:"text-green-300 text-sm",children:"Please review the details and save this wallet."})]})]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-400 text-sm mb-2",children:"Wallet Address"}),o.jsxs("div",{className:"input text-purple-200 font-mono break-all flex items-center justify-between gap-2",children:[o.jsx("span",{children:ce.address}),o.jsx("button",{onClick:()=>C(ce.address,"Address"),className:"btn text-purple-300 px-2 py-1 text-xs rounded",children:""})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-400 text-sm mb-2",children:"Public Key"}),o.jsx("div",{className:"input text-purple-300 font-mono text-xs break-all",children:ce.publicKey})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-400 text-sm mb-2",children:"Current Balance"}),o.jsxs("div",{className:"input text-purple-200",children:[ce.balance," XRP"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Wallet Name *"}),o.jsx("input",{type:"text",id:"importWalletName",className:"input w-full text-purple-200",placeholder:"My Imported Wallet"})]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>{const O=document.getElementById("importWalletName").value;B(O)},className:"btn-primary text-white px-6 py-3 rounded-lg font-medium flex-1",children:" Save Wallet"}),o.jsx("button",{onClick:()=>{m(!1),pe(null),ue("")},className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium",children:"Cancel"})]}),o.jsx("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-lg p-4",children:o.jsxs("div",{className:"text-purple-300 text-sm",children:[o.jsx("div",{className:"font-medium mb-2",children:" Next Steps:"}),o.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[o.jsx("li",{children:"Verify the wallet address and balance"}),o.jsx("li",{children:"Give your wallet a memorable name"}),o.jsx("li",{children:"Save the wallet to your list"}),o.jsx("li",{children:"Start managing your tokens!"})]})]})})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsx("div",{className:"text-yellow-400 text-xl",children:""}),o.jsxs("div",{className:"flex-1 text-yellow-200 text-sm",children:[o.jsx("div",{className:"font-medium mb-1",children:"Security Warning"}),o.jsx("div",{children:"Never share your seed phrase with anyone. Make sure you're in a secure environment."})]})]})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Seed Phrase *"}),o.jsx("textarea",{value:Q,onChange:O=>ue(O.target.value),className:"input w-full text-purple-200 font-mono h-24",placeholder:"sXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",autoFocus:!0}),o.jsx("p",{className:"text-purple-400 text-xs mt-1",children:"Enter your XRPL seed phrase (starts with 's')"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:k,disabled:z||!Q.trim(),className:"btn-primary text-white px-6 py-3 rounded-lg font-medium flex-1 disabled:opacity-50",children:z?" Importing...":" Import Wallet"}),o.jsx("button",{onClick:()=>{m(!1),ue("")},disabled:z,className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium disabled:opacity-50",children:"Cancel"})]}),o.jsx("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-lg p-4",children:o.jsxs("div",{className:"text-purple-300 text-sm",children:[o.jsx("div",{className:"font-medium mb-2",children:" About Importing"}),o.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[o.jsx("li",{children:"This will import an existing XRPL wallet using its seed phrase"}),o.jsx("li",{children:"The wallet will be checked on the testnet network"}),o.jsx("li",{children:"Your seed phrase is securely stored in the database"}),o.jsx("li",{children:"You'll get full control over the imported wallet"})]})]})})]})]})})]})}function E9(){const[t,e]=M.useState([]),[n,r]=M.useState([]),[s,i]=M.useState([]),[a,l]=M.useState(""),[c,u]=M.useState("");M.useState(null),M.useEffect(()=>{d()},[]);const d=async()=>{var m,x;try{const[w,v,T]=await Promise.all([Ae.from("meme_tokens").select("*").order("created_at",{ascending:!1}),Ae.from("wallets").select("*").order("created_at",{ascending:!1}),Ae.from("activity_logs").select("*").order("created_at",{ascending:!1})]);if(w.error)throw w.error;if(v.error)throw v.error;if(T.error)throw T.error;e(w.data||[]),r(v.data||[]),i(T.data||[]),v.data&&v.data.length>=2&&(l(((m=v.data[0])==null?void 0:m.id)||""),u(((x=v.data[1])==null?void 0:x.id)||""))}catch(w){console.error("Error loading data:",w),ge.error("Failed to load data")}},h=async()=>{try{const m={tokens:t,wallets:n.map(T=>({...T,encrypted_seed:T.encrypted_seed?"***ENCRYPTED***":null})),activityLogs:s,settings:{issuer:a,receiver:c},stats:{totalTokens:t.length,totalWallets:n.length,totalActivities:s.length,activePools:t.filter(T=>T.amm_pool_created).length,totalXRPLocked:t.reduce((T,E)=>T+(E.amm_xrp_amount||0),0)},exportDate:new Date().toISOString(),version:"2.0"},x=new Blob([JSON.stringify(m,null,2)],{type:"application/json"}),w=URL.createObjectURL(x),v=document.createElement("a");v.href=w,v.download=`memekings-export-${Date.now()}.json`,document.body.appendChild(v),v.click(),document.body.removeChild(v),URL.revokeObjectURL(w),ge.success("Data exported successfully!")}catch(m){console.error("Error exporting data:",m),ge.error("Failed to export data")}},f=()=>{try{const m=["Token Name","Issuer Address","Supply","Market Cap (XRP)","XRP Locked","Status","Created"],x=t.map(D=>{const te=D.amm_pool_created&&D.amm_xrp_amount&&D.amm_asset_amount?(D.supply*(D.amm_xrp_amount/D.amm_asset_amount)).toFixed(4):"0";return[D.token_name,D.issuer_address,D.supply,te,D.amm_xrp_amount||0,D.amm_pool_created?"Active":"Pending",new Date(D.created_at).toLocaleString()]}),w=[m,...x].map(D=>D.join(",")).join(`
`),v=new Blob([w],{type:"text/csv"}),T=URL.createObjectURL(v),E=document.createElement("a");E.href=T,E.download=`memekings-tokens-${Date.now()}.csv`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(T),ge.success("Tokens exported to CSV!")}catch(m){console.error("Error exporting CSV:",m),ge.error("Failed to export CSV")}},p=async m=>{var w,v;const x=m.target.files[0];if(x)try{const T=await x.text(),E=JSON.parse(T);if(!E.tokens)throw new Error("Invalid data format - missing tokens");const D=((w=E.activityLogs)==null?void 0:w.length)||0,te=((v=E.wallets)==null?void 0:v.length)||0;if(!confirm(`Import Data Summary:
 ${E.tokens.length} tokens
 ${te} wallets
 ${D} activity logs

This will add to your existing data. Continue?`))return;const z=[];E.tokens&&E.tokens.length>0&&z.push(Ae.from("meme_tokens").upsert(E.tokens,{onConflict:"id"})),E.wallets&&E.wallets.length>0&&z.push(Ae.from("wallets").upsert(E.wallets,{onConflict:"id"})),E.activityLogs&&E.activityLogs.length>0&&z.push(Ae.from("activity_logs").upsert(E.activityLogs,{onConflict:"id"}));const ce=(await Promise.all(z)).filter(pe=>pe.error);if(ce.length>0)throw new Error("Some imports failed: "+ce.map(pe=>pe.error.message).join(", "));ge.success(`Imported successfully!
${E.tokens.length} tokens, ${te} wallets, ${D} activities`),d()}catch(T){console.error("Error importing data:",T),ge.error("Failed to import data: "+T.message)}},y=async()=>{if(!(!confirm(`WARNING: This will delete ALL tokens, wallets, and activity logs!

This action cannot be undone. Are you sure?`)||!confirm("Are you ABSOLUTELY sure? This will delete everything!")))try{await Promise.all([Ae.from("meme_tokens").delete().neq("id","00000000-0000-0000-0000-000000000000"),Ae.from("wallets").delete().neq("id","00000000-0000-0000-0000-000000000000"),Ae.from("activity_logs").delete().neq("id","00000000-0000-0000-0000-000000000000")]),localStorage.clear(),ge.success("All data cleared!"),d()}catch(w){console.error("Error clearing data:",w),ge.error("Failed to clear data")}},b=n.find(m=>m.id===a),_=n.find(m=>m.id===c);return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-purple-200",children:"Setup & Configuration"}),o.jsx("p",{className:"text-purple-400 mt-1",children:"Manage your MEMEKINGS settings and data"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Token Creation Wallets"}),o.jsx("p",{className:"text-purple-400 text-sm mb-4",children:"Default wallets used for automatic token creation"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Issuer Wallet (Creates Tokens)"}),o.jsx("div",{className:"input w-full text-purple-400 bg-purple-900/20 cursor-not-allowed",children:b?`${b.address}`:"No issuer wallet set"}),b&&o.jsxs("div",{className:"mt-2 text-xs text-purple-400",children:["Balance: ",b.balance_xrp||0," XRP"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Receiver Wallet (Receives Tokens)"}),o.jsx("div",{className:"input w-full text-purple-400 bg-purple-900/20 cursor-not-allowed",children:_?`${_.address}`:"No receiver wallet set"}),_&&o.jsxs("div",{className:"mt-2 text-xs text-purple-400",children:["Balance: ",_.balance_xrp||0," XRP"]})]}),n.length<2&&o.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsx("div",{className:"text-yellow-400 text-xl",children:""}),o.jsx("div",{className:"flex-1 text-yellow-200 text-sm",children:"You need at least 2 wallets to create tokens. Go to Wallet Management to add or generate wallets."})]})})]})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Data Statistics"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-300",children:"Total Tokens"}),o.jsx("span",{className:"text-2xl font-bold text-purple-200",children:t.length})]})}),o.jsx("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-300",children:"Total Wallets"}),o.jsx("span",{className:"text-2xl font-bold text-purple-200",children:n.length})]})}),o.jsx("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-300",children:"Active Pools"}),o.jsx("span",{className:"text-2xl font-bold text-purple-200",children:t.filter(m=>m.amm_pool_created).length})]})}),o.jsx("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-300",children:"Total XRP Locked"}),o.jsx("span",{className:"text-2xl font-bold text-purple-200",children:t.reduce((m,x)=>m+(x.amm_xrp_amount||0),0).toFixed(2)})]})}),o.jsx("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-300",children:"Activity Logs"}),o.jsx("span",{className:"text-2xl font-bold text-purple-200",children:s.length})]})})]})]})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Export Data"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx("button",{onClick:h,className:"btn-primary text-white px-6 py-3 rounded-lg font-medium",children:" Export All Data (JSON)"}),o.jsx("button",{onClick:f,className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium",children:" Export Tokens (CSV)"}),o.jsx("button",{onClick:()=>{const m=JSON.stringify(n,null,2),x=new Blob([m],{type:"application/json"}),w=URL.createObjectURL(x),v=document.createElement("a");v.href=w,v.download=`wallets-${Date.now()}.json`,v.click(),URL.revokeObjectURL(w),ge.success("Wallets exported!")},className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium",children:" Export Wallets (JSON)"}),o.jsx("button",{onClick:()=>{const m=JSON.stringify(s,null,2),x=new Blob([m],{type:"application/json"}),w=URL.createObjectURL(x),v=document.createElement("a");v.href=w,v.download=`activity-logs-${Date.now()}.json`,v.click(),URL.revokeObjectURL(w),ge.success("Activity logs exported!")},className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium",children:" Export Activity Logs (JSON)"})]}),o.jsx("p",{className:"text-purple-400 text-sm mt-3",children:'Export your data for backup or migration purposes. "Export All Data" includes everything.'})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Import Data"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{children:o.jsxs("label",{className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium cursor-pointer inline-block",children:[" Import JSON File",o.jsx("input",{type:"file",accept:".json",onChange:p,className:"hidden"})]})}),o.jsx("p",{className:"text-purple-400 text-sm",children:"Import previously exported data. This will add to your existing data without deleting anything."})]})]}),o.jsxs("div",{className:"glass rounded-lg p-6 border-2 border-red-500/30",children:[o.jsx("h3",{className:"text-xl font-bold text-red-400 mb-4",children:"Danger Zone"}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"bg-red-500/10 rounded-lg p-4",children:[o.jsx("h4",{className:"text-red-300 font-bold mb-2",children:"Clear All Data"}),o.jsx("p",{className:"text-red-200/80 text-sm mb-3",children:"This will permanently delete all tokens, wallets, and settings. This action cannot be undone!"}),o.jsx("button",{onClick:y,className:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg font-medium",children:" Clear All Data"})]})})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Local Storage Info"}),o.jsxs("div",{className:"space-y-2 text-sm text-purple-300",children:[o.jsx("p",{children:" Wallet settings are saved locally in your browser"}),o.jsx("p",{children:" Token and wallet data is stored in Supabase database"}),o.jsx("p",{children:" Export your data regularly for backup"}),o.jsx("p",{children:" Clearing browser data will remove local settings only"})]})]})]})}function S9({isOpen:t,onClose:e,onSelectAddress:n,walletAddress:r}){const[s,i]=M.useState([]),[a,l]=M.useState(!0),[c,u]=M.useState(null),[d,h]=M.useState(!1),[f,p]=M.useState(""),[y,b]=M.useState({name:"",address:"",notes:"",is_favorite:!1});M.useEffect(()=>{t&&r&&_()},[t,r]);const _=async()=>{try{l(!0);const{data:E,error:D}=await Ae.from("address_book").select("*").eq("wallet_address",r).order("is_favorite",{ascending:!1}).order("name",{ascending:!0});if(D)throw D;i(E||[])}catch(E){console.error("Error loading contacts:",E),ge.error("Failed to load address book")}finally{l(!1)}},m=async()=>{try{if(!y.name||!y.address){ge.error("Name and address are required");return}if(c){const{error:E}=await Ae.from("address_book").update({name:y.name,address:y.address,notes:y.notes,is_favorite:y.is_favorite}).eq("id",c.id);if(E)throw E;ge.success("Contact updated successfully")}else{const{error:E}=await Ae.from("address_book").insert({wallet_address:r,name:y.name,address:y.address,notes:y.notes,is_favorite:y.is_favorite});if(E)throw E;ge.success("Contact added successfully")}h(!1),u(null),b({name:"",address:"",notes:"",is_favorite:!1}),_()}catch(E){console.error("Error saving contact:",E),ge.error("Failed to save contact")}},x=async E=>{if(confirm("Are you sure you want to delete this contact?"))try{const{error:D}=await Ae.from("address_book").delete().eq("id",E);if(D)throw D;ge.success("Contact deleted"),_()}catch(D){console.error("Error deleting contact:",D),ge.error("Failed to delete contact")}},w=E=>{u(E),b({name:E.name,address:E.address,notes:E.notes||"",is_favorite:E.is_favorite}),h(!0)},v=async E=>{try{const{error:D}=await Ae.from("address_book").update({is_favorite:!E.is_favorite}).eq("id",E.id);if(D)throw D;_()}catch(D){console.error("Error toggling favorite:",D),ge.error("Failed to update favorite")}},T=s.filter(E=>E.name.toLowerCase().includes(f.toLowerCase())||E.address.toLowerCase().includes(f.toLowerCase()));return t?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",children:o.jsxs("div",{className:"w-full max-w-2xl max-h-[90vh] rounded-xl overflow-hidden border border-purple-500/40",style:{background:"linear-gradient(135deg, rgba(88, 28, 135, 0.98), rgba(59, 7, 100, 0.98))",backdropFilter:"blur(20px)"},children:[o.jsxs("div",{className:"p-6 border-b border-purple-500/30 bg-purple-900/40",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-2xl font-bold text-white",children:" Address Book"}),o.jsx("button",{onClick:e,className:"text-purple-300 hover:text-white transition-colors",children:""})]}),o.jsx("input",{type:"text",value:f,onChange:E=>p(E.target.value),placeholder:"Search contacts...",className:"w-full bg-purple-950/60 border border-purple-500/40 rounded-lg px-4 py-2 text-white placeholder-purple-400/60 focus:outline-none focus:border-purple-400/60 focus:ring-2 focus:ring-purple-500/30"})]}),o.jsxs("div",{className:"p-6 overflow-y-auto",style:{maxHeight:"calc(90vh - 200px)"},children:[d?o.jsxs("div",{className:"space-y-4 mb-6 p-4 bg-purple-900/30 rounded-lg border border-purple-500/30",children:[o.jsx("h3",{className:"text-lg font-bold text-white",children:c?"Edit Contact":"Add New Contact"}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-purple-200 mb-1",children:["Name ",o.jsx("span",{className:"text-red-400",children:"*"})]}),o.jsx("input",{type:"text",value:y.name,onChange:E=>b({...y,name:E.target.value}),placeholder:"John Doe",className:"w-full bg-purple-950/60 border border-purple-500/40 rounded-lg px-3 py-2 text-white placeholder-purple-400/50 focus:outline-none focus:border-purple-400/60 focus:ring-2 focus:ring-purple-500/30"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-purple-200 mb-1",children:["XRPL Address ",o.jsx("span",{className:"text-red-400",children:"*"})]}),o.jsx("input",{type:"text",value:y.address,onChange:E=>b({...y,address:E.target.value}),placeholder:"rXXXXXXXXXXXXXXXXXXXXXXXXXXXX",className:"w-full bg-purple-950/60 border border-purple-500/40 rounded-lg px-3 py-2 text-white placeholder-purple-400/50 focus:outline-none focus:border-purple-400/60 focus:ring-2 focus:ring-purple-500/30"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-purple-200 mb-1",children:"Notes"}),o.jsx("textarea",{value:y.notes,onChange:E=>b({...y,notes:E.target.value}),placeholder:"Optional notes about this contact",className:"w-full bg-purple-950/60 border border-purple-500/40 rounded-lg px-3 py-2 text-white placeholder-purple-400/50 focus:outline-none focus:border-purple-400/60 focus:ring-2 focus:ring-purple-500/30 resize-none",rows:"2"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"is_favorite",checked:y.is_favorite,onChange:E=>b({...y,is_favorite:E.target.checked}),className:"w-4 h-4 text-purple-600 bg-purple-950/60 border-purple-500/40 rounded focus:ring-purple-500/30"}),o.jsx("label",{htmlFor:"is_favorite",className:"text-sm text-purple-200",children:"Mark as favorite"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:m,className:"flex-1 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:shadow-lg hover:shadow-purple-500/50 text-white rounded-lg font-medium transition-all duration-200",children:c?"Update Contact":"Add Contact"}),o.jsx("button",{onClick:()=>{h(!1),u(null),b({name:"",address:"",notes:"",is_favorite:!1})},className:"px-4 py-2 bg-purple-800/40 hover:bg-purple-800/60 text-purple-200 rounded-lg font-medium transition-all duration-200 border border-purple-500/30",children:"Cancel"})]})]}):o.jsxs("button",{onClick:()=>h(!0),className:"w-full mb-4 px-4 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:shadow-lg hover:shadow-purple-500/50 text-white rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2",children:[o.jsx("span",{children:""}),"Add New Contact"]}),a?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"w-8 h-8 border-2 border-purple-400 border-t-transparent rounded-full animate-spin"})}):T.length===0?o.jsx("div",{className:"text-center py-12 text-purple-300/60",children:f?"No contacts found":"No contacts yet. Add your first contact!"}):o.jsx("div",{className:"space-y-2",children:T.map(E=>o.jsx("div",{className:"p-4 bg-purple-900/30 rounded-lg border border-purple-500/20 hover:border-purple-500/40 transition-all duration-200",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>v(E),className:"text-xl hover:scale-110 transition-transform",children:E.is_favorite?"":""}),o.jsx("h3",{className:"text-lg font-bold text-white",children:E.name})]}),o.jsx("p",{className:"text-sm text-purple-300/80 mt-1 font-mono break-all",children:E.address}),E.notes&&o.jsx("p",{className:"text-sm text-purple-400/60 mt-2",children:E.notes})]}),o.jsxs("div",{className:"flex gap-2 ml-4",children:[n&&o.jsx("button",{onClick:()=>n(E),className:"px-3 py-1.5 bg-green-600/30 hover:bg-green-600/50 text-green-200 rounded-lg text-sm font-medium transition-all duration-200 border border-green-500/30",children:"Select"}),o.jsx("button",{onClick:()=>w(E),className:"px-3 py-1.5 bg-blue-600/30 hover:bg-blue-600/50 text-blue-200 rounded-lg text-sm font-medium transition-all duration-200 border border-blue-500/30",children:"Edit"}),o.jsx("button",{onClick:()=>x(E.id),className:"px-3 py-1.5 bg-red-600/30 hover:bg-red-600/50 text-red-200 rounded-lg text-sm font-medium transition-all duration-200 border border-red-500/30",children:"Delete"})]})]})},E.id))})]}),o.jsx("div",{className:"p-4 border-t border-purple-500/30 bg-purple-900/40",children:o.jsx("button",{onClick:e,className:"w-full px-4 py-2 bg-purple-800/40 hover:bg-purple-800/60 text-purple-200 rounded-lg font-medium transition-all duration-200 border border-purple-500/30",children:"Close"})})]})}):null}function N9({execution:t,onExecute:e,onCancel:n}){var b;const[r,s]=M.useState(t.defaultValues||{}),[i,a]=M.useState(!1),[l,c]=M.useState(0),[u,d]=M.useState(!1),h=JSON.parse(localStorage.getItem("connectedWallet")||"{}").address,f=_=>{p("destinationAddress",_.address),d(!1)},p=(_,m)=>{s(x=>({...x,[_]:m}))},y=async()=>{a(!0),c(0);try{for(let _=0;_<t.steps.length;_++)c(_),await new Promise(m=>setTimeout(m,800));await e(r),c(t.steps.length)}catch(_){console.error("Execution error:",_)}finally{a(!1)}};return o.jsxs("div",{className:"mt-4 rounded-xl overflow-hidden border border-purple-500/40",style:{background:"linear-gradient(135deg, rgba(88, 28, 135, 0.95), rgba(59, 7, 100, 0.95))",backdropFilter:"blur(20px)"},children:[o.jsx("div",{className:"p-4 border-b border-purple-500/30 bg-purple-900/40",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"text-3xl",children:t.icon}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-bold text-white",children:t.title}),o.jsx("p",{className:"text-purple-300/80 text-sm",children:t.description})]}),t.badge&&o.jsx("span",{className:"px-3 py-1 bg-purple-600/40 text-purple-200 text-xs font-medium rounded-full border border-purple-500/30",children:t.badge})]})}),t.fields&&t.fields.length>0&&o.jsx("div",{className:"p-4 space-y-3 bg-purple-900/20",children:t.fields.map(_=>{var m;return o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-purple-200 mb-1",children:[_.label,_.required&&o.jsx("span",{className:"text-red-400 ml-1",children:"*"})]}),_.type==="select"?o.jsxs("select",{value:r[_.name]||"",onChange:x=>p(_.name,x.target.value),className:"w-full bg-purple-950/60 border border-purple-500/40 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-purple-400/60 focus:ring-2 focus:ring-purple-500/30",disabled:i,children:[o.jsxs("option",{value:"",children:["Select ",_.label]}),(m=_.options)==null?void 0:m.map(x=>o.jsx("option",{value:x.value,children:x.label},x.value))]}):_.type==="textarea"?o.jsx("textarea",{value:r[_.name]||"",onChange:x=>p(_.name,x.target.value),placeholder:_.placeholder,className:"w-full bg-purple-950/60 border border-purple-500/40 rounded-lg px-3 py-2 text-white placeholder-purple-400/50 focus:outline-none focus:border-purple-400/60 focus:ring-2 focus:ring-purple-500/30 resize-none",rows:"3",disabled:i}):o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:_.type||"text",value:r[_.name]||"",onChange:x=>p(_.name,x.target.value),placeholder:_.placeholder,className:"w-full bg-purple-950/60 border border-purple-500/40 rounded-lg px-3 py-2 text-white placeholder-purple-400/50 focus:outline-none focus:border-purple-400/60 focus:ring-2 focus:ring-purple-500/30",disabled:i}),_.name==="destinationAddress"&&!i&&o.jsx("button",{type:"button",onClick:()=>d(!0),className:"absolute right-2 top-1/2 -translate-y-1/2 px-3 py-1 bg-purple-700/40 hover:bg-purple-700/60 text-purple-200 rounded text-xs font-medium transition-all duration-200 border border-purple-500/30",children:" Address Book"})]}),_.hint&&o.jsx("p",{className:"text-xs text-purple-400/60 mt-1",children:_.hint})]},_.name)})}),t.steps&&t.steps.length>0&&o.jsxs("div",{className:"p-4 space-y-2 bg-purple-900/10 border-t border-purple-500/20",children:[o.jsx("div",{className:"text-xs font-medium text-purple-300 mb-2",children:"Execution Steps:"}),t.steps.map((_,m)=>o.jsxs("div",{className:`flex items-center gap-3 p-2 rounded-lg transition-all duration-300 ${i&&m===l?"bg-purple-600/30 border border-purple-500/40 animate-pulse":i&&m<l?"bg-green-600/20 border border-green-500/30":"bg-purple-900/20 border border-purple-500/10"}`,children:[o.jsx("div",{className:"flex-shrink-0",children:i&&m<l?o.jsx("div",{className:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-white text-xs",children:""})}):i&&m===l?o.jsx("div",{className:"w-5 h-5 border-2 border-purple-400 border-t-transparent rounded-full animate-spin"}):o.jsx("div",{className:"w-5 h-5 bg-purple-700/30 rounded-full flex items-center justify-center text-purple-400 text-xs font-bold",children:m+1})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:`text-sm ${i&&m===l?"text-white font-medium":i&&m<l?"text-green-300":"text-purple-300/80"}`,children:_.label}),_.description&&o.jsx("div",{className:"text-xs text-purple-400/60 mt-0.5",children:_.description})]})]},m))]}),o.jsxs("div",{className:"p-4 bg-purple-900/30 border-t border-purple-500/20 flex gap-2",children:[o.jsx("button",{onClick:y,disabled:i||!((b=t.fields)!=null&&b.every(_=>!_.required||r[_.name])),className:"flex-1 px-4 py-2.5 bg-gradient-to-r from-purple-600 to-blue-600 hover:shadow-lg hover:shadow-purple-500/50 text-white rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:shadow-none flex items-center justify-center gap-2",children:i?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Executing..."]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{children:"Execute"}),o.jsx("span",{children:""})]})}),n&&!i&&o.jsx("button",{onClick:n,className:"px-4 py-2.5 bg-purple-800/40 hover:bg-purple-800/60 text-purple-200 rounded-lg font-medium transition-all duration-200 border border-purple-500/30",children:"Cancel"})]}),o.jsx(S9,{isOpen:u,onClose:()=>d(!1),onSelectAddress:f,walletAddress:h})]})}function T9({result:t}){return o.jsxs("div",{className:"mt-4 rounded-xl overflow-hidden border border-purple-500/40 animate-fadeInUp",style:{background:"linear-gradient(135deg, rgba(88, 28, 135, 0.95), rgba(59, 7, 100, 0.95))",backdropFilter:"blur(20px)"},children:[o.jsx("div",{className:`p-4 border-b ${t.status==="success"?"bg-green-900/30 border-green-500/30":t.status==="error"?"bg-red-900/30 border-red-500/30":"bg-purple-900/30 border-purple-500/30"}`,children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"text-3xl",children:t.status==="success"?"":t.status==="error"?"":""}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-bold text-white",children:t.title}),o.jsx("p",{className:`text-sm ${t.status==="success"?"text-green-300":t.status==="error"?"text-red-300":"text-purple-300"}`,children:t.message})]})]})}),t.data&&o.jsx("div",{className:"p-4 space-y-3 bg-purple-900/20",children:Object.entries(t.data).map(([e,n])=>o.jsxs("div",{className:"flex justify-between items-center p-2 bg-purple-950/40 rounded-lg border border-purple-500/20",children:[o.jsxs("span",{className:"text-sm text-purple-300 capitalize",children:[e.replace(/_/g," "),":"]}),o.jsx("span",{className:"text-sm text-white font-medium",children:n})]},e))}),t.transactionHash&&o.jsxs("div",{className:"p-4 bg-purple-900/30 border-t border-purple-500/20",children:[o.jsx("div",{className:"text-xs text-purple-300 mb-2",children:"Transaction Hash:"}),o.jsxs("div",{className:"flex items-center gap-2 p-2 bg-purple-950/60 rounded-lg border border-purple-500/30",children:[o.jsx("code",{className:"flex-1 text-xs text-purple-200 break-all",children:t.transactionHash}),o.jsx("button",{onClick:()=>{navigator.clipboard.writeText(t.transactionHash)},className:"px-2 py-1 bg-purple-700/40 hover:bg-purple-700/60 text-purple-200 rounded text-xs transition-colors",children:"Copy"}),o.jsx("button",{onClick:()=>{window.open(`https://xrpscan.com/tx/${t.transactionHash}`,"_blank")},className:"px-2 py-1 bg-purple-700/40 hover:bg-purple-700/60 text-purple-200 rounded text-xs transition-colors",children:"View"})]})]}),t.actions&&t.actions.length>0&&o.jsx("div",{className:"p-4 bg-purple-900/30 border-t border-purple-500/20 flex gap-2",children:t.actions.map((e,n)=>o.jsxs("button",{onClick:e.onClick,className:`px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200 ${e.style==="primary"?"bg-gradient-to-r from-purple-600 to-blue-600 hover:shadow-lg hover:shadow-purple-500/50 text-white":"bg-purple-800/40 hover:bg-purple-800/60 text-purple-200 border border-purple-500/30"}`,children:[e.icon&&o.jsx("span",{className:"mr-1",children:e.icon}),e.label]},n))})]})}const Sd="wss://s.altnet.rippletest.net:51233";async function A9(t){const{destinationAddress:e,amount:n,memo:r}=t,s=JSON.parse(localStorage.getItem("connectedWallet"));if(!s||!s.seed)throw new Error("No wallet connected or seed not available");const i=new Be.Client(Sd);await i.connect();try{const a=Be.Wallet.fromSeed(s.seed),l={TransactionType:"Payment",Account:a.address,Destination:e,Amount:Be.xrpToDrops(n)};r&&(l.Memos=[{Memo:{MemoData:Buffer.from(r,"utf8").toString("hex").toUpperCase()}}]);const c=await i.autofill(l),u=a.sign(c),d=await i.submitAndWait(u.tx_blob);return await Ae.from("activity_logs").insert({wallet_address:a.address,action_type:"send_xrp",details:{destination:e,amount:n,memo:r,txHash:d.result.hash}}),{status:"success",title:"XRP Sent Successfully",message:`Successfully sent ${n} XRP to ${e.slice(0,12)}...`,transactionHash:d.result.hash,data:{amount:`${n} XRP`,destination:`${e.slice(0,12)}...`,fee:`${parseFloat(d.result.Fee)/1e6} XRP`,ledger:d.result.ledger_index,timestamp:new Date().toLocaleString()},actions:[{label:"Send More XRP",icon:"",style:"secondary",onClick:()=>window.dispatchEvent(new CustomEvent("sendAIMessage",{detail:"send XRP"}))},{label:"Check Balance",icon:"",style:"secondary",onClick:()=>window.dispatchEvent(new CustomEvent("sendAIMessage",{detail:"check my balance"}))}]}}catch(a){throw new Error(a.message||"Failed to send XRP")}finally{await i.disconnect()}}async function C9(t){let{destinationAddress:e,currencyCode:n,issuerAddress:r,amount:s,memo:i,tokenId:a}=t;if(a)try{const u=JSON.parse(a);n=u.code,r=u.issuer}catch(u){console.error("Failed to parse tokenId:",u)}const l=JSON.parse(localStorage.getItem("connectedWallet"));if(!l||!l.seed)throw new Error("No wallet connected or seed not available");const c=new Be.Client(Sd);await c.connect();try{const u=Be.Wallet.fromSeed(l.seed),d={TransactionType:"Payment",Account:u.address,Destination:e,Amount:{currency:n,value:s,issuer:r}};i&&(d.Memos=[{Memo:{MemoData:Buffer.from(i,"utf8").toString("hex").toUpperCase()}}]);const h=await c.autofill(d),f=u.sign(h),p=await c.submitAndWait(f.tx_blob);return await Ae.from("activity_logs").insert({wallet_address:u.address,action_type:"send_token",details:{destination:e,currency:n,amount:s,issuer:r,txHash:p.result.hash}}),{status:"success",title:"Token Sent Successfully",message:`Successfully sent ${s} ${n} to ${e.slice(0,12)}...`,transactionHash:p.result.hash,data:{token:n,amount:`${s} ${n}`,destination:`${e.slice(0,12)}...`,fee:`${parseFloat(p.result.Fee)/1e6} XRP`,ledger:p.result.ledger_index},actions:[{label:"Send More",icon:"",style:"secondary",onClick:()=>window.dispatchEvent(new CustomEvent("sendAIMessage",{detail:"send tokens"}))}]}}catch(u){throw new Error(u.message||"Failed to send token")}finally{await c.disconnect()}}async function j9(t){const{currencyCode:e,issuerAddress:n,limit:r}=t,s=JSON.parse(localStorage.getItem("connectedWallet"));if(!s||!s.seed)throw new Error("No wallet connected or seed not available");const i=new Be.Client(Sd);await i.connect();try{const a=Be.Wallet.fromSeed(s.seed),l={TransactionType:"TrustSet",Account:a.address,LimitAmount:{currency:e,issuer:n,value:r||"1000000000"}},c=await i.autofill(l),u=a.sign(c),d=await i.submitAndWait(u.tx_blob);return await Ae.from("activity_logs").insert({wallet_address:a.address,action_type:"setup_trustline",details:{currency:e,issuer:n,limit:r,txHash:d.result.hash}}),{status:"success",title:"Trustline Created Successfully",message:`Trustline for ${e} has been set up`,transactionHash:d.result.hash,data:{currency:e,issuer:n.slice(0,12)+"...",limit:r||"Unlimited"}}}catch(a){throw new Error(a.message||"Failed to setup trustline")}finally{await i.disconnect()}}async function k9(t){const{tokenId:e,amountXRP:n,slippage:r}=t,s=JSON.parse(localStorage.getItem("connectedWallet"));if(!s||!s.seed)throw new Error("No wallet connected");const{data:i,error:a}=await Ae.from("tokens").select("*").eq("id",e).single();if(a||!i)throw new Error("Token not found");const l=new Be.Client(Sd);await l.connect();try{const c=Be.Wallet.fromSeed(s.seed),u={TransactionType:"OfferCreate",Account:c.address,TakerPays:{currency:i.currency_code,value:"1000",issuer:i.issuer_address},TakerGets:Be.xrpToDrops(n)},d=await l.autofill(u),h=c.sign(d),f=await l.submitAndWait(h.tx_blob);return await Ae.from("activity_logs").insert({wallet_address:c.address,action_type:"buy_token",details:{token:i.name,amountXRP:n,txHash:f.result.hash}}),{status:"success",title:"Buy Order Placed",message:`Successfully placed buy order for ${i.name}`,transactionHash:f.result.hash,data:{token:i.name,spent:`${n} XRP`,slippage:`${r}%`},actions:[{label:"View Token",icon:"",style:"secondary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"trade"}))}]}}catch(c){throw new Error(c.message||"Failed to buy token")}finally{await l.disconnect()}}async function O9(t){const{tokenId:e,amountToken:n,minXRP:r}=t,s=JSON.parse(localStorage.getItem("connectedWallet"));if(!s||!s.seed)throw new Error("No wallet connected");const{data:i,error:a}=await Ae.from("tokens").select("*").eq("id",e).single();if(a||!i)throw new Error("Token not found");const l=new Be.Client(Sd);await l.connect();try{const c=Be.Wallet.fromSeed(s.seed),u={TransactionType:"OfferCreate",Account:c.address,TakerPays:Be.xrpToDrops(r),TakerGets:{currency:i.currency_code,value:n,issuer:i.issuer_address}},d=await l.autofill(u),h=c.sign(d),f=await l.submitAndWait(h.tx_blob);return await Ae.from("activity_logs").insert({wallet_address:c.address,action_type:"sell_token",details:{token:i.name,amount:n,minXRP:r,txHash:f.result.hash}}),{status:"success",title:"Sell Order Placed",message:`Successfully placed sell order for ${n} ${i.name}`,transactionHash:f.result.hash,data:{token:i.name,amount:`${n} ${i.currency_code}`,minReceive:`${r} XRP`},actions:[{label:"View Orders",icon:"",style:"secondary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"trade"}))}]}}catch(c){throw new Error(c.message||"Failed to sell token")}finally{await l.disconnect()}}async function P9(t){const{name:e,strategy:n,tokenId:r,buyAmount:s,sellThreshold:i,buyThreshold:a}=t,l=JSON.parse(localStorage.getItem("connectedWallet"));if(!l)throw new Error("No wallet connected");try{const{data:c,error:u}=await Ae.from("trading_bots").insert({wallet_address:l.address,name:e,strategy:n,token_id:r,buy_amount:parseFloat(s),sell_threshold:parseFloat(i),buy_threshold:parseFloat(a),status:"active",last_check:new Date().toISOString()}).select().single();if(u)throw u;return{status:"success",title:"Trading Bot Created",message:`Bot "${e}" has been created and activated`,data:{name:e,strategy:n,status:"Active",buyAmount:`${s} XRP`},actions:[{label:"Manage Bots",icon:"",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"bottrader"}))}]}}catch(c){throw new Error(c.message||"Failed to create bot")}}function I9({message:t,onAddResult:e}){const n=t.role==="user",[r,s]=M.useState(null),[i,a]=M.useState(null),l=(b,_)=>{navigator.clipboard.writeText(b),s(_),setTimeout(()=>s(null),2e3)},c=()=>{var b;return(b=t.data)!=null&&b.actions?o.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:t.data.actions.map((_,m)=>o.jsxs("button",{onClick:()=>_.onClick(),className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${_.style==="primary"?"bg-gradient-to-r from-purple-600 to-blue-600 text-white hover:shadow-lg hover:shadow-purple-500/50":_.style==="danger"?"bg-red-600/20 text-red-300 border border-red-500/30 hover:bg-red-600/30":"bg-purple-600/20 text-purple-300 border border-purple-500/30 hover:bg-purple-600/30"}`,children:[_.icon&&o.jsx("span",{className:"mr-2",children:_.icon}),_.label]},m))}):null},u=()=>{var _;if(!((_=t.data)!=null&&_.card))return null;const{card:b}=t.data;return o.jsxs("div",{className:"mt-4 glass rounded-lg p-4 border border-purple-500/20",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[b.icon&&o.jsx("span",{className:"text-2xl",children:b.icon}),o.jsx("h3",{className:"text-lg font-bold text-white",children:b.title})]}),b.badge&&o.jsx("span",{className:"px-2 py-1 bg-purple-600/30 text-purple-200 rounded text-xs font-medium",children:b.badge})]}),b.items&&o.jsx("div",{className:"space-y-2",children:b.items.map((m,x)=>o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-300/80 text-sm",children:m.label}),o.jsx("span",{className:"text-white font-medium",children:m.value})]},x))}),b.description&&o.jsx("p",{className:"text-purple-300/70 text-sm mt-3",children:b.description}),b.link&&o.jsx("div",{className:"mt-3",children:o.jsx(Xj,{type:b.link.type,value:b.link.value,network:"mainnet"})})]})},d=()=>{var _;if(!((_=t.data)!=null&&_.table))return null;const{table:b}=t.data;return o.jsx("div",{className:"mt-4 glass rounded-lg overflow-hidden border border-purple-500/20",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsx("tr",{className:"bg-purple-900/30 border-b border-purple-500/20",children:b.headers.map((m,x)=>o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-purple-300 uppercase tracking-wider",children:m},x))})}),o.jsx("tbody",{children:b.rows.map((m,x)=>o.jsx("tr",{className:"border-b border-purple-500/10 hover:bg-purple-900/20 transition-colors",children:m.map((w,v)=>o.jsx("td",{className:"px-4 py-3 text-sm text-white",children:w},v))},x))})]})})})},h=()=>{var b;return(b=t.data)!=null&&b.quickActions?o.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:t.data.quickActions.map((_,m)=>o.jsx("button",{onClick:()=>_.onClick(),className:"px-3 py-1.5 bg-purple-900/30 hover:bg-purple-900/50 text-purple-200 rounded-full text-xs font-medium transition-all duration-200 border border-purple-500/20",children:_.label},m))}):null},f=async b=>{const _=t.data.execution;try{let m;switch(_.type){case"send_xrp":m=await A9(b);break;case"send_token":m=await C9(b);break;case"setup_trustline":m=await j9(b);break;case"buy_token":m=await k9(b);break;case"sell_token":m=await O9(b);break;case"create_bot":m=await P9(b);break;default:throw new Error("Unknown execution type")}a(m),ge.success(m.message),e&&e(m)}catch(m){const x={status:"error",title:"Execution Failed",message:m.message||"An error occurred during execution",data:null};a(x),ge.error(m.message)}},p=()=>{var b;return(b=t.data)!=null&&b.execution?o.jsxs(o.Fragment,{children:[o.jsx(N9,{execution:t.data.execution,onExecute:f}),i&&o.jsx(T9,{result:i})]}):null},y=b=>b.split(`
`).map((_,m)=>_.startsWith("")?o.jsx("li",{className:"ml-4",children:_.substring(1).trim()},m):_?o.jsx("p",{children:_},m):o.jsx("br",{},m));return o.jsxs("div",{className:`flex items-start gap-3 ${n?"flex-row-reverse":""}`,children:[o.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${n?"bg-gradient-to-br from-green-500 to-emerald-600":"bg-gradient-to-br from-purple-500 to-blue-600"}`,children:o.jsx("span",{className:"text-sm",children:n?"":""})}),o.jsx("div",{className:`flex-1 max-w-3xl ${n?"flex justify-end":""}`,children:o.jsxs("div",{className:`rounded-lg p-4 ${n?"bg-gradient-to-br from-green-600/20 to-emerald-600/20 border border-green-500/20":"bg-purple-900/30 border border-purple-500/20"}`,children:[o.jsx("div",{className:`text-sm ${n?"text-white":"text-purple-100"} space-y-2`,children:y(t.content)}),!n&&o.jsxs(o.Fragment,{children:[u(),d(),p(),c(),h()]}),o.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-purple-500/10",children:[o.jsx("span",{className:"text-xs text-purple-400/60",children:t.timestamp.toLocaleTimeString()}),o.jsx("button",{onClick:()=>l(t.content,t.id),className:"text-xs text-purple-400/60 hover:text-purple-300 transition-colors",children:r===t.id?" Copied":" Copy"})]})]})})]})}const Vy={WALLET:[{id:"check_balance",label:"Check my XRP balance",prompt:"What is my current XRP balance?"},{id:"wallet_info",label:"Show wallet information",prompt:"Show me detailed information about my connected wallet"},{id:"wallet_history",label:"View transaction history",prompt:"Show my recent transaction history"},{id:"send_xrp",label:"Send XRP to an address",prompt:"I want to send XRP to another wallet"},{id:"send_token",label:"Send tokens",prompt:"I want to send tokens from my wallet"},{id:"receive_token",label:"Receive tokens",prompt:"Show me my wallet address to receive tokens"},{id:"trustline_setup",label:"Setup trustline",prompt:"Help me setup a trustline for a token"},{id:"wallet_assets",label:"View all wallet assets",prompt:"Show me all tokens and assets in my wallet"},{id:"wallet_reserve",label:"Check wallet reserve",prompt:"What is my wallet reserve requirement?"},{id:"export_wallet",label:"Export wallet details",prompt:"Export my wallet information"}],TOKENS:[{id:"token_list",label:"List all tokens",prompt:"Show me all available tokens"},{id:"token_search",label:"Search for a token",prompt:"I want to search for a specific token"},{id:"token_details",label:"Get token details",prompt:"Show me detailed information about a token"},{id:"token_price",label:"Check token price",prompt:"What is the current price of a token?"},{id:"token_holders",label:"View token holders",prompt:"Show me who holds a specific token"},{id:"token_supply",label:"Check token supply",prompt:"What is the total supply of a token?"},{id:"my_tokens",label:"View my tokens",prompt:"Show me all tokens I own"},{id:"token_stats",label:"Token statistics",prompt:"Show me statistics for a token"},{id:"token_performance",label:"Token performance",prompt:"How is a token performing?"},{id:"token_comparison",label:"Compare tokens",prompt:"Compare two tokens for me"}],TRADING:[{id:"buy_token",label:"Buy a token",prompt:"I want to buy tokens"},{id:"sell_token",label:"Sell a token",prompt:"I want to sell my tokens"},{id:"swap_tokens",label:"Swap tokens",prompt:"I want to swap one token for another"},{id:"trade_history",label:"View trade history",prompt:"Show me my recent trades"},{id:"open_orders",label:"View open orders",prompt:"Show me my open orders"},{id:"cancel_order",label:"Cancel an order",prompt:"I want to cancel an order"},{id:"trade_analyze",label:"Analyze trade",prompt:"Analyze my trading performance"},{id:"best_price",label:"Find best price",prompt:"Find the best price for a token"},{id:"price_alert",label:"Set price alert",prompt:"Set a price alert for a token"},{id:"slippage_settings",label:"Adjust slippage",prompt:"Help me adjust my slippage settings"}],LIQUIDITY:[{id:"add_liquidity",label:"Add liquidity",prompt:"I want to add liquidity to a pool"},{id:"remove_liquidity",label:"Remove liquidity",prompt:"I want to remove liquidity from a pool"},{id:"pool_stats",label:"Pool statistics",prompt:"Show me statistics for a liquidity pool"},{id:"pool_apr",label:"Check pool APR",prompt:"What is the APR for a pool?"},{id:"my_pools",label:"My liquidity positions",prompt:"Show me my liquidity positions"},{id:"pool_earnings",label:"Pool earnings",prompt:"How much have I earned from pools?"},{id:"best_pools",label:"Best pools",prompt:"Which pools have the best returns?"},{id:"pool_history",label:"Pool history",prompt:"Show me the history of a pool"},{id:"impermanent_loss",label:"Check impermanent loss",prompt:"Calculate my impermanent loss"},{id:"pool_share",label:"My pool share",prompt:"What is my share of a pool?"}],BOT_TRADING:[{id:"create_bot",label:"Create trading bot",prompt:"I want to create a new trading bot"},{id:"bot_status",label:"Check bot status",prompt:"What is the status of my trading bots?"},{id:"bot_performance",label:"Bot performance",prompt:"How are my bots performing?"},{id:"bot_trades",label:"View bot trades",prompt:"Show me trades executed by my bots"},{id:"stop_bot",label:"Stop a bot",prompt:"Stop a trading bot"},{id:"bot_settings",label:"Adjust bot settings",prompt:"I want to adjust my bot settings"},{id:"bot_strategy",label:"Change bot strategy",prompt:"Change the strategy for my bot"},{id:"bot_profits",label:"Bot profits",prompt:"How much profit have my bots made?"},{id:"bot_errors",label:"Check bot errors",prompt:"Show me any errors from my bots"},{id:"bot_analytics",label:"Bot analytics",prompt:"Show me detailed analytics for my bots"}],MARKET:[{id:"market_overview",label:"Market overview",prompt:"Give me a market overview"},{id:"top_gainers",label:"Top gainers",prompt:"Show me the top gaining tokens"},{id:"top_losers",label:"Top losers",prompt:"Show me the biggest losing tokens"},{id:"trending_tokens",label:"Trending tokens",prompt:"What tokens are trending right now?"},{id:"market_cap",label:"Market cap rankings",prompt:"Show me tokens ranked by market cap"},{id:"volume_leaders",label:"Volume leaders",prompt:"Which tokens have the highest volume?"},{id:"new_tokens",label:"New tokens",prompt:"Show me recently created tokens"},{id:"market_sentiment",label:"Market sentiment",prompt:"What is the current market sentiment?"},{id:"price_changes",label:"24h price changes",prompt:"Show me 24 hour price changes"},{id:"market_alerts",label:"Market alerts",prompt:"Show me any market alerts"}],ANALYTICS:[{id:"portfolio_value",label:"Portfolio value",prompt:"What is my total portfolio value?"},{id:"portfolio_breakdown",label:"Portfolio breakdown",prompt:"Break down my portfolio by asset"},{id:"profit_loss",label:"Profit & Loss",prompt:"Show me my profit and loss"},{id:"performance_chart",label:"Performance chart",prompt:"Show me a performance chart"},{id:"roi_calculation",label:"Calculate ROI",prompt:"Calculate my return on investment"},{id:"asset_allocation",label:"Asset allocation",prompt:"Show me my asset allocation"},{id:"transaction_summary",label:"Transaction summary",prompt:"Summarize my transactions"},{id:"tax_report",label:"Tax report",prompt:"Generate a tax report"},{id:"historical_data",label:"Historical data",prompt:"Show me historical data"},{id:"export_data",label:"Export analytics",prompt:"Export my analytics data"}],TOKEN_CREATION:[{id:"create_token",label:"Create new token",prompt:"I want to create a new token"},{id:"token_wizard",label:"Token creation wizard",prompt:"Guide me through creating a token"},{id:"upload_metadata",label:"Upload token metadata",prompt:"Help me upload token metadata"},{id:"set_supply",label:"Set token supply",prompt:"How do I set the token supply?"},{id:"token_settings",label:"Configure token settings",prompt:"Help me configure my token settings"},{id:"deploy_token",label:"Deploy token",prompt:"I'm ready to deploy my token"},{id:"verify_token",label:"Verify token",prompt:"How do I verify my token?"},{id:"token_branding",label:"Add token branding",prompt:"Help me add branding to my token"},{id:"token_icon",label:"Upload token icon",prompt:"I want to upload an icon for my token"},{id:"token_whitepaper",label:"Create whitepaper",prompt:"Help me create a whitepaper"}],PLATFORM:[{id:"navigate_dashboard",label:"Go to Dashboard",prompt:"Take me to the dashboard"},{id:"navigate_trade",label:"Go to Trade",prompt:"Take me to the trading page"},{id:"navigate_pools",label:"Go to Pools",prompt:"Take me to the pools page"},{id:"navigate_vault",label:"Go to Vault",prompt:"Take me to the vault"},{id:"navigate_analytics",label:"Go to Analytics",prompt:"Take me to analytics"},{id:"platform_stats",label:"Platform statistics",prompt:"Show me platform statistics"},{id:"recent_activity",label:"Recent activity",prompt:"Show me recent platform activity"},{id:"notifications",label:"View notifications",prompt:"Show me my notifications"},{id:"settings",label:"Open settings",prompt:"Open platform settings"},{id:"help_center",label:"Help center",prompt:"I need help with something"}],XRPL:[{id:"xrp_price",label:"XRP price",prompt:"What is the current XRP price?"},{id:"xrpl_status",label:"XRPL network status",prompt:"What is the status of the XRPL network?"},{id:"ledger_info",label:"Ledger information",prompt:"Show me current ledger information"},{id:"transaction_cost",label:"Transaction costs",prompt:"What are the current transaction costs?"},{id:"network_stats",label:"Network statistics",prompt:"Show me XRPL network statistics"},{id:"validators",label:"Validator information",prompt:"Show me information about validators"},{id:"xrpl_explorer",label:"Open XRPL explorer",prompt:"Open the XRPL explorer"},{id:"ripple_news",label:"Ripple news",prompt:"What's the latest news about Ripple?"},{id:"xrpl_docs",label:"XRPL documentation",prompt:"I need XRPL documentation"},{id:"network_upgrades",label:"Network upgrades",prompt:"Are there any upcoming network upgrades?"}]};function R9(){return Object.entries(Vy).flatMap(([t,e])=>e.map(n=>({...n,category:t})))}function L9(t){const e=t.toLowerCase();return R9().filter(n=>n.label.toLowerCase().includes(e)||n.prompt.toLowerCase().includes(e))}function M9({onSelectCommand:t,onClose:e}){const[n,r]=M.useState("WALLET"),[s,i]=M.useState(""),[a,l]=M.useState(""),[c,u]=M.useState(null),d=M.useRef(null);M.useEffect(()=>{const _=m=>{d.current&&!d.current.contains(m.target)&&e()};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[e]);const h=Object.keys(Vy),f=s?L9(s):Vy[n]||[],p=_=>{u(_),l(_.prompt)},y=()=>{a.trim()&&(t(a.trim()),e())},b=_=>{t(_),e()};return o.jsxs("div",{ref:d,className:"absolute bottom-full left-0 right-0 mb-2 rounded-xl border border-purple-500/50 shadow-2xl shadow-purple-500/30 overflow-hidden animate-slideUp",style:{maxHeight:"70vh",background:"linear-gradient(135deg, rgba(88, 28, 135, 0.98), rgba(59, 7, 100, 0.98))",backdropFilter:"blur(24px)"},children:[o.jsx("div",{className:"p-4 border-b border-purple-500/30 bg-purple-900/40",children:o.jsx("input",{type:"text",value:s,onChange:_=>i(_.target.value),placeholder:"Search commands...",className:"w-full bg-purple-950/60 border border-purple-500/40 rounded-lg px-4 py-2 text-white placeholder-purple-400/60 focus:outline-none focus:border-purple-400/60 focus:ring-2 focus:ring-purple-500/30"})}),o.jsxs("div",{className:"flex h-[400px]",children:[o.jsx("div",{className:"w-48 border-r border-purple-500/30 overflow-y-auto bg-purple-900/30",children:h.map(_=>o.jsx("button",{onClick:()=>{r(_),i("")},className:`w-full text-left px-4 py-3 transition-all duration-200 ${n===_?"bg-purple-600/50 text-white border-r-2 border-purple-400":"text-purple-200 hover:bg-purple-800/40"}`,children:o.jsx("div",{className:"font-medium text-sm",children:_.replace("_"," ")})},_))}),o.jsx("div",{className:"flex-1 overflow-y-auto p-2 bg-purple-900/20",children:f.length>0?o.jsx("div",{className:"space-y-1",children:f.map(_=>o.jsxs("div",{className:`group rounded-lg transition-all duration-200 ${(c==null?void 0:c.id)===_.id?"bg-purple-600/40 border border-purple-500/40":"hover:bg-purple-800/30 border border-transparent"}`,children:[o.jsxs("button",{onClick:()=>p(_),className:"w-full text-left px-3 py-2",children:[o.jsx("div",{className:"font-medium text-white text-sm",children:_.label}),o.jsx("div",{className:"text-purple-300/80 text-xs mt-0.5 line-clamp-1",children:_.prompt})]}),o.jsx("button",{onClick:()=>b(_.prompt),className:"w-full text-center px-3 py-1.5 text-xs text-purple-200 hover:text-white border-t border-purple-500/20 opacity-0 group-hover:opacity-100 transition-opacity bg-purple-800/20",children:"Quick Send "})]},_.id))}):o.jsx("div",{className:"flex items-center justify-center h-full text-purple-300/60",children:"No commands found"})})]}),c&&o.jsxs("div",{className:"border-t border-purple-500/30 p-4 bg-purple-900/50",children:[o.jsx("div",{className:"mb-2 text-xs text-purple-200 font-medium",children:"Edit prompt before sending:"}),o.jsx("textarea",{value:a,onChange:_=>l(_.target.value),className:"w-full bg-purple-950/60 border border-purple-500/40 rounded-lg px-3 py-2 text-white text-sm resize-none focus:outline-none focus:border-purple-400/60 focus:ring-2 focus:ring-purple-500/30",rows:"3"}),o.jsxs("div",{className:"flex gap-2 mt-2",children:[o.jsx("button",{onClick:y,className:"flex-1 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:shadow-lg hover:shadow-purple-500/50 text-white rounded-lg font-medium transition-all duration-200",children:"Send Command"}),o.jsx("button",{onClick:()=>{u(null),l("")},className:"px-4 py-2 bg-purple-800/40 hover:bg-purple-800/60 text-purple-200 rounded-lg font-medium transition-all duration-200 border border-purple-500/30",children:"Cancel"})]})]}),o.jsxs("div",{className:"px-4 py-2 bg-purple-900/60 border-t border-purple-500/30 flex items-center justify-between",children:[o.jsxs("span",{className:"text-xs text-purple-300/80",children:[f.length," commands available"]}),o.jsx("button",{onClick:e,className:"text-xs text-purple-300 hover:text-purple-100 transition-colors",children:"Close (Esc)"})]})]})}function D9({onSend:t,disabled:e}){const[n,r]=M.useState(""),[s,i]=M.useState(!1),a=M.useRef(null);M.useEffect(()=>{const p=y=>{y.key==="Escape"&&s&&i(!1)};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[s]);const l=[{label:" Check balance",prompt:"Check my wallet balance"},{label:" Top tokens",prompt:"Show me the top performing tokens today"},{label:" Recent trades",prompt:"Show my recent trade history"},{label:" Market overview",prompt:"Give me a market overview"},{label:" New tokens",prompt:"Show me recently created tokens"}],c=p=>{p.preventDefault(),n.trim()&&!e&&(t(n.trim()),r(""),a.current&&(a.current.style.height="auto"))},u=p=>{p.key==="Enter"&&!p.shiftKey&&(p.preventDefault(),c(p))},d=p=>{r(p.target.value),p.target.style.height="auto",p.target.style.height=Math.min(p.target.scrollHeight,150)+"px"},h=p=>{e||t(p)},f=p=>{e||t(p)};return o.jsxs("div",{className:"space-y-3 relative",children:[s&&o.jsx(M9,{onSelectCommand:f,onClose:()=>i(!1)}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.map((p,y)=>o.jsx("button",{onClick:()=>h(p.prompt),disabled:e,className:"px-3 py-1.5 bg-purple-900/30 hover:bg-purple-900/50 text-purple-200 rounded-full text-xs font-medium transition-all duration-200 border border-purple-500/20 disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105 hover:shadow-lg hover:shadow-purple-500/20",children:p.label},y)),o.jsx("button",{onClick:()=>i(!s),disabled:e,className:"px-3 py-1.5 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-500 hover:to-blue-500 text-white rounded-full text-xs font-medium transition-all duration-200 border border-purple-500/30 disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105 hover:shadow-lg hover:shadow-purple-500/30",children:" All Commands (100+)"})]}),o.jsxs("form",{onSubmit:c,className:"flex gap-2",children:[o.jsx("textarea",{ref:a,value:n,onChange:d,onKeyDown:u,placeholder:"Ask me anything about XRPL, tokens, trading, or the platform...",disabled:e,rows:"1",className:"flex-1 bg-purple-900/20 border border-purple-500/30 rounded-lg px-4 py-3 text-white placeholder-purple-400/50 focus:outline-none focus:border-purple-500/50 focus:ring-2 focus:ring-purple-500/20 disabled:opacity-50 disabled:cursor-not-allowed resize-none overflow-hidden transition-all duration-200",style:{minHeight:"48px",maxHeight:"150px"}}),o.jsxs("button",{type:"submit",disabled:e||!n.trim(),className:"px-6 bg-gradient-to-r from-purple-600 to-blue-600 hover:shadow-lg hover:shadow-purple-500/50 text-white rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:shadow-none hover:scale-105",children:[o.jsx("span",{className:"hidden sm:inline",children:"Send"}),o.jsx("span",{className:"sm:hidden",children:""})]})]}),o.jsx("div",{className:"flex items-center justify-center gap-2 text-xs text-purple-400/60",children:o.jsx("span",{children:" Press Enter to send  Shift+Enter for new line  Esc to close dropdown"})})]})}class F9{constructor(){this.xrplClient=null,this.context={connectedWallet:null,lastQuery:null,sessionData:{}},this.initializeContext()}initializeContext(){const e=localStorage.getItem("connectedWallet");e&&(this.context.connectedWallet=JSON.parse(e))}async processMessage(e){const n=e.toLowerCase();return this.isAddressBookQuery(n)?await this.handleAddressBook():this.isBuyTokenQuery(n)?await this.handleBuyToken():this.isSellTokenQuery(n)?await this.handleSellToken():this.isCreateBotQuery(n)?await this.handleCreateBot():this.isSendXRPQuery(n)?await this.handleSendXRP():this.isSendCustomTokenQuery(n)?await this.handleSendCustomToken():this.isSendTokenQuery(n)?await this.handleSendToken(e):this.isReceiveTokenQuery(n)?this.handleReceiveToken():this.isWalletAssetsQuery(n)?await this.handleWalletAssets():this.isBalanceQuery(n)?await this.handleBalanceQuery():this.isTokenQuery(n)?await this.handleTokenQuery(e):this.isTradeQuery(n)?await this.handleTradeQuery():this.isPriceQuery(n)?await this.handlePriceQuery(e):this.isMarketQuery(n)?await this.handleMarketQuery():this.isWalletQuery(n)?await this.handleWalletInfo():this.isNavigationQuery(n)?this.handleNavigation(n):this.isTokenStatsQuery(n)?await this.handleTokenStats():this.isBotQuery(n)?await this.handleBotQuery():this.isHelpQuery(n)?this.handleHelp():this.handleGeneral(e)}isBalanceQuery(e){return e.includes("balance")||e.includes("how much")||e.includes("my xrp")}isTokenQuery(e){return e.includes("token")&&(e.includes("info")||e.includes("about")||e.includes("details"))}isTradeQuery(e){return e.includes("trade")||e.includes("swap")||e.includes("recent")&&e.includes("history")}isPriceQuery(e){return e.includes("price")||e.includes("cost")||e.includes("worth")}isMarketQuery(e){return e.includes("market")||e.includes("top")||e.includes("trending")||e.includes("overview")}isWalletQuery(e){return e.includes("wallet")&&(e.includes("info")||e.includes("detail")||e.includes("address"))}isNavigationQuery(e){return e.includes("go to")||e.includes("open")||e.includes("show me")||e.includes("navigate")}isHelpQuery(e){return e.includes("help")||e.includes("what can you")||e.includes("how do i")}isSendTokenQuery(e){return e.includes("send")&&(e.includes("token")||e.includes("xrp"))||e.includes("transfer")||e.includes("payment")}isSendXRPQuery(e){return e.includes("send")&&e.includes("xrp")&&!e.includes("custom")&&!e.includes("token")}isSendCustomTokenQuery(e){return e.includes("send")&&(e.includes("custom")||e.includes("specific"))||e.includes("send")&&e.includes("token")&&!e.includes("xrp")}isReceiveTokenQuery(e){return e.includes("receive")||e.includes("get token")||e.includes("my address")}isWalletAssetsQuery(e){return e.includes("wallet")&&e.includes("asset")||e.includes("what tokens")||e.includes("my holdings")}isTokenStatsQuery(e){return e.includes("token")&&(e.includes("stat")||e.includes("analytic")||e.includes("performance"))}isBotQuery(e){return e.includes("bot")&&(e.includes("status")||e.includes("trading")||e.includes("performance"))}isBuyTokenQuery(e){return e.includes("buy")&&e.includes("token")||e.includes("purchase token")}isSellTokenQuery(e){return e.includes("sell")&&e.includes("token")||e.includes("sell my")}isCreateBotQuery(e){return e.includes("create")&&e.includes("bot")||e.includes("new bot")||e.includes("setup bot")}isAddressBookQuery(e){return e.includes("address book")||e.includes("contacts")||e.includes("saved addresses")}async handleBalanceQuery(){if(!this.context.connectedWallet)return{content:"No wallet is currently connected. Please connect a wallet first to check your balance.",data:{actions:[{label:"Go to Wallets",icon:"",style:"primary",onClick:()=>{window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"wallets"}))}}]}};try{const e=await by(this.context.connectedWallet.address);return{content:"Here is your current wallet balance:",data:{card:{icon:"",title:"Wallet Balance",badge:"Live",items:[{label:"Address",value:`${this.context.connectedWallet.address.slice(0,10)}...${this.context.connectedWallet.address.slice(-8)}`},{label:"XRP Balance",value:`${e.toFixed(6)} XRP`},{label:"Wallet Name",value:this.context.connectedWallet.name}]},quickActions:[{label:"Send XRP",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"wallets"}))},{label:"View on XRPScan",onClick:()=>window.open(`https://xrpscan.com/account/${this.context.connectedWallet.address}`,"_blank")}]}}}catch{return{content:"I encountered an error fetching your balance. Please make sure your wallet is properly connected.",data:null}}}async handleTokenQuery(e){try{const{data:n,error:r}=await Ae.from("tokens").select("*").order("created_at",{ascending:!1}).limit(10);if(r)throw r;if(!n||n.length===0)return{content:"No tokens found in the database. Create your first token to get started!",data:{actions:[{label:"Create Token",icon:"",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"memes"}))}]}};const s=n.reduce((a,l)=>a+(parseFloat(l.total_supply)||0),0),i=n.reduce((a,l)=>a+(l.volume_24h||0),0)/n.length;return{content:`I found ${n.length} recent tokens from the platform database:`,data:{card:{icon:"",title:"Token Overview",badge:`${n.length} Tokens`,items:[{label:"Total Tokens",value:`${n.length}`},{label:"Avg 24h Volume",value:i.toFixed(2)},{label:"Total Supply",value:s.toFixed(0)}]},table:{headers:["Token","Symbol","Volume","Created"],rows:n.slice(0,5).map(a=>[a.name||"Unknown",a.currency_code||"N/A",a.volume_24h?a.volume_24h.toFixed(2):"N/A",new Date(a.created_at).toLocaleDateString()])},actions:[{label:"View All Tokens",icon:"",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"mytokens"}))},{label:"Trade Tokens",icon:"",style:"secondary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"trade"}))}]}}}catch{return{content:"I had trouble fetching token information. Please try again.",data:null}}}async handleTradeQuery(){try{const{data:e,error:n}=await Ae.from("bot_trades").select("*").order("created_at",{ascending:!1}).limit(5);if(n)throw n;if(!e||e.length===0)return{content:"No recent trades found. Start trading to see your history here!",data:{actions:[{label:"Start Trading",icon:"",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"trade"}))}]}};const r=e.filter(a=>a.status==="success").length,s=e.reduce((a,l)=>a+(l.amount_bought||0),0),i=e.length>0?(r/e.length*100).toFixed(1):0;return{content:"Here is your trading activity from the platform:",data:{card:{icon:"",title:"Trading Summary",badge:`${e.length} Trades`,items:[{label:"Total Trades",value:`${e.length}`},{label:"Successful",value:`${r}`},{label:"Success Rate",value:`${i}%`},{label:"Total Volume",value:`${s.toFixed(2)} tokens`}]},table:{headers:["Type","Amount","Status","Date"],rows:e.map(a=>[a.trade_type||"Unknown",`${(a.amount_bought||0).toFixed(2)}`,a.status||"N/A",new Date(a.created_at).toLocaleString()])},actions:[{label:"View All Trades",icon:"",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"bottrader"}))},{label:"Start Trading",icon:"",style:"secondary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"trade"}))}]}}}catch{return{content:"I had trouble fetching your trade history. Please try again.",data:null}}}async handlePriceQuery(e){try{const{data:n,error:r}=await Ae.from("tokens").select("*").order("volume_24h",{ascending:!1,nullsFirst:!1}).limit(5);if(r)throw r;return{content:"Here are the top tokens by trading volume:",data:{table:{headers:["Token","Symbol","24h Volume","24h Change"],rows:(n==null?void 0:n.map(s=>[s.name||"Unknown",s.currency_code||"N/A",s.volume_24h?`${s.volume_24h.toFixed(2)}`:"N/A",s.price_change_24h?`${s.price_change_24h>0?"+":""}${s.price_change_24h.toFixed(2)}%`:"N/A"]))||[]},actions:[{label:"View All Prices",icon:"",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"trade"}))},{label:"Top 10 Tokens",icon:"",style:"secondary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"top10"}))}]}}}catch{return{content:"I can help you check token prices! Visit the Trade page for real-time prices.",data:{actions:[{label:"View Prices",icon:"",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"trade"}))}]}}}}async handleMarketQuery(){try{const{data:e,error:n}=await Ae.from("tokens").select("*").order("price_change_24h",{ascending:!1,nullsFirst:!1}).limit(10);if(n)throw n;const{count:r}=await Ae.from("tokens").select("*",{count:"exact",head:!0}),{count:s}=await Ae.from("liquidity_pools").select("*",{count:"exact",head:!0}),{count:i}=await Ae.from("trading_bots").select("*",{count:"exact",head:!0}).eq("status","active"),a=(e==null?void 0:e.reduce((h,f)=>h+parseFloat(f.total_supply||0),0))||0,l=(e==null?void 0:e.reduce((h,f)=>h+(f.volume_24h||0),0))||0,c=(e==null?void 0:e.length)>0?a/e.length:0,u=e&&e.length>0?e[0]:null,d=(e==null?void 0:e.filter(h=>{const f=new Date(h.created_at);return new Date-f<24*60*60*1e3}).length)||0;return{content:"Here is comprehensive market analytics with data from the Analytics page:",data:{card:{icon:"",title:"Market Analytics",badge:"Live Data",items:[{label:"Total Tokens",value:`${r||0}`},{label:"Active Pools",value:`${s||0}`},{label:"Active Bots",value:`${i||0}`},{label:"24h New Tokens",value:`${d}`},{label:"Total Supply",value:`${a.toFixed(0)}`},{label:"24h Volume",value:`${l.toFixed(2)}`},{label:"Avg Market Cap",value:`${c.toFixed(2)}`},{label:"Top Gainer",value:u?`${u.name}`:"N/A"}]},table:{headers:["Token","Symbol","24h Change","24h Volume","Created"],rows:(e==null?void 0:e.slice(0,5).map(h=>[h.name||"Unknown",h.currency_code||"N/A",h.price_change_24h?`${h.price_change_24h>0?"+":""}${h.price_change_24h.toFixed(2)}%`:"N/A",h.volume_24h?h.volume_24h.toFixed(2):"N/A",new Date(h.created_at).toLocaleDateString()]))||[]},actions:[{label:"View Top 10",icon:"",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"top10"}))},{label:"Full Analytics",icon:"",style:"secondary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"analytics"}))}]}}}catch{return{content:"I had trouble fetching market data. Please try again.",data:null}}}async handleWalletInfo(){return this.context.connectedWallet?{content:"Here is your connected wallet information:",data:{card:{icon:"",title:"Wallet Information",badge:"Active",items:[{label:"Name",value:this.context.connectedWallet.name},{label:"Address",value:this.context.connectedWallet.address},{label:"Network",value:"XRPL Mainnet"}],description:"Your wallet is securely connected to the XRPL network."},actions:[{label:"Manage Wallet",icon:"",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"wallets"}))}]}}:{content:"No wallet is currently connected. Connect a wallet to see detailed information.",data:{actions:[{label:"Connect Wallet",icon:"",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"wallets"}))}]}}}handleNavigation(e){const n={dashboard:["dashboard","home"],trade:["trade","swap","trading"],memes:["meme","create token"],pools:["pool","liquidity"],bottrader:["bot","automated trading"],vault:["vault","collect","fees"],mytokens:["my token","tokens"],analytics:["analytic","stats","chart"],top10:["top 10","top ten","leaderboard"],wallets:["wallet","manage wallet"],about:["about","info"]};for(const[r,s]of Object.entries(n))if(s.some(i=>e.includes(i)))return setTimeout(()=>{window.dispatchEvent(new CustomEvent("navigateToPage",{detail:r}))},500),{content:`Taking you to ${r.charAt(0).toUpperCase()+r.slice(1)}...`,data:null};return{content:"I can help you navigate to different sections. Which page would you like to visit?",data:{quickActions:[{label:"Dashboard",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"dashboard"}))},{label:"Trade",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"trade"}))},{label:"Create Token",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"memes"}))},{label:"Bot Trader",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"bottrader"}))}]}}}handleHelp(){return{content:"I'm your advanced XRPL AI assistant. Here's what I can help you with:",data:{card:{icon:"",title:"Available Commands",items:[{label:"Balance Queries",value:"Check wallet balances and XRP amounts"},{label:"Token Information",value:"Get details about any token"},{label:"Trade History",value:"View your recent trades and swaps"},{label:"Market Data",value:"Get market overview and analytics"},{label:"Navigation",value:"Navigate to any page on the platform"},{label:"Price Checking",value:"Check token prices and values"}]},quickActions:[{label:"Check Balance",onClick:()=>{}},{label:"View Tokens",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"mytokens"}))},{label:"Market Overview",onClick:()=>{}},{label:"Trade History",onClick:()=>{}}]}}}async handleSendXRP(){return this.context.connectedWallet?{content:"Ready to send XRP! Fill in the details below and I'll execute the transaction for you.",data:{execution:{type:"send_xrp",icon:"",title:"Send XRP",description:"Direct XRP transfer to any XRPL address",badge:"Ready to Execute",fields:[{name:"destinationAddress",label:"Destination Address",type:"text",placeholder:"rXXXXXXXXXXXXXXXXXXXXXXXXXXXX",required:!0,hint:"Enter recipient XRPL address or use Address Book"},{name:"amount",label:"Amount (XRP)",type:"number",placeholder:"10",required:!0,hint:"Amount of XRP to send"},{name:"memo",label:"Memo (Optional)",type:"text",placeholder:"Payment for services",hint:"Optional memo for this transaction"}],steps:[{label:"Validate destination",description:"Verifying XRPL address format"},{label:"Check balance",description:"Ensuring sufficient XRP balance"},{label:"Prepare payment",description:"Creating XRP payment transaction"},{label:"Sign with wallet",description:"Cryptographically signing transaction"},{label:"Broadcast to network",description:"Submitting to XRPL"},{label:"Wait for confirmation",description:"Transaction being validated"}],defaultValues:{amount:"10"}}}}:{content:"Please connect a wallet first to send XRP.",data:{actions:[{label:"Connect Wallet",icon:"",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"wallets"}))}]}}}async handleSendCustomToken(){if(!this.context.connectedWallet)return{content:"Please connect a wallet first to send custom tokens.",data:{actions:[{label:"Connect Wallet",icon:"",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"wallets"}))}]}};const{data:e}=await Ae.from("tokens").select("*").order("name",{ascending:!0}).limit(100);return!e||e.length===0?{content:"No custom tokens found in the platform. You can only send tokens that exist in the system.",data:{actions:[{label:"View Available Tokens",icon:"",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"trade"}))}]}}:{content:`I can help you send any of the ${e.length} available tokens. Select the token and provide details:`,data:{execution:{type:"send_token",icon:"",title:"Send Custom Token",description:"Transfer tokens to any XRPL address with trustline",badge:`${e.length} Tokens Available`,fields:[{name:"tokenId",label:"Select Token",type:"select",required:!0,options:e.map(n=>({value:JSON.stringify({code:n.currency_code,issuer:n.issuer_address,name:n.name}),label:`${n.name} (${n.currency_code})`})),hint:"Choose which token to send"},{name:"destinationAddress",label:"Destination Address",type:"text",placeholder:"rXXXXXXXXXXXXXXXXXXXXXXXXXXXX",required:!0,hint:"Recipient must have trustline for this token"},{name:"amount",label:"Amount",type:"number",placeholder:"100",required:!0,hint:"Amount of tokens to send"},{name:"memo",label:"Memo (Optional)",type:"text",placeholder:"Payment note",hint:"Optional transaction memo"}],steps:[{label:"Parse token selection",description:"Extracting token details"},{label:"Validate addresses",description:"Checking destination and issuer"},{label:"Verify trustline",description:"Ensuring recipient can receive"},{label:"Prepare payment",description:"Creating token payment transaction"},{label:"Sign transaction",description:"Signing with your wallet"},{label:"Submit to XRPL",description:"Broadcasting transaction"},{label:"Confirm delivery",description:"Waiting for ledger confirmation"}],defaultValues:{amount:"100"}}}}}async handleSendToken(e){if(!this.context.connectedWallet)return{content:"Please connect a wallet first to send tokens.",data:{actions:[{label:"Connect Wallet",icon:"",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"wallets"}))}]}};const{data:n}=await Ae.from("tokens").select("id, name, currency_code, issuer_address").limit(50),r=(e==null?void 0:e.toLowerCase())||"";if(r.includes("send")&&(n==null?void 0:n.some(i=>r.includes(i.name.toLowerCase())||r.includes(i.currency_code.toLowerCase())))){const i=n.find(a=>r.includes(a.name.toLowerCase())||r.includes(a.currency_code.toLowerCase()));return{content:`I'll help you send ${i.name} (${i.currency_code}). Please provide the details:`,data:{execution:{type:"send_token",icon:"",title:`Send ${i.name}`,description:`Send ${i.currency_code} tokens to any XRPL address`,badge:"Token Transfer",fields:[{name:"destinationAddress",label:"Destination Address",type:"text",placeholder:"rXXXXXXXXXXXXXXXXXXXXXXXXXXXX",required:!0,hint:"Enter recipient address or use Address Book"},{name:"amount",label:`Amount (${i.currency_code})`,type:"number",placeholder:"100",required:!0,hint:`Amount of ${i.currency_code} to send`},{name:"currencyCode",label:"Currency Code",type:"text",placeholder:i.currency_code,required:!0,hint:"Token currency code"},{name:"issuerAddress",label:"Issuer Address",type:"text",placeholder:i.issuer_address,required:!0,hint:"Token issuer address"},{name:"memo",label:"Memo (Optional)",type:"text",placeholder:"Payment for services",hint:"Optional memo to include"}],steps:[{label:"Validate addresses",description:"Checking destination and issuer addresses"},{label:"Check trustline",description:"Verifying recipient has trustline"},{label:"Prepare transaction",description:"Creating token payment"},{label:"Sign transaction",description:"Signing with your wallet"},{label:"Submit to XRPL",description:"Broadcasting to network"},{label:"Confirm transaction",description:"Waiting for confirmation"}],defaultValues:{amount:"100",currencyCode:i.currency_code,issuerAddress:i.issuer_address}}}}}return{content:"I can help you send XRP or custom tokens directly from chat! What would you like to send?",data:{card:{icon:"",title:"Send Options",badge:"Choose Type",items:[{label:"XRP",value:"Native XRPL currency"},{label:"Custom Tokens",value:`${(n==null?void 0:n.length)||0} available`}]},quickActions:[{label:"Send XRP",onClick:()=>window.dispatchEvent(new CustomEvent("sendAIMessage",{detail:"send XRP"}))},{label:"Send Custom Token",onClick:()=>window.dispatchEvent(new CustomEvent("sendAIMessage",{detail:"send custom token"}))}]}}}handleReceiveToken(){return this.context.connectedWallet?{content:"Here is your wallet address for receiving tokens:",data:{card:{icon:"",title:"Receive Tokens",badge:"Your Address",items:[{label:"Wallet Name",value:this.context.connectedWallet.name},{label:"Address",value:this.context.connectedWallet.address},{label:"Network",value:"XRPL Mainnet"}],description:"Share this address with others to receive XRP and tokens. Make sure senders are using the XRPL network."},quickActions:[{label:"Copy Address",onClick:()=>navigator.clipboard.writeText(this.context.connectedWallet.address)},{label:"View on Explorer",onClick:()=>window.open(`https://xrpscan.com/account/${this.context.connectedWallet.address}`,"_blank")}]}}:{content:"Please connect a wallet first to receive tokens.",data:{actions:[{label:"Connect Wallet",icon:"",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"wallets"}))}]}}}async handleWalletAssets(){if(!this.context.connectedWallet)return{content:"Please connect a wallet to view your assets.",data:{actions:[{label:"Connect Wallet",icon:"",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"wallets"}))}]}};try{return{content:"Here are your wallet assets:",data:{card:{icon:"",title:"Wallet Assets",badge:"Live",items:[{label:"XRP Balance",value:`${(await by(this.context.connectedWallet.address)).toFixed(6)} XRP`},{label:"Wallet",value:this.context.connectedWallet.name},{label:"Address",value:`${this.context.connectedWallet.address.slice(0,12)}...`}],description:"View all your assets including tokens and XRP holdings in the Wallets page."},actions:[{label:"View All Assets",icon:"",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"wallets"}))},{label:"Send Tokens",icon:"",style:"secondary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"wallets"}))}]}}}catch{return{content:"I had trouble fetching your wallet assets. Please try again.",data:null}}}async handleTokenStats(){try{const{data:e,error:n}=await Ae.from("tokens").select("*").order("created_at",{ascending:!1}).limit(5);if(n)throw n;const{count:r}=await Ae.from("tokens").select("*",{count:"exact",head:!0});return{content:"Here are the latest token statistics:",data:{card:{icon:"",title:"Token Statistics",badge:"Real-time",items:[{label:"Total Tokens",value:`${r||0}`},{label:"Recent Tokens",value:`${(e==null?void 0:e.length)||0} new`},{label:"Network",value:"XRPL Mainnet"}]},table:{headers:["Token","Symbol","Created"],rows:(e==null?void 0:e.slice(0,5).map(s=>[s.name||"Unknown",s.currency_code||"N/A",new Date(s.created_at).toLocaleDateString()]))||[]},actions:[{label:"View All Tokens",icon:"",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"mytokens"}))},{label:"Create Token",icon:"",style:"secondary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"memes"}))}]}}}catch{return{content:"I had trouble fetching token statistics. Please try again.",data:null}}}async handleBotQuery(){try{const{data:e,error:n}=await Ae.from("trading_bots").select("*").order("created_at",{ascending:!1}).limit(5);if(n)throw n;if(!e||e.length===0)return{content:"You don't have any trading bots yet. Create your first bot to automate your trading!",data:{actions:[{label:"Create Trading Bot",icon:"",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"bottrader"}))}]}};const r=e.filter(i=>i.status==="active").length,s=e.reduce((i,a)=>i+(a.total_trades||0),0);return{content:"Here is your trading bot overview:",data:{card:{icon:"",title:"Trading Bots",badge:`${r} Active`,items:[{label:"Total Bots",value:`${e.length}`},{label:"Active Bots",value:`${r}`},{label:"Total Trades",value:`${s}`}]},table:{headers:["Bot","Status","Strategy","Trades"],rows:e.slice(0,5).map(i=>[i.name||"Unnamed Bot",i.status||"Unknown",i.strategy||"N/A",`${i.total_trades||0}`])},actions:[{label:"Manage Bots",icon:"",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"bottrader"}))}]}}}catch{return{content:"I had trouble fetching bot information. Please try again.",data:null}}}async handleBuyToken(){if(!this.context.connectedWallet)return{content:"Please connect a wallet to buy tokens.",data:{actions:[{label:"Connect Wallet",icon:"",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"wallets"}))}]}};const{data:e}=await Ae.from("tokens").select("id, name, currency_code").limit(50);return{content:"Let's buy some tokens! I'll guide you through the process step by step.",data:{execution:{type:"buy_token",icon:"",title:"Buy Token",description:"Purchase tokens using XRP",badge:"Trade",fields:[{name:"tokenId",label:"Select Token",type:"select",required:!0,options:(e==null?void 0:e.map(n=>({value:n.id,label:`${n.name} (${n.currency_code})`})))||[],hint:"Choose which token to buy"},{name:"amountXRP",label:"Amount to Spend (XRP)",type:"number",placeholder:"100",required:!0,hint:"Amount of XRP to spend"},{name:"slippage",label:"Slippage Tolerance (%)",type:"number",placeholder:"2",required:!0,hint:"Maximum price slippage allowed"}],steps:[{label:"Select token",description:"Choose token to purchase"},{label:"Create offer",description:"Preparing buy order on XRPL"},{label:"Sign transaction",description:"Signing with wallet"},{label:"Submit order",description:"Submitting to ledger"},{label:"Confirm purchase",description:"Waiting for confirmation"}],defaultValues:{amountXRP:"100",slippage:"2"}}}}}async handleSellToken(){if(!this.context.connectedWallet)return{content:"Please connect a wallet to sell tokens.",data:{actions:[{label:"Connect Wallet",icon:"",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"wallets"}))}]}};const{data:e}=await Ae.from("tokens").select("id, name, currency_code").limit(50);return{content:"Ready to sell tokens! I'll help you create a sell order.",data:{execution:{type:"sell_token",icon:"",title:"Sell Token",description:"Sell tokens for XRP",badge:"Trade",fields:[{name:"tokenId",label:"Select Token",type:"select",required:!0,options:(e==null?void 0:e.map(n=>({value:n.id,label:`${n.name} (${n.currency_code})`})))||[],hint:"Choose which token to sell"},{name:"amountToken",label:"Amount to Sell",type:"number",placeholder:"1000",required:!0,hint:"Amount of tokens to sell"},{name:"minXRP",label:"Minimum XRP to Receive",type:"number",placeholder:"50",required:!0,hint:"Minimum XRP you want to receive"}],steps:[{label:"Validate holdings",description:"Checking token balance"},{label:"Create sell order",description:"Preparing sell order"},{label:"Sign transaction",description:"Signing with wallet"},{label:"Submit order",description:"Submitting to ledger"},{label:"Confirm sale",description:"Waiting for confirmation"}],defaultValues:{amountToken:"1000",minXRP:"50"}}}}}async handleCreateBot(){if(!this.context.connectedWallet)return{content:"Please connect a wallet to create a trading bot.",data:{actions:[{label:"Connect Wallet",icon:"",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"wallets"}))}]}};const{data:e}=await Ae.from("tokens").select("id, name, currency_code").limit(50);return{content:"Let's create an automated trading bot! I'll set it up for you.",data:{execution:{type:"create_bot",icon:"",title:"Create Trading Bot",description:"Automate your token trading",badge:"Automation",fields:[{name:"name",label:"Bot Name",type:"text",placeholder:"My Trading Bot",required:!0,hint:"Give your bot a name"},{name:"tokenId",label:"Token to Trade",type:"select",required:!0,options:(e==null?void 0:e.map(n=>({value:n.id,label:`${n.name} (${n.currency_code})`})))||[],hint:"Which token should the bot trade"},{name:"strategy",label:"Trading Strategy",type:"select",required:!0,options:[{value:"dca",label:"Dollar Cost Averaging (DCA)"},{value:"momentum",label:"Momentum Trading"},{value:"scalping",label:"Scalping"}],hint:"Choose trading strategy"},{name:"buyAmount",label:"Buy Amount (XRP)",type:"number",placeholder:"50",required:!0,hint:"Amount to spend per trade"},{name:"buyThreshold",label:"Buy Threshold (%)",type:"number",placeholder:"-5",required:!0,hint:"Buy when price drops by this %"},{name:"sellThreshold",label:"Sell Threshold (%)",type:"number",placeholder:"10",required:!0,hint:"Sell when price rises by this %"}],steps:[{label:"Validate settings",description:"Checking bot configuration"},{label:"Create bot",description:"Setting up trading bot"},{label:"Configure strategy",description:"Applying trading rules"},{label:"Activate bot",description:"Starting automated trading"}],defaultValues:{name:"Trading Bot",strategy:"dca",buyAmount:"50",buyThreshold:"-5",sellThreshold:"10"}}}}}async handleAddressBook(){if(!this.context.connectedWallet)return{content:"Please connect a wallet to view your address book.",data:{actions:[{label:"Connect Wallet",icon:"",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"wallets"}))}]}};try{const{data:e,error:n}=await Ae.from("address_book").select("*").eq("wallet_address",this.context.connectedWallet.address).order("is_favorite",{ascending:!1}).order("name",{ascending:!0});if(n)throw n;const r=(e==null?void 0:e.filter(s=>s.is_favorite).length)||0;return{content:`Here is your address book with ${(e==null?void 0:e.length)||0} saved contacts:`,data:{card:{icon:"",title:"Address Book",badge:`${(e==null?void 0:e.length)||0} Contacts`,items:[{label:"Total Contacts",value:`${(e==null?void 0:e.length)||0}`},{label:"Favorites",value:`${r}`}]},table:{headers:["Name","Address","Notes"],rows:(e==null?void 0:e.slice(0,10).map(s=>[s.is_favorite?` ${s.name}`:s.name,`${s.address.slice(0,20)}...`,s.notes||"No notes"]))||[]},actions:[{label:"Send to Contact",icon:"",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("sendAIMessage",{detail:"send tokens"}))}]}}}catch{return{content:"I had trouble loading your address book. You can add contacts when sending tokens!",data:null}}}handleGeneral(e){const n=e.toLowerCase();return n.includes("create")&&n.includes("token")?{content:"I cannot create tokens through the chat. Token creation requires admin access and must be done through the Memes page of the platform.",data:{actions:[{label:"Go to Memes Page",icon:"",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"memes"}))}]}}:n.includes("admin")||n.includes("settings")||n.includes("configure")?{content:`I don't have access to administrative functions or platform settings. I can only help with:

 Wallet operations (balance, send, receive)
 Token trading (buy/sell)
 Market information
 Address book management
 Trading bot creation

What would you like help with?`,data:null}:!e||e.length<3?{content:`I'm not sure I understand. Could you please provide more details about what you'd like to do?

For example, you can ask me to:
 "Send 10 XRP to an address"
 "Buy some tokens"
 "Check my balance"
 "Show my address book"
 "What are the top tokens?"

What would you like help with?`,data:null}:{content:`I'm not sure what you're asking for. I can help you with:

 Wallet Operations: Check balance, send/receive XRP and tokens
 Trading: Buy and sell tokens from the platform
 Address Book: Manage saved contacts for easy sending
 Market Data: View prices, volumes, and analytics
 Trading Bots: Create automated trading strategies

Note: I cannot create tokens or access admin functions.

Try one of these:`,data:{quickActions:["Check my balance","Send XRP","Send custom token","Buy token","Sell token","Show address book"].map(s=>({label:s,onClick:()=>{const i=new CustomEvent("sendAIMessage",{detail:s});window.dispatchEvent(i)}}))}}}}function B9(){const[t,e]=M.useState([]),[n,r]=M.useState(!1),[s,i]=M.useState(null),a=M.useRef(null),l=M.useRef(new F9);M.useEffect(()=>{u(),d();const _=m=>{p(m.detail)};return window.addEventListener("sendAIMessage",_),()=>{window.removeEventListener("sendAIMessage",_)}},[]),M.useEffect(()=>{c()},[t]);const c=()=>{var _;(_=a.current)==null||_.scrollIntoView({behavior:"smooth"})},u=()=>{const _=localStorage.getItem("ai_chat_session");if(_)i(_);else{const m=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;i(m),localStorage.setItem("ai_chat_session",m)}},d=async()=>{try{const{data:_,error:m}=await Ae.from("ai_chat_messages").select("*").order("created_at",{ascending:!0}).limit(50);if(m)throw m;_&&_.length>0?e(_.map(x=>({id:x.id,role:x.role,content:x.content,timestamp:new Date(x.created_at),data:x.metadata}))):h()}catch(_){console.error("Error loading chat history:",_),h()}},h=()=>{const _={id:`welcome_${Date.now()}`,role:"assistant",content:`Hello! I'm your advanced XRPL AI assistant. I can help you with:

 Check wallet balances and transactions
 Send and receive tokens
 Get token information and prices
 Execute trades and swaps
 Create and manage tokens
 Analyze market data
 Navigate the platform
 And 100+ more commands!

How can I assist you today?`,timestamp:new Date,data:null};e([_])},f=async _=>{try{await Ae.from("ai_chat_messages").insert({session_id:s,role:_.role,content:_.content,metadata:_.data||null})}catch(m){console.error("Error saving message:",m)}},p=async _=>{const m={id:`user_${Date.now()}`,role:"user",content:_,timestamp:new Date,data:null};e(x=>[...x,m]),await f(m),r(!0);try{const x=await l.current.processMessage(_),w={id:`assistant_${Date.now()}`,role:"assistant",content:x.content,timestamp:new Date,data:x.data||null};e(v=>[...v,w]),await f(w)}catch(x){console.error("Error processing message:",x);const w={id:`error_${Date.now()}`,role:"assistant",content:"I apologize, but I encountered an error processing your request. Please try again.",timestamp:new Date,data:null};e(v=>[...v,w])}finally{r(!1)}},y=async()=>{if(window.confirm("Are you sure you want to clear the chat history?"))try{await Ae.from("ai_chat_messages").delete().eq("session_id",s),e([]),h(),ge.success("Chat history cleared")}catch(_){console.error("Error clearing chat:",_),ge.error("Failed to clear chat history")}},b=()=>{const _=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;i(_),localStorage.setItem("ai_chat_session",_),e([]),h(),ge.success("New chat session started")};return o.jsxs("div",{className:"flex flex-col",style:{height:"calc(100vh - 140px)"},children:[o.jsx("div",{className:"glass rounded-t-xl p-4 sm:p-6 border-b border-purple-500/20 flex-shrink-0",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-blue-600 rounded-lg flex items-center justify-center animate-pulse",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-white",children:"AI Chat Assistant"}),o.jsx("p",{className:"text-purple-300/80 text-sm",children:"Your intelligent XRPL companion"})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:b,className:"px-3 py-2 bg-purple-600/20 hover:bg-purple-600/30 text-purple-300 rounded-lg transition-all duration-200 text-sm border border-purple-500/30 hover:scale-105",children:"New Chat"}),o.jsx("button",{onClick:y,className:"px-3 py-2 bg-red-600/20 hover:bg-red-600/30 text-red-300 rounded-lg transition-all duration-200 text-sm border border-red-500/30 hover:scale-105",children:"Clear"})]})]})}),o.jsx("div",{className:"flex-1 glass p-4 sm:p-6 overflow-y-auto",style:{minHeight:0},children:o.jsxs("div",{className:"space-y-4",children:[t.map((_,m)=>o.jsx("div",{className:"animate-fadeInUp",style:{animationDelay:`${m*50}ms`},children:o.jsx(I9,{message:_})},_.id)),n&&o.jsxs("div",{className:"flex items-start gap-3 animate-fadeInUp",children:[o.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-blue-600 rounded-full flex items-center justify-center flex-shrink-0 animate-pulse",children:o.jsx("span",{className:"text-sm",children:""})}),o.jsx("div",{className:"flex-1 bg-purple-900/30 rounded-lg p-4 border border-purple-500/20",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),o.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),o.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),o.jsx("div",{ref:a})]})}),o.jsx("div",{className:"glass rounded-b-xl p-4 border-t border-purple-500/20 flex-shrink-0",children:o.jsx(D9,{onSend:p,disabled:n})})]})}function $9(){const[t,e]=M.useState("dashboard"),[n,r]=M.useState(null);M.useEffect(()=>{const i=l=>{e("trade"),l.detail&&r(l.detail)},a=l=>{e(l.detail),l.detail!=="trade"&&r(null)};return window.addEventListener("navigateToTrade",i),window.addEventListener("navigateToPage",a),()=>{window.removeEventListener("navigateToTrade",i),window.removeEventListener("navigateToPage",a)}},[]);const s=()=>{switch(t){case"dashboard":return o.jsx(ES,{});case"memes":return o.jsx(XW,{});case"pools":return o.jsx(WW,{});case"trade":return o.jsx(GW,{preselectedToken:n});case"bottrader":return o.jsx(QW,{});case"vault":return o.jsx(t9,{});case"mytokens":return o.jsx(y9,{});case"analytics":return o.jsx(v9,{});case"top10":return o.jsx(w9,{});case"about":return o.jsx(b9,{});case"wallets":return o.jsx(_9,{});case"setup":return o.jsx(E9,{});case"aichat":return o.jsx(B9,{});default:return o.jsx(ES,{})}};return o.jsxs("div",{className:"min-h-screen",children:[o.jsx(G2,{position:"top-right",toastOptions:{style:{background:"rgba(88, 28, 135, 0.9)",color:"#e9d5ff",border:"1px solid rgba(139, 92, 246, 0.3)",backdropFilter:"blur(10px)"},success:{iconTheme:{primary:"#a78bfa",secondary:"#581c87"}},error:{iconTheme:{primary:"#f87171",secondary:"#581c87"}}}}),o.jsx(g8,{currentPage:t,onNavigate:e}),o.jsx("div",{className:"lg:ml-64 pt-20 lg:pt-6 p-4 sm:p-6 lg:p-8",children:o.jsx("div",{className:"w-full mx-auto",children:s()})})]})}Gg.createRoot(document.getElementById("root")).render(o.jsxs(Mc.StrictMode,{children:[o.jsx($9,{}),o.jsx(G2,{position:"bottom-right",toastOptions:{duration:5e3,style:{background:"#1e1b4b",color:"#e9d5ff",border:"1px solid #7c3aed"},success:{iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{duration:8e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]}));
