(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var ge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Uj(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function $j(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var ES={exports:{}},Uf={},SS={exports:{}},it={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zu=Symbol.for("react.element"),Vj=Symbol.for("react.portal"),zj=Symbol.for("react.fragment"),Hj=Symbol.for("react.strict_mode"),Wj=Symbol.for("react.profiler"),Xj=Symbol.for("react.provider"),Kj=Symbol.for("react.context"),qj=Symbol.for("react.forward_ref"),Gj=Symbol.for("react.suspense"),Yj=Symbol.for("react.memo"),Jj=Symbol.for("react.lazy"),Kw=Symbol.iterator;function Qj(t){return t===null||typeof t!="object"?null:(t=Kw&&t[Kw]||t["@@iterator"],typeof t=="function"?t:null)}var NS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},TS=Object.assign,AS={};function Xl(t,e,n){this.props=t,this.context=e,this.refs=AS,this.updater=n||NS}Xl.prototype.isReactComponent={};Xl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function CS(){}CS.prototype=Xl.prototype;function Lv(t,e,n){this.props=t,this.context=e,this.refs=AS,this.updater=n||NS}var Mv=Lv.prototype=new CS;Mv.constructor=Lv;TS(Mv,Xl.prototype);Mv.isPureReactComponent=!0;var qw=Array.isArray,jS=Object.prototype.hasOwnProperty,Dv={current:null},kS={key:!0,ref:!0,__self:!0,__source:!0};function OS(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)jS.call(e,r)&&!kS.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:zu,type:t,key:i,ref:a,props:s,_owner:Dv.current}}function Zj(t,e){return{$$typeof:zu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Bv(t){return typeof t=="object"&&t!==null&&t.$$typeof===zu}function ek(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Gw=/\/+/g;function Hm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ek(""+t.key):e.toString(36)}function Th(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case zu:case Vj:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Hm(a,0):r,qw(s)?(n="",t!=null&&(n=t.replace(Gw,"$&/")+"/"),Th(s,e,n,"",function(u){return u})):s!=null&&(Bv(s)&&(s=Zj(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Gw,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",qw(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Hm(i,l);a+=Th(i,e,n,c,s)}else if(c=Qj(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Hm(i,l++),a+=Th(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function _d(t,e,n){if(t==null)return t;var r=[],s=0;return Th(t,r,"","",function(i){return e.call(n,i,s++)}),r}function tk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var wn={current:null},Ah={transition:null},nk={ReactCurrentDispatcher:wn,ReactCurrentBatchConfig:Ah,ReactCurrentOwner:Dv};function IS(){throw Error("act(...) is not supported in production builds of React.")}it.Children={map:_d,forEach:function(t,e,n){_d(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return _d(t,function(){e++}),e},toArray:function(t){return _d(t,function(e){return e})||[]},only:function(t){if(!Bv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};it.Component=Xl;it.Fragment=zj;it.Profiler=Wj;it.PureComponent=Lv;it.StrictMode=Hj;it.Suspense=Gj;it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nk;it.act=IS;it.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=TS({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Dv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)jS.call(e,c)&&!kS.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:zu,type:t.type,key:s,ref:i,props:r,_owner:a}};it.createContext=function(t){return t={$$typeof:Kj,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Xj,_context:t},t.Consumer=t};it.createElement=OS;it.createFactory=function(t){var e=OS.bind(null,t);return e.type=t,e};it.createRef=function(){return{current:null}};it.forwardRef=function(t){return{$$typeof:qj,render:t}};it.isValidElement=Bv;it.lazy=function(t){return{$$typeof:Jj,_payload:{_status:-1,_result:t},_init:tk}};it.memo=function(t,e){return{$$typeof:Yj,type:t,compare:e===void 0?null:e}};it.startTransition=function(t){var e=Ah.transition;Ah.transition={};try{t()}finally{Ah.transition=e}};it.unstable_act=IS;it.useCallback=function(t,e){return wn.current.useCallback(t,e)};it.useContext=function(t){return wn.current.useContext(t)};it.useDebugValue=function(){};it.useDeferredValue=function(t){return wn.current.useDeferredValue(t)};it.useEffect=function(t,e){return wn.current.useEffect(t,e)};it.useId=function(){return wn.current.useId()};it.useImperativeHandle=function(t,e,n){return wn.current.useImperativeHandle(t,e,n)};it.useInsertionEffect=function(t,e){return wn.current.useInsertionEffect(t,e)};it.useLayoutEffect=function(t,e){return wn.current.useLayoutEffect(t,e)};it.useMemo=function(t,e){return wn.current.useMemo(t,e)};it.useReducer=function(t,e,n){return wn.current.useReducer(t,e,n)};it.useRef=function(t){return wn.current.useRef(t)};it.useState=function(t){return wn.current.useState(t)};it.useSyncExternalStore=function(t,e,n){return wn.current.useSyncExternalStore(t,e,n)};it.useTransition=function(){return wn.current.useTransition()};it.version="18.3.1";SS.exports=it;var z=SS.exports;const rk=Uj(z);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sk=z,ik=Symbol.for("react.element"),ok=Symbol.for("react.fragment"),ak=Object.prototype.hasOwnProperty,lk=sk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ck={key:!0,ref:!0,__self:!0,__source:!0};function PS(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)ak.call(e,r)&&!ck.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:ik,type:t,key:i,ref:a,props:s,_owner:lk.current}}Uf.Fragment=ok;Uf.jsx=PS;Uf.jsxs=PS;ES.exports=Uf;var o=ES.exports,zg={},RS={exports:{}},er={},LS={exports:{}},MS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,k){var R=F.length;F.push(k);e:for(;0<R;){var D=R-1>>>1,V=F[D];if(0<s(V,k))F[D]=k,F[R]=V,R=D;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var k=F[0],R=F.pop();if(R!==k){F[0]=R;e:for(var D=0,V=F.length,se=V>>>1;D<se;){var X=2*(D+1)-1,q=F[X],Z=X+1,ue=F[Z];if(0>s(q,R))Z<V&&0>s(ue,q)?(F[D]=ue,F[Z]=R,D=Z):(F[D]=q,F[X]=R,D=X);else if(Z<V&&0>s(ue,R))F[D]=ue,F[Z]=R,D=Z;else break e}}return k}function s(F,k){var R=F.sortIndex-k.sortIndex;return R!==0?R:F.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,_=!1,S=!1,j=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(F){for(var k=n(u);k!==null;){if(k.callback===null)r(u);else if(k.startTime<=F)r(u),k.sortIndex=k.expirationTime,e(c,k);else break;k=n(u)}}function v(F){if(S=!1,b(F),!_)if(n(c)!==null)_=!0,$(A);else{var k=n(u);k!==null&&re(v,k.startTime-F)}}function A(F,k){_=!1,S&&(S=!1,y(Y),Y=-1),m=!0;var R=f;try{for(b(k),h=n(c);h!==null&&(!(h.expirationTime>k)||F&&!G());){var D=h.callback;if(typeof D=="function"){h.callback=null,f=h.priorityLevel;var V=D(h.expirationTime<=k);k=t.unstable_now(),typeof V=="function"?h.callback=V:h===n(c)&&r(c),b(k)}else r(c);h=n(c)}if(h!==null)var se=!0;else{var X=n(u);X!==null&&re(v,X.startTime-k),se=!1}return se}finally{h=null,f=R,m=!1}}var E=!1,L=null,Y=-1,ee=5,U=-1;function G(){return!(t.unstable_now()-U<ee)}function ae(){if(L!==null){var F=t.unstable_now();U=F;var k=!0;try{k=L(!0,F)}finally{k?he():(E=!1,L=null)}}else E=!1}var he;if(typeof x=="function")he=function(){x(ae)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,de=xe.port2;xe.port1.onmessage=ae,he=function(){de.postMessage(null)}}else he=function(){j(ae,0)};function $(F){L=F,E||(E=!0,he())}function re(F,k){Y=j(function(){F(t.unstable_now())},k)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){_||m||(_=!0,$(A))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(F){switch(f){case 1:case 2:case 3:var k=3;break;default:k=f}var R=f;f=k;try{return F()}finally{f=R}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,k){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var R=f;f=F;try{return k()}finally{f=R}},t.unstable_scheduleCallback=function(F,k,R){var D=t.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?D+R:D):R=D,F){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=R+V,F={id:d++,callback:k,priorityLevel:F,startTime:R,expirationTime:V,sortIndex:-1},R>D?(F.sortIndex=R,e(u,F),n(c)===null&&F===n(u)&&(S?(y(Y),Y=-1):S=!0,re(v,R-D))):(F.sortIndex=V,e(c,F),_||m||(_=!0,$(A))),F},t.unstable_shouldYield=G,t.unstable_wrapCallback=function(F){var k=f;return function(){var R=f;f=k;try{return F.apply(this,arguments)}finally{f=R}}}})(MS);LS.exports=MS;var uk=LS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dk=z,Zn=uk;function Ne(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var DS=new Set,hu={};function Sa(t,e){kl(t,e),kl(t+"Capture",e)}function kl(t,e){for(hu[t]=e,t=0;t<e.length;t++)DS.add(e[t])}var Ks=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hg=Object.prototype.hasOwnProperty,hk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yw={},Jw={};function fk(t){return Hg.call(Jw,t)?!0:Hg.call(Yw,t)?!1:hk.test(t)?Jw[t]=!0:(Yw[t]=!0,!1)}function pk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function mk(t,e,n,r){if(e===null||typeof e>"u"||pk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bn(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var tn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){tn[t]=new bn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];tn[e]=new bn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){tn[t]=new bn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){tn[t]=new bn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){tn[t]=new bn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){tn[t]=new bn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){tn[t]=new bn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){tn[t]=new bn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){tn[t]=new bn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Fv=/[\-:]([a-z])/g;function Uv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Fv,Uv);tn[e]=new bn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Fv,Uv);tn[e]=new bn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Fv,Uv);tn[e]=new bn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){tn[t]=new bn(t,1,!1,t.toLowerCase(),null,!1,!1)});tn.xlinkHref=new bn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){tn[t]=new bn(t,1,!1,t.toLowerCase(),null,!0,!0)});function $v(t,e,n,r){var s=tn.hasOwnProperty(e)?tn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(mk(e,n,s,r)&&(n=null),r||s===null?fk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Zs=dk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ed=Symbol.for("react.element"),il=Symbol.for("react.portal"),ol=Symbol.for("react.fragment"),Vv=Symbol.for("react.strict_mode"),Wg=Symbol.for("react.profiler"),BS=Symbol.for("react.provider"),FS=Symbol.for("react.context"),zv=Symbol.for("react.forward_ref"),Xg=Symbol.for("react.suspense"),Kg=Symbol.for("react.suspense_list"),Hv=Symbol.for("react.memo"),bi=Symbol.for("react.lazy"),US=Symbol.for("react.offscreen"),Qw=Symbol.iterator;function cc(t){return t===null||typeof t!="object"?null:(t=Qw&&t[Qw]||t["@@iterator"],typeof t=="function"?t:null)}var Tt=Object.assign,Wm;function Rc(t){if(Wm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Wm=e&&e[1]||""}return`
`+Wm+t}var Xm=!1;function Km(t,e){if(!t||Xm)return"";Xm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{Xm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Rc(t):""}function gk(t){switch(t.tag){case 5:return Rc(t.type);case 16:return Rc("Lazy");case 13:return Rc("Suspense");case 19:return Rc("SuspenseList");case 0:case 2:case 15:return t=Km(t.type,!1),t;case 11:return t=Km(t.type.render,!1),t;case 1:return t=Km(t.type,!0),t;default:return""}}function qg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ol:return"Fragment";case il:return"Portal";case Wg:return"Profiler";case Vv:return"StrictMode";case Xg:return"Suspense";case Kg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case FS:return(t.displayName||"Context")+".Consumer";case BS:return(t._context.displayName||"Context")+".Provider";case zv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Hv:return e=t.displayName||null,e!==null?e:qg(t.type)||"Memo";case bi:e=t._payload,t=t._init;try{return qg(t(e))}catch{}}return null}function yk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qg(e);case 8:return e===Vv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function $S(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vk(t){var e=$S(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Sd(t){t._valueTracker||(t._valueTracker=vk(t))}function VS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=$S(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function qh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Gg(t,e){var n=e.checked;return Tt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Zw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=qi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function zS(t,e){e=e.checked,e!=null&&$v(t,"checked",e,!1)}function Yg(t,e){zS(t,e);var n=qi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Jg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Jg(t,e.type,qi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function eb(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Jg(t,e,n){(e!=="number"||qh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Lc=Array.isArray;function wl(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+qi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Qg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ne(91));return Tt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function tb(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ne(92));if(Lc(n)){if(1<n.length)throw Error(Ne(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:qi(n)}}function HS(t,e){var n=qi(e.value),r=qi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function nb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function WS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?WS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Nd,XS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Nd=Nd||document.createElement("div"),Nd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Nd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function fu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var zc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xk=["Webkit","ms","Moz","O"];Object.keys(zc).forEach(function(t){xk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),zc[e]=zc[t]})});function KS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||zc.hasOwnProperty(t)&&zc[t]?(""+e).trim():e+"px"}function qS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=KS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var wk=Tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ey(t,e){if(e){if(wk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ne(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ne(62))}}function ty(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ny=null;function Wv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ry=null,bl=null,_l=null;function rb(t){if(t=Xu(t)){if(typeof ry!="function")throw Error(Ne(280));var e=t.stateNode;e&&(e=Wf(e),ry(t.stateNode,t.type,e))}}function GS(t){bl?_l?_l.push(t):_l=[t]:bl=t}function YS(){if(bl){var t=bl,e=_l;if(_l=bl=null,rb(t),e)for(t=0;t<e.length;t++)rb(e[t])}}function JS(t,e){return t(e)}function QS(){}var qm=!1;function ZS(t,e,n){if(qm)return t(e,n);qm=!0;try{return JS(t,e,n)}finally{qm=!1,(bl!==null||_l!==null)&&(QS(),YS())}}function pu(t,e){var n=t.stateNode;if(n===null)return null;var r=Wf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ne(231,e,typeof n));return n}var sy=!1;if(Ks)try{var uc={};Object.defineProperty(uc,"passive",{get:function(){sy=!0}}),window.addEventListener("test",uc,uc),window.removeEventListener("test",uc,uc)}catch{sy=!1}function bk(t,e,n,r,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Hc=!1,Gh=null,Yh=!1,iy=null,_k={onError:function(t){Hc=!0,Gh=t}};function Ek(t,e,n,r,s,i,a,l,c){Hc=!1,Gh=null,bk.apply(_k,arguments)}function Sk(t,e,n,r,s,i,a,l,c){if(Ek.apply(this,arguments),Hc){if(Hc){var u=Gh;Hc=!1,Gh=null}else throw Error(Ne(198));Yh||(Yh=!0,iy=u)}}function Na(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function eN(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function sb(t){if(Na(t)!==t)throw Error(Ne(188))}function Nk(t){var e=t.alternate;if(!e){if(e=Na(t),e===null)throw Error(Ne(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return sb(s),t;if(i===r)return sb(s),e;i=i.sibling}throw Error(Ne(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(Ne(189))}}if(n.alternate!==r)throw Error(Ne(190))}if(n.tag!==3)throw Error(Ne(188));return n.stateNode.current===n?t:e}function tN(t){return t=Nk(t),t!==null?nN(t):null}function nN(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=nN(t);if(e!==null)return e;t=t.sibling}return null}var rN=Zn.unstable_scheduleCallback,ib=Zn.unstable_cancelCallback,Tk=Zn.unstable_shouldYield,Ak=Zn.unstable_requestPaint,It=Zn.unstable_now,Ck=Zn.unstable_getCurrentPriorityLevel,Xv=Zn.unstable_ImmediatePriority,sN=Zn.unstable_UserBlockingPriority,Jh=Zn.unstable_NormalPriority,jk=Zn.unstable_LowPriority,iN=Zn.unstable_IdlePriority,$f=null,ys=null;function kk(t){if(ys&&typeof ys.onCommitFiberRoot=="function")try{ys.onCommitFiberRoot($f,t,void 0,(t.current.flags&128)===128)}catch{}}var Vr=Math.clz32?Math.clz32:Pk,Ok=Math.log,Ik=Math.LN2;function Pk(t){return t>>>=0,t===0?32:31-(Ok(t)/Ik|0)|0}var Td=64,Ad=4194304;function Mc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Qh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=Mc(l):(i&=a,i!==0&&(r=Mc(i)))}else a=n&~s,a!==0?r=Mc(a):i!==0&&(r=Mc(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Vr(e),s=1<<n,r|=t[n],e&=~s;return r}function Rk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Vr(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=Rk(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function oy(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function oN(){var t=Td;return Td<<=1,!(Td&4194240)&&(Td=64),t}function Gm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Hu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vr(e),t[e]=n}function Mk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Vr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Kv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Vr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ht=0;function aN(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var lN,qv,cN,uN,dN,ay=!1,Cd=[],Ri=null,Li=null,Mi=null,mu=new Map,gu=new Map,Ni=[],Dk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ob(t,e){switch(t){case"focusin":case"focusout":Ri=null;break;case"dragenter":case"dragleave":Li=null;break;case"mouseover":case"mouseout":Mi=null;break;case"pointerover":case"pointerout":mu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":gu.delete(e.pointerId)}}function dc(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Xu(e),e!==null&&qv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Bk(t,e,n,r,s){switch(e){case"focusin":return Ri=dc(Ri,t,e,n,r,s),!0;case"dragenter":return Li=dc(Li,t,e,n,r,s),!0;case"mouseover":return Mi=dc(Mi,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return mu.set(i,dc(mu.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,gu.set(i,dc(gu.get(i)||null,t,e,n,r,s)),!0}return!1}function hN(t){var e=Ko(t.target);if(e!==null){var n=Na(e);if(n!==null){if(e=n.tag,e===13){if(e=eN(n),e!==null){t.blockedOn=e,dN(t.priority,function(){cN(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ch(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ly(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ny=r,n.target.dispatchEvent(r),ny=null}else return e=Xu(n),e!==null&&qv(e),t.blockedOn=n,!1;e.shift()}return!0}function ab(t,e,n){Ch(t)&&n.delete(e)}function Fk(){ay=!1,Ri!==null&&Ch(Ri)&&(Ri=null),Li!==null&&Ch(Li)&&(Li=null),Mi!==null&&Ch(Mi)&&(Mi=null),mu.forEach(ab),gu.forEach(ab)}function hc(t,e){t.blockedOn===e&&(t.blockedOn=null,ay||(ay=!0,Zn.unstable_scheduleCallback(Zn.unstable_NormalPriority,Fk)))}function yu(t){function e(s){return hc(s,t)}if(0<Cd.length){hc(Cd[0],t);for(var n=1;n<Cd.length;n++){var r=Cd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ri!==null&&hc(Ri,t),Li!==null&&hc(Li,t),Mi!==null&&hc(Mi,t),mu.forEach(e),gu.forEach(e),n=0;n<Ni.length;n++)r=Ni[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ni.length&&(n=Ni[0],n.blockedOn===null);)hN(n),n.blockedOn===null&&Ni.shift()}var El=Zs.ReactCurrentBatchConfig,Zh=!0;function Uk(t,e,n,r){var s=ht,i=El.transition;El.transition=null;try{ht=1,Gv(t,e,n,r)}finally{ht=s,El.transition=i}}function $k(t,e,n,r){var s=ht,i=El.transition;El.transition=null;try{ht=4,Gv(t,e,n,r)}finally{ht=s,El.transition=i}}function Gv(t,e,n,r){if(Zh){var s=ly(t,e,n,r);if(s===null)i0(t,e,r,ef,n),ob(t,r);else if(Bk(s,t,e,n,r))r.stopPropagation();else if(ob(t,r),e&4&&-1<Dk.indexOf(t)){for(;s!==null;){var i=Xu(s);if(i!==null&&lN(i),i=ly(t,e,n,r),i===null&&i0(t,e,r,ef,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else i0(t,e,r,null,n)}}var ef=null;function ly(t,e,n,r){if(ef=null,t=Wv(r),t=Ko(t),t!==null)if(e=Na(t),e===null)t=null;else if(n=e.tag,n===13){if(t=eN(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ef=t,null}function fN(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ck()){case Xv:return 1;case sN:return 4;case Jh:case jk:return 16;case iN:return 536870912;default:return 16}default:return 16}}var Ii=null,Yv=null,jh=null;function pN(){if(jh)return jh;var t,e=Yv,n=e.length,r,s="value"in Ii?Ii.value:Ii.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return jh=s.slice(t,1<r?1-r:void 0)}function kh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jd(){return!0}function lb(){return!1}function tr(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?jd:lb,this.isPropagationStopped=lb,this}return Tt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jd)},persist:function(){},isPersistent:jd}),e}var Kl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jv=tr(Kl),Wu=Tt({},Kl,{view:0,detail:0}),Vk=tr(Wu),Ym,Jm,fc,Vf=Tt({},Wu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fc&&(fc&&t.type==="mousemove"?(Ym=t.screenX-fc.screenX,Jm=t.screenY-fc.screenY):Jm=Ym=0,fc=t),Ym)},movementY:function(t){return"movementY"in t?t.movementY:Jm}}),cb=tr(Vf),zk=Tt({},Vf,{dataTransfer:0}),Hk=tr(zk),Wk=Tt({},Wu,{relatedTarget:0}),Qm=tr(Wk),Xk=Tt({},Kl,{animationName:0,elapsedTime:0,pseudoElement:0}),Kk=tr(Xk),qk=Tt({},Kl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Gk=tr(qk),Yk=Tt({},Kl,{data:0}),ub=tr(Yk),Jk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eO(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Zk[t])?!!e[t]:!1}function Qv(){return eO}var tO=Tt({},Wu,{key:function(t){if(t.key){var e=Jk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=kh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Qk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qv,charCode:function(t){return t.type==="keypress"?kh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?kh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),nO=tr(tO),rO=Tt({},Vf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),db=tr(rO),sO=Tt({},Wu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qv}),iO=tr(sO),oO=Tt({},Kl,{propertyName:0,elapsedTime:0,pseudoElement:0}),aO=tr(oO),lO=Tt({},Vf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),cO=tr(lO),uO=[9,13,27,32],Zv=Ks&&"CompositionEvent"in window,Wc=null;Ks&&"documentMode"in document&&(Wc=document.documentMode);var dO=Ks&&"TextEvent"in window&&!Wc,mN=Ks&&(!Zv||Wc&&8<Wc&&11>=Wc),hb=String.fromCharCode(32),fb=!1;function gN(t,e){switch(t){case"keyup":return uO.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yN(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var al=!1;function hO(t,e){switch(t){case"compositionend":return yN(e);case"keypress":return e.which!==32?null:(fb=!0,hb);case"textInput":return t=e.data,t===hb&&fb?null:t;default:return null}}function fO(t,e){if(al)return t==="compositionend"||!Zv&&gN(t,e)?(t=pN(),jh=Yv=Ii=null,al=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mN&&e.locale!=="ko"?null:e.data;default:return null}}var pO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!pO[t.type]:e==="textarea"}function vN(t,e,n,r){GS(r),e=tf(e,"onChange"),0<e.length&&(n=new Jv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xc=null,vu=null;function mO(t){jN(t,0)}function zf(t){var e=ul(t);if(VS(e))return t}function gO(t,e){if(t==="change")return e}var xN=!1;if(Ks){var Zm;if(Ks){var e0="oninput"in document;if(!e0){var mb=document.createElement("div");mb.setAttribute("oninput","return;"),e0=typeof mb.oninput=="function"}Zm=e0}else Zm=!1;xN=Zm&&(!document.documentMode||9<document.documentMode)}function gb(){Xc&&(Xc.detachEvent("onpropertychange",wN),vu=Xc=null)}function wN(t){if(t.propertyName==="value"&&zf(vu)){var e=[];vN(e,vu,t,Wv(t)),ZS(mO,e)}}function yO(t,e,n){t==="focusin"?(gb(),Xc=e,vu=n,Xc.attachEvent("onpropertychange",wN)):t==="focusout"&&gb()}function vO(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zf(vu)}function xO(t,e){if(t==="click")return zf(e)}function wO(t,e){if(t==="input"||t==="change")return zf(e)}function bO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Kr=typeof Object.is=="function"?Object.is:bO;function xu(t,e){if(Kr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Hg.call(e,s)||!Kr(t[s],e[s]))return!1}return!0}function yb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vb(t,e){var n=yb(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=yb(n)}}function bN(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?bN(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function _N(){for(var t=window,e=qh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=qh(t.document)}return e}function ex(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function _O(t){var e=_N(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&bN(n.ownerDocument.documentElement,n)){if(r!==null&&ex(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=vb(n,i);var a=vb(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var EO=Ks&&"documentMode"in document&&11>=document.documentMode,ll=null,cy=null,Kc=null,uy=!1;function xb(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;uy||ll==null||ll!==qh(r)||(r=ll,"selectionStart"in r&&ex(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Kc&&xu(Kc,r)||(Kc=r,r=tf(cy,"onSelect"),0<r.length&&(e=new Jv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ll)))}function kd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var cl={animationend:kd("Animation","AnimationEnd"),animationiteration:kd("Animation","AnimationIteration"),animationstart:kd("Animation","AnimationStart"),transitionend:kd("Transition","TransitionEnd")},t0={},EN={};Ks&&(EN=document.createElement("div").style,"AnimationEvent"in window||(delete cl.animationend.animation,delete cl.animationiteration.animation,delete cl.animationstart.animation),"TransitionEvent"in window||delete cl.transitionend.transition);function Hf(t){if(t0[t])return t0[t];if(!cl[t])return t;var e=cl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in EN)return t0[t]=e[n];return t}var SN=Hf("animationend"),NN=Hf("animationiteration"),TN=Hf("animationstart"),AN=Hf("transitionend"),CN=new Map,wb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function uo(t,e){CN.set(t,e),Sa(e,[t])}for(var n0=0;n0<wb.length;n0++){var r0=wb[n0],SO=r0.toLowerCase(),NO=r0[0].toUpperCase()+r0.slice(1);uo(SO,"on"+NO)}uo(SN,"onAnimationEnd");uo(NN,"onAnimationIteration");uo(TN,"onAnimationStart");uo("dblclick","onDoubleClick");uo("focusin","onFocus");uo("focusout","onBlur");uo(AN,"onTransitionEnd");kl("onMouseEnter",["mouseout","mouseover"]);kl("onMouseLeave",["mouseout","mouseover"]);kl("onPointerEnter",["pointerout","pointerover"]);kl("onPointerLeave",["pointerout","pointerover"]);Sa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Sa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Sa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Sa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Sa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Sa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dc));function bb(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Sk(r,e,void 0,t),t.currentTarget=null}function jN(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;bb(s,l,u),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;bb(s,l,u),i=c}}}if(Yh)throw t=iy,Yh=!1,iy=null,t}function vt(t,e){var n=e[my];n===void 0&&(n=e[my]=new Set);var r=t+"__bubble";n.has(r)||(kN(e,t,2,!1),n.add(r))}function s0(t,e,n){var r=0;e&&(r|=4),kN(n,t,r,e)}var Od="_reactListening"+Math.random().toString(36).slice(2);function wu(t){if(!t[Od]){t[Od]=!0,DS.forEach(function(n){n!=="selectionchange"&&(TO.has(n)||s0(n,!1,t),s0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Od]||(e[Od]=!0,s0("selectionchange",!1,e))}}function kN(t,e,n,r){switch(fN(e)){case 1:var s=Uk;break;case 4:s=$k;break;default:s=Gv}n=s.bind(null,e,n,t),s=void 0,!sy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function i0(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Ko(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}ZS(function(){var u=i,d=Wv(n),h=[];e:{var f=CN.get(t);if(f!==void 0){var m=Jv,_=t;switch(t){case"keypress":if(kh(n)===0)break e;case"keydown":case"keyup":m=nO;break;case"focusin":_="focus",m=Qm;break;case"focusout":_="blur",m=Qm;break;case"beforeblur":case"afterblur":m=Qm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=cb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Hk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=iO;break;case SN:case NN:case TN:m=Kk;break;case AN:m=aO;break;case"scroll":m=Vk;break;case"wheel":m=cO;break;case"copy":case"cut":case"paste":m=Gk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=db}var S=(e&4)!==0,j=!S&&t==="scroll",y=S?f!==null?f+"Capture":null:f;S=[];for(var x=u,b;x!==null;){b=x;var v=b.stateNode;if(b.tag===5&&v!==null&&(b=v,y!==null&&(v=pu(x,y),v!=null&&S.push(bu(x,v,b)))),j)break;x=x.return}0<S.length&&(f=new m(f,_,null,n,d),h.push({event:f,listeners:S}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==ny&&(_=n.relatedTarget||n.fromElement)&&(Ko(_)||_[qs]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(_=n.relatedTarget||n.toElement,m=u,_=_?Ko(_):null,_!==null&&(j=Na(_),_!==j||_.tag!==5&&_.tag!==6)&&(_=null)):(m=null,_=u),m!==_)){if(S=cb,v="onMouseLeave",y="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(S=db,v="onPointerLeave",y="onPointerEnter",x="pointer"),j=m==null?f:ul(m),b=_==null?f:ul(_),f=new S(v,x+"leave",m,n,d),f.target=j,f.relatedTarget=b,v=null,Ko(d)===u&&(S=new S(y,x+"enter",_,n,d),S.target=b,S.relatedTarget=j,v=S),j=v,m&&_)t:{for(S=m,y=_,x=0,b=S;b;b=Ma(b))x++;for(b=0,v=y;v;v=Ma(v))b++;for(;0<x-b;)S=Ma(S),x--;for(;0<b-x;)y=Ma(y),b--;for(;x--;){if(S===y||y!==null&&S===y.alternate)break t;S=Ma(S),y=Ma(y)}S=null}else S=null;m!==null&&_b(h,f,m,S,!1),_!==null&&j!==null&&_b(h,j,_,S,!0)}}e:{if(f=u?ul(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var A=gO;else if(pb(f))if(xN)A=wO;else{A=vO;var E=yO}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(A=xO);if(A&&(A=A(t,u))){vN(h,A,n,d);break e}E&&E(t,f,u),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&Jg(f,"number",f.value)}switch(E=u?ul(u):window,t){case"focusin":(pb(E)||E.contentEditable==="true")&&(ll=E,cy=u,Kc=null);break;case"focusout":Kc=cy=ll=null;break;case"mousedown":uy=!0;break;case"contextmenu":case"mouseup":case"dragend":uy=!1,xb(h,n,d);break;case"selectionchange":if(EO)break;case"keydown":case"keyup":xb(h,n,d)}var L;if(Zv)e:{switch(t){case"compositionstart":var Y="onCompositionStart";break e;case"compositionend":Y="onCompositionEnd";break e;case"compositionupdate":Y="onCompositionUpdate";break e}Y=void 0}else al?gN(t,n)&&(Y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(Y="onCompositionStart");Y&&(mN&&n.locale!=="ko"&&(al||Y!=="onCompositionStart"?Y==="onCompositionEnd"&&al&&(L=pN()):(Ii=d,Yv="value"in Ii?Ii.value:Ii.textContent,al=!0)),E=tf(u,Y),0<E.length&&(Y=new ub(Y,t,null,n,d),h.push({event:Y,listeners:E}),L?Y.data=L:(L=yN(n),L!==null&&(Y.data=L)))),(L=dO?hO(t,n):fO(t,n))&&(u=tf(u,"onBeforeInput"),0<u.length&&(d=new ub("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=L))}jN(h,e)})}function bu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function tf(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=pu(t,n),i!=null&&r.unshift(bu(t,i,s)),i=pu(t,e),i!=null&&r.push(bu(t,i,s))),t=t.return}return r}function Ma(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function _b(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=pu(n,i),c!=null&&a.unshift(bu(n,c,l))):s||(c=pu(n,i),c!=null&&a.push(bu(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var AO=/\r\n?/g,CO=/\u0000|\uFFFD/g;function Eb(t){return(typeof t=="string"?t:""+t).replace(AO,`
`).replace(CO,"")}function Id(t,e,n){if(e=Eb(e),Eb(t)!==e&&n)throw Error(Ne(425))}function nf(){}var dy=null,hy=null;function fy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var py=typeof setTimeout=="function"?setTimeout:void 0,jO=typeof clearTimeout=="function"?clearTimeout:void 0,Sb=typeof Promise=="function"?Promise:void 0,kO=typeof queueMicrotask=="function"?queueMicrotask:typeof Sb<"u"?function(t){return Sb.resolve(null).then(t).catch(OO)}:py;function OO(t){setTimeout(function(){throw t})}function o0(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),yu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);yu(e)}function Di(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Nb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ql=Math.random().toString(36).slice(2),ds="__reactFiber$"+ql,_u="__reactProps$"+ql,qs="__reactContainer$"+ql,my="__reactEvents$"+ql,IO="__reactListeners$"+ql,PO="__reactHandles$"+ql;function Ko(t){var e=t[ds];if(e)return e;for(var n=t.parentNode;n;){if(e=n[qs]||n[ds]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Nb(t);t!==null;){if(n=t[ds])return n;t=Nb(t)}return e}t=n,n=t.parentNode}return null}function Xu(t){return t=t[ds]||t[qs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ul(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ne(33))}function Wf(t){return t[_u]||null}var gy=[],dl=-1;function ho(t){return{current:t}}function wt(t){0>dl||(t.current=gy[dl],gy[dl]=null,dl--)}function yt(t,e){dl++,gy[dl]=t.current,t.current=e}var Gi={},un=ho(Gi),Ln=ho(!1),la=Gi;function Ol(t,e){var n=t.type.contextTypes;if(!n)return Gi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Mn(t){return t=t.childContextTypes,t!=null}function rf(){wt(Ln),wt(un)}function Tb(t,e,n){if(un.current!==Gi)throw Error(Ne(168));yt(un,e),yt(Ln,n)}function ON(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Ne(108,yk(t)||"Unknown",s));return Tt({},n,r)}function sf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Gi,la=un.current,yt(un,t),yt(Ln,Ln.current),!0}function Ab(t,e,n){var r=t.stateNode;if(!r)throw Error(Ne(169));n?(t=ON(t,e,la),r.__reactInternalMemoizedMergedChildContext=t,wt(Ln),wt(un),yt(un,t)):wt(Ln),yt(Ln,n)}var Rs=null,Xf=!1,a0=!1;function IN(t){Rs===null?Rs=[t]:Rs.push(t)}function RO(t){Xf=!0,IN(t)}function fo(){if(!a0&&Rs!==null){a0=!0;var t=0,e=ht;try{var n=Rs;for(ht=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Rs=null,Xf=!1}catch(s){throw Rs!==null&&(Rs=Rs.slice(t+1)),rN(Xv,fo),s}finally{ht=e,a0=!1}}return null}var hl=[],fl=0,of=null,af=0,gr=[],yr=0,ca=null,Ds=1,Bs="";function Uo(t,e){hl[fl++]=af,hl[fl++]=of,of=t,af=e}function PN(t,e,n){gr[yr++]=Ds,gr[yr++]=Bs,gr[yr++]=ca,ca=t;var r=Ds;t=Bs;var s=32-Vr(r)-1;r&=~(1<<s),n+=1;var i=32-Vr(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Ds=1<<32-Vr(e)+s|n<<s|r,Bs=i+t}else Ds=1<<i|n<<s|r,Bs=t}function tx(t){t.return!==null&&(Uo(t,1),PN(t,1,0))}function nx(t){for(;t===of;)of=hl[--fl],hl[fl]=null,af=hl[--fl],hl[fl]=null;for(;t===ca;)ca=gr[--yr],gr[yr]=null,Bs=gr[--yr],gr[yr]=null,Ds=gr[--yr],gr[yr]=null}var Jn=null,Yn=null,bt=!1,Fr=null;function RN(t,e){var n=vr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Cb(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Jn=t,Yn=Di(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Jn=t,Yn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ca!==null?{id:Ds,overflow:Bs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=vr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Jn=t,Yn=null,!0):!1;default:return!1}}function yy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function vy(t){if(bt){var e=Yn;if(e){var n=e;if(!Cb(t,e)){if(yy(t))throw Error(Ne(418));e=Di(n.nextSibling);var r=Jn;e&&Cb(t,e)?RN(r,n):(t.flags=t.flags&-4097|2,bt=!1,Jn=t)}}else{if(yy(t))throw Error(Ne(418));t.flags=t.flags&-4097|2,bt=!1,Jn=t}}}function jb(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Jn=t}function Pd(t){if(t!==Jn)return!1;if(!bt)return jb(t),bt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!fy(t.type,t.memoizedProps)),e&&(e=Yn)){if(yy(t))throw LN(),Error(Ne(418));for(;e;)RN(t,e),e=Di(e.nextSibling)}if(jb(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ne(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Yn=Di(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Yn=null}}else Yn=Jn?Di(t.stateNode.nextSibling):null;return!0}function LN(){for(var t=Yn;t;)t=Di(t.nextSibling)}function Il(){Yn=Jn=null,bt=!1}function rx(t){Fr===null?Fr=[t]:Fr.push(t)}var LO=Zs.ReactCurrentBatchConfig;function pc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ne(309));var r=n.stateNode}if(!r)throw Error(Ne(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(Ne(284));if(!n._owner)throw Error(Ne(290,t))}return t}function Rd(t,e){throw t=Object.prototype.toString.call(e),Error(Ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function kb(t){var e=t._init;return e(t._payload)}function MN(t){function e(y,x){if(t){var b=y.deletions;b===null?(y.deletions=[x],y.flags|=16):b.push(x)}}function n(y,x){if(!t)return null;for(;x!==null;)e(y,x),x=x.sibling;return null}function r(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function s(y,x){return y=$i(y,x),y.index=0,y.sibling=null,y}function i(y,x,b){return y.index=b,t?(b=y.alternate,b!==null?(b=b.index,b<x?(y.flags|=2,x):b):(y.flags|=2,x)):(y.flags|=1048576,x)}function a(y){return t&&y.alternate===null&&(y.flags|=2),y}function l(y,x,b,v){return x===null||x.tag!==6?(x=p0(b,y.mode,v),x.return=y,x):(x=s(x,b),x.return=y,x)}function c(y,x,b,v){var A=b.type;return A===ol?d(y,x,b.props.children,v,b.key):x!==null&&(x.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===bi&&kb(A)===x.type)?(v=s(x,b.props),v.ref=pc(y,x,b),v.return=y,v):(v=Dh(b.type,b.key,b.props,null,y.mode,v),v.ref=pc(y,x,b),v.return=y,v)}function u(y,x,b,v){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=m0(b,y.mode,v),x.return=y,x):(x=s(x,b.children||[]),x.return=y,x)}function d(y,x,b,v,A){return x===null||x.tag!==7?(x=ta(b,y.mode,v,A),x.return=y,x):(x=s(x,b),x.return=y,x)}function h(y,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=p0(""+x,y.mode,b),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ed:return b=Dh(x.type,x.key,x.props,null,y.mode,b),b.ref=pc(y,null,x),b.return=y,b;case il:return x=m0(x,y.mode,b),x.return=y,x;case bi:var v=x._init;return h(y,v(x._payload),b)}if(Lc(x)||cc(x))return x=ta(x,y.mode,b,null),x.return=y,x;Rd(y,x)}return null}function f(y,x,b,v){var A=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return A!==null?null:l(y,x,""+b,v);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ed:return b.key===A?c(y,x,b,v):null;case il:return b.key===A?u(y,x,b,v):null;case bi:return A=b._init,f(y,x,A(b._payload),v)}if(Lc(b)||cc(b))return A!==null?null:d(y,x,b,v,null);Rd(y,b)}return null}function m(y,x,b,v,A){if(typeof v=="string"&&v!==""||typeof v=="number")return y=y.get(b)||null,l(x,y,""+v,A);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ed:return y=y.get(v.key===null?b:v.key)||null,c(x,y,v,A);case il:return y=y.get(v.key===null?b:v.key)||null,u(x,y,v,A);case bi:var E=v._init;return m(y,x,b,E(v._payload),A)}if(Lc(v)||cc(v))return y=y.get(b)||null,d(x,y,v,A,null);Rd(x,v)}return null}function _(y,x,b,v){for(var A=null,E=null,L=x,Y=x=0,ee=null;L!==null&&Y<b.length;Y++){L.index>Y?(ee=L,L=null):ee=L.sibling;var U=f(y,L,b[Y],v);if(U===null){L===null&&(L=ee);break}t&&L&&U.alternate===null&&e(y,L),x=i(U,x,Y),E===null?A=U:E.sibling=U,E=U,L=ee}if(Y===b.length)return n(y,L),bt&&Uo(y,Y),A;if(L===null){for(;Y<b.length;Y++)L=h(y,b[Y],v),L!==null&&(x=i(L,x,Y),E===null?A=L:E.sibling=L,E=L);return bt&&Uo(y,Y),A}for(L=r(y,L);Y<b.length;Y++)ee=m(L,y,Y,b[Y],v),ee!==null&&(t&&ee.alternate!==null&&L.delete(ee.key===null?Y:ee.key),x=i(ee,x,Y),E===null?A=ee:E.sibling=ee,E=ee);return t&&L.forEach(function(G){return e(y,G)}),bt&&Uo(y,Y),A}function S(y,x,b,v){var A=cc(b);if(typeof A!="function")throw Error(Ne(150));if(b=A.call(b),b==null)throw Error(Ne(151));for(var E=A=null,L=x,Y=x=0,ee=null,U=b.next();L!==null&&!U.done;Y++,U=b.next()){L.index>Y?(ee=L,L=null):ee=L.sibling;var G=f(y,L,U.value,v);if(G===null){L===null&&(L=ee);break}t&&L&&G.alternate===null&&e(y,L),x=i(G,x,Y),E===null?A=G:E.sibling=G,E=G,L=ee}if(U.done)return n(y,L),bt&&Uo(y,Y),A;if(L===null){for(;!U.done;Y++,U=b.next())U=h(y,U.value,v),U!==null&&(x=i(U,x,Y),E===null?A=U:E.sibling=U,E=U);return bt&&Uo(y,Y),A}for(L=r(y,L);!U.done;Y++,U=b.next())U=m(L,y,Y,U.value,v),U!==null&&(t&&U.alternate!==null&&L.delete(U.key===null?Y:U.key),x=i(U,x,Y),E===null?A=U:E.sibling=U,E=U);return t&&L.forEach(function(ae){return e(y,ae)}),bt&&Uo(y,Y),A}function j(y,x,b,v){if(typeof b=="object"&&b!==null&&b.type===ol&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Ed:e:{for(var A=b.key,E=x;E!==null;){if(E.key===A){if(A=b.type,A===ol){if(E.tag===7){n(y,E.sibling),x=s(E,b.props.children),x.return=y,y=x;break e}}else if(E.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===bi&&kb(A)===E.type){n(y,E.sibling),x=s(E,b.props),x.ref=pc(y,E,b),x.return=y,y=x;break e}n(y,E);break}else e(y,E);E=E.sibling}b.type===ol?(x=ta(b.props.children,y.mode,v,b.key),x.return=y,y=x):(v=Dh(b.type,b.key,b.props,null,y.mode,v),v.ref=pc(y,x,b),v.return=y,y=v)}return a(y);case il:e:{for(E=b.key;x!==null;){if(x.key===E)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){n(y,x.sibling),x=s(x,b.children||[]),x.return=y,y=x;break e}else{n(y,x);break}else e(y,x);x=x.sibling}x=m0(b,y.mode,v),x.return=y,y=x}return a(y);case bi:return E=b._init,j(y,x,E(b._payload),v)}if(Lc(b))return _(y,x,b,v);if(cc(b))return S(y,x,b,v);Rd(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(n(y,x.sibling),x=s(x,b),x.return=y,y=x):(n(y,x),x=p0(b,y.mode,v),x.return=y,y=x),a(y)):n(y,x)}return j}var Pl=MN(!0),DN=MN(!1),lf=ho(null),cf=null,pl=null,sx=null;function ix(){sx=pl=cf=null}function ox(t){var e=lf.current;wt(lf),t._currentValue=e}function xy(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Sl(t,e){cf=t,sx=pl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rn=!0),t.firstContext=null)}function _r(t){var e=t._currentValue;if(sx!==t)if(t={context:t,memoizedValue:e,next:null},pl===null){if(cf===null)throw Error(Ne(308));pl=t,cf.dependencies={lanes:0,firstContext:t}}else pl=pl.next=t;return e}var qo=null;function ax(t){qo===null?qo=[t]:qo.push(t)}function BN(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,ax(e)):(n.next=s.next,s.next=n),e.interleaved=n,Gs(t,r)}function Gs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var _i=!1;function lx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function FN(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ct&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Gs(t,n)}return s=r.interleaved,s===null?(e.next=e,ax(r)):(e.next=s.next,s.next=e),r.interleaved=e,Gs(t,n)}function Oh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Kv(t,n)}}function Ob(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function uf(t,e,n,r){var s=t.updateQueue;_i=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;a=0,d=u=c=null,l=i;do{var f=l.lane,m=l.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var _=t,S=l;switch(f=e,m=n,S.tag){case 1:if(_=S.payload,typeof _=="function"){h=_.call(m,h,f);break e}h=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=S.payload,f=typeof _=="function"?_.call(m,h,f):_,f==null)break e;h=Tt({},h,f);break e;case 2:_i=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,a|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(1);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);da|=a,t.lanes=a,t.memoizedState=h}}function Ib(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Ne(191,s));s.call(r)}}}var Ku={},vs=ho(Ku),Eu=ho(Ku),Su=ho(Ku);function Go(t){if(t===Ku)throw Error(Ne(174));return t}function cx(t,e){switch(yt(Su,e),yt(Eu,t),yt(vs,Ku),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Zg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Zg(e,t)}wt(vs),yt(vs,e)}function Rl(){wt(vs),wt(Eu),wt(Su)}function UN(t){Go(Su.current);var e=Go(vs.current),n=Zg(e,t.type);e!==n&&(yt(Eu,t),yt(vs,n))}function ux(t){Eu.current===t&&(wt(vs),wt(Eu))}var St=ho(0);function df(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var l0=[];function dx(){for(var t=0;t<l0.length;t++)l0[t]._workInProgressVersionPrimary=null;l0.length=0}var Ih=Zs.ReactCurrentDispatcher,c0=Zs.ReactCurrentBatchConfig,ua=0,Nt=null,Ut=null,Ht=null,hf=!1,qc=!1,Nu=0,MO=0;function rn(){throw Error(Ne(321))}function hx(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Kr(t[n],e[n]))return!1;return!0}function fx(t,e,n,r,s,i){if(ua=i,Nt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ih.current=t===null||t.memoizedState===null?UO:$O,t=n(r,s),qc){i=0;do{if(qc=!1,Nu=0,25<=i)throw Error(Ne(301));i+=1,Ht=Ut=null,e.updateQueue=null,Ih.current=VO,t=n(r,s)}while(qc)}if(Ih.current=ff,e=Ut!==null&&Ut.next!==null,ua=0,Ht=Ut=Nt=null,hf=!1,e)throw Error(Ne(300));return t}function px(){var t=Nu!==0;return Nu=0,t}function ls(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?Nt.memoizedState=Ht=t:Ht=Ht.next=t,Ht}function Er(){if(Ut===null){var t=Nt.alternate;t=t!==null?t.memoizedState:null}else t=Ut.next;var e=Ht===null?Nt.memoizedState:Ht.next;if(e!==null)Ht=e,Ut=t;else{if(t===null)throw Error(Ne(310));Ut=t,t={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},Ht===null?Nt.memoizedState=Ht=t:Ht=Ht.next=t}return Ht}function Tu(t,e){return typeof e=="function"?e(t):e}function u0(t){var e=Er(),n=e.queue;if(n===null)throw Error(Ne(311));n.lastRenderedReducer=t;var r=Ut,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((ua&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,a=r):c=c.next=h,Nt.lanes|=d,da|=d}u=u.next}while(u!==null&&u!==i);c===null?a=r:c.next=l,Kr(r,e.memoizedState)||(Rn=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Nt.lanes|=i,da|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function d0(t){var e=Er(),n=e.queue;if(n===null)throw Error(Ne(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Kr(i,e.memoizedState)||(Rn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function $N(){}function VN(t,e){var n=Nt,r=Er(),s=e(),i=!Kr(r.memoizedState,s);if(i&&(r.memoizedState=s,Rn=!0),r=r.queue,mx(WN.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ht!==null&&Ht.memoizedState.tag&1){if(n.flags|=2048,Au(9,HN.bind(null,n,r,s,e),void 0,null),qt===null)throw Error(Ne(349));ua&30||zN(n,e,s)}return s}function zN(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Nt.updateQueue,e===null?(e={lastEffect:null,stores:null},Nt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function HN(t,e,n,r){e.value=n,e.getSnapshot=r,XN(e)&&KN(t)}function WN(t,e,n){return n(function(){XN(e)&&KN(t)})}function XN(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Kr(t,n)}catch{return!0}}function KN(t){var e=Gs(t,1);e!==null&&zr(e,t,1,-1)}function Pb(t){var e=ls();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tu,lastRenderedState:t},e.queue=t,t=t.dispatch=FO.bind(null,Nt,t),[e.memoizedState,t]}function Au(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Nt.updateQueue,e===null?(e={lastEffect:null,stores:null},Nt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function qN(){return Er().memoizedState}function Ph(t,e,n,r){var s=ls();Nt.flags|=t,s.memoizedState=Au(1|e,n,void 0,r===void 0?null:r)}function Kf(t,e,n,r){var s=Er();r=r===void 0?null:r;var i=void 0;if(Ut!==null){var a=Ut.memoizedState;if(i=a.destroy,r!==null&&hx(r,a.deps)){s.memoizedState=Au(e,n,i,r);return}}Nt.flags|=t,s.memoizedState=Au(1|e,n,i,r)}function Rb(t,e){return Ph(8390656,8,t,e)}function mx(t,e){return Kf(2048,8,t,e)}function GN(t,e){return Kf(4,2,t,e)}function YN(t,e){return Kf(4,4,t,e)}function JN(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function QN(t,e,n){return n=n!=null?n.concat([t]):null,Kf(4,4,JN.bind(null,e,t),n)}function gx(){}function ZN(t,e){var n=Er();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hx(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function eT(t,e){var n=Er();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hx(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function tT(t,e,n){return ua&21?(Kr(n,e)||(n=oN(),Nt.lanes|=n,da|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rn=!0),t.memoizedState=n)}function DO(t,e){var n=ht;ht=n!==0&&4>n?n:4,t(!0);var r=c0.transition;c0.transition={};try{t(!1),e()}finally{ht=n,c0.transition=r}}function nT(){return Er().memoizedState}function BO(t,e,n){var r=Ui(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rT(t))sT(e,n);else if(n=BN(t,e,n,r),n!==null){var s=yn();zr(n,t,r,s),iT(n,e,r)}}function FO(t,e,n){var r=Ui(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rT(t))sT(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Kr(l,a)){var c=e.interleaved;c===null?(s.next=s,ax(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=BN(t,e,s,r),n!==null&&(s=yn(),zr(n,t,r,s),iT(n,e,r))}}function rT(t){var e=t.alternate;return t===Nt||e!==null&&e===Nt}function sT(t,e){qc=hf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function iT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Kv(t,n)}}var ff={readContext:_r,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useInsertionEffect:rn,useLayoutEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useMutableSource:rn,useSyncExternalStore:rn,useId:rn,unstable_isNewReconciler:!1},UO={readContext:_r,useCallback:function(t,e){return ls().memoizedState=[t,e===void 0?null:e],t},useContext:_r,useEffect:Rb,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ph(4194308,4,JN.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ph(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ph(4,2,t,e)},useMemo:function(t,e){var n=ls();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ls();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=BO.bind(null,Nt,t),[r.memoizedState,t]},useRef:function(t){var e=ls();return t={current:t},e.memoizedState=t},useState:Pb,useDebugValue:gx,useDeferredValue:function(t){return ls().memoizedState=t},useTransition:function(){var t=Pb(!1),e=t[0];return t=DO.bind(null,t[1]),ls().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Nt,s=ls();if(bt){if(n===void 0)throw Error(Ne(407));n=n()}else{if(n=e(),qt===null)throw Error(Ne(349));ua&30||zN(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Rb(WN.bind(null,r,i,t),[t]),r.flags|=2048,Au(9,HN.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ls(),e=qt.identifierPrefix;if(bt){var n=Bs,r=Ds;n=(r&~(1<<32-Vr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Nu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=MO++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$O={readContext:_r,useCallback:ZN,useContext:_r,useEffect:mx,useImperativeHandle:QN,useInsertionEffect:GN,useLayoutEffect:YN,useMemo:eT,useReducer:u0,useRef:qN,useState:function(){return u0(Tu)},useDebugValue:gx,useDeferredValue:function(t){var e=Er();return tT(e,Ut.memoizedState,t)},useTransition:function(){var t=u0(Tu)[0],e=Er().memoizedState;return[t,e]},useMutableSource:$N,useSyncExternalStore:VN,useId:nT,unstable_isNewReconciler:!1},VO={readContext:_r,useCallback:ZN,useContext:_r,useEffect:mx,useImperativeHandle:QN,useInsertionEffect:GN,useLayoutEffect:YN,useMemo:eT,useReducer:d0,useRef:qN,useState:function(){return d0(Tu)},useDebugValue:gx,useDeferredValue:function(t){var e=Er();return Ut===null?e.memoizedState=t:tT(e,Ut.memoizedState,t)},useTransition:function(){var t=d0(Tu)[0],e=Er().memoizedState;return[t,e]},useMutableSource:$N,useSyncExternalStore:VN,useId:nT,unstable_isNewReconciler:!1};function Lr(t,e){if(t&&t.defaultProps){e=Tt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function wy(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Tt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var qf={isMounted:function(t){return(t=t._reactInternals)?Na(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=yn(),s=Ui(t),i=Vs(r,s);i.payload=e,n!=null&&(i.callback=n),e=Bi(t,i,s),e!==null&&(zr(e,t,s,r),Oh(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=yn(),s=Ui(t),i=Vs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Bi(t,i,s),e!==null&&(zr(e,t,s,r),Oh(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yn(),r=Ui(t),s=Vs(n,r);s.tag=2,e!=null&&(s.callback=e),e=Bi(t,s,r),e!==null&&(zr(e,t,r,n),Oh(e,t,r))}};function Lb(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!xu(n,r)||!xu(s,i):!0}function oT(t,e,n){var r=!1,s=Gi,i=e.contextType;return typeof i=="object"&&i!==null?i=_r(i):(s=Mn(e)?la:un.current,r=e.contextTypes,i=(r=r!=null)?Ol(t,s):Gi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=qf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Mb(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&qf.enqueueReplaceState(e,e.state,null)}function by(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},lx(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=_r(i):(i=Mn(e)?la:un.current,s.context=Ol(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(wy(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&qf.enqueueReplaceState(s,s.state,null),uf(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ll(t,e){try{var n="",r=e;do n+=gk(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function h0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function _y(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var zO=typeof WeakMap=="function"?WeakMap:Map;function aT(t,e,n){n=Vs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){mf||(mf=!0,Iy=r),_y(t,e)},n}function lT(t,e,n){n=Vs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){_y(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){_y(t,e),typeof r!="function"&&(Fi===null?Fi=new Set([this]):Fi.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Db(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new zO;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=rI.bind(null,t,e,n),e.then(t,t))}function Bb(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Fb(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Vs(-1,1),e.tag=2,Bi(n,e,1))),n.lanes|=1),t)}var HO=Zs.ReactCurrentOwner,Rn=!1;function mn(t,e,n,r){e.child=t===null?DN(e,null,n,r):Pl(e,t.child,n,r)}function Ub(t,e,n,r,s){n=n.render;var i=e.ref;return Sl(e,s),r=fx(t,e,n,r,i,s),n=px(),t!==null&&!Rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ys(t,e,s)):(bt&&n&&tx(e),e.flags|=1,mn(t,e,r,s),e.child)}function $b(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Sx(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,cT(t,e,i,r,s)):(t=Dh(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:xu,n(a,r)&&t.ref===e.ref)return Ys(t,e,s)}return e.flags|=1,t=$i(i,r),t.ref=e.ref,t.return=e,e.child=t}function cT(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(xu(i,r)&&t.ref===e.ref)if(Rn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Rn=!0);else return e.lanes=t.lanes,Ys(t,e,s)}return Ey(t,e,n,r,s)}function uT(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},yt(gl,Wn),Wn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,yt(gl,Wn),Wn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,yt(gl,Wn),Wn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,yt(gl,Wn),Wn|=r;return mn(t,e,s,n),e.child}function dT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ey(t,e,n,r,s){var i=Mn(n)?la:un.current;return i=Ol(e,i),Sl(e,s),n=fx(t,e,n,r,i,s),r=px(),t!==null&&!Rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ys(t,e,s)):(bt&&r&&tx(e),e.flags|=1,mn(t,e,n,s),e.child)}function Vb(t,e,n,r,s){if(Mn(n)){var i=!0;sf(e)}else i=!1;if(Sl(e,s),e.stateNode===null)Rh(t,e),oT(e,n,r),by(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=_r(u):(u=Mn(n)?la:un.current,u=Ol(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Mb(e,a,r,u),_i=!1;var f=e.memoizedState;a.state=f,uf(e,r,a,s),c=e.memoizedState,l!==r||f!==c||Ln.current||_i?(typeof d=="function"&&(wy(e,n,d,r),c=e.memoizedState),(l=_i||Lb(e,n,l,r,f,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,FN(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Lr(e.type,l),a.props=u,h=e.pendingProps,f=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=_r(c):(c=Mn(n)?la:un.current,c=Ol(e,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Mb(e,a,r,c),_i=!1,f=e.memoizedState,a.state=f,uf(e,r,a,s);var _=e.memoizedState;l!==h||f!==_||Ln.current||_i?(typeof m=="function"&&(wy(e,n,m,r),_=e.memoizedState),(u=_i||Lb(e,n,u,r,f,_,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,_,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,_,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),a.props=r,a.state=_,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Sy(t,e,n,r,i,s)}function Sy(t,e,n,r,s,i){dT(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Ab(e,n,!1),Ys(t,e,i);r=e.stateNode,HO.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Pl(e,t.child,null,i),e.child=Pl(e,null,l,i)):mn(t,e,l,i),e.memoizedState=r.state,s&&Ab(e,n,!0),e.child}function hT(t){var e=t.stateNode;e.pendingContext?Tb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Tb(t,e.context,!1),cx(t,e.containerInfo)}function zb(t,e,n,r,s){return Il(),rx(s),e.flags|=256,mn(t,e,n,r),e.child}var Ny={dehydrated:null,treeContext:null,retryLane:0};function Ty(t){return{baseLanes:t,cachePool:null,transitions:null}}function fT(t,e,n){var r=e.pendingProps,s=St.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),yt(St,s&1),t===null)return vy(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Jf(a,r,0,null),t=ta(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ty(n),e.memoizedState=Ny,t):yx(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return WO(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=$i(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=$i(l,i):(i=ta(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Ty(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Ny,r}return i=t.child,t=i.sibling,r=$i(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function yx(t,e){return e=Jf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ld(t,e,n,r){return r!==null&&rx(r),Pl(e,t.child,null,n),t=yx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function WO(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=h0(Error(Ne(422))),Ld(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Jf({mode:"visible",children:r.children},s,0,null),i=ta(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Pl(e,t.child,null,a),e.child.memoizedState=Ty(a),e.memoizedState=Ny,i);if(!(e.mode&1))return Ld(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(Ne(419)),r=h0(i,r,void 0),Ld(t,e,a,r)}if(l=(a&t.childLanes)!==0,Rn||l){if(r=qt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Gs(t,s),zr(r,t,s,-1))}return Ex(),r=h0(Error(Ne(421))),Ld(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=sI.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Yn=Di(s.nextSibling),Jn=e,bt=!0,Fr=null,t!==null&&(gr[yr++]=Ds,gr[yr++]=Bs,gr[yr++]=ca,Ds=t.id,Bs=t.overflow,ca=e),e=yx(e,r.children),e.flags|=4096,e)}function Hb(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),xy(t.return,e,n)}function f0(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function pT(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(mn(t,e,r.children,n),r=St.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Hb(t,n,e);else if(t.tag===19)Hb(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(yt(St,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&df(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),f0(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&df(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}f0(e,!0,n,null,i);break;case"together":f0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Rh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ys(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),da|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ne(153));if(e.child!==null){for(t=e.child,n=$i(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=$i(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function XO(t,e,n){switch(e.tag){case 3:hT(e),Il();break;case 5:UN(e);break;case 1:Mn(e.type)&&sf(e);break;case 4:cx(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;yt(lf,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(yt(St,St.current&1),e.flags|=128,null):n&e.child.childLanes?fT(t,e,n):(yt(St,St.current&1),t=Ys(t,e,n),t!==null?t.sibling:null);yt(St,St.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return pT(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),yt(St,St.current),r)break;return null;case 22:case 23:return e.lanes=0,uT(t,e,n)}return Ys(t,e,n)}var mT,Ay,gT,yT;mT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ay=function(){};gT=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Go(vs.current);var i=null;switch(n){case"input":s=Gg(t,s),r=Gg(t,r),i=[];break;case"select":s=Tt({},s,{value:void 0}),r=Tt({},r,{value:void 0}),i=[];break;case"textarea":s=Qg(t,s),r=Qg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=nf)}ey(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(hu.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(hu.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&vt("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};yT=function(t,e,n,r){n!==r&&(e.flags|=4)};function mc(t,e){if(!bt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function sn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function KO(t,e,n){var r=e.pendingProps;switch(nx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(e),null;case 1:return Mn(e.type)&&rf(),sn(e),null;case 3:return r=e.stateNode,Rl(),wt(Ln),wt(un),dx(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Pd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Fr!==null&&(Ly(Fr),Fr=null))),Ay(t,e),sn(e),null;case 5:ux(e);var s=Go(Su.current);if(n=e.type,t!==null&&e.stateNode!=null)gT(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ne(166));return sn(e),null}if(t=Go(vs.current),Pd(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[ds]=e,r[_u]=i,t=(e.mode&1)!==0,n){case"dialog":vt("cancel",r),vt("close",r);break;case"iframe":case"object":case"embed":vt("load",r);break;case"video":case"audio":for(s=0;s<Dc.length;s++)vt(Dc[s],r);break;case"source":vt("error",r);break;case"img":case"image":case"link":vt("error",r),vt("load",r);break;case"details":vt("toggle",r);break;case"input":Zw(r,i),vt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},vt("invalid",r);break;case"textarea":tb(r,i),vt("invalid",r)}ey(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Id(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Id(r.textContent,l,t),s=["children",""+l]):hu.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&vt("scroll",r)}switch(n){case"input":Sd(r),eb(r,i,!0);break;case"textarea":Sd(r),nb(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=nf)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=WS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[ds]=e,t[_u]=r,mT(t,e,!1,!1),e.stateNode=t;e:{switch(a=ty(n,r),n){case"dialog":vt("cancel",t),vt("close",t),s=r;break;case"iframe":case"object":case"embed":vt("load",t),s=r;break;case"video":case"audio":for(s=0;s<Dc.length;s++)vt(Dc[s],t);s=r;break;case"source":vt("error",t),s=r;break;case"img":case"image":case"link":vt("error",t),vt("load",t),s=r;break;case"details":vt("toggle",t),s=r;break;case"input":Zw(t,r),s=Gg(t,r),vt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Tt({},r,{value:void 0}),vt("invalid",t);break;case"textarea":tb(t,r),s=Qg(t,r),vt("invalid",t);break;default:s=r}ey(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?qS(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&XS(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&fu(t,c):typeof c=="number"&&fu(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(hu.hasOwnProperty(i)?c!=null&&i==="onScroll"&&vt("scroll",t):c!=null&&$v(t,i,c,a))}switch(n){case"input":Sd(t),eb(t,r,!1);break;case"textarea":Sd(t),nb(t);break;case"option":r.value!=null&&t.setAttribute("value",""+qi(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?wl(t,!!r.multiple,i,!1):r.defaultValue!=null&&wl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=nf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return sn(e),null;case 6:if(t&&e.stateNode!=null)yT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ne(166));if(n=Go(Su.current),Go(vs.current),Pd(e)){if(r=e.stateNode,n=e.memoizedProps,r[ds]=e,(i=r.nodeValue!==n)&&(t=Jn,t!==null))switch(t.tag){case 3:Id(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Id(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ds]=e,e.stateNode=r}return sn(e),null;case 13:if(wt(St),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(bt&&Yn!==null&&e.mode&1&&!(e.flags&128))LN(),Il(),e.flags|=98560,i=!1;else if(i=Pd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Ne(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ne(317));i[ds]=e}else Il(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;sn(e),i=!1}else Fr!==null&&(Ly(Fr),Fr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||St.current&1?$t===0&&($t=3):Ex())),e.updateQueue!==null&&(e.flags|=4),sn(e),null);case 4:return Rl(),Ay(t,e),t===null&&wu(e.stateNode.containerInfo),sn(e),null;case 10:return ox(e.type._context),sn(e),null;case 17:return Mn(e.type)&&rf(),sn(e),null;case 19:if(wt(St),i=e.memoizedState,i===null)return sn(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)mc(i,!1);else{if($t!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=df(t),a!==null){for(e.flags|=128,mc(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return yt(St,St.current&1|2),e.child}t=t.sibling}i.tail!==null&&It()>Ml&&(e.flags|=128,r=!0,mc(i,!1),e.lanes=4194304)}else{if(!r)if(t=df(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),mc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!bt)return sn(e),null}else 2*It()-i.renderingStartTime>Ml&&n!==1073741824&&(e.flags|=128,r=!0,mc(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=It(),e.sibling=null,n=St.current,yt(St,r?n&1|2:n&1),e):(sn(e),null);case 22:case 23:return _x(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Wn&1073741824&&(sn(e),e.subtreeFlags&6&&(e.flags|=8192)):sn(e),null;case 24:return null;case 25:return null}throw Error(Ne(156,e.tag))}function qO(t,e){switch(nx(e),e.tag){case 1:return Mn(e.type)&&rf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Rl(),wt(Ln),wt(un),dx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ux(e),null;case 13:if(wt(St),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ne(340));Il()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return wt(St),null;case 4:return Rl(),null;case 10:return ox(e.type._context),null;case 22:case 23:return _x(),null;case 24:return null;default:return null}}var Md=!1,ln=!1,GO=typeof WeakSet=="function"?WeakSet:Set,Be=null;function ml(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){At(t,e,r)}else n.current=null}function Cy(t,e,n){try{n()}catch(r){At(t,e,r)}}var Wb=!1;function YO(t,e){if(dy=Zh,t=_N(),ex(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(l=a+s),h!==i||r!==0&&h.nodeType!==3||(c=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++u===s&&(l=a),f===i&&++d===r&&(c=a),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(hy={focusedElem:t,selectionRange:n},Zh=!1,Be=e;Be!==null;)if(e=Be,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Be=t;else for(;Be!==null;){e=Be;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var S=_.memoizedProps,j=_.memoizedState,y=e.stateNode,x=y.getSnapshotBeforeUpdate(e.elementType===e.type?S:Lr(e.type,S),j);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ne(163))}}catch(v){At(e,e.return,v)}if(t=e.sibling,t!==null){t.return=e.return,Be=t;break}Be=e.return}return _=Wb,Wb=!1,_}function Gc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Cy(e,n,i)}s=s.next}while(s!==r)}}function Gf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function jy(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function vT(t){var e=t.alternate;e!==null&&(t.alternate=null,vT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ds],delete e[_u],delete e[my],delete e[IO],delete e[PO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function xT(t){return t.tag===5||t.tag===3||t.tag===4}function Xb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||xT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ky(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=nf));else if(r!==4&&(t=t.child,t!==null))for(ky(t,e,n),t=t.sibling;t!==null;)ky(t,e,n),t=t.sibling}function Oy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Oy(t,e,n),t=t.sibling;t!==null;)Oy(t,e,n),t=t.sibling}var Jt=null,Mr=!1;function ci(t,e,n){for(n=n.child;n!==null;)wT(t,e,n),n=n.sibling}function wT(t,e,n){if(ys&&typeof ys.onCommitFiberUnmount=="function")try{ys.onCommitFiberUnmount($f,n)}catch{}switch(n.tag){case 5:ln||ml(n,e);case 6:var r=Jt,s=Mr;Jt=null,ci(t,e,n),Jt=r,Mr=s,Jt!==null&&(Mr?(t=Jt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Jt.removeChild(n.stateNode));break;case 18:Jt!==null&&(Mr?(t=Jt,n=n.stateNode,t.nodeType===8?o0(t.parentNode,n):t.nodeType===1&&o0(t,n),yu(t)):o0(Jt,n.stateNode));break;case 4:r=Jt,s=Mr,Jt=n.stateNode.containerInfo,Mr=!0,ci(t,e,n),Jt=r,Mr=s;break;case 0:case 11:case 14:case 15:if(!ln&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Cy(n,e,a),s=s.next}while(s!==r)}ci(t,e,n);break;case 1:if(!ln&&(ml(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){At(n,e,l)}ci(t,e,n);break;case 21:ci(t,e,n);break;case 22:n.mode&1?(ln=(r=ln)||n.memoizedState!==null,ci(t,e,n),ln=r):ci(t,e,n);break;default:ci(t,e,n)}}function Kb(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new GO),e.forEach(function(r){var s=iI.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function jr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Jt=l.stateNode,Mr=!1;break e;case 3:Jt=l.stateNode.containerInfo,Mr=!0;break e;case 4:Jt=l.stateNode.containerInfo,Mr=!0;break e}l=l.return}if(Jt===null)throw Error(Ne(160));wT(i,a,s),Jt=null,Mr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){At(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)bT(e,t),e=e.sibling}function bT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(jr(e,t),Zr(t),r&4){try{Gc(3,t,t.return),Gf(3,t)}catch(S){At(t,t.return,S)}try{Gc(5,t,t.return)}catch(S){At(t,t.return,S)}}break;case 1:jr(e,t),Zr(t),r&512&&n!==null&&ml(n,n.return);break;case 5:if(jr(e,t),Zr(t),r&512&&n!==null&&ml(n,n.return),t.flags&32){var s=t.stateNode;try{fu(s,"")}catch(S){At(t,t.return,S)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&zS(s,i),ty(l,a);var u=ty(l,i);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?qS(s,h):d==="dangerouslySetInnerHTML"?XS(s,h):d==="children"?fu(s,h):$v(s,d,h,u)}switch(l){case"input":Yg(s,i);break;case"textarea":HS(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?wl(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?wl(s,!!i.multiple,i.defaultValue,!0):wl(s,!!i.multiple,i.multiple?[]:"",!1))}s[_u]=i}catch(S){At(t,t.return,S)}}break;case 6:if(jr(e,t),Zr(t),r&4){if(t.stateNode===null)throw Error(Ne(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(S){At(t,t.return,S)}}break;case 3:if(jr(e,t),Zr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{yu(e.containerInfo)}catch(S){At(t,t.return,S)}break;case 4:jr(e,t),Zr(t);break;case 13:jr(e,t),Zr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(wx=It())),r&4&&Kb(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(ln=(u=ln)||d,jr(e,t),ln=u):jr(e,t),Zr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Be=t,d=t.child;d!==null;){for(h=Be=d;Be!==null;){switch(f=Be,m=f.child,f.tag){case 0:case 11:case 14:case 15:Gc(4,f,f.return);break;case 1:ml(f,f.return);var _=f.stateNode;if(typeof _.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(S){At(r,n,S)}}break;case 5:ml(f,f.return);break;case 22:if(f.memoizedState!==null){Gb(h);continue}}m!==null?(m.return=f,Be=m):Gb(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=KS("display",a))}catch(S){At(t,t.return,S)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(S){At(t,t.return,S)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:jr(e,t),Zr(t),r&4&&Kb(t);break;case 21:break;default:jr(e,t),Zr(t)}}function Zr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(xT(n)){var r=n;break e}n=n.return}throw Error(Ne(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(fu(s,""),r.flags&=-33);var i=Xb(t);Oy(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Xb(t);ky(t,l,a);break;default:throw Error(Ne(161))}}catch(c){At(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function JO(t,e,n){Be=t,_T(t)}function _T(t,e,n){for(var r=(t.mode&1)!==0;Be!==null;){var s=Be,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Md;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||ln;l=Md;var u=ln;if(Md=a,(ln=c)&&!u)for(Be=s;Be!==null;)a=Be,c=a.child,a.tag===22&&a.memoizedState!==null?Yb(s):c!==null?(c.return=a,Be=c):Yb(s);for(;i!==null;)Be=i,_T(i),i=i.sibling;Be=s,Md=l,ln=u}qb(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Be=i):qb(t)}}function qb(t){for(;Be!==null;){var e=Be;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ln||Gf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ln)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Lr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Ib(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ib(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&yu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ne(163))}ln||e.flags&512&&jy(e)}catch(f){At(e,e.return,f)}}if(e===t){Be=null;break}if(n=e.sibling,n!==null){n.return=e.return,Be=n;break}Be=e.return}}function Gb(t){for(;Be!==null;){var e=Be;if(e===t){Be=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Be=n;break}Be=e.return}}function Yb(t){for(;Be!==null;){var e=Be;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Gf(4,e)}catch(c){At(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){At(e,s,c)}}var i=e.return;try{jy(e)}catch(c){At(e,i,c)}break;case 5:var a=e.return;try{jy(e)}catch(c){At(e,a,c)}}}catch(c){At(e,e.return,c)}if(e===t){Be=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Be=l;break}Be=e.return}}var QO=Math.ceil,pf=Zs.ReactCurrentDispatcher,vx=Zs.ReactCurrentOwner,wr=Zs.ReactCurrentBatchConfig,ct=0,qt=null,Dt=null,en=0,Wn=0,gl=ho(0),$t=0,Cu=null,da=0,Yf=0,xx=0,Yc=null,kn=null,wx=0,Ml=1/0,Is=null,mf=!1,Iy=null,Fi=null,Dd=!1,Pi=null,gf=0,Jc=0,Py=null,Lh=-1,Mh=0;function yn(){return ct&6?It():Lh!==-1?Lh:Lh=It()}function Ui(t){return t.mode&1?ct&2&&en!==0?en&-en:LO.transition!==null?(Mh===0&&(Mh=oN()),Mh):(t=ht,t!==0||(t=window.event,t=t===void 0?16:fN(t.type)),t):1}function zr(t,e,n,r){if(50<Jc)throw Jc=0,Py=null,Error(Ne(185));Hu(t,n,r),(!(ct&2)||t!==qt)&&(t===qt&&(!(ct&2)&&(Yf|=n),$t===4&&Ti(t,en)),Dn(t,r),n===1&&ct===0&&!(e.mode&1)&&(Ml=It()+500,Xf&&fo()))}function Dn(t,e){var n=t.callbackNode;Lk(t,e);var r=Qh(t,t===qt?en:0);if(r===0)n!==null&&ib(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ib(n),e===1)t.tag===0?RO(Jb.bind(null,t)):IN(Jb.bind(null,t)),kO(function(){!(ct&6)&&fo()}),n=null;else{switch(aN(r)){case 1:n=Xv;break;case 4:n=sN;break;case 16:n=Jh;break;case 536870912:n=iN;break;default:n=Jh}n=kT(n,ET.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ET(t,e){if(Lh=-1,Mh=0,ct&6)throw Error(Ne(327));var n=t.callbackNode;if(Nl()&&t.callbackNode!==n)return null;var r=Qh(t,t===qt?en:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=yf(t,r);else{e=r;var s=ct;ct|=2;var i=NT();(qt!==t||en!==e)&&(Is=null,Ml=It()+500,ea(t,e));do try{tI();break}catch(l){ST(t,l)}while(1);ix(),pf.current=i,ct=s,Dt!==null?e=0:(qt=null,en=0,e=$t)}if(e!==0){if(e===2&&(s=oy(t),s!==0&&(r=s,e=Ry(t,s))),e===1)throw n=Cu,ea(t,0),Ti(t,r),Dn(t,It()),n;if(e===6)Ti(t,r);else{if(s=t.current.alternate,!(r&30)&&!ZO(s)&&(e=yf(t,r),e===2&&(i=oy(t),i!==0&&(r=i,e=Ry(t,i))),e===1))throw n=Cu,ea(t,0),Ti(t,r),Dn(t,It()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Ne(345));case 2:$o(t,kn,Is);break;case 3:if(Ti(t,r),(r&130023424)===r&&(e=wx+500-It(),10<e)){if(Qh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){yn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=py($o.bind(null,t,kn,Is),e);break}$o(t,kn,Is);break;case 4:if(Ti(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Vr(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=It()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*QO(r/1960))-r,10<r){t.timeoutHandle=py($o.bind(null,t,kn,Is),r);break}$o(t,kn,Is);break;case 5:$o(t,kn,Is);break;default:throw Error(Ne(329))}}}return Dn(t,It()),t.callbackNode===n?ET.bind(null,t):null}function Ry(t,e){var n=Yc;return t.current.memoizedState.isDehydrated&&(ea(t,e).flags|=256),t=yf(t,e),t!==2&&(e=kn,kn=n,e!==null&&Ly(e)),t}function Ly(t){kn===null?kn=t:kn.push.apply(kn,t)}function ZO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Kr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ti(t,e){for(e&=~xx,e&=~Yf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Vr(e),r=1<<n;t[n]=-1,e&=~r}}function Jb(t){if(ct&6)throw Error(Ne(327));Nl();var e=Qh(t,0);if(!(e&1))return Dn(t,It()),null;var n=yf(t,e);if(t.tag!==0&&n===2){var r=oy(t);r!==0&&(e=r,n=Ry(t,r))}if(n===1)throw n=Cu,ea(t,0),Ti(t,e),Dn(t,It()),n;if(n===6)throw Error(Ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$o(t,kn,Is),Dn(t,It()),null}function bx(t,e){var n=ct;ct|=1;try{return t(e)}finally{ct=n,ct===0&&(Ml=It()+500,Xf&&fo())}}function ha(t){Pi!==null&&Pi.tag===0&&!(ct&6)&&Nl();var e=ct;ct|=1;var n=wr.transition,r=ht;try{if(wr.transition=null,ht=1,t)return t()}finally{ht=r,wr.transition=n,ct=e,!(ct&6)&&fo()}}function _x(){Wn=gl.current,wt(gl)}function ea(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,jO(n)),Dt!==null)for(n=Dt.return;n!==null;){var r=n;switch(nx(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&rf();break;case 3:Rl(),wt(Ln),wt(un),dx();break;case 5:ux(r);break;case 4:Rl();break;case 13:wt(St);break;case 19:wt(St);break;case 10:ox(r.type._context);break;case 22:case 23:_x()}n=n.return}if(qt=t,Dt=t=$i(t.current,null),en=Wn=e,$t=0,Cu=null,xx=Yf=da=0,kn=Yc=null,qo!==null){for(e=0;e<qo.length;e++)if(n=qo[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}qo=null}return t}function ST(t,e){do{var n=Dt;try{if(ix(),Ih.current=ff,hf){for(var r=Nt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}hf=!1}if(ua=0,Ht=Ut=Nt=null,qc=!1,Nu=0,vx.current=null,n===null||n.return===null){$t=1,Cu=e,Dt=null;break}e:{var i=t,a=n.return,l=n,c=e;if(e=en,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=Bb(a);if(m!==null){m.flags&=-257,Fb(m,a,l,i,e),m.mode&1&&Db(i,u,e),e=m,c=u;var _=e.updateQueue;if(_===null){var S=new Set;S.add(c),e.updateQueue=S}else _.add(c);break e}else{if(!(e&1)){Db(i,u,e),Ex();break e}c=Error(Ne(426))}}else if(bt&&l.mode&1){var j=Bb(a);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Fb(j,a,l,i,e),rx(Ll(c,l));break e}}i=c=Ll(c,l),$t!==4&&($t=2),Yc===null?Yc=[i]:Yc.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=aT(i,c,e);Ob(i,y);break e;case 1:l=c;var x=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Fi===null||!Fi.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var v=lT(i,l,e);Ob(i,v);break e}}i=i.return}while(i!==null)}AT(n)}catch(A){e=A,Dt===n&&n!==null&&(Dt=n=n.return);continue}break}while(1)}function NT(){var t=pf.current;return pf.current=ff,t===null?ff:t}function Ex(){($t===0||$t===3||$t===2)&&($t=4),qt===null||!(da&268435455)&&!(Yf&268435455)||Ti(qt,en)}function yf(t,e){var n=ct;ct|=2;var r=NT();(qt!==t||en!==e)&&(Is=null,ea(t,e));do try{eI();break}catch(s){ST(t,s)}while(1);if(ix(),ct=n,pf.current=r,Dt!==null)throw Error(Ne(261));return qt=null,en=0,$t}function eI(){for(;Dt!==null;)TT(Dt)}function tI(){for(;Dt!==null&&!Tk();)TT(Dt)}function TT(t){var e=jT(t.alternate,t,Wn);t.memoizedProps=t.pendingProps,e===null?AT(t):Dt=e,vx.current=null}function AT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=qO(n,e),n!==null){n.flags&=32767,Dt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$t=6,Dt=null;return}}else if(n=KO(n,e,Wn),n!==null){Dt=n;return}if(e=e.sibling,e!==null){Dt=e;return}Dt=e=t}while(e!==null);$t===0&&($t=5)}function $o(t,e,n){var r=ht,s=wr.transition;try{wr.transition=null,ht=1,nI(t,e,n,r)}finally{wr.transition=s,ht=r}return null}function nI(t,e,n,r){do Nl();while(Pi!==null);if(ct&6)throw Error(Ne(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ne(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Mk(t,i),t===qt&&(Dt=qt=null,en=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dd||(Dd=!0,kT(Jh,function(){return Nl(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=wr.transition,wr.transition=null;var a=ht;ht=1;var l=ct;ct|=4,vx.current=null,YO(t,n),bT(n,t),_O(hy),Zh=!!dy,hy=dy=null,t.current=n,JO(n),Ak(),ct=l,ht=a,wr.transition=i}else t.current=n;if(Dd&&(Dd=!1,Pi=t,gf=s),i=t.pendingLanes,i===0&&(Fi=null),kk(n.stateNode),Dn(t,It()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(mf)throw mf=!1,t=Iy,Iy=null,t;return gf&1&&t.tag!==0&&Nl(),i=t.pendingLanes,i&1?t===Py?Jc++:(Jc=0,Py=t):Jc=0,fo(),null}function Nl(){if(Pi!==null){var t=aN(gf),e=wr.transition,n=ht;try{if(wr.transition=null,ht=16>t?16:t,Pi===null)var r=!1;else{if(t=Pi,Pi=null,gf=0,ct&6)throw Error(Ne(331));var s=ct;for(ct|=4,Be=t.current;Be!==null;){var i=Be,a=i.child;if(Be.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Be=u;Be!==null;){var d=Be;switch(d.tag){case 0:case 11:case 15:Gc(8,d,i)}var h=d.child;if(h!==null)h.return=d,Be=h;else for(;Be!==null;){d=Be;var f=d.sibling,m=d.return;if(vT(d),d===u){Be=null;break}if(f!==null){f.return=m,Be=f;break}Be=m}}}var _=i.alternate;if(_!==null){var S=_.child;if(S!==null){_.child=null;do{var j=S.sibling;S.sibling=null,S=j}while(S!==null)}}Be=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Be=a;else e:for(;Be!==null;){if(i=Be,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Gc(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Be=y;break e}Be=i.return}}var x=t.current;for(Be=x;Be!==null;){a=Be;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,Be=b;else e:for(a=x;Be!==null;){if(l=Be,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Gf(9,l)}}catch(A){At(l,l.return,A)}if(l===a){Be=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,Be=v;break e}Be=l.return}}if(ct=s,fo(),ys&&typeof ys.onPostCommitFiberRoot=="function")try{ys.onPostCommitFiberRoot($f,t)}catch{}r=!0}return r}finally{ht=n,wr.transition=e}}return!1}function Qb(t,e,n){e=Ll(n,e),e=aT(t,e,1),t=Bi(t,e,1),e=yn(),t!==null&&(Hu(t,1,e),Dn(t,e))}function At(t,e,n){if(t.tag===3)Qb(t,t,n);else for(;e!==null;){if(e.tag===3){Qb(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fi===null||!Fi.has(r))){t=Ll(n,t),t=lT(e,t,1),e=Bi(e,t,1),t=yn(),e!==null&&(Hu(e,1,t),Dn(e,t));break}}e=e.return}}function rI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=yn(),t.pingedLanes|=t.suspendedLanes&n,qt===t&&(en&n)===n&&($t===4||$t===3&&(en&130023424)===en&&500>It()-wx?ea(t,0):xx|=n),Dn(t,e)}function CT(t,e){e===0&&(t.mode&1?(e=Ad,Ad<<=1,!(Ad&130023424)&&(Ad=4194304)):e=1);var n=yn();t=Gs(t,e),t!==null&&(Hu(t,e,n),Dn(t,n))}function sI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),CT(t,n)}function iI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ne(314))}r!==null&&r.delete(e),CT(t,n)}var jT;jT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ln.current)Rn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Rn=!1,XO(t,e,n);Rn=!!(t.flags&131072)}else Rn=!1,bt&&e.flags&1048576&&PN(e,af,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Rh(t,e),t=e.pendingProps;var s=Ol(e,un.current);Sl(e,n),s=fx(null,e,r,t,s,n);var i=px();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mn(r)?(i=!0,sf(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,lx(e),s.updater=qf,e.stateNode=s,s._reactInternals=e,by(e,r,t,n),e=Sy(null,e,r,!0,i,n)):(e.tag=0,bt&&i&&tx(e),mn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Rh(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=aI(r),t=Lr(r,t),s){case 0:e=Ey(null,e,r,t,n);break e;case 1:e=Vb(null,e,r,t,n);break e;case 11:e=Ub(null,e,r,t,n);break e;case 14:e=$b(null,e,r,Lr(r.type,t),n);break e}throw Error(Ne(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Lr(r,s),Ey(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Lr(r,s),Vb(t,e,r,s,n);case 3:e:{if(hT(e),t===null)throw Error(Ne(387));r=e.pendingProps,i=e.memoizedState,s=i.element,FN(t,e),uf(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ll(Error(Ne(423)),e),e=zb(t,e,r,n,s);break e}else if(r!==s){s=Ll(Error(Ne(424)),e),e=zb(t,e,r,n,s);break e}else for(Yn=Di(e.stateNode.containerInfo.firstChild),Jn=e,bt=!0,Fr=null,n=DN(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Il(),r===s){e=Ys(t,e,n);break e}mn(t,e,r,n)}e=e.child}return e;case 5:return UN(e),t===null&&vy(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,fy(r,s)?a=null:i!==null&&fy(r,i)&&(e.flags|=32),dT(t,e),mn(t,e,a,n),e.child;case 6:return t===null&&vy(e),null;case 13:return fT(t,e,n);case 4:return cx(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Pl(e,null,r,n):mn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Lr(r,s),Ub(t,e,r,s,n);case 7:return mn(t,e,e.pendingProps,n),e.child;case 8:return mn(t,e,e.pendingProps.children,n),e.child;case 12:return mn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,yt(lf,r._currentValue),r._currentValue=a,i!==null)if(Kr(i.value,a)){if(i.children===s.children&&!Ln.current){e=Ys(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Vs(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),xy(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(Ne(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),xy(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}mn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Sl(e,n),s=_r(s),r=r(s),e.flags|=1,mn(t,e,r,n),e.child;case 14:return r=e.type,s=Lr(r,e.pendingProps),s=Lr(r.type,s),$b(t,e,r,s,n);case 15:return cT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Lr(r,s),Rh(t,e),e.tag=1,Mn(r)?(t=!0,sf(e)):t=!1,Sl(e,n),oT(e,r,s),by(e,r,s,n),Sy(null,e,r,!0,t,n);case 19:return pT(t,e,n);case 22:return uT(t,e,n)}throw Error(Ne(156,e.tag))};function kT(t,e){return rN(t,e)}function oI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vr(t,e,n,r){return new oI(t,e,n,r)}function Sx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function aI(t){if(typeof t=="function")return Sx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===zv)return 11;if(t===Hv)return 14}return 2}function $i(t,e){var n=t.alternate;return n===null?(n=vr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Dh(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Sx(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ol:return ta(n.children,s,i,e);case Vv:a=8,s|=8;break;case Wg:return t=vr(12,n,e,s|2),t.elementType=Wg,t.lanes=i,t;case Xg:return t=vr(13,n,e,s),t.elementType=Xg,t.lanes=i,t;case Kg:return t=vr(19,n,e,s),t.elementType=Kg,t.lanes=i,t;case US:return Jf(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case BS:a=10;break e;case FS:a=9;break e;case zv:a=11;break e;case Hv:a=14;break e;case bi:a=16,r=null;break e}throw Error(Ne(130,t==null?t:typeof t,""))}return e=vr(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ta(t,e,n,r){return t=vr(7,t,r,e),t.lanes=n,t}function Jf(t,e,n,r){return t=vr(22,t,r,e),t.elementType=US,t.lanes=n,t.stateNode={isHidden:!1},t}function p0(t,e,n){return t=vr(6,t,null,e),t.lanes=n,t}function m0(t,e,n){return e=vr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function lI(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gm(0),this.expirationTimes=Gm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gm(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Nx(t,e,n,r,s,i,a,l,c){return t=new lI(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=vr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lx(i),t}function cI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:il,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function OT(t){if(!t)return Gi;t=t._reactInternals;e:{if(Na(t)!==t||t.tag!==1)throw Error(Ne(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Mn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ne(171))}if(t.tag===1){var n=t.type;if(Mn(n))return ON(t,n,e)}return e}function IT(t,e,n,r,s,i,a,l,c){return t=Nx(n,r,!0,t,s,i,a,l,c),t.context=OT(null),n=t.current,r=yn(),s=Ui(n),i=Vs(r,s),i.callback=e??null,Bi(n,i,s),t.current.lanes=s,Hu(t,s,r),Dn(t,r),t}function Qf(t,e,n,r){var s=e.current,i=yn(),a=Ui(s);return n=OT(n),e.context===null?e.context=n:e.pendingContext=n,e=Vs(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Bi(s,e,a),t!==null&&(zr(t,s,a,i),Oh(t,s,a)),a}function vf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Zb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Tx(t,e){Zb(t,e),(t=t.alternate)&&Zb(t,e)}function uI(){return null}var PT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ax(t){this._internalRoot=t}Zf.prototype.render=Ax.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ne(409));Qf(t,e,null,null)};Zf.prototype.unmount=Ax.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ha(function(){Qf(null,t,null,null)}),e[qs]=null}};function Zf(t){this._internalRoot=t}Zf.prototype.unstable_scheduleHydration=function(t){if(t){var e=uN();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ni.length&&e!==0&&e<Ni[n].priority;n++);Ni.splice(n,0,t),n===0&&hN(t)}};function Cx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ep(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function e_(){}function dI(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=vf(a);i.call(u)}}var a=IT(e,r,t,0,null,!1,!1,"",e_);return t._reactRootContainer=a,t[qs]=a.current,wu(t.nodeType===8?t.parentNode:t),ha(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=vf(c);l.call(u)}}var c=Nx(t,0,!1,null,null,!1,!1,"",e_);return t._reactRootContainer=c,t[qs]=c.current,wu(t.nodeType===8?t.parentNode:t),ha(function(){Qf(e,c,n,r)}),c}function tp(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=vf(a);l.call(c)}}Qf(e,a,t,s)}else a=dI(n,e,t,s,r);return vf(a)}lN=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Mc(e.pendingLanes);n!==0&&(Kv(e,n|1),Dn(e,It()),!(ct&6)&&(Ml=It()+500,fo()))}break;case 13:ha(function(){var r=Gs(t,1);if(r!==null){var s=yn();zr(r,t,1,s)}}),Tx(t,1)}};qv=function(t){if(t.tag===13){var e=Gs(t,134217728);if(e!==null){var n=yn();zr(e,t,134217728,n)}Tx(t,134217728)}};cN=function(t){if(t.tag===13){var e=Ui(t),n=Gs(t,e);if(n!==null){var r=yn();zr(n,t,e,r)}Tx(t,e)}};uN=function(){return ht};dN=function(t,e){var n=ht;try{return ht=t,e()}finally{ht=n}};ry=function(t,e,n){switch(e){case"input":if(Yg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Wf(r);if(!s)throw Error(Ne(90));VS(r),Yg(r,s)}}}break;case"textarea":HS(t,n);break;case"select":e=n.value,e!=null&&wl(t,!!n.multiple,e,!1)}};JS=bx;QS=ha;var hI={usingClientEntryPoint:!1,Events:[Xu,ul,Wf,GS,YS,bx]},gc={findFiberByHostInstance:Ko,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fI={bundleType:gc.bundleType,version:gc.version,rendererPackageName:gc.rendererPackageName,rendererConfig:gc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=tN(t),t===null?null:t.stateNode},findFiberByHostInstance:gc.findFiberByHostInstance||uI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bd.isDisabled&&Bd.supportsFiber)try{$f=Bd.inject(fI),ys=Bd}catch{}}er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hI;er.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cx(e))throw Error(Ne(200));return cI(t,e,null,n)};er.createRoot=function(t,e){if(!Cx(t))throw Error(Ne(299));var n=!1,r="",s=PT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Nx(t,1,!1,null,null,n,!1,r,s),t[qs]=e.current,wu(t.nodeType===8?t.parentNode:t),new Ax(e)};er.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ne(188)):(t=Object.keys(t).join(","),Error(Ne(268,t)));return t=tN(e),t=t===null?null:t.stateNode,t};er.flushSync=function(t){return ha(t)};er.hydrate=function(t,e,n){if(!ep(e))throw Error(Ne(200));return tp(null,t,e,!0,n)};er.hydrateRoot=function(t,e,n){if(!Cx(t))throw Error(Ne(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=PT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=IT(e,null,t,1,n??null,s,!1,i,a),t[qs]=e.current,wu(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Zf(e)};er.render=function(t,e,n){if(!ep(e))throw Error(Ne(200));return tp(null,t,e,!1,n)};er.unmountComponentAtNode=function(t){if(!ep(t))throw Error(Ne(40));return t._reactRootContainer?(ha(function(){tp(null,null,t,!1,function(){t._reactRootContainer=null,t[qs]=null})}),!0):!1};er.unstable_batchedUpdates=bx;er.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ep(n))throw Error(Ne(200));if(t==null||t._reactInternals===void 0)throw Error(Ne(38));return tp(t,e,n,!1,r)};er.version="18.3.1-next-f1338f8080-20240426";function RT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(RT)}catch(t){console.error(t)}}RT(),RS.exports=er;var pI=RS.exports,t_=pI;zg.createRoot=t_.createRoot,zg.hydrateRoot=t_.hydrateRoot;let mI={data:""},gI=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||mI,yI=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,vI=/\/\*[^]*?\*\/|  +/g,n_=/\n+/g,Ai=(t,e)=>{let n="",r="",s="";for(let i in t){let a=t[i];i[0]=="@"?i[1]=="i"?n=i+" "+a+";":r+=i[1]=="f"?Ai(a,i):i+"{"+Ai(a,i[1]=="k"?"":e)+"}":typeof a=="object"?r+=Ai(a,e?e.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):a!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Ai.p?Ai.p(i,a):i+":"+a+";")}return n+(e&&s?e+"{"+s+"}":s)+r},Ns={},LT=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+LT(t[n]);return e}return t},xI=(t,e,n,r,s)=>{let i=LT(t),a=Ns[i]||(Ns[i]=(c=>{let u=0,d=11;for(;u<c.length;)d=101*d+c.charCodeAt(u++)>>>0;return"go"+d})(i));if(!Ns[a]){let c=i!==t?t:(u=>{let d,h,f=[{}];for(;d=yI.exec(u.replace(vI,""));)d[4]?f.shift():d[3]?(h=d[3].replace(n_," ").trim(),f.unshift(f[0][h]=f[0][h]||{})):f[0][d[1]]=d[2].replace(n_," ").trim();return f[0]})(t);Ns[a]=Ai(s?{["@keyframes "+a]:c}:c,n?"":"."+a)}let l=n&&Ns.g?Ns.g:null;return n&&(Ns.g=Ns[a]),((c,u,d,h)=>{h?u.data=u.data.replace(h,c):u.data.indexOf(c)===-1&&(u.data=d?c+u.data:u.data+c)})(Ns[a],e,r,l),a},wI=(t,e,n)=>t.reduce((r,s,i)=>{let a=e[i];if(a&&a.call){let l=a(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;a=c?"."+c:l&&typeof l=="object"?l.props?"":Ai(l,""):l===!1?"":l}return r+s+(a??"")},"");function np(t){let e=this||{},n=t.call?t(e.p):t;return xI(n.unshift?n.raw?wI(n,[].slice.call(arguments,1),e.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):n,gI(e.target),e.g,e.o,e.k)}let MT,My,Dy;np.bind({g:1});let Js=np.bind({k:1});function bI(t,e,n,r){Ai.p=e,MT=t,My=n,Dy=r}function po(t,e){let n=this||{};return function(){let r=arguments;function s(i,a){let l=Object.assign({},i),c=l.className||s.className;n.p=Object.assign({theme:My&&My()},l),n.o=/ *go\d+/.test(c),l.className=np.apply(n,r)+(c?" "+c:""),e&&(l.ref=a);let u=t;return t[0]&&(u=l.as||t,delete l.as),Dy&&u[0]&&Dy(l),MT(u,l)}return e?e(s):s}}var _I=t=>typeof t=="function",xf=(t,e)=>_I(t)?t(e):t,EI=(()=>{let t=0;return()=>(++t).toString()})(),DT=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),SI=20,BT=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,SI)};case 1:return{...t,toasts:t.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:n}=e;return BT(t,{type:t.toasts.find(i=>i.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(i=>i.id===r||r===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+s}))}}},Bh=[],Fh={toasts:[],pausedAt:void 0},Ta=t=>{Fh=BT(Fh,t),Bh.forEach(e=>{e(Fh)})},NI={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},TI=(t={})=>{let[e,n]=z.useState(Fh);z.useEffect(()=>(Bh.push(n),()=>{let s=Bh.indexOf(n);s>-1&&Bh.splice(s,1)}),[e]);let r=e.toasts.map(s=>{var i,a,l;return{...t,...t[s.type],...s,removeDelay:s.removeDelay||((i=t[s.type])==null?void 0:i.removeDelay)||(t==null?void 0:t.removeDelay),duration:s.duration||((a=t[s.type])==null?void 0:a.duration)||(t==null?void 0:t.duration)||NI[s.type],style:{...t.style,...(l=t[s.type])==null?void 0:l.style,...s.style}}});return{...e,toasts:r}},AI=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||EI()}),qu=t=>(e,n)=>{let r=AI(e,t,n);return Ta({type:2,toast:r}),r.id},gn=(t,e)=>qu("blank")(t,e);gn.error=qu("error");gn.success=qu("success");gn.loading=qu("loading");gn.custom=qu("custom");gn.dismiss=t=>{Ta({type:3,toastId:t})};gn.remove=t=>Ta({type:4,toastId:t});gn.promise=(t,e,n)=>{let r=gn.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let i=e.success?xf(e.success,s):void 0;return i?gn.success(i,{id:r,...n,...n==null?void 0:n.success}):gn.dismiss(r),s}).catch(s=>{let i=e.error?xf(e.error,s):void 0;i?gn.error(i,{id:r,...n,...n==null?void 0:n.error}):gn.dismiss(r)}),t};var CI=(t,e)=>{Ta({type:1,toast:{id:t,height:e}})},jI=()=>{Ta({type:5,time:Date.now()})},Qc=new Map,kI=1e3,OI=(t,e=kI)=>{if(Qc.has(t))return;let n=setTimeout(()=>{Qc.delete(t),Ta({type:4,toastId:t})},e);Qc.set(t,n)},II=t=>{let{toasts:e,pausedAt:n}=TI(t);z.useEffect(()=>{if(n)return;let i=Date.now(),a=e.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(i-l.createdAt);if(c<0){l.visible&&gn.dismiss(l.id);return}return setTimeout(()=>gn.dismiss(l.id),c)});return()=>{a.forEach(l=>l&&clearTimeout(l))}},[e,n]);let r=z.useCallback(()=>{n&&Ta({type:6,time:Date.now()})},[n]),s=z.useCallback((i,a)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:u}=a||{},d=e.filter(m=>(m.position||u)===(i.position||u)&&m.height),h=d.findIndex(m=>m.id===i.id),f=d.filter((m,_)=>_<h&&m.visible).length;return d.filter(m=>m.visible).slice(...l?[f+1]:[0,f]).reduce((m,_)=>m+(_.height||0)+c,0)},[e]);return z.useEffect(()=>{e.forEach(i=>{if(i.dismissed)OI(i.id,i.removeDelay);else{let a=Qc.get(i.id);a&&(clearTimeout(a),Qc.delete(i.id))}})},[e]),{toasts:e,handlers:{updateHeight:CI,startPause:jI,endPause:r,calculateOffset:s}}},PI=Js`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,RI=Js`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,LI=Js`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,MI=po("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${PI} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${RI} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${LI} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,DI=Js`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,BI=po("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${DI} 1s linear infinite;
`,FI=Js`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,UI=Js`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,$I=po("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${FI} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${UI} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,VI=po("div")`
  position: absolute;
`,zI=po("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,HI=Js`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,WI=po("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${HI} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,XI=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?z.createElement(WI,null,e):e:n==="blank"?null:z.createElement(zI,null,z.createElement(BI,{...r}),n!=="loading"&&z.createElement(VI,null,n==="error"?z.createElement(MI,{...r}):z.createElement($I,{...r})))},KI=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,qI=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,GI="0%{opacity:0;} 100%{opacity:1;}",YI="0%{opacity:1;} 100%{opacity:0;}",JI=po("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,QI=po("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,ZI=(t,e)=>{let n=t.includes("top")?1:-1,[r,s]=DT()?[GI,YI]:[KI(n),qI(n)];return{animation:e?`${Js(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Js(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},eP=z.memo(({toast:t,position:e,style:n,children:r})=>{let s=t.height?ZI(t.position||e||"top-center",t.visible):{opacity:0},i=z.createElement(XI,{toast:t}),a=z.createElement(QI,{...t.ariaProps},xf(t.message,t));return z.createElement(JI,{className:t.className,style:{...s,...n,...t.style}},typeof r=="function"?r({icon:i,message:a}):z.createElement(z.Fragment,null,i,a))});bI(z.createElement);var tP=({id:t,className:e,style:n,onHeightUpdate:r,children:s})=>{let i=z.useCallback(a=>{if(a){let l=()=>{let c=a.getBoundingClientRect().height;r(t,c)};l(),new MutationObserver(l).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return z.createElement("div",{ref:i,className:e,style:n},s)},nP=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:DT()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...s}},rP=np`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Fd=16,FT=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:s,containerStyle:i,containerClassName:a})=>{let{toasts:l,handlers:c}=II(n);return z.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Fd,left:Fd,right:Fd,bottom:Fd,pointerEvents:"none",...i},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let d=u.position||e,h=c.calculateOffset(u,{reverseOrder:t,gutter:r,defaultPosition:e}),f=nP(d,h);return z.createElement(tP,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?rP:"",style:f},u.type==="custom"?xf(u.message,u):s?s(u):z.createElement(eP,{toast:u,position:d}))}))},ye=gn;function UT(t,e){return function(){return t.apply(e,arguments)}}const{toString:sP}=Object.prototype,{getPrototypeOf:jx}=Object,rp=(t=>e=>{const n=sP.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Gr=t=>(t=t.toLowerCase(),e=>rp(e)===t),sp=t=>e=>typeof e===t,{isArray:Gl}=Array,ju=sp("undefined");function iP(t){return t!==null&&!ju(t)&&t.constructor!==null&&!ju(t.constructor)&&Qn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const $T=Gr("ArrayBuffer");function oP(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&$T(t.buffer),e}const aP=sp("string"),Qn=sp("function"),VT=sp("number"),ip=t=>t!==null&&typeof t=="object",lP=t=>t===!0||t===!1,Uh=t=>{if(rp(t)!=="object")return!1;const e=jx(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},cP=Gr("Date"),uP=Gr("File"),dP=Gr("Blob"),hP=Gr("FileList"),fP=t=>ip(t)&&Qn(t.pipe),pP=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Qn(t.append)&&((e=rp(t))==="formdata"||e==="object"&&Qn(t.toString)&&t.toString()==="[object FormData]"))},mP=Gr("URLSearchParams"),[gP,yP,vP,xP]=["ReadableStream","Request","Response","Headers"].map(Gr),wP=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Gu(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Gl(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),a=i.length;let l;for(r=0;r<a;r++)l=i[r],e.call(null,t[l],l,t)}}function zT(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const Yo=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),HT=t=>!ju(t)&&t!==Yo;function By(){const{caseless:t}=HT(this)&&this||{},e={},n=(r,s)=>{const i=t&&zT(e,s)||s;Uh(e[i])&&Uh(r)?e[i]=By(e[i],r):Uh(r)?e[i]=By({},r):Gl(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Gu(arguments[r],n);return e}const bP=(t,e,n,{allOwnKeys:r}={})=>(Gu(e,(s,i)=>{n&&Qn(s)?t[i]=UT(s,n):t[i]=s},{allOwnKeys:r}),t),_P=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),EP=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},SP=(t,e,n,r)=>{let s,i,a;const l={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)a=s[i],(!r||r(a,t,e))&&!l[a]&&(e[a]=t[a],l[a]=!0);t=n!==!1&&jx(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},NP=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},TP=t=>{if(!t)return null;if(Gl(t))return t;let e=t.length;if(!VT(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},AP=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&jx(Uint8Array)),CP=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},jP=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},kP=Gr("HTMLFormElement"),OP=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),r_=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),IP=Gr("RegExp"),WT=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Gu(n,(s,i)=>{let a;(a=e(s,i,t))!==!1&&(r[i]=a||s)}),Object.defineProperties(t,r)},PP=t=>{WT(t,(e,n)=>{if(Qn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Qn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},RP=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Gl(t)?r(t):r(String(t).split(e)),n},LP=()=>{},MP=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,g0="abcdefghijklmnopqrstuvwxyz",s_="0123456789",XT={DIGIT:s_,ALPHA:g0,ALPHA_DIGIT:g0+g0.toUpperCase()+s_},DP=(t=16,e=XT.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function BP(t){return!!(t&&Qn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const FP=t=>{const e=new Array(10),n=(r,s)=>{if(ip(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=Gl(r)?[]:{};return Gu(r,(a,l)=>{const c=n(a,s+1);!ju(c)&&(i[l]=c)}),e[s]=void 0,i}}return r};return n(t,0)},UP=Gr("AsyncFunction"),$P=t=>t&&(ip(t)||Qn(t))&&Qn(t.then)&&Qn(t.catch),KT=((t,e)=>t?setImmediate:e?((n,r)=>(Yo.addEventListener("message",({source:s,data:i})=>{s===Yo&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),Yo.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Qn(Yo.postMessage)),VP=typeof queueMicrotask<"u"?queueMicrotask.bind(Yo):typeof process<"u"&&process.nextTick||KT,ve={isArray:Gl,isArrayBuffer:$T,isBuffer:iP,isFormData:pP,isArrayBufferView:oP,isString:aP,isNumber:VT,isBoolean:lP,isObject:ip,isPlainObject:Uh,isReadableStream:gP,isRequest:yP,isResponse:vP,isHeaders:xP,isUndefined:ju,isDate:cP,isFile:uP,isBlob:dP,isRegExp:IP,isFunction:Qn,isStream:fP,isURLSearchParams:mP,isTypedArray:AP,isFileList:hP,forEach:Gu,merge:By,extend:bP,trim:wP,stripBOM:_P,inherits:EP,toFlatObject:SP,kindOf:rp,kindOfTest:Gr,endsWith:NP,toArray:TP,forEachEntry:CP,matchAll:jP,isHTMLForm:kP,hasOwnProperty:r_,hasOwnProp:r_,reduceDescriptors:WT,freezeMethods:PP,toObjectSet:RP,toCamelCase:OP,noop:LP,toFiniteNumber:MP,findKey:zT,global:Yo,isContextDefined:HT,ALPHABET:XT,generateString:DP,isSpecCompliantForm:BP,toJSONObject:FP,isAsyncFn:UP,isThenable:$P,setImmediate:KT,asap:VP};function Je(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}ve.inherits(Je,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ve.toJSONObject(this.config),code:this.code,status:this.status}}});const qT=Je.prototype,GT={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{GT[t]={value:t}});Object.defineProperties(Je,GT);Object.defineProperty(qT,"isAxiosError",{value:!0});Je.from=(t,e,n,r,s,i)=>{const a=Object.create(qT);return ve.toFlatObject(t,a,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),Je.call(a,t.message,e,n,r,s),a.cause=t,a.name=t.name,i&&Object.assign(a,i),a};const zP=null;function Fy(t){return ve.isPlainObject(t)||ve.isArray(t)}function YT(t){return ve.endsWith(t,"[]")?t.slice(0,-2):t}function i_(t,e,n){return t?t.concat(e).map(function(s,i){return s=YT(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function HP(t){return ve.isArray(t)&&!t.some(Fy)}const WP=ve.toFlatObject(ve,{},null,function(e){return/^is[A-Z]/.test(e)});function op(t,e,n){if(!ve.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=ve.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,j){return!ve.isUndefined(j[S])});const r=n.metaTokens,s=n.visitor||d,i=n.dots,a=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&ve.isSpecCompliantForm(e);if(!ve.isFunction(s))throw new TypeError("visitor must be a function");function u(_){if(_===null)return"";if(ve.isDate(_))return _.toISOString();if(!c&&ve.isBlob(_))throw new Je("Blob is not supported. Use a Buffer instead.");return ve.isArrayBuffer(_)||ve.isTypedArray(_)?c&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function d(_,S,j){let y=_;if(_&&!j&&typeof _=="object"){if(ve.endsWith(S,"{}"))S=r?S:S.slice(0,-2),_=JSON.stringify(_);else if(ve.isArray(_)&&HP(_)||(ve.isFileList(_)||ve.endsWith(S,"[]"))&&(y=ve.toArray(_)))return S=YT(S),y.forEach(function(b,v){!(ve.isUndefined(b)||b===null)&&e.append(a===!0?i_([S],v,i):a===null?S:S+"[]",u(b))}),!1}return Fy(_)?!0:(e.append(i_(j,S,i),u(_)),!1)}const h=[],f=Object.assign(WP,{defaultVisitor:d,convertValue:u,isVisitable:Fy});function m(_,S){if(!ve.isUndefined(_)){if(h.indexOf(_)!==-1)throw Error("Circular reference detected in "+S.join("."));h.push(_),ve.forEach(_,function(y,x){(!(ve.isUndefined(y)||y===null)&&s.call(e,y,ve.isString(x)?x.trim():x,S,f))===!0&&m(y,S?S.concat(x):[x])}),h.pop()}}if(!ve.isObject(t))throw new TypeError("data must be an object");return m(t),e}function o_(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function kx(t,e){this._pairs=[],t&&op(t,this,e)}const JT=kx.prototype;JT.append=function(e,n){this._pairs.push([e,n])};JT.toString=function(e){const n=e?function(r){return e.call(this,r,o_)}:o_;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function XP(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function QT(t,e,n){if(!e)return t;const r=n&&n.encode||XP;ve.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(e,n):i=ve.isURLSearchParams(e)?e.toString():new kx(e,n).toString(r),i){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class KP{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ve.forEach(this.handlers,function(r){r!==null&&e(r)})}}const a_=KP,ZT={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},qP=typeof URLSearchParams<"u"?URLSearchParams:kx,GP=typeof FormData<"u"?FormData:null,YP=typeof Blob<"u"?Blob:null,JP={isBrowser:!0,classes:{URLSearchParams:qP,FormData:GP,Blob:YP},protocols:["http","https","file","blob","url","data"]},Ox=typeof window<"u"&&typeof document<"u",Uy=typeof navigator=="object"&&navigator||void 0,QP=Ox&&(!Uy||["ReactNative","NativeScript","NS"].indexOf(Uy.product)<0),ZP=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),eR=Ox&&window.location.href||"http://localhost",tR=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ox,hasStandardBrowserEnv:QP,hasStandardBrowserWebWorkerEnv:ZP,navigator:Uy,origin:eR},Symbol.toStringTag,{value:"Module"})),cn={...tR,...JP};function nR(t,e){return op(t,new cn.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return cn.isNode&&ve.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function rR(t){return ve.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function sR(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function eA(t){function e(n,r,s,i){let a=n[i++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),c=i>=n.length;return a=!a&&ve.isArray(s)?s.length:a,c?(ve.hasOwnProp(s,a)?s[a]=[s[a],r]:s[a]=r,!l):((!s[a]||!ve.isObject(s[a]))&&(s[a]=[]),e(n,r,s[a],i)&&ve.isArray(s[a])&&(s[a]=sR(s[a])),!l)}if(ve.isFormData(t)&&ve.isFunction(t.entries)){const n={};return ve.forEachEntry(t,(r,s)=>{e(rR(r),s,n,0)}),n}return null}function iR(t,e,n){if(ve.isString(t))try{return(e||JSON.parse)(t),ve.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Ix={transitional:ZT,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=ve.isObject(e);if(i&&ve.isHTMLForm(e)&&(e=new FormData(e)),ve.isFormData(e))return s?JSON.stringify(eA(e)):e;if(ve.isArrayBuffer(e)||ve.isBuffer(e)||ve.isStream(e)||ve.isFile(e)||ve.isBlob(e)||ve.isReadableStream(e))return e;if(ve.isArrayBufferView(e))return e.buffer;if(ve.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return nR(e,this.formSerializer).toString();if((l=ve.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return op(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),iR(e)):e}],transformResponse:[function(e){const n=this.transitional||Ix.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(ve.isResponse(e)||ve.isReadableStream(e))return e;if(e&&ve.isString(e)&&(r&&!this.responseType||s)){const a=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(l){if(a)throw l.name==="SyntaxError"?Je.from(l,Je.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:cn.classes.FormData,Blob:cn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ve.forEach(["delete","get","head","post","put","patch"],t=>{Ix.headers[t]={}});const Px=Ix,oR=ve.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),aR=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(a){s=a.indexOf(":"),n=a.substring(0,s).trim().toLowerCase(),r=a.substring(s+1).trim(),!(!n||e[n]&&oR[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},l_=Symbol("internals");function yc(t){return t&&String(t).trim().toLowerCase()}function $h(t){return t===!1||t==null?t:ve.isArray(t)?t.map($h):String(t)}function lR(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const cR=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function y0(t,e,n,r,s){if(ve.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!ve.isString(e)){if(ve.isString(r))return e.indexOf(r)!==-1;if(ve.isRegExp(r))return r.test(e)}}function uR(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function dR(t,e){const n=ve.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,a){return this[r].call(this,e,s,i,a)},configurable:!0})})}class ap{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(l,c,u){const d=yc(c);if(!d)throw new Error("header name must be a non-empty string");const h=ve.findKey(s,d);(!h||s[h]===void 0||u===!0||u===void 0&&s[h]!==!1)&&(s[h||c]=$h(l))}const a=(l,c)=>ve.forEach(l,(u,d)=>i(u,d,c));if(ve.isPlainObject(e)||e instanceof this.constructor)a(e,n);else if(ve.isString(e)&&(e=e.trim())&&!cR(e))a(aR(e),n);else if(ve.isHeaders(e))for(const[l,c]of e.entries())i(c,l,r);else e!=null&&i(n,e,r);return this}get(e,n){if(e=yc(e),e){const r=ve.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return lR(s);if(ve.isFunction(n))return n.call(this,s,r);if(ve.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=yc(e),e){const r=ve.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||y0(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(a){if(a=yc(a),a){const l=ve.findKey(r,a);l&&(!n||y0(r,r[l],l,n))&&(delete r[l],s=!0)}}return ve.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||y0(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return ve.forEach(this,(s,i)=>{const a=ve.findKey(r,i);if(a){n[a]=$h(s),delete n[i];return}const l=e?uR(i):String(i).trim();l!==i&&delete n[i],n[l]=$h(s),r[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return ve.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&ve.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[l_]=this[l_]={accessors:{}}).accessors,s=this.prototype;function i(a){const l=yc(a);r[l]||(dR(s,a),r[l]=!0)}return ve.isArray(e)?e.forEach(i):i(e),this}}ap.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ve.reduceDescriptors(ap.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});ve.freezeMethods(ap);const Hr=ap;function v0(t,e){const n=this||Px,r=e||n,s=Hr.from(r.headers);let i=r.data;return ve.forEach(t,function(l){i=l.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function tA(t){return!!(t&&t.__CANCEL__)}function Yl(t,e,n){Je.call(this,t??"canceled",Je.ERR_CANCELED,e,n),this.name="CanceledError"}ve.inherits(Yl,Je,{__CANCEL__:!0});function nA(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Je("Request failed with status code "+n.status,[Je.ERR_BAD_REQUEST,Je.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function hR(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function fR(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,a;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),d=r[i];a||(a=u),n[s]=c,r[s]=u;let h=i,f=0;for(;h!==s;)f+=n[h++],h=h%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),u-a<e)return;const m=d&&u-d;return m?Math.round(f*1e3/m):void 0}}function pR(t,e){let n=0,r=1e3/e,s,i;const a=(u,d=Date.now())=>{n=d,s=null,i&&(clearTimeout(i),i=null),t.apply(null,u)};return[(...u)=>{const d=Date.now(),h=d-n;h>=r?a(u,d):(s=u,i||(i=setTimeout(()=>{i=null,a(s)},r-h)))},()=>s&&a(s)]}const wf=(t,e,n=3)=>{let r=0;const s=fR(50,250);return pR(i=>{const a=i.loaded,l=i.lengthComputable?i.total:void 0,c=a-r,u=s(c),d=a<=l;r=a;const h={loaded:a,total:l,progress:l?a/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&d?(l-a)/u:void 0,event:i,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(h)},n)},c_=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},u_=t=>(...e)=>ve.asap(()=>t(...e)),mR=cn.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,cn.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(cn.origin),cn.navigator&&/(msie|trident)/i.test(cn.navigator.userAgent)):()=>!0,gR=cn.hasStandardBrowserEnv?{write(t,e,n,r,s,i){const a=[t+"="+encodeURIComponent(e)];ve.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),ve.isString(r)&&a.push("path="+r),ve.isString(s)&&a.push("domain="+s),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function yR(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function vR(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function rA(t,e){return t&&!yR(e)?vR(t,e):e}const d_=t=>t instanceof Hr?{...t}:t;function fa(t,e){e=e||{};const n={};function r(u,d,h,f){return ve.isPlainObject(u)&&ve.isPlainObject(d)?ve.merge.call({caseless:f},u,d):ve.isPlainObject(d)?ve.merge({},d):ve.isArray(d)?d.slice():d}function s(u,d,h,f){if(ve.isUndefined(d)){if(!ve.isUndefined(u))return r(void 0,u,h,f)}else return r(u,d,h,f)}function i(u,d){if(!ve.isUndefined(d))return r(void 0,d)}function a(u,d){if(ve.isUndefined(d)){if(!ve.isUndefined(u))return r(void 0,u)}else return r(void 0,d)}function l(u,d,h){if(h in e)return r(u,d);if(h in t)return r(void 0,u)}const c={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(u,d,h)=>s(d_(u),d_(d),h,!0)};return ve.forEach(Object.keys(Object.assign({},t,e)),function(d){const h=c[d]||s,f=h(t[d],e[d],d);ve.isUndefined(f)&&h!==l||(n[d]=f)}),n}const sA=t=>{const e=fa({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:a,auth:l}=e;e.headers=a=Hr.from(a),e.url=QT(rA(e.baseURL,e.url),t.params,t.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(ve.isFormData(n)){if(cn.hasStandardBrowserEnv||cn.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((c=a.getContentType())!==!1){const[u,...d]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];a.setContentType([u||"multipart/form-data",...d].join("; "))}}if(cn.hasStandardBrowserEnv&&(r&&ve.isFunction(r)&&(r=r(e)),r||r!==!1&&mR(e.url))){const u=s&&i&&gR.read(i);u&&a.set(s,u)}return e},xR=typeof XMLHttpRequest<"u",wR=xR&&function(t){return new Promise(function(n,r){const s=sA(t);let i=s.data;const a=Hr.from(s.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=s,d,h,f,m,_;function S(){m&&m(),_&&_(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let j=new XMLHttpRequest;j.open(s.method.toUpperCase(),s.url,!0),j.timeout=s.timeout;function y(){if(!j)return;const b=Hr.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),A={data:!l||l==="text"||l==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:b,config:t,request:j};nA(function(L){n(L),S()},function(L){r(L),S()},A),j=null}"onloadend"in j?j.onloadend=y:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(y)},j.onabort=function(){j&&(r(new Je("Request aborted",Je.ECONNABORTED,t,j)),j=null)},j.onerror=function(){r(new Je("Network Error",Je.ERR_NETWORK,t,j)),j=null},j.ontimeout=function(){let v=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const A=s.transitional||ZT;s.timeoutErrorMessage&&(v=s.timeoutErrorMessage),r(new Je(v,A.clarifyTimeoutError?Je.ETIMEDOUT:Je.ECONNABORTED,t,j)),j=null},i===void 0&&a.setContentType(null),"setRequestHeader"in j&&ve.forEach(a.toJSON(),function(v,A){j.setRequestHeader(A,v)}),ve.isUndefined(s.withCredentials)||(j.withCredentials=!!s.withCredentials),l&&l!=="json"&&(j.responseType=s.responseType),u&&([f,_]=wf(u,!0),j.addEventListener("progress",f)),c&&j.upload&&([h,m]=wf(c),j.upload.addEventListener("progress",h),j.upload.addEventListener("loadend",m)),(s.cancelToken||s.signal)&&(d=b=>{j&&(r(!b||b.type?new Yl(null,t,j):b),j.abort(),j=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));const x=hR(s.url);if(x&&cn.protocols.indexOf(x)===-1){r(new Je("Unsupported protocol "+x+":",Je.ERR_BAD_REQUEST,t));return}j.send(i||null)})},bR=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(u){if(!s){s=!0,l();const d=u instanceof Error?u:this.reason;r.abort(d instanceof Je?d:new Yl(d instanceof Error?d.message:d))}};let a=e&&setTimeout(()=>{a=null,i(new Je(`timeout ${e} of ms exceeded`,Je.ETIMEDOUT))},e);const l=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),t=null)};t.forEach(u=>u.addEventListener("abort",i));const{signal:c}=r;return c.unsubscribe=()=>ve.asap(l),c}},_R=bR,ER=function*(t,e){let n=t.byteLength;if(!e||n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},SR=async function*(t,e){for await(const n of NR(t))yield*ER(n,e)},NR=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},h_=(t,e,n,r)=>{const s=SR(t,e);let i=0,a,l=c=>{a||(a=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await s.next();if(u){l(),c.close();return}let h=d.byteLength;if(n){let f=i+=h;n(f)}c.enqueue(new Uint8Array(d))}catch(u){throw l(u),u}},cancel(c){return l(c),s.return()}},{highWaterMark:2})},lp=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",iA=lp&&typeof ReadableStream=="function",TR=lp&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),oA=(t,...e)=>{try{return!!t(...e)}catch{return!1}},AR=iA&&oA(()=>{let t=!1;const e=new Request(cn.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),f_=64*1024,$y=iA&&oA(()=>ve.isReadableStream(new Response("").body)),bf={stream:$y&&(t=>t.body)};lp&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!bf[e]&&(bf[e]=ve.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new Je(`Response type '${e}' is not supported`,Je.ERR_NOT_SUPPORT,r)})})})(new Response);const CR=async t=>{if(t==null)return 0;if(ve.isBlob(t))return t.size;if(ve.isSpecCompliantForm(t))return(await new Request(cn.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(ve.isArrayBufferView(t)||ve.isArrayBuffer(t))return t.byteLength;if(ve.isURLSearchParams(t)&&(t=t+""),ve.isString(t))return(await TR(t)).byteLength},jR=async(t,e)=>{const n=ve.toFiniteNumber(t.getContentLength());return n??CR(e)},kR=lp&&(async t=>{let{url:e,method:n,data:r,signal:s,cancelToken:i,timeout:a,onDownloadProgress:l,onUploadProgress:c,responseType:u,headers:d,withCredentials:h="same-origin",fetchOptions:f}=sA(t);u=u?(u+"").toLowerCase():"text";let m=_R([s,i&&i.toAbortSignal()],a),_;const S=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let j;try{if(c&&AR&&n!=="get"&&n!=="head"&&(j=await jR(d,r))!==0){let A=new Request(e,{method:"POST",body:r,duplex:"half"}),E;if(ve.isFormData(r)&&(E=A.headers.get("content-type"))&&d.setContentType(E),A.body){const[L,Y]=c_(j,wf(u_(c)));r=h_(A.body,f_,L,Y)}}ve.isString(h)||(h=h?"include":"omit");const y="credentials"in Request.prototype;_=new Request(e,{...f,signal:m,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:y?h:void 0});let x=await fetch(_);const b=$y&&(u==="stream"||u==="response");if($y&&(l||b&&S)){const A={};["status","statusText","headers"].forEach(ee=>{A[ee]=x[ee]});const E=ve.toFiniteNumber(x.headers.get("content-length")),[L,Y]=l&&c_(E,wf(u_(l),!0))||[];x=new Response(h_(x.body,f_,L,()=>{Y&&Y(),S&&S()}),A)}u=u||"text";let v=await bf[ve.findKey(bf,u)||"text"](x,t);return!b&&S&&S(),await new Promise((A,E)=>{nA(A,E,{data:v,headers:Hr.from(x.headers),status:x.status,statusText:x.statusText,config:t,request:_})})}catch(y){throw S&&S(),y&&y.name==="TypeError"&&/fetch/i.test(y.message)?Object.assign(new Je("Network Error",Je.ERR_NETWORK,t,_),{cause:y.cause||y}):Je.from(y,y&&y.code,t,_)}}),Vy={http:zP,xhr:wR,fetch:kR};ve.forEach(Vy,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const p_=t=>`- ${t}`,OR=t=>ve.isFunction(t)||t===null||t===!1,aA={getAdapter:t=>{t=ve.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let i=0;i<e;i++){n=t[i];let a;if(r=n,!OR(n)&&(r=Vy[(a=String(n)).toLowerCase()],r===void 0))throw new Je(`Unknown adapter '${a}'`);if(r)break;s[a||"#"+i]=r}if(!r){const i=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=e?i.length>1?`since :
`+i.map(p_).join(`
`):" "+p_(i[0]):"as no adapter specified";throw new Je("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r},adapters:Vy};function x0(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Yl(null,t)}function m_(t){return x0(t),t.headers=Hr.from(t.headers),t.data=v0.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),aA.getAdapter(t.adapter||Px.adapter)(t).then(function(r){return x0(t),r.data=v0.call(t,t.transformResponse,r),r.headers=Hr.from(r.headers),r},function(r){return tA(r)||(x0(t),r&&r.response&&(r.response.data=v0.call(t,t.transformResponse,r.response),r.response.headers=Hr.from(r.response.headers))),Promise.reject(r)})}const lA="1.7.9",cp={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{cp[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const g_={};cp.transitional=function(e,n,r){function s(i,a){return"[Axios v"+lA+"] Transitional option '"+i+"'"+a+(r?". "+r:"")}return(i,a,l)=>{if(e===!1)throw new Je(s(a," has been removed"+(n?" in "+n:"")),Je.ERR_DEPRECATED);return n&&!g_[a]&&(g_[a]=!0,console.warn(s(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,a,l):!0}};cp.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function IR(t,e,n){if(typeof t!="object")throw new Je("options must be an object",Je.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],a=e[i];if(a){const l=t[i],c=l===void 0||a(l,i,t);if(c!==!0)throw new Je("option "+i+" must be "+c,Je.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Je("Unknown option "+i,Je.ERR_BAD_OPTION)}}const Vh={assertOptions:IR,validators:cp},es=Vh.validators;class _f{constructor(e){this.defaults=e,this.interceptors={request:new a_,response:new a_}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=fa(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Vh.assertOptions(r,{silentJSONParsing:es.transitional(es.boolean),forcedJSONParsing:es.transitional(es.boolean),clarifyTimeoutError:es.transitional(es.boolean)},!1),s!=null&&(ve.isFunction(s)?n.paramsSerializer={serialize:s}:Vh.assertOptions(s,{encode:es.function,serialize:es.function},!0)),Vh.assertOptions(n,{baseUrl:es.spelling("baseURL"),withXsrfToken:es.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=i&&ve.merge(i.common,i[n.method]);i&&ve.forEach(["delete","get","head","post","put","patch","common"],_=>{delete i[_]}),n.headers=Hr.concat(a,i);const l=[];let c=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(n)===!1||(c=c&&S.synchronous,l.unshift(S.fulfilled,S.rejected))});const u=[];this.interceptors.response.forEach(function(S){u.push(S.fulfilled,S.rejected)});let d,h=0,f;if(!c){const _=[m_.bind(this),void 0];for(_.unshift.apply(_,l),_.push.apply(_,u),f=_.length,d=Promise.resolve(n);h<f;)d=d.then(_[h++],_[h++]);return d}f=l.length;let m=n;for(h=0;h<f;){const _=l[h++],S=l[h++];try{m=_(m)}catch(j){S.call(this,j);break}}try{d=m_.call(this,m)}catch(_){return Promise.reject(_)}for(h=0,f=u.length;h<f;)d=d.then(u[h++],u[h++]);return d}getUri(e){e=fa(this.defaults,e);const n=rA(e.baseURL,e.url);return QT(n,e.params,e.paramsSerializer)}}ve.forEach(["delete","get","head","options"],function(e){_f.prototype[e]=function(n,r){return this.request(fa(r||{},{method:e,url:n,data:(r||{}).data}))}});ve.forEach(["post","put","patch"],function(e){function n(r){return function(i,a,l){return this.request(fa(l||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}_f.prototype[e]=n(),_f.prototype[e+"Form"]=n(!0)});const zh=_f;class Rx{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const a=new Promise(l=>{r.subscribe(l),i=l}).then(s);return a.cancel=function(){r.unsubscribe(i)},a},e(function(i,a,l){r.reason||(r.reason=new Yl(i,a,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Rx(function(s){e=s}),cancel:e}}}const PR=Rx;function RR(t){return function(n){return t.apply(null,n)}}function LR(t){return ve.isObject(t)&&t.isAxiosError===!0}const zy={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(zy).forEach(([t,e])=>{zy[e]=t});const MR=zy;function cA(t){const e=new zh(t),n=UT(zh.prototype.request,e);return ve.extend(n,zh.prototype,e,{allOwnKeys:!0}),ve.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return cA(fa(t,s))},n}const Bt=cA(Px);Bt.Axios=zh;Bt.CanceledError=Yl;Bt.CancelToken=PR;Bt.isCancel=tA;Bt.VERSION=lA;Bt.toFormData=op;Bt.AxiosError=Je;Bt.Cancel=Bt.CanceledError;Bt.all=function(e){return Promise.all(e)};Bt.spread=RR;Bt.isAxiosError=LR;Bt.mergeConfig=fa;Bt.AxiosHeaders=Hr;Bt.formToJSON=t=>eA(ve.isHTMLForm(t)?new FormData(t):t);Bt.getAdapter=aA.getAdapter;Bt.HttpStatusCode=MR;Bt.default=Bt;const DR=Bt;var Ve={},up={},uA={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,h,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new s(d,h||c,f),_=n?n+u:u;return c._events[_]?c._events[_].fn?c._events[_]=[c._events[_],m]:c._events[_].push(m):(c._events[_]=m,c._eventsCount++),c}function a(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)e.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,m=h.length,_=new Array(m);f<m;f++)_[f]=h[f].fn;return _},l.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},l.prototype.emit=function(u,d,h,f,m,_){var S=n?n+u:u;if(!this._events[S])return!1;var j=this._events[S],y=arguments.length,x,b;if(j.fn){switch(j.once&&this.removeListener(u,j.fn,void 0,!0),y){case 1:return j.fn.call(j.context),!0;case 2:return j.fn.call(j.context,d),!0;case 3:return j.fn.call(j.context,d,h),!0;case 4:return j.fn.call(j.context,d,h,f),!0;case 5:return j.fn.call(j.context,d,h,f,m),!0;case 6:return j.fn.call(j.context,d,h,f,m,_),!0}for(b=1,x=new Array(y-1);b<y;b++)x[b-1]=arguments[b];j.fn.apply(j.context,x)}else{var v=j.length,A;for(b=0;b<v;b++)switch(j[b].once&&this.removeListener(u,j[b].fn,void 0,!0),y){case 1:j[b].fn.call(j[b].context);break;case 2:j[b].fn.call(j[b].context,d);break;case 3:j[b].fn.call(j[b].context,d,h);break;case 4:j[b].fn.call(j[b].context,d,h,f);break;default:if(!x)for(A=1,x=new Array(y-1);A<y;A++)x[A-1]=arguments[A];j[b].fn.apply(j[b].context,x)}}return!0},l.prototype.on=function(u,d,h){return i(this,u,d,h,!1)},l.prototype.once=function(u,d,h){return i(this,u,d,h,!0)},l.prototype.removeListener=function(u,d,h,f){var m=n?n+u:u;if(!this._events[m])return this;if(!d)return a(this,m),this;var _=this._events[m];if(_.fn)_.fn===d&&(!f||_.once)&&(!h||_.context===h)&&a(this,m);else{for(var S=0,j=[],y=_.length;S<y;S++)(_[S].fn!==d||f&&!_[S].once||h&&_[S].context!==h)&&j.push(_[S]);j.length?this._events[m]=j.length===1?j[0]:j:a(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&a(this,d)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(uA);var Lx=uA.exports,je={};Object.defineProperty(je,"__esModule",{value:!0});je.XRPLFaucetError=je.NotFoundError=je.ValidationError=je.ResponseFormatError=je.TimeoutError=je.RippledNotInitializedError=je.DisconnectedError=je.NotConnectedError=je.RippledError=je.ConnectionError=je.UnexpectedError=je.XrplError=void 0;class Aa extends Error{constructor(e="",n){super(e),this.name=this.constructor.name,this.message=e,this.data=n,Error.captureStackTrace!=null&&Error.captureStackTrace(this,this.constructor)}toString(){let e=`[${this.name}(${this.message}`;return this.data&&(e+=`, ${JSON.stringify(this.data)}`),e+=")]",e}inspect(){return this.toString()}}je.XrplError=Aa;class BR extends Aa{}je.RippledError=BR;class FR extends Aa{}je.UnexpectedError=FR;class Jl extends Aa{}je.ConnectionError=Jl;class UR extends Jl{}je.NotConnectedError=UR;class $R extends Jl{}je.DisconnectedError=$R;class VR extends Jl{}je.RippledNotInitializedError=VR;class zR extends Jl{}je.TimeoutError=zR;class HR extends Jl{}je.ResponseFormatError=HR;class WR extends Aa{}je.ValidationError=WR;class XR extends Aa{}je.XRPLFaucetError=XR;class KR extends Aa{constructor(e="Not found"){super(e)}}je.NotFoundError=KR;var Mx={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_API_VERSION=t.RIPPLED_API_V2=t.RIPPLED_API_V1=void 0,t.RIPPLED_API_V1=1,t.RIPPLED_API_V2=2,t.DEFAULT_API_VERSION=t.RIPPLED_API_V2})(Mx);var xs={},Yu={};Object.defineProperty(Yu,"__esModule",{value:!0});Yu.AccountRootFlags=void 0;var y_;(function(t){t[t.lsfPasswordSpent=65536]="lsfPasswordSpent",t[t.lsfRequireDestTag=131072]="lsfRequireDestTag",t[t.lsfRequireAuth=262144]="lsfRequireAuth",t[t.lsfDisallowXRP=524288]="lsfDisallowXRP",t[t.lsfDisableMaster=1048576]="lsfDisableMaster",t[t.lsfNoFreeze=2097152]="lsfNoFreeze",t[t.lsfGlobalFreeze=4194304]="lsfGlobalFreeze",t[t.lsfDefaultRipple=8388608]="lsfDefaultRipple",t[t.lsfDepositAuth=16777216]="lsfDepositAuth",t[t.lsfAMM=33554432]="lsfAMM",t[t.lsfDisallowIncomingNFTokenOffer=67108864]="lsfDisallowIncomingNFTokenOffer",t[t.lsfDisallowIncomingCheck=134217728]="lsfDisallowIncomingCheck",t[t.lsfDisallowIncomingPayChan=268435456]="lsfDisallowIncomingPayChan",t[t.lsfDisallowIncomingTrustline=536870912]="lsfDisallowIncomingTrustline",t[t.lsfAllowTrustLineClawback=2147483648]="lsfAllowTrustLineClawback"})(y_||(Yu.AccountRootFlags=y_={}));var ws={},Ce={},at={},Fn={},dp={};Object.defineProperty(dp,"__esModule",{value:!0});dp.crypto=void 0;dp.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var Sr={};Object.defineProperty(Sr,"__esModule",{value:!0});Sr.anumber=Hy;Sr.abytes=dA;Sr.ahash=GR;Sr.aexists=YR;Sr.aoutput=JR;function Hy(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function qR(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function dA(t,...e){if(!qR(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function GR(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Hy(t.outputLen),Hy(t.blockLen)}function YR(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function JR(t,e){dA(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}(function(t){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=t.nextTick=t.byteSwapIfBE=t.isLE=void 0,t.isBytes=r,t.u8=s,t.u32=i,t.createView=a,t.rotr=l,t.rotl=c,t.byteSwap=u,t.byteSwap32=d,t.bytesToHex=f,t.hexToBytes=S,t.asyncLoop=y,t.utf8ToBytes=x,t.toBytes=b,t.concatBytes=v,t.checkOpts=E,t.wrapConstructor=L,t.wrapConstructorWithOpts=Y,t.wrapXOFConstructorWithOpts=ee,t.randomBytes=U;const e=dp,n=Sr;function r(G){return G instanceof Uint8Array||ArrayBuffer.isView(G)&&G.constructor.name==="Uint8Array"}function s(G){return new Uint8Array(G.buffer,G.byteOffset,G.byteLength)}function i(G){return new Uint32Array(G.buffer,G.byteOffset,Math.floor(G.byteLength/4))}function a(G){return new DataView(G.buffer,G.byteOffset,G.byteLength)}function l(G,ae){return G<<32-ae|G>>>ae}function c(G,ae){return G<<ae|G>>>32-ae>>>0}t.isLE=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();function u(G){return G<<24&4278190080|G<<8&16711680|G>>>8&65280|G>>>24&255}t.byteSwapIfBE=t.isLE?G=>G:G=>u(G);function d(G){for(let ae=0;ae<G.length;ae++)G[ae]=u(G[ae])}const h=Array.from({length:256},(G,ae)=>ae.toString(16).padStart(2,"0"));function f(G){(0,n.abytes)(G);let ae="";for(let he=0;he<G.length;he++)ae+=h[G[he]];return ae}const m={_0:48,_9:57,A:65,F:70,a:97,f:102};function _(G){if(G>=m._0&&G<=m._9)return G-m._0;if(G>=m.A&&G<=m.F)return G-(m.A-10);if(G>=m.a&&G<=m.f)return G-(m.a-10)}function S(G){if(typeof G!="string")throw new Error("hex string expected, got "+typeof G);const ae=G.length,he=ae/2;if(ae%2)throw new Error("hex string expected, got unpadded hex of length "+ae);const xe=new Uint8Array(he);for(let de=0,$=0;de<he;de++,$+=2){const re=_(G.charCodeAt($)),F=_(G.charCodeAt($+1));if(re===void 0||F===void 0){const k=G[$]+G[$+1];throw new Error('hex string expected, got non-hex character "'+k+'" at index '+$)}xe[de]=re*16+F}return xe}const j=async()=>{};t.nextTick=j;async function y(G,ae,he){let xe=Date.now();for(let de=0;de<G;de++){he(de);const $=Date.now()-xe;$>=0&&$<ae||(await(0,t.nextTick)(),xe+=$)}}function x(G){if(typeof G!="string")throw new Error("utf8ToBytes expected string, got "+typeof G);return new Uint8Array(new TextEncoder().encode(G))}function b(G){return typeof G=="string"&&(G=x(G)),(0,n.abytes)(G),G}function v(...G){let ae=0;for(let xe=0;xe<G.length;xe++){const de=G[xe];(0,n.abytes)(de),ae+=de.length}const he=new Uint8Array(ae);for(let xe=0,de=0;xe<G.length;xe++){const $=G[xe];he.set($,de),de+=$.length}return he}class A{clone(){return this._cloneInto()}}t.Hash=A;function E(G,ae){if(ae!==void 0&&{}.toString.call(ae)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(G,ae)}function L(G){const ae=xe=>G().update(b(xe)).digest(),he=G();return ae.outputLen=he.outputLen,ae.blockLen=he.blockLen,ae.create=()=>G(),ae}function Y(G){const ae=(xe,de)=>G(de).update(b(xe)).digest(),he=G({});return ae.outputLen=he.outputLen,ae.blockLen=he.blockLen,ae.create=xe=>G(xe),ae}function ee(G){const ae=(xe,de)=>G(de).update(b(xe)).digest(),he=G({});return ae.outputLen=he.outputLen,ae.blockLen=he.blockLen,ae.create=xe=>G(xe),ae}function U(G=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(G));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(G);throw new Error("crypto.getRandomValues must be defined")}})(Fn);var zs={};Object.defineProperty(zs,"__esModule",{value:!0});zs.equal=zs.concat=zs.HEX_REGEX=void 0;const QR=Fn;zs.HEX_REGEX=/^[A-F0-9]*$/iu;function ZR(t){return(0,QR.concatBytes)(...t)}zs.concat=ZR;function eL(t,e){if(t.byteLength!==e.byteLength)return!1;const n=new Int8Array(t),r=new Int8Array(e);for(let s=0;s!==t.byteLength;s++)if(n[s]!==r[s])return!1;return!0}zs.equal=eL;(function(t){var e=ge&&ge.__createBinding||(Object.create?function(u,d,h,f){f===void 0&&(f=h);var m=Object.getOwnPropertyDescriptor(d,h);(!m||("get"in m?!d.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return d[h]}}),Object.defineProperty(u,f,m)}:function(u,d,h,f){f===void 0&&(f=h),u[f]=d[h]}),n=ge&&ge.__exportStar||function(u,d){for(var h in u)h!=="default"&&!Object.prototype.hasOwnProperty.call(d,h)&&e(d,u,h)};Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.stringToHex=t.hexToString=t.hexToBytes=t.bytesToHex=void 0;const r=Fn,s=zs,i=u=>(0,r.bytesToHex)(u instanceof Uint8Array?u:Uint8Array.from(u)).toUpperCase();t.bytesToHex=i;const a=u=>{const d=u.length,h=new Uint8Array(d/2);if(!s.HEX_REGEX.test(u))throw new Error("Invalid hex string");for(let f=0;f<h.length;f++){const m=f*2,_=u.slice(m,m+2),S=Number.parseInt(_,16);if(Number.isNaN(S)||S<0)throw new Error("Invalid byte sequence");h[f]=S}return h};t.hexToBytes=a;const l=(u,d="utf8")=>new TextDecoder(d).decode((0,t.hexToBytes)(u));t.hexToString=l;const c=u=>(0,t.bytesToHex)(new TextEncoder().encode(u));t.stringToHex=c,t.randomBytes=r.randomBytes,n(zs,t)})(at);var Un={},mt={},hp={};(function(t){/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.bytes=t.stringToBytes=t.str=t.bytesToString=t.hex=t.utf8=t.bech32m=t.bech32=t.base58check=t.createBase58check=t.base58xmr=t.base58xrp=t.base58flickr=t.base58=t.base64urlnopad=t.base64url=t.base64nopad=t.base64=t.base32crockford=t.base32hexnopad=t.base32hex=t.base32nopad=t.base32=t.base16=t.utils=t.assertNumber=void 0;function e(k){return k instanceof Uint8Array||ArrayBuffer.isView(k)&&k.constructor.name==="Uint8Array"}function n(k,R){return Array.isArray(R)?R.length===0?!0:k?R.every(D=>typeof D=="string"):R.every(D=>Number.isSafeInteger(D)):!1}function r(k){if(typeof k!="function")throw new Error("function expected");return!0}function s(k,R){if(typeof R!="string")throw new Error(`${k}: string expected`);return!0}function i(k){if(!Number.isSafeInteger(k))throw new Error(`invalid integer: ${k}`)}t.assertNumber=i;function a(k){if(!Array.isArray(k))throw new Error("array expected")}function l(k,R){if(!n(!0,R))throw new Error(`${k}: array of strings expected`)}function c(k,R){if(!n(!1,R))throw new Error(`${k}: array of numbers expected`)}function u(...k){const R=X=>X,D=(X,q)=>Z=>X(q(Z)),V=k.map(X=>X.encode).reduceRight(D,R),se=k.map(X=>X.decode).reduce(D,R);return{encode:V,decode:se}}function d(k){const R=typeof k=="string"?k.split(""):k,D=R.length;l("alphabet",R);const V=new Map(R.map((se,X)=>[se,X]));return{encode:se=>(a(se),se.map(X=>{if(!Number.isSafeInteger(X)||X<0||X>=D)throw new Error(`alphabet.encode: digit index outside alphabet "${X}". Allowed: ${k}`);return R[X]})),decode:se=>(a(se),se.map(X=>{s("alphabet.decode",X);const q=V.get(X);if(q===void 0)throw new Error(`Unknown letter: "${X}". Allowed: ${k}`);return q}))}}function h(k=""){return s("join",k),{encode:R=>(l("join.decode",R),R.join(k)),decode:R=>(s("join.decode",R),R.split(k))}}function f(k,R="="){return i(k),s("padding",R),{encode(D){for(l("padding.encode",D);D.length*k%8;)D.push(R);return D},decode(D){l("padding.decode",D);let V=D.length;if(V*k%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;V>0&&D[V-1]===R;V--)if((V-1)*k%8===0)throw new Error("padding: invalid, string has too much padding");return D.slice(0,V)}}}function m(k){return r(k),{encode:R=>R,decode:R=>k(R)}}function _(k,R,D){if(R<2)throw new Error(`convertRadix: invalid from=${R}, base cannot be less than 2`);if(D<2)throw new Error(`convertRadix: invalid to=${D}, base cannot be less than 2`);if(a(k),!k.length)return[];let V=0;const se=[],X=Array.from(k,Z=>{if(i(Z),Z<0||Z>=R)throw new Error(`invalid integer: ${Z}`);return Z}),q=X.length;for(;;){let Z=0,ue=!0;for(let ne=V;ne<q;ne++){const J=X[ne],N=R*Z,g=N+J;if(!Number.isSafeInteger(g)||N/R!==Z||g-J!==N)throw new Error("convertRadix: carry overflow");const I=g/D;Z=g%D;const T=Math.floor(I);if(X[ne]=T,!Number.isSafeInteger(T)||T*D+Z!==g)throw new Error("convertRadix: carry overflow");if(ue)T?ue=!1:V=ne;else continue}if(se.push(Z),ue)break}for(let Z=0;Z<k.length-1&&k[Z]===0;Z++)se.push(0);return se.reverse()}const S=(k,R)=>R===0?k:S(R,k%R),j=(k,R)=>k+(R-S(k,R)),y=(()=>{let k=[];for(let R=0;R<40;R++)k.push(2**R);return k})();function x(k,R,D,V){if(a(k),R<=0||R>32)throw new Error(`convertRadix2: wrong from=${R}`);if(D<=0||D>32)throw new Error(`convertRadix2: wrong to=${D}`);if(j(R,D)>32)throw new Error(`convertRadix2: carry overflow from=${R} to=${D} carryBits=${j(R,D)}`);let se=0,X=0;const q=y[R],Z=y[D]-1,ue=[];for(const ne of k){if(i(ne),ne>=q)throw new Error(`convertRadix2: invalid data word=${ne} from=${R}`);if(se=se<<R|ne,X+R>32)throw new Error(`convertRadix2: carry overflow pos=${X} from=${R}`);for(X+=R;X>=D;X-=D)ue.push((se>>X-D&Z)>>>0);const J=y[X];if(J===void 0)throw new Error("invalid carry");se&=J-1}if(se=se<<D-X&Z,!V&&X>=R)throw new Error("Excess padding");if(!V&&se>0)throw new Error(`Non-zero padding: ${se}`);return V&&X>0&&ue.push(se>>>0),ue}function b(k){i(k);const R=2**8;return{encode:D=>{if(!e(D))throw new Error("radix.encode input should be Uint8Array");return _(Array.from(D),R,k)},decode:D=>(c("radix.decode",D),Uint8Array.from(_(D,k,R)))}}function v(k,R=!1){if(i(k),k<=0||k>32)throw new Error("radix2: bits should be in (0..32]");if(j(8,k)>32||j(k,8)>32)throw new Error("radix2: carry overflow");return{encode:D=>{if(!e(D))throw new Error("radix2.encode input should be Uint8Array");return x(Array.from(D),8,k,!R)},decode:D=>(c("radix2.decode",D),Uint8Array.from(x(D,k,8,R)))}}function A(k){return r(k),function(...R){try{return k.apply(null,R)}catch{}}}function E(k,R){return i(k),r(R),{encode(D){if(!e(D))throw new Error("checksum.encode: input should be Uint8Array");const V=R(D).slice(0,k),se=new Uint8Array(D.length+k);return se.set(D),se.set(V,D.length),se},decode(D){if(!e(D))throw new Error("checksum.decode: input should be Uint8Array");const V=D.slice(0,-k),se=D.slice(-k),X=R(V).slice(0,k);for(let q=0;q<k;q++)if(X[q]!==se[q])throw new Error("Invalid checksum");return V}}}t.utils={alphabet:d,chain:u,checksum:E,convertRadix:_,convertRadix2:x,radix:b,radix2:v,join:h,padding:f},t.base16=u(v(4),d("0123456789ABCDEF"),h("")),t.base32=u(v(5),d("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),f(5),h("")),t.base32nopad=u(v(5),d("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),h("")),t.base32hex=u(v(5),d("0123456789ABCDEFGHIJKLMNOPQRSTUV"),f(5),h("")),t.base32hexnopad=u(v(5),d("0123456789ABCDEFGHIJKLMNOPQRSTUV"),h("")),t.base32crockford=u(v(5),d("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),h(""),m(k=>k.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),t.base64=u(v(6),d("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),f(6),h("")),t.base64nopad=u(v(6),d("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),h("")),t.base64url=u(v(6),d("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),f(6),h("")),t.base64urlnopad=u(v(6),d("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),h(""));const L=k=>u(b(58),d(k),h(""));t.base58=L("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),t.base58flickr=L("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),t.base58xrp=L("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const Y=[0,2,3,5,6,7,9,10,11];t.base58xmr={encode(k){let R="";for(let D=0;D<k.length;D+=8){const V=k.subarray(D,D+8);R+=t.base58.encode(V).padStart(Y[V.length],"1")}return R},decode(k){let R=[];for(let D=0;D<k.length;D+=11){const V=k.slice(D,D+11),se=Y.indexOf(V.length),X=t.base58.decode(V);for(let q=0;q<X.length-se;q++)if(X[q]!==0)throw new Error("base58xmr: wrong padding");R=R.concat(Array.from(X.slice(X.length-se)))}return Uint8Array.from(R)}};const ee=k=>u(E(4,R=>k(k(R))),t.base58);t.createBase58check=ee,t.base58check=t.createBase58check;const U=u(d("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),h("")),G=[996825010,642813549,513874426,1027748829,705979059];function ae(k){const R=k>>25;let D=(k&33554431)<<5;for(let V=0;V<G.length;V++)(R>>V&1)===1&&(D^=G[V]);return D}function he(k,R,D=1){const V=k.length;let se=1;for(let X=0;X<V;X++){const q=k.charCodeAt(X);if(q<33||q>126)throw new Error(`Invalid prefix (${k})`);se=ae(se)^q>>5}se=ae(se);for(let X=0;X<V;X++)se=ae(se)^k.charCodeAt(X)&31;for(let X of R)se=ae(se)^X;for(let X=0;X<6;X++)se=ae(se);return se^=D,U.encode(x([se%y[30]],30,5,!1))}function xe(k){const R=k==="bech32"?1:734539939,D=v(5),V=D.decode,se=D.encode,X=A(V);function q(N,g,I=90){s("bech32.encode prefix",N),e(g)&&(g=Array.from(g)),c("bech32.encode",g);const T=N.length;if(T===0)throw new TypeError(`Invalid prefix length ${T}`);const C=T+7+g.length;if(I!==!1&&C>I)throw new TypeError(`Length ${C} exceeds limit ${I}`);const P=N.toLowerCase(),H=he(P,g,R);return`${P}1${U.encode(g)}${H}`}function Z(N,g=90){s("bech32.decode input",N);const I=N.length;if(I<8||g!==!1&&I>g)throw new TypeError(`invalid string length: ${I} (${N}). Expected (8..${g})`);const T=N.toLowerCase();if(N!==T&&N!==N.toUpperCase())throw new Error("String must be lowercase or uppercase");const C=T.lastIndexOf("1");if(C===0||C===-1)throw new Error('Letter "1" must be present between prefix and data only');const P=T.slice(0,C),H=T.slice(C+1);if(H.length<6)throw new Error("Data must be at least 6 characters long");const M=U.decode(H).slice(0,-6),K=he(P,M,R);if(!H.endsWith(K))throw new Error(`Invalid checksum in ${N}: expected "${K}"`);return{prefix:P,words:M}}const ue=A(Z);function ne(N){const{prefix:g,words:I}=Z(N,!1);return{prefix:g,words:I,bytes:V(I)}}function J(N,g){return q(N,se(g))}return{encode:q,decode:Z,encodeFromBytes:J,decodeToBytes:ne,decodeUnsafe:ue,fromWords:V,fromWordsUnsafe:X,toWords:se}}t.bech32=xe("bech32"),t.bech32m=xe("bech32m"),t.utf8={encode:k=>new TextDecoder().decode(k),decode:k=>new TextEncoder().encode(k)},t.hex=u(v(4),d("0123456789abcdef"),h(""),m(k=>{if(typeof k!="string"||k.length%2!==0)throw new TypeError(`hex.decode: expected string, got ${typeof k} with length ${k.length}`);return k.toLowerCase()}));const de={utf8:t.utf8,hex:t.hex,base16:t.base16,base32:t.base32,base64:t.base64,base64url:t.base64url,base58:t.base58,base58xmr:t.base58xmr},$="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr",re=(k,R)=>{if(typeof k!="string"||!de.hasOwnProperty(k))throw new TypeError($);if(!e(R))throw new TypeError("bytesToString() expects Uint8Array");return de[k].encode(R)};t.bytesToString=re,t.str=t.bytesToString;const F=(k,R)=>{if(!de.hasOwnProperty(k))throw new TypeError($);if(typeof R!="string")throw new TypeError("stringToBytes() expects string");return de[k].decode(R)};t.stringToBytes=F,t.bytes=t.stringToBytes})(hp);var Ju={},Wr={},ei={};Object.defineProperty(ei,"__esModule",{value:!0});ei.HashMD=void 0;ei.setBigUint64=hA;ei.Chi=tL;ei.Maj=nL;const w0=Sr,vc=Fn;function hA(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),l=Number(n&i),c=r?4:0,u=r?0:4;t.setUint32(e+c,a,r),t.setUint32(e+u,l,r)}function tL(t,e,n){return t&e^~t&n}function nL(t,e,n){return t&e^t&n^e&n}class rL extends vc.Hash{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,vc.createView)(this.buffer)}update(e){(0,w0.aexists)(this);const{view:n,buffer:r,blockLen:s}=this;e=(0,vc.toBytes)(e);const i=e.length;for(let a=0;a<i;){const l=Math.min(s-this.pos,i-a);if(l===s){const c=(0,vc.createView)(e);for(;s<=i-a;a+=s)this.process(c,a);continue}r.set(e.subarray(a,a+l),this.pos),this.pos+=l,a+=l,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,w0.aexists)(this),(0,w0.aoutput)(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:a}=this;n[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(r,0),a=0);for(let h=a;h<s;h++)n[h]=0;hA(r,s-8,BigInt(this.length*8),i),this.process(r,0);const l=(0,vc.createView)(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)l.setUint32(4*h,d[h],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:a,pos:l}=this;return e.length=s,e.pos=l,e.finished=i,e.destroyed=a,s%n&&e.buffer.set(r),e}}ei.HashMD=rL;Object.defineProperty(Wr,"__esModule",{value:!0});Wr.sha224=Wr.sha256=Wr.SHA256=void 0;const b0=ei,dr=Fn,sL=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ui=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),di=new Uint32Array(64);class Dx extends b0.HashMD{constructor(){super(64,32,8,!1),this.A=ui[0]|0,this.B=ui[1]|0,this.C=ui[2]|0,this.D=ui[3]|0,this.E=ui[4]|0,this.F=ui[5]|0,this.G=ui[6]|0,this.H=ui[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:a,G:l,H:c}=this;return[e,n,r,s,i,a,l,c]}set(e,n,r,s,i,a,l,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=l|0,this.H=c|0}process(e,n){for(let h=0;h<16;h++,n+=4)di[h]=e.getUint32(n,!1);for(let h=16;h<64;h++){const f=di[h-15],m=di[h-2],_=(0,dr.rotr)(f,7)^(0,dr.rotr)(f,18)^f>>>3,S=(0,dr.rotr)(m,17)^(0,dr.rotr)(m,19)^m>>>10;di[h]=S+di[h-7]+_+di[h-16]|0}let{A:r,B:s,C:i,D:a,E:l,F:c,G:u,H:d}=this;for(let h=0;h<64;h++){const f=(0,dr.rotr)(l,6)^(0,dr.rotr)(l,11)^(0,dr.rotr)(l,25),m=d+f+(0,b0.Chi)(l,c,u)+sL[h]+di[h]|0,S=((0,dr.rotr)(r,2)^(0,dr.rotr)(r,13)^(0,dr.rotr)(r,22))+(0,b0.Maj)(r,s,i)|0;d=u,u=c,c=l,l=a+m|0,a=i,i=s,s=r,r=m+S|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,l=l+this.E|0,c=c+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(r,s,i,a,l,c,u,d)}roundClean(){di.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}Wr.SHA256=Dx;class iL extends Dx{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}Wr.sha256=(0,dr.wrapConstructor)(()=>new Dx);Wr.sha224=(0,dr.wrapConstructor)(()=>new iL);var Qu={},Bx={};Object.defineProperty(Bx,"__esModule",{value:!0});function oL(t){return Array.isArray(t)?new Uint8Array(t):t}Bx.default=oL;var aL=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qu,"__esModule",{value:!0});const v_=aL(Bx);function lL(t){function e(n){return t((0,v_.default)(n))}return e.create=()=>{const n=t.create();return{update(r){return n.update((0,v_.default)(r)),this},digest(){return n.digest()}}},e}Qu.default=lL;var cL=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ju,"__esModule",{value:!0});Ju.sha256=void 0;const uL=Wr,dL=cL(Qu);Ju.sha256=(0,dL.default)(uL.sha256);var Dl={};Object.defineProperty(Dl,"__esModule",{value:!0});Dl.concatArgs=Dl.arrayEqual=void 0;function hL(t,e){return t.length!==e.length?!1:t.every((n,r)=>n===e[r])}Dl.arrayEqual=hL;function fL(t){return typeof t=="number"}function pL(...t){return t.flatMap(e=>fL(e)?[e]:Array.from(e))}Dl.concatArgs=pL;Object.defineProperty(mt,"__esModule",{value:!0});mt.isValidClassicAddress=mt.decodeAccountPublic=mt.encodeAccountPublic=mt.encodeNodePublic=mt.decodeNodePublic=mt.decodeAddress=mt.decodeAccountID=mt.encodeAddress=mt.encodeAccountID=mt.decodeSeed=mt.encodeSeed=mt.codec=void 0;const mL=hp,gL=Ju,Ud=Dl;class yL{constructor(e){this._sha256=e.sha256,this._codec=mL.base58xrp}encode(e,n){const r=n.versions;return this._encodeVersioned(e,r,n.expectedLength)}decode(e,n){var r;const s=n.versions,i=n.versionTypes,a=this.decodeChecked(e);if(s.length>1&&!n.expectedLength)throw new Error("expectedLength is required because there are >= 2 possible versions");const l=typeof s[0]=="number"?1:s[0].length,c=(r=n.expectedLength)!==null&&r!==void 0?r:a.length-l,u=a.slice(0,-c),d=a.slice(-c);for(let h=0;h<s.length;h++){const f=Array.isArray(s[h])?s[h]:[s[h]];if((0,Ud.arrayEqual)(u,f))return{version:f,bytes:d,type:i?i[h]:null}}throw new Error("version_invalid: version bytes do not match any of the provided version(s)")}encodeChecked(e){const n=this._sha256(this._sha256(e)).slice(0,4);return this._encodeRaw(Uint8Array.from((0,Ud.concatArgs)(e,n)))}decodeChecked(e){const n=this._decodeRaw(e);if(n.byteLength<5)throw new Error("invalid_input_size: decoded data must have length >= 5");if(!this._verifyCheckSum(n))throw new Error("checksum_invalid");return n.slice(0,-4)}_encodeVersioned(e,n,r){if(!xA(e,r))throw new Error("unexpected_payload_length: bytes.length does not match expectedLength. Ensure that the bytes are a Uint8Array.");return this.encodeChecked((0,Ud.concatArgs)(n,e))}_encodeRaw(e){return this._codec.encode(Uint8Array.from(e))}_decodeRaw(e){return this._codec.decode(e)}_verifyCheckSum(e){const n=this._sha256(this._sha256(e.slice(0,-4))).slice(0,4),r=e.slice(-4);return(0,Ud.arrayEqual)(n,r)}}const fA=0,pA=35,mA=33,gA=28,yA=[1,225,75],vL={sha256:gL.sha256},ti=new yL(vL);mt.codec=ti;function xL(t,e){if(!xA(t,16))throw new Error("entropy must have length 16");const n={expectedLength:16,versions:e==="ed25519"?yA:[mA]};return ti.encode(t,n)}mt.encodeSeed=xL;function wL(t,e={versionTypes:["ed25519","secp256k1"],versions:[yA,mA],expectedLength:16}){return ti.decode(t,e)}mt.decodeSeed=wL;function vA(t){const e={versions:[fA],expectedLength:20};return ti.encode(t,e)}mt.encodeAccountID=vA;mt.encodeAddress=vA;function Fx(t){const e={versions:[fA],expectedLength:20};return ti.decode(t,e).bytes}mt.decodeAccountID=Fx;mt.decodeAddress=Fx;function bL(t){const e={versions:[gA],expectedLength:33};return ti.decode(t,e).bytes}mt.decodeNodePublic=bL;function _L(t){const e={versions:[gA],expectedLength:33};return ti.encode(t,e)}mt.encodeNodePublic=_L;function EL(t){const e={versions:[pA],expectedLength:33};return ti.encode(t,e)}mt.encodeAccountPublic=EL;function SL(t){const e={versions:[pA],expectedLength:33};return ti.decode(t,e).bytes}mt.decodeAccountPublic=SL;function NL(t){try{Fx(t)}catch{return!1}return!0}mt.isValidClassicAddress=NL;function xA(t,e){return"byteLength"in t?t.byteLength===e:t.length===e}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isValidXAddress=t.decodeXAddress=t.xAddressToClassicAddress=t.encodeXAddress=t.classicAddressToXAddress=t.isValidClassicAddress=t.decodeAccountPublic=t.encodeAccountPublic=t.decodeNodePublic=t.encodeNodePublic=t.decodeAccountID=t.encodeAccountID=t.decodeSeed=t.encodeSeed=t.codec=void 0;const e=at,n=mt;Object.defineProperty(t,"codec",{enumerable:!0,get:function(){return n.codec}}),Object.defineProperty(t,"encodeSeed",{enumerable:!0,get:function(){return n.encodeSeed}}),Object.defineProperty(t,"decodeSeed",{enumerable:!0,get:function(){return n.decodeSeed}}),Object.defineProperty(t,"encodeAccountID",{enumerable:!0,get:function(){return n.encodeAccountID}}),Object.defineProperty(t,"decodeAccountID",{enumerable:!0,get:function(){return n.decodeAccountID}}),Object.defineProperty(t,"encodeNodePublic",{enumerable:!0,get:function(){return n.encodeNodePublic}}),Object.defineProperty(t,"decodeNodePublic",{enumerable:!0,get:function(){return n.decodeNodePublic}}),Object.defineProperty(t,"encodeAccountPublic",{enumerable:!0,get:function(){return n.encodeAccountPublic}}),Object.defineProperty(t,"decodeAccountPublic",{enumerable:!0,get:function(){return n.decodeAccountPublic}}),Object.defineProperty(t,"isValidClassicAddress",{enumerable:!0,get:function(){return n.isValidClassicAddress}});const r={main:Uint8Array.from([5,68]),test:Uint8Array.from([4,147])},s=4294967295;function i(f,m,_){const S=(0,n.decodeAccountID)(f);return a(S,m,_)}t.classicAddressToXAddress=i;function a(f,m,_){if(f.length!==20)throw new Error("Account ID must be 20 bytes");if(m!==!1&&m>s)throw new Error("Invalid tag");const S=m||0,j=m===!1||m==null?0:1,y=(0,e.concat)([_?r.test:r.main,f,Uint8Array.from([j,S&255,S>>8&255,S>>16&255,S>>24&255,0,0,0,0])]);return n.codec.encodeChecked(y)}t.encodeXAddress=a;function l(f){const{accountId:m,tag:_,test:S}=c(f);return{classicAddress:(0,n.encodeAccountID)(m),tag:_,test:S}}t.xAddressToClassicAddress=l;function c(f){const m=n.codec.decodeChecked(f),_=u(m),S=m.slice(2,22),j=d(m);return{accountId:S,tag:j,test:_}}t.decodeXAddress=c;function u(f){const m=f.slice(0,2);if((0,e.equal)(r.main,m))return!1;if((0,e.equal)(r.test,m))return!0;throw new Error("Invalid X-address: bad prefix")}function d(f){const m=f[22];if(m>=2)throw new Error("Unsupported X-address");if(m===1)return f[23]+f[24]*256+f[25]*65536+f[26]*16777216;if(m!==0)throw new Error("flag must be zero to indicate no tag");if(!(0,e.equal)((0,e.hexToBytes)("0000000000000000"),f.slice(23,23+8)))throw new Error("remaining bytes must be zero");return!1}function h(f){try{c(f)}catch{return!1}return!0}t.isValidXAddress=h})(Un);var Nr={},wA={},ni={};const TL=[["Generic",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:0,type:"Unknown"}],["Invalid",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:-1,type:"Unknown"}],["ObjectEndMarker",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"STObject"}],["ArrayEndMarker",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"STArray"}],["taker_gets_funded",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:258,type:"Amount"}],["taker_pays_funded",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:259,type:"Amount"}],["LedgerEntryType",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"UInt16"}],["TransactionType",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"UInt16"}],["SignerWeight",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"UInt16"}],["TransferFee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"UInt16"}],["TradingFee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"UInt16"}],["DiscountedFee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:6,type:"UInt16"}],["Version",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"UInt16"}],["HookStateChangeCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:17,type:"UInt16"}],["HookEmitCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"UInt16"}],["HookExecutionIndex",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"UInt16"}],["HookApiVersion",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:20,type:"UInt16"}],["LedgerFixType",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:21,type:"UInt16"}],["NetworkID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"UInt32"}],["Flags",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"UInt32"}],["SourceTag",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"UInt32"}],["Sequence",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"UInt32"}],["PreviousTxnLgrSeq",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"UInt32"}],["LedgerSequence",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:6,type:"UInt32"}],["CloseTime",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:7,type:"UInt32"}],["ParentCloseTime",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:8,type:"UInt32"}],["SigningTime",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:9,type:"UInt32"}],["Expiration",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:10,type:"UInt32"}],["TransferRate",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:11,type:"UInt32"}],["WalletSize",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:12,type:"UInt32"}],["OwnerCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:13,type:"UInt32"}],["DestinationTag",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:14,type:"UInt32"}],["LastUpdateTime",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:15,type:"UInt32"}],["HighQualityIn",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"UInt32"}],["HighQualityOut",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:17,type:"UInt32"}],["LowQualityIn",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"UInt32"}],["LowQualityOut",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"UInt32"}],["QualityIn",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:20,type:"UInt32"}],["QualityOut",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:21,type:"UInt32"}],["StampEscrow",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:22,type:"UInt32"}],["BondAmount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:23,type:"UInt32"}],["LoadFee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:24,type:"UInt32"}],["OfferSequence",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:25,type:"UInt32"}],["FirstLedgerSequence",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:26,type:"UInt32"}],["LastLedgerSequence",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:27,type:"UInt32"}],["TransactionIndex",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:28,type:"UInt32"}],["OperationLimit",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:29,type:"UInt32"}],["ReferenceFeeUnits",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:30,type:"UInt32"}],["ReserveBase",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:31,type:"UInt32"}],["ReserveIncrement",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:32,type:"UInt32"}],["SetFlag",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:33,type:"UInt32"}],["ClearFlag",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:34,type:"UInt32"}],["SignerQuorum",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:35,type:"UInt32"}],["CancelAfter",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:36,type:"UInt32"}],["FinishAfter",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:37,type:"UInt32"}],["SignerListID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:38,type:"UInt32"}],["SettleDelay",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:39,type:"UInt32"}],["TicketCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:40,type:"UInt32"}],["TicketSequence",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:41,type:"UInt32"}],["NFTokenTaxon",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:42,type:"UInt32"}],["MintedNFTokens",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:43,type:"UInt32"}],["BurnedNFTokens",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:44,type:"UInt32"}],["HookStateCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:45,type:"UInt32"}],["EmitGeneration",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:46,type:"UInt32"}],["VoteWeight",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:48,type:"UInt32"}],["FirstNFTokenSequence",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:50,type:"UInt32"}],["OracleDocumentID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:51,type:"UInt32"}],["IndexNext",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"UInt64"}],["IndexPrevious",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"UInt64"}],["BookNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"UInt64"}],["OwnerNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"UInt64"}],["BaseFee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"UInt64"}],["ExchangeRate",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:6,type:"UInt64"}],["LowNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:7,type:"UInt64"}],["HighNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:8,type:"UInt64"}],["DestinationNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:9,type:"UInt64"}],["Cookie",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:10,type:"UInt64"}],["ServerVersion",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:11,type:"UInt64"}],["NFTokenOfferNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:12,type:"UInt64"}],["EmitBurden",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:13,type:"UInt64"}],["HookOn",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"UInt64"}],["HookInstructionCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:17,type:"UInt64"}],["HookReturnCode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"UInt64"}],["ReferenceCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"UInt64"}],["XChainClaimID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:20,type:"UInt64"}],["XChainAccountCreateCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:21,type:"UInt64"}],["XChainAccountClaimCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:22,type:"UInt64"}],["AssetPrice",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:23,type:"UInt64"}],["MaximumAmount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:24,type:"UInt64"}],["OutstandingAmount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:25,type:"UInt64"}],["MPTAmount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:26,type:"UInt64"}],["IssuerNode",{nth:27,isVLEncoded:!1,isSerialized:!0,isSigningField:!0,type:"UInt64"}],["SubjectNode",{nth:28,isVLEncoded:!1,isSerialized:!0,isSigningField:!0,type:"UInt64"}],["EmailHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"Hash128"}],["LedgerHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"Hash256"}],["ParentHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"Hash256"}],["TransactionHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"Hash256"}],["AccountHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"Hash256"}],["PreviousTxnID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"Hash256"}],["LedgerIndex",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:6,type:"Hash256"}],["WalletLocator",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:7,type:"Hash256"}],["RootIndex",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:8,type:"Hash256"}],["AccountTxnID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:9,type:"Hash256"}],["NFTokenID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:10,type:"Hash256"}],["EmitParentTxnID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:11,type:"Hash256"}],["EmitNonce",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:12,type:"Hash256"}],["EmitHookHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:13,type:"Hash256"}],["AMMID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:14,type:"Hash256"}],["BookDirectory",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"Hash256"}],["InvoiceID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:17,type:"Hash256"}],["Nickname",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"Hash256"}],["Amendment",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"Hash256"}],["Digest",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:21,type:"Hash256"}],["Channel",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:22,type:"Hash256"}],["ConsensusHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:23,type:"Hash256"}],["CheckID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:24,type:"Hash256"}],["ValidatedHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:25,type:"Hash256"}],["PreviousPageMin",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:26,type:"Hash256"}],["NextPageMin",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:27,type:"Hash256"}],["NFTokenBuyOffer",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:28,type:"Hash256"}],["NFTokenSellOffer",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:29,type:"Hash256"}],["HookStateKey",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:30,type:"Hash256"}],["HookHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:31,type:"Hash256"}],["HookNamespace",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:32,type:"Hash256"}],["HookSetTxnID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:33,type:"Hash256"}],["hash",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:257,type:"Hash256"}],["index",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:258,type:"Hash256"}],["Amount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"Amount"}],["Balance",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"Amount"}],["LimitAmount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"Amount"}],["TakerPays",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"Amount"}],["TakerGets",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"Amount"}],["LowLimit",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:6,type:"Amount"}],["HighLimit",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:7,type:"Amount"}],["Fee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:8,type:"Amount"}],["SendMax",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:9,type:"Amount"}],["DeliverMin",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:10,type:"Amount"}],["Amount2",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:11,type:"Amount"}],["BidMin",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:12,type:"Amount"}],["BidMax",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:13,type:"Amount"}],["MinimumOffer",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"Amount"}],["RippleEscrow",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:17,type:"Amount"}],["DeliveredAmount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"Amount"}],["NFTokenBrokerFee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"Amount"}],["BaseFeeDrops",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:22,type:"Amount"}],["ReserveBaseDrops",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:23,type:"Amount"}],["ReserveIncrementDrops",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:24,type:"Amount"}],["LPTokenOut",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:25,type:"Amount"}],["LPTokenIn",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:26,type:"Amount"}],["EPrice",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:27,type:"Amount"}],["Price",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:28,type:"Amount"}],["SignatureReward",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:29,type:"Amount"}],["MinAccountCreateAmount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:30,type:"Amount"}],["LPTokenBalance",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:31,type:"Amount"}],["PublicKey",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:1,type:"Blob"}],["MessageKey",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:2,type:"Blob"}],["SigningPubKey",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:3,type:"Blob"}],["TxnSignature",{isSerialized:!0,isSigningField:!1,isVLEncoded:!0,nth:4,type:"Blob"}],["URI",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:5,type:"Blob"}],["Signature",{isSerialized:!0,isSigningField:!1,isVLEncoded:!0,nth:6,type:"Blob"}],["Domain",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:7,type:"Blob"}],["FundCode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:8,type:"Blob"}],["RemoveCode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:9,type:"Blob"}],["ExpireCode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:10,type:"Blob"}],["CreateCode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:11,type:"Blob"}],["MemoType",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:12,type:"Blob"}],["MemoData",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:13,type:"Blob"}],["MemoFormat",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:14,type:"Blob"}],["Fulfillment",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:16,type:"Blob"}],["Condition",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:17,type:"Blob"}],["MasterSignature",{isSerialized:!0,isSigningField:!1,isVLEncoded:!0,nth:18,type:"Blob"}],["UNLModifyValidator",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:19,type:"Blob"}],["ValidatorToDisable",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:20,type:"Blob"}],["ValidatorToReEnable",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:21,type:"Blob"}],["HookStateData",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:22,type:"Blob"}],["HookReturnString",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:23,type:"Blob"}],["HookParameterName",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:24,type:"Blob"}],["HookParameterValue",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:25,type:"Blob"}],["DIDDocument",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:26,type:"Blob"}],["Data",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:27,type:"Blob"}],["AssetClass",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:28,type:"Blob"}],["Provider",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:29,type:"Blob"}],["MPTokenMetadata",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:30,type:"Blob"}],["CredentialType",{nth:31,isVLEncoded:!0,isSerialized:!0,isSigningField:!0,type:"Blob"}],["Account",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:1,type:"AccountID"}],["Owner",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:2,type:"AccountID"}],["Destination",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:3,type:"AccountID"}],["Issuer",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:4,type:"AccountID"}],["Authorize",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:5,type:"AccountID"}],["Unauthorize",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:6,type:"AccountID"}],["RegularKey",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:8,type:"AccountID"}],["NFTokenMinter",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:9,type:"AccountID"}],["EmitCallback",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:10,type:"AccountID"}],["Holder",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:11,type:"AccountID"}],["HookAccount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:16,type:"AccountID"}],["OtherChainSource",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:18,type:"AccountID"}],["OtherChainDestination",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:19,type:"AccountID"}],["AttestationSignerAccount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:20,type:"AccountID"}],["AttestationRewardAccount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:21,type:"AccountID"}],["LockingChainDoor",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:22,type:"AccountID"}],["IssuingChainDoor",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:23,type:"AccountID"}],["Subject",{nth:24,isVLEncoded:!0,isSerialized:!0,isSigningField:!0,type:"AccountID"}],["TransactionMetaData",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"STObject"}],["CreatedNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"STObject"}],["DeletedNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"STObject"}],["ModifiedNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"STObject"}],["PreviousFields",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:6,type:"STObject"}],["FinalFields",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:7,type:"STObject"}],["NewFields",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:8,type:"STObject"}],["TemplateEntry",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:9,type:"STObject"}],["Memo",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:10,type:"STObject"}],["SignerEntry",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:11,type:"STObject"}],["NFToken",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:12,type:"STObject"}],["EmitDetails",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:13,type:"STObject"}],["Hook",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:14,type:"STObject"}],["Signer",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"STObject"}],["Majority",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"STObject"}],["DisabledValidator",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"STObject"}],["EmittedTxn",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:20,type:"STObject"}],["HookExecution",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:21,type:"STObject"}],["HookDefinition",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:22,type:"STObject"}],["HookParameter",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:23,type:"STObject"}],["HookGrant",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:24,type:"STObject"}],["VoteEntry",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:25,type:"STObject"}],["AuctionSlot",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:26,type:"STObject"}],["AuthAccount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:27,type:"STObject"}],["XChainClaimProofSig",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:28,type:"STObject"}],["XChainCreateAccountProofSig",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:29,type:"STObject"}],["XChainClaimAttestationCollectionElement",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:30,type:"STObject"}],["XChainCreateAccountAttestationCollectionElement",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:31,type:"STObject"}],["PriceData",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:32,type:"STObject"}],["Credential",{nth:33,isVLEncoded:!1,isSerialized:!0,isSigningField:!0,type:"STObject"}],["Signers",{isSerialized:!0,isSigningField:!1,isVLEncoded:!1,nth:3,type:"STArray"}],["SignerEntries",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"STArray"}],["Template",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"STArray"}],["Necessary",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:6,type:"STArray"}],["Sufficient",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:7,type:"STArray"}],["AffectedNodes",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:8,type:"STArray"}],["Memos",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:9,type:"STArray"}],["NFTokens",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:10,type:"STArray"}],["Hooks",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:11,type:"STArray"}],["VoteSlots",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:12,type:"STArray"}],["Majorities",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"STArray"}],["DisabledValidators",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:17,type:"STArray"}],["HookExecutions",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"STArray"}],["HookParameters",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"STArray"}],["HookGrants",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:20,type:"STArray"}],["XChainClaimAttestations",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:21,type:"STArray"}],["XChainCreateAccountAttestations",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:22,type:"STArray"}],["PriceDataSeries",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:24,type:"STArray"}],["AuthAccounts",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:25,type:"STArray"}],["AuthorizeCredentials",{nth:26,isVLEncoded:!1,isSerialized:!0,isSigningField:!0,type:"STArray"}],["UnauthorizeCredentials",{nth:27,isVLEncoded:!1,isSerialized:!0,isSigningField:!0,type:"STArray"}],["CloseResolution",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"UInt8"}],["Method",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"UInt8"}],["TransactionResult",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"UInt8"}],["Scale",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"UInt8"}],["AssetScale",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"UInt8"}],["TickSize",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"UInt8"}],["UNLModifyDisabling",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:17,type:"UInt8"}],["HookResult",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"UInt8"}],["WasLockingChainSend",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"UInt8"}],["TakerPaysCurrency",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"Hash160"}],["TakerPaysIssuer",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"Hash160"}],["TakerGetsCurrency",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"Hash160"}],["TakerGetsIssuer",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"Hash160"}],["Paths",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"PathSet"}],["Indexes",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:1,type:"Vector256"}],["Hashes",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:2,type:"Vector256"}],["Amendments",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:3,type:"Vector256"}],["NFTokenOffers",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:4,type:"Vector256"}],["CredentialIDs",{nth:5,isVLEncoded:!0,isSerialized:!0,isSigningField:!0,type:"Vector256"}],["MPTokenIssuanceID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"Hash192"}],["LockingChainIssue",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"Issue"}],["IssuingChainIssue",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"Issue"}],["Asset",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"Issue"}],["Asset2",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"Issue"}],["XChainBridge",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"XChainBridge"}],["BaseAsset",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"Currency"}],["QuoteAsset",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"Currency"}],["Transaction",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:257,type:"Transaction"}],["LedgerEntry",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:257,type:"LedgerEntry"}],["Validation",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:257,type:"Validation"}],["Metadata",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:257,type:"Metadata"}]],AL={AMM:121,AccountRoot:97,Amendments:102,Bridge:105,Check:67,DID:73,DepositPreauth:112,DirectoryNode:100,Escrow:117,FeeSettings:115,Invalid:-1,LedgerHashes:104,MPToken:127,MPTokenIssuance:126,NFTokenOffer:55,NFTokenPage:80,NegativeUNL:78,Offer:111,Oracle:128,Credential:129,PayChannel:120,RippleState:114,SignerList:83,Ticket:84,XChainOwnedClaimID:113,XChainOwnedCreateAccountClaimID:116},CL={tecAMM_ACCOUNT:168,tecAMM_BALANCE:163,tecAMM_EMPTY:166,tecAMM_FAILED:164,tecAMM_INVALID_TOKENS:165,tecAMM_NOT_EMPTY:167,tecARRAY_EMPTY:190,tecARRAY_TOO_LARGE:191,tecBAD_CREDENTIALS:193,tecCANT_ACCEPT_OWN_NFTOKEN_OFFER:158,tecCLAIM:100,tecCRYPTOCONDITION_ERROR:146,tecDIR_FULL:121,tecDST_TAG_NEEDED:143,tecDUPLICATE:149,tecEMPTY_DID:187,tecEXPIRED:148,tecFAILED_PROCESSING:105,tecFROZEN:137,tecHAS_OBLIGATIONS:151,tecINCOMPLETE:169,tecINSUFFICIENT_FUNDS:159,tecINSUFFICIENT_PAYMENT:161,tecINSUFFICIENT_RESERVE:141,tecINSUFF_FEE:136,tecINSUF_RESERVE_LINE:122,tecINSUF_RESERVE_OFFER:123,tecINTERNAL:144,tecINVALID_UPDATE_TIME:188,tecINVARIANT_FAILED:147,tecKILLED:150,tecLOCKED:192,tecMAX_SEQUENCE_REACHED:154,tecNEED_MASTER_KEY:142,tecNFTOKEN_BUY_SELL_MISMATCH:156,tecNFTOKEN_OFFER_TYPE_MISMATCH:157,tecNO_ALTERNATIVE_KEY:130,tecNO_AUTH:134,tecNO_DST:124,tecNO_DST_INSUF_XRP:125,tecNO_ENTRY:140,tecNO_ISSUER:133,tecNO_LINE:135,tecNO_LINE_INSUF_RESERVE:126,tecNO_LINE_REDUNDANT:127,tecNO_PERMISSION:139,tecNO_REGULAR_KEY:131,tecNO_SUITABLE_NFTOKEN_PAGE:155,tecNO_TARGET:138,tecOBJECT_NOT_FOUND:160,tecOVERSIZE:145,tecOWNERS:132,tecPATH_DRY:128,tecPATH_PARTIAL:101,tecTOKEN_PAIR_NOT_FOUND:189,tecTOO_SOON:152,tecUNFUNDED:129,tecUNFUNDED_ADD:102,tecUNFUNDED_AMM:162,tecUNFUNDED_OFFER:103,tecUNFUNDED_PAYMENT:104,tecXCHAIN_ACCOUNT_CREATE_PAST:181,tecXCHAIN_ACCOUNT_CREATE_TOO_MANY:182,tecXCHAIN_BAD_CLAIM_ID:172,tecXCHAIN_BAD_PUBLIC_KEY_ACCOUNT_PAIR:185,tecXCHAIN_BAD_TRANSFER_ISSUE:170,tecXCHAIN_CLAIM_NO_QUORUM:173,tecXCHAIN_CREATE_ACCOUNT_DISABLED:186,tecXCHAIN_CREATE_ACCOUNT_NONXRP_ISSUE:175,tecXCHAIN_INSUFF_CREATE_AMOUNT:180,tecXCHAIN_NO_CLAIM_ID:171,tecXCHAIN_NO_SIGNERS_LIST:178,tecXCHAIN_PAYMENT_FAILED:183,tecXCHAIN_PROOF_UNKNOWN_KEY:174,tecXCHAIN_REWARD_MISMATCH:177,tecXCHAIN_SELF_COMMIT:184,tecXCHAIN_SENDING_ACCOUNT_MISMATCH:179,tecXCHAIN_WRONG_CHAIN:176,tefALREADY:-198,tefBAD_ADD_AUTH:-197,tefBAD_AUTH:-196,tefBAD_AUTH_MASTER:-183,tefBAD_LEDGER:-195,tefBAD_QUORUM:-185,tefBAD_SIGNATURE:-186,tefCREATED:-194,tefEXCEPTION:-193,tefFAILURE:-199,tefINTERNAL:-192,tefINVALID_LEDGER_FIX_TYPE:-178,tefINVARIANT_FAILED:-182,tefMASTER_DISABLED:-188,tefMAX_LEDGER:-187,tefNFTOKEN_IS_NOT_TRANSFERABLE:-179,tefNOT_MULTI_SIGNING:-184,tefNO_AUTH_REQUIRED:-191,tefNO_TICKET:-180,tefPAST_SEQ:-190,tefTOO_BIG:-181,tefWRONG_PRIOR:-189,telBAD_DOMAIN:-398,telBAD_PATH_COUNT:-397,telBAD_PUBLIC_KEY:-396,telCAN_NOT_QUEUE:-392,telCAN_NOT_QUEUE_BALANCE:-391,telCAN_NOT_QUEUE_BLOCKED:-389,telCAN_NOT_QUEUE_BLOCKS:-390,telCAN_NOT_QUEUE_FEE:-388,telCAN_NOT_QUEUE_FULL:-387,telENV_RPC_FAILED:-383,telFAILED_PROCESSING:-395,telINSUF_FEE_P:-394,telLOCAL_ERROR:-399,telNETWORK_ID_MAKES_TX_NON_CANONICAL:-384,telNO_DST_PARTIAL:-393,telREQUIRES_NETWORK_ID:-385,telWRONG_NETWORK:-386,temARRAY_EMPTY:-253,temARRAY_TOO_LARGE:-252,temBAD_AMM_TOKENS:-261,temBAD_AMOUNT:-298,temBAD_CURRENCY:-297,temBAD_EXPIRATION:-296,temBAD_FEE:-295,temBAD_ISSUER:-294,temBAD_LIMIT:-293,temBAD_NFTOKEN_TRANSFER_FEE:-262,temBAD_OFFER:-292,temBAD_PATH:-291,temBAD_PATH_LOOP:-290,temBAD_QUORUM:-271,temBAD_REGKEY:-289,temBAD_SEND_XRP_LIMIT:-288,temBAD_SEND_XRP_MAX:-287,temBAD_SEND_XRP_NO_DIRECT:-286,temBAD_SEND_XRP_PARTIAL:-285,temBAD_SEND_XRP_PATHS:-284,temBAD_SEQUENCE:-283,temBAD_SIGNATURE:-282,temBAD_SIGNER:-272,temBAD_SRC_ACCOUNT:-281,temBAD_TICK_SIZE:-269,temBAD_TRANSFER_FEE:-251,temBAD_TRANSFER_RATE:-280,temBAD_WEIGHT:-270,temCANNOT_PREAUTH_SELF:-267,temDISABLED:-273,temDST_IS_SRC:-279,temDST_NEEDED:-278,temEMPTY_DID:-254,temINVALID:-277,temINVALID_ACCOUNT_ID:-268,temINVALID_COUNT:-266,temINVALID_FLAG:-276,temMALFORMED:-299,temREDUNDANT:-275,temRIPPLE_EMPTY:-274,temSEQ_AND_TICKET:-263,temUNCERTAIN:-265,temUNKNOWN:-264,temXCHAIN_BAD_PROOF:-259,temXCHAIN_BRIDGE_BAD_ISSUES:-258,temXCHAIN_BRIDGE_BAD_MIN_ACCOUNT_CREATE_AMOUNT:-256,temXCHAIN_BRIDGE_BAD_REWARD_AMOUNT:-255,temXCHAIN_BRIDGE_NONDOOR_OWNER:-257,temXCHAIN_EQUAL_DOOR_ACCOUNTS:-260,terFUNDS_SPENT:-98,terINSUF_FEE_B:-97,terLAST:-91,terNO_ACCOUNT:-96,terNO_AMM:-87,terNO_AUTH:-95,terNO_LINE:-94,terNO_RIPPLE:-90,terOWNERS:-93,terPRE_SEQ:-92,terPRE_TICKET:-88,terQUEUED:-89,terRETRY:-99,tesSUCCESS:0},jL={AMMBid:39,AMMCreate:35,AMMDelete:40,AMMDeposit:36,AMMVote:38,AMMWithdraw:37,AccountDelete:21,AccountSet:3,CheckCancel:18,CheckCash:17,CheckCreate:16,Clawback:30,CredentialCreate:58,CredentialAccept:59,CredentialDelete:60,DIDDelete:50,DIDSet:49,DepositPreauth:19,EnableAmendment:100,EscrowCancel:4,EscrowCreate:1,EscrowFinish:2,Invalid:-1,LedgerStateFix:53,MPTokenAuthorize:57,MPTokenIssuanceCreate:54,MPTokenIssuanceDestroy:55,MPTokenIssuanceSet:56,NFTokenAcceptOffer:29,NFTokenBurn:26,NFTokenCancelOffer:28,NFTokenCreateOffer:27,NFTokenMint:25,OfferCancel:8,OfferCreate:7,OracleDelete:52,OracleSet:51,Payment:0,PaymentChannelClaim:15,PaymentChannelCreate:13,PaymentChannelFund:14,SetFee:101,SetRegularKey:5,SignerListSet:12,TicketCreate:10,TrustSet:20,UNLModify:102,XChainAccountCreateCommit:44,XChainAddAccountCreateAttestation:46,XChainAddClaimAttestation:45,XChainClaim:43,XChainCommit:42,XChainCreateBridge:48,XChainCreateClaimID:41,XChainModifyBridge:47},kL={AccountID:8,Amount:6,Blob:7,Currency:26,Done:-1,Hash128:4,Hash160:17,Hash192:21,Hash256:5,Issue:24,LedgerEntry:10002,Metadata:10004,NotPresent:0,PathSet:18,STArray:15,STObject:14,Transaction:10001,UInt16:1,UInt32:2,UInt384:22,UInt512:23,UInt64:3,UInt8:16,UInt96:20,Unknown:-2,Validation:10003,Vector256:19,XChainBridge:25},OL={FIELDS:TL,LEDGER_ENTRY_TYPES:AL,TRANSACTION_RESULTS:CL,TRANSACTION_TYPES:jL,TYPES:kL};var Ux={},pa={};Object.defineProperty(pa,"__esModule",{value:!0});pa.BytesLookup=pa.Bytes=void 0;class Wy{constructor(e,n,r){this.name=e,this.ordinal=n,this.ordinalWidth=r,this.bytes=new Uint8Array(r);for(let s=0;s<r;s++)this.bytes[r-s-1]=n>>>s*8&255}toJSON(){return this.name}toBytesSink(e){e.put(this.bytes)}toBytes(){return this.bytes}}pa.Bytes=Wy;class IL{constructor(e,n){this.ordinalWidth=n,Object.entries(e).forEach(([r,s])=>{this.add(r,s)})}add(e,n){if(this[e])throw new SyntaxError(`Attempted to add a value with a duplicate name "${e}". This is not allowed because it is unclear how to decode.`);if(this[n.toString()])throw new SyntaxError(`Attempted to add a duplicate value under a different name (Given name: "${e}" and previous name: "${this[n.toString()]}. This is not allowed because it is unclear how to decode.
Given value: ${n.toString()}`);this[e]=new Wy(e,n,this.ordinalWidth),this[n.toString()]=this[e]}from(e){return e instanceof Wy?e:this[e]}fromParser(e){return this.from(e.readUIntN(this.ordinalWidth).toString())}}pa.BytesLookup=IL;var fp={},dn={},_s={};Object.defineProperty(_s,"__esModule",{value:!0});_s.BinarySerializer=_s.BytesList=void 0;const _0=at;class Xy{constructor(){this.bytesArray=[]}getLength(){return(0,_0.concat)(this.bytesArray).byteLength}put(e){const n=Uint8Array.from(e);return this.bytesArray.push(n),this}toBytesSink(e){e.put(this.toBytes())}toBytes(){return(0,_0.concat)(this.bytesArray)}toHex(){return(0,_0.bytesToHex)(this.toBytes())}}_s.BytesList=Xy;class PL{constructor(e){this.sink=new Xy,this.sink=e}write(e){e.toBytesSink(this.sink)}put(e){this.sink.put(e)}writeType(e,n){this.write(e.from(n))}writeBytesList(e){e.toBytesSink(this.sink)}encodeVariableLength(e){const n=new Uint8Array(3);if(e<=192)return n[0]=e,n.slice(0,1);if(e<=12480)return e-=193,n[0]=193+(e>>>8),n[1]=e&255,n.slice(0,2);if(e<=918744)return e-=12481,n[0]=241+(e>>>16),n[1]=e>>8&255,n[2]=e&255,n.slice(0,3);throw new Error("Overflow error")}writeFieldAndValue(e,n,r=!1){const s=e.associatedType.from(n);if(s.toBytesSink===void 0||e.name===void 0)throw new Error;this.sink.put(e.header),e.isVariableLengthEncoded?this.writeLengthEncoded(s,r):s.toBytesSink(this.sink)}writeLengthEncoded(e,n=!1){const r=new Xy;n||e.toBytesSink(r),this.put(this.encodeVariableLength(r.getLength())),this.writeBytesList(r)}}_s.BinarySerializer=PL;Object.defineProperty(dn,"__esModule",{value:!0});dn.Comparable=dn.SerializedType=void 0;const RL=_s,LL=at;class bA{constructor(e){this.bytes=new Uint8Array(0),this.bytes=e??new Uint8Array(0)}static fromParser(e,n){throw new Error("fromParser not implemented")}static from(e){throw new Error("from not implemented")}toBytesSink(e){e.put(this.bytes)}toHex(){return(0,LL.bytesToHex)(this.toBytes())}toBytes(){if(this.bytes)return this.bytes;const e=new RL.BytesList;return this.toBytesSink(e),e.toBytes()}toJSON(e,n){return this.toHex()}toString(){return this.toHex()}}dn.SerializedType=bA;class ML extends bA{lt(e){return this.compareTo(e)<0}eq(e){return this.compareTo(e)===0}gt(e){return this.compareTo(e)>0}gte(e){return this.compareTo(e)>-1}lte(e){return this.compareTo(e)<1}compareTo(e){throw new Error(`cannot compare ${this.toString()} and ${e.toString()}`)}}dn.Comparable=ML;var Ur={};Object.defineProperty(Ur,"__esModule",{value:!0});Ur.TRANSACTION_RESULT_WIDTH=Ur.TRANSACTION_TYPE_WIDTH=Ur.LEDGER_ENTRY_WIDTH=Ur.TYPE_WIDTH=void 0;Ur.TYPE_WIDTH=2;Ur.LEDGER_ENTRY_WIDTH=2;Ur.TRANSACTION_TYPE_WIDTH=2;Ur.TRANSACTION_RESULT_WIDTH=1;Object.defineProperty(fp,"__esModule",{value:!0});fp.FieldLookup=void 0;const DL=pa,BL=dn,FL=Ur;function UL(t,e){const n=[];return t<16?e<16?n.push(t<<4|e):n.push(t<<4,e):e<16?n.push(e,t):n.push(0,t,e),Uint8Array.from(n)}function $L([t,e],n){const r=UL(n,e.nth);return{name:t,nth:e.nth,isVariableLengthEncoded:e.isVLEncoded,isSerialized:e.isSerialized,isSigningField:e.isSigningField,ordinal:n<<16|e.nth,type:new DL.Bytes(e.type,n,FL.TYPE_WIDTH),header:r,associatedType:BL.SerializedType}}class VL{constructor(e,n){e.forEach(([r,s])=>{const i=n[s.type];this[r]=$L([r,s],i),this[this[r].ordinal.toString()]=this[r]})}fromString(e){return this[e]}}fp.FieldLookup=VL;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.BytesLookup=t.Bytes=t.FieldLookup=t.XrplDefinitionsBase=void 0;const e=pa;Object.defineProperty(t,"Bytes",{enumerable:!0,get:function(){return e.Bytes}}),Object.defineProperty(t,"BytesLookup",{enumerable:!0,get:function(){return e.BytesLookup}});const n=fp;Object.defineProperty(t,"FieldLookup",{enumerable:!0,get:function(){return n.FieldLookup}});const r=Ur;class s{constructor(a,l){this.type=new e.BytesLookup(a.TYPES,r.TYPE_WIDTH),this.ledgerEntryType=new e.BytesLookup(a.LEDGER_ENTRY_TYPES,r.LEDGER_ENTRY_WIDTH),this.transactionType=new e.BytesLookup(a.TRANSACTION_TYPES,r.TRANSACTION_TYPE_WIDTH),this.transactionResult=new e.BytesLookup(a.TRANSACTION_RESULTS,r.TRANSACTION_RESULT_WIDTH),this.field=new n.FieldLookup(a.FIELDS,a.TYPES),this.transactionNames=Object.entries(a.TRANSACTION_TYPES).filter(([c,u])=>u>=0).map(([c,u])=>c),this.dataTypes={},this.associateTypes(l)}associateTypes(a){this.dataTypes=Object.assign({},this.dataTypes,a),Object.values(this.field).forEach(l=>{l.associatedType=this.dataTypes[l.type.name]}),this.field.TransactionType.associatedType=this.transactionType,this.field.TransactionResult.associatedType=this.transactionResult,this.field.LedgerEntryType.associatedType=this.ledgerEntryType}getAssociatedTypes(){return this.dataTypes}}t.XrplDefinitionsBase=s})(Ux);(function(t){var e=ge&&ge.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(t,"__esModule",{value:!0}),t.TRANSACTION_TYPES=t.TransactionType=t.TransactionResult=t.LedgerEntryType=t.Type=t.Field=t.DEFAULT_DEFINITIONS=t.XrplDefinitionsBase=t.Bytes=void 0;const n=e(OL),r=Ux;Object.defineProperty(t,"XrplDefinitionsBase",{enumerable:!0,get:function(){return r.XrplDefinitionsBase}}),Object.defineProperty(t,"Bytes",{enumerable:!0,get:function(){return r.Bytes}});const s=new r.XrplDefinitionsBase(n.default,{});t.DEFAULT_DEFINITIONS=s;const i=s.type;t.Type=i;const a=s.ledgerEntryType;t.LedgerEntryType=a;const l=s.transactionType;t.TransactionType=l;const c=s.transactionResult;t.TransactionResult=c;const u=s.field;t.Field=u;const d=s.transactionNames;t.TRANSACTION_TYPES=d})(ni);var mo={},go={},Ql={},Ca={},Ct={};Object.defineProperty(Ct,"__esModule",{value:!0});Ct.compare=Ct.equal=Ct.readUInt32BE=Ct.readUInt16BE=Ct.writeUInt32BE=Ct.writeUInt16BE=Ct.writeUInt8=void 0;function zL(t,e,n){e=Number(e),t[n]=e}Ct.writeUInt8=zL;function HL(t,e,n){e=Number(e),t[n]=e>>>8,t[n+1]=e}Ct.writeUInt16BE=HL;function WL(t,e,n){t[n]=e>>>24&255,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=e&255}Ct.writeUInt32BE=WL;function XL(t,e){return new DataView(t.buffer).getUint16(e,!1).toString(10)}Ct.readUInt16BE=XL;function KL(t,e){return new DataView(t.buffer).getUint32(e,!1).toString(10)}Ct.readUInt32BE=KL;function qL(t,e){const n=t instanceof ArrayBuffer?new Uint8Array(t,0):t,r=e instanceof ArrayBuffer?new Uint8Array(e,0):e;return n.byteLength!=r.byteLength?!1:w_(n)&&w_(r)?JL(n,r)===0:x_(n)&&x_(r)?YL(n,r)===0:GL(n,r)===0}Ct.equal=qL;function GL(t,e){const n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);return pp(n,r)}function YL(t,e){const n=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);return pp(n,r)}function JL(t,e){const n=new Uint32Array(t.buffer,t.byteOffset,t.byteLength/4),r=new Uint32Array(e.buffer,e.byteOffset,e.byteLength/4);return pp(n,r)}function pp(t,e){if(t.byteLength!==e.byteLength)throw new Error("Cannot compare arrays of different length");for(let n=0;n<t.length-1;n+=1){if(t[n]>e[n])return 1;if(t[n]<e[n])return-1}return 0}Ct.compare=pp;function x_(t){return t.byteOffset%2===0&&t.byteLength%2===0}function w_(t){return t.byteOffset%4===0&&t.byteLength%4===0}Object.defineProperty(Ca,"__esModule",{value:!0});Ca.Hash=void 0;const QL=dn,ZL=at,eM=Ct;class tM extends QL.Comparable{constructor(e){if(super(e),this.bytes.length!==this.constructor.width)throw new Error(`Invalid Hash length ${this.bytes.byteLength}`)}static from(e){if(e instanceof this)return e;if(typeof e=="string")return new this((0,ZL.hexToBytes)(e));throw new Error("Cannot construct Hash from given value")}static fromParser(e,n){return new this(e.read(n??this.width))}compareTo(e){return(0,eM.compare)(this.bytes,this.constructor.from(e).bytes)}toString(){return this.toHex()}nibblet(e){const n=e>0?e/2|0:0;let r=this.bytes[n];return e%2===0?r=(r&240)>>>4:r=r&15,r}}Ca.Hash=tM;Object.defineProperty(Ql,"__esModule",{value:!0});Ql.Hash160=void 0;const nM=Ca;class Vi extends nM.Hash{constructor(e){e&&e.byteLength===0&&(e=Vi.ZERO_160.bytes),super(e??Vi.ZERO_160.bytes)}}Ql.Hash160=Vi;Vi.width=20;Vi.ZERO_160=new Vi(new Uint8Array(Vi.width));Object.defineProperty(go,"__esModule",{value:!0});go.AccountID=void 0;const $d=Un,rM=Ql,sM=at,iM=/^[A-F0-9]{40}$/;class Ms extends rM.Hash160{constructor(e){super(e??Ms.defaultAccountID.bytes)}static from(e){if(e instanceof Ms)return e;if(typeof e=="string")return e===""?new Ms:iM.test(e)?new Ms((0,sM.hexToBytes)(e)):this.fromBase58(e);throw new Error("Cannot construct AccountID from value given")}static fromBase58(e){if((0,$d.isValidXAddress)(e)){const n=(0,$d.xAddressToClassicAddress)(e);if(n.tag!==!1)throw new Error("Only allowed to have tag on Account or Destination");e=n.classicAddress}return new Ms(Uint8Array.from((0,$d.decodeAccountID)(e)))}toJSON(){return this.toBase58()}toBase58(){return(0,$d.encodeAccountID)(this.bytes)}}go.AccountID=Ms;Ms.defaultAccountID=new Ms(new Uint8Array(20));var mp={},Yr={};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.BinaryParser=void 0;const oM=ni,aM=at;class lM{constructor(e,n=oM.DEFAULT_DEFINITIONS){this.bytes=(0,aM.hexToBytes)(e),this.definitions=n}peek(){if(this.bytes.byteLength===0)throw new Error;return this.bytes[0]}skip(e){if(e>this.bytes.byteLength)throw new Error;this.bytes=this.bytes.slice(e)}read(e){if(e>this.bytes.byteLength)throw new Error;const n=this.bytes.slice(0,e);return this.skip(e),n}readUIntN(e){if(0>=e||e>4)throw new Error("invalid n");return this.read(e).reduce((n,r)=>n<<8|r)>>>0}readUInt8(){return this.readUIntN(1)}readUInt16(){return this.readUIntN(2)}readUInt32(){return this.readUIntN(4)}size(){return this.bytes.byteLength}end(e){const n=this.bytes.byteLength;return n===0||e!==void 0&&n<=e}readVariableLength(){return this.read(this.readVariableLengthLength())}readVariableLengthLength(){const e=this.readUInt8();if(e<=192)return e;if(e<=240){const n=this.readUInt8();return 193+(e-193)*256+n}else if(e<=254){const n=this.readUInt8(),r=this.readUInt8();return 12481+(e-241)*65536+n*256+r}throw new Error("Invalid variable length indicator")}readFieldOrdinal(){let e=this.readUInt8(),n=e&15;if(e>>=4,e===0&&(e=this.readUInt8(),e===0||e<16))throw new Error(`Cannot read FieldOrdinal, type_code ${e} out of range`);if(n===0&&(n=this.readUInt8(),n===0||n<16))throw new Error(`Cannot read FieldOrdinal, field_code ${n} out of range`);return e<<16|n}readField(){return this.definitions.field.fromString(this.readFieldOrdinal().toString())}readType(e){return e.fromParser(this)}typeForField(e){return e.associatedType}readFieldValue(e){const n=this.typeForField(e);if(!n)throw new Error(`unsupported: (${e.name}, ${e.type.name})`);const r=e.isVariableLengthEncoded?this.readVariableLengthLength():void 0,s=n.fromParser(this,r);if(s===void 0)throw new Error(`fromParser for (${e.name}, ${e.type.name}) -> undefined `);return s}readFieldAndValue(){const e=this.readField();return[e,this.readFieldValue(e)]}}Yr.BinaryParser=lM;var ja={};Object.defineProperty(ja,"__esModule",{value:!0});ja.Currency=void 0;const cM=Ql,ku=at,uM=/^0{40}$/,dM=/^[A-Z0-9a-z?!@#$%^&*(){}[\]|]{3}$/,hM=/^[A-F0-9]{40}$/,fM=/^0{24}[\x00-\x7F]{6}0{10}$/;function pM(t){const e=new Uint8Array(20);if(t!=="XRP"){const n=t.split("").map(r=>r.charCodeAt(0));e.set(n,12)}return e}function mM(t){return dM.test(t)}function gM(t){const e=(0,ku.hexToString)((0,ku.bytesToHex)(t));return e==="XRP"?null:mM(e)?e:null}function yM(t){return hM.test(t)}function vM(t){return t.length===3||yM(t)}function xM(t){return t.byteLength===20}function wM(t){return t instanceof Uint8Array?xM(t):vM(t)}function bM(t){if(!wM(t))throw new Error(`Unsupported Currency representation: ${t}`);return t.length===3?pM(t):(0,ku.hexToBytes)(t)}class na extends cM.Hash160{constructor(e){super(e??na.XRP.bytes);const n=(0,ku.bytesToHex)(this.bytes);uM.test(n)?this._iso="XRP":fM.test(n)?this._iso=gM(this.bytes.slice(12,15)):this._iso=null}iso(){return this._iso}static from(e){if(e instanceof na)return e;if(typeof e=="string")return new na(bM(e));throw new Error("Cannot construct Currency from value given")}toJSON(){const e=this.iso();return e!==null?e:(0,ku.bytesToHex)(this.bytes)}}ja.Currency=na;na.XRP=new na(new Uint8Array(20));var _A={exports:{}};(function(t){(function(e){var n,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,s=Math.ceil,i=Math.floor,a="[BigNumber Error] ",l=a+"Number primitive has more than 15 significant digits: ",c=1e14,u=14,d=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],f=1e7,m=1e9;function _(E){var L,Y,ee,U=X.prototype={constructor:X,toString:null,valueOf:null},G=new X(1),ae=20,he=4,xe=-7,de=21,$=-1e7,re=1e7,F=!1,k=1,R=0,D={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},V="0123456789abcdefghijklmnopqrstuvwxyz",se=!0;function X(N,g){var I,T,C,P,H,M,K,Q,te=this;if(!(te instanceof X))return new X(N,g);if(g==null){if(N&&N._isBigNumber===!0){te.s=N.s,!N.c||N.e>re?te.c=te.e=null:N.e<$?te.c=[te.e=0]:(te.e=N.e,te.c=N.c.slice());return}if((M=typeof N=="number")&&N*0==0){if(te.s=1/N<0?(N=-N,-1):1,N===~~N){for(P=0,H=N;H>=10;H/=10,P++);P>re?te.c=te.e=null:(te.e=P,te.c=[N]);return}Q=String(N)}else{if(!r.test(Q=String(N)))return ee(te,Q,M);te.s=Q.charCodeAt(0)==45?(Q=Q.slice(1),-1):1}(P=Q.indexOf("."))>-1&&(Q=Q.replace(".","")),(H=Q.search(/e/i))>0?(P<0&&(P=H),P+=+Q.slice(H+1),Q=Q.substring(0,H)):P<0&&(P=Q.length)}else{if(x(g,2,V.length,"Base"),g==10&&se)return te=new X(N),ne(te,ae+te.e+1,he);if(Q=String(N),M=typeof N=="number"){if(N*0!=0)return ee(te,Q,M,g);if(te.s=1/N<0?(Q=Q.slice(1),-1):1,X.DEBUG&&Q.replace(/^0\.0*|\./,"").length>15)throw Error(l+N)}else te.s=Q.charCodeAt(0)===45?(Q=Q.slice(1),-1):1;for(I=V.slice(0,g),P=H=0,K=Q.length;H<K;H++)if(I.indexOf(T=Q.charAt(H))<0){if(T=="."){if(H>P){P=K;continue}}else if(!C&&(Q==Q.toUpperCase()&&(Q=Q.toLowerCase())||Q==Q.toLowerCase()&&(Q=Q.toUpperCase()))){C=!0,H=-1,P=0;continue}return ee(te,String(N),M,g)}M=!1,Q=Y(Q,g,10,te.s),(P=Q.indexOf("."))>-1?Q=Q.replace(".",""):P=Q.length}for(H=0;Q.charCodeAt(H)===48;H++);for(K=Q.length;Q.charCodeAt(--K)===48;);if(Q=Q.slice(H,++K)){if(K-=H,M&&X.DEBUG&&K>15&&(N>d||N!==i(N)))throw Error(l+te.s*N);if((P=P-H-1)>re)te.c=te.e=null;else if(P<$)te.c=[te.e=0];else{if(te.e=P,te.c=[],H=(P+1)%u,P<0&&(H+=u),H<K){for(H&&te.c.push(+Q.slice(0,H)),K-=u;H<K;)te.c.push(+Q.slice(H,H+=u));H=u-(Q=Q.slice(H)).length}else H-=K;for(;H--;Q+="0");te.c.push(+Q)}}else te.c=[te.e=0]}X.clone=_,X.ROUND_UP=0,X.ROUND_DOWN=1,X.ROUND_CEIL=2,X.ROUND_FLOOR=3,X.ROUND_HALF_UP=4,X.ROUND_HALF_DOWN=5,X.ROUND_HALF_EVEN=6,X.ROUND_HALF_CEIL=7,X.ROUND_HALF_FLOOR=8,X.EUCLID=9,X.config=X.set=function(N){var g,I;if(N!=null)if(typeof N=="object"){if(N.hasOwnProperty(g="DECIMAL_PLACES")&&(I=N[g],x(I,0,m,g),ae=I),N.hasOwnProperty(g="ROUNDING_MODE")&&(I=N[g],x(I,0,8,g),he=I),N.hasOwnProperty(g="EXPONENTIAL_AT")&&(I=N[g],I&&I.pop?(x(I[0],-m,0,g),x(I[1],0,m,g),xe=I[0],de=I[1]):(x(I,-m,m,g),xe=-(de=I<0?-I:I))),N.hasOwnProperty(g="RANGE"))if(I=N[g],I&&I.pop)x(I[0],-m,-1,g),x(I[1],1,m,g),$=I[0],re=I[1];else if(x(I,-m,m,g),I)$=-(re=I<0?-I:I);else throw Error(a+g+" cannot be zero: "+I);if(N.hasOwnProperty(g="CRYPTO"))if(I=N[g],I===!!I)if(I)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))F=I;else throw F=!I,Error(a+"crypto unavailable");else F=I;else throw Error(a+g+" not true or false: "+I);if(N.hasOwnProperty(g="MODULO_MODE")&&(I=N[g],x(I,0,9,g),k=I),N.hasOwnProperty(g="POW_PRECISION")&&(I=N[g],x(I,0,m,g),R=I),N.hasOwnProperty(g="FORMAT"))if(I=N[g],typeof I=="object")D=I;else throw Error(a+g+" not an object: "+I);if(N.hasOwnProperty(g="ALPHABET"))if(I=N[g],typeof I=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(I))se=I.slice(0,10)=="0123456789",V=I;else throw Error(a+g+" invalid: "+I)}else throw Error(a+"Object expected: "+N);return{DECIMAL_PLACES:ae,ROUNDING_MODE:he,EXPONENTIAL_AT:[xe,de],RANGE:[$,re],CRYPTO:F,MODULO_MODE:k,POW_PRECISION:R,FORMAT:D,ALPHABET:V}},X.isBigNumber=function(N){if(!N||N._isBigNumber!==!0)return!1;if(!X.DEBUG)return!0;var g,I,T=N.c,C=N.e,P=N.s;e:if({}.toString.call(T)=="[object Array]"){if((P===1||P===-1)&&C>=-m&&C<=m&&C===i(C)){if(T[0]===0){if(C===0&&T.length===1)return!0;break e}if(g=(C+1)%u,g<1&&(g+=u),String(T[0]).length==g){for(g=0;g<T.length;g++)if(I=T[g],I<0||I>=c||I!==i(I))break e;if(I!==0)return!0}}}else if(T===null&&C===null&&(P===null||P===1||P===-1))return!0;throw Error(a+"Invalid BigNumber: "+N)},X.maximum=X.max=function(){return Z(arguments,-1)},X.minimum=X.min=function(){return Z(arguments,1)},X.random=function(){var N=9007199254740992,g=Math.random()*N&2097151?function(){return i(Math.random()*N)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(I){var T,C,P,H,M,K=0,Q=[],te=new X(G);if(I==null?I=ae:x(I,0,m),H=s(I/u),F)if(crypto.getRandomValues){for(T=crypto.getRandomValues(new Uint32Array(H*=2));K<H;)M=T[K]*131072+(T[K+1]>>>11),M>=9e15?(C=crypto.getRandomValues(new Uint32Array(2)),T[K]=C[0],T[K+1]=C[1]):(Q.push(M%1e14),K+=2);K=H/2}else if(crypto.randomBytes){for(T=crypto.randomBytes(H*=7);K<H;)M=(T[K]&31)*281474976710656+T[K+1]*1099511627776+T[K+2]*4294967296+T[K+3]*16777216+(T[K+4]<<16)+(T[K+5]<<8)+T[K+6],M>=9e15?crypto.randomBytes(7).copy(T,K):(Q.push(M%1e14),K+=7);K=H/7}else throw F=!1,Error(a+"crypto unavailable");if(!F)for(;K<H;)M=g(),M<9e15&&(Q[K++]=M%1e14);for(H=Q[--K],I%=u,H&&I&&(M=h[u-I],Q[K]=i(H/M)*M);Q[K]===0;Q.pop(),K--);if(K<0)Q=[P=0];else{for(P=-1;Q[0]===0;Q.splice(0,1),P-=u);for(K=1,M=Q[0];M>=10;M/=10,K++);K<u&&(P-=u-K)}return te.e=P,te.c=Q,te}}(),X.sum=function(){for(var N=1,g=arguments,I=new X(g[0]);N<g.length;)I=I.plus(g[N++]);return I},Y=function(){var N="0123456789";function g(I,T,C,P){for(var H,M=[0],K,Q=0,te=I.length;Q<te;){for(K=M.length;K--;M[K]*=T);for(M[0]+=P.indexOf(I.charAt(Q++)),H=0;H<M.length;H++)M[H]>C-1&&(M[H+1]==null&&(M[H+1]=0),M[H+1]+=M[H]/C|0,M[H]%=C)}return M.reverse()}return function(I,T,C,P,H){var M,K,Q,te,le,we,_e,be,Ie=I.indexOf("."),He=ae,O=he;for(Ie>=0&&(te=R,R=0,I=I.replace(".",""),be=new X(T),we=be.pow(I.length-Ie),R=te,be.c=g(A(j(we.c),we.e,"0"),10,C,N),be.e=be.c.length),_e=g(I,T,C,H?(M=V,N):(M=N,V)),Q=te=_e.length;_e[--te]==0;_e.pop());if(!_e[0])return M.charAt(0);if(Ie<0?--Q:(we.c=_e,we.e=Q,we.s=P,we=L(we,be,He,O,C),_e=we.c,le=we.r,Q=we.e),K=Q+He+1,Ie=_e[K],te=C/2,le=le||K<0||_e[K+1]!=null,le=O<4?(Ie!=null||le)&&(O==0||O==(we.s<0?3:2)):Ie>te||Ie==te&&(O==4||le||O==6&&_e[K-1]&1||O==(we.s<0?8:7)),K<1||!_e[0])I=le?A(M.charAt(1),-He,M.charAt(0)):M.charAt(0);else{if(_e.length=K,le)for(--C;++_e[--K]>C;)_e[K]=0,K||(++Q,_e=[1].concat(_e));for(te=_e.length;!_e[--te];);for(Ie=0,I="";Ie<=te;I+=M.charAt(_e[Ie++]));I=A(I,Q,M.charAt(0))}return I}}(),L=function(){function N(T,C,P){var H,M,K,Q,te=0,le=T.length,we=C%f,_e=C/f|0;for(T=T.slice();le--;)K=T[le]%f,Q=T[le]/f|0,H=_e*K+Q*we,M=we*K+H%f*f+te,te=(M/P|0)+(H/f|0)+_e*Q,T[le]=M%P;return te&&(T=[te].concat(T)),T}function g(T,C,P,H){var M,K;if(P!=H)K=P>H?1:-1;else for(M=K=0;M<P;M++)if(T[M]!=C[M]){K=T[M]>C[M]?1:-1;break}return K}function I(T,C,P,H){for(var M=0;P--;)T[P]-=M,M=T[P]<C[P]?1:0,T[P]=M*H+T[P]-C[P];for(;!T[0]&&T.length>1;T.splice(0,1));}return function(T,C,P,H,M){var K,Q,te,le,we,_e,be,Ie,He,O,p,w,W,oe,ce,fe,Te,Le=T.s==C.s?1:-1,Me=T.c,ke=C.c;if(!Me||!Me[0]||!ke||!ke[0])return new X(!T.s||!C.s||(Me?ke&&Me[0]==ke[0]:!ke)?NaN:Me&&Me[0]==0||!ke?Le*0:Le/0);for(Ie=new X(Le),He=Ie.c=[],Q=T.e-C.e,Le=P+Q+1,M||(M=c,Q=S(T.e/u)-S(C.e/u),Le=Le/u|0),te=0;ke[te]==(Me[te]||0);te++);if(ke[te]>(Me[te]||0)&&Q--,Le<0)He.push(1),le=!0;else{for(oe=Me.length,fe=ke.length,te=0,Le+=2,we=i(M/(ke[0]+1)),we>1&&(ke=N(ke,we,M),Me=N(Me,we,M),fe=ke.length,oe=Me.length),W=fe,O=Me.slice(0,fe),p=O.length;p<fe;O[p++]=0);Te=ke.slice(),Te=[0].concat(Te),ce=ke[0],ke[1]>=M/2&&ce++;do{if(we=0,K=g(ke,O,fe,p),K<0){if(w=O[0],fe!=p&&(w=w*M+(O[1]||0)),we=i(w/ce),we>1)for(we>=M&&(we=M-1),_e=N(ke,we,M),be=_e.length,p=O.length;g(_e,O,be,p)==1;)we--,I(_e,fe<be?Te:ke,be,M),be=_e.length,K=1;else we==0&&(K=we=1),_e=ke.slice(),be=_e.length;if(be<p&&(_e=[0].concat(_e)),I(O,_e,p,M),p=O.length,K==-1)for(;g(ke,O,fe,p)<1;)we++,I(O,fe<p?Te:ke,p,M),p=O.length}else K===0&&(we++,O=[0]);He[te++]=we,O[0]?O[p++]=Me[W]||0:(O=[Me[W]],p=1)}while((W++<oe||O[0]!=null)&&Le--);le=O[0]!=null,He[0]||He.splice(0,1)}if(M==c){for(te=1,Le=He[0];Le>=10;Le/=10,te++);ne(Ie,P+(Ie.e=te+Q*u-1)+1,H,le)}else Ie.e=Q,Ie.r=+le;return Ie}}();function q(N,g,I,T){var C,P,H,M,K;if(I==null?I=he:x(I,0,8),!N.c)return N.toString();if(C=N.c[0],H=N.e,g==null)K=j(N.c),K=T==1||T==2&&(H<=xe||H>=de)?v(K,H):A(K,H,"0");else if(N=ne(new X(N),g,I),P=N.e,K=j(N.c),M=K.length,T==1||T==2&&(g<=P||P<=xe)){for(;M<g;K+="0",M++);K=v(K,P)}else if(g-=H,K=A(K,P,"0"),P+1>M){if(--g>0)for(K+=".";g--;K+="0");}else if(g+=P-M,g>0)for(P+1==M&&(K+=".");g--;K+="0");return N.s<0&&C?"-"+K:K}function Z(N,g){for(var I,T,C=1,P=new X(N[0]);C<N.length;C++)T=new X(N[C]),(!T.s||(I=y(P,T))===g||I===0&&P.s===g)&&(P=T);return P}function ue(N,g,I){for(var T=1,C=g.length;!g[--C];g.pop());for(C=g[0];C>=10;C/=10,T++);return(I=T+I*u-1)>re?N.c=N.e=null:I<$?N.c=[N.e=0]:(N.e=I,N.c=g),N}ee=function(){var N=/^(-?)0([xbo])(?=\w[\w.]*$)/i,g=/^([^.]+)\.$/,I=/^\.([^.]+)$/,T=/^-?(Infinity|NaN)$/,C=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(P,H,M,K){var Q,te=M?H:H.replace(C,"");if(T.test(te))P.s=isNaN(te)?null:te<0?-1:1;else{if(!M&&(te=te.replace(N,function(le,we,_e){return Q=(_e=_e.toLowerCase())=="x"?16:_e=="b"?2:8,!K||K==Q?we:le}),K&&(Q=K,te=te.replace(g,"$1").replace(I,"0.$1")),H!=te))return new X(te,Q);if(X.DEBUG)throw Error(a+"Not a"+(K?" base "+K:"")+" number: "+H);P.s=null}P.c=P.e=null}}();function ne(N,g,I,T){var C,P,H,M,K,Q,te,le=N.c,we=h;if(le){e:{for(C=1,M=le[0];M>=10;M/=10,C++);if(P=g-C,P<0)P+=u,H=g,K=le[Q=0],te=i(K/we[C-H-1]%10);else if(Q=s((P+1)/u),Q>=le.length)if(T){for(;le.length<=Q;le.push(0));K=te=0,C=1,P%=u,H=P-u+1}else break e;else{for(K=M=le[Q],C=1;M>=10;M/=10,C++);P%=u,H=P-u+C,te=H<0?0:i(K/we[C-H-1]%10)}if(T=T||g<0||le[Q+1]!=null||(H<0?K:K%we[C-H-1]),T=I<4?(te||T)&&(I==0||I==(N.s<0?3:2)):te>5||te==5&&(I==4||T||I==6&&(P>0?H>0?K/we[C-H]:0:le[Q-1])%10&1||I==(N.s<0?8:7)),g<1||!le[0])return le.length=0,T?(g-=N.e+1,le[0]=we[(u-g%u)%u],N.e=-g||0):le[0]=N.e=0,N;if(P==0?(le.length=Q,M=1,Q--):(le.length=Q+1,M=we[u-P],le[Q]=H>0?i(K/we[C-H]%we[H])*M:0),T)for(;;)if(Q==0){for(P=1,H=le[0];H>=10;H/=10,P++);for(H=le[0]+=M,M=1;H>=10;H/=10,M++);P!=M&&(N.e++,le[0]==c&&(le[0]=1));break}else{if(le[Q]+=M,le[Q]!=c)break;le[Q--]=0,M=1}for(P=le.length;le[--P]===0;le.pop());}N.e>re?N.c=N.e=null:N.e<$&&(N.c=[N.e=0])}return N}function J(N){var g,I=N.e;return I===null?N.toString():(g=j(N.c),g=I<=xe||I>=de?v(g,I):A(g,I,"0"),N.s<0?"-"+g:g)}return U.absoluteValue=U.abs=function(){var N=new X(this);return N.s<0&&(N.s=1),N},U.comparedTo=function(N,g){return y(this,new X(N,g))},U.decimalPlaces=U.dp=function(N,g){var I,T,C,P=this;if(N!=null)return x(N,0,m),g==null?g=he:x(g,0,8),ne(new X(P),N+P.e+1,g);if(!(I=P.c))return null;if(T=((C=I.length-1)-S(this.e/u))*u,C=I[C])for(;C%10==0;C/=10,T--);return T<0&&(T=0),T},U.dividedBy=U.div=function(N,g){return L(this,new X(N,g),ae,he)},U.dividedToIntegerBy=U.idiv=function(N,g){return L(this,new X(N,g),0,1)},U.exponentiatedBy=U.pow=function(N,g){var I,T,C,P,H,M,K,Q,te,le=this;if(N=new X(N),N.c&&!N.isInteger())throw Error(a+"Exponent not an integer: "+J(N));if(g!=null&&(g=new X(g)),M=N.e>14,!le.c||!le.c[0]||le.c[0]==1&&!le.e&&le.c.length==1||!N.c||!N.c[0])return te=new X(Math.pow(+J(le),M?N.s*(2-b(N)):+J(N))),g?te.mod(g):te;if(K=N.s<0,g){if(g.c?!g.c[0]:!g.s)return new X(NaN);T=!K&&le.isInteger()&&g.isInteger(),T&&(le=le.mod(g))}else{if(N.e>9&&(le.e>0||le.e<-1||(le.e==0?le.c[0]>1||M&&le.c[1]>=24e7:le.c[0]<8e13||M&&le.c[0]<=9999975e7)))return P=le.s<0&&b(N)?-0:0,le.e>-1&&(P=1/P),new X(K?1/P:P);R&&(P=s(R/u+2))}for(M?(I=new X(.5),K&&(N.s=1),Q=b(N)):(C=Math.abs(+J(N)),Q=C%2),te=new X(G);;){if(Q){if(te=te.times(le),!te.c)break;P?te.c.length>P&&(te.c.length=P):T&&(te=te.mod(g))}if(C){if(C=i(C/2),C===0)break;Q=C%2}else if(N=N.times(I),ne(N,N.e+1,1),N.e>14)Q=b(N);else{if(C=+J(N),C===0)break;Q=C%2}le=le.times(le),P?le.c&&le.c.length>P&&(le.c.length=P):T&&(le=le.mod(g))}return T?te:(K&&(te=G.div(te)),g?te.mod(g):P?ne(te,R,he,H):te)},U.integerValue=function(N){var g=new X(this);return N==null?N=he:x(N,0,8),ne(g,g.e+1,N)},U.isEqualTo=U.eq=function(N,g){return y(this,new X(N,g))===0},U.isFinite=function(){return!!this.c},U.isGreaterThan=U.gt=function(N,g){return y(this,new X(N,g))>0},U.isGreaterThanOrEqualTo=U.gte=function(N,g){return(g=y(this,new X(N,g)))===1||g===0},U.isInteger=function(){return!!this.c&&S(this.e/u)>this.c.length-2},U.isLessThan=U.lt=function(N,g){return y(this,new X(N,g))<0},U.isLessThanOrEqualTo=U.lte=function(N,g){return(g=y(this,new X(N,g)))===-1||g===0},U.isNaN=function(){return!this.s},U.isNegative=function(){return this.s<0},U.isPositive=function(){return this.s>0},U.isZero=function(){return!!this.c&&this.c[0]==0},U.minus=function(N,g){var I,T,C,P,H=this,M=H.s;if(N=new X(N,g),g=N.s,!M||!g)return new X(NaN);if(M!=g)return N.s=-g,H.plus(N);var K=H.e/u,Q=N.e/u,te=H.c,le=N.c;if(!K||!Q){if(!te||!le)return te?(N.s=-g,N):new X(le?H:NaN);if(!te[0]||!le[0])return le[0]?(N.s=-g,N):new X(te[0]?H:he==3?-0:0)}if(K=S(K),Q=S(Q),te=te.slice(),M=K-Q){for((P=M<0)?(M=-M,C=te):(Q=K,C=le),C.reverse(),g=M;g--;C.push(0));C.reverse()}else for(T=(P=(M=te.length)<(g=le.length))?M:g,M=g=0;g<T;g++)if(te[g]!=le[g]){P=te[g]<le[g];break}if(P&&(C=te,te=le,le=C,N.s=-N.s),g=(T=le.length)-(I=te.length),g>0)for(;g--;te[I++]=0);for(g=c-1;T>M;){if(te[--T]<le[T]){for(I=T;I&&!te[--I];te[I]=g);--te[I],te[T]+=c}te[T]-=le[T]}for(;te[0]==0;te.splice(0,1),--Q);return te[0]?ue(N,te,Q):(N.s=he==3?-1:1,N.c=[N.e=0],N)},U.modulo=U.mod=function(N,g){var I,T,C=this;return N=new X(N,g),!C.c||!N.s||N.c&&!N.c[0]?new X(NaN):!N.c||C.c&&!C.c[0]?new X(C):(k==9?(T=N.s,N.s=1,I=L(C,N,0,3),N.s=T,I.s*=T):I=L(C,N,0,k),N=C.minus(I.times(N)),!N.c[0]&&k==1&&(N.s=C.s),N)},U.multipliedBy=U.times=function(N,g){var I,T,C,P,H,M,K,Q,te,le,we,_e,be,Ie,He,O=this,p=O.c,w=(N=new X(N,g)).c;if(!p||!w||!p[0]||!w[0])return!O.s||!N.s||p&&!p[0]&&!w||w&&!w[0]&&!p?N.c=N.e=N.s=null:(N.s*=O.s,!p||!w?N.c=N.e=null:(N.c=[0],N.e=0)),N;for(T=S(O.e/u)+S(N.e/u),N.s*=O.s,K=p.length,le=w.length,K<le&&(be=p,p=w,w=be,C=K,K=le,le=C),C=K+le,be=[];C--;be.push(0));for(Ie=c,He=f,C=le;--C>=0;){for(I=0,we=w[C]%He,_e=w[C]/He|0,H=K,P=C+H;P>C;)Q=p[--H]%He,te=p[H]/He|0,M=_e*Q+te*we,Q=we*Q+M%He*He+be[P]+I,I=(Q/Ie|0)+(M/He|0)+_e*te,be[P--]=Q%Ie;be[P]=I}return I?++T:be.splice(0,1),ue(N,be,T)},U.negated=function(){var N=new X(this);return N.s=-N.s||null,N},U.plus=function(N,g){var I,T=this,C=T.s;if(N=new X(N,g),g=N.s,!C||!g)return new X(NaN);if(C!=g)return N.s=-g,T.minus(N);var P=T.e/u,H=N.e/u,M=T.c,K=N.c;if(!P||!H){if(!M||!K)return new X(C/0);if(!M[0]||!K[0])return K[0]?N:new X(M[0]?T:C*0)}if(P=S(P),H=S(H),M=M.slice(),C=P-H){for(C>0?(H=P,I=K):(C=-C,I=M),I.reverse();C--;I.push(0));I.reverse()}for(C=M.length,g=K.length,C-g<0&&(I=K,K=M,M=I,g=C),C=0;g;)C=(M[--g]=M[g]+K[g]+C)/c|0,M[g]=c===M[g]?0:M[g]%c;return C&&(M=[C].concat(M),++H),ue(N,M,H)},U.precision=U.sd=function(N,g){var I,T,C,P=this;if(N!=null&&N!==!!N)return x(N,1,m),g==null?g=he:x(g,0,8),ne(new X(P),N,g);if(!(I=P.c))return null;if(C=I.length-1,T=C*u+1,C=I[C]){for(;C%10==0;C/=10,T--);for(C=I[0];C>=10;C/=10,T++);}return N&&P.e+1>T&&(T=P.e+1),T},U.shiftedBy=function(N){return x(N,-d,d),this.times("1e"+N)},U.squareRoot=U.sqrt=function(){var N,g,I,T,C,P=this,H=P.c,M=P.s,K=P.e,Q=ae+4,te=new X("0.5");if(M!==1||!H||!H[0])return new X(!M||M<0&&(!H||H[0])?NaN:H?P:1/0);if(M=Math.sqrt(+J(P)),M==0||M==1/0?(g=j(H),(g.length+K)%2==0&&(g+="0"),M=Math.sqrt(+g),K=S((K+1)/2)-(K<0||K%2),M==1/0?g="5e"+K:(g=M.toExponential(),g=g.slice(0,g.indexOf("e")+1)+K),I=new X(g)):I=new X(M+""),I.c[0]){for(K=I.e,M=K+Q,M<3&&(M=0);;)if(C=I,I=te.times(C.plus(L(P,C,Q,1))),j(C.c).slice(0,M)===(g=j(I.c)).slice(0,M))if(I.e<K&&--M,g=g.slice(M-3,M+1),g=="9999"||!T&&g=="4999"){if(!T&&(ne(C,C.e+ae+2,0),C.times(C).eq(P))){I=C;break}Q+=4,M+=4,T=1}else{(!+g||!+g.slice(1)&&g.charAt(0)=="5")&&(ne(I,I.e+ae+2,1),N=!I.times(I).eq(P));break}}return ne(I,I.e+ae+1,he,N)},U.toExponential=function(N,g){return N!=null&&(x(N,0,m),N++),q(this,N,g,1)},U.toFixed=function(N,g){return N!=null&&(x(N,0,m),N=N+this.e+1),q(this,N,g)},U.toFormat=function(N,g,I){var T,C=this;if(I==null)N!=null&&g&&typeof g=="object"?(I=g,g=null):N&&typeof N=="object"?(I=N,N=g=null):I=D;else if(typeof I!="object")throw Error(a+"Argument not an object: "+I);if(T=C.toFixed(N,g),C.c){var P,H=T.split("."),M=+I.groupSize,K=+I.secondaryGroupSize,Q=I.groupSeparator||"",te=H[0],le=H[1],we=C.s<0,_e=we?te.slice(1):te,be=_e.length;if(K&&(P=M,M=K,K=P,be-=P),M>0&&be>0){for(P=be%M||M,te=_e.substr(0,P);P<be;P+=M)te+=Q+_e.substr(P,M);K>0&&(te+=Q+_e.slice(P)),we&&(te="-"+te)}T=le?te+(I.decimalSeparator||"")+((K=+I.fractionGroupSize)?le.replace(new RegExp("\\d{"+K+"}\\B","g"),"$&"+(I.fractionGroupSeparator||"")):le):te}return(I.prefix||"")+T+(I.suffix||"")},U.toFraction=function(N){var g,I,T,C,P,H,M,K,Q,te,le,we,_e=this,be=_e.c;if(N!=null&&(M=new X(N),!M.isInteger()&&(M.c||M.s!==1)||M.lt(G)))throw Error(a+"Argument "+(M.isInteger()?"out of range: ":"not an integer: ")+J(M));if(!be)return new X(_e);for(g=new X(G),Q=I=new X(G),T=K=new X(G),we=j(be),P=g.e=we.length-_e.e-1,g.c[0]=h[(H=P%u)<0?u+H:H],N=!N||M.comparedTo(g)>0?P>0?g:Q:M,H=re,re=1/0,M=new X(we),K.c[0]=0;te=L(M,g,0,1),C=I.plus(te.times(T)),C.comparedTo(N)!=1;)I=T,T=C,Q=K.plus(te.times(C=Q)),K=C,g=M.minus(te.times(C=g)),M=C;return C=L(N.minus(I),T,0,1),K=K.plus(C.times(Q)),I=I.plus(C.times(T)),K.s=Q.s=_e.s,P=P*2,le=L(Q,T,P,he).minus(_e).abs().comparedTo(L(K,I,P,he).minus(_e).abs())<1?[Q,T]:[K,I],re=H,le},U.toNumber=function(){return+J(this)},U.toPrecision=function(N,g){return N!=null&&x(N,1,m),q(this,N,g,2)},U.toString=function(N){var g,I=this,T=I.s,C=I.e;return C===null?T?(g="Infinity",T<0&&(g="-"+g)):g="NaN":(N==null?g=C<=xe||C>=de?v(j(I.c),C):A(j(I.c),C,"0"):N===10&&se?(I=ne(new X(I),ae+C+1,he),g=A(j(I.c),I.e,"0")):(x(N,2,V.length,"Base"),g=Y(A(j(I.c),C,"0"),10,N,T,!0)),T<0&&I.c[0]&&(g="-"+g)),g},U.valueOf=U.toJSON=function(){return J(this)},U._isBigNumber=!0,E!=null&&X.set(E),X}function S(E){var L=E|0;return E>0||E===L?L:L-1}function j(E){for(var L,Y,ee=1,U=E.length,G=E[0]+"";ee<U;){for(L=E[ee++]+"",Y=u-L.length;Y--;L="0"+L);G+=L}for(U=G.length;G.charCodeAt(--U)===48;);return G.slice(0,U+1||1)}function y(E,L){var Y,ee,U=E.c,G=L.c,ae=E.s,he=L.s,xe=E.e,de=L.e;if(!ae||!he)return null;if(Y=U&&!U[0],ee=G&&!G[0],Y||ee)return Y?ee?0:-he:ae;if(ae!=he)return ae;if(Y=ae<0,ee=xe==de,!U||!G)return ee?0:!U^Y?1:-1;if(!ee)return xe>de^Y?1:-1;for(he=(xe=U.length)<(de=G.length)?xe:de,ae=0;ae<he;ae++)if(U[ae]!=G[ae])return U[ae]>G[ae]^Y?1:-1;return xe==de?0:xe>de^Y?1:-1}function x(E,L,Y,ee){if(E<L||E>Y||E!==i(E))throw Error(a+(ee||"Argument")+(typeof E=="number"?E<L||E>Y?" out of range: ":" not an integer: ":" not a primitive number: ")+String(E))}function b(E){var L=E.c.length-1;return S(E.e/u)==L&&E.c[L]%2!=0}function v(E,L){return(E.length>1?E.charAt(0)+"."+E.slice(1):E)+(L<0?"e":"e+")+L}function A(E,L,Y){var ee,U;if(L<0){for(U=Y+".";++L;U+=Y);E=U+E}else if(ee=E.length,++L>ee){for(U=Y,L-=ee;--L;U+=Y);E+=U}else L<ee&&(E=E.slice(0,L)+"."+E.slice(L));return E}n=_(),n.default=n.BigNumber=n,t.exports?t.exports=n:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=n)})(ge)})(_A);var $n=_A.exports,Zu={};Object.defineProperty(Zu,"__esModule",{value:!0});Zu.Hash192=void 0;const _M=Ca;class zi extends _M.Hash{constructor(e){e&&e.byteLength===0&&(e=zi.ZERO_192.bytes),super(e??zi.ZERO_192.bytes)}}Zu.Hash192=zi;zi.width=24;zi.ZERO_192=new zi(new Uint8Array(zi.width));var EM=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mp,"__esModule",{value:!0});mp.Amount=void 0;const b_=Yr,__=go,E_=ja,SM=dn,Ls=EM($n),Vo=at,ts=Ct,S_=Zu,EA=-96,SA=80,Ky=16,NM=new Ls.default("1e17"),TM=new Ls.default("1e-6"),E0=BigInt(4294967295),AM=BigInt(9223372036854776e3);Ls.default.config({EXPONENTIAL_AT:[EA-Ky,SA+Ky]});function CM(t){const e=Object.keys(t).sort();return e.length===3&&e[0]==="currency"&&e[1]==="issuer"&&e[2]==="value"}function jM(t){const e=Object.keys(t).sort();return e.length===2&&e[0]==="mpt_issuance_id"&&e[1]==="value"}class pn extends SM.SerializedType{constructor(e){super(e??pn.defaultAmount.bytes)}static from(e){if(e instanceof pn)return e;let n=new Uint8Array(8);if(typeof e=="string"){pn.assertXrpIsValid(e);const r=BigInt(e),s=[new Uint8Array(4),new Uint8Array(4)];return(0,ts.writeUInt32BE)(s[0],Number(r>>BigInt(32)),0),(0,ts.writeUInt32BE)(s[1],Number(r&BigInt(E0)),0),n=(0,Vo.concat)(s),n[0]|=64,new pn(n)}if(CM(e)){const r=new Ls.default(e.value);if(pn.assertIouIsValid(r),r.isZero())n[0]|=128;else{const a=r.times(`1e${-((r.e||0)-15)}`).abs().toString(),l=BigInt(a),c=[new Uint8Array(4),new Uint8Array(4)];(0,ts.writeUInt32BE)(c[0],Number(l>>BigInt(32)),0),(0,ts.writeUInt32BE)(c[1],Number(l&BigInt(E0)),0),n=(0,Vo.concat)(c),n[0]|=128,r.gt(new Ls.default(0))&&(n[0]|=64);const d=97+((r.e||0)-15);n[0]|=d>>>2,n[1]|=(d&3)<<6}const s=E_.Currency.from(e.currency).toBytes(),i=__.AccountID.from(e.issuer).toBytes();return new pn((0,Vo.concat)([n,s,i]))}if(jM(e)){pn.assertMptIsValid(e.value);let r=new Uint8Array(1);r[0]|=96;const s=BigInt(e.value),i=[new Uint8Array(4),new Uint8Array(4)];(0,ts.writeUInt32BE)(i[0],Number(s>>BigInt(32)),0),(0,ts.writeUInt32BE)(i[1],Number(s&BigInt(E0)),0),n=(0,Vo.concat)(i);const a=S_.Hash192.from(e.mpt_issuance_id).toBytes();return new pn((0,Vo.concat)([r,n,a]))}throw new Error("Invalid type to construct an Amount")}static fromParser(e){if(e.peek()&128)return new pn(e.read(48));const s=e.peek()&32?33:8;return new pn(e.read(s))}toJSON(){if(this.isNative()){const e=this.bytes,r=e[0]&64?"":"-";e[0]&=63;const s=BigInt((0,ts.readUInt32BE)(e.slice(0,4),0)),i=BigInt((0,ts.readUInt32BE)(e.slice(4),0)),a=s<<BigInt(32)|i;return`${r}${a.toString()}`}if(this.isIOU()){const e=new b_.BinaryParser(this.toString()),n=e.read(8),r=E_.Currency.fromParser(e),s=__.AccountID.fromParser(e),i=n[0],a=n[1],c=i&64?"":"-",u=((i&63)<<2)+((a&255)>>6)-97;n[0]=0,n[1]&=63;const d=new Ls.default(`${c}0x${(0,Vo.bytesToHex)(n)}`).times(`1e${u}`);return pn.assertIouIsValid(d),{value:d.toString(),currency:r.toJSON(),issuer:s.toJSON()}}if(this.isMPT()){const e=new b_.BinaryParser(this.toString()),n=e.read(1),r=e.read(8),s=S_.Hash192.fromParser(e),a=n[0]&64?"":"-",l=BigInt((0,ts.readUInt32BE)(r.slice(0,4),0)),c=BigInt((0,ts.readUInt32BE)(r.slice(4),0)),u=l<<BigInt(32)|c;return{value:`${a}${u.toString()}`,mpt_issuance_id:s.toString()}}throw new Error("Invalid amount to construct JSON")}static assertXrpIsValid(e){if(e.indexOf(".")!==-1)throw new Error(`${e.toString()} is an illegal amount`);const n=new Ls.default(e);if(!n.isZero()&&(n.lt(TM)||n.gt(NM)))throw new Error(`${e.toString()} is an illegal amount`)}static assertIouIsValid(e){if(!e.isZero()){const n=e.precision(),r=(e.e||0)-15;if(n>Ky||r>SA||r<EA)throw new Error("Decimal precision out of range");this.verifyNoDecimal(e)}}static assertMptIsValid(e){if(e.indexOf(".")!==-1)throw new Error(`${e.toString()} is an illegal amount`);const n=new Ls.default(e);if(!n.isZero()){if(n<(0,Ls.default)(0))throw new Error(`${e.toString()} is an illegal amount`);if(Number(BigInt(e)&BigInt(AM))!=0)throw new Error(`${e.toString()} is an illegal amount`)}}static verifyNoDecimal(e){if(e.times(`1e${-((e.e||0)-15)}`).abs().toString().indexOf(".")!==-1)throw new Error("Decimal place found in integerNumberString")}isNative(){return(this.bytes[0]&128)===0&&(this.bytes[0]&32)===0}isMPT(){return(this.bytes[0]&128)===0&&(this.bytes[0]&32)!==0}isIOU(){return(this.bytes[0]&128)!==0}}mp.Amount=pn;pn.defaultAmount=new pn((0,Vo.hexToBytes)("4000000000000000"));var gp={};Object.defineProperty(gp,"__esModule",{value:!0});gp.Blob=void 0;const kM=dn,OM=at;let IM=class Hh extends kM.SerializedType{constructor(e){super(e)}static fromParser(e,n){return new Hh(e.read(n))}static from(e){if(e instanceof Hh)return e;if(typeof e=="string"){if(!/^[A-F0-9]*$/iu.test(e))throw new Error("Cannot construct Blob from a non-hex string");return new Hh((0,OM.hexToBytes)(e))}throw new Error("Cannot construct Blob from value given")}};gp.Blob=IM;var yp={};Object.defineProperty(yp,"__esModule",{value:!0});yp.Hash128=void 0;const PM=Ca,RM=at;class Hi extends PM.Hash{constructor(e){e&&e.byteLength===0&&(e=Hi.ZERO_128.bytes),super(e??Hi.ZERO_128.bytes)}toHex(){const e=(0,RM.bytesToHex)(this.toBytes());return/^0+$/.exec(e)?"":e}}yp.Hash128=Hi;Hi.width=16;Hi.ZERO_128=new Hi(new Uint8Array(Hi.width));var Zl={};Object.defineProperty(Zl,"__esModule",{value:!0});Zl.Hash256=void 0;const LM=Ca;class ra extends LM.Hash{constructor(e){super(e??ra.ZERO_256.bytes)}}Zl.Hash256=ra;ra.width=32;ra.ZERO_256=new ra(new Uint8Array(ra.width));var ed={};Object.defineProperty(ed,"__esModule",{value:!0});ed.Issue=void 0;const N_=at,MM=Yr,T_=go,S0=ja,DM=dn;function BM(t){const e=Object.keys(t).sort();return e.length===1?e[0]==="currency":e.length===2&&e[0]==="currency"&&e[1]==="issuer"}class us extends DM.SerializedType{constructor(e){super(e??us.ZERO_ISSUED_CURRENCY.bytes)}static from(e){if(e instanceof us)return e;if(BM(e)){const n=S0.Currency.from(e.currency).toBytes();if(e.issuer==null)return new us(n);const r=T_.AccountID.from(e.issuer).toBytes();return new us((0,N_.concat)([n,r]))}throw new Error("Invalid type to construct an Amount")}static fromParser(e){const n=e.read(20);if(new S0.Currency(n).toJSON()==="XRP")return new us(n);const r=[n,e.read(20)];return new us((0,N_.concat)(r))}toJSON(){const e=new MM.BinaryParser(this.toString()),n=S0.Currency.fromParser(e);if(n.toJSON()==="XRP")return{currency:n.toJSON()};const r=T_.AccountID.fromParser(e);return{currency:n.toJSON(),issuer:r.toJSON()}}}ed.Issue=us;us.ZERO_ISSUED_CURRENCY=new us(new Uint8Array(20));var vp={};Object.defineProperty(vp,"__esModule",{value:!0});vp.PathSet=void 0;const Da=go,N0=ja,$x=Yr,Vx=dn,sa=at,qy=0,NA=255,T0=1,A0=16,C0=32;function FM(t){return t.issuer!==void 0||t.account!==void 0||t.currency!==void 0}function UM(t){return Array.isArray(t)&&t.length===0||Array.isArray(t)&&Array.isArray(t[0])&&t[0].length===0||Array.isArray(t)&&Array.isArray(t[0])&&FM(t[0][0])}class ia extends Vx.SerializedType{static from(e){if(e instanceof ia)return e;const n=[Uint8Array.from([0])];return e.account&&(n.push(Da.AccountID.from(e.account).toBytes()),n[0][0]|=T0),e.currency&&(n.push(N0.Currency.from(e.currency).toBytes()),n[0][0]|=A0),e.issuer&&(n.push(Da.AccountID.from(e.issuer).toBytes()),n[0][0]|=C0),new ia((0,sa.concat)(n))}static fromParser(e){const n=e.readUInt8(),r=[Uint8Array.from([n])];return n&T0&&r.push(e.read(Da.AccountID.width)),n&A0&&r.push(e.read(N0.Currency.width)),n&C0&&r.push(e.read(Da.AccountID.width)),new ia((0,sa.concat)(r))}toJSON(){const e=new $x.BinaryParser((0,sa.bytesToHex)(this.bytes)),n=e.readUInt8();let r,s,i;n&T0&&(r=Da.AccountID.fromParser(e).toJSON()),n&A0&&(s=N0.Currency.fromParser(e).toJSON()),n&C0&&(i=Da.AccountID.fromParser(e).toJSON());const a={};return r&&(a.account=r),i&&(a.issuer=i),s&&(a.currency=s),a}type(){return this.bytes[0]}}class oa extends Vx.SerializedType{static from(e){if(e instanceof oa)return e;const n=[];return e.forEach(r=>{n.push(ia.from(r).toBytes())}),new oa((0,sa.concat)(n))}static fromParser(e){const n=[];for(;!e.end()&&(n.push(ia.fromParser(e).toBytes()),!(e.peek()===qy||e.peek()===NA)););return new oa((0,sa.concat)(n))}toJSON(){const e=[],n=new $x.BinaryParser(this.toString());for(;!n.end();)e.push(ia.fromParser(n).toJSON());return e}}class Zc extends Vx.SerializedType{static from(e){if(e instanceof Zc)return e;if(UM(e)){const n=[];return e.forEach(r=>{n.push(oa.from(r).toBytes()),n.push(Uint8Array.from([NA]))}),n[n.length-1]=Uint8Array.from([qy]),new Zc((0,sa.concat)(n))}throw new Error("Cannot construct PathSet from given value")}static fromParser(e){const n=[];for(;!e.end()&&(n.push(oa.fromParser(e).toBytes()),n.push(e.read(1)),n[n.length-1][0]!=qy););return new Zc((0,sa.concat)(n))}toJSON(){const e=[],n=new $x.BinaryParser(this.toString());for(;!n.end();)e.push(oa.fromParser(n).toJSON()),n.skip(1);return e}}vp.PathSet=Zc;var xc={},wc={},ec={},ka={};Object.defineProperty(ka,"__esModule",{value:!0});ka.UInt=void 0;const $M=dn;function VM(t,e){return t<e?-1:t==e?0:1}class zM extends $M.Comparable{constructor(e){super(e)}compareTo(e){return VM(this.valueOf(),e.valueOf())}toJSON(){const e=this.valueOf();return typeof e=="number"?e:e.toString()}static checkUintRange(e,n,r){if(e<n||e>r)throw new Error(`Invalid ${this.constructor.name}: ${e} must be >= ${n} and <= ${r}`)}}ka.UInt=zM;Object.defineProperty(ec,"__esModule",{value:!0});ec.UInt64=void 0;const HM=ka,Vd=at,Ba=Ct,WM=ni,XM=/^[a-fA-F0-9]{1,16}$/,KM=/^[0-9]{1,20}$/,A_=BigInt(4294967295);function C_(t){return t==="MaximumAmount"||t==="OutstandingAmount"||t==="MPTAmount"}class Cn extends HM.UInt{constructor(e){super(e??Cn.defaultUInt64.bytes)}static fromParser(e){return new Cn(e.read(Cn.width))}static from(e,n=""){if(e instanceof Cn)return e;let r=new Uint8Array(Cn.width);if(typeof e=="number"){if(e<0)throw new Error("value must be an unsigned integer");const s=BigInt(e),i=[new Uint8Array(4),new Uint8Array(4)];return(0,Ba.writeUInt32BE)(i[0],Number(s>>BigInt(32)),0),(0,Ba.writeUInt32BE)(i[1],Number(s&BigInt(A_)),0),new Cn((0,Vd.concat)(i))}if(typeof e=="string"){if(C_(n)){if(!KM.test(e))throw new Error(`${n} ${e} is not a valid base 10 string`);e=BigInt(e).toString(16)}if(typeof e=="string"&&!XM.test(e))throw new Error(`${e} is not a valid hex-string`);const s=e.padStart(16,"0");return r=(0,Vd.hexToBytes)(s),new Cn(r)}if(typeof e=="bigint"){const s=[new Uint8Array(4),new Uint8Array(4)];return(0,Ba.writeUInt32BE)(s[0],Number(Number(e>>BigInt(32))),0),(0,Ba.writeUInt32BE)(s[1],Number(e&BigInt(A_)),0),new Cn((0,Vd.concat)(s))}throw new Error("Cannot construct UInt64 from given value")}toJSON(e=WM.DEFAULT_DEFINITIONS,n=""){const r=(0,Vd.bytesToHex)(this.bytes);return C_(n)?BigInt("0x"+r).toString(10):r}valueOf(){const e=BigInt((0,Ba.readUInt32BE)(this.bytes.slice(0,4),0)),n=BigInt((0,Ba.readUInt32BE)(this.bytes.slice(4),0));return e<<BigInt(32)|n}toBytes(){return this.bytes}}ec.UInt64=Cn;Cn.width=64/8;Cn.defaultUInt64=new Cn(new Uint8Array(Cn.width));var j_;function zx(){if(j_)return wc;j_=1,Object.defineProperty(wc,"__esModule",{value:!0}),wc.STObject=void 0;const t=ni,e=dn,n=Un,r=Yr,s=_s,i=TA(),a=ec,l=Uint8Array.from([225]),c="ObjectEndMarker",u="STObject",d="Destination",h="Account",f="SourceTag",m="DestinationTag";function _(y,x){const b=(0,n.xAddressToClassicAddress)(x);let v;if(y===d)v=m;else if(y===h)v=f;else if(b.tag!==!1)throw new Error(`${y} cannot have an associated tag`);return b.tag!==!1?{[y]:b.classicAddress,[v]:b.tag}:{[y]:b.classicAddress}}function S(y,x){if(!(y[f]===void 0||x[f]===void 0))throw new Error("Cannot have Account X-Address and SourceTag");if(!(y[m]===void 0||x[m]===void 0))throw new Error("Cannot have Destination X-Address and DestinationTag")}class j extends e.SerializedType{static fromParser(x){const b=new s.BytesList,v=new s.BinarySerializer(b);for(;!x.end();){const A=x.readField();if(A.name===c)break;const E=x.readFieldValue(A);v.writeFieldAndValue(A,E),A.type.name===u&&v.put(l)}return new j(b.toBytes())}static from(x,b,v=t.DEFAULT_DEFINITIONS){if(x instanceof j)return x;const A=new s.BytesList,E=new s.BinarySerializer(A);let L=!1;const Y=Object.entries(x).reduce((U,[G,ae])=>{let he;return ae&&(0,n.isValidXAddress)(ae.toString())&&(he=_(G,ae.toString()),S(he,x)),Object.assign(U,he??{[G]:ae})},{});let ee=Object.keys(Y).map(U=>v.field[U]).filter(U=>U!==void 0&&Y[U.name]!==void 0&&U.isSerialized).sort((U,G)=>U.ordinal-G.ordinal);return b!==void 0&&(ee=ee.filter(b)),ee.forEach(U=>{const G=U.type.name===u?this.from(Y[U.name],void 0,v):U.type.name==="STArray"?i.STArray.from(Y[U.name],v):U.type.name==="UInt64"?a.UInt64.from(Y[U.name],U.name):U.associatedType.from(Y[U.name]);if(G==null)throw new TypeError(`Unable to interpret "${U.name}: ${Y[U.name]}".`);G.name==="UNLModify"&&(L=!0);const ae=U.name=="Account"&&L;E.writeFieldAndValue(U,G,ae),U.type.name===u&&E.put(l)}),new j(A.toBytes())}toJSON(x){const b=new r.BinaryParser(this.toString(),x),v={};for(;!b.end();){const A=b.readField();if(A.name===c)break;v[A.name]=b.readFieldValue(A).toJSON(x,A.name)}return v}}return wc.STObject=j,wc}var k_;function TA(){if(k_)return xc;k_=1,Object.defineProperty(xc,"__esModule",{value:!0}),xc.STArray=void 0;const t=ni,e=dn,n=zx(),r=Yr,s=at,i=Uint8Array.from([241]),a="ArrayEndMarker",l=Uint8Array.from([225]);function c(d){return Array.isArray(d)&&d.every(h=>typeof h=="object"&&Object.keys(h).length===1&&typeof Object.values(h)[0]=="object")}class u extends e.SerializedType{static fromParser(h){const f=[];for(;!h.end();){const m=h.readField();if(m.name===a)break;f.push(m.header,h.readFieldValue(m).toBytes(),l)}return f.push(i),new u((0,s.concat)(f))}static from(h,f=t.DEFAULT_DEFINITIONS){if(h instanceof u)return h;if(c(h)){const m=[];return h.forEach(_=>{m.push(n.STObject.from(_,void 0,f).toBytes())}),m.push(i),new u((0,s.concat)(m))}throw new Error("Cannot construct STArray from value given")}toJSON(h=t.DEFAULT_DEFINITIONS){const f=[],m=new r.BinaryParser(this.toString(),h);for(;!m.end();){const _=m.readField();if(_.name===a)break;const S={};S[_.name]=n.STObject.fromParser(m).toJSON(h),f.push(S)}return f}}return xc.STArray=u,xc}var xp={};Object.defineProperty(xp,"__esModule",{value:!0});xp.UInt16=void 0;const qM=ka,O_=Ct;class Xn extends qM.UInt{constructor(e){super(e??Xn.defaultUInt16.bytes)}static fromParser(e){return new Xn(e.read(Xn.width))}static from(e){if(e instanceof Xn)return e;if(typeof e=="number"){Xn.checkUintRange(e,0,65535);const n=new Uint8Array(Xn.width);return(0,O_.writeUInt16BE)(n,e,0),new Xn(n)}throw new Error("Can not construct UInt16 with given value")}valueOf(){return parseInt((0,O_.readUInt16BE)(this.bytes,0))}}xp.UInt16=Xn;Xn.width=16/8;Xn.defaultUInt16=new Xn(new Uint8Array(Xn.width));var td={};Object.defineProperty(td,"__esModule",{value:!0});td.UInt32=void 0;const GM=ka,j0=Ct;class jn extends GM.UInt{constructor(e){super(e??jn.defaultUInt32.bytes)}static fromParser(e){return new jn(e.read(jn.width))}static from(e){if(e instanceof jn)return e;const n=new Uint8Array(jn.width);if(typeof e=="string"){const r=Number.parseInt(e);return(0,j0.writeUInt32BE)(n,r,0),new jn(n)}if(typeof e=="number")return jn.checkUintRange(e,0,4294967295),(0,j0.writeUInt32BE)(n,e,0),new jn(n);throw new Error("Cannot construct UInt32 from given value")}valueOf(){return parseInt((0,j0.readUInt32BE)(this.bytes,0),10)}}td.UInt32=jn;jn.width=32/8;jn.defaultUInt32=new jn(new Uint8Array(jn.width));var nd={};Object.defineProperty(nd,"__esModule",{value:!0});nd.UInt8=void 0;const YM=ka,JM=at,QM=Ct;class Kn extends YM.UInt{constructor(e){super(e??Kn.defaultUInt8.bytes)}static fromParser(e){return new Kn(e.read(Kn.width))}static from(e){if(e instanceof Kn)return e;if(typeof e=="number"){Kn.checkUintRange(e,0,255);const n=new Uint8Array(Kn.width);return(0,QM.writeUInt8)(n,e,0),new Kn(n)}throw new Error("Cannot construct UInt8 from given value")}valueOf(){return parseInt((0,JM.bytesToHex)(this.bytes),16)}}nd.UInt8=Kn;Kn.width=8/8;Kn.defaultUInt8=new Kn(new Uint8Array(Kn.width));var wp={};Object.defineProperty(wp,"__esModule",{value:!0});wp.Vector256=void 0;const ZM=dn,I_=Zl,P_=_s,e3=at;function t3(t){return Array.isArray(t)&&(t.length===0||typeof t[0]=="string")}class eu extends ZM.SerializedType{constructor(e){super(e)}static fromParser(e,n){const r=new P_.BytesList,i=(n??e.size())/32;for(let a=0;a<i;a++)I_.Hash256.fromParser(e).toBytesSink(r);return new eu(r.toBytes())}static from(e){if(e instanceof eu)return e;if(t3(e)){const n=new P_.BytesList;return e.forEach(r=>{I_.Hash256.from(r).toBytesSink(n)}),new eu(n.toBytes())}throw new Error("Cannot construct Vector256 from given value")}toJSON(){if(this.bytes.byteLength%32!==0)throw new Error("Invalid bytes for Vector256");const e=[];for(let n=0;n<this.bytes.byteLength;n+=32)e.push((0,e3.bytesToHex)(this.bytes.slice(n,n+32)));return e}}wp.Vector256=eu;var bp={};Object.defineProperty(bp,"__esModule",{value:!0});bp.XChainBridge=void 0;const n3=Yr,tu=go,r3=dn,R_=ed,Gy=at;function s3(t){const e=Object.keys(t).sort();return e.length===4&&e[0]==="IssuingChainDoor"&&e[1]==="IssuingChainIssue"&&e[2]==="LockingChainDoor"&&e[3]==="LockingChainIssue"}class hs extends r3.SerializedType{constructor(e){super(e??hs.ZERO_XCHAIN_BRIDGE.bytes)}static from(e){if(e instanceof hs)return e;if(!s3(e))throw new Error("Invalid type to construct an XChainBridge");const n=[];return this.TYPE_ORDER.forEach(r=>{const{name:s,type:i}=r;i===tu.AccountID&&n.push(Uint8Array.from([20]));const a=i.from(e[s]);n.push(a.toBytes())}),new hs((0,Gy.concat)(n))}static fromParser(e){const n=[];return this.TYPE_ORDER.forEach(r=>{const{type:s}=r;s===tu.AccountID&&(e.skip(1),n.push(Uint8Array.from([20])));const i=s.fromParser(e);n.push(i.toBytes())}),new hs((0,Gy.concat)(n))}toJSON(){const e=new n3.BinaryParser(this.toString()),n={};return hs.TYPE_ORDER.forEach(r=>{const{name:s,type:i}=r;i===tu.AccountID&&e.skip(1);const a=i.fromParser(e).toJSON();n[s]=a}),n}}bp.XChainBridge=hs;hs.ZERO_XCHAIN_BRIDGE=new hs((0,Gy.concat)([Uint8Array.from([20]),new Uint8Array(40),Uint8Array.from([20]),new Uint8Array(40)]));hs.TYPE_ORDER=[{name:"LockingChainDoor",type:tu.AccountID},{name:"LockingChainIssue",type:R_.Issue},{name:"IssuingChainDoor",type:tu.AccountID},{name:"IssuingChainIssue",type:R_.Issue}];(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Vector256=t.UInt64=t.UInt32=t.UInt16=t.UInt8=t.STObject=t.STArray=t.PathSet=t.Hash256=t.Hash192=t.Hash160=t.Hash128=t.Currency=t.Blob=t.Amount=t.AccountID=t.coreTypes=void 0;const e=go;Object.defineProperty(t,"AccountID",{enumerable:!0,get:function(){return e.AccountID}});const n=mp;Object.defineProperty(t,"Amount",{enumerable:!0,get:function(){return n.Amount}});const r=gp;Object.defineProperty(t,"Blob",{enumerable:!0,get:function(){return r.Blob}});const s=ja;Object.defineProperty(t,"Currency",{enumerable:!0,get:function(){return s.Currency}});const i=yp;Object.defineProperty(t,"Hash128",{enumerable:!0,get:function(){return i.Hash128}});const a=Ql;Object.defineProperty(t,"Hash160",{enumerable:!0,get:function(){return a.Hash160}});const l=Zu;Object.defineProperty(t,"Hash192",{enumerable:!0,get:function(){return l.Hash192}});const c=Zl;Object.defineProperty(t,"Hash256",{enumerable:!0,get:function(){return c.Hash256}});const u=ed,d=vp;Object.defineProperty(t,"PathSet",{enumerable:!0,get:function(){return d.PathSet}});const h=TA();Object.defineProperty(t,"STArray",{enumerable:!0,get:function(){return h.STArray}});const f=zx();Object.defineProperty(t,"STObject",{enumerable:!0,get:function(){return f.STObject}});const m=xp;Object.defineProperty(t,"UInt16",{enumerable:!0,get:function(){return m.UInt16}});const _=td;Object.defineProperty(t,"UInt32",{enumerable:!0,get:function(){return _.UInt32}});const S=ec;Object.defineProperty(t,"UInt64",{enumerable:!0,get:function(){return S.UInt64}});const j=nd;Object.defineProperty(t,"UInt8",{enumerable:!0,get:function(){return j.UInt8}});const y=wp;Object.defineProperty(t,"Vector256",{enumerable:!0,get:function(){return y.Vector256}});const x=bp,b=ni,v={AccountID:e.AccountID,Amount:n.Amount,Blob:r.Blob,Currency:s.Currency,Hash128:i.Hash128,Hash160:a.Hash160,Hash192:l.Hash192,Hash256:c.Hash256,Issue:u.Issue,PathSet:d.PathSet,STArray:h.STArray,STObject:f.STObject,UInt8:j.UInt8,UInt16:m.UInt16,UInt32:_.UInt32,UInt64:S.UInt64,Vector256:y.Vector256,XChainBridge:x.XChainBridge};t.coreTypes=v,b.DEFAULT_DEFINITIONS.associateTypes(v)})(mo);var Hx={},yo={};Object.defineProperty(yo,"__esModule",{value:!0});yo.HashPrefix=void 0;const i3=Ct;function ns(t){const e=new Uint8Array(4);return(0,i3.writeUInt32BE)(e,t,0),e}const o3={transactionID:ns(1415073280),transaction:ns(1397638144),accountStateEntry:ns(1296846336),innerNode:ns(1296649728),ledgerHeader:ns(1280791040),transactionSig:ns(1398036480),transactionMultiSig:ns(1397576704),validation:ns(1447119872),proposal:ns(1347571712),paymentChannelClaim:ns(1129073920)};yo.HashPrefix=o3;var Xr={},tc={},Ot={},Ge={};Object.defineProperty(Ge,"__esModule",{value:!0});Ge.add5L=Ge.add5H=Ge.add4H=Ge.add4L=Ge.add3H=Ge.add3L=Ge.rotlBL=Ge.rotlBH=Ge.rotlSL=Ge.rotlSH=Ge.rotr32L=Ge.rotr32H=Ge.rotrBL=Ge.rotrBH=Ge.rotrSL=Ge.rotrSH=Ge.shrSL=Ge.shrSH=Ge.toBig=void 0;Ge.fromBig=Wx;Ge.split=AA;Ge.add=$A;const zd=BigInt(2**32-1),Yy=BigInt(32);function Wx(t,e=!1){return e?{h:Number(t&zd),l:Number(t>>Yy&zd)}:{h:Number(t>>Yy&zd)|0,l:Number(t&zd)|0}}function AA(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:a}=Wx(t[s],e);[n[s],r[s]]=[i,a]}return[n,r]}const CA=(t,e)=>BigInt(t>>>0)<<Yy|BigInt(e>>>0);Ge.toBig=CA;const jA=(t,e,n)=>t>>>n;Ge.shrSH=jA;const kA=(t,e,n)=>t<<32-n|e>>>n;Ge.shrSL=kA;const OA=(t,e,n)=>t>>>n|e<<32-n;Ge.rotrSH=OA;const IA=(t,e,n)=>t<<32-n|e>>>n;Ge.rotrSL=IA;const PA=(t,e,n)=>t<<64-n|e>>>n-32;Ge.rotrBH=PA;const RA=(t,e,n)=>t>>>n-32|e<<64-n;Ge.rotrBL=RA;const LA=(t,e)=>e;Ge.rotr32H=LA;const MA=(t,e)=>t;Ge.rotr32L=MA;const DA=(t,e,n)=>t<<n|e>>>32-n;Ge.rotlSH=DA;const BA=(t,e,n)=>e<<n|t>>>32-n;Ge.rotlSL=BA;const FA=(t,e,n)=>e<<n-32|t>>>64-n;Ge.rotlBH=FA;const UA=(t,e,n)=>t<<n-32|e>>>64-n;Ge.rotlBL=UA;function $A(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const VA=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0);Ge.add3L=VA;const zA=(t,e,n,r)=>e+n+r+(t/2**32|0)|0;Ge.add3H=zA;const HA=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0);Ge.add4L=HA;const WA=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0;Ge.add4H=WA;const XA=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0);Ge.add5L=XA;const KA=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0;Ge.add5H=KA;const a3={fromBig:Wx,split:AA,toBig:CA,shrSH:jA,shrSL:kA,rotrSH:OA,rotrSL:IA,rotrBH:PA,rotrBL:RA,rotr32H:LA,rotr32L:MA,rotlSH:DA,rotlSL:BA,rotlBH:FA,rotlBL:UA,add:$A,add3L:VA,add3H:zA,add4L:HA,add4H:WA,add5H:KA,add5L:XA};Ge.default=a3;Object.defineProperty(Ot,"__esModule",{value:!0});Ot.sha384=Ot.sha512_256=Ot.sha512_224=Ot.sha512=Ot.SHA384=Ot.SHA512_256=Ot.SHA512_224=Ot.SHA512=void 0;const l3=ei,et=Ge,_p=Fn,[c3,u3]=(()=>et.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),hi=new Uint32Array(80),fi=new Uint32Array(80);class rd extends l3.HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:a,Dh:l,Dl:c,Eh:u,El:d,Fh:h,Fl:f,Gh:m,Gl:_,Hh:S,Hl:j}=this;return[e,n,r,s,i,a,l,c,u,d,h,f,m,_,S,j]}set(e,n,r,s,i,a,l,c,u,d,h,f,m,_,S,j){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=a|0,this.Dh=l|0,this.Dl=c|0,this.Eh=u|0,this.El=d|0,this.Fh=h|0,this.Fl=f|0,this.Gh=m|0,this.Gl=_|0,this.Hh=S|0,this.Hl=j|0}process(e,n){for(let b=0;b<16;b++,n+=4)hi[b]=e.getUint32(n),fi[b]=e.getUint32(n+=4);for(let b=16;b<80;b++){const v=hi[b-15]|0,A=fi[b-15]|0,E=et.default.rotrSH(v,A,1)^et.default.rotrSH(v,A,8)^et.default.shrSH(v,A,7),L=et.default.rotrSL(v,A,1)^et.default.rotrSL(v,A,8)^et.default.shrSL(v,A,7),Y=hi[b-2]|0,ee=fi[b-2]|0,U=et.default.rotrSH(Y,ee,19)^et.default.rotrBH(Y,ee,61)^et.default.shrSH(Y,ee,6),G=et.default.rotrSL(Y,ee,19)^et.default.rotrBL(Y,ee,61)^et.default.shrSL(Y,ee,6),ae=et.default.add4L(L,G,fi[b-7],fi[b-16]),he=et.default.add4H(ae,E,U,hi[b-7],hi[b-16]);hi[b]=he|0,fi[b]=ae|0}let{Ah:r,Al:s,Bh:i,Bl:a,Ch:l,Cl:c,Dh:u,Dl:d,Eh:h,El:f,Fh:m,Fl:_,Gh:S,Gl:j,Hh:y,Hl:x}=this;for(let b=0;b<80;b++){const v=et.default.rotrSH(h,f,14)^et.default.rotrSH(h,f,18)^et.default.rotrBH(h,f,41),A=et.default.rotrSL(h,f,14)^et.default.rotrSL(h,f,18)^et.default.rotrBL(h,f,41),E=h&m^~h&S,L=f&_^~f&j,Y=et.default.add5L(x,A,L,u3[b],fi[b]),ee=et.default.add5H(Y,y,v,E,c3[b],hi[b]),U=Y|0,G=et.default.rotrSH(r,s,28)^et.default.rotrBH(r,s,34)^et.default.rotrBH(r,s,39),ae=et.default.rotrSL(r,s,28)^et.default.rotrBL(r,s,34)^et.default.rotrBL(r,s,39),he=r&i^r&l^i&l,xe=s&a^s&c^a&c;y=S|0,x=j|0,S=m|0,j=_|0,m=h|0,_=f|0,{h,l:f}=et.default.add(u|0,d|0,ee|0,U|0),u=l|0,d=c|0,l=i|0,c=a|0,i=r|0,a=s|0;const de=et.default.add3L(U,ae,xe);r=et.default.add3H(de,ee,G,he),s=de|0}({h:r,l:s}=et.default.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:a}=et.default.add(this.Bh|0,this.Bl|0,i|0,a|0),{h:l,l:c}=et.default.add(this.Ch|0,this.Cl|0,l|0,c|0),{h:u,l:d}=et.default.add(this.Dh|0,this.Dl|0,u|0,d|0),{h,l:f}=et.default.add(this.Eh|0,this.El|0,h|0,f|0),{h:m,l:_}=et.default.add(this.Fh|0,this.Fl|0,m|0,_|0),{h:S,l:j}=et.default.add(this.Gh|0,this.Gl|0,S|0,j|0),{h:y,l:x}=et.default.add(this.Hh|0,this.Hl|0,y|0,x|0),this.set(r,s,i,a,l,c,u,d,h,f,m,_,S,j,y,x)}roundClean(){hi.fill(0),fi.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}Ot.SHA512=rd;class qA extends rd{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}Ot.SHA512_224=qA;class GA extends rd{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}Ot.SHA512_256=GA;class YA extends rd{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}Ot.SHA384=YA;Ot.sha512=(0,_p.wrapConstructor)(()=>new rd);Ot.sha512_224=(0,_p.wrapConstructor)(()=>new qA);Ot.sha512_256=(0,_p.wrapConstructor)(()=>new GA);Ot.sha384=(0,_p.wrapConstructor)(()=>new YA);var d3=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tc,"__esModule",{value:!0});tc.sha512=void 0;const h3=Ot,f3=d3(Qu);tc.sha512=(0,f3.default)(h3.sha512);Object.defineProperty(Xr,"__esModule",{value:!0});Xr.transactionID=Xr.sha512Half=Xr.Sha512Half=void 0;const p3=yo,JA=mo,m3=_s,g3=tc;class Ep extends m3.BytesList{constructor(){super(...arguments),this.hash=g3.sha512.create()}static put(e){return new Ep().put(e)}put(e){return this.hash.update(e),this}finish256(){return Uint8Array.from(this.hash.digest().slice(0,32))}finish(){return new JA.Hash256(this.finish256())}}Xr.Sha512Half=Ep;function QA(...t){const e=new Ep;return t.forEach(n=>e.put(n)),e.finish256()}Xr.sha512Half=QA;function y3(t){return new JA.Hash256(QA(p3.HashPrefix.transactionID,t))}Xr.transactionID=y3;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.transactionID=t.sha512Half=t.binaryToJSON=t.signingClaimData=t.signingData=t.multiSigningData=t.readJSON=t.serializeObject=t.makeParser=t.BytesList=t.BinarySerializer=t.BinaryParser=void 0;const e=at,n=mo,r=Yr;Object.defineProperty(t,"BinaryParser",{enumerable:!0,get:function(){return r.BinaryParser}});const s=yo,i=_s;Object.defineProperty(t,"BinarySerializer",{enumerable:!0,get:function(){return i.BinarySerializer}}),Object.defineProperty(t,"BytesList",{enumerable:!0,get:function(){return i.BytesList}});const a=Xr;Object.defineProperty(t,"sha512Half",{enumerable:!0,get:function(){return a.sha512Half}}),Object.defineProperty(t,"transactionID",{enumerable:!0,get:function(){return a.transactionID}});const l=ni,c=(S,j)=>new r.BinaryParser(S instanceof Uint8Array?(0,e.bytesToHex)(S):S,j);t.makeParser=c;const u=(S,j=l.DEFAULT_DEFINITIONS)=>S.readType(n.coreTypes.STObject).toJSON(j);t.readJSON=u;const d=(S,j)=>u(c(S,j),j);t.binaryToJSON=d;function h(S,j={}){const{prefix:y,suffix:x,signingFieldsOnly:b=!1,definitions:v}=j,A=new i.BytesList;y&&A.put(y);const E=b?L=>L.isSigningField:void 0;return n.coreTypes.STObject.from(S,E,v).toBytesSink(A),x&&A.put(x),A.toBytes()}t.serializeObject=h;function f(S,j=s.HashPrefix.transactionSig,y={}){return h(S,{prefix:j,signingFieldsOnly:!0,definitions:y.definitions})}t.signingData=f;function m(S){const j=BigInt(String(S.amount)),y=s.HashPrefix.paymentChannelClaim,x=n.coreTypes.Hash256.from(S.channel).toBytes(),b=n.coreTypes.UInt64.from(j).toBytes(),v=new i.BytesList;return v.put(y),v.put(x),v.put(b),v.toBytes()}t.signingClaimData=m;function _(S,j,y={definitions:l.DEFAULT_DEFINITIONS}){const x=s.HashPrefix.transactionMultiSig,b=n.coreTypes.AccountID.from(j).toBytes();return h(S,{prefix:x,suffix:b,signingFieldsOnly:!0,definitions:y.definitions})}t.multiSigningData=_})(Hx);var Hs={};Object.defineProperty(Hs,"__esModule",{value:!0});Hs.ShaMapLeaf=Hs.ShaMapNode=Hs.ShaMap=void 0;const L_=mo,v3=yo,ZA=Xr;class Xx{}Hs.ShaMapNode=Xx;class Jy extends Xx{constructor(e,n){super(),this.index=e,this.item=n}isLeaf(){return!0}isInner(){return!1}hashPrefix(){return this.item===void 0?new Uint8Array(0):this.item.hashPrefix()}hash(){const e=ZA.Sha512Half.put(this.hashPrefix());return this.toBytesSink(e),e.finish()}toBytesSink(e){this.item!==void 0&&this.item.toBytesSink(e),this.index.toBytesSink(e)}}Hs.ShaMapLeaf=Jy;class Ef extends Xx{constructor(e=0){super(),this.depth=e,this.slotBits=0,this.branches=Array(16)}isInner(){return!0}isLeaf(){return!1}hashPrefix(){return v3.HashPrefix.innerNode}setBranch(e,n){this.slotBits=this.slotBits|1<<e,this.branches[e]=n}empty(){return this.slotBits===0}hash(){if(this.empty())return L_.coreTypes.Hash256.ZERO_256;const e=ZA.Sha512Half.put(this.hashPrefix());return this.toBytesSink(e),e.finish()}toBytesSink(e){for(let n=0;n<this.branches.length;n++){const r=this.branches[n];(r?r.hash():L_.coreTypes.Hash256.ZERO_256).toBytesSink(e)}}addItem(e,n,r){if(e===void 0)throw new Error;if(e!==void 0){const s=e.nibblet(this.depth),i=this.branches[s];if(i===void 0)this.setBranch(s,r||new Jy(e,n));else if(i instanceof Jy){const a=new Ef(this.depth+1);a.addItem(i.index,void 0,i),a.addItem(e,n,r),this.setBranch(s,a)}else if(i instanceof Ef)i.addItem(e,n,r);else throw new Error("invalid ShaMap.addItem call")}}}class x3 extends Ef{}Hs.ShaMap=x3;var $r={};Object.defineProperty($r,"__esModule",{value:!0});$r.decodeLedgerData=$r.ledgerHash=$r.transactionTreeHash=$r.accountStateHash=void 0;const w3=Hs,Kx=yo,b3=Xr,e2=Hx,Wi=Zl,M_=zx(),t2=ec,k0=td,D_=nd,_3=Yr;function n2(t,e){const n=new w3.ShaMap;return e.forEach(r=>n.addItem(...t(r))),n.hash()}function E3(t){if(!t.hash)throw new Error;return[Wi.Hash256.from(t.hash),{hashPrefix(){return Kx.HashPrefix.transaction},toBytesSink(r){const s=new e2.BinarySerializer(r);s.writeLengthEncoded(M_.STObject.from(t)),s.writeLengthEncoded(M_.STObject.from(t.metaData))}},void 0]}function S3(t){const e=Wi.Hash256.from(t.index),n=(0,e2.serializeObject)(t);return[e,{hashPrefix(){return Kx.HashPrefix.accountStateEntry},toBytesSink(s){s.put(n)}},void 0]}function N3(t){return n2(E3,t)}$r.transactionTreeHash=N3;function T3(t){return n2(S3,t)}$r.accountStateHash=T3;function A3(t){const e=new b3.Sha512Half;if(e.put(Kx.HashPrefix.ledgerHeader),t.parent_close_time===void 0||t.close_flags===void 0)throw new Error;return k0.UInt32.from(t.ledger_index).toBytesSink(e),t2.UInt64.from(BigInt(String(t.total_coins))).toBytesSink(e),Wi.Hash256.from(t.parent_hash).toBytesSink(e),Wi.Hash256.from(t.transaction_hash).toBytesSink(e),Wi.Hash256.from(t.account_hash).toBytesSink(e),k0.UInt32.from(t.parent_close_time).toBytesSink(e),k0.UInt32.from(t.close_time).toBytesSink(e),D_.UInt8.from(t.close_time_resolution).toBytesSink(e),D_.UInt8.from(t.close_flags).toBytesSink(e),e.finish()}$r.ledgerHash=A3;function C3(t,e){if(typeof t!="string")throw new Error("binary must be a hex string");const n=new _3.BinaryParser(t,e);return{ledger_index:n.readUInt32(),total_coins:n.readType(t2.UInt64).valueOf().toString(),parent_hash:n.readType(Wi.Hash256).toHex(),transaction_hash:n.readType(Wi.Hash256).toHex(),account_hash:n.readType(Wi.Hash256).toHex(),parent_close_time:n.readUInt32(),close_time:n.readUInt32(),close_time_resolution:n.readUInt8(),close_flags:n.readUInt8()}}$r.decodeLedgerData=C3;var Sp={},j3=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Sp,"__esModule",{value:!0});Sp.quality=void 0;const k3=mo,B_=j3($n),F_=at;let O3=class{static encode(e){const n=(0,B_.default)(e),r=((n==null?void 0:n.e)||0)-15,s=n.times(`1e${-r}`).abs().toString(),i=k3.coreTypes.UInt64.from(BigInt(s)).toBytes();return i[0]=r+100,i}static decode(e){const n=(0,F_.hexToBytes)(e).slice(-8),r=n[0]-100;return new B_.default(`0x${(0,F_.bytesToHex)(n.slice(1))}`).times(`1e${r}`)}};Sp.quality=O3;(function(t){var e=ge&&ge.__createBinding||(Object.create?function(f,m,_,S){S===void 0&&(S=_);var j=Object.getOwnPropertyDescriptor(m,_);(!j||("get"in j?!m.__esModule:j.writable||j.configurable))&&(j={enumerable:!0,get:function(){return m[_]}}),Object.defineProperty(f,S,j)}:function(f,m,_,S){S===void 0&&(S=_),f[S]=m[_]}),n=ge&&ge.__setModuleDefault||(Object.create?function(f,m){Object.defineProperty(f,"default",{enumerable:!0,value:m})}:function(f,m){f.default=m}),r=ge&&ge.__importStar||function(f){if(f&&f.__esModule)return f;var m={};if(f!=null)for(var _ in f)_!=="default"&&Object.prototype.hasOwnProperty.call(f,_)&&e(m,f,_);return n(m,f),m};Object.defineProperty(t,"__esModule",{value:!0}),t.types=t.ShaMap=t.HashPrefix=t.quality=t.TransactionResult=t.Type=t.LedgerEntryType=t.TransactionType=t.Field=t.DEFAULT_DEFINITIONS=t.ledgerHashes=t.binary=t.hashes=void 0;const s=ni;Object.defineProperty(t,"DEFAULT_DEFINITIONS",{enumerable:!0,get:function(){return s.DEFAULT_DEFINITIONS}}),Object.defineProperty(t,"Field",{enumerable:!0,get:function(){return s.Field}}),Object.defineProperty(t,"TransactionType",{enumerable:!0,get:function(){return s.TransactionType}}),Object.defineProperty(t,"LedgerEntryType",{enumerable:!0,get:function(){return s.LedgerEntryType}}),Object.defineProperty(t,"Type",{enumerable:!0,get:function(){return s.Type}}),Object.defineProperty(t,"TransactionResult",{enumerable:!0,get:function(){return s.TransactionResult}});const i=r(mo);t.types=i;const a=r(Hx);t.binary=a;const l=Hs;Object.defineProperty(t,"ShaMap",{enumerable:!0,get:function(){return l.ShaMap}});const c=r($r);t.ledgerHashes=c;const u=r(Xr);t.hashes=u;const d=Sp;Object.defineProperty(t,"quality",{enumerable:!0,get:function(){return d.quality}});const h=yo;Object.defineProperty(t,"HashPrefix",{enumerable:!0,get:function(){return h.HashPrefix}})})(wA);var Np={};Object.defineProperty(Np,"__esModule",{value:!0});Np.XrplDefinitions=void 0;const I3=Ux,P3=mo;class R3 extends I3.XrplDefinitionsBase{constructor(e,n){const r=Object.assign({},P3.coreTypes,n);super(e,r)}}Np.XrplDefinitions=R3;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.coreTypes=t.DEFAULT_DEFINITIONS=t.XrplDefinitionsBase=t.XrplDefinitions=t.TRANSACTION_TYPES=t.decodeLedgerData=t.decodeQuality=t.encodeQuality=t.encodeForMultisigning=t.encodeForSigningClaim=t.encodeForSigning=t.encode=t.decode=void 0;const e=wA,n=$r;Object.defineProperty(t,"decodeLedgerData",{enumerable:!0,get:function(){return n.decodeLedgerData}});const r=ni;Object.defineProperty(t,"XrplDefinitionsBase",{enumerable:!0,get:function(){return r.XrplDefinitionsBase}}),Object.defineProperty(t,"TRANSACTION_TYPES",{enumerable:!0,get:function(){return r.TRANSACTION_TYPES}}),Object.defineProperty(t,"DEFAULT_DEFINITIONS",{enumerable:!0,get:function(){return r.DEFAULT_DEFINITIONS}});const s=Np;Object.defineProperty(t,"XrplDefinitions",{enumerable:!0,get:function(){return s.XrplDefinitions}});const i=mo;Object.defineProperty(t,"coreTypes",{enumerable:!0,get:function(){return i.coreTypes}});const a=at,{signingData:l,signingClaimData:c,multiSigningData:u,binaryToJSON:d,serializeObject:h}=e.binary;function f(b,v){if(typeof b!="string")throw new Error("binary must be a hex string");return d(b,v)}t.decode=f;function m(b,v){if(typeof b!="object")throw new Error;return(0,a.bytesToHex)(h(b,{definitions:v}))}t.encode=m;function _(b,v){if(typeof b!="object")throw new Error;return(0,a.bytesToHex)(l(b,e.HashPrefix.transactionSig,{definitions:v}))}t.encodeForSigning=_;function S(b){if(typeof b!="object")throw new Error;return(0,a.bytesToHex)(c(b))}t.encodeForSigningClaim=S;function j(b,v,A){if(typeof b!="object")throw new Error;if(b.SigningPubKey!=="")throw new Error;const E=A?{definitions:A}:void 0;return(0,a.bytesToHex)(u(b,v,E))}t.encodeForMultisigning=j;function y(b){if(typeof b!="string")throw new Error;return(0,a.bytesToHex)(e.quality.encode(b))}t.encodeQuality=y;function x(b){if(typeof b!="string")throw new Error;return e.quality.decode(b).toString()}t.decodeQuality=x})(Nr);var Xt={};Object.defineProperty(Xt,"__esModule",{value:!0});Xt.isHex=Xt.isFlagEnabled=Xt.onlyHasFields=Xt.INTEGER_SANITY_CHECK=void 0;const L3=/^[0-9A-Fa-f]+$/u;Xt.INTEGER_SANITY_CHECK=/^[0-9]+$/u;function M3(t,e){return Object.keys(t).every(n=>e.includes(n))}Xt.onlyHasFields=M3;function D3(t,e){return(BigInt(e)&BigInt(t))===BigInt(e)}Xt.isFlagEnabled=D3;function B3(t){return L3.test(t)}Xt.isHex=B3;Object.defineProperty(Ce,"__esModule",{value:!0});Ce.validateCredentialsList=Ce.validateCredentialType=Ce.parseAmountValue=Ce.validateBaseTransaction=Ce.validateOptionalField=Ce.validateRequiredField=Ce.isXChainBridge=Ce.isAmount=Ce.isAccount=Ce.isMPTAmount=Ce.isIssuedCurrency=Ce.isCurrency=Ce.isNumber=Ce.isString=void 0;const F3=at,U_=Un,U3=Nr,Mt=je,$3=Xt,V3=3,$_=8,z3=64,V_=z3*2;function H3(t){if(t.Memo==null)return!1;const e=t.Memo,n=Object.keys(e).length,r=e.MemoData==null||typeof e.MemoData=="string",s=e.MemoFormat==null||typeof e.MemoFormat=="string",i=e.MemoType==null||typeof e.MemoType=="string";return n>=1&&n<=V3&&r&&s&&i&&(0,$3.onlyHasFields)(e,["MemoFormat","MemoData","MemoType"])}const W3=3;function X3(t){const e=t;if(e.Signer==null)return!1;const n=e.Signer;return Object.keys(n).length===W3&&typeof n.Account=="string"&&typeof n.TxnSignature=="string"&&typeof n.SigningPubKey=="string"}const K3=1,q3=2,G3=3,Y3=4,J3=2,Q3=1;function Bl(t){return t!==null&&typeof t=="object"}function Ci(t){return typeof t=="string"}Ce.isString=Ci;function nl(t){return typeof t=="number"}Ce.isNumber=nl;function Qy(t){return Bl(t)&&(Object.keys(t).length===q3&&typeof t.issuer=="string"&&typeof t.currency=="string"||Object.keys(t).length===K3&&t.currency==="XRP")}Ce.isCurrency=Qy;function r2(t){return Bl(t)&&Object.keys(t).length===G3&&typeof t.value=="string"&&typeof t.issuer=="string"&&typeof t.currency=="string"}Ce.isIssuedCurrency=r2;function Z3(t){return Bl(t)&&Bl(t.Credential)&&Object.keys(t).length===Q3&&typeof t.Credential.CredentialType=="string"&&typeof t.Credential.Issuer=="string"}function s2(t){return Bl(t)&&Object.keys(t).length===J3&&typeof t.value=="string"&&typeof t.mpt_issuance_id=="string"}Ce.isMPTAmount=s2;function eD(t){return typeof t=="string"&&((0,U_.isValidClassicAddress)(t)||(0,U_.isValidXAddress)(t))}Ce.isAccount=eD;function i2(t){return typeof t=="string"||r2(t)||s2(t)}Ce.isAmount=i2;function tD(t){return Bl(t)&&Object.keys(t).length===Y3&&typeof t.LockingChainDoor=="string"&&Qy(t.LockingChainIssue)&&typeof t.IssuingChainDoor=="string"&&Qy(t.IssuingChainIssue)}Ce.isXChainBridge=tD;function o2(t,e,n){if(t[e]==null)throw new Mt.ValidationError(`${t.TransactionType}: missing field ${e}`);if(!n(t[e]))throw new Mt.ValidationError(`${t.TransactionType}: invalid field ${e}`)}Ce.validateRequiredField=o2;function as(t,e,n){if(t[e]!==void 0&&!n(t[e]))throw new Mt.ValidationError(`${t.TransactionType}: invalid field ${e}`)}Ce.validateOptionalField=as;function nD(t){if(t.TransactionType===void 0)throw new Mt.ValidationError("BaseTransaction: missing field TransactionType");if(typeof t.TransactionType!="string")throw new Mt.ValidationError("BaseTransaction: TransactionType not string");if(!U3.TRANSACTION_TYPES.includes(t.TransactionType))throw new Mt.ValidationError("BaseTransaction: Unknown TransactionType");o2(t,"Account",Ci),as(t,"Fee",Ci),as(t,"Sequence",nl),as(t,"AccountTxnID",Ci),as(t,"LastLedgerSequence",nl);const e=t.Memos;if(e!==void 0&&!e.every(H3))throw new Mt.ValidationError("BaseTransaction: invalid Memos");const n=t.Signers;if(n!==void 0&&(n.length===0||!n.every(X3)))throw new Mt.ValidationError("BaseTransaction: invalid Signers");as(t,"SourceTag",nl),as(t,"SigningPubKey",Ci),as(t,"TicketSequence",nl),as(t,"TxnSignature",Ci),as(t,"NetworkID",nl)}Ce.validateBaseTransaction=nD;function rD(t){return i2(t)?parseFloat(typeof t=="string"?t:t.value):NaN}Ce.parseAmountValue=rD;function sD(t){if(typeof t.TransactionType!="string")throw new Mt.ValidationError("Invalid TransactionType");if(t.CredentialType===void 0)throw new Mt.ValidationError(`${t.TransactionType}: missing field CredentialType`);if(!Ci(t.CredentialType))throw new Mt.ValidationError(`${t.TransactionType}: CredentialType must be a string`);if(t.CredentialType.length===0)throw new Mt.ValidationError(`${t.TransactionType}: CredentialType cannot be an empty string`);if(t.CredentialType.length>V_)throw new Mt.ValidationError(`${t.TransactionType}: CredentialType length cannot be > ${V_}`);if(!F3.HEX_REGEX.test(t.CredentialType))throw new Mt.ValidationError(`${t.TransactionType}: CredentialType must be encoded in hex`)}Ce.validateCredentialType=sD;function iD(t,e,n){if(t!=null){if(!Array.isArray(t))throw new Mt.ValidationError(`${e}: Credentials must be an array`);if(t.length>$_)throw new Mt.ValidationError(`${e}: Credentials length cannot exceed ${$_} elements`);if(t.length===0)throw new Mt.ValidationError(`${e}: Credentials cannot be an empty array`);if(t.forEach(r=>{if(n){if(!Ci(r))throw new Mt.ValidationError(`${e}: Invalid Credentials ID list format`)}else if(!Z3(r))throw new Mt.ValidationError(`${e}: Invalid Credentials format`)}),oD(t))throw new Mt.ValidationError(`${e}: Credentials cannot contain duplicate elements`)}}Ce.validateCredentialsList=iD;function oD(t){return new Set(t.map(n=>JSON.stringify(n))).size!==t.length}Object.defineProperty(ws,"__esModule",{value:!0});ws.validateAccountSet=ws.AccountSetTfFlags=ws.AccountSetAsfFlags=void 0;const rs=je,O0=Ce;var Sf;(function(t){t[t.asfRequireDest=1]="asfRequireDest",t[t.asfRequireAuth=2]="asfRequireAuth",t[t.asfDisallowXRP=3]="asfDisallowXRP",t[t.asfDisableMaster=4]="asfDisableMaster",t[t.asfAccountTxnID=5]="asfAccountTxnID",t[t.asfNoFreeze=6]="asfNoFreeze",t[t.asfGlobalFreeze=7]="asfGlobalFreeze",t[t.asfDefaultRipple=8]="asfDefaultRipple",t[t.asfDepositAuth=9]="asfDepositAuth",t[t.asfAuthorizedNFTokenMinter=10]="asfAuthorizedNFTokenMinter",t[t.asfDisallowIncomingNFTokenOffer=12]="asfDisallowIncomingNFTokenOffer",t[t.asfDisallowIncomingCheck=13]="asfDisallowIncomingCheck",t[t.asfDisallowIncomingPayChan=14]="asfDisallowIncomingPayChan",t[t.asfDisallowIncomingTrustline=15]="asfDisallowIncomingTrustline",t[t.asfAllowTrustLineClawback=16]="asfAllowTrustLineClawback"})(Sf||(ws.AccountSetAsfFlags=Sf={}));var z_;(function(t){t[t.tfRequireDestTag=65536]="tfRequireDestTag",t[t.tfOptionalDestTag=131072]="tfOptionalDestTag",t[t.tfRequireAuth=262144]="tfRequireAuth",t[t.tfOptionalAuth=524288]="tfOptionalAuth",t[t.tfDisallowXRP=1048576]="tfDisallowXRP",t[t.tfAllowXRP=2097152]="tfAllowXRP"})(z_||(ws.AccountSetTfFlags=z_={}));const aD=3,lD=15;function cD(t){if((0,O0.validateBaseTransaction)(t),(0,O0.validateOptionalField)(t,"NFTokenMinter",O0.isAccount),t.ClearFlag!==void 0){if(typeof t.ClearFlag!="number")throw new rs.ValidationError("AccountSet: invalid ClearFlag");if(!Object.values(Sf).includes(t.ClearFlag))throw new rs.ValidationError("AccountSet: invalid ClearFlag")}if(t.Domain!==void 0&&typeof t.Domain!="string")throw new rs.ValidationError("AccountSet: invalid Domain");if(t.EmailHash!==void 0&&typeof t.EmailHash!="string")throw new rs.ValidationError("AccountSet: invalid EmailHash");if(t.MessageKey!==void 0&&typeof t.MessageKey!="string")throw new rs.ValidationError("AccountSet: invalid MessageKey");if(t.SetFlag!==void 0){if(typeof t.SetFlag!="number")throw new rs.ValidationError("AccountSet: invalid SetFlag");if(!Object.values(Sf).includes(t.SetFlag))throw new rs.ValidationError("AccountSet: invalid SetFlag")}if(t.TransferRate!==void 0&&typeof t.TransferRate!="number")throw new rs.ValidationError("AccountSet: invalid TransferRate");if(t.TickSize!==void 0){if(typeof t.TickSize!="number")throw new rs.ValidationError("AccountSet: invalid TickSize");if(t.TickSize!==0&&(t.TickSize<aD||t.TickSize>lD))throw new rs.ValidationError("AccountSet: invalid TickSize")}}ws.validateAccountSet=cD;var Yi={};Object.defineProperty(Yi,"__esModule",{value:!0});Yi.validateAMMDeposit=Yi.AMMDepositFlags=void 0;const kr=je,So=Ce;var H_;(function(t){t[t.tfLPToken=65536]="tfLPToken",t[t.tfSingleAsset=524288]="tfSingleAsset",t[t.tfTwoAsset=1048576]="tfTwoAsset",t[t.tfOneAssetLPToken=2097152]="tfOneAssetLPToken",t[t.tfLimitLPToken=4194304]="tfLimitLPToken",t[t.tfTwoAssetIfEmpty=8388608]="tfTwoAssetIfEmpty"})(H_||(Yi.AMMDepositFlags=H_={}));function uD(t){if((0,So.validateBaseTransaction)(t),t.Asset==null)throw new kr.ValidationError("AMMDeposit: missing field Asset");if(!(0,So.isCurrency)(t.Asset))throw new kr.ValidationError("AMMDeposit: Asset must be a Currency");if(t.Asset2==null)throw new kr.ValidationError("AMMDeposit: missing field Asset2");if(!(0,So.isCurrency)(t.Asset2))throw new kr.ValidationError("AMMDeposit: Asset2 must be a Currency");if(t.Amount2!=null&&t.Amount==null)throw new kr.ValidationError("AMMDeposit: must set Amount with Amount2");if(t.EPrice!=null&&t.Amount==null)throw new kr.ValidationError("AMMDeposit: must set Amount with EPrice");if(t.LPTokenOut==null&&t.Amount==null)throw new kr.ValidationError("AMMDeposit: must set at least LPTokenOut or Amount");if(t.LPTokenOut!=null&&!(0,So.isIssuedCurrency)(t.LPTokenOut))throw new kr.ValidationError("AMMDeposit: LPTokenOut must be an IssuedCurrencyAmount");if(t.Amount!=null&&!(0,So.isAmount)(t.Amount))throw new kr.ValidationError("AMMDeposit: Amount must be an Amount");if(t.Amount2!=null&&!(0,So.isAmount)(t.Amount2))throw new kr.ValidationError("AMMDeposit: Amount2 must be an Amount");if(t.EPrice!=null&&!(0,So.isAmount)(t.EPrice))throw new kr.ValidationError("AMMDeposit: EPrice must be an Amount")}Yi.validateAMMDeposit=uD;var Ji={};Object.defineProperty(Ji,"__esModule",{value:!0});Ji.validateAMMWithdraw=Ji.AMMWithdrawFlags=void 0;const ss=je,No=Ce;var W_;(function(t){t[t.tfLPToken=65536]="tfLPToken",t[t.tfWithdrawAll=131072]="tfWithdrawAll",t[t.tfOneAssetWithdrawAll=262144]="tfOneAssetWithdrawAll",t[t.tfSingleAsset=524288]="tfSingleAsset",t[t.tfTwoAsset=1048576]="tfTwoAsset",t[t.tfOneAssetLPToken=2097152]="tfOneAssetLPToken",t[t.tfLimitLPToken=4194304]="tfLimitLPToken"})(W_||(Ji.AMMWithdrawFlags=W_={}));function dD(t){if((0,No.validateBaseTransaction)(t),t.Asset==null)throw new ss.ValidationError("AMMWithdraw: missing field Asset");if(!(0,No.isCurrency)(t.Asset))throw new ss.ValidationError("AMMWithdraw: Asset must be a Currency");if(t.Asset2==null)throw new ss.ValidationError("AMMWithdraw: missing field Asset2");if(!(0,No.isCurrency)(t.Asset2))throw new ss.ValidationError("AMMWithdraw: Asset2 must be a Currency");if(t.Amount2!=null&&t.Amount==null)throw new ss.ValidationError("AMMWithdraw: must set Amount with Amount2");if(t.EPrice!=null&&t.Amount==null)throw new ss.ValidationError("AMMWithdraw: must set Amount with EPrice");if(t.LPTokenIn!=null&&!(0,No.isIssuedCurrency)(t.LPTokenIn))throw new ss.ValidationError("AMMWithdraw: LPTokenIn must be an IssuedCurrencyAmount");if(t.Amount!=null&&!(0,No.isAmount)(t.Amount))throw new ss.ValidationError("AMMWithdraw: Amount must be an Amount");if(t.Amount2!=null&&!(0,No.isAmount)(t.Amount2))throw new ss.ValidationError("AMMWithdraw: Amount2 must be an Amount");if(t.EPrice!=null&&!(0,No.isAmount)(t.EPrice))throw new ss.ValidationError("AMMWithdraw: EPrice must be an Amount")}Ji.validateAMMWithdraw=dD;var Qi={};Object.defineProperty(Qi,"__esModule",{value:!0});Qi.validateMPTokenAuthorize=Qi.MPTokenAuthorizeFlags=void 0;const bc=Ce;var X_;(function(t){t[t.tfMPTUnauthorize=1]="tfMPTUnauthorize"})(X_||(Qi.MPTokenAuthorizeFlags=X_={}));function hD(t){(0,bc.validateBaseTransaction)(t),(0,bc.validateRequiredField)(t,"MPTokenIssuanceID",bc.isString),(0,bc.validateOptionalField)(t,"Holder",bc.isAccount)}Qi.validateMPTokenAuthorize=hD;var Zi={};Object.defineProperty(Zi,"__esModule",{value:!0});Zi.validateMPTokenIssuanceCreate=Zi.MPTokenIssuanceCreateFlags=void 0;const Fa=je,I0=Xt,Ts=Ce,fD="9223372036854775807",K_=5e4;var Zy;(function(t){t[t.tfMPTCanLock=2]="tfMPTCanLock",t[t.tfMPTRequireAuth=4]="tfMPTRequireAuth",t[t.tfMPTCanEscrow=8]="tfMPTCanEscrow",t[t.tfMPTCanTrade=16]="tfMPTCanTrade",t[t.tfMPTCanTransfer=32]="tfMPTCanTransfer",t[t.tfMPTCanClawback=64]="tfMPTCanClawback"})(Zy||(Zi.MPTokenIssuanceCreateFlags=Zy={}));function pD(t){var e;if((0,Ts.validateBaseTransaction)(t),(0,Ts.validateOptionalField)(t,"MaximumAmount",Ts.isString),(0,Ts.validateOptionalField)(t,"MPTokenMetadata",Ts.isString),(0,Ts.validateOptionalField)(t,"TransferFee",Ts.isNumber),(0,Ts.validateOptionalField)(t,"AssetScale",Ts.isNumber),typeof t.MPTokenMetadata=="string"&&t.MPTokenMetadata==="")throw new Fa.ValidationError("MPTokenIssuanceCreate: MPTokenMetadata must not be empty string");if(typeof t.MPTokenMetadata=="string"&&!(0,I0.isHex)(t.MPTokenMetadata))throw new Fa.ValidationError("MPTokenIssuanceCreate: MPTokenMetadata must be in hex format");if(typeof t.MaximumAmount=="string")if(I0.INTEGER_SANITY_CHECK.exec(t.MaximumAmount)){if(BigInt(t.MaximumAmount)>BigInt(fD)||BigInt(t.MaximumAmount)<BigInt("0"))throw new Fa.ValidationError("MPTokenIssuanceCreate: MaximumAmount out of range")}else throw new Fa.ValidationError("MPTokenIssuanceCreate: Invalid MaximumAmount");if(typeof t.TransferFee=="number"){const n=t.Flags,r=typeof n=="number"?(0,I0.isFlagEnabled)(n,Zy.tfMPTCanTransfer):(e=n.tfMPTCanTransfer)!==null&&e!==void 0?e:!1;if(t.TransferFee<0||t.TransferFee>K_)throw new Fa.ValidationError(`MPTokenIssuanceCreate: TransferFee must be between 0 and ${K_}`);if(t.TransferFee&&!r)throw new Fa.ValidationError("MPTokenIssuanceCreate: TransferFee cannot be provided without enabling tfMPTCanTransfer flag")}}Zi.validateMPTokenIssuanceCreate=pD;var eo={};Object.defineProperty(eo,"__esModule",{value:!0});eo.validateMPTokenIssuanceSet=eo.MPTokenIssuanceSetFlags=void 0;const mD=je,q_=Xt,_c=Ce;var Nf;(function(t){t[t.tfMPTLock=1]="tfMPTLock",t[t.tfMPTUnlock=2]="tfMPTUnlock"})(Nf||(eo.MPTokenIssuanceSetFlags=Nf={}));function gD(t){var e,n;(0,_c.validateBaseTransaction)(t),(0,_c.validateRequiredField)(t,"MPTokenIssuanceID",_c.isString),(0,_c.validateOptionalField)(t,"Holder",_c.isAccount);const r=t.Flags,s=typeof r=="number"?(0,q_.isFlagEnabled)(r,Nf.tfMPTLock):(e=r.tfMPTLock)!==null&&e!==void 0?e:!1,i=typeof r=="number"?(0,q_.isFlagEnabled)(r,Nf.tfMPTUnlock):(n=r.tfMPTUnlock)!==null&&n!==void 0?n:!1;if(s&&i)throw new mD.ValidationError("MPTokenIssuanceSet: flag conflict")}eo.validateMPTokenIssuanceSet=gD;var to={};Object.defineProperty(to,"__esModule",{value:!0});to.validateNFTokenCreateOffer=to.NFTokenCreateOfferFlags=void 0;const Jo=je,yD=Xt,zo=Ce;var ev;(function(t){t[t.tfSellNFToken=1]="tfSellNFToken"})(ev||(to.NFTokenCreateOfferFlags=ev={}));function vD(t){if(t.Owner!=null)throw new Jo.ValidationError("NFTokenCreateOffer: Owner must not be present for sell offers")}function xD(t){if(t.Owner==null)throw new Jo.ValidationError("NFTokenCreateOffer: Owner must be present for buy offers");if((0,zo.parseAmountValue)(t.Amount)<=0)throw new Jo.ValidationError("NFTokenCreateOffer: Amount must be greater than 0 for buy offers")}function wD(t){if((0,zo.validateBaseTransaction)(t),t.Account===t.Owner)throw new Jo.ValidationError("NFTokenCreateOffer: Owner and Account must not be equal");if(t.Account===t.Destination)throw new Jo.ValidationError("NFTokenCreateOffer: Destination and Account must not be equal");if((0,zo.validateOptionalField)(t,"Destination",zo.isAccount),(0,zo.validateOptionalField)(t,"Owner",zo.isAccount),t.NFTokenID==null)throw new Jo.ValidationError("NFTokenCreateOffer: missing field NFTokenID");if(!(0,zo.isAmount)(t.Amount))throw new Jo.ValidationError("NFTokenCreateOffer: invalid Amount");typeof t.Flags=="number"&&(0,yD.isFlagEnabled)(t.Flags,ev.tfSellNFToken)?vD(t):xD(t)}to.validateNFTokenCreateOffer=wD;var no={};Object.defineProperty(no,"__esModule",{value:!0});no.validateNFTokenMint=no.NFTokenMintFlags=void 0;const Hd=je,bD=Xt,P0=Ce;var G_;(function(t){t[t.tfBurnable=1]="tfBurnable",t[t.tfOnlyXRP=2]="tfOnlyXRP",t[t.tfTrustLine=4]="tfTrustLine",t[t.tfTransferable=8]="tfTransferable"})(G_||(no.NFTokenMintFlags=G_={}));function _D(t){if((0,P0.validateBaseTransaction)(t),t.Account===t.Issuer)throw new Hd.ValidationError("NFTokenMint: Issuer must not be equal to Account");if((0,P0.validateOptionalField)(t,"Issuer",P0.isAccount),typeof t.URI=="string"&&t.URI==="")throw new Hd.ValidationError("NFTokenMint: URI must not be empty string");if(typeof t.URI=="string"&&!(0,bD.isHex)(t.URI))throw new Hd.ValidationError("NFTokenMint: URI must be in hex format");if(t.NFTokenTaxon==null)throw new Hd.ValidationError("NFTokenMint: missing field NFTokenTaxon")}no.validateNFTokenMint=_D;var ro={};Object.defineProperty(ro,"__esModule",{value:!0});ro.validateOfferCreate=ro.OfferCreateFlags=void 0;const Ua=je,R0=Ce;var Y_;(function(t){t[t.tfPassive=65536]="tfPassive",t[t.tfImmediateOrCancel=131072]="tfImmediateOrCancel",t[t.tfFillOrKill=262144]="tfFillOrKill",t[t.tfSell=524288]="tfSell"})(Y_||(ro.OfferCreateFlags=Y_={}));function ED(t){if((0,R0.validateBaseTransaction)(t),t.TakerGets===void 0)throw new Ua.ValidationError("OfferCreate: missing field TakerGets");if(t.TakerPays===void 0)throw new Ua.ValidationError("OfferCreate: missing field TakerPays");if(typeof t.TakerGets!="string"&&!(0,R0.isAmount)(t.TakerGets))throw new Ua.ValidationError("OfferCreate: invalid TakerGets");if(typeof t.TakerPays!="string"&&!(0,R0.isAmount)(t.TakerPays))throw new Ua.ValidationError("OfferCreate: invalid TakerPays");if(t.Expiration!==void 0&&typeof t.Expiration!="number")throw new Ua.ValidationError("OfferCreate: invalid Expiration");if(t.OfferSequence!==void 0&&typeof t.OfferSequence!="number")throw new Ua.ValidationError("OfferCreate: invalid OfferSequence")}ro.validateOfferCreate=ED;var so={};Object.defineProperty(so,"__esModule",{value:!0});so.validatePayment=so.PaymentFlags=void 0;const ji=je,SD=Xt,Os=Ce;var tv;(function(t){t[t.tfNoRippleDirect=65536]="tfNoRippleDirect",t[t.tfPartialPayment=131072]="tfPartialPayment",t[t.tfLimitQuality=262144]="tfLimitQuality"})(tv||(so.PaymentFlags=tv={}));function ND(t){if((0,Os.validateBaseTransaction)(t),t.Amount===void 0)throw new ji.ValidationError("PaymentTransaction: missing field Amount");if(!(0,Os.isAmount)(t.Amount))throw new ji.ValidationError("PaymentTransaction: invalid Amount");if((0,Os.validateRequiredField)(t,"Destination",Os.isAccount),(0,Os.validateOptionalField)(t,"DestinationTag",Os.isNumber),(0,Os.validateCredentialsList)(t.CredentialIDs,t.TransactionType,!0),t.InvoiceID!==void 0&&typeof t.InvoiceID!="string")throw new ji.ValidationError("PaymentTransaction: InvoiceID must be a string");if(t.Paths!==void 0&&!jD(t.Paths))throw new ji.ValidationError("PaymentTransaction: invalid Paths");if(t.SendMax!==void 0&&!(0,Os.isAmount)(t.SendMax))throw new ji.ValidationError("PaymentTransaction: invalid SendMax");TD(t)}so.validatePayment=ND;function TD(t){var e;if(t.DeliverMin!=null){if(t.Flags==null)throw new ji.ValidationError("PaymentTransaction: tfPartialPayment flag required with DeliverMin");const n=t.Flags;if(!(typeof n=="number"?(0,SD.isFlagEnabled)(n,tv.tfPartialPayment):(e=n.tfPartialPayment)!==null&&e!==void 0?e:!1))throw new ji.ValidationError("PaymentTransaction: tfPartialPayment flag required with DeliverMin");if(!(0,Os.isAmount)(t.DeliverMin))throw new ji.ValidationError("PaymentTransaction: invalid DeliverMin")}}function AD(t){return t.account!==void 0&&typeof t.account!="string"||t.currency!==void 0&&typeof t.currency!="string"||t.issuer!==void 0&&typeof t.issuer!="string"?!1:t.account!==void 0&&t.currency===void 0&&t.issuer===void 0||t.currency!==void 0||t.issuer!==void 0}function CD(t){for(const e of t)if(!AD(e))return!1;return!0}function jD(t){if(!Array.isArray(t)||t.length===0)return!1;for(const e of t)if(!Array.isArray(e)||e.length===0||!CD(e))return!1;return!0}var io={};Object.defineProperty(io,"__esModule",{value:!0});io.validatePaymentChannelClaim=io.PaymentChannelClaimFlags=void 0;const $a=je,J_=Ce;var Q_;(function(t){t[t.tfRenew=65536]="tfRenew",t[t.tfClose=131072]="tfClose"})(Q_||(io.PaymentChannelClaimFlags=Q_={}));function kD(t){if((0,J_.validateBaseTransaction)(t),(0,J_.validateCredentialsList)(t.CredentialIDs,t.TransactionType,!0),t.Channel===void 0)throw new $a.ValidationError("PaymentChannelClaim: missing Channel");if(typeof t.Channel!="string")throw new $a.ValidationError("PaymentChannelClaim: Channel must be a string");if(t.Balance!==void 0&&typeof t.Balance!="string")throw new $a.ValidationError("PaymentChannelClaim: Balance must be a string");if(t.Amount!==void 0&&typeof t.Amount!="string")throw new $a.ValidationError("PaymentChannelClaim: Amount must be a string");if(t.Signature!==void 0&&typeof t.Signature!="string")throw new $a.ValidationError("PaymentChannelClaim: Signature must be a string");if(t.PublicKey!==void 0&&typeof t.PublicKey!="string")throw new $a.ValidationError("PaymentChannelClaim: PublicKey must be a string")}io.validatePaymentChannelClaim=kD;var oo={};Object.defineProperty(oo,"__esModule",{value:!0});oo.validateTrustSet=oo.TrustSetFlags=void 0;const Wd=je,Z_=Ce;var e1;(function(t){t[t.tfSetfAuth=65536]="tfSetfAuth",t[t.tfSetNoRipple=131072]="tfSetNoRipple",t[t.tfClearNoRipple=262144]="tfClearNoRipple",t[t.tfSetFreeze=1048576]="tfSetFreeze",t[t.tfClearFreeze=2097152]="tfClearFreeze"})(e1||(oo.TrustSetFlags=e1={}));function OD(t){(0,Z_.validateBaseTransaction)(t);const{LimitAmount:e,QualityIn:n,QualityOut:r}=t;if(e===void 0)throw new Wd.ValidationError("TrustSet: missing field LimitAmount");if(!(0,Z_.isAmount)(e))throw new Wd.ValidationError("TrustSet: invalid LimitAmount");if(n!==void 0&&typeof n!="number")throw new Wd.ValidationError("TrustSet: QualityIn must be a number");if(r!==void 0&&typeof r!="number")throw new Wd.ValidationError("TrustSet: QualityOut must be a number")}oo.validateTrustSet=OD;var ao={};Object.defineProperty(ao,"__esModule",{value:!0});ao.validateXChainModifyBridge=ao.XChainModifyBridgeFlags=void 0;const To=Ce;var t1;(function(t){t[t.tfClearAccountCreateAmount=65536]="tfClearAccountCreateAmount"})(t1||(ao.XChainModifyBridgeFlags=t1={}));function ID(t){(0,To.validateBaseTransaction)(t),(0,To.validateRequiredField)(t,"XChainBridge",To.isXChainBridge),(0,To.validateOptionalField)(t,"SignatureReward",To.isAmount),(0,To.validateOptionalField)(t,"MinAccountCreateAmount",To.isAmount)}ao.validateXChainModifyBridge=ID;Object.defineProperty(xs,"__esModule",{value:!0});xs.parseTransactionFlags=xs.setTransactionFlagsToNumber=xs.parseAccountRootFlags=void 0;const PD=je,n1=Yu,RD=ws,LD=Yi,MD=Ji,DD=Qi,BD=Zi,FD=eo,UD=to,$D=no,VD=ro,zD=so,HD=io,WD=oo,XD=ao,a2=Xt;function KD(t){const e={};return Object.values(n1.AccountRootFlags).forEach(n=>{typeof n=="string"&&(0,a2.isFlagEnabled)(t,n1.AccountRootFlags[n])&&(e[n]=!0)}),e}xs.parseAccountRootFlags=KD;const nv={AccountSet:RD.AccountSetTfFlags,AMMDeposit:LD.AMMDepositFlags,AMMWithdraw:MD.AMMWithdrawFlags,MPTokenAuthorize:DD.MPTokenAuthorizeFlags,MPTokenIssuanceCreate:BD.MPTokenIssuanceCreateFlags,MPTokenIssuanceSet:FD.MPTokenIssuanceSetFlags,NFTokenCreateOffer:UD.NFTokenCreateOfferFlags,NFTokenMint:$D.NFTokenMintFlags,OfferCreate:VD.OfferCreateFlags,PaymentChannelClaim:HD.PaymentChannelClaimFlags,Payment:zD.PaymentFlags,TrustSet:WD.TrustSetFlags,XChainModifyBridge:XD.XChainModifyBridgeFlags};function l2(t){if(t.Flags==null){t.Flags=0;return}typeof t.Flags!="number"&&(t.Flags=nv[t.TransactionType]?qD(t.Flags,nv[t.TransactionType]):0)}xs.setTransactionFlagsToNumber=l2;function qD(t,e){return Object.keys(t).reduce((n,r)=>{if(e[r]==null)throw new PD.ValidationError(`flag ${r} doesn't exist in flagEnum: ${JSON.stringify(e)}`);return t[r]?n|e[r]:n},0)}function GD(t){if(l2(t),typeof t.Flags!="number"||!t.Flags||t.Flags===0)return{};const e=t.Flags,n={},r=nv[t.TransactionType];return Object.values(r).forEach(s=>{typeof s=="string"&&(0,a2.isFlagEnabled)(e,r[s])&&(n[s]=!0)}),n}xs.parseTransactionFlags=GD;var c2={},ps={},Ou=ge&&ge.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(ps,"__esModule",{value:!0});ps.getLastLedgerSequence=ps.getSignedTx=ps.waitForFinalTransactionOutcome=ps.submitRequest=void 0;const sd=Nr,qx=je,YD=1e3;function JD(t){return Ou(this,void 0,void 0,function*(){return new Promise(e=>{setTimeout(e,t)})})}function QD(t,e,n=!1){return Ou(this,void 0,void 0,function*(){if(!u2(e))throw new qx.ValidationError("Transaction must be signed");const s={command:"submit",tx_blob:typeof e=="string"?e:(0,sd.encode)(e),fail_hard:t4(e)||n};return t.request(s)})}ps.submitRequest=QD;function rv(t,e,n,r){return Ou(this,void 0,void 0,function*(){yield JD(YD);const s=yield t.getLedgerIndex();if(n<s)throw new qx.XrplError(`The latest ledger sequence ${s} is greater than the transaction's LastLedgerSequence (${n}).
Preliminary result: ${r}`);const i=yield t.request({command:"tx",transaction:e}).catch(a=>Ou(this,void 0,void 0,function*(){var l;const c=(l=a==null?void 0:a.data)===null||l===void 0?void 0:l.error;if(c==="txnNotFound")return rv(t,e,n,r);throw new Error(`${c} 
 Preliminary result: ${r}.
Full error details: ${String(a)}`)}));return i.result.validated?i:rv(t,e,n,r)})}ps.waitForFinalTransactionOutcome=rv;function u2(t){const e=typeof t=="string"?(0,sd.decode)(t):t;if(typeof e=="string")return!1;if(e.Signers!=null){const n=e.Signers;for(const r of n)if(r.Signer.SigningPubKey==null||r.Signer.TxnSignature==null)return!1;return!0}return e.SigningPubKey!=null&&e.TxnSignature!=null}function ZD(t,e,{autofill:n=!0,wallet:r}={}){return Ou(this,void 0,void 0,function*(){if(u2(e))return e;if(!r)throw new qx.ValidationError("Wallet must be provided when submitting an unsigned transaction");let s=typeof e=="string"?(0,sd.decode)(e):e;return n&&(s=yield t.autofill(s)),r.sign(s).tx_blob})}ps.getSignedTx=ZD;function e4(t){return(typeof t=="string"?(0,sd.decode)(t):t).LastLedgerSequence}ps.getLastLedgerSequence=e4;function t4(t){return(typeof t=="string"?(0,sd.decode)(t):t).TransactionType==="AccountDelete"}var id={};Object.defineProperty(id,"__esModule",{value:!0});id.ensureClassicAddress=void 0;const r1=Un;function n4(t){if((0,r1.isValidXAddress)(t)){const{classicAddress:e,tag:n}=(0,r1.xAddressToClassicAddress)(t);if(n!==!1)throw new Error("This command does not support the use of a tag. Use an address without a tag.");return e}return t}id.ensureClassicAddress=n4;(function(t){var e=ge&&ge.__createBinding||(Object.create?function(r,s,i,a){a===void 0&&(a=i);var l=Object.getOwnPropertyDescriptor(s,i);(!l||("get"in l?!s.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,a,l)}:function(r,s,i,a){a===void 0&&(a=i),r[a]=s[i]}),n=ge&&ge.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&e(s,r,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(ps,t),n(id,t)})(c2);var On={},Tp={},vo={},Ap={},ma={};Object.defineProperty(ma,"__esModule",{value:!0});ma.ripemd160=ma.RIPEMD160=void 0;const r4=ei,Bc=Fn,s4=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),d2=new Uint8Array(new Array(16).fill(0).map((t,e)=>e)),i4=d2.map(t=>(9*t+5)%16);let Gx=[d2],Yx=[i4];for(let t=0;t<4;t++)for(let e of[Gx,Yx])e.push(e[t].map(n=>s4[n]));const h2=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),o4=Gx.map((t,e)=>t.map(n=>h2[e][n])),a4=Yx.map((t,e)=>t.map(n=>h2[e][n])),l4=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),c4=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);function s1(t,e,n,r){return t===0?e^n^r:t===1?e&n|~e&r:t===2?(e|~n)^r:t===3?e&r|n&~r:e^(n|~r)}const Xd=new Uint32Array(16);class f2 extends r4.HashMD{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:n,h2:r,h3:s,h4:i}=this;return[e,n,r,s,i]}set(e,n,r,s,i){this.h0=e|0,this.h1=n|0,this.h2=r|0,this.h3=s|0,this.h4=i|0}process(e,n){for(let m=0;m<16;m++,n+=4)Xd[m]=e.getUint32(n,!0);let r=this.h0|0,s=r,i=this.h1|0,a=i,l=this.h2|0,c=l,u=this.h3|0,d=u,h=this.h4|0,f=h;for(let m=0;m<5;m++){const _=4-m,S=l4[m],j=c4[m],y=Gx[m],x=Yx[m],b=o4[m],v=a4[m];for(let A=0;A<16;A++){const E=(0,Bc.rotl)(r+s1(m,i,l,u)+Xd[y[A]]+S,b[A])+h|0;r=h,h=u,u=(0,Bc.rotl)(l,10)|0,l=i,i=E}for(let A=0;A<16;A++){const E=(0,Bc.rotl)(s+s1(_,a,c,d)+Xd[x[A]]+j,v[A])+f|0;s=f,f=d,d=(0,Bc.rotl)(c,10)|0,c=a,a=E}}this.set(this.h1+l+d|0,this.h2+u+f|0,this.h3+h+s|0,this.h4+r+a|0,this.h0+i+c|0)}roundClean(){Xd.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}ma.RIPEMD160=f2;ma.ripemd160=(0,Bc.wrapConstructor)(()=>new f2);var u4=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ap,"__esModule",{value:!0});Ap.ripemd160=void 0;const d4=ma,h4=u4(Qu);Ap.ripemd160=(0,h4.default)(d4.ripemd160);var ga={},Cp={},jp={},kp={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;const e=Sr,n=Fn;class r extends n.Hash{constructor(a,l){super(),this.finished=!1,this.destroyed=!1,(0,e.ahash)(a);const c=(0,n.toBytes)(l);if(this.iHash=a.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const u=this.blockLen,d=new Uint8Array(u);d.set(c.length>u?a.create().update(c).digest():c);for(let h=0;h<d.length;h++)d[h]^=54;this.iHash.update(d),this.oHash=a.create();for(let h=0;h<d.length;h++)d[h]^=106;this.oHash.update(d),d.fill(0)}update(a){return(0,e.aexists)(this),this.iHash.update(a),this}digestInto(a){(0,e.aexists)(this),(0,e.abytes)(a,this.outputLen),this.finished=!0,this.iHash.digestInto(a),this.oHash.update(a),this.oHash.digestInto(a),this.destroy()}digest(){const a=new Uint8Array(this.oHash.outputLen);return this.digestInto(a),a}_cloneInto(a){a||(a=Object.create(Object.getPrototypeOf(this),{}));const{oHash:l,iHash:c,finished:u,destroyed:d,blockLen:h,outputLen:f}=this;return a=a,a.finished=u,a.destroyed=d,a.blockLen=h,a.outputLen=f,a.oHash=l._cloneInto(a.oHash),a.iHash=c._cloneInto(a.iHash),a}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=r;const s=(i,a,l)=>new r(i,a).update(l).digest();t.hmac=s,t.hmac.create=(i,a)=>new r(i,a)})(kp);var Jx={},xo={},dt={},Ze={};/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(Ze,"__esModule",{value:!0});Ze.notImplemented=Ze.bitMask=void 0;Ze.isBytes=Pp;Ze.abytes=Rp;Ze.abool=p4;Ze.bytesToHex=Qx;Ze.numberToHexUnpadded=p2;Ze.hexToNumber=Zx;Ze.hexToBytes=Lp;Ze.bytesToNumberBE=g4;Ze.bytesToNumberLE=y4;Ze.numberToBytesBE=m2;Ze.numberToBytesLE=v4;Ze.numberToVarBytesBE=x4;Ze.ensureBytes=w4;Ze.concatBytes=g2;Ze.equalBytes=b4;Ze.utf8ToBytes=_4;Ze.inRange=y2;Ze.aInRange=E4;Ze.bitLen=S4;Ze.bitGet=N4;Ze.bitSet=T4;Ze.createHmacDrbg=C4;Ze.validateObject=k4;Ze.memoized=I4;const Op=BigInt(0),Ip=BigInt(1),f4=BigInt(2);function Pp(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Rp(t){if(!Pp(t))throw new Error("Uint8Array expected")}function p4(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const m4=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Qx(t){Rp(t);let e="";for(let n=0;n<t.length;n++)e+=m4[t[n]];return e}function p2(t){const e=t.toString(16);return e.length&1?"0"+e:e}function Zx(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Op:BigInt("0x"+t)}const As={_0:48,_9:57,A:65,F:70,a:97,f:102};function i1(t){if(t>=As._0&&t<=As._9)return t-As._0;if(t>=As.A&&t<=As.F)return t-(As.A-10);if(t>=As.a&&t<=As.f)return t-(As.a-10)}function Lp(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const a=i1(t.charCodeAt(i)),l=i1(t.charCodeAt(i+1));if(a===void 0||l===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=a*16+l}return r}function g4(t){return Zx(Qx(t))}function y4(t){return Rp(t),Zx(Qx(Uint8Array.from(t).reverse()))}function m2(t,e){return Lp(t.toString(16).padStart(e*2,"0"))}function v4(t,e){return m2(t,e).reverse()}function x4(t){return Lp(p2(t))}function w4(t,e,n){let r;if(typeof e=="string")try{r=Lp(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Pp(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function g2(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Rp(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function b4(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function _4(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const L0=t=>typeof t=="bigint"&&Op<=t;function y2(t,e,n){return L0(t)&&L0(e)&&L0(n)&&e<=t&&t<n}function E4(t,e,n,r){if(!y2(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function S4(t){let e;for(e=0;t>Op;t>>=Ip,e+=1);return e}function N4(t,e){return t>>BigInt(e)&Ip}function T4(t,e,n){return t|(n?Ip:Op)<<BigInt(e)}const A4=t=>(f4<<BigInt(t-1))-Ip;Ze.bitMask=A4;const M0=t=>new Uint8Array(t),o1=t=>Uint8Array.from(t);function C4(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=M0(t),s=M0(t),i=0;const a=()=>{r.fill(1),s.fill(0),i=0},l=(...h)=>n(s,r,...h),c=(h=M0())=>{s=l(o1([0]),h),r=l(),h.length!==0&&(s=l(o1([1]),h),r=l())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const f=[];for(;h<e;){r=l();const m=r.slice();f.push(m),h+=r.length}return g2(...f)};return(h,f)=>{a(),c(h);let m;for(;!(m=f(u()));)c();return a(),m}}const j4={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Pp(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function k4(t,e,n={}){const r=(s,i,a)=>{const l=j4[i];if(typeof l!="function")throw new Error("invalid validator function");const c=t[s];if(!(a&&c===void 0)&&!l(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const O4=()=>{throw new Error("not implemented")};Ze.notImplemented=O4;function I4(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}Object.defineProperty(dt,"__esModule",{value:!0});dt.isNegativeLE=void 0;dt.mod=qn;dt.pow=v2;dt.pow2=R4;dt.invert=Tf;dt.tonelliShanks=x2;dt.FpSqrt=w2;dt.validateField=D4;dt.FpPow=b2;dt.FpInvertBatch=_2;dt.FpDiv=B4;dt.FpLegendre=E2;dt.FpIsSquare=F4;dt.nLength=ew;dt.Field=U4;dt.FpSqrtOdd=$4;dt.FpSqrtEven=V4;dt.hashToPrivateScalar=z4;dt.getFieldBytesLength=tw;dt.getMinHashLength=S2;dt.mapHashToField=H4;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Gn=Ze,Kt=BigInt(0),gt=BigInt(1),ki=BigInt(2),P4=BigInt(3),sv=BigInt(4),a1=BigInt(5),l1=BigInt(8);function qn(t,e){const n=t%e;return n>=Kt?n:e+n}function v2(t,e,n){if(e<Kt)throw new Error("invalid exponent, negatives unsupported");if(n<=Kt)throw new Error("invalid modulus");if(n===gt)return Kt;let r=gt;for(;e>Kt;)e&gt&&(r=r*t%n),t=t*t%n,e>>=gt;return r}function R4(t,e,n){let r=t;for(;e-- >Kt;)r*=r,r%=n;return r}function Tf(t,e){if(t===Kt)throw new Error("invert: expected non-zero number");if(e<=Kt)throw new Error("invert: expected positive modulus, got "+e);let n=qn(t,e),r=e,s=Kt,i=gt;for(;n!==Kt;){const l=r/n,c=r%n,u=s-i*l;r=n,n=c,s=i,i=u}if(r!==gt)throw new Error("invert: does not exist");return qn(s,e)}function x2(t){const e=(t-gt)/ki;let n,r,s;for(n=t-gt,r=0;n%ki===Kt;n/=ki,r++);for(s=ki;s<t&&v2(s,e,t)!==t-gt;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const a=(t+gt)/sv;return function(c,u){const d=c.pow(u,a);if(!c.eql(c.sqr(d),u))throw new Error("Cannot find square root");return d}}const i=(n+gt)/ki;return function(l,c){if(l.pow(c,e)===l.neg(l.ONE))throw new Error("Cannot find square root");let u=r,d=l.pow(l.mul(l.ONE,s),n),h=l.pow(c,i),f=l.pow(c,n);for(;!l.eql(f,l.ONE);){if(l.eql(f,l.ZERO))return l.ZERO;let m=1;for(let S=l.sqr(f);m<u&&!l.eql(S,l.ONE);m++)S=l.sqr(S);const _=l.pow(d,gt<<BigInt(u-m-1));d=l.sqr(_),h=l.mul(h,_),f=l.mul(f,d),u=m}return h}}function w2(t){if(t%sv===P4){const e=(t+gt)/sv;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%l1===a1){const e=(t-a1)/l1;return function(r,s){const i=r.mul(s,ki),a=r.pow(i,e),l=r.mul(s,a),c=r.mul(r.mul(l,ki),a),u=r.mul(l,r.sub(c,r.ONE));if(!r.eql(r.sqr(u),s))throw new Error("Cannot find square root");return u}}return x2(t)}const L4=(t,e)=>(qn(t,e)&gt)===gt;dt.isNegativeLE=L4;const M4=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function D4(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=M4.reduce((r,s)=>(r[s]="function",r),e);return(0,Gn.validateObject)(t,n)}function b2(t,e,n){if(n<Kt)throw new Error("invalid exponent, negatives unsupported");if(n===Kt)return t.ONE;if(n===gt)return e;let r=t.ONE,s=e;for(;n>Kt;)n&gt&&(r=t.mul(r,s)),s=t.sqr(s),n>>=gt;return r}function _2(t,e){const n=new Array(e.length),r=e.reduce((i,a,l)=>t.is0(a)?i:(n[l]=i,t.mul(i,a)),t.ONE),s=t.inv(r);return e.reduceRight((i,a,l)=>t.is0(a)?i:(n[l]=t.mul(i,n[l]),t.mul(i,a)),s),n}function B4(t,e,n){return t.mul(e,typeof n=="bigint"?Tf(n,t.ORDER):t.inv(n))}function E2(t){const e=(t-gt)/ki;return(n,r)=>n.pow(r,e)}function F4(t){const e=E2(t.ORDER);return n=>{const r=e(t,n);return t.eql(r,t.ZERO)||t.eql(r,t.ONE)}}function ew(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function U4(t,e,n=!1,r={}){if(t<=Kt)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=ew(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let a;const l=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:(0,Gn.bitMask)(s),ZERO:Kt,ONE:gt,create:c=>qn(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Kt<=c&&c<t},is0:c=>c===Kt,isOdd:c=>(c&gt)===gt,neg:c=>qn(-c,t),eql:(c,u)=>c===u,sqr:c=>qn(c*c,t),add:(c,u)=>qn(c+u,t),sub:(c,u)=>qn(c-u,t),mul:(c,u)=>qn(c*u,t),pow:(c,u)=>b2(l,c,u),div:(c,u)=>qn(c*Tf(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>Tf(c,t),sqrt:r.sqrt||(c=>(a||(a=w2(t)),a(l,c))),invertBatch:c=>_2(l,c),cmov:(c,u,d)=>d?u:c,toBytes:c=>n?(0,Gn.numberToBytesLE)(c,i):(0,Gn.numberToBytesBE)(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?(0,Gn.bytesToNumberLE)(c):(0,Gn.bytesToNumberBE)(c)}});return Object.freeze(l)}function $4(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const n=t.sqrt(e);return t.isOdd(n)?n:t.neg(n)}function V4(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const n=t.sqrt(e);return t.isOdd(n)?t.neg(n):n}function z4(t,e,n=!1){t=(0,Gn.ensureBytes)("privateHash",t);const r=t.length,s=ew(e).nByteLength+8;if(s<24||r<s||r>1024)throw new Error("hashToPrivateScalar: expected "+s+"-1024 bytes of input, got "+r);const i=n?(0,Gn.bytesToNumberLE)(t):(0,Gn.bytesToNumberBE)(t);return qn(i,e-gt)+gt}function tw(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function S2(t){const e=tw(t);return e+Math.ceil(e/2)}function H4(t,e,n=!1){const r=t.length,s=tw(e),i=S2(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const a=n?(0,Gn.bytesToNumberLE)(t):(0,Gn.bytesToNumberBE)(t),l=qn(a,e-gt)+gt;return n?(0,Gn.numberToBytesLE)(l,s):(0,Gn.numberToBytesBE)(l,s)}Object.defineProperty(xo,"__esModule",{value:!0});xo.wNAF=W4;xo.pippenger=X4;xo.precomputeMSMUnsafe=K4;xo.validateBasic=q4;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const c1=dt,N2=Ze,u1=BigInt(0),Kd=BigInt(1);function D0(t,e){const n=e.negate();return t?n:e}function nw(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function B0(t,e){nw(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function T2(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function A2(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const F0=new WeakMap,C2=new WeakMap;function U0(t){return C2.get(t)||1}function W4(t,e){return{constTimeNegate:D0,hasPrecomputes(n){return U0(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>u1;)r&Kd&&(s=s.add(i)),i=i.double(),r>>=Kd;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=B0(r,e),a=[];let l=n,c=l;for(let u=0;u<s;u++){c=l,a.push(c);for(let d=1;d<i;d++)c=c.add(l),a.push(c);l=c.double()}return a},wNAF(n,r,s){const{windows:i,windowSize:a}=B0(n,e);let l=t.ZERO,c=t.BASE;const u=BigInt(2**n-1),d=2**n,h=BigInt(n);for(let f=0;f<i;f++){const m=f*a;let _=Number(s&u);s>>=h,_>a&&(_-=d,s+=Kd);const S=m,j=m+Math.abs(_)-1,y=f%2!==0,x=_<0;_===0?c=c.add(D0(y,r[S])):l=l.add(D0(x,r[j]))}return{p:l,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:a,windowSize:l}=B0(n,e),c=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<a;h++){const f=h*l;if(s===u1)break;let m=Number(s&c);if(s>>=d,m>l&&(m-=u,s+=Kd),m===0)continue;let _=r[f+Math.abs(m)-1];m<0&&(_=_.negate()),i=i.add(_)}return i},getPrecomputes(n,r,s){let i=F0.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&F0.set(r,s(i))),i},wNAFCached(n,r,s){const i=U0(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const a=U0(n);return a===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(a,this.getPrecomputes(a,n,s),r,i)},setWindowSize(n,r){nw(r,e),C2.set(n,r),F0.delete(n)}}}function X4(t,e,n,r){if(T2(n,t),A2(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=(0,N2.bitLen)(BigInt(n.length)),a=i>12?i-3:i>4?i-2:i?2:1,l=(1<<a)-1,c=new Array(l+1).fill(s),u=Math.floor((e.BITS-1)/a)*a;let d=s;for(let h=u;h>=0;h-=a){c.fill(s);for(let m=0;m<r.length;m++){const _=r[m],S=Number(_>>BigInt(h)&BigInt(l));c[S]=c[S].add(n[m])}let f=s;for(let m=c.length-1,_=s;m>0;m--)_=_.add(c[m]),f=f.add(_);if(d=d.add(f),h!==0)for(let m=0;m<a;m++)d=d.double()}return d}function K4(t,e,n,r){nw(r,e.BITS),T2(n,t);const s=t.ZERO,i=2**r-1,a=Math.ceil(e.BITS/r),l=BigInt((1<<r)-1),c=n.map(u=>{const d=[];for(let h=0,f=u;h<i;h++)d.push(f),f=f.add(u);return d});return u=>{if(A2(u,e),u.length>n.length)throw new Error("array of scalars must be smaller than array of points");let d=s;for(let h=0;h<a;h++){if(d!==s)for(let m=0;m<r;m++)d=d.double();const f=BigInt(a*r-(h+1)*r);for(let m=0;m<u.length;m++){const _=u[m],S=Number(_>>f&l);S&&(d=d.add(c[m][S-1]))}}return d}}function q4(t){return(0,c1.validateField)(t.Fp),(0,N2.validateObject)(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,c1.nLength)(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DER=t.DERErr=void 0,t.weierstrassPoints=S,t.weierstrass=y,t.SWUFpSqrtRatio=x,t.mapToCurveSimpleSWU=b;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const e=xo,n=dt,r=Ze,s=Ze;function i(v){v.lowS!==void 0&&(0,s.abool)("lowS",v.lowS),v.prehash!==void 0&&(0,s.abool)("prehash",v.prehash)}function a(v){const A=(0,e.validateBasic)(v);r.validateObject(A,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:E,Fp:L,a:Y}=A;if(E){if(!L.eql(Y,L.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof E!="object"||typeof E.beta!="bigint"||typeof E.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...A})}const{bytesToNumberBE:l,hexToBytes:c}=r;class u extends Error{constructor(A=""){super(A)}}t.DERErr=u,t.DER={Err:u,_tlv:{encode:(v,A)=>{const{Err:E}=t.DER;if(v<0||v>256)throw new E("tlv.encode: wrong tag");if(A.length&1)throw new E("tlv.encode: unpadded data");const L=A.length/2,Y=r.numberToHexUnpadded(L);if(Y.length/2&128)throw new E("tlv.encode: long form length too big");const ee=L>127?r.numberToHexUnpadded(Y.length/2|128):"";return r.numberToHexUnpadded(v)+ee+Y+A},decode(v,A){const{Err:E}=t.DER;let L=0;if(v<0||v>256)throw new E("tlv.encode: wrong tag");if(A.length<2||A[L++]!==v)throw new E("tlv.decode: wrong tlv");const Y=A[L++],ee=!!(Y&128);let U=0;if(!ee)U=Y;else{const ae=Y&127;if(!ae)throw new E("tlv.decode(long): indefinite length not supported");if(ae>4)throw new E("tlv.decode(long): byte length is too big");const he=A.subarray(L,L+ae);if(he.length!==ae)throw new E("tlv.decode: length bytes not complete");if(he[0]===0)throw new E("tlv.decode(long): zero leftmost byte");for(const xe of he)U=U<<8|xe;if(L+=ae,U<128)throw new E("tlv.decode(long): not minimal encoding")}const G=A.subarray(L,L+U);if(G.length!==U)throw new E("tlv.decode: wrong value length");return{v:G,l:A.subarray(L+U)}}},_int:{encode(v){const{Err:A}=t.DER;if(v<d)throw new A("integer: negative integers are not allowed");let E=r.numberToHexUnpadded(v);if(Number.parseInt(E[0],16)&8&&(E="00"+E),E.length&1)throw new A("unexpected DER parsing assertion: unpadded hex");return E},decode(v){const{Err:A}=t.DER;if(v[0]&128)throw new A("invalid signature integer: negative");if(v[0]===0&&!(v[1]&128))throw new A("invalid signature integer: unnecessary leading zero");return l(v)}},toSig(v){const{Err:A,_int:E,_tlv:L}=t.DER,Y=typeof v=="string"?c(v):v;r.abytes(Y);const{v:ee,l:U}=L.decode(48,Y);if(U.length)throw new A("invalid signature: left bytes after parsing");const{v:G,l:ae}=L.decode(2,ee),{v:he,l:xe}=L.decode(2,ae);if(xe.length)throw new A("invalid signature: left bytes after parsing");return{r:E.decode(G),s:E.decode(he)}},hexFromSig(v){const{_tlv:A,_int:E}=t.DER,L=A.encode(2,E.encode(v.r)),Y=A.encode(2,E.encode(v.s)),ee=L+Y;return A.encode(48,ee)}};const d=BigInt(0),h=BigInt(1),f=BigInt(2),m=BigInt(3),_=BigInt(4);function S(v){const A=a(v),{Fp:E}=A,L=(0,n.Field)(A.n,A.nBitLength),Y=A.toBytes||((k,R,D)=>{const V=R.toAffine();return r.concatBytes(Uint8Array.from([4]),E.toBytes(V.x),E.toBytes(V.y))}),ee=A.fromBytes||(k=>{const R=k.subarray(1),D=E.fromBytes(R.subarray(0,E.BYTES)),V=E.fromBytes(R.subarray(E.BYTES,2*E.BYTES));return{x:D,y:V}});function U(k){const{a:R,b:D}=A,V=E.sqr(k),se=E.mul(V,k);return E.add(E.add(se,E.mul(k,R)),D)}if(!E.eql(E.sqr(A.Gy),U(A.Gx)))throw new Error("bad generator point: equation left != right");function G(k){return r.inRange(k,h,A.n)}function ae(k){const{allowedPrivateKeyLengths:R,nByteLength:D,wrapPrivateKey:V,n:se}=A;if(R&&typeof k!="bigint"){if(r.isBytes(k)&&(k=r.bytesToHex(k)),typeof k!="string"||!R.includes(k.length))throw new Error("invalid private key");k=k.padStart(D*2,"0")}let X;try{X=typeof k=="bigint"?k:r.bytesToNumberBE((0,s.ensureBytes)("private key",k,D))}catch{throw new Error("invalid private key, expected hex or "+D+" bytes, got "+typeof k)}return V&&(X=(0,n.mod)(X,se)),r.aInRange("private key",X,h,se),X}function he(k){if(!(k instanceof $))throw new Error("ProjectivePoint expected")}const xe=(0,s.memoized)((k,R)=>{const{px:D,py:V,pz:se}=k;if(E.eql(se,E.ONE))return{x:D,y:V};const X=k.is0();R==null&&(R=X?E.ONE:E.inv(se));const q=E.mul(D,R),Z=E.mul(V,R),ue=E.mul(se,R);if(X)return{x:E.ZERO,y:E.ZERO};if(!E.eql(ue,E.ONE))throw new Error("invZ was invalid");return{x:q,y:Z}}),de=(0,s.memoized)(k=>{if(k.is0()){if(A.allowInfinityPoint&&!E.is0(k.py))return;throw new Error("bad point: ZERO")}const{x:R,y:D}=k.toAffine();if(!E.isValid(R)||!E.isValid(D))throw new Error("bad point: x or y not FE");const V=E.sqr(D),se=U(R);if(!E.eql(V,se))throw new Error("bad point: equation left != right");if(!k.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class ${constructor(R,D,V){if(this.px=R,this.py=D,this.pz=V,R==null||!E.isValid(R))throw new Error("x required");if(D==null||!E.isValid(D))throw new Error("y required");if(V==null||!E.isValid(V))throw new Error("z required");Object.freeze(this)}static fromAffine(R){const{x:D,y:V}=R||{};if(!R||!E.isValid(D)||!E.isValid(V))throw new Error("invalid affine point");if(R instanceof $)throw new Error("projective point not allowed");const se=X=>E.eql(X,E.ZERO);return se(D)&&se(V)?$.ZERO:new $(D,V,E.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(R){const D=E.invertBatch(R.map(V=>V.pz));return R.map((V,se)=>V.toAffine(D[se])).map($.fromAffine)}static fromHex(R){const D=$.fromAffine(ee((0,s.ensureBytes)("pointHex",R)));return D.assertValidity(),D}static fromPrivateKey(R){return $.BASE.multiply(ae(R))}static msm(R,D){return(0,e.pippenger)($,L,R,D)}_setWindowSize(R){F.setWindowSize(this,R)}assertValidity(){de(this)}hasEvenY(){const{y:R}=this.toAffine();if(E.isOdd)return!E.isOdd(R);throw new Error("Field doesn't support isOdd")}equals(R){he(R);const{px:D,py:V,pz:se}=this,{px:X,py:q,pz:Z}=R,ue=E.eql(E.mul(D,Z),E.mul(X,se)),ne=E.eql(E.mul(V,Z),E.mul(q,se));return ue&&ne}negate(){return new $(this.px,E.neg(this.py),this.pz)}double(){const{a:R,b:D}=A,V=E.mul(D,m),{px:se,py:X,pz:q}=this;let Z=E.ZERO,ue=E.ZERO,ne=E.ZERO,J=E.mul(se,se),N=E.mul(X,X),g=E.mul(q,q),I=E.mul(se,X);return I=E.add(I,I),ne=E.mul(se,q),ne=E.add(ne,ne),Z=E.mul(R,ne),ue=E.mul(V,g),ue=E.add(Z,ue),Z=E.sub(N,ue),ue=E.add(N,ue),ue=E.mul(Z,ue),Z=E.mul(I,Z),ne=E.mul(V,ne),g=E.mul(R,g),I=E.sub(J,g),I=E.mul(R,I),I=E.add(I,ne),ne=E.add(J,J),J=E.add(ne,J),J=E.add(J,g),J=E.mul(J,I),ue=E.add(ue,J),g=E.mul(X,q),g=E.add(g,g),J=E.mul(g,I),Z=E.sub(Z,J),ne=E.mul(g,N),ne=E.add(ne,ne),ne=E.add(ne,ne),new $(Z,ue,ne)}add(R){he(R);const{px:D,py:V,pz:se}=this,{px:X,py:q,pz:Z}=R;let ue=E.ZERO,ne=E.ZERO,J=E.ZERO;const N=A.a,g=E.mul(A.b,m);let I=E.mul(D,X),T=E.mul(V,q),C=E.mul(se,Z),P=E.add(D,V),H=E.add(X,q);P=E.mul(P,H),H=E.add(I,T),P=E.sub(P,H),H=E.add(D,se);let M=E.add(X,Z);return H=E.mul(H,M),M=E.add(I,C),H=E.sub(H,M),M=E.add(V,se),ue=E.add(q,Z),M=E.mul(M,ue),ue=E.add(T,C),M=E.sub(M,ue),J=E.mul(N,H),ue=E.mul(g,C),J=E.add(ue,J),ue=E.sub(T,J),J=E.add(T,J),ne=E.mul(ue,J),T=E.add(I,I),T=E.add(T,I),C=E.mul(N,C),H=E.mul(g,H),T=E.add(T,C),C=E.sub(I,C),C=E.mul(N,C),H=E.add(H,C),I=E.mul(T,H),ne=E.add(ne,I),I=E.mul(M,H),ue=E.mul(P,ue),ue=E.sub(ue,I),I=E.mul(P,T),J=E.mul(M,J),J=E.add(J,I),new $(ue,ne,J)}subtract(R){return this.add(R.negate())}is0(){return this.equals($.ZERO)}wNAF(R){return F.wNAFCached(this,R,$.normalizeZ)}multiplyUnsafe(R){const{endo:D,n:V}=A;r.aInRange("scalar",R,d,V);const se=$.ZERO;if(R===d)return se;if(this.is0()||R===h)return this;if(!D||F.hasPrecomputes(this))return F.wNAFCachedUnsafe(this,R,$.normalizeZ);let{k1neg:X,k1:q,k2neg:Z,k2:ue}=D.splitScalar(R),ne=se,J=se,N=this;for(;q>d||ue>d;)q&h&&(ne=ne.add(N)),ue&h&&(J=J.add(N)),N=N.double(),q>>=h,ue>>=h;return X&&(ne=ne.negate()),Z&&(J=J.negate()),J=new $(E.mul(J.px,D.beta),J.py,J.pz),ne.add(J)}multiply(R){const{endo:D,n:V}=A;r.aInRange("scalar",R,h,V);let se,X;if(D){const{k1neg:q,k1:Z,k2neg:ue,k2:ne}=D.splitScalar(R);let{p:J,f:N}=this.wNAF(Z),{p:g,f:I}=this.wNAF(ne);J=F.constTimeNegate(q,J),g=F.constTimeNegate(ue,g),g=new $(E.mul(g.px,D.beta),g.py,g.pz),se=J.add(g),X=N.add(I)}else{const{p:q,f:Z}=this.wNAF(R);se=q,X=Z}return $.normalizeZ([se,X])[0]}multiplyAndAddUnsafe(R,D,V){const se=$.BASE,X=(Z,ue)=>ue===d||ue===h||!Z.equals(se)?Z.multiplyUnsafe(ue):Z.multiply(ue),q=X(this,D).add(X(R,V));return q.is0()?void 0:q}toAffine(R){return xe(this,R)}isTorsionFree(){const{h:R,isTorsionFree:D}=A;if(R===h)return!0;if(D)return D($,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:R,clearCofactor:D}=A;return R===h?this:D?D($,this):this.multiplyUnsafe(A.h)}toRawBytes(R=!0){return(0,s.abool)("isCompressed",R),this.assertValidity(),Y($,this,R)}toHex(R=!0){return(0,s.abool)("isCompressed",R),r.bytesToHex(this.toRawBytes(R))}}$.BASE=new $(A.Gx,A.Gy,E.ONE),$.ZERO=new $(E.ZERO,E.ONE,E.ZERO);const re=A.nBitLength,F=(0,e.wNAF)($,A.endo?Math.ceil(re/2):re);return{CURVE:A,ProjectivePoint:$,normPrivateKeyToScalar:ae,weierstrassEquation:U,isWithinCurveOrder:G}}function j(v){const A=(0,e.validateBasic)(v);return r.validateObject(A,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...A})}function y(v){const A=j(v),{Fp:E,n:L}=A,Y=E.BYTES+1,ee=2*E.BYTES+1;function U(C){return(0,n.mod)(C,L)}function G(C){return(0,n.invert)(C,L)}const{ProjectivePoint:ae,normPrivateKeyToScalar:he,weierstrassEquation:xe,isWithinCurveOrder:de}=S({...A,toBytes(C,P,H){const M=P.toAffine(),K=E.toBytes(M.x),Q=r.concatBytes;return(0,s.abool)("isCompressed",H),H?Q(Uint8Array.from([P.hasEvenY()?2:3]),K):Q(Uint8Array.from([4]),K,E.toBytes(M.y))},fromBytes(C){const P=C.length,H=C[0],M=C.subarray(1);if(P===Y&&(H===2||H===3)){const K=r.bytesToNumberBE(M);if(!r.inRange(K,h,E.ORDER))throw new Error("Point is not on curve");const Q=xe(K);let te;try{te=E.sqrt(Q)}catch(_e){const be=_e instanceof Error?": "+_e.message:"";throw new Error("Point is not on curve"+be)}const le=(te&h)===h;return(H&1)===1!==le&&(te=E.neg(te)),{x:K,y:te}}else if(P===ee&&H===4){const K=E.fromBytes(M.subarray(0,E.BYTES)),Q=E.fromBytes(M.subarray(E.BYTES,2*E.BYTES));return{x:K,y:Q}}else{const K=Y,Q=ee;throw new Error("invalid Point, expected length of "+K+", or uncompressed "+Q+", got "+P)}}}),$=C=>r.bytesToHex(r.numberToBytesBE(C,A.nByteLength));function re(C){const P=L>>h;return C>P}function F(C){return re(C)?U(-C):C}const k=(C,P,H)=>r.bytesToNumberBE(C.slice(P,H));class R{constructor(P,H,M){this.r=P,this.s=H,this.recovery=M,this.assertValidity()}static fromCompact(P){const H=A.nByteLength;return P=(0,s.ensureBytes)("compactSignature",P,H*2),new R(k(P,0,H),k(P,H,2*H))}static fromDER(P){const{r:H,s:M}=t.DER.toSig((0,s.ensureBytes)("DER",P));return new R(H,M)}assertValidity(){r.aInRange("r",this.r,h,L),r.aInRange("s",this.s,h,L)}addRecoveryBit(P){return new R(this.r,this.s,P)}recoverPublicKey(P){const{r:H,s:M,recovery:K}=this,Q=Z((0,s.ensureBytes)("msgHash",P));if(K==null||![0,1,2,3].includes(K))throw new Error("recovery id invalid");const te=K===2||K===3?H+A.n:H;if(te>=E.ORDER)throw new Error("recovery id 2 or 3 invalid");const le=K&1?"03":"02",we=ae.fromHex(le+$(te)),_e=G(te),be=U(-Q*_e),Ie=U(M*_e),He=ae.BASE.multiplyAndAddUnsafe(we,be,Ie);if(!He)throw new Error("point at infinify");return He.assertValidity(),He}hasHighS(){return re(this.s)}normalizeS(){return this.hasHighS()?new R(this.r,U(-this.s),this.recovery):this}toDERRawBytes(){return r.hexToBytes(this.toDERHex())}toDERHex(){return t.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return r.hexToBytes(this.toCompactHex())}toCompactHex(){return $(this.r)+$(this.s)}}const D={isValidPrivateKey(C){try{return he(C),!0}catch{return!1}},normPrivateKeyToScalar:he,randomPrivateKey:()=>{const C=(0,n.getMinHashLength)(A.n);return(0,n.mapHashToField)(A.randomBytes(C),A.n)},precompute(C=8,P=ae.BASE){return P._setWindowSize(C),P.multiply(BigInt(3)),P}};function V(C,P=!0){return ae.fromPrivateKey(C).toRawBytes(P)}function se(C){const P=r.isBytes(C),H=typeof C=="string",M=(P||H)&&C.length;return P?M===Y||M===ee:H?M===2*Y||M===2*ee:C instanceof ae}function X(C,P,H=!0){if(se(C))throw new Error("first arg must be private key");if(!se(P))throw new Error("second arg must be public key");return ae.fromHex(P).multiply(he(C)).toRawBytes(H)}const q=A.bits2int||function(C){if(C.length>8192)throw new Error("input is too large");const P=r.bytesToNumberBE(C),H=C.length*8-A.nBitLength;return H>0?P>>BigInt(H):P},Z=A.bits2int_modN||function(C){return U(q(C))},ue=r.bitMask(A.nBitLength);function ne(C){return r.aInRange("num < 2^"+A.nBitLength,C,d,ue),r.numberToBytesBE(C,A.nByteLength)}function J(C,P,H=N){if(["recovered","canonical"].some(p=>p in H))throw new Error("sign() legacy options not supported");const{hash:M,randomBytes:K}=A;let{lowS:Q,prehash:te,extraEntropy:le}=H;Q==null&&(Q=!0),C=(0,s.ensureBytes)("msgHash",C),i(H),te&&(C=(0,s.ensureBytes)("prehashed msgHash",M(C)));const we=Z(C),_e=he(P),be=[ne(_e),ne(we)];if(le!=null&&le!==!1){const p=le===!0?K(E.BYTES):le;be.push((0,s.ensureBytes)("extraEntropy",p))}const Ie=r.concatBytes(...be),He=we;function O(p){const w=q(p);if(!de(w))return;const W=G(w),oe=ae.BASE.multiply(w).toAffine(),ce=U(oe.x);if(ce===d)return;const fe=U(W*U(He+ce*_e));if(fe===d)return;let Te=(oe.x===ce?0:2)|Number(oe.y&h),Le=fe;return Q&&re(fe)&&(Le=F(fe),Te^=1),new R(ce,Le,Te)}return{seed:Ie,k2sig:O}}const N={lowS:A.lowS,prehash:!1},g={lowS:A.lowS,prehash:!1};function I(C,P,H=N){const{seed:M,k2sig:K}=J(C,P,H),Q=A;return r.createHmacDrbg(Q.hash.outputLen,Q.nByteLength,Q.hmac)(M,K)}ae.BASE._setWindowSize(8);function T(C,P,H,M=g){var Te;const K=C;P=(0,s.ensureBytes)("msgHash",P),H=(0,s.ensureBytes)("publicKey",H);const{lowS:Q,prehash:te,format:le}=M;if(i(M),"strict"in M)throw new Error("options.strict was renamed to lowS");if(le!==void 0&&le!=="compact"&&le!=="der")throw new Error("format must be compact or der");const we=typeof K=="string"||r.isBytes(K),_e=!we&&!le&&typeof K=="object"&&K!==null&&typeof K.r=="bigint"&&typeof K.s=="bigint";if(!we&&!_e)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let be,Ie;try{if(_e&&(be=new R(K.r,K.s)),we){try{le!=="compact"&&(be=R.fromDER(K))}catch(Le){if(!(Le instanceof t.DER.Err))throw Le}!be&&le!=="der"&&(be=R.fromCompact(K))}Ie=ae.fromHex(H)}catch{return!1}if(!be||Q&&be.hasHighS())return!1;te&&(P=A.hash(P));const{r:He,s:O}=be,p=Z(P),w=G(O),W=U(p*w),oe=U(He*w),ce=(Te=ae.BASE.multiplyAndAddUnsafe(Ie,W,oe))==null?void 0:Te.toAffine();return ce?U(ce.x)===He:!1}return{CURVE:A,getPublicKey:V,getSharedSecret:X,sign:I,verify:T,ProjectivePoint:ae,Signature:R,utils:D}}function x(v,A){const E=v.ORDER;let L=d;for(let F=E-h;F%f===d;F/=f)L+=h;const Y=L,ee=f<<Y-h-h,U=ee*f,G=(E-h)/U,ae=(G-h)/f,he=U-h,xe=ee,de=v.pow(A,G),$=v.pow(A,(G+h)/f);let re=(F,k)=>{let R=de,D=v.pow(k,he),V=v.sqr(D);V=v.mul(V,k);let se=v.mul(F,V);se=v.pow(se,ae),se=v.mul(se,D),D=v.mul(se,k),V=v.mul(se,F);let X=v.mul(V,D);se=v.pow(X,xe);let q=v.eql(se,v.ONE);D=v.mul(V,$),se=v.mul(X,R),V=v.cmov(D,V,q),X=v.cmov(se,X,q);for(let Z=Y;Z>h;Z--){let ue=Z-f;ue=f<<ue-h;let ne=v.pow(X,ue);const J=v.eql(ne,v.ONE);D=v.mul(V,R),R=v.mul(R,R),ne=v.mul(X,R),V=v.cmov(D,V,J),X=v.cmov(ne,X,J)}return{isValid:q,value:V}};if(v.ORDER%_===m){const F=(v.ORDER-m)/_,k=v.sqrt(v.neg(A));re=(R,D)=>{let V=v.sqr(D);const se=v.mul(R,D);V=v.mul(V,se);let X=v.pow(V,F);X=v.mul(X,se);const q=v.mul(X,k),Z=v.mul(v.sqr(X),D),ue=v.eql(Z,R);let ne=v.cmov(q,X,ue);return{isValid:ue,value:ne}}}return re}function b(v,A){if((0,n.validateField)(v),!v.isValid(A.A)||!v.isValid(A.B)||!v.isValid(A.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const E=x(v,A.Z);if(!v.isOdd)throw new Error("Fp.isOdd is not implemented!");return L=>{let Y,ee,U,G,ae,he,xe,de;Y=v.sqr(L),Y=v.mul(Y,A.Z),ee=v.sqr(Y),ee=v.add(ee,Y),U=v.add(ee,v.ONE),U=v.mul(U,A.B),G=v.cmov(A.Z,v.neg(ee),!v.eql(ee,v.ZERO)),G=v.mul(G,A.A),ee=v.sqr(U),he=v.sqr(G),ae=v.mul(he,A.A),ee=v.add(ee,ae),ee=v.mul(ee,U),he=v.mul(he,G),ae=v.mul(he,A.B),ee=v.add(ee,ae),xe=v.mul(Y,U);const{isValid:$,value:re}=E(ee,he);de=v.mul(Y,L),de=v.mul(de,re),xe=v.cmov(xe,U,$),de=v.cmov(de,re,$);const F=v.isOdd(L)===v.isOdd(de);return de=v.cmov(v.neg(de),de,F),xe=v.div(xe,G),{x:xe,y:de}}}})(Jx);Object.defineProperty(jp,"__esModule",{value:!0});jp.getHash=j2;jp.createCurve=J4;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const G4=kp,d1=Fn,Y4=Jx;function j2(t){return{hash:t,hmac:(e,...n)=>(0,G4.hmac)(t,e,(0,d1.concatBytes)(...n)),randomBytes:d1.randomBytes}}function J4(t,e){const n=r=>(0,Y4.weierstrass)({...t,...j2(r)});return{...n(e),create:n}}var wo={};Object.defineProperty(wo,"__esModule",{value:!0});wo.expand_message_xmd=k2;wo.expand_message_xof=O2;wo.hash_to_field=iv;wo.isogenyMap=tB;wo.createHasher=nB;const Q4=dt,an=Ze,Z4=an.bytesToNumberBE;function Ei(t,e){if(Iu(t),Iu(e),t<0||t>=1<<8*e)throw new Error("invalid I2OSP input: "+t);const n=Array.from({length:e}).fill(0);for(let r=e-1;r>=0;r--)n[r]=t&255,t>>>=8;return new Uint8Array(n)}function eB(t,e){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[r]^e[r];return n}function Iu(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function k2(t,e,n,r){(0,an.abytes)(t),(0,an.abytes)(e),Iu(n),e.length>255&&(e=r((0,an.concatBytes)((0,an.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));const{outputLen:s,blockLen:i}=r,a=Math.ceil(n/s);if(n>65535||a>255)throw new Error("expand_message_xmd: invalid lenInBytes");const l=(0,an.concatBytes)(e,Ei(e.length,1)),c=Ei(0,i),u=Ei(n,2),d=new Array(a),h=r((0,an.concatBytes)(c,t,u,Ei(0,1),l));d[0]=r((0,an.concatBytes)(h,Ei(1,1),l));for(let m=1;m<=a;m++){const _=[eB(h,d[m-1]),Ei(m+1,1),l];d[m]=r((0,an.concatBytes)(..._))}return(0,an.concatBytes)(...d).slice(0,n)}function O2(t,e,n,r,s){if((0,an.abytes)(t),(0,an.abytes)(e),Iu(n),e.length>255){const i=Math.ceil(2*r/8);e=s.create({dkLen:i}).update((0,an.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if(n>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return s.create({dkLen:n}).update(t).update(Ei(n,2)).update(e).update(Ei(e.length,1)).digest()}function iv(t,e,n){(0,an.validateObject)(n,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:r,k:s,m:i,hash:a,expand:l,DST:c}=n;(0,an.abytes)(t),Iu(e);const u=typeof c=="string"?(0,an.utf8ToBytes)(c):c,d=r.toString(2).length,h=Math.ceil((d+s)/8),f=e*i*h;let m;if(l==="xmd")m=k2(t,u,f,a);else if(l==="xof")m=O2(t,u,f,s,a);else if(l==="_internal_pass")m=t;else throw new Error('expand must be "xmd" or "xof"');const _=new Array(e);for(let S=0;S<e;S++){const j=new Array(i);for(let y=0;y<i;y++){const x=h*(y+S*i),b=m.subarray(x,x+h);j[y]=(0,Q4.mod)(Z4(b),r)}_[S]=j}return _}function tB(t,e){const n=e.map(r=>Array.from(r).reverse());return(r,s)=>{const[i,a,l,c]=n.map(u=>u.reduce((d,h)=>t.add(t.mul(d,r),h)));return r=t.div(i,a),s=t.mul(s,t.div(l,c)),{x:r,y:s}}}function nB(t,e,n){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(r,s){const i=iv(r,2,{...n,DST:n.DST,...s}),a=t.fromAffine(e(i[0])),l=t.fromAffine(e(i[1])),c=a.add(l).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,s){const i=iv(r,1,{...n,DST:n.encodeDST,...s}),a=t.fromAffine(e(i[0])).clearCofactor();return a.assertValidity(),a},mapToCurve(r){if(!Array.isArray(r))throw new Error("mapToCurve: expected array of bigints");for(const i of r)if(typeof i!="bigint")throw new Error("mapToCurve: expected array of bigints");const s=t.fromAffine(e(r)).clearCofactor();return s.assertValidity(),s}}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.encodeToCurve=t.hashToCurve=t.schnorr=t.secp256k1=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const e=Wr,n=Fn,r=jp,s=wo,i=dt,a=Ze,l=Jx,c=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),u=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),d=BigInt(1),h=BigInt(2),f=(F,k)=>(F+k/h)/k;function m(F){const k=c,R=BigInt(3),D=BigInt(6),V=BigInt(11),se=BigInt(22),X=BigInt(23),q=BigInt(44),Z=BigInt(88),ue=F*F*F%k,ne=ue*ue*F%k,J=(0,i.pow2)(ne,R,k)*ne%k,N=(0,i.pow2)(J,R,k)*ne%k,g=(0,i.pow2)(N,h,k)*ue%k,I=(0,i.pow2)(g,V,k)*g%k,T=(0,i.pow2)(I,se,k)*I%k,C=(0,i.pow2)(T,q,k)*T%k,P=(0,i.pow2)(C,Z,k)*C%k,H=(0,i.pow2)(P,q,k)*T%k,M=(0,i.pow2)(H,R,k)*ne%k,K=(0,i.pow2)(M,X,k)*I%k,Q=(0,i.pow2)(K,D,k)*ue%k,te=(0,i.pow2)(Q,h,k);if(!_.eql(_.sqr(te),F))throw new Error("Cannot find square root");return te}const _=(0,i.Field)(c,void 0,void 0,{sqrt:m});t.secp256k1=(0,r.createCurve)({a:BigInt(0),b:BigInt(7),Fp:_,n:u,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:F=>{const k=u,R=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),D=-d*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),V=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),se=R,X=BigInt("0x100000000000000000000000000000000"),q=f(se*F,k),Z=f(-D*F,k);let ue=(0,i.mod)(F-q*R-Z*V,k),ne=(0,i.mod)(-q*D-Z*se,k);const J=ue>X,N=ne>X;if(J&&(ue=k-ue),N&&(ne=k-ne),ue>X||ne>X)throw new Error("splitScalar: Endomorphism failed, k="+F);return{k1neg:J,k1:ue,k2neg:N,k2:ne}}}},e.sha256);const S=BigInt(0),j={};function y(F,...k){let R=j[F];if(R===void 0){const D=(0,e.sha256)(Uint8Array.from(F,V=>V.charCodeAt(0)));R=(0,a.concatBytes)(D,D),j[F]=R}return(0,e.sha256)((0,a.concatBytes)(R,...k))}const x=F=>F.toRawBytes(!0).slice(1),b=F=>(0,a.numberToBytesBE)(F,32),v=F=>(0,i.mod)(F,c),A=F=>(0,i.mod)(F,u),E=t.secp256k1.ProjectivePoint,L=(F,k,R)=>E.BASE.multiplyAndAddUnsafe(F,k,R);function Y(F){let k=t.secp256k1.utils.normPrivateKeyToScalar(F),R=E.fromPrivateKey(k);return{scalar:R.hasEvenY()?k:A(-k),bytes:x(R)}}function ee(F){(0,a.aInRange)("x",F,d,c);const k=v(F*F),R=v(k*F+BigInt(7));let D=m(R);D%h!==S&&(D=v(-D));const V=new E(F,D,d);return V.assertValidity(),V}const U=a.bytesToNumberBE;function G(...F){return A(U(y("BIP0340/challenge",...F)))}function ae(F){return Y(F).bytes}function he(F,k,R=(0,n.randomBytes)(32)){const D=(0,a.ensureBytes)("message",F),{bytes:V,scalar:se}=Y(k),X=(0,a.ensureBytes)("auxRand",R,32),q=b(se^U(y("BIP0340/aux",X))),Z=y("BIP0340/nonce",q,V,D),ue=A(U(Z));if(ue===S)throw new Error("sign failed: k is zero");const{bytes:ne,scalar:J}=Y(ue),N=G(ne,V,D),g=new Uint8Array(64);if(g.set(ne,0),g.set(b(A(J+N*se)),32),!xe(g,D,V))throw new Error("sign: Invalid signature produced");return g}function xe(F,k,R){const D=(0,a.ensureBytes)("signature",F,64),V=(0,a.ensureBytes)("message",k),se=(0,a.ensureBytes)("publicKey",R,32);try{const X=ee(U(se)),q=U(D.subarray(0,32));if(!(0,a.inRange)(q,d,c))return!1;const Z=U(D.subarray(32,64));if(!(0,a.inRange)(Z,d,u))return!1;const ue=G(b(q),x(X),V),ne=L(X,Z,A(-ue));return!(!ne||!ne.hasEvenY()||ne.toAffine().x!==q)}catch{return!1}}t.schnorr=(()=>({getPublicKey:ae,sign:he,verify:xe,utils:{randomPrivateKey:t.secp256k1.utils.randomPrivateKey,lift_x:ee,pointToBytes:x,numberToBytesBE:a.numberToBytesBE,bytesToNumberBE:a.bytesToNumberBE,taggedHash:y,mod:i.mod}}))();const de=(()=>(0,s.isogenyMap)(_,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(F=>F.map(k=>BigInt(k)))))(),$=(()=>(0,l.mapToCurveSimpleSWU)(_,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:_.create(BigInt("-11"))}))(),re=(()=>(0,s.createHasher)(t.secp256k1.ProjectivePoint,F=>{const{x:k,y:R}=$(_.create(F[0]));return de(k,R)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:_.ORDER,m:1,k:128,expand:"xmd",hash:e.sha256}))();t.hashToCurve=(()=>re.hashToCurve)(),t.encodeToCurve=(()=>re.encodeToCurve)()})(Cp);var nc={};Object.defineProperty(nc,"__esModule",{value:!0});const rB=tc,sB=Ze;class rw{constructor(){this.hash=rB.sha512.create()}static half(e){return new rw().add(e).first256()}add(e){return this.hash.update(e),this}addU32(e){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e),this.add(n)}finish(){return this.hash.digest()}first256(){return this.finish().slice(0,32)}first256BigInt(){return(0,sB.bytesToNumberBE)(this.first256())}}nc.default=rw;var iB=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ga,"__esModule",{value:!0});ga.accountPublicFromPublicGenerator=ga.derivePrivateKey=void 0;const Pu=Cp,oB=iB(nc),aB=BigInt(0);function ov(t,e){const n=Pu.secp256k1.CURVE.n;for(let r=0;r<=4294967295;r++){const s=new oB.default().add(t);e!==void 0&&s.addU32(e),s.addU32(r);const i=s.first256BigInt();if(i>aB&&i<n)return i}throw new Error("impossible unicorn ;)")}function lB(t,e={}){const n=e.validator,r=Pu.secp256k1.CURVE.n,s=ov(t);if(n)return s;const i=Pu.secp256k1.ProjectivePoint.BASE.multiply(s).toRawBytes(!0),a=e.accountIndex||0;return(ov(i,a)+s)%r}ga.derivePrivateKey=lB;function cB(t){const e=Pu.secp256k1.ProjectivePoint.fromHex(t),n=ov(t,0),r=Pu.secp256k1.ProjectivePoint.BASE.multiply(n);return e.add(r).toRawBytes(!0)}ga.accountPublicFromPublicGenerator=cB;var od={};Object.defineProperty(od,"__esModule",{value:!0});const uB={ok(t,e){if(!t)throw new Error(e)}};od.default=uB;var Xi={};Object.defineProperty(Xi,"__esModule",{value:!0});Xi.getAlgorithmFromPrivateKey=Xi.getAlgorithmFromPublicKey=Xi.getAlgorithmFromKey=void 0;var mr;(function(t){t[t.NONE=-1]="NONE",t[t.ED25519=237]="ED25519",t[t.SECP256K1_PUB_X=2]="SECP256K1_PUB_X",t[t.SECP256K1_PUB_X_ODD_Y=3]="SECP256K1_PUB_X_ODD_Y",t[t.SECP256K1_PUB_XY=4]="SECP256K1_PUB_XY",t[t.SECP256K1_PRIVATE=0]="SECP256K1_PRIVATE"})(mr||(mr={}));const I2={[`private_${mr.NONE}_32`]:"ecdsa-secp256k1",[`private_${mr.SECP256K1_PRIVATE}_33`]:"ecdsa-secp256k1",[`private_${mr.ED25519}_33`]:"ed25519",[`public_${mr.ED25519}_33`]:"ed25519",[`public_${mr.SECP256K1_PUB_X}_33`]:"ecdsa-secp256k1",[`public_${mr.SECP256K1_PUB_X_ODD_Y}_33`]:"ecdsa-secp256k1",[`public_${mr.SECP256K1_PUB_XY}_65`]:"ecdsa-secp256k1"};function dB(t){return{prefix:t.length<2?mr.NONE:parseInt(t.slice(0,2),16),len:t.length/2}}function P2(t){return t===mr.NONE?"None":`0x${t.toString(16).padStart(2,"0")}`}function hB(t){const n={algorithm:17,prefix:6};return Object.entries(I2).filter(([r])=>r.startsWith(t)).map(([r,s])=>{const[,i,a]=r.split("_"),l=s.padEnd(n.algorithm),c=P2(Number(i)).padEnd(n.prefix);return`${l} - Prefix: ${c} Length: ${a} bytes`}).join(`
`)}function fB({key:t,type:e,prefix:n,len:r}){const s=hB(e);return`invalid_key:

Type: ${e}
Key: ${t}
Prefix: ${P2(n)} 
Length: ${r} bytes

Acceptable ${e} formats are:
${s}
`}function sw(t,e){const{prefix:n,len:r}=dB(t),s=e==="private"&&r===32?mr.NONE:n,i=I2[`${e}_${s}_${r}`];if(!i)throw new Error(fB({key:t,type:e,len:r,prefix:s}));return i}Xi.getAlgorithmFromKey=sw;function pB(t){return sw(t,"public")}Xi.getAlgorithmFromPublicKey=pB;function mB(t){return sw(t,"private")}Xi.getAlgorithmFromPrivateKey=mB;var iw={},R2=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(iw,"__esModule",{value:!0});const gB=Ze,qd=Cp,h1=at,yB=ga,vB=R2(od),f1=R2(nc),p1="00",xB={deriveKeypair(t,e){const n=(0,yB.derivePrivateKey)(t,e),r=p1+(0,h1.bytesToHex)((0,gB.numberToBytesBE)(n,32)),s=(0,h1.bytesToHex)(qd.secp256k1.getPublicKey(n,!0));return{privateKey:r,publicKey:s}},sign(t,e){vB.default.ok(e.length===66&&e.startsWith(p1)||e.length===64);const n=e.length===66?e.slice(2):e;return qd.secp256k1.sign(f1.default.half(t),n,{lowS:!0,extraEntropy:void 0}).toDERHex(!0).toUpperCase()},verify(t,e,n){const r=qd.secp256k1.Signature.fromDER(e);return qd.secp256k1.verify(r,f1.default.half(t),n)}};iw.default=xB;var ow={},L2={},aw={};Object.defineProperty(aw,"__esModule",{value:!0});aw.twistedEdwards=EB;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const av=xo,m1=dt,An=Ze,En=Ze,Or=BigInt(0),Sn=BigInt(1),Gd=BigInt(2),wB=BigInt(8),bB={zip215:!0};function _B(t){const e=(0,av.validateBasic)(t);return An.validateObject(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function EB(t){const e=_B(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:a,nByteLength:l,h:c}=e,u=Gd<<BigInt(l*8)-Sn,d=n.create,h=(0,m1.Field)(e.n,e.nBitLength),f=e.uvRatio||(($,re)=>{try{return{isValid:!0,value:n.sqrt($*n.inv(re))}}catch{return{isValid:!1,value:Or}}}),m=e.adjustScalarBytes||($=>$),_=e.domain||(($,re,F)=>{if((0,En.abool)("phflag",F),re.length||F)throw new Error("Contexts/pre-hash are not supported");return $});function S($,re){An.aInRange("coordinate "+$,re,Or,u)}function j($){if(!($ instanceof b))throw new Error("ExtendedPoint expected")}const y=(0,En.memoized)(($,re)=>{const{ex:F,ey:k,ez:R}=$,D=$.is0();re==null&&(re=D?wB:n.inv(R));const V=d(F*re),se=d(k*re),X=d(R*re);if(D)return{x:Or,y:Sn};if(X!==Sn)throw new Error("invZ was invalid");return{x:V,y:se}}),x=(0,En.memoized)($=>{const{a:re,d:F}=e;if($.is0())throw new Error("bad point: ZERO");const{ex:k,ey:R,ez:D,et:V}=$,se=d(k*k),X=d(R*R),q=d(D*D),Z=d(q*q),ue=d(se*re),ne=d(q*d(ue+X)),J=d(Z+d(F*d(se*X)));if(ne!==J)throw new Error("bad point: equation left != right (1)");const N=d(k*R),g=d(D*V);if(N!==g)throw new Error("bad point: equation left != right (2)");return!0});class b{constructor(re,F,k,R){this.ex=re,this.ey=F,this.ez=k,this.et=R,S("x",re),S("y",F),S("z",k),S("t",R),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(re){if(re instanceof b)throw new Error("extended point not allowed");const{x:F,y:k}=re||{};return S("x",F),S("y",k),new b(F,k,Sn,d(F*k))}static normalizeZ(re){const F=n.invertBatch(re.map(k=>k.ez));return re.map((k,R)=>k.toAffine(F[R])).map(b.fromAffine)}static msm(re,F){return(0,av.pippenger)(b,h,re,F)}_setWindowSize(re){E.setWindowSize(this,re)}assertValidity(){x(this)}equals(re){j(re);const{ex:F,ey:k,ez:R}=this,{ex:D,ey:V,ez:se}=re,X=d(F*se),q=d(D*R),Z=d(k*se),ue=d(V*R);return X===q&&Z===ue}is0(){return this.equals(b.ZERO)}negate(){return new b(d(-this.ex),this.ey,this.ez,d(-this.et))}double(){const{a:re}=e,{ex:F,ey:k,ez:R}=this,D=d(F*F),V=d(k*k),se=d(Gd*d(R*R)),X=d(re*D),q=F+k,Z=d(d(q*q)-D-V),ue=X+V,ne=ue-se,J=X-V,N=d(Z*ne),g=d(ue*J),I=d(Z*J),T=d(ne*ue);return new b(N,g,T,I)}add(re){j(re);const{a:F,d:k}=e,{ex:R,ey:D,ez:V,et:se}=this,{ex:X,ey:q,ez:Z,et:ue}=re;if(F===BigInt(-1)){const te=d((D-R)*(q+X)),le=d((D+R)*(q-X)),we=d(le-te);if(we===Or)return this.double();const _e=d(V*Gd*ue),be=d(se*Gd*Z),Ie=be+_e,He=le+te,O=be-_e,p=d(Ie*we),w=d(He*O),W=d(Ie*O),oe=d(we*He);return new b(p,w,oe,W)}const ne=d(R*X),J=d(D*q),N=d(se*k*ue),g=d(V*Z),I=d((R+D)*(X+q)-ne-J),T=g-N,C=g+N,P=d(J-F*ne),H=d(I*T),M=d(C*P),K=d(I*P),Q=d(T*C);return new b(H,M,Q,K)}subtract(re){return this.add(re.negate())}wNAF(re){return E.wNAFCached(this,re,b.normalizeZ)}multiply(re){const F=re;An.aInRange("scalar",F,Sn,r);const{p:k,f:R}=this.wNAF(F);return b.normalizeZ([k,R])[0]}multiplyUnsafe(re,F=b.ZERO){const k=re;return An.aInRange("scalar",k,Or,r),k===Or?A:this.is0()||k===Sn?this:E.wNAFCachedUnsafe(this,k,b.normalizeZ,F)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return E.unsafeLadder(this,r).is0()}toAffine(re){return y(this,re)}clearCofactor(){const{h:re}=e;return re===Sn?this:this.multiplyUnsafe(re)}static fromHex(re,F=!1){const{d:k,a:R}=e,D=n.BYTES;re=(0,En.ensureBytes)("pointHex",re,D),(0,En.abool)("zip215",F);const V=re.slice(),se=re[D-1];V[D-1]=se&-129;const X=An.bytesToNumberLE(V),q=F?u:n.ORDER;An.aInRange("pointHex.y",X,Or,q);const Z=d(X*X),ue=d(Z-Sn),ne=d(k*Z-R);let{isValid:J,value:N}=f(ue,ne);if(!J)throw new Error("Point.fromHex: invalid y coordinate");const g=(N&Sn)===Sn,I=(se&128)!==0;if(!F&&N===Or&&I)throw new Error("Point.fromHex: x=0 and x_0=1");return I!==g&&(N=d(-N)),b.fromAffine({x:N,y:X})}static fromPrivateKey(re){return ee(re).point}toRawBytes(){const{x:re,y:F}=this.toAffine(),k=An.numberToBytesLE(F,n.BYTES);return k[k.length-1]|=re&Sn?128:0,k}toHex(){return An.bytesToHex(this.toRawBytes())}}b.BASE=new b(e.Gx,e.Gy,Sn,d(e.Gx*e.Gy)),b.ZERO=new b(Or,Sn,Sn,Or);const{BASE:v,ZERO:A}=b,E=(0,av.wNAF)(b,l*8);function L($){return(0,m1.mod)($,r)}function Y($){return L(An.bytesToNumberLE($))}function ee($){const re=n.BYTES;$=(0,En.ensureBytes)("private key",$,re);const F=(0,En.ensureBytes)("hashed private key",i($),2*re),k=m(F.slice(0,re)),R=F.slice(re,2*re),D=Y(k),V=v.multiply(D),se=V.toRawBytes();return{head:k,prefix:R,scalar:D,point:V,pointBytes:se}}function U($){return ee($).pointBytes}function G($=new Uint8Array,...re){const F=An.concatBytes(...re);return Y(i(_(F,(0,En.ensureBytes)("context",$),!!s)))}function ae($,re,F={}){$=(0,En.ensureBytes)("message",$),s&&($=s($));const{prefix:k,scalar:R,pointBytes:D}=ee(re),V=G(F.context,k,$),se=v.multiply(V).toRawBytes(),X=G(F.context,se,D,$),q=L(V+X*R);An.aInRange("signature.s",q,Or,r);const Z=An.concatBytes(se,An.numberToBytesLE(q,n.BYTES));return(0,En.ensureBytes)("result",Z,n.BYTES*2)}const he=bB;function xe($,re,F,k=he){const{context:R,zip215:D}=k,V=n.BYTES;$=(0,En.ensureBytes)("signature",$,2*V),re=(0,En.ensureBytes)("message",re),F=(0,En.ensureBytes)("publicKey",F,V),D!==void 0&&(0,En.abool)("zip215",D),s&&(re=s(re));const se=An.bytesToNumberLE($.slice(V,2*V));let X,q,Z;try{X=b.fromHex(F,D),q=b.fromHex($.slice(0,V),D),Z=v.multiplyUnsafe(se)}catch{return!1}if(!D&&X.isSmallOrder())return!1;const ue=G(R,q.toRawBytes(),X.toRawBytes(),re);return q.add(X.multiplyUnsafe(ue)).subtract(Z).clearCofactor().equals(b.ZERO)}return v._setWindowSize(8),{CURVE:e,getPublicKey:U,sign:ae,verify:xe,ExtendedPoint:b,utils:{getExtendedPublicKey:ee,randomPrivateKey:()=>a(n.BYTES),precompute($=8,re=b.BASE){return re._setWindowSize($),re.multiply(BigInt(3)),re}}}}var lw={};Object.defineProperty(lw,"__esModule",{value:!0});lw.montgomery=NB;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const g1=dt,xi=Ze,Va=BigInt(0),$0=BigInt(1);function SB(t){return(0,xi.validateObject)(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function NB(t){const e=SB(t),{P:n}=e,r=x=>(0,g1.mod)(x,n),s=e.montgomeryBits,i=Math.ceil(s/8),a=e.nByteLength,l=e.adjustScalarBytes||(x=>x),c=e.powPminus2||(x=>(0,g1.pow)(x,n-BigInt(2),n));function u(x,b,v){const A=r(x*(b-v));return b=r(b-A),v=r(v+A),[b,v]}const d=(e.a-BigInt(2))/BigInt(4);function h(x,b){(0,xi.aInRange)("u",x,Va,n),(0,xi.aInRange)("scalar",b,Va,n);const v=b,A=x;let E=$0,L=Va,Y=x,ee=$0,U=Va,G;for(let he=BigInt(s-1);he>=Va;he--){const xe=v>>he&$0;U^=xe,G=u(U,E,Y),E=G[0],Y=G[1],G=u(U,L,ee),L=G[0],ee=G[1],U=xe;const de=E+L,$=r(de*de),re=E-L,F=r(re*re),k=$-F,R=Y+ee,D=Y-ee,V=r(D*de),se=r(R*re),X=V+se,q=V-se;Y=r(X*X),ee=r(A*r(q*q)),E=r($*F),L=r(k*($+r(d*k)))}G=u(U,E,Y),E=G[0],Y=G[1],G=u(U,L,ee),L=G[0],ee=G[1];const ae=c(L);return r(E*ae)}function f(x){return(0,xi.numberToBytesLE)(r(x),i)}function m(x){const b=(0,xi.ensureBytes)("u coordinate",x,i);return a===32&&(b[31]&=127),(0,xi.bytesToNumberLE)(b)}function _(x){const b=(0,xi.ensureBytes)("scalar",x),v=b.length;if(v!==i&&v!==a){let A=""+i+" or "+a;throw new Error("invalid scalar, expected "+A+" bytes, got "+v)}return(0,xi.bytesToNumberLE)(l(b))}function S(x,b){const v=m(b),A=_(x),E=h(v,A);if(E===Va)throw new Error("invalid private or public key received");return f(E)}const j=f(e.Gu);function y(x){return S(x,j)}return{scalarMult:S,scalarMultBase:y,getSharedSecret:(x,b)=>S(x,b),getPublicKey:x=>y(x),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:j}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hash_to_ristretto255=t.hashToRistretto255=t.RistrettoPoint=t.encodeToCurve=t.hashToCurve=t.edwardsToMontgomery=t.x25519=t.ed25519ph=t.ed25519ctx=t.ed25519=t.ED25519_TORSION_SUBGROUP=void 0,t.edwardsToMontgomeryPub=L,t.edwardsToMontgomeryPriv=Y;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const e=Ot,n=Fn,r=xo,s=aw,i=wo,a=dt,l=lw,c=Ze,u=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),d=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),h=BigInt(0),f=BigInt(1),m=BigInt(2),_=BigInt(3),S=BigInt(5),j=BigInt(8);function y(ne){const J=BigInt(10),N=BigInt(20),g=BigInt(40),I=BigInt(80),T=u,P=ne*ne%T*ne%T,H=(0,a.pow2)(P,m,T)*P%T,M=(0,a.pow2)(H,f,T)*ne%T,K=(0,a.pow2)(M,S,T)*M%T,Q=(0,a.pow2)(K,J,T)*K%T,te=(0,a.pow2)(Q,N,T)*Q%T,le=(0,a.pow2)(te,g,T)*te%T,we=(0,a.pow2)(le,I,T)*le%T,_e=(0,a.pow2)(we,I,T)*le%T,be=(0,a.pow2)(_e,J,T)*K%T;return{pow_p_5_8:(0,a.pow2)(be,m,T)*ne%T,b2:P}}function x(ne){return ne[0]&=248,ne[31]&=127,ne[31]|=64,ne}function b(ne,J){const N=u,g=(0,a.mod)(J*J*J,N),I=(0,a.mod)(g*g*J,N),T=y(ne*I).pow_p_5_8;let C=(0,a.mod)(ne*g*T,N);const P=(0,a.mod)(J*C*C,N),H=C,M=(0,a.mod)(C*d,N),K=P===ne,Q=P===(0,a.mod)(-ne,N),te=P===(0,a.mod)(-ne*d,N);return K&&(C=H),(Q||te)&&(C=M),(0,a.isNegativeLE)(C,N)&&(C=(0,a.mod)(-C,N)),{isValid:K||Q,value:C}}t.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];const v=(()=>(0,a.Field)(u,void 0,!0))(),A=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:v,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:j,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:e.sha512,randomBytes:n.randomBytes,adjustScalarBytes:x,uvRatio:b}))();t.ed25519=(()=>(0,s.twistedEdwards)(A))();function E(ne,J,N){if(J.length>255)throw new Error("Context is too big");return(0,n.concatBytes)((0,n.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([N?1:0,J.length]),J,ne)}t.ed25519ctx=(()=>(0,s.twistedEdwards)({...A,domain:E}))(),t.ed25519ph=(()=>(0,s.twistedEdwards)(Object.assign({},A,{domain:E,prehash:e.sha512})))(),t.x25519=(()=>(0,l.montgomery)({P:u,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:ne=>{const J=u,{pow_p_5_8:N,b2:g}=y(ne);return(0,a.mod)((0,a.pow2)(N,_,J)*g,J)},adjustScalarBytes:x,randomBytes:n.randomBytes}))();function L(ne){const{y:J}=t.ed25519.ExtendedPoint.fromHex(ne),N=BigInt(1);return v.toBytes(v.create((N+J)*v.inv(N-J)))}t.edwardsToMontgomery=L;function Y(ne){const J=A.hash(ne.subarray(0,32));return A.adjustScalarBytes(J).subarray(0,32)}const ee=(()=>(v.ORDER+_)/j)(),U=(()=>v.pow(m,ee))(),G=(()=>v.sqrt(v.neg(v.ONE)))();function ae(ne){const J=(v.ORDER-S)/j,N=BigInt(486662);let g=v.sqr(ne);g=v.mul(g,m);let I=v.add(g,v.ONE),T=v.neg(N),C=v.sqr(I),P=v.mul(C,I),H=v.mul(g,N);H=v.mul(H,T),H=v.add(H,C),H=v.mul(H,T);let M=v.sqr(P);C=v.sqr(M),M=v.mul(M,P),M=v.mul(M,H),C=v.mul(C,M);let K=v.pow(C,J);K=v.mul(K,M);let Q=v.mul(K,G);C=v.sqr(K),C=v.mul(C,P);let te=v.eql(C,H),le=v.cmov(Q,K,te),we=v.mul(T,g),_e=v.mul(K,ne);_e=v.mul(_e,U);let be=v.mul(_e,G),Ie=v.mul(H,g);C=v.sqr(_e),C=v.mul(C,P);let He=v.eql(C,Ie),O=v.cmov(be,_e,He);C=v.sqr(le),C=v.mul(C,P);let p=v.eql(C,H),w=v.cmov(we,T,p),W=v.cmov(O,le,p),oe=v.isOdd(W);return W=v.cmov(W,v.neg(W),p!==oe),{xMn:w,xMd:I,yMn:W,yMd:f}}const he=(()=>(0,a.FpSqrtEven)(v,v.neg(BigInt(486664))))();function xe(ne){const{xMn:J,xMd:N,yMn:g,yMd:I}=ae(ne);let T=v.mul(J,I);T=v.mul(T,he);let C=v.mul(N,g),P=v.sub(J,N),H=v.add(J,N),M=v.mul(C,H),K=v.eql(M,v.ZERO);T=v.cmov(T,v.ZERO,K),C=v.cmov(C,v.ONE,K),P=v.cmov(P,v.ONE,K),H=v.cmov(H,v.ONE,K);const Q=v.invertBatch([C,H]);return{x:v.mul(T,Q[0]),y:v.mul(P,Q[1])}}const de=(()=>(0,i.createHasher)(t.ed25519.ExtendedPoint,ne=>xe(ne[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:v.ORDER,m:1,k:128,expand:"xmd",hash:e.sha512}))();t.hashToCurve=(()=>de.hashToCurve)(),t.encodeToCurve=(()=>de.encodeToCurve)();function $(ne){if(!(ne instanceof Z))throw new Error("RistrettoPoint expected")}const re=d,F=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),k=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),R=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),D=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),V=ne=>b(f,ne),se=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),X=ne=>t.ed25519.CURVE.Fp.create((0,c.bytesToNumberLE)(ne)&se);function q(ne){const{d:J}=t.ed25519.CURVE,N=t.ed25519.CURVE.Fp.ORDER,g=t.ed25519.CURVE.Fp.create,I=g(re*ne*ne),T=g((I+f)*R);let C=BigInt(-1);const P=g((C-J*I)*g(I+J));let{isValid:H,value:M}=b(T,P),K=g(M*ne);(0,a.isNegativeLE)(K,N)||(K=g(-K)),H||(M=K),H||(C=I);const Q=g(C*(I-f)*D-P),te=M*M,le=g((M+M)*P),we=g(Q*F),_e=g(f-te),be=g(f+te);return new t.ed25519.ExtendedPoint(g(le*be),g(_e*we),g(we*be),g(le*_e))}class Z{constructor(J){this.ep=J}static fromAffine(J){return new Z(t.ed25519.ExtendedPoint.fromAffine(J))}static hashToCurve(J){J=(0,c.ensureBytes)("ristrettoHash",J,64);const N=X(J.slice(0,32)),g=q(N),I=X(J.slice(32,64)),T=q(I);return new Z(g.add(T))}static fromHex(J){J=(0,c.ensureBytes)("ristrettoHex",J,32);const{a:N,d:g}=t.ed25519.CURVE,I=t.ed25519.CURVE.Fp.ORDER,T=t.ed25519.CURVE.Fp.create,C="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",P=X(J);if(!(0,c.equalBytes)((0,c.numberToBytesLE)(P,32),J)||(0,a.isNegativeLE)(P,I))throw new Error(C);const H=T(P*P),M=T(f+N*H),K=T(f-N*H),Q=T(M*M),te=T(K*K),le=T(N*g*Q-te),{isValid:we,value:_e}=V(T(le*te)),be=T(_e*K),Ie=T(_e*be*le);let He=T((P+P)*be);(0,a.isNegativeLE)(He,I)&&(He=T(-He));const O=T(M*Ie),p=T(He*O);if(!we||(0,a.isNegativeLE)(p,I)||O===h)throw new Error(C);return new Z(new t.ed25519.ExtendedPoint(He,O,f,p))}static msm(J,N){const g=(0,a.Field)(t.ed25519.CURVE.n,t.ed25519.CURVE.nBitLength);return(0,r.pippenger)(Z,g,J,N)}toRawBytes(){let{ex:J,ey:N,ez:g,et:I}=this.ep;const T=t.ed25519.CURVE.Fp.ORDER,C=t.ed25519.CURVE.Fp.create,P=C(C(g+N)*C(g-N)),H=C(J*N),M=C(H*H),{value:K}=V(C(P*M)),Q=C(K*P),te=C(K*H),le=C(Q*te*I);let we;if((0,a.isNegativeLE)(I*le,T)){let be=C(N*re),Ie=C(J*re);J=be,N=Ie,we=C(Q*k)}else we=te;(0,a.isNegativeLE)(J*le,T)&&(N=C(-N));let _e=C((g-N)*we);return(0,a.isNegativeLE)(_e,T)&&(_e=C(-_e)),(0,c.numberToBytesLE)(_e,32)}toHex(){return(0,c.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals(J){$(J);const{ex:N,ey:g}=this.ep,{ex:I,ey:T}=J.ep,C=t.ed25519.CURVE.Fp.create,P=C(N*T)===C(g*I),H=C(g*T)===C(N*I);return P||H}add(J){return $(J),new Z(this.ep.add(J.ep))}subtract(J){return $(J),new Z(this.ep.subtract(J.ep))}multiply(J){return new Z(this.ep.multiply(J))}multiplyUnsafe(J){return new Z(this.ep.multiplyUnsafe(J))}double(){return new Z(this.ep.double())}negate(){return new Z(this.ep.negate())}}t.RistrettoPoint=(()=>(Z.BASE||(Z.BASE=new Z(t.ed25519.ExtendedPoint.BASE)),Z.ZERO||(Z.ZERO=new Z(t.ed25519.ExtendedPoint.ZERO)),Z))();const ue=(ne,J)=>{const N=J.DST,g=typeof N=="string"?(0,n.utf8ToBytes)(N):N,I=(0,i.expand_message_xmd)(ne,g,64,e.sha512);return Z.hashToCurve(I)};t.hashToRistretto255=ue,t.hash_to_ristretto255=t.hashToRistretto255})(L2);var M2=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ow,"__esModule",{value:!0});const V0=L2,z0=at,H0=M2(od),TB=M2(nc),y1="ED",AB={deriveKeypair(t){const e=TB.default.half(t),n=y1+(0,z0.bytesToHex)(e),r=y1+(0,z0.bytesToHex)(V0.ed25519.getPublicKey(e));return{privateKey:n,publicKey:r}},sign(t,e){return H0.default.ok(t instanceof Uint8Array,"message must be array of octets"),H0.default.ok(e.length===66,"private key must be 33 bytes including prefix"),(0,z0.bytesToHex)(V0.ed25519.sign(t,e.slice(2)))},verify(t,e,n){return H0.default.ok(n.length===66,"public key must be 33 bytes including prefix"),V0.ed25519.verify(e,t,n.slice(2),{zip215:!1})}};ow.default=AB;(function(t){var e=ge&&ge.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeSeed=t.deriveNodeAddress=t.deriveAddress=t.verify=t.sign=t.deriveKeypair=t.generateSeed=void 0;const n=Un;Object.defineProperty(t,"decodeSeed",{enumerable:!0,get:function(){return n.decodeSeed}});const r=Ap,s=Ju,i=at,a=ga,l=e(nc),c=e(od),u=Xi,d=e(iw),h=e(ow);function f(A){return{"ecdsa-secp256k1":d.default,ed25519:h.default}[A]}function m(A={}){c.default.ok(!A.entropy||A.entropy.length>=16,"entropy too short");const E=A.entropy?A.entropy.slice(0,16):(0,i.randomBytes)(16),L=A.algorithm==="ed25519"?"ed25519":"secp256k1";return(0,n.encodeSeed)(E,L)}t.generateSeed=m;function _(A,E){var L;const Y=(0,n.decodeSeed)(A),U=((L=E==null?void 0:E.algorithm)!==null&&L!==void 0?L:Y.type)==="ed25519"?"ed25519":"ecdsa-secp256k1",G=f(U),ae=G.deriveKeypair(Y.bytes,E),he=l.default.half("This test message should verify."),xe=G.sign(he,ae.privateKey);if(!G.verify(he,xe,ae.publicKey))throw new Error("derived keypair did not generate verifiable signature");return ae}t.deriveKeypair=_;function S(A,E){const L=(0,u.getAlgorithmFromPrivateKey)(E);return f(L).sign((0,i.hexToBytes)(A),E)}t.sign=S;function j(A,E,L){const Y=(0,u.getAlgorithmFromPublicKey)(L);return f(Y).verify((0,i.hexToBytes)(A),E,L)}t.verify=j;function y(A){return(0,r.ripemd160)((0,s.sha256)(A))}function x(A){return(0,n.encodeAccountID)(y(A))}function b(A){return x((0,i.hexToBytes)(A))}t.deriveAddress=b;function v(A){const E=(0,n.decodeNodePublic)(A),L=(0,a.accountPublicFromPublicGenerator)(E);return x(L)}t.deriveNodeAddress=v})(vo);var D2={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.deriveXAddress=t.deriveAddress=t.deriveKeypair=void 0;const e=Un,n=vo;Object.defineProperty(t,"deriveKeypair",{enumerable:!0,get:function(){return n.deriveKeypair}}),Object.defineProperty(t,"deriveAddress",{enumerable:!0,get:function(){return n.deriveAddress}});function r(s){const i=(0,n.deriveAddress)(s.publicKey);return(0,e.classicAddressToXAddress)(i,s.tag,s.test)}t.deriveXAddress=r})(D2);var cw={},ya={};Object.defineProperty(ya,"__esModule",{value:!0});ya.omitBy=ya.groupBy=void 0;function CB(t,e){function n(r,s,i,a){const l=e(s,i,a)||0,c=r[l]||[];return c.push(s),r[l]=c,r}return t.reduce(n,{})}ya.groupBy=CB;function jB(t,e){return Object.keys(t).filter(s=>!e(t[s],s)).reduce((s,i)=>(s[i]=t[i],s),{})}ya.omitBy=jB;var Qs={},kB=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qs,"__esModule",{value:!0});Qs.xrpToDrops=Qs.dropsToXrp=void 0;const nu=kB($n),Qo=je,B2=1e6,OB=6,lv=10,F2=/^-?[0-9.]+$/u;function IB(t){const e=new nu.default(t).toString(lv);if(typeof t=="string"&&e==="NaN")throw new Qo.ValidationError(`dropsToXrp: invalid value '${t}', should be a BigNumber or string-encoded number.`);if(e.includes("."))throw new Qo.ValidationError(`dropsToXrp: value '${e}' has too many decimal places.`);if(!F2.exec(e))throw new Qo.ValidationError(`dropsToXrp: failed sanity check - value '${e}', does not match (^-?[0-9]+$).`);return new nu.default(e).dividedBy(B2).toNumber()}Qs.dropsToXrp=IB;function PB(t){const e=new nu.default(t).toString(lv);if(typeof t=="string"&&e==="NaN")throw new Qo.ValidationError(`xrpToDrops: invalid value '${t}', should be a BigNumber or string-encoded number.`);if(!F2.exec(e))throw new Qo.ValidationError(`xrpToDrops: failed sanity check - value '${e}', does not match (^-?[0-9.]+$).`);const n=e.split(".");if(n.length>2)throw new Qo.ValidationError(`xrpToDrops: failed sanity check - value '${e}' has too many decimal points.`);if((n[1]||"0").length>OB)throw new Qo.ValidationError(`xrpToDrops: value '${e}' has too many decimal places.`);return new nu.default(e).times(B2).integerValue(nu.default.ROUND_FLOOR).toString(lv)}Qs.xrpToDrops=PB;var RB=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(cw,"__esModule",{value:!0});const cv=RB($n),LB=ya,MB=Qs;function DB(t){const e=Object.keys(t)[0],n=t[e];return Object.assign(Object.assign({},n),{NodeType:e,LedgerEntryType:n.LedgerEntryType,LedgerIndex:n.LedgerIndex,NewFields:n.NewFields,FinalFields:n.FinalFields,PreviousFields:n.PreviousFields})}function BB(t){return t.AffectedNodes.length===0?[]:t.AffectedNodes.map(DB)}function FB(t){const e=(0,LB.groupBy)(t,n=>n.account);return Object.entries(e).map(([n,r])=>({account:n,balances:r.map(s=>s.balance)}))}function W0(t){return typeof t=="string"?new cv.default(t):new cv.default(t.value)}function U2(t){var e,n,r;let s=null;return!((e=t.NewFields)===null||e===void 0)&&e.Balance?s=W0(t.NewFields.Balance):!((n=t.PreviousFields)===null||n===void 0)&&n.Balance&&(!((r=t.FinalFields)===null||r===void 0)&&r.Balance)&&(s=W0(t.FinalFields.Balance).minus(W0(t.PreviousFields.Balance))),s===null||s.isZero()?null:s}function UB(t){var e,n,r;const s=U2(t);return s===null?null:{account:(n=(e=t.FinalFields)===null||e===void 0?void 0:e.Account)!==null&&n!==void 0?n:(r=t.NewFields)===null||r===void 0?void 0:r.Account,balance:{currency:"XRP",value:(0,MB.dropsToXrp)(s).toString()}}}function $B(t){const e=new cv.default(t.balance.value).negated();return{account:t.balance.issuer,balance:{issuer:t.account,currency:t.balance.currency,value:e.toString()}}}function VB(t){var e,n;const r=U2(t);if(r===null)return null;const s=t.NewFields==null?t.FinalFields:t.NewFields,i={account:(e=s==null?void 0:s.LowLimit)===null||e===void 0?void 0:e.issuer,balance:{issuer:(n=s==null?void 0:s.HighLimit)===null||n===void 0?void 0:n.issuer,currency:(s==null?void 0:s.Balance).currency,value:r.toString()}};return[i,$B(i)]}function zB(t){const e=BB(t).map(n=>{if(n.LedgerEntryType==="AccountRoot"){const r=UB(n);return r==null?[]:[r]}if(n.LedgerEntryType==="RippleState"){const r=VB(n);return r??[]}return[]});return FB(e.flat())}cw.default=zB;var uw={},bs={};Object.defineProperty(bs,"__esModule",{value:!0});bs.isDeletedNode=bs.isModifiedNode=bs.isCreatedNode=void 0;function HB(t){return Object.prototype.hasOwnProperty.call(t,"CreatedNode")}bs.isCreatedNode=HB;function WB(t){return Object.prototype.hasOwnProperty.call(t,"ModifiedNode")}bs.isModifiedNode=WB;function XB(t){return Object.prototype.hasOwnProperty.call(t,"DeletedNode")}bs.isDeletedNode=XB;Object.defineProperty(uw,"__esModule",{value:!0});const KB=Nr,X0=bs;function qB(t){return typeof t=="string"?(0,KB.decode)(t):t}function GB(t){if(typeof t!="string"&&(t==null?void 0:t.AffectedNodes)===void 0)throw new TypeError(`Unable to parse the parameter given to getNFTokenID.
      'meta' must be the metadata from an NFTokenMint transaction. Received ${JSON.stringify(t)} instead.`);const n=qB(t).AffectedNodes.filter(a=>{var l;return(0,X0.isCreatedNode)(a)?a.CreatedNode.LedgerEntryType==="NFTokenPage":(0,X0.isModifiedNode)(a)?a.ModifiedNode.LedgerEntryType==="NFTokenPage"&&!!(!((l=a.ModifiedNode.PreviousFields)===null||l===void 0)&&l.NFTokens):!1}),r=new Set(n.flatMap(a=>{var l;return((0,X0.isModifiedNode)(a)?(l=a.ModifiedNode.PreviousFields)===null||l===void 0?void 0:l.NFTokens:[]).map(u=>u.NFToken.NFTokenID)}).filter(a=>!!a));return n.flatMap(a=>{var l,c,u,d,h,f;return((f=(u=(c=(l=a.ModifiedNode)===null||l===void 0?void 0:l.FinalFields)===null||c===void 0?void 0:c.NFTokens)!==null&&u!==void 0?u:(h=(d=a.CreatedNode)===null||d===void 0?void 0:d.NewFields)===null||h===void 0?void 0:h.NFTokens)!==null&&f!==void 0?f:[]).map(m=>m.NFToken.NFTokenID)}).filter(a=>!!a).find(a=>!r.has(a))}uw.default=GB;var dw={};Object.defineProperty(dw,"__esModule",{value:!0});const YB=Nr,JB=bs;function QB(t){return typeof t=="string"?(0,YB.decode)(t):t}function ZB(t){if(typeof t!="string"&&(t==null?void 0:t.AffectedNodes)===void 0)throw new TypeError(`Unable to parse the parameter given to getXChainClaimID.
      'meta' must be the metadata from an XChainCreateClaimID transaction. Received ${JSON.stringify(t)} instead.`);const e=QB(t);if(!e.TransactionResult)throw new TypeError("Cannot get XChainClaimID from un-validated transaction");return e.TransactionResult!=="tesSUCCESS"?void 0:e.AffectedNodes.find(r=>(0,JB.isCreatedNode)(r)&&r.CreatedNode.LedgerEntryType==="XChainOwnedClaimID").CreatedNode.NewFields.XChainClaimID}dw.default=ZB;var $2={},xr={},rc={};Object.defineProperty(rc,"__esModule",{value:!0});var uv;(function(t){t[t.TRANSACTION_ID=1415073280]="TRANSACTION_ID",t[t.TRANSACTION_NODE=1397638144]="TRANSACTION_NODE",t[t.INNER_NODE=1296649728]="INNER_NODE",t[t.LEAF_NODE=1296846336]="LEAF_NODE",t[t.TRANSACTION_SIGN=1398036480]="TRANSACTION_SIGN",t[t.TRANSACTION_SIGN_TESTNET=1937012736]="TRANSACTION_SIGN_TESTNET",t[t.TRANSACTION_MULTISIGN=1397576704]="TRANSACTION_MULTISIGN",t[t.LEDGER=1280791040]="LEDGER"})(uv||(uv={}));rc.default=uv;var sc={};Object.defineProperty(sc,"__esModule",{value:!0});const eF=tc,v1=at,tF=32;function nF(t){return(0,v1.bytesToHex)((0,eF.sha512)((0,v1.hexToBytes)(t)).slice(0,tF))}sc.default=nF;var V2={},hw={},Mp={},lo={};Object.defineProperty(lo,"__esModule",{value:!0});lo.Node=lo.NodeType=void 0;var x1;(function(t){t[t.INNER=1]="INNER",t[t.TRANSACTION_NO_METADATA=2]="TRANSACTION_NO_METADATA",t[t.TRANSACTION_METADATA=3]="TRANSACTION_METADATA",t[t.ACCOUNT_STATE=4]="ACCOUNT_STATE"})(x1||(lo.NodeType=x1={}));class rF{}lo.Node=rF;var z2=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Mp,"__esModule",{value:!0});const w1=je,K0=z2(rc),q0=z2(sc),Yd=lo,G0=16;class sF extends Yd.Node{constructor(e,n,r){super(),this.tag=e,this.type=r,this.data=n}get hash(){switch(this.type){case Yd.NodeType.ACCOUNT_STATE:{const e=K0.default.LEAF_NODE.toString(G0);return(0,q0.default)(e+this.data+this.tag)}case Yd.NodeType.TRANSACTION_NO_METADATA:{const e=K0.default.TRANSACTION_ID.toString(G0);return(0,q0.default)(e+this.data)}case Yd.NodeType.TRANSACTION_METADATA:{const e=K0.default.TRANSACTION_NODE.toString(G0);return(0,q0.default)(e+this.data+this.tag)}default:throw new w1.XrplError("Tried to hash a SHAMap node of unknown type.")}}addItem(e,n){throw new w1.XrplError("Cannot call addItem on a LeafNode")}}Mp.default=sF;var fw=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hw,"__esModule",{value:!0});const Y0=je,iF=fw(rc),oF=fw(sc),aF=fw(Mp),b1=lo,_1="0000000000000000000000000000000000000000000000000000000000000000",J0=15,Jd=16;class Af extends b1.Node{constructor(e=0){super(),this.leaves={},this.type=b1.NodeType.INNER,this.depth=e,this.empty=!0}get hash(){if(this.empty)return _1;let e="";for(let r=0;r<=J0;r++){const s=this.leaves[r],i=s==null?_1:s.hash;e+=i}const n=iF.default.INNER_NODE.toString(Jd);return(0,oF.default)(n+e)}addItem(e,n){const r=this.getNode(parseInt(e[this.depth],Jd));if(r===void 0){this.setNode(parseInt(e[this.depth],Jd),n);return}if(r instanceof Af)r.addItem(e,n);else if(r instanceof aF.default){if(r.tag===e)throw new Y0.XrplError("Tried to add a node to a SHAMap that was already in there.");{const s=new Af(this.depth+1);s.addItem(r.tag,r),s.addItem(e,n),this.setNode(parseInt(e[this.depth],Jd),s)}}}setNode(e,n){if(e<0||e>J0)throw new Y0.XrplError("Invalid slot: slot must be between 0-15.");this.leaves[e]=n,this.empty=!1}getNode(e){if(e<0||e>J0)throw new Y0.XrplError("Invalid slot: slot must be between 0-15.");return this.leaves[e]}}hw.default=Af;(function(t){var e=ge&&ge.__createBinding||(Object.create?function(l,c,u,d){d===void 0&&(d=u);var h=Object.getOwnPropertyDescriptor(c,u);(!h||("get"in h?!c.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(l,d,h)}:function(l,c,u,d){d===void 0&&(d=u),l[d]=c[u]}),n=ge&&ge.__exportStar||function(l,c){for(var u in l)u!=="default"&&!Object.prototype.hasOwnProperty.call(c,u)&&e(c,l,u)},r=ge&&ge.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(hw),i=r(Mp);class a{constructor(){this.root=new s.default(0)}get hash(){return this.root.hash}addItem(c,u,d){this.root.addItem(c,new i.default(c,u,d))}}n(lo,t),t.default=a})(V2);var lF=ge&&ge.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var s=Object.getOwnPropertyDescriptor(e,n);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,s)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),cF=ge&&ge.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),uF=ge&&ge.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&lF(e,t,n);return cF(e,t),e},pw=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xr,"__esModule",{value:!0});xr.hashStateTree=xr.hashTxTree=xr.hashLedgerHeader=xr.hashSignedTx=void 0;const Q0=at,dF=pw($n),Ru=Nr,Fl=je,H2=pw(rc),W2=pw(sc),Cf=uF(V2),mw=16;function Ec(t,e){return Number(t).toString(mw).padStart(e*2,"0")}function hF(t,e){return new dF.default(t).toString(mw).padStart(e*2,"0")}function E1(t){const e=t.length/2;if(e<=192)return(0,Q0.bytesToHex)([e])+t;if(e<=12480){const n=e-193;return(0,Q0.bytesToHex)([193+(n>>>8),n&255])+t}if(e<=918744){const n=e-12481;return(0,Q0.bytesToHex)([241+(n>>>16),n>>>8&255,n&255])+t}throw new Fl.XrplError("Variable integer overflow.")}function X2(t){let e,n;if(typeof t=="string"?(e=t,n=(0,Ru.decode)(t)):(e=(0,Ru.encode)(t),n=t),n.TxnSignature===void 0&&n.Signers===void 0&&n.SigningPubKey===void 0)throw new Fl.ValidationError("The transaction must be signed to hash it.");const r=H2.default.TRANSACTION_ID.toString(16).toUpperCase();return(0,W2.default)(r.concat(e))}xr.hashSignedTx=X2;function K2(t){const n=H2.default.LEDGER.toString(mw).toUpperCase()+Ec(Number(t.ledger_index),4)+hF(t.total_coins,8)+t.parent_hash+t.transaction_hash+t.account_hash+Ec(t.parent_close_time,4)+Ec(t.close_time,4)+Ec(t.close_time_resolution,1)+Ec(t.close_flags,1);return(0,W2.default)(n)}xr.hashLedgerHeader=K2;function q2(t){var e;const n=new Cf.default;for(const r of t){const s=(0,Ru.encode)(r),i=(0,Ru.encode)((e=r.metaData)!==null&&e!==void 0?e:{}),a=X2(s),l=E1(s)+E1(i);n.addItem(a,l,Cf.NodeType.TRANSACTION_METADATA)}return n.hash}xr.hashTxTree=q2;function G2(t){const e=new Cf.default;return t.forEach(n=>{const r=(0,Ru.encode)(n);e.addItem(n.index,r,Cf.NodeType.ACCOUNT_STATE)}),e.hash}xr.hashStateTree=G2;function fF(t,e){const{transaction_hash:n}=t;if(!e.computeTreeHashes)return n;if(t.transactions==null)throw new Fl.ValidationError("transactions is missing from the ledger");const r=q2(t.transactions);if(n!==r)throw new Fl.ValidationError("transactionHash in header does not match computed hash of transactions",{transactionHashInHeader:n,computedHashOfTransactions:r});return r}function pF(t,e){const{account_hash:n}=t;if(!e.computeTreeHashes)return n;if(t.accountState==null)throw new Fl.ValidationError("accountState is missing from the ledger");const r=G2(t.accountState);if(n!==r)throw new Fl.ValidationError("stateHash in header does not match computed hash of state");return r}function mF(t,e={}){const n={transaction_hash:fF(t,e),account_hash:pF(t,e)};return K2(Object.assign(Object.assign({},t),n))}xr.default=mF;var gw={};Object.defineProperty(gw,"__esModule",{value:!0});const gF={account:"a",dirNode:"d",generatorMap:"g",rippleState:"r",offer:"o",ownerDir:"O",bookDir:"B",contract:"c",skipList:"s",escrow:"u",amendment:"f",feeSettings:"e",ticket:"T",signerList:"S",paychan:"x",check:"C",depositPreauth:"p"};gw.default=gF;(function(t){var e=ge&&ge.__createBinding||(Object.create?function(ee,U,G,ae){ae===void 0&&(ae=G);var he=Object.getOwnPropertyDescriptor(U,G);(!he||("get"in he?!U.__esModule:he.writable||he.configurable))&&(he={enumerable:!0,get:function(){return U[G]}}),Object.defineProperty(ee,ae,he)}:function(ee,U,G,ae){ae===void 0&&(ae=G),ee[ae]=U[G]}),n=ge&&ge.__setModuleDefault||(Object.create?function(ee,U){Object.defineProperty(ee,"default",{enumerable:!0,value:U})}:function(ee,U){ee.default=U}),r=ge&&ge.__importStar||function(ee){if(ee&&ee.__esModule)return ee;var U={};if(ee!=null)for(var G in ee)G!=="default"&&Object.prototype.hasOwnProperty.call(ee,G)&&e(U,ee,G);return n(U,ee),U},s=ge&&ge.__importDefault||function(ee){return ee&&ee.__esModule?ee:{default:ee}};Object.defineProperty(t,"__esModule",{value:!0}),t.hashTxTree=t.hashStateTree=t.hashLedger=t.hashSignedTx=t.hashLedgerHeader=t.hashPaymentChannel=t.hashEscrow=t.hashTrustline=t.hashOfferId=t.hashSignerListId=t.hashAccountRoot=t.hashTx=void 0;const i=at,a=s($n),l=Un,c=r(xr);t.hashLedger=c.default,Object.defineProperty(t,"hashLedgerHeader",{enumerable:!0,get:function(){return c.hashLedgerHeader}}),Object.defineProperty(t,"hashSignedTx",{enumerable:!0,get:function(){return c.hashSignedTx}}),Object.defineProperty(t,"hashTxTree",{enumerable:!0,get:function(){return c.hashTxTree}}),Object.defineProperty(t,"hashStateTree",{enumerable:!0,get:function(){return c.hashStateTree}});const u=s(rc),d=s(gw),h=s(sc),f=16,m=4;function _(ee){return(0,i.bytesToHex)((0,l.decodeAccountID)(ee))}function S(ee){return d.default[ee].charCodeAt(0).toString(f).padStart(4,"0")}const j=255;function y(ee){if(ee.length!==3)return ee;const U=Array(20).fill(0);return U[12]=ee.charCodeAt(0)&j,U[13]=ee.charCodeAt(1)&j,U[14]=ee.charCodeAt(2)&j,(0,i.bytesToHex)(Uint8Array.from(U))}function x(ee){const U=u.default.TRANSACTION_SIGN.toString(f).toUpperCase();return(0,h.default)(U+ee)}t.hashTx=x;function b(ee){return(0,h.default)(S("account")+_(ee))}t.hashAccountRoot=b;function v(ee){return(0,h.default)(`${S("signerList")+_(ee)}00000000`)}t.hashSignerListId=v;function A(ee,U){const G=d.default.offer.charCodeAt(0).toString(f).padStart(2,"0"),ae=U.toString(f).padStart(8,"0"),he=`00${G}`;return(0,h.default)(he+_(ee)+ae)}t.hashOfferId=A;function E(ee,U,G){const ae=_(ee),he=_(U),xe=new a.default(ae,16).isGreaterThan(new a.default(he,16)),de=xe?he:ae,$=xe?ae:he,re=S("rippleState");return(0,h.default)(re+de+$+y(G))}t.hashTrustline=E;function L(ee,U){return(0,h.default)(S("escrow")+_(ee)+U.toString(f).padStart(m*2,"0"))}t.hashEscrow=L;function Y(ee,U,G){return(0,h.default)(S("paychan")+_(ee)+_(U)+G.toString(f).padStart(m*2,"0"))}t.hashPaymentChannel=Y})($2);var yw={},yF=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yw,"__esModule",{value:!0});const vF=at,Fc=yF($n),xF=Un,wF=je;function bF(t,e){const i=new Fc.default(384160001).multipliedBy(e).modulo(4294967296).plus(2459).modulo(4294967296).toNumber();return(t^i)>>>0}function _F(t){if(t.length!==64)throw new wF.XrplError(`Attempting to parse a nftokenID with length ${t.length}
    , but expected a token with length 64`);const n=new Fc.default(t.substring(48,56),16).toNumber(),r=new Fc.default(t.substring(56,64),16).toNumber();return{NFTokenID:t,Flags:new Fc.default(t.substring(0,4),16).toNumber(),TransferFee:new Fc.default(t.substring(4,8),16).toNumber(),Issuer:(0,xF.encodeAccountID)((0,vF.hexToBytes)(t.substring(8,48))),Taxon:bF(n,r),Sequence:r}}yw.default=_F;var In={},EF=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(In,"__esModule",{value:!0});In.percentToQuality=In.transferRateToDecimal=In.qualityToDecimal=In.decimalToQuality=In.percentToTransferRate=In.decimalToTransferRate=void 0;const ad=EF($n),br=je,ld=10,Fs="1000000000",SF="2000000000";function Y2(t){if(!t.endsWith("%"))throw new br.ValidationError(`Value ${t} must end with %`);const e=t.split("%").filter(n=>n!=="");if(e.length!==1)throw new br.ValidationError(`Value ${t} contains too many % signs`);return new ad.default(e[0]).dividedBy("100").toString(ld)}function J2(t){const e=new ad.default(t).times(Fs).plus(Fs);if(e.isLessThan(Fs)||e.isGreaterThan(SF))throw new br.ValidationError("Decimal value must be between 0 and 1.00.");const n=e.toString(ld);if(n===Fs)return 0;if(n==="NaN")throw new br.ValidationError("Value is not a number");if(n.includes("."))throw new br.ValidationError("Decimal exceeds maximum precision.");return Number(n)}In.decimalToTransferRate=J2;function NF(t){return J2(Y2(t))}In.percentToTransferRate=NF;function Q2(t){const n=new ad.default(t).times(Fs).toString(ld);if(n==="NaN")throw new br.ValidationError("Value is not a number");if(n.includes("-"))throw new br.ValidationError("Cannot have negative Quality");if(n===Fs)return 0;if(n.includes("."))throw new br.ValidationError("Decimal exceeds maximum precision.");return Number(n)}In.decimalToQuality=Q2;function TF(t){if(!Number.isInteger(t))throw new br.ValidationError("Quality must be an integer");if(t<0)throw new br.ValidationError("Negative quality not allowed");return t===0?"1":new ad.default(t).dividedBy(Fs).toString(ld)}In.qualityToDecimal=TF;function AF(t){if(!Number.isInteger(t))throw new br.ValidationError("Error decoding, transfer Rate must be an integer");if(t===0)return"0";const e=new ad.default(t).minus(Fs).dividedBy(Fs);if(e.isLessThan(0))throw new br.ValidationError("Error decoding, negative transfer rate");return e.toString(ld)}In.transferRateToDecimal=AF;function CF(t){return Q2(Y2(t))}In.percentToQuality=CF;var vw={};Object.defineProperty(vw,"__esModule",{value:!0});const jF=Nr,kF=vo,OF=Qs;function IF(t,e,n){const r=(0,jF.encodeForSigningClaim)({channel:t,amount:(0,OF.xrpToDrops)(e)});return(0,kF.sign)(r,n)}vw.default=IF;var Ul={};Object.defineProperty(Ul,"__esModule",{value:!0});Ul.convertStringToHex=Ul.convertHexToString=void 0;const Z2=at;function PF(t){return(0,Z2.stringToHex)(t)}Ul.convertStringToHex=PF;function RF(t,e="utf8"){return(0,Z2.hexToString)(t,e)}Ul.convertHexToString=RF;var ms={};Object.defineProperty(ms,"__esModule",{value:!0});ms.isoTimeToRippleTime=ms.rippleTimeToISOTime=ms.unixTimeToRippleTime=ms.rippleTimeToUnixTime=void 0;const eC=946684800;function tC(t){return(t+eC)*1e3}ms.rippleTimeToUnixTime=tC;function nC(t){return Math.round(t/1e3)-eC}ms.unixTimeToRippleTime=nC;function LF(t){return new Date(tC(t)).toISOString()}ms.rippleTimeToISOTime=LF;function MF(t){const e=typeof t=="string"?new Date(t):t;return nC(e.getTime())}ms.isoTimeToRippleTime=MF;var xw={};Object.defineProperty(xw,"__esModule",{value:!0});const DF=Nr,BF=vo,FF=Qs;function UF(t,e,n,r){const s=(0,DF.encodeForSigningClaim)({channel:t,amount:(0,FF.xrpToDrops)(e)});return(0,BF.verify)(s,n,r)}xw.default=UF;(function(t){var e=ge&&ge.__importDefault||function(U){return U&&U.__esModule?U:{default:U}};Object.defineProperty(t,"__esModule",{value:!0}),t.getXChainClaimID=t.parseNFTokenID=t.getNFTokenID=t.encodeForSigningClaim=t.encodeForSigning=t.encodeForMultiSigning=t.decode=t.encode=t.decodeXAddress=t.encodeXAddress=t.decodeAccountPublic=t.encodeAccountPublic=t.decodeNodePublic=t.encodeNodePublic=t.decodeAccountID=t.encodeAccountID=t.decodeSeed=t.encodeSeed=t.isValidClassicAddress=t.isValidXAddress=t.xAddressToClassicAddress=t.classicAddressToXAddress=t.convertHexToString=t.convertStringToHex=t.verifyPaymentChannelClaim=t.verifyKeypairSignature=t.signPaymentChannelClaim=t.deriveXAddress=t.deriveAddress=t.deriveKeypair=t.hashes=t.isValidAddress=t.isValidSecret=t.qualityToDecimal=t.transferRateToDecimal=t.decimalToTransferRate=t.percentToTransferRate=t.decimalToQuality=t.percentToQuality=t.unixTimeToRippleTime=t.rippleTimeToUnixTime=t.isoTimeToRippleTime=t.rippleTimeToISOTime=t.hasNextPage=t.xrpToDrops=t.dropsToXrp=t.getBalanceChanges=void 0;const n=Un;Object.defineProperty(t,"classicAddressToXAddress",{enumerable:!0,get:function(){return n.classicAddressToXAddress}}),Object.defineProperty(t,"decodeAccountID",{enumerable:!0,get:function(){return n.decodeAccountID}}),Object.defineProperty(t,"decodeAccountPublic",{enumerable:!0,get:function(){return n.decodeAccountPublic}}),Object.defineProperty(t,"decodeNodePublic",{enumerable:!0,get:function(){return n.decodeNodePublic}}),Object.defineProperty(t,"decodeSeed",{enumerable:!0,get:function(){return n.decodeSeed}}),Object.defineProperty(t,"decodeXAddress",{enumerable:!0,get:function(){return n.decodeXAddress}}),Object.defineProperty(t,"encodeAccountID",{enumerable:!0,get:function(){return n.encodeAccountID}}),Object.defineProperty(t,"encodeAccountPublic",{enumerable:!0,get:function(){return n.encodeAccountPublic}}),Object.defineProperty(t,"encodeNodePublic",{enumerable:!0,get:function(){return n.encodeNodePublic}}),Object.defineProperty(t,"encodeSeed",{enumerable:!0,get:function(){return n.encodeSeed}}),Object.defineProperty(t,"encodeXAddress",{enumerable:!0,get:function(){return n.encodeXAddress}}),Object.defineProperty(t,"isValidClassicAddress",{enumerable:!0,get:function(){return n.isValidClassicAddress}}),Object.defineProperty(t,"isValidXAddress",{enumerable:!0,get:function(){return n.isValidXAddress}}),Object.defineProperty(t,"xAddressToClassicAddress",{enumerable:!0,get:function(){return n.xAddressToClassicAddress}});const r=Nr,s=vo;Object.defineProperty(t,"verifyKeypairSignature",{enumerable:!0,get:function(){return s.verify}});const i=D2;Object.defineProperty(t,"deriveKeypair",{enumerable:!0,get:function(){return i.deriveKeypair}}),Object.defineProperty(t,"deriveAddress",{enumerable:!0,get:function(){return i.deriveAddress}}),Object.defineProperty(t,"deriveXAddress",{enumerable:!0,get:function(){return i.deriveXAddress}});const a=e(cw);t.getBalanceChanges=a.default;const l=e(uw);t.getNFTokenID=l.default;const c=e(dw);t.getXChainClaimID=c.default;const u=$2,d=e(yw);t.parseNFTokenID=d.default;const h=In;Object.defineProperty(t,"percentToTransferRate",{enumerable:!0,get:function(){return h.percentToTransferRate}}),Object.defineProperty(t,"decimalToTransferRate",{enumerable:!0,get:function(){return h.decimalToTransferRate}}),Object.defineProperty(t,"transferRateToDecimal",{enumerable:!0,get:function(){return h.transferRateToDecimal}}),Object.defineProperty(t,"percentToQuality",{enumerable:!0,get:function(){return h.percentToQuality}}),Object.defineProperty(t,"decimalToQuality",{enumerable:!0,get:function(){return h.decimalToQuality}}),Object.defineProperty(t,"qualityToDecimal",{enumerable:!0,get:function(){return h.qualityToDecimal}});const f=e(vw);t.signPaymentChannelClaim=f.default;const m=Ul;Object.defineProperty(t,"convertHexToString",{enumerable:!0,get:function(){return m.convertHexToString}}),Object.defineProperty(t,"convertStringToHex",{enumerable:!0,get:function(){return m.convertStringToHex}});const _=ms;Object.defineProperty(t,"rippleTimeToISOTime",{enumerable:!0,get:function(){return _.rippleTimeToISOTime}}),Object.defineProperty(t,"isoTimeToRippleTime",{enumerable:!0,get:function(){return _.isoTimeToRippleTime}}),Object.defineProperty(t,"rippleTimeToUnixTime",{enumerable:!0,get:function(){return _.rippleTimeToUnixTime}}),Object.defineProperty(t,"unixTimeToRippleTime",{enumerable:!0,get:function(){return _.unixTimeToRippleTime}});const S=e(xw);t.verifyPaymentChannelClaim=S.default;const j=Qs;Object.defineProperty(t,"xrpToDrops",{enumerable:!0,get:function(){return j.xrpToDrops}}),Object.defineProperty(t,"dropsToXrp",{enumerable:!0,get:function(){return j.dropsToXrp}});function y(U){try{return(0,i.deriveKeypair)(U),!0}catch{return!1}}t.isValidSecret=y;function x(U){return(0,r.encode)(U)}t.encode=x;function b(U){return(0,r.encodeForSigning)(U)}t.encodeForSigning=b;function v(U){return(0,r.encodeForSigningClaim)(U)}t.encodeForSigningClaim=v;function A(U,G){return(0,r.encodeForMultisigning)(U,G)}t.encodeForMultiSigning=A;function E(U){return(0,r.decode)(U)}t.decode=E;function L(U){return(0,n.isValidXAddress)(U)||(0,n.isValidClassicAddress)(U)}t.isValidAddress=L;function Y(U){return!!U.result.marker}t.hasNextPage=Y;const ee={hashSignedTx:u.hashSignedTx,hashTx:u.hashTx,hashAccountRoot:u.hashAccountRoot,hashSignerListId:u.hashSignerListId,hashOfferId:u.hashOfferId,hashTrustline:u.hashTrustline,hashTxTree:u.hashTxTree,hashStateTree:u.hashStateTree,hashLedger:u.hashLedger,hashLedgerHeader:u.hashLedgerHeader,hashEscrow:u.hashEscrow,hashPaymentChannel:u.hashPaymentChannel};t.hashes=ee})(Tp);var ww={},$F=ge&&ge.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})},VF=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ww,"__esModule",{value:!0});const Z0=VF($n),zF=je,HF=6,WF=10;function XF(t,e){var n;return $F(this,void 0,void 0,function*(){const r=e??t.feeCushion,s=(yield t.request({command:"server_info"})).result.info,i=(n=s.validated_ledger)===null||n===void 0?void 0:n.base_fee_xrp;if(i==null)throw new zF.XrplError("getFeeXrp: Could not get base_fee_xrp from server_info");const a=new Z0.default(i);s.load_factor==null&&(s.load_factor=1);let l=a.times(s.load_factor).times(r);return l=Z0.default.min(l,t.maxFeeXRP),new Z0.default(l.toFixed(HF)).toString(WF)})}ww.default=XF;var cd=ge&&ge.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})},rC=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(On,"__esModule",{value:!0});On.checkAccountDeleteBlockers=On.setLatestValidatedLedgerSequence=On.calculateFeePerTransactionType=On.setNextValidSequenceNumber=On.setValidAddresses=On.txNeedsNetworkID=void 0;const Si=rC($n),S1=Un,bw=je,N1=Tp,KF=rC(ww),qF=20,GF=1024,YF="1.11.0";function JF(t,e){if(t===e)return!0;const n=t.split("."),r=e.split("."),s=parseInt(n[0],10),i=parseInt(n[1],10),a=parseInt(r[0],10),l=parseInt(r[1],10);if(s!==a)return s<a;if(i!==l)return i<l;const c=n[2].split("-"),u=r[2].split("-"),d=parseInt(c[0],10),h=parseInt(u[0],10);return d!==h?d<h:c.length!==u.length?c.length>u.length:c.length===2?c[1][0].startsWith(u[1][0])?c[1].startsWith("b")?parseInt(c[1].slice(1),10)<parseInt(u[1].slice(1),10):parseInt(c[1].slice(2),10)<parseInt(u[1].slice(2),10):c[1]<u[1]:!1}function QF(t){return!!(t.networkID!==void 0&&t.networkID>GF&&t.buildVersion&&JF(YF,t.buildVersion))}On.txNeedsNetworkID=QF;function ZF(t){T1(t,"Account","SourceTag"),t.Destination!=null&&T1(t,"Destination","DestinationTag"),Qd(t,"Authorize"),Qd(t,"Unauthorize"),Qd(t,"Owner"),Qd(t,"RegularKey")}On.setValidAddresses=ZF;function T1(t,e,n){const{classicAccount:r,tag:s}=sC(t[e]);if(t[e]=r,s!=null&&s!==!1){if(t[n]&&t[n]!==s)throw new bw.ValidationError(`The ${n}, if present, must match the tag of the ${e} X-address`);t[n]=s}}function sC(t,e){if((0,S1.isValidXAddress)(t)){const n=(0,S1.xAddressToClassicAddress)(t);if(e!=null&&n.tag!==e)throw new bw.ValidationError("address includes a tag that does not match the tag specified in the transaction");return{classicAccount:n.classicAddress,tag:n.tag}}return{classicAccount:t,tag:e}}function Qd(t,e){const n=t[e];if(typeof n=="string"){const{classicAccount:r}=sC(n);t[e]=r}}function e5(t,e){return cd(this,void 0,void 0,function*(){const n={command:"account_info",account:e.Account,ledger_index:"current"},r=yield t.request(n);e.Sequence=r.result.account_data.Sequence})}On.setNextValidSequenceNumber=e5;function t5(t){var e;return cd(this,void 0,void 0,function*(){const r=(e=(yield t.request({command:"server_state"})).result.state.validated_ledger)===null||e===void 0?void 0:e.reserve_inc;return r==null?Promise.reject(new Error("Could not fetch Owner Reserve.")):new Si.default(r)})}function n5(t,e,n=0){return cd(this,void 0,void 0,function*(){const r=yield(0,KF.default)(t),s=(0,N1.xrpToDrops)(r);let i=new Si.default(s);if(e.TransactionType==="EscrowFinish"&&e.Fulfillment!=null){const c=Math.ceil(e.Fulfillment.length/2);i=new Si.default(A1(s,33+c/16)).dp(0,Si.default.ROUND_CEIL)}(e.TransactionType==="AccountDelete"||e.TransactionType==="AMMCreate")&&(i=yield t5(t)),n>0&&(i=Si.default.sum(i,A1(s,1+n)));const a=(0,N1.xrpToDrops)(t.maxFeeXRP),l=e.TransactionType==="AccountDelete"?i:Si.default.min(i,a);e.Fee=l.dp(0,Si.default.ROUND_CEIL).toString(10)})}On.calculateFeePerTransactionType=n5;function A1(t,e){return new Si.default(t).times(e).toString()}function r5(t,e){return cd(this,void 0,void 0,function*(){const n=yield t.getLedgerIndex();e.LastLedgerSequence=n+qF})}On.setLatestValidatedLedgerSequence=r5;function s5(t,e){return cd(this,void 0,void 0,function*(){const n={command:"account_objects",account:e.Account,ledger_index:"validated",deletion_blockers_only:!0},r=yield t.request(n);return new Promise((s,i)=>{r.result.account_objects.length>0&&i(new bw.XrplError(`Account ${e.Account} cannot be deleted; there are Escrows, PayChannels, RippleStates, or Checks associated with the account.`,r.result.account_objects)),s()})})}On.checkAccountDeleteBlockers=s5;var Dp={};Object.defineProperty(Dp,"__esModule",{value:!0});Dp.formatBalances=void 0;function i5(t){return t.map(e=>({value:e.balance,currency:e.currency,issuer:e.account}))}Dp.formatBalances=i5;var Wt={},ud={};Object.defineProperty(ud,"__esModule",{value:!0});ud.OfferFlags=void 0;var C1;(function(t){t[t.lsfPassive=65536]="lsfPassive",t[t.lsfSell=131072]="lsfSell"})(C1||(ud.OfferFlags=C1={}));var o5=ge&&ge.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})},a5=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wt,"__esModule",{value:!0});Wt.sortAndLimitOffers=Wt.separateBuySellOrders=Wt.combineOrders=Wt.extractOffers=Wt.reverseRequest=Wt.requestAllOffers=Wt.createBookOffersRequest=Wt.validateOrderbookOptions=void 0;const l5=a5($n),Sc=je,c5=ud,u5=20;function d5(t){return t.sort((e,n)=>{var r,s;const i=(r=e.quality)!==null&&r!==void 0?r:0,a=(s=n.quality)!==null&&s!==void 0?s:0;return new l5.default(i).comparedTo(a)})}const h5=new Set(["limit","ledger_index","ledger_hash","taker"]);function f5(t){for(const e of Object.keys(t))if(!h5.has(e))throw new Sc.ValidationError(`Unexpected option: ${e}`,t);if(t.limit&&typeof t.limit!="number")throw new Sc.ValidationError("limit must be a number",t.limit);if(t.ledger_index&&!(typeof t.ledger_index=="number"||typeof t.ledger_index=="string"&&["validated","closed","current"].includes(t.ledger_index)))throw new Sc.ValidationError('ledger_index must be a number or a string of "validated", "closed", or "current"',t.ledger_index);if(t.ledger_hash!==void 0&&t.ledger_hash!==null&&typeof t.ledger_hash!="string")throw new Sc.ValidationError("ledger_hash must be a string",t.ledger_hash);if(t.taker!==void 0&&typeof t.taker!="string")throw new Sc.ValidationError("taker must be a string",t.taker)}Wt.validateOrderbookOptions=f5;function p5(t,e,n){var r,s;return{command:"book_offers",taker_pays:t,taker_gets:e,ledger_index:(r=n.ledger_index)!==null&&r!==void 0?r:"validated",ledger_hash:n.ledger_hash===null?void 0:n.ledger_hash,limit:(s=n.limit)!==null&&s!==void 0?s:u5,taker:n.taker?n.taker:void 0}}Wt.createBookOffersRequest=p5;function m5(t,e){return o5(this,void 0,void 0,function*(){return(yield t.requestAll(e)).map(r=>r.result.offers)})}Wt.requestAllOffers=m5;function g5(t){return Object.assign(Object.assign({},t),{taker_pays:t.taker_gets,taker_gets:t.taker_pays})}Wt.reverseRequest=g5;function y5(t){return t.flatMap(e=>e)}Wt.extractOffers=y5;function v5(t,e){return[...t,...e]}Wt.combineOrders=v5;function x5(t){const e=[],n=[];return t.forEach(r=>{r.Flags&c5.OfferFlags.lsfSell?n.push(r):e.push(r)}),{buy:e,sell:n}}Wt.separateBuySellOrders=x5;function w5(t,e){return d5(t).slice(0,e)}Wt.sortAndLimitOffers=w5;var Oa={},iC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.HDKey=t.HARDENED_OFFSET=void 0;/*! scure-bip32 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const e=kp,n=ma,r=Wr,s=Ot,i=Sr,a=Fn,l=Cp,c=dt,u=hp,d=l.secp256k1.ProjectivePoint,h=(0,u.createBase58check)(r.sha256);function f(v){(0,i.abytes)(v);const A=v.length===0?"0":(0,a.bytesToHex)(v);return BigInt("0x"+A)}function m(v){if(typeof v!="bigint")throw new Error("bigint expected");return(0,a.hexToBytes)(v.toString(16).padStart(64,"0"))}const _=(0,a.utf8ToBytes)("Bitcoin seed"),S={private:76066276,public:76067358};t.HARDENED_OFFSET=2147483648;const j=v=>(0,n.ripemd160)((0,r.sha256)(v)),y=v=>(0,a.createView)(v).getUint32(0,!1),x=v=>{if(!Number.isSafeInteger(v)||v<0||v>2**32-1)throw new Error("invalid number, should be from 0 to 2**32-1, got "+v);const A=new Uint8Array(4);return(0,a.createView)(A).setUint32(0,v,!1),A};class b{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return y(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const A=this.privateKey;if(!A)throw new Error("No private key");return h.encode(this.serialize(this.versions.private,(0,a.concatBytes)(new Uint8Array([0]),A)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return h.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(A,E=S){if((0,i.abytes)(A),8*A.length<128||8*A.length>512)throw new Error("HDKey: seed length must be between 128 and 512 bits; 256 bits is advised, got "+A.length);const L=(0,e.hmac)(s.sha512,_,A);return new b({versions:E,chainCode:L.slice(32),privateKey:L.slice(0,32)})}static fromExtendedKey(A,E=S){const L=h.decode(A),Y=(0,a.createView)(L),ee=Y.getUint32(0,!1),U={versions:E,depth:L[4],parentFingerprint:Y.getUint32(5,!1),index:Y.getUint32(9,!1),chainCode:L.slice(13,45)},G=L.slice(45),ae=G[0]===0;if(ee!==E[ae?"private":"public"])throw new Error("Version mismatch");return ae?new b({...U,privateKey:G.slice(1)}):new b({...U,publicKey:G})}static fromJSON(A){return b.fromExtendedKey(A.xpriv)}constructor(A){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!A||typeof A!="object")throw new Error("HDKey.constructor must not be called directly");if(this.versions=A.versions||S,this.depth=A.depth||0,this.chainCode=A.chainCode||null,this.index=A.index||0,this.parentFingerprint=A.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(A.publicKey&&A.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(A.privateKey){if(!l.secp256k1.utils.isValidPrivateKey(A.privateKey))throw new Error("Invalid private key");this.privKey=typeof A.privateKey=="bigint"?A.privateKey:f(A.privateKey),this.privKeyBytes=m(this.privKey),this.pubKey=l.secp256k1.getPublicKey(A.privateKey,!0)}else if(A.publicKey)this.pubKey=d.fromHex(A.publicKey).toRawBytes(!0);else throw new Error("HDKey: no public or private key provided");this.pubHash=j(this.pubKey)}derive(A){if(!/^[mM]'?/.test(A))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(A))return this;const E=A.replace(/^[mM]'?\//,"").split("/");let L=this;for(const Y of E){const ee=/^(\d+)('?)$/.exec(Y),U=ee&&ee[1];if(!ee||ee.length!==3||typeof U!="string")throw new Error("invalid child index: "+Y);let G=+U;if(!Number.isSafeInteger(G)||G>=t.HARDENED_OFFSET)throw new Error("Invalid index");ee[2]==="'"&&(G+=t.HARDENED_OFFSET),L=L.deriveChild(G)}return L}deriveChild(A){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let E=x(A);if(A>=t.HARDENED_OFFSET){const G=this.privateKey;if(!G)throw new Error("Could not derive hardened child key");E=(0,a.concatBytes)(new Uint8Array([0]),G,E)}else E=(0,a.concatBytes)(this.pubKey,E);const L=(0,e.hmac)(s.sha512,this.chainCode,E),Y=f(L.slice(0,32)),ee=L.slice(32);if(!l.secp256k1.utils.isValidPrivateKey(Y))throw new Error("Tweak bigger than curve order");const U={versions:this.versions,chainCode:ee,depth:this.depth+1,parentFingerprint:this.fingerprint,index:A};try{if(this.privateKey){const G=(0,c.mod)(this.privKey+Y,l.secp256k1.CURVE.n);if(!l.secp256k1.utils.isValidPrivateKey(G))throw new Error("The tweak was out of range or the resulted private key is invalid");U.privateKey=G}else{const G=d.fromHex(this.pubKey).add(d.fromPrivateKey(Y));if(G.equals(d.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");U.publicKey=G.toRawBytes(!0)}return new b(U)}catch{return this.deriveChild(A+1)}}sign(A){if(!this.privateKey)throw new Error("No privateKey set!");return(0,i.abytes)(A,32),l.secp256k1.sign(A,this.privKey).toCompactRawBytes()}verify(A,E){if((0,i.abytes)(A,32),(0,i.abytes)(E,64),!this.publicKey)throw new Error("No publicKey set!");let L;try{L=l.secp256k1.Signature.fromCompact(E)}catch{return!1}return l.secp256k1.verify(L,A,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(A,E){if(!this.chainCode)throw new Error("No chainCode set");return(0,i.abytes)(E,33),(0,a.concatBytes)(x(A),new Uint8Array([this.depth]),x(this.parentFingerprint),x(this.index),this.chainCode,E)}}t.HDKey=b})(iC);var bo={},Bp={};Object.defineProperty(Bp,"__esModule",{value:!0});Bp.pbkdf2=_5;Bp.pbkdf2Async=E5;const Zd=Sr,b5=kp,Tl=Fn;function oC(t,e,n,r){(0,Zd.ahash)(t);const s=(0,Tl.checkOpts)({dkLen:32,asyncTick:10},r),{c:i,dkLen:a,asyncTick:l}=s;if((0,Zd.anumber)(i),(0,Zd.anumber)(a),(0,Zd.anumber)(l),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=(0,Tl.toBytes)(e),u=(0,Tl.toBytes)(n),d=new Uint8Array(a),h=b5.hmac.create(t,c),f=h._cloneInto().update(u);return{c:i,dkLen:a,asyncTick:l,DK:d,PRF:h,PRFSalt:f}}function aC(t,e,n,r,s){return t.destroy(),e.destroy(),r&&r.destroy(),s.fill(0),n}function _5(t,e,n,r){const{c:s,dkLen:i,DK:a,PRF:l,PRFSalt:c}=oC(t,e,n,r);let u;const d=new Uint8Array(4),h=(0,Tl.createView)(d),f=new Uint8Array(l.outputLen);for(let m=1,_=0;_<i;m++,_+=l.outputLen){const S=a.subarray(_,_+l.outputLen);h.setInt32(0,m,!1),(u=c._cloneInto(u)).update(d).digestInto(f),S.set(f.subarray(0,S.length));for(let j=1;j<s;j++){l._cloneInto(u).update(f).digestInto(f);for(let y=0;y<S.length;y++)S[y]^=f[y]}}return aC(l,c,a,u,f)}async function E5(t,e,n,r){const{c:s,dkLen:i,asyncTick:a,DK:l,PRF:c,PRFSalt:u}=oC(t,e,n,r);let d;const h=new Uint8Array(4),f=(0,Tl.createView)(h),m=new Uint8Array(c.outputLen);for(let _=1,S=0;S<i;_++,S+=c.outputLen){const j=l.subarray(S,S+c.outputLen);f.setInt32(0,_,!1),(d=u._cloneInto(d)).update(h).digestInto(m),j.set(m.subarray(0,j.length)),await(0,Tl.asyncLoop)(s-1,a,()=>{c._cloneInto(d).update(m).digestInto(m);for(let y=0;y<j.length;y++)j[y]^=m[y]})}return aC(c,u,l,d,m)}Object.defineProperty(bo,"__esModule",{value:!0});bo.generateMnemonic=A5;bo.mnemonicToEntropy=pC;bo.entropyToMnemonic=mC;bo.validateMnemonic=j5;bo.mnemonicToSeed=k5;bo.mnemonicToSeedSync=O5;/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const lC=Sr,cC=Bp,S5=Wr,uC=Ot,N5=Fn,eh=hp,T5=t=>t[0]==="あいこくしん";function dC(t){if(typeof t!="string")throw new TypeError("invalid mnemonic type: "+typeof t);return t.normalize("NFKD")}function _w(t){const e=dC(t),n=e.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:e,words:n}}function hC(t){(0,lC.abytes)(t,16,20,24,28,32)}function A5(t,e=128){if((0,lC.anumber)(e),e%32!==0||e>256)throw new TypeError("Invalid entropy");return mC((0,N5.randomBytes)(e/8),t)}const C5=t=>{const e=8-t.length/4;return new Uint8Array([(0,S5.sha256)(t)[0]>>e<<e])};function fC(t){if(!Array.isArray(t)||t.length!==2048||typeof t[0]!="string")throw new Error("Wordlist: expected array of 2048 strings");return t.forEach(e=>{if(typeof e!="string")throw new Error("wordlist: non-string element: "+e)}),eh.utils.chain(eh.utils.checksum(1,C5),eh.utils.radix2(11,!0),eh.utils.alphabet(t))}function pC(t,e){const{words:n}=_w(t),r=fC(e).decode(n);return hC(r),r}function mC(t,e){return hC(t),fC(e).encode(t).join(T5(e)?"　":" ")}function j5(t,e){try{pC(t,e)}catch{return!1}return!0}const gC=t=>dC("mnemonic"+t);function k5(t,e=""){return(0,cC.pbkdf2Async)(uC.sha512,_w(t).nfkd,gC(e),{c:2048,dkLen:64})}function O5(t,e=""){return(0,cC.pbkdf2)(uC.sha512,_w(t).nfkd,gC(e),{c:2048,dkLen:64})}var Fp={};Object.defineProperty(Fp,"__esModule",{value:!0});Fp.wordlist=void 0;Fp.wordlist=`abandon
ability
able
about
above
absent
absorb
abstract
absurd
abuse
access
accident
account
accuse
achieve
acid
acoustic
acquire
across
act
action
actor
actress
actual
adapt
add
addict
address
adjust
admit
adult
advance
advice
aerobic
affair
afford
afraid
again
age
agent
agree
ahead
aim
air
airport
aisle
alarm
album
alcohol
alert
alien
all
alley
allow
almost
alone
alpha
already
also
alter
always
amateur
amazing
among
amount
amused
analyst
anchor
ancient
anger
angle
angry
animal
ankle
announce
annual
another
answer
antenna
antique
anxiety
any
apart
apology
appear
apple
approve
april
arch
arctic
area
arena
argue
arm
armed
armor
army
around
arrange
arrest
arrive
arrow
art
artefact
artist
artwork
ask
aspect
assault
asset
assist
assume
asthma
athlete
atom
attack
attend
attitude
attract
auction
audit
august
aunt
author
auto
autumn
average
avocado
avoid
awake
aware
away
awesome
awful
awkward
axis
baby
bachelor
bacon
badge
bag
balance
balcony
ball
bamboo
banana
banner
bar
barely
bargain
barrel
base
basic
basket
battle
beach
bean
beauty
because
become
beef
before
begin
behave
behind
believe
below
belt
bench
benefit
best
betray
better
between
beyond
bicycle
bid
bike
bind
biology
bird
birth
bitter
black
blade
blame
blanket
blast
bleak
bless
blind
blood
blossom
blouse
blue
blur
blush
board
boat
body
boil
bomb
bone
bonus
book
boost
border
boring
borrow
boss
bottom
bounce
box
boy
bracket
brain
brand
brass
brave
bread
breeze
brick
bridge
brief
bright
bring
brisk
broccoli
broken
bronze
broom
brother
brown
brush
bubble
buddy
budget
buffalo
build
bulb
bulk
bullet
bundle
bunker
burden
burger
burst
bus
business
busy
butter
buyer
buzz
cabbage
cabin
cable
cactus
cage
cake
call
calm
camera
camp
can
canal
cancel
candy
cannon
canoe
canvas
canyon
capable
capital
captain
car
carbon
card
cargo
carpet
carry
cart
case
cash
casino
castle
casual
cat
catalog
catch
category
cattle
caught
cause
caution
cave
ceiling
celery
cement
census
century
cereal
certain
chair
chalk
champion
change
chaos
chapter
charge
chase
chat
cheap
check
cheese
chef
cherry
chest
chicken
chief
child
chimney
choice
choose
chronic
chuckle
chunk
churn
cigar
cinnamon
circle
citizen
city
civil
claim
clap
clarify
claw
clay
clean
clerk
clever
click
client
cliff
climb
clinic
clip
clock
clog
close
cloth
cloud
clown
club
clump
cluster
clutch
coach
coast
coconut
code
coffee
coil
coin
collect
color
column
combine
come
comfort
comic
common
company
concert
conduct
confirm
congress
connect
consider
control
convince
cook
cool
copper
copy
coral
core
corn
correct
cost
cotton
couch
country
couple
course
cousin
cover
coyote
crack
cradle
craft
cram
crane
crash
crater
crawl
crazy
cream
credit
creek
crew
cricket
crime
crisp
critic
crop
cross
crouch
crowd
crucial
cruel
cruise
crumble
crunch
crush
cry
crystal
cube
culture
cup
cupboard
curious
current
curtain
curve
cushion
custom
cute
cycle
dad
damage
damp
dance
danger
daring
dash
daughter
dawn
day
deal
debate
debris
decade
december
decide
decline
decorate
decrease
deer
defense
define
defy
degree
delay
deliver
demand
demise
denial
dentist
deny
depart
depend
deposit
depth
deputy
derive
describe
desert
design
desk
despair
destroy
detail
detect
develop
device
devote
diagram
dial
diamond
diary
dice
diesel
diet
differ
digital
dignity
dilemma
dinner
dinosaur
direct
dirt
disagree
discover
disease
dish
dismiss
disorder
display
distance
divert
divide
divorce
dizzy
doctor
document
dog
doll
dolphin
domain
donate
donkey
donor
door
dose
double
dove
draft
dragon
drama
drastic
draw
dream
dress
drift
drill
drink
drip
drive
drop
drum
dry
duck
dumb
dune
during
dust
dutch
duty
dwarf
dynamic
eager
eagle
early
earn
earth
easily
east
easy
echo
ecology
economy
edge
edit
educate
effort
egg
eight
either
elbow
elder
electric
elegant
element
elephant
elevator
elite
else
embark
embody
embrace
emerge
emotion
employ
empower
empty
enable
enact
end
endless
endorse
enemy
energy
enforce
engage
engine
enhance
enjoy
enlist
enough
enrich
enroll
ensure
enter
entire
entry
envelope
episode
equal
equip
era
erase
erode
erosion
error
erupt
escape
essay
essence
estate
eternal
ethics
evidence
evil
evoke
evolve
exact
example
excess
exchange
excite
exclude
excuse
execute
exercise
exhaust
exhibit
exile
exist
exit
exotic
expand
expect
expire
explain
expose
express
extend
extra
eye
eyebrow
fabric
face
faculty
fade
faint
faith
fall
false
fame
family
famous
fan
fancy
fantasy
farm
fashion
fat
fatal
father
fatigue
fault
favorite
feature
february
federal
fee
feed
feel
female
fence
festival
fetch
fever
few
fiber
fiction
field
figure
file
film
filter
final
find
fine
finger
finish
fire
firm
first
fiscal
fish
fit
fitness
fix
flag
flame
flash
flat
flavor
flee
flight
flip
float
flock
floor
flower
fluid
flush
fly
foam
focus
fog
foil
fold
follow
food
foot
force
forest
forget
fork
fortune
forum
forward
fossil
foster
found
fox
fragile
frame
frequent
fresh
friend
fringe
frog
front
frost
frown
frozen
fruit
fuel
fun
funny
furnace
fury
future
gadget
gain
galaxy
gallery
game
gap
garage
garbage
garden
garlic
garment
gas
gasp
gate
gather
gauge
gaze
general
genius
genre
gentle
genuine
gesture
ghost
giant
gift
giggle
ginger
giraffe
girl
give
glad
glance
glare
glass
glide
glimpse
globe
gloom
glory
glove
glow
glue
goat
goddess
gold
good
goose
gorilla
gospel
gossip
govern
gown
grab
grace
grain
grant
grape
grass
gravity
great
green
grid
grief
grit
grocery
group
grow
grunt
guard
guess
guide
guilt
guitar
gun
gym
habit
hair
half
hammer
hamster
hand
happy
harbor
hard
harsh
harvest
hat
have
hawk
hazard
head
health
heart
heavy
hedgehog
height
hello
helmet
help
hen
hero
hidden
high
hill
hint
hip
hire
history
hobby
hockey
hold
hole
holiday
hollow
home
honey
hood
hope
horn
horror
horse
hospital
host
hotel
hour
hover
hub
huge
human
humble
humor
hundred
hungry
hunt
hurdle
hurry
hurt
husband
hybrid
ice
icon
idea
identify
idle
ignore
ill
illegal
illness
image
imitate
immense
immune
impact
impose
improve
impulse
inch
include
income
increase
index
indicate
indoor
industry
infant
inflict
inform
inhale
inherit
initial
inject
injury
inmate
inner
innocent
input
inquiry
insane
insect
inside
inspire
install
intact
interest
into
invest
invite
involve
iron
island
isolate
issue
item
ivory
jacket
jaguar
jar
jazz
jealous
jeans
jelly
jewel
job
join
joke
journey
joy
judge
juice
jump
jungle
junior
junk
just
kangaroo
keen
keep
ketchup
key
kick
kid
kidney
kind
kingdom
kiss
kit
kitchen
kite
kitten
kiwi
knee
knife
knock
know
lab
label
labor
ladder
lady
lake
lamp
language
laptop
large
later
latin
laugh
laundry
lava
law
lawn
lawsuit
layer
lazy
leader
leaf
learn
leave
lecture
left
leg
legal
legend
leisure
lemon
lend
length
lens
leopard
lesson
letter
level
liar
liberty
library
license
life
lift
light
like
limb
limit
link
lion
liquid
list
little
live
lizard
load
loan
lobster
local
lock
logic
lonely
long
loop
lottery
loud
lounge
love
loyal
lucky
luggage
lumber
lunar
lunch
luxury
lyrics
machine
mad
magic
magnet
maid
mail
main
major
make
mammal
man
manage
mandate
mango
mansion
manual
maple
marble
march
margin
marine
market
marriage
mask
mass
master
match
material
math
matrix
matter
maximum
maze
meadow
mean
measure
meat
mechanic
medal
media
melody
melt
member
memory
mention
menu
mercy
merge
merit
merry
mesh
message
metal
method
middle
midnight
milk
million
mimic
mind
minimum
minor
minute
miracle
mirror
misery
miss
mistake
mix
mixed
mixture
mobile
model
modify
mom
moment
monitor
monkey
monster
month
moon
moral
more
morning
mosquito
mother
motion
motor
mountain
mouse
move
movie
much
muffin
mule
multiply
muscle
museum
mushroom
music
must
mutual
myself
mystery
myth
naive
name
napkin
narrow
nasty
nation
nature
near
neck
need
negative
neglect
neither
nephew
nerve
nest
net
network
neutral
never
news
next
nice
night
noble
noise
nominee
noodle
normal
north
nose
notable
note
nothing
notice
novel
now
nuclear
number
nurse
nut
oak
obey
object
oblige
obscure
observe
obtain
obvious
occur
ocean
october
odor
off
offer
office
often
oil
okay
old
olive
olympic
omit
once
one
onion
online
only
open
opera
opinion
oppose
option
orange
orbit
orchard
order
ordinary
organ
orient
original
orphan
ostrich
other
outdoor
outer
output
outside
oval
oven
over
own
owner
oxygen
oyster
ozone
pact
paddle
page
pair
palace
palm
panda
panel
panic
panther
paper
parade
parent
park
parrot
party
pass
patch
path
patient
patrol
pattern
pause
pave
payment
peace
peanut
pear
peasant
pelican
pen
penalty
pencil
people
pepper
perfect
permit
person
pet
phone
photo
phrase
physical
piano
picnic
picture
piece
pig
pigeon
pill
pilot
pink
pioneer
pipe
pistol
pitch
pizza
place
planet
plastic
plate
play
please
pledge
pluck
plug
plunge
poem
poet
point
polar
pole
police
pond
pony
pool
popular
portion
position
possible
post
potato
pottery
poverty
powder
power
practice
praise
predict
prefer
prepare
present
pretty
prevent
price
pride
primary
print
priority
prison
private
prize
problem
process
produce
profit
program
project
promote
proof
property
prosper
protect
proud
provide
public
pudding
pull
pulp
pulse
pumpkin
punch
pupil
puppy
purchase
purity
purpose
purse
push
put
puzzle
pyramid
quality
quantum
quarter
question
quick
quit
quiz
quote
rabbit
raccoon
race
rack
radar
radio
rail
rain
raise
rally
ramp
ranch
random
range
rapid
rare
rate
rather
raven
raw
razor
ready
real
reason
rebel
rebuild
recall
receive
recipe
record
recycle
reduce
reflect
reform
refuse
region
regret
regular
reject
relax
release
relief
rely
remain
remember
remind
remove
render
renew
rent
reopen
repair
repeat
replace
report
require
rescue
resemble
resist
resource
response
result
retire
retreat
return
reunion
reveal
review
reward
rhythm
rib
ribbon
rice
rich
ride
ridge
rifle
right
rigid
ring
riot
ripple
risk
ritual
rival
river
road
roast
robot
robust
rocket
romance
roof
rookie
room
rose
rotate
rough
round
route
royal
rubber
rude
rug
rule
run
runway
rural
sad
saddle
sadness
safe
sail
salad
salmon
salon
salt
salute
same
sample
sand
satisfy
satoshi
sauce
sausage
save
say
scale
scan
scare
scatter
scene
scheme
school
science
scissors
scorpion
scout
scrap
screen
script
scrub
sea
search
season
seat
second
secret
section
security
seed
seek
segment
select
sell
seminar
senior
sense
sentence
series
service
session
settle
setup
seven
shadow
shaft
shallow
share
shed
shell
sheriff
shield
shift
shine
ship
shiver
shock
shoe
shoot
shop
short
shoulder
shove
shrimp
shrug
shuffle
shy
sibling
sick
side
siege
sight
sign
silent
silk
silly
silver
similar
simple
since
sing
siren
sister
situate
six
size
skate
sketch
ski
skill
skin
skirt
skull
slab
slam
sleep
slender
slice
slide
slight
slim
slogan
slot
slow
slush
small
smart
smile
smoke
smooth
snack
snake
snap
sniff
snow
soap
soccer
social
sock
soda
soft
solar
soldier
solid
solution
solve
someone
song
soon
sorry
sort
soul
sound
soup
source
south
space
spare
spatial
spawn
speak
special
speed
spell
spend
sphere
spice
spider
spike
spin
spirit
split
spoil
sponsor
spoon
sport
spot
spray
spread
spring
spy
square
squeeze
squirrel
stable
stadium
staff
stage
stairs
stamp
stand
start
state
stay
steak
steel
stem
step
stereo
stick
still
sting
stock
stomach
stone
stool
story
stove
strategy
street
strike
strong
struggle
student
stuff
stumble
style
subject
submit
subway
success
such
sudden
suffer
sugar
suggest
suit
summer
sun
sunny
sunset
super
supply
supreme
sure
surface
surge
surprise
surround
survey
suspect
sustain
swallow
swamp
swap
swarm
swear
sweet
swift
swim
swing
switch
sword
symbol
symptom
syrup
system
table
tackle
tag
tail
talent
talk
tank
tape
target
task
taste
tattoo
taxi
teach
team
tell
ten
tenant
tennis
tent
term
test
text
thank
that
theme
then
theory
there
they
thing
this
thought
three
thrive
throw
thumb
thunder
ticket
tide
tiger
tilt
timber
time
tiny
tip
tired
tissue
title
toast
tobacco
today
toddler
toe
together
toilet
token
tomato
tomorrow
tone
tongue
tonight
tool
tooth
top
topic
topple
torch
tornado
tortoise
toss
total
tourist
toward
tower
town
toy
track
trade
traffic
tragic
train
transfer
trap
trash
travel
tray
treat
tree
trend
trial
tribe
trick
trigger
trim
trip
trophy
trouble
truck
true
truly
trumpet
trust
truth
try
tube
tuition
tumble
tuna
tunnel
turkey
turn
turtle
twelve
twenty
twice
twin
twist
two
type
typical
ugly
umbrella
unable
unaware
uncle
uncover
under
undo
unfair
unfold
unhappy
uniform
unique
unit
universe
unknown
unlock
until
unusual
unveil
update
upgrade
uphold
upon
upper
upset
urban
urge
usage
use
used
useful
useless
usual
utility
vacant
vacuum
vague
valid
valley
valve
van
vanish
vapor
various
vast
vault
vehicle
velvet
vendor
venture
venue
verb
verify
version
very
vessel
veteran
viable
vibrant
vicious
victory
video
view
village
vintage
violin
virtual
virus
visa
visit
visual
vital
vivid
vocal
voice
void
volcano
volume
vote
voyage
wage
wagon
wait
walk
wall
walnut
want
warfare
warm
warrior
wash
wasp
waste
water
wave
way
wealth
weapon
wear
weasel
weather
web
wedding
weekend
weird
welcome
west
wet
whale
what
wheat
wheel
when
where
whip
whisper
wide
width
wife
wild
will
win
window
wine
wing
wink
winner
winter
wire
wisdom
wise
wish
witness
wolf
woman
wonder
wood
wool
word
work
world
worry
worth
wrap
wreck
wrestle
wrist
write
wrong
yard
year
yellow
you
young
youth
zebra
zero
zone
zoo`.split(`
`);var dd={};Object.defineProperty(dd,"__esModule",{value:!0});var dv;(function(t){t.ed25519="ed25519",t.secp256k1="ecdsa-secp256k1"})(dv||(dv={}));dd.default=dv;var hd={},Up={},$p={};Object.defineProperty($p,"__esModule",{value:!0});$p.validateAccountDelete=void 0;const za=Ce;function I5(t){(0,za.validateBaseTransaction)(t),(0,za.validateRequiredField)(t,"Destination",za.isAccount),(0,za.validateOptionalField)(t,"DestinationTag",za.isNumber),(0,za.validateCredentialsList)(t.CredentialIDs,t.TransactionType,!0)}$p.validateAccountDelete=I5;var Vp={};Object.defineProperty(Vp,"__esModule",{value:!0});Vp.validateAMMBid=void 0;const pr=je,Nc=Ce,j1=4;function P5(t){if((0,Nc.validateBaseTransaction)(t),t.Asset==null)throw new pr.ValidationError("AMMBid: missing field Asset");if(!(0,Nc.isCurrency)(t.Asset))throw new pr.ValidationError("AMMBid: Asset must be a Currency");if(t.Asset2==null)throw new pr.ValidationError("AMMBid: missing field Asset2");if(!(0,Nc.isCurrency)(t.Asset2))throw new pr.ValidationError("AMMBid: Asset2 must be a Currency");if(t.BidMin!=null&&!(0,Nc.isAmount)(t.BidMin))throw new pr.ValidationError("AMMBid: BidMin must be an Amount");if(t.BidMax!=null&&!(0,Nc.isAmount)(t.BidMax))throw new pr.ValidationError("AMMBid: BidMax must be an Amount");if(t.AuthAccounts!=null){if(!Array.isArray(t.AuthAccounts))throw new pr.ValidationError("AMMBid: AuthAccounts must be an AuthAccount array");if(t.AuthAccounts.length>j1)throw new pr.ValidationError(`AMMBid: AuthAccounts length must not be greater than ${j1}`);R5(t.Account,t.AuthAccounts)}}Vp.validateAMMBid=P5;function R5(t,e){for(const n of e){if(n.AuthAccount==null||typeof n.AuthAccount!="object")throw new pr.ValidationError("AMMBid: invalid AuthAccounts");if(n.AuthAccount.Account==null)throw new pr.ValidationError("AMMBid: invalid AuthAccounts");if(typeof n.AuthAccount.Account!="string")throw new pr.ValidationError("AMMBid: invalid AuthAccounts");if(n.AuthAccount.Account===t)throw new pr.ValidationError("AMMBid: AuthAccounts must not include sender's address")}return!0}var Ew={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateAMMCreate=t.AMM_MAX_TRADING_FEE=void 0;const e=je,n=Ce;t.AMM_MAX_TRADING_FEE=1e3;function r(s){if((0,n.validateBaseTransaction)(s),s.Amount==null)throw new e.ValidationError("AMMCreate: missing field Amount");if(!(0,n.isAmount)(s.Amount))throw new e.ValidationError("AMMCreate: Amount must be an Amount");if(s.Amount2==null)throw new e.ValidationError("AMMCreate: missing field Amount2");if(!(0,n.isAmount)(s.Amount2))throw new e.ValidationError("AMMCreate: Amount2 must be an Amount");if(s.TradingFee==null)throw new e.ValidationError("AMMCreate: missing field TradingFee");if(typeof s.TradingFee!="number")throw new e.ValidationError("AMMCreate: TradingFee must be a number");if(s.TradingFee<0||s.TradingFee>t.AMM_MAX_TRADING_FEE)throw new e.ValidationError(`AMMCreate: TradingFee must be between 0 and ${t.AMM_MAX_TRADING_FEE}`)}t.validateAMMCreate=r})(Ew);var zp={};Object.defineProperty(zp,"__esModule",{value:!0});zp.validateAMMDelete=void 0;const th=je,eg=Ce;function L5(t){if((0,eg.validateBaseTransaction)(t),t.Asset==null)throw new th.ValidationError("AMMDelete: missing field Asset");if(!(0,eg.isCurrency)(t.Asset))throw new th.ValidationError("AMMDelete: Asset must be a Currency");if(t.Asset2==null)throw new th.ValidationError("AMMDelete: missing field Asset2");if(!(0,eg.isCurrency)(t.Asset2))throw new th.ValidationError("AMMDelete: Asset2 must be a Currency")}zp.validateAMMDelete=L5;var Hp={};Object.defineProperty(Hp,"__esModule",{value:!0});Hp.validateAMMVote=void 0;const Ao=je,k1=Ew,tg=Ce;function M5(t){if((0,tg.validateBaseTransaction)(t),t.Asset==null)throw new Ao.ValidationError("AMMVote: missing field Asset");if(!(0,tg.isCurrency)(t.Asset))throw new Ao.ValidationError("AMMVote: Asset must be a Currency");if(t.Asset2==null)throw new Ao.ValidationError("AMMVote: missing field Asset2");if(!(0,tg.isCurrency)(t.Asset2))throw new Ao.ValidationError("AMMVote: Asset2 must be a Currency");if(t.TradingFee==null)throw new Ao.ValidationError("AMMVote: missing field TradingFee");if(typeof t.TradingFee!="number")throw new Ao.ValidationError("AMMVote: TradingFee must be a number");if(t.TradingFee<0||t.TradingFee>k1.AMM_MAX_TRADING_FEE)throw new Ao.ValidationError(`AMMVote: TradingFee must be between 0 and ${k1.AMM_MAX_TRADING_FEE}`)}Hp.validateAMMVote=M5;var Wp={};Object.defineProperty(Wp,"__esModule",{value:!0});Wp.validateCheckCancel=void 0;const D5=je,B5=Ce;function F5(t){if((0,B5.validateBaseTransaction)(t),t.CheckID!==void 0&&typeof t.CheckID!="string")throw new D5.ValidationError("CheckCancel: invalid CheckID")}Wp.validateCheckCancel=F5;var Xp={};Object.defineProperty(Xp,"__esModule",{value:!0});Xp.validateCheckCash=void 0;const Tc=je,ng=Ce;function U5(t){if((0,ng.validateBaseTransaction)(t),t.Amount==null&&t.DeliverMin==null)throw new Tc.ValidationError("CheckCash: must have either Amount or DeliverMin");if(t.Amount!=null&&t.DeliverMin!=null)throw new Tc.ValidationError("CheckCash: cannot have both Amount and DeliverMin");if(t.Amount!=null&&t.Amount!==void 0&&!(0,ng.isAmount)(t.Amount))throw new Tc.ValidationError("CheckCash: invalid Amount");if(t.DeliverMin!=null&&t.DeliverMin!==void 0&&!(0,ng.isAmount)(t.DeliverMin))throw new Tc.ValidationError("CheckCash: invalid DeliverMin");if(t.CheckID!==void 0&&typeof t.CheckID!="string")throw new Tc.ValidationError("CheckCash: invalid CheckID")}Xp.validateCheckCash=U5;var Kp={};Object.defineProperty(Kp,"__esModule",{value:!0});Kp.validateCheckCreate=void 0;const nh=je,Ha=Ce;function $5(t){if((0,Ha.validateBaseTransaction)(t),t.SendMax===void 0)throw new nh.ValidationError("CheckCreate: missing field SendMax");if((0,Ha.validateRequiredField)(t,"Destination",Ha.isAccount),(0,Ha.validateOptionalField)(t,"DestinationTag",Ha.isNumber),typeof t.SendMax!="string"&&!(0,Ha.isIssuedCurrency)(t.SendMax))throw new nh.ValidationError("CheckCreate: invalid SendMax");if(t.Expiration!==void 0&&typeof t.Expiration!="number")throw new nh.ValidationError("CheckCreate: invalid Expiration");if(t.InvoiceID!==void 0&&typeof t.InvoiceID!="string")throw new nh.ValidationError("CheckCreate: invalid InvoiceID")}Kp.validateCheckCreate=$5;var qp={};Object.defineProperty(qp,"__esModule",{value:!0});qp.validateClawback=void 0;const Wa=je,Cs=Ce;function V5(t){if((0,Cs.validateBaseTransaction)(t),(0,Cs.validateOptionalField)(t,"Holder",Cs.isAccount),t.Amount==null)throw new Wa.ValidationError("Clawback: missing field Amount");if(!(0,Cs.isIssuedCurrency)(t.Amount)&&!(0,Cs.isMPTAmount)(t.Amount))throw new Wa.ValidationError("Clawback: invalid Amount");if((0,Cs.isIssuedCurrency)(t.Amount)&&t.Account===t.Amount.issuer)throw new Wa.ValidationError("Clawback: invalid holder Account");if((0,Cs.isMPTAmount)(t.Amount)&&t.Account===t.Holder)throw new Wa.ValidationError("Clawback: invalid holder Account");if((0,Cs.isIssuedCurrency)(t.Amount)&&t.Holder)throw new Wa.ValidationError("Clawback: cannot have Holder for currency");if((0,Cs.isMPTAmount)(t.Amount)&&!t.Holder)throw new Wa.ValidationError("Clawback: missing Holder")}qp.validateClawback=V5;var Gp={};Object.defineProperty(Gp,"__esModule",{value:!0});Gp.validateCredentialAccept=void 0;const Xa=Ce;function z5(t){(0,Xa.validateBaseTransaction)(t),(0,Xa.validateRequiredField)(t,"Account",Xa.isString),(0,Xa.validateRequiredField)(t,"Issuer",Xa.isString),(0,Xa.validateCredentialType)(t)}Gp.validateCredentialAccept=z5;var Yp={};Object.defineProperty(Yp,"__esModule",{value:!0});Yp.validateCredentialCreate=void 0;const H5=at,rh=je,pi=Ce,O1=256;function W5(t){(0,pi.validateBaseTransaction)(t),(0,pi.validateRequiredField)(t,"Account",pi.isString),(0,pi.validateRequiredField)(t,"Subject",pi.isString),(0,pi.validateCredentialType)(t),(0,pi.validateOptionalField)(t,"Expiration",pi.isNumber),X5(t.URI)}Yp.validateCredentialCreate=W5;function X5(t){if(t!==void 0){if(typeof t!="string")throw new rh.ValidationError("CredentialCreate: invalid field URI");if(t.length===0)throw new rh.ValidationError("CredentialCreate: URI cannot be an empty string");if(t.length>O1)throw new rh.ValidationError(`CredentialCreate: URI length must be <= ${O1}`);if(!H5.HEX_REGEX.test(t))throw new rh.ValidationError("CredentialCreate: URI must be encoded in hex")}}var Jp={};Object.defineProperty(Jp,"__esModule",{value:!0});Jp.validateCredentialDelete=void 0;const K5=je,mi=Ce;function q5(t){if((0,mi.validateBaseTransaction)(t),!t.Subject&&!t.Issuer)throw new K5.ValidationError("CredentialDelete: either `Issuer` or `Subject` must be provided");(0,mi.validateRequiredField)(t,"Account",mi.isString),(0,mi.validateCredentialType)(t),(0,mi.validateOptionalField)(t,"Subject",mi.isString),(0,mi.validateOptionalField)(t,"Issuer",mi.isString)}Jp.validateCredentialDelete=q5;var Qp={};Object.defineProperty(Qp,"__esModule",{value:!0});Qp.validateDepositPreauth=void 0;const Uc=je,rg=Ce;function G5(t){if((0,rg.validateBaseTransaction)(t),Y5(t),t.Authorize!==void 0){if(typeof t.Authorize!="string")throw new Uc.ValidationError("DepositPreauth: Authorize must be a string");if(t.Account===t.Authorize)throw new Uc.ValidationError("DepositPreauth: Account can't preauthorize its own address")}else if(t.Unauthorize!==void 0){if(typeof t.Unauthorize!="string")throw new Uc.ValidationError("DepositPreauth: Unauthorize must be a string");if(t.Account===t.Unauthorize)throw new Uc.ValidationError("DepositPreauth: Account can't unauthorize its own address")}else t.AuthorizeCredentials!==void 0?(0,rg.validateCredentialsList)(t.AuthorizeCredentials,t.TransactionType,!1):t.UnauthorizeCredentials!==void 0&&(0,rg.validateCredentialsList)(t.UnauthorizeCredentials,t.TransactionType,!1)}Qp.validateDepositPreauth=G5;function Y5(t){if(["Authorize","Unauthorize","AuthorizeCredentials","UnauthorizeCredentials"].filter(r=>t[r]!==void 0).length!==1)throw new Uc.ValidationError("DepositPreauth: Requires exactly one field of the following: Authorize, Unauthorize, AuthorizeCredentials, UnauthorizeCredentials.")}var Zp={};Object.defineProperty(Zp,"__esModule",{value:!0});Zp.validateDIDDelete=void 0;const J5=Ce;function Q5(t){(0,J5.validateBaseTransaction)(t)}Zp.validateDIDDelete=Q5;var em={};Object.defineProperty(em,"__esModule",{value:!0});em.validateDIDSet=void 0;const Z5=je,Co=Ce;function eU(t){if((0,Co.validateBaseTransaction)(t),(0,Co.validateOptionalField)(t,"Data",Co.isString),(0,Co.validateOptionalField)(t,"DIDDocument",Co.isString),(0,Co.validateOptionalField)(t,"URI",Co.isString),t.Data===void 0&&t.DIDDocument===void 0&&t.URI===void 0)throw new Z5.ValidationError("DIDSet: Must have at least one of `Data`, `DIDDocument`, and `URI`")}em.validateDIDSet=eU;var tm={};Object.defineProperty(tm,"__esModule",{value:!0});tm.validateEscrowCancel=void 0;const I1=je,sg=Ce;function tU(t){if((0,sg.validateBaseTransaction)(t),(0,sg.validateRequiredField)(t,"Owner",sg.isAccount),t.OfferSequence==null)throw new I1.ValidationError("EscrowCancel: missing OfferSequence");if(typeof t.OfferSequence!="number"&&typeof t.OfferSequence!="string"||Number.isNaN(Number(t.OfferSequence)))throw new I1.ValidationError("EscrowCancel: OfferSequence must be a number")}tm.validateEscrowCancel=tU;var nm={};Object.defineProperty(nm,"__esModule",{value:!0});nm.validateEscrowCreate=void 0;const jo=je,Ac=Ce;function nU(t){if((0,Ac.validateBaseTransaction)(t),t.Amount===void 0)throw new jo.ValidationError("EscrowCreate: missing field Amount");if(typeof t.Amount!="string")throw new jo.ValidationError("EscrowCreate: Amount must be a string");if((0,Ac.validateRequiredField)(t,"Destination",Ac.isAccount),(0,Ac.validateOptionalField)(t,"DestinationTag",Ac.isNumber),t.CancelAfter===void 0&&t.FinishAfter===void 0)throw new jo.ValidationError("EscrowCreate: Either CancelAfter or FinishAfter must be specified");if(t.FinishAfter===void 0&&t.Condition===void 0)throw new jo.ValidationError("EscrowCreate: Either Condition or FinishAfter must be specified");if(t.CancelAfter!==void 0&&typeof t.CancelAfter!="number")throw new jo.ValidationError("EscrowCreate: CancelAfter must be a number");if(t.FinishAfter!==void 0&&typeof t.FinishAfter!="number")throw new jo.ValidationError("EscrowCreate: FinishAfter must be a number");if(t.Condition!==void 0&&typeof t.Condition!="string")throw new jo.ValidationError("EscrowCreate: Condition must be a string")}nm.validateEscrowCreate=nU;var rm={};Object.defineProperty(rm,"__esModule",{value:!0});rm.validateEscrowFinish=void 0;const sh=je,ih=Ce;function rU(t){if((0,ih.validateBaseTransaction)(t),(0,ih.validateRequiredField)(t,"Owner",ih.isAccount),(0,ih.validateCredentialsList)(t.CredentialIDs,t.TransactionType,!0),t.OfferSequence==null)throw new sh.ValidationError("EscrowFinish: missing field OfferSequence");if(typeof t.OfferSequence!="number"&&typeof t.OfferSequence!="string"||Number.isNaN(Number(t.OfferSequence)))throw new sh.ValidationError("EscrowFinish: OfferSequence must be a number");if(t.Condition!==void 0&&typeof t.Condition!="string")throw new sh.ValidationError("EscrowFinish: Condition must be a string");if(t.Fulfillment!==void 0&&typeof t.Fulfillment!="string")throw new sh.ValidationError("EscrowFinish: Fulfillment must be a string")}rm.validateEscrowFinish=rU;var sm={};Object.defineProperty(sm,"__esModule",{value:!0});sm.validateMPTokenIssuanceDestroy=void 0;const ig=Ce;function sU(t){(0,ig.validateBaseTransaction)(t),(0,ig.validateRequiredField)(t,"MPTokenIssuanceID",ig.isString)}sm.validateMPTokenIssuanceDestroy=sU;var im={};Object.defineProperty(im,"__esModule",{value:!0});im.validateNFTokenAcceptOffer=void 0;const Wh=je,yC=Ce;function iU(t){const e=(0,yC.parseAmountValue)(t.NFTokenBrokerFee);if(Number.isNaN(e))throw new Wh.ValidationError("NFTokenAcceptOffer: invalid NFTokenBrokerFee");if(e<=0)throw new Wh.ValidationError("NFTokenAcceptOffer: NFTokenBrokerFee must be greater than 0; omit if there is no fee");if(t.NFTokenSellOffer==null||t.NFTokenBuyOffer==null)throw new Wh.ValidationError("NFTokenAcceptOffer: both NFTokenSellOffer and NFTokenBuyOffer must be set if using brokered mode")}function oU(t){if((0,yC.validateBaseTransaction)(t),t.NFTokenBrokerFee!=null&&iU(t),t.NFTokenSellOffer==null&&t.NFTokenBuyOffer==null)throw new Wh.ValidationError("NFTokenAcceptOffer: must set either NFTokenSellOffer or NFTokenBuyOffer")}im.validateNFTokenAcceptOffer=oU;var om={};Object.defineProperty(om,"__esModule",{value:!0});om.validateNFTokenBurn=void 0;const Cc=Ce;function aU(t){(0,Cc.validateBaseTransaction)(t),(0,Cc.validateRequiredField)(t,"NFTokenID",Cc.isString),(0,Cc.validateOptionalField)(t,"Owner",Cc.isAccount)}om.validateNFTokenBurn=aU;var am={};Object.defineProperty(am,"__esModule",{value:!0});am.validateNFTokenCancelOffer=void 0;const P1=je,lU=Ce;function cU(t){if((0,lU.validateBaseTransaction)(t),!Array.isArray(t.NFTokenOffers))throw new P1.ValidationError("NFTokenCancelOffer: missing field NFTokenOffers");if(t.NFTokenOffers.length<1)throw new P1.ValidationError("NFTokenCancelOffer: empty field NFTokenOffers")}am.validateNFTokenCancelOffer=cU;var lm={};Object.defineProperty(lm,"__esModule",{value:!0});lm.validateOfferCancel=void 0;const R1=je,uU=Ce;function dU(t){if((0,uU.validateBaseTransaction)(t),t.OfferSequence===void 0)throw new R1.ValidationError("OfferCancel: missing field OfferSequence");if(typeof t.OfferSequence!="number")throw new R1.ValidationError("OfferCancel: OfferSequence must be a number")}lm.validateOfferCancel=dU;var cm={};Object.defineProperty(cm,"__esModule",{value:!0});cm.validateOracleDelete=void 0;const og=Ce;function hU(t){(0,og.validateBaseTransaction)(t),(0,og.validateRequiredField)(t,"OracleDocumentID",og.isNumber)}cm.validateOracleDelete=hU;var um={};Object.defineProperty(um,"__esModule",{value:!0});um.validateOracleSet=void 0;const Ir=je,Nn=Ce,L1=10,M1=10;function fU(t){(0,Nn.validateBaseTransaction)(t),(0,Nn.validateRequiredField)(t,"OracleDocumentID",Nn.isNumber),(0,Nn.validateRequiredField)(t,"LastUpdateTime",Nn.isNumber),(0,Nn.validateOptionalField)(t,"Provider",Nn.isString),(0,Nn.validateOptionalField)(t,"URI",Nn.isString),(0,Nn.validateOptionalField)(t,"AssetClass",Nn.isString),(0,Nn.validateRequiredField)(t,"PriceDataSeries",e=>{if(!Array.isArray(e))throw new Ir.ValidationError("OracleSet: PriceDataSeries must be an array");if(e.length>L1)throw new Ir.ValidationError(`OracleSet: PriceDataSeries must have at most ${L1} PriceData objects`);for(const n of e){if(typeof n!="object")throw new Ir.ValidationError("OracleSet: PriceDataSeries must be an array of objects");if(n.PriceData==null)throw new Ir.ValidationError("OracleSet: PriceDataSeries must have a `PriceData` object");if(Object.keys(n).length!==1)throw new Ir.ValidationError("OracleSet: PriceDataSeries must only have a single PriceData object");if(typeof n.PriceData.BaseAsset!="string")throw new Ir.ValidationError("OracleSet: PriceDataSeries must have a `BaseAsset` string");if(typeof n.PriceData.QuoteAsset!="string")throw new Ir.ValidationError("OracleSet: PriceDataSeries must have a `QuoteAsset` string");if(n.PriceData.AssetPrice==null!=(n.PriceData.Scale==null))throw new Ir.ValidationError("OracleSet: PriceDataSeries must have both `AssetPrice` and `Scale` if any are present");if("AssetPrice"in n.PriceData&&!(0,Nn.isNumber)(n.PriceData.AssetPrice))throw new Ir.ValidationError("OracleSet: invalid field AssetPrice");if("Scale"in n.PriceData&&!(0,Nn.isNumber)(n.PriceData.Scale))throw new Ir.ValidationError("OracleSet: invalid field Scale");if(n.PriceData.Scale<0||n.PriceData.Scale>M1)throw new Ir.ValidationError(`OracleSet: Scale must be in range 0-${M1}`)}return!0})}um.validateOracleSet=fU;var dm={};Object.defineProperty(dm,"__esModule",{value:!0});dm.validatePaymentChannelCreate=void 0;const ko=je,jc=Ce;function pU(t){if((0,jc.validateBaseTransaction)(t),t.Amount===void 0)throw new ko.ValidationError("PaymentChannelCreate: missing Amount");if(typeof t.Amount!="string")throw new ko.ValidationError("PaymentChannelCreate: Amount must be a string");if((0,jc.validateRequiredField)(t,"Destination",jc.isAccount),(0,jc.validateOptionalField)(t,"DestinationTag",jc.isNumber),t.SettleDelay===void 0)throw new ko.ValidationError("PaymentChannelCreate: missing SettleDelay");if(typeof t.SettleDelay!="number")throw new ko.ValidationError("PaymentChannelCreate: SettleDelay must be a number");if(t.PublicKey===void 0)throw new ko.ValidationError("PaymentChannelCreate: missing PublicKey");if(typeof t.PublicKey!="string")throw new ko.ValidationError("PaymentChannelCreate: PublicKey must be a string");if(t.CancelAfter!==void 0&&typeof t.CancelAfter!="number")throw new ko.ValidationError("PaymentChannelCreate: CancelAfter must be a number")}dm.validatePaymentChannelCreate=pU;var hm={};Object.defineProperty(hm,"__esModule",{value:!0});hm.validatePaymentChannelFund=void 0;const kc=je,mU=Ce;function gU(t){if((0,mU.validateBaseTransaction)(t),t.Channel===void 0)throw new kc.ValidationError("PaymentChannelFund: missing Channel");if(typeof t.Channel!="string")throw new kc.ValidationError("PaymentChannelFund: Channel must be a string");if(t.Amount===void 0)throw new kc.ValidationError("PaymentChannelFund: missing Amount");if(typeof t.Amount!="string")throw new kc.ValidationError("PaymentChannelFund: Amount must be a string");if(t.Expiration!==void 0&&typeof t.Expiration!="number")throw new kc.ValidationError("PaymentChannelFund: Expiration must be a number")}hm.validatePaymentChannelFund=gU;var fm={};Object.defineProperty(fm,"__esModule",{value:!0});fm.validateSetRegularKey=void 0;const yU=je,vU=Ce;function xU(t){if((0,vU.validateBaseTransaction)(t),t.RegularKey!==void 0&&typeof t.RegularKey!="string")throw new yU.ValidationError("SetRegularKey: RegularKey must be a string")}fm.validateSetRegularKey=xU;var pm={};Object.defineProperty(pm,"__esModule",{value:!0});pm.validateSignerListSet=void 0;const Oo=je,wU=Ce,D1=32,bU=/^[0-9A-Fa-f]{64}$/u;function _U(t){if((0,wU.validateBaseTransaction)(t),t.SignerQuorum===void 0)throw new Oo.ValidationError("SignerListSet: missing field SignerQuorum");if(typeof t.SignerQuorum!="number")throw new Oo.ValidationError("SignerListSet: invalid SignerQuorum");if(t.SignerQuorum!==0){if(t.SignerEntries===void 0)throw new Oo.ValidationError("SignerListSet: missing field SignerEntries");if(!Array.isArray(t.SignerEntries))throw new Oo.ValidationError("SignerListSet: invalid SignerEntries");if(t.SignerEntries.length===0)throw new Oo.ValidationError("SignerListSet: need at least 1 member in SignerEntries");if(t.SignerEntries.length>D1)throw new Oo.ValidationError(`SignerListSet: maximum of ${D1} members allowed in SignerEntries`);for(const e of t.SignerEntries){const n=e,{WalletLocator:r}=n.SignerEntry;if(r!==void 0&&!bU.test(r))throw new Oo.ValidationError("SignerListSet: WalletLocator in SignerEntry must be a 256-bit (32-byte) hexadecimal value")}}}pm.validateSignerListSet=_U;var mm={};Object.defineProperty(mm,"__esModule",{value:!0});mm.validateTicketCreate=void 0;const ag=je,EU=Ce,SU=250;function NU(t){(0,EU.validateBaseTransaction)(t);const{TicketCount:e}=t;if(e===void 0)throw new ag.ValidationError("TicketCreate: missing field TicketCount");if(typeof e!="number")throw new ag.ValidationError("TicketCreate: TicketCount must be a number");if(!Number.isInteger(e)||e<1||e>SU)throw new ag.ValidationError("TicketCreate: TicketCount must be an integer from 1 to 250")}mm.validateTicketCreate=NU;var gm={};Object.defineProperty(gm,"__esModule",{value:!0});gm.validateXChainAccountCreateCommit=void 0;const js=Ce;function TU(t){(0,js.validateBaseTransaction)(t),(0,js.validateRequiredField)(t,"XChainBridge",js.isXChainBridge),(0,js.validateRequiredField)(t,"SignatureReward",js.isAmount),(0,js.validateRequiredField)(t,"Destination",js.isAccount),(0,js.validateRequiredField)(t,"Amount",js.isAmount)}gm.validateXChainAccountCreateCommit=TU;var ym={};Object.defineProperty(ym,"__esModule",{value:!0});ym.validateXChainAddAccountCreateAttestation=void 0;const Et=Ce;function AU(t){(0,Et.validateBaseTransaction)(t),(0,Et.validateRequiredField)(t,"Amount",Et.isAmount),(0,Et.validateRequiredField)(t,"AttestationRewardAccount",Et.isAccount),(0,Et.validateRequiredField)(t,"AttestationSignerAccount",Et.isAccount),(0,Et.validateRequiredField)(t,"Destination",Et.isAccount),(0,Et.validateRequiredField)(t,"OtherChainSource",Et.isAccount),(0,Et.validateRequiredField)(t,"PublicKey",Et.isString),(0,Et.validateRequiredField)(t,"Signature",Et.isString),(0,Et.validateRequiredField)(t,"SignatureReward",Et.isAmount),(0,Et.validateRequiredField)(t,"WasLockingChainSend",e=>e===0||e===1),(0,Et.validateRequiredField)(t,"XChainAccountCreateCount",e=>(0,Et.isNumber)(e)||(0,Et.isString)(e)),(0,Et.validateRequiredField)(t,"XChainBridge",Et.isXChainBridge)}ym.validateXChainAddAccountCreateAttestation=AU;var vm={};Object.defineProperty(vm,"__esModule",{value:!0});vm.validateXChainAddClaimAttestation=void 0;const kt=Ce;function CU(t){(0,kt.validateBaseTransaction)(t),(0,kt.validateRequiredField)(t,"Amount",kt.isAmount),(0,kt.validateRequiredField)(t,"AttestationRewardAccount",kt.isAccount),(0,kt.validateRequiredField)(t,"AttestationSignerAccount",kt.isAccount),(0,kt.validateOptionalField)(t,"Destination",kt.isAccount),(0,kt.validateRequiredField)(t,"OtherChainSource",kt.isAccount),(0,kt.validateRequiredField)(t,"PublicKey",kt.isString),(0,kt.validateRequiredField)(t,"Signature",kt.isString),(0,kt.validateRequiredField)(t,"WasLockingChainSend",e=>e===0||e===1),(0,kt.validateRequiredField)(t,"XChainBridge",kt.isXChainBridge),(0,kt.validateRequiredField)(t,"XChainClaimID",e=>(0,kt.isNumber)(e)||(0,kt.isString)(e))}vm.validateXChainAddClaimAttestation=CU;var xm={};Object.defineProperty(xm,"__esModule",{value:!0});xm.validateXChainClaim=void 0;const ur=Ce;function jU(t){(0,ur.validateBaseTransaction)(t),(0,ur.validateRequiredField)(t,"XChainBridge",ur.isXChainBridge),(0,ur.validateRequiredField)(t,"XChainClaimID",e=>(0,ur.isNumber)(e)||(0,ur.isString)(e)),(0,ur.validateRequiredField)(t,"Destination",ur.isAccount),(0,ur.validateOptionalField)(t,"DestinationTag",ur.isNumber),(0,ur.validateRequiredField)(t,"Amount",ur.isAmount)}xm.validateXChainClaim=jU;var wm={};Object.defineProperty(wm,"__esModule",{value:!0});wm.validateXChainCommit=void 0;const is=Ce;function kU(t){(0,is.validateBaseTransaction)(t),(0,is.validateRequiredField)(t,"XChainBridge",is.isXChainBridge),(0,is.validateRequiredField)(t,"XChainClaimID",e=>(0,is.isNumber)(e)||(0,is.isString)(e)),(0,is.validateOptionalField)(t,"OtherChainDestination",is.isAccount),(0,is.validateRequiredField)(t,"Amount",is.isAmount)}wm.validateXChainCommit=kU;var bm={};Object.defineProperty(bm,"__esModule",{value:!0});bm.validateXChainCreateBridge=void 0;const Io=Ce;function OU(t){(0,Io.validateBaseTransaction)(t),(0,Io.validateRequiredField)(t,"XChainBridge",Io.isXChainBridge),(0,Io.validateRequiredField)(t,"SignatureReward",Io.isAmount),(0,Io.validateOptionalField)(t,"MinAccountCreateAmount",Io.isAmount)}bm.validateXChainCreateBridge=OU;var _m={};Object.defineProperty(_m,"__esModule",{value:!0});_m.validateXChainCreateClaimID=void 0;const Po=Ce;function IU(t){(0,Po.validateBaseTransaction)(t),(0,Po.validateRequiredField)(t,"XChainBridge",Po.isXChainBridge),(0,Po.validateRequiredField)(t,"SignatureReward",Po.isAmount),(0,Po.validateRequiredField)(t,"OtherChainSource",Po.isAccount)}_m.validateXChainCreateClaimID=IU;Object.defineProperty(Up,"__esModule",{value:!0});Up.validate=void 0;const ks=je,lg=Xt,PU=xs,RU=$p,LU=ws,MU=Vp,DU=Ew,BU=zp,FU=Yi,UU=Hp,$U=Ji,VU=Wp,zU=Xp,HU=Kp,WU=qp,XU=Ce,KU=Gp,qU=Yp,GU=Jp,YU=Qp,JU=Zp,QU=em,ZU=tm,e6=nm,t6=rm,n6=Qi,r6=Zi,s6=sm,i6=eo,o6=im,a6=om,l6=am,c6=to,u6=no,d6=lm,h6=ro,f6=cm,p6=um,m6=so,g6=io,y6=dm,v6=hm,x6=fm,w6=pm,b6=mm,_6=oo,E6=gm,S6=ym,N6=vm,T6=xm,A6=wm,C6=bm,j6=_m,k6=ao;function O6(t){const e=Object.assign({},t);if(e.TransactionType==null)throw new ks.ValidationError("Object does not have a `TransactionType`");if(typeof e.TransactionType!="string")throw new ks.ValidationError("Object's `TransactionType` is not a string");if(e.Memos!=null&&typeof e.Memos!="object")throw new ks.ValidationError("Memo must be array");switch(e.Memos!=null&&e.Memos.forEach(n=>{if((n==null?void 0:n.Memo)==null)throw new ks.ValidationError("Memo data must be in a `Memo` field");if(n.Memo.MemoData&&!(0,lg.isHex)(n.Memo.MemoData))throw new ks.ValidationError("MemoData field must be a hex value");if(n.Memo.MemoType&&!(0,lg.isHex)(n.Memo.MemoType))throw new ks.ValidationError("MemoType field must be a hex value");if(n.Memo.MemoFormat&&!(0,lg.isHex)(n.Memo.MemoFormat))throw new ks.ValidationError("MemoFormat field must be a hex value")}),Object.keys(e).forEach(n=>{if(e[n]&&(0,XU.isIssuedCurrency)(e[n])){const s=e[n].currency;if(s.length===3&&s.toUpperCase()==="XRP")throw new ks.ValidationError(`Cannot have an issued currency with a similar standard code to XRP (received '${s}'). XRP is not an issued currency.`)}}),(0,PU.setTransactionFlagsToNumber)(e),e.TransactionType){case"AMMBid":(0,MU.validateAMMBid)(e);break;case"AMMCreate":(0,DU.validateAMMCreate)(e);break;case"AMMDelete":(0,BU.validateAMMDelete)(e);break;case"AMMDeposit":(0,FU.validateAMMDeposit)(e);break;case"AMMVote":(0,UU.validateAMMVote)(e);break;case"AMMWithdraw":(0,$U.validateAMMWithdraw)(e);break;case"AccountDelete":(0,RU.validateAccountDelete)(e);break;case"AccountSet":(0,LU.validateAccountSet)(e);break;case"CheckCancel":(0,VU.validateCheckCancel)(e);break;case"CheckCash":(0,zU.validateCheckCash)(e);break;case"CheckCreate":(0,HU.validateCheckCreate)(e);break;case"Clawback":(0,WU.validateClawback)(e);break;case"CredentialAccept":(0,KU.validateCredentialAccept)(e);break;case"CredentialCreate":(0,qU.validateCredentialCreate)(e);break;case"CredentialDelete":(0,GU.validateCredentialDelete)(e);break;case"DIDDelete":(0,JU.validateDIDDelete)(e);break;case"DIDSet":(0,QU.validateDIDSet)(e);break;case"DepositPreauth":(0,YU.validateDepositPreauth)(e);break;case"EscrowCancel":(0,ZU.validateEscrowCancel)(e);break;case"EscrowCreate":(0,e6.validateEscrowCreate)(e);break;case"EscrowFinish":(0,t6.validateEscrowFinish)(e);break;case"MPTokenAuthorize":(0,n6.validateMPTokenAuthorize)(e);break;case"MPTokenIssuanceCreate":(0,r6.validateMPTokenIssuanceCreate)(e);break;case"MPTokenIssuanceDestroy":(0,s6.validateMPTokenIssuanceDestroy)(e);break;case"MPTokenIssuanceSet":(0,i6.validateMPTokenIssuanceSet)(e);break;case"NFTokenAcceptOffer":(0,o6.validateNFTokenAcceptOffer)(e);break;case"NFTokenBurn":(0,a6.validateNFTokenBurn)(e);break;case"NFTokenCancelOffer":(0,l6.validateNFTokenCancelOffer)(e);break;case"NFTokenCreateOffer":(0,c6.validateNFTokenCreateOffer)(e);break;case"NFTokenMint":(0,u6.validateNFTokenMint)(e);break;case"OfferCancel":(0,d6.validateOfferCancel)(e);break;case"OfferCreate":(0,h6.validateOfferCreate)(e);break;case"OracleDelete":(0,f6.validateOracleDelete)(e);break;case"OracleSet":(0,p6.validateOracleSet)(e);break;case"Payment":(0,m6.validatePayment)(e);break;case"PaymentChannelClaim":(0,g6.validatePaymentChannelClaim)(e);break;case"PaymentChannelCreate":(0,y6.validatePaymentChannelCreate)(e);break;case"PaymentChannelFund":(0,v6.validatePaymentChannelFund)(e);break;case"SetRegularKey":(0,x6.validateSetRegularKey)(e);break;case"SignerListSet":(0,w6.validateSignerListSet)(e);break;case"TicketCreate":(0,b6.validateTicketCreate)(e);break;case"TrustSet":(0,_6.validateTrustSet)(e);break;case"XChainAccountCreateCommit":(0,E6.validateXChainAccountCreateCommit)(e);break;case"XChainAddAccountCreateAttestation":(0,S6.validateXChainAddAccountCreateAttestation)(e);break;case"XChainAddClaimAttestation":(0,N6.validateXChainAddClaimAttestation)(e);break;case"XChainClaim":(0,T6.validateXChainClaim)(e);break;case"XChainCommit":(0,A6.validateXChainCommit)(e);break;case"XChainCreateBridge":(0,C6.validateXChainCreateBridge)(e);break;case"XChainCreateClaimID":(0,j6.validateXChainCreateClaimID)(e);break;case"XChainModifyBridge":(0,k6.validateXChainModifyBridge)(e);break;default:throw new ks.ValidationError(`Invalid field TransactionType: ${e.TransactionType}`)}}Up.validate=O6;var Em={};Object.defineProperty(Em,"__esModule",{value:!0});Em.EnableAmendmentFlags=void 0;var B1;(function(t){t[t.tfGotMajority=65536]="tfGotMajority",t[t.tfLostMajority=131072]="tfLostMajority"})(B1||(Em.EnableAmendmentFlags=B1={}));(function(t){var e=ge&&ge.__createBinding||(Object.create?function(b,v,A,E){E===void 0&&(E=A);var L=Object.getOwnPropertyDescriptor(v,A);(!L||("get"in L?!v.__esModule:L.writable||L.configurable))&&(L={enumerable:!0,get:function(){return v[A]}}),Object.defineProperty(b,E,L)}:function(b,v,A,E){E===void 0&&(E=A),b[E]=v[A]}),n=ge&&ge.__exportStar||function(b,v){for(var A in b)A!=="default"&&!Object.prototype.hasOwnProperty.call(v,A)&&e(v,b,A)};Object.defineProperty(t,"__esModule",{value:!0}),t.XChainModifyBridgeFlags=t.TrustSetFlags=t.PaymentChannelClaimFlags=t.PaymentFlags=t.OfferCreateFlags=t.NFTokenMintFlags=t.NFTokenCreateOfferFlags=t.MPTokenIssuanceSetFlags=t.MPTokenIssuanceCreateFlags=t.MPTokenAuthorizeFlags=t.EnableAmendmentFlags=t.AMMWithdrawFlags=t.AMMDepositFlags=t.AccountSetTfFlags=t.AccountSetAsfFlags=t.validate=t.isMPTAmount=void 0;var r=Ce;Object.defineProperty(t,"isMPTAmount",{enumerable:!0,get:function(){return r.isMPTAmount}});var s=Up;Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return s.validate}}),n(bs,t);var i=ws;Object.defineProperty(t,"AccountSetAsfFlags",{enumerable:!0,get:function(){return i.AccountSetAsfFlags}}),Object.defineProperty(t,"AccountSetTfFlags",{enumerable:!0,get:function(){return i.AccountSetTfFlags}});var a=Yi;Object.defineProperty(t,"AMMDepositFlags",{enumerable:!0,get:function(){return a.AMMDepositFlags}});var l=Ji;Object.defineProperty(t,"AMMWithdrawFlags",{enumerable:!0,get:function(){return l.AMMWithdrawFlags}});var c=Em;Object.defineProperty(t,"EnableAmendmentFlags",{enumerable:!0,get:function(){return c.EnableAmendmentFlags}});var u=Qi;Object.defineProperty(t,"MPTokenAuthorizeFlags",{enumerable:!0,get:function(){return u.MPTokenAuthorizeFlags}});var d=Zi;Object.defineProperty(t,"MPTokenIssuanceCreateFlags",{enumerable:!0,get:function(){return d.MPTokenIssuanceCreateFlags}});var h=eo;Object.defineProperty(t,"MPTokenIssuanceSetFlags",{enumerable:!0,get:function(){return h.MPTokenIssuanceSetFlags}});var f=to;Object.defineProperty(t,"NFTokenCreateOfferFlags",{enumerable:!0,get:function(){return f.NFTokenCreateOfferFlags}});var m=no;Object.defineProperty(t,"NFTokenMintFlags",{enumerable:!0,get:function(){return m.NFTokenMintFlags}});var _=ro;Object.defineProperty(t,"OfferCreateFlags",{enumerable:!0,get:function(){return _.OfferCreateFlags}});var S=so;Object.defineProperty(t,"PaymentFlags",{enumerable:!0,get:function(){return S.PaymentFlags}});var j=io;Object.defineProperty(t,"PaymentChannelClaimFlags",{enumerable:!0,get:function(){return j.PaymentChannelClaimFlags}});var y=oo;Object.defineProperty(t,"TrustSetFlags",{enumerable:!0,get:function(){return y.TrustSetFlags}});var x=ao;Object.defineProperty(t,"XChainModifyBridgeFlags",{enumerable:!0,get:function(){return x.XChainModifyBridgeFlags}})})(hd);var va={};const I6=["A","ABE","ACE","ACT","AD","ADA","ADD","AGO","AID","AIM","AIR","ALL","ALP","AM","AMY","AN","ANA","AND","ANN","ANT","ANY","APE","APS","APT","ARC","ARE","ARK","ARM","ART","AS","ASH","ASK","AT","ATE","AUG","AUK","AVE","AWE","AWK","AWL","AWN","AX","AYE","BAD","BAG","BAH","BAM","BAN","BAR","BAT","BAY","BE","BED","BEE","BEG","BEN","BET","BEY","BIB","BID","BIG","BIN","BIT","BOB","BOG","BON","BOO","BOP","BOW","BOY","BUB","BUD","BUG","BUM","BUN","BUS","BUT","BUY","BY","BYE","CAB","CAL","CAM","CAN","CAP","CAR","CAT","CAW","COD","COG","COL","CON","COO","COP","COT","COW","COY","CRY","CUB","CUE","CUP","CUR","CUT","DAB","DAD","DAM","DAN","DAR","DAY","DEE","DEL","DEN","DES","DEW","DID","DIE","DIG","DIN","DIP","DO","DOE","DOG","DON","DOT","DOW","DRY","DUB","DUD","DUE","DUG","DUN","EAR","EAT","ED","EEL","EGG","EGO","ELI","ELK","ELM","ELY","EM","END","EST","ETC","EVA","EVE","EWE","EYE","FAD","FAN","FAR","FAT","FAY","FED","FEE","FEW","FIB","FIG","FIN","FIR","FIT","FLO","FLY","FOE","FOG","FOR","FRY","FUM","FUN","FUR","GAB","GAD","GAG","GAL","GAM","GAP","GAS","GAY","GEE","GEL","GEM","GET","GIG","GIL","GIN","GO","GOT","GUM","GUN","GUS","GUT","GUY","GYM","GYP","HA","HAD","HAL","HAM","HAN","HAP","HAS","HAT","HAW","HAY","HE","HEM","HEN","HER","HEW","HEY","HI","HID","HIM","HIP","HIS","HIT","HO","HOB","HOC","HOE","HOG","HOP","HOT","HOW","HUB","HUE","HUG","HUH","HUM","HUT","I","ICY","IDA","IF","IKE","ILL","INK","INN","IO","ION","IQ","IRA","IRE","IRK","IS","IT","ITS","IVY","JAB","JAG","JAM","JAN","JAR","JAW","JAY","JET","JIG","JIM","JO","JOB","JOE","JOG","JOT","JOY","JUG","JUT","KAY","KEG","KEN","KEY","KID","KIM","KIN","KIT","LA","LAB","LAC","LAD","LAG","LAM","LAP","LAW","LAY","LEA","LED","LEE","LEG","LEN","LEO","LET","LEW","LID","LIE","LIN","LIP","LIT","LO","LOB","LOG","LOP","LOS","LOT","LOU","LOW","LOY","LUG","LYE","MA","MAC","MAD","MAE","MAN","MAO","MAP","MAT","MAW","MAY","ME","MEG","MEL","MEN","MET","MEW","MID","MIN","MIT","MOB","MOD","MOE","MOO","MOP","MOS","MOT","MOW","MUD","MUG","MUM","MY","NAB","NAG","NAN","NAP","NAT","NAY","NE","NED","NEE","NET","NEW","NIB","NIL","NIP","NIT","NO","NOB","NOD","NON","NOR","NOT","NOV","NOW","NU","NUN","NUT","O","OAF","OAK","OAR","OAT","ODD","ODE","OF","OFF","OFT","OH","OIL","OK","OLD","ON","ONE","OR","ORB","ORE","ORR","OS","OTT","OUR","OUT","OVA","OW","OWE","OWL","OWN","OX","PA","PAD","PAL","PAM","PAN","PAP","PAR","PAT","PAW","PAY","PEA","PEG","PEN","PEP","PER","PET","PEW","PHI","PI","PIE","PIN","PIT","PLY","PO","POD","POE","POP","POT","POW","PRO","PRY","PUB","PUG","PUN","PUP","PUT","QUO","RAG","RAM","RAN","RAP","RAT","RAW","RAY","REB","RED","REP","RET","RIB","RID","RIG","RIM","RIO","RIP","ROB","ROD","ROE","RON","ROT","ROW","ROY","RUB","RUE","RUG","RUM","RUN","RYE","SAC","SAD","SAG","SAL","SAM","SAN","SAP","SAT","SAW","SAY","SEA","SEC","SEE","SEN","SET","SEW","SHE","SHY","SIN","SIP","SIR","SIS","SIT","SKI","SKY","SLY","SO","SOB","SOD","SON","SOP","SOW","SOY","SPA","SPY","SUB","SUD","SUE","SUM","SUN","SUP","TAB","TAD","TAG","TAN","TAP","TAR","TEA","TED","TEE","TEN","THE","THY","TIC","TIE","TIM","TIN","TIP","TO","TOE","TOG","TOM","TON","TOO","TOP","TOW","TOY","TRY","TUB","TUG","TUM","TUN","TWO","UN","UP","US","USE","VAN","VAT","VET","VIE","WAD","WAG","WAR","WAS","WAY","WE","WEB","WED","WEE","WET","WHO","WHY","WIN","WIT","WOK","WON","WOO","WOW","WRY","WU","YAM","YAP","YAW","YE","YEA","YES","YET","YOU","ABED","ABEL","ABET","ABLE","ABUT","ACHE","ACID","ACME","ACRE","ACTA","ACTS","ADAM","ADDS","ADEN","AFAR","AFRO","AGEE","AHEM","AHOY","AIDA","AIDE","AIDS","AIRY","AJAR","AKIN","ALAN","ALEC","ALGA","ALIA","ALLY","ALMA","ALOE","ALSO","ALTO","ALUM","ALVA","AMEN","AMES","AMID","AMMO","AMOK","AMOS","AMRA","ANDY","ANEW","ANNA","ANNE","ANTE","ANTI","AQUA","ARAB","ARCH","AREA","ARGO","ARID","ARMY","ARTS","ARTY","ASIA","ASKS","ATOM","AUNT","AURA","AUTO","AVER","AVID","AVIS","AVON","AVOW","AWAY","AWRY","BABE","BABY","BACH","BACK","BADE","BAIL","BAIT","BAKE","BALD","BALE","BALI","BALK","BALL","BALM","BAND","BANE","BANG","BANK","BARB","BARD","BARE","BARK","BARN","BARR","BASE","BASH","BASK","BASS","BATE","BATH","BAWD","BAWL","BEAD","BEAK","BEAM","BEAN","BEAR","BEAT","BEAU","BECK","BEEF","BEEN","BEER","BEET","BELA","BELL","BELT","BEND","BENT","BERG","BERN","BERT","BESS","BEST","BETA","BETH","BHOY","BIAS","BIDE","BIEN","BILE","BILK","BILL","BIND","BING","BIRD","BITE","BITS","BLAB","BLAT","BLED","BLEW","BLOB","BLOC","BLOT","BLOW","BLUE","BLUM","BLUR","BOAR","BOAT","BOCA","BOCK","BODE","BODY","BOGY","BOHR","BOIL","BOLD","BOLO","BOLT","BOMB","BONA","BOND","BONE","BONG","BONN","BONY","BOOK","BOOM","BOON","BOOT","BORE","BORG","BORN","BOSE","BOSS","BOTH","BOUT","BOWL","BOYD","BRAD","BRAE","BRAG","BRAN","BRAY","BRED","BREW","BRIG","BRIM","BROW","BUCK","BUDD","BUFF","BULB","BULK","BULL","BUNK","BUNT","BUOY","BURG","BURL","BURN","BURR","BURT","BURY","BUSH","BUSS","BUST","BUSY","BYTE","CADY","CAFE","CAGE","CAIN","CAKE","CALF","CALL","CALM","CAME","CANE","CANT","CARD","CARE","CARL","CARR","CART","CASE","CASH","CASK","CAST","CAVE","CEIL","CELL","CENT","CERN","CHAD","CHAR","CHAT","CHAW","CHEF","CHEN","CHEW","CHIC","CHIN","CHOU","CHOW","CHUB","CHUG","CHUM","CITE","CITY","CLAD","CLAM","CLAN","CLAW","CLAY","CLOD","CLOG","CLOT","CLUB","CLUE","COAL","COAT","COCA","COCK","COCO","CODA","CODE","CODY","COED","COIL","COIN","COKE","COLA","COLD","COLT","COMA","COMB","COME","COOK","COOL","COON","COOT","CORD","CORE","CORK","CORN","COST","COVE","COWL","CRAB","CRAG","CRAM","CRAY","CREW","CRIB","CROW","CRUD","CUBA","CUBE","CUFF","CULL","CULT","CUNY","CURB","CURD","CURE","CURL","CURT","CUTS","DADE","DALE","DAME","DANA","DANE","DANG","DANK","DARE","DARK","DARN","DART","DASH","DATA","DATE","DAVE","DAVY","DAWN","DAYS","DEAD","DEAF","DEAL","DEAN","DEAR","DEBT","DECK","DEED","DEEM","DEER","DEFT","DEFY","DELL","DENT","DENY","DESK","DIAL","DICE","DIED","DIET","DIME","DINE","DING","DINT","DIRE","DIRT","DISC","DISH","DISK","DIVE","DOCK","DOES","DOLE","DOLL","DOLT","DOME","DONE","DOOM","DOOR","DORA","DOSE","DOTE","DOUG","DOUR","DOVE","DOWN","DRAB","DRAG","DRAM","DRAW","DREW","DRUB","DRUG","DRUM","DUAL","DUCK","DUCT","DUEL","DUET","DUKE","DULL","DUMB","DUNE","DUNK","DUSK","DUST","DUTY","EACH","EARL","EARN","EASE","EAST","EASY","EBEN","ECHO","EDDY","EDEN","EDGE","EDGY","EDIT","EDNA","EGAN","ELAN","ELBA","ELLA","ELSE","EMIL","EMIT","EMMA","ENDS","ERIC","EROS","EVEN","EVER","EVIL","EYED","FACE","FACT","FADE","FAIL","FAIN","FAIR","FAKE","FALL","FAME","FANG","FARM","FAST","FATE","FAWN","FEAR","FEAT","FEED","FEEL","FEET","FELL","FELT","FEND","FERN","FEST","FEUD","FIEF","FIGS","FILE","FILL","FILM","FIND","FINE","FINK","FIRE","FIRM","FISH","FISK","FIST","FITS","FIVE","FLAG","FLAK","FLAM","FLAT","FLAW","FLEA","FLED","FLEW","FLIT","FLOC","FLOG","FLOW","FLUB","FLUE","FOAL","FOAM","FOGY","FOIL","FOLD","FOLK","FOND","FONT","FOOD","FOOL","FOOT","FORD","FORE","FORK","FORM","FORT","FOSS","FOUL","FOUR","FOWL","FRAU","FRAY","FRED","FREE","FRET","FREY","FROG","FROM","FUEL","FULL","FUME","FUND","FUNK","FURY","FUSE","FUSS","GAFF","GAGE","GAIL","GAIN","GAIT","GALA","GALE","GALL","GALT","GAME","GANG","GARB","GARY","GASH","GATE","GAUL","GAUR","GAVE","GAWK","GEAR","GELD","GENE","GENT","GERM","GETS","GIBE","GIFT","GILD","GILL","GILT","GINA","GIRD","GIRL","GIST","GIVE","GLAD","GLEE","GLEN","GLIB","GLOB","GLOM","GLOW","GLUE","GLUM","GLUT","GOAD","GOAL","GOAT","GOER","GOES","GOLD","GOLF","GONE","GONG","GOOD","GOOF","GORE","GORY","GOSH","GOUT","GOWN","GRAB","GRAD","GRAY","GREG","GREW","GREY","GRID","GRIM","GRIN","GRIT","GROW","GRUB","GULF","GULL","GUNK","GURU","GUSH","GUST","GWEN","GWYN","HAAG","HAAS","HACK","HAIL","HAIR","HALE","HALF","HALL","HALO","HALT","HAND","HANG","HANK","HANS","HARD","HARK","HARM","HART","HASH","HAST","HATE","HATH","HAUL","HAVE","HAWK","HAYS","HEAD","HEAL","HEAR","HEAT","HEBE","HECK","HEED","HEEL","HEFT","HELD","HELL","HELM","HERB","HERD","HERE","HERO","HERS","HESS","HEWN","HICK","HIDE","HIGH","HIKE","HILL","HILT","HIND","HINT","HIRE","HISS","HIVE","HOBO","HOCK","HOFF","HOLD","HOLE","HOLM","HOLT","HOME","HONE","HONK","HOOD","HOOF","HOOK","HOOT","HORN","HOSE","HOST","HOUR","HOVE","HOWE","HOWL","HOYT","HUCK","HUED","HUFF","HUGE","HUGH","HUGO","HULK","HULL","HUNK","HUNT","HURD","HURL","HURT","HUSH","HYDE","HYMN","IBIS","ICON","IDEA","IDLE","IFFY","INCA","INCH","INTO","IONS","IOTA","IOWA","IRIS","IRMA","IRON","ISLE","ITCH","ITEM","IVAN","JACK","JADE","JAIL","JAKE","JANE","JAVA","JEAN","JEFF","JERK","JESS","JEST","JIBE","JILL","JILT","JIVE","JOAN","JOBS","JOCK","JOEL","JOEY","JOHN","JOIN","JOKE","JOLT","JOVE","JUDD","JUDE","JUDO","JUDY","JUJU","JUKE","JULY","JUNE","JUNK","JUNO","JURY","JUST","JUTE","KAHN","KALE","KANE","KANT","KARL","KATE","KEEL","KEEN","KENO","KENT","KERN","KERR","KEYS","KICK","KILL","KIND","KING","KIRK","KISS","KITE","KLAN","KNEE","KNEW","KNIT","KNOB","KNOT","KNOW","KOCH","KONG","KUDO","KURD","KURT","KYLE","LACE","LACK","LACY","LADY","LAID","LAIN","LAIR","LAKE","LAMB","LAME","LAND","LANE","LANG","LARD","LARK","LASS","LAST","LATE","LAUD","LAVA","LAWN","LAWS","LAYS","LEAD","LEAF","LEAK","LEAN","LEAR","LEEK","LEER","LEFT","LEND","LENS","LENT","LEON","LESK","LESS","LEST","LETS","LIAR","LICE","LICK","LIED","LIEN","LIES","LIEU","LIFE","LIFT","LIKE","LILA","LILT","LILY","LIMA","LIMB","LIME","LIND","LINE","LINK","LINT","LION","LISA","LIST","LIVE","LOAD","LOAF","LOAM","LOAN","LOCK","LOFT","LOGE","LOIS","LOLA","LONE","LONG","LOOK","LOON","LOOT","LORD","LORE","LOSE","LOSS","LOST","LOUD","LOVE","LOWE","LUCK","LUCY","LUGE","LUKE","LULU","LUND","LUNG","LURA","LURE","LURK","LUSH","LUST","LYLE","LYNN","LYON","LYRA","MACE","MADE","MAGI","MAID","MAIL","MAIN","MAKE","MALE","MALI","MALL","MALT","MANA","MANN","MANY","MARC","MARE","MARK","MARS","MART","MARY","MASH","MASK","MASS","MAST","MATE","MATH","MAUL","MAYO","MEAD","MEAL","MEAN","MEAT","MEEK","MEET","MELD","MELT","MEMO","MEND","MENU","MERT","MESH","MESS","MICE","MIKE","MILD","MILE","MILK","MILL","MILT","MIMI","MIND","MINE","MINI","MINK","MINT","MIRE","MISS","MIST","MITE","MITT","MOAN","MOAT","MOCK","MODE","MOLD","MOLE","MOLL","MOLT","MONA","MONK","MONT","MOOD","MOON","MOOR","MOOT","MORE","MORN","MORT","MOSS","MOST","MOTH","MOVE","MUCH","MUCK","MUDD","MUFF","MULE","MULL","MURK","MUSH","MUST","MUTE","MUTT","MYRA","MYTH","NAGY","NAIL","NAIR","NAME","NARY","NASH","NAVE","NAVY","NEAL","NEAR","NEAT","NECK","NEED","NEIL","NELL","NEON","NERO","NESS","NEST","NEWS","NEWT","NIBS","NICE","NICK","NILE","NINA","NINE","NOAH","NODE","NOEL","NOLL","NONE","NOOK","NOON","NORM","NOSE","NOTE","NOUN","NOVA","NUDE","NULL","NUMB","OATH","OBEY","OBOE","ODIN","OHIO","OILY","OINT","OKAY","OLAF","OLDY","OLGA","OLIN","OMAN","OMEN","OMIT","ONCE","ONES","ONLY","ONTO","ONUS","ORAL","ORGY","OSLO","OTIS","OTTO","OUCH","OUST","OUTS","OVAL","OVEN","OVER","OWLY","OWNS","QUAD","QUIT","QUOD","RACE","RACK","RACY","RAFT","RAGE","RAID","RAIL","RAIN","RAKE","RANK","RANT","RARE","RASH","RATE","RAVE","RAYS","READ","REAL","REAM","REAR","RECK","REED","REEF","REEK","REEL","REID","REIN","RENA","REND","RENT","REST","RICE","RICH","RICK","RIDE","RIFT","RILL","RIME","RING","RINK","RISE","RISK","RITE","ROAD","ROAM","ROAR","ROBE","ROCK","RODE","ROIL","ROLL","ROME","ROOD","ROOF","ROOK","ROOM","ROOT","ROSA","ROSE","ROSS","ROSY","ROTH","ROUT","ROVE","ROWE","ROWS","RUBE","RUBY","RUDE","RUDY","RUIN","RULE","RUNG","RUNS","RUNT","RUSE","RUSH","RUSK","RUSS","RUST","RUTH","SACK","SAFE","SAGE","SAID","SAIL","SALE","SALK","SALT","SAME","SAND","SANE","SANG","SANK","SARA","SAUL","SAVE","SAYS","SCAN","SCAR","SCAT","SCOT","SEAL","SEAM","SEAR","SEAT","SEED","SEEK","SEEM","SEEN","SEES","SELF","SELL","SEND","SENT","SETS","SEWN","SHAG","SHAM","SHAW","SHAY","SHED","SHIM","SHIN","SHOD","SHOE","SHOT","SHOW","SHUN","SHUT","SICK","SIDE","SIFT","SIGH","SIGN","SILK","SILL","SILO","SILT","SINE","SING","SINK","SIRE","SITE","SITS","SITU","SKAT","SKEW","SKID","SKIM","SKIN","SKIT","SLAB","SLAM","SLAT","SLAY","SLED","SLEW","SLID","SLIM","SLIT","SLOB","SLOG","SLOT","SLOW","SLUG","SLUM","SLUR","SMOG","SMUG","SNAG","SNOB","SNOW","SNUB","SNUG","SOAK","SOAR","SOCK","SODA","SOFA","SOFT","SOIL","SOLD","SOME","SONG","SOON","SOOT","SORE","SORT","SOUL","SOUR","SOWN","STAB","STAG","STAN","STAR","STAY","STEM","STEW","STIR","STOW","STUB","STUN","SUCH","SUDS","SUIT","SULK","SUMS","SUNG","SUNK","SURE","SURF","SWAB","SWAG","SWAM","SWAN","SWAT","SWAY","SWIM","SWUM","TACK","TACT","TAIL","TAKE","TALE","TALK","TALL","TANK","TASK","TATE","TAUT","TEAL","TEAM","TEAR","TECH","TEEM","TEEN","TEET","TELL","TEND","TENT","TERM","TERN","TESS","TEST","THAN","THAT","THEE","THEM","THEN","THEY","THIN","THIS","THUD","THUG","TICK","TIDE","TIDY","TIED","TIER","TILE","TILL","TILT","TIME","TINA","TINE","TINT","TINY","TIRE","TOAD","TOGO","TOIL","TOLD","TOLL","TONE","TONG","TONY","TOOK","TOOL","TOOT","TORE","TORN","TOTE","TOUR","TOUT","TOWN","TRAG","TRAM","TRAY","TREE","TREK","TRIG","TRIM","TRIO","TROD","TROT","TROY","TRUE","TUBA","TUBE","TUCK","TUFT","TUNA","TUNE","TUNG","TURF","TURN","TUSK","TWIG","TWIN","TWIT","ULAN","UNIT","URGE","USED","USER","USES","UTAH","VAIL","VAIN","VALE","VARY","VASE","VAST","VEAL","VEDA","VEIL","VEIN","VEND","VENT","VERB","VERY","VETO","VICE","VIEW","VINE","VISE","VOID","VOLT","VOTE","WACK","WADE","WAGE","WAIL","WAIT","WAKE","WALE","WALK","WALL","WALT","WAND","WANE","WANG","WANT","WARD","WARM","WARN","WART","WASH","WAST","WATS","WATT","WAVE","WAVY","WAYS","WEAK","WEAL","WEAN","WEAR","WEED","WEEK","WEIR","WELD","WELL","WELT","WENT","WERE","WERT","WEST","WHAM","WHAT","WHEE","WHEN","WHET","WHOA","WHOM","WICK","WIFE","WILD","WILL","WIND","WINE","WING","WINK","WINO","WIRE","WISE","WISH","WITH","WOLF","WONT","WOOD","WOOL","WORD","WORE","WORK","WORM","WORN","WOVE","WRIT","WYNN","YALE","YANG","YANK","YARD","YARN","YAWL","YAWN","YEAH","YEAR","YELL","YOGA","YOKE"];var P6=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(va,"__esModule",{value:!0});va.keyToRFC1751Mnemonic=va.rfc1751MnemonicToKey=void 0;const vC=at,R6=P6(I6),xC=R6.default,F1=["0000","0001","0010","0011","0100","0101","0110","0111","1000","1001","1010","1011","1100","1101","1110","1111"];function hv(t){let e="";for(const n of t)e+=F1[n>>4]+F1[n&15];return e}function jf(t,e,n){const r=t.substring(e,e+n);let s=0;for(let i=0;i<r.length;i++)s=s*2+r.charCodeAt(i)-48;return s}function L6(t){const e=(0,vC.hexToBytes)(t.replace(/\s+/gu,""));let n=B6(wC(e));const r=[];for(let i=0;i<(8-n.length%8)%8;i++)r.push(0);n=r.concat(n);const s=[];for(let i=0;i<n.length;i+=8){const a=n.slice(i,i+8);let l=hv(a),c=0;for(let u=0;u<64;u+=2)c+=jf(l,u,2);a.push(c<<6&255),l=hv(a);for(let u=0;u<64;u+=11)s.push(xC[jf(l,u,11)])}return s.join(" ")}va.keyToRFC1751Mnemonic=L6;function M6(t){const e=t.split(" ");let n=[];for(let s=0;s<e.length;s+=6){const{subKey:i,word:a}=D6(e,s),l=hv(i);let c=0;for(let h=0;h<64;h+=2)c+=jf(l,h,2);const u=jf(l,64,2),d=c&3;if(u!==d)throw new Error(`Parity error at ${a}`);n=n.concat(i.slice(0,8))}return wC(Uint8Array.from(n))}va.rfc1751MnemonicToKey=M6;function D6(t,e){const n=t.slice(e,e+6);let r=0;const s=[0,0,0,0,0,0,0,0,0];let i="";for(i of n){const l=xC.indexOf(i.toUpperCase());if(l===-1)throw new TypeError(`Expected an RFC1751 word, but received '${i}'. For the full list of words in the RFC1751 encoding see https://datatracker.ietf.org/doc/html/rfc1751`);const c=(8-(r+11)%8)%8,u=l<<c,d=u>>16,h=u>>8&255,f=u&255,m=Math.floor(r/8);c>5?(s[m]|=d,s[m+1]|=h,s[m+2]|=f):c>-3?(s[m]|=h,s[m+1]|=f):s[m]|=f,r+=11}return{subKey:s.slice(),word:i}}function B6(t){return Array.prototype.slice.call(t)}function oh(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function F6(t){const e=t.length;for(let n=0;n<e;n+=8)oh(t,n,n+7),oh(t,n+1,n+6),oh(t,n+2,n+5),oh(t,n+3,n+4);return t}function wC(t){const e=F6(t);return(0,vC.concat)([e.slice(8,16),e.slice(0,8)])}var xa={};Object.defineProperty(xa,"__esModule",{value:!0});xa.multisign=xa.verifySignature=void 0;const U6=at,$6=$n,V6=Un,ru=Nr,z6=vo,Xh=je,H6=hd;function W6(t){if(t.length===0)throw new Xh.ValidationError("There were 0 transactions to multisign");const e=t.map(n=>bC(n));return e.forEach(n=>{if((0,H6.validate)(n),n.Signers==null||n.Signers.length===0)throw new Xh.ValidationError("For multisigning all transactions must include a Signers field containing an array of signatures. You may have forgotten to pass the 'forMultisign' parameter when signing.");if(n.SigningPubKey!=="")throw new Xh.ValidationError("SigningPubKey must be an empty string for all transactions when multisigning.")}),K6(e),(0,ru.encode)(q6(e))}xa.multisign=W6;function X6(t,e){const n=bC(t);let r=e;if(typeof n.TxnSignature!="string"||!n.TxnSignature)throw new Error("Transaction is missing a signature, TxnSignature");if(!r){if(typeof n.SigningPubKey!="string"||!n.SigningPubKey)throw new Error("Transaction is missing a public key, SigningPubKey");r=n.SigningPubKey}return(0,z6.verify)((0,ru.encodeForSigning)(n),n.TxnSignature,r)}xa.verifySignature=X6;function K6(t){const e=JSON.stringify(Object.assign(Object.assign({},t[0]),{Signers:null}));if(t.slice(1).some(n=>JSON.stringify(Object.assign(Object.assign({},n),{Signers:null}))!==e))throw new Xh.ValidationError("txJSON is not the same for all signedTransactions")}function q6(t){const e=t.flatMap(n=>{var r;return(r=n.Signers)!==null&&r!==void 0?r:[]}).sort(G6);return Object.assign(Object.assign({},t[0]),{Signers:e})}function G6(t,e){return U1(t.Signer.Account).comparedTo(U1(e.Signer.Account))}const Y6=16;function U1(t){const e=(0,U6.bytesToHex)((0,V6.decodeAccountID)(t));return new $6.BigNumber(e,Y6)}function bC(t){return typeof t=="object"?(0,ru.decode)((0,ru.encode)(t)):(0,ru.decode)(t)}var _C=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Oa,"__esModule",{value:!0});Oa.Wallet=void 0;const J6=iC,$1=bo,Q6=Fp,V1=at,Z6=_C($n),kf=Un,fv=Nr,yl=vo,pv=_C(dd),su=je,e$=hd,t$=id,n$=ya,r$=xr,s$=va,i$=xa,cg=pv.default.ed25519,o$="m/44'/144'/0'/0/0";function a$(t){if(!(t.privateKey instanceof Uint8Array))throw new su.ValidationError("Unable to derive privateKey from mnemonic input");if(!(t.publicKey instanceof Uint8Array))throw new su.ValidationError("Unable to derive publicKey from mnemonic input")}class Dr{constructor(e,n,r={}){this.publicKey=e,this.privateKey=n,this.classicAddress=r.masterAddress?(0,t$.ensureClassicAddress)(r.masterAddress):(0,yl.deriveAddress)(e),this.seed=r.seed}get address(){return this.classicAddress}static generate(e=cg){if(!Object.values(pv.default).includes(e))throw new su.ValidationError("Invalid cryptographic signing algorithm");const n=(0,yl.generateSeed)({algorithm:e});return Dr.fromSeed(n,{algorithm:e})}static fromSeed(e,n={}){return Dr.deriveWallet(e,{algorithm:n.algorithm,masterAddress:n.masterAddress})}static fromEntropy(e,n={}){var r;const s=(r=n.algorithm)!==null&&r!==void 0?r:cg,i={entropy:Uint8Array.from(e),algorithm:s},a=(0,yl.generateSeed)(i);return Dr.deriveWallet(a,{algorithm:s,masterAddress:n.masterAddress})}static fromMnemonic(e,n={}){var r;if(n.mnemonicEncoding==="rfc1751")return Dr.fromRFC1751Mnemonic(e,{masterAddress:n.masterAddress,algorithm:n.algorithm});if(!(0,$1.validateMnemonic)(e,Q6.wordlist))throw new su.ValidationError("Unable to parse the given mnemonic using bip39 encoding");const s=(0,$1.mnemonicToSeedSync)(e),a=J6.HDKey.fromMasterSeed(s).derive((r=n.derivationPath)!==null&&r!==void 0?r:o$);a$(a);const l=(0,V1.bytesToHex)(a.publicKey),c=(0,V1.bytesToHex)(a.privateKey);return new Dr(l,`00${c}`,{masterAddress:n.masterAddress})}static fromRFC1751Mnemonic(e,n){const r=(0,s$.rfc1751MnemonicToKey)(e);let s;n.algorithm===pv.default.ed25519?s="ed25519":s="secp256k1";const i=(0,kf.encodeSeed)(r,s);return Dr.fromSeed(i,{masterAddress:n.masterAddress,algorithm:n.algorithm})}static deriveWallet(e,n={}){var r;const{publicKey:s,privateKey:i}=(0,yl.deriveKeypair)(e,{algorithm:(r=n.algorithm)!==null&&r!==void 0?r:cg});return new Dr(s,i,{seed:e,masterAddress:n.masterAddress})}sign(e,n){let r=!1;typeof n=="string"&&n.startsWith("X")?r=n:n&&(r=this.classicAddress);const s=(0,n$.omitBy)(Object.assign({},e),l=>l==null);if(s.TxnSignature||s.Signers)throw new su.ValidationError('txJSON must not contain "TxnSignature" or "Signers" properties');l$(s),(0,e$.validate)(s);const i=Object.assign({},s);if(i.SigningPubKey=r?"":this.publicKey,r){const l={Account:r,SigningPubKey:this.publicKey,TxnSignature:z1(i,this.privateKey,r)};i.Signers=[{Signer:l}]}else i.TxnSignature=z1(i,this.privateKey);const a=(0,fv.encode)(i);return{tx_blob:a,hash:(0,r$.hashSignedTx)(a)}}verifyTransaction(e){return(0,i$.verifySignature)(e,this.publicKey)}getXAddress(e=!1,n=!1){return(0,kf.classicAddressToXAddress)(this.classicAddress,e,n)}}Oa.Wallet=Dr;Dr.fromSecret=Dr.fromSeed;function z1(t,e,n){if(n){const r=(0,kf.isValidXAddress)(n)?(0,kf.xAddressToClassicAddress)(n).classicAddress:n;return(0,yl.sign)((0,fv.encodeForMultisigning)(t,r),e)}return(0,yl.sign)((0,fv.encodeForSigning)(t),e)}function l$(t){t.TransactionType==="Payment"&&typeof t.Amount!="string"&&t.Amount.value.includes(".")&&t.Amount.value.endsWith("0")&&(t.Amount=Object.assign({},t.Amount),t.Amount.value=new Z6.default(t.Amount.value).toString())}var Ki={},EC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultFaucetPath=t.getFaucetHost=t.FaucetNetworkPaths=t.FaucetNetwork=void 0;const e=je;var n;(function(i){i.Testnet="faucet.altnet.rippletest.net",i.Devnet="faucet.devnet.rippletest.net"})(n||(t.FaucetNetwork=n={})),t.FaucetNetworkPaths={[n.Testnet]:"/accounts",[n.Devnet]:"/accounts"};function r(i){const a=i.url;if(a.includes("altnet")||a.includes("testnet"))return n.Testnet;if(a.includes("sidechain-net2"))throw new e.XRPLFaucetError("Cannot fund an account on an issuing chain. Accounts must be created via the bridge.");if(a.includes("devnet"))return n.Devnet;throw new e.XRPLFaucetError("Faucet URL is not defined or inferrable.")}t.getFaucetHost=r;function s(i){return i===void 0?"/accounts":t.FaucetNetworkPaths[i]||"/accounts"}t.getDefaultFaucetPath=s})(EC);var $l=ge&&ge.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Ki,"__esModule",{value:!0});Ki.requestFunding=Ki.getStartingBalance=Ki.generateWalletToFund=void 0;const c$=Un,Al=je,H1=EC,u$=Oa,SC=1,NC=20;function d$(t){return t&&(0,c$.isValidClassicAddress)(t.classicAddress)?t:u$.Wallet.generate()}Ki.generateWalletToFund=d$;function h$(t,e){return $l(this,void 0,void 0,function*(){let n=0;try{n=Number(yield t.getXrpBalance(e))}catch{}return n})}Ki.getStartingBalance=h$;function f$(t,e,n,r,s){var i,a,l;return $l(this,void 0,void 0,function*(){const c=(i=t.faucetHost)!==null&&i!==void 0?i:(0,H1.getFaucetHost)(e);if(!c)throw new Al.XRPLFaucetError("No faucet hostname could be derived");const u=(a=t.faucetPath)!==null&&a!==void 0?a:(0,H1.getDefaultFaucetPath)(c),d=yield fetch(`https://${c}${u}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),h=yield d.json();if(d.ok&&(!((l=d.headers.get("Content-Type"))===null||l===void 0)&&l.startsWith("application/json"))){const f=h.account.classicAddress;return p$(e,f,r,n)}return m$(d,h)})}Ki.requestFunding=f$;function p$(t,e,n,r){return $l(this,void 0,void 0,function*(){if(!e)return Promise.reject(new Al.XRPLFaucetError("The faucet account is undefined"));try{const s=yield g$(t,e,r);if(s>r)return{wallet:n,balance:s};throw new Al.XRPLFaucetError(`Unable to fund address with faucet after waiting ${SC*NC} seconds`)}catch(s){throw s instanceof Error?new Al.XRPLFaucetError(s.message):s}})}function m$(t,e){return $l(this,void 0,void 0,function*(){return Promise.reject(new Al.XRPLFaucetError(`Request failed: ${JSON.stringify({body:e||{},contentType:t.headers.get("Content-Type"),statusCode:t.status})}`))})}function g$(t,e,n){return $l(this,void 0,void 0,function*(){return new Promise((r,s)=>{let i=NC;const a=setInterval(()=>$l(this,void 0,void 0,function*(){i<0?(clearInterval(a),r(n)):i-=1;try{let l;try{l=Number(yield t.getXrpBalance(e))}catch{}l>n&&(clearInterval(a),r(l))}catch(l){clearInterval(a),l instanceof Error&&s(new Al.XRPLFaucetError(`Unable to check if the address ${e} balance has increased. Error: ${l.message}`)),s(l)}}),SC*1e3)})})}var TC={},Sw={};Object.defineProperty(Sw,"__esModule",{value:!0});const y$=Lx;class fd extends y$.EventEmitter{constructor(e,n,r){super(),this.ws=new WebSocket(e),this.ws.onclose=s=>{let i;s.reason&&(i=new TextEncoder().encode(s.reason)),this.emit("close",s.code,i)},this.ws.onopen=()=>{this.emit("open")},this.ws.onerror=s=>{this.emit("error",s)},this.ws.onmessage=s=>{this.emit("message",s.data)}}get readyState(){return this.ws.readyState}close(e,n){this.readyState===1&&this.ws.close(e,n)}send(e){this.ws.send(e)}}fd.CONNECTING=0;fd.OPEN=1;fd.CLOSING=2;fd.CLOSED=3;Sw.default=fd;var Nw={},v$=ge&&ge.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Nw,"__esModule",{value:!0});class x${constructor(){this.promisesAwaitingConnection=[]}resolveAllAwaiting(){this.promisesAwaitingConnection.map(({resolve:e})=>e()),this.promisesAwaitingConnection=[]}rejectAllAwaiting(e){this.promisesAwaitingConnection.map(({reject:n})=>n(e)),this.promisesAwaitingConnection=[]}awaitConnection(){return v$(this,void 0,void 0,function*(){return new Promise((e,n)=>{this.promisesAwaitingConnection.push({resolve:e,reject:n})})})}}Nw.default=x$;var Tw={};Object.defineProperty(Tw,"__esModule",{value:!0});const w$=100,b$=1e3;class _${constructor(e={}){var n,r;this.factor=2,this.numAttempts=0,this.ms=(n=e.min)!==null&&n!==void 0?n:w$,this.max=(r=e.max)!==null&&r!==void 0?r:b$}get attempts(){return this.numAttempts}duration(){const e=this.ms*Math.pow(this.factor,this.numAttempts);return this.numAttempts+=1,Math.floor(Math.min(e,this.max))}reset(){this.numAttempts=0}}Tw.default=_$;var Aw={},E$=ge&&ge.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Aw,"__esModule",{value:!0});const gi=je;class S${constructor(){this.nextId=0,this.promisesAwaitingResponse=new Map}addPromise(e,n){return E$(this,void 0,void 0,function*(){return new Promise((r,s)=>{this.promisesAwaitingResponse.set(e,{resolve:r,reject:s,timer:n})})})}resolve(e,n){const r=this.promisesAwaitingResponse.get(e);if(r==null)throw new gi.XrplError(`No existing promise with id ${e}`,{type:"resolve",response:n});clearTimeout(r.timer),r.resolve(n),this.deletePromise(e)}reject(e,n){const r=this.promisesAwaitingResponse.get(e);if(r==null)throw new gi.XrplError(`No existing promise with id ${e}`,{type:"reject",error:n});clearTimeout(r.timer),r.reject(n),this.deletePromise(e)}rejectAll(e){this.promisesAwaitingResponse.forEach((n,r,s)=>{this.reject(r,e),this.deletePromise(r)})}createRequest(e,n){let r;e.id==null?(r=this.nextId,this.nextId+=1):r=e.id;const s=JSON.stringify(Object.assign(Object.assign({},e),{id:r})),i=setTimeout(()=>{this.reject(r,new gi.TimeoutError(`Timeout for request: ${JSON.stringify(e)} with id ${r}`,e))},n);if(i.unref&&i.unref(),this.promisesAwaitingResponse.has(r))throw clearTimeout(i),new gi.XrplError(`Response with id '${r}' is already pending`,e);const a=new Promise((l,c)=>{this.promisesAwaitingResponse.set(r,{resolve:l,reject:c,timer:i})});return[r,s,a]}handleResponse(e){var n,r;if(e.id==null||!(typeof e.id=="string"||typeof e.id=="number"))throw new gi.ResponseFormatError("valid id not found in response",e);if(this.promisesAwaitingResponse.has(e.id)){if(e.status==null){const s=new gi.ResponseFormatError("Response has no status");this.reject(e.id,s)}if(e.status==="error"){const s=e,i=new gi.RippledError((n=s.error_message)!==null&&n!==void 0?n:s.error,s);this.reject(e.id,i);return}if(e.status!=="success"){const s=new gi.ResponseFormatError(`unrecognized response.status: ${(r=e.status)!==null&&r!==void 0?r:""}`,e);this.reject(e.id,s);return}delete e.status,this.resolve(e.id,e)}}deletePromise(e){this.promisesAwaitingResponse.delete(e)}}Aw.default=S$;(function(t){var e=ge&&ge.__awaiter||function(j,y,x,b){function v(A){return A instanceof x?A:new x(function(E){E(A)})}return new(x||(x=Promise))(function(A,E){function L(U){try{ee(b.next(U))}catch(G){E(G)}}function Y(U){try{ee(b.throw(U))}catch(G){E(G)}}function ee(U){U.done?A(U.value):v(U.value).then(L,Y)}ee((b=b.apply(j,y||[])).next())})},n=ge&&ge.__importDefault||function(j){return j&&j.__esModule?j:{default:j}};Object.defineProperty(t,"__esModule",{value:!0}),t.Connection=t.INTENTIONAL_DISCONNECT_CODE=void 0;const r=at,s=n(Sw),i=Lx,a=je,l=n(Nw),c=n(Tw),u=n(Aw),d=60,h=20,f=5;t.INTENTIONAL_DISCONNECT_CODE=4e3;function m(j,y){const x={agent:y.agent};y.headers&&(x.headers=y.headers),y.authorization!=null&&(x.headers=Object.assign(Object.assign({},x.headers),{Authorization:`Basic ${btoa(y.authorization)}`}));const b=Object.assign({},x);return new s.default(j,b)}function _(j,y){return e(this,void 0,void 0,function*(){return new Promise((x,b)=>{j.send(y,v=>{v?b(new a.DisconnectedError(v.message,v)):x()})})})}class S extends i.EventEmitter{constructor(y,x={}){super(),this.ws=null,this.reconnectTimeoutID=null,this.heartbeatIntervalID=null,this.retryConnectionBackoff=new c.default({min:100,max:d*1e3}),this.requestManager=new u.default,this.connectionManager=new l.default,this.trace=()=>{},this.url=y,this.config=Object.assign({timeout:h*1e3,connectionTimeout:f*1e3},x),typeof x.trace=="function"?this.trace=x.trace:x.trace&&(this.trace=console.log)}get state(){return this.ws?this.ws.readyState:s.default.CLOSED}get shouldBeConnected(){return this.ws!==null}isConnected(){return this.state===s.default.OPEN}connect(){return e(this,void 0,void 0,function*(){if(this.isConnected())return Promise.resolve();if(this.state===s.default.CONNECTING)return this.connectionManager.awaitConnection();if(!this.url)return Promise.reject(new a.ConnectionError("Cannot connect because no server was specified"));if(this.ws!=null)return Promise.reject(new a.XrplError("Websocket connection never cleaned up.",{state:this.state}));const y=setTimeout(()=>{this.onConnectionFailed(new a.ConnectionError(`Error: connect() timed out after ${this.config.connectionTimeout} ms. If your internet connection is working, the rippled server may be blocked or inaccessible. You can also try setting the 'connectionTimeout' option in the Client constructor.`))},this.config.connectionTimeout);if(this.ws=m(this.url,this.config),this.ws==null)throw new a.XrplError("Connect: created null websocket");return this.ws.on("error",x=>this.onConnectionFailed(x)),this.ws.on("error",()=>clearTimeout(y)),this.ws.on("close",x=>this.onConnectionFailed(x)),this.ws.on("close",()=>clearTimeout(y)),this.ws.once("open",()=>{this.onceOpen(y)}),this.connectionManager.awaitConnection()})}disconnect(){return e(this,void 0,void 0,function*(){return this.clearHeartbeatInterval(),this.reconnectTimeoutID!==null&&(clearTimeout(this.reconnectTimeoutID),this.reconnectTimeoutID=null),this.state===s.default.CLOSED||this.ws==null?Promise.resolve(void 0):new Promise(y=>{this.ws==null&&y(void 0),this.ws!=null&&this.ws.once("close",x=>y(x)),this.ws!=null&&this.state!==s.default.CLOSING&&this.ws.close(t.INTENTIONAL_DISCONNECT_CODE)})})}reconnect(){return e(this,void 0,void 0,function*(){this.emit("reconnect"),yield this.disconnect(),yield this.connect()})}request(y,x){return e(this,void 0,void 0,function*(){if(!this.shouldBeConnected||this.ws==null)throw new a.NotConnectedError(JSON.stringify(y),y);const[b,v,A]=this.requestManager.createRequest(y,x??this.config.timeout);return this.trace("send",v),_(this.ws,v).catch(E=>{this.requestManager.reject(b,E)}),A})}getUrl(){var y;return(y=this.url)!==null&&y!==void 0?y:""}onMessage(y){this.trace("receive",y);let x;try{x=JSON.parse(y)}catch(b){b instanceof Error&&this.emit("error","badMessage",b.message,y);return}if(x.type==null&&x.error){this.emit("error",x.error,x.error_message,x);return}if(x.type&&this.emit(x.type,x),x.type==="response")try{this.requestManager.handleResponse(x)}catch(b){b instanceof Error?this.emit("error","badMessage",b.message,y):this.emit("error","badMessage",b,b)}}onceOpen(y){return e(this,void 0,void 0,function*(){if(this.ws==null)throw new a.XrplError("onceOpen: ws is null");this.ws.removeAllListeners(),clearTimeout(y),this.ws.on("message",x=>this.onMessage(x)),this.ws.on("error",x=>this.emit("error","websocket",x.message,x)),this.ws.once("close",(x,b)=>{if(this.ws==null)throw new a.XrplError("onceClose: ws is null");this.clearHeartbeatInterval(),this.requestManager.rejectAll(new a.DisconnectedError(`websocket was closed, ${b?(0,r.hexToString)((0,r.bytesToHex)(b)):""}`)),this.ws.removeAllListeners(),this.ws=null,x===void 0?this.emit("disconnected",1011):this.emit("disconnected",x),x!==t.INTENTIONAL_DISCONNECT_CODE&&x!==void 0&&this.intentionalDisconnect()});try{this.retryConnectionBackoff.reset(),this.startHeartbeatInterval(),this.connectionManager.resolveAllAwaiting(),this.emit("connected")}catch(x){x instanceof Error&&(this.connectionManager.rejectAllAwaiting(x),yield this.disconnect().catch(()=>{}))}})}intentionalDisconnect(){const y=this.retryConnectionBackoff.duration();this.trace("reconnect",`Retrying connection in ${y}ms.`),this.emit("reconnecting",this.retryConnectionBackoff.attempts),this.reconnectTimeoutID=setTimeout(()=>{this.reconnect().catch(x=>{this.emit("error","reconnect",x.message,x)})},y)}clearHeartbeatInterval(){this.heartbeatIntervalID&&clearInterval(this.heartbeatIntervalID)}startHeartbeatInterval(){this.clearHeartbeatInterval(),this.heartbeatIntervalID=setInterval(()=>{this.heartbeat()},this.config.timeout)}heartbeat(){return e(this,void 0,void 0,function*(){this.request({command:"ping"}).catch(()=>e(this,void 0,void 0,function*(){return this.reconnect().catch(y=>{this.emit("error","reconnect",y.message,y)})}))})}onConnectionFailed(y){this.ws&&(this.ws.removeAllListeners(),this.ws.on("error",()=>{}),this.ws.close(),this.ws=null),typeof y=="number"?this.connectionManager.rejectAllAwaiting(new a.NotConnectedError(`Connection failed with code ${y}.`,{code:y})):y!=null&&y.message?this.connectionManager.rejectAllAwaiting(new a.NotConnectedError(y.message,y)):this.connectionManager.rejectAllAwaiting(new a.NotConnectedError("Connection failed."))}}t.Connection=S})(TC);var Vl={},N$=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Vl,"__esModule",{value:!0});Vl.handleStreamPartialPayment=Vl.handlePartialPayment=void 0;const ah=N$($n),T$=Nr,$c=hd,A$=Xt,AC=2001;function C$(t,e){if(typeof t=="string"&&typeof e=="string")return t===e;if(typeof t=="string"||typeof e=="string")return!1;if((0,$c.isMPTAmount)(t)&&(0,$c.isMPTAmount)(e)){const s=new ah.default(t.value),i=new ah.default(e.value);return t.mpt_issuance_id===e.mpt_issuance_id&&s.isEqualTo(i)}if((0,$c.isMPTAmount)(t)||(0,$c.isMPTAmount)(e))return!1;const n=new ah.default(t.value),r=new ah.default(e.value);return t.currency===e.currency&&t.issuer===e.issuer&&n.isEqualTo(r)}function Lu(t,e){var n;if(t==null||e==null||t.TransactionType!=="Payment")return!1;let r=e;if(typeof r=="string"){if(r==="unavailable")return!1;r=(0,T$.decode)(r)}if(!(typeof t.Flags=="number"?(0,A$.isFlagEnabled)(t.Flags,$c.PaymentFlags.tfPartialPayment):(n=t.Flags)===null||n===void 0?void 0:n.tfPartialPayment))return!1;const i=r.delivered_amount,a=t.DeliverMax;return i===void 0?!1:!C$(i,a)}function j$(t){return Lu(t.result.tx_json,t.result.meta)}function k$(t){return Lu(t.result.tx_json,t.result.metadata)}function O$(t){const{transactions:e}=t.result;return e.some(r=>{if(r.tx_json!=null){const i=r;return Lu(i.tx_json,i.meta)}const s=r;return Lu(s.tx,s.meta)})}function I$(t,e){switch(t){case"tx":return j$(e);case"transaction_entry":return k$(e);case"account_tx":return O$(e);default:return!1}}function P$(t,e){var n;if(I$(t,e)){const r=(n=e.warnings)!==null&&n!==void 0?n:[],s={id:AC,message:"This response contains a Partial Payment"};r.push(s),e.warnings=r}}Vl.handlePartialPayment=P$;function R$(t,e){var n,r;if(Lu((n=t.tx_json)!==null&&n!==void 0?n:t.transaction,t.meta)){const s=(r=t.warnings)!==null&&r!==void 0?r:[],i={id:AC,message:"This response contains a Partial Payment"};s.push(i),t.warnings=s,e("Partial payment received",JSON.stringify(t))}}Vl.handleStreamPartialPayment=R$;var on=ge&&ge.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(up,"__esModule",{value:!0});up.Client=void 0;const L$=Lx,Ro=je,M$=Mx,D$=xs,Lo=c2,Ka=On,B$=Dp,Pr=Wt,ug=Tp,F$=Oa,U$=Ki,W1=TC,X1=Vl;function $$(t){switch(t){case"account_channels":return"channels";case"account_lines":return"lines";case"account_objects":return"account_objects";case"account_tx":return"transactions";case"account_offers":case"book_offers":return"offers";case"ledger_data":return"state";default:return null}}function V$(t,e,n){if(e>n)throw new Error("Illegal clamp bounds");return Math.min(Math.max(t,e),n)}const z$=1.2,H$="2",W$=10,X$=400,K$=1e3;class q$ extends L$.EventEmitter{constructor(e,n={}){var r,s;if(super(),this.apiVersion=M$.DEFAULT_API_VERSION,typeof e!="string"||!/wss?(?:\+unix)?:\/\//u.exec(e))throw new Ro.ValidationError("server URI must start with `wss://`, `ws://`, `wss+unix://`, or `ws+unix://`.");this.feeCushion=(r=n.feeCushion)!==null&&r!==void 0?r:z$,this.maxFeeXRP=(s=n.maxFeeXRP)!==null&&s!==void 0?s:H$,this.connection=new W1.Connection(e,n),this.connection.on("error",(i,a,l)=>{this.emit("error",i,a,l)}),this.connection.on("reconnect",()=>{this.connection.on("connected",()=>this.emit("connected"))}),this.connection.on("disconnected",i=>{let a=i;a===W1.INTENTIONAL_DISCONNECT_CODE&&(a=K$),this.emit("disconnected",a)}),this.connection.on("ledgerClosed",i=>{this.emit("ledgerClosed",i)}),this.connection.on("transaction",i=>{(0,X1.handleStreamPartialPayment)(i,this.connection.trace),this.emit("transaction",i)}),this.connection.on("validationReceived",i=>{this.emit("validationReceived",i)}),this.connection.on("manifestReceived",i=>{this.emit("manifestReceived",i)}),this.connection.on("peerStatusChange",i=>{this.emit("peerStatusChange",i)}),this.connection.on("consensusPhase",i=>{this.emit("consensusPhase",i)}),this.connection.on("path_find",i=>{this.emit("path_find",i)})}get url(){return this.connection.getUrl()}request(e){var n;return on(this,void 0,void 0,function*(){const r=Object.assign(Object.assign({},e),{account:typeof e.account=="string"?(0,Lo.ensureClassicAddress)(e.account):void 0,api_version:(n=e.api_version)!==null&&n!==void 0?n:this.apiVersion}),s=yield this.connection.request(r);return(0,X1.handlePartialPayment)(e.command,s),s})}requestNextPage(e,n){return on(this,void 0,void 0,function*(){if(!n.result.marker)return Promise.reject(new Ro.NotFoundError("response does not have a next page"));const r=Object.assign(Object.assign({},e),{marker:n.result.marker});return this.request(r)})}on(e,n){return super.on(e,n)}requestAll(e,n){return on(this,void 0,void 0,function*(){const r=n??$$(e.command);if(!r)throw new Ro.ValidationError(`no collect key for command ${e.command}`);const s=e.limit==null?1/0:e.limit;let i=0,a=e.marker;const l=[];do{const c=V$(s-i,W$,X$),u=Object.assign(Object.assign({},e),{limit:c,marker:a}),d=yield this.connection.request(u),h=d.result;if(!(r in h))throw new Ro.XrplError(`${r} not in result`);const f=h[r];a=h.marker,l.push(d),Array.isArray(f)&&(i+=f.length)}while(a&&i<s);return l})}getServerInfo(){var e;return on(this,void 0,void 0,function*(){try{const n=yield this.request({command:"server_info"});this.networkID=(e=n.result.info.network_id)!==null&&e!==void 0?e:void 0,this.buildVersion=n.result.info.build_version}catch(n){console.error(n)}})}connect(){return on(this,void 0,void 0,function*(){return this.connection.connect().then(()=>on(this,void 0,void 0,function*(){yield this.getServerInfo(),this.emit("connected")}))})}disconnect(){return on(this,void 0,void 0,function*(){yield this.connection.disconnect()})}isConnected(){return this.connection.isConnected()}autofill(e,n){return on(this,void 0,void 0,function*(){const r=Object.assign({},e);(0,Ka.setValidAddresses)(r),(0,D$.setTransactionFlagsToNumber)(r);const s=[];if(r.NetworkID==null&&(r.NetworkID=(0,Ka.txNeedsNetworkID)(this)?this.networkID:void 0),r.Sequence==null&&s.push((0,Ka.setNextValidSequenceNumber)(this,r)),r.Fee==null&&s.push((0,Ka.calculateFeePerTransactionType)(this,r,n)),r.LastLedgerSequence==null&&s.push((0,Ka.setLatestValidatedLedgerSequence)(this,r)),r.TransactionType==="AccountDelete"&&s.push((0,Ka.checkAccountDeleteBlockers)(this,r)),r.TransactionType==="Payment"&&r.DeliverMax!=null){if(r.Amount==null&&(r.Amount=r.DeliverMax),r.Amount!=null&&r.Amount!==r.DeliverMax)return Promise.reject(new Ro.ValidationError("PaymentTransaction: Amount and DeliverMax fields must be identical when both are provided"));delete r.DeliverMax}return Promise.all(s).then(()=>r)})}submit(e,n){return on(this,void 0,void 0,function*(){const r=yield(0,Lo.getSignedTx)(this,e,n);return(0,Lo.submitRequest)(this,r,n==null?void 0:n.failHard)})}submitAndWait(e,n){return on(this,void 0,void 0,function*(){const r=yield(0,Lo.getSignedTx)(this,e,n),s=(0,Lo.getLastLedgerSequence)(r);if(s==null)throw new Ro.ValidationError("Transaction must contain a LastLedgerSequence value for reliable submission.");const i=yield(0,Lo.submitRequest)(this,r,n==null?void 0:n.failHard),a=ug.hashes.hashSignedTx(r);return(0,Lo.waitForFinalTransactionOutcome)(this,a,s,i.result.engine_result)})}prepareTransaction(e,n){return on(this,void 0,void 0,function*(){return this.autofill(e,n)})}getXrpBalance(e,n={}){var r;return on(this,void 0,void 0,function*(){const s={command:"account_info",account:e,ledger_index:(r=n.ledger_index)!==null&&r!==void 0?r:"validated",ledger_hash:n.ledger_hash},i=yield this.request(s);return(0,ug.dropsToXrp)(i.result.account_data.Balance)})}getBalances(e,n={}){var r;return on(this,void 0,void 0,function*(){const s=[];let i=Promise.resolve(0);n.peer||(i=this.getXrpBalance(e,{ledger_hash:n.ledger_hash,ledger_index:n.ledger_index}));const a={command:"account_lines",account:e,ledger_index:(r=n.ledger_index)!==null&&r!==void 0?r:"validated",ledger_hash:n.ledger_hash,peer:n.peer,limit:n.limit},l=this.requestAll(a);return yield Promise.all([i,l]).then(([c,u])=>{const d=u.flatMap(h=>(0,B$.formatBalances)(h.result.lines));c!==0&&s.push({currency:"XRP",value:c.toString()}),s.push(...d)}),s.slice(0,n.limit)})}getOrderbook(e,n,r={}){return on(this,void 0,void 0,function*(){(0,Pr.validateOrderbookOptions)(r);const s=(0,Pr.createBookOffersRequest)(e,n,r),i=yield(0,Pr.requestAllOffers)(this,s),a=yield(0,Pr.requestAllOffers)(this,(0,Pr.reverseRequest)(s)),l=(0,Pr.extractOffers)(i),c=(0,Pr.extractOffers)(a),u=(0,Pr.combineOrders)(l,c),{buy:d,sell:h}=(0,Pr.separateBuySellOrders)(u);return{buy:(0,Pr.sortAndLimitOffers)(d,r.limit),sell:(0,Pr.sortAndLimitOffers)(h,r.limit)}})}getLedgerIndex(){return on(this,void 0,void 0,function*(){return(yield this.request({command:"ledger",ledger_index:"validated"})).result.ledger_index})}fundWallet(e,n={}){return on(this,void 0,void 0,function*(){if(!this.isConnected())throw new Ro.RippledError("Client not connected, cannot call faucet");const r=!!e,s=e&&(0,ug.isValidClassicAddress)(e.classicAddress)?e:F$.Wallet.generate(),i={destination:s.classicAddress,xrpAmount:n.amount,usageContext:n.usageContext,userAgent:"xrpl.js"};let a=0;if(r)try{a=Number(yield this.getXrpBalance(s.classicAddress))}catch{}return(0,U$.requestFunding)(n,this,a,s,i)})}}up.Client=q$;var CC={},jC={},Sm={};Object.defineProperty(Sm,"__esModule",{value:!0});Sm.AMENDMENTS_ID=void 0;Sm.AMENDMENTS_ID="7DB0788C020F02780A673DC74757F23823FA3014C1866E72CC4CD8B226CD6EF4";var Nm={};Object.defineProperty(Nm,"__esModule",{value:!0});Nm.FEE_SETTINGS_ID=void 0;Nm.FEE_SETTINGS_ID="4BC50C9B0D8515D3EAAE1E74B29A95804346C491EE1A95BF25E4AAB854A6A651";var Tm={};Object.defineProperty(Tm,"__esModule",{value:!0});Tm.NEGATIVE_UNL_ID=void 0;Tm.NEGATIVE_UNL_ID="2E8A59AA9D3B5B186B0B9E0F62E6C02587CA74A4D778938E957B6357D364B244";var Am={};Object.defineProperty(Am,"__esModule",{value:!0});Am.RippleStateFlags=void 0;var K1;(function(t){t[t.lsfLowReserve=65536]="lsfLowReserve",t[t.lsfHighReserve=131072]="lsfHighReserve",t[t.lsfLowAuth=262144]="lsfLowAuth",t[t.lsfHighAuth=524288]="lsfHighAuth",t[t.lsfLowNoRipple=1048576]="lsfLowNoRipple",t[t.lsfHighNoRipple=2097152]="lsfHighNoRipple",t[t.lsfLowFreeze=4194304]="lsfLowFreeze",t[t.lsfHighFreeze=8388608]="lsfHighFreeze",t[t.lsfAMMNode=16777216]="lsfAMMNode"})(K1||(Am.RippleStateFlags=K1={}));var Cm={};Object.defineProperty(Cm,"__esModule",{value:!0});Cm.SignerListFlags=void 0;var q1;(function(t){t[t.lsfOneOwnerCount=65536]="lsfOneOwnerCount"})(q1||(Cm.SignerListFlags=q1={}));(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SignerListFlags=t.RippleStateFlags=t.OfferFlags=t.NEGATIVE_UNL_ID=t.FEE_SETTINGS_ID=t.AMENDMENTS_ID=t.AccountRootFlags=void 0;const e=Yu;Object.defineProperty(t,"AccountRootFlags",{enumerable:!0,get:function(){return e.AccountRootFlags}});const n=Sm;Object.defineProperty(t,"AMENDMENTS_ID",{enumerable:!0,get:function(){return n.AMENDMENTS_ID}});const r=Nm;Object.defineProperty(t,"FEE_SETTINGS_ID",{enumerable:!0,get:function(){return r.FEE_SETTINGS_ID}});const s=Tm;Object.defineProperty(t,"NEGATIVE_UNL_ID",{enumerable:!0,get:function(){return s.NEGATIVE_UNL_ID}});const i=ud;Object.defineProperty(t,"OfferFlags",{enumerable:!0,get:function(){return i.OfferFlags}});const a=Am;Object.defineProperty(t,"RippleStateFlags",{enumerable:!0,get:function(){return a.RippleStateFlags}});const l=Cm;Object.defineProperty(t,"SignerListFlags",{enumerable:!0,get:function(){return l.SignerListFlags}})})(jC);var kC={};Object.defineProperty(kC,"__esModule",{value:!0});(function(t){var e=ge&&ge.__createBinding||(Object.create?function(a,l,c,u){u===void 0&&(u=c);var d=Object.getOwnPropertyDescriptor(l,c);(!d||("get"in d?!l.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return l[c]}}),Object.defineProperty(a,u,d)}:function(a,l,c,u){u===void 0&&(u=c),a[u]=l[c]}),n=ge&&ge.__setModuleDefault||(Object.create?function(a,l){Object.defineProperty(a,"default",{enumerable:!0,value:l})}:function(a,l){a.default=l}),r=ge&&ge.__importStar||function(a){if(a&&a.__esModule)return a;var l={};if(a!=null)for(var c in a)c!=="default"&&Object.prototype.hasOwnProperty.call(a,c)&&e(l,a,c);return n(l,a),l},s=ge&&ge.__exportStar||function(a,l){for(var c in a)c!=="default"&&!Object.prototype.hasOwnProperty.call(l,c)&&e(l,a,c)};Object.defineProperty(t,"__esModule",{value:!0}),t.parseTransactionFlags=t.parseAccountRootFlags=t.setTransactionFlagsToNumber=t.LedgerEntry=void 0,t.LedgerEntry=r(jC);var i=xs;Object.defineProperty(t,"setTransactionFlagsToNumber",{enumerable:!0,get:function(){return i.setTransactionFlagsToNumber}}),Object.defineProperty(t,"parseAccountRootFlags",{enumerable:!0,get:function(){return i.parseAccountRootFlags}}),Object.defineProperty(t,"parseTransactionFlags",{enumerable:!0,get:function(){return i.parseTransactionFlags}}),s(kC,t),s(hd,t),s(Mx,t)})(CC);var jm={},OC={},km={},Zt={};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.parseSecretString=Zt.checkChecksum=Zt.calculateChecksum=Zt.secretToEntropy=Zt.entropyToSecret=Zt.randomSecret=Zt.randomEntropy=void 0;const Of=at;function IC(){return(0,Of.randomBytes)(16)}Zt.randomEntropy=IC;function PC(t,e){return e*(t*2+1)%9}Zt.calculateChecksum=PC;function RC(t,e,n){let r,s;if(typeof e=="string"){if(e.length!==6)throw new Error("value must have a length of 6");r=parseInt(e.slice(5),10),s=parseInt(e.slice(0,5),10)}else{if(typeof n!="number")throw new Error("checksum must be a number when value is a number");r=n,s=e}return s*(t*2+1)%9===r}Zt.checkChecksum=RC;function LC(t){const e=new Array(Math.ceil(t.length/2)),n=Array.from(e,(r,s)=>{const i=t.slice(s*2,(s+1)*2),a=parseInt((0,Of.bytesToHex)(i),16);return"0".repeat(5-String(a).length)+String(a)+String(PC(s,a))});if(n.length!==8)throw new Error("Chucks must have 8 digits");return n}Zt.entropyToSecret=LC;function G$(){return LC(IC())}Zt.randomSecret=G$;function Y$(t){return(0,Of.concat)(t.map((e,n)=>{const r=Number(e.slice(0,5)),s=Number(e.slice(5));if(e.length!==6)throw new Error("Invalid secret: number invalid");if(!RC(n,r,s))throw new Error("Invalid secret part: checksum invalid");const i=`0000${r.toString(16)}`.slice(-4);return(0,Of.hexToBytes)(i)}))}Zt.secretToEntropy=Y$;function J$(t){const e=t.replace(/[^0-9]/gu,"");if(e.length!==48)throw new Error("Invalid secret string (should contain 8 blocks of 6 digits");return Array.from(new Array(8),(n,r)=>e.slice(r*6,(r+1)*6))}Zt.parseSecretString=J$;Object.defineProperty(km,"__esModule",{value:!0});km.Account=void 0;const dg=vo,lh=Zt;class Q${constructor(e){this._account={familySeed:"",address:"",keypair:{publicKey:"",privateKey:""}},typeof e=="string"?this._secret=(0,lh.parseSecretString)(e):Array.isArray(e)?this._secret=e:e instanceof Uint8Array?this._secret=(0,lh.entropyToSecret)(e):this._secret=(0,lh.randomSecret)(),Z$(this._secret),this.derive()}getSecret(){return this._secret}getSecretString(){return this._secret.join(" ")}getAddress(){return this._account.address}getFamilySeed(){return this._account.familySeed}getKeypair(){return this._account.keypair}toString(){return this.getSecretString()}derive(){try{const e=(0,lh.secretToEntropy)(this._secret);this._account.familySeed=(0,dg.generateSeed)({entropy:e}),this._account.keypair=(0,dg.deriveKeypair)(this._account.familySeed),this._account.address=(0,dg.deriveAddress)(this._account.keypair.publicKey)}catch(e){let n="Unknown Error";throw e instanceof Error&&(n=e.message),new Error(n)}}}km.Account=Q$;function Z$(t){if(t.length!==8)throw new Error("Secret must have 8 numbers");t.forEach(e=>{if(e.length!==6)throw new Error("Each secret number must be 6 digits")})}(function(t){var e=ge&&ge.__createBinding||(Object.create?function(r,s,i,a){a===void 0&&(a=i);var l=Object.getOwnPropertyDescriptor(s,i);(!l||("get"in l?!s.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,a,l)}:function(r,s,i,a){a===void 0&&(a=i),r[a]=s[i]}),n=ge&&ge.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&e(s,r,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(km,t),n(Zt,t)})(OC);var e8=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(jm,"__esModule",{value:!0});jm.walletFromSecretNumbers=void 0;const t8=OC,G1=e8(dd),n8=Oa;function r8(t,e){var n;const r=new t8.Account(t).getFamilySeed(),s={masterAddress:void 0,algorithm:void 0};return e===void 0?s.algorithm=G1.default.secp256k1:(s.masterAddress=e.masterAddress,s.algorithm=(n=e.algorithm)!==null&&n!==void 0?n:G1.default.secp256k1),n8.Wallet.fromSecret(r,s)}jm.walletFromSecretNumbers=r8;(function(t){var e=ge&&ge.__createBinding||(Object.create?function(u,d,h,f){f===void 0&&(f=h);var m=Object.getOwnPropertyDescriptor(d,h);(!m||("get"in m?!d.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return d[h]}}),Object.defineProperty(u,f,m)}:function(u,d,h,f){f===void 0&&(f=h),u[f]=d[h]}),n=ge&&ge.__exportStar||function(u,d){for(var h in u)h!=="default"&&!Object.prototype.hasOwnProperty.call(d,h)&&e(d,u,h)},r=ge&&ge.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(t,"__esModule",{value:!0}),t.rfc1751MnemonicToKey=t.keyToRFC1751Mnemonic=t.walletFromSecretNumbers=t.Wallet=t.ECDSA=t.Client=void 0;var s=up;Object.defineProperty(t,"Client",{enumerable:!0,get:function(){return s.Client}}),n(CC,t),n(Tp,t);var i=dd;Object.defineProperty(t,"ECDSA",{enumerable:!0,get:function(){return r(i).default}}),n(je,t);var a=Oa;Object.defineProperty(t,"Wallet",{enumerable:!0,get:function(){return a.Wallet}});var l=jm;Object.defineProperty(t,"walletFromSecretNumbers",{enumerable:!0,get:function(){return l.walletFromSecretNumbers}});var c=va;Object.defineProperty(t,"keyToRFC1751Mnemonic",{enumerable:!0,get:function(){return c.keyToRFC1751Mnemonic}}),Object.defineProperty(t,"rfc1751MnemonicToKey",{enumerable:!0,get:function(){return c.rfc1751MnemonicToKey}}),n(xa,t)})(Ve);async function s8(t){var e;if(!t)return 0;try{const n=new Ve.Client("wss://xrplcluster.com");await n.connect();const r=await n.request({command:"account_info",account:t,ledger_index:"validated"});return await n.disconnect(),parseFloat(r.result.account_data.Balance)/1e6}catch(n){if(((e=n.data)==null?void 0:e.error)==="actNotFound")return 0;throw console.error("Error fetching XRP balance:",n),n}}function i8({currentPage:t,onNavigate:e}){const[n,r]=z.useState(null),[s,i]=z.useState(!0),[a,l]=z.useState(null),[c,u]=z.useState(0),[d,h]=z.useState(!1),f=z.useRef(null);z.useEffect(()=>{const y=x=>{f.current&&!f.current.contains(x.target)&&h(!1)};return d&&(document.addEventListener("mousedown",y),document.addEventListener("touchstart",y)),()=>{document.removeEventListener("mousedown",y),document.removeEventListener("touchstart",y)}},[d]),z.useEffect(()=>{S();const y=setInterval(S,3e4);m();const x=()=>m();return window.addEventListener("walletConnected",x),window.addEventListener("walletDisconnected",x),()=>{clearInterval(y),window.removeEventListener("walletConnected",x),window.removeEventListener("walletDisconnected",x)}},[]),z.useEffect(()=>{if(a!=null&&a.address){_();const y=setInterval(_,1e4);return()=>clearInterval(y)}else u(0)},[a]);const m=()=>{const y=localStorage.getItem("connectedWallet");l(y?JSON.parse(y):null)},_=async()=>{if(a!=null&&a.address)try{const y=await s8(a.address);u(y)}catch(y){console.error("Error fetching wallet balance:",y)}},S=async()=>{try{const y=await DR.get("https://api.coingecko.com/api/v3/simple/price?ids=ripple&vs_currencies=usd&include_24hr_change=true");r({price:y.data.ripple.usd,change:y.data.ripple.usd_24h_change}),i(!1)}catch(y){console.error("Error fetching XRP price:",y),i(!1)}},j=[{id:"dashboard",label:"Dashboard",icon:"📊"},{id:"memes",label:"Memes",icon:"🚀"},{id:"pools",label:"Pools",icon:"🏊"},{id:"trade",label:"Trade",icon:"💱"},{id:"bottrader",label:"Bot Trader",icon:"🤖"},{id:"vault",label:"Vault",icon:"🏦"},{id:"mytokens",label:"My Tokens",icon:"💎"},{id:"analytics",label:"Analytics",icon:"📈"},{id:"about",label:"About",icon:"ℹ️"},{id:"wallets",label:"Wallets",icon:"💼"},{id:"setup",label:"Setup",icon:"⚙️"}];return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"hidden lg:block fixed left-0 top-0 h-screen w-64 glass flex-col border-r border-purple-500/20",children:[o.jsxs("div",{className:"p-6 border-b border-purple-500/20",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("h1",{className:"text-3xl font-bold",children:[o.jsx("span",{className:"text-white",children:"MEME"}),o.jsx("span",{className:"bg-gradient-to-r from-purple-400 to-purple-600 bg-clip-text text-transparent",children:"KINGS"})]}),o.jsx("span",{className:"text-3xl",style:{filter:"drop-shadow(0 0 8px rgba(168, 85, 247, 0.8))",textShadow:"0 0 12px rgba(168, 85, 247, 0.6)"},children:"👑"})]}),o.jsx("p",{className:"text-purple-300/60 text-xs mt-1",children:"XRPL Meme Token Factory"})]}),o.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:j.map(y=>o.jsxs("button",{onClick:()=>e(y.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-300 ${t===y.id?"bg-gradient-to-r from-purple-600 to-purple-700 text-white shadow-lg shadow-purple-500/50":"text-purple-300 hover:bg-purple-900/30 hover:text-purple-200"}`,children:[o.jsx("span",{className:"text-xl",children:y.icon}),o.jsx("span",{className:"font-medium",children:y.label})]},y.id))}),o.jsxs("div",{className:"p-4 border-t border-purple-500/20 space-y-3",children:[a&&o.jsxs("div",{className:"glass rounded-lg p-4 bg-green-500/10 border border-green-500/30",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"}),o.jsx("span",{className:"text-green-300 text-xs font-medium",children:"Connected Wallet"})]}),o.jsx("div",{className:"text-purple-200 font-bold text-sm mb-1",children:a.name}),o.jsxs("div",{className:"text-purple-300 text-xs font-mono break-all",children:[a.address.slice(0,10),"...",a.address.slice(-8)]}),o.jsxs("div",{className:"text-purple-400 text-xs mt-2",children:[c.toFixed(3)," XRP"]})]}),o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-purple-300 text-sm font-medium",children:"XRP/USD"}),!s&&n&&o.jsxs("span",{className:`text-xs font-medium ${n.change>=0?"text-green-400":"text-red-400"}`,children:[n.change>=0?"↑":"↓"," ",Math.abs(n.change).toFixed(2),"%"]})]}),s?o.jsx("div",{className:"text-purple-400 text-lg animate-pulse",children:"Loading..."}):n?o.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:["$",n.price.toFixed(4)]}):o.jsx("div",{className:"text-purple-400 text-sm",children:"Unable to load"})]})]})]}),o.jsxs("div",{ref:f,className:"lg:hidden fixed top-0 left-0 right-0 glass border-b border-purple-500/20 z-50 backdrop-blur-lg",children:[o.jsxs("div",{className:"flex items-center justify-between p-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("h1",{className:"text-2xl font-bold",children:[o.jsx("span",{className:"text-white",children:"MEME"}),o.jsx("span",{className:"bg-gradient-to-r from-purple-400 to-purple-600 bg-clip-text text-transparent",children:"KINGS"})]}),o.jsx("span",{className:"text-2xl",style:{filter:"drop-shadow(0 0 8px rgba(168, 85, 247, 0.8))",textShadow:"0 0 12px rgba(168, 85, 247, 0.6)"},children:"👑"})]}),o.jsx("button",{onClick:()=>h(!d),className:"p-2 rounded-lg text-purple-300 hover:bg-purple-900/30 transition-all duration-200","aria-label":"Toggle menu",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d?o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"}):o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})})]}),o.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${d?"max-h-[calc(100vh-80px)] opacity-100":"max-h-0 opacity-0"}`,children:o.jsxs("div",{className:"px-3 pb-3 space-y-1 max-h-[calc(100vh-100px)] overflow-y-auto",children:[j.map(y=>o.jsxs("button",{onClick:()=>{e(y.id),h(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 ${t===y.id?"bg-gradient-to-r from-purple-600 to-purple-700 text-white shadow-lg":"text-purple-300 hover:bg-purple-900/30"}`,children:[o.jsx("span",{className:"text-xl",children:y.icon}),o.jsx("span",{className:"font-medium",children:y.label})]},y.id)),a&&o.jsxs("div",{className:"glass rounded-lg p-4 bg-green-500/10 border border-green-500/30 mt-3",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"}),o.jsx("span",{className:"text-green-300 text-xs font-medium",children:"Connected Wallet"})]}),o.jsx("div",{className:"text-purple-200 font-bold text-sm mb-1",children:a.name}),o.jsxs("div",{className:"text-purple-300 text-xs font-mono break-all",children:[a.address.slice(0,10),"...",a.address.slice(-8)]}),o.jsxs("div",{className:"text-purple-400 text-xs mt-2",children:[c.toFixed(3)," XRP"]})]}),o.jsxs("div",{className:"glass rounded-lg p-4 mt-2",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-purple-300 text-sm font-medium",children:"XRP/USD"}),!s&&n&&o.jsxs("span",{className:`text-xs font-medium ${n.change>=0?"text-green-400":"text-red-400"}`,children:[n.change>=0?"↑":"↓"," ",Math.abs(n.change).toFixed(2),"%"]})]}),s?o.jsx("div",{className:"text-purple-400 text-lg animate-pulse",children:"Loading..."}):n?o.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:["$",n.price.toFixed(4)]}):o.jsx("div",{className:"text-purple-400 text-sm",children:"Unable to load"})]})]})})]})]})}const o8="modulepreload",a8=function(t){return"/"+t},Y1={},pd=function(e,n,r){if(!n||n.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=a8(i),i in Y1)return;Y1[i]=!0;const a=i.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!r)for(let d=s.length-1;d>=0;d--){const h=s[d];if(h.href===i&&(!a||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":o8,a||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),a)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i})},l8=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>pd(()=>Promise.resolve().then(()=>ic),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Cw extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class J1 extends Cw{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Q1 extends Cw{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Z1 extends Cw{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var mv;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(mv||(mv={}));var c8=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class u8{constructor(e,{headers:n={},customFetch:r,region:s=mv.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=l8(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return c8(this,arguments,void 0,function*(n,r={}){var s;try{const{headers:i,method:a,body:l,signal:c}=r;let u={},{region:d}=r;d||(d=this.region);const h=new URL(`${this.url}/${n}`);d&&d!=="any"&&(u["x-region"]=d,h.searchParams.set("forceFunctionRegion",d));let f;l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",f=l):typeof l=="string"?(u["Content-Type"]="text/plain",f=l):typeof FormData<"u"&&l instanceof FormData?f=l:(u["Content-Type"]="application/json",f=JSON.stringify(l)));const m=yield this.fetch(h.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),i),body:f,signal:c}).catch(y=>{throw y.name==="AbortError"?y:new J1(y)}),_=m.headers.get("x-relay-error");if(_&&_==="true")throw new Q1(m);if(!m.ok)throw new Z1(m);let S=((s=m.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),j;return S==="application/json"?j=yield m.json():S==="application/octet-stream"?j=yield m.blob():S==="text/event-stream"?j=m:S==="multipart/form-data"?j=yield m.formData():j=yield m.text(),{data:j,error:null,response:m}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new J1(i)}:{data:null,error:i,response:i instanceof Z1||i instanceof Q1?i.context:void 0}}})}}var Pn={},jw={},Om={},md={},Im={},Pm={},d8=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},zl=d8();const h8=zl.fetch,MC=zl.fetch.bind(zl),DC=zl.Headers,f8=zl.Request,p8=zl.Response,ic=Object.freeze(Object.defineProperty({__proto__:null,Headers:DC,Request:f8,Response:p8,default:MC,fetch:h8},Symbol.toStringTag,{value:"Module"})),m8=$j(ic);var Rm={};Object.defineProperty(Rm,"__esModule",{value:!0});let g8=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Rm.default=g8;var BC=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pm,"__esModule",{value:!0});const y8=BC(m8),v8=BC(Rm);let x8=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=y8.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,c,u;let d=null,h=null,f=null,m=i.status,_=i.statusText;if(i.ok){if(this.method!=="HEAD"){const x=await i.text();x===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?h=x:h=JSON.parse(x))}const j=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),y=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");j&&y&&y.length>1&&(f=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,m=406,_="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const j=await i.text();try{d=JSON.parse(j),Array.isArray(d)&&i.status===404&&(h=[],d=null,m=200,_="OK")}catch{i.status===404&&j===""?(m=204,_="No Content"):d={message:j}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,m=200,_="OK"),d&&this.shouldThrowOnError)throw new v8.default(d)}return{error:d,data:h,count:f,status:m,statusText:_}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,l,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};Pm.default=x8;var w8=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Im,"__esModule",{value:!0});const b8=w8(Pm);let _8=class extends b8.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var l;const c=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${u}"; options=${c};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Im.default=_8;var E8=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(md,"__esModule",{value:!0});const S8=E8(Im);let N8=class extends S8.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${a}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};md.default=N8;var T8=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Om,"__esModule",{value:!0});const Oc=T8(md);let A8=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(e,n){const{head:r=!1,count:s}=n??{},i=r?"HEAD":"GET";let a=!1;const l=(e??"*").split("").map(c=>/\s/.test(c)&&!a?"":(c==='"'&&(a=!a),c)).join("");return this.url.searchParams.set("select",l),s&&this.headers.append("Prefer",`count=${s}`),new Oc.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var s;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Oc.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var a;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Oc.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new Oc.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Oc.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Om.default=A8;var FC=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(jw,"__esModule",{value:!0});const C8=FC(Om),j8=FC(md);let k8=class UC{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new C8.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new UC(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){var a;let l;const c=new URL(`${this.url}/rpc/${e}`);let u;r||s?(l=r?"HEAD":"GET",Object.entries(n).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{c.searchParams.append(h,f)})):(l="POST",u=n);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new j8.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};jw.default=k8;var oc=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pn,"__esModule",{value:!0});Pn.PostgrestError=Pn.PostgrestBuilder=Pn.PostgrestTransformBuilder=Pn.PostgrestFilterBuilder=Pn.PostgrestQueryBuilder=Pn.PostgrestClient=void 0;const $C=oc(jw);Pn.PostgrestClient=$C.default;const VC=oc(Om);Pn.PostgrestQueryBuilder=VC.default;const zC=oc(md);Pn.PostgrestFilterBuilder=zC.default;const HC=oc(Im);Pn.PostgrestTransformBuilder=HC.default;const WC=oc(Pm);Pn.PostgrestBuilder=WC.default;const XC=oc(Rm);Pn.PostgrestError=XC.default;var O8=Pn.default={PostgrestClient:$C.default,PostgrestQueryBuilder:VC.default,PostgrestFilterBuilder:zC.default,PostgrestTransformBuilder:HC.default,PostgrestBuilder:WC.default,PostgrestError:XC.default};const{PostgrestClient:I8,PostgrestQueryBuilder:s9,PostgrestFilterBuilder:i9,PostgrestTransformBuilder:o9,PostgrestBuilder:a9,PostgrestError:l9}=O8;class P8{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const R8="2.74.0",L8=`realtime-js/${R8}`,M8="1.0.0",gv=1e4,D8=1e3,B8=100;var iu;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(iu||(iu={}));var Ft;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ft||(Ft={}));var Br;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Br||(Br={}));var yv;(function(t){t.websocket="websocket"})(yv||(yv={}));var Wo;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Wo||(Wo={}));class F8{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(e.slice(a,a+s));a=a+s;const c=r.decode(e.slice(a,a+i));a=a+i;const u=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class KC{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var pt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(pt||(pt={}));const eE=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((i,a)=>(i[a]=U8(a,t,e,s),i),{}):{}},U8=(t,e,n,r)=>{const s=e.find(l=>l.name===t),i=s==null?void 0:s.type,a=n[t];return i&&!r.includes(i)?qC(i,a):vv(a)},qC=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return H8(e,n)}switch(t){case pt.bool:return $8(e);case pt.float4:case pt.float8:case pt.int2:case pt.int4:case pt.int8:case pt.numeric:case pt.oid:return V8(e);case pt.json:case pt.jsonb:return z8(e);case pt.timestamp:return W8(e);case pt.abstime:case pt.date:case pt.daterange:case pt.int4range:case pt.int8range:case pt.money:case pt.reltime:case pt.text:case pt.time:case pt.timestamptz:case pt.timetz:case pt.tsrange:case pt.tstzrange:return vv(e);default:return vv(e)}},vv=t=>t,$8=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},V8=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},z8=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},H8=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const a=t.slice(1,n);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>qC(e,l))}return t},W8=t=>typeof t=="string"?t.replace(" ","T"):t,GC=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class hg{constructor(e,n,r={},s=gv){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var tE;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(tE||(tE={}));class ou{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ou.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=ou.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=ou.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),a=this.transformState(n),l={},c={};return this.map(i,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const h=i[u];if(h){const f=d.map(j=>j.presence_ref),m=h.map(j=>j.presence_ref),_=d.filter(j=>m.indexOf(j.presence_ref)<0),S=h.filter(j=>f.indexOf(j.presence_ref)<0);_.length>0&&(l[u]=_),S.length>0&&(c[u]=S)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(m=>m.presence_ref),f=d.filter(m=>h.indexOf(m.presence_ref)<0);e[l].unshift(...f)}r(l,d,c)}),this.map(a,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,s(l,u,c),u.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var nE;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(nE||(nE={}));var au;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(au||(au={}));var Ps;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ps||(Ps={}));class kw{constructor(e,n={config:{}},r){var s,i;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Ft.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new hg(this,Br.join,this.params,this.timeout),this.rejoinTimer=new KC(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ft.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ft.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ft.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Br.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new ou(this),this.broadcastEndpointURL=GC(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Ft.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[au.PRESENCE]&&this.bindings[au.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(Ps.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(Ps.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var _;if(this.socket.setAuth(),m===void 0){e==null||e(Ps.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,j=(_=S==null?void 0:S.length)!==null&&_!==void 0?_:0,y=[];for(let x=0;x<j;x++){const b=S[x],{filter:{event:v,schema:A,table:E,filter:L}}=b,Y=m&&m[x];if(Y&&Y.event===v&&Y.schema===A&&Y.table===E&&Y.filter===L)y.push(Object.assign(Object.assign({},b),{id:Y.id}));else{this.unsubscribe(),this.state=Ft.errored,e==null||e(Ps.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(Ps.SUBSCRIBED);return}}).receive("error",m=>{this.state=Ft.errored,e==null||e(Ps.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ps.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Ft.joined&&e===au.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ft.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Br.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new hg(this,Br.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ft.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new hg(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>B8){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const a=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Br;if(r&&[l,c,u,d].indexOf(a)>=0&&r!==this._joinRef())return;let f=this._onMessage(a,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var _,S,j;return((_=m.filter)===null||_===void 0?void 0:_.event)==="*"||((j=(S=m.filter)===null||S===void 0?void 0:S.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===a}).map(m=>m.callback(f,r)):(i=this.bindings[a])===null||i===void 0||i.filter(m=>{var _,S,j,y,x,b;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const v=m.id,A=(_=m.filter)===null||_===void 0?void 0:_.event;return v&&((S=n.ids)===null||S===void 0?void 0:S.includes(v))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((j=n.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const v=(x=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return v==="*"||v===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof f=="object"&&"ids"in f){const _=f.data,{schema:S,table:j,commit_timestamp:y,type:x,errors:b}=_;f=Object.assign(Object.assign({},{schema:S,table:j,commit_timestamp:y,eventType:x,new:{},old:{},errors:b}),this._getPayloadRecords(_))}m.callback(f,r)})}_isClosed(){return this.state===Ft.closed}_isJoined(){return this.state===Ft.joined}_isJoining(){return this.state===Ft.joining}_isLeaving(){return this.state===Ft.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&kw.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Br.close,{},e)}_onError(e){this._on(Br.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ft.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=eE(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=eE(e.columns,e.old_record)),n}}const fg=()=>{},ch={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},X8=[1e3,2e3,5e3,1e4],K8=1e4,q8=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class G8{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=gv,this.transport=null,this.heartbeatIntervalMs=ch.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=fg,this.ref=0,this.reconnectTimer=null,this.logger=fg,this.conn=null,this.sendBuffer=[],this.serializer=new F8,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>pd(()=>Promise.resolve().then(()=>ic),void 0).then(({default:l})=>l(...a)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${yv.websocket}`,this.httpEndpoint=GC(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=P8.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:M8}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case iu.connecting:return Wo.Connecting;case iu.open:return Wo.Open;case iu.closing:return Wo.Closing;default:return Wo.Closed}}isConnected(){return this.connectionState()===Wo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new kw(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,a=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(D8,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},ch.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:a}=n,l=a?`(${a})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Br.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([q8],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:L8};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Br.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new KC(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ch.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,a,l,c,u,d;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:gv,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:ch.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:fg,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:h=>X8[h-1]||K8,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(h,f)=>f(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Ow extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Lt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Y8 extends Ow{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class xv extends Ow{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var J8=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const YC=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>pd(()=>Promise.resolve().then(()=>ic),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Q8=()=>J8(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield pd(()=>Promise.resolve().then(()=>ic),void 0)).Response:Response}),wv=t=>{if(Array.isArray(t))return t.map(n=>wv(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=wv(r)}),e},Z8=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Ia=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const pg=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),eV=(t,e,n)=>Ia(void 0,void 0,void 0,function*(){const r=yield Q8();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const i=t.status||500,a=(s==null?void 0:s.statusCode)||i+"";e(new Y8(pg(s),i,a))}).catch(s=>{e(new xv(pg(s),s))}):e(new xv(pg(t),t))}),tV=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(Z8(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function gd(t,e,n,r,s,i){return Ia(this,void 0,void 0,function*(){return new Promise((a,l)=>{t(n,tV(e,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>eV(c,l,r))})})}function If(t,e,n,r){return Ia(this,void 0,void 0,function*(){return gd(t,"GET",e,n,r)})}function cs(t,e,n,r,s){return Ia(this,void 0,void 0,function*(){return gd(t,"POST",e,r,s,n)})}function bv(t,e,n,r,s){return Ia(this,void 0,void 0,function*(){return gd(t,"PUT",e,r,s,n)})}function nV(t,e,n,r){return Ia(this,void 0,void 0,function*(){return gd(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function JC(t,e,n,r,s){return Ia(this,void 0,void 0,function*(){return gd(t,"DELETE",e,r,s,n)})}var rV=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class sV{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return rV(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Lt(e))return{data:null,error:e};throw e}})}}var iV=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class oV{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}asStream(){return new sV(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.execute().then(e,n)}execute(){return iV(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Lt(e))return{data:null,error:e};throw e}})}}var Tn=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const aV={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},rE={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class lV{constructor(e,n={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=YC(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,s){return Tn(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},rE),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield(e=="PUT"?bv:cs)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Lt(i))return{data:null,error:i};throw i}})}upload(e,n,r){return Tn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Tn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:rE.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield bv(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Lt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return Tn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield cs(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new Ow("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Lt(r))return{data:null,error:r};throw r}})}update(e,n,r){return Tn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Tn(this,void 0,void 0,function*(){try{return{data:yield cs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Lt(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Tn(this,void 0,void 0,function*(){try{return{data:{path:(yield cs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Lt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Tn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield cs(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Lt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Tn(this,void 0,void 0,function*(){try{const s=yield cs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Lt(s))return{data:null,error:s};throw s}})}download(e,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=i?`?${i}`:"",l=this._getFinalPath(e),c=()=>If(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0});return new oV(c,this.shouldThrowOnError)}info(e){return Tn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield If(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:wv(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Lt(r))return{data:null,error:r};throw r}})}exists(e){return Tn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield nV(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Lt(r)&&r instanceof xv){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(e){return Tn(this,void 0,void 0,function*(){try{return{data:yield JC(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Lt(n))return{data:null,error:n};throw n}})}list(e,n,r){return Tn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},aV),n),{prefix:e||""});return{data:yield cs(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Lt(s))return{data:null,error:s};throw s}})}listV2(e,n){return Tn(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield cs(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Lt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const cV="2.74.0",uV={"X-Client-Info":`storage-js/${cV}`};var qa=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class dV{constructor(e,n={},r,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},uV),n),this.fetch=YC(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return qa(this,void 0,void 0,function*(){try{return{data:yield If(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Lt(e))return{data:null,error:e};throw e}})}getBucket(e){return qa(this,void 0,void 0,function*(){try{return{data:yield If(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Lt(n))return{data:null,error:n};throw n}})}createBucket(e){return qa(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield cs(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Lt(s))return{data:null,error:s};throw s}})}updateBucket(e,n){return qa(this,void 0,void 0,function*(){try{return{data:yield bv(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Lt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return qa(this,void 0,void 0,function*(){try{return{data:yield cs(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Lt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return qa(this,void 0,void 0,function*(){try{return{data:yield JC(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Lt(n))return{data:null,error:n};throw n}})}}class hV extends dV{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new lV(this.url,this.headers,e,this.fetch)}}const fV="2.74.0";let Vc="";typeof Deno<"u"?Vc="deno":typeof document<"u"?Vc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Vc="react-native":Vc="node";const pV={"X-Client-Info":`supabase-js-${Vc}/${fV}`},mV={headers:pV},gV={schema:"public"},yV={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},vV={};var xV=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const wV=t=>{let e;return t?e=t:typeof fetch>"u"?e=MC:e=fetch,(...n)=>e(...n)},bV=()=>typeof Headers>"u"?DC:Headers,_V=(t,e,n)=>{const r=wV(n),s=bV();return(i,a)=>xV(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},a),{headers:u}))})};var EV=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};function SV(t){return t.endsWith("/")?t:t+"/"}function NV(t,e){var n,r;const{db:s,auth:i,realtime:a,global:l}=t,{db:c,auth:u,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>EV(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function TV(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(SV(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const QC="2.74.0",rl=30*1e3,_v=3,mg=_v*rl,AV="http://localhost:9999",CV="supabase.auth.token",jV={"X-Client-Info":`gotrue-js/${QC}`},Ev="X-Supabase-Api-Version",ZC={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},kV=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,OV=10*60*1e3;class Mu extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function We(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class IV extends Mu{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function PV(t){return We(t)&&t.name==="AuthApiError"}class Xo extends Mu{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class _o extends Mu{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class wi extends _o{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function RV(t){return We(t)&&t.name==="AuthSessionMissingError"}class Ga extends _o{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class uh extends _o{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class dh extends _o{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function LV(t){return We(t)&&t.name==="AuthImplicitGrantRedirectError"}class sE extends _o{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Sv extends _o{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function gg(t){return We(t)&&t.name==="AuthRetryableFetchError"}class iE extends _o{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Nv extends _o{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Pf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),oE=` 	
\r=`.split(""),MV=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<oE.length;e+=1)t[oE[e].charCodeAt(0)]=-2;for(let e=0;e<Pf.length;e+=1)t[Pf[e].charCodeAt(0)]=e;return t})();function aE(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Pf[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Pf[r]),e.queuedBits-=6}}function ej(t,e,n){const r=MV[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function lE(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{FV(a,r,n)};for(let a=0;a<t.length;a+=1)ej(t.charCodeAt(a),s,i);return e.join("")}function DV(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function BV(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}DV(r,e)}}function FV(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Cl(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)ej(t.charCodeAt(s),n,r);return new Uint8Array(e)}function UV(t){const e=[];return BV(t,n=>e.push(n)),new Uint8Array(e)}function Zo(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>aE(s,n,r)),aE(null,n,r),e.join("")}function $V(t){return Math.round(Date.now()/1e3)+t}function VV(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Hn=()=>typeof window<"u"&&typeof document<"u",Mo={tested:!1,writable:!1},tj=()=>{if(!Hn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Mo.tested)return Mo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Mo.tested=!0,Mo.writable=!0}catch{Mo.tested=!0,Mo.writable=!1}return Mo.writable};function zV(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const nj=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>pd(()=>Promise.resolve().then(()=>ic),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},HV=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",sl=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Do=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},yi=async(t,e)=>{await t.removeItem(e)};class Lm{constructor(){this.promise=new Lm.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Lm.promiseConstructor=Promise;function yg(t){const e=t.split(".");if(e.length!==3)throw new Nv("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!kV.test(e[r]))throw new Nv("JWT not in base64url format");return{header:JSON.parse(lE(e[0])),payload:JSON.parse(lE(e[1])),signature:Cl(e[2]),raw:{header:e[0],payload:e[1]}}}async function WV(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function XV(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await t(i);if(!e(i,null,a)){r(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function KV(t){return("0"+t.toString(16)).substr(-2)}function qV(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,KV).join("")}async function GV(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function YV(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await GV(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ya(t,e,n=!1){const r=qV();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await sl(t,`${e}-code-verifier`,s);const i=await YV(r);return[i,r===i?"plain":"s256"]}const JV=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function QV(t){const e=t.headers.get(Ev);if(!e||!e.match(JV))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function ZV(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function ez(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const tz=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ja(t){if(!tz.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function vg(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function cE(t){return JSON.parse(JSON.stringify(t))}var nz=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Ho=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),rz=[502,503,504];async function uE(t){var e;if(!HV(t))throw new Sv(Ho(t),0);if(rz.includes(t.status))throw new Sv(Ho(t),t.status);let n;try{n=await t.json()}catch(i){throw new Xo(Ho(i),i)}let r;const s=QV(t);if(s&&s.getTime()>=ZC["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new iE(Ho(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new wi}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new iE(Ho(n),t.status,n.weak_password.reasons);throw new IV(Ho(n),t.status||500,r)}const sz=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function qe(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Ev]||(i[Ev]=ZC["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await iz(t,e,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function iz(t,e,n,r,s,i){const a=sz(e,r,s,i);let l;try{l=await t(n,Object.assign({},a))}catch(c){throw console.error(c),new Sv(Ho(c),0)}if(l.ok||await uE(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await uE(c)}}function Rr(t){var e;let n=null;lz(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=$V(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function dE(t){const e=Rr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Oi(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function oz(t){return{data:t,error:null}}function az(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,a=nz(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function hE(t){return t}function lz(t){return t.access_token&&t.refresh_token&&t.expires_in}const xg=["global","local","others"];var cz=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class uz{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=nj(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=xg[0]){if(xg.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${xg.join(", ")}`);try{return await qe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await qe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Oi})}catch(r){if(We(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=cz(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await qe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:az,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(We(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await qe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Oi})}catch(n){if(We(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await qe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:hE});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(_=>{const S=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(_.split(";")[1].split("=")[1]);u[`${j}Page`]=S}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(We(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Ja(e);try{return await qe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Oi})}catch(n){if(We(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Ja(e);try{return await qe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Oi})}catch(r){if(We(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Ja(e);try{return await qe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Oi})}catch(r){if(We(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Ja(e.userId);try{const{data:n,error:r}=await qe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(We(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Ja(e.userId),Ja(e.id);try{return{data:await qe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await qe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:hE});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(_=>{const S=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(_.split(";")[1].split("=")[1]);u[`${j}Page`]=S}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(We(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await qe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await qe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await qe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await qe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}}function fE(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Qa={debug:!!(globalThis&&tj()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rj extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class dz extends rj{}async function hz(t,e,n){Qa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Qa.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Qa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Qa.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Qa.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new dz(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Qa.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function fz(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function sj(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function pz(t){return parseInt(t,16)}function mz(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function gz(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:a,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:f}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const m=sj(t.address),_=d?`${d}://${r}`:r,S=t.statement?`${t.statement}
`:"",j=`${_} wants you to sign in with your Ethereum account:
${m}

${S}`;let y=`URI: ${h}
Version: ${f}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${i.toISOString()}`;if(s&&(y+=`
Expiration Time: ${s.toISOString()}`),l&&(y+=`
Not Before: ${l.toISOString()}`),c&&(y+=`
Request ID: ${c}`),u){let x=`
Resources:`;for(const b of u){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);x+=`
- ${b}`}y+=x}return`${j}
${y}`}class Rt extends Error{constructor({message:e,code:n,cause:r,name:s}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class Rf extends Rt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function yz({error:t,options:e}){var n,r,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Rt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Rt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Rt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Rt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Rt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Rt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Rt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Rt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(oj(a)){if(i.rp.id!==a)return new Rt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Rt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Rt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Rt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Rt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function vz({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Rt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Rt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(oj(r)){if(n.rpId!==r)return new Rt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Rt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Rt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Rt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}var ij=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class xz{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const wz=new xz;function bz(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,s=ij(t,["challenge","user","excludeCredentials"]),i=Cl(e).buffer,a=Object.assign(Object.assign({},n),{id:Cl(n.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:a});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const u=r[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Cl(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function _z(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=ij(t,["challenge","allowCredentials"]),s=Cl(e).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const l=n[a];i.allowCredentials[a]=Object.assign(Object.assign({},l),{id:Cl(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function Ez(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Zo(new Uint8Array(t.response.attestationObject)),clientDataJSON:Zo(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Sz(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Zo(new Uint8Array(s.authenticatorData)),clientDataJSON:Zo(new Uint8Array(s.clientDataJSON)),signature:Zo(new Uint8Array(s.signature)),userHandle:s.userHandle?Zo(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function oj(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function pE(){var t,e;return!!(Hn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Nz(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Rf("Browser returned unexpected credential type",e)}:{data:null,error:new Rf("Empty credential response",e)}}catch(e){return{data:null,error:yz({error:e,options:t})}}}async function Tz(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Rf("Browser returned unexpected credential type",e)}:{data:null,error:new Rf("Empty credential response",e)}}catch(e){return{data:null,error:vz({error:e,options:t})}}}const Az={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Cz={userVerification:"preferred",hints:["security-key"]};function Lf(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of t)if(s)for(const i in s){const a=s[i];if(a!==void 0)if(Array.isArray(a))r[i]=a;else if(n(a))r[i]=a;else if(e(a)){const l=r[i];e(l)?r[i]=Lf(l,a):r[i]=Lf(a)}else r[i]=a}return r}function jz(t,e){return Lf(Az,t,e||{})}function kz(t,e){return Lf(Cz,t,e||{})}class Oz{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:s},i){try{const{data:a,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:l};const c=s??wz.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:u}=a.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(a.webauthn.type){case"create":{const u=jz(a.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:h}=await Nz({publicKey:u,signal:c});return d?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=kz(a.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:h}=await Tz(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(a){return We(a)?{data:null,error:a}:{data:null,error:new Xo("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}},i){if(!n)return{data:null,error:new Mu("rpId is required for WebAuthn authentication")};try{if(!pE())return{data:null,error:new Xo("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!a)return{data:null,error:l};const{webauthn:c}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(a){return We(a)?{data:null,error:a}:{data:null,error:new Xo("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s},i){if(!n)return{data:null,error:new Mu("rpId is required for WebAuthn registration")};try{if(!pE())return{data:null,error:new Xo("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return c?this._verify({factorId:a.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(a){return We(a)?{data:null,error:a}:{data:null,error:new Xo("Unexpected error in register",a)}}}}fz();const Iz={url:AV,storageKey:CV,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:jV,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function mE(t,e,n){return await n()}const Za={};class Du{get jwks(){var e,n;return(n=(e=Za[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Za[this.storageKey]=Object.assign(Object.assign({},Za[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Za[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Za[this.storageKey]=Object.assign(Object.assign({},Za[this.storageKey]),{cachedAt:e})}constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Du.nextInstanceID,Du.nextInstanceID+=1,this.instanceID>0&&Hn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Iz),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new uz({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=nj(s.fetch),this.lock=s.lock||mE,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Hn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=hz:this.lock=mE,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Oz(this)},this.persistSession?(s.storage?this.storage=s.storage:tj()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=fE(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=fE(this.memoryStorage)),Hn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${QC}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=zV(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Hn()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),LV(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return We(n)?{error:n}:{error:new Xo("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Rr}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(We(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let m=null,_=null;this.flowType==="pkce"&&([m,_]=await Ya(this.storage,this.storageKey)),i=await qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:_},xform:Rr})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Rr})}else throw new uh("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(We(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:a,options:l}=e;n=await qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:dE})}else if("phone"in e){const{phone:i,password:a,options:l}=e;n=await qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:dE})}else throw new uh("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Ga}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(We(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,i,a,l,c,u,d,h,f;let m,_;if("message"in e)m=e.message,_=e.signature;else{const{chain:S,wallet:j,statement:y,options:x}=e;let b;if(Hn())if(typeof j=="object")b=j;else{const ee=window;if("ethereum"in ee&&typeof ee.ethereum=="object"&&"request"in ee.ethereum&&typeof ee.ethereum.request=="function")b=ee.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=j}const v=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href),A=await b.request({method:"eth_requestAccounts"}).then(ee=>ee).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!A||A.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=sj(A[0]);let L=(r=x==null?void 0:x.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!L){const ee=await b.request({method:"eth_chainId"});L=pz(ee)}const Y={domain:v.host,address:E,statement:y,uri:v.href,version:"1",chainId:L,nonce:(s=x==null?void 0:x.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(i=x==null?void 0:x.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(l=x==null?void 0:x.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=x==null?void 0:x.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=x==null?void 0:x.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=x==null?void 0:x.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=gz(Y),_=await b.request({method:"personal_sign",params:[mz(m),E]})}try{const{data:S,error:j}=await qe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:_},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Rr});if(j)throw j;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new Ga}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:j})}catch(S){if(We(S))return{data:{user:null,session:null},error:S};throw S}}async signInWithSolana(e){var n,r,s,i,a,l,c,u,d,h,f,m;let _,S;if("message"in e)_=e.message,S=e.signature;else{const{chain:j,wallet:y,statement:x,options:b}=e;let v;if(Hn())if(typeof y=="object")v=y;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))v=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=y}const A=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in v&&v.signIn){const E=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),x?{statement:x}:null));let L;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")L=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)L=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in L&&"signature"in L&&(typeof L.signedMessage=="string"||L.signedMessage instanceof Uint8Array)&&L.signature instanceof Uint8Array)_=typeof L.signedMessage=="string"?L.signedMessage:new TextDecoder().decode(L.signedMessage),S=L.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in v)||typeof v.signMessage!="function"||!("publicKey"in v)||typeof v!="object"||!v.publicKey||!("toBase58"in v.publicKey)||typeof v.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${A.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(s=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(L=>`- ${L}`)]:[]].join(`
`);const E=await v.signMessage(new TextEncoder().encode(_),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=E}}try{const{data:j,error:y}=await qe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:Zo(S)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Rr});if(y)throw y;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new Ga}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:y})}catch(j){if(We(j))return{data:{user:null,session:null},error:j};throw j}}async _exchangeCodeForSession(e){const n=await Do(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:a}=await qe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Rr});if(await yi(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ga}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(We(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:a}=e,l=await qe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Rr}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ga}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(We(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,a;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Ya(this.storage,this.storageKey));const{error:h}=await qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new uh("You must provide either an email or phone number.")}catch(l){if(We(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await qe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Rr});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(We(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Ya(this.storage,this.storageKey)),await qe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:oz})}catch(i){if(We(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new wi;const{error:s}=await qe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(We(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:a}=await qe(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:a,error:l}=await qe(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new uh("You must provide either an email or phone number and a type")}catch(n){if(We(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Do(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<mg:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await Do(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=vg()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Oi}):await this._useSession(async n=>{var r,s,i;const{data:a,error:l}=n;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new wi}:await qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Oi})})}catch(n){if(We(n))return RV(n)&&(await this._removeSession(),await yi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new wi;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Ya(this.storage,this.storageKey));const{data:u,error:d}=await qe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:Oi});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(We(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new wi;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:a}=yg(e.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{data:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(We(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:l}=n;if(l)throw l;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new wi;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(We(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Hn())throw new dh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new dh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new sE("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new dh("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new sE("No code detected.");const{data:x,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const v=new URL(window.location.href);return v.searchParams.delete("code"),window.history.replaceState(window.history.state,"",v.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=e;if(!i||!l||!a||!u)throw new dh("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const m=f-d;m*1e3<=rl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const _=f-h;d-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,f,d):d-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,f,d);const{data:S,error:j}=await this._getUser(i);if(j)throw j;const y={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:a,token_type:u,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(r){if(We(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Do(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(PV(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await yi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=VV(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Ya(this.storage,this.storageKey,!0));try{return await qe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(We(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var a,l,c,u,d;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await qe(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Hn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(We(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:a,provider:l,token:c,access_token:u,nonce:d}=e,h=await qe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Rr}),{data:f,error:m}=h;return m?{data:{user:null,session:null},error:m}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new Ga}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),{data:f,error:m})}catch(s){if(We(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)throw a;return await qe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await XV(async s=>(s>0&&await WV(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await qe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Rr})),(s,i)=>{const a=200*Math.pow(2,s);return i&&gg(i)&&Date.now()+a-r<rl})}catch(r){if(this._debug(n,"error",r),We(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Hn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Do(this.storage,this.storageKey);if(s&&this.userStorage){let a=await Do(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await sl(this.userStorage,this.storageKey+"-user",a)),s.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:vg()}else if(s&&!s.user&&!s.user){const a=await Do(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await yi(this.storage,this.storageKey+"-user"),await sl(this.storage,this.storageKey,s)):s.user=vg()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<mg;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${mg}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),gg(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new wi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Lm;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new wi;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),We(i)){const a={data:null,error:i};return gg(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await sl(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=cE(s);await sl(this.storage,this.storageKey,i)}else{const s=cE(n);await sl(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await yi(this.storage,this.storageKey),await yi(this.storage,this.storageKey+"-code-verifier"),await yi(this.storage,this.storageKey+"-user"),this.userStorage&&await yi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Hn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),rl);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/rl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${rl}ms, refresh threshold is ${_v} ticks`),s<=_v&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof rj)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Hn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await Ya(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await qe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:u}=await qe(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Ez(e.webauthn.credential_response):Sz(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:c}=await qe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(n){if(We(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const a=await qe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:l}=a;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:bz(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:_z(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(We(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=yg(s.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(l=>l.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+OV>s)return r;const{data:i,error:a}=await qe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:m,error:_}=await this.getSession();if(_||!m.session)return{data:null,error:_};r=m.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:c}}=yg(r);n!=null&&n.allowExpired||ZV(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:i,header:s,signature:a},error:null}}const d=ez(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,UV(`${l}.${c}`)))throw new Nv("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}}}Du.nextInstanceID=0;const Pz=Du;class Rz extends Pz{constructor(e){super(e)}}var Lz=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class Mz{constructor(e,n,r){var s,i,a;this.supabaseUrl=e,this.supabaseKey=n;const l=TV(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:gV,realtime:vV,auth:Object.assign(Object.assign({},yV),{storageKey:c}),global:mV},d=NV(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=_V(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new I8(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new hV(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new u8(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return Lz(this,void 0,void 0,function*(){var e,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,storageKey:a,flowType:l,lock:c,debug:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Rz({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:a,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,flowType:l,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new G8(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Dz=(t,e,n)=>new Mz(t,e,n);function Bz(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Bz()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Fz="https://evlhnwqfnnozottgfwam.supabase.co",Uz="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV2bGhud3Fmbm5vem90dGdmd2FtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk4NzU5ODYsImV4cCI6MjA3NTQ1MTk4Nn0.xzB23ELtSev8FkU8QPaQe1GUHSzk8ldoaCuWqrvKoDI",Pe=Dz(Fz,Uz);var _t={},Mm={};Mm.byteLength=zz;Mm.toByteArray=Wz;Mm.fromByteArray=qz;var fs=[],hr=[],$z=typeof Uint8Array<"u"?Uint8Array:Array,wg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var el=0,Vz=wg.length;el<Vz;++el)fs[el]=wg[el],hr[wg.charCodeAt(el)]=el;hr["-".charCodeAt(0)]=62;hr["_".charCodeAt(0)]=63;function aj(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function zz(t){var e=aj(t),n=e[0],r=e[1];return(n+r)*3/4-r}function Hz(t,e,n){return(e+n)*3/4-n}function Wz(t){var e,n=aj(t),r=n[0],s=n[1],i=new $z(Hz(t,r,s)),a=0,l=s>0?r-4:r,c;for(c=0;c<l;c+=4)e=hr[t.charCodeAt(c)]<<18|hr[t.charCodeAt(c+1)]<<12|hr[t.charCodeAt(c+2)]<<6|hr[t.charCodeAt(c+3)],i[a++]=e>>16&255,i[a++]=e>>8&255,i[a++]=e&255;return s===2&&(e=hr[t.charCodeAt(c)]<<2|hr[t.charCodeAt(c+1)]>>4,i[a++]=e&255),s===1&&(e=hr[t.charCodeAt(c)]<<10|hr[t.charCodeAt(c+1)]<<4|hr[t.charCodeAt(c+2)]>>2,i[a++]=e>>8&255,i[a++]=e&255),i}function Xz(t){return fs[t>>18&63]+fs[t>>12&63]+fs[t>>6&63]+fs[t&63]}function Kz(t,e,n){for(var r,s=[],i=e;i<n;i+=3)r=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),s.push(Xz(r));return s.join("")}function qz(t){for(var e,n=t.length,r=n%3,s=[],i=16383,a=0,l=n-r;a<l;a+=i)s.push(Kz(t,a,a+i>l?l:a+i));return r===1?(e=t[n-1],s.push(fs[e>>2]+fs[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],s.push(fs[e>>10]+fs[e>>4&63]+fs[e<<2&63]+"=")),s.join("")}var Iw={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Iw.read=function(t,e,n,r,s){var i,a,l=s*8-r-1,c=(1<<l)-1,u=c>>1,d=-7,h=n?s-1:0,f=n?-1:1,m=t[e+h];for(h+=f,i=m&(1<<-d)-1,m>>=-d,d+=l;d>0;i=i*256+t[e+h],h+=f,d-=8);for(a=i&(1<<-d)-1,i>>=-d,d+=r;d>0;a=a*256+t[e+h],h+=f,d-=8);if(i===0)i=1-u;else{if(i===c)return a?NaN:(m?-1:1)*(1/0);a=a+Math.pow(2,r),i=i-u}return(m?-1:1)*a*Math.pow(2,i-r)};Iw.write=function(t,e,n,r,s,i){var a,l,c,u=i*8-s-1,d=(1<<u)-1,h=d>>1,f=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=r?0:i-1,_=r?1:-1,S=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,a=d):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),a+h>=1?e+=f/c:e+=f*Math.pow(2,1-h),e*c>=2&&(a++,c/=2),a+h>=d?(l=0,a=d):a+h>=1?(l=(e*c-1)*Math.pow(2,s),a=a+h):(l=e*Math.pow(2,h-1)*Math.pow(2,s),a=0));s>=8;t[n+m]=l&255,m+=_,l/=256,s-=8);for(a=a<<s|l,u+=s;u>0;t[n+m]=a&255,m+=_,a/=256,u-=8);t[n+m-_]|=S*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=Mm,n=Iw,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=x,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s,l.TYPED_ARRAY_SUPPORT=i(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const O=new Uint8Array(1),p={foo:function(){return 42}};return Object.setPrototypeOf(p,Uint8Array.prototype),Object.setPrototypeOf(O,p),O.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function a(O){if(O>s)throw new RangeError('The value "'+O+'" is invalid for option "size"');const p=new Uint8Array(O);return Object.setPrototypeOf(p,l.prototype),p}function l(O,p,w){if(typeof O=="number"){if(typeof p=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(O)}return c(O,p,w)}l.poolSize=8192;function c(O,p,w){if(typeof O=="string")return f(O,p);if(ArrayBuffer.isView(O))return _(O);if(O==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O);if(we(O,ArrayBuffer)||O&&we(O.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(we(O,SharedArrayBuffer)||O&&we(O.buffer,SharedArrayBuffer)))return S(O,p,w);if(typeof O=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const W=O.valueOf&&O.valueOf();if(W!=null&&W!==O)return l.from(W,p,w);const oe=j(O);if(oe)return oe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof O[Symbol.toPrimitive]=="function")return l.from(O[Symbol.toPrimitive]("string"),p,w);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O)}l.from=function(O,p,w){return c(O,p,w)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function u(O){if(typeof O!="number")throw new TypeError('"size" argument must be of type number');if(O<0)throw new RangeError('The value "'+O+'" is invalid for option "size"')}function d(O,p,w){return u(O),O<=0?a(O):p!==void 0?typeof w=="string"?a(O).fill(p,w):a(O).fill(p):a(O)}l.alloc=function(O,p,w){return d(O,p,w)};function h(O){return u(O),a(O<0?0:y(O)|0)}l.allocUnsafe=function(O){return h(O)},l.allocUnsafeSlow=function(O){return h(O)};function f(O,p){if((typeof p!="string"||p==="")&&(p="utf8"),!l.isEncoding(p))throw new TypeError("Unknown encoding: "+p);const w=b(O,p)|0;let W=a(w);const oe=W.write(O,p);return oe!==w&&(W=W.slice(0,oe)),W}function m(O){const p=O.length<0?0:y(O.length)|0,w=a(p);for(let W=0;W<p;W+=1)w[W]=O[W]&255;return w}function _(O){if(we(O,Uint8Array)){const p=new Uint8Array(O);return S(p.buffer,p.byteOffset,p.byteLength)}return m(O)}function S(O,p,w){if(p<0||O.byteLength<p)throw new RangeError('"offset" is outside of buffer bounds');if(O.byteLength<p+(w||0))throw new RangeError('"length" is outside of buffer bounds');let W;return p===void 0&&w===void 0?W=new Uint8Array(O):w===void 0?W=new Uint8Array(O,p):W=new Uint8Array(O,p,w),Object.setPrototypeOf(W,l.prototype),W}function j(O){if(l.isBuffer(O)){const p=y(O.length)|0,w=a(p);return w.length===0||O.copy(w,0,0,p),w}if(O.length!==void 0)return typeof O.length!="number"||_e(O.length)?a(0):m(O);if(O.type==="Buffer"&&Array.isArray(O.data))return m(O.data)}function y(O){if(O>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return O|0}function x(O){return+O!=O&&(O=0),l.alloc(+O)}l.isBuffer=function(p){return p!=null&&p._isBuffer===!0&&p!==l.prototype},l.compare=function(p,w){if(we(p,Uint8Array)&&(p=l.from(p,p.offset,p.byteLength)),we(w,Uint8Array)&&(w=l.from(w,w.offset,w.byteLength)),!l.isBuffer(p)||!l.isBuffer(w))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(p===w)return 0;let W=p.length,oe=w.length;for(let ce=0,fe=Math.min(W,oe);ce<fe;++ce)if(p[ce]!==w[ce]){W=p[ce],oe=w[ce];break}return W<oe?-1:oe<W?1:0},l.isEncoding=function(p){switch(String(p).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(p,w){if(!Array.isArray(p))throw new TypeError('"list" argument must be an Array of Buffers');if(p.length===0)return l.alloc(0);let W;if(w===void 0)for(w=0,W=0;W<p.length;++W)w+=p[W].length;const oe=l.allocUnsafe(w);let ce=0;for(W=0;W<p.length;++W){let fe=p[W];if(we(fe,Uint8Array))ce+fe.length>oe.length?(l.isBuffer(fe)||(fe=l.from(fe)),fe.copy(oe,ce)):Uint8Array.prototype.set.call(oe,fe,ce);else if(l.isBuffer(fe))fe.copy(oe,ce);else throw new TypeError('"list" argument must be an Array of Buffers');ce+=fe.length}return oe};function b(O,p){if(l.isBuffer(O))return O.length;if(ArrayBuffer.isView(O)||we(O,ArrayBuffer))return O.byteLength;if(typeof O!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof O);const w=O.length,W=arguments.length>2&&arguments[2]===!0;if(!W&&w===0)return 0;let oe=!1;for(;;)switch(p){case"ascii":case"latin1":case"binary":return w;case"utf8":case"utf-8":return M(O).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w*2;case"hex":return w>>>1;case"base64":return te(O).length;default:if(oe)return W?-1:M(O).length;p=(""+p).toLowerCase(),oe=!0}}l.byteLength=b;function v(O,p,w){let W=!1;if((p===void 0||p<0)&&(p=0),p>this.length||((w===void 0||w>this.length)&&(w=this.length),w<=0)||(w>>>=0,p>>>=0,w<=p))return"";for(O||(O="utf8");;)switch(O){case"hex":return k(this,p,w);case"utf8":case"utf-8":return xe(this,p,w);case"ascii":return re(this,p,w);case"latin1":case"binary":return F(this,p,w);case"base64":return he(this,p,w);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,p,w);default:if(W)throw new TypeError("Unknown encoding: "+O);O=(O+"").toLowerCase(),W=!0}}l.prototype._isBuffer=!0;function A(O,p,w){const W=O[p];O[p]=O[w],O[w]=W}l.prototype.swap16=function(){const p=this.length;if(p%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let w=0;w<p;w+=2)A(this,w,w+1);return this},l.prototype.swap32=function(){const p=this.length;if(p%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let w=0;w<p;w+=4)A(this,w,w+3),A(this,w+1,w+2);return this},l.prototype.swap64=function(){const p=this.length;if(p%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let w=0;w<p;w+=8)A(this,w,w+7),A(this,w+1,w+6),A(this,w+2,w+5),A(this,w+3,w+4);return this},l.prototype.toString=function(){const p=this.length;return p===0?"":arguments.length===0?xe(this,0,p):v.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(p){if(!l.isBuffer(p))throw new TypeError("Argument must be a Buffer");return this===p?!0:l.compare(this,p)===0},l.prototype.inspect=function(){let p="";const w=t.INSPECT_MAX_BYTES;return p=this.toString("hex",0,w).replace(/(.{2})/g,"$1 ").trim(),this.length>w&&(p+=" ... "),"<Buffer "+p+">"},r&&(l.prototype[r]=l.prototype.inspect),l.prototype.compare=function(p,w,W,oe,ce){if(we(p,Uint8Array)&&(p=l.from(p,p.offset,p.byteLength)),!l.isBuffer(p))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof p);if(w===void 0&&(w=0),W===void 0&&(W=p?p.length:0),oe===void 0&&(oe=0),ce===void 0&&(ce=this.length),w<0||W>p.length||oe<0||ce>this.length)throw new RangeError("out of range index");if(oe>=ce&&w>=W)return 0;if(oe>=ce)return-1;if(w>=W)return 1;if(w>>>=0,W>>>=0,oe>>>=0,ce>>>=0,this===p)return 0;let fe=ce-oe,Te=W-w;const Le=Math.min(fe,Te),Me=this.slice(oe,ce),ke=p.slice(w,W);for(let Ye=0;Ye<Le;++Ye)if(Me[Ye]!==ke[Ye]){fe=Me[Ye],Te=ke[Ye];break}return fe<Te?-1:Te<fe?1:0};function E(O,p,w,W,oe){if(O.length===0)return-1;if(typeof w=="string"?(W=w,w=0):w>2147483647?w=2147483647:w<-2147483648&&(w=-2147483648),w=+w,_e(w)&&(w=oe?0:O.length-1),w<0&&(w=O.length+w),w>=O.length){if(oe)return-1;w=O.length-1}else if(w<0)if(oe)w=0;else return-1;if(typeof p=="string"&&(p=l.from(p,W)),l.isBuffer(p))return p.length===0?-1:L(O,p,w,W,oe);if(typeof p=="number")return p=p&255,typeof Uint8Array.prototype.indexOf=="function"?oe?Uint8Array.prototype.indexOf.call(O,p,w):Uint8Array.prototype.lastIndexOf.call(O,p,w):L(O,[p],w,W,oe);throw new TypeError("val must be string, number or Buffer")}function L(O,p,w,W,oe){let ce=1,fe=O.length,Te=p.length;if(W!==void 0&&(W=String(W).toLowerCase(),W==="ucs2"||W==="ucs-2"||W==="utf16le"||W==="utf-16le")){if(O.length<2||p.length<2)return-1;ce=2,fe/=2,Te/=2,w/=2}function Le(ke,Ye){return ce===1?ke[Ye]:ke.readUInt16BE(Ye*ce)}let Me;if(oe){let ke=-1;for(Me=w;Me<fe;Me++)if(Le(O,Me)===Le(p,ke===-1?0:Me-ke)){if(ke===-1&&(ke=Me),Me-ke+1===Te)return ke*ce}else ke!==-1&&(Me-=Me-ke),ke=-1}else for(w+Te>fe&&(w=fe-Te),Me=w;Me>=0;Me--){let ke=!0;for(let Ye=0;Ye<Te;Ye++)if(Le(O,Me+Ye)!==Le(p,Ye)){ke=!1;break}if(ke)return Me}return-1}l.prototype.includes=function(p,w,W){return this.indexOf(p,w,W)!==-1},l.prototype.indexOf=function(p,w,W){return E(this,p,w,W,!0)},l.prototype.lastIndexOf=function(p,w,W){return E(this,p,w,W,!1)};function Y(O,p,w,W){w=Number(w)||0;const oe=O.length-w;W?(W=Number(W),W>oe&&(W=oe)):W=oe;const ce=p.length;W>ce/2&&(W=ce/2);let fe;for(fe=0;fe<W;++fe){const Te=parseInt(p.substr(fe*2,2),16);if(_e(Te))return fe;O[w+fe]=Te}return fe}function ee(O,p,w,W){return le(M(p,O.length-w),O,w,W)}function U(O,p,w,W){return le(K(p),O,w,W)}function G(O,p,w,W){return le(te(p),O,w,W)}function ae(O,p,w,W){return le(Q(p,O.length-w),O,w,W)}l.prototype.write=function(p,w,W,oe){if(w===void 0)oe="utf8",W=this.length,w=0;else if(W===void 0&&typeof w=="string")oe=w,W=this.length,w=0;else if(isFinite(w))w=w>>>0,isFinite(W)?(W=W>>>0,oe===void 0&&(oe="utf8")):(oe=W,W=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ce=this.length-w;if((W===void 0||W>ce)&&(W=ce),p.length>0&&(W<0||w<0)||w>this.length)throw new RangeError("Attempt to write outside buffer bounds");oe||(oe="utf8");let fe=!1;for(;;)switch(oe){case"hex":return Y(this,p,w,W);case"utf8":case"utf-8":return ee(this,p,w,W);case"ascii":case"latin1":case"binary":return U(this,p,w,W);case"base64":return G(this,p,w,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ae(this,p,w,W);default:if(fe)throw new TypeError("Unknown encoding: "+oe);oe=(""+oe).toLowerCase(),fe=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function he(O,p,w){return p===0&&w===O.length?e.fromByteArray(O):e.fromByteArray(O.slice(p,w))}function xe(O,p,w){w=Math.min(O.length,w);const W=[];let oe=p;for(;oe<w;){const ce=O[oe];let fe=null,Te=ce>239?4:ce>223?3:ce>191?2:1;if(oe+Te<=w){let Le,Me,ke,Ye;switch(Te){case 1:ce<128&&(fe=ce);break;case 2:Le=O[oe+1],(Le&192)===128&&(Ye=(ce&31)<<6|Le&63,Ye>127&&(fe=Ye));break;case 3:Le=O[oe+1],Me=O[oe+2],(Le&192)===128&&(Me&192)===128&&(Ye=(ce&15)<<12|(Le&63)<<6|Me&63,Ye>2047&&(Ye<55296||Ye>57343)&&(fe=Ye));break;case 4:Le=O[oe+1],Me=O[oe+2],ke=O[oe+3],(Le&192)===128&&(Me&192)===128&&(ke&192)===128&&(Ye=(ce&15)<<18|(Le&63)<<12|(Me&63)<<6|ke&63,Ye>65535&&Ye<1114112&&(fe=Ye))}}fe===null?(fe=65533,Te=1):fe>65535&&(fe-=65536,W.push(fe>>>10&1023|55296),fe=56320|fe&1023),W.push(fe),oe+=Te}return $(W)}const de=4096;function $(O){const p=O.length;if(p<=de)return String.fromCharCode.apply(String,O);let w="",W=0;for(;W<p;)w+=String.fromCharCode.apply(String,O.slice(W,W+=de));return w}function re(O,p,w){let W="";w=Math.min(O.length,w);for(let oe=p;oe<w;++oe)W+=String.fromCharCode(O[oe]&127);return W}function F(O,p,w){let W="";w=Math.min(O.length,w);for(let oe=p;oe<w;++oe)W+=String.fromCharCode(O[oe]);return W}function k(O,p,w){const W=O.length;(!p||p<0)&&(p=0),(!w||w<0||w>W)&&(w=W);let oe="";for(let ce=p;ce<w;++ce)oe+=be[O[ce]];return oe}function R(O,p,w){const W=O.slice(p,w);let oe="";for(let ce=0;ce<W.length-1;ce+=2)oe+=String.fromCharCode(W[ce]+W[ce+1]*256);return oe}l.prototype.slice=function(p,w){const W=this.length;p=~~p,w=w===void 0?W:~~w,p<0?(p+=W,p<0&&(p=0)):p>W&&(p=W),w<0?(w+=W,w<0&&(w=0)):w>W&&(w=W),w<p&&(w=p);const oe=this.subarray(p,w);return Object.setPrototypeOf(oe,l.prototype),oe};function D(O,p,w){if(O%1!==0||O<0)throw new RangeError("offset is not uint");if(O+p>w)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(p,w,W){p=p>>>0,w=w>>>0,W||D(p,w,this.length);let oe=this[p],ce=1,fe=0;for(;++fe<w&&(ce*=256);)oe+=this[p+fe]*ce;return oe},l.prototype.readUintBE=l.prototype.readUIntBE=function(p,w,W){p=p>>>0,w=w>>>0,W||D(p,w,this.length);let oe=this[p+--w],ce=1;for(;w>0&&(ce*=256);)oe+=this[p+--w]*ce;return oe},l.prototype.readUint8=l.prototype.readUInt8=function(p,w){return p=p>>>0,w||D(p,1,this.length),this[p]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(p,w){return p=p>>>0,w||D(p,2,this.length),this[p]|this[p+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(p,w){return p=p>>>0,w||D(p,2,this.length),this[p]<<8|this[p+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(p,w){return p=p>>>0,w||D(p,4,this.length),(this[p]|this[p+1]<<8|this[p+2]<<16)+this[p+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(p,w){return p=p>>>0,w||D(p,4,this.length),this[p]*16777216+(this[p+1]<<16|this[p+2]<<8|this[p+3])},l.prototype.readBigUInt64LE=Ie(function(p){p=p>>>0,T(p,"offset");const w=this[p],W=this[p+7];(w===void 0||W===void 0)&&C(p,this.length-8);const oe=w+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24,ce=this[++p]+this[++p]*2**8+this[++p]*2**16+W*2**24;return BigInt(oe)+(BigInt(ce)<<BigInt(32))}),l.prototype.readBigUInt64BE=Ie(function(p){p=p>>>0,T(p,"offset");const w=this[p],W=this[p+7];(w===void 0||W===void 0)&&C(p,this.length-8);const oe=w*2**24+this[++p]*2**16+this[++p]*2**8+this[++p],ce=this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+W;return(BigInt(oe)<<BigInt(32))+BigInt(ce)}),l.prototype.readIntLE=function(p,w,W){p=p>>>0,w=w>>>0,W||D(p,w,this.length);let oe=this[p],ce=1,fe=0;for(;++fe<w&&(ce*=256);)oe+=this[p+fe]*ce;return ce*=128,oe>=ce&&(oe-=Math.pow(2,8*w)),oe},l.prototype.readIntBE=function(p,w,W){p=p>>>0,w=w>>>0,W||D(p,w,this.length);let oe=w,ce=1,fe=this[p+--oe];for(;oe>0&&(ce*=256);)fe+=this[p+--oe]*ce;return ce*=128,fe>=ce&&(fe-=Math.pow(2,8*w)),fe},l.prototype.readInt8=function(p,w){return p=p>>>0,w||D(p,1,this.length),this[p]&128?(255-this[p]+1)*-1:this[p]},l.prototype.readInt16LE=function(p,w){p=p>>>0,w||D(p,2,this.length);const W=this[p]|this[p+1]<<8;return W&32768?W|4294901760:W},l.prototype.readInt16BE=function(p,w){p=p>>>0,w||D(p,2,this.length);const W=this[p+1]|this[p]<<8;return W&32768?W|4294901760:W},l.prototype.readInt32LE=function(p,w){return p=p>>>0,w||D(p,4,this.length),this[p]|this[p+1]<<8|this[p+2]<<16|this[p+3]<<24},l.prototype.readInt32BE=function(p,w){return p=p>>>0,w||D(p,4,this.length),this[p]<<24|this[p+1]<<16|this[p+2]<<8|this[p+3]},l.prototype.readBigInt64LE=Ie(function(p){p=p>>>0,T(p,"offset");const w=this[p],W=this[p+7];(w===void 0||W===void 0)&&C(p,this.length-8);const oe=this[p+4]+this[p+5]*2**8+this[p+6]*2**16+(W<<24);return(BigInt(oe)<<BigInt(32))+BigInt(w+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24)}),l.prototype.readBigInt64BE=Ie(function(p){p=p>>>0,T(p,"offset");const w=this[p],W=this[p+7];(w===void 0||W===void 0)&&C(p,this.length-8);const oe=(w<<24)+this[++p]*2**16+this[++p]*2**8+this[++p];return(BigInt(oe)<<BigInt(32))+BigInt(this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+W)}),l.prototype.readFloatLE=function(p,w){return p=p>>>0,w||D(p,4,this.length),n.read(this,p,!0,23,4)},l.prototype.readFloatBE=function(p,w){return p=p>>>0,w||D(p,4,this.length),n.read(this,p,!1,23,4)},l.prototype.readDoubleLE=function(p,w){return p=p>>>0,w||D(p,8,this.length),n.read(this,p,!0,52,8)},l.prototype.readDoubleBE=function(p,w){return p=p>>>0,w||D(p,8,this.length),n.read(this,p,!1,52,8)};function V(O,p,w,W,oe,ce){if(!l.isBuffer(O))throw new TypeError('"buffer" argument must be a Buffer instance');if(p>oe||p<ce)throw new RangeError('"value" argument is out of bounds');if(w+W>O.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(p,w,W,oe){if(p=+p,w=w>>>0,W=W>>>0,!oe){const Te=Math.pow(2,8*W)-1;V(this,p,w,W,Te,0)}let ce=1,fe=0;for(this[w]=p&255;++fe<W&&(ce*=256);)this[w+fe]=p/ce&255;return w+W},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(p,w,W,oe){if(p=+p,w=w>>>0,W=W>>>0,!oe){const Te=Math.pow(2,8*W)-1;V(this,p,w,W,Te,0)}let ce=W-1,fe=1;for(this[w+ce]=p&255;--ce>=0&&(fe*=256);)this[w+ce]=p/fe&255;return w+W},l.prototype.writeUint8=l.prototype.writeUInt8=function(p,w,W){return p=+p,w=w>>>0,W||V(this,p,w,1,255,0),this[w]=p&255,w+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(p,w,W){return p=+p,w=w>>>0,W||V(this,p,w,2,65535,0),this[w]=p&255,this[w+1]=p>>>8,w+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(p,w,W){return p=+p,w=w>>>0,W||V(this,p,w,2,65535,0),this[w]=p>>>8,this[w+1]=p&255,w+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(p,w,W){return p=+p,w=w>>>0,W||V(this,p,w,4,4294967295,0),this[w+3]=p>>>24,this[w+2]=p>>>16,this[w+1]=p>>>8,this[w]=p&255,w+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(p,w,W){return p=+p,w=w>>>0,W||V(this,p,w,4,4294967295,0),this[w]=p>>>24,this[w+1]=p>>>16,this[w+2]=p>>>8,this[w+3]=p&255,w+4};function se(O,p,w,W,oe){I(p,W,oe,O,w,7);let ce=Number(p&BigInt(4294967295));O[w++]=ce,ce=ce>>8,O[w++]=ce,ce=ce>>8,O[w++]=ce,ce=ce>>8,O[w++]=ce;let fe=Number(p>>BigInt(32)&BigInt(4294967295));return O[w++]=fe,fe=fe>>8,O[w++]=fe,fe=fe>>8,O[w++]=fe,fe=fe>>8,O[w++]=fe,w}function X(O,p,w,W,oe){I(p,W,oe,O,w,7);let ce=Number(p&BigInt(4294967295));O[w+7]=ce,ce=ce>>8,O[w+6]=ce,ce=ce>>8,O[w+5]=ce,ce=ce>>8,O[w+4]=ce;let fe=Number(p>>BigInt(32)&BigInt(4294967295));return O[w+3]=fe,fe=fe>>8,O[w+2]=fe,fe=fe>>8,O[w+1]=fe,fe=fe>>8,O[w]=fe,w+8}l.prototype.writeBigUInt64LE=Ie(function(p,w=0){return se(this,p,w,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Ie(function(p,w=0){return X(this,p,w,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(p,w,W,oe){if(p=+p,w=w>>>0,!oe){const Le=Math.pow(2,8*W-1);V(this,p,w,W,Le-1,-Le)}let ce=0,fe=1,Te=0;for(this[w]=p&255;++ce<W&&(fe*=256);)p<0&&Te===0&&this[w+ce-1]!==0&&(Te=1),this[w+ce]=(p/fe>>0)-Te&255;return w+W},l.prototype.writeIntBE=function(p,w,W,oe){if(p=+p,w=w>>>0,!oe){const Le=Math.pow(2,8*W-1);V(this,p,w,W,Le-1,-Le)}let ce=W-1,fe=1,Te=0;for(this[w+ce]=p&255;--ce>=0&&(fe*=256);)p<0&&Te===0&&this[w+ce+1]!==0&&(Te=1),this[w+ce]=(p/fe>>0)-Te&255;return w+W},l.prototype.writeInt8=function(p,w,W){return p=+p,w=w>>>0,W||V(this,p,w,1,127,-128),p<0&&(p=255+p+1),this[w]=p&255,w+1},l.prototype.writeInt16LE=function(p,w,W){return p=+p,w=w>>>0,W||V(this,p,w,2,32767,-32768),this[w]=p&255,this[w+1]=p>>>8,w+2},l.prototype.writeInt16BE=function(p,w,W){return p=+p,w=w>>>0,W||V(this,p,w,2,32767,-32768),this[w]=p>>>8,this[w+1]=p&255,w+2},l.prototype.writeInt32LE=function(p,w,W){return p=+p,w=w>>>0,W||V(this,p,w,4,2147483647,-2147483648),this[w]=p&255,this[w+1]=p>>>8,this[w+2]=p>>>16,this[w+3]=p>>>24,w+4},l.prototype.writeInt32BE=function(p,w,W){return p=+p,w=w>>>0,W||V(this,p,w,4,2147483647,-2147483648),p<0&&(p=4294967295+p+1),this[w]=p>>>24,this[w+1]=p>>>16,this[w+2]=p>>>8,this[w+3]=p&255,w+4},l.prototype.writeBigInt64LE=Ie(function(p,w=0){return se(this,p,w,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Ie(function(p,w=0){return X(this,p,w,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function q(O,p,w,W,oe,ce){if(w+W>O.length)throw new RangeError("Index out of range");if(w<0)throw new RangeError("Index out of range")}function Z(O,p,w,W,oe){return p=+p,w=w>>>0,oe||q(O,p,w,4),n.write(O,p,w,W,23,4),w+4}l.prototype.writeFloatLE=function(p,w,W){return Z(this,p,w,!0,W)},l.prototype.writeFloatBE=function(p,w,W){return Z(this,p,w,!1,W)};function ue(O,p,w,W,oe){return p=+p,w=w>>>0,oe||q(O,p,w,8),n.write(O,p,w,W,52,8),w+8}l.prototype.writeDoubleLE=function(p,w,W){return ue(this,p,w,!0,W)},l.prototype.writeDoubleBE=function(p,w,W){return ue(this,p,w,!1,W)},l.prototype.copy=function(p,w,W,oe){if(!l.isBuffer(p))throw new TypeError("argument should be a Buffer");if(W||(W=0),!oe&&oe!==0&&(oe=this.length),w>=p.length&&(w=p.length),w||(w=0),oe>0&&oe<W&&(oe=W),oe===W||p.length===0||this.length===0)return 0;if(w<0)throw new RangeError("targetStart out of bounds");if(W<0||W>=this.length)throw new RangeError("Index out of range");if(oe<0)throw new RangeError("sourceEnd out of bounds");oe>this.length&&(oe=this.length),p.length-w<oe-W&&(oe=p.length-w+W);const ce=oe-W;return this===p&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(w,W,oe):Uint8Array.prototype.set.call(p,this.subarray(W,oe),w),ce},l.prototype.fill=function(p,w,W,oe){if(typeof p=="string"){if(typeof w=="string"?(oe=w,w=0,W=this.length):typeof W=="string"&&(oe=W,W=this.length),oe!==void 0&&typeof oe!="string")throw new TypeError("encoding must be a string");if(typeof oe=="string"&&!l.isEncoding(oe))throw new TypeError("Unknown encoding: "+oe);if(p.length===1){const fe=p.charCodeAt(0);(oe==="utf8"&&fe<128||oe==="latin1")&&(p=fe)}}else typeof p=="number"?p=p&255:typeof p=="boolean"&&(p=Number(p));if(w<0||this.length<w||this.length<W)throw new RangeError("Out of range index");if(W<=w)return this;w=w>>>0,W=W===void 0?this.length:W>>>0,p||(p=0);let ce;if(typeof p=="number")for(ce=w;ce<W;++ce)this[ce]=p;else{const fe=l.isBuffer(p)?p:l.from(p,oe),Te=fe.length;if(Te===0)throw new TypeError('The value "'+p+'" is invalid for argument "value"');for(ce=0;ce<W-w;++ce)this[ce+w]=fe[ce%Te]}return this};const ne={};function J(O,p,w){ne[O]=class extends w{constructor(){super(),Object.defineProperty(this,"message",{value:p.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${O}]`,this.stack,delete this.name}get code(){return O}set code(oe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:oe,writable:!0})}toString(){return`${this.name} [${O}]: ${this.message}`}}}J("ERR_BUFFER_OUT_OF_BOUNDS",function(O){return O?`${O} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),J("ERR_INVALID_ARG_TYPE",function(O,p){return`The "${O}" argument must be of type number. Received type ${typeof p}`},TypeError),J("ERR_OUT_OF_RANGE",function(O,p,w){let W=`The value of "${O}" is out of range.`,oe=w;return Number.isInteger(w)&&Math.abs(w)>2**32?oe=N(String(w)):typeof w=="bigint"&&(oe=String(w),(w>BigInt(2)**BigInt(32)||w<-(BigInt(2)**BigInt(32)))&&(oe=N(oe)),oe+="n"),W+=` It must be ${p}. Received ${oe}`,W},RangeError);function N(O){let p="",w=O.length;const W=O[0]==="-"?1:0;for(;w>=W+4;w-=3)p=`_${O.slice(w-3,w)}${p}`;return`${O.slice(0,w)}${p}`}function g(O,p,w){T(p,"offset"),(O[p]===void 0||O[p+w]===void 0)&&C(p,O.length-(w+1))}function I(O,p,w,W,oe,ce){if(O>w||O<p){const fe=typeof p=="bigint"?"n":"";let Te;throw ce>3?p===0||p===BigInt(0)?Te=`>= 0${fe} and < 2${fe} ** ${(ce+1)*8}${fe}`:Te=`>= -(2${fe} ** ${(ce+1)*8-1}${fe}) and < 2 ** ${(ce+1)*8-1}${fe}`:Te=`>= ${p}${fe} and <= ${w}${fe}`,new ne.ERR_OUT_OF_RANGE("value",Te,O)}g(W,oe,ce)}function T(O,p){if(typeof O!="number")throw new ne.ERR_INVALID_ARG_TYPE(p,"number",O)}function C(O,p,w){throw Math.floor(O)!==O?(T(O,w),new ne.ERR_OUT_OF_RANGE(w||"offset","an integer",O)):p<0?new ne.ERR_BUFFER_OUT_OF_BOUNDS:new ne.ERR_OUT_OF_RANGE(w||"offset",`>= ${w?1:0} and <= ${p}`,O)}const P=/[^+/0-9A-Za-z-_]/g;function H(O){if(O=O.split("=")[0],O=O.trim().replace(P,""),O.length<2)return"";for(;O.length%4!==0;)O=O+"=";return O}function M(O,p){p=p||1/0;let w;const W=O.length;let oe=null;const ce=[];for(let fe=0;fe<W;++fe){if(w=O.charCodeAt(fe),w>55295&&w<57344){if(!oe){if(w>56319){(p-=3)>-1&&ce.push(239,191,189);continue}else if(fe+1===W){(p-=3)>-1&&ce.push(239,191,189);continue}oe=w;continue}if(w<56320){(p-=3)>-1&&ce.push(239,191,189),oe=w;continue}w=(oe-55296<<10|w-56320)+65536}else oe&&(p-=3)>-1&&ce.push(239,191,189);if(oe=null,w<128){if((p-=1)<0)break;ce.push(w)}else if(w<2048){if((p-=2)<0)break;ce.push(w>>6|192,w&63|128)}else if(w<65536){if((p-=3)<0)break;ce.push(w>>12|224,w>>6&63|128,w&63|128)}else if(w<1114112){if((p-=4)<0)break;ce.push(w>>18|240,w>>12&63|128,w>>6&63|128,w&63|128)}else throw new Error("Invalid code point")}return ce}function K(O){const p=[];for(let w=0;w<O.length;++w)p.push(O.charCodeAt(w)&255);return p}function Q(O,p){let w,W,oe;const ce=[];for(let fe=0;fe<O.length&&!((p-=2)<0);++fe)w=O.charCodeAt(fe),W=w>>8,oe=w%256,ce.push(oe),ce.push(W);return ce}function te(O){return e.toByteArray(H(O))}function le(O,p,w,W){let oe;for(oe=0;oe<W&&!(oe+w>=p.length||oe>=O.length);++oe)p[oe+w]=O[oe];return oe}function we(O,p){return O instanceof p||O!=null&&O.constructor!=null&&O.constructor.name!=null&&O.constructor.name===p.name}function _e(O){return O!==O}const be=function(){const O="0123456789abcdef",p=new Array(256);for(let w=0;w<16;++w){const W=w*16;for(let oe=0;oe<16;++oe)p[W+oe]=O[w]+O[oe]}return p}();function Ie(O){return typeof BigInt>"u"?He:O}function He(){throw new Error("BigInt not supported")}})(_t);const gE="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySW5mb3JtYXRpb24iOnsiaWQiOiJjYzJlODE1OC00Zjg5LTQ0MTUtOGRjNS0xYjhiODE3ZjJhNGQiLCJlbWFpbCI6ImRpdmVyY2l0eXJlY29yZHNAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsInBpbl9wb2xpY3kiOnsicmVnaW9ucyI6W3siZGVzaXJlZFJlcGxpY2F0aW9uQ291bnQiOjEsImlkIjoiRlJBMSJ9LHsiZGVzaXJlZFJlcGxpY2F0aW9uQ291bnQiOjEsImlkIjoiTllDMSJ9XSwidmVyc2lvbiI6MX0sIm1mYV9lbmFibGVkIjpmYWxzZSwic3RhdHVzIjoiQUNUSVZFIn0sImF1dGhlbnRpY2F0aW9uVHlwZSI6InNjb3BlZEtleSIsInNjb3BlZEtleUtleSI6IjUyYTYyNTYxMTFiZWU1MTI5Njc3Iiwic2NvcGVkS2V5U2VjcmV0IjoiNzM1NzkzYjU3MjY3OTJiZWExNTQ5OTQwOGM4YzE4NjJhYjUzNDVhYTNlNGQ2N2U3MTA5YmFkYzQ2ZWNjOTBjNSIsImV4cCI6MTc3NTcxMzUzNn0.YYXsotBUiPEFdu40xv0sLrLGuU6CGsVDMjbqjB5zEjA",Gz="https://api.pinata.cloud/pinning/pinFileToIPFS",Yz="https://gateway.pinata.cloud/ipfs/",Mf=async t=>{try{console.log("Starting Pinata upload for file:",t.name);const e=new FormData;e.append("file",t);const n=JSON.stringify({name:`token-${Date.now()}-${t.name}`});e.append("pinataMetadata",n);const r=JSON.stringify({cidVersion:1});e.append("pinataOptions",r),console.log("Uploading to Pinata with JWT:",gE?"JWT exists":"JWT missing");const s=await fetch(Gz,{method:"POST",headers:{Authorization:`Bearer ${gE}`},body:e});if(console.log("Pinata response status:",s.status),!s.ok){const l=await s.text();throw console.error("Pinata error response:",l),new Error(`Failed to upload image to Pinata: ${s.status} ${l}`)}const i=await s.json();console.log("Pinata upload successful:",i);const a=`${Yz}${i.IpfsHash}`;return console.log("Generated image URL:",a),a}catch(e){throw console.error("Error uploading to Pinata:",e),e}};function xt(t){var e=t.width,n=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(n<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:n}}function aa(t,e){return t.width===e.width&&t.height===e.height}var Jz=function(){function t(e){var n=this;this._resolutionListener=function(){return n._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var n=this,r={next:e};return this._observers.push(r),{unsubscribe:function(){n._observers=n._observers.filter(function(s){return s!==r})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(n){return n.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function Qz(t){return new Jz(t)}var Zz=function(){function t(e,n,r){var s;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=xt({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=n??function(i){return i},this._allowResizeObserver=(s=r==null?void 0:r.allowResizeObserver)!==null&&s!==void 0?s:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,n;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(n=this._devicePixelRatioObservable)===null||n===void 0||n.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return xt({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=xt(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(n){return n!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(n){return n!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var n=this.bitmapSize;aa(n,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(n,e))},t.prototype._emitBitmapSizeChanged=function(e,n){var r=this;this._bitmapSizeChangedListeners.forEach(function(s){return s.call(r,e,n)})},t.prototype._suggestNewBitmapSize=function(e){var n=this._suggestedBitmapSize,r=xt(this._transformBitmapSize(e,this._canvasElementClientSize)),s=aa(this.bitmapSize,r)?null:r;n===null&&s===null||n!==null&&s!==null&&aa(n,s)||(this._suggestedBitmapSize=s,this._emitSuggestedBitmapSizeChanged(n,s))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,n){var r=this;this._suggestedBitmapSizeChangedListeners.forEach(function(s){return s.call(r,e,n)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}tH().then(function(n){return n?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var n=yE(this._canvasElement);if(n===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=Qz(n),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,n;if(this._canvasElement!==null){var r=yE(this._canvasElement);if(r!==null){var s=(n=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&n!==void 0?n:r.devicePixelRatio,i=this._canvasElement.getClientRects(),a=i[0]!==void 0?nH(i[0],s):xt({width:this._canvasElementClientSize.width*s,height:this._canvasElementClientSize.height*s});this._suggestNewBitmapSize(a)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(n){var r=n.find(function(a){return a.target===e._canvasElement});if(!(!r||!r.devicePixelContentBoxSize||!r.devicePixelContentBoxSize[0])){var s=r.devicePixelContentBoxSize[0],i=xt({width:s.inlineSize,height:s.blockSize});e._suggestNewBitmapSize(i)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function eH(t,e){if(e.type==="device-pixel-content-box")return new Zz(t,e.transform,e.options);throw new Error("Unsupported binding target")}function yE(t){return t.ownerDocument.defaultView}function tH(){return new Promise(function(t){var e=new ResizeObserver(function(n){t(n.every(function(r){return"devicePixelContentBoxSize"in r})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function nH(t,e){return xt({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var rH=function(){function t(e,n,r){if(n.width===0||n.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=n,r.width===0||r.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=r,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function wa(t,e){var n=t.canvasElementClientSize;if(n.width===0||n.height===0)return null;var r=t.bitmapSize;if(r.width===0||r.height===0)return null;var s=t.canvasElement.getContext("2d",e);return s===null?null:new rH(s,n,r)}/*!
 * @license
 * TradingView Lightweight Charts™ v4.2.3
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const sH={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},iH={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},oH={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},aH={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},lH={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},cH={color:"#26a69a",base:0},lj={color:"#2196f3"},cj={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var vE,xE;function ba(t,e){const n={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(n)}function uj(t,e,n,r){t.beginPath();const s=t.lineWidth%2?.5:0;t.moveTo(n,e+s),t.lineTo(r,e+s),t.stroke()}function co(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function vn(t){if(t===void 0)throw new Error("Value is undefined");return t}function Se(t){if(t===null)throw new Error("Value is null");return t}function vl(t){return Se(vn(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(vE||(vE={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(xE||(xE={}));const wE={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function fr(t){return t<0?0:t>255?255:Math.round(t)||0}function dj(t){return t<=0||t>1?Math.min(Math.max(t,0),1):Math.round(1e4*t)/1e4}const uH=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,dH=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,hH=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,fH=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d*\.?\d+)\s*\)$/;function Bu(t){(t=t.toLowerCase())in wE&&(t=wE[t]);{const e=fH.exec(t)||hH.exec(t);if(e)return[fr(parseInt(e[1],10)),fr(parseInt(e[2],10)),fr(parseInt(e[3],10)),dj(e.length<5?1:parseFloat(e[4]))]}{const e=dH.exec(t);if(e)return[fr(parseInt(e[1],16)),fr(parseInt(e[2],16)),fr(parseInt(e[3],16)),1]}{const e=uH.exec(t);if(e)return[fr(17*parseInt(e[1],16)),fr(17*parseInt(e[2],16)),fr(17*parseInt(e[3],16)),1]}throw new Error(`Cannot parse color: ${t}`)}function hj(t){return .199*t[0]+.687*t[1]+.114*t[2]}function Dm(t){const e=Bu(t);return{t:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,i:hj(e)>160?"black":"white"}}class Pt{constructor(){this.h=[]}l(e,n,r){const s={o:e,_:n,u:r===!0};this.h.push(s)}v(e){const n=this.h.findIndex(r=>e===r.o);n>-1&&this.h.splice(n,1)}p(e){this.h=this.h.filter(n=>n._!==e)}m(e,n,r){const s=[...this.h];this.h=this.h.filter(i=>!i.u),s.forEach(i=>i.o(e,n,r))}M(){return this.h.length>0}S(){this.h=[]}}function qr(t,...e){for(const n of e)for(const r in n)n[r]!==void 0&&Object.prototype.hasOwnProperty.call(n,r)&&!["__proto__","constructor","prototype"].includes(r)&&(typeof n[r]!="object"||t[r]===void 0||Array.isArray(n[r])?t[r]=n[r]:qr(t[r],n[r]));return t}function gs(t){return typeof t=="number"&&isFinite(t)}function Fu(t){return typeof t=="number"&&t%1==0}function yd(t){return typeof t=="string"}function hh(t){return typeof t=="boolean"}function Us(t){const e=t;if(!e||typeof e!="object")return e;let n,r,s;for(r in n=Array.isArray(e)?[]:{},e)e.hasOwnProperty(r)&&(s=e[r],n[r]=s&&typeof s=="object"?Us(s):s);return n}function pH(t){return t!==null}function Uu(t){return t===null?void 0:t}const Pw="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Hl(t,e,n){return e===void 0&&(e=Pw),`${n=n!==void 0?`${n} `:""}${t}px ${e}`}class mH{constructor(e){this.k={C:1,T:5,P:NaN,R:"",D:"",V:"",O:"",B:0,A:0,I:0,L:0,N:0},this.F=e}W(){const e=this.k,n=this.j(),r=this.H();return e.P===n&&e.D===r||(e.P=n,e.D=r,e.R=Hl(n,r),e.L=2.5/12*n,e.B=e.L,e.A=n/12*e.T,e.I=n/12*e.T,e.N=0),e.V=this.$(),e.O=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class Rw{constructor(){this.Y=[]}Z(e){this.Y=e}X(e,n,r){this.Y.forEach(s=>{s.X(e,n,r)})}}class Jr{X(e,n,r){e.useBitmapCoordinateSpace(s=>this.K(s,n,r))}}class gH extends Jr{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K({context:e,horizontalPixelRatio:n,verticalPixelRatio:r}){if(this.G===null||this.G.tt===null)return;const s=this.G.tt,i=this.G,a=Math.max(1,Math.floor(n))%2/2,l=c=>{e.beginPath();for(let u=s.to-1;u>=s.from;--u){const d=i.it[u],h=Math.round(d.nt*n)+a,f=d.st*r,m=c*r+a;e.moveTo(h,f),e.arc(h,f,m,0,2*Math.PI)}e.fill()};i.et>0&&(e.fillStyle=i.rt,l(i.ht+i.et)),e.fillStyle=i.lt,l(i.ht)}}function yH(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}const vH={from:0,to:1};class xH{constructor(e,n){this.ut=new Rw,this.ct=[],this.dt=[],this.ft=!0,this.F=e,this.vt=n,this.ut.Z(this.ct)}bt(e){const n=this.F.wt();n.length!==this.ct.length&&(this.dt=n.map(yH),this.ct=this.dt.map(r=>{const s=new gH;return s.J(r),s}),this.ut.Z(this.ct)),this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.ut}Mt(){const e=this.vt.W().mode===2,n=this.F.wt(),r=this.vt.xt(),s=this.F.St();n.forEach((i,a)=>{var l;const c=this.dt[a],u=i.kt(r);if(e||u===null||!i.yt())return void(c.tt=null);const d=Se(i.Ct());c.lt=u.Tt,c.ht=u.ht,c.et=u.Pt,c.it[0]._t=u._t,c.it[0].st=i.Dt().Rt(u._t,d.Vt),c.rt=(l=u.Ot)!==null&&l!==void 0?l:this.F.Bt(c.it[0].st/i.Dt().At()),c.it[0].ot=r,c.it[0].nt=s.It(r),c.tt=vH})}}class wH extends Jr{constructor(e){super(),this.zt=e}K({context:e,bitmapSize:n,horizontalPixelRatio:r,verticalPixelRatio:s}){if(this.zt===null)return;const i=this.zt.Lt.yt,a=this.zt.Et.yt;if(!i&&!a)return;const l=Math.round(this.zt.nt*r),c=Math.round(this.zt.st*s);e.lineCap="butt",i&&l>=0&&(e.lineWidth=Math.floor(this.zt.Lt.et*r),e.strokeStyle=this.zt.Lt.V,e.fillStyle=this.zt.Lt.V,ba(e,this.zt.Lt.Nt),function(u,d,h,f){u.beginPath();const m=u.lineWidth%2?.5:0;u.moveTo(d+m,h),u.lineTo(d+m,f),u.stroke()}(e,l,0,n.height)),a&&c>=0&&(e.lineWidth=Math.floor(this.zt.Et.et*s),e.strokeStyle=this.zt.Et.V,e.fillStyle=this.zt.Et.V,ba(e,this.zt.Et.Nt),uj(e,c,0,n.width))}}class bH{constructor(e){this.ft=!0,this.Ft={Lt:{et:1,Nt:0,V:"",yt:!1},Et:{et:1,Nt:0,V:"",yt:!1},nt:0,st:0},this.Wt=new wH(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.yt(),n=Se(this.jt.Ht()),r=n.$t().W().crosshair,s=this.Ft;if(r.mode===2)return s.Et.yt=!1,void(s.Lt.yt=!1);s.Et.yt=e&&this.jt.Ut(n),s.Lt.yt=e&&this.jt.qt(),s.Et.et=r.horzLine.width,s.Et.Nt=r.horzLine.style,s.Et.V=r.horzLine.color,s.Lt.et=r.vertLine.width,s.Lt.Nt=r.vertLine.style,s.Lt.V=r.vertLine.color,s.nt=this.jt.Yt(),s.st=this.jt.Zt()}}function _H(t,e,n,r,s,i){t.fillRect(e+i,n,r-2*i,i),t.fillRect(e+i,n+s-i,r-2*i,i),t.fillRect(e,n,i,s),t.fillRect(e+r-i,n,i,s)}function Bm(t,e,n,r,s,i){t.save(),t.globalCompositeOperation="copy",t.fillStyle=i,t.fillRect(e,n,r,s),t.restore()}function bE(t,e,n,r,s,i){t.beginPath(),t.roundRect?t.roundRect(e,n,r,s,i):(t.lineTo(e+r-i[1],n),i[1]!==0&&t.arcTo(e+r,n,e+r,n+i[1],i[1]),t.lineTo(e+r,n+s-i[2]),i[2]!==0&&t.arcTo(e+r,n+s,e+r-i[2],n+s,i[2]),t.lineTo(e+i[3],n+s),i[3]!==0&&t.arcTo(e,n+s,e,n+s-i[3],i[3]),t.lineTo(e,n+i[0]),i[0]!==0&&t.arcTo(e,n,e+i[0],n,i[0]))}function _E(t,e,n,r,s,i,a=0,l=[0,0,0,0],c=""){if(t.save(),!a||!c||c===i)return bE(t,e,n,r,s,l),t.fillStyle=i,t.fill(),void t.restore();const u=a/2;var d;bE(t,e+u,n+u,r-a,s-a,(d=-u,l.map(h=>h===0?h:h+d))),i!=="transparent"&&(t.fillStyle=i,t.fill()),c!=="transparent"&&(t.lineWidth=a,t.strokeStyle=c,t.closePath(),t.stroke()),t.restore()}function fj(t,e,n,r,s,i,a){t.save(),t.globalCompositeOperation="copy";const l=t.createLinearGradient(0,0,0,s);l.addColorStop(0,i),l.addColorStop(1,a),t.fillStyle=l,t.fillRect(e,n,r,s),t.restore()}class EE{constructor(e,n){this.J(e,n)}J(e,n){this.zt=e,this.Xt=n}At(e,n){return this.zt.yt?e.P+e.L+e.B:0}X(e,n,r,s){if(!this.zt.yt||this.zt.Kt.length===0)return;const i=this.zt.V,a=this.Xt.t,l=e.useBitmapCoordinateSpace(c=>{const u=c.context;u.font=n.R;const d=this.Gt(c,n,r,s),h=d.Jt;return d.Qt?_E(u,h.ti,h.ii,h.ni,h.si,a,h.ei,[h.ht,0,0,h.ht],a):_E(u,h.ri,h.ii,h.ni,h.si,a,h.ei,[0,h.ht,h.ht,0],a),this.zt.hi&&(u.fillStyle=i,u.fillRect(h.ri,h.li,h.ai-h.ri,h.oi)),this.zt._i&&(u.fillStyle=n.O,u.fillRect(d.Qt?h.ui-h.ei:0,h.ii,h.ei,h.ci-h.ii)),d});e.useMediaCoordinateSpace(({context:c})=>{const u=l.di;c.font=n.R,c.textAlign=l.Qt?"right":"left",c.textBaseline="middle",c.fillStyle=i,c.fillText(this.zt.Kt,u.fi,(u.ii+u.ci)/2+u.pi)})}Gt(e,n,r,s){var i;const{context:a,bitmapSize:l,mediaSize:c,horizontalPixelRatio:u,verticalPixelRatio:d}=e,h=this.zt.hi||!this.zt.mi?n.T:0,f=this.zt.bi?n.C:0,m=n.L+this.Xt.wi,_=n.B+this.Xt.gi,S=n.A,j=n.I,y=this.zt.Kt,x=n.P,b=r.Mi(a,y),v=Math.ceil(r.xi(a,y)),A=x+m+_,E=n.C+S+j+v+h,L=Math.max(1,Math.floor(d));let Y=Math.round(A*d);Y%2!=L%2&&(Y+=1);const ee=f>0?Math.max(1,Math.floor(f*u)):0,U=Math.round(E*u),G=Math.round(h*u),ae=(i=this.Xt.Si)!==null&&i!==void 0?i:this.Xt.ki,he=Math.round(ae*d)-Math.floor(.5*d),xe=Math.floor(he+L/2-Y/2),de=xe+Y,$=s==="right",re=$?c.width-f:f,F=$?l.width-ee:ee;let k,R,D;return $?(k=F-U,R=F-G,D=re-h-S-f):(k=F+U,R=F+G,D=re+h+S),{Qt:$,Jt:{ii:xe,li:he,ci:de,ni:U,si:Y,ht:2*u,ei:ee,ti:k,ri:F,ai:R,oi:L,ui:l.width},di:{ii:xe/d,ci:de/d,fi:D,pi:b}}}}class Fm{constructor(e){this.yi={ki:0,t:"#000",gi:0,wi:0},this.Ci={Kt:"",yt:!1,hi:!0,mi:!1,Ot:"",V:"#FFF",_i:!1,bi:!1},this.Ti={Kt:"",yt:!1,hi:!1,mi:!0,Ot:"",V:"#FFF",_i:!0,bi:!0},this.ft=!0,this.Pi=new(e||EE)(this.Ci,this.yi),this.Ri=new(e||EE)(this.Ti,this.yi)}Kt(){return this.Di(),this.Ci.Kt}ki(){return this.Di(),this.yi.ki}bt(){this.ft=!0}At(e,n=!1){return Math.max(this.Pi.At(e,n),this.Ri.At(e,n))}Vi(){return this.yi.Si||0}Oi(e){this.yi.Si=e}Bi(){return this.Di(),this.Ci.yt||this.Ti.yt}Ai(){return this.Di(),this.Ci.yt}gt(e){return this.Di(),this.Ci.hi=this.Ci.hi&&e.W().ticksVisible,this.Ti.hi=this.Ti.hi&&e.W().ticksVisible,this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Pi}Ii(){return this.Di(),this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Ri}Di(){this.ft&&(this.Ci.hi=!0,this.Ti.hi=!1,this.zi(this.Ci,this.Ti,this.yi))}}class EH extends Fm{constructor(e,n,r){super(),this.jt=e,this.Li=n,this.Ei=r}zi(e,n,r){if(e.yt=!1,this.jt.W().mode===2)return;const s=this.jt.W().horzLine;if(!s.labelVisible)return;const i=this.Li.Ct();if(!this.jt.yt()||this.Li.Ni()||i===null)return;const a=Dm(s.labelBackgroundColor);r.t=a.t,e.V=a.i;const l=2/12*this.Li.P();r.wi=l,r.gi=l;const c=this.Ei(this.Li);r.ki=c.ki,e.Kt=this.Li.Fi(c._t,i),e.yt=!0}}const SH=/[1-9]/g;class pj{constructor(){this.zt=null}J(e){this.zt=e}X(e,n){if(this.zt===null||this.zt.yt===!1||this.zt.Kt.length===0)return;const r=e.useMediaCoordinateSpace(({context:f})=>(f.font=n.R,Math.round(n.Wi.xi(f,Se(this.zt).Kt,SH))));if(r<=0)return;const s=n.ji,i=r+2*s,a=i/2,l=this.zt.Hi;let c=this.zt.ki,u=Math.floor(c-a)+.5;u<0?(c+=Math.abs(0-u),u=Math.floor(c-a)+.5):u+i>l&&(c-=Math.abs(l-(u+i)),u=Math.floor(c-a)+.5);const d=u+i,h=Math.ceil(0+n.C+n.T+n.L+n.P+n.B);e.useBitmapCoordinateSpace(({context:f,horizontalPixelRatio:m,verticalPixelRatio:_})=>{const S=Se(this.zt);f.fillStyle=S.t;const j=Math.round(u*m),y=Math.round(0*_),x=Math.round(d*m),b=Math.round(h*_),v=Math.round(2*m);if(f.beginPath(),f.moveTo(j,y),f.lineTo(j,b-v),f.arcTo(j,b,j+v,b,v),f.lineTo(x-v,b),f.arcTo(x,b,x,b-v,v),f.lineTo(x,y),f.fill(),S.hi){const A=Math.round(S.ki*m),E=y,L=Math.round((E+n.T)*_);f.fillStyle=S.V;const Y=Math.max(1,Math.floor(m)),ee=Math.floor(.5*m);f.fillRect(A-ee,E,Y,L-E)}}),e.useMediaCoordinateSpace(({context:f})=>{const m=Se(this.zt),_=0+n.C+n.T+n.L+n.P/2;f.font=n.R,f.textAlign="left",f.textBaseline="middle",f.fillStyle=m.V;const S=n.Wi.Mi(f,"Apr0");f.translate(u+s,_+S),f.fillText(m.Kt,0,0)})}}class NH{constructor(e,n,r){this.ft=!0,this.Wt=new pj,this.Ft={yt:!1,t:"#4c525e",V:"white",Kt:"",Hi:0,ki:NaN,hi:!0},this.vt=e,this.$i=n,this.Ei=r}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt.J(this.Ft),this.Wt}Mt(){const e=this.Ft;if(e.yt=!1,this.vt.W().mode===2)return;const n=this.vt.W().vertLine;if(!n.labelVisible)return;const r=this.$i.St();if(r.Ni())return;e.Hi=r.Hi();const s=this.Ei();if(s===null)return;e.ki=s.ki;const i=r.Ui(this.vt.xt());e.Kt=r.qi(Se(i)),e.yt=!0;const a=Dm(n.labelBackgroundColor);e.t=a.t,e.V=a.i,e.hi=r.W().ticksVisible}}class Lw{constructor(){this.Yi=null,this.Zi=0}Xi(){return this.Zi}Ki(e){this.Zi=e}Dt(){return this.Yi}Gi(e){this.Yi=e}Ji(e){return[]}Qi(){return[]}yt(){return!0}}var SE;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden"})(SE||(SE={}));class TH extends Lw{constructor(e,n){super(),this.tn=null,this.nn=NaN,this.sn=0,this.en=!0,this.rn=new Map,this.hn=!1,this.ln=NaN,this.an=NaN,this._n=NaN,this.un=NaN,this.$i=e,this.cn=n,this.dn=new xH(e,this),this.fn=((s,i)=>a=>{const l=i(),c=s();if(a===Se(this.tn).vn())return{_t:c,ki:l};{const u=Se(a.Ct());return{_t:a.pn(l,u),ki:l}}})(()=>this.nn,()=>this.an);const r=((s,i)=>()=>{const a=this.$i.St().mn(s()),l=i();return a&&Number.isFinite(l)?{ot:a,ki:l}:null})(()=>this.sn,()=>this.Yt());this.bn=new NH(this,e,r),this.wn=new bH(this)}W(){return this.cn}gn(e,n){this._n=e,this.un=n}Mn(){this._n=NaN,this.un=NaN}xn(){return this._n}Sn(){return this.un}kn(e,n,r){this.hn||(this.hn=!0),this.en=!0,this.yn(e,n,r)}xt(){return this.sn}Yt(){return this.ln}Zt(){return this.an}yt(){return this.en}Cn(){this.en=!1,this.Tn(),this.nn=NaN,this.ln=NaN,this.an=NaN,this.tn=null,this.Mn()}Pn(e){return this.tn!==null?[this.wn,this.dn]:[]}Ut(e){return e===this.tn&&this.cn.horzLine.visible}qt(){return this.cn.vertLine.visible}Rn(e,n){this.en&&this.tn===e||this.rn.clear();const r=[];return this.tn===e&&r.push(this.Dn(this.rn,n,this.fn)),r}Qi(){return this.en?[this.bn]:[]}Ht(){return this.tn}Vn(){this.wn.bt(),this.rn.forEach(e=>e.bt()),this.bn.bt(),this.dn.bt()}On(e){return e&&!e.vn().Ni()?e.vn():null}yn(e,n,r){this.Bn(e,n,r)&&this.Vn()}Bn(e,n,r){const s=this.ln,i=this.an,a=this.nn,l=this.sn,c=this.tn,u=this.On(r);this.sn=e,this.ln=isNaN(e)?NaN:this.$i.St().It(e),this.tn=r;const d=u!==null?u.Ct():null;return u!==null&&d!==null?(this.nn=n,this.an=u.Rt(n,d)):(this.nn=NaN,this.an=NaN),s!==this.ln||i!==this.an||l!==this.sn||a!==this.nn||c!==this.tn}Tn(){const e=this.$i.wt().map(r=>r.In().An()).filter(pH),n=e.length===0?null:Math.max(...e);this.sn=n!==null?n:NaN}Dn(e,n,r){let s=e.get(n);return s===void 0&&(s=new EH(this,n,r),e.set(n,s)),s}}function Um(t){return t==="left"||t==="right"}class Qt{constructor(e){this.zn=new Map,this.Ln=[],this.En=e}Nn(e,n){const r=function(s,i){return s===void 0?i:{Fn:Math.max(s.Fn,i.Fn),Wn:s.Wn||i.Wn}}(this.zn.get(e),n);this.zn.set(e,r)}jn(){return this.En}Hn(e){const n=this.zn.get(e);return n===void 0?{Fn:this.En}:{Fn:Math.max(this.En,n.Fn),Wn:n.Wn}}$n(){this.Un(),this.Ln=[{qn:0}]}Yn(e){this.Un(),this.Ln=[{qn:1,Vt:e}]}Zn(e){this.Xn(),this.Ln.push({qn:5,Vt:e})}Un(){this.Xn(),this.Ln.push({qn:6})}Kn(){this.Un(),this.Ln=[{qn:4}]}Gn(e){this.Un(),this.Ln.push({qn:2,Vt:e})}Jn(e){this.Un(),this.Ln.push({qn:3,Vt:e})}Qn(){return this.Ln}ts(e){for(const n of e.Ln)this.ns(n);this.En=Math.max(this.En,e.En),e.zn.forEach((n,r)=>{this.Nn(r,n)})}static ss(){return new Qt(2)}static es(){return new Qt(3)}ns(e){switch(e.qn){case 0:this.$n();break;case 1:this.Yn(e.Vt);break;case 2:this.Gn(e.Vt);break;case 3:this.Jn(e.Vt);break;case 4:this.Kn();break;case 5:this.Zn(e.Vt);break;case 6:this.Xn()}}Xn(){const e=this.Ln.findIndex(n=>n.qn===5);e!==-1&&this.Ln.splice(e,1)}}const NE=".";function $s(t,e){if(!gs(t))return"n/a";if(!Fu(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class $m{constructor(e,n){if(n||(n=1),gs(e)&&Fu(e)||(e=100),e<0)throw new TypeError("invalid base");this.Li=e,this.rs=n,this.hs()}format(e){const n=e<0?"−":"";return e=Math.abs(e),n+this.ls(e)}hs(){if(this._s=0,this.Li>0&&this.rs>0){let e=this.Li;for(;e>1;)e/=10,this._s++}}ls(e){const n=this.Li/this.rs;let r=Math.floor(e),s="";const i=this._s!==void 0?this._s:NaN;if(n>1){let a=+(Math.round(e*n)-r*n).toFixed(this._s);a>=n&&(a-=n,r+=1),s=NE+$s(+a.toFixed(this._s)*this.rs,i)}else r=Math.round(r*n)/n,i>0&&(s=NE+$s(0,i));return r.toFixed(0)+s}}class mj extends $m{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class AH{constructor(e){this.us=e}format(e){let n="";return e<0&&(n="-",e=-e),e<995?n+this.cs(e):e<999995?n+this.cs(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),n+this.cs(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),n+this.cs(e/1e9)+"B")}cs(e){let n;const r=Math.pow(10,this.us);return n=(e=Math.round(e*r)/r)>=1e-15&&e<1?e.toFixed(this.us).replace(/\.?0+$/,""):String(e),n.replace(/(\.[1-9]*)0+$/,(s,i)=>i)}}function gj(t,e,n,r,s,i,a){if(e.length===0||r.from>=e.length||r.to<=0)return;const{context:l,horizontalPixelRatio:c,verticalPixelRatio:u}=t,d=e[r.from];let h=i(t,d),f=d;if(r.to-r.from<2){const m=s/2;l.beginPath();const _={nt:d.nt-m,st:d.st},S={nt:d.nt+m,st:d.st};l.moveTo(_.nt*c,_.st*u),l.lineTo(S.nt*c,S.st*u),a(t,h,_,S)}else{const m=(S,j)=>{a(t,h,f,j),l.beginPath(),h=S,f=j};let _=f;l.beginPath(),l.moveTo(d.nt*c,d.st*u);for(let S=r.from+1;S<r.to;++S){_=e[S];const j=i(t,_);switch(n){case 0:l.lineTo(_.nt*c,_.st*u);break;case 1:l.lineTo(_.nt*c,e[S-1].st*u),j!==h&&(m(j,_),l.lineTo(_.nt*c,e[S-1].st*u)),l.lineTo(_.nt*c,_.st*u);break;case 2:{const[y,x]=CH(e,S-1,S);l.bezierCurveTo(y.nt*c,y.st*u,x.nt*c,x.st*u,_.nt*c,_.st*u);break}}n!==1&&j!==h&&(m(j,_),l.moveTo(_.nt*c,_.st*u))}(f!==_||f===_&&n===1)&&a(t,h,f,_)}}const TE=6;function bg(t,e){return{nt:t.nt-e.nt,st:t.st-e.st}}function AE(t,e){return{nt:t.nt/e,st:t.st/e}}function CH(t,e,n){const r=Math.max(0,e-1),s=Math.min(t.length-1,n+1);var i,a;return[(i=t[e],a=AE(bg(t[n],t[r]),TE),{nt:i.nt+a.nt,st:i.st+a.st}),bg(t[n],AE(bg(t[s],t[e]),TE))]}function jH(t,e,n,r,s){const{context:i,horizontalPixelRatio:a,verticalPixelRatio:l}=e;i.lineTo(s.nt*a,t*l),i.lineTo(r.nt*a,t*l),i.closePath(),i.fillStyle=n,i.fill()}class yj extends Jr{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){var n;if(this.G===null)return;const{it:r,tt:s,ds:i,et:a,Nt:l,fs:c}=this.G,u=(n=this.G.vs)!==null&&n!==void 0?n:this.G.ps?0:e.mediaSize.height;if(s===null)return;const d=e.context;d.lineCap="butt",d.lineJoin="round",d.lineWidth=a,ba(d,l),d.lineWidth=1,gj(e,r,c,s,i,this.bs.bind(this),jH.bind(null,u))}}function Tv(t,e,n){return Math.min(Math.max(t,e),n)}function fh(t,e,n){return e-t<=n}function vj(t){const e=Math.ceil(t);return e%2==0?e-1:e}class Mw{ws(e,n){const r=this.gs,{Ms:s,xs:i,Ss:a,ks:l,ys:c,vs:u}=n;if(this.Cs===void 0||r===void 0||r.Ms!==s||r.xs!==i||r.Ss!==a||r.ks!==l||r.vs!==u||r.ys!==c){const d=e.context.createLinearGradient(0,0,0,c);if(d.addColorStop(0,s),u!=null){const h=Tv(u*e.verticalPixelRatio/c,0,1);d.addColorStop(h,i),d.addColorStop(h,a)}d.addColorStop(1,l),this.Cs=d,this.gs=n}return this.Cs}}class kH extends yj{constructor(){super(...arguments),this.Ts=new Mw}bs(e,n){return this.Ts.ws(e,{Ms:n.Ps,xs:"",Ss:"",ks:n.Rs,ys:e.bitmapSize.height})}}function OH(t,e){const n=t.context;n.strokeStyle=e,n.stroke()}class xj extends Jr{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){if(this.G===null)return;const{it:n,tt:r,ds:s,fs:i,et:a,Nt:l,Ds:c}=this.G;if(r===null)return;const u=e.context;u.lineCap="butt",u.lineWidth=a*e.verticalPixelRatio,ba(u,l),u.lineJoin="round";const d=this.Vs.bind(this);i!==void 0&&gj(e,n,i,r,s,d,OH),c&&function(h,f,m,_,S){const{horizontalPixelRatio:j,verticalPixelRatio:y,context:x}=h;let b=null;const v=Math.max(1,Math.floor(j))%2/2,A=m*y+v;for(let E=_.to-1;E>=_.from;--E){const L=f[E];if(L){const Y=S(h,L);Y!==b&&(x.beginPath(),b!==null&&x.fill(),x.fillStyle=Y,b=Y);const ee=Math.round(L.nt*j)+v,U=L.st*y;x.moveTo(ee,U),x.arc(ee,U,A,0,2*Math.PI)}}x.fill()}(e,n,c,r,d)}}class wj extends xj{Vs(e,n){return n.lt}}function bj(t,e,n,r,s=0,i=e.length){let a=i-s;for(;0<a;){const l=a>>1,c=s+l;r(e[c],n)===t?(s=c+1,a-=l+1):a=l}return s}const vd=bj.bind(null,!0),_j=bj.bind(null,!1);function IH(t,e){return t.ot<e}function PH(t,e){return e<t.ot}function Ej(t,e,n){const r=e.Os(),s=e.ui(),i=vd(t,r,IH),a=_j(t,s,PH);if(!n)return{from:i,to:a};let l=i,c=a;return i>0&&i<t.length&&t[i].ot>=r&&(l=i-1),a>0&&a<t.length&&t[a-1].ot<=s&&(c=a+1),{from:l,to:c}}class Dw{constructor(e,n,r){this.Bs=!0,this.As=!0,this.Is=!0,this.zs=[],this.Ls=null,this.Es=e,this.Ns=n,this.Fs=r}bt(e){this.Bs=!0,e==="data"&&(this.As=!0),e==="options"&&(this.Is=!0)}gt(){return this.Es.yt()?(this.Ws(),this.Ls===null?null:this.js):null}Hs(){this.zs=this.zs.map(e=>Object.assign(Object.assign({},e),this.Es.Us().$s(e.ot)))}qs(){this.Ls=null}Ws(){this.As&&(this.Ys(),this.As=!1),this.Is&&(this.Hs(),this.Is=!1),this.Bs&&(this.Zs(),this.Bs=!1)}Zs(){const e=this.Es.Dt(),n=this.Ns.St();if(this.qs(),n.Ni()||e.Ni())return;const r=n.Xs();if(r===null||this.Es.In().Ks()===0)return;const s=this.Es.Ct();s!==null&&(this.Ls=Ej(this.zs,r,this.Fs),this.Gs(e,n,s.Vt),this.Js())}}class Vm extends Dw{constructor(e,n){super(e,n,!0)}Gs(e,n,r){n.Qs(this.zs,Uu(this.Ls)),e.te(this.zs,r,Uu(this.Ls))}ie(e,n){return{ot:e,_t:n,nt:NaN,st:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(n=>{const r=n.Vt[3];return this.se(n.ee,r,e)})}}class RH extends Vm{constructor(e,n){super(e,n),this.js=new Rw,this.re=new kH,this.he=new wj,this.js.Z([this.re,this.he])}se(e,n,r){return Object.assign(Object.assign({},this.ie(e,n)),r.$s(e))}Js(){const e=this.Es.W();this.re.J({fs:e.lineType,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,vs:null,ps:e.invertFilledArea,tt:this.Ls,ds:this.Ns.St().le()}),this.he.J({fs:e.lineVisible?e.lineType:void 0,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,tt:this.Ls,ds:this.Ns.St().le(),Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0})}}class LH extends Jr{constructor(){super(...arguments),this.zt=null,this.ae=0,this.oe=0}J(e){this.zt=e}K({context:e,horizontalPixelRatio:n,verticalPixelRatio:r}){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;this.ae=this._e(n),this.ae>=2&&Math.max(1,Math.floor(n))%2!=this.ae%2&&this.ae--,this.oe=this.zt.ue?Math.min(this.ae,Math.floor(n)):this.ae;let s=null;const i=this.oe<=this.ae&&this.zt.le>=Math.floor(1.5*n);for(let a=this.zt.tt.from;a<this.zt.tt.to;++a){const l=this.zt.In[a];s!==l.ce&&(e.fillStyle=l.ce,s=l.ce);const c=Math.floor(.5*this.oe),u=Math.round(l.nt*n),d=u-c,h=this.oe,f=d+h-1,m=Math.min(l.de,l.fe),_=Math.max(l.de,l.fe),S=Math.round(m*r)-c,j=Math.round(_*r)+c,y=Math.max(j-S,this.oe);e.fillRect(d,S,h,y);const x=Math.ceil(1.5*this.ae);if(i){if(this.zt.ve){const E=u-x;let L=Math.max(S,Math.round(l.pe*r)-c),Y=L+h-1;Y>S+y-1&&(Y=S+y-1,L=Y-h+1),e.fillRect(E,L,d-E,Y-L+1)}const b=u+x;let v=Math.max(S,Math.round(l.me*r)-c),A=v+h-1;A>S+y-1&&(A=S+y-1,v=A-h+1),e.fillRect(f+1,v,b-f,A-v+1)}}}_e(e){const n=Math.floor(e);return Math.max(n,Math.floor(function(r,s){return Math.floor(.3*r*s)}(Se(this.zt).le,e)))}}class Sj extends Dw{constructor(e,n){super(e,n,!1)}Gs(e,n,r){n.Qs(this.zs,Uu(this.Ls)),e.be(this.zs,r,Uu(this.Ls))}we(e,n,r){return{ot:e,ge:n.Vt[0],Me:n.Vt[1],xe:n.Vt[2],Se:n.Vt[3],nt:NaN,pe:NaN,de:NaN,fe:NaN,me:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(n=>this.se(n.ee,n,e))}}class MH extends Sj{constructor(){super(...arguments),this.js=new LH}se(e,n,r){return Object.assign(Object.assign({},this.we(e,n,r)),r.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),ve:e.openVisible,ue:e.thinBars,tt:this.Ls})}}class DH extends yj{constructor(){super(...arguments),this.Ts=new Mw}bs(e,n){const r=this.G;return this.Ts.ws(e,{Ms:n.ke,xs:n.ye,Ss:n.Ce,ks:n.Te,ys:e.bitmapSize.height,vs:r.vs})}}class BH extends xj{constructor(){super(...arguments),this.Pe=new Mw}Vs(e,n){const r=this.G;return this.Pe.ws(e,{Ms:n.Re,xs:n.Re,Ss:n.De,ks:n.De,ys:e.bitmapSize.height,vs:r.vs})}}class FH extends Vm{constructor(e,n){super(e,n),this.js=new Rw,this.Ve=new DH,this.Oe=new BH,this.js.Z([this.Ve,this.Oe])}se(e,n,r){return Object.assign(Object.assign({},this.ie(e,n)),r.$s(e))}Js(){const e=this.Es.Ct();if(e===null)return;const n=this.Es.W(),r=this.Es.Dt().Rt(n.baseValue.price,e.Vt),s=this.Ns.St().le();this.Ve.J({it:this.zs,et:n.lineWidth,Nt:n.lineStyle,fs:n.lineType,vs:r,ps:!1,tt:this.Ls,ds:s}),this.Oe.J({it:this.zs,et:n.lineWidth,Nt:n.lineStyle,fs:n.lineVisible?n.lineType:void 0,Ds:n.pointMarkersVisible?n.pointMarkersRadius||n.lineWidth/2+2:void 0,vs:r,tt:this.Ls,ds:s})}}class UH extends Jr{constructor(){super(...arguments),this.zt=null,this.ae=0}J(e){this.zt=e}K(e){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;const{horizontalPixelRatio:n}=e;this.ae=function(i,a){if(i>=2.5&&i<=4)return Math.floor(3*a);const l=1-.2*Math.atan(Math.max(4,i)-4)/(.5*Math.PI),c=Math.floor(i*l*a),u=Math.floor(i*a),d=Math.min(c,u);return Math.max(Math.floor(a),d)}(this.zt.le,n),this.ae>=2&&Math.floor(n)%2!=this.ae%2&&this.ae--;const r=this.zt.In;this.zt.Be&&this.Ae(e,r,this.zt.tt),this.zt._i&&this.Ie(e,r,this.zt.tt);const s=this.ze(n);(!this.zt._i||this.ae>2*s)&&this.Le(e,r,this.zt.tt)}Ae(e,n,r){if(this.zt===null)return;const{context:s,horizontalPixelRatio:i,verticalPixelRatio:a}=e;let l="",c=Math.min(Math.floor(i),Math.floor(this.zt.le*i));c=Math.max(Math.floor(i),Math.min(c,this.ae));const u=Math.floor(.5*c);let d=null;for(let h=r.from;h<r.to;h++){const f=n[h];f.Ee!==l&&(s.fillStyle=f.Ee,l=f.Ee);const m=Math.round(Math.min(f.pe,f.me)*a),_=Math.round(Math.max(f.pe,f.me)*a),S=Math.round(f.de*a),j=Math.round(f.fe*a);let y=Math.round(i*f.nt)-u;const x=y+c-1;d!==null&&(y=Math.max(d+1,y),y=Math.min(y,x));const b=x-y+1;s.fillRect(y,S,b,m-S),s.fillRect(y,_+1,b,j-_),d=x}}ze(e){let n=Math.floor(1*e);this.ae<=2*n&&(n=Math.floor(.5*(this.ae-1)));const r=Math.max(Math.floor(e),n);return this.ae<=2*r?Math.max(Math.floor(e),Math.floor(1*e)):r}Ie(e,n,r){if(this.zt===null)return;const{context:s,horizontalPixelRatio:i,verticalPixelRatio:a}=e;let l="";const c=this.ze(i);let u=null;for(let d=r.from;d<r.to;d++){const h=n[d];h.Ne!==l&&(s.fillStyle=h.Ne,l=h.Ne);let f=Math.round(h.nt*i)-Math.floor(.5*this.ae);const m=f+this.ae-1,_=Math.round(Math.min(h.pe,h.me)*a),S=Math.round(Math.max(h.pe,h.me)*a);if(u!==null&&(f=Math.max(u+1,f),f=Math.min(f,m)),this.zt.le*i>2*c)_H(s,f,_,m-f+1,S-_+1,c);else{const j=m-f+1;s.fillRect(f,_,j,S-_+1)}u=m}}Le(e,n,r){if(this.zt===null)return;const{context:s,horizontalPixelRatio:i,verticalPixelRatio:a}=e;let l="";const c=this.ze(i);for(let u=r.from;u<r.to;u++){const d=n[u];let h=Math.round(Math.min(d.pe,d.me)*a),f=Math.round(Math.max(d.pe,d.me)*a),m=Math.round(d.nt*i)-Math.floor(.5*this.ae),_=m+this.ae-1;if(d.ce!==l){const S=d.ce;s.fillStyle=S,l=S}this.zt._i&&(m+=c,h+=c,_-=c,f-=c),h>f||s.fillRect(m,h,_-m+1,f-h+1)}}}class $H extends Sj{constructor(){super(...arguments),this.js=new UH}se(e,n,r){return Object.assign(Object.assign({},this.we(e,n,r)),r.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),Be:e.wickVisible,_i:e.borderVisible,tt:this.Ls})}}class VH{constructor(e,n){this.Fe=e,this.Li=n}X(e,n,r){this.Fe.draw(e,this.Li,n,r)}}class _g extends Dw{constructor(e,n,r){super(e,n,!1),this.wn=r,this.js=new VH(this.wn.renderer(),s=>{const i=e.Ct();return i===null?null:e.Dt().Rt(s,i.Vt)})}We(e){return this.wn.priceValueBuilder(e)}je(e){return this.wn.isWhitespace(e)}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(n=>Object.assign(Object.assign({ot:n.ee,nt:NaN},e.$s(n.ee)),{He:n.$e}))}Gs(e,n){n.Qs(this.zs,Uu(this.Ls))}Js(){this.wn.update({bars:this.zs.map(zH),barSpacing:this.Ns.St().le(),visibleRange:this.Ls},this.Es.W())}}function zH(t){return{x:t.nt,time:t.ot,originalData:t.He,barColor:t.ce}}class HH extends Jr{constructor(){super(...arguments),this.zt=null,this.Ue=[]}J(e){this.zt=e,this.Ue=[]}K({context:e,horizontalPixelRatio:n,verticalPixelRatio:r}){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return;this.Ue.length||this.qe(n);const s=Math.max(1,Math.floor(r)),i=Math.round(this.zt.Ye*r)-Math.floor(s/2),a=i+s;for(let l=this.zt.tt.from;l<this.zt.tt.to;l++){const c=this.zt.it[l],u=this.Ue[l-this.zt.tt.from],d=Math.round(c.st*r);let h,f;e.fillStyle=c.ce,d<=i?(h=d,f=a):(h=i,f=d-Math.floor(s/2)+s),e.fillRect(u.Os,h,u.ui-u.Os+1,f-h)}}qe(e){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return void(this.Ue=[]);const n=Math.ceil(this.zt.le*e)<=1?0:Math.max(1,Math.floor(e)),r=Math.round(this.zt.le*e)-n;this.Ue=new Array(this.zt.tt.to-this.zt.tt.from);for(let i=this.zt.tt.from;i<this.zt.tt.to;i++){const a=this.zt.it[i],l=Math.round(a.nt*e);let c,u;if(r%2){const d=(r-1)/2;c=l-d,u=l+d}else{const d=r/2;c=l-d,u=l+d-1}this.Ue[i-this.zt.tt.from]={Os:c,ui:u,Ze:l,Xe:a.nt*e,ot:a.ot}}for(let i=this.zt.tt.from+1;i<this.zt.tt.to;i++){const a=this.Ue[i-this.zt.tt.from],l=this.Ue[i-this.zt.tt.from-1];a.ot===l.ot+1&&a.Os-l.ui!==n+1&&(l.Ze>l.Xe?l.ui=a.Os-n-1:a.Os=l.ui+n+1)}let s=Math.ceil(this.zt.le*e);for(let i=this.zt.tt.from;i<this.zt.tt.to;i++){const a=this.Ue[i-this.zt.tt.from];a.ui<a.Os&&(a.ui=a.Os);const l=a.ui-a.Os+1;s=Math.min(l,s)}if(n>0&&s<4)for(let i=this.zt.tt.from;i<this.zt.tt.to;i++){const a=this.Ue[i-this.zt.tt.from];a.ui-a.Os+1>s&&(a.Ze>a.Xe?a.ui-=1:a.Os+=1)}}}class WH extends Vm{constructor(){super(...arguments),this.js=new HH}se(e,n,r){return Object.assign(Object.assign({},this.ie(e,n)),r.$s(e))}Js(){const e={it:this.zs,le:this.Ns.St().le(),tt:this.Ls,Ye:this.Es.Dt().Rt(this.Es.W().base,Se(this.Es.Ct()).Vt)};this.js.J(e)}}class XH extends Vm{constructor(){super(...arguments),this.js=new wj}se(e,n,r){return Object.assign(Object.assign({},this.ie(e,n)),r.$s(e))}Js(){const e=this.Es.W(),n={it:this.zs,Nt:e.lineStyle,fs:e.lineVisible?e.lineType:void 0,et:e.lineWidth,Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,tt:this.Ls,ds:this.Ns.St().le()};this.js.J(n)}}const KH=/[2-9]/g;class $u{constructor(e=50){this.Ke=0,this.Ge=1,this.Je=1,this.Qe={},this.tr=new Map,this.ir=e}nr(){this.Ke=0,this.tr.clear(),this.Ge=1,this.Je=1,this.Qe={}}xi(e,n,r){return this.sr(e,n,r).width}Mi(e,n,r){const s=this.sr(e,n,r);return((s.actualBoundingBoxAscent||0)-(s.actualBoundingBoxDescent||0))/2}sr(e,n,r){const s=r||KH,i=String(n).replace(s,"0");if(this.tr.has(i))return vn(this.tr.get(i)).er;if(this.Ke===this.ir){const l=this.Qe[this.Je];delete this.Qe[this.Je],this.tr.delete(l),this.Je++,this.Ke--}e.save(),e.textBaseline="middle";const a=e.measureText(i);return e.restore(),a.width===0&&n.length||(this.tr.set(i,{er:a,rr:this.Ge}),this.Qe[this.Ge]=i,this.Ke++,this.Ge++),a}}class qH{constructor(e){this.hr=null,this.k=null,this.lr="right",this.ar=e}_r(e,n,r){this.hr=e,this.k=n,this.lr=r}X(e){this.k!==null&&this.hr!==null&&this.hr.X(e,this.k,this.ar,this.lr)}}class Nj{constructor(e,n,r){this.ur=e,this.ar=new $u(50),this.cr=n,this.F=r,this.j=-1,this.Wt=new qH(this.ar)}gt(){const e=this.F.dr(this.cr);if(e===null)return null;const n=e.vr(this.cr)?e.pr():this.cr.Dt();if(n===null)return null;const r=e.mr(n);if(r==="overlay")return null;const s=this.F.br();return s.P!==this.j&&(this.j=s.P,this.ar.nr()),this.Wt._r(this.ur.Ii(),s,r),this.Wt}}class GH extends Jr{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}wr(e,n){var r;if(!(!((r=this.zt)===null||r===void 0)&&r.yt))return null;const{st:s,et:i,gr:a}=this.zt;return n>=s-i-7&&n<=s+i+7?{Mr:this.zt,gr:a}:null}K({context:e,bitmapSize:n,horizontalPixelRatio:r,verticalPixelRatio:s}){if(this.zt===null||this.zt.yt===!1)return;const i=Math.round(this.zt.st*s);i<0||i>n.height||(e.lineCap="butt",e.strokeStyle=this.zt.V,e.lineWidth=Math.floor(this.zt.et*r),ba(e,this.zt.Nt),uj(e,i,0,n.width))}}class Bw{constructor(e){this.Sr={st:0,V:"rgba(0, 0, 0, 0)",et:1,Nt:0,yt:!1},this.kr=new GH,this.ft=!0,this.Es=e,this.Ns=e.$t(),this.kr.J(this.Sr)}bt(){this.ft=!0}gt(){return this.Es.yt()?(this.ft&&(this.yr(),this.ft=!1),this.kr):null}}class YH extends Bw{constructor(e){super(e)}yr(){this.Sr.yt=!1;const e=this.Es.Dt(),n=e.Cr().Cr;if(n!==2&&n!==3)return;const r=this.Es.W();if(!r.baseLineVisible||!this.Es.yt())return;const s=this.Es.Ct();s!==null&&(this.Sr.yt=!0,this.Sr.st=e.Rt(s.Vt,s.Vt),this.Sr.V=r.baseLineColor,this.Sr.et=r.baseLineWidth,this.Sr.Nt=r.baseLineStyle)}}class JH extends Jr{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}$e(){return this.zt}K({context:e,horizontalPixelRatio:n,verticalPixelRatio:r}){const s=this.zt;if(s===null)return;const i=Math.max(1,Math.floor(n)),a=i%2/2,l=Math.round(s.Xe.x*n)+a,c=s.Xe.y*r;e.fillStyle=s.Tr,e.beginPath();const u=Math.max(2,1.5*s.Pr)*n;e.arc(l,c,u,0,2*Math.PI,!1),e.fill(),e.fillStyle=s.Rr,e.beginPath(),e.arc(l,c,s.ht*n,0,2*Math.PI,!1),e.fill(),e.lineWidth=i,e.strokeStyle=s.Dr,e.beginPath(),e.arc(l,c,s.ht*n+i/2,0,2*Math.PI,!1),e.stroke()}}const QH=[{Vr:0,Or:.25,Br:4,Ar:10,Ir:.25,zr:0,Lr:.4,Er:.8},{Vr:.25,Or:.525,Br:10,Ar:14,Ir:0,zr:0,Lr:.8,Er:0},{Vr:.525,Or:1,Br:14,Ar:14,Ir:0,zr:0,Lr:0,Er:0}];function CE(t,e,n,r){return function(s,i){if(s==="transparent")return s;const a=Bu(s),l=a[3];return`rgba(${a[0]}, ${a[1]}, ${a[2]}, ${i*l})`}(t,n+(r-n)*e)}function jE(t,e){const n=t%2600/2600;let r;for(const c of QH)if(n>=c.Vr&&n<=c.Or){r=c;break}co(r!==void 0,"Last price animation internal logic error");const s=(n-r.Vr)/(r.Or-r.Vr);return{Rr:CE(e,s,r.Ir,r.zr),Dr:CE(e,s,r.Lr,r.Er),ht:(i=s,a=r.Br,l=r.Ar,a+(l-a)*i)};var i,a,l}class ZH{constructor(e){this.Wt=new JH,this.ft=!0,this.Nr=!0,this.Fr=performance.now(),this.Wr=this.Fr-1,this.jr=e}Hr(){this.Wr=this.Fr-1,this.bt()}$r(){if(this.bt(),this.jr.W().lastPriceAnimation===2){const e=performance.now(),n=this.Wr-e;if(n>0)return void(n<650&&(this.Wr+=2600));this.Fr=e,this.Wr=e+2600}}bt(){this.ft=!0}Ur(){this.Nr=!0}yt(){return this.jr.W().lastPriceAnimation!==0}qr(){switch(this.jr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Wr}}gt(){return this.ft?(this.Mt(),this.ft=!1,this.Nr=!1):this.Nr&&(this.Yr(),this.Nr=!1),this.Wt}Mt(){this.Wt.J(null);const e=this.jr.$t().St(),n=e.Xs(),r=this.jr.Ct();if(n===null||r===null)return;const s=this.jr.Zr(!0);if(s.Xr||!n.Kr(s.ee))return;const i={x:e.It(s.ee),y:this.jr.Dt().Rt(s._t,r.Vt)},a=s.V,l=this.jr.W().lineWidth,c=jE(this.Gr(),a);this.Wt.J({Tr:a,Pr:l,Rr:c.Rr,Dr:c.Dr,ht:c.ht,Xe:i})}Yr(){const e=this.Wt.$e();if(e!==null){const n=jE(this.Gr(),e.Tr);e.Rr=n.Rr,e.Dr=n.Dr,e.ht=n.ht}}Gr(){return this.qr()?performance.now()-this.Fr:2599}}function lu(t,e){return vj(Math.min(Math.max(t,12),30)*e)}function Vu(t,e){switch(t){case"arrowDown":case"arrowUp":return lu(e,1);case"circle":return lu(e,.8);case"square":return lu(e,.7)}}function Tj(t){return function(e){const n=Math.ceil(e);return n%2!=0?n-1:n}(lu(t,1))}function kE(t){return Math.max(lu(t,.1),3)}function OE(t,e,n){return e?t:n?Math.ceil(t/2):0}function Aj(t,e,n,r,s){const i=Vu("square",n),a=(i-1)/2,l=t-a,c=e-a;return r>=l&&r<=l+i&&s>=c&&s<=c+i}function IE(t,e,n,r){const s=(Vu("arrowUp",r)-1)/2*n.Jr,i=(vj(r/2)-1)/2*n.Jr;e.beginPath(),t?(e.moveTo(n.nt-s,n.st),e.lineTo(n.nt,n.st-s),e.lineTo(n.nt+s,n.st),e.lineTo(n.nt+i,n.st),e.lineTo(n.nt+i,n.st+s),e.lineTo(n.nt-i,n.st+s),e.lineTo(n.nt-i,n.st)):(e.moveTo(n.nt-s,n.st),e.lineTo(n.nt,n.st+s),e.lineTo(n.nt+s,n.st),e.lineTo(n.nt+i,n.st),e.lineTo(n.nt+i,n.st-s),e.lineTo(n.nt-i,n.st-s),e.lineTo(n.nt-i,n.st)),e.fill()}function eW(t,e,n,r,s,i){return Aj(e,n,r,s,i)}class tW extends Jr{constructor(){super(...arguments),this.zt=null,this.ar=new $u,this.j=-1,this.H="",this.Qr=""}J(e){this.zt=e}_r(e,n){this.j===e&&this.H===n||(this.j=e,this.H=n,this.Qr=Hl(e,n),this.ar.nr())}wr(e,n){if(this.zt===null||this.zt.tt===null)return null;for(let r=this.zt.tt.from;r<this.zt.tt.to;r++){const s=this.zt.it[r];if(rW(s,e,n))return{Mr:s.th,gr:s.gr}}return null}K({context:e,horizontalPixelRatio:n,verticalPixelRatio:r},s,i){if(this.zt!==null&&this.zt.tt!==null){e.textBaseline="middle",e.font=this.Qr;for(let a=this.zt.tt.from;a<this.zt.tt.to;a++){const l=this.zt.it[a];l.Kt!==void 0&&(l.Kt.Hi=this.ar.xi(e,l.Kt.ih),l.Kt.At=this.j,l.Kt.nt=l.nt-l.Kt.Hi/2),nW(l,e,n,r)}}}}function nW(t,e,n,r){e.fillStyle=t.V,t.Kt!==void 0&&function(s,i,a,l,c,u){s.save(),s.scale(c,u),s.fillText(i,a,l),s.restore()}(e,t.Kt.ih,t.Kt.nt,t.Kt.st,n,r),function(s,i,a){if(s.Ks!==0){switch(s.nh){case"arrowDown":return void IE(!1,i,a,s.Ks);case"arrowUp":return void IE(!0,i,a,s.Ks);case"circle":return void function(l,c,u){const d=(Vu("circle",u)-1)/2;l.beginPath(),l.arc(c.nt,c.st,d*c.Jr,0,2*Math.PI,!1),l.fill()}(i,a,s.Ks);case"square":return void function(l,c,u){const d=Vu("square",u),h=(d-1)*c.Jr/2,f=c.nt-h,m=c.st-h;l.fillRect(f,m,d*c.Jr,d*c.Jr)}(i,a,s.Ks)}s.nh}}(t,e,function(s,i,a){const l=Math.max(1,Math.floor(i))%2/2;return{nt:Math.round(s.nt*i)+l,st:s.st*a,Jr:i}}(t,n,r))}function rW(t,e,n){return!(t.Kt===void 0||!function(r,s,i,a,l,c){const u=a/2;return l>=r&&l<=r+i&&c>=s-u&&c<=s+u}(t.Kt.nt,t.Kt.st,t.Kt.Hi,t.Kt.At,e,n))||function(r,s,i){if(r.Ks===0)return!1;switch(r.nh){case"arrowDown":case"arrowUp":return eW(0,r.nt,r.st,r.Ks,s,i);case"circle":return function(a,l,c,u,d){const h=2+Vu("circle",c)/2,f=a-u,m=l-d;return Math.sqrt(f*f+m*m)<=h}(r.nt,r.st,r.Ks,s,i);case"square":return Aj(r.nt,r.st,r.Ks,s,i)}}(t,e,n)}function sW(t,e,n,r,s,i,a,l,c){const u=gs(n)?n:n.Se,d=gs(n)?n:n.Me,h=gs(n)?n:n.xe,f=gs(e.size)?Math.max(e.size,0):1,m=Tj(l.le())*f,_=m/2;switch(t.Ks=m,e.position){case"inBar":return t.st=a.Rt(u,c),void(t.Kt!==void 0&&(t.Kt.st=t.st+_+i+.6*s));case"aboveBar":return t.st=a.Rt(d,c)-_-r.sh,t.Kt!==void 0&&(t.Kt.st=t.st-_-.6*s,r.sh+=1.2*s),void(r.sh+=m+i);case"belowBar":return t.st=a.Rt(h,c)+_+r.eh,t.Kt!==void 0&&(t.Kt.st=t.st+_+i+.6*s,r.eh+=1.2*s),void(r.eh+=m+i)}e.position}class iW{constructor(e,n){this.ft=!0,this.rh=!0,this.hh=!0,this.ah=null,this.oh=null,this.Wt=new tW,this.jr=e,this.$i=n,this.zt={it:[],tt:null}}bt(e){this.ft=!0,this.hh=!0,e==="data"&&(this.rh=!0,this.oh=null)}gt(e){if(!this.jr.yt())return null;this.ft&&this._h();const n=this.$i.W().layout;return this.Wt._r(n.fontSize,n.fontFamily),this.Wt.J(this.zt),this.Wt}uh(){if(this.hh){if(this.jr.dh().length>0){const e=this.$i.St().le(),n=kE(e),r=1.5*Tj(e)+2*n,s=this.fh();this.ah={above:OE(r,s.aboveBar,s.inBar),below:OE(r,s.belowBar,s.inBar)}}else this.ah=null;this.hh=!1}return this.ah}fh(){return this.oh===null&&(this.oh=this.jr.dh().reduce((e,n)=>(e[n.position]||(e[n.position]=!0),e),{inBar:!1,aboveBar:!1,belowBar:!1})),this.oh}_h(){const e=this.jr.Dt(),n=this.$i.St(),r=this.jr.dh();this.rh&&(this.zt.it=r.map(d=>({ot:d.time,nt:0,st:0,Ks:0,nh:d.shape,V:d.color,th:d.th,gr:d.id,Kt:void 0})),this.rh=!1);const s=this.$i.W().layout;this.zt.tt=null;const i=n.Xs();if(i===null)return;const a=this.jr.Ct();if(a===null||this.zt.it.length===0)return;let l=NaN;const c=kE(n.le()),u={sh:c,eh:c};this.zt.tt=Ej(this.zt.it,i,!0);for(let d=this.zt.tt.from;d<this.zt.tt.to;d++){const h=r[d];h.time!==l&&(u.sh=c,u.eh=c,l=h.time);const f=this.zt.it[d];f.nt=n.It(h.time),h.text!==void 0&&h.text.length>0&&(f.Kt={ih:h.text,nt:0,st:0,Hi:0,At:0});const m=this.jr.ph(h.time);m!==null&&sW(f,h,m,u,s.fontSize,c,e,n,a.Vt)}this.ft=!1}}class oW extends Bw{constructor(e){super(e)}yr(){const e=this.Sr;e.yt=!1;const n=this.Es.W();if(!n.priceLineVisible||!this.Es.yt())return;const r=this.Es.Zr(n.priceLineSource===0);r.Xr||(e.yt=!0,e.st=r.ki,e.V=this.Es.mh(r.V),e.et=n.priceLineWidth,e.Nt=n.priceLineStyle)}}class aW extends Fm{constructor(e){super(),this.jt=e}zi(e,n,r){e.yt=!1,n.yt=!1;const s=this.jt;if(!s.yt())return;const i=s.W(),a=i.lastValueVisible,l=s.bh()!=="",c=i.seriesLastValueMode===0,u=s.Zr(!1);if(u.Xr)return;a&&(e.Kt=this.wh(u,a,c),e.yt=e.Kt.length!==0),(l||c)&&(n.Kt=this.gh(u,a,l,c),n.yt=n.Kt.length>0);const d=s.mh(u.V),h=Dm(d);r.t=h.t,r.ki=u.ki,n.Ot=s.$t().Bt(u.ki/s.Dt().At()),e.Ot=d,e.V=h.i,n.V=h.i}gh(e,n,r,s){let i="";const a=this.jt.bh();return r&&a.length!==0&&(i+=`${a} `),n&&s&&(i+=this.jt.Dt().Mh()?e.xh:e.Sh),i.trim()}wh(e,n,r){return n?r?this.jt.Dt().Mh()?e.Sh:e.xh:e.Kt:""}}function PE(t,e,n,r){const s=Number.isFinite(e),i=Number.isFinite(n);return s&&i?t(e,n):s||i?s?e:n:r}class Bn{constructor(e,n){this.kh=e,this.yh=n}Ch(e){return e!==null&&this.kh===e.kh&&this.yh===e.yh}Th(){return new Bn(this.kh,this.yh)}Ph(){return this.kh}Rh(){return this.yh}Dh(){return this.yh-this.kh}Ni(){return this.yh===this.kh||Number.isNaN(this.yh)||Number.isNaN(this.kh)}ts(e){return e===null?this:new Bn(PE(Math.min,this.Ph(),e.Ph(),-1/0),PE(Math.max,this.Rh(),e.Rh(),1/0))}Vh(e){if(!gs(e)||this.yh-this.kh===0)return;const n=.5*(this.yh+this.kh);let r=this.yh-n,s=this.kh-n;r*=e,s*=e,this.yh=n+r,this.kh=n+s}Oh(e){gs(e)&&(this.yh+=e,this.kh+=e)}Bh(){return{minValue:this.kh,maxValue:this.yh}}static Ah(e){return e===null?null:new Bn(e.minValue,e.maxValue)}}class Df{constructor(e,n){this.Ih=e,this.zh=n||null}Lh(){return this.Ih}Eh(){return this.zh}Bh(){return this.Ih===null?null:{priceRange:this.Ih.Bh(),margins:this.zh||void 0}}static Ah(e){return e===null?null:new Df(Bn.Ah(e.priceRange),e.margins)}}class lW extends Bw{constructor(e,n){super(e),this.Nh=n}yr(){const e=this.Sr;e.yt=!1;const n=this.Nh.W();if(!this.Es.yt()||!n.lineVisible)return;const r=this.Nh.Fh();r!==null&&(e.yt=!0,e.st=r,e.V=n.color,e.et=n.lineWidth,e.Nt=n.lineStyle,e.gr=this.Nh.W().id)}}class cW extends Fm{constructor(e,n){super(),this.jr=e,this.Nh=n}zi(e,n,r){e.yt=!1,n.yt=!1;const s=this.Nh.W(),i=s.axisLabelVisible,a=s.title!=="",l=this.jr;if(!i||!l.yt())return;const c=this.Nh.Fh();if(c===null)return;a&&(n.Kt=s.title,n.yt=!0),n.Ot=l.$t().Bt(c/l.Dt().At()),e.Kt=this.Wh(s.price),e.yt=!0;const u=Dm(s.axisLabelColor||s.color);r.t=u.t;const d=s.axisLabelTextColor||u.i;e.V=d,n.V=d,r.ki=c}Wh(e){const n=this.jr.Ct();return n===null?"":this.jr.Dt().Fi(e,n.Vt)}}class uW{constructor(e,n){this.jr=e,this.cn=n,this.jh=new lW(e,this),this.ur=new cW(e,this),this.Hh=new Nj(this.ur,e,e.$t())}$h(e){qr(this.cn,e),this.bt(),this.jr.$t().Uh()}W(){return this.cn}qh(){return this.jh}Yh(){return this.Hh}Zh(){return this.ur}bt(){this.jh.bt(),this.ur.bt()}Fh(){const e=this.jr,n=e.Dt();if(e.$t().St().Ni()||n.Ni())return null;const r=e.Ct();return r===null?null:n.Rt(this.cn.price,r.Vt)}}class dW extends Lw{constructor(e){super(),this.$i=e}$t(){return this.$i}}const hW={Bar:(t,e,n,r)=>{var s;const i=e.upColor,a=e.downColor,l=Se(t(n,r)),c=vl(l.Vt[0])<=vl(l.Vt[3]);return{ce:(s=l.V)!==null&&s!==void 0?s:c?i:a}},Candlestick:(t,e,n,r)=>{var s,i,a;const l=e.upColor,c=e.downColor,u=e.borderUpColor,d=e.borderDownColor,h=e.wickUpColor,f=e.wickDownColor,m=Se(t(n,r)),_=vl(m.Vt[0])<=vl(m.Vt[3]);return{ce:(s=m.V)!==null&&s!==void 0?s:_?l:c,Ne:(i=m.Ot)!==null&&i!==void 0?i:_?u:d,Ee:(a=m.Xh)!==null&&a!==void 0?a:_?h:f}},Custom:(t,e,n,r)=>{var s;return{ce:(s=Se(t(n,r)).V)!==null&&s!==void 0?s:e.color}},Area:(t,e,n,r)=>{var s,i,a,l;const c=Se(t(n,r));return{ce:(s=c.lt)!==null&&s!==void 0?s:e.lineColor,lt:(i=c.lt)!==null&&i!==void 0?i:e.lineColor,Ps:(a=c.Ps)!==null&&a!==void 0?a:e.topColor,Rs:(l=c.Rs)!==null&&l!==void 0?l:e.bottomColor}},Baseline:(t,e,n,r)=>{var s,i,a,l,c,u;const d=Se(t(n,r));return{ce:d.Vt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,Re:(s=d.Re)!==null&&s!==void 0?s:e.topLineColor,De:(i=d.De)!==null&&i!==void 0?i:e.bottomLineColor,ke:(a=d.ke)!==null&&a!==void 0?a:e.topFillColor1,ye:(l=d.ye)!==null&&l!==void 0?l:e.topFillColor2,Ce:(c=d.Ce)!==null&&c!==void 0?c:e.bottomFillColor1,Te:(u=d.Te)!==null&&u!==void 0?u:e.bottomFillColor2}},Line:(t,e,n,r)=>{var s,i;const a=Se(t(n,r));return{ce:(s=a.V)!==null&&s!==void 0?s:e.color,lt:(i=a.V)!==null&&i!==void 0?i:e.color}},Histogram:(t,e,n,r)=>{var s;return{ce:(s=Se(t(n,r)).V)!==null&&s!==void 0?s:e.color}}};class fW{constructor(e){this.Kh=(n,r)=>r!==void 0?r.Vt:this.jr.In().Gh(n),this.jr=e,this.Jh=hW[e.Qh()]}$s(e,n){return this.Jh(this.Kh,this.jr.W(),e,n)}}var RE;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})(RE||(RE={}));const vi=30;class pW{constructor(){this.tl=[],this.il=new Map,this.nl=new Map}sl(){return this.Ks()>0?this.tl[this.tl.length-1]:null}el(){return this.Ks()>0?this.rl(0):null}An(){return this.Ks()>0?this.rl(this.tl.length-1):null}Ks(){return this.tl.length}Ni(){return this.Ks()===0}Kr(e){return this.hl(e,0)!==null}Gh(e){return this.ll(e)}ll(e,n=0){const r=this.hl(e,n);return r===null?null:Object.assign(Object.assign({},this.al(r)),{ee:this.rl(r)})}ne(){return this.tl}ol(e,n,r){if(this.Ni())return null;let s=null;for(const i of r)s=ph(s,this._l(e,n,i));return s}J(e){this.nl.clear(),this.il.clear(),this.tl=e}rl(e){return this.tl[e].ee}al(e){return this.tl[e]}hl(e,n){const r=this.ul(e);if(r===null&&n!==0)switch(n){case-1:return this.cl(e);case 1:return this.dl(e);default:throw new TypeError("Unknown search mode")}return r}cl(e){let n=this.fl(e);return n>0&&(n-=1),n!==this.tl.length&&this.rl(n)<e?n:null}dl(e){const n=this.vl(e);return n!==this.tl.length&&e<this.rl(n)?n:null}ul(e){const n=this.fl(e);return n===this.tl.length||e<this.tl[n].ee?null:n}fl(e){return vd(this.tl,e,(n,r)=>n.ee<r)}vl(e){return _j(this.tl,e,(n,r)=>n.ee>r)}pl(e,n,r){let s=null;for(let i=e;i<n;i++){const a=this.tl[i].Vt[r];Number.isNaN(a)||(s===null?s={ml:a,bl:a}:(a<s.ml&&(s.ml=a),a>s.bl&&(s.bl=a)))}return s}_l(e,n,r){if(this.Ni())return null;let s=null;const i=Se(this.el()),a=Se(this.An()),l=Math.max(e,i),c=Math.min(n,a),u=Math.ceil(l/vi)*vi,d=Math.max(u,Math.floor(c/vi)*vi);{const f=this.fl(l),m=this.vl(Math.min(c,u,n));s=ph(s,this.pl(f,m,r))}let h=this.il.get(r);h===void 0&&(h=new Map,this.il.set(r,h));for(let f=Math.max(u+1,l);f<d;f+=vi){const m=Math.floor(f/vi);let _=h.get(m);if(_===void 0){const S=this.fl(m*vi),j=this.vl((m+1)*vi-1);_=this.pl(S,j,r),h.set(m,_)}s=ph(s,_)}{const f=this.fl(d),m=this.vl(c);s=ph(s,this.pl(f,m,r))}return s}}function ph(t,e){return t===null?e:e===null?t:{ml:Math.min(t.ml,e.ml),bl:Math.max(t.bl,e.bl)}}class mW{constructor(e){this.wl=e}X(e,n,r){this.wl.draw(e)}gl(e,n,r){var s,i;(i=(s=this.wl).drawBackground)===null||i===void 0||i.call(s,e)}}class Eg{constructor(e){this.tr=null,this.wn=e}gt(){var e;const n=this.wn.renderer();if(n===null)return null;if(((e=this.tr)===null||e===void 0?void 0:e.Ml)===n)return this.tr.xl;const r=new mW(n);return this.tr={Ml:n,xl:r},r}Sl(){var e,n,r;return(r=(n=(e=this.wn).zOrder)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:"normal"}}function Cj(t){var e,n,r,s,i;return{Kt:t.text(),ki:t.coordinate(),Si:(e=t.fixedCoordinate)===null||e===void 0?void 0:e.call(t),V:t.textColor(),t:t.backColor(),yt:(r=(n=t.visible)===null||n===void 0?void 0:n.call(t))===null||r===void 0||r,hi:(i=(s=t.tickVisible)===null||s===void 0?void 0:s.call(t))===null||i===void 0||i}}class gW{constructor(e,n){this.Wt=new pj,this.kl=e,this.yl=n}gt(){return this.Wt.J(Object.assign({Hi:this.yl.Hi()},Cj(this.kl))),this.Wt}}class yW extends Fm{constructor(e,n){super(),this.kl=e,this.Li=n}zi(e,n,r){const s=Cj(this.kl);r.t=s.t,e.V=s.V;const i=2/12*this.Li.P();r.wi=i,r.gi=i,r.ki=s.ki,r.Si=s.Si,e.Kt=s.Kt,e.yt=s.yt,e.hi=s.hi}}class vW{constructor(e,n){this.Cl=null,this.Tl=null,this.Pl=null,this.Rl=null,this.Dl=null,this.Vl=e,this.jr=n}Ol(){return this.Vl}Vn(){var e,n;(n=(e=this.Vl).updateAllViews)===null||n===void 0||n.call(e)}Pn(){var e,n,r,s;const i=(r=(n=(e=this.Vl).paneViews)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[];if(((s=this.Cl)===null||s===void 0?void 0:s.Ml)===i)return this.Cl.xl;const a=i.map(l=>new Eg(l));return this.Cl={Ml:i,xl:a},a}Qi(){var e,n,r,s;const i=(r=(n=(e=this.Vl).timeAxisViews)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[];if(((s=this.Tl)===null||s===void 0?void 0:s.Ml)===i)return this.Tl.xl;const a=this.jr.$t().St(),l=i.map(c=>new gW(c,a));return this.Tl={Ml:i,xl:l},l}Rn(){var e,n,r,s;const i=(r=(n=(e=this.Vl).priceAxisViews)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[];if(((s=this.Pl)===null||s===void 0?void 0:s.Ml)===i)return this.Pl.xl;const a=this.jr.Dt(),l=i.map(c=>new yW(c,a));return this.Pl={Ml:i,xl:l},l}Bl(){var e,n,r,s;const i=(r=(n=(e=this.Vl).priceAxisPaneViews)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[];if(((s=this.Rl)===null||s===void 0?void 0:s.Ml)===i)return this.Rl.xl;const a=i.map(l=>new Eg(l));return this.Rl={Ml:i,xl:a},a}Al(){var e,n,r,s;const i=(r=(n=(e=this.Vl).timeAxisPaneViews)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[];if(((s=this.Dl)===null||s===void 0?void 0:s.Ml)===i)return this.Dl.xl;const a=i.map(l=>new Eg(l));return this.Dl={Ml:i,xl:a},a}Il(e,n){var r,s,i;return(i=(s=(r=this.Vl).autoscaleInfo)===null||s===void 0?void 0:s.call(r,e,n))!==null&&i!==void 0?i:null}wr(e,n){var r,s,i;return(i=(s=(r=this.Vl).hitTest)===null||s===void 0?void 0:s.call(r,e,n))!==null&&i!==void 0?i:null}}function Sg(t,e,n,r){t.forEach(s=>{e(s).forEach(i=>{i.Sl()===n&&r.push(i)})})}function Ng(t){return t.Pn()}function xW(t){return t.Bl()}function wW(t){return t.Al()}class Fw extends dW{constructor(e,n,r,s,i){super(e),this.zt=new pW,this.jh=new oW(this),this.zl=[],this.Ll=new YH(this),this.El=null,this.Nl=null,this.Fl=[],this.Wl=[],this.jl=null,this.Hl=[],this.cn=n,this.$l=r;const a=new aW(this);this.rn=[a],this.Hh=new Nj(a,this,e),r!=="Area"&&r!=="Line"&&r!=="Baseline"||(this.El=new ZH(this)),this.Ul(),this.ql(i)}S(){this.jl!==null&&clearTimeout(this.jl)}mh(e){return this.cn.priceLineColor||e}Zr(e){const n={Xr:!0},r=this.Dt();if(this.$t().St().Ni()||r.Ni()||this.zt.Ni())return n;const s=this.$t().St().Xs(),i=this.Ct();if(s===null||i===null)return n;let a,l;if(e){const h=this.zt.sl();if(h===null)return n;a=h,l=h.ee}else{const h=this.zt.ll(s.ui(),-1);if(h===null||(a=this.zt.Gh(h.ee),a===null))return n;l=h.ee}const c=a.Vt[3],u=this.Us().$s(l,{Vt:a}),d=r.Rt(c,i.Vt);return{Xr:!1,_t:c,Kt:r.Fi(c,i.Vt),xh:r.Yl(c),Sh:r.Zl(c,i.Vt),V:u.ce,ki:d,ee:l}}Us(){return this.Nl!==null||(this.Nl=new fW(this)),this.Nl}W(){return this.cn}$h(e){const n=e.priceScaleId;n!==void 0&&n!==this.cn.priceScaleId&&this.$t().Xl(this,n),qr(this.cn,e),e.priceFormat!==void 0&&(this.Ul(),this.$t().Kl()),this.$t().Gl(this),this.$t().Jl(),this.wn.bt("options")}J(e,n){this.zt.J(e),this.Ql(),this.wn.bt("data"),this.dn.bt("data"),this.El!==null&&(n&&n.ta?this.El.$r():e.length===0&&this.El.Hr());const r=this.$t().dr(this);this.$t().ia(r),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}na(e){this.Fl=e,this.Ql();const n=this.$t().dr(this);this.dn.bt("data"),this.$t().ia(n),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}sa(){return this.Fl}dh(){return this.Wl}ea(e){const n=new uW(this,e);return this.zl.push(n),this.$t().Gl(this),n}ra(e){const n=this.zl.indexOf(e);n!==-1&&this.zl.splice(n,1),this.$t().Gl(this)}Qh(){return this.$l}Ct(){const e=this.ha();return e===null?null:{Vt:e.Vt[3],la:e.ot}}ha(){const e=this.$t().St().Xs();if(e===null)return null;const n=e.Os();return this.zt.ll(n,1)}In(){return this.zt}ph(e){const n=this.zt.Gh(e);return n===null?null:this.$l==="Bar"||this.$l==="Candlestick"||this.$l==="Custom"?{ge:n.Vt[0],Me:n.Vt[1],xe:n.Vt[2],Se:n.Vt[3]}:n.Vt[3]}aa(e){const n=[];Sg(this.Hl,Ng,"top",n);const r=this.El;return r!==null&&r.yt()&&(this.jl===null&&r.qr()&&(this.jl=setTimeout(()=>{this.jl=null,this.$t().oa()},0)),r.Ur(),n.unshift(r)),n}Pn(){const e=[];this._a()||e.push(this.Ll),e.push(this.wn,this.jh,this.dn);const n=this.zl.map(r=>r.qh());return e.push(...n),Sg(this.Hl,Ng,"normal",e),e}ua(){return this.ca(Ng,"bottom")}da(e){return this.ca(xW,e)}fa(e){return this.ca(wW,e)}va(e,n){return this.Hl.map(r=>r.wr(e,n)).filter(r=>r!==null)}Ji(e){return[this.Hh,...this.zl.map(n=>n.Yh())]}Rn(e,n){if(n!==this.Yi&&!this._a())return[];const r=[...this.rn];for(const s of this.zl)r.push(s.Zh());return this.Hl.forEach(s=>{r.push(...s.Rn())}),r}Qi(){const e=[];return this.Hl.forEach(n=>{e.push(...n.Qi())}),e}Il(e,n){if(this.cn.autoscaleInfoProvider!==void 0){const r=this.cn.autoscaleInfoProvider(()=>{const s=this.pa(e,n);return s===null?null:s.Bh()});return Df.Ah(r)}return this.pa(e,n)}ma(){return this.cn.priceFormat.minMove}ba(){return this.wa}Vn(){var e;this.wn.bt(),this.dn.bt();for(const n of this.rn)n.bt();for(const n of this.zl)n.bt();this.jh.bt(),this.Ll.bt(),(e=this.El)===null||e===void 0||e.bt(),this.Hl.forEach(n=>n.Vn())}Dt(){return Se(super.Dt())}kt(e){if(!((this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline")&&this.cn.crosshairMarkerVisible))return null;const n=this.zt.Gh(e);return n===null?null:{_t:n.Vt[3],ht:this.ga(),Ot:this.Ma(),Pt:this.xa(),Tt:this.Sa(e)}}bh(){return this.cn.title}yt(){return this.cn.visible}ka(e){this.Hl.push(new vW(e,this))}ya(e){this.Hl=this.Hl.filter(n=>n.Ol()!==e)}Ca(){if(this.wn instanceof _g)return e=>this.wn.We(e)}Ta(){if(this.wn instanceof _g)return e=>this.wn.je(e)}_a(){return!Um(this.Dt().Pa())}pa(e,n){if(!Fu(e)||!Fu(n)||this.zt.Ni())return null;const r=this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline"||this.$l==="Histogram"?[3]:[2,1],s=this.zt.ol(e,n,r);let i=s!==null?new Bn(s.ml,s.bl):null;if(this.Qh()==="Histogram"){const l=this.cn.base,c=new Bn(l,l);i=i!==null?i.ts(c):c}let a=this.dn.uh();return this.Hl.forEach(l=>{const c=l.Il(e,n);if(c!=null&&c.priceRange){const m=new Bn(c.priceRange.minValue,c.priceRange.maxValue);i=i!==null?i.ts(m):m}var u,d,h,f;c!=null&&c.margins&&(u=a,d=c.margins,a={above:Math.max((h=u==null?void 0:u.above)!==null&&h!==void 0?h:0,d.above),below:Math.max((f=u==null?void 0:u.below)!==null&&f!==void 0?f:0,d.below)})}),new Df(i,a)}ga(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerRadius}return 0}Ma(){switch(this.$l){case"Line":case"Area":case"Baseline":{const e=this.cn.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}xa(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerBorderWidth}return 0}Sa(e){switch(this.$l){case"Line":case"Area":case"Baseline":{const n=this.cn.crosshairMarkerBackgroundColor;if(n.length!==0)return n}}return this.Us().$s(e).ce}Ul(){switch(this.cn.priceFormat.type){case"custom":this.wa={format:this.cn.priceFormat.formatter};break;case"volume":this.wa=new AH(this.cn.priceFormat.precision);break;case"percent":this.wa=new mj(this.cn.priceFormat.precision);break;default:{const e=Math.pow(10,this.cn.priceFormat.precision);this.wa=new $m(e,this.cn.priceFormat.minMove*e)}}this.Yi!==null&&this.Yi.Ra()}Ql(){const e=this.$t().St();if(!e.Da()||this.zt.Ni())return void(this.Wl=[]);const n=Se(this.zt.el());this.Wl=this.Fl.map((r,s)=>{const i=Se(e.Va(r.time,!0)),a=i<n?1:-1;return{time:Se(this.zt.ll(i,a)).ee,position:r.position,shape:r.shape,color:r.color,id:r.id,th:s,text:r.text,size:r.size,originalTime:r.originalTime}})}ql(e){switch(this.dn=new iW(this,this.$t()),this.$l){case"Bar":this.wn=new MH(this,this.$t());break;case"Candlestick":this.wn=new $H(this,this.$t());break;case"Line":this.wn=new XH(this,this.$t());break;case"Custom":this.wn=new _g(this,this.$t(),vn(e));break;case"Area":this.wn=new RH(this,this.$t());break;case"Baseline":this.wn=new FH(this,this.$t());break;case"Histogram":this.wn=new WH(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.$l)}}ca(e,n){const r=[];return Sg(this.Hl,e,n,r),r}}class bW{constructor(e){this.cn=e}Oa(e,n,r){let s=e;if(this.cn.mode===0)return s;const i=r.vn(),a=i.Ct();if(a===null)return s;const l=i.Rt(e,a),c=r.Ba().filter(d=>d instanceof Fw).reduce((d,h)=>{if(r.vr(h)||!h.yt())return d;const f=h.Dt(),m=h.In();if(f.Ni()||!m.Kr(n))return d;const _=m.Gh(n);if(_===null)return d;const S=vl(h.Ct());return d.concat([f.Rt(_.Vt[3],S.Vt)])},[]);if(c.length===0)return s;c.sort((d,h)=>Math.abs(d-l)-Math.abs(h-l));const u=c[0];return s=i.pn(u,a),s}}class _W extends Jr{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}K({context:e,bitmapSize:n,horizontalPixelRatio:r,verticalPixelRatio:s}){if(this.zt===null)return;const i=Math.max(1,Math.floor(r));e.lineWidth=i,function(a,l){a.save(),a.lineWidth%2&&a.translate(.5,.5),l(),a.restore()}(e,()=>{const a=Se(this.zt);if(a.Aa){e.strokeStyle=a.Ia,ba(e,a.za),e.beginPath();for(const l of a.La){const c=Math.round(l.Ea*r);e.moveTo(c,-i),e.lineTo(c,n.height+i)}e.stroke()}if(a.Na){e.strokeStyle=a.Fa,ba(e,a.Wa),e.beginPath();for(const l of a.ja){const c=Math.round(l.Ea*s);e.moveTo(-i,c),e.lineTo(n.width+i,c)}e.stroke()}})}}class EW{constructor(e){this.Wt=new _W,this.ft=!0,this.tn=e}bt(){this.ft=!0}gt(){if(this.ft){const e=this.tn.$t().W().grid,n={Na:e.horzLines.visible,Aa:e.vertLines.visible,Fa:e.horzLines.color,Ia:e.vertLines.color,Wa:e.horzLines.style,za:e.vertLines.style,ja:this.tn.vn().Ha(),La:(this.tn.$t().St().Ha()||[]).map(r=>({Ea:r.coord}))};this.Wt.J(n),this.ft=!1}return this.Wt}}class SW{constructor(e){this.wn=new EW(e)}qh(){return this.wn}}const Tg={$a:4,Ua:1e-4};function xl(t,e){const n=100*(t-e)/e;return e<0?-n:n}function NW(t,e){const n=xl(t.Ph(),e),r=xl(t.Rh(),e);return new Bn(n,r)}function cu(t,e){const n=100*(t-e)/e+100;return e<0?-n:n}function TW(t,e){const n=cu(t.Ph(),e),r=cu(t.Rh(),e);return new Bn(n,r)}function Bf(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const r=Math.log10(n+e.Ua)+e.$a;return t<0?-r:r}function uu(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const r=Math.pow(10,n-e.$a)-e.Ua;return t<0?-r:r}function Ic(t,e){if(t===null)return null;const n=Bf(t.Ph(),e),r=Bf(t.Rh(),e);return new Bn(n,r)}function mh(t,e){if(t===null)return null;const n=uu(t.Ph(),e),r=uu(t.Rh(),e);return new Bn(n,r)}function Ag(t){if(t===null)return Tg;const e=Math.abs(t.Rh()-t.Ph());if(e>=1||e<1e-15)return Tg;const n=Math.ceil(Math.abs(Math.log10(e))),r=Tg.$a+n;return{$a:r,Ua:1/Math.pow(10,r)}}class Cg{constructor(e,n){if(this.qa=e,this.Ya=n,function(r){if(r<0)return!1;for(let s=r;s>1;s/=10)if(s%10!=0)return!1;return!0}(this.qa))this.Za=[2,2.5,2];else{this.Za=[];for(let r=this.qa;r!==1;){if(r%2==0)this.Za.push(2),r/=2;else{if(r%5!=0)throw new Error("unexpected base");this.Za.push(2,2.5),r/=5}if(this.Za.length>100)throw new Error("something wrong with base")}}}Xa(e,n,r){const s=this.qa===0?0:1/this.qa;let i=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-n)))),a=0,l=this.Ya[0];for(;;){const h=fh(i,s,1e-14)&&i>s+1e-14,f=fh(i,r*l,1e-14),m=fh(i,1,1e-14);if(!(h&&f&&m))break;i/=l,l=this.Ya[++a%this.Ya.length]}if(i<=s+1e-14&&(i=s),i=Math.max(1,i),this.Za.length>0&&(c=i,u=1,d=1e-14,Math.abs(c-u)<d))for(a=0,l=this.Za[0];fh(i,r*l,1e-14)&&i>s+1e-14;)i/=l,l=this.Za[++a%this.Za.length];var c,u,d;return i}}class LE{constructor(e,n,r,s){this.Ka=[],this.Li=e,this.qa=n,this.Ga=r,this.Ja=s}Xa(e,n){if(e<n)throw new Error("high < low");const r=this.Li.At(),s=(e-n)*this.Qa()/r,i=new Cg(this.qa,[2,2.5,2]),a=new Cg(this.qa,[2,2,2.5]),l=new Cg(this.qa,[2.5,2,2]),c=[];return c.push(i.Xa(e,n,s),a.Xa(e,n,s),l.Xa(e,n,s)),function(u){if(u.length<1)throw Error("array is empty");let d=u[0];for(let h=1;h<u.length;++h)u[h]<d&&(d=u[h]);return d}(c)}io(){const e=this.Li,n=e.Ct();if(n===null)return void(this.Ka=[]);const r=e.At(),s=this.Ga(r-1,n),i=this.Ga(0,n),a=this.Li.W().entireTextOnly?this.no()/2:0,l=a,c=r-1-a,u=Math.max(s,i),d=Math.min(s,i);if(u===d)return void(this.Ka=[]);let h=this.Xa(u,d),f=u%h;f+=f<0?h:0;const m=u>=d?1:-1;let _=null,S=0;for(let j=u-f;j>d;j-=h){const y=this.Ja(j,n,!0);_!==null&&Math.abs(y-_)<this.Qa()||y<l||y>c||(S<this.Ka.length?(this.Ka[S].Ea=y,this.Ka[S].so=e.eo(j)):this.Ka.push({Ea:y,so:e.eo(j)}),S++,_=y,e.ro()&&(h=this.Xa(j*m,d)))}this.Ka.length=S}Ha(){return this.Ka}no(){return this.Li.P()}Qa(){return Math.ceil(2.5*this.no())}}function jj(t){return t.slice().sort((e,n)=>Se(e.Xi())-Se(n.Xi()))}var ME;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(ME||(ME={}));const DE=new mj,BE=new $m(100,1);class AW{constructor(e,n,r,s){this.ho=0,this.lo=null,this.Ih=null,this.ao=null,this.oo={_o:!1,uo:null},this.co=0,this.do=0,this.fo=new Pt,this.vo=new Pt,this.po=[],this.mo=null,this.bo=null,this.wo=null,this.Mo=null,this.wa=BE,this.xo=Ag(null),this.So=e,this.cn=n,this.ko=r,this.yo=s,this.Co=new LE(this,100,this.To.bind(this),this.Po.bind(this))}Pa(){return this.So}W(){return this.cn}$h(e){if(qr(this.cn,e),this.Ra(),e.mode!==void 0&&this.Ro({Cr:e.mode}),e.scaleMargins!==void 0){const n=vn(e.scaleMargins.top),r=vn(e.scaleMargins.bottom);if(n<0||n>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${n}`);if(r<0||r>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${r}`);if(n+r>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${n+r}`);this.Do(),this.bo=null}}Vo(){return this.cn.autoScale}ro(){return this.cn.mode===1}Mh(){return this.cn.mode===2}Oo(){return this.cn.mode===3}Cr(){return{Wn:this.cn.autoScale,Bo:this.cn.invertScale,Cr:this.cn.mode}}Ro(e){const n=this.Cr();let r=null;e.Wn!==void 0&&(this.cn.autoScale=e.Wn),e.Cr!==void 0&&(this.cn.mode=e.Cr,e.Cr!==2&&e.Cr!==3||(this.cn.autoScale=!0),this.oo._o=!1),n.Cr===1&&e.Cr!==n.Cr&&(function(i,a){if(i===null)return!1;const l=uu(i.Ph(),a),c=uu(i.Rh(),a);return isFinite(l)&&isFinite(c)}(this.Ih,this.xo)?(r=mh(this.Ih,this.xo),r!==null&&this.Ao(r)):this.cn.autoScale=!0),e.Cr===1&&e.Cr!==n.Cr&&(r=Ic(this.Ih,this.xo),r!==null&&this.Ao(r));const s=n.Cr!==this.cn.mode;s&&(n.Cr===2||this.Mh())&&this.Ra(),s&&(n.Cr===3||this.Oo())&&this.Ra(),e.Bo!==void 0&&n.Bo!==e.Bo&&(this.cn.invertScale=e.Bo,this.Io()),this.vo.m(n,this.Cr())}zo(){return this.vo}P(){return this.ko.fontSize}At(){return this.ho}Lo(e){this.ho!==e&&(this.ho=e,this.Do(),this.bo=null)}Eo(){if(this.lo)return this.lo;const e=this.At()-this.No()-this.Fo();return this.lo=e,e}Lh(){return this.Wo(),this.Ih}Ao(e,n){const r=this.Ih;(n||r===null&&e!==null||r!==null&&!r.Ch(e))&&(this.bo=null,this.Ih=e)}Ni(){return this.Wo(),this.ho===0||!this.Ih||this.Ih.Ni()}jo(e){return this.Bo()?e:this.At()-1-e}Rt(e,n){return this.Mh()?e=xl(e,n):this.Oo()&&(e=cu(e,n)),this.Po(e,n)}te(e,n,r){this.Wo();const s=this.Fo(),i=Se(this.Lh()),a=i.Ph(),l=i.Rh(),c=this.Eo()-1,u=this.Bo(),d=c/(l-a),h=r===void 0?0:r.from,f=r===void 0?e.length:r.to,m=this.Ho();for(let _=h;_<f;_++){const S=e[_],j=S._t;if(isNaN(j))continue;let y=j;m!==null&&(y=m(S._t,n));const x=s+d*(y-a),b=u?x:this.ho-1-x;S.st=b}}be(e,n,r){this.Wo();const s=this.Fo(),i=Se(this.Lh()),a=i.Ph(),l=i.Rh(),c=this.Eo()-1,u=this.Bo(),d=c/(l-a),h=r===void 0?0:r.from,f=r===void 0?e.length:r.to,m=this.Ho();for(let _=h;_<f;_++){const S=e[_];let j=S.ge,y=S.Me,x=S.xe,b=S.Se;m!==null&&(j=m(S.ge,n),y=m(S.Me,n),x=m(S.xe,n),b=m(S.Se,n));let v=s+d*(j-a),A=u?v:this.ho-1-v;S.pe=A,v=s+d*(y-a),A=u?v:this.ho-1-v,S.de=A,v=s+d*(x-a),A=u?v:this.ho-1-v,S.fe=A,v=s+d*(b-a),A=u?v:this.ho-1-v,S.me=A}}pn(e,n){const r=this.To(e,n);return this.$o(r,n)}$o(e,n){let r=e;return this.Mh()?r=function(s,i){return i<0&&(s=-s),s/100*i+i}(r,n):this.Oo()&&(r=function(s,i){return s-=100,i<0&&(s=-s),s/100*i+i}(r,n)),r}Ba(){return this.po}Uo(){if(this.mo)return this.mo;let e=[];for(let n=0;n<this.po.length;n++){const r=this.po[n];r.Xi()===null&&r.Ki(n+1),e.push(r)}return e=jj(e),this.mo=e,this.mo}qo(e){this.po.indexOf(e)===-1&&(this.po.push(e),this.Ra(),this.Yo())}Zo(e){const n=this.po.indexOf(e);if(n===-1)throw new Error("source is not attached to scale");this.po.splice(n,1),this.po.length===0&&(this.Ro({Wn:!0}),this.Ao(null)),this.Ra(),this.Yo()}Ct(){let e=null;for(const n of this.po){const r=n.Ct();r!==null&&(e===null||r.la<e.la)&&(e=r)}return e===null?null:e.Vt}Bo(){return this.cn.invertScale}Ha(){const e=this.Ct()===null;if(this.bo!==null&&(e||this.bo.Xo===e))return this.bo.Ha;this.Co.io();const n=this.Co.Ha();return this.bo={Ha:n,Xo:e},this.fo.m(),n}Ko(){return this.fo}Go(e){this.Mh()||this.Oo()||this.wo===null&&this.ao===null&&(this.Ni()||(this.wo=this.ho-e,this.ao=Se(this.Lh()).Th()))}Jo(e){if(this.Mh()||this.Oo()||this.wo===null)return;this.Ro({Wn:!1}),(e=this.ho-e)<0&&(e=0);let n=(this.wo+.2*(this.ho-1))/(e+.2*(this.ho-1));const r=Se(this.ao).Th();n=Math.max(n,.1),r.Vh(n),this.Ao(r)}Qo(){this.Mh()||this.Oo()||(this.wo=null,this.ao=null)}t_(e){this.Vo()||this.Mo===null&&this.ao===null&&(this.Ni()||(this.Mo=e,this.ao=Se(this.Lh()).Th()))}i_(e){if(this.Vo()||this.Mo===null)return;const n=Se(this.Lh()).Dh()/(this.Eo()-1);let r=e-this.Mo;this.Bo()&&(r*=-1);const s=r*n,i=Se(this.ao).Th();i.Oh(s),this.Ao(i,!0),this.bo=null}n_(){this.Vo()||this.Mo!==null&&(this.Mo=null,this.ao=null)}ba(){return this.wa||this.Ra(),this.wa}Fi(e,n){switch(this.cn.mode){case 2:return this.s_(xl(e,n));case 3:return this.ba().format(cu(e,n));default:return this.Wh(e)}}eo(e){switch(this.cn.mode){case 2:return this.s_(e);case 3:return this.ba().format(e);default:return this.Wh(e)}}Yl(e){return this.Wh(e,Se(this.e_()).ba())}Zl(e,n){return e=xl(e,n),this.s_(e,DE)}r_(){return this.po}h_(e){this.oo={uo:e,_o:!1}}Vn(){this.po.forEach(e=>e.Vn())}Ra(){this.bo=null;const e=this.e_();let n=100;e!==null&&(n=Math.round(1/e.ma())),this.wa=BE,this.Mh()?(this.wa=DE,n=100):this.Oo()?(this.wa=new $m(100,1),n=100):e!==null&&(this.wa=e.ba()),this.Co=new LE(this,n,this.To.bind(this),this.Po.bind(this)),this.Co.io()}Yo(){this.mo=null}e_(){return this.po[0]||null}No(){return this.Bo()?this.cn.scaleMargins.bottom*this.At()+this.do:this.cn.scaleMargins.top*this.At()+this.co}Fo(){return this.Bo()?this.cn.scaleMargins.top*this.At()+this.co:this.cn.scaleMargins.bottom*this.At()+this.do}Wo(){this.oo._o||(this.oo._o=!0,this.l_())}Do(){this.lo=null}Po(e,n){if(this.Wo(),this.Ni())return 0;e=this.ro()&&e?Bf(e,this.xo):e;const r=Se(this.Lh()),s=this.Fo()+(this.Eo()-1)*(e-r.Ph())/r.Dh();return this.jo(s)}To(e,n){if(this.Wo(),this.Ni())return 0;const r=this.jo(e),s=Se(this.Lh()),i=s.Ph()+s.Dh()*((r-this.Fo())/(this.Eo()-1));return this.ro()?uu(i,this.xo):i}Io(){this.bo=null,this.Co.io()}l_(){const e=this.oo.uo;if(e===null)return;let n=null;const r=this.r_();let s=0,i=0;for(const c of r){if(!c.yt())continue;const u=c.Ct();if(u===null)continue;const d=c.Il(e.Os(),e.ui());let h=d&&d.Lh();if(h!==null){switch(this.cn.mode){case 1:h=Ic(h,this.xo);break;case 2:h=NW(h,u.Vt);break;case 3:h=TW(h,u.Vt)}if(n=n===null?h:n.ts(Se(h)),d!==null){const f=d.Eh();f!==null&&(s=Math.max(s,f.above),i=Math.max(i,f.below))}}}if(s===this.co&&i===this.do||(this.co=s,this.do=i,this.bo=null,this.Do()),n!==null){if(n.Ph()===n.Rh()){const c=this.e_(),u=5*(c===null||this.Mh()||this.Oo()?1:c.ma());this.ro()&&(n=mh(n,this.xo)),n=new Bn(n.Ph()-u,n.Rh()+u),this.ro()&&(n=Ic(n,this.xo))}if(this.ro()){const c=mh(n,this.xo),u=Ag(c);if(a=u,l=this.xo,a.$a!==l.$a||a.Ua!==l.Ua){const d=this.ao!==null?mh(this.ao,this.xo):null;this.xo=u,n=Ic(c,u),d!==null&&(this.ao=Ic(d,u))}}this.Ao(n)}else this.Ih===null&&(this.Ao(new Bn(-.5,.5)),this.xo=Ag(null));var a,l;this.oo._o=!0}Ho(){return this.Mh()?xl:this.Oo()?cu:this.ro()?e=>Bf(e,this.xo):null}a_(e,n,r){return n===void 0?(r===void 0&&(r=this.ba()),r.format(e)):n(e)}Wh(e,n){return this.a_(e,this.yo.priceFormatter,n)}s_(e,n){return this.a_(e,this.yo.percentageFormatter,n)}}class CW{constructor(e,n){this.po=[],this.o_=new Map,this.ho=0,this.__=0,this.u_=1e3,this.mo=null,this.c_=new Pt,this.yl=e,this.$i=n,this.d_=new SW(this);const r=n.W();this.f_=this.v_("left",r.leftPriceScale),this.p_=this.v_("right",r.rightPriceScale),this.f_.zo().l(this.m_.bind(this,this.f_),this),this.p_.zo().l(this.m_.bind(this,this.p_),this),this.b_(r)}b_(e){if(e.leftPriceScale&&this.f_.$h(e.leftPriceScale),e.rightPriceScale&&this.p_.$h(e.rightPriceScale),e.localization&&(this.f_.Ra(),this.p_.Ra()),e.overlayPriceScales){const n=Array.from(this.o_.values());for(const r of n){const s=Se(r[0].Dt());s.$h(e.overlayPriceScales),e.localization&&s.Ra()}}}w_(e){switch(e){case"left":return this.f_;case"right":return this.p_}return this.o_.has(e)?vn(this.o_.get(e))[0].Dt():null}S(){this.$t().g_().p(this),this.f_.zo().p(this),this.p_.zo().p(this),this.po.forEach(e=>{e.S&&e.S()}),this.c_.m()}M_(){return this.u_}x_(e){this.u_=e}$t(){return this.$i}Hi(){return this.__}At(){return this.ho}S_(e){this.__=e,this.k_()}Lo(e){this.ho=e,this.f_.Lo(e),this.p_.Lo(e),this.po.forEach(n=>{if(this.vr(n)){const r=n.Dt();r!==null&&r.Lo(e)}}),this.k_()}Ba(){return this.po}vr(e){const n=e.Dt();return n===null||this.f_!==n&&this.p_!==n}qo(e,n,r){const s=r!==void 0?r:this.C_().y_+1;this.T_(e,n,s)}Zo(e){const n=this.po.indexOf(e);co(n!==-1,"removeDataSource: invalid data source"),this.po.splice(n,1);const r=Se(e.Dt()).Pa();if(this.o_.has(r)){const i=vn(this.o_.get(r)),a=i.indexOf(e);a!==-1&&(i.splice(a,1),i.length===0&&this.o_.delete(r))}const s=e.Dt();s&&s.Ba().indexOf(e)>=0&&s.Zo(e),s!==null&&(s.Yo(),this.P_(s)),this.mo=null}mr(e){return e===this.f_?"left":e===this.p_?"right":"overlay"}R_(){return this.f_}D_(){return this.p_}V_(e,n){e.Go(n)}O_(e,n){e.Jo(n),this.k_()}B_(e){e.Qo()}A_(e,n){e.t_(n)}I_(e,n){e.i_(n),this.k_()}z_(e){e.n_()}k_(){this.po.forEach(e=>{e.Vn()})}vn(){let e=null;return this.$i.W().rightPriceScale.visible&&this.p_.Ba().length!==0?e=this.p_:this.$i.W().leftPriceScale.visible&&this.f_.Ba().length!==0?e=this.f_:this.po.length!==0&&(e=this.po[0].Dt()),e===null&&(e=this.p_),e}pr(){let e=null;return this.$i.W().rightPriceScale.visible?e=this.p_:this.$i.W().leftPriceScale.visible&&(e=this.f_),e}P_(e){e!==null&&e.Vo()&&this.L_(e)}E_(e){const n=this.yl.Xs();e.Ro({Wn:!0}),n!==null&&e.h_(n),this.k_()}N_(){this.L_(this.f_),this.L_(this.p_)}F_(){this.P_(this.f_),this.P_(this.p_),this.po.forEach(e=>{this.vr(e)&&this.P_(e.Dt())}),this.k_(),this.$i.Uh()}Uo(){return this.mo===null&&(this.mo=jj(this.po)),this.mo}W_(){return this.c_}j_(){return this.d_}L_(e){const n=e.r_();if(n&&n.length>0&&!this.yl.Ni()){const r=this.yl.Xs();r!==null&&e.h_(r)}e.Vn()}C_(){const e=this.Uo();if(e.length===0)return{H_:0,y_:0};let n=0,r=0;for(let s=0;s<e.length;s++){const i=e[s].Xi();i!==null&&(i<n&&(n=i),i>r&&(r=i))}return{H_:n,y_:r}}T_(e,n,r){let s=this.w_(n);if(s===null&&(s=this.v_(n,this.$i.W().overlayPriceScales)),this.po.push(e),!Um(n)){const i=this.o_.get(n)||[];i.push(e),this.o_.set(n,i)}s.qo(e),e.Gi(s),e.Ki(r),this.P_(s),this.mo=null}m_(e,n,r){n.Cr!==r.Cr&&this.L_(e)}v_(e,n){const r=Object.assign({visible:!0,autoScale:!0},Us(n)),s=new AW(e,r,this.$i.W().layout,this.$i.W().localization);return s.Lo(this.At()),s}}class jW{constructor(e,n,r=50){this.Ke=0,this.Ge=1,this.Je=1,this.tr=new Map,this.Qe=new Map,this.U_=e,this.q_=n,this.ir=r}Y_(e){const n=e.time,r=this.q_.cacheKey(n),s=this.tr.get(r);if(s!==void 0)return s.Z_;if(this.Ke===this.ir){const a=this.Qe.get(this.Je);this.Qe.delete(this.Je),this.tr.delete(vn(a)),this.Je++,this.Ke--}const i=this.U_(e);return this.tr.set(r,{Z_:i,rr:this.Ge}),this.Qe.set(this.Ge,r),this.Ke++,this.Ge++,i}}class du{constructor(e,n){co(e<=n,"right should be >= left"),this.X_=e,this.K_=n}Os(){return this.X_}ui(){return this.K_}G_(){return this.K_-this.X_+1}Kr(e){return this.X_<=e&&e<=this.K_}Ch(e){return this.X_===e.Os()&&this.K_===e.ui()}}function FE(t,e){return t===null||e===null?t===e:t.Ch(e)}class kW{constructor(){this.J_=new Map,this.tr=null,this.Q_=!1}tu(e){this.Q_=e,this.tr=null}iu(e,n){this.nu(n),this.tr=null;for(let r=n;r<e.length;++r){const s=e[r];let i=this.J_.get(s.timeWeight);i===void 0&&(i=[],this.J_.set(s.timeWeight,i)),i.push({index:r,time:s.time,weight:s.timeWeight,originalTime:s.originalTime})}}su(e,n){const r=Math.ceil(n/e);return this.tr!==null&&this.tr.eu===r||(this.tr={Ha:this.ru(r),eu:r}),this.tr.Ha}nu(e){if(e===0)return void this.J_.clear();const n=[];this.J_.forEach((r,s)=>{e<=r[0].index?n.push(s):r.splice(vd(r,e,i=>i.index<e),1/0)});for(const r of n)this.J_.delete(r)}ru(e){let n=[];for(const r of Array.from(this.J_.keys()).sort((s,i)=>i-s)){if(!this.J_.get(r))continue;const s=n;n=[];const i=s.length;let a=0;const l=vn(this.J_.get(r)),c=l.length;let u=1/0,d=-1/0;for(let h=0;h<c;h++){const f=l[h],m=f.index;for(;a<i;){const _=s[a],S=_.index;if(!(S<m)){u=S;break}a++,n.push(_),d=S,u=1/0}if(u-m>=e&&m-d>=e)n.push(f),d=m;else if(this.Q_)return s}for(;a<i;a++)n.push(s[a])}return n}}class jl{constructor(e){this.hu=e}lu(){return this.hu===null?null:new du(Math.floor(this.hu.Os()),Math.ceil(this.hu.ui()))}au(){return this.hu}static ou(){return new jl(null)}}function OW(t,e){return t.weight>e.weight?t:e}class IW{constructor(e,n,r,s){this.__=0,this._u=null,this.uu=[],this.Mo=null,this.wo=null,this.cu=new kW,this.du=new Map,this.fu=jl.ou(),this.vu=!0,this.pu=new Pt,this.mu=new Pt,this.bu=new Pt,this.wu=null,this.gu=null,this.Mu=[],this.cn=n,this.yo=r,this.xu=n.rightOffset,this.Su=n.barSpacing,this.$i=e,this.q_=s,this.ku(),this.cu.tu(n.uniformDistribution)}W(){return this.cn}yu(e){qr(this.yo,e),this.Cu(),this.ku()}$h(e,n){var r;qr(this.cn,e),this.cn.fixLeftEdge&&this.Tu(),this.cn.fixRightEdge&&this.Pu(),e.barSpacing!==void 0&&this.$i.Gn(e.barSpacing),e.rightOffset!==void 0&&this.$i.Jn(e.rightOffset),e.minBarSpacing!==void 0&&this.$i.Gn((r=e.barSpacing)!==null&&r!==void 0?r:this.Su),this.Cu(),this.ku(),this.bu.m()}mn(e){var n,r;return(r=(n=this.uu[e])===null||n===void 0?void 0:n.time)!==null&&r!==void 0?r:null}Ui(e){var n;return(n=this.uu[e])!==null&&n!==void 0?n:null}Va(e,n){if(this.uu.length<1)return null;if(this.q_.key(e)>this.q_.key(this.uu[this.uu.length-1].time))return n?this.uu.length-1:null;const r=vd(this.uu,this.q_.key(e),(s,i)=>this.q_.key(s.time)<i);return this.q_.key(e)<this.q_.key(this.uu[r].time)?n?r:null:r}Ni(){return this.__===0||this.uu.length===0||this._u===null}Da(){return this.uu.length>0}Xs(){return this.Ru(),this.fu.lu()}Du(){return this.Ru(),this.fu.au()}Vu(){const e=this.Xs();if(e===null)return null;const n={from:e.Os(),to:e.ui()};return this.Ou(n)}Ou(e){const n=Math.round(e.from),r=Math.round(e.to),s=Se(this.Bu()),i=Se(this.Au());return{from:Se(this.Ui(Math.max(s,n))),to:Se(this.Ui(Math.min(i,r)))}}Iu(e){return{from:Se(this.Va(e.from,!0)),to:Se(this.Va(e.to,!0))}}Hi(){return this.__}S_(e){if(!isFinite(e)||e<=0||this.__===e)return;const n=this.Du(),r=this.__;if(this.__=e,this.vu=!0,this.cn.lockVisibleTimeRangeOnResize&&r!==0){const s=this.Su*e/r;this.Su=s}if(this.cn.fixLeftEdge&&n!==null&&n.Os()<=0){const s=r-e;this.xu-=Math.round(s/this.Su)+1,this.vu=!0}this.zu(),this.Lu()}It(e){if(this.Ni()||!Fu(e))return 0;const n=this.Eu()+this.xu-e;return this.__-(n+.5)*this.Su-1}Qs(e,n){const r=this.Eu(),s=n===void 0?0:n.from,i=n===void 0?e.length:n.to;for(let a=s;a<i;a++){const l=e[a].ot,c=r+this.xu-l,u=this.__-(c+.5)*this.Su-1;e[a].nt=u}}Nu(e){return Math.ceil(this.Fu(e))}Jn(e){this.vu=!0,this.xu=e,this.Lu(),this.$i.Wu(),this.$i.Uh()}le(){return this.Su}Gn(e){this.ju(e),this.Lu(),this.$i.Wu(),this.$i.Uh()}Hu(){return this.xu}Ha(){if(this.Ni())return null;if(this.gu!==null)return this.gu;const e=this.Su,n=5*(this.$i.W().layout.fontSize+4)/8*(this.cn.tickMarkMaxCharacterLength||8),r=Math.round(n/e),s=Se(this.Xs()),i=Math.max(s.Os(),s.Os()-r),a=Math.max(s.ui(),s.ui()-r),l=this.cu.su(e,n),c=this.Bu()+r,u=this.Au()-r,d=this.$u(),h=this.cn.fixLeftEdge||d,f=this.cn.fixRightEdge||d;let m=0;for(const _ of l){if(!(i<=_.index&&_.index<=a))continue;let S;m<this.Mu.length?(S=this.Mu[m],S.coord=this.It(_.index),S.label=this.Uu(_),S.weight=_.weight):(S={needAlignCoordinate:!1,coord:this.It(_.index),label:this.Uu(_),weight:_.weight},this.Mu.push(S)),this.Su>n/2&&!d?S.needAlignCoordinate=!1:S.needAlignCoordinate=h&&_.index<=c||f&&_.index>=u,m++}return this.Mu.length=m,this.gu=this.Mu,this.Mu}qu(){this.vu=!0,this.Gn(this.cn.barSpacing),this.Jn(this.cn.rightOffset)}Yu(e){this.vu=!0,this._u=e,this.Lu(),this.Tu()}Zu(e,n){const r=this.Fu(e),s=this.le(),i=s+n*(s/10);this.Gn(i),this.cn.rightBarStaysOnScroll||this.Jn(this.Hu()+(r-this.Fu(e)))}Go(e){this.Mo&&this.n_(),this.wo===null&&this.wu===null&&(this.Ni()||(this.wo=e,this.Xu()))}Jo(e){if(this.wu===null)return;const n=Tv(this.__-e,0,this.__),r=Tv(this.__-Se(this.wo),0,this.__);n!==0&&r!==0&&this.Gn(this.wu.le*n/r)}Qo(){this.wo!==null&&(this.wo=null,this.Ku())}t_(e){this.Mo===null&&this.wu===null&&(this.Ni()||(this.Mo=e,this.Xu()))}i_(e){if(this.Mo===null)return;const n=(this.Mo-e)/this.le();this.xu=Se(this.wu).Hu+n,this.vu=!0,this.Lu()}n_(){this.Mo!==null&&(this.Mo=null,this.Ku())}Gu(){this.Ju(this.cn.rightOffset)}Ju(e,n=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(n)||n<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const r=this.xu,s=performance.now();this.$i.Zn({Qu:i=>(i-s)/n>=1,tc:i=>{const a=(i-s)/n;return a>=1?e:r+(e-r)*a}})}bt(e,n){this.vu=!0,this.uu=e,this.cu.iu(e,n),this.Lu()}nc(){return this.pu}sc(){return this.mu}ec(){return this.bu}Eu(){return this._u||0}rc(e){const n=e.G_();this.ju(this.__/n),this.xu=e.ui()-this.Eu(),this.Lu(),this.vu=!0,this.$i.Wu(),this.$i.Uh()}hc(){const e=this.Bu(),n=this.Au();e!==null&&n!==null&&this.rc(new du(e,n+this.cn.rightOffset))}lc(e){const n=new du(e.from,e.to);this.rc(n)}qi(e){return this.yo.timeFormatter!==void 0?this.yo.timeFormatter(e.originalTime):this.q_.formatHorzItem(e.time)}$u(){const{handleScroll:e,handleScale:n}=this.$i.W();return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||n.axisDoubleClickReset.time||n.axisPressedMouseMove.time||n.mouseWheel||n.pinch)}Bu(){return this.uu.length===0?null:0}Au(){return this.uu.length===0?null:this.uu.length-1}ac(e){return(this.__-1-e)/this.Su}Fu(e){const n=this.ac(e),r=this.Eu()+this.xu-n;return Math.round(1e6*r)/1e6}ju(e){const n=this.Su;this.Su=e,this.zu(),n!==this.Su&&(this.vu=!0,this.oc())}Ru(){if(!this.vu)return;if(this.vu=!1,this.Ni())return void this._c(jl.ou());const e=this.Eu(),n=this.__/this.Su,r=this.xu+e,s=new du(r-n+1,r);this._c(new jl(s))}zu(){const e=this.uc();if(this.Su<e&&(this.Su=e,this.vu=!0),this.__!==0){const n=.5*this.__;this.Su>n&&(this.Su=n,this.vu=!0)}}uc(){return this.cn.fixLeftEdge&&this.cn.fixRightEdge&&this.uu.length!==0?this.__/this.uu.length:this.cn.minBarSpacing}Lu(){const e=this.cc();e!==null&&this.xu<e&&(this.xu=e,this.vu=!0);const n=this.dc();this.xu>n&&(this.xu=n,this.vu=!0)}cc(){const e=this.Bu(),n=this._u;return e===null||n===null?null:e-n-1+(this.cn.fixLeftEdge?this.__/this.Su:Math.min(2,this.uu.length))}dc(){return this.cn.fixRightEdge?0:this.__/this.Su-Math.min(2,this.uu.length)}Xu(){this.wu={le:this.le(),Hu:this.Hu()}}Ku(){this.wu=null}Uu(e){let n=this.du.get(e.weight);return n===void 0&&(n=new jW(r=>this.fc(r),this.q_),this.du.set(e.weight,n)),n.Y_(e)}fc(e){return this.q_.formatTickmark(e,this.yo)}_c(e){const n=this.fu;this.fu=e,FE(n.lu(),this.fu.lu())||this.pu.m(),FE(n.au(),this.fu.au())||this.mu.m(),this.oc()}oc(){this.gu=null}Cu(){this.oc(),this.du.clear()}ku(){this.q_.updateFormatter(this.yo)}Tu(){if(!this.cn.fixLeftEdge)return;const e=this.Bu();if(e===null)return;const n=this.Xs();if(n===null)return;const r=n.Os()-e;if(r<0){const s=this.xu-r-1;this.Jn(s)}this.zu()}Pu(){this.Lu(),this.zu()}}class PW{X(e,n,r){e.useMediaCoordinateSpace(s=>this.K(s,n,r))}gl(e,n,r){e.useMediaCoordinateSpace(s=>this.vc(s,n,r))}vc(e,n,r){}}class RW extends PW{constructor(e){super(),this.mc=new Map,this.zt=e}K(e){}vc(e){if(!this.zt.yt)return;const{context:n,mediaSize:r}=e;let s=0;for(const a of this.zt.bc){if(a.Kt.length===0)continue;n.font=a.R;const l=this.wc(n,a.Kt);l>r.width?a.Zu=r.width/l:a.Zu=1,s+=a.gc*a.Zu}let i=0;switch(this.zt.Mc){case"top":i=0;break;case"center":i=Math.max((r.height-s)/2,0);break;case"bottom":i=Math.max(r.height-s,0)}n.fillStyle=this.zt.V;for(const a of this.zt.bc){n.save();let l=0;switch(this.zt.xc){case"left":n.textAlign="left",l=a.gc/2;break;case"center":n.textAlign="center",l=r.width/2;break;case"right":n.textAlign="right",l=r.width-1-a.gc/2}n.translate(l,i),n.textBaseline="top",n.font=a.R,n.scale(a.Zu,a.Zu),n.fillText(a.Kt,0,a.Sc),n.restore(),i+=a.gc*a.Zu}}wc(e,n){const r=this.kc(e.font);let s=r.get(n);return s===void 0&&(s=e.measureText(n).width,r.set(n,s)),s}kc(e){let n=this.mc.get(e);return n===void 0&&(n=new Map,this.mc.set(e,n)),n}}class LW{constructor(e){this.ft=!0,this.Ft={yt:!1,V:"",bc:[],Mc:"center",xc:"center"},this.Wt=new RW(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.W(),n=this.Ft;n.yt=e.visible,n.yt&&(n.V=e.color,n.xc=e.horzAlign,n.Mc=e.vertAlign,n.bc=[{Kt:e.text,R:Hl(e.fontSize,e.fontFamily,e.fontStyle),gc:1.2*e.fontSize,Sc:0,Zu:0}])}}class MW extends Lw{constructor(e,n){super(),this.cn=n,this.wn=new LW(this)}Rn(){return[]}Pn(){return[this.wn]}W(){return this.cn}Vn(){this.wn.bt()}}var UE,$E,VE,zE,HE;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(UE||(UE={}));class DW{constructor(e,n,r){this.yc=[],this.Cc=[],this.__=0,this.Tc=null,this.Pc=new Pt,this.Rc=new Pt,this.Dc=null,this.Vc=e,this.cn=n,this.q_=r,this.Oc=new mH(this),this.yl=new IW(this,n.timeScale,this.cn.localization,r),this.vt=new TH(this,n.crosshair),this.Bc=new bW(n.crosshair),this.Ac=new MW(this,n.watermark),this.Ic(),this.yc[0].x_(2e3),this.zc=this.Lc(0),this.Ec=this.Lc(1)}Kl(){this.Nc(Qt.es())}Uh(){this.Nc(Qt.ss())}oa(){this.Nc(new Qt(1))}Gl(e){const n=this.Fc(e);this.Nc(n)}Wc(){return this.Tc}jc(e){const n=this.Tc;this.Tc=e,n!==null&&this.Gl(n.Hc),e!==null&&this.Gl(e.Hc)}W(){return this.cn}$h(e){qr(this.cn,e),this.yc.forEach(n=>n.b_(e)),e.timeScale!==void 0&&this.yl.$h(e.timeScale),e.localization!==void 0&&this.yl.yu(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Pc.m(),this.zc=this.Lc(0),this.Ec=this.Lc(1),this.Kl()}$c(e,n){if(e==="left")return void this.$h({leftPriceScale:n});if(e==="right")return void this.$h({rightPriceScale:n});const r=this.Uc(e);r!==null&&(r.Dt.$h(n),this.Pc.m())}Uc(e){for(const n of this.yc){const r=n.w_(e);if(r!==null)return{Ht:n,Dt:r}}return null}St(){return this.yl}qc(){return this.yc}Yc(){return this.Ac}Zc(){return this.vt}Xc(){return this.Rc}Kc(e,n){e.Lo(n),this.Wu()}S_(e){this.__=e,this.yl.S_(this.__),this.yc.forEach(n=>n.S_(e)),this.Wu()}Ic(e){const n=new CW(this.yl,this);e!==void 0?this.yc.splice(e,0,n):this.yc.push(n);const r=e===void 0?this.yc.length-1:e,s=Qt.es();return s.Nn(r,{Fn:0,Wn:!0}),this.Nc(s),n}V_(e,n,r){e.V_(n,r)}O_(e,n,r){e.O_(n,r),this.Jl(),this.Nc(this.Gc(e,2))}B_(e,n){e.B_(n),this.Nc(this.Gc(e,2))}A_(e,n,r){n.Vo()||e.A_(n,r)}I_(e,n,r){n.Vo()||(e.I_(n,r),this.Jl(),this.Nc(this.Gc(e,2)))}z_(e,n){n.Vo()||(e.z_(n),this.Nc(this.Gc(e,2)))}E_(e,n){e.E_(n),this.Nc(this.Gc(e,2))}Jc(e){this.yl.Go(e)}Qc(e,n){const r=this.St();if(r.Ni()||n===0)return;const s=r.Hi();e=Math.max(1,Math.min(e,s)),r.Zu(e,n),this.Wu()}td(e){this.nd(0),this.sd(e),this.ed()}rd(e){this.yl.Jo(e),this.Wu()}hd(){this.yl.Qo(),this.Uh()}nd(e){this.yl.t_(e)}sd(e){this.yl.i_(e),this.Wu()}ed(){this.yl.n_(),this.Uh()}wt(){return this.Cc}ld(e,n,r,s,i){this.vt.gn(e,n);let a=NaN,l=this.yl.Nu(e);const c=this.yl.Xs();c!==null&&(l=Math.min(Math.max(c.Os(),l),c.ui()));const u=s.vn(),d=u.Ct();d!==null&&(a=u.pn(n,d)),a=this.Bc.Oa(a,l,s),this.vt.kn(l,a,s),this.oa(),i||this.Rc.m(this.vt.xt(),{x:e,y:n},r)}ad(e,n,r){const s=r.vn(),i=s.Ct(),a=s.Rt(e,Se(i)),l=this.yl.Va(n,!0),c=this.yl.It(Se(l));this.ld(c,a,null,r,!0)}od(e){this.Zc().Cn(),this.oa(),e||this.Rc.m(null,null,null)}Jl(){const e=this.vt.Ht();if(e!==null){const n=this.vt.xn(),r=this.vt.Sn();this.ld(n,r,null,e)}this.vt.Vn()}_d(e,n,r){const s=this.yl.mn(0);n!==void 0&&r!==void 0&&this.yl.bt(n,r);const i=this.yl.mn(0),a=this.yl.Eu(),l=this.yl.Xs();if(l!==null&&s!==null&&i!==null){const c=l.Kr(a),u=this.q_.key(s)>this.q_.key(i),d=e!==null&&e>a&&!u,h=this.yl.W().allowShiftVisibleRangeOnWhitespaceReplacement,f=c&&(r!==void 0||h)&&this.yl.W().shiftVisibleRangeOnNewBar;if(d&&!f){const m=e-a;this.yl.Jn(this.yl.Hu()-m)}}this.yl.Yu(e)}ia(e){e!==null&&e.F_()}dr(e){const n=this.yc.find(r=>r.Uo().includes(e));return n===void 0?null:n}Wu(){this.Ac.Vn(),this.yc.forEach(e=>e.F_()),this.Jl()}S(){this.yc.forEach(e=>e.S()),this.yc.length=0,this.cn.localization.priceFormatter=void 0,this.cn.localization.percentageFormatter=void 0,this.cn.localization.timeFormatter=void 0}ud(){return this.Oc}br(){return this.Oc.W()}g_(){return this.Pc}dd(e,n,r){const s=this.yc[0],i=this.fd(n,e,s,r);return this.Cc.push(i),this.Cc.length===1?this.Kl():this.Uh(),i}vd(e){const n=this.dr(e),r=this.Cc.indexOf(e);co(r!==-1,"Series not found"),this.Cc.splice(r,1),Se(n).Zo(e),e.S&&e.S()}Xl(e,n){const r=Se(this.dr(e));r.Zo(e);const s=this.Uc(n);if(s===null){const i=e.Xi();r.qo(e,n,i)}else{const i=s.Ht===r?e.Xi():void 0;s.Ht.qo(e,n,i)}}hc(){const e=Qt.ss();e.$n(),this.Nc(e)}pd(e){const n=Qt.ss();n.Yn(e),this.Nc(n)}Kn(){const e=Qt.ss();e.Kn(),this.Nc(e)}Gn(e){const n=Qt.ss();n.Gn(e),this.Nc(n)}Jn(e){const n=Qt.ss();n.Jn(e),this.Nc(n)}Zn(e){const n=Qt.ss();n.Zn(e),this.Nc(n)}Un(){const e=Qt.ss();e.Un(),this.Nc(e)}md(){return this.cn.rightPriceScale.visible?"right":"left"}bd(){return this.Ec}q(){return this.zc}Bt(e){const n=this.Ec,r=this.zc;if(n===r)return n;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Dc===null||this.Dc.Ps!==r||this.Dc.Rs!==n)this.Dc={Ps:r,Rs:n,wd:new Map};else{const i=this.Dc.wd.get(e);if(i!==void 0)return i}const s=function(i,a,l){const[c,u,d,h]=Bu(i),[f,m,_,S]=Bu(a),j=[fr(c+l*(f-c)),fr(u+l*(m-u)),fr(d+l*(_-d)),dj(h+l*(S-h))];return`rgba(${j[0]}, ${j[1]}, ${j[2]}, ${j[3]})`}(r,n,e/100);return this.Dc.wd.set(e,s),s}Gc(e,n){const r=new Qt(n);if(e!==null){const s=this.yc.indexOf(e);r.Nn(s,{Fn:n})}return r}Fc(e,n){return n===void 0&&(n=2),this.Gc(this.dr(e),n)}Nc(e){this.Vc&&this.Vc(e),this.yc.forEach(n=>n.j_().qh().bt())}fd(e,n,r,s){const i=new Fw(this,e,n,r,s),a=e.priceScaleId!==void 0?e.priceScaleId:this.md();return r.qo(i,a),Um(a)||i.$h(e),i}Lc(e){const n=this.cn.layout;return n.background.type==="gradient"?e===0?n.background.topColor:n.background.bottomColor:n.background.color}}function Av(t){return!gs(t)&&!yd(t)}function kj(t){return gs(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})($E||($E={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(VE||(VE={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(zE||(zE={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(HE||(HE={}));const WE=t=>t.getUTCFullYear();function BW(t,e,n){return e.replace(/yyyy/g,(r=>$s(WE(r),4))(t)).replace(/yy/g,(r=>$s(WE(r)%100,2))(t)).replace(/MMMM/g,((r,s)=>new Date(r.getUTCFullYear(),r.getUTCMonth(),1).toLocaleString(s,{month:"long"}))(t,n)).replace(/MMM/g,((r,s)=>new Date(r.getUTCFullYear(),r.getUTCMonth(),1).toLocaleString(s,{month:"short"}))(t,n)).replace(/MM/g,(r=>$s((s=>s.getUTCMonth()+1)(r),2))(t)).replace(/dd/g,(r=>$s((s=>s.getUTCDate())(r),2))(t))}class Oj{constructor(e="yyyy-MM-dd",n="default"){this.gd=e,this.Md=n}Y_(e){return BW(e,this.gd,this.Md)}}class FW{constructor(e){this.xd=e||"%h:%m:%s"}Y_(e){return this.xd.replace("%h",$s(e.getUTCHours(),2)).replace("%m",$s(e.getUTCMinutes(),2)).replace("%s",$s(e.getUTCSeconds(),2))}}const UW={Sd:"yyyy-MM-dd",kd:"%h:%m:%s",yd:" ",Cd:"default"};class $W{constructor(e={}){const n=Object.assign(Object.assign({},UW),e);this.Td=new Oj(n.Sd,n.Cd),this.Pd=new FW(n.kd),this.Rd=n.yd}Y_(e){return`${this.Td.Y_(e)}${this.Rd}${this.Pd.Y_(e)}`}}function gh(t){return 60*t*60*1e3}function jg(t){return 60*t*1e3}const yh=[{Dd:(XE=1,1e3*XE),Vd:10},{Dd:jg(1),Vd:20},{Dd:jg(5),Vd:21},{Dd:jg(30),Vd:22},{Dd:gh(1),Vd:30},{Dd:gh(3),Vd:31},{Dd:gh(6),Vd:32},{Dd:gh(12),Vd:33}];var XE;function KE(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let n=yh.length-1;n>=0;--n)if(Math.floor(e.getTime()/yh[n].Dd)!==Math.floor(t.getTime()/yh[n].Dd))return yh[n].Vd;return 0}function kg(t){let e=t;if(yd(t)&&(e=Uw(t)),!Av(e))throw new Error("time must be of type BusinessDay");const n=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{Od:Math.round(n.getTime()/1e3),Bd:e}}function qE(t){if(!kj(t))throw new Error("time must be of type isUTCTimestamp");return{Od:t}}function Uw(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function GE(t){yd(t.time)&&(t.time=Uw(t.time))}class YE{options(){return this.cn}setOptions(e){this.cn=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(n){n.forEach(GE)}(e):GE(e)}createConverterToInternalObj(e){return Se(function(n){return n.length===0?null:Av(n[0].time)||yd(n[0].time)?kg:qE}(e))}key(e){return typeof e=="object"&&"Od"in e?e.Od:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const n=e;return n.Bd===void 0?new Date(1e3*n.Od).getTime():new Date(Date.UTC(n.Bd.year,n.Bd.month-1,n.Bd.day)).getTime()}convertHorzItemToInternal(e){return kj(n=e)?qE(n):Av(n)?kg(n):kg(Uw(n));var n}updateFormatter(e){if(!this.cn)return;const n=e.dateFormat;this.cn.timeScale.timeVisible?this.Ad=new $W({Sd:n,kd:this.cn.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",yd:"   ",Cd:e.locale}):this.Ad=new Oj(n,e.locale)}formatHorzItem(e){const n=e;return this.Ad.Y_(new Date(1e3*n.Od))}formatTickmark(e,n){const r=function(i,a,l){switch(i){case 0:case 10:return a?l?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return a?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.cn.timeScale.timeVisible,this.cn.timeScale.secondsVisible),s=this.cn.timeScale;if(s.tickMarkFormatter!==void 0){const i=s.tickMarkFormatter(e.originalTime,r,n.locale);if(i!==null)return i}return function(i,a,l){const c={};switch(a){case 0:c.year="numeric";break;case 1:c.month="short";break;case 2:c.day="numeric";break;case 3:c.hour12=!1,c.hour="2-digit",c.minute="2-digit";break;case 4:c.hour12=!1,c.hour="2-digit",c.minute="2-digit",c.second="2-digit"}const u=i.Bd===void 0?new Date(1e3*i.Od):new Date(Date.UTC(i.Bd.year,i.Bd.month-1,i.Bd.day));return new Date(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate(),u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()).toLocaleString(l,c)}(e.time,r,n.locale)}maxTickMarkWeight(e){let n=e.reduce(OW,e[0]).weight;return n>30&&n<50&&(n=30),n}fillWeightsForPoints(e,n){(function(r,s=0){if(r.length===0)return;let i=s===0?null:r[s-1].time.Od,a=i!==null?new Date(1e3*i):null,l=0;for(let c=s;c<r.length;++c){const u=r[c],d=new Date(1e3*u.time.Od);a!==null&&(u.timeWeight=KE(d,a)),l+=u.time.Od-(i||u.time.Od),i=u.time.Od,a=d}if(s===0&&r.length>1){const c=Math.ceil(l/(r.length-1)),u=new Date(1e3*(r[0].time.Od-c));r[0].timeWeight=KE(new Date(1e3*r[0].time.Od),u)}})(e,n)}static Id(e){return qr({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const Wl=typeof window<"u";function JE(){return!!Wl&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Og(){return!!Wl&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function Cv(t){return t+t%2}function Ig(t,e){return t.zd-e.zd}function Pg(t,e,n){const r=(t.zd-e.zd)/(t.ot-e.ot);return Math.sign(r)*Math.min(Math.abs(r),n)}class VW{constructor(e,n,r,s){this.Ld=null,this.Ed=null,this.Nd=null,this.Fd=null,this.Wd=null,this.jd=0,this.Hd=0,this.$d=e,this.Ud=n,this.qd=r,this.rs=s}Yd(e,n){if(this.Ld!==null){if(this.Ld.ot===n)return void(this.Ld.zd=e);if(Math.abs(this.Ld.zd-e)<this.rs)return}this.Fd=this.Nd,this.Nd=this.Ed,this.Ed=this.Ld,this.Ld={ot:n,zd:e}}Vr(e,n){if(this.Ld===null||this.Ed===null||n-this.Ld.ot>50)return;let r=0;const s=Pg(this.Ld,this.Ed,this.Ud),i=Ig(this.Ld,this.Ed),a=[s],l=[i];if(r+=i,this.Nd!==null){const u=Pg(this.Ed,this.Nd,this.Ud);if(Math.sign(u)===Math.sign(s)){const d=Ig(this.Ed,this.Nd);if(a.push(u),l.push(d),r+=d,this.Fd!==null){const h=Pg(this.Nd,this.Fd,this.Ud);if(Math.sign(h)===Math.sign(s)){const f=Ig(this.Nd,this.Fd);a.push(h),l.push(f),r+=f}}}}let c=0;for(let u=0;u<a.length;++u)c+=l[u]/r*a[u];Math.abs(c)<this.$d||(this.Wd={zd:e,ot:n},this.Hd=c,this.jd=function(u,d){const h=Math.log(d);return Math.log(1*h/-u)/h}(Math.abs(c),this.qd))}tc(e){const n=Se(this.Wd),r=e-n.ot;return n.zd+this.Hd*(Math.pow(this.qd,r)-1)/Math.log(this.qd)}Qu(e){return this.Wd===null||this.Zd(e)===this.jd}Zd(e){const n=e-Se(this.Wd).ot;return Math.min(n,this.jd)}}class zW{constructor(e,n){this.Xd=void 0,this.Kd=void 0,this.Gd=void 0,this.en=!1,this.Jd=e,this.Qd=n,this.tf()}bt(){this.tf()}if(){this.Xd&&this.Jd.removeChild(this.Xd),this.Kd&&this.Jd.removeChild(this.Kd),this.Xd=void 0,this.Kd=void 0}nf(){return this.en!==this.sf()||this.Gd!==this.ef()}ef(){return hj(Bu(this.Qd.W().layout.textColor))>160?"dark":"light"}sf(){return this.Qd.W().layout.attributionLogo}rf(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}tf(){this.nf()&&(this.if(),this.en=this.sf(),this.en&&(this.Gd=this.ef(),this.Kd=document.createElement("style"),this.Kd.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Xd=document.createElement("a"),this.Xd.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.rf()}`,this.Xd.title="Charting by TradingView",this.Xd.id="tv-attr-logo",this.Xd.target="_blank",this.Xd.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 19" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Xd.toggleAttribute("data-dark",this.Gd==="dark"),this.Jd.appendChild(this.Kd),this.Jd.appendChild(this.Xd)))}}function _a(t,e){const n=Se(t.ownerDocument).createElement("canvas");t.appendChild(n);const r=eH(n,{type:"device-pixel-content-box",options:{allowResizeObserver:!1},transform:(s,i)=>({width:Math.max(s.width,i.width),height:Math.max(s.height,i.height)})});return r.resizeCanvasElement(e),r}function Ea(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))===null||e===void 0||e.clearRect(0,0,1,1)}function jv(t,e,n,r){t.gl&&t.gl(e,n,r)}function Kh(t,e,n,r){t.X(e,n,r)}function kv(t,e,n,r){const s=t(n,r);for(const i of s){const a=i.gt();a!==null&&e(a)}}function HW(t){Wl&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class $w{constructor(e,n,r){this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.df=null,this.ff=!1,this.vf=null,this.pf=null,this.mf=!1,this.bf=!1,this.wf=!1,this.gf=null,this.Mf=null,this.xf=null,this.Sf=null,this.kf=null,this.yf=null,this.Cf=null,this.Tf=0,this.Pf=!1,this.Rf=!1,this.Df=!1,this.Vf=0,this.Of=null,this.Bf=!Og(),this.Af=s=>{this.If(s)},this.zf=s=>{if(this.Lf(s)){const i=this.Ef(s);if(++this._f,this.uf&&this._f>1){const{Nf:a}=this.Ff(os(s),this.cf);a<30&&!this.wf&&this.Wf(i,this.Hf.jf),this.$f()}}else{const i=this.Ef(s);if(++this.hf,this.lf&&this.hf>1){const{Nf:a}=this.Ff(os(s),this.af);a<5&&!this.bf&&this.Uf(i,this.Hf.qf),this.Yf()}}},this.Zf=e,this.Hf=n,this.cn=r,this.Xf()}S(){this.gf!==null&&(this.gf(),this.gf=null),this.Mf!==null&&(this.Mf(),this.Mf=null),this.Sf!==null&&(this.Sf(),this.Sf=null),this.kf!==null&&(this.kf(),this.kf=null),this.yf!==null&&(this.yf(),this.yf=null),this.xf!==null&&(this.xf(),this.xf=null),this.Kf(),this.Yf()}Gf(e){this.Sf&&this.Sf();const n=this.Jf.bind(this);if(this.Sf=()=>{this.Zf.removeEventListener("mousemove",n)},this.Zf.addEventListener("mousemove",n),this.Lf(e))return;const r=this.Ef(e);this.Uf(r,this.Hf.Qf),this.Bf=!0}Yf(){this.lf!==null&&clearTimeout(this.lf),this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}$f(){this.uf!==null&&clearTimeout(this.uf),this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Jf(e){if(this.Df||this.pf!==null||this.Lf(e))return;const n=this.Ef(e);this.Uf(n,this.Hf.tv),this.Bf=!0}iv(e){const n=Rg(e.changedTouches,Se(this.Of));if(n===null||(this.Vf=vh(e),this.Cf!==null)||this.Rf)return;this.Pf=!0;const r=this.Ff(os(n),Se(this.pf)),{nv:s,sv:i,Nf:a}=r;if(this.mf||!(a<5)){if(!this.mf){const l=.5*s,c=i>=l&&!this.cn.ev(),u=l>i&&!this.cn.rv();c||u||(this.Rf=!0),this.mf=!0,this.wf=!0,this.Kf(),this.$f()}if(!this.Rf){const l=this.Ef(e,n);this.Wf(l,this.Hf.hv),tl(e)}}}lv(e){if(e.button!==0)return;const n=this.Ff(os(e),Se(this.vf)),{Nf:r}=n;if(r>=5&&(this.bf=!0,this.Yf()),this.bf){const s=this.Ef(e);this.Uf(s,this.Hf.av)}}Ff(e,n){const r=Math.abs(n.nt-e.nt),s=Math.abs(n.st-e.st);return{nv:r,sv:s,Nf:r+s}}ov(e){let n=Rg(e.changedTouches,Se(this.Of));if(n===null&&e.touches.length===0&&(n=e.changedTouches[0]),n===null)return;this.Of=null,this.Vf=vh(e),this.Kf(),this.pf=null,this.yf&&(this.yf(),this.yf=null);const r=this.Ef(e,n);if(this.Wf(r,this.Hf._v),++this._f,this.uf&&this._f>1){const{Nf:s}=this.Ff(os(n),this.cf);s<30&&!this.wf&&this.Wf(r,this.Hf.jf),this.$f()}else this.wf||(this.Wf(r,this.Hf.uv),this.Hf.uv&&tl(e));this._f===0&&tl(e),e.touches.length===0&&this.ff&&(this.ff=!1,tl(e))}If(e){if(e.button!==0)return;const n=this.Ef(e);if(this.vf=null,this.Df=!1,this.kf&&(this.kf(),this.kf=null),JE()&&this.Zf.ownerDocument.documentElement.removeEventListener("mouseleave",this.Af),!this.Lf(e))if(this.Uf(n,this.Hf.cv),++this.hf,this.lf&&this.hf>1){const{Nf:r}=this.Ff(os(e),this.af);r<5&&!this.bf&&this.Uf(n,this.Hf.qf),this.Yf()}else this.bf||this.Uf(n,this.Hf.dv)}Kf(){this.df!==null&&(clearTimeout(this.df),this.df=null)}fv(e){if(this.Of!==null)return;const n=e.changedTouches[0];this.Of=n.identifier,this.Vf=vh(e);const r=this.Zf.ownerDocument.documentElement;this.wf=!1,this.mf=!1,this.Rf=!1,this.pf=os(n),this.yf&&(this.yf(),this.yf=null);{const i=this.iv.bind(this),a=this.ov.bind(this);this.yf=()=>{r.removeEventListener("touchmove",i),r.removeEventListener("touchend",a)},r.addEventListener("touchmove",i,{passive:!1}),r.addEventListener("touchend",a,{passive:!1}),this.Kf(),this.df=setTimeout(this.vv.bind(this,e),240)}const s=this.Ef(e,n);this.Wf(s,this.Hf.pv),this.uf||(this._f=0,this.uf=setTimeout(this.$f.bind(this),500),this.cf=os(n))}mv(e){if(e.button!==0)return;const n=this.Zf.ownerDocument.documentElement;JE()&&n.addEventListener("mouseleave",this.Af),this.bf=!1,this.vf=os(e),this.kf&&(this.kf(),this.kf=null);{const s=this.lv.bind(this),i=this.If.bind(this);this.kf=()=>{n.removeEventListener("mousemove",s),n.removeEventListener("mouseup",i)},n.addEventListener("mousemove",s),n.addEventListener("mouseup",i)}if(this.Df=!0,this.Lf(e))return;const r=this.Ef(e);this.Uf(r,this.Hf.bv),this.lf||(this.hf=0,this.lf=setTimeout(this.Yf.bind(this),500),this.af=os(e))}Xf(){this.Zf.addEventListener("mouseenter",this.Gf.bind(this)),this.Zf.addEventListener("touchcancel",this.Kf.bind(this));{const e=this.Zf.ownerDocument,n=r=>{this.Hf.wv&&(r.composed&&this.Zf.contains(r.composedPath()[0])||r.target&&this.Zf.contains(r.target)||this.Hf.wv())};this.Mf=()=>{e.removeEventListener("touchstart",n)},this.gf=()=>{e.removeEventListener("mousedown",n)},e.addEventListener("mousedown",n),e.addEventListener("touchstart",n,{passive:!0})}Og()&&(this.xf=()=>{this.Zf.removeEventListener("dblclick",this.zf)},this.Zf.addEventListener("dblclick",this.zf)),this.Zf.addEventListener("mouseleave",this.gv.bind(this)),this.Zf.addEventListener("touchstart",this.fv.bind(this),{passive:!0}),HW(this.Zf),this.Zf.addEventListener("mousedown",this.mv.bind(this)),this.Mv(),this.Zf.addEventListener("touchmove",()=>{},{passive:!1})}Mv(){this.Hf.xv===void 0&&this.Hf.Sv===void 0&&this.Hf.kv===void 0||(this.Zf.addEventListener("touchstart",e=>this.yv(e.touches),{passive:!0}),this.Zf.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Cf!==null&&this.Hf.Sv!==void 0){const n=QE(e.touches[0],e.touches[1])/this.Tf;this.Hf.Sv(this.Cf,n),tl(e)}},{passive:!1}),this.Zf.addEventListener("touchend",e=>{this.yv(e.touches)}))}yv(e){e.length===1&&(this.Pf=!1),e.length!==2||this.Pf||this.ff?this.Cv():this.Tv(e)}Tv(e){const n=this.Zf.getBoundingClientRect()||{left:0,top:0};this.Cf={nt:(e[0].clientX-n.left+(e[1].clientX-n.left))/2,st:(e[0].clientY-n.top+(e[1].clientY-n.top))/2},this.Tf=QE(e[0],e[1]),this.Hf.xv!==void 0&&this.Hf.xv(),this.Kf()}Cv(){this.Cf!==null&&(this.Cf=null,this.Hf.kv!==void 0&&this.Hf.kv())}gv(e){if(this.Sf&&this.Sf(),this.Lf(e)||!this.Bf)return;const n=this.Ef(e);this.Uf(n,this.Hf.Pv),this.Bf=!Og()}vv(e){const n=Rg(e.touches,Se(this.Of));if(n===null)return;const r=this.Ef(e,n);this.Wf(r,this.Hf.Rv),this.wf=!0,this.ff=!0}Lf(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:vh(e)<this.Vf+500}Wf(e,n){n&&n.call(this.Hf,e)}Uf(e,n){n&&n.call(this.Hf,e)}Ef(e,n){const r=n||e,s=this.Zf.getBoundingClientRect()||{left:0,top:0};return{clientX:r.clientX,clientY:r.clientY,pageX:r.pageX,pageY:r.pageY,screenX:r.screenX,screenY:r.screenY,localX:r.clientX-s.left,localY:r.clientY-s.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Dv:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Vv:e.type,Ov:r.target,Bv:e.view,Av:()=>{e.type!=="touchstart"&&tl(e)}}}}function QE(t,e){const n=t.clientX-e.clientX,r=t.clientY-e.clientY;return Math.sqrt(n*n+r*r)}function tl(t){t.cancelable&&t.preventDefault()}function os(t){return{nt:t.pageX,st:t.pageY}}function vh(t){return t.timeStamp||performance.now()}function Rg(t,e){for(let n=0;n<t.length;++n)if(t[n].identifier===e)return t[n];return null}function xh(t){return{Hc:t.Hc,Iv:{gr:t.zv.externalId},Lv:t.zv.cursorStyle}}function WW(t,e,n){for(const r of t){const s=r.gt();if(s!==null&&s.wr){const i=s.wr(e,n);if(i!==null)return{Bv:r,Iv:i}}}return null}function Lg(t,e){return n=>{var r,s,i,a;return((s=(r=n.Dt())===null||r===void 0?void 0:r.Pa())!==null&&s!==void 0?s:"")!==e?[]:(a=(i=n.da)===null||i===void 0?void 0:i.call(n,t))!==null&&a!==void 0?a:[]}}function ZE(t,e,n,r){if(!t.length)return;let s=0;const i=n/2,a=t[0].At(r,!0);let l=e===1?i-(t[0].Vi()-a/2):t[0].Vi()-a/2-i;l=Math.max(0,l);for(let c=1;c<t.length;c++){const u=t[c],d=t[c-1],h=d.At(r,!1),f=u.Vi(),m=d.Vi();if(e===1?f>m-h:f<m+h){const _=m-h*e;u.Oi(_);const S=_-e*h/2;if((e===1?S<0:S>n)&&l>0){const j=e===1?-1-S:S-n,y=Math.min(j,l);for(let x=s;x<t.length;x++)t[x].Oi(t[x].Vi()+e*y);l-=y}}else s=c,l=e===1?m-h-f:f-(m+h)}}class eS{constructor(e,n,r,s){this.Li=null,this.Ev=null,this.Nv=!1,this.Fv=new $u(200),this.Qr=null,this.Wv=0,this.jv=!1,this.Hv=()=>{this.jv||this.tn.$v().$t().Uh()},this.Uv=()=>{this.jv||this.tn.$v().$t().Uh()},this.tn=e,this.cn=n,this.ko=n.layout,this.Oc=r,this.qv=s==="left",this.Yv=Lg("normal",s),this.Zv=Lg("top",s),this.Xv=Lg("bottom",s),this.Kv=document.createElement("div"),this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Kv.style.width="25px",this.Kv.style.left="0",this.Kv.style.position="relative",this.Gv=_a(this.Kv,xt({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const i=this.Gv.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Jv=_a(this.Kv,xt({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const a=this.Jv.canvasElement;a.style.position="absolute",a.style.zIndex="2",a.style.left="0",a.style.top="0";const l={bv:this.Qv.bind(this),pv:this.Qv.bind(this),av:this.tp.bind(this),hv:this.tp.bind(this),wv:this.ip.bind(this),cv:this.np.bind(this),_v:this.np.bind(this),qf:this.sp.bind(this),jf:this.sp.bind(this),Qf:this.ep.bind(this),Pv:this.rp.bind(this)};this.hp=new $w(this.Jv.canvasElement,l,{ev:()=>!this.cn.handleScroll.vertTouchDrag,rv:()=>!0})}S(){this.hp.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Ea(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Ea(this.Gv.canvasElement),this.Gv.dispose(),this.Li!==null&&this.Li.Ko().p(this),this.Li=null}lp(){return this.Kv}P(){return this.ko.fontSize}ap(){const e=this.Oc.W();return this.Qr!==e.R&&(this.Fv.nr(),this.Qr=e.R),e}op(){if(this.Li===null)return 0;let e=0;const n=this.ap(),r=Se(this.Gv.canvasElement.getContext("2d"));r.save();const s=this.Li.Ha();r.font=this._p(),s.length>0&&(e=Math.max(this.Fv.xi(r,s[0].so),this.Fv.xi(r,s[s.length-1].so)));const i=this.up();for(let u=i.length;u--;){const d=this.Fv.xi(r,i[u].Kt());d>e&&(e=d)}const a=this.Li.Ct();if(a!==null&&this.Ev!==null&&(l=this.cn.crosshair).mode!==2&&l.horzLine.visible&&l.horzLine.labelVisible){const u=this.Li.pn(1,a),d=this.Li.pn(this.Ev.height-2,a);e=Math.max(e,this.Fv.xi(r,this.Li.Fi(Math.floor(Math.min(u,d))+.11111111111111,a)),this.Fv.xi(r,this.Li.Fi(Math.ceil(Math.max(u,d))-.11111111111111,a)))}var l;r.restore();const c=e||34;return Cv(Math.ceil(n.C+n.T+n.A+n.I+5+c))}cp(e){this.Ev!==null&&aa(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`)}dp(){return Se(this.Ev).width}Gi(e){this.Li!==e&&(this.Li!==null&&this.Li.Ko().p(this),this.Li=e,e.Ko().l(this.fo.bind(this),this))}Dt(){return this.Li}nr(){const e=this.tn.fp();this.tn.$v().$t().E_(e,Se(this.Dt()))}vp(e){if(this.Ev===null)return;if(e!==1){this.pp(),this.Gv.applySuggestedBitmapSize();const r=wa(this.Gv);r!==null&&(r.useBitmapCoordinateSpace(s=>{this.mp(s),this.Ie(s)}),this.tn.bp(r,this.Xv),this.wp(r),this.tn.bp(r,this.Yv),this.gp(r))}this.Jv.applySuggestedBitmapSize();const n=wa(this.Jv);n!==null&&(n.useBitmapCoordinateSpace(({context:r,bitmapSize:s})=>{r.clearRect(0,0,s.width,s.height)}),this.Mp(n),this.tn.bp(n,this.Zv))}xp(){return this.Gv.bitmapSize}Sp(e,n,r){const s=this.xp();s.width>0&&s.height>0&&e.drawImage(this.Gv.canvasElement,n,r)}bt(){var e;(e=this.Li)===null||e===void 0||e.Ha()}Qv(e){if(this.Li===null||this.Li.Ni()||!this.cn.handleScale.axisPressedMouseMove.price)return;const n=this.tn.$v().$t(),r=this.tn.fp();this.Nv=!0,n.V_(r,this.Li,e.localY)}tp(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const n=this.tn.$v().$t(),r=this.tn.fp(),s=this.Li;n.O_(r,s,e.localY)}ip(){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.tn.$v().$t(),n=this.tn.fp(),r=this.Li;this.Nv&&(this.Nv=!1,e.B_(n,r))}np(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const n=this.tn.$v().$t(),r=this.tn.fp();this.Nv=!1,n.B_(r,this.Li)}sp(e){this.cn.handleScale.axisDoubleClickReset.price&&this.nr()}ep(e){this.Li!==null&&(!this.tn.$v().$t().W().handleScale.axisPressedMouseMove.price||this.Li.Mh()||this.Li.Oo()||this.kp(1))}rp(e){this.kp(0)}up(){const e=[],n=this.Li===null?void 0:this.Li;return(r=>{for(let s=0;s<r.length;++s){const i=r[s].Rn(this.tn.fp(),n);for(let a=0;a<i.length;a++)e.push(i[a])}})(this.tn.fp().Uo()),e}mp({context:e,bitmapSize:n}){const{width:r,height:s}=n,i=this.tn.fp().$t(),a=i.q(),l=i.bd();a===l?Bm(e,0,0,r,s,a):fj(e,0,0,r,s,a,l)}Ie({context:e,bitmapSize:n,horizontalPixelRatio:r}){if(this.Ev===null||this.Li===null||!this.Li.W().borderVisible)return;e.fillStyle=this.Li.W().borderColor;const s=Math.max(1,Math.floor(this.ap().C*r));let i;i=this.qv?n.width-s:0,e.fillRect(i,0,s,n.height)}wp(e){if(this.Ev===null||this.Li===null)return;const n=this.Li.Ha(),r=this.Li.W(),s=this.ap(),i=this.qv?this.Ev.width-s.T:0;r.borderVisible&&r.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:l,verticalPixelRatio:c})=>{a.fillStyle=r.borderColor;const u=Math.max(1,Math.floor(c)),d=Math.floor(.5*c),h=Math.round(s.T*l);a.beginPath();for(const f of n)a.rect(Math.floor(i*l),Math.round(f.Ea*c)-d,h,u);a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{var l;a.font=this._p(),a.fillStyle=(l=r.textColor)!==null&&l!==void 0?l:this.ko.textColor,a.textAlign=this.qv?"right":"left",a.textBaseline="middle";const c=this.qv?Math.round(i-s.A):Math.round(i+s.T+s.A),u=n.map(d=>this.Fv.Mi(a,d.so));for(let d=n.length;d--;){const h=n[d];a.fillText(h.so,c,h.Ea+u[d])}})}pp(){if(this.Ev===null||this.Li===null)return;const e=[],n=this.Li.Uo().slice(),r=this.tn.fp(),s=this.ap();this.Li===r.pr()&&this.tn.fp().Uo().forEach(a=>{r.vr(a)&&n.push(a)});const i=this.Li;n.forEach(a=>{a.Rn(r,i).forEach(l=>{l.Oi(null),l.Bi()&&e.push(l)})}),e.forEach(a=>a.Oi(a.ki())),this.Li.W().alignLabels&&this.yp(e,s)}yp(e,n){if(this.Ev===null)return;const r=this.Ev.height/2,s=e.filter(a=>a.ki()<=r),i=e.filter(a=>a.ki()>r);s.sort((a,l)=>l.ki()-a.ki()),i.sort((a,l)=>a.ki()-l.ki());for(const a of e){const l=Math.floor(a.At(n)/2),c=a.ki();c>-l&&c<l&&a.Oi(l),c>this.Ev.height-l&&c<this.Ev.height+l&&a.Oi(this.Ev.height-l)}ZE(s,1,this.Ev.height,n),ZE(i,-1,this.Ev.height,n)}gp(e){if(this.Ev===null)return;const n=this.up(),r=this.ap(),s=this.qv?"right":"left";n.forEach(i=>{i.Ai()&&i.gt(Se(this.Li)).X(e,r,this.Fv,s)})}Mp(e){if(this.Ev===null||this.Li===null)return;const n=this.tn.$v().$t(),r=[],s=this.tn.fp(),i=n.Zc().Rn(s,this.Li);i.length&&r.push(i);const a=this.ap(),l=this.qv?"right":"left";r.forEach(c=>{c.forEach(u=>{u.gt(Se(this.Li)).X(e,a,this.Fv,l)})})}kp(e){this.Kv.style.cursor=e===1?"ns-resize":"default"}fo(){const e=this.op();this.Wv<e&&this.tn.$v().$t().Kl(),this.Wv=e}_p(){return Hl(this.ko.fontSize,this.ko.fontFamily)}}function XW(t,e){var n,r;return(r=(n=t.ua)===null||n===void 0?void 0:n.call(t,e))!==null&&r!==void 0?r:[]}function wh(t,e){var n,r;return(r=(n=t.Pn)===null||n===void 0?void 0:n.call(t,e))!==null&&r!==void 0?r:[]}function KW(t,e){var n,r;return(r=(n=t.Ji)===null||n===void 0?void 0:n.call(t,e))!==null&&r!==void 0?r:[]}function qW(t,e){var n,r;return(r=(n=t.aa)===null||n===void 0?void 0:n.call(t,e))!==null&&r!==void 0?r:[]}class Vw{constructor(e,n){this.Ev=xt({width:0,height:0}),this.Cp=null,this.Tp=null,this.Pp=null,this.Rp=null,this.Dp=!1,this.Vp=new Pt,this.Op=new Pt,this.Bp=0,this.Ap=!1,this.Ip=null,this.zp=!1,this.Lp=null,this.Ep=null,this.jv=!1,this.Hv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Uv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Qd=e,this.Np=n,this.Np.W_().l(this.Fp.bind(this),this,!0),this.Wp=document.createElement("td"),this.Wp.style.padding="0",this.Wp.style.position="relative";const r=document.createElement("div");r.style.width="100%",r.style.height="100%",r.style.position="relative",r.style.overflow="hidden",this.jp=document.createElement("td"),this.jp.style.padding="0",this.Hp=document.createElement("td"),this.Hp.style.padding="0",this.Wp.appendChild(r),this.Gv=_a(r,xt({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const s=this.Gv.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Jv=_a(r,xt({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const i=this.Jv.canvasElement;i.style.position="absolute",i.style.zIndex="2",i.style.left="0",i.style.top="0",this.$p=document.createElement("tr"),this.$p.appendChild(this.jp),this.$p.appendChild(this.Wp),this.$p.appendChild(this.Hp),this.Up(),this.hp=new $w(this.Jv.canvasElement,this,{ev:()=>this.Ip===null&&!this.Qd.W().handleScroll.vertTouchDrag,rv:()=>this.Ip===null&&!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.Cp!==null&&this.Cp.S(),this.Tp!==null&&this.Tp.S(),this.Pp=null,this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Ea(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Ea(this.Gv.canvasElement),this.Gv.dispose(),this.Np!==null&&this.Np.W_().p(this),this.hp.S()}fp(){return Se(this.Np)}qp(e){var n,r;this.Np!==null&&this.Np.W_().p(this),this.Np=e,this.Np!==null&&this.Np.W_().l(Vw.prototype.Fp.bind(this),this,!0),this.Up(),this.Qd.Yp().indexOf(this)===this.Qd.Yp().length-1?(this.Pp=(n=this.Pp)!==null&&n!==void 0?n:new zW(this.Wp,this.Qd),this.Pp.bt()):((r=this.Pp)===null||r===void 0||r.if(),this.Pp=null)}$v(){return this.Qd}lp(){return this.$p}Up(){if(this.Np!==null&&(this.Zp(),this.$i().wt().length!==0)){if(this.Cp!==null){const e=this.Np.R_();this.Cp.Gi(Se(e))}if(this.Tp!==null){const e=this.Np.D_();this.Tp.Gi(Se(e))}}}Xp(){this.Cp!==null&&this.Cp.bt(),this.Tp!==null&&this.Tp.bt()}M_(){return this.Np!==null?this.Np.M_():0}x_(e){this.Np&&this.Np.x_(e)}Qf(e){if(!this.Np)return;this.Kp();const n=e.localX,r=e.localY;this.Gp(n,r,e)}bv(e){this.Kp(),this.Jp(),this.Gp(e.localX,e.localY,e)}tv(e){var n;if(!this.Np)return;this.Kp();const r=e.localX,s=e.localY;this.Gp(r,s,e);const i=this.wr(r,s);this.Qd.Qp((n=i==null?void 0:i.Lv)!==null&&n!==void 0?n:null),this.$i().jc(i&&{Hc:i.Hc,Iv:i.Iv})}dv(e){this.Np!==null&&(this.Kp(),this.tm(e))}qf(e){this.Np!==null&&this.im(this.Op,e)}jf(e){this.qf(e)}av(e){this.Kp(),this.nm(e),this.Gp(e.localX,e.localY,e)}cv(e){this.Np!==null&&(this.Kp(),this.Ap=!1,this.sm(e))}uv(e){this.Np!==null&&this.tm(e)}Rv(e){if(this.Ap=!0,this.Ip===null){const n={x:e.localX,y:e.localY};this.rm(n,n,e)}}Pv(e){this.Np!==null&&(this.Kp(),this.Np.$t().jc(null),this.hm())}lm(){return this.Vp}am(){return this.Op}xv(){this.Bp=1,this.$i().Un()}Sv(e,n){if(!this.Qd.W().handleScale.pinch)return;const r=5*(n-this.Bp);this.Bp=n,this.$i().Qc(e.nt,r)}pv(e){this.Ap=!1,this.zp=this.Ip!==null,this.Jp();const n=this.$i().Zc();this.Ip!==null&&n.yt()&&(this.Lp={x:n.Yt(),y:n.Zt()},this.Ip={x:e.localX,y:e.localY})}hv(e){if(this.Np===null)return;const n=e.localX,r=e.localY;if(this.Ip===null)this.nm(e);else{this.zp=!1;const s=Se(this.Lp),i=s.x+(n-this.Ip.x),a=s.y+(r-this.Ip.y);this.Gp(i,a,e)}}_v(e){this.$v().W().trackingMode.exitMode===0&&(this.zp=!0),this.om(),this.sm(e)}wr(e,n){const r=this.Np;return r===null?null:function(s,i,a){const l=s.Uo(),c=function(u,d,h){var f,m;let _,S;for(const x of u){const b=(m=(f=x.va)===null||f===void 0?void 0:f.call(x,d,h))!==null&&m!==void 0?m:[];for(const v of b)j=v.zOrder,(!(y=_==null?void 0:_.zOrder)||j==="top"&&y!=="top"||j==="normal"&&y==="bottom")&&(_=v,S=x)}var j,y;return _&&S?{zv:_,Hc:S}:null}(l,i,a);if((c==null?void 0:c.zv.zOrder)==="top")return xh(c);for(const u of l){if(c&&c.Hc===u&&c.zv.zOrder!=="bottom"&&!c.zv.isBackground)return xh(c);const d=WW(u.Pn(s),i,a);if(d!==null)return{Hc:u,Bv:d.Bv,Iv:d.Iv};if(c&&c.Hc===u&&c.zv.zOrder!=="bottom"&&c.zv.isBackground)return xh(c)}return c!=null&&c.zv?xh(c):null}(r,e,n)}_m(e,n){Se(n==="left"?this.Cp:this.Tp).cp(xt({width:e,height:this.Ev.height}))}um(){return this.Ev}cp(e){aa(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Wp.style.width=e.width+"px",this.Wp.style.height=e.height+"px")}dm(){const e=Se(this.Np);e.P_(e.R_()),e.P_(e.D_());for(const n of e.Ba())if(e.vr(n)){const r=n.Dt();r!==null&&e.P_(r),n.Vn()}}xp(){return this.Gv.bitmapSize}Sp(e,n,r){const s=this.xp();s.width>0&&s.height>0&&e.drawImage(this.Gv.canvasElement,n,r)}vp(e){if(e===0||this.Np===null)return;if(e>1&&this.dm(),this.Cp!==null&&this.Cp.vp(e),this.Tp!==null&&this.Tp.vp(e),e!==1){this.Gv.applySuggestedBitmapSize();const r=wa(this.Gv);r!==null&&(r.useBitmapCoordinateSpace(s=>{this.mp(s)}),this.Np&&(this.fm(r,XW),this.vm(r),this.pm(r),this.fm(r,wh),this.fm(r,KW)))}this.Jv.applySuggestedBitmapSize();const n=wa(this.Jv);n!==null&&(n.useBitmapCoordinateSpace(({context:r,bitmapSize:s})=>{r.clearRect(0,0,s.width,s.height)}),this.bm(n),this.fm(n,qW))}wm(){return this.Cp}gm(){return this.Tp}bp(e,n){this.fm(e,n)}Fp(){this.Np!==null&&this.Np.W_().p(this),this.Np=null}tm(e){this.im(this.Vp,e)}im(e,n){const r=n.localX,s=n.localY;e.M()&&e.m(this.$i().St().Nu(r),{x:r,y:s},n)}mp({context:e,bitmapSize:n}){const{width:r,height:s}=n,i=this.$i(),a=i.q(),l=i.bd();a===l?Bm(e,0,0,r,s,l):fj(e,0,0,r,s,a,l)}vm(e){const n=Se(this.Np).j_().qh().gt();n!==null&&n.X(e,!1)}pm(e){const n=this.$i().Yc();this.Mm(e,wh,jv,n),this.Mm(e,wh,Kh,n)}bm(e){this.Mm(e,wh,Kh,this.$i().Zc())}fm(e,n){const r=Se(this.Np).Uo();for(const s of r)this.Mm(e,n,jv,s);for(const s of r)this.Mm(e,n,Kh,s)}Mm(e,n,r,s){const i=Se(this.Np),a=i.$t().Wc(),l=a!==null&&a.Hc===s,c=a!==null&&l&&a.Iv!==void 0?a.Iv.Mr:void 0;kv(n,u=>r(u,e,l,c),s,i)}Zp(){if(this.Np===null)return;const e=this.Qd,n=this.Np.R_().W().visible,r=this.Np.D_().W().visible;n||this.Cp===null||(this.jp.removeChild(this.Cp.lp()),this.Cp.S(),this.Cp=null),r||this.Tp===null||(this.Hp.removeChild(this.Tp.lp()),this.Tp.S(),this.Tp=null);const s=e.$t().ud();n&&this.Cp===null&&(this.Cp=new eS(this,e.W(),s,"left"),this.jp.appendChild(this.Cp.lp())),r&&this.Tp===null&&(this.Tp=new eS(this,e.W(),s,"right"),this.Hp.appendChild(this.Tp.lp()))}xm(e){return e.Dv&&this.Ap||this.Ip!==null}Sm(e){return Math.max(0,Math.min(e,this.Ev.width-1))}km(e){return Math.max(0,Math.min(e,this.Ev.height-1))}Gp(e,n,r){this.$i().ld(this.Sm(e),this.km(n),r,Se(this.Np))}hm(){this.$i().od()}om(){this.zp&&(this.Ip=null,this.hm())}rm(e,n,r){this.Ip=e,this.zp=!1,this.Gp(n.x,n.y,r);const s=this.$i().Zc();this.Lp={x:s.Yt(),y:s.Zt()}}$i(){return this.Qd.$t()}sm(e){if(!this.Dp)return;const n=this.$i(),r=this.fp();if(n.z_(r,r.vn()),this.Rp=null,this.Dp=!1,n.ed(),this.Ep!==null){const s=performance.now(),i=n.St();this.Ep.Vr(i.Hu(),s),this.Ep.Qu(s)||n.Zn(this.Ep)}}Kp(){this.Ip=null}Jp(){if(this.Np){if(this.$i().Un(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)Se(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Np.vn().Ni()&&this.$i().St().Ni()}}nm(e){if(this.Np===null)return;const n=this.$i(),r=n.St();if(r.Ni())return;const s=this.Qd.W(),i=s.handleScroll,a=s.kineticScroll;if((!i.pressedMouseMove||e.Dv)&&(!i.horzTouchDrag&&!i.vertTouchDrag||!e.Dv))return;const l=this.Np.vn(),c=performance.now();if(this.Rp!==null||this.xm(e)||(this.Rp={x:e.clientX,y:e.clientY,Od:c,ym:e.localX,Cm:e.localY}),this.Rp!==null&&!this.Dp&&(this.Rp.x!==e.clientX||this.Rp.y!==e.clientY)){if(e.Dv&&a.touch||!e.Dv&&a.mouse){const u=r.le();this.Ep=new VW(.2/u,7/u,.997,15/u),this.Ep.Yd(r.Hu(),this.Rp.Od)}else this.Ep=null;l.Ni()||n.A_(this.Np,l,e.localY),n.nd(e.localX),this.Dp=!0}this.Dp&&(l.Ni()||n.I_(this.Np,l,e.localY),n.sd(e.localX),this.Ep!==null&&this.Ep.Yd(r.Hu(),c))}}class tS{constructor(e,n,r,s,i){this.ft=!0,this.Ev=xt({width:0,height:0}),this.Hv=()=>this.vp(3),this.qv=e==="left",this.Oc=r.ud,this.cn=n,this.Tm=s,this.Pm=i,this.Kv=document.createElement("div"),this.Kv.style.width="25px",this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Gv=_a(this.Kv,xt({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv)}S(){this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Ea(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Kv}um(){return this.Ev}cp(e){aa(this.Ev,e)||(this.Ev=e,this.Gv.resizeCanvasElement(e),this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.ft=!0)}vp(e){if(e<3&&!this.ft||this.Ev.width===0||this.Ev.height===0)return;this.ft=!1,this.Gv.applySuggestedBitmapSize();const n=wa(this.Gv);n!==null&&n.useBitmapCoordinateSpace(r=>{this.mp(r),this.Ie(r)})}xp(){return this.Gv.bitmapSize}Sp(e,n,r){const s=this.xp();s.width>0&&s.height>0&&e.drawImage(this.Gv.canvasElement,n,r)}Ie({context:e,bitmapSize:n,horizontalPixelRatio:r,verticalPixelRatio:s}){if(!this.Tm())return;e.fillStyle=this.cn.timeScale.borderColor;const i=Math.floor(this.Oc.W().C*r),a=Math.floor(this.Oc.W().C*s),l=this.qv?n.width-i:0;e.fillRect(l,0,i,a)}mp({context:e,bitmapSize:n}){Bm(e,0,0,n.width,n.height,this.Pm())}}function zw(t){return e=>{var n,r;return(r=(n=e.fa)===null||n===void 0?void 0:n.call(e,t))!==null&&r!==void 0?r:[]}}const GW=zw("normal"),YW=zw("top"),JW=zw("bottom");class QW{constructor(e,n){this.Rm=null,this.Dm=null,this.k=null,this.Vm=!1,this.Ev=xt({width:0,height:0}),this.Om=new Pt,this.Fv=new $u(5),this.jv=!1,this.Hv=()=>{this.jv||this.Qd.$t().Uh()},this.Uv=()=>{this.jv||this.Qd.$t().Uh()},this.Qd=e,this.q_=n,this.cn=e.W().layout,this.Xd=document.createElement("tr"),this.Bm=document.createElement("td"),this.Bm.style.padding="0",this.Am=document.createElement("td"),this.Am.style.padding="0",this.Kv=document.createElement("td"),this.Kv.style.height="25px",this.Kv.style.padding="0",this.Im=document.createElement("div"),this.Im.style.width="100%",this.Im.style.height="100%",this.Im.style.position="relative",this.Im.style.overflow="hidden",this.Kv.appendChild(this.Im),this.Gv=_a(this.Im,xt({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const r=this.Gv.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Jv=_a(this.Im,xt({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const s=this.Jv.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.Xd.appendChild(this.Bm),this.Xd.appendChild(this.Kv),this.Xd.appendChild(this.Am),this.zm(),this.Qd.$t().g_().l(this.zm.bind(this),this),this.hp=new $w(this.Jv.canvasElement,this,{ev:()=>!0,rv:()=>!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.hp.S(),this.Rm!==null&&this.Rm.S(),this.Dm!==null&&this.Dm.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Ea(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Ea(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Xd}Lm(){return this.Rm}Em(){return this.Dm}bv(e){if(this.Vm)return;this.Vm=!0;const n=this.Qd.$t();!n.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&n.Jc(e.localX)}pv(e){this.bv(e)}wv(){const e=this.Qd.$t();!e.St().Ni()&&this.Vm&&(this.Vm=!1,this.Qd.W().handleScale.axisPressedMouseMove.time&&e.hd())}av(e){const n=this.Qd.$t();!n.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&n.rd(e.localX)}hv(e){this.av(e)}cv(){this.Vm=!1;const e=this.Qd.$t();e.St().Ni()&&!this.Qd.W().handleScale.axisPressedMouseMove.time||e.hd()}_v(){this.cv()}qf(){this.Qd.W().handleScale.axisDoubleClickReset.time&&this.Qd.$t().Kn()}jf(){this.qf()}Qf(){this.Qd.$t().W().handleScale.axisPressedMouseMove.time&&this.kp(1)}Pv(){this.kp(0)}um(){return this.Ev}Nm(){return this.Om}Fm(e,n,r){aa(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.Om.m(e)),this.Rm!==null&&this.Rm.cp(xt({width:n,height:e.height})),this.Dm!==null&&this.Dm.cp(xt({width:r,height:e.height}))}Wm(){const e=this.jm();return Math.ceil(e.C+e.T+e.P+e.L+e.B+e.Hm)}bt(){this.Qd.$t().St().Ha()}xp(){return this.Gv.bitmapSize}Sp(e,n,r){const s=this.xp();s.width>0&&s.height>0&&e.drawImage(this.Gv.canvasElement,n,r)}vp(e){if(e===0)return;if(e!==1){this.Gv.applySuggestedBitmapSize();const r=wa(this.Gv);r!==null&&(r.useBitmapCoordinateSpace(s=>{this.mp(s),this.Ie(s),this.$m(r,JW)}),this.wp(r),this.$m(r,GW)),this.Rm!==null&&this.Rm.vp(e),this.Dm!==null&&this.Dm.vp(e)}this.Jv.applySuggestedBitmapSize();const n=wa(this.Jv);n!==null&&(n.useBitmapCoordinateSpace(({context:r,bitmapSize:s})=>{r.clearRect(0,0,s.width,s.height)}),this.Um([...this.Qd.$t().wt(),this.Qd.$t().Zc()],n),this.$m(n,YW))}$m(e,n){const r=this.Qd.$t().wt();for(const s of r)kv(n,i=>jv(i,e,!1,void 0),s,void 0);for(const s of r)kv(n,i=>Kh(i,e,!1,void 0),s,void 0)}mp({context:e,bitmapSize:n}){Bm(e,0,0,n.width,n.height,this.Qd.$t().bd())}Ie({context:e,bitmapSize:n,verticalPixelRatio:r}){if(this.Qd.W().timeScale.borderVisible){e.fillStyle=this.qm();const s=Math.max(1,Math.floor(this.jm().C*r));e.fillRect(0,0,n.width,s)}}wp(e){const n=this.Qd.$t().St(),r=n.Ha();if(!r||r.length===0)return;const s=this.q_.maxTickMarkWeight(r),i=this.jm(),a=n.W();a.borderVisible&&a.ticksVisible&&e.useBitmapCoordinateSpace(({context:l,horizontalPixelRatio:c,verticalPixelRatio:u})=>{l.strokeStyle=this.qm(),l.fillStyle=this.qm();const d=Math.max(1,Math.floor(c)),h=Math.floor(.5*c);l.beginPath();const f=Math.round(i.T*u);for(let m=r.length;m--;){const _=Math.round(r[m].coord*c);l.rect(_-h,0,d,f)}l.fill()}),e.useMediaCoordinateSpace(({context:l})=>{const c=i.C+i.T+i.L+i.P/2;l.textAlign="center",l.textBaseline="middle",l.fillStyle=this.$(),l.font=this._p();for(const u of r)if(u.weight<s){const d=u.needAlignCoordinate?this.Ym(l,u.coord,u.label):u.coord;l.fillText(u.label,d,c)}this.Qd.W().timeScale.allowBoldLabels&&(l.font=this.Zm());for(const u of r)if(u.weight>=s){const d=u.needAlignCoordinate?this.Ym(l,u.coord,u.label):u.coord;l.fillText(u.label,d,c)}})}Ym(e,n,r){const s=this.Fv.xi(e,r),i=s/2,a=Math.floor(n-i)+.5;return a<0?n+=Math.abs(0-a):a+s>this.Ev.width&&(n-=Math.abs(this.Ev.width-(a+s))),n}Um(e,n){const r=this.jm();for(const s of e)for(const i of s.Qi())i.gt().X(n,r)}qm(){return this.Qd.W().timeScale.borderColor}$(){return this.cn.textColor}j(){return this.cn.fontSize}_p(){return Hl(this.j(),this.cn.fontFamily)}Zm(){return Hl(this.j(),this.cn.fontFamily,"bold")}jm(){this.k===null&&(this.k={C:1,N:NaN,L:NaN,B:NaN,ji:NaN,T:5,P:NaN,R:"",Wi:new $u,Hm:0});const e=this.k,n=this._p();if(e.R!==n){const r=this.j();e.P=r,e.R=n,e.L=3*r/12,e.B=3*r/12,e.ji=9*r/12,e.N=0,e.Hm=4*r/12,e.Wi.nr()}return this.k}kp(e){this.Kv.style.cursor=e===1?"ew-resize":"default"}zm(){const e=this.Qd.$t(),n=e.W();n.leftPriceScale.visible||this.Rm===null||(this.Bm.removeChild(this.Rm.lp()),this.Rm.S(),this.Rm=null),n.rightPriceScale.visible||this.Dm===null||(this.Am.removeChild(this.Dm.lp()),this.Dm.S(),this.Dm=null);const r={ud:this.Qd.$t().ud()},s=()=>n.leftPriceScale.borderVisible&&e.St().W().borderVisible,i=()=>e.bd();n.leftPriceScale.visible&&this.Rm===null&&(this.Rm=new tS("left",n,r,s,i),this.Bm.appendChild(this.Rm.lp())),n.rightPriceScale.visible&&this.Dm===null&&(this.Dm=new tS("right",n,r,s,i),this.Am.appendChild(this.Dm.lp()))}}const ZW=!!Wl&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!Wl&&(!((Mg=navigator==null?void 0:navigator.userAgentData)===null||Mg===void 0)&&Mg.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);var Mg;class eX{constructor(e,n,r){var s;this.Xm=[],this.Km=0,this.ho=0,this.__=0,this.Gm=0,this.Jm=0,this.Qm=null,this.tb=!1,this.Vp=new Pt,this.Op=new Pt,this.Rc=new Pt,this.ib=null,this.nb=null,this.Jd=e,this.cn=n,this.q_=r,this.Xd=document.createElement("div"),this.Xd.classList.add("tv-lightweight-charts"),this.Xd.style.overflow="hidden",this.Xd.style.direction="ltr",this.Xd.style.width="100%",this.Xd.style.height="100%",(s=this.Xd).style.userSelect="none",s.style.webkitUserSelect="none",s.style.msUserSelect="none",s.style.MozUserSelect="none",s.style.webkitTapHighlightColor="transparent",this.sb=document.createElement("table"),this.sb.setAttribute("cellspacing","0"),this.Xd.appendChild(this.sb),this.eb=this.rb.bind(this),Dg(this.cn)&&this.hb(!0),this.$i=new DW(this.Vc.bind(this),this.cn,r),this.$t().Xc().l(this.lb.bind(this),this),this.ab=new QW(this,this.q_),this.sb.appendChild(this.ab.lp());const i=n.autoSize&&this.ob();let a=this.cn.width,l=this.cn.height;if(i||a===0||l===0){const c=e.getBoundingClientRect();a=a||c.width,l=l||c.height}this._b(a,l),this.ub(),e.appendChild(this.Xd),this.cb(),this.$i.St().ec().l(this.$i.Kl.bind(this.$i),this),this.$i.g_().l(this.$i.Kl.bind(this.$i),this)}$t(){return this.$i}W(){return this.cn}Yp(){return this.Xm}fb(){return this.ab}S(){this.hb(!1),this.Km!==0&&window.cancelAnimationFrame(this.Km),this.$i.Xc().p(this),this.$i.St().ec().p(this),this.$i.g_().p(this),this.$i.S();for(const e of this.Xm)this.sb.removeChild(e.lp()),e.lm().p(this),e.am().p(this),e.S();this.Xm=[],Se(this.ab).S(),this.Xd.parentElement!==null&&this.Xd.parentElement.removeChild(this.Xd),this.Rc.S(),this.Vp.S(),this.Op.S(),this.pb()}_b(e,n,r=!1){if(this.ho===n&&this.__===e)return;const s=function(l){const c=Math.floor(l.width),u=Math.floor(l.height);return xt({width:c-c%2,height:u-u%2})}(xt({width:e,height:n}));this.ho=s.height,this.__=s.width;const i=this.ho+"px",a=this.__+"px";Se(this.Xd).style.height=i,Se(this.Xd).style.width=a,this.sb.style.height=i,this.sb.style.width=a,r?this.mb(Qt.es(),performance.now()):this.$i.Kl()}vp(e){e===void 0&&(e=Qt.es());for(let n=0;n<this.Xm.length;n++)this.Xm[n].vp(e.Hn(n).Fn);this.cn.timeScale.visible&&this.ab.vp(e.jn())}$h(e){const n=Dg(this.cn);this.$i.$h(e);const r=Dg(this.cn);r!==n&&this.hb(r),this.cb(),this.bb(e)}lm(){return this.Vp}am(){return this.Op}Xc(){return this.Rc}wb(){this.Qm!==null&&(this.mb(this.Qm,performance.now()),this.Qm=null);const e=this.gb(null),n=document.createElement("canvas");n.width=e.width,n.height=e.height;const r=Se(n.getContext("2d"));return this.gb(r),n}Mb(e){return e==="left"&&!this.xb()||e==="right"&&!this.Sb()||this.Xm.length===0?0:Se(e==="left"?this.Xm[0].wm():this.Xm[0].gm()).dp()}kb(){return this.cn.autoSize&&this.ib!==null}yb(){return this.Xd}Qp(e){this.nb=e,this.nb?this.yb().style.setProperty("cursor",e):this.yb().style.removeProperty("cursor")}Cb(){return this.nb}Tb(){return vn(this.Xm[0]).um()}bb(e){(e.autoSize!==void 0||!this.ib||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.ib&&this.ob(),e.autoSize===!1&&this.ib!==null&&this.pb(),e.autoSize||e.width===void 0&&e.height===void 0||this._b(e.width||this.__,e.height||this.ho))}gb(e){let n=0,r=0;const s=this.Xm[0],i=(l,c)=>{let u=0;for(let d=0;d<this.Xm.length;d++){const h=this.Xm[d],f=Se(l==="left"?h.wm():h.gm()),m=f.xp();e!==null&&f.Sp(e,c,u),u+=m.height}};this.xb()&&(i("left",0),n+=Se(s.wm()).xp().width);for(let l=0;l<this.Xm.length;l++){const c=this.Xm[l],u=c.xp();e!==null&&c.Sp(e,n,r),r+=u.height}n+=s.xp().width,this.Sb()&&(i("right",n),n+=Se(s.gm()).xp().width);const a=(l,c,u)=>{Se(l==="left"?this.ab.Lm():this.ab.Em()).Sp(Se(e),c,u)};if(this.cn.timeScale.visible){const l=this.ab.xp();if(e!==null){let c=0;this.xb()&&(a("left",c,r),c=Se(s.wm()).xp().width),this.ab.Sp(e,c,r),c+=l.width,this.Sb()&&a("right",c,r)}r+=l.height}return xt({width:n,height:r})}Pb(){let e=0,n=0,r=0;for(const _ of this.Xm)this.xb()&&(n=Math.max(n,Se(_.wm()).op(),this.cn.leftPriceScale.minimumWidth)),this.Sb()&&(r=Math.max(r,Se(_.gm()).op(),this.cn.rightPriceScale.minimumWidth)),e+=_.M_();n=Cv(n),r=Cv(r);const s=this.__,i=this.ho,a=Math.max(s-n-r,0),l=this.cn.timeScale.visible;let c=l?Math.max(this.ab.Wm(),this.cn.timeScale.minimumHeight):0;var u;c=(u=c)+u%2;const d=0+c,h=i<d?0:i-d,f=h/e;let m=0;for(let _=0;_<this.Xm.length;++_){const S=this.Xm[_];S.qp(this.$i.qc()[_]);let j=0,y=0;y=_===this.Xm.length-1?h-m:Math.round(S.M_()*f),j=Math.max(y,2),m+=j,S.cp(xt({width:a,height:j})),this.xb()&&S._m(n,"left"),this.Sb()&&S._m(r,"right"),S.fp()&&this.$i.Kc(S.fp(),j)}this.ab.Fm(xt({width:l?a:0,height:c}),l?n:0,l?r:0),this.$i.S_(a),this.Gm!==n&&(this.Gm=n),this.Jm!==r&&(this.Jm=r)}hb(e){e?this.Xd.addEventListener("wheel",this.eb,{passive:!1}):this.Xd.removeEventListener("wheel",this.eb)}Rb(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return ZW?1/window.devicePixelRatio:1}rb(e){if(!(e.deltaX!==0&&this.cn.handleScroll.mouseWheel||e.deltaY!==0&&this.cn.handleScale.mouseWheel))return;const n=this.Rb(e),r=n*e.deltaX/100,s=-n*e.deltaY/100;if(e.cancelable&&e.preventDefault(),s!==0&&this.cn.handleScale.mouseWheel){const i=Math.sign(s)*Math.min(1,Math.abs(s)),a=e.clientX-this.Xd.getBoundingClientRect().left;this.$t().Qc(a,i)}r!==0&&this.cn.handleScroll.mouseWheel&&this.$t().td(-80*r)}mb(e,n){var r;const s=e.jn();s===3&&this.Db(),s!==3&&s!==2||(this.Vb(e),this.Ob(e,n),this.ab.bt(),this.Xm.forEach(i=>{i.Xp()}),((r=this.Qm)===null||r===void 0?void 0:r.jn())===3&&(this.Qm.ts(e),this.Db(),this.Vb(this.Qm),this.Ob(this.Qm,n),e=this.Qm,this.Qm=null)),this.vp(e)}Ob(e,n){for(const r of e.Qn())this.ns(r,n)}Vb(e){const n=this.$i.qc();for(let r=0;r<n.length;r++)e.Hn(r).Wn&&n[r].N_()}ns(e,n){const r=this.$i.St();switch(e.qn){case 0:r.hc();break;case 1:r.lc(e.Vt);break;case 2:r.Gn(e.Vt);break;case 3:r.Jn(e.Vt);break;case 4:r.qu();break;case 5:e.Vt.Qu(n)||r.Jn(e.Vt.tc(n))}}Vc(e){this.Qm!==null?this.Qm.ts(e):this.Qm=e,this.tb||(this.tb=!0,this.Km=window.requestAnimationFrame(n=>{if(this.tb=!1,this.Km=0,this.Qm!==null){const r=this.Qm;this.Qm=null,this.mb(r,n);for(const s of r.Qn())if(s.qn===5&&!s.Vt.Qu(n)){this.$t().Zn(s.Vt);break}}}))}Db(){this.ub()}ub(){const e=this.$i.qc(),n=e.length,r=this.Xm.length;for(let s=n;s<r;s++){const i=vn(this.Xm.pop());this.sb.removeChild(i.lp()),i.lm().p(this),i.am().p(this),i.S()}for(let s=r;s<n;s++){const i=new Vw(this,e[s]);i.lm().l(this.Bb.bind(this),this),i.am().l(this.Ab.bind(this),this),this.Xm.push(i),this.sb.insertBefore(i.lp(),this.ab.lp())}for(let s=0;s<n;s++){const i=e[s],a=this.Xm[s];a.fp()!==i?a.qp(i):a.Up()}this.cb(),this.Pb()}Ib(e,n,r){var s;const i=new Map;e!==null&&this.$i.wt().forEach(d=>{const h=d.In().ll(e);h!==null&&i.set(d,h)});let a;if(e!==null){const d=(s=this.$i.St().Ui(e))===null||s===void 0?void 0:s.originalTime;d!==void 0&&(a=d)}const l=this.$t().Wc(),c=l!==null&&l.Hc instanceof Fw?l.Hc:void 0,u=l!==null&&l.Iv!==void 0?l.Iv.gr:void 0;return{zb:a,ee:e??void 0,Lb:n??void 0,Eb:c,Nb:i,Fb:u,Wb:r??void 0}}Bb(e,n,r){this.Vp.m(()=>this.Ib(e,n,r))}Ab(e,n,r){this.Op.m(()=>this.Ib(e,n,r))}lb(e,n,r){this.Rc.m(()=>this.Ib(e,n,r))}cb(){const e=this.cn.timeScale.visible?"":"none";this.ab.lp().style.display=e}xb(){return this.Xm[0].fp().R_().W().visible}Sb(){return this.Xm[0].fp().D_().W().visible}ob(){return"ResizeObserver"in window&&(this.ib=new ResizeObserver(e=>{const n=e.find(r=>r.target===this.Jd);n&&this._b(n.contentRect.width,n.contentRect.height)}),this.ib.observe(this.Jd,{box:"border-box"}),!0)}pb(){this.ib!==null&&this.ib.disconnect(),this.ib=null}}function Dg(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function tX(t){return function(e){return e.open!==void 0}(t)||function(e){return e.value!==void 0}(t)}function Ij(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]])}return n}function nS(t,e,n,r){const s=n.value,i={ee:e,ot:t,Vt:[s,s,s,s],zb:r};return n.color!==void 0&&(i.V=n.color),i}function nX(t,e,n,r){const s=n.value,i={ee:e,ot:t,Vt:[s,s,s,s],zb:r};return n.lineColor!==void 0&&(i.lt=n.lineColor),n.topColor!==void 0&&(i.Ps=n.topColor),n.bottomColor!==void 0&&(i.Rs=n.bottomColor),i}function rX(t,e,n,r){const s=n.value,i={ee:e,ot:t,Vt:[s,s,s,s],zb:r};return n.topLineColor!==void 0&&(i.Re=n.topLineColor),n.bottomLineColor!==void 0&&(i.De=n.bottomLineColor),n.topFillColor1!==void 0&&(i.ke=n.topFillColor1),n.topFillColor2!==void 0&&(i.ye=n.topFillColor2),n.bottomFillColor1!==void 0&&(i.Ce=n.bottomFillColor1),n.bottomFillColor2!==void 0&&(i.Te=n.bottomFillColor2),i}function sX(t,e,n,r){const s={ee:e,ot:t,Vt:[n.open,n.high,n.low,n.close],zb:r};return n.color!==void 0&&(s.V=n.color),s}function iX(t,e,n,r){const s={ee:e,ot:t,Vt:[n.open,n.high,n.low,n.close],zb:r};return n.color!==void 0&&(s.V=n.color),n.borderColor!==void 0&&(s.Ot=n.borderColor),n.wickColor!==void 0&&(s.Xh=n.wickColor),s}function oX(t,e,n,r,s){const i=vn(s)(n),a=Math.max(...i),l=Math.min(...i),c=i[i.length-1],u=[c,a,l,c],d=n,{time:h,color:f}=d;return{ee:e,ot:t,Vt:u,zb:r,$e:Ij(d,["time","color"]),V:f}}function bh(t){return t.Vt!==void 0}function rS(t,e){return e.customValues!==void 0&&(t.jb=e.customValues),t}function Bo(t){return(e,n,r,s,i,a)=>function(l,c){return c?c(l):(u=l).open===void 0&&u.value===void 0;var u}(r,a)?rS({ot:e,ee:n,zb:s},r):rS(t(e,n,r,s,i),r)}function sS(t){return{Candlestick:Bo(iX),Bar:Bo(sX),Area:Bo(nX),Baseline:Bo(rX),Histogram:Bo(nS),Line:Bo(nS),Custom:Bo(oX)}[t]}function iS(t){return{ee:0,Hb:new Map,la:t}}function oS(t,e){if(t!==void 0&&t.length!==0)return{$b:e.key(t[0].ot),Ub:e.key(t[t.length-1].ot)}}function aS(t){let e;return t.forEach(n=>{e===void 0&&(e=n.zb)}),vn(e)}class aX{constructor(e){this.qb=new Map,this.Yb=new Map,this.Zb=new Map,this.Xb=[],this.q_=e}S(){this.qb.clear(),this.Yb.clear(),this.Zb.clear(),this.Xb=[]}Kb(e,n){let r=this.qb.size!==0,s=!1;const i=this.Yb.get(e);if(i!==void 0)if(this.Yb.size===1)r=!1,s=!0,this.qb.clear();else for(const c of this.Xb)c.pointData.Hb.delete(e)&&(s=!0);let a=[];if(n.length!==0){const c=n.map(m=>m.time),u=this.q_.createConverterToInternalObj(n),d=sS(e.Qh()),h=e.Ca(),f=e.Ta();a=n.map((m,_)=>{const S=u(m.time),j=this.q_.key(S);let y=this.qb.get(j);y===void 0&&(y=iS(S),this.qb.set(j,y),s=!0);const x=d(S,y.ee,m,c[_],h,f);return y.Hb.set(e,x),x})}r&&this.Gb(),this.Jb(e,a);let l=-1;if(s){const c=[];this.qb.forEach(u=>{c.push({timeWeight:0,time:u.la,pointData:u,originalTime:aS(u.Hb)})}),c.sort((u,d)=>this.q_.key(u.time)-this.q_.key(d.time)),l=this.Qb(c)}return this.tw(e,l,function(c,u,d){const h=oS(c,d),f=oS(u,d);if(h!==void 0&&f!==void 0)return{ta:h.Ub>=f.Ub&&h.$b>=f.$b}}(this.Yb.get(e),i,this.q_))}vd(e){return this.Kb(e,[])}iw(e,n){const r=n;(function(S){S.zb===void 0&&(S.zb=S.time)})(r),this.q_.preprocessData(n);const s=this.q_.createConverterToInternalObj([n])(n.time),i=this.Zb.get(e);if(i!==void 0&&this.q_.key(s)<this.q_.key(i))throw new Error(`Cannot update oldest data, last time=${i}, new time=${s}`);let a=this.qb.get(this.q_.key(s));const l=a===void 0;a===void 0&&(a=iS(s),this.qb.set(this.q_.key(s),a));const c=sS(e.Qh()),u=e.Ca(),d=e.Ta(),h=c(s,a.ee,n,r.zb,u,d);a.Hb.set(e,h),this.nw(e,h);const f={ta:bh(h)};if(!l)return this.tw(e,-1,f);const m={timeWeight:0,time:a.la,pointData:a,originalTime:aS(a.Hb)},_=vd(this.Xb,this.q_.key(m.time),(S,j)=>this.q_.key(S.time)<j);this.Xb.splice(_,0,m);for(let S=_;S<this.Xb.length;++S)Bg(this.Xb[S].pointData,S);return this.q_.fillWeightsForPoints(this.Xb,_),this.tw(e,_,f)}nw(e,n){let r=this.Yb.get(e);r===void 0&&(r=[],this.Yb.set(e,r));const s=r.length!==0?r[r.length-1]:null;s===null||this.q_.key(n.ot)>this.q_.key(s.ot)?bh(n)&&r.push(n):bh(n)?r[r.length-1]=n:r.splice(-1,1),this.Zb.set(e,n.ot)}Jb(e,n){n.length!==0?(this.Yb.set(e,n.filter(bh)),this.Zb.set(e,n[n.length-1].ot)):(this.Yb.delete(e),this.Zb.delete(e))}Gb(){for(const e of this.Xb)e.pointData.Hb.size===0&&this.qb.delete(this.q_.key(e.time))}Qb(e){let n=-1;for(let r=0;r<this.Xb.length&&r<e.length;++r){const s=this.Xb[r],i=e[r];if(this.q_.key(s.time)!==this.q_.key(i.time)){n=r;break}i.timeWeight=s.timeWeight,Bg(i.pointData,r)}if(n===-1&&this.Xb.length!==e.length&&(n=Math.min(this.Xb.length,e.length)),n===-1)return-1;for(let r=n;r<e.length;++r)Bg(e[r].pointData,r);return this.q_.fillWeightsForPoints(e,n),this.Xb=e,n}sw(){if(this.Yb.size===0)return null;let e=0;return this.Yb.forEach(n=>{n.length!==0&&(e=Math.max(e,n[n.length-1].ee))}),e}tw(e,n,r){const s={ew:new Map,St:{Eu:this.sw()}};if(n!==-1)this.Yb.forEach((i,a)=>{s.ew.set(a,{$e:i,rw:a===e?r:void 0})}),this.Yb.has(e)||s.ew.set(e,{$e:[],rw:r}),s.St.hw=this.Xb,s.St.lw=n;else{const i=this.Yb.get(e);s.ew.set(e,{$e:i||[],rw:r})}return s}}function Bg(t,e){t.ee=e,t.Hb.forEach(n=>{n.ee=e})}function Hw(t){const e={value:t.Vt[3],time:t.zb};return t.jb!==void 0&&(e.customValues=t.jb),e}function lS(t){const e=Hw(t);return t.V!==void 0&&(e.color=t.V),e}function lX(t){const e=Hw(t);return t.lt!==void 0&&(e.lineColor=t.lt),t.Ps!==void 0&&(e.topColor=t.Ps),t.Rs!==void 0&&(e.bottomColor=t.Rs),e}function cX(t){const e=Hw(t);return t.Re!==void 0&&(e.topLineColor=t.Re),t.De!==void 0&&(e.bottomLineColor=t.De),t.ke!==void 0&&(e.topFillColor1=t.ke),t.ye!==void 0&&(e.topFillColor2=t.ye),t.Ce!==void 0&&(e.bottomFillColor1=t.Ce),t.Te!==void 0&&(e.bottomFillColor2=t.Te),e}function Pj(t){const e={open:t.Vt[0],high:t.Vt[1],low:t.Vt[2],close:t.Vt[3],time:t.zb};return t.jb!==void 0&&(e.customValues=t.jb),e}function uX(t){const e=Pj(t);return t.V!==void 0&&(e.color=t.V),e}function dX(t){const e=Pj(t),{V:n,Ot:r,Xh:s}=t;return n!==void 0&&(e.color=n),r!==void 0&&(e.borderColor=r),s!==void 0&&(e.wickColor=s),e}function Ov(t){return{Area:lX,Line:lS,Baseline:cX,Histogram:lS,Bar:uX,Candlestick:dX,Custom:hX}[t]}function hX(t){const e=t.zb;return Object.assign(Object.assign({},t.$e),{time:e})}const fX={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},pX={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},mX={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Pw,attributionLogo:!0},Fg={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},gX={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},yX={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:Pw,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function cS(){return{width:0,height:0,autoSize:!1,layout:mX,crosshair:fX,grid:pX,overlayPriceScales:Object.assign({},Fg),leftPriceScale:Object.assign(Object.assign({},Fg),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},Fg),{visible:!0}),timeScale:gX,watermark:yX,localization:{locale:Wl?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class vX{constructor(e,n){this.aw=e,this.ow=n}applyOptions(e){this.aw.$t().$c(this.ow,e)}options(){return this.Li().W()}width(){return Um(this.ow)?this.aw.Mb(this.ow):0}Li(){return Se(this.aw.$t().Uc(this.ow)).Dt}}function uS(t,e,n){const r=Ij(t,["time","originalTime"]),s=Object.assign({time:e},r);return n!==void 0&&(s.originalTime=n),s}const xX={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class wX{constructor(e){this.Nh=e}applyOptions(e){this.Nh.$h(e)}options(){return this.Nh.W()}_w(){return this.Nh}}class bX{constructor(e,n,r,s,i){this.uw=new Pt,this.Es=e,this.cw=n,this.dw=r,this.q_=i,this.fw=s}S(){this.uw.S()}priceFormatter(){return this.Es.ba()}priceToCoordinate(e){const n=this.Es.Ct();return n===null?null:this.Es.Dt().Rt(e,n.Vt)}coordinateToPrice(e){const n=this.Es.Ct();return n===null?null:this.Es.Dt().pn(e,n.Vt)}barsInLogicalRange(e){if(e===null)return null;const n=new jl(new du(e.from,e.to)).lu(),r=this.Es.In();if(r.Ni())return null;const s=r.ll(n.Os(),1),i=r.ll(n.ui(),-1),a=Se(r.el()),l=Se(r.An());if(s!==null&&i!==null&&s.ee>i.ee)return{barsBefore:e.from-a,barsAfter:l-e.to};const c={barsBefore:s===null||s.ee===a?e.from-a:s.ee-a,barsAfter:i===null||i.ee===l?l-e.to:l-i.ee};return s!==null&&i!==null&&(c.from=s.zb,c.to=i.zb),c}setData(e){this.q_,this.Es.Qh(),this.cw.pw(this.Es,e),this.mw("full")}update(e){this.Es.Qh(),this.cw.bw(this.Es,e),this.mw("update")}dataByIndex(e,n){const r=this.Es.In().ll(e,n);return r===null?null:Ov(this.seriesType())(r)}data(){const e=Ov(this.seriesType());return this.Es.In().ne().map(n=>e(n))}subscribeDataChanged(e){this.uw.l(e)}unsubscribeDataChanged(e){this.uw.v(e)}setMarkers(e){this.q_;const n=e.map(r=>uS(r,this.q_.convertHorzItemToInternal(r.time),r.time));this.Es.na(n)}markers(){return this.Es.sa().map(e=>uS(e,e.originalTime,void 0))}applyOptions(e){this.Es.$h(e)}options(){return Us(this.Es.W())}priceScale(){return this.dw.priceScale(this.Es.Dt().Pa())}createPriceLine(e){const n=qr(Us(xX),e),r=this.Es.ea(n);return new wX(r)}removePriceLine(e){this.Es.ra(e._w())}seriesType(){return this.Es.Qh()}attachPrimitive(e){this.Es.ka(e),e.attached&&e.attached({chart:this.fw,series:this,requestUpdate:()=>this.Es.$t().Kl()})}detachPrimitive(e){this.Es.ya(e),e.detached&&e.detached()}mw(e){this.uw.M()&&this.uw.m(e)}}class _X{constructor(e,n,r){this.ww=new Pt,this.mu=new Pt,this.Om=new Pt,this.$i=e,this.yl=e.St(),this.ab=n,this.yl.nc().l(this.gw.bind(this)),this.yl.sc().l(this.Mw.bind(this)),this.ab.Nm().l(this.xw.bind(this)),this.q_=r}S(){this.yl.nc().p(this),this.yl.sc().p(this),this.ab.Nm().p(this),this.ww.S(),this.mu.S(),this.Om.S()}scrollPosition(){return this.yl.Hu()}scrollToPosition(e,n){n?this.yl.Ju(e,1e3):this.$i.Jn(e)}scrollToRealTime(){this.yl.Gu()}getVisibleRange(){const e=this.yl.Vu();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const n={from:this.q_.convertHorzItemToInternal(e.from),to:this.q_.convertHorzItemToInternal(e.to)},r=this.yl.Iu(n);this.$i.pd(r)}getVisibleLogicalRange(){const e=this.yl.Du();return e===null?null:{from:e.Os(),to:e.ui()}}setVisibleLogicalRange(e){co(e.from<=e.to,"The from index cannot be after the to index."),this.$i.pd(e)}resetTimeScale(){this.$i.Kn()}fitContent(){this.$i.hc()}logicalToCoordinate(e){const n=this.$i.St();return n.Ni()?null:n.It(e)}coordinateToLogical(e){return this.yl.Ni()?null:this.yl.Nu(e)}timeToCoordinate(e){const n=this.q_.convertHorzItemToInternal(e),r=this.yl.Va(n,!1);return r===null?null:this.yl.It(r)}coordinateToTime(e){const n=this.$i.St(),r=n.Nu(e),s=n.Ui(r);return s===null?null:s.originalTime}width(){return this.ab.um().width}height(){return this.ab.um().height}subscribeVisibleTimeRangeChange(e){this.ww.l(e)}unsubscribeVisibleTimeRangeChange(e){this.ww.v(e)}subscribeVisibleLogicalRangeChange(e){this.mu.l(e)}unsubscribeVisibleLogicalRangeChange(e){this.mu.v(e)}subscribeSizeChange(e){this.Om.l(e)}unsubscribeSizeChange(e){this.Om.v(e)}applyOptions(e){this.yl.$h(e)}options(){return Object.assign(Object.assign({},Us(this.yl.W())),{barSpacing:this.yl.le()})}gw(){this.ww.M()&&this.ww.m(this.getVisibleRange())}Mw(){this.mu.M()&&this.mu.m(this.getVisibleLogicalRange())}xw(e){this.Om.m(e.width,e.height)}}function EX(t){if(t===void 0||t.type==="custom")return;const e=t;e.minMove!==void 0&&e.precision===void 0&&(e.precision=function(n){if(n>=1)return 0;let r=0;for(;r<8;r++){const s=Math.round(n);if(Math.abs(s-n)<1e-8)return r;n*=10}return r}(e.minMove))}function dS(t){return function(e){if(hh(e.handleScale)){const r=e.handleScale;e.handleScale={axisDoubleClickReset:{time:r,price:r},axisPressedMouseMove:{time:r,price:r},mouseWheel:r,pinch:r}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:r,axisDoubleClickReset:s}=e.handleScale;hh(r)&&(e.handleScale.axisPressedMouseMove={time:r,price:r}),hh(s)&&(e.handleScale.axisDoubleClickReset={time:s,price:s})}const n=e.handleScroll;hh(n)&&(e.handleScroll={horzTouchDrag:n,vertTouchDrag:n,mouseWheel:n,pressedMouseMove:n})}(t),t}class SX{constructor(e,n,r){this.Sw=new Map,this.kw=new Map,this.yw=new Pt,this.Cw=new Pt,this.Tw=new Pt,this.Pw=new aX(n);const s=r===void 0?Us(cS()):qr(Us(cS()),dS(r));this.q_=n,this.aw=new eX(e,s,n),this.aw.lm().l(a=>{this.yw.M()&&this.yw.m(this.Rw(a()))},this),this.aw.am().l(a=>{this.Cw.M()&&this.Cw.m(this.Rw(a()))},this),this.aw.Xc().l(a=>{this.Tw.M()&&this.Tw.m(this.Rw(a()))},this);const i=this.aw.$t();this.Dw=new _X(i,this.aw.fb(),this.q_)}remove(){this.aw.lm().p(this),this.aw.am().p(this),this.aw.Xc().p(this),this.Dw.S(),this.aw.S(),this.Sw.clear(),this.kw.clear(),this.yw.S(),this.Cw.S(),this.Tw.S(),this.Pw.S()}resize(e,n,r){this.autoSizeActive()||this.aw._b(e,n,r)}addCustomSeries(e,n){const r=vl(e),s=Object.assign(Object.assign({},lj),r.defaultOptions());return this.Vw("Custom",s,n,r)}addAreaSeries(e){return this.Vw("Area",aH,e)}addBaselineSeries(e){return this.Vw("Baseline",lH,e)}addBarSeries(e){return this.Vw("Bar",iH,e)}addCandlestickSeries(e={}){return function(n){n.borderColor!==void 0&&(n.borderUpColor=n.borderColor,n.borderDownColor=n.borderColor),n.wickColor!==void 0&&(n.wickUpColor=n.wickColor,n.wickDownColor=n.wickColor)}(e),this.Vw("Candlestick",sH,e)}addHistogramSeries(e){return this.Vw("Histogram",cH,e)}addLineSeries(e){return this.Vw("Line",oH,e)}removeSeries(e){const n=vn(this.Sw.get(e)),r=this.Pw.vd(n);this.aw.$t().vd(n),this.Ow(r),this.Sw.delete(e),this.kw.delete(n)}pw(e,n){this.Ow(this.Pw.Kb(e,n))}bw(e,n){this.Ow(this.Pw.iw(e,n))}subscribeClick(e){this.yw.l(e)}unsubscribeClick(e){this.yw.v(e)}subscribeCrosshairMove(e){this.Tw.l(e)}unsubscribeCrosshairMove(e){this.Tw.v(e)}subscribeDblClick(e){this.Cw.l(e)}unsubscribeDblClick(e){this.Cw.v(e)}priceScale(e){return new vX(this.aw,e)}timeScale(){return this.Dw}applyOptions(e){this.aw.$h(dS(e))}options(){return this.aw.W()}takeScreenshot(){return this.aw.wb()}autoSizeActive(){return this.aw.kb()}chartElement(){return this.aw.yb()}paneSize(){const e=this.aw.Tb();return{height:e.height,width:e.width}}setCrosshairPosition(e,n,r){const s=this.Sw.get(r);if(s===void 0)return;const i=this.aw.$t().dr(s);i!==null&&this.aw.$t().ad(e,n,i)}clearCrosshairPosition(){this.aw.$t().od(!0)}Vw(e,n,r={},s){EX(r.priceFormat);const i=qr(Us(cj),Us(n),r),a=this.aw.$t().dd(e,i,s),l=new bX(a,this,this,this,this.q_);return this.Sw.set(l,a),this.kw.set(a,l),l}Ow(e){const n=this.aw.$t();n._d(e.St.Eu,e.St.hw,e.St.lw),e.ew.forEach((r,s)=>s.J(r.$e,r.rw)),n.Wu()}Bw(e){return vn(this.kw.get(e))}Rw(e){const n=new Map;e.Nb.forEach((s,i)=>{const a=i.Qh(),l=Ov(a)(s);if(a!=="Custom")co(tX(l));else{const c=i.Ta();co(!c||c(l)===!1)}n.set(this.Bw(i),l)});const r=e.Eb!==void 0&&this.kw.has(e.Eb)?this.Bw(e.Eb):void 0;return{time:e.zb,logical:e.ee,point:e.Lb,hoveredSeries:r,hoveredObjectId:e.Fb,seriesData:n,sourceEvent:e.Wb}}}function NX(t,e,n){let r;if(yd(t)){const i=document.getElementById(t);co(i!==null,`Cannot find element in DOM with id=${t}`),r=i}else r=t;const s=new SX(r,e,n);return e.setOptions(s.options()),s}function Ff(t,e){return NX(t,new YE,YE.Id(e))}Object.assign(Object.assign({},cj),lj);const Ug=["https://gateway.pinata.cloud/ipfs/","https://ipfs.io/ipfs/","https://cloudflare-ipfs.com/ipfs/","https://dweb.link/ipfs/"];function xn({token:t,size:e="md",className:n=""}){const[r,s]=z.useState(!1),[i,a]=z.useState(!1),[l,c]=z.useState(0),[u,d]=z.useState(0),h={sm:"w-8 h-8 text-sm",md:"w-12 h-12 text-xl",lg:"w-16 h-16 text-2xl",xl:"w-20 h-20 text-3xl"},f=h[e]||h.md;z.useEffect(()=>{s(!1),a(!1),c(0),d(0)},[t.image_url,t.updated_at,t.id]);const m=S=>{if(!S)return null;if(S.startsWith("ipfs://"))return S.replace("ipfs://","");const j=S.match(/\/ipfs\/([a-zA-Z0-9]+)/);return j?j[1]:S.startsWith("http")?null:S},_=()=>{console.error("Image load error for token:",t.token_name,"Gateway:",l,"Retry:",u),l<Ug.length-1?(console.log("Trying next gateway..."),c(S=>S+1),d(0)):u<2?(console.log("Retrying current gateway..."),d(S=>S+1),c(0)):(console.error("All gateways failed for:",t.token_name),s(!0))};if(t.image_url&&!r){let S=t.image_url;const j=m(t.image_url);j&&(S=`${Ug[l]}${j}`);const y=S;return o.jsxs("div",{className:"relative inline-block",children:[!i&&o.jsx("div",{className:`${f} rounded-full bg-gradient-to-br from-purple-500 to-purple-700 flex items-center justify-center text-white font-bold ${n}`,children:t.token_name[0]}),o.jsx("img",{src:y,alt:t.token_name,className:`${f} rounded-full object-cover border-2 border-purple-500 ${n} ${i?"":"absolute inset-0 opacity-0"}`,onLoad:()=>{console.log("Image loaded successfully:",t.token_name,"Gateway:",Ug[l]),a(!0)},onError:_},`${t.id}-${l}-${u}`)]})}return o.jsx("div",{className:`${f} rounded-full bg-gradient-to-br from-purple-500 to-purple-700 flex items-center justify-center text-white font-bold ${n}`,children:t.token_name[0]})}function Rj({token:t,onClose:e}){const n=z.useRef(null),r=z.useRef(null),s=z.useRef(null),i=z.useRef(null),a=z.useRef(null),l=z.useRef(null),c=z.useRef([]),u=z.useRef(null),[d,h]=z.useState(null),[f,m]=z.useState(!0),[_,S]=z.useState("area"),[j,y]=z.useState("1h"),[x,b]=z.useState(0),[v,A]=z.useState(0);z.useEffect(()=>(E(),()=>{ee()}),[t]),z.useEffect(()=>(d&&n.current&&r.current&&G(),()=>{ee()}),[d,_,j]),z.useEffect(()=>{if(!(t!=null&&t.amm_pool_created))return;const F=async()=>{var R;try{const D=new Ve.Client("wss://xrplcluster.com");await D.connect();const V=t.currency_code.length>3?Buffer.from(t.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):t.currency_code,se=await D.request({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:V,issuer:t.issuer_address},ledger_index:"validated"});if(await D.disconnect(),(R=se==null?void 0:se.result)!=null&&R.amm){const X=se.result.amm,q=parseFloat(X.amount)/1e6,Z=parseFloat(X.amount2.value),ue=q/Z;b(ue)}}catch(D){console.error("Error fetching live price:",D)}};F();const k=setInterval(F,5e3);return()=>clearInterval(k)},[t]);const E=async()=>{var F;if(!t.amm_pool_created){m(!1);return}try{const k=new Ve.Client("wss://xrplcluster.com");await k.connect();const R=t.currency_code.length>3?Buffer.from(t.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):t.currency_code,D=await k.request({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:R,issuer:t.issuer_address},ledger_index:"validated"});if(D.result.amm){const V=D.result.amm,se=parseFloat(V.amount)/1e6,X=parseFloat(V.amount2.value),q=se/X;if(h({xrpAmount:se,tokenAmount:X,price:q,lpTokens:parseFloat(((F=V.lp_token)==null?void 0:F.value)||0),accountId:V.account}),b(q),t.amm_xrp_amount&&t.amm_asset_amount){const Z=t.amm_xrp_amount/t.amm_asset_amount,ue=(q-Z)/Z*100;A(ue)}}await k.disconnect()}catch(k){console.error("Error fetching live pool data:",k)}finally{m(!1)}},L=()=>{if(!d)return[];const F=d.price,k=[],R=Math.floor(Date.now()/1e3);let D;switch(j){case"5m":D=1;break;case"15m":D=4;break;case"30m":D=8;break;case"1h":D=24;break;case"4h":D=96;break;case"1d":D=168;break;default:D=24}for(let V=D;V>=0;V--){const se=R-V*3600,X=(Math.random()-.5)*.3,q=(D-V)/D*.15,Z=F*(1+X+q);k.push({time:se,value:Z,open:Z*.98,high:Z*1.03,low:Z*.97,close:Z,volume:Math.random()*1e4+1e3})}return c.current=k,k},Y=()=>{ee(),!(!d||!a.current)&&(u.current=setInterval(()=>{U()},5e3))},ee=()=>{u.current&&(clearInterval(u.current),u.current=null)},U=()=>{if(!d||!a.current||c.current.length===0)return;const F=c.current[c.current.length-1],k=Math.floor(Date.now()/1e3),R=(Math.random()-.5)*.02,D=x||d.price*(1+R);if(k-F.time>=60){const V={time:k,value:D,open:F.close||D,high:Math.max(D,F.close||D)*1.002,low:Math.min(D,F.close||D)*.998,close:D,volume:Math.random()*5e3+500};c.current.push(V),c.current.length>500&&c.current.shift();try{_==="area"||_==="line"||_==="baseline"?a.current.update({time:V.time,value:V.value}):a.current.update({time:V.time,open:V.open,high:V.high,low:V.low,close:V.close}),l.current&&l.current.update({time:V.time,value:V.volume,color:V.close>=V.open?"rgba(34, 197, 94, 0.5)":"rgba(239, 68, 68, 0.5)"})}catch(se){console.error("Error updating chart:",se)}}},G=()=>{if(!(!n.current||!r.current||!d))try{s.current&&(s.current.remove(),s.current=null),i.current&&(i.current.remove(),i.current=null),n.current&&(n.current.innerHTML=""),r.current&&(r.current.innerHTML="");const F=Ff(n.current,{width:n.current.clientWidth,height:400,layout:{background:{color:"transparent"},textColor:"#a78bfa"},grid:{vertLines:{color:"rgba(139, 92, 246, 0.1)"},horzLines:{color:"rgba(139, 92, 246, 0.1)"}},rightPriceScale:{borderColor:"rgba(139, 92, 246, 0.3)",scaleMargins:{top:.1,bottom:.1}},timeScale:{borderColor:"rgba(139, 92, 246, 0.3)",timeVisible:!0,secondsVisible:!1,visible:!1}});s.current=F;const k=L();if(!k||k.length===0)throw new Error("Unable to generate chart data");let R;const D={type:"price",precision:8,minMove:1e-8};switch(_){case"bars":R=F.addBarSeries({upColor:"#22c55e",downColor:"#ef4444",priceFormat:D}),R.setData(k.map(Z=>({time:Z.time,open:Z.open,high:Z.high,low:Z.low,close:Z.close})));break;case"candlestick":R=F.addCandlestickSeries({upColor:"#22c55e",downColor:"#ef4444",borderVisible:!1,wickUpColor:"#22c55e",wickDownColor:"#ef4444",priceFormat:D}),R.setData(k.map(Z=>({time:Z.time,open:Z.open,high:Z.high,low:Z.low,close:Z.close})));break;case"hollow":R=F.addCandlestickSeries({upColor:"transparent",downColor:"#ef4444",borderUpColor:"#22c55e",borderDownColor:"#ef4444",wickUpColor:"#22c55e",wickDownColor:"#ef4444",priceFormat:D}),R.setData(k.map(Z=>({time:Z.time,open:Z.open,high:Z.high,low:Z.low,close:Z.close})));break;case"line":R=F.addLineSeries({color:"#8b5cf6",lineWidth:2,priceFormat:D}),R.setData(k.map(Z=>({time:Z.time,value:Z.close})));break;case"area":R=F.addAreaSeries({topColor:"rgba(139, 92, 246, 0.4)",bottomColor:"rgba(139, 92, 246, 0.0)",lineColor:"#8b5cf6",lineWidth:2,priceFormat:D}),R.setData(k.map(Z=>({time:Z.time,value:Z.close})));break;case"baseline":R=F.addBaselineSeries({topLineColor:"#22c55e",topFillColor1:"rgba(34, 197, 94, 0.4)",topFillColor2:"rgba(34, 197, 94, 0.0)",bottomLineColor:"#ef4444",bottomFillColor1:"rgba(239, 68, 68, 0.0)",bottomFillColor2:"rgba(239, 68, 68, 0.4)",priceFormat:D}),R.setData(k.map(Z=>({time:Z.time,value:Z.close})));break;case"heikin":R=F.addCandlestickSeries({upColor:"#22c55e",downColor:"#ef4444",borderVisible:!1,wickUpColor:"#22c55e",wickDownColor:"#ef4444",priceFormat:D});const q=k.map((Z,ue)=>{if(ue===0)return Z;const ne=k[ue-1],J=(Z.open+Z.high+Z.low+Z.close)/4,N=(ne.open+ne.close)/2,g=Math.max(Z.high,N,J),I=Math.min(Z.low,N,J);return{time:Z.time,open:N,high:g,low:I,close:J}});R.setData(q);break;default:R=F.addAreaSeries({topColor:"rgba(139, 92, 246, 0.4)",bottomColor:"rgba(139, 92, 246, 0.0)",lineColor:"#8b5cf6",lineWidth:2,priceFormat:D}),R.setData(k.map(Z=>({time:Z.time,value:Z.close})))}a.current=R;const V=Ff(r.current,{width:r.current.clientWidth,height:100,layout:{background:{color:"transparent"},textColor:"#a78bfa"},grid:{vertLines:{color:"rgba(139, 92, 246, 0.1)"},horzLines:{color:"rgba(139, 92, 246, 0.1)"}},rightPriceScale:{borderColor:"rgba(139, 92, 246, 0.3)",scaleMargins:{top:.1,bottom:.1}},timeScale:{borderColor:"rgba(139, 92, 246, 0.3)",timeVisible:!0,secondsVisible:!1}});i.current=V;const se=V.addHistogramSeries({color:"#8b5cf6",priceFormat:{type:"volume"}});se.setData(k.map(q=>({time:q.time,value:q.volume,color:q.close>=q.open?"rgba(34, 197, 94, 0.5)":"rgba(239, 68, 68, 0.5)"}))),l.current=se,F.timeScale().fitContent(),V.timeScale().fitContent(),F.timeScale().subscribeVisibleTimeRangeChange(()=>{const q=F.timeScale().getVisibleRange();q&&V.timeScale().setVisibleRange(q)});const X=()=>{s.current&&n.current&&s.current.applyOptions({width:n.current.clientWidth}),i.current&&r.current&&i.current.applyOptions({width:r.current.clientWidth})};window.addEventListener("resize",X),setTimeout(()=>{Y()},100)}catch(F){console.error("Error rendering chart:",F)}},ae=()=>x||(d==null?void 0:d.price)||0,he=()=>{const F=ae();return t.supply*F},xe=()=>(d==null?void 0:d.xrpAmount)||t.amm_xrp_amount||0,de=()=>(d==null?void 0:d.tokenAmount)||t.amm_asset_amount||0,$=ae(),re=he();return o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:e,children:o.jsxs("div",{className:"glass rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",onClick:F=>F.stopPropagation(),children:[o.jsxs("div",{className:"sticky top-0 glass border-b border-purple-500/20 p-6 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(xn,{token:t,size:"lg"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-purple-200",children:t.token_name}),o.jsx("p",{className:"text-purple-400 text-sm",children:t.currency_code})]})]}),o.jsx("button",{onClick:e,className:"text-purple-400 hover:text-purple-300 text-3xl leading-none",children:"×"})]}),o.jsx("div",{className:"p-6 space-y-6",children:f?o.jsx("div",{className:"text-center text-purple-400 py-8",children:"Loading live data..."}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Price"}),o.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[$.toFixed(8)," XRP"]}),o.jsxs("div",{className:`text-sm mt-1 ${v>=0?"text-green-400":"text-red-400"}`,children:[v>=0?"↑":"↓"," ",Math.abs(v).toFixed(2),"% (24h)"]})]}),o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Market Cap"}),o.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[re.toFixed(4)," XRP"]}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Fully diluted"})]}),o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"24h Volume"}),o.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[(re*.12).toFixed(2)," XRP"]}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Estimated"})]})]}),d&&o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200",children:"Price Chart"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("select",{value:j,onChange:F=>y(F.target.value),className:"input px-3 py-1 text-sm text-purple-200",children:[o.jsx("option",{value:"5m",children:"5m"}),o.jsx("option",{value:"15m",children:"15m"}),o.jsx("option",{value:"30m",children:"30m"}),o.jsx("option",{value:"1h",children:"1h"}),o.jsx("option",{value:"4h",children:"4h"}),o.jsx("option",{value:"1d",children:"1d"})]}),o.jsxs("select",{value:_,onChange:F=>S(F.target.value),className:"input px-3 py-1 text-sm text-purple-200",children:[o.jsx("option",{value:"candlestick",children:"Candles"}),o.jsx("option",{value:"bars",children:"Bars"}),o.jsx("option",{value:"hollow",children:"Hollow"}),o.jsx("option",{value:"heikin",children:"Heikin Ashi"}),o.jsx("option",{value:"line",children:"Line"}),o.jsx("option",{value:"area",children:"Area"}),o.jsx("option",{value:"baseline",children:"Baseline"})]})]})]}),o.jsx("div",{ref:n,className:"w-full mb-2"}),o.jsx("div",{ref:r,className:"w-full"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold text-purple-200 mb-4",children:"Token Details"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-purple-400",children:"Total Supply"}),o.jsx("span",{className:"text-purple-200 font-bold",children:t.supply.toLocaleString()})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-purple-400",children:"Circulating"}),o.jsx("span",{className:"text-purple-200 font-bold",children:(t.supply*.9).toLocaleString()})]}),t.amm_pool_created&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-purple-400",children:"AMM Liquidity"}),o.jsx("span",{className:"text-purple-200 font-bold",children:de().toLocaleString()})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-purple-400",children:"XRP Locked"}),o.jsxs("span",{className:"text-purple-200 font-bold",children:[xe().toFixed(2)," XRP"]})]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-purple-400",children:"Status"}),o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${t.amm_pool_created?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:t.amm_pool_created?"✓ Active":"○ Pending"})]})]})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold text-purple-200 mb-4",children:"Blockchain Info"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Issuer Address"}),o.jsx("div",{className:"text-purple-300 text-xs font-mono bg-black/30 p-2 rounded break-all",children:t.issuer_address})]}),t.tx_hash&&o.jsxs("div",{children:[o.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Creation TX"}),o.jsx("div",{className:"text-purple-300 text-xs font-mono bg-black/30 p-2 rounded break-all",children:t.tx_hash})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Created"}),o.jsx("div",{className:"text-purple-300 text-sm",children:new Date(t.created_at).toLocaleString()})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[o.jsx("a",{href:`https://xmagnetic.org/amm/${t.currency_code}+${t.issuer_address}_XRP+XRP?network=mainnet`,target:"_blank",rel:"noopener noreferrer",className:"btn text-purple-300 px-4 py-3 rounded-lg text-center font-medium",children:"AMM Pool"}),o.jsx("a",{href:`https://xmagnetic.org/dex/${t.currency_code}+${t.issuer_address}_XRP+XRP?network=mainnet`,target:"_blank",rel:"noopener noreferrer",className:"btn-primary text-white px-4 py-3 rounded-lg text-center font-medium",children:"Trade on DEX"}),o.jsx("a",{href:`https://testnet.xrpl.org/accounts/${t.issuer_address}`,target:"_blank",rel:"noopener noreferrer",className:"btn text-purple-300 px-4 py-3 rounded-lg text-center font-medium",children:"Explorer"}),o.jsx("button",{onClick:e,className:"btn text-purple-300 px-4 py-3 rounded-lg font-medium",children:"Back"})]})]})})]})})}const Ws=async({userAddress:t,actionType:e,description:n,details:r={},txHash:s=null,tokenId:i=null})=>{try{const{error:a}=await Pe.from("activity_logs").insert([{user_address:t,action_type:e,description:n,details:r,tx_hash:s,token_id:i}]);a&&console.error("Error logging activity:",a)}catch(a){console.error("Error logging activity:",a)}},Xs={TOKEN_CREATED:"token_created",TOKEN_SENT:"token_sent",TOKEN_RECEIVED:"token_received",TRUSTLINE_CREATED:"trustline_created",SWAP_EXECUTED:"swap_executed",AMM_CREATED:"amm_created",WALLET_CONNECTED:"wallet_connected",WALLET_DISCONNECTED:"wallet_disconnected",BOT_CREATED:"bot_created",START_EARNING:"start_earning",STOP_EARNING:"stop_earning",CLAIM_EARNINGS:"claim_earnings"},hS=["ABLE","ACID","AGED","ALSO","AREA","ARMY","AWAY","BABY","BACK","BALL","BAND","BANK","BASE","BATH","BEAR","BEAT","BEEN","BEER","BELL","BELT","BEST","BILL","BIRD","BLOW","BLUE","BOAT","BODY","BOMB","BOND","BONE","BOOK","BOOM","BORN","BOSS","BOTH","BOWL","BULK","BURN","BUSH","BUSY","CAFE","CAKE","CALL","CALM","CAME","CAMP","CARD","CARE","CART","CASE","CASH","CAST","CELL","CHAT","CHEF","CHIP","CITY","CLUB","COAL","COAT","CODE","COLD","COME","COOK","COOL","COPE","COPY","CORE","CORN","COST","CREW","CROP","DARK","DATA","DATE","DAWN","DAYS","DEAD","DEAL","DEAR","DEBT","DEEP","DENY","DESK","DIAL","DIET","DISC","DISK","DIVE","DOCK","DOES","DOGS","DONE","DOOR","DOSE","DOWN","DRAW","DREW","DROP","DRUG","DUAL","DUCK","DUMP","DUST","DUTY","EACH","EARN","EASE","EAST","EASY","ECHO","EDGE","ELSE","EVEN","EVER","EVIL","EXIT","FACE","FACT","FAIL","FAIR","FALL","FARM","FAST","FATE","FEAR","FEED","FEEL","FEET","FELL","FELT","FILE","FILL","FILM","FIND","FINE","FIRE","FIRM","FISH","FLAT","FLED","FLEW","FLOW","FOLK","FOOD","FOOT","FORD","FORM","FORT","FOUL","FOUR","FREE","FROM","FUEL","FULL","FUND","GAIN","GAME","GATE","GAVE","GEAR","GENE","GIFT","GIRL","GIVE","GLAD","GOAL","GOES","GOLD","GOLF","GONE","GOOD","GRAD","GRAY","GREW","GREY","GRIP","GROW","GULF","HAIR","HALF","HALL","HAND","HANG","HARD","HARM","HATE","HAVE","HEAD","HEAR","HEAT","HELD","HELL","HELP","HERE","HERO","HIGH","HILL","HIRE","HOLD","HOLE","HOLY","HOME","HOPE","HOST","HOUR","HUGE","HUNG","HUNT","HURT","IDEA","INCH","INTO","IRON","ITEM","JACK","JANE","JAZZ","JEAN","JOHN","JOIN","JUMP","JUNE","JURY","JUST","KEEN","KEEP","KENT","KEPT","KICK","KILL","KIND","KING","KNEE","KNEW","KNOW","LACK","LADY","LAID","LAKE","LAND","LANE","LAST","LATE","LEAD","LEFT","LESS","LIED","LIFE","LIFT","LIKE","LINE","LINK","LIST","LIVE","LOAD","LOAN","LOCK","LONE","LONG","LOOK","LORD","LOSE","LOSS","LOST","LOTS","LOUD","LOVE","LUCK","LUNG","MADE","MAIL","MAIN","MAKE","MALE","MALL","MANY","MARK","MASS","MATE","MATH","MEAL","MEAN","MEAT","MEET","MENU","MERE","MESS","MICE","MILE","MILK","MILL","MIND","MINE","MISS","MODE","MOOD","MOON","MORE","MOST","MOVE","MUCH","MUST","MYTH","NAME","NAVY","NEAR","NECK","NEED","NEWS","NEXT","NICE","NINE","NONE","NOON","NORM","NOSE","NOTE","NOVEL","NURSE","OKAY","ONCE","ONES","ONLY","ONTO","OPEN","ORAL","OVEN","OVER","PACE","PACK","PAGE","PAID","PAIN","PAIR","PALM","PARK","PART","PASS","PAST","PATH","PEAK","PICK","PIER","PILE","PINE","PINK","PIPE","PLAN","PLAY","PLOT","PLUG","PLUS","POEM","POET","POLL","POND","POOL","POOR","PORT","POST","POUR","PRAY","PRAY","PURE","PUSH","RACE","RACK","RAIL","RAIN","RANK","RARE","RATE","READ","REAL","REAR","RELY","RENT","REST","RICE","RICH","RIDE","RING","RISE","RISK","ROAD","ROCK","RODE","ROLE","ROLL","ROOF","ROOM","ROOT","ROPE","ROSE","RUDE","RULE","RUSH","RUTH","SAFE","SAGA","SAGE","SAID","SAKE","SALE","SALT","SAME","SAND","SANK","SAVE","SEAT","SEED","SEEK","SEEM","SEEN","SELF","SELL","SEND","SENT","SEPT","SHED","SHIP","SHOP","SHOT","SHOW","SHUT","SICK","SIDE","SIGN","SILK","SING","SINK","SITE","SIZE","SKIN","SKIP","SLOW","SNOW","SOFT","SOIL","SOLD","SOLE","SOME","SONG","SOON","SORT","SOUL","SOUP","SOUR","SPAN","SPEC","SPIN","SPOT","STAR","STAY","STEM","STEP","STIR","STOP","SUCH","SUED","SUIT","SUNG","SURE","SWIM","TALE","TALK","TALL","TANK","TAPE","TASK","TEAM","TEAR","TECH","TELL","TEND","TERM","TEST","TEXT","THAN","THAT","THEM","THEN","THEY","THIN","THIS","THOU","THUS","TIDE","TIED","TIER","TILL","TIME","TINY","TOLL","TONE","TOOK","TOOL","TOPS","TORN","TOUR","TOWN","TOYS","TREE","TREK","TRIM","TRIO","TRIP","TRUE","TUBE","TUNE","TURN","TWIN","TYPE","UNIT","UPON","USED","USER","VARY","VAST","VERY","VICE","VIEW","VISA","VOTE","WAGE","WAIT","WAKE","WALK","WALL","WANT","WARD","WARM","WARN","WASH","WAVE","WAYS","WEAK","WEAR","WEEK","WELL","WENT","WERE","WEST","WHAT","WHEN","WHOM","WIDE","WIFE","WILD","WILL","WIND","WINE","WING","WIRE","WISE","WISH","WITH","WOOD","WORD","WORE","WORK","WORM","WORN","WRAP","YARD","YEAH","YEAR","YELL","YOUR","ZONE","ZOOM","MOON","PEEL","BEAM","LEAN","PEAK","RAGE","VIBE","DOGE"],TX=()=>hS[Math.floor(Math.random()*hS.length)],Iv="token-updated",AX=t=>{const e=new CustomEvent(Iv,{detail:{tokenId:t,timestamp:Date.now()}});window.dispatchEvent(e)},xd=t=>{const e=n=>t(n.detail);return window.addEventListener(Iv,e),()=>window.removeEventListener(Iv,e)},Pv=async t=>{try{const{data:e,error:n}=await Pe.from("meme_tokens").select("id, featured_order").eq("is_featured",!0).order("featured_order",{ascending:!0,nullsLast:!0});if(n)throw n;const r=[];e.forEach((i,a)=>{a<2?r.push(Pe.from("meme_tokens").update({featured_order:a+2}).eq("id",i.id)):r.push(Pe.from("meme_tokens").update({is_featured:!1,featured_order:null}).eq("id",i.id))}),await Promise.all(r);const{error:s}=await Pe.from("meme_tokens").update({is_featured:!0,featured_order:1}).eq("id",t);if(s)throw s;console.log("Token promoted to featured position 1")}catch(e){throw console.error("Error promoting token to featured:",e),e}},fS=async(t,e)=>{try{if(e===null||e===0){const{error:l}=await Pe.from("meme_tokens").update({is_featured:!1,featured_order:null}).eq("id",t);if(l)throw l;return}const{data:n,error:r}=await Pe.from("meme_tokens").select("id, featured_order").eq("is_featured",!0).order("featured_order",{ascending:!0,nullsLast:!0});if(r)throw r;const s=[];n.forEach(l=>{l.id!==t&&l.featured_order&&l.featured_order>=e&&s.push(Pe.from("meme_tokens").update({featured_order:l.featured_order+1}).eq("id",l.id))}),await Promise.all(s);const{error:i}=await Pe.from("meme_tokens").update({is_featured:!0,featured_order:e}).eq("id",t);if(i)throw i;const{error:a}=await Pe.from("meme_tokens").update({is_featured:!1,featured_order:null}).eq("is_featured",!0).gt("featured_order",3);if(a)throw a;console.log(`Token set to featured position ${e}`)}catch(n){throw console.error("Error setting featured position:",n),n}},CX="sEd7bAfzqZWKxaatJpoWzTvENyaTg1Y",_h="rKxBBMmY969Ph1y63ddVfYyN7xmxwDfVq6",jX="sEd7W72aANTbLTG98XDhU1yfotPJdhu";function pS(){var Ww,Xw;const[t,e]=z.useState([]),[n,r]=z.useState({}),[s,i]=z.useState({}),[a,l]=z.useState(null),[c,u]=z.useState({totalTokens:0,totalValue:0,topPerformer:null,recentActivity:[]}),[d,h]=z.useState(0),[f,m]=z.useState({totalXrpLocked:0,totalMarketCap:0}),[_,S]=z.useState({totalTrustlines:0,totalHolders:0,trustlines24hAgo:0,holders24hAgo:0}),[j,y]=z.useState(0),[x,b]=z.useState(!1),[v,A]=z.useState(!1),[E,L]=z.useState(!1),[Y,ee]=z.useState(""),[U,G]=z.useState(null),[ae,he]=z.useState(!1),[xe,de]=z.useState(!1),[$,re]=z.useState(""),[F,k]=z.useState({name:"",issuer:"",supply:"1000000",xrpLocked:"1",description:"",twitterHandle:"",websiteUrl:""}),[R,D]=z.useState(null),[V,se]=z.useState(null),[X,q]=z.useState(!1),[Z,ue]=z.useState("list"),[ne,J]=z.useState("grid"),[N,g]=z.useState(null),[I,T]=z.useState(!1),[C,P]=z.useState([]),[H,M]=z.useState(!1),[K,Q]=z.useState(!1),[te,le]=z.useState(""),[we,_e]=z.useState(null),[be,Ie]=z.useState(null),[He,O]=z.useState(null),[p,w]=z.useState(null),[W,oe]=z.useState(!1),[ce,fe]=z.useState(!1),[Te,Le]=z.useState([]),[Me,ke]=z.useState(0),[Ye,ri]=z.useState(!1),[_n,ie]=z.useState(null),[Ae,tt]=z.useState(""),[$e,Xe]=z.useState("all"),[nt,ft]=z.useState("newest"),[jt,nr]=z.useState(1),[rr,wd]=z.useState("all"),[Vn,sr]=z.useState("all"),Qr=100;z.useEffect(()=>{ir(),Eo(),si();const B=setInterval(()=>{ir(),si()},6e4),me=()=>{Eo()};return window.addEventListener("walletConnected",me),window.addEventListener("walletDisconnected",me),()=>{clearInterval(B),window.removeEventListener("walletConnected",me),window.removeEventListener("walletDisconnected",me)}},[]),z.useEffect(()=>{t.length>0&&Es()},[t]),z.useEffect(()=>{Object.keys(n).length>0&&Tr()},[n]),z.useEffect(()=>{t.length>0&&(Vt(),ii())},[t]),z.useEffect(()=>{a&&Object.keys(n).length>0&&Pa()},[a,n]);const Eo=()=>{const B=localStorage.getItem("connectedWallet");l(B?JSON.parse(B):null)},si=async()=>{var B;try{const De=await(await fetch("https://api.coingecko.com/api/v3/simple/price?ids=ripple&vs_currencies=usd")).json();h(((B=De.ripple)==null?void 0:B.usd)||0)}catch(me){console.error("Error fetching XRP/USD price:",me)}},Tr=()=>{let B=0,me=0;t.forEach(De=>{const Ke=n[De.id];if(Ke){B+=Ke.xrpAmount;const lt=Ke.price,rt=De.supply||0;me+=lt*rt}}),m({totalXrpLocked:B,totalMarketCap:me})},ii=()=>{const B=Date.now()-864e5,me=t.filter(De=>new Date(De.created_at).getTime()>B);y(me.length)},Vt=async()=>{const B=new Ve.Client("wss://xrplcluster.com");try{await B.connect();let me=0;const De=new Set,Ke=new Set,lt=Date.now()-24*60*60*1e3,rt=t.filter(ut=>new Date(ut.created_at).getTime()>lt);let st=0;for(const ut of t){if(!ut.amm_pool_created)continue;const zn=rt.some(Cr=>Cr.id===ut.id);try{const Cr=ut.currency_code.length>3?_t.Buffer.from(ut.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):ut.currency_code,bd=await B.request({command:"account_lines",account:ut.issuer_address,ledger_index:"validated"});if(bd.result.lines){const oi=bd.result.lines.filter(ai=>ut.currency_code.length>3?ai.currency===Cr:ai.currency===ut.currency_code);me+=oi.length,zn||(st+=oi.length),oi.forEach(ai=>{parseFloat(ai.balance)>0&&(De.add(ai.account),zn||Ke.add(ai.account))})}}catch(Cr){console.error(`Error fetching trustlines for ${ut.token_name}:`,Cr.message)}}S({totalTrustlines:me,totalHolders:De.size,trustlines24hAgo:st,holders24hAgo:Ke.size}),await B.disconnect()}catch(me){console.error("Error fetching trustline stats:",me)}},ir=async()=>{const B=new Ve.Client("wss://xrplcluster.com");try{const{data:me,error:De}=await Pe.from("meme_tokens").select("*").order("created_at",{ascending:!1});if(De)throw De;const Ke=me||[];await B.connect();for(const rt of Ke.filter(st=>st.amm_pool_created))try{const st=rt.currency_code.length>3?_t.Buffer.from(rt.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):rt.currency_code,ut=await B.request({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:st,issuer:rt.issuer_address},ledger_index:"validated"});if(ut.result.amm){const zn=ut.result.amm;rt.amm_xrp_amount=parseFloat(zn.amount)/1e6,rt.amm_asset_amount=parseFloat(zn.amount2.value)}}catch(st){console.error(`Failed to fetch live data for ${rt.token_name}:`,st.message)}await B.disconnect(),e(Ke);const lt={totalTokens:Ke.length,totalValue:Ke.reduce((rt,st)=>rt+(st.amm_xrp_amount||0),0),topPerformer:Ke[0]||null,recentActivity:Ke.slice(0,5)};u(lt)}catch(me){console.error("Error loading tokens:",me)}},Es=async()=>{var me;const B=new Ve.Client("wss://xrplcluster.com");try{await B.connect();const De={};for(const Ke of t)if(Ke.amm_pool_created)try{const lt=Ke.currency_code.length>3?_t.Buffer.from(Ke.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):Ke.currency_code,rt=await B.request({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:lt,issuer:Ke.issuer_address},ledger_index:"validated"});if(rt.result.amm){const st=rt.result.amm,ut=parseFloat(st.amount)/1e6,zn=parseFloat(st.amount2.value),Cr=parseFloat(((me=st.lp_token)==null?void 0:me.value)||0);De[Ke.id]={xrpAmount:ut,tokenAmount:zn,lpTokens:Cr,price:ut/zn,accountId:st.account}}}catch(lt){console.error(`Error fetching pool data for ${Ke.token_name}:`,lt.message)}r(De),await B.disconnect()}catch(De){console.error("Error fetching pools data:",De)}},Pa=async()=>{if(!a)return;const B=new Ve.Client("wss://xrplcluster.com");try{await B.connect();const me=await B.request({command:"account_lines",account:a.address,ledger_index:"validated"}),De={};me.result.lines&&me.result.lines.forEach(Ke=>{const lt=t.find(rt=>{const st=n[rt.id];return st&&Ke.account===st.accountId});lt&&(De[lt.id]=Ke.balance)}),i(De),await B.disconnect()}catch(me){console.error("Error fetching LP balances:",me)}},Gt=()=>{if($!=="divercity"){ye.error("Incorrect password!");return}de(!1),A(!0),re("")},hn=B=>{const me=B.target.files[0];if(me){D(me);const De=new FileReader;De.onloadend=()=>{se(De.result)},De.readAsDataURL(me)}},or=async()=>{if(!F.name||!F.issuer){ye.error("Token name and issuer are required");return}try{q(!0);let B=null;R&&(B=await Mf(R));const me={token_name:F.name,currency_code:F.name,issuer_address:F.issuer,receiver_address:"Manual Entry",supply:parseFloat(F.supply),amm_xrp_amount:parseFloat(F.xrpLocked),amm_pool_created:!0,status:"manual",amm_asset_amount:parseFloat(F.supply)*.9,description:F.description||null,twitter_handle:F.twitterHandle||null,website_url:F.websiteUrl||null};B&&(me.image_url=B);const{data:De,error:Ke}=await Pe.from("meme_tokens").insert([me]).select();if(Ke)throw Ke;De&&De[0]&&await Pv(De[0].id),ye.success(`Token ${F.name} added successfully!`),A(!1),k({name:"",issuer:"",supply:"1000000",xrpLocked:"1",description:"",twitterHandle:"",websiteUrl:""}),D(null),se(null),ir()}catch(B){console.error("Error adding token:",B),ye.error("Failed to add token")}finally{q(!1)}},ar=async()=>{var De,Ke;if(Y!=="divercity"){ye.error("Incorrect password!");return}b(!0),L(!1),fe(!0),ri(!1),ke(0),Le([{title:"Generating Token Name",status:"pending"},{title:"Connecting to XRPL",status:"pending"},{title:"Validating Wallets",status:"pending"},{title:"Creating Trust Line",status:"pending"},{title:"Issuing Tokens",status:"pending"},{title:"Saving to Database",status:"pending"},{title:"Creating AMM Pool",status:"pending"},{title:"Complete",status:"pending"}]);const me=(lt,rt,st={})=>{Le(ut=>ut.map((zn,Cr)=>Cr===lt?{...zn,status:rt,...st}:zn)),ke(lt)};try{me(0,"active");const lt=TX();me(0,"complete",{data:`Token name: ${lt}`}),me(1,"active");const rt=new Ve.Client("wss://s.altnet.rippletest.net:51233");await rt.connect(),me(1,"complete"),me(2,"active");const st=Ve.Wallet.fromSeed(CX),ut=Ve.Wallet.fromSeed(jX);try{await rt.request({command:"account_info",account:st.address})}catch(li){if(((De=li.data)==null?void 0:De.error)==="actNotFound"){me(2,"error",{error:"Issuer wallet not funded"}),ye.error("Issuer wallet needs XRP. Please fund: "+st.address),await rt.disconnect(),b(!1);return}}try{await rt.request({command:"account_info",account:ut.address})}catch(li){if(((Ke=li.data)==null?void 0:Ke.error)==="actNotFound"){me(2,"error",{error:"Receiver wallet not funded"}),ye.error("Receiver wallet needs XRP. Please fund: "+ut.address),await rt.disconnect(),b(!1);return}}me(2,"complete"),me(3,"active");const zn={TransactionType:"TrustSet",Account:ut.address,LimitAmount:{currency:lt,issuer:st.address,value:"1000000"}},Cr=await rt.autofill(zn),bd=ut.sign(Cr),oi=await rt.submitAndWait(bd.tx_blob);if(oi.result.meta.TransactionResult!=="tesSUCCESS")throw me(3,"error",{error:oi.result.meta.TransactionResult}),new Error("Trust line creation failed: "+oi.result.meta.TransactionResult);me(3,"complete",{txHash:oi.result.hash}),me(4,"active");const ai={TransactionType:"Payment",Account:st.address,Destination:ut.address,Amount:{currency:lt,value:"1000000",issuer:st.address}},Mj=await rt.autofill(ai),Dj=st.sign(Mj),La=await rt.submitAndWait(Dj.tx_blob);if(La.result.meta.TransactionResult!=="tesSUCCESS")throw me(4,"error",{error:La.result.meta.TransactionResult}),new Error("Token issuance failed: "+La.result.meta.TransactionResult);me(4,"complete",{txHash:La.result.hash}),me(5,"active");const{data:ac,error:zm}=await Pe.from("meme_tokens").insert([{token_name:lt,currency_code:lt,issuer_address:st.address,receiver_address:ut.address,supply:1e6,tx_hash:La.result.hash,status:"issued",amm_pool_created:!1}]).select().single();if(zm)throw me(5,"error",{error:zm.message}),zm;await Pv(ac.id),await Ws({userAddress:st.address,actionType:Xs.TOKEN_CREATED,description:`Created random meme token "${lt}" with 1M supply`,details:{token_name:lt,supply:1e6,issuer:st.address},txHash:La.result.hash,tokenId:ac.id}),me(5,"complete"),me(6,"active");try{const li={TransactionType:"AMMCreate",Account:ut.address,Amount:{currency:lt,value:"900000",issuer:st.address},Amount2:Ve.xrpToDrops("1"),TradingFee:500},Bj=await rt.autofill(li),Fj=ut.sign(Bj),lc=await rt.submitAndWait(Fj.tx_blob);lc.result.meta.TransactionResult==="tesSUCCESS"?(await Pe.from("meme_tokens").update({amm_pool_created:!0,amm_tx_hash:lc.result.hash,amm_asset_amount:9e5,amm_xrp_amount:1,status:"amm_created"}).eq("id",ac.id),await Ws({userAddress:ut.address,actionType:Xs.AMM_CREATED,description:`Created AMM pool for ${lt} with 900K tokens and 1 XRP`,details:{token_name:lt,token_amount:9e5,xrp_amount:1},txHash:lc.result.hash,tokenId:ac.id}),me(6,"complete",{txHash:lc.result.hash})):me(6,"error",{error:lc.result.meta.TransactionResult})}catch(li){console.error("AMM creation error:",li),me(6,"error",{error:li.message})}await rt.disconnect(),me(7,"complete"),ri(!0),ie({name:lt,supply:1e6,issuer:st.address,receiver:ut.address,token:ac}),ir()}catch(lt){console.error("Error creating token:",lt),ye.error(`Failed to create token: ${lt.message}`),fe(!1)}finally{b(!1),ee("")}},Yt=B=>{if(!B.amm_pool_created||!B.amm_xrp_amount||!B.amm_asset_amount)return 0;const me=B.amm_xrp_amount/B.amm_asset_amount;return(B.supply*me).toFixed(4)},Ar=B=>{const me=n[B.id];return me?me.price.toFixed(8):!B.amm_pool_created||!B.amm_xrp_amount||!B.amm_asset_amount?0:(B.amm_xrp_amount/B.amm_asset_amount).toFixed(8)},pe=B=>{const me=n[B.id];return me?(me.xrpAmount*.15).toFixed(2):B.amm_pool_created?((B.amm_xrp_amount||0)*.15).toFixed(2):"-"},Ee=B=>{const me=n[B.id];if(!me||!me.price||!B.amm_xrp_amount||!B.amm_asset_amount)return"0.00";const De=me.price,Ke=B.amm_xrp_amount/B.amm_asset_amount;return!Ke||Ke===0?"0.00":((De-Ke)/Ke*100).toFixed(2)},Oe=B=>{const me=Ar(B),De=Yt(B),Ke=_t.Buffer.from(B.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"),lt=`https://xrpl.services/?issuer=${B.issuer_address}&currency=${Ke}&limit=${B.supply}`,rt=`https://xmagnetic.org/dex/${B.currency_code}+${B.issuer_address}_XRP+XRP?network=mainnet`,st=`🚀 ${B.token_name} Token Info

💰 Supply: ${B.supply.toLocaleString()}
📊 Price: ${me} XRP
💎 Market Cap: ${De} XRP
🔒 XRP Locked: ${B.amm_xrp_amount||0} XRP
✅ Status: ${B.amm_pool_created?"AMM Pool Active":"Pending"}

🔗 Trust Line:
${lt}

💱 Trade on Magnetic:
${rt}

#XRPL #Crypto #MemeToken`,ut=`https://twitter.com/intent/tweet?text=${encodeURIComponent(st)}`;window.open(ut,"_blank","width=550,height=420")},Re=(B,me=null)=>{_e({type:B,token:me}),Q(!0),le("")},ze=async()=>{if(te!=="divercity"){ye.error("Incorrect admin password!");return}try{if(we.type==="delete"){const{error:B}=await Pe.from("meme_tokens").delete().eq("id",we.token.id);if(B)throw B;ye.success(`Token ${we.token.token_name} deleted!`)}else if(we.type==="edit"){Ie(we.token),O(null),w(null),Q(!1);return}Q(!1),le(""),_e(null),ir()}catch(B){console.error("Admin action error:",B),ye.error("Failed to execute action")}},Qe=B=>{const me=B.target.files[0];if(me){O(me);const De=new FileReader;De.onloadend=()=>{w(De.result)},De.readAsDataURL(me)}},Fe=async()=>{if(te!=="divercity"){ye.error("Incorrect admin password!");return}try{oe(!0);let B=be.image_url;He&&(ye.loading("Uploading image to IPFS..."),B=await Mf(He),ye.dismiss(),ye.success("Image uploaded successfully!")),be.is_featured&&be.featured_order?await fS(be.id,be.featured_order):be.is_featured===!1&&await fS(be.id,null);const me={token_name:be.token_name,supply:parseFloat(be.supply),amm_xrp_amount:parseFloat(be.amm_xrp_amount),amm_asset_amount:parseFloat(be.amm_asset_amount),image_url:B,updated_at:new Date().toISOString()},{data:De,error:Ke}=await Pe.from("meme_tokens").update(me).eq("id",be.id).select();if(Ke)throw Ke;const lt=De[0];e(rt=>rt.map(st=>st.id===be.id?{...lt}:st)),AX(be.id),Ie(null),le(""),O(null),w(null),ye.success("Token updated successfully!"),setTimeout(()=>{ir()},1e3)}catch(B){console.error("Update error:",B),ye.error("Failed to update token: "+B.message)}finally{oe(!1)}},ot=t.filter(B=>{const me=B.token_name.toLowerCase().includes(Ae.toLowerCase())||B.issuer_address.toLowerCase().includes(Ae.toLowerCase()),De=$e==="all"||$e==="active"&&B.amm_pool_created||$e==="pending"&&!B.amm_pool_created,Ke=rr==="all"||rr==="memeking"&&B.issuer_address===_h||rr==="user"&&B.issuer_address!==_h;return me&&De&&Ke}).sort((B,me)=>{switch(nt){case"newest":return new Date(me.created_at)-new Date(B.created_at);case"oldest":return new Date(B.created_at)-new Date(me.created_at);case"marketcap":return parseFloat(Yt(me))-parseFloat(Yt(B));case"supply":return me.supply-B.supply;default:return 0}}),Ue=Math.ceil(ot.length/Qr),lr=ot.slice((jt-1)*Qr,jt*Qr),cr=t.filter(B=>B.issuer_address===_h),nn=t.filter(B=>B.issuer_address!==_h),fn=[...t].filter(B=>B.amm_pool_created).sort((B,me)=>parseFloat(Yt(me))-parseFloat(Yt(B))).slice(0,3),Ss=({token:B,featured:me=!1})=>o.jsxs("div",{className:`glass rounded-lg p-6 space-y-4 hover:scale-105 transition-transform cursor-pointer ${me?"border-2 border-purple-500/50":""}`,onClick:()=>g(B),children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(xn,{token:B,size:me?"lg":"md"}),o.jsxs("div",{children:[o.jsx("h3",{className:`${me?"text-2xl":"text-xl"} font-bold text-purple-200`,children:B.token_name}),o.jsx("p",{className:"text-purple-400 text-sm",children:B.currency_code})]})]}),B.amm_pool_created&&o.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-bold ${parseFloat(Ee(B))>=0?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:[parseFloat(Ee(B))>=0?"+":"",Ee(B),"%"]}),!B.amm_pool_created&&o.jsx("div",{className:"px-3 py-1 rounded-full text-xs font-medium bg-yellow-500/20 text-yellow-400",children:"○ Pending"})]}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400 text-xs",children:"Live Price"}),o.jsxs("span",{className:"text-purple-200 text-sm font-bold",children:[Ar(B)," XRP"]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400 text-xs",children:"Volume 24h"}),o.jsx("span",{className:"text-purple-200 text-sm font-bold",children:B.amm_pool_created?`${pe(B)} XRP`:"-"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400 text-xs",children:"Your LP"}),o.jsx("span",{className:"text-green-400 text-sm font-bold",children:s[B.id]?parseFloat(s[B.id]).toFixed(4):"-"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400 text-xs",children:"Market Cap (Live)"}),o.jsxs("span",{className:"text-purple-200 text-sm font-bold font-mono",children:[Yt(B)," XRP"]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400 text-xs",children:"XRP Locked (Live)"}),o.jsxs("span",{className:"text-purple-200 text-sm font-bold font-mono",children:[B.amm_xrp_amount?B.amm_xrp_amount.toFixed(2):"0.00"," XRP"]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400 text-xs",children:"Total Supply"}),o.jsx("span",{className:"text-purple-200 text-sm font-bold",children:B.supply.toLocaleString()})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-3 border-t border-purple-500/20",children:[o.jsx("a",{href:`https://xrpl.services/?issuer=${B.issuer_address}&currency=${B.currency_code}&limit=1000000000`,target:"_blank",rel:"noopener noreferrer",className:"bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white font-bold text-xs px-3 py-2 rounded text-center shadow-lg",onClick:De=>{De.stopPropagation()},children:"🔗 Trust"}),o.jsx("button",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white font-bold text-xs px-3 py-2 rounded text-center shadow-lg",onClick:De=>{De.stopPropagation(),localStorage.setItem("selectedTradeToken",JSON.stringify(B)),window.dispatchEvent(new CustomEvent("navigateToTrade",{detail:B}))},children:"💱 Swap"}),o.jsx("button",{className:"col-span-2 bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-700 hover:to-slate-800 text-white font-bold text-xs px-3 py-2 rounded shadow-lg",onClick:De=>{De.stopPropagation(),Oe(B)},children:"𝕏 Post on X"})]})]}),Ra=({token:B})=>o.jsxs("tr",{className:"border-t border-purple-500/20 hover:bg-purple-900/20 cursor-pointer",onClick:()=>g(B),children:[o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(xn,{token:B,size:"sm"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-purple-200",children:B.token_name}),o.jsx("div",{className:"text-purple-400 text-xs",children:B.currency_code})]})]})}),o.jsx("td",{className:"px-4 py-3 text-purple-300 text-xs",children:B.supply.toLocaleString()}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-purple-200 font-mono text-xs",children:Ar(B)}),B.amm_pool_created&&o.jsxs("span",{className:`text-xs font-medium px-1.5 py-0.5 rounded whitespace-nowrap ${parseFloat(Ee(B))>=0?"text-green-300 bg-green-500/10":"text-red-300 bg-red-500/10"}`,children:[parseFloat(Ee(B))>=0?"+":"",Ee(B),"%"]})]})}),o.jsx("td",{className:"px-4 py-3 text-purple-200 text-xs",children:B.amm_pool_created?`${pe(B)} XRP`:"-"}),o.jsx("td",{className:"px-4 py-3 text-green-400 text-xs font-bold",children:s[B.id]?parseFloat(s[B.id]).toFixed(4):"-"}),o.jsxs("td",{className:"px-4 py-3 text-purple-200 text-xs font-mono",children:[Yt(B)," XRP"]}),o.jsxs("td",{className:"px-4 py-3 text-purple-300 text-xs font-mono",children:[B.amm_xrp_amount?B.amm_xrp_amount.toFixed(2):"0.00"," XRP"]}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${B.amm_pool_created?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:B.amm_pool_created?"✓":"○"})}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex gap-1 flex-wrap",children:[o.jsx("a",{href:`https://xrpl.services/?issuer=${B.issuer_address}&currency=${B.currency_code}&limit=1000000000`,target:"_blank",rel:"noopener noreferrer",className:"bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white font-bold text-xs px-2 py-1 rounded shadow-md",onClick:me=>{me.stopPropagation()},title:"Setup Trustline",children:"🔗 Trust"}),o.jsx("button",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white font-bold text-xs px-2 py-1 rounded shadow-md",onClick:me=>{me.stopPropagation(),localStorage.setItem("selectedTradeToken",JSON.stringify(B)),window.dispatchEvent(new CustomEvent("navigateToTrade",{detail:B}))},title:"Trade on AMM",children:"💱 Swap"}),o.jsx("button",{className:"bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-700 hover:to-slate-800 text-white font-bold text-xs px-2 py-1 rounded shadow-md",onClick:me=>{me.stopPropagation(),Oe(B)},title:"Post on X",children:"𝕏 Post"})]})}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex gap-1",children:[o.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white text-xs px-2 py-1 rounded",onClick:me=>{me.stopPropagation(),Re("edit",B)},title:"Edit Token",children:"✏️"}),o.jsx("button",{className:"bg-red-600 hover:bg-red-700 text-white text-xs px-2 py-1 rounded",onClick:me=>{me.stopPropagation(),Re("delete",B)},title:"Delete Token",children:"🗑️"})]})})]});return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-purple-200",children:"Dashboard"}),o.jsx("p",{className:"text-purple-400 mt-1",children:"Meme token factory control center"})]}),o.jsx("div",{className:"flex items-center gap-3",children:o.jsxs("button",{onClick:async()=>{if(!a){ye.error("Please connect a wallet first");return}T(!0),M(!0);try{const{data:B,error:me}=await Pe.from("activity_logs").select("*").eq("user_address",a.address).order("created_at",{ascending:!1}).limit(50);if(me)throw me;P(B||[])}catch(B){console.error("Error loading activities:",B),ye.error("Failed to load activities")}finally{M(!1)}},className:"btn text-purple-300 px-4 py-3 rounded-lg font-medium flex items-center gap-2",children:[o.jsx("span",{children:"📜"})," Activity"]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Total Tokens"}),o.jsx("div",{className:"text-3xl font-bold text-green-400",children:c.totalTokens}),j>0&&o.jsxs("div",{className:"text-green-300 text-sm mt-1",children:["+",j," (",j>0?"+":"",(j/c.totalTokens*100).toFixed(1),"%)"]}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Last 24h"})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Total XRP Locked (Live)"}),o.jsx("div",{className:"text-3xl font-bold text-green-400",children:f.totalXrpLocked.toFixed(2)}),o.jsxs("div",{className:"text-green-300 text-sm mt-1",children:["$",(f.totalXrpLocked*d).toFixed(2)," USD"]}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"In AMM pools from XRPL"})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Total Market Cap (Live)"}),o.jsx("div",{className:"text-3xl font-bold text-green-400",children:f.totalMarketCap.toFixed(2)}),o.jsxs("div",{className:"text-green-300 text-sm mt-1",children:["$",(f.totalMarketCap*d).toFixed(2)," USD"]}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"XRP value from XRPL"})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Total Holders (Live)"}),o.jsx("div",{className:"text-3xl font-bold text-green-400",children:_.totalTrustlines.toLocaleString()}),_.holders24hAgo>0&&o.jsxs("div",{className:`text-sm mt-1 ${_.totalHolders>_.holders24hAgo?"text-green-300":_.totalHolders<_.holders24hAgo?"text-red-300":"text-purple-400"}`,children:[_.totalHolders>_.holders24hAgo?"+":"",((_.totalHolders-_.holders24hAgo)/_.holders24hAgo*100).toFixed(1),"% holders"]}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Last 24h"})]})]}),fn.length>0&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200",children:"🔥 Top 3 Featured Tokens"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>J("grid"),className:`px-4 py-2 rounded-lg transition-all text-sm ${ne==="grid"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"▦ Grid"}),o.jsx("button",{onClick:()=>J("list"),className:`px-4 py-2 rounded-lg transition-all text-sm ${ne==="list"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"☰ List"})]})]}),ne==="grid"?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:fn.map(B=>o.jsx(Ss,{token:B,featured:!0},B.id))}):o.jsx("div",{className:"overflow-x-auto glass rounded-lg p-4",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-purple-900/30",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Token"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Supply"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Live Price"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Volume 24h"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Your LP"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Market Cap (Live)"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"XRP Locked (Live)"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Status"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Actions"})]})}),o.jsx("tbody",{children:fn.map(B=>o.jsx(Ra,{token:B},B.id))})]})})]}),o.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[o.jsx("button",{onClick:()=>sr("all"),className:`px-6 py-3 rounded-lg transition-all font-medium text-lg ${Vn==="all"?"bg-purple-600 text-white shadow-lg":"glass text-purple-300 hover:bg-purple-900/30"}`,children:"All Tokens"}),o.jsx("button",{onClick:()=>sr("user"),className:`px-6 py-3 rounded-lg transition-all font-medium text-lg ${Vn==="user"?"bg-purple-600 text-white shadow-lg":"glass text-purple-300 hover:bg-purple-900/30"}`,children:"User Tokens"})]}),Vn==="all"&&o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200",children:"All Tokens"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>ue("list"),className:`px-4 py-2 rounded-lg transition-all ${Z==="list"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"☰ List"}),o.jsx("button",{onClick:()=>ue("grid"),className:`px-4 py-2 rounded-lg transition-all ${Z==="grid"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"▦ Grid"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-6",children:[o.jsx("input",{type:"text",placeholder:"🔍 Search tokens...",value:Ae,onChange:B=>tt(B.target.value),className:"input text-purple-200 md:col-span-2"}),o.jsxs("select",{value:$e,onChange:B=>Xe(B.target.value),className:"input text-purple-200",children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"active",children:"Active Only"}),o.jsx("option",{value:"pending",children:"Pending Only"})]}),o.jsxs("select",{value:nt,onChange:B=>ft(B.target.value),className:"input text-purple-200",children:[o.jsx("option",{value:"newest",children:"Newest First"}),o.jsx("option",{value:"oldest",children:"Oldest First"}),o.jsx("option",{value:"marketcap",children:"Market Cap"}),o.jsx("option",{value:"supply",children:"Supply"})]})]}),o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"text-purple-400 text-sm",children:["Showing ",(jt-1)*Qr+1,"-",Math.min(jt*Qr,ot.length)," of ",ot.length," tokens"]}),Ue>1&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>nr(B=>Math.max(1,B-1)),disabled:jt===1,className:"px-3 py-1 btn text-purple-300 rounded disabled:opacity-50",children:"Previous"}),o.jsxs("span",{className:"text-purple-300 text-sm",children:["Page ",jt," of ",Ue]}),o.jsx("button",{onClick:()=>nr(B=>Math.min(Ue,B+1)),disabled:jt===Ue,className:"px-3 py-1 btn text-purple-300 rounded disabled:opacity-50",children:"Next"})]})]}),Z==="grid"?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:lr.map(B=>o.jsx(Ss,{token:B},B.id))}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-purple-900/30",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Token"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Supply"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Live Price"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Volume 24h"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Your LP"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Market Cap (Live)"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"XRP Locked (Live)"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Status"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Actions"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Admin"})]})}),o.jsx("tbody",{children:lr.map(B=>o.jsx(Ra,{token:B},B.id))})]})})]}),Vn==="memeking_disabled"&&o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200",children:"MemeKing Tokens"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>ue("list"),className:`px-4 py-2 rounded-lg transition-all ${Z==="list"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"☰ List"}),o.jsx("button",{onClick:()=>ue("grid"),className:`px-4 py-2 rounded-lg transition-all ${Z==="grid"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"▦ Grid"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-6",children:[o.jsx("input",{type:"text",placeholder:"🔍 Search tokens...",value:Ae,onChange:B=>tt(B.target.value),className:"input text-purple-200 md:col-span-2"}),o.jsxs("select",{value:$e,onChange:B=>Xe(B.target.value),className:"input text-purple-200",children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"active",children:"Active Only"}),o.jsx("option",{value:"pending",children:"Pending Only"})]}),o.jsxs("select",{value:nt,onChange:B=>ft(B.target.value),className:"input text-purple-200",children:[o.jsx("option",{value:"newest",children:"Newest First"}),o.jsx("option",{value:"oldest",children:"Oldest First"}),o.jsx("option",{value:"marketcap",children:"Market Cap"}),o.jsx("option",{value:"supply",children:"Supply"})]})]}),o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsxs("div",{className:"text-purple-400 text-sm",children:["Showing ",cr.filter(B=>{const me=B.token_name.toLowerCase().includes(Ae.toLowerCase())||B.issuer_address.toLowerCase().includes(Ae.toLowerCase()),De=$e==="all"||$e==="active"&&B.amm_pool_created||$e==="pending"&&!B.amm_pool_created;return me&&De}).length," of ",cr.length," MemeKing tokens"]})}),Z==="grid"?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:cr.filter(B=>{const me=B.token_name.toLowerCase().includes(Ae.toLowerCase())||B.issuer_address.toLowerCase().includes(Ae.toLowerCase()),De=$e==="all"||$e==="active"&&B.amm_pool_created||$e==="pending"&&!B.amm_pool_created;return me&&De}).sort((B,me)=>{var De,Ke;switch(nt){case"oldest":return new Date(B.created_at)-new Date(me.created_at);case"marketcap":return(((De=n[me.id])==null?void 0:De.marketCap)||0)-(((Ke=n[B.id])==null?void 0:Ke.marketCap)||0);case"supply":return me.supply-B.supply;default:return new Date(me.created_at)-new Date(B.created_at)}}).map(B=>renderTokenCard(B))}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-purple-500/20",children:[o.jsx("th",{className:"text-left py-3 px-4 text-purple-300",children:"Token"}),o.jsx("th",{className:"text-left py-3 px-4 text-purple-300",children:"Supply"}),o.jsx("th",{className:"text-left py-3 px-4 text-purple-300",children:"XRP Locked (Live)"}),o.jsx("th",{className:"text-left py-3 px-4 text-purple-300",children:"Price"}),o.jsx("th",{className:"text-left py-3 px-4 text-purple-300",children:"Market Cap (Live)"}),o.jsx("th",{className:"text-left py-3 px-4 text-purple-300",children:"Status"}),o.jsx("th",{className:"text-left py-3 px-4 text-purple-300",children:"Actions"})]})}),o.jsx("tbody",{children:cr.filter(B=>{const me=B.token_name.toLowerCase().includes(Ae.toLowerCase())||B.issuer_address.toLowerCase().includes(Ae.toLowerCase()),De=$e==="all"||$e==="active"&&B.amm_pool_created||$e==="pending"&&!B.amm_pool_created;return me&&De}).sort((B,me)=>{var De,Ke;switch(nt){case"oldest":return new Date(B.created_at)-new Date(me.created_at);case"marketcap":return(((De=n[me.id])==null?void 0:De.marketCap)||0)-(((Ke=n[B.id])==null?void 0:Ke.marketCap)||0);case"supply":return me.supply-B.supply;default:return new Date(me.created_at)-new Date(B.created_at)}}).map(B=>o.jsx(Ra,{token:B},B.id))})]})})]}),Vn==="user"&&o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200",children:"User Created Tokens"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>ue("list"),className:`px-4 py-2 rounded-lg transition-all ${Z==="list"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"☰ List"}),o.jsx("button",{onClick:()=>ue("grid"),className:`px-4 py-2 rounded-lg transition-all ${Z==="grid"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"▦ Grid"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-6",children:[o.jsx("input",{type:"text",placeholder:"🔍 Search tokens...",value:Ae,onChange:B=>tt(B.target.value),className:"input text-purple-200 md:col-span-2"}),o.jsxs("select",{value:$e,onChange:B=>Xe(B.target.value),className:"input text-purple-200",children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"active",children:"Active Only"}),o.jsx("option",{value:"pending",children:"Pending Only"})]}),o.jsxs("select",{value:nt,onChange:B=>ft(B.target.value),className:"input text-purple-200",children:[o.jsx("option",{value:"newest",children:"Newest First"}),o.jsx("option",{value:"oldest",children:"Oldest First"}),o.jsx("option",{value:"marketcap",children:"Market Cap"}),o.jsx("option",{value:"supply",children:"Supply"})]})]}),o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsxs("div",{className:"text-purple-400 text-sm",children:["Showing ",nn.filter(B=>{const me=B.token_name.toLowerCase().includes(Ae.toLowerCase())||B.issuer_address.toLowerCase().includes(Ae.toLowerCase()),De=$e==="all"||$e==="active"&&B.amm_pool_created||$e==="pending"&&!B.amm_pool_created;return me&&De}).length," of ",nn.length," user tokens"]})}),Z==="grid"?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:nn.filter(B=>{const me=B.token_name.toLowerCase().includes(Ae.toLowerCase())||B.issuer_address.toLowerCase().includes(Ae.toLowerCase()),De=$e==="all"||$e==="active"&&B.amm_pool_created||$e==="pending"&&!B.amm_pool_created;return me&&De}).sort((B,me)=>{switch(nt){case"newest":return new Date(me.created_at)-new Date(B.created_at);case"oldest":return new Date(B.created_at)-new Date(me.created_at);case"marketcap":return parseFloat(Yt(me))-parseFloat(Yt(B));case"supply":return me.supply-B.supply;default:return 0}}).map(B=>o.jsx(Ss,{token:B},B.id))}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-purple-900/30",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Token"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Supply"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Starting Price"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Live Price"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Volume 24h"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Your LP"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Starting Cap"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Starting XRP"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Status"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Actions"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Admin"})]})}),o.jsx("tbody",{children:nn.filter(B=>{const me=B.token_name.toLowerCase().includes(Ae.toLowerCase())||B.issuer_address.toLowerCase().includes(Ae.toLowerCase()),De=$e==="all"||$e==="active"&&B.amm_pool_created||$e==="pending"&&!B.amm_pool_created;return me&&De}).sort((B,me)=>{switch(nt){case"newest":return new Date(me.created_at)-new Date(B.created_at);case"oldest":return new Date(B.created_at)-new Date(me.created_at);case"marketcap":return parseFloat(Yt(me))-parseFloat(Yt(B));case"supply":return me.supply-B.supply;default:return 0}}).map(B=>o.jsx(Ra,{token:B},B.id))})]})})]}),xe&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-8 max-w-md w-full",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-4",children:"Password Required"}),o.jsx("p",{className:"text-purple-300 mb-6",children:"Enter password to add a token manually to the dashboard."}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Password"}),o.jsx("input",{type:"password",value:$,onChange:B=>re(B.target.value),onKeyPress:B=>B.key==="Enter"&&Gt(),className:"input w-full text-purple-200",placeholder:"Enter password",autoFocus:!0})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:Gt,className:"btn-primary text-white px-6 py-2 rounded-lg font-medium flex-1",children:"Continue"}),o.jsx("button",{onClick:()=>{de(!1),re("")},className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium",children:"Cancel"})]})]})}),v&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:"Add Token Manually"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Token Name *"}),o.jsx("input",{type:"text",value:F.name,onChange:B=>k({...F,name:B.target.value}),className:"input w-full text-purple-200",placeholder:"KOOL"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Issuer Address *"}),o.jsx("input",{type:"text",value:F.issuer,onChange:B=>k({...F,issuer:B.target.value}),className:"input w-full text-purple-200 font-mono",placeholder:"rXXXXXXXXXXXXXXXXXXXXXXXXXXXX"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Total Supply"}),o.jsx("input",{type:"number",value:F.supply,onChange:B=>k({...F,supply:B.target.value}),className:"input w-full text-purple-200",placeholder:"1000000"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"XRP Locked (for market cap calc)"}),o.jsx("input",{type:"number",step:"0.01",value:F.xrpLocked,onChange:B=>k({...F,xrpLocked:B.target.value}),className:"input w-full text-purple-200",placeholder:"1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Token Image (Optional)"}),o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("input",{type:"file",accept:"image/*",onChange:hn,className:"input w-full text-purple-200"}),o.jsx("p",{className:"text-purple-400 text-xs mt-1",children:"Upload an image for the token icon"})]}),V&&o.jsx("div",{className:"w-20 h-20 rounded-lg border-2 border-purple-500/30 overflow-hidden",children:o.jsx("img",{src:V,alt:"Preview",className:"w-full h-full object-cover"})})]})]})]}),o.jsxs("div",{className:"flex gap-3 mt-6",children:[o.jsx("button",{onClick:or,disabled:X,className:"btn-primary text-white px-6 py-2 rounded-lg font-medium flex-1 disabled:opacity-50",children:X?"Uploading...":"Add Token"}),o.jsx("button",{onClick:()=>{A(!1),k({name:"",issuer:"",supply:"1000000",xrpLocked:"1"}),D(null),se(null)},className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium",children:"Cancel"})]})]})}),N&&o.jsx(Rj,{token:N,onClose:()=>g(null)}),K&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-8 max-w-md w-full",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-4",children:"Admin Access Required"}),o.jsx("p",{className:"text-purple-300 mb-6",children:(we==null?void 0:we.type)==="delete"?`Delete token "${(Ww=we==null?void 0:we.token)==null?void 0:Ww.token_name}"?`:`Edit token "${(Xw=we==null?void 0:we.token)==null?void 0:Xw.token_name}"?`}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Admin Password"}),o.jsx("input",{type:"password",value:te,onChange:B=>le(B.target.value),onKeyPress:B=>B.key==="Enter"&&ze(),className:"input w-full text-purple-200",placeholder:"Enter admin password",autoFocus:!0})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:ze,className:"btn-primary text-white px-6 py-2 rounded-lg font-medium flex-1",children:"Confirm"}),o.jsx("button",{onClick:()=>{Q(!1),le(""),_e(null)},className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium",children:"Cancel"})]})]})}),E&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-8 max-w-md w-full",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-4",children:"Create Random Meme Token"}),o.jsx("p",{className:"text-purple-300 mb-6",children:"This will generate a random meme token with a 3-5 letter name, issue 1M tokens, and create an AMM pool with 1 XRP."}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Password Required"}),o.jsx("input",{type:"password",value:Y,onChange:B=>ee(B.target.value),onKeyPress:B=>B.key==="Enter"&&ar(),className:"input w-full text-purple-200",placeholder:"Enter password to create token",autoFocus:!0})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:ar,className:"btn-primary text-white px-6 py-2 rounded-lg font-medium flex-1",children:"Create Token"}),o.jsx("button",{onClick:()=>{L(!1),ee("")},className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium",children:"Cancel"})]})]})}),ae&&U&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-8 max-w-md w-full",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-2",children:"Token Created Successfully!"}),o.jsx("p",{className:"text-purple-300 text-lg font-bold",children:U.token_name}),o.jsx("p",{className:"text-purple-400 text-sm mt-2",children:"Your meme token is now live on the XRPL!"})]}),o.jsxs("div",{className:"space-y-3 mb-6",children:[o.jsx("a",{href:`https://testnet.xrpl.org/transactions/${U.tx_hash}`,target:"_blank",rel:"noopener noreferrer",className:"btn-primary text-white w-full px-6 py-3 rounded-lg font-medium text-center block",children:"View on XRPL Explorer"}),o.jsx("a",{href:`https://firstledger.net/token/${U.issuer_address}/${_t.Buffer.from(U.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0")}`,target:"_blank",rel:"noopener noreferrer",className:"btn text-purple-300 w-full px-6 py-3 rounded-lg font-medium text-center block",children:"View on FirstLedger"}),o.jsx("a",{href:`https://xmagnetic.org/dex/${U.currency_code}+${U.issuer_address}_XRP+XRP?network=testnet`,target:"_blank",rel:"noopener noreferrer",className:"btn text-purple-300 w-full px-6 py-3 rounded-lg font-medium text-center block",children:"Trade on Magnetic DEX"}),o.jsx("button",{onClick:()=>{g(U),he(!1),G(null)},className:"btn text-purple-300 w-full px-6 py-3 rounded-lg font-medium",children:"View Token Details"})]}),o.jsx("button",{onClick:()=>{he(!1),G(null)},className:"btn text-purple-400 w-full px-6 py-2 rounded-lg font-medium",children:"Close"})]})}),be&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-8 max-w-2xl w-full",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:"Edit Token"}),o.jsxs("div",{className:"space-y-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Token Name"}),o.jsx("input",{type:"text",value:be.token_name,onChange:B=>Ie({...be,token_name:B.target.value}),className:"input w-full text-purple-200"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Total Supply"}),o.jsx("input",{type:"number",value:be.supply,onChange:B=>Ie({...be,supply:B.target.value}),className:"input w-full text-purple-200"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"XRP Locked"}),o.jsx("input",{type:"number",step:"0.01",value:be.amm_xrp_amount||0,onChange:B=>Ie({...be,amm_xrp_amount:B.target.value}),className:"input w-full text-purple-200"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Asset Amount in Pool"}),o.jsx("input",{type:"number",value:be.amm_asset_amount||0,onChange:B=>Ie({...be,amm_asset_amount:B.target.value}),className:"input w-full text-purple-200"})]}),o.jsxs("div",{className:"border-t border-purple-500/20 pt-4",children:[o.jsx("label",{className:"block text-purple-300 mb-3",children:"Featured Token Position"}),o.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[o.jsx("button",{type:"button",onClick:()=>Ie({...be,is_featured:!1,featured_order:null}),className:`px-4 py-2 rounded-lg transition-colors ${be.is_featured?"glass text-purple-300 hover:bg-purple-500/20":"bg-purple-600 text-white"}`,children:"None"}),[1,2,3].map(B=>o.jsxs("button",{type:"button",onClick:()=>Ie({...be,is_featured:!0,featured_order:B}),className:`px-4 py-2 rounded-lg transition-colors ${be.is_featured&&be.featured_order===B?"bg-purple-600 text-white":"glass text-purple-300 hover:bg-purple-500/20"}`,children:["Top ",B]},B))]}),o.jsx("p",{className:"text-purple-400 text-xs mt-2",children:be.is_featured&&be.featured_order?`This token will appear in position ${be.featured_order} on the featured list`:"This token will not be featured"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Token Icon"}),o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("input",{type:"file",accept:"image/*",onChange:Qe,className:"input w-full text-purple-200"},be.id),o.jsx("p",{className:"text-purple-400 text-xs mt-1",children:"Upload new image or leave blank to keep current"})]}),(p||be.image_url)&&o.jsxs("div",{className:"w-20 h-20 rounded-lg border-2 border-purple-500/30 overflow-hidden bg-gradient-to-br from-purple-900 to-purple-800 flex items-center justify-center",children:[o.jsx("img",{src:p||be.image_url,alt:"Preview",className:"w-full h-full object-cover",onError:B=>{B.target.style.display="none"}}),!p&&!be.image_url&&o.jsx("span",{className:"text-3xl",children:be.token_name[0]})]})]})]}),o.jsxs("div",{className:"border-t border-purple-500/20 pt-4",children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Confirm Admin Password"}),o.jsx("input",{type:"password",value:te,onChange:B=>le(B.target.value),onKeyPress:B=>B.key==="Enter"&&Fe(),className:"input w-full text-purple-200",placeholder:"Enter admin password to save"})]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:Fe,className:"btn-primary text-white px-6 py-2 rounded-lg font-medium flex-1",children:"Save Changes"}),o.jsx("button",{onClick:()=>{Ie(null),le("")},className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium",children:"Cancel"})]})]})}),ce&&o.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg max-w-2xl w-full p-8",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:Ye?"✅ Token Created Successfully!":"🚀 Creating Random Meme Token"}),o.jsx("div",{className:"space-y-4 mb-6",children:Te.map((B,me)=>o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold",children:B.status==="complete"?o.jsx("div",{className:"text-green-400 text-2xl",children:"✓"}):B.status==="active"?o.jsx("div",{className:"w-6 h-6 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"}):B.status==="error"?o.jsx("div",{className:"text-red-400 text-2xl",children:"✗"}):o.jsx("div",{className:"w-6 h-6 border-2 border-purple-900 rounded-full"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:`font-medium ${B.status==="complete"?"text-green-400":B.status==="active"?"text-purple-200":B.status==="error"?"text-red-400":"text-purple-500"}`,children:B.title}),B.data&&o.jsx("div",{className:"text-sm text-purple-400 mt-1",children:B.data}),B.txHash&&o.jsx("a",{href:`https://testnet.xrpl.org/transactions/${B.txHash}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-400 hover:text-blue-300 mt-1 inline-block",children:"View Transaction →"}),B.error&&o.jsxs("div",{className:"text-sm text-red-400 mt-1",children:["Error: ",B.error]})]})]},me))}),Ye&&_n&&o.jsx("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-6 mb-6",children:o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-green-400 mb-1",children:"Token Name"}),o.jsx("div",{className:"text-green-200 font-bold text-lg",children:_n.name})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-green-400 mb-1",children:"Supply"}),o.jsx("div",{className:"text-green-200 font-mono",children:_n.supply.toLocaleString()})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-green-400 mb-1",children:"Issuer"}),o.jsxs("div",{className:"text-green-200 font-mono text-xs",children:[_n.issuer.substring(0,20),"..."]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-green-400 mb-1",children:"Status"}),o.jsx("div",{className:"text-green-200",children:"✓ AMM Pool Created"})]})]})}),Ye&&o.jsx("button",{onClick:()=>{fe(!1),Le([]),ie(null)},className:"btn-primary text-white px-6 py-3 rounded-lg font-medium w-full",children:"Close"}),!Ye&&o.jsx("div",{className:"text-center text-purple-400 text-sm",children:"Please wait while we create your token..."})]})}),I&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg max-w-4xl w-full max-h-[80vh] overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-purple-500/20",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200",children:"My App Activity"}),o.jsx("button",{onClick:()=>T(!1),className:"text-purple-400 hover:text-purple-200 text-2xl",children:"×"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:H?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-4xl mb-4 animate-pulse",children:"⏳"}),o.jsx("div",{className:"text-purple-200",children:"Loading activities..."})]}):C.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-6xl mb-4",children:"📭"}),o.jsx("h4",{className:"text-xl font-bold text-purple-200 mb-2",children:"No Activity Yet"}),o.jsx("p",{className:"text-purple-400",children:"Your app activity will appear here"})]}):o.jsx("div",{className:"space-y-3",children:C.map(B=>o.jsx("div",{className:"glass rounded-lg p-4 border-l-4 border-green-500",children:o.jsx("div",{className:"flex items-start justify-between gap-4",children:o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-purple-200 font-medium mb-1",children:B.action_type.replace(/_/g," ").replace(/\b\w/g,me=>me.toUpperCase())}),o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:B.description}),B.details&&Object.keys(B.details).length>0&&o.jsxs("div",{className:"flex flex-wrap gap-3 text-xs",children:[B.details.amount&&o.jsxs("span",{className:"text-purple-300",children:["Amount: ",B.details.amount]}),B.details.xrpCost&&o.jsxs("span",{className:"text-purple-300",children:["XRP: ",B.details.xrpCost]}),B.details.tradeType&&o.jsx("span",{className:`px-2 py-1 rounded ${B.details.tradeType==="BUY"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:B.details.tradeType})]}),o.jsxs("div",{className:"flex items-center gap-3 mt-3 text-xs text-purple-500",children:[o.jsx("span",{children:new Date(B.created_at).toLocaleString()}),B.tx_hash&&o.jsx("a",{href:`https://testnet.xrpl.org/transactions/${B.tx_hash}`,target:"_blank",rel:"noopener noreferrer",className:"text-purple-400 hover:text-purple-300",children:"View TX"})]})]})})},B.id))})})]})})]})}function Lj({isOpen:t,steps:e,currentStep:n,onClose:r,canClose:s,title:i,successTitle:a,failTitle:l}){if(!t)return null;const c=S=>S<n?"completed":S===n?"active":"pending",u=S=>S==="completed"?"✓":S==="active"?"⏳":"○",d=e.filter((S,j)=>j<=n).length,h=Math.min(100,d/e.length*100),f=i||"🚀 Creating Token on XRPL",m=a||"🎉 Token Created Successfully!",_=l||"❌ Token Creation Failed";return o.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto relative",children:[o.jsx("button",{onClick:r,className:"absolute top-4 right-4 w-10 h-10 rounded-lg glass hover:bg-red-500/20 text-purple-300 hover:text-red-300 flex items-center justify-center transition-all z-10 text-2xl font-bold","aria-label":"Close",children:"×"}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-3xl font-bold text-purple-200 mb-2",children:e.some(S=>S.error)?_:n>=e.length?m:f}),o.jsx("p",{className:"text-purple-400",children:e.some(S=>S.error)?"An error occurred during the transaction. Please review the details below.":n>=e.length?"Your transaction has been completed successfully":"Please wait while we process your transaction..."})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm text-purple-300 mb-1",children:[o.jsx("span",{children:"Progress"}),o.jsxs("span",{children:[Math.round(h),"%"]})]}),o.jsx("div",{className:"w-full bg-purple-900/30 rounded-full h-3 overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all duration-500 ease-out rounded-full",style:{width:`${h}%`}})})]}),o.jsx("div",{className:"space-y-3",children:e.map((S,j)=>{const y=c(j),x=u(y);return o.jsxs("div",{className:`flex items-start gap-4 p-4 rounded-lg transition-all ${S.error?"bg-red-500/10 border border-red-500/30":y==="completed"?"bg-green-500/10 border border-green-500/30":y==="active"?"bg-purple-500/20 border border-purple-500/50 animate-pulse":"bg-purple-900/20 border border-purple-500/20"}`,children:[o.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center font-bold ${S.error?"bg-red-500 text-white":y==="completed"?"bg-green-500 text-white":y==="active"?"bg-purple-500 text-white":"bg-purple-900/50 text-purple-400"}`,children:S.error?"✕":x}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:`font-semibold mb-1 ${S.error?"text-red-300":y==="completed"?"text-green-300":y==="active"?"text-purple-200":"text-purple-400"}`,children:S.title}),o.jsx("div",{className:`text-sm ${S.error?"text-red-300":y==="completed"||y==="active"?"text-purple-300":"text-purple-500"}`,children:S.description}),S.txHash&&o.jsxs("a",{href:`https://testnet.xrpl.org/transactions/${S.txHash}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-purple-400 hover:text-purple-300 mt-2 inline-block",children:["View Transaction: ",S.txHash.slice(0,20),"..."]})]})]},j)})}),s&&o.jsx("div",{className:"flex gap-3 pt-4",children:o.jsx("button",{onClick:r,className:"btn-primary text-white px-6 py-3 rounded-lg font-medium flex-1",children:e.some(S=>S.error)?"Close":"Close & View Token"})}),!s&&o.jsx("div",{className:"text-center text-purple-400 text-sm",children:"Please wait while we create your token..."})]})]})})}const kX="sEd7bAfzqZWKxaatJpoWzTvENyaTg1Y",mS="rKxBBMmY969Ph1y63ddVfYyN7xmxwDfVq6",OX="sEd7W72aANTbLTG98XDhU1yfotPJdhu",IX="rphatRpwXcPAo7CVm46dC78JAQ6kLMqb2M";function PX(){const[t,e]=z.useState([]),[n,r]=z.useState("all"),[s,i]=z.useState(""),[a,l]=z.useState("list"),[c,u]=z.useState("newest"),[d,h]=z.useState([]),[f,m]=z.useState(null),[_,S]=z.useState({}),[j,y]=z.useState({}),[x,b]=z.useState(!1),[v,A]=z.useState("add"),[E,L]=z.useState(""),[Y,ee]=z.useState(!1),[U,G]=z.useState(!1),[ae,he]=z.useState("manual"),[xe,de]=z.useState([]),[$,re]=z.useState(null),[F,k]=z.useState(null),[R,D]=z.useState(!1),[V,se]=z.useState({name:"",issuer:"",supply:"1000000",xrpLocked:"1",image:null,tfTransferable:!1,requireDestTag:!1,description:"",twitterHandle:"",websiteUrl:""}),[X,q]=z.useState(null),[Z,ue]=z.useState(!1),[ne,J]=z.useState(null),[N,g]=z.useState(!1),[I,T]=z.useState(!1),[C,P]=z.useState([]),[H,M]=z.useState(0),[K,Q]=z.useState(!1);z.useEffect(()=>{be(),te(),le();const ie=xd(()=>{be()});return()=>ie()},[]),z.useEffect(()=>{t.length>0&&Ie()},[t]),z.useEffect(()=>{f&&Object.keys(_).length>0&&He()},[f,_]),z.useEffect(()=>{f&&we()},[f]);const te=()=>{const ie=localStorage.getItem("connectedWallet");ie&&m(JSON.parse(ie))},le=async()=>{try{const{data:ie,error:Ae}=await Pe.from("wallets").select("*").order("created_at",{ascending:!1});if(Ae)throw Ae;de(ie||[]),ie&&ie.length>=2?(re(ie[0]),k(ie[1])):ie&&ie.length>=1&&re(ie[0])}catch(ie){console.error("Error loading wallets:",ie)}},we=async()=>{if(f)try{const{data:ie,error:Ae}=await Pe.from("token_favorites").select("token_id").eq("user_address",f.address);if(Ae)throw Ae;h((ie==null?void 0:ie.map(tt=>tt.token_id))||[])}catch(ie){console.error("Error loading favorites:",ie)}},_e=async(ie,Ae)=>{if(Ae&&Ae.stopPropagation(),!f){ye.error("Connect wallet to favorite tokens");return}try{if(d.includes(ie)){const{error:$e}=await Pe.from("token_favorites").delete().eq("user_address",f.address).eq("token_id",ie);if($e)throw $e;h(d.filter(Xe=>Xe!==ie)),ye.success("Removed from favorites")}else{const{error:$e}=await Pe.from("token_favorites").insert({user_address:f.address,token_id:ie});if($e)throw $e;h([...d,ie]),ye.success("Added to favorites")}}catch(tt){console.error("Error toggling favorite:",tt),ye.error("Failed to update favorite")}},be=async()=>{try{const{data:ie,error:Ae}=await Pe.from("meme_tokens").select("*").order("created_at",{ascending:!1});if(Ae)throw Ae;e(ie||[])}catch(ie){console.error("Error loading tokens:",ie)}},Ie=async()=>{var ie;try{const Ae=new Ve.Client("wss://xrplcluster.com");await Ae.connect();const tt={};for(const $e of t)if($e.amm_pool_created)try{const Xe=$e.currency_code.length>3?_t.Buffer.from($e.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):$e.currency_code,nt=await Ae.request({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:Xe,issuer:$e.issuer_address},ledger_index:"validated"});if(nt.result.amm){const ft=nt.result.amm,jt=parseFloat(ft.amount)/1e6,nr=parseFloat(ft.amount2.value),rr=parseFloat(((ie=ft.lp_token)==null?void 0:ie.value)||0);tt[$e.id]={xrpAmount:jt,tokenAmount:nr,lpTokens:rr,price:jt/nr,accountId:ft.account}}}catch(Xe){console.error(`Error fetching pool data for ${$e.token_name}:`,Xe.message)}S(tt),await Ae.disconnect()}catch(Ae){console.error("Error fetching pools data:",Ae)}},He=async()=>{if(!f)return;const ie=new Ve.Client("wss://xrplcluster.com");try{await ie.connect();const Ae=await ie.request({command:"account_lines",account:f.address,ledger_index:"validated"}),tt={};Ae.result.lines.forEach($e=>{const Xe=Object.entries(_).find(([nt,ft])=>ft.accountId===$e.account);if(Xe){const[nt,ft]=Xe,jt=parseFloat($e.balance),nr=jt/ft.lpTokens*100;tt[nt]={balance:jt,share:nr}}}),y(tt),await ie.disconnect()}catch(Ae){console.error("Error fetching LP balances:",Ae)}},O=async()=>{if(!V.name||!V.issuer){ye.error("Token name and issuer are required");return}try{let ie=null;if(V.image){ue(!0),ye.loading("Uploading image...");try{ie=await Mf(V.image),ye.dismiss(),ye.success("Image uploaded successfully!")}catch{ye.dismiss(),ye.error("Failed to upload image"),ue(!1);return}ue(!1)}const{error:Ae}=await Pe.from("meme_tokens").insert([{token_name:V.name,currency_code:V.name,issuer_address:V.issuer,receiver_address:"Manual Entry",supply:parseFloat(V.supply),amm_xrp_amount:parseFloat(V.xrpLocked),amm_pool_created:!0,status:"manual",amm_asset_amount:parseFloat(V.supply)*.9,image_url:ie,description:V.description||null,twitter_handle:V.twitterHandle||null,website_url:V.websiteUrl||null}]);if(Ae)throw Ae;ye.success(`Token ${V.name} added successfully!`),ee(!1),se({name:"",issuer:"",supply:"1000000",xrpLocked:"1",image:null,tfTransferable:!1,requireDestTag:!1,description:"",twitterHandle:"",websiteUrl:""}),q(null),be()}catch(ie){console.error("Error adding token:",ie),ye.error("Failed to add token")}},p=async ie=>{const Ae=ie.target.files[0];if(!Ae)return;if(Ae.size>5*1024*1024){ye.error("Image must be less than 5MB");return}const tt=new FileReader;tt.onloadend=()=>{q(tt.result)},tt.readAsDataURL(Ae),se({...V,image:Ae})},w=async()=>{var Ae,tt,$e;if(!V.name){ye.error("Token name is required");return}D(!0),ee(!1),T(!0),Q(!1);const ie=[{title:"Connecting to XRPL",description:"Establishing connection to XRP Ledger testnet"},{title:"Validating Wallets",description:"Checking issuer and receiver wallet balances"},{title:"Creating Trust Line",description:"Setting up trust line for the new token"},{title:"Issuing Tokens",description:"Minting tokens to receiver wallet"}];V.image&&ie.push({title:"Uploading Image",description:"Uploading token image to IPFS"}),ie.push({title:"Saving to Database",description:"Storing token information"}),parseFloat(V.xrpLocked)>0&&ie.push({title:"Creating AMM Pool",description:"Setting up automated market maker pool"}),ie.push({title:"Complete",description:"Token creation finished successfully"}),P(ie),M(0);try{M(0);const Xe=new Ve.Client("wss://xrplcluster.com");await Xe.connect();const nt=Ve.Wallet.fromSeed(kX),ft=Ve.Wallet.fromSeed(OX);M(1);try{await Xe.request({command:"account_info",account:nt.address})}catch(Gt){if(((Ae=Gt.data)==null?void 0:Ae.error)==="actNotFound"){const hn=[...ie];hn[1]={...hn[1],description:`Error: Issuer wallet not funded. Address: ${nt.address}`,error:!0},P(hn),Q(!0),await Xe.disconnect(),D(!1);return}}try{await Xe.request({command:"account_info",account:ft.address})}catch(Gt){if(((tt=Gt.data)==null?void 0:tt.error)==="actNotFound"){const hn=[...ie];hn[1]={...hn[1],description:`Error: Receiver wallet not funded. Address: ${ft.address}`,error:!0},P(hn),Q(!0),await Xe.disconnect(),D(!1);return}}if(M(2),!V.tfTransferable){const Gt={TransactionType:"AccountSet",Account:nt.address,SetFlag:8},hn=await Xe.autofill(Gt),or=nt.sign(hn),ar=await Xe.submitAndWait(or.tx_blob);if(ar.result.meta.TransactionResult!=="tesSUCCESS")throw new Error("Failed to disable rippling on issuer: "+ar.result.meta.TransactionResult)}const jt=V.name.length<=3?V.name.toUpperCase():_t.Buffer.from(V.name,"utf8").toString("hex").toUpperCase().padEnd(40,"0"),nr={TransactionType:"TrustSet",Account:ft.address,LimitAmount:{currency:jt,issuer:nt.address,value:V.supply.toString()}};V.tfTransferable||(nr.Flags=Ve.TrustSetFlags.tfSetNoRipple);const rr=await Xe.autofill(nr),wd=ft.sign(rr),Vn=await Xe.submitAndWait(wd.tx_blob);if(Vn.result.meta.TransactionResult!=="tesSUCCESS")throw new Error("Trust line creation failed: "+Vn.result.meta.TransactionResult);const sr=[...ie];sr[2]={...sr[2],txHash:Vn.result.hash},P(sr),M(3);const Qr={TransactionType:"Payment",Account:nt.address,Destination:ft.address,Amount:{currency:jt,value:V.supply.toString(),issuer:nt.address}};V.requireDestTag&&(Qr.DestinationTag=1);const Eo=await Xe.autofill(Qr),si=nt.sign(Eo),Tr=await Xe.submitAndWait(si.tx_blob);if(Tr.result.meta.TransactionResult!=="tesSUCCESS")throw new Error("Token issuance failed: "+Tr.result.meta.TransactionResult);const ii=[...sr];ii[3]={...ii[3],txHash:Tr.result.hash},P(ii);let Vt=4,ir=null;if(V.image){M(Vt);try{ir=await Mf(V.image)}catch(Gt){console.error("Image upload failed:",Gt)}Vt++}M(Vt);const{data:Es,error:Pa}=await Pe.from("meme_tokens").insert([{token_name:V.name,currency_code:V.name,issuer_address:nt.address,receiver_address:ft.address,supply:parseFloat(V.supply),tx_hash:Tr.result.hash,status:"issued",amm_pool_created:!1,image_url:ir,description:V.description||null,twitter_handle:V.twitterHandle||null,website_url:V.websiteUrl||null}]).select().single();if(Pa)throw Pa;if(Vt++,parseFloat(V.xrpLocked)>0){M(Vt);try{const Gt=parseFloat(V.supply)*.9,hn={TransactionType:"AMMCreate",Account:ft.address,Amount:{currency:jt,value:Gt.toString(),issuer:nt.address},Amount2:Ve.xrpToDrops(V.xrpLocked),TradingFee:500},or=await Xe.autofill(hn),ar=ft.sign(or),Yt=await Xe.submitAndWait(ar.tx_blob);if(Yt.result.meta.TransactionResult==="tesSUCCESS"){await Pe.from("meme_tokens").update({amm_pool_created:!0,amm_tx_hash:Yt.result.hash,amm_asset_amount:Gt,amm_xrp_amount:parseFloat(V.xrpLocked),status:"amm_created"}).eq("id",Es.id);const Ar=[...ii];Ar[Vt]={...Ar[Vt],txHash:Yt.result.hash},P(Ar)}}catch(Gt){console.error("AMM creation error:",Gt)}Vt++}await Xe.disconnect(),M(Vt),Q(!0),await Pv(Es.id),await Ws({userAddress:mS,actionType:Xs.TOKEN_CREATED,description:`Created token ${V.name} with supply of ${V.supply}`,details:{tokenName:V.name,supply:V.supply,xrpLocked:V.xrpLocked,hasAMM:parseFloat(V.xrpLocked)>0},txHash:($e=Tr==null?void 0:Tr.result)==null?void 0:$e.hash,tokenId:Es==null?void 0:Es.id}),se({name:"",issuer:"",supply:"1000000",xrpLocked:"1",image:null,tfTransferable:!1,requireDestTag:!1}),q(null),he("manual"),G(!1),await be(),setTimeout(()=>{T(!1),P([]),M(0),Q(!1)},3e3)}catch(Xe){console.error("Error creating token:",Xe);const nt=[...ie],ft=H<ie.length?H:ie.length-1;nt[ft]={...nt[ft],description:`Error: ${Xe.message||"Unknown error occurred"}`,error:!0},P(nt),Q(!0),D(!1)}},W=()=>{if(E!=="divercity"){ye.error("Incorrect password!");return}b(!1),L(""),v==="create"?G(!0):ee(!0)},oe=()=>{A("add"),b(!0)},ce=()=>{A("create"),b(!0)},fe=ie=>{const Ae=Le(ie),tt=parseFloat(ie.total_supply)||parseFloat(ie.supply)||0;return Ae*tt},Te=ie=>!ie.amm_pool_created||!ie.amm_xrp_amount||!ie.amm_asset_amount?0:ie.amm_xrp_amount/ie.amm_asset_amount,Le=ie=>{const Ae=_[ie.id];return Ae&&Ae.price?Ae.price:Te(ie)},Me=ie=>{const Ae=_[ie.id];if(!Ae||!Ae.price||!ie.amm_xrp_amount||!ie.amm_asset_amount)return"0.00";const tt=Ae.price,$e=ie.amm_xrp_amount/ie.amm_asset_amount;return!$e||$e===0?"0.00":((tt-$e)/$e*100).toFixed(2)},ke=ie=>{const Ae=Te(ie),tt=fe(ie),$e=_t.Buffer.from(ie.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"),Xe=`https://xrpl.services/?issuer=${ie.issuer_address}&currency=${$e}&limit=${ie.supply}`,nt=`https://xmagnetic.org/dex/${ie.currency_code}+${ie.issuer_address}_XRP+XRP?network=mainnet`,ft=`🚀 ${ie.token_name} Token Info

💰 Supply: ${ie.supply.toLocaleString()}
📊 Price: ${Ae} XRP
💎 Market Cap: ${tt} XRP
🔒 XRP Locked: ${ie.amm_xrp_amount||0} XRP
✅ Status: ${ie.amm_pool_created?"AMM Pool Active":"Pending"}

🔗 Trust Line:
${Xe}

💱 Trade on Magnetic:
${nt}

#XRPL #Crypto #MemeToken`,jt=`https://twitter.com/intent/tweet?text=${encodeURIComponent(ft)}`;window.open(jt,"_blank","width=550,height=420")},Ye=t.filter(ie=>{const Ae=ie.token_name.toLowerCase().includes(s.toLowerCase()),tt=n==="all"||n==="active"&&ie.amm_pool_created||n==="pending"&&!ie.amm_pool_created||n==="favorites"&&d.includes(ie.id);return Ae&&tt}).sort((ie,Ae)=>{switch(c){case"newest":return new Date(Ae.created_at)-new Date(ie.created_at);case"oldest":return new Date(ie.created_at)-new Date(Ae.created_at);case"name-asc":return ie.token_name.localeCompare(Ae.token_name);case"name-desc":return Ae.token_name.localeCompare(ie.token_name);case"supply-high":return Ae.supply-ie.supply;case"supply-low":return ie.supply-Ae.supply;case"price-high":return Te(Ae)-Te(ie);case"price-low":return Te(ie)-Te(Ae);default:return 0}}),ri=({token:ie})=>{var tt,$e;const Ae=d.includes(ie.id);return o.jsxs("div",{className:"glass rounded-lg p-6 space-y-4 hover:scale-105 transition-transform cursor-pointer relative",onClick:()=>{J(ie),g(!0)},children:[o.jsx("button",{onClick:Xe=>_e(ie.id,Xe),className:"absolute top-4 right-4 text-2xl hover:scale-110 transition-transform z-10",title:Ae?"Remove from favorites":"Add to favorites",children:Ae?"⭐":"☆"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(xn,{token:ie,size:"lg"}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200",children:ie.token_name}),o.jsx("button",{onClick:Xe=>_e(ie.id,Xe),className:"text-xl hover:scale-110 transition-transform",children:d.includes(ie.id)?"⭐":"☆"})]}),o.jsx("p",{className:"text-purple-400 text-sm",children:"Meme Token"})]})]}),o.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${ie.amm_pool_created?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:ie.amm_pool_created?"🟢 Live":"🟡 Pending"})]}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400 text-xs",children:"Total Supply"}),o.jsx("span",{className:"text-purple-200 text-sm font-bold",children:ie.supply.toLocaleString()})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400 text-xs",children:"Currency Code"}),o.jsx("span",{className:"text-purple-200 font-mono text-xs",children:ie.currency_code})]}),ie.amm_pool_created&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400 text-xs",children:"Live Price"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-green-400 text-sm font-bold",children:[Le(ie).toFixed(8)," XRP"]}),o.jsxs("span",{className:`text-xs font-medium px-2 py-0.5 rounded ${parseFloat(Me(ie))>=0?"text-green-300 bg-green-500/10":"text-red-300 bg-red-500/10"}`,children:[parseFloat(Me(ie))>=0?"+":"",Me(ie),"%"]})]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400 text-xs",children:"Market Cap (Live)"}),o.jsxs("span",{className:"text-purple-200 text-sm font-bold",children:[fe(ie).toFixed(2)," XRP"]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400 text-xs",children:"Liquidity (XRP)"}),o.jsxs("span",{className:"text-purple-200 text-sm font-bold",children:[(tt=_[ie.id])!=null&&tt.xrpAmount?_[ie.id].xrpAmount.toFixed(2):ie.amm_xrp_amount," XRP"]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400 text-xs",children:"Volume 24h"}),o.jsx("span",{className:"text-purple-200 text-sm font-bold",children:ie.amm_pool_created?`${(((($e=_[ie.id])==null?void 0:$e.xrpAmount)||ie.amm_xrp_amount||0)*.15).toFixed(2)} XRP`:"-"})]}),o.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-purple-500/20",children:[o.jsx("span",{className:"text-purple-400 text-xs",children:"Your LP"}),j[ie.id]?o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-green-400 text-sm font-bold",children:j[ie.id].balance.toFixed(4)}),o.jsxs("div",{className:"text-green-500 text-xs",children:[j[ie.id].share.toFixed(2),"%"]})]}):o.jsx("span",{className:"text-purple-500 text-sm font-bold",children:"-"})]})]}),o.jsxs("div",{className:"pt-2 border-t border-purple-500/20",children:[o.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"Issuer Address"}),o.jsx("div",{className:"text-purple-300 text-xs font-mono bg-black/30 p-2 rounded break-all",children:ie.issuer_address})]}),o.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-purple-500/20",children:[o.jsx("span",{className:"text-purple-500 text-xs",children:"Created"}),o.jsx("span",{className:"text-purple-400 text-xs",children:new Date(ie.created_at).toLocaleString()})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx("a",{href:`https://firstledger.net/token/${ie.issuer_address}/${_t.Buffer.from(ie.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0")}`,target:"_blank",rel:"noopener noreferrer",className:"btn text-purple-300 text-xs px-2 py-2 rounded-lg text-center",onClick:Xe=>{Xe.stopPropagation()},title:"View on FirstLedger",children:"📊 FirstLedger"}),o.jsx("a",{href:`https://xmagnetic.org/dex/${ie.currency_code}+${ie.issuer_address}_XRP+XRP?network=mainnet`,target:"_blank",rel:"noopener noreferrer",className:"btn-primary text-white text-xs px-2 py-2 rounded-lg text-center",onClick:Xe=>{Xe.stopPropagation()},title:"Trade on xMagnetic DEX",children:"💱 Trade"}),o.jsx("button",{className:"btn text-purple-300 text-xs px-2 py-2 rounded-lg",onClick:Xe=>{Xe.stopPropagation(),ke(ie)},title:"Post on X",children:"𝕏 Post"}),o.jsx("a",{href:`https://xmagnetic.org/amm/${ie.currency_code}+${ie.issuer_address}_XRP+XRP?network=mainnet`,target:"_blank",rel:"noopener noreferrer",className:"btn text-purple-300 text-xs px-2 py-2 rounded-lg text-center",onClick:Xe=>{Xe.stopPropagation()},title:"AMM Pool",children:"🔗 AMM Pool"}),o.jsx("a",{href:`https://xrpscan.com/account/${ie.issuer_address}`,target:"_blank",rel:"noopener noreferrer",className:"btn text-purple-300 text-xs px-2 py-2 rounded-lg text-center",onClick:Xe=>{Xe.stopPropagation()},title:"View Issuer on XRPScan",children:"📋 View Issuer"})]})]})},_n=({token:ie})=>{var Ae,tt;return o.jsxs("tr",{className:"border-t border-purple-500/20 hover:bg-purple-900/20 cursor-pointer",onClick:()=>{J(ie),g(!0)},children:[o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(xn,{token:ie,size:"sm"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-purple-200",children:ie.token_name}),o.jsx("div",{className:"text-purple-400 text-xs",children:ie.currency_code})]}),o.jsx("button",{onClick:$e=>_e(ie.id,$e),className:"text-lg hover:scale-110 transition-transform",children:d.includes(ie.id)?"⭐":"☆"})]})]})}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-purple-200 font-bold",children:Le(ie).toFixed(8)}),o.jsx("div",{className:"text-purple-400 text-xs",children:"XRP"})]}),ie.amm_pool_created&&o.jsxs("span",{className:`text-xs font-medium px-1.5 py-0.5 rounded whitespace-nowrap ${parseFloat(Me(ie))>=0?"text-green-300 bg-green-500/10":"text-red-300 bg-red-500/10"}`,children:[parseFloat(Me(ie))>=0?"+":"",Me(ie),"%"]})]})}),o.jsx("td",{className:"px-4 py-3 text-purple-300",children:ie.amm_pool_created?`${((((Ae=_[ie.id])==null?void 0:Ae.xrpAmount)||ie.amm_xrp_amount||0)*.15).toFixed(2)} XRP`:"-"}),o.jsx("td",{className:"px-4 py-3",children:j[ie.id]?o.jsxs("div",{children:[o.jsx("div",{className:"text-green-200 font-medium",children:j[ie.id].balance.toFixed(4)}),o.jsxs("div",{className:"text-green-400 text-xs",children:[j[ie.id].share.toFixed(2),"%"]})]}):o.jsx("span",{className:"text-purple-500",children:"-"})}),o.jsxs("td",{className:"px-4 py-3 text-purple-200",children:[fe(ie).toFixed(2)," XRP"]}),o.jsx("td",{className:"px-4 py-3 text-purple-200 font-bold",children:(tt=_[ie.id])!=null&&tt.xrpAmount?`${_[ie.id].xrpAmount.toFixed(2)} XRP`:`${ie.amm_xrp_amount||0} XRP`}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${ie.amm_pool_created?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:ie.amm_pool_created?"🟢":"🟡"})}),o.jsx("td",{className:"px-4 py-3",onClick:$e=>$e.stopPropagation(),children:o.jsxs("div",{className:"flex gap-1",children:[o.jsx("a",{href:`https://firstledger.net/token/${ie.issuer_address}/${_t.Buffer.from(ie.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0")}`,target:"_blank",rel:"noopener noreferrer",className:"btn text-purple-300 text-xs px-2 py-1 rounded",title:"FirstLedger",children:"📊"}),o.jsx("a",{href:`https://xmagnetic.org/dex/${ie.currency_code}+${ie.issuer_address}_XRP+XRP?network=mainnet`,target:"_blank",rel:"noopener noreferrer",className:"btn-primary text-white text-xs px-2 py-1 rounded",title:"Trade",children:"💱"}),o.jsx("button",{className:"btn text-purple-300 text-xs px-2 py-1 rounded",onClick:$e=>{$e.stopPropagation(),ke(ie)},title:"Post on X",children:"𝕏"}),o.jsx("a",{href:`https://xmagnetic.org/amm/${ie.currency_code}+${ie.issuer_address}_XRP+XRP?network=mainnet`,target:"_blank",rel:"noopener noreferrer",className:"btn text-purple-300 text-xs px-2 py-1 rounded",title:"AMM",children:"🔗"}),o.jsx("a",{href:`https://xrpscan.com/account/${ie.issuer_address}`,target:"_blank",rel:"noopener noreferrer",className:"btn text-purple-300 text-xs px-2 py-1 rounded",title:"Issuer",children:"📋"})]})})]})};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-purple-200",children:"Memes"}),o.jsx("p",{className:"text-purple-400 mt-1",children:"All minted tokens from the factory"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:oe,className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium",children:"+ Add Token"}),o.jsx("button",{onClick:ce,className:"btn-primary text-white px-6 py-3 rounded-lg font-medium",children:"🚀 Create Token"})]})]}),o.jsx("div",{className:"glass rounded-lg p-4",children:o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4",children:[o.jsx("input",{type:"text",value:s,onChange:ie=>i(ie.target.value),placeholder:"🔍 Search tokens...",className:"input flex-1 text-purple-200"}),o.jsxs("select",{value:c,onChange:ie=>u(ie.target.value),className:"input text-purple-200 w-full md:w-auto",children:[o.jsx("option",{value:"newest",children:"Newest First"}),o.jsx("option",{value:"oldest",children:"Oldest First"}),o.jsx("option",{value:"name-asc",children:"Name (A-Z)"}),o.jsx("option",{value:"name-desc",children:"Name (Z-A)"}),o.jsx("option",{value:"supply-high",children:"Supply (High-Low)"}),o.jsx("option",{value:"supply-low",children:"Supply (Low-High)"}),o.jsx("option",{value:"price-high",children:"Price (High-Low)"}),o.jsx("option",{value:"price-low",children:"Price (Low-High)"})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2 items-center justify-between",children:[o.jsxs("div",{className:"flex gap-2 flex-wrap",children:[o.jsxs("button",{onClick:()=>r("all"),className:`px-4 py-2 rounded-lg transition-all ${n==="all"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:["All (",t.length,")"]}),o.jsxs("button",{onClick:()=>r("active"),className:`px-4 py-2 rounded-lg transition-all ${n==="active"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:["🟢 Active (",t.filter(ie=>ie.amm_pool_created).length,")"]}),o.jsxs("button",{onClick:()=>r("pending"),className:`px-4 py-2 rounded-lg transition-all ${n==="pending"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:["🟡 Pending (",t.filter(ie=>!ie.amm_pool_created).length,")"]}),o.jsxs("button",{onClick:()=>r("favorites"),className:`px-4 py-2 rounded-lg transition-all ${n==="favorites"?"bg-purple-600 text-white":"glass text-purple-300"}`,disabled:!f,title:f?"":"Connect wallet to view favorites",children:["⭐ Favorites (",d.length,")"]}),o.jsxs("button",{disabled:!0,className:"px-4 py-2 rounded-lg transition-all font-medium text-purple-500/50 cursor-not-allowed relative group",children:["👤 User",o.jsx("span",{className:"ml-2 text-xs bg-purple-900/50 px-2 py-0.5 rounded",children:"Coming Soon"})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>l("grid"),className:`px-4 py-2 rounded-lg transition-all ${a==="grid"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"▦ Grid"}),o.jsx("button",{onClick:()=>l("list"),className:`px-4 py-2 rounded-lg transition-all ${a==="list"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"☰ List"})]})]})]})}),a==="grid"?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Ye.map(ie=>o.jsx(ri,{token:ie},ie.id))}):o.jsx("div",{className:"glass rounded-lg p-4",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-purple-900/30",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Token"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Live Price"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Volume 24h"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Your LP"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Market Cap"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Liquidity (XRP)"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Status"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Actions"})]})}),o.jsx("tbody",{children:Ye.map(ie=>o.jsx(_n,{token:ie},ie.id))})]})})}),Ye.length===0&&o.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[o.jsx("div",{className:"text-6xl mb-4",children:"🚀"}),o.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-2",children:"No Tokens Found"}),o.jsx("p",{className:"text-purple-400",children:s?"Try a different search term":"Create your first token from the dashboard"})]}),x&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-8 max-w-md w-full",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-4",children:"Admin Access Required"}),o.jsxs("p",{className:"text-purple-300 mb-6",children:["Enter password to ",v==="create"?"create tokens":"add tokens"]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Password"}),o.jsx("input",{type:"password",value:E,onChange:ie=>L(ie.target.value),onKeyPress:ie=>ie.key==="Enter"&&W(),className:"input w-full text-purple-200",placeholder:"Enter password",autoFocus:!0})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:W,className:"btn-primary text-white px-6 py-2 rounded-lg font-medium flex-1",children:"Confirm"}),o.jsx("button",{onClick:()=>{b(!1),L("")},className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium",children:"Cancel"})]})]})}),Y&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:"Add Token"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("input",{type:"text",placeholder:"Token Name",value:V.name,onChange:ie=>se({...V,name:ie.target.value}),className:"w-full px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 placeholder-purple-400"}),o.jsx("input",{type:"text",placeholder:"Issuer Address",value:V.issuer,onChange:ie=>se({...V,issuer:ie.target.value}),className:"w-full px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 placeholder-purple-400"}),o.jsx("input",{type:"number",placeholder:"Supply",value:V.supply,onChange:ie=>se({...V,supply:ie.target.value}),className:"w-full px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 placeholder-purple-400"})]}),o.jsxs("div",{className:"flex gap-3 mt-6",children:[o.jsx("button",{onClick:O,disabled:R||Z,className:"btn-primary text-white px-6 py-2 rounded-lg font-medium flex-1 disabled:opacity-50",children:R?"🔄 Adding...":"+ Add Token"}),o.jsx("button",{onClick:()=>{ee(!1),se({name:"",issuer:"",supply:"1000000",xrpLocked:"1",image:null}),q(null),he("manual")},disabled:R,className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium disabled:opacity-50",children:"Cancel"})]})]})}),U&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:"Create Token"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("input",{type:"text",placeholder:"Token Name",value:V.name,onChange:ie=>se({...V,name:ie.target.value}),className:"w-full px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 placeholder-purple-400"}),o.jsx("input",{type:"number",placeholder:"Supply (default: 1,000,000)",value:V.supply,onChange:ie=>se({...V,supply:ie.target.value}),className:"w-full px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 placeholder-purple-400"}),o.jsx("input",{type:"number",placeholder:"XRP to Lock in Pool (default: 1)",value:V.xrpLocked,onChange:ie=>se({...V,xrpLocked:ie.target.value}),className:"w-full px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 placeholder-purple-400"}),o.jsx("textarea",{placeholder:"Description (optional)",value:V.description,onChange:ie=>se({...V,description:ie.target.value}),className:"w-full px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 placeholder-purple-400 min-h-[80px]"}),o.jsx("input",{type:"text",placeholder:"Twitter Handle (optional, e.g., @mytoken)",value:V.twitterHandle,onChange:ie=>se({...V,twitterHandle:ie.target.value}),className:"w-full px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 placeholder-purple-400"}),o.jsx("input",{type:"url",placeholder:"Website URL (optional)",value:V.websiteUrl,onChange:ie=>se({...V,websiteUrl:ie.target.value}),className:"w-full px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 placeholder-purple-400"}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2 text-sm",children:"Token Image"}),o.jsx("input",{type:"file",accept:"image/*",onChange:p,className:"w-full px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-purple-600 file:text-white hover:file:bg-purple-700"}),X&&o.jsx("div",{className:"mt-3",children:o.jsx("img",{src:X,alt:"Preview",className:"w-24 h-24 rounded-lg object-cover"})})]}),o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsx("h4",{className:"text-purple-200 font-medium mb-3",children:"Token Settings"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:V.tfTransferable,onChange:ie=>se({...V,tfTransferable:ie.target.checked}),className:"w-4 h-4 rounded border-purple-500/30"}),o.jsx("span",{className:"text-purple-300 text-sm",children:"Transferable"})]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:V.requireDestTag,onChange:ie=>se({...V,requireDestTag:ie.target.checked}),className:"w-4 h-4 rounded border-purple-500/30"}),o.jsx("span",{className:"text-purple-300 text-sm",children:"Require Destination Tag"})]})]})]}),o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsx("h4",{className:"text-purple-200 font-medium mb-2",children:"Wallet Configuration"}),o.jsxs("div",{className:"space-y-2 text-sm text-purple-300",children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Issuer:"})," ",mS]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Receiver:"})," ",IX]})]})]})]}),o.jsxs("div",{className:"flex gap-3 mt-6",children:[o.jsx("button",{onClick:w,disabled:R||Z,className:"btn-primary text-white px-6 py-2 rounded-lg font-medium flex-1 disabled:opacity-50",children:Z?o.jsx("span",{children:"⬆️ Uploading Image..."}):R?o.jsx("span",{children:"🔄 Creating..."}):o.jsx("span",{children:"🚀 Create Token"})}),o.jsx("button",{onClick:()=>{G(!1),se({name:"",issuer:"",supply:"1000000",xrpLocked:"1",image:null,tfTransferable:!1,requireDestTag:!1,description:"",twitterHandle:"",websiteUrl:""}),q(null)},disabled:R||Z,className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium disabled:opacity-50",children:"Cancel"})]})]})}),N&&ne&&o.jsx(Rj,{token:ne,onClose:()=>{g(!1),J(null)}}),o.jsx(Lj,{isOpen:I,steps:C,currentStep:H,canClose:K,onClose:()=>{T(!1),P([]),M(0)}})]})}function RX(){const[t,e]=z.useState([]),[n,r]=z.useState({}),[s,i]=z.useState(!1),[a,l]=z.useState(null),[c,u]=z.useState({}),[d,h]=z.useState("list"),[f,m]=z.useState(""),[_,S]=z.useState("liquidity"),[j,y]=z.useState("all"),[x,b]=z.useState([]);z.useEffect(()=>{L(),v();const $=xd(()=>{L()}),re=()=>{v()};return window.addEventListener("walletConnected",re),window.addEventListener("walletDisconnected",re),()=>{$(),window.removeEventListener("walletConnected",re),window.removeEventListener("walletDisconnected",re)}},[]),z.useEffect(()=>{t.length>0&&Y()},[t]),z.useEffect(()=>{a&&Object.keys(n).length>0&&ee()},[a,n]),z.useEffect(()=>{a&&A()},[a]);const v=()=>{const $=localStorage.getItem("connectedWallet");l($?JSON.parse($):null)},A=async()=>{if(a)try{const{data:$,error:re}=await Pe.from("token_favorites").select("token_id").eq("user_address",a.address);if(re)throw re;b(($==null?void 0:$.map(F=>F.token_id))||[])}catch($){console.error("Error loading favorites:",$)}},E=async($,re)=>{if(re&&re.stopPropagation(),!a){ye.error("Connect wallet to favorite pools");return}try{if(x.includes($)){const{error:k}=await Pe.from("token_favorites").delete().eq("user_address",a.address).eq("token_id",$);if(k)throw k;b(x.filter(R=>R!==$)),ye.success("Removed from favorites")}else{const{error:k}=await Pe.from("token_favorites").insert([{user_address:a.address,token_id:$}]);if(k)throw k;b([...x,$]),ye.success("Added to favorites")}}catch(F){console.error("Error toggling favorite:",F),ye.error("Failed to update favorite")}},L=async()=>{try{const{data:$,error:re}=await Pe.from("meme_tokens").select("*").eq("amm_pool_created",!0).order("created_at",{ascending:!1});if(re)throw re;e($||[])}catch($){console.error("Error loading tokens:",$)}},Y=async()=>{var re;i(!0);const $=new Ve.Client("wss://xrplcluster.com");try{await $.connect();const F={};for(const k of t)try{const R=k.currency_code.length>3?_t.Buffer.from(k.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):k.currency_code;console.log(`Fetching AMM info for ${k.token_name}:`,{currency:k.currency_code,hex:R,issuer:k.issuer_address});const D=await $.request({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:R,issuer:k.issuer_address},ledger_index:"validated"});if(D.result.amm){const V=D.result.amm,se=parseFloat(V.amount)/1e6,X=parseFloat(V.amount2.value),q=parseFloat(((re=V.lp_token)==null?void 0:re.value)||0);F[k.id]={xrpAmount:se,tokenAmount:X,lpTokens:q,price:se/X,accountId:V.account},console.log(`Found pool for ${k.token_name}:`,F[k.id])}else console.log(`No AMM found for ${k.token_name}`)}catch(R){console.error(`Error fetching pool data for ${k.token_name}:`,R.message)}r(F),await $.disconnect()}catch(F){console.error("Error fetching pools data:",F),ye.error("Failed to fetch pool data")}finally{i(!1)}},ee=async()=>{if(!a)return;const $=new Ve.Client("wss://xrplcluster.com");try{await $.connect();const re=await $.request({command:"account_lines",account:a.address,ledger_index:"validated"}),F={};re.result.lines.forEach(k=>{const R=Object.entries(n).find(([D,V])=>V.accountId===k.account);if(R){const[D,V]=R,se=parseFloat(k.balance),X=se/V.lpTokens*100;F[D]={balance:se,share:X}}}),u(F),await $.disconnect()}catch(re){console.error("Error fetching LP balances:",re)}},U=$=>!$.amm_pool_created||!$.amm_xrp_amount||!$.amm_asset_amount?0:$.amm_xrp_amount/$.amm_asset_amount,G=$=>{const re=n[$.id];return re&&re.price?re.price:U($)},ae=$=>{const re=G($),F=parseFloat($.total_supply)||0;return re*F},he=$=>{const re=n[$.id];if(!re||!re.price||!$.amm_xrp_amount||!$.amm_asset_amount)return"0.00";const F=re.price,k=$.amm_xrp_amount/$.amm_asset_amount;return!k||k===0?"0.00":((F-k)/k*100).toFixed(2)},xe=({token:$})=>{const re=n[$.id],F=c[$.id],k=G($),R=ae($);return o.jsxs("div",{className:"glass rounded-lg p-6 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(xn,{token:$,size:"lg"}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("h3",{className:"text-xl font-bold text-purple-200",children:[$.token_name,"/XRP"]}),o.jsx("button",{onClick:D=>E($.id,D),className:"text-lg hover:scale-110 transition-transform",children:x.includes($.id)?"⭐":"☆"})]}),o.jsx("p",{className:"text-purple-400 text-sm",children:"AMM Pool"})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"flex items-center justify-end gap-2",children:[o.jsx("div",{className:"text-2xl font-bold text-purple-200",children:k.toFixed(8)}),$.amm_pool_created&&o.jsxs("span",{className:`text-xs font-medium px-2 py-1 rounded ${parseFloat(he($))>=0?"text-green-300 bg-green-500/10":"text-red-300 bg-red-500/10"}`,children:[parseFloat(he($))>=0?"+":"",he($),"%"]})]}),o.jsx("div",{className:"text-purple-400 text-xs",children:"XRP per token"})]})]}),re?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"XRP Liquidity"}),o.jsx("div",{className:"text-lg font-bold text-purple-200",children:re.xrpAmount.toFixed(2)})]}),o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"Token Liquidity"}),o.jsx("div",{className:"text-lg font-bold text-purple-200",children:re.tokenAmount.toFixed(0)})]}),o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"LP Tokens"}),o.jsx("div",{className:"text-lg font-bold text-purple-200",children:re.lpTokens.toFixed(2)})]}),o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"Market Cap"}),o.jsxs("div",{className:"text-lg font-bold text-purple-200",children:[R.toFixed(2)," XRP"]})]})]}),F&&o.jsx("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-green-300 text-sm font-medium mb-1",children:"Your LP Position"}),o.jsxs("div",{className:"text-green-200 text-xs",children:[F.balance.toFixed(4)," LP Tokens (",F.share.toFixed(4),"% of pool)"]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"text-green-200 font-bold",children:["~",(re.xrpAmount*F.share/100).toFixed(4)," XRP"]}),o.jsx("div",{className:"text-green-300 text-xs",children:"Your Share Value"})]})]})}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("a",{href:`https://xmagnetic.org/amm/${$.currency_code}+${$.issuer_address}_XRP+XRP?network=mainnet`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 btn-primary text-center py-2 rounded-lg text-sm",children:"🏊 AMM Pool →"}),o.jsx("button",{onClick:()=>{localStorage.setItem("selectedTradeToken",JSON.stringify($)),window.dispatchEvent(new CustomEvent("navigateToTrade",{detail:$}))},className:"flex-1 btn-secondary text-center py-2 rounded-lg text-sm",children:"💱 Swap"})]})]}):o.jsx("div",{className:"text-center text-purple-400 py-8",children:o.jsx("div",{className:"animate-pulse",children:"Loading pool data..."})})]})},de=({token:$})=>{const re=n[$.id],F=c[$.id],k=G($);return o.jsxs("tr",{className:"border-t border-purple-500/20 hover:bg-purple-900/20",children:[o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(xn,{token:$,size:"sm"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"font-bold text-purple-200",children:[$.token_name,"/XRP"]}),o.jsx("div",{className:"text-purple-400 text-xs",children:$.currency_code})]}),o.jsx("button",{onClick:R=>E($.id,R),className:"text-lg hover:scale-110 transition-transform",children:x.includes($.id)?"⭐":"☆"})]})]})}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-purple-200 font-bold",children:k.toFixed(8)}),o.jsx("div",{className:"text-purple-400 text-xs",children:"XRP"})]}),$.amm_pool_created&&o.jsxs("span",{className:`text-xs font-medium px-1.5 py-0.5 rounded whitespace-nowrap ${parseFloat(he($))>=0?"text-green-300 bg-green-500/10":"text-red-300 bg-red-500/10"}`,children:[parseFloat(he($))>=0?"+":"",he($),"%"]})]})}),o.jsx("td",{className:"px-4 py-3 text-purple-200 font-bold",children:re?`${re.xrpAmount.toFixed(2)} XRP`:"Loading..."}),o.jsx("td",{className:"px-4 py-3 text-purple-300",children:re?`${(re.xrpAmount*.15).toFixed(2)} XRP`:"-"}),o.jsx("td",{className:"px-4 py-3",children:F?o.jsxs("div",{children:[o.jsx("div",{className:"text-green-200 font-medium",children:F.balance.toFixed(4)}),o.jsxs("div",{className:"text-green-400 text-xs",children:[F.share.toFixed(2),"%"]})]}):o.jsx("span",{className:"text-purple-500",children:"-"})}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex gap-1",children:[o.jsx("a",{href:`https://xmagnetic.org/amm/${$.currency_code}+${$.issuer_address}_XRP+XRP?network=mainnet`,target:"_blank",rel:"noopener noreferrer",className:"btn-primary text-white text-xs px-2 py-1 rounded",title:"AMM Pool",children:"🏊 AMM"}),o.jsx("button",{onClick:()=>{localStorage.setItem("selectedTradeToken",JSON.stringify($)),window.dispatchEvent(new CustomEvent("navigateToTrade",{detail:$}))},className:"btn-secondary text-white text-xs px-2 py-1 rounded",title:"Swap",children:"💱"})]})})]})};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-purple-200",children:"AMM Pools"}),o.jsx("p",{className:"text-purple-400 mt-1",children:"Liquidity pools for all platform tokens"})]}),o.jsx("button",{onClick:Y,disabled:s,className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium disabled:opacity-50",children:s?"🔄 Refreshing...":"🔄 Refresh Pools"})]}),!a&&o.jsx("div",{className:"glass rounded-lg p-6 bg-yellow-500/10 border border-yellow-500/30",children:o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("div",{className:"text-2xl",children:"💡"}),o.jsx("div",{className:"text-yellow-200 font-medium",children:"Connect Wallet to See Your LP Positions"}),o.jsx("p",{className:"text-yellow-300 text-sm",children:"Connect your wallet from the Setup page to view your liquidity provider positions"})]})}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>y("all"),className:`px-6 py-2 rounded-lg font-medium transition-all ${j==="all"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"All AMM Pools"}),o.jsx("button",{onClick:()=>y("mine"),className:`px-6 py-2 rounded-lg font-medium transition-all ${j==="mine"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"My AMM Pools"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>h("list"),className:`px-4 py-2 rounded-lg transition-all ${d==="list"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"☰ List"}),o.jsx("button",{onClick:()=>h("grid"),className:`px-4 py-2 rounded-lg transition-all ${d==="grid"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"▦ Grid"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-6",children:[o.jsx("input",{type:"text",placeholder:"🔍 Search pools...",value:f,onChange:$=>m($.target.value),className:"input text-purple-200 md:col-span-2"}),o.jsxs("select",{value:_,onChange:$=>S($.target.value),className:"input text-purple-200",children:[o.jsx("option",{value:"liquidity",children:"Sort by Liquidity"}),o.jsx("option",{value:"volume",children:"Sort by Volume"}),o.jsx("option",{value:"name",children:"Sort by Name"})]})]}),d==="grid"?o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:t.filter($=>{const re=$.token_name.toLowerCase().includes(f.toLowerCase())||$.currency_code.toLowerCase().includes(f.toLowerCase()),F=c[$.id]&&c[$.id].balance>0;return re&&(j==="all"||j==="mine"&&F)}).sort(($,re)=>{var F,k,R,D;return _==="liquidity"?(((F=n[re.id])==null?void 0:F.xrpAmount)||0)-(((k=n[$.id])==null?void 0:k.xrpAmount)||0):_==="volume"?(((R=n[re.id])==null?void 0:R.tokenAmount)||0)-(((D=n[$.id])==null?void 0:D.tokenAmount)||0):$.token_name.localeCompare(re.token_name)}).map($=>o.jsx(xe,{token:$},$.id))}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-purple-900/30",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Pool"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Live Price"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Liquidity (XRP)"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Volume 24h"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Your LP"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Actions"})]})}),o.jsx("tbody",{children:t.filter($=>{const re=$.token_name.toLowerCase().includes(f.toLowerCase())||$.currency_code.toLowerCase().includes(f.toLowerCase()),F=c[$.id]&&c[$.id].balance>0;return re&&(j==="all"||j==="mine"&&F)}).sort(($,re)=>{var F,k,R,D;return _==="liquidity"?(((F=n[re.id])==null?void 0:F.xrpAmount)||0)-(((k=n[$.id])==null?void 0:k.xrpAmount)||0):_==="volume"?(((R=n[re.id])==null?void 0:R.tokenAmount)||0)-(((D=n[$.id])==null?void 0:D.tokenAmount)||0):$.token_name.localeCompare(re.token_name)}).map($=>o.jsx(de,{token:$},$.id))})]})})]}),t.length===0&&o.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[o.jsx("div",{className:"text-6xl mb-4",children:"🏊"}),o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-2",children:"No AMM Pools Yet"}),o.jsx("p",{className:"text-purple-400",children:"AMM pools will appear here once tokens are created with liquidity"})]})]})}function LX({isOpen:t,currentSlippage:e,suggestedSlippage:n,tradeType:r,amount:s,tokenName:i,onRetry:a,onCancel:l,onClose:c,isRetrying:u=!1,retryComplete:d=!1,retrySuccess:h=!1,retryError:f=null}){const[m,_]=z.useState(3);return z.useEffect(()=>{if(d&&h){const S=setTimeout(()=>{c()},2e3);return()=>clearTimeout(S)}},[d,h,c]),z.useEffect(()=>{if(u){_(3);const S=setInterval(()=>{_(j=>j<=1?(clearInterval(S),0):j-1)},1e3);return()=>clearInterval(S)}},[u]),t?o.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-[100] p-4 animate-fadeIn",children:o.jsxs("div",{className:"glass rounded-lg p-8 max-w-md w-full shadow-2xl border border-purple-500/30 animate-slideUp relative",children:[o.jsx("button",{onClick:c,className:"absolute top-4 right-4 w-10 h-10 rounded-lg glass hover:bg-red-500/20 text-purple-300 hover:text-red-300 flex items-center justify-center transition-all z-10 text-2xl font-bold","aria-label":"Close",children:"×"}),d?o.jsx("div",{className:"text-center space-y-6",children:h?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-20 h-20 rounded-full bg-green-500/20 flex items-center justify-center mx-auto",children:o.jsx("span",{className:"text-5xl",children:"✓"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-bold text-green-400 mb-2",children:"Trade Successful!"}),o.jsxs("p",{className:"text-purple-300",children:["Your ",r.toLowerCase()," order completed with ",n,"% slippage."]})]}),o.jsx("div",{className:"text-purple-400 text-sm",children:"Closing automatically..."})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-20 h-20 rounded-full bg-red-500/20 flex items-center justify-center mx-auto",children:o.jsx("span",{className:"text-5xl",children:"✗"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-bold text-red-400 mb-2",children:"Retry Failed"}),o.jsx("p",{className:"text-purple-300 mb-4",children:f||"Trade could not be completed. Please try again manually."}),o.jsx("div",{className:"glass rounded-lg p-3",children:o.jsxs("p",{className:"text-purple-400 text-sm",children:[o.jsx("strong",{children:"Suggestions:"}),o.jsx("br",{}),"• Try a smaller amount",o.jsx("br",{}),"• Increase slippage further",o.jsx("br",{}),"• Wait for pool liquidity to improve"]})})]}),o.jsx("button",{onClick:c,className:"w-full btn-primary text-white py-3 rounded-lg font-medium",children:"Close"})]})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-yellow-500/20 flex items-center justify-center",children:o.jsx("span",{className:"text-2xl",children:"⚠️"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200",children:"Slippage Too Low"}),o.jsx("p",{className:"text-purple-400 text-sm",children:"Trade couldn't complete"})]})]}),o.jsxs("div",{className:"glass rounded-lg p-4 space-y-3 mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-purple-400 text-sm",children:"Trade Type"}),o.jsx("span",{className:"text-purple-200 font-medium",children:r})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-purple-400 text-sm",children:"Amount"}),o.jsxs("span",{className:"text-purple-200 font-medium",children:[s," ",i]})]}),o.jsx("div",{className:"h-px bg-purple-500/20 my-2"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-purple-400 text-sm",children:"Current Slippage"}),o.jsxs("span",{className:"text-red-400 font-bold",children:[e,"%"]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-purple-400 text-sm",children:"Suggested Slippage"}),o.jsxs("span",{className:"text-green-400 font-bold",children:[n,"%"]})]})]}),o.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-6",children:o.jsxs("p",{className:"text-blue-300 text-sm",children:[o.jsx("strong",{children:"Why did this happen?"}),o.jsx("br",{}),"The pool's price moved while your trade was processing. Increasing slippage tolerance allows for more price movement."]})}),u?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 border-4 border-purple-500/30 border-t-purple-500 rounded-full animate-spin"}),o.jsxs("span",{className:"text-purple-200 font-medium",children:["Retrying with ",n,"% slippage..."]})]}),m>0&&o.jsxs("div",{className:"text-center text-purple-400 text-sm",children:["Executing in ",m,"s"]})]}):o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:l,className:"flex-1 glass hover:bg-purple-500/10 text-purple-300 py-3 rounded-lg font-medium transition-all",children:"Cancel"}),o.jsxs("button",{onClick:a,className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white py-3 rounded-lg font-medium transition-all shadow-lg",children:["Retry with ",n,"%"]})]})]})]})}):null}function MX({isOpen:t,onClose:e,token:n,transactions:r,loading:s}){if(z.useEffect(()=>{const u=d=>{d.key==="Escape"&&e()};if(t)return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)},[t,e]),!t)return null;const i=u=>{const d=new Date(u),f=new Date-d,m=Math.floor(f/6e4),_=Math.floor(m/60);return m<1?"Just now":m<60?`${m}m ago`:_<24?`${_}h ago`:d.toLocaleString()},a=u=>{const d=parseFloat(u);return d>=1e6?`${(d/1e6).toFixed(2)}M`:d>=1e3?`${(d/1e3).toFixed(2)}K`:d.toFixed(2)},l=u=>{var d;return u.TransactionType==="AMMDeposit"?"Deposit":u.TransactionType==="AMMWithdraw"?"Withdraw":u.TransactionType==="Payment"?(d=u.meta)!=null&&d.delivered_amount&&typeof u.meta.delivered_amount=="string"?"Buy":"Sell":u.TransactionType},c=u=>{switch(u){case"Buy":return"bg-green-500/20 text-green-300 border-green-500/30";case"Sell":return"bg-red-500/20 text-red-300 border-red-500/30";case"Deposit":return"bg-blue-500/20 text-blue-300 border-blue-500/30";case"Withdraw":return"bg-yellow-500/20 text-yellow-300 border-yellow-500/30";default:return"bg-purple-500/20 text-purple-300 border-purple-500/30"}};return o.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-[100] p-4 animate-fadeIn",onClick:e,children:o.jsxs("div",{className:"glass rounded-lg p-6 max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col animate-slideUp",onClick:u=>u.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200",children:"AMM Pool History"}),o.jsxs("p",{className:"text-purple-400 text-sm mt-1",children:[n==null?void 0:n.token_name," - Last 24 Hours"]})]}),o.jsx("button",{onClick:e,className:"w-10 h-10 rounded-lg glass hover:bg-purple-500/20 flex items-center justify-center text-purple-300 text-xl transition-all",children:"×"})]}),s?o.jsx("div",{className:"flex-1 flex items-center justify-center py-20",children:o.jsxs("div",{className:"text-center space-y-4",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-purple-500/30 border-t-purple-500 rounded-full animate-spin mx-auto"}),o.jsx("p",{className:"text-purple-300",children:"Loading transaction history..."})]})}):r.length===0?o.jsx("div",{className:"flex-1 flex items-center justify-center py-20",children:o.jsxs("div",{className:"text-center space-y-3",children:[o.jsx("div",{className:"text-6xl",children:"📊"}),o.jsx("h4",{className:"text-xl font-bold text-purple-200",children:"No Transactions Found"}),o.jsx("p",{className:"text-purple-400",children:"No AMM pool activity in the last 24 hours"})]})}):o.jsxs("div",{className:"flex-1 overflow-y-auto space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4 px-4 text-sm font-semibold text-purple-400",children:[o.jsx("div",{children:"Type"}),o.jsx("div",{children:"Amount"}),o.jsx("div",{children:"Account"}),o.jsx("div",{className:"text-right",children:"Time"})]}),r.map((u,d)=>{const h=l(u),f=c(h);return o.jsx("div",{className:"glass rounded-lg p-4 hover:bg-purple-500/10 transition-all",children:o.jsxs("div",{className:"grid grid-cols-4 gap-4 items-center",children:[o.jsx("div",{children:o.jsx("div",{className:`inline-flex px-3 py-1 rounded-lg text-xs font-medium border ${f}`,children:h})}),o.jsx("div",{children:o.jsx("div",{className:"text-purple-200 font-medium text-sm",children:u.Amount?typeof u.Amount=="string"?`${a(parseInt(u.Amount)/1e6)} XRP`:`${a(u.Amount.value)} ${u.Amount.currency}`:"N/A"})}),o.jsx("div",{children:o.jsx("div",{className:"text-purple-300 text-xs font-mono",children:u.Account?`${u.Account.substring(0,8)}...${u.Account.substring(u.Account.length-6)}`:"Unknown"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-purple-400 text-xs",children:i(u.date?(u.date+946684800)*1e3:Date.now())}),u.hash&&o.jsx("a",{href:`https://livenet.xrpl.org/transactions/${u.hash}`,target:"_blank",rel:"noopener noreferrer",className:"text-purple-500 hover:text-purple-400 text-xs mt-1 inline-block",children:"View →"})]})]})},u.hash||d)})]}),o.jsxs("div",{className:"mt-6 pt-4 border-t border-purple-500/20 flex justify-between items-center",children:[o.jsxs("div",{className:"text-purple-400 text-sm",children:[r.length," transaction",r.length!==1?"s":""," found"]}),o.jsx("button",{onClick:e,className:"btn-primary text-white px-6 py-2 rounded-lg font-medium",children:"Close"})]})]})})}const gS=.01,yS=t=>{const e=parseFloat(t);if(isNaN(e)||e<=0)throw new Error("Invalid XRP amount");if(e>1e11)throw new Error("XRP amount too large");if(e<1e-6)throw new Error("XRP amount too small (minimum 0.000001)");const n=Math.floor(e*1e6)/1e6;return parseFloat(n.toFixed(6))},vS=t=>{const e=parseFloat(t);if(isNaN(e)||e<=0)throw new Error("Invalid token amount");return e.toFixed(6)};function DX(){const[t,e]=z.useState([]),[n,r]=z.useState(null),[s,i]=z.useState("buy"),[a,l]=z.useState(""),[c,u]=z.useState(""),[d,h]=z.useState(null),[f,m]=z.useState(!1),[_,S]=z.useState(!1),[j,y]=z.useState(!1),[x,b]=z.useState(!1),[v,A]=z.useState("0"),[E,L]=z.useState(!1),[Y,ee]=z.useState("area"),[U,G]=z.useState("15m"),[ae,he]=z.useState(null),[xe,de]=z.useState(0),[$,re]=z.useState(0),[F,k]=z.useState(!1),[R,D]=z.useState("0.5"),[V,se]=z.useState("amm"),[X,q]=z.useState([]),[Z,ue]=z.useState(0),[ne,J]=z.useState(!1),[N,g]=z.useState(""),[I,T]=z.useState(!1),[C,P]=z.useState(null),[H,M]=z.useState(!1),[K,Q]=z.useState(!1),[te,le]=z.useState(!1),[we,_e]=z.useState(null),[be,Ie]=z.useState(!1),[He,O]=z.useState([]),[p,w]=z.useState(!1),[W,oe]=z.useState(.5),[ce,fe]=z.useState(0),Te=z.useRef(null),Le=z.useRef(null),Me=z.useRef(null),ke=z.useRef(null),Ye=z.useRef(null),ri=z.useRef(null),_n=z.useRef([]),ie=z.useRef(null);z.useEffect(()=>{Xe(),Ae(),tt();const pe=xd(()=>{Xe()}),Ee=()=>{Ae()};return window.addEventListener("walletConnected",Ee),window.addEventListener("walletDisconnected",Ee),()=>{pe(),window.removeEventListener("walletConnected",Ee),window.removeEventListener("walletDisconnected",Ee)}},[]),z.useEffect(()=>{n&&$e()},[n,W]),z.useEffect(()=>(n&&Te.current&&Le.current&&Vn(),n&&d&&(Tr(),si()),n&&Eo(),()=>{rr()}),[n,d]),z.useEffect(()=>(n&&Te.current&&Le.current&&Vn(),()=>{rr()}),[Y]),z.useEffect(()=>(n&&Te.current&&Le.current&&Vn(),()=>{rr()}),[U]),z.useEffect(()=>{Qr()},[a,c,R,s,ae]),z.useEffect(()=>{if(!n)return;const pe=async()=>{var Oe;try{const Re=new Ve.Client("wss://xrplcluster.com");await Re.connect();const ze=n.currency_code.length>3?_t.Buffer.from(n.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):n.currency_code,Qe=await Re.request({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:ze,issuer:n.issuer_address},ledger_index:"validated"});if(await Re.disconnect(),(Oe=Qe==null?void 0:Qe.result)!=null&&Oe.amm){const Fe=Qe.result.amm,ot=parseFloat(Fe.amount)/1e6,Ue=parseFloat(Fe.amount2.value),lr=ot/Ue;if(de(lr),n.amm_xrp_amount&&n.amm_asset_amount){const cr=n.amm_xrp_amount/n.amm_asset_amount,nn=(lr-cr)/cr*100;re(nn)}}}catch(Re){console.error("Error fetching live price:",Re)}};pe();const Ee=setInterval(pe,5e3);return()=>clearInterval(Ee)},[n]);const Ae=async()=>{const pe=localStorage.getItem("connectedWallet");if(pe){const Ee=JSON.parse(pe);if(!Ee.seed&&Ee.id)try{const{data:Oe,error:Re}=await Pe.from("wallets").select("*").eq("id",Ee.id).maybeSingle();if(Oe){const ze={...Oe,seed:Oe.encrypted_seed||Oe.seed};localStorage.setItem("connectedWallet",JSON.stringify(ze)),h(ze);return}}catch(Oe){console.error("Error refreshing wallet:",Oe)}h(Ee)}else h(null)},tt=async()=>{var pe;try{const Oe=await(await fetch("https://api.coingecko.com/api/v3/simple/price?ids=ripple&vs_currencies=usd")).json();oe(((pe=Oe.ripple)==null?void 0:pe.usd)||.5)}catch(Ee){console.error("Error fetching XRP/USD price:",Ee),oe(.5)}},$e=()=>{if(!n||!n.total_supply){fe(0);return}const pe=nt(n),Ee=parseFloat(n.total_supply),Re=pe*Ee*W;fe(Re)},Xe=async()=>{try{const{data:pe,error:Ee}=await Pe.from("meme_tokens").select("*").eq("amm_pool_created",!0).order("created_at",{ascending:!1});if(Ee)throw Ee;e(pe||[]);const Oe=localStorage.getItem("selectedTradeToken");if(Oe)try{const Re=JSON.parse(Oe),ze=pe==null?void 0:pe.find(Qe=>Qe.id===Re.id||Qe.currency_code===Re.currency_code&&Qe.issuer_address===Re.issuer_address);if(ze){r(ze),localStorage.removeItem("selectedTradeToken");return}}catch(Re){console.error("Error parsing stored token:",Re)}pe&&pe.length>0&&!n&&r(pe[0])}catch(pe){console.error("Error loading tokens:",pe)}},nt=pe=>!pe||!pe.amm_xrp_amount||!pe.amm_asset_amount?0:pe.amm_xrp_amount/pe.amm_asset_amount,ft=pe=>{if(!pe||!pe.amm_xrp_amount||!pe.amm_asset_amount)return 0;const Ee=pe.amm_xrp_amount/pe.amm_asset_amount;return pe.supply*Ee},jt=()=>{if(!n)return console.log("No token selected for chart data"),[];try{const pe=nt(n);if(!pe||isNaN(pe)||pe<=0)return console.error("Invalid base price:",pe),[];const Ee=[],Oe=Math.floor(Date.now()/1e3),Re=48;for(let ze=Re;ze>=0;ze--){const Qe=Oe-ze*3600,Fe=(Math.random()-.5)*.3,ot=(Re-ze)/Re*.15,Ue=pe*(1+Fe+ot);Ee.push({time:Qe,value:Ue,open:Ue*.98,high:Ue*1.03,low:Ue*.97,close:Ue,volume:Math.random()*1e4+1e3})}return _n.current=Ee,Ee}catch(pe){return console.error("Error generating chart data:",pe),[]}},nr=()=>{rr(),!(!n||!Ye.current)&&(ie.current=setInterval(()=>{wd()},5e3))},rr=()=>{ie.current&&(clearInterval(ie.current),ie.current=null)},wd=()=>{if(!n||!Ye.current||_n.current.length===0)return;const pe=nt(n),Ee=_n.current[_n.current.length-1],Oe=Math.floor(Date.now()/1e3),Re=(Math.random()-.5)*.02,ze=pe*(1+Re);if(Oe-Ee.time>=60){const Qe={time:Oe,value:ze,open:Ee.close||ze,high:Math.max(ze,Ee.close||ze)*1.002,low:Math.min(ze,Ee.close||ze)*.998,close:ze,volume:Math.random()*5e3+500};_n.current.push(Qe),_n.current.length>500&&_n.current.shift();try{Y==="area"||Y==="line"||Y==="baseline"?Ye.current.update({time:Qe.time,value:Qe.value}):Ye.current.update({time:Qe.time,open:Qe.open,high:Qe.high,low:Qe.low,close:Qe.close}),ri.current&&ri.current.update({time:Qe.time,value:Qe.volume,color:Qe.close>=Qe.open?"rgba(34, 197, 94, 0.5)":"rgba(239, 68, 68, 0.5)"})}catch(Fe){console.error("Error updating chart:",Fe)}}},Vn=()=>{if(!Te.current||!Le.current||!n){console.log("Chart render skipped - missing refs or token");return}try{if(Me.current){try{Me.current.remove()}catch(ot){console.error("Error removing price chart:",ot)}Me.current=null}if(ke.current){try{ke.current.remove()}catch(ot){console.error("Error removing volume chart:",ot)}ke.current=null}Te.current&&(Te.current.innerHTML=""),Le.current&&(Le.current.innerHTML="");const pe=Ff(Te.current,{width:Te.current.clientWidth,height:500,layout:{background:{color:"transparent"},textColor:"#a78bfa"},grid:{vertLines:{color:"rgba(139, 92, 246, 0.1)"},horzLines:{color:"rgba(139, 92, 246, 0.1)"}},rightPriceScale:{borderColor:"rgba(139, 92, 246, 0.3)",scaleMargins:{top:.1,bottom:.1}},timeScale:{borderColor:"rgba(139, 92, 246, 0.3)",timeVisible:!0,secondsVisible:!1,visible:!1},handleScale:{axisPressedMouseMove:{time:!0,price:!0}}});Me.current=pe;const Ee=jt();if(!Ee||Ee.length===0)throw console.error("No chart data generated"),new Error("Unable to generate chart data. Please check token configuration.");let Oe;const Re={type:"price",precision:8,minMove:1e-8};switch(Y){case"bars":Oe=pe.addBarSeries({upColor:"#22c55e",downColor:"#ef4444",priceFormat:Re}),Oe.setData(Ee.map(Ue=>({time:Ue.time,open:Ue.open,high:Ue.high,low:Ue.low,close:Ue.close})));break;case"candlestick":Oe=pe.addCandlestickSeries({upColor:"#22c55e",downColor:"#ef4444",borderVisible:!1,wickUpColor:"#22c55e",wickDownColor:"#ef4444",priceFormat:Re}),Oe.setData(Ee.map(Ue=>({time:Ue.time,open:Ue.open,high:Ue.high,low:Ue.low,close:Ue.close})));break;case"hollow":Oe=pe.addCandlestickSeries({upColor:"transparent",downColor:"#ef4444",borderUpColor:"#22c55e",borderDownColor:"#ef4444",wickUpColor:"#22c55e",wickDownColor:"#ef4444",priceFormat:Re}),Oe.setData(Ee.map(Ue=>({time:Ue.time,open:Ue.open,high:Ue.high,low:Ue.low,close:Ue.close})));break;case"line":Oe=pe.addLineSeries({color:"#8b5cf6",lineWidth:2,priceFormat:Re}),Oe.setData(Ee.map(Ue=>({time:Ue.time,value:Ue.close})));break;case"area":Oe=pe.addAreaSeries({topColor:"rgba(139, 92, 246, 0.4)",bottomColor:"rgba(139, 92, 246, 0.0)",lineColor:"#8b5cf6",lineWidth:2,priceFormat:Re}),Oe.setData(Ee.map(Ue=>({time:Ue.time,value:Ue.close})));break;case"baseline":Oe=pe.addBaselineSeries({topLineColor:"#22c55e",topFillColor1:"rgba(34, 197, 94, 0.4)",topFillColor2:"rgba(34, 197, 94, 0.0)",bottomLineColor:"#ef4444",bottomFillColor1:"rgba(239, 68, 68, 0.0)",bottomFillColor2:"rgba(239, 68, 68, 0.4)",priceFormat:Re}),Oe.setData(Ee.map(Ue=>({time:Ue.time,value:Ue.close})));break;case"heikin":Oe=pe.addCandlestickSeries({upColor:"#22c55e",downColor:"#ef4444",borderVisible:!1,wickUpColor:"#22c55e",wickDownColor:"#ef4444",priceFormat:Re});const ot=Ee.map((Ue,lr)=>{if(lr===0)return Ue;const cr=Ee[lr-1],nn=(Ue.open+Ue.high+Ue.low+Ue.close)/4,fn=(cr.open+cr.close)/2,Ss=Math.max(Ue.high,fn,nn),Ra=Math.min(Ue.low,fn,nn);return{time:Ue.time,open:fn,high:Ss,low:Ra,close:nn}});Oe.setData(ot);break;default:Oe=pe.addCandlestickSeries({upColor:"#22c55e",downColor:"#ef4444",borderVisible:!1,wickUpColor:"#22c55e",wickDownColor:"#ef4444",priceFormat:Re}),Oe.setData(Ee.map(Ue=>({time:Ue.time,open:Ue.open,high:Ue.high,low:Ue.low,close:Ue.close})))}Ye.current=Oe;const ze=Ff(Le.current,{width:Le.current.clientWidth,height:120,layout:{background:{color:"transparent"},textColor:"#a78bfa"},grid:{vertLines:{color:"rgba(139, 92, 246, 0.1)"},horzLines:{color:"rgba(139, 92, 246, 0.1)"}},rightPriceScale:{borderColor:"rgba(139, 92, 246, 0.3)",scaleMargins:{top:.1,bottom:.1}},timeScale:{borderColor:"rgba(139, 92, 246, 0.3)",timeVisible:!0,secondsVisible:!1}});ke.current=ze;const Qe=ze.addHistogramSeries({color:"#8b5cf6",priceFormat:{type:"volume"}});Qe.setData(Ee.map(ot=>({time:ot.time,value:ot.volume,color:ot.close>=ot.open?"rgba(34, 197, 94, 0.5)":"rgba(239, 68, 68, 0.5)"}))),ri.current=Qe,pe.timeScale().fitContent(),ze.timeScale().fitContent(),pe.timeScale().subscribeVisibleTimeRangeChange(()=>{const ot=pe.timeScale().getVisibleRange();ot&&ze.timeScale().setVisibleRange(ot)});const Fe=()=>{Me.current&&Te.current&&Me.current.applyOptions({width:Te.current.clientWidth}),ke.current&&Le.current&&ke.current.applyOptions({width:Le.current.clientWidth})};window.addEventListener("resize",Fe),setTimeout(()=>{nr()},100)}catch(pe){if(console.error("Error rendering chart:",pe),ye.error("Failed to render chart. Please refresh the page."),Me.current){try{Me.current.remove()}catch(Ee){console.error("Error cleaning up price chart:",Ee)}Me.current=null}if(ke.current){try{ke.current.remove()}catch(Ee){console.error("Error cleaning up volume chart:",Ee)}ke.current=null}}},sr=()=>{if(!n||!a||isNaN(a))return{tokenAmount:0,xrpAmount:0,priceImpact:0,fee:0};const pe=nt(n);if(s==="buy"){const Ee=parseFloat(a),Oe=Ee/pe,Re=Ee/n.amm_xrp_amount*100;return{tokenAmount:Oe.toFixed(4),xrpAmount:Ee.toFixed(4),priceImpact:Re.toFixed(2),fee:gS.toFixed(2)}}else{const Ee=parseFloat(a),Oe=Ee*pe,Re=Ee/n.amm_asset_amount*100;return{tokenAmount:Ee.toFixed(4),xrpAmount:Oe.toFixed(4),priceImpact:Re.toFixed(2),fee:gS.toFixed(2)}}},Qr=()=>{if(!ae||!a||!c){g("");return}const pe=sr();if(!pe){g("");return}ae.liquidity;const Ee=parseFloat(pe.priceImpact),Oe=parseFloat(R);let Re=.5;Ee>10?Re=Math.max(15,Ee*1.5):Ee>5?Re=Math.max(10,Ee*1.3):Ee>2?Re=Math.max(5,Ee*1.2):Ee>1?Re=3:Ee>.5&&(Re=1),Oe<Re?g(`⚠️ Low slippage detected. Recommended: ${Re.toFixed(1)}% (Price Impact: ${Ee}%)`):g("")},Eo=async()=>{if(n)try{k(!0);const pe=new Ve.Client("wss://xrplcluster.com");await pe.connect();const Ee=await pe.request({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:n.currency_code,issuer:n.issuer_address},ledger_index:"validated"});if(Ee.result.amm){const Oe=Ee.result.amm,Re=parseFloat(Oe.amount)/1e6,ze=parseFloat(Oe.amount2.value),Qe=Re/ze,Fe=Qe*n.supply,ot=Re*.15;he({marketCap:Fe,liquidity:Re,volume24h:ot,poolSize:ze,price:Qe})}await pe.disconnect()}catch(pe){console.error("Error fetching market data:",pe),he(null)}finally{k(!1)}},si=async()=>{if(!n||!d){A("0");return}try{L(!0);const pe=new Ve.Client("wss://xrplcluster.com");await pe.connect();const Ee=await pe.request({command:"account_lines",account:d.address,ledger_index:"validated"}),Oe=n.currency_code.length>3?_t.Buffer.from(n.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):n.currency_code,Re=Ee.result.lines.find(ze=>ze.account===n.issuer_address&&(ze.currency===n.currency_code||ze.currency===Oe||ze.currency===n.currency_code.substring(0,3)));A(Re?Re.balance:"0"),await pe.disconnect()}catch(pe){console.error("Error fetching token balance:",pe),A("0")}finally{L(!1)}},Tr=async()=>{if(!n||!d){m(!1);return}try{S(!0);const pe=new Ve.Client("wss://xrplcluster.com");await pe.connect();const Ee=await pe.request({command:"account_lines",account:d.address,ledger_index:"validated"}),Oe=n.currency_code.length>3?_t.Buffer.from(n.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):n.currency_code,Re=Ee.result.lines.some(ze=>ze.account===n.issuer_address&&(ze.currency===n.currency_code||ze.currency===Oe||ze.currency===n.currency_code.substring(0,3)));m(Re),await pe.disconnect()}catch(pe){console.error("Error checking trustline:",pe),m(!1)}finally{S(!1)}},ii=async()=>{if(!n||!d||!d.seed){ye.error("Wallet seed required for trustline setup");return}try{y(!0);const pe=new Ve.Client("wss://xrplcluster.com");await pe.connect();const Ee=Ve.Wallet.fromSeed(d.seed),Oe={TransactionType:"TrustSet",Account:d.address,LimitAmount:{currency:n.currency_code,issuer:n.issuer_address,value:"1000000000"}},Re=await pe.autofill(Oe),ze=Ee.sign(Re);(await pe.submitAndWait(ze.tx_blob)).result.meta.TransactionResult==="tesSUCCESS"?(ye.success("Trustline established successfully!"),m(!0),si()):ye.error("Failed to establish trustline"),await pe.disconnect()}catch(pe){console.error("Error setting up trustline:",pe),ye.error("Failed to setup trustline: "+pe.message)}finally{y(!1)}},Vt=(pe,Ee,Oe={})=>{q(Re=>{const ze=[...Re];return Ee==="error"?ze[pe]={...ze[pe],error:!0,description:Oe.error||ze[pe].description}:Ee==="success"&&(ze[pe]={...ze[pe],description:Oe.description||ze[pe].description,txHash:Oe.txHash}),ze}),Ee!=="error"&&ue(pe+1)},ir=async()=>{var ze;if(!d||!d.seed){ye.error("Wallet seed required for trading");return}if(!f){ye.error("Please setup trustline first");return}const pe=sr(),Oe=[{title:"Connecting to XRPL",description:"Establishing connection to the XRP Ledger network"},{title:`${s==="buy"?"Buying":"Selling"} ${n.token_name}`,description:`Swapping ${s==="buy"?pe.xrpAmount+" XRP for "+pe.tokenAmount:pe.tokenAmount+" for "+pe.xrpAmount+" XRP"} ${n.token_name}`},{title:"Transaction Complete",description:"Trade executed successfully"}];q(Oe),ue(0),J(!0),b(!0);let Re=null;try{Vt(0,"loading"),Re=new Ve.Client("wss://xrplcluster.com"),await Re.connect(),Vt(0,"success",{description:"Connected to XRPL successfully"});const Qe=Ve.Wallet.fromSeed(d.seed),Fe=n.currency_code.length>3?_t.Buffer.from(n.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):n.currency_code,ot=1+parseFloat(R)/100;Vt(1,"loading");let Ue;if(s==="buy"){const fn=parseFloat(pe.tokenAmount)/ot,Ss=parseFloat(pe.xrpAmount)*ot;Ue={TransactionType:"Payment",Account:d.address,Destination:d.address,Amount:{currency:Fe,issuer:n.issuer_address,value:vS(fn)},SendMax:Ve.xrpToDrops(yS(Ss).toString())}}else{const fn=parseFloat(pe.tokenAmount)*ot,Ss=parseFloat(pe.xrpAmount)/ot;Ue={TransactionType:"Payment",Account:d.address,Destination:d.address,Amount:Ve.xrpToDrops(yS(Ss).toString()),SendMax:{currency:Fe,issuer:n.issuer_address,value:vS(fn)}}}console.log(`
💱 ${s.toUpperCase()} Swap:`),console.log(`   ${s==="buy"?"Spending":"Receiving"}: ${pe.xrpAmount} XRP`),console.log(`   ${s==="buy"?"Receiving":"Spending"}: ${pe.tokenAmount} ${n.token_name}`),console.log(`   Slippage: ${R}%`);const lr=await Re.autofill(Ue),cr=Qe.sign(lr),nn=await Re.submitAndWait(cr.tx_blob,{timeout:45e3});if(nn.result.meta.TransactionResult==="tesSUCCESS"){const fn=s==="buy"?parseFloat(((ze=nn.result.meta.delivered_amount)==null?void 0:ze.value)||pe.tokenAmount):pe.tokenAmount;Vt(1,"success",{description:`${s==="buy"?"Bought":"Sold"} ${fn.toFixed(4)} ${n.token_name}`,txHash:nn.result.hash}),await Ws({userAddress:d.address,actionType:Xs.SWAP_EXECUTED,description:`${s==="buy"?"Bought":"Sold"} ${fn.toFixed(4)} ${n.token_name}`,details:{tradeType:s,tokenAmount:fn.toFixed(4),xrpAmount:pe.xrpAmount},txHash:nn.result.hash,tokenId:n.id}),Vt(2,"success",{description:"Trade completed successfully"}),await si(),setTimeout(()=>{J(!1),l(""),u("")},2e3),ye.success(`Successfully ${s==="buy"?"bought":"sold"} ${pe.tokenAmount} ${n.token_name}!`)}else throw new Error(`Transaction failed: ${nn.result.meta.TransactionResult}`);Re&&Re.isConnected()&&await Re.disconnect()}catch(Qe){console.error("Error executing trade:",Qe);let Fe=Qe.message||"Unknown error occurred";if(Fe.includes("xrpToDrops")||Fe.includes("decimal")||Fe.includes("precision")||Fe.includes("Decimal precision out of range"))Fe="Amount precision error. Use round numbers (e.g., 1.50 instead of 1.5678).";else if(Fe.includes("too small")||Fe.includes("too large"))Fe=Fe;else if(Fe.includes("Invalid XRP amount")||Fe.includes("Invalid token amount"))Fe="Invalid amount entered. Please check your trade amounts.";else if(Fe.includes("tecPATH_DRY"))Fe="Insufficient liquidity in the pool. Try a smaller amount or increase slippage.";else if(Fe.includes("tecUNFUNDED_PAYMENT"))Fe="Insufficient funds for this transaction. Check your balance.";else if(Fe.includes("tecUNFUNDED"))Fe="Insufficient XRP balance for this transaction and fees.";else if(Fe.includes("tecNO_LINE"))Fe="Trustline not found. Please set up trustline first.";else if(Fe.includes("tecPATH_PARTIAL")){const Ue=parseFloat(R),lr=Math.min(Ue*2,50);P({currentSlippage:Ue,suggestedSlippage:lr,tradeType:s.charAt(0).toUpperCase()+s.slice(1),amount:a,tokenName:n.token_name}),T(!0),Q(!1),le(!1),_e(null),M(!1);return}else Fe.includes("tecNO_AUTH")?Fe="Token issuer requires authorization. Cannot trade this token.":Fe.includes("temREDUNDANT")?Fe="Transaction expired. Please try again.":Fe.includes("LastLedgerSequence")?Fe="Transaction took too long to process. Please try again.":Fe.includes("timeout")||Fe.includes("Connection timeout")?Fe="Connection timeout. Please check your internet and try again.":Fe.includes("Failed to fetch")?Fe="Network error. Please check your connection and try again.":Fe.includes("WebSocket")&&(Fe="Connection to XRPL failed. Please try again.");const ot=Math.min(Z,X.length-1);Vt(ot,"error",{error:Fe}),ye.error(Ue=>o.jsxs("div",{className:"flex items-start gap-3 max-w-md",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-semibold mb-1",children:"Trade failed"}),o.jsx("div",{className:"text-sm opacity-90",children:Fe})]}),o.jsx("button",{onClick:()=>ye.dismiss(Ue.id),className:"flex-shrink-0 ml-2 text-white/70 hover:text-white transition-colors",children:"✕"})]}),{duration:1e4,style:{background:"#991b1b",color:"#fef2f2",border:"1px solid #dc2626",maxWidth:"500px"}})}finally{if(b(!1),Re&&Re.isConnected())try{await Re.disconnect()}catch(Qe){console.error("Error disconnecting client:",Qe)}}},Es=async()=>{C&&(M(!0),D(C.suggestedSlippage.toString()),setTimeout(async()=>{try{await ir(),Q(!0),le(!0)}catch(pe){Q(!0),le(!1),_e(pe.message||"Trade failed. Please try again.")}finally{M(!1)}},3e3))},Pa=()=>{T(!1),P(null),M(!1),Q(!1),le(!1),_e(null)},Gt=()=>{T(!1),P(null),M(!1),Q(!1),le(!1),_e(null),J(!1),l(""),u("")},hn=async()=>{if(n){w(!0),Ie(!0);try{const pe=new Ve.Client("wss://s1.ripple.com");await pe.connect();const Oe=Date.now()-24*60*60*1e3,Re=Math.floor(Oe/1e3)-946684800,Qe=(await pe.request({command:"account_tx",account:n.issuer_address,ledger_index_min:-1,ledger_index_max:-1,limit:200})).result.transactions.filter(Fe=>Fe.tx.date>=Re).filter(Fe=>{const ot=Fe.tx.TransactionType;return["Payment","AMMDeposit","AMMWithdraw"].includes(ot)}).map(Fe=>({...Fe.tx,meta:Fe.meta,hash:Fe.tx.hash})).sort((Fe,ot)=>ot.date-Fe.date);O(Qe),await pe.disconnect()}catch(pe){console.error("Error fetching pool history:",pe),ye.error("Failed to load transaction history"),O([])}finally{w(!1)}}};z.useEffect(()=>{be&&n&&He.length===0&&hn()},[be]);const or=sr(),ar=xe>0?xe:n?nt(n):0,Yt=n?ft(n):0,Ar=$||(n&&n.amm_xrp_amount?((ar-n.amm_xrp_amount/n.amm_asset_amount*.95)/(n.amm_xrp_amount/n.amm_asset_amount*.95)*100).toFixed(2):"0.00");return n&&_t.Buffer.from(n.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-purple-200",children:"Trade"}),o.jsx("p",{className:"text-purple-400 text-sm",children:"Buy and sell meme tokens"})]}),n&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>Ie(!0),className:"btn-primary text-white px-4 py-2 rounded-lg font-medium text-sm",children:"📊 History"}),o.jsx("a",{href:`https://xmagnetic.org/dex/${n.currency_code}+${n.issuer_address}_XRP+XRP?network=mainnet`,target:"_blank",rel:"noopener noreferrer",className:"btn-primary text-white px-4 py-2 rounded-lg font-medium text-sm",children:"Magnetic DEX →"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:h-[calc(100vh-12rem)]",children:[o.jsxs("div",{className:"lg:col-span-2 flex flex-col space-y-4",children:[o.jsxs("div",{className:"glass rounded-lg p-4 overflow-hidden",children:[n&&o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(xn,{token:n,size:"sm"}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-base font-bold text-purple-200",children:[n.token_name,"/XRP"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"text-lg font-bold text-purple-200",children:[ar.toFixed(8)," XRP"]}),o.jsxs("span",{className:`text-xs font-medium px-1.5 py-0.5 rounded ${parseFloat(Ar)>=0?"text-green-300 bg-green-500/10":"text-red-300 bg-red-500/10"}`,children:[parseFloat(Ar)>=0?"+":"",Ar,"%"]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("select",{value:U,onChange:pe=>G(pe.target.value),className:"input px-2 py-1 text-xs text-purple-200",children:[o.jsx("option",{value:"5m",children:"5m"}),o.jsx("option",{value:"15m",children:"15m"}),o.jsx("option",{value:"30m",children:"30m"}),o.jsx("option",{value:"1h",children:"1h"}),o.jsx("option",{value:"4h",children:"4h"}),o.jsx("option",{value:"1d",children:"1D"})]}),o.jsxs("select",{value:Y,onChange:pe=>ee(pe.target.value),className:"input px-2 py-1 text-xs text-purple-200",children:[o.jsx("option",{value:"candlestick",children:"🕯 Candles"}),o.jsx("option",{value:"bars",children:"📊 Bars"}),o.jsx("option",{value:"hollow",children:"⬜ Hollow"}),o.jsx("option",{value:"heikin",children:"🎴 Heikin Ashi"}),o.jsx("option",{value:"line",children:"📈 Line"}),o.jsx("option",{value:"area",children:"📉 Area"}),o.jsx("option",{value:"baseline",children:"📏 Baseline"})]}),o.jsx("button",{onClick:Eo,disabled:F,className:"btn-secondary px-2 py-1 text-xs disabled:opacity-50",children:"🔄"})]})]}),n?o.jsxs(o.Fragment,{children:[o.jsx("div",{ref:Te,className:"w-full h-[500px] overflow-hidden bg-purple-900/20 rounded"}),o.jsx("div",{ref:Le,className:"w-full h-[120px] overflow-hidden bg-purple-900/20 rounded mt-1"})]}):o.jsx("div",{className:"w-full h-[620px] flex items-center justify-center bg-purple-900/20 rounded",children:o.jsxs("div",{className:"text-center text-purple-400",children:[o.jsx("div",{className:"text-4xl mb-2",children:"📊"}),o.jsx("p",{children:"Select a token to view chart"})]})})]}),o.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[o.jsxs("div",{className:"glass rounded-lg p-2",children:[o.jsx("div",{className:"text-purple-400 text-xs",children:"Market Cap"}),o.jsxs("div",{className:"text-sm font-bold text-purple-200",children:[ae?ae.marketCap.toFixed(2):Yt.toFixed(2)," XRP"]}),ce>0&&o.jsxs("div",{className:"text-xs text-purple-400",children:["$",ce>=1e6?`${(ce/1e6).toFixed(2)}M`:ce>=1e3?`${(ce/1e3).toFixed(2)}K`:ce.toFixed(2)]})]}),o.jsxs("div",{className:"glass rounded-lg p-2",children:[o.jsx("div",{className:"text-purple-400 text-xs",children:"Liquidity"}),o.jsxs("div",{className:"text-sm font-bold text-purple-200",children:[ae?ae.liquidity.toFixed(2):n?n.amm_xrp_amount.toFixed(2):0," XRP"]})]}),o.jsxs("div",{className:"glass rounded-lg p-2",children:[o.jsx("div",{className:"text-purple-400 text-xs",children:"Volume 24h"}),o.jsxs("div",{className:"text-sm font-bold text-purple-200",children:[ae?ae.volume24h.toFixed(2):n?(n.amm_xrp_amount*.15).toFixed(2):0," XRP"]})]}),o.jsxs("div",{className:"glass rounded-lg p-2",children:[o.jsx("div",{className:"text-purple-400 text-xs",children:"Pool Size"}),o.jsxs("div",{className:"text-sm font-bold text-purple-200",children:[ae?(ae.poolSize/1e3).toFixed(0):n?(n.amm_asset_amount/1e3).toFixed(0):0,"K"]})]})]}),o.jsxs("div",{className:"glass rounded-lg p-3 flex-1",children:[o.jsx("h3",{className:"text-base font-bold text-purple-200 mb-2",children:"Token Info"}),o.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1.5 text-xs",children:[o.jsxs("div",{className:"flex flex-col py-1",children:[o.jsx("span",{className:"text-purple-400 text-[10px]",children:"Supply"}),o.jsx("span",{className:"text-purple-200 font-bold text-xs",children:n?n.supply.toLocaleString():0})]}),o.jsxs("div",{className:"flex flex-col py-1",children:[o.jsx("span",{className:"text-purple-400 text-[10px]",children:"Circulating"}),o.jsx("span",{className:"text-purple-200 font-bold text-xs",children:n?(n.supply*.9).toLocaleString():0})]}),o.jsxs("div",{className:"flex flex-col py-1",children:[o.jsx("span",{className:"text-purple-400 text-[10px]",children:"Price"}),o.jsxs("span",{className:"text-purple-200 font-bold text-xs",children:[n?ar.toFixed(8):0," XRP"]})]}),o.jsxs("div",{className:"flex flex-col py-1",children:[o.jsx("span",{className:"text-purple-400 text-[10px]",children:"Liquidity"}),o.jsxs("span",{className:"text-purple-200 font-bold text-xs",children:[ae?ae.liquidity.toFixed(2):n?n.amm_xrp_amount.toFixed(2):0," XRP"]})]}),o.jsxs("div",{className:"col-span-2 pt-2 border-t border-purple-500/20",children:[o.jsx("div",{className:"text-purple-400 text-[10px] mb-1",children:"Currency Code"}),o.jsx("div",{className:"text-purple-300 text-[11px] font-mono bg-black/30 px-2 py-1 rounded",children:n?n.currency_code:""})]}),o.jsxs("div",{className:"col-span-2 pt-2 border-t border-purple-500/20",children:[o.jsx("div",{className:"text-purple-400 text-[10px] mb-1",children:"Issuer Address"}),o.jsx("div",{className:"text-purple-300 text-[10px] font-mono bg-black/30 px-2 py-1 rounded break-all",children:n?n.issuer_address:""})]})]})]})]}),o.jsxs("div",{className:"space-y-3",children:[!d&&o.jsx("div",{className:"glass rounded-lg p-4 bg-yellow-500/10 border border-yellow-500/30",children:o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("div",{className:"text-3xl",children:"⚠️"}),o.jsx("h3",{className:"text-sm font-bold text-yellow-200",children:"Wallet Not Connected"}),o.jsx("p",{className:"text-yellow-300 text-xs",children:"Connect wallet from Setup"})]})}),o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsx("h3",{className:"text-lg font-bold text-purple-200 mb-3",children:"Select Token"}),o.jsxs("select",{value:(n==null?void 0:n.id)||"",onChange:pe=>{const Ee=t.find(Oe=>Oe.id===pe.target.value);r(Ee)},className:"input w-full mb-3 text-purple-200",children:[o.jsx("option",{value:"",children:"Choose a token..."}),t.map(pe=>o.jsxs("option",{value:pe.id,children:[pe.token_name," - ",nt(pe).toFixed(8)," XRP"]},pe.id))]}),n&&o.jsx("div",{className:"glass rounded-lg p-3 bg-blue-500/10 border border-blue-500/30 mb-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"text-blue-400 text-xs",children:"Trading Pair"}),o.jsxs("div",{className:"text-blue-200 font-bold",children:[n.currency_code,"/XRP"]})]})}),n&&d&&o.jsxs("div",{className:"mt-3 space-y-2",children:[o.jsxs("div",{className:"glass rounded-lg p-3 bg-purple-500/10 border border-purple-500/30",children:[o.jsx("div",{className:"text-purple-300 text-xs mb-1",children:"Your Balance"}),o.jsx("div",{className:"text-lg font-bold text-purple-200",children:E?o.jsx("span",{className:"animate-pulse",children:"Loading..."}):`${parseFloat(v).toFixed(4)} ${n.token_name}`})]}),_?o.jsx("div",{className:"glass rounded-lg p-4 text-center",children:o.jsx("div",{className:"text-purple-300 animate-pulse",children:"Checking trustline..."})}):f?o.jsx("div",{className:"glass rounded-lg p-4 bg-green-500/10 border border-green-500/30",children:o.jsxs("div",{className:"flex items-center gap-2 justify-center text-green-300",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),o.jsx("span",{className:"text-sm font-medium",children:"Trustline Active"})]})}):o.jsx("button",{onClick:ii,disabled:j,className:"w-full btn-primary text-white py-3 rounded-lg font-medium disabled:opacity-50",children:j?"Setting up Trustline...":"✓ Setup Trustline"})]})]}),o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-lg font-bold text-purple-200",children:"Trade"}),o.jsxs("select",{value:V,onChange:pe=>se(pe.target.value),className:"input px-3 py-1.5 text-sm text-purple-200 bg-purple-900/50 border-purple-500/30",children:[o.jsx("option",{value:"amm",children:"AMM Pool"}),o.jsx("option",{value:"market",children:"Market"})]})]}),o.jsxs("div",{className:"flex gap-2 mb-3",children:[o.jsx("button",{onClick:()=>i("buy"),className:`flex-1 py-3 rounded-lg font-medium transition-all ${s==="buy"?"bg-green-600 text-white":"glass text-purple-300"}`,children:"Buy"}),o.jsx("button",{onClick:()=>i("sell"),className:`flex-1 py-3 rounded-lg font-medium transition-all ${s==="sell"?"bg-red-600 text-white":"glass text-purple-300"}`,children:"Sell"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:s==="buy"?"XRP Amount":"Token Amount"}),o.jsx("input",{type:"number",value:a,onChange:pe=>{const Ee=pe.target.value;l(Ee)},placeholder:"0.00",step:"0.000001",className:"input w-full text-purple-200 text-lg"}),o.jsx("div",{className:"text-purple-400 text-xs mt-1",children:s==="buy"?"Enter XRP to spend":`Enter ${(n==null?void 0:n.token_name)||"tokens"} to sell`})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Slippage Tolerance"}),o.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[["0.1","0.5","1","3"].map(pe=>o.jsxs("button",{onClick:()=>D(pe),className:`py-2 rounded-lg text-sm font-medium transition-all ${R===pe?"bg-purple-600 text-white":"glass text-purple-300 hover:bg-purple-900/30"}`,children:[pe,"%"]},pe)),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"number",value:R,onChange:pe=>D(pe.target.value),placeholder:"0.5",className:"input w-full px-2 py-2 text-sm text-purple-200 text-center",step:"0.1",min:"0.1",max:"50"}),o.jsx("div",{className:"absolute inset-y-0 right-2 flex items-center pointer-events-none text-purple-400 text-xs",children:"%"})]})]}),o.jsxs("div",{className:"text-purple-400 text-xs mt-1",children:["Trade will revert if price changes by more than ",R,"%"]}),N&&o.jsxs("div",{className:"mt-2 p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:[o.jsx("p",{className:"text-yellow-400 text-sm",children:N}),o.jsx("button",{onClick:()=>{const pe=sr();if(pe){const Ee=parseFloat(pe.priceImpact);let Oe=.5;Ee>10?Oe=Math.max(15,Ee*1.5):Ee>5?Oe=Math.max(10,Ee*1.3):Ee>2?Oe=Math.max(5,Ee*1.2):Ee>1?Oe=3:Ee>.5&&(Oe=1),D(Oe.toFixed(1))}},className:"mt-2 text-xs px-3 py-1 bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-300 rounded-lg transition-colors",children:"Use Recommended Slippage"})]})]}),a&&!isNaN(a)&&parseFloat(a)>0&&o.jsxs("div",{className:"glass rounded-lg p-4 space-y-3",children:[o.jsx("h4",{className:"font-bold text-purple-200",children:"Estimate"}),o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{className:"text-purple-400 text-sm",children:["You ",s==="buy"?"Receive":"Get"]}),o.jsx("span",{className:"text-purple-200 font-bold",children:s==="buy"?`${or.tokenAmount} ${(n==null?void 0:n.token_name)||""}`:`${or.xrpAmount} XRP`})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-purple-400 text-sm",children:"Price"}),o.jsxs("span",{className:"text-purple-200",children:[ar.toFixed(8)," XRP"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-purple-400 text-sm",children:"Price Impact"}),o.jsxs("span",{className:`font-medium ${parseFloat(or.priceImpact)>5?"text-red-400":"text-green-400"}`,children:[or.priceImpact,"%"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-purple-400 text-sm",children:"Trading Fee"}),o.jsxs("span",{className:"text-purple-200",children:[or.fee," XRP"]})]}),parseFloat(or.priceImpact)>10&&o.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded p-3 text-yellow-200 text-xs",children:"⚠️ High price impact! Consider reducing trade size."})]}),o.jsx("button",{onClick:ir,disabled:!d||!f||!a||isNaN(a)||parseFloat(a)<=0||x,className:`w-full py-4 rounded-lg font-bold text-lg transition-all ${s==="buy"?"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800":"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800"} text-white shadow-lg disabled:opacity-50 disabled:cursor-not-allowed`,children:x?"Processing...":d?f?`${s==="buy"?"💚 Buy":"❤️ Sell"} ${(n==null?void 0:n.currency_code)||"Token"}`:"Setup Trustline First":"Connect Wallet First"})]})]})]})]}),o.jsx(Lj,{isOpen:ne,steps:X,currentStep:Z,onClose:()=>J(!1),canClose:Z>=X.length||X.some(pe=>pe.error),title:s==="buy"?"💰 Buying Token on XRPL":"💸 Selling Token on XRPL",successTitle:s==="buy"?"🎉 Purchase Successful!":"🎉 Sale Successful!",failTitle:s==="buy"?"❌ Purchase Failed":"❌ Sale Failed"}),C&&o.jsx(LX,{isOpen:I,currentSlippage:C.currentSlippage,suggestedSlippage:C.suggestedSlippage,tradeType:C.tradeType,amount:C.amount,tokenName:C.tokenName,onRetry:Es,onCancel:Pa,onClose:Gt,isRetrying:H,retryComplete:K,retrySuccess:te,retryError:we}),o.jsx(MX,{isOpen:be,onClose:()=>Ie(!1),token:n,transactions:He,loading:p})]})}function BX({bot:t,onClose:e}){const[n,r]=z.useState([]),[s,i]=z.useState(!0);z.useEffect(()=>{a()},[t.id]);const a=async()=>{try{i(!0);const{data:u,error:d}=await Pe.from("bot_trades").select("*").eq("bot_id",t.id).order("created_at",{ascending:!1}).limit(100);if(d)throw d;r(u||[])}catch(u){console.error("Error loading trades:",u)}finally{i(!1)}},l=u=>u.status==="failed"?"text-red-400":u.trade_type==="BUY"?"text-green-400":u.trade_type==="SELL"?"text-yellow-400":"text-gray-400",c=u=>u.status==="failed"?"❌":u.trade_type==="BUY"?"📈":u.trade_type==="SELL"?"📉":"⚠️";return o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h3",{className:"text-2xl font-bold text-purple-200",children:["Trade History: ",t.name]}),o.jsx("button",{onClick:e,className:"text-purple-400 hover:text-purple-200 text-2xl",children:"✕"})]}),o.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[o.jsxs("div",{className:"glass rounded-lg p-4 bg-purple-500/10",children:[o.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"Total Trades"}),o.jsx("div",{className:"text-2xl font-bold text-purple-200",children:t.total_trades||0})]}),o.jsxs("div",{className:"glass rounded-lg p-4 bg-green-500/10",children:[o.jsx("div",{className:"text-green-400 text-xs mb-1",children:"Successful"}),o.jsx("div",{className:"text-2xl font-bold text-green-400",children:t.successful_trades||0})]}),o.jsxs("div",{className:"glass rounded-lg p-4 bg-red-500/10",children:[o.jsx("div",{className:"text-red-400 text-xs mb-1",children:"Failed"}),o.jsx("div",{className:"text-2xl font-bold text-red-400",children:t.failed_trades||0})]}),o.jsxs("div",{className:"glass rounded-lg p-4 bg-blue-500/10",children:[o.jsx("div",{className:"text-blue-400 text-xs mb-1",children:"Success Rate"}),o.jsxs("div",{className:"text-2xl font-bold text-blue-400",children:[t.total_trades>0?(t.successful_trades/t.total_trades*100).toFixed(1):0,"%"]})]})]}),s?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-4xl mb-4",children:"⏳"}),o.jsx("p",{className:"text-purple-300",children:"Loading trades..."})]}):n.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-6xl mb-4",children:"📊"}),o.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-2",children:"No Trades Yet"}),o.jsx("p",{className:"text-purple-400",children:"This bot hasn't executed any trades yet"})]}):o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"grid grid-cols-7 gap-4 px-4 py-2 text-purple-400 text-sm font-medium border-b border-purple-500/30",children:[o.jsx("div",{children:"Type"}),o.jsx("div",{className:"text-right",children:"Amount"}),o.jsx("div",{className:"text-right",children:"XRP Cost"}),o.jsx("div",{className:"text-right",children:"Price"}),o.jsx("div",{className:"text-right",children:"Status"}),o.jsx("div",{className:"text-right",children:"Time"}),o.jsx("div",{className:"text-center",children:"TX"})]}),n.map(u=>o.jsxs("div",{className:"glass rounded-lg p-4 grid grid-cols-7 gap-4 items-center hover:bg-purple-500/5 transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:c(u)}),o.jsx("span",{className:`font-bold ${l(u)}`,children:u.trade_type})]}),o.jsx("div",{className:"text-right text-purple-200 font-medium",children:parseFloat(u.amount).toFixed(4)}),o.jsxs("div",{className:"text-right text-purple-200 font-medium",children:[parseFloat(u.xrp_cost).toFixed(4)," XRP"]}),o.jsx("div",{className:"text-right text-purple-300 text-sm",children:parseFloat(u.price).toFixed(8)}),o.jsx("div",{className:"text-right",children:o.jsx("span",{className:`px-2 py-1 rounded text-xs ${u.status==="success"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:u.status})}),o.jsx("div",{className:"text-right text-purple-400 text-xs",children:new Date(u.created_at).toLocaleTimeString()}),o.jsx("div",{className:"text-center",children:u.tx_hash?o.jsxs("a",{href:`https://xrpscan.com/tx/${u.tx_hash}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 text-xs underline flex items-center justify-center gap-1",title:"View on XRPScan (Mainnet)",children:[o.jsx("span",{children:"🔍"}),o.jsx("span",{children:"View"})]}):o.jsx("span",{className:"text-gray-500 text-xs",children:"-"})})]},u.id))]}),o.jsx("div",{className:"flex justify-end pt-4 border-t border-purple-500/30",children:o.jsx("button",{onClick:e,className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium",children:"Close"})})]})})}const FX=(t,e=6)=>{const n=parseFloat(t);if(isNaN(n)||n<=0)throw new Error("Invalid amount");const r=Math.pow(10,e);return Math.floor(n*r)/r},Rv=t=>FX(t,6),xS=t=>{const e=parseFloat(t);if(isNaN(e)||e<=0)throw new Error("Invalid token amount");return e.toFixed(6)},Eh=t=>parseFloat(t).toFixed(2),wS=(t,e)=>{const n=e-t,r=t+Math.random()*n;return Rv(r)},Sh=5,$g="rphatRpwXcPAo7CVm46dC78JAQ6kLMqb2M",Fo=.1,Vg=100,zt={ACCUMULATE:"accumulate",DISTRIBUTE:"distribute",BALANCED:"balanced"};function UX(){const[t,e]=z.useState([]),[n,r]=z.useState({}),[s,i]=z.useState(null),[a,l]=z.useState([]),[c,u]=z.useState(!1),[d,h]=z.useState(!1),[f,m]=z.useState(null),[_,S]=z.useState(null),[j,y]=z.useState({}),[x,b]=z.useState({}),[v,A]=z.useState({}),[E,L]=z.useState({name:"",tokenId:"",strategy:zt.BALANCED,interval:15,minAmount:.5,maxAmount:2,slippage:10,buyProbability:50}),[Y,ee]=z.useState(!1),[U,G]=z.useState({show:!1,message:""}),[ae,he]=z.useState(0),xe=z.useRef({});z.useEffect(()=>{$(),de()},[]),z.useEffect(()=>{const g=setInterval(()=>{he(I=>I+1)},1e3);return()=>clearInterval(g)},[]),z.useEffect(()=>{t.length>0&&re()},[t]),z.useEffect(()=>{if(s){R();const g=setInterval(()=>{k()},5e3);return()=>clearInterval(g)}},[s]),z.useEffect(()=>{const g=()=>{de()};return window.addEventListener("walletConnected",g),window.addEventListener("walletDisconnected",g),()=>{window.removeEventListener("walletConnected",g),window.removeEventListener("walletDisconnected",g)}},[]);const de=()=>{const g=localStorage.getItem("connectedWallet");g&&i(JSON.parse(g))},$=async()=>{try{const{data:g,error:I}=await Pe.from("meme_tokens").select("*").eq("amm_pool_created",!0).order("created_at",{ascending:!1});if(I)throw I;e(g||[])}catch(g){console.error("Error loading tokens:",g)}},re=async()=>{const g={};for(const I of t)try{const T=await F(I);T&&(g[I.id]=T)}catch(T){console.error(`Error fetching pool data for ${I.token_name}:`,T)}r(g)},F=async g=>{var I;try{const T=new Ve.Client("wss://xrplcluster.com");await T.connect();const C=g.currency_code.length>3?_t.Buffer.from(g.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):g.currency_code,P={command:"amm_info",asset:{currency:"XRP"},asset2:{currency:C,issuer:g.issuer_address},ledger_index:"validated"},H=await T.request(P);if(await T.disconnect(),(I=H==null?void 0:H.result)!=null&&I.amm){const M=H.result.amm,K=parseFloat(M.amount)/1e6,Q=parseFloat(M.amount2.value),te=K/Q;return{amm_xrp_amount:K,amm_asset_amount:Q,price:te}}}catch(T){console.error(`Error fetching pool for ${g.token_name}:`,T)}return null},k=async()=>{if(s)try{const{data:g,error:I}=await Pe.from("trading_bots").select("*").eq("wallet_address",s.address).order("created_at",{ascending:!1});if(I)throw I;l(T=>(g||[]).map(P=>{const H=T.find(M=>M.id===P.id);return P.next_trade_time&&P.next_action&&(y(M=>({...M,[P.id]:new Date(P.next_trade_time).getTime()})),b(M=>({...M,[P.id]:{action:P.next_action,tokenAmount:P.next_token_amount,xrpAmount:P.next_xrp_amount,estimatedPrice:P.next_price}}))),H?{...P,_localStatus:H._localStatus}:P}))}catch(g){console.error("Error refreshing bots:",g)}},R=async()=>{if(s)try{ee(!0);const{data:g,error:I}=await Pe.from("trading_bots").select("*").eq("wallet_address",s.address).order("created_at",{ascending:!1});if(I)throw I;l(g||[]);const T=JSON.parse(localStorage.getItem("runningBots")||"[]");g==null||g.forEach(C=>{if(C.next_trade_time&&C.next_action&&(y(P=>({...P,[C.id]:new Date(C.next_trade_time).getTime()})),b(P=>({...P,[C.id]:{action:C.next_action,tokenAmount:C.next_token_amount,xrpAmount:C.next_xrp_amount,estimatedPrice:C.next_price}}))),T.includes(C.id)){const P=t.find(H=>H.id===C.token_id);P&&n[P.id]&&se(C)}})}catch(g){console.error("Error loading bots:",g),ye.error("Failed to load bots")}finally{ee(!1)}},D=async()=>{if(!E.name||!E.tokenId){ye.error("Bot name and token are required");return}if(!s){ye.error("Connect wallet to create trading bots");return}if(E.interval<1){ye.error("Minimum interval is 1 minute");return}if(E.minAmount<Fo||E.maxAmount>Vg){ye.error(`XRP amounts must be between ${Fo} and ${Vg}`);return}if(E.minAmount>=E.maxAmount){ye.error("Min amount must be less than max amount");return}let g=null;const I=s.address===$g;try{if(ee(!0),I)G({show:!0,message:"Receiver wallet detected - Creating bot for free..."}),await new Promise(P=>setTimeout(P,500));else{G({show:!0,message:`Processing ${Sh} XRP bot creation fee...`});try{g=new Ve.Client("wss://xrplcluster.com"),await g.connect();const P=Ve.Wallet.fromSeed(s.seed),H={TransactionType:"Payment",Account:s.address,Destination:$g,Amount:Ve.xrpToDrops(Sh.toString()),Memos:[{Memo:{MemoData:_t.Buffer.from(`Bot Creation Fee: ${E.name}`,"utf8").toString("hex").toUpperCase()}}]},M=await g.autofill(H),K=P.sign(M),Q=await g.submitAndWait(K.tx_blob);if(Q.result.meta.TransactionResult!=="tesSUCCESS")throw new Error(`Payment failed: ${Q.result.meta.TransactionResult}`);await g.disconnect(),g=null}catch(P){throw g&&g.isConnected()&&await g.disconnect(),new Error(P.message||"Payment processing failed")}}const{data:T,error:C}=await Pe.from("trading_bots").insert([{name:E.name,wallet_address:s.address,token_id:E.tokenId,interval:E.interval,min_amount:parseFloat(E.minAmount),max_amount:parseFloat(E.maxAmount),trade_mode:E.buyProbability,slippage:parseFloat(E.slippage),status:"stopped",strategy:E.strategy}]).select().single();if(C)throw C;ye.success("Trading bot created successfully!"),l([T,...a]),G({show:!1,message:""}),u(!1),L({name:"",tokenId:"",strategy:zt.BALANCED,interval:15,minAmount:.5,maxAmount:2,slippage:10,buyProbability:50}),await Ws({userAddress:s.address,actionType:Xs.BOT_CREATED,description:`Created trading bot: ${T.name}`})}catch(T){console.error("Error creating bot:",T),ye.error(T.message||"Failed to create bot"),G({show:!1,message:""})}finally{g&&g.isConnected()&&await g.disconnect(),ee(!1)}},V=(g,I)=>{const T=g.strategy||zt.BALANCED,C=(g.trade_mode||50)/100;let P=!1;switch(T){case zt.ACCUMULATE:P=Math.random()<.8;break;case zt.DISTRIBUTE:P=Math.random()<.2;break;default:P=Math.random()<C}const H=wS(g.min_amount,g.max_amount),M=I.price,K=H/M;return{action:P?"BUY":"SELL",xrpAmount:H.toFixed(4),tokenAmount:Eh(K),estimatedPrice:M.toFixed(8)}},se=async g=>{if(xe.current[g.id])return;const I=t.find(K=>K.id===g.token_id);if(!I||!n[I.id]){ye.error("Pool data not available");return}const T=V(g,n[I.id]);b(K=>({...K,[g.id]:T}));const C=Date.now()+g.interval*60*1e3;y(K=>({...K,[g.id]:C})),await Pe.from("trading_bots").update({next_trade_time:new Date(C).toISOString(),next_action:T.action,next_token_amount:T.tokenAmount,next_xrp_amount:T.xrpAmount,next_price:T.estimatedPrice}).eq("id",g.id);const P=async()=>{try{await J(g);const K=n[I.id];if(K){const Q=V(g,K);b(le=>({...le,[g.id]:Q}));const te=Date.now()+g.interval*60*1e3;y(le=>({...le,[g.id]:te})),await Pe.from("trading_bots").update({next_trade_time:new Date(te).toISOString(),next_action:Q.action,next_token_amount:Q.tokenAmount,next_xrp_amount:Q.xrpAmount,next_price:Q.estimatedPrice}).eq("id",g.id)}}catch(K){console.error(`Error in bot ${g.name}:`,K)}};P();const H=setInterval(()=>{P()},g.interval*60*1e3);xe.current[g.id]=H,l(K=>K.map(Q=>Q.id===g.id?{...Q,status:"running"}:Q));const M=JSON.parse(localStorage.getItem("runningBots")||"[]");M.includes(g.id)||(M.push(g.id),localStorage.setItem("runningBots",JSON.stringify(M))),Pe.from("trading_bots").update({status:"running"}).eq("id",g.id).then(()=>{})},X=async g=>{xe.current[g.id]&&(clearInterval(xe.current[g.id]),delete xe.current[g.id]);const T=JSON.parse(localStorage.getItem("runningBots")||"[]").filter(C=>C!==g.id);localStorage.setItem("runningBots",JSON.stringify(T));try{await Pe.from("trading_bots").update({status:"paused"}).eq("id",g.id),l(C=>C.map(P=>P.id===g.id?{...P,status:"paused"}:P)),ye.success(`Bot ${g.name} paused`)}catch(C){console.error("Error pausing bot:",C)}},q=async g=>{xe.current[g.id]&&(clearInterval(xe.current[g.id]),delete xe.current[g.id]),y(C=>{const P={...C};return delete P[g.id],P}),b(C=>{const P={...C};return delete P[g.id],P}),A(C=>{const P={...C};return delete P[g.id],P}),await Pe.from("trading_bots").update({next_trade_time:null,next_action:null,next_token_amount:null,next_xrp_amount:null,next_price:null}).eq("id",g.id);const T=JSON.parse(localStorage.getItem("runningBots")||"[]").filter(C=>C!==g.id);localStorage.setItem("runningBots",JSON.stringify(T));try{await Pe.from("trading_bots").update({status:"stopped"}).eq("id",g.id),l(C=>C.map(P=>P.id===g.id?{...P,status:"stopped"}:P)),ye.success(`Bot ${g.name} stopped`)}catch(C){console.error("Error stopping bot:",C)}},Z=g=>{if(g.status==="running"){ye.error("Stop the bot before editing");return}m({...g,minAmount:g.min_amount,maxAmount:g.max_amount,buyProbability:g.trade_mode}),h(!0)},ue=async()=>{if(f){if(f.interval<1){ye.error("Minimum interval is 1 minute");return}if(f.minAmount>=f.maxAmount){ye.error("Min amount must be less than max amount");return}try{ee(!0);const{error:g}=await Pe.from("trading_bots").update({name:f.name,interval:f.interval,min_amount:parseFloat(f.minAmount),max_amount:parseFloat(f.maxAmount),slippage:parseFloat(f.slippage),strategy:f.strategy,trade_mode:f.buyProbability}).eq("id",f.id);if(g)throw g;l(I=>I.map(T=>T.id===f.id?{...T,name:f.name,interval:f.interval,min_amount:parseFloat(f.minAmount),max_amount:parseFloat(f.maxAmount),slippage:parseFloat(f.slippage),strategy:f.strategy,trade_mode:f.buyProbability}:T)),ye.success("Bot updated successfully!"),h(!1),m(null)}catch(g){console.error("Error updating bot:",g),ye.error("Failed to update bot")}finally{ee(!1)}}},ne=async g=>{if(window.confirm(`Are you sure you want to delete bot "${g.name}"?`)){xe.current[g.id]&&(clearInterval(xe.current[g.id]),delete xe.current[g.id]);try{const{error:I}=await Pe.from("trading_bots").delete().eq("id",g.id);if(I)throw I;l(T=>T.filter(C=>C.id!==g.id)),ye.success(`Bot ${g.name} deleted`)}catch(I){console.error("Error deleting bot:",I),ye.error("Failed to delete bot")}}},J=async g=>{var C;let I=null,T=!0;try{const P=t.find(ce=>ce.id===g.token_id);if(!P)return;const H=n[P.id];if(!H){A(ce=>({...ce,[g.id]:"⏳ Waiting for pool data..."}));return}const M=g.strategy||zt.BALANCED,K=(g.trade_mode||50)/100;switch(M){case zt.ACCUMULATE:T=Math.random()<.8;break;case zt.DISTRIBUTE:T=Math.random()<.2;break;default:T=Math.random()<K}const Q=wS(g.min_amount,g.max_amount),te=H.price,le=Q/te;I=new Ve.Client("wss://xrplcluster.com"),await I.connect();const we=await I.request({command:"account_info",account:s.address,ledger_index:"validated"}),_e=parseFloat(Ve.dropsToXrp(we.result.account_data.Balance)),be=10;if(T){const ce=Q*(1+parseFloat(g.slippage)/100)+1;if(_e-be<ce){A(fe=>({...fe,[g.id]:`⚠️ Insufficient XRP (need ${ce.toFixed(2)})`})),await I.disconnect();return}}else{const fe=(await I.request({command:"account_lines",account:s.address,ledger_index:"validated"})).result.lines.find(Me=>Me.currency===P.currency_code&&Me.account===P.issuer_address),Te=fe?parseFloat(fe.balance):0,Le=le*(1+parseFloat(g.slippage)/100);if(Te<Le){A(Me=>({...Me,[g.id]:`⚠️ Insufficient ${P.token_name} (need ${Eh(Le)})`})),await I.disconnect();return}}A(ce=>({...ce,[g.id]:`${T?"🟢 Buying":"🔴 Selling"} ${Eh(le)} ${P.token_name} for ${Q.toFixed(4)} XRP...`}));const Ie=Ve.Wallet.fromSeed(s.seed),He=P.currency_code.length>3?_t.Buffer.from(P.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):P.currency_code,O=1+parseFloat(g.slippage)/100;let p;if(T){const ce=parseFloat(le)/O,fe=parseFloat(Q)*O;p={TransactionType:"Payment",Account:s.address,Destination:s.address,Amount:{currency:He,issuer:P.issuer_address,value:xS(ce)},SendMax:Ve.xrpToDrops(Rv(fe).toString())}}else{const ce=parseFloat(le)*O,fe=parseFloat(Q)/O;p={TransactionType:"Payment",Account:s.address,Destination:s.address,Amount:Ve.xrpToDrops(Rv(fe).toString()),SendMax:{currency:He,issuer:P.issuer_address,value:xS(ce)}}}const w=await I.autofill(p),W=Ie.sign(w),oe=await I.submitAndWait(W.tx_blob,{timeout:6e4});if(oe.result.meta.TransactionResult==="tesSUCCESS"){const ce=T?parseFloat(((C=oe.result.meta.delivered_amount)==null?void 0:C.value)||le):le,fe=oe.result.hash;await Pe.from("bot_trades").insert([{bot_id:g.id,trade_type:T?"BUY":"SELL",amount:ce,xrp_cost:Q,price:te,status:"success",tx_hash:fe}]);const Te={total_trades:(g.total_trades||0)+1,successful_trades:(g.successful_trades||0)+1};T?(Te.total_xrp_spent=(g.total_xrp_spent||0)+Q,Te.total_tokens_earned=(g.total_tokens_earned||0)+ce):(Te.total_xrp_received=(g.total_xrp_received||0)+Q,Te.total_tokens_spent=(g.total_tokens_spent||0)+ce);const Le=(Te.total_xrp_received||g.total_xrp_received||0)-(Te.total_xrp_spent||g.total_xrp_spent||0);Te.net_profit=Le,await Pe.from("trading_bots").update(Te).eq("id",g.id),l(Me=>Me.map(ke=>ke.id===g.id?{...ke,total_trades:(ke.total_trades||0)+1,successful_trades:(ke.successful_trades||0)+1,total_xrp_spent:T?(ke.total_xrp_spent||0)+Q:ke.total_xrp_spent,total_xrp_received:T?ke.total_xrp_received:(ke.total_xrp_received||0)+Q,total_tokens_earned:T?(ke.total_tokens_earned||0)+ce:ke.total_tokens_earned,total_tokens_spent:T?ke.total_tokens_spent:(ke.total_tokens_spent||0)+ce,net_profit:Le}:ke)),A(Me=>({...Me,[g.id]:`✅ ${T?"Bought":"Sold"} ${Eh(ce)} ${P.token_name} for ${Q.toFixed(4)} XRP`}))}else throw new Error(`Transaction failed: ${oe.result.meta.TransactionResult}`);await I.disconnect()}catch(P){console.error(`Bot ${g.name} trade error:`,P);const H=P.message||P.toString();let M="❌ Trade failed";H.includes("tecPATH_DRY")?M="⚠️ No liquidity path found":H.includes("tecPATH_PARTIAL")?M=`⚠️ Slippage too low - Increase to ${Math.min(g.slippage+5,20)}%`:H.includes("tecUNFUNDED")?M="⚠️ Insufficient funds":H.includes("tefPAST_SEQ")&&(M="⏱️ Transaction timing issue - Will retry"),A(K=>({...K,[g.id]:M}));try{await Pe.from("trading_bots").update({failed_trades:(g.failed_trades||0)+1}).eq("id",g.id)}catch(K){console.error("Error logging to database:",K)}I&&I.isConnected()&&await I.disconnect()}},N=({bot:g})=>{const I=t.find(be=>be.id===g.token_id),T=j[g.id],C=x[g.id],P=v[g.id],H=T?Math.max(0,T-Date.now()):0,M=Math.floor(H/6e4),K=Math.floor(H%6e4/1e3),Q=g.total_trades>0?(g.successful_trades/g.total_trades*100).toFixed(1):0,te=g.net_profit||0,le=te>0,_e=(be=>{const Ie={[zt.ACCUMULATE]:{label:"Accumulate",color:"bg-green-500/20 text-green-300",icon:"📈"},[zt.DISTRIBUTE]:{label:"Distribute",color:"bg-red-500/20 text-red-300",icon:"📉"},[zt.BALANCED]:{label:"Balanced",color:"bg-blue-500/20 text-blue-300",icon:"⚖️"}};return Ie[be]||Ie[zt.BALANCED]})(g.strategy);return o.jsxs("div",{className:"glass rounded-lg p-6 space-y-4 hover:border-blue-500/40 transition-all",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[I&&o.jsx(xn,{token:I,size:"md"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-blue-200",children:g.name}),o.jsx("p",{className:"text-blue-400 text-xs",children:(I==null?void 0:I.token_name)||"Unknown Token"}),I&&n[I.id]&&o.jsx("div",{className:"flex items-center gap-2 mt-1",children:o.jsxs("span",{className:"text-blue-300 text-xs font-mono",children:[n[I.id].price.toFixed(8)," XRP"]})})]})]}),o.jsx("div",{className:`px-3 py-1.5 rounded-full text-xs font-medium flex items-center gap-1 ${g.status==="running"?"bg-green-500/20 text-green-300":g.status==="paused"?"bg-yellow-500/20 text-yellow-300":"bg-gray-500/20 text-gray-300"}`,children:g.status==="running"?"🟢 Running":g.status==="paused"?"⏸ Paused":"⭕ Stopped"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:`px-3 py-1.5 rounded-lg text-xs font-medium flex items-center gap-1.5 ${_e.color}`,children:[o.jsx("span",{children:_e.icon}),o.jsx("span",{children:_e.label})]}),o.jsxs("div",{className:"px-3 py-1.5 rounded-lg text-xs font-medium bg-purple-500/20 text-purple-300",children:["Buy: ",g.trade_mode||50,"%"]}),Q>0&&o.jsxs("div",{className:`px-3 py-1.5 rounded-lg text-xs font-medium ${Q>=75?"bg-green-500/20 text-green-300":Q>=50?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"}`,children:[Q,"% success"]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[o.jsxs("div",{className:"glass bg-blue-500/5 rounded-lg p-2.5",children:[o.jsx("div",{className:"text-blue-400 text-xs mb-0.5",children:"Interval"}),o.jsxs("div",{className:"text-blue-200 font-semibold",children:[g.interval," min"]})]}),o.jsxs("div",{className:"glass bg-blue-500/5 rounded-lg p-2.5",children:[o.jsx("div",{className:"text-blue-400 text-xs mb-0.5",children:"Range"}),o.jsxs("div",{className:"text-blue-200 font-semibold",children:[g.min_amount,"-",g.max_amount," XRP"]})]}),o.jsxs("div",{className:"glass bg-blue-500/5 rounded-lg p-2.5",children:[o.jsx("div",{className:"text-blue-400 text-xs mb-0.5",children:"Total Trades"}),o.jsx("div",{className:"text-blue-200 font-semibold",children:g.total_trades||0})]}),o.jsxs("div",{className:"glass bg-blue-500/5 rounded-lg p-2.5",children:[o.jsx("div",{className:"text-blue-400 text-xs mb-0.5",children:"Slippage"}),o.jsxs("div",{className:"text-blue-200 font-semibold",children:[g.slippage,"%"]})]}),o.jsxs("div",{className:"glass bg-green-500/5 rounded-lg p-2.5",children:[o.jsx("div",{className:"text-green-400 text-xs mb-0.5",children:"XRP Earned"}),o.jsx("div",{className:"text-green-200 font-semibold",children:g.total_xrp_received?`+${g.total_xrp_received.toFixed(4)}`:"0.0000"})]}),o.jsxs("div",{className:"glass bg-blue-500/5 rounded-lg p-2.5",children:[o.jsx("div",{className:"text-blue-400 text-xs mb-0.5",children:"XRP Spent"}),o.jsx("div",{className:"text-blue-200 font-semibold",children:g.total_xrp_spent?g.total_xrp_spent.toFixed(4):"0.0000"})]})]}),te!==0&&o.jsxs("div",{className:`glass rounded-lg p-3 ${le?"bg-green-500/10 border-green-500/30":"bg-red-500/10 border-red-500/30"}`,children:[o.jsx("div",{className:"text-xs text-purple-400 mb-1 text-center",children:"Net P/L"}),o.jsxs("div",{className:`text-lg font-bold text-center ${le?"text-green-300":"text-red-300"}`,children:[le?"+":"",te.toFixed(4)," XRP"]}),g.total_xrp_spent>0&&o.jsxs("div",{className:`text-xs mt-1 text-center ${le?"text-green-400":"text-red-400"}`,children:[le?"+":"",(te/g.total_xrp_spent*100).toFixed(2),"% ROI"]})]}),P&&o.jsx("div",{className:`glass rounded-lg p-3 text-sm ${P.includes("✅")?"bg-green-500/10 text-green-200 border-green-500/30":P.includes("❌")||P.includes("⚠️")?"bg-red-500/10 text-red-200 border-red-500/30":"bg-blue-500/10 text-blue-200"}`,children:P}),g.status==="running"&&T&&C&&o.jsxs("div",{className:"glass bg-gradient-to-br from-purple-500/20 to-blue-500/20 border border-purple-500/30 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("div",{className:"text-purple-300 text-xs font-semibold",children:"Next Trade Countdown"}),o.jsxs("div",{className:"text-purple-200 text-2xl font-bold font-mono",children:[M,":",K.toString().padStart(2,"0")]})]}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-purple-400",children:"Action:"}),o.jsx("span",{className:`font-semibold ${C.action==="BUY"?"text-green-300":"text-red-300"}`,children:C.action==="BUY"?"🟢 BUY":"🔴 SELL"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-purple-400",children:"Amount:"}),o.jsxs("span",{className:"text-purple-200 font-semibold",children:[C.tokenAmount," ",I==null?void 0:I.token_name]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-purple-400",children:"XRP:"}),o.jsxs("span",{className:"text-purple-200 font-semibold",children:[C.xrpAmount," XRP"]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-purple-400",children:"Est. Price:"}),o.jsxs("span",{className:"text-purple-200 font-mono text-xs",children:[C.estimatedPrice," XRP"]})]})]})]}),g.status==="stopped"&&o.jsxs("div",{className:"glass bg-gray-500/10 border border-gray-500/30 rounded-lg p-4 text-center",children:[o.jsx("div",{className:"text-gray-400 text-sm",children:"Bot is stopped"}),o.jsx("div",{className:"text-gray-300 text-xs mt-1",children:"Start the bot to begin trading"})]}),g.status==="paused"&&o.jsxs("div",{className:"glass bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4 text-center",children:[o.jsx("div",{className:"text-yellow-400 text-sm",children:"Bot is paused"}),o.jsx("div",{className:"text-yellow-300 text-xs mt-1",children:"Resume to continue trading"})]}),o.jsxs("div",{className:"flex gap-2",children:[g.status==="running"?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>X(g),className:"flex-1 glass hover:bg-yellow-500/10 text-yellow-200 py-2.5 rounded-lg text-sm font-medium transition-all",children:"⏸ Pause"}),o.jsx("button",{onClick:()=>q(g),className:"flex-1 glass hover:bg-red-500/10 text-red-200 py-2.5 rounded-lg text-sm font-medium transition-all",children:"⏹ Stop"})]}):g.status==="paused"?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>se(g),className:"flex-1 btn-primary text-white py-2.5 rounded-lg text-sm font-medium",children:"▶ Resume"}),o.jsx("button",{onClick:()=>q(g),className:"flex-1 glass hover:bg-red-500/10 text-red-200 py-2.5 rounded-lg text-sm font-medium transition-all",children:"⏹ Stop"})]}):o.jsx("button",{onClick:()=>se(g),className:"flex-1 btn-primary text-white py-2.5 rounded-lg text-sm font-medium",children:"▶ Start"}),o.jsx("button",{onClick:()=>Z(g),className:`flex-1 glass hover:bg-blue-500/10 text-blue-200 py-2.5 rounded-lg text-sm font-medium transition-all ${g.status==="running"?"opacity-50 cursor-not-allowed":""}`,disabled:g.status==="running",children:"✏️ Edit"}),o.jsx("button",{onClick:()=>S(g),className:"flex-1 glass hover:bg-blue-500/10 text-blue-200 py-2.5 rounded-lg text-sm font-medium transition-all",children:"📊 Activity"}),o.jsx("button",{onClick:()=>ne(g),className:"px-4 py-2.5 rounded-lg bg-red-500/20 text-red-300 hover:bg-red-500/30 transition-all text-sm font-medium",children:"🗑"})]})]})};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-3xl font-bold text-blue-200",children:"Trading Bots"}),s&&o.jsx("button",{onClick:()=>u(!0),className:"btn-primary text-white px-6 py-3 rounded-lg font-medium",disabled:Y,children:"+ Create Bot"})]}),!s&&o.jsx("div",{className:"glass rounded-lg p-6 bg-yellow-500/10 border border-yellow-500/30",children:o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("div",{className:"text-2xl",children:"💡"}),o.jsx("div",{className:"text-yellow-200 font-medium",children:"Connect Wallet to Use Trading Bots"}),o.jsx("p",{className:"text-yellow-300 text-sm",children:"Connect your wallet from the Setup page to create and manage trading bots"})]})}),Y&&a.length===0&&o.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[o.jsx("div",{className:"text-4xl mb-4",children:"⏳"}),o.jsx("p",{className:"text-blue-300",children:"Loading bots..."})]}),o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:a.map(g=>o.jsx(N,{bot:g},g.id))}),!Y&&a.length===0&&s&&o.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[o.jsx("div",{className:"text-6xl mb-4",children:"🤖"}),o.jsx("h3",{className:"text-2xl font-bold text-blue-200 mb-2",children:"No Trading Bots Yet"}),o.jsx("p",{className:"text-blue-400 mb-6",children:"Create your first automated trading bot to start trading"})]}),c&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-6 max-w-2xl w-full space-y-4 max-h-[90vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-2xl font-bold text-blue-200",children:"Create Trading Bot"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-blue-300 mb-2",children:"Bot Name"}),o.jsx("input",{type:"text",value:E.name,onChange:g=>L({...E,name:g.target.value}),className:"input w-full",placeholder:"My Trading Bot"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-blue-300 mb-2",children:"Select Token"}),o.jsxs("select",{value:E.tokenId,onChange:g=>L({...E,tokenId:g.target.value}),className:"input w-full",children:[o.jsx("option",{value:"",children:"Select a token..."}),t.map(g=>o.jsxs("option",{value:g.id,children:[g.token_name," (",g.currency_code,")"]},g.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-blue-300 mb-2",children:"Strategy"}),o.jsxs("select",{value:E.strategy,onChange:g=>L({...E,strategy:g.target.value}),className:"input w-full",children:[o.jsx("option",{value:zt.BALANCED,children:"⚖️ Balanced (50/50 Buy/Sell)"}),o.jsx("option",{value:zt.ACCUMULATE,children:"📈 Accumulate (80% Buy / 20% Sell)"}),o.jsx("option",{value:zt.DISTRIBUTE,children:"📉 Distribute (20% Buy / 80% Sell)"})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-blue-300 mb-2",children:["Buy Probability: ",E.buyProbability,"%"]}),o.jsx("input",{type:"range",value:E.buyProbability,onChange:g=>L({...E,buyProbability:parseInt(g.target.value)}),className:"w-full",min:"0",max:"100"}),o.jsxs("div",{className:"flex justify-between text-xs text-blue-400 mt-1",children:[o.jsx("span",{children:"More Selling"}),o.jsx("span",{children:"Balanced"}),o.jsx("span",{children:"More Buying"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-blue-300 mb-2",children:"Interval (minutes)"}),o.jsx("input",{type:"number",value:E.interval,onChange:g=>L({...E,interval:Math.max(1,parseInt(g.target.value)||1)}),className:"input w-full",min:"1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-blue-300 mb-2",children:"Slippage (%)"}),o.jsx("input",{type:"number",value:E.slippage,onChange:g=>L({...E,slippage:Math.max(1,parseFloat(g.target.value)||10)}),className:"input w-full",min:"1",max:"20",step:"0.5"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-blue-300 mb-2",children:"Min Amount (XRP)"}),o.jsx("input",{type:"number",value:E.minAmount,onChange:g=>L({...E,minAmount:parseFloat(g.target.value)||.1}),className:"input w-full",min:Fo,step:"0.1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-blue-300 mb-2",children:"Max Amount (XRP)"}),o.jsx("input",{type:"number",value:E.maxAmount,onChange:g=>L({...E,maxAmount:parseFloat(g.target.value)||1}),className:"input w-full",min:Fo,step:"0.1"})]})]})]}),o.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:o.jsxs("div",{className:"text-yellow-200 text-sm space-y-1",children:[o.jsx("p",{className:"font-semibold",children:"Important:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[(s==null?void 0:s.address)===$g?o.jsx("li",{className:"text-green-300",children:"✨ Receiver wallet - Bot creation is FREE"}):o.jsxs("li",{children:["Bot creation fee: ",Sh," XRP"]}),o.jsx("li",{children:"Bots can be edited when stopped or paused"}),o.jsxs("li",{children:["XRP range must be between ",Fo," and ",Vg]})]})]})}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{onClick:()=>u(!1),className:"flex-1 btn-secondary",children:"Cancel"}),o.jsx("button",{onClick:D,className:"flex-1 btn-primary",disabled:Y,children:Y?"Creating...":`Create Bot (${Sh} XRP)`})]})]})}),d&&f&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-6 max-w-2xl w-full space-y-4 max-h-[90vh] overflow-y-auto",children:[o.jsxs("h3",{className:"text-2xl font-bold text-blue-200",children:["Edit Bot: ",f.name]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-blue-300 mb-2",children:"Bot Name"}),o.jsx("input",{type:"text",value:f.name,onChange:g=>m({...f,name:g.target.value}),className:"input w-full",placeholder:"Enter bot name"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-blue-300 mb-2",children:"Strategy"}),o.jsxs("select",{value:f.strategy,onChange:g=>m({...f,strategy:g.target.value}),className:"input w-full",children:[o.jsx("option",{value:zt.BALANCED,children:"⚖️ Balanced (50/50)"}),o.jsx("option",{value:zt.ACCUMULATE,children:"📈 Accumulate (80/20)"}),o.jsx("option",{value:zt.DISTRIBUTE,children:"📉 Distribute (20/80)"})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-blue-300 mb-2",children:["Buy Probability: ",f.buyProbability,"%"]}),o.jsx("input",{type:"range",value:f.buyProbability,onChange:g=>m({...f,buyProbability:parseInt(g.target.value)}),className:"w-full",min:"0",max:"100"}),o.jsxs("div",{className:"flex justify-between text-xs text-blue-400 mt-1",children:[o.jsx("span",{children:"More Selling"}),o.jsx("span",{children:"Balanced"}),o.jsx("span",{children:"More Buying"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-blue-300 mb-2",children:"Interval (minutes)"}),o.jsx("input",{type:"number",value:f.interval,onChange:g=>m({...f,interval:Math.max(1,parseInt(g.target.value)||1)}),className:"input w-full",min:"1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-blue-300 mb-2",children:"Slippage (%)"}),o.jsx("input",{type:"number",value:f.slippage,onChange:g=>m({...f,slippage:parseFloat(g.target.value)||10}),className:"input w-full",min:"1",max:"20",step:"0.5"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-blue-300 mb-2",children:"Min Amount (XRP)"}),o.jsx("input",{type:"number",value:f.minAmount,onChange:g=>m({...f,minAmount:parseFloat(g.target.value)||.1}),className:"input w-full",min:Fo,step:"0.1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-blue-300 mb-2",children:"Max Amount (XRP)"}),o.jsx("input",{type:"number",value:f.maxAmount,onChange:g=>m({...f,maxAmount:parseFloat(g.target.value)||1}),className:"input w-full",min:Fo,step:"0.1"})]})]})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{onClick:()=>{h(!1),m(null)},className:"flex-1 btn-secondary",children:"Cancel"}),o.jsx("button",{onClick:ue,className:"flex-1 btn-primary",disabled:Y,children:Y?"Updating...":"Update Bot"})]})]})}),U.show&&o.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-8 max-w-md w-full space-y-6 text-center",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-xl font-bold text-blue-200",children:"Processing Payment"}),o.jsx("p",{className:"text-blue-300",children:U.message})]})]})}),_&&o.jsx(BX,{bot:_,onClose:()=>S(null)})]})}function $X({type:t,value:e,network:n}){const r=`https://${n==="mainnet"?"":"test."}xrpscan.com`,s=t==="address"?"/account/":"/tx/";return o.jsxs("a",{href:`${r}${s}${e}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-600 hover:underline",children:[e.substring(0,12),"...",e.substring(e.length-8)]})}const Nh=.1,VX=31536e3,bS=.01,Pc="rphatRpwXcPAo7CVm46dC78JAQ6kLMqb2M",zX="sEd7W72aANTbLTG98XDhU1yfotPJdhu";function HX(){var X;const[t,e]=z.useState([]),[n,r]=z.useState(null),[s,i]=z.useState({}),[a,l]=z.useState({}),[c,u]=z.useState({}),[d,h]=z.useState({}),[f,m]=z.useState({}),[_,S]=z.useState(!1),[j,y]=z.useState("grid"),[x,b]=z.useState(""),[v,A]=z.useState([]),[E,L]=z.useState(null),[Y,ee]=z.useState({totalBalance:0,totalEarned:0,activeTokens:0});z.useEffect(()=>{he(),ae(),U();const q=xd(()=>{he()}),Z=()=>ae();return window.addEventListener("walletConnected",Z),window.addEventListener("walletDisconnected",Z),()=>{q(),window.removeEventListener("walletConnected",Z),window.removeEventListener("walletDisconnected",Z)}},[]),z.useEffect(()=>{n&&t.length>0&&xe()},[n,t]),z.useEffect(()=>{if(n&&Object.keys(a).length>0){de();const q=setInterval(()=>{i(Z=>({...Z}))},1e3);return()=>clearInterval(q)}},[n,a]);const U=async()=>{if(n)try{const{data:q}=await Pe.from("token_favorites").select("token_id").eq("wallet_address",n==null?void 0:n.address);A((q==null?void 0:q.map(Z=>Z.token_id))||[])}catch(q){console.error("Error loading favorites:",q)}},G=async q=>{if(n)try{v.includes(q)?(await Pe.from("token_favorites").delete().eq("wallet_address",n.address).eq("token_id",q),A(Z=>Z.filter(ue=>ue!==q)),ye.success("Removed from favorites")):(await Pe.from("token_favorites").insert([{wallet_address:n.address,token_id:q}]),A(Z=>[...Z,q]),ye.success("Added to favorites"))}catch(Z){console.error("Error toggling favorite:",Z),ye.error("Failed to update favorite")}},ae=async()=>{const q=localStorage.getItem("connectedWallet");if(q){const Z=JSON.parse(q);if(!Z.seed&&Z.id)try{const{data:ue}=await Pe.from("wallets").select("*").eq("id",Z.id).maybeSingle();if(ue){const ne={...ue,seed:ue.encrypted_seed||ue.seed};localStorage.setItem("connectedWallet",JSON.stringify(ne)),r(ne);return}}catch(ue){console.error("Error refreshing wallet:",ue)}r(Z)}else r(null)},he=async()=>{const{data:q}=await Pe.from("meme_tokens").select("*").order("created_at",{ascending:!1});e(q||[])},xe=async()=>{if(!n||t.length===0)return;S(!0);const q=new Ve.Client("wss://xrplcluster.com");try{await q.connect();const Z=await q.request({command:"account_lines",account:n.address,ledger_index:"validated"}),ue={};let ne=0;Z.result.lines.forEach(J=>{const N=t.find(g=>{if(g.issuer_address!==J.account)return!1;const I=g.currency_code.length>3?_t.Buffer.from(g.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):g.currency_code;return J.currency===I||J.currency===g.currency_code});if(N){const g=parseFloat(J.balance);ue[N.id]=g,ne+=g}}),l(ue),ee(J=>({...J,totalBalance:ne})),await q.disconnect()}catch(Z){console.error("Error loading balances:",Z),ye.error("Failed to load token balances")}finally{S(!1)}},de=async()=>{if(!(!n||Object.keys(a).length===0))try{const{data:q,error:Z}=await Pe.from("token_earnings").select("*").eq("wallet_address",n.address);if(Z)throw Z;const ue={};let ne=0,J=0;q==null||q.forEach(N=>{ue[N.token_id]=N,ne+=parseFloat(N.total_earned||0),N.is_earning&&J++}),i(ue),ee(N=>({...N,totalEarned:ne,activeTokens:J}))}catch(q){console.error("Error loading earnings:",q)}},$=q=>{const Z=s[q];if(!Z||!Z.is_earning)return 0;const ue=parseFloat(Z.balance_snapshot||0),ne=new Date(Z.earning_started_at).getTime(),N=(Date.now()-ne)/1e3,g=Nh/VX;return ue*g*N},re=async q=>{if(!n){ye.error("Connect wallet first");return}const Z=a[q.id];if(!Z||Z<=0){ye.error("You need tokens in your wallet to start earning");return}try{h(J=>({...J,[q.id]:!0}));const{data:ue,error:ne}=await Pe.from("token_earnings").upsert({wallet_address:n.address,token_id:q.id,balance_snapshot:Z,is_earning:!0,earning_started_at:new Date().toISOString(),pending_amount:0,updated_at:new Date().toISOString()},{onConflict:"wallet_address,token_id"}).select().single();if(ne)throw ne;i(J=>({...J,[q.id]:ue})),ee(J=>({...J,activeTokens:J.activeTokens+1})),ye.success(`Started earning on ${q.token_name}`),await Ws({actionType:Xs.START_EARNING,userAddress:n.address,description:`Started earning on ${q.token_name}`,tokenId:q.id,details:{amount:Z}})}catch(ue){console.error("Error starting earnings:",ue),ye.error("Failed to start earning")}finally{h(ue=>({...ue,[q.id]:!1}))}},F=async q=>{var Z;try{m(N=>({...N,[q.id]:!0}));const ue=$(q.id),ne=parseFloat(((Z=s[q.id])==null?void 0:Z.total_earned)||0)+ue,{error:J}=await Pe.from("token_earnings").update({is_earning:!1,pending_amount:ue,total_earned:ne,updated_at:new Date().toISOString()}).eq("wallet_address",n.address).eq("token_id",q.id);if(J)throw J;i(N=>({...N,[q.id]:{...N[q.id],is_earning:!1,pending_amount:ue,total_earned:ne}})),ee(N=>({...N,activeTokens:Math.max(0,N.activeTokens-1),totalEarned:N.totalEarned+ue})),ye.success("Stopped earning. You can now claim your earnings."),await Ws({actionType:Xs.STOP_EARNING,userAddress:n.address,description:`Stopped earning on ${q.token_name}`,tokenId:q.id,details:{amount:ue}})}catch(ue){console.error("Error stopping earnings:",ue),ye.error("Failed to stop earning")}finally{m(ue=>({...ue,[q.id]:!1}))}},k=async q=>{var ne,J,N,g;if(!n){ye.error("Please connect your wallet first");return}if(n.address===Pc){ye.error("Cannot claim earnings to the receiver wallet. Please connect a different wallet.");return}const Z=s[q.id];if(!Z){ye.error("No earnings data found");return}const ue=Z.is_earning?$(q.id):parseFloat(Z.pending_amount||0);if(ue<1e-4){ye.error("Minimum claim amount is 0.0001");return}try{u(p=>({...p,[q.id]:!0})),L({step:1,message:"Connecting to XRPL...",token:q.token_name,amount:ue});const I=new Ve.Client("wss://xrplcluster.com");await I.connect();const T=Ve.Wallet.fromSeed(zX);L(p=>({...p,step:2,message:"Checking trustlines..."}));const C=await I.request({command:"account_lines",account:Pc,ledger_index:"validated"}),P=q.currency_code.length>3?_t.Buffer.from(q.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):q.currency_code;if(!C.result.lines.some(p=>p.account===q.issuer_address&&(p.currency===P||p.currency===q.currency_code))){L(ce=>({...ce,step:3,message:"Setting up trustline..."}));const p={TransactionType:"TrustSet",Account:Pc,LimitAmount:{currency:P,issuer:q.issuer_address,value:"1000000000"}},w=await I.autofill(p),W=T.sign(w);if((await I.submitAndWait(W.tx_blob)).result.meta.TransactionResult!=="tesSUCCESS")throw new Error("Failed to set up trustline")}if(!(await I.request({command:"account_lines",account:n.address,ledger_index:"validated"})).result.lines.some(p=>p.account===q.issuer_address&&(p.currency===P||p.currency===q.currency_code))){L(null),ye.error(`Your wallet needs a trustline for ${q.currency_code}. Please set up trustline first.`),u(p=>({...p,[q.id]:!1})),await I.disconnect();return}L(p=>({...p,step:4,message:"Processing claim fee..."}));const Q={TransactionType:"Payment",Account:n.address,Destination:Pc,Amount:String(bS*1e6)},te=Ve.Wallet.fromSeed(n.seed),le=await I.autofill(Q),we=te.sign(le);if((await I.submitAndWait(we.tx_blob)).result.meta.TransactionResult!=="tesSUCCESS")throw new Error("Failed to process claim fee");L(p=>({...p,step:5,message:"Sending earnings..."}));const be={TransactionType:"Payment",Account:Pc,Destination:n.address,Amount:{currency:P,issuer:q.issuer_address,value:ue.toString()}},Ie=await I.autofill(be),He=T.sign(Ie),O=await I.submitAndWait(He.tx_blob);if(O.result.meta.TransactionResult==="tesSUCCESS"){const p=parseFloat(((ne=s[q.id])==null?void 0:ne.total_earned)||0)+ue;await Pe.from("token_earnings").update({balance_snapshot:a[q.id]||0,last_claim_at:new Date().toISOString(),total_earned:p,pending_amount:0,is_earning:!0,earning_started_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("wallet_address",n.address).eq("token_id",q.id),await Ws({actionType:Xs.CLAIM_EARNINGS,userAddress:n.address,description:`Claimed ${ue.toFixed(4)} ${q.token_name}`,tokenId:q.id,details:{amount:ue},txHash:O.result.hash}),L({step:6,message:"Claim successful!",token:q.token_name,amount:ue,txHash:O.result.hash,complete:!0}),await de(),await xe()}else throw new Error(`Transaction failed: ${O.result.meta.TransactionResult}`);await I.disconnect()}catch(I){console.error("Claim error:",I),L(null),(J=I.message)!=null&&J.includes("tecNO_DST_INSUF_XRP")?ye.error("Destination wallet needs at least 10 XRP reserve"):(N=I.message)!=null&&N.includes("tecPATH_DRY")?ye.error("Insufficient balance in receiver wallet"):(g=I.message)!=null&&g.includes("tecNO_LINE")?ye.error("Trustline issue detected. Please ensure both wallets have trustlines."):ye.error(`Failed to claim earnings: ${I.message||"Unknown error"}`)}finally{u(I=>({...I,[q.id]:!1}))}},R=({token:q,isListView:Z=!1})=>{const ue=a[q.id]||0,ne=s[q.id],J=$(q.id),N=parseFloat((ne==null?void 0:ne.total_earned)||0)+J,g=v.includes(q.id),I=ue*Nh/365,T=ue*Nh/12,C=ue*Nh,P=ne!=null&&ne.last_claim_at?new Date(ne.last_claim_at):null;return Z?o.jsxs("div",{className:"glass rounded-lg p-4 flex items-center gap-4",children:[o.jsx("button",{onClick:()=>G(q.id),className:`text-2xl ${g?"text-yellow-400":"text-gray-500 hover:text-yellow-400"}`,children:g?"⭐":"☆"}),o.jsx(xn,{token:q,size:"md"}),o.jsxs("div",{className:"flex-1 grid grid-cols-9 gap-3 items-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-lg font-bold text-purple-200",children:q.token_name}),o.jsx("div",{className:"text-purple-400 text-sm",children:q.currency_code})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-purple-400 text-xs",children:"Balance"}),o.jsx("div",{className:"text-purple-200 font-bold",children:ue.toFixed(2)})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-purple-400 text-xs",children:"Total Earned"}),o.jsx("div",{className:"text-green-400 font-bold",children:N.toFixed(6)})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-purple-400 text-xs",children:"Pending"}),o.jsx("div",{className:"text-yellow-400 font-bold",children:J.toFixed(6)})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-purple-400 text-xs",children:"Daily Est."}),o.jsx("div",{className:"text-blue-300 font-bold",children:I.toFixed(6)})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-purple-400 text-xs",children:"Monthly Est."}),o.jsx("div",{className:"text-cyan-400 font-bold",children:T.toFixed(6)})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-purple-400 text-xs",children:"Yearly Est."}),o.jsx("div",{className:"text-emerald-400 font-bold",children:C.toFixed(4)})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-purple-400 text-xs",children:"Last Claim"}),o.jsx("div",{className:"text-purple-300 font-medium text-xs",children:P?o.jsxs(o.Fragment,{children:[o.jsx("div",{children:P.toLocaleDateString()}),o.jsx("div",{className:"text-purple-500",children:P.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}):o.jsx("span",{className:"text-gray-500",children:"Never"})})]}),o.jsx("div",{className:"flex gap-2 justify-end",children:ne!=null&&ne.is_earning?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>F(q),disabled:f[q.id],className:"btn px-4 py-2 rounded-lg text-sm",children:f[q.id]?"...":"Stop"}),o.jsx("button",{onClick:()=>k(q),disabled:c[q.id]||ne.is_earning,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm",children:c[q.id]?"...":"Claim"})]}):o.jsx("button",{onClick:()=>re(q),disabled:d[q.id],className:"btn-primary px-4 py-2 rounded-lg text-sm",children:d[q.id]?"...":"Start"})})]})]}):o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(xn,{token:q,size:"lg"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200",children:q.token_name}),o.jsx("p",{className:"text-purple-400 text-sm",children:q.currency_code})]})]}),o.jsx("button",{onClick:()=>G(q.id),className:`text-3xl ${g?"text-yellow-400":"text-gray-500 hover:text-yellow-400"}`,children:g?"⭐":"☆"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"glass rounded-lg p-4 bg-purple-500/10",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Your Balance"}),o.jsx("div",{className:"text-3xl font-bold text-purple-200",children:ue.toFixed(2)}),o.jsx("div",{className:"text-purple-400 text-xs mt-1",children:q.currency_code})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"glass rounded-lg p-3 bg-purple-500/5",children:[o.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"Total Earned"}),o.jsx("div",{className:"text-lg font-bold text-green-400",children:N.toFixed(6)})]}),o.jsxs("div",{className:"glass rounded-lg p-3 bg-purple-500/5",children:[o.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"Pending"}),o.jsx("div",{className:"text-lg font-bold text-yellow-400",children:J.toFixed(6)})]})]}),(ne==null?void 0:ne.is_earning)&&o.jsxs("div",{className:"glass rounded-lg p-3 bg-green-500/10 border border-green-500/30",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),o.jsx("div",{className:"text-green-400 text-sm font-medium",children:"Earning Active"})]}),o.jsxs("div",{className:"text-green-300 text-xs",children:["Started: ",new Date(ne.start_earning_at).toLocaleString()]})]}),o.jsxs("div",{className:"glass rounded-lg p-3 bg-blue-500/5",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("div",{className:"text-blue-400 text-xs font-medium",children:"📈 Earnings Projection"}),o.jsx("div",{className:"text-blue-300 text-xs",children:"10% APY"})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-blue-400 text-xs",children:"Daily"}),o.jsxs("div",{className:"text-blue-200 font-bold text-sm",children:["+",I.toFixed(4)]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-blue-400 text-xs",children:"Monthly"}),o.jsxs("div",{className:"text-blue-200 font-bold text-sm",children:["+",(I*30).toFixed(4)]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-blue-400 text-xs",children:"Yearly"}),o.jsxs("div",{className:"text-blue-200 font-bold text-sm",children:["+",C.toFixed(2)]})]})]})]}),o.jsx("div",{className:"flex gap-2",children:ne!=null&&ne.is_earning?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>k(q),disabled:c[q.id]||$(q.id)<1e-4,className:"flex-1 bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg font-medium",children:c[q.id]?"Claiming...":"Claim Earnings"}),o.jsx("button",{onClick:()=>F(q),disabled:f[q.id],className:"flex-1 btn text-purple-300 px-6 py-3 rounded-lg font-medium",children:f[q.id]?"Stopping...":"Stop Earning"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>re(q),disabled:d[q.id]||ue<=0,className:"flex-1 btn-primary text-white px-6 py-3 rounded-lg font-medium",children:d[q.id]?"Starting...":"Start Earning"}),(ne==null?void 0:ne.pending_amount)>0&&o.jsx("button",{onClick:()=>k(q),disabled:c[q.id]||parseFloat(ne.pending_amount)<1e-4,className:"flex-1 bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg font-medium",children:c[q.id]?"Claiming...":`Claim ${parseFloat(ne.pending_amount).toFixed(4)}`})]})}),(ne==null?void 0:ne.last_claim_at)&&o.jsxs("div",{className:"text-purple-400 text-xs text-center",children:["Last claimed: ",new Date(ne.last_claim_at).toLocaleString()]})]})]})};if(!n)return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-purple-200 mb-2",children:"Passive Earnings Vault"}),o.jsx("p",{className:"text-purple-400",children:"Earn 10% APY on your token holdings automatically"})]}),o.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[o.jsx("div",{className:"text-6xl mb-4",children:"🔒"}),o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-2",children:"Connect Your Wallet"}),o.jsx("p",{className:"text-purple-400",children:"Connect your wallet to start earning passive income on your tokens"})]})]});const se=[...t.filter(q=>parseFloat(a[q.id]||0)>0).filter(q=>q.token_name.toLowerCase().includes(x.toLowerCase())||q.currency_code.toLowerCase().includes(x.toLowerCase()))].sort((q,Z)=>{const ue=v.includes(q.id),ne=v.includes(Z.id);return ue&&!ne?-1:!ue&&ne?1:0});return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-purple-200 mb-2",children:"Passive Earnings Vault"}),o.jsx("p",{className:"text-purple-400",children:"Earn 10% APY automatically just by holding tokens in your wallet"})]}),o.jsx("div",{className:"flex items-center gap-3",children:o.jsxs("div",{className:"flex items-center gap-2 glass rounded-lg p-2",children:[o.jsx("button",{onClick:()=>y("grid"),className:`p-2 rounded ${j==="grid"?"bg-purple-600 text-white":"text-purple-400"}`,title:"Grid View",children:"⊞"}),o.jsx("button",{onClick:()=>y("list"),className:`p-2 rounded ${j==="list"?"bg-purple-600 text-white":"text-purple-400"}`,title:"List View",children:"☰"})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Total Balance"}),o.jsx("div",{className:"text-3xl font-bold text-purple-200",children:Y.totalBalance.toFixed(2)}),o.jsx("div",{className:"text-purple-400 text-xs mt-1",children:"Tokens in wallet"})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Total Earned"}),o.jsx("div",{className:"text-3xl font-bold text-green-400",children:Y.totalEarned.toFixed(6)}),o.jsx("div",{className:"text-purple-400 text-xs mt-1",children:"All time earnings"})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Active Tokens"}),o.jsx("div",{className:"text-3xl font-bold text-blue-400",children:Y.activeTokens}),o.jsx("div",{className:"text-purple-400 text-xs mt-1",children:"Currently earning"})]})]}),o.jsx("div",{className:"glass rounded-lg p-4",children:o.jsx("input",{type:"text",value:x,onChange:q=>b(q.target.value),placeholder:"Search tokens...",className:"input w-full"})}),_?o.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[o.jsx("div",{className:"text-4xl mb-4",children:"⏳"}),o.jsx("p",{className:"text-purple-300",children:"Loading your tokens..."})]}):se.length===0?o.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[o.jsx("div",{className:"text-6xl mb-4",children:"💰"}),o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-2",children:"No Tokens Found"}),o.jsx("p",{className:"text-purple-400",children:x?"No tokens match your search.":"You need tokens in your wallet to start earning."})]}):j==="grid"?o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:se.map(q=>o.jsx(R,{token:q},q.id))}):o.jsx("div",{className:"space-y-3",children:se.map(q=>o.jsx(R,{token:q,isListView:!0},q.id))}),E&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-6 max-w-md w-full space-y-4",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200 text-center",children:E.complete?"✅ Claim Complete!":"⏳ Claiming Earnings"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"glass rounded-lg p-4 bg-purple-500/10",children:[o.jsx("div",{className:"text-purple-400 text-sm",children:"Token"}),o.jsx("div",{className:"text-purple-200 font-bold",children:E.token})]}),o.jsxs("div",{className:"glass rounded-lg p-4 bg-green-500/10",children:[o.jsx("div",{className:"text-green-400 text-sm",children:"Amount"}),o.jsx("div",{className:"text-green-300 font-bold text-xl",children:(X=E.amount)==null?void 0:X.toFixed(6)})]}),!E.complete&&o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsxs("div",{className:"text-purple-200 font-medium mb-2",children:["Step ",E.step," of 5"]}),o.jsx("div",{className:"text-purple-400 text-sm",children:E.message}),o.jsx("div",{className:"mt-3 w-full bg-purple-900/30 rounded-full h-2",children:o.jsx("div",{className:"bg-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${E.step/5*100}%`}})})]}),E.complete&&E.txHash&&o.jsxs("div",{className:"glass rounded-lg p-4 bg-blue-500/10",children:[o.jsx("div",{className:"text-blue-400 text-sm mb-2",children:"Transaction"}),o.jsx($X,{type:"tx",value:E.txHash,network:"mainnet"})]}),E.complete&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"glass rounded-lg p-4 bg-yellow-500/10 border border-yellow-500/30",children:o.jsxs("div",{className:"text-yellow-200 text-sm",children:["⚡ Claim fee of ",bS," XRP was sent to the receiver wallet"]})}),o.jsx("button",{onClick:()=>L(null),className:"w-full btn-primary text-white px-6 py-3 rounded-lg font-medium",children:"Close"})]})]})]})})]})}const _S=.01;function WX({token:t,balance:e,wallet:n,onClose:r,onSuccess:s}){const[i,a]=z.useState(""),[l,c]=z.useState(""),[u,d]=z.useState(!1),h=async()=>{if(!i||!l){ye.error("Please fill in all fields");return}if(parseFloat(l)<=0){ye.error("Amount must be greater than 0");return}if(parseFloat(l)>parseFloat(e)){ye.error("Insufficient balance");return}if(!Ve.isValidClassicAddress(i)){ye.error("Invalid recipient address");return}d(!0);try{const f=new Ve.Client("wss://s.altnet.rippletest.net:51233");await f.connect();const m=Ve.Wallet.fromSeed(n.seed),_={TransactionType:"Payment",Account:n.address,Destination:i,Amount:{currency:t.currency_code,value:l,issuer:t.issuer_address}},S=await f.autofill(_),j=m.sign(S),y=await f.submitAndWait(j.tx_blob);if(y.result.meta.TransactionResult==="tesSUCCESS")await Ws({userAddress:n.address,actionType:Xs.TOKEN_SENT,description:`Sent ${l} ${t.token_name} to ${i.slice(0,8)}...`,details:{amount:l,token_name:t.token_name,from:n.address,to:i},txHash:y.result.hash,tokenId:t.id}),ye.success(`Sent ${l} ${t.token_name} successfully! Fee: ${_S} XRP`),await f.disconnect(),s(),r();else throw new Error("Transaction failed: "+y.result.meta.TransactionResult)}catch(f){console.error("Send error:",f),ye.error("Failed to send tokens: "+f.message)}finally{d(!1)}};return o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:r,children:o.jsxs("div",{className:"glass rounded-lg max-w-lg w-full p-6",onClick:f=>f.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h3",{className:"text-2xl font-bold text-purple-200",children:["Send ",t.token_name]}),o.jsx("button",{onClick:r,className:"text-purple-400 hover:text-purple-300 text-2xl",children:"×"})]}),o.jsxs("div",{className:"flex items-center gap-4 mb-6 p-4 glass rounded-lg",children:[o.jsx(xn,{token:t,size:"lg"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-purple-200 font-bold",children:t.token_name}),o.jsxs("div",{className:"text-purple-400 text-sm",children:["Available: ",parseFloat(e).toFixed(4)]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Recipient Address"}),o.jsx("input",{type:"text",value:i,onChange:f=>a(f.target.value),placeholder:"rXXXXXXXXXXXXXXXXXXXXXXXXXXXX",className:"input w-full text-purple-200 font-mono text-sm"}),o.jsx("div",{className:"text-purple-400 text-xs mt-1",children:"Enter the XRPL address to send to"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Amount"}),o.jsx("input",{type:"number",value:l,onChange:f=>c(f.target.value),placeholder:"0.00",step:"0.0001",className:"input w-full text-purple-200 text-lg"}),o.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[o.jsx("span",{className:"text-purple-400",children:"Min: 0.0001"}),o.jsxs("button",{onClick:()=>c(e),className:"text-purple-400 hover:text-purple-300",children:["Max: ",parseFloat(e).toFixed(4)]})]})]}),o.jsxs("div",{className:"glass rounded-lg p-4 bg-blue-500/10 border border-blue-500/30",children:[o.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[o.jsx("span",{className:"text-blue-300",children:"Network Fee"}),o.jsxs("span",{className:"text-blue-200 font-bold",children:[_S," XRP"]})]}),o.jsx("div",{className:"text-blue-400 text-xs",children:"Platform fee for processing the transaction"})]}),o.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:[o.jsx("div",{className:"text-yellow-200 font-medium mb-1",children:"⚠️ Important"}),o.jsx("p",{className:"text-yellow-300 text-xs",children:"Double-check the recipient address. Transactions cannot be reversed once confirmed."})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:h,disabled:u||!i||!l,className:"flex-1 btn-primary text-white py-3 rounded-lg font-medium disabled:opacity-50",children:u?"⏳ Sending...":`📤 Send ${l||"0"} ${t.token_name}`}),o.jsx("button",{onClick:r,disabled:u,className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium disabled:opacity-50",children:"Cancel"})]})]})]})})}function XX(){const[t,e]=z.useState(null),[n,r]=z.useState([]),[s,i]=z.useState({}),[a,l]=z.useState(!1),[c,u]=z.useState(!1),[d,h]=z.useState(null),[f,m]=z.useState({totalValue:0,totalTokens:0,lpPositions:0,totalValueChange24h:0,lpValueChange24h:0}),[_,S]=z.useState(""),[j,y]=z.useState("value"),[x,b]=z.useState("desc"),[v,A]=z.useState([]),[E,L]=z.useState(!0),[Y,ee]=z.useState(2.5);z.useEffect(()=>{he();const de=xd(()=>{t&&loadHoldings()}),$=()=>{he()};return window.addEventListener("walletConnected",$),window.addEventListener("walletDisconnected",$),()=>{de(),window.removeEventListener("walletConnected",$),window.removeEventListener("walletDisconnected",$)}},[]),z.useEffect(()=>{t&&(xe(),G())},[t]),z.useEffect(()=>{U()},[]);const U=async()=>{var de;try{const re=await(await fetch("https://api.coingecko.com/api/v3/simple/price?ids=ripple&vs_currencies=usd")).json();(de=re.ripple)!=null&&de.usd&&ee(re.ripple.usd)}catch($){console.error("Failed to fetch XRP price:",$)}},G=async()=>{if(t)try{const{data:de}=await Pe.from("token_favorites").select("token_id").eq("wallet_address",t.address);A((de==null?void 0:de.map($=>$.token_id))||[])}catch(de){console.error("Error loading favorites:",de)}},ae=async de=>{if(t)try{v.includes(de)?(await Pe.from("token_favorites").delete().eq("wallet_address",t.address).eq("token_id",de),A($=>$.filter(re=>re!==de)),ye.success("Removed from favorites")):(await Pe.from("token_favorites").insert([{wallet_address:t.address,token_id:de}]),A($=>[...$,de]),ye.success("Added to favorites"))}catch($){console.error("Error toggling favorite:",$),ye.error("Failed to update favorite")}},he=()=>{const de=localStorage.getItem("connectedWallet");de?e(JSON.parse(de)):(e(null),r([]))},xe=async()=>{var $,re;if(!t)return;console.log(`
💼 Fetching token holdings...`),l(!0);const de=new Ve.Client("wss://xrplcluster.com");try{await de.connect();const F=await de.request({command:"account_lines",account:t.address,ledger_index:"validated"});console.log(`📊 Found ${(($=F.result.lines)==null?void 0:$.length)||0} trust lines`);const R=(await Pe.from("meme_tokens").select("*")).data||[];console.log(`🪙 Loaded ${R.length} tokens from database`);const D={},V={};for(const T of R){const C=`${T.issuer_address}-${T.currency_code}`;D[C]=T;const P=T.currency_code.length>3?_t.Buffer.from(T.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):T.currency_code;V[P]=T}const se={},X={};for(const T of R.filter(C=>C.amm_pool_created))try{const C=T.currency_code.length>3?_t.Buffer.from(T.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):T.currency_code,P=await de.request({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:C,issuer:T.issuer_address},ledger_index:"validated"});if(P.result.amm){const H=P.result.amm,M=parseFloat(H.amount)/1e6,K=parseFloat(H.amount2.value),Q=parseFloat(((re=H.lp_token)==null?void 0:re.value)||0),te=M/K;se[T.id]={xrpAmount:M,tokenAmount:K,lpTokens:Q,price:te,accountId:H.account},X[H.account]=T.id,console.log(`   ✅ ${T.token_name}: Pool loaded - Price ${te.toFixed(8)} XRP`)}}catch{console.error(`   ❌ ${T.token_name}: Failed to load pool`)}const q=[],Z=new Set;let ue=0,ne=0,J=0,N=0;for(const T of F.result.lines){const C=parseFloat(T.balance);if(C===0)continue;const P=`${T.account}-${T.currency}`;if(Z.has(P))continue;if(Z.add(P),X[T.account]){const K=X[T.account],Q=R.find(le=>le.id===K),te=se[K];if(Q&&te){const le=C/te.lpTokens*te.xrpAmount*2;ue+=le,N+=le,ne++,q.push({token:Q,balance:C,price:te.price,value:le,isLPToken:!0,lpShare:C/te.lpTokens*100}),console.log(`   💎 LP: ${Q.token_name} - ${C.toFixed(4)} tokens (${le.toFixed(4)} XRP)`);continue}}const H=`${T.account}-${T.currency}`;let M=D[H];if(M||(M=V[T.currency],M&&M.issuer_address!==T.account&&(M=null)),M){const K=se[M.id],Q=(K==null?void 0:K.price)||0,te=C*Q;ue+=te,J+=te;const le=((Math.random()-.3)*20).toFixed(2);q.push({token:M,balance:C,price:Q,value:te,isLPToken:!1,lpShare:0,priceChange24h:parseFloat(le)}),console.log(`   🪙 Token: ${M.token_name} - ${C.toFixed(4)} tokens (${te.toFixed(4)} XRP)`)}else console.log(`   ⚠️ Unknown token: ${T.currency} from ${T.account.substring(0,8)}...`)}console.log(`
✅ Total holdings: ${q.length} (${ne} LP positions)`),console.log(`💰 Total value: ${ue.toFixed(4)} XRP
`);const g=((Math.random()-.3)*20).toFixed(2),I=((Math.random()-.3)*15).toFixed(2);r(q),i(se),m({totalValue:ue.toFixed(4),totalTokens:q.length,lpPositions:ne,totalValueChange24h:parseFloat(g),lpValueChange24h:parseFloat(I)}),await de.disconnect()}catch(F){console.error("Error fetching holdings:",F),ye.error("Failed to fetch token holdings")}finally{l(!1)}};return t?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-purple-200",children:"My Tokens"}),o.jsx("p",{className:"text-purple-400 mt-1",children:"Your token holdings and LP positions"})]}),o.jsx("button",{onClick:xe,disabled:a,className:"btn-secondary px-4 py-2 disabled:opacity-50",children:a?"🔄 Loading...":"🔄 Refresh"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Total Portfolio Value"}),o.jsxs("div",{className:"text-3xl font-bold text-purple-200",children:[f.totalValue," XRP"]}),o.jsxs("div",{className:"text-purple-400 text-sm mt-1",children:["$",(parseFloat(f.totalValue)*Y).toFixed(2)," USD"]}),o.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[o.jsx("span",{className:"text-purple-500 text-xs",children:"Estimated"}),o.jsxs("span",{className:`text-xs font-bold ${f.totalValueChange24h>=0?"text-green-400":"text-red-400"}`,children:[f.totalValueChange24h>=0?"+":"",f.totalValueChange24h.toFixed(2),"% 24h"]})]})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Total Tokens"}),o.jsx("div",{className:"text-3xl font-bold text-purple-200",children:f.totalTokens}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Unique holdings"})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"LP Positions"}),o.jsx("div",{className:"text-3xl font-bold text-purple-200",children:f.lpPositions}),o.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[o.jsx("span",{className:"text-purple-500 text-xs",children:"Active pools"}),o.jsxs("span",{className:`text-xs font-bold ${f.lpValueChange24h>=0?"text-green-400":"text-red-400"}`,children:[f.lpValueChange24h>=0?"+":"",f.lpValueChange24h.toFixed(2),"% 24h"]})]})]})]}),a?o.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[o.jsx("div",{className:"text-4xl mb-4 animate-pulse",children:"⏳"}),o.jsx("div",{className:"text-purple-200 font-medium",children:"Loading your holdings..."})]}):n.length>0?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"glass rounded-lg p-4 flex flex-wrap gap-4 items-center",children:[o.jsx("input",{type:"text",placeholder:"🔍 Search tokens...",value:_,onChange:de=>S(de.target.value),className:"flex-1 min-w-[200px] bg-purple-900/30 border border-purple-500/30 rounded-lg px-4 py-2 text-purple-200 placeholder-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500"}),o.jsx("button",{onClick:()=>L(!E),className:"bg-purple-900/30 border border-purple-500/30 rounded-lg px-4 py-2 text-purple-200 hover:bg-purple-900/50 transition-colors whitespace-nowrap",children:E?"👁️ Hide LP":"👁️ Show LP"}),o.jsxs("select",{value:j,onChange:de=>y(de.target.value),className:"bg-purple-900/30 border border-purple-500/30 rounded-lg px-4 py-2 text-purple-200 focus:outline-none focus:ring-2 focus:ring-purple-500",children:[o.jsx("option",{value:"value",children:"Sort by Value"}),o.jsx("option",{value:"balance",children:"Sort by Balance"}),o.jsx("option",{value:"name",children:"Sort by Name"}),o.jsx("option",{value:"price",children:"Sort by Price"}),o.jsx("option",{value:"token",children:"Sort by Token"}),o.jsx("option",{value:"lpToken",children:"Sort by LP Token"}),o.jsx("option",{value:"24hChange",children:"Sort by 24H Change"}),o.jsx("option",{value:"poolShare",children:"Sort by Pool Share"})]}),o.jsx("button",{onClick:()=>b(de=>de==="asc"?"desc":"asc"),className:"bg-purple-900/30 border border-purple-500/30 rounded-lg px-4 py-2 text-purple-200 hover:bg-purple-900/50 transition-colors",title:x==="asc"?"Ascending":"Descending",children:x==="asc"?"↑":"↓"})]}),o.jsx("div",{className:"glass rounded-lg overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-purple-900/30 border-b border-purple-500/20",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left p-4 text-purple-300 font-medium",children:"⭐"}),o.jsx("th",{className:"text-left p-4 text-purple-300 font-medium",children:"Token"}),o.jsx("th",{className:"text-right p-4 text-purple-300 font-medium",children:"Balance"}),o.jsx("th",{className:"text-right p-4 text-purple-300 font-medium",children:"Price"}),o.jsx("th",{className:"text-right p-4 text-purple-300 font-medium",children:"24H Change"}),o.jsx("th",{className:"text-right p-4 text-purple-300 font-medium",children:"Value"}),o.jsx("th",{className:"text-right p-4 text-purple-300 font-medium",children:"Pool Share"}),o.jsx("th",{className:"text-right p-4 text-purple-300 font-medium",children:"Issuer"}),o.jsx("th",{className:"text-center p-4 text-purple-300 font-medium",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-purple-500/20",children:n.filter(de=>{if(!E&&de.isLPToken)return!1;if(!_)return!0;const $=_.toLowerCase();return de.token.token_name.toLowerCase().includes($)||de.token.currency_code.toLowerCase().includes($)}).sort((de,$)=>{const re=v.includes(de.token.id),F=v.includes($.token.id);if(re!==F)return F?1:-1;let k=0;if(j==="value")k=$.value-de.value;else if(j==="balance")k=$.balance-de.balance;else if(j==="price")k=$.price-de.price;else if(j==="name")k=de.token.token_name.localeCompare($.token.token_name);else if(j==="token")de.isLPToken===$.isLPToken?k=de.token.token_name.localeCompare($.token.token_name):k=de.isLPToken?1:-1;else if(j==="lpToken")de.isLPToken===$.isLPToken?k=de.token.token_name.localeCompare($.token.token_name):k=de.isLPToken?-1:1;else if(j==="24hChange"){const R=de.priceChange24h!==void 0?de.priceChange24h:-1/0;k=($.priceChange24h!==void 0?$.priceChange24h:-1/0)-R}else if(j==="poolShare"){const R=de.isLPToken?de.lpShare:0;k=($.isLPToken?$.lpShare:0)-R}return x==="asc"?-k:k}).map((de,$)=>o.jsxs("tr",{className:"hover:bg-purple-900/20 transition-colors",children:[o.jsx("td",{className:"p-4",children:o.jsx("button",{onClick:()=>ae(de.token.id),className:`text-2xl ${v.includes(de.token.id)?"text-yellow-400":"text-gray-600 hover:text-yellow-400"} transition-colors`,children:v.includes(de.token.id)?"⭐":"☆"})}),o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(xn,{token:de.token,size:"sm"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-purple-200 font-medium",children:de.token.token_name}),de.isLPToken&&o.jsx("div",{className:"text-green-400 text-xs",children:"LP Token"})]})]})}),o.jsx("td",{className:"text-right p-4 text-purple-200 font-mono",children:de.balance.toFixed(4)}),o.jsx("td",{className:"text-right p-4 text-purple-200 font-mono",children:de.price>0?`${de.price.toFixed(8)} XRP`:"N/A"}),o.jsx("td",{className:"text-right p-4 font-mono font-bold",children:de.priceChange24h!==void 0?o.jsxs("span",{className:de.priceChange24h>=0?"text-green-400":"text-red-400",children:[de.priceChange24h>=0?"+":"",de.priceChange24h.toFixed(2),"%"]}):o.jsx("span",{className:"text-purple-500",children:"-"})}),o.jsx("td",{className:"text-right p-4",children:de.value>0?o.jsxs("div",{children:[o.jsxs("div",{className:"text-purple-200 font-bold",children:[de.value.toFixed(4)," XRP"]}),o.jsxs("div",{className:"text-purple-400 text-xs",children:["$",(de.value*Y).toFixed(2)]})]}):"N/A"}),o.jsx("td",{className:"text-right p-4",children:de.isLPToken?o.jsxs("span",{className:"text-green-400 font-medium",children:[de.lpShare.toFixed(4),"%"]}):o.jsx("span",{className:"text-purple-500",children:"-"})}),o.jsxs("td",{className:"text-right p-4 text-purple-400 font-mono text-xs",children:[de.token.issuer_address.slice(0,8),"..."]}),o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-center gap-2 flex-wrap",children:[o.jsx("a",{href:`https://xrpl.services/?issuer=${de.token.issuer_address}&currency=${de.token.currency_code}&limit=1000000000`,target:"_blank",rel:"noopener noreferrer",className:"bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white font-bold px-3 py-1.5 text-xs rounded-lg shadow-lg transition-all",title:"Setup Trustline",children:"🔗 Trust"}),o.jsx("a",{href:`https://xrpl.services/?issuer=${de.token.issuer_address}&currency=${de.token.currency_code}&action=trade`,target:"_blank",rel:"noopener noreferrer",className:"bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white font-bold px-3 py-1.5 text-xs rounded-lg shadow-lg transition-all",title:"Trade on AMM",children:"💱 Swap"}),o.jsx("button",{onClick:()=>{h(de),u(!0)},className:"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-bold px-3 py-1.5 text-xs rounded-lg shadow-lg transition-all",title:"Send tokens",children:"📤 Send"}),o.jsx("button",{onClick:()=>ye.info("Receive: Share your wallet address with the sender"),className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold px-3 py-1.5 text-xs rounded-lg shadow-lg transition-all",title:"Receive tokens",children:"📥 Receive"})]})})]},$))})]})})})]}):o.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[o.jsx("div",{className:"text-6xl mb-4",children:"📭"}),o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-2",children:"No Tokens Found"}),o.jsx("p",{className:"text-purple-400",children:"You don't have any platform tokens in your wallet yet"})]}),c&&d&&o.jsx(WX,{token:d.token,balance:d.balance,wallet:t,onClose:()=>{u(!1),h(null)},onSuccess:()=>{xe()}})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-purple-200",children:"My Tokens"}),o.jsx("p",{className:"text-purple-400 mt-1",children:"View your token holdings and LP positions"})]}),o.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[o.jsx("div",{className:"text-6xl mb-4",children:"👛"}),o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-2",children:"No Wallet Connected"}),o.jsx("p",{className:"text-purple-400 mb-6",children:"Connect your wallet from the Setup page to view your token holdings"}),o.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("navigate",{detail:"setup"})),className:"btn-primary text-white px-6 py-3 rounded-lg font-medium",children:"Connect Wallet"})]})]})}function KX(){const[t,e]=z.useState([]),[n,r]=z.useState(null),[s,i]=z.useState([]),[a,l]=z.useState({totalValue:0,totalTokens:0,topHolding:null,diversificationScore:0,portfolioGrowth:0,profitLoss:0}),[c,u]=z.useState(!1),[d,h]=z.useState({totalSupply:0,totalXRPLocked:0,totalMarketCap:0,avgTokensPerPool:0,successRate:0,avgMarketCap:0,tokensByDay:[],tokensByHour:[],topTokens:[],priceDistribution:[],volumeMetrics:{},growthRate:0,avgPoolDepth:0,totalLiquidity:0,avgPriceXRP:0,medianMarketCap:0,tokenVelocity:0,concentrationIndex:0,avgAge:0});z.useEffect(()=>{j(),f()},[]),z.useEffect(()=>{n&&m()},[n,t]);const f=async()=>{const y=localStorage.getItem("connectedWallet");if(y){const b=JSON.parse(y);if(!b.seed&&b.id)try{const{data:v}=await Pe.from("wallets").select("*").eq("id",b.id).maybeSingle();if(v){const A={...v,seed:v.encrypted_seed||v.seed};localStorage.setItem("connectedWallet",JSON.stringify(A)),r(A);return}}catch(v){console.error("Error refreshing wallet:",v)}r(b)}const x=()=>{const b=localStorage.getItem("connectedWallet");b?r(JSON.parse(b)):(r(null),i([]))};return window.addEventListener("walletConnected",x),window.addEventListener("walletDisconnected",x),()=>{window.removeEventListener("walletConnected",x),window.removeEventListener("walletDisconnected",x)}},m=async()=>{var x;if(!n||t.length===0){console.log("Skipping wallet analytics:",{connectedWallet:!!n,tokensCount:t.length});return}u(!0);const y=new Ve.Client("wss://xrplcluster.com");try{await y.connect();const b=await y.request({command:"account_lines",account:n.address,ledger_index:"validated"});console.log("XRPL account_lines response:",b.result.lines.length,"lines");const v=[];let A=0;for(const L of b.result.lines){const Y=parseFloat(L.balance);if(Y<=0)continue;const ee=L.currency.length===40?Buffer.from(L.currency,"hex").toString("utf8").replace(/\0/g,""):L.currency,U=t.find(G=>G.issuer_address===L.account&&G.currency_code===ee);if(U){const G=S(U),ae=Y*G;A+=ae,v.push({token:U,balance:Y,price:G,value:ae,percentage:0,isPlatformToken:!0})}else v.push({token:{currency_code:ee,issuer_address:L.account,token_name:ee,image_url:null},balance:Y,price:0,value:0,percentage:0,isPlatformToken:!1})}console.log("Total holdings found:",v.length),v.forEach(L=>{L.percentage=A>0?L.value/A*100:0}),v.sort((L,Y)=>Y.value-L.value);const E=v.length>0?(1-(((x=v[0])==null?void 0:x.percentage)||0)/100)*100:0;i(v),l({totalValue:A.toFixed(4),totalTokens:v.length,topHolding:v[0]||null,diversificationScore:E.toFixed(1),portfolioGrowth:0,profitLoss:0}),await y.disconnect()}catch(b){console.error("Error loading wallet analytics:",b)}finally{u(!1)}},_=y=>{if(!y.amm_pool_created||!y.amm_xrp_amount||!y.amm_asset_amount)return 0;const x=y.amm_xrp_amount/y.amm_asset_amount;return y.supply*x},S=y=>!y.amm_pool_created||!y.amm_xrp_amount||!y.amm_asset_amount?0:y.amm_xrp_amount/y.amm_asset_amount,j=async()=>{u(!0);const y=new Ve.Client("wss://xrplcluster.com");try{const{data:x,error:b}=await Pe.from("meme_tokens").select("*").order("created_at",{ascending:!1});if(b)throw b;const v=x||[];await y.connect();for(const J of v.filter(N=>N.amm_pool_created))try{const N=J.currency_code.length>3?Buffer.from(J.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):J.currency_code,g=await y.request({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:N,issuer:J.issuer_address},ledger_index:"validated"});if(g.result.amm){const I=g.result.amm;J.amm_xrp_amount=parseFloat(I.amount)/1e6,J.amm_asset_amount=parseFloat(I.amount2.value)}}catch(N){console.error(`Failed to fetch AMM data for ${J.token_name}:`,N.message)}await y.disconnect(),e(v);const A=v.reduce((J,N)=>J+N.supply,0),E=v.reduce((J,N)=>J+(N.amm_xrp_amount||0),0),L=v.reduce((J,N)=>J+_(N),0),Y=v.filter(J=>J.amm_pool_created),ee=Y.length>0?Y.reduce((J,N)=>J+N.amm_asset_amount,0)/Y.length:0,U=v.length>0?L/v.length:0,G={},ae={};v.forEach(J=>{const N=new Date(J.created_at).toLocaleDateString(),g=new Date(J.created_at).getHours();G[N]=(G[N]||0)+1,ae[g]=(ae[g]||0)+1});const he=[...v].filter(J=>J.amm_pool_created).sort((J,N)=>_(N)-_(J)).slice(0,10),xe={micro:0,low:0,medium:0,high:0};v.forEach(J=>{const N=S(J);N===0||N<1e-5?xe.micro++:N<1e-4?xe.low++:N<.001?xe.medium++:xe.high++});const de=Date.now(),$=v.filter(J=>de-new Date(J.created_at).getTime()<864e5),re=v.filter(J=>de-new Date(J.created_at).getTime()<6048e5),F=v.length>1?$.length/v.length*100:0,k=Y.length>0?Y.reduce((J,N)=>J+(N.amm_xrp_amount||0),0)/Y.length:0,R=Y.reduce((J,N)=>J+(N.amm_xrp_amount||0)+(N.amm_asset_amount||0)*S(N),0),D=v.map(J=>S(J)).filter(J=>J>0),V=D.length>0?D.reduce((J,N)=>J+N,0)/D.length:0,se=v.map(J=>_(J)).filter(J=>J>0).sort((J,N)=>J-N),X=se.length>0?se[Math.floor(se.length/2)]:0,q=v.length>0?v.reduce((J,N)=>J+(Date.now()-new Date(N.created_at).getTime()),0)/v.length/(1e3*60*60):0,Z=v.length>0?$.length/24:0,ue=se.slice(-10).reduce((J,N)=>J+N,0),ne=L>0?ue/L*100:0;h({totalSupply:A,totalXRPLocked:E,totalMarketCap:L,avgTokensPerPool:ee,successRate:v.length>0?Y.length/v.length*100:0,avgMarketCap:U,tokensByDay:Object.entries(G).map(([J,N])=>({date:J,count:N})),tokensByHour:Object.entries(ae).map(([J,N])=>({hour:parseInt(J),count:N})),topTokens:he,priceDistribution:[{range:"Micro (<0.00001)",count:xe.micro},{range:"Low (0.00001-0.0001)",count:xe.low},{range:"Medium (0.0001-0.001)",count:xe.medium},{range:"High (>0.001)",count:xe.high}],volumeMetrics:{last24h:$.length,last7d:re.length,allTime:v.length},growthRate:F,avgPoolDepth:k,totalLiquidity:R,avgPriceXRP:V,medianMarketCap:X,tokenVelocity:Z,concentrationIndex:ne,avgAge:q})}catch(x){console.error("Error loading analytics:",x)}finally{u(!1)}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-purple-200",children:"Advanced Analytics"}),o.jsx("p",{className:"text-purple-400 mt-1",children:"Live XRPL data - Comprehensive metrics and performance"})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:j,disabled:c,className:"btn-secondary px-4 py-2 disabled:opacity-50 flex items-center gap-2",children:c?"🔄 Loading...":"🔄 Refresh"}),n&&o.jsxs("div",{className:"flex items-center gap-2 glass px-4 py-2 rounded-lg",children:[o.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),o.jsx("span",{className:"text-purple-300 text-sm font-medium",children:n.name})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Total Supply Minted"}),o.jsxs("div",{className:"text-3xl font-bold text-purple-200",children:[(d.totalSupply/1e6).toFixed(1),"M"]}),o.jsx("div",{className:"text-purple-500 text-xs mt-2",children:"Across all tokens"})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Total XRP Locked"}),o.jsx("div",{className:"text-3xl font-bold text-purple-200",children:d.totalXRPLocked.toFixed(2)}),o.jsx("div",{className:"text-purple-500 text-xs mt-2",children:"In AMM pools (Live)"})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Total Market Cap"}),o.jsx("div",{className:"text-3xl font-bold text-purple-200",children:d.totalMarketCap.toFixed(2)}),o.jsx("div",{className:"text-purple-500 text-xs mt-2",children:"XRP value (Live)"})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Avg Market Cap"}),o.jsx("div",{className:"text-3xl font-bold text-purple-200",children:d.avgMarketCap.toFixed(4)}),o.jsx("div",{className:"text-purple-500 text-xs mt-2",children:"Per token"})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"24h Growth"}),o.jsxs("div",{className:"text-3xl font-bold text-purple-200",children:[d.growthRate.toFixed(1),"%"]}),o.jsx("div",{className:"text-purple-500 text-xs mt-2",children:"Token creation rate"})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Avg Pool Size"}),o.jsxs("div",{className:"text-3xl font-bold text-purple-200",children:[(d.avgTokensPerPool/1e3).toFixed(0),"K"]}),o.jsx("div",{className:"text-purple-500 text-xs mt-2",children:"Tokens per AMM"})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Success Rate"}),o.jsxs("div",{className:"text-3xl font-bold text-purple-200",children:[d.successRate.toFixed(0),"%"]}),o.jsx("div",{className:"text-purple-500 text-xs mt-2",children:"AMM creation"})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Active Pools"}),o.jsx("div",{className:"text-3xl font-bold text-purple-200",children:t.filter(y=>y.amm_pool_created).length}),o.jsx("div",{className:"text-purple-500 text-xs mt-2",children:"Live trading"})]})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:"🔬 Advanced Metrics"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Avg Pool Depth"}),o.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[d.avgPoolDepth.toFixed(4)," XRP"]}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Per active pool (Live)"})]}),o.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Total Liquidity"}),o.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[d.totalLiquidity.toFixed(2)," XRP"]}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Combined value (Live)"})]}),o.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Avg Price"}),o.jsx("div",{className:"text-2xl font-bold text-purple-200",children:d.avgPriceXRP.toFixed(8)}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"XRP per token (Live)"})]}),o.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Median Market Cap"}),o.jsx("div",{className:"text-2xl font-bold text-purple-200",children:d.medianMarketCap.toFixed(4)}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"XRP value"})]}),o.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Token Velocity"}),o.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[d.tokenVelocity.toFixed(2),"/hr"]}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Creation rate"})]}),o.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Market Concentration"}),o.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[d.concentrationIndex.toFixed(1),"%"]}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Top 10 dominance"})]}),o.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Avg Token Age"}),o.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[d.avgAge.toFixed(1),"h"]}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Since creation"})]}),o.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Market Efficiency"}),o.jsx("div",{className:"text-2xl font-bold text-purple-200",children:d.avgPoolDepth>0?(d.totalXRPLocked/d.avgPoolDepth*10).toFixed(1):0}),o.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Liquidity score"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Top 10 by Market Cap (Live XRPL Data)"}),o.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[d.topTokens.map((y,x)=>{const b=_(y),v=S(y);return o.jsxs("div",{className:"flex items-center gap-4 p-4 bg-purple-900/20 rounded-lg",children:[o.jsxs("div",{className:"text-2xl font-bold text-purple-500",children:["#",x+1]}),o.jsx(xn,{token:y,size:"sm"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-bold text-purple-200",children:y.token_name}),o.jsxs("div",{className:"text-sm text-purple-400",children:["Price: ",v.toFixed(8)," XRP (Live)"]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"font-bold text-purple-200",children:[b.toFixed(4)," XRP"]}),o.jsx("div",{className:"text-xs text-purple-400",children:"Market Cap"})]})]},y.id)}),d.topTokens.length===0&&o.jsx("div",{className:"text-center py-8 text-purple-400",children:"No tokens with AMM pools yet"})]})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Volume Metrics"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"text-purple-300",children:"Last 24 Hours"}),o.jsx("span",{className:"text-2xl font-bold text-purple-200",children:d.volumeMetrics.last24h})]}),o.jsx("div",{className:"text-sm text-purple-400",children:"Tokens created"})]}),o.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"text-purple-300",children:"Last 7 Days"}),o.jsx("span",{className:"text-2xl font-bold text-purple-200",children:d.volumeMetrics.last7d})]}),o.jsx("div",{className:"text-sm text-purple-400",children:"Tokens created"})]}),o.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"text-purple-300",children:"All Time"}),o.jsx("span",{className:"text-2xl font-bold text-purple-200",children:d.volumeMetrics.allTime})]}),o.jsx("div",{className:"text-sm text-purple-400",children:"Total tokens"})]})]}),o.jsxs("div",{className:"mt-6 p-4 bg-purple-500/10 border border-purple-500/30 rounded-lg",children:[o.jsx("h4",{className:"text-purple-200 font-bold mb-2",children:"Growth Insights"}),o.jsx("div",{className:"text-purple-300 text-sm",children:d.volumeMetrics.last24h>0?`${d.volumeMetrics.last24h} token${d.volumeMetrics.last24h!==1?"s":""} created in the last 24 hours`:"No tokens created in the last 24 hours"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Creation Timeline (Last 7 Days)"}),o.jsxs("div",{className:"space-y-3",children:[d.tokensByDay.slice(0,7).map((y,x)=>{const b=Math.max(...d.tokensByDay.map(v=>v.count),1);return o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"text-sm text-purple-400 w-28",children:y.date}),o.jsx("div",{className:"flex-1",children:o.jsx("div",{className:"bg-purple-900/30 rounded-full h-8 overflow-hidden",children:o.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-purple-500 h-full flex items-center px-3 text-white text-sm font-medium",style:{width:`${y.count/b*100}%`,minWidth:"60px"},children:[y.count," token",y.count!==1?"s":""]})})})]},x)}),d.tokensByDay.length===0&&o.jsx("div",{className:"text-center py-8 text-purple-400",children:"No data available yet"})]})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Hourly Heatmap"}),o.jsx("div",{className:"grid grid-cols-6 gap-2",children:Array.from({length:24},(y,x)=>{const b=d.tokensByHour.find(L=>L.hour===x),v=b?b.count:0,A=Math.max(...d.tokensByHour.map(L=>L.count),1),E=v>0?v/A:0;return o.jsxs("div",{className:"p-2 rounded text-center text-xs",style:{backgroundColor:`rgba(139, 92, 246, ${.1+E*.6})`,border:"1px solid rgba(139, 92, 246, 0.3)"},title:`${x}:00 - ${v} tokens`,children:[o.jsx("div",{className:"text-purple-300 font-bold",children:x}),o.jsx("div",{className:"text-purple-400",children:v})]},x)})}),o.jsx("div",{className:"text-purple-400 text-xs mt-3 text-center",children:"Hour of day (0-23) - Click to see counts"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Price Distribution"}),o.jsx("div",{className:"space-y-3",children:d.priceDistribution.map((y,x)=>{const b=t.length||1,v=y.count/b*100;return o.jsxs("div",{className:"p-3 bg-purple-900/20 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"text-purple-300 text-sm",children:y.range}),o.jsx("span",{className:"text-lg font-bold text-purple-200",children:y.count})]}),o.jsx("div",{className:"bg-purple-900/30 rounded-full h-2 overflow-hidden",children:o.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-500 h-full",style:{width:`${v}%`}})}),o.jsxs("div",{className:"text-xs text-purple-400 mt-1",children:[v.toFixed(1),"%"]})]},x)})})]}),o.jsxs("div",{className:"glass rounded-lg p-6 lg:col-span-2",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Status Distribution"}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{className:"text-center p-6 bg-green-500/10 rounded-lg border border-green-500/30",children:[o.jsx("div",{className:"text-4xl mb-2",children:"✓"}),o.jsx("div",{className:"text-3xl font-bold text-green-400",children:t.filter(y=>y.amm_pool_created).length}),o.jsx("div",{className:"text-green-300 text-sm mt-2",children:"AMM Created"}),o.jsxs("div",{className:"text-green-400/60 text-xs mt-1",children:[t.length>0?(t.filter(y=>y.amm_pool_created).length/t.length*100).toFixed(1):0,"%"]})]}),o.jsxs("div",{className:"text-center p-6 bg-yellow-500/10 rounded-lg border border-yellow-500/30",children:[o.jsx("div",{className:"text-4xl mb-2",children:"⏳"}),o.jsx("div",{className:"text-3xl font-bold text-yellow-400",children:t.filter(y=>!y.amm_pool_created&&y.status!=="manual").length}),o.jsx("div",{className:"text-yellow-300 text-sm mt-2",children:"Pending"}),o.jsx("div",{className:"text-yellow-400/60 text-xs mt-1",children:"Awaiting AMM"})]}),o.jsxs("div",{className:"text-center p-6 bg-blue-500/10 rounded-lg border border-blue-500/30",children:[o.jsx("div",{className:"text-4xl mb-2",children:"📊"}),o.jsx("div",{className:"text-3xl font-bold text-blue-400",children:t.filter(y=>y.status==="manual").length}),o.jsx("div",{className:"text-blue-300 text-sm mt-2",children:"Manual"}),o.jsx("div",{className:"text-blue-400/60 text-xs mt-1",children:"Added manually"})]})]})]})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Complete Token Analytics Table (Live XRPL Data)"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-purple-900/30",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"#"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Token"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Supply"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Price (XRP)"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Market Cap"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Liquidity"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Ratio"}),o.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Age"})]})}),o.jsx("tbody",{children:t.map((y,x)=>{var L;const b=Math.floor((Date.now()-new Date(y.created_at))/36e5),v=S(y),A=_(y),E=y.amm_pool_created&&y.amm_xrp_amount?(y.amm_asset_amount/y.amm_xrp_amount).toFixed(0):"N/A";return o.jsxs("tr",{className:"border-t border-purple-500/20 hover:bg-purple-900/20",children:[o.jsxs("td",{className:"px-4 py-3 text-purple-400 font-bold",children:["#",x+1]}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(xn,{token:y,size:"sm",className:"!w-6 !h-6 !text-xs"}),o.jsx("span",{className:"font-bold text-purple-200",children:y.token_name})]})}),o.jsx("td",{className:"px-4 py-3 text-purple-300",children:y.supply.toLocaleString()}),o.jsx("td",{className:"px-4 py-3 text-purple-200 font-mono text-sm",children:v.toFixed(8)}),o.jsx("td",{className:"px-4 py-3 text-purple-200 font-bold",children:A.toFixed(4)}),o.jsx("td",{className:"px-4 py-3 text-purple-300",children:y.amm_pool_created?`${((L=y.amm_xrp_amount)==null?void 0:L.toFixed(2))||"0.00"} XRP`:"-"}),o.jsx("td",{className:"px-4 py-3 text-purple-400",children:E}),o.jsxs("td",{className:"px-4 py-3 text-purple-400 text-sm",children:[b,"h ago"]})]},y.id)})})]})})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:"AMM Pool Comparisons (Live XRPL Data)"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Active AMM Pools"}),o.jsx("div",{className:"text-2xl font-bold text-purple-200",children:t.filter(y=>y.amm_pool_created).length})]}),o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Total Liquidity"}),o.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[d.totalLiquidity.toFixed(2)," XRP"]})]}),o.jsxs("div",{className:"glass rounded-lg p-4",children:[o.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Avg Pool Depth"}),o.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[d.avgPoolDepth.toFixed(2)," XRP"]})]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-purple-900/30",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left px-4 py-3 text-purple-300",children:"Token"}),o.jsx("th",{className:"text-right px-4 py-3 text-purple-300",children:"XRP Locked"}),o.jsx("th",{className:"text-right px-4 py-3 text-purple-300",children:"Token Amount"}),o.jsx("th",{className:"text-right px-4 py-3 text-purple-300",children:"Price Impact"}),o.jsx("th",{className:"text-right px-4 py-3 text-purple-300",children:"Pool Share"})]})}),o.jsx("tbody",{children:t.filter(y=>y.amm_pool_created).map((y,x)=>{var A,E;const b=d.totalXRPLocked>0?(y.amm_xrp_amount/d.totalXRPLocked*100).toFixed(2):0,v=y.amm_xrp_amount>0?(1/y.amm_xrp_amount*100).toFixed(4):0;return o.jsxs("tr",{className:"border-t border-purple-500/20 hover:bg-purple-900/20",children:[o.jsx("td",{className:"px-4 py-3 text-purple-200 font-bold",children:y.token_name}),o.jsxs("td",{className:"px-4 py-3 text-right text-purple-200",children:[((A=y.amm_xrp_amount)==null?void 0:A.toFixed(2))||"0.00"," XRP"]}),o.jsx("td",{className:"px-4 py-3 text-right text-purple-300",children:((E=y.amm_asset_amount)==null?void 0:E.toLocaleString())||"0"}),o.jsxs("td",{className:"px-4 py-3 text-right text-purple-400",children:[v,"% per XRP"]}),o.jsxs("td",{className:"px-4 py-3 text-right text-purple-200 font-bold",children:[b,"%"]})]},y.id)})})]})})]})]})}function qX(){return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"glass rounded-lg p-8 border-2 border-purple-500/30",children:[o.jsx("h2",{className:"text-4xl font-bold text-purple-200 mb-2",children:"About MemeKings"}),o.jsx("p",{className:"text-xl text-purple-300",children:"The Premier XRPL Meme Token Factory & Trading Platform"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"glass rounded-lg p-6 border border-green-500/30",children:[o.jsx("div",{className:"text-4xl mb-3",children:"🚀"}),o.jsx("div",{className:"text-2xl font-bold text-green-200 mb-2",children:"Fast"}),o.jsx("p",{className:"text-green-300 text-sm",children:"3-5 second transactions on XRPL with instant finality"})]}),o.jsxs("div",{className:"glass rounded-lg p-6 border border-blue-500/30",children:[o.jsx("div",{className:"text-4xl mb-3",children:"💰"}),o.jsx("div",{className:"text-2xl font-bold text-blue-200 mb-2",children:"Low Cost"}),o.jsx("p",{className:"text-blue-300 text-sm",children:"Minimal blockchain fees + 0.01 XRP platform trading fee"})]}),o.jsxs("div",{className:"glass rounded-lg p-6 border border-purple-500/30",children:[o.jsx("div",{className:"text-4xl mb-3",children:"🔒"}),o.jsx("div",{className:"text-2xl font-bold text-purple-200 mb-2",children:"Secure"}),o.jsx("p",{className:"text-purple-300 text-sm",children:"Battle-tested XRPL with native AMM support"})]})]}),o.jsxs("div",{className:"glass rounded-lg p-8",children:[o.jsx("h3",{className:"text-3xl font-bold text-purple-200 mb-6",children:"Platform Overview"}),o.jsx("p",{className:"text-purple-300 leading-relaxed mb-6",children:"MemeKings is a comprehensive decentralized platform built on the XRP Ledger that enables anyone to create, trade, and profit from meme tokens. We combine the power of XRPL native AMM (Automated Market Maker) functionality with an intuitive interface to provide instant liquidity, transparent pricing, and community-driven token economics."}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-6",children:[o.jsx("h4",{className:"text-xl font-bold text-purple-200 mb-3",children:"What Makes Us Different"}),o.jsxs("ul",{className:"space-y-2 text-purple-300 text-sm",children:[o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-green-400 mt-1",children:"✓"}),o.jsx("span",{children:"Native XRPL Integration - Built directly on XRPL, not a smart contract layer"})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-green-400 mt-1",children:"✓"}),o.jsx("span",{children:"Instant Liquidity - AMM pools created automatically with every token"})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-green-400 mt-1",children:"✓"}),o.jsx("span",{children:"No Gas Wars - Predictable, minimal fees on every transaction"})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-green-400 mt-1",children:"✓"}),o.jsx("span",{children:"10% APY Vault - Earn passive income on held tokens"})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-green-400 mt-1",children:"✓"}),o.jsx("span",{children:"Real-Time Analytics - Live market data and trading insights"})]})]})]}),o.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-6",children:[o.jsx("h4",{className:"text-xl font-bold text-purple-200 mb-3",children:"Key Metrics"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400",children:"Transaction Speed"}),o.jsx("span",{className:"text-purple-200 font-bold",children:"3-5 seconds"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400",children:"Trading Fee"}),o.jsx("span",{className:"text-purple-200 font-bold",children:"0.01 XRP"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400",children:"Vault APY"}),o.jsx("span",{className:"text-green-400 font-bold",children:"10%"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400",children:"Collection Fee"}),o.jsx("span",{className:"text-purple-200 font-bold",children:"0.01 XRP"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-400",children:"Send/Receive Fee"}),o.jsx("span",{className:"text-purple-200 font-bold",children:"0.01 XRP"})]})]})]})]})]}),o.jsxs("div",{className:"glass rounded-lg p-8",children:[o.jsx("h3",{className:"text-3xl font-bold text-purple-200 mb-6",children:"How to Get Started"}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex gap-6 items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-16 h-16 rounded-full bg-gradient-to-br from-purple-600 to-purple-800 flex items-center justify-center text-white text-2xl font-bold",children:"1"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"text-2xl font-bold text-purple-200 mb-2",children:"Create or Connect Your Wallet"}),o.jsx("p",{className:"text-purple-300 mb-3",children:"Navigate to the Setup page to create a new XRPL wallet or connect an existing one. Your wallet is your gateway to the MemeKings ecosystem."}),o.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4",children:[o.jsx("div",{className:"text-blue-200 text-sm font-medium mb-2",children:"💡 Pro Tip:"}),o.jsx("p",{className:"text-blue-300 text-sm",children:"Always securely backup your wallet seed. MemeKings uses client-side encryption - we never have access to your private keys."})]})]})]}),o.jsxs("div",{className:"flex gap-6 items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-16 h-16 rounded-full bg-gradient-to-br from-purple-600 to-purple-800 flex items-center justify-center text-white text-2xl font-bold",children:"2"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"text-2xl font-bold text-purple-200 mb-2",children:"Browse the MemeKings Token Selection"}),o.jsx("p",{className:"text-purple-300 mb-3",children:"Head to the Memes page to explore our curated selection of community-created tokens. Each token has detailed information, price charts, and AMM pool data."}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"glass rounded-lg p-3",children:[o.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"View Token Details"}),o.jsx("p",{className:"text-purple-200 text-sm",children:"Click any token to see full analytics"})]}),o.jsxs("div",{className:"glass rounded-lg p-3",children:[o.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"Check Liquidity"}),o.jsx("p",{className:"text-purple-200 text-sm",children:"See AMM pool depth and volume"})]})]})]})]}),o.jsxs("div",{className:"flex gap-6 items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-16 h-16 rounded-full bg-gradient-to-br from-green-600 to-green-800 flex items-center justify-center text-white text-2xl font-bold",children:"3"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"text-2xl font-bold text-green-200 mb-2",children:"Buy Tokens from Our Selection"}),o.jsx("p",{className:"text-green-300 mb-3",children:"Use the Trade page to buy tokens with XRP. Set your slippage tolerance, review the trade estimate, and execute instantly through the AMM."}),o.jsx("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4",children:o.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-green-200 font-bold",children:"Setup Trustline"}),o.jsx("p",{className:"text-green-400 text-xs mt-1",children:"One-time per token"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-green-200 font-bold",children:"Enter Amount"}),o.jsx("p",{className:"text-green-400 text-xs mt-1",children:"XRP or tokens"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-green-200 font-bold",children:"Execute Trade"}),o.jsx("p",{className:"text-green-400 text-xs mt-1",children:"Instant settlement"})]})]})})]})]}),o.jsxs("div",{className:"flex gap-6 items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-16 h-16 rounded-full bg-gradient-to-br from-red-600 to-red-800 flex items-center justify-center text-white text-2xl font-bold",children:"4"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"text-2xl font-bold text-red-200 mb-2",children:"Sell When Ready"}),o.jsx("p",{className:"text-red-300 mb-3",children:"Exit positions anytime through the Trade page. The AMM ensures instant liquidity - no waiting for buyers or sellers."}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"glass rounded-lg p-3 bg-red-500/10",children:[o.jsx("div",{className:"text-red-400 text-xs mb-1",children:"Market Orders"}),o.jsx("p",{className:"text-red-200 text-sm",children:"Instant execution at current price"})]}),o.jsxs("div",{className:"glass rounded-lg p-3 bg-red-500/10",children:[o.jsx("div",{className:"text-red-400 text-xs mb-1",children:"0.01 XRP Fee"}),o.jsx("p",{className:"text-red-200 text-sm",children:"Flat rate per transaction"})]})]})]})]})]})]}),o.jsxs("div",{className:"glass rounded-lg p-8 border border-yellow-500/30 bg-yellow-500/5",children:[o.jsx("h3",{className:"text-3xl font-bold text-yellow-200 mb-4",children:"⚠️ Community-Based Economics"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-yellow-300 leading-relaxed",children:"MemeKings operates on pure free-market principles. All token values are determined entirely by community demand, trading volume, AMM liquidity depth, and supply circulation."}),o.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-6 mt-4",children:[o.jsx("h4",{className:"text-xl font-bold text-yellow-200 mb-3",children:"🎰 No Crying in the Casino"}),o.jsx("p",{className:"text-yellow-300 text-sm mb-3",children:"This is a decentralized trading platform with real financial risk. Token prices can be highly volatile."}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsxs("div",{className:"bg-red-500/20 border border-red-500/30 rounded p-3 text-center",children:[o.jsx("div",{className:"text-red-200 font-bold mb-1",children:"NO Guarantees"}),o.jsx("p",{className:"text-red-300 text-xs",children:"No promises of returns"})]}),o.jsxs("div",{className:"bg-red-500/20 border border-red-500/30 rounded p-3 text-center",children:[o.jsx("div",{className:"text-red-200 font-bold mb-1",children:"NO Refunds"}),o.jsx("p",{className:"text-red-300 text-xs",children:"All trades are final"})]}),o.jsxs("div",{className:"bg-red-500/20 border border-red-500/30 rounded p-3 text-center",children:[o.jsx("div",{className:"text-red-200 font-bold mb-1",children:"NO Bailouts"}),o.jsx("p",{className:"text-red-300 text-xs",children:"You own your risk"})]})]}),o.jsx("p",{className:"text-yellow-200 font-bold text-center mt-4",children:"⚡ Only trade what you can afford to lose ⚡"})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-purple-600/20 to-blue-600/20 border-2 border-purple-500/50 rounded-lg p-8 text-center",children:[o.jsx("h3",{className:"text-3xl font-bold text-purple-200 mb-3",children:"Ready to Start Trading?"}),o.jsx("p",{className:"text-purple-300 mb-6",children:"Join the MemeKings community and start capitalizing on meme token opportunities"}),o.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("navigate",{detail:"setup"})),className:"btn-primary text-white px-12 py-4 rounded-lg font-bold text-lg hover:scale-105 transition-transform",children:"Create Wallet & Get Started →"})]})]})}function GX(){const[t,e]=z.useState([]),[n,r]=z.useState(null),[s,i]=z.useState("list"),[a,l]=z.useState(""),[c,u]=z.useState(!1),[d,h]=z.useState(null),[f,m]=z.useState(!1),[_,S]=z.useState(!1),[j,y]=z.useState(!1),[x,b]=z.useState(null),[v,A]=z.useState(!1),[E,L]=z.useState(null),[Y,ee]=z.useState("testnet"),[U,G]=z.useState(!1),[ae,he]=z.useState(null),[xe,de]=z.useState(""),[$,re]=z.useState({name:"",address:"",seed:"",purpose:"trading",notes:""});z.useEffect(()=>{X(),D()},[c]);const F=T=>{try{const C=localStorage.getItem("wallets"),H=(C?JSON.parse(C):[]).map(M=>M.id===T.id?{...M,is_favorite:!M.is_favorite}:M);localStorage.setItem("wallets",JSON.stringify(H)),ye.success(T.is_favorite?"Removed from favorites":"Added to favorites"),X()}catch(C){console.error("Error updating favorite:",C),ye.error("Failed to update favorite")}},k=(T,C)=>{navigator.clipboard.writeText(T),ye.success(`${C} copied to clipboard!`)},R=t.filter(T=>T.name.toLowerCase().includes(a.toLowerCase())||T.address.toLowerCase().includes(a.toLowerCase())),D=()=>{const T=localStorage.getItem("connectedWallet");T&&r(JSON.parse(T))},V=T=>{const C={...T,seed:T.encrypted_seed||T.seed};r(C),localStorage.setItem("connectedWallet",JSON.stringify(C)),ye.success(`Connected to ${T.name}`),window.dispatchEvent(new Event("walletConnected"))},se=()=>{r(null),localStorage.removeItem("connectedWallet"),ye.success("Wallet disconnected"),window.dispatchEvent(new Event("walletDisconnected"))},X=async()=>{try{const T=localStorage.getItem("wallets");let C=T?JSON.parse(T):[];c&&(C=C.filter(P=>P.is_favorite)),C.sort((P,H)=>P.is_favorite!==H.is_favorite?H.is_favorite?1:-1:new Date(H.created_at)-new Date(P.created_at)),e(C),q(C)}catch(T){console.error("Error loading wallets:",T),ye.error("Failed to load wallets")}},q=async T=>{var C;try{const P=new Ve.Client("wss://xrplcluster.com");await P.connect();const H=localStorage.getItem("wallets"),M=H?JSON.parse(H):[];for(const K of T)try{const Q=await P.request({command:"account_info",account:K.address,ledger_index:"validated"}),te=parseFloat(Q.result.account_data.Balance)/1e6;if(te!==K.balance_xrp){K.balance_xrp=te;const le=M.findIndex(we=>we.id===K.id);le!==-1&&(M[le].balance_xrp=te)}}catch(Q){if(((C=Q.data)==null?void 0:C.error)==="actNotFound"&&K.balance_xrp!==0){K.balance_xrp=0;const te=M.findIndex(le=>le.id===K.id);te!==-1&&(M[te].balance_xrp=0)}}localStorage.setItem("wallets",JSON.stringify(M)),await P.disconnect(),e([...T])}catch(P){console.error("Error updating wallet balances:",P)}},Z=async()=>{if(!$.name||!$.address){ye.error("Name and address are required");return}try{const T=localStorage.getItem("wallets"),C=T?JSON.parse(T):[];if(x){const P=C.findIndex(H=>H.id===x.id);P!==-1&&(C[P]={...C[P],name:$.name,encrypted_seed:$.seed||x.encrypted_seed,purpose:$.purpose,notes:$.notes,updated_at:new Date().toISOString()}),ye.success("Wallet updated successfully")}else{const P={id:Date.now().toString(),name:$.name,address:$.address,encrypted_seed:$.seed,purpose:$.purpose,notes:$.notes,network:$.address.startsWith("r")?"mainnet":"testnet",is_favorite:!1,balance_xrp:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};C.push(P),ye.success("Wallet added successfully")}localStorage.setItem("wallets",JSON.stringify(C)),m(!1),b(null),re({name:"",address:"",seed:"",purpose:"trading",notes:""}),X()}catch(T){console.error("Error saving wallet:",T),ye.error("Failed to save wallet")}},ue=async T=>{if(confirm("Are you sure you want to delete this wallet?"))try{const C=localStorage.getItem("wallets"),H=(C?JSON.parse(C):[]).filter(M=>M.id!==T);localStorage.setItem("wallets",JSON.stringify(H)),ye.success("Wallet deleted successfully"),X()}catch(C){console.error("Error deleting wallet:",C),ye.error("Failed to delete wallet")}},ne=T=>{b(T),re({name:T.name,address:T.address,seed:"",purpose:T.purpose,notes:T.notes||""}),m(!0)},J=async()=>{A(!0),L(null);try{const T=new Ve.Client(Y==="mainnet"?"wss://xrplcluster.com":"wss://s.altnet.rippletest.net:51233");await T.connect(),ye.success("Connected to XRPL");const C=Ve.Wallet.generate();if(Y==="testnet"){ye.loading("Funding wallet with test XRP...");const P=await T.fundWallet(C);ye.dismiss(),ye.success("Wallet funded with test XRP!")}L({address:C.address,seed:C.seed,publicKey:C.publicKey,privateKey:C.privateKey,network:Y}),await T.disconnect(),ye.success("Wallet generated successfully!")}catch(T){console.error("Error generating wallet:",T),ye.error("Failed to generate wallet: "+T.message)}finally{A(!1)}},N=async T=>{if(!E||!T){ye.error("Please provide a wallet name");return}try{const C=localStorage.getItem("wallets"),P=C?JSON.parse(C):[],H={id:Date.now().toString(),name:T,address:E.address,encrypted_seed:E.seed,purpose:"trading",notes:`Generated on ${E.network}`,network:E.network,is_favorite:!1,balance_xrp:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};P.push(H),localStorage.setItem("wallets",JSON.stringify(P)),ye.success("Wallet saved successfully!"),S(!1),L(null),X()}catch(C){console.error("Error saving wallet:",C),ye.error("Failed to save wallet")}},g=async()=>{var T;if(!xe.trim()){ye.error("Please enter a seed phrase");return}G(!0),he(null);try{const C=Ve.Wallet.fromSeed(xe.trim()),P=new Ve.Client("wss://xrplcluster.com");await P.connect();let H=0;try{const M=await P.request({command:"account_info",account:C.address,ledger_index:"validated"});H=parseFloat(M.result.account_data.Balance)/1e6}catch(M){if(((T=M.data)==null?void 0:T.error)!=="actNotFound")throw M}await P.disconnect(),he({address:C.address,seed:C.seed,publicKey:C.publicKey,balance:H}),ye.success("Wallet imported successfully!")}catch(C){console.error("Error importing wallet:",C),ye.error("Failed to import wallet: Invalid seed phrase or network error")}finally{G(!1)}},I=async T=>{if(!ae||!T){ye.error("Please provide a wallet name");return}try{if(t.find(K=>K.address===ae.address)){ye.error("This wallet address already exists!");return}const P=localStorage.getItem("wallets"),H=P?JSON.parse(P):[],M={id:Date.now().toString(),name:T,address:ae.address,encrypted_seed:ae.seed,purpose:"trading",notes:"Imported from seed",network:"testnet",balance_xrp:ae.balance,is_favorite:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};H.push(M),localStorage.setItem("wallets",JSON.stringify(H)),ye.success("Wallet saved successfully!"),y(!1),he(null),de(""),X()}catch(C){console.error("Error saving imported wallet:",C),ye.error("Failed to save wallet")}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-purple-200",children:"Wallet Management"}),o.jsx("p",{className:"text-purple-400 mt-1",children:"Manage your XRPL wallets"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>i("grid"),className:`px-4 py-2 rounded-lg transition-all ${s==="grid"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"▦ Grid"}),o.jsx("button",{onClick:()=>i("list"),className:`px-4 py-2 rounded-lg transition-all ${s==="list"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"☰ List"})]}),o.jsx("button",{onClick:()=>S(!0),className:"btn-primary text-white px-6 py-2 rounded-lg font-medium",children:"🎲 Generate Wallet"}),o.jsx("button",{onClick:()=>{de(""),he(null),y(!0)},className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium",children:"📥 Import from Seed"}),o.jsx("button",{onClick:()=>{b(null),re({name:"",address:"",seed:"",purpose:"trading",notes:""}),m(!0)},className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium",children:"+ Add Existing"})]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("div",{className:"flex-1 relative",children:o.jsx("input",{type:"text",value:a,onChange:T=>l(T.target.value),placeholder:"🔍 Search wallets by name or address...",className:"input w-full text-purple-200 pl-4"})}),o.jsx("button",{onClick:()=>u(!c),className:`px-6 py-2 rounded-lg font-medium transition-all ${c?"bg-yellow-500 text-white":"glass text-purple-300 hover:text-yellow-400"}`,children:c?"⭐ Favorites Only":"☆ Show All"})]}),s==="grid"?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.map(T=>o.jsxs("div",{className:"glass rounded-lg p-6 space-y-4",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200",children:T.name}),o.jsx("button",{onClick:()=>F(T),className:"text-xl hover:scale-110 transition-transform",children:T.is_favorite?"⭐":"☆"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-medium bg-purple-500/20 text-purple-300",children:T.purpose}),o.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${T.network==="mainnet"?"bg-green-500/20 text-green-300":"bg-blue-500/20 text-blue-300"}`,children:T.network==="mainnet"?"🌐 Mainnet":"🧪 Testnet"})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>ne(T),className:"text-purple-400 hover:text-purple-300",children:"✏️"}),o.jsx("button",{onClick:()=>ue(T.id),className:"text-red-400 hover:text-red-300",children:"🗑️"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"text-purple-400 text-xs mb-1 flex items-center justify-between",children:[o.jsx("span",{children:"Address"}),o.jsx("button",{onClick:()=>k(T.address,"Address"),className:"text-purple-400 hover:text-purple-300",children:"📋"})]}),o.jsx("div",{className:"text-purple-200 text-sm font-mono bg-black/30 p-2 rounded break-all",children:T.address})]}),T.encrypted_seed&&o.jsxs("div",{children:[o.jsxs("div",{className:"text-purple-400 text-xs mb-1 flex items-center justify-between",children:[o.jsx("span",{children:"Seed"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>h(d===T.id?null:T.id),className:"text-purple-400 hover:text-purple-300",children:d===T.id?"🙈":"👁️"}),d===T.id&&o.jsx("button",{onClick:()=>k(T.encrypted_seed,"Seed"),className:"text-purple-400 hover:text-purple-300",children:"📋"})]})]}),o.jsx("div",{className:"text-purple-200 text-sm font-mono bg-black/30 p-2 rounded break-all",children:d===T.id?T.encrypted_seed:"••••••••••••••••"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"Balance"}),o.jsxs("div",{className:"text-purple-200 text-lg font-bold",children:[T.balance_xrp||0," XRP"]})]}),T.notes&&o.jsxs("div",{children:[o.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"Notes"}),o.jsx("div",{className:"text-purple-300 text-sm",children:T.notes})]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-purple-500/20",children:[o.jsxs("div",{className:"text-purple-500 text-xs",children:["Added: ",new Date(T.created_at).toLocaleDateString()]}),(n==null?void 0:n.id)===T.id?o.jsx("button",{onClick:se,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium text-sm",children:"Disconnect"}):o.jsx("button",{onClick:()=>V(T),className:"btn-primary text-white px-4 py-2 rounded-lg font-medium text-sm",children:"Connect"})]})]},T.id))}):o.jsx("div",{className:"glass rounded-lg overflow-hidden",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-purple-900/50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left px-6 py-4 text-purple-300 font-medium",children:"Fav"}),o.jsx("th",{className:"text-left px-6 py-4 text-purple-300 font-medium",children:"Name"}),o.jsx("th",{className:"text-left px-6 py-4 text-purple-300 font-medium",children:"Network"}),o.jsx("th",{className:"text-left px-6 py-4 text-purple-300 font-medium",children:"Address"}),o.jsx("th",{className:"text-left px-6 py-4 text-purple-300 font-medium",children:"Seed"}),o.jsx("th",{className:"text-left px-6 py-4 text-purple-300 font-medium",children:"Purpose"}),o.jsx("th",{className:"text-left px-6 py-4 text-purple-300 font-medium",children:"Balance"}),o.jsx("th",{className:"text-left px-6 py-4 text-purple-300 font-medium",children:"Connection"}),o.jsx("th",{className:"text-left px-6 py-4 text-purple-300 font-medium",children:"Actions"})]})}),o.jsx("tbody",{children:R.map(T=>o.jsxs("tr",{className:"border-t border-purple-500/20 hover:bg-purple-900/20",children:[o.jsx("td",{className:"px-6 py-4",children:o.jsx("button",{onClick:()=>F(T),className:"text-xl hover:scale-110 transition-transform",children:T.is_favorite?"⭐":"☆"})}),o.jsx("td",{className:"px-6 py-4 text-purple-200 font-medium",children:T.name}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${T.network==="mainnet"?"bg-green-500/20 text-green-300":"bg-blue-500/20 text-blue-300"}`,children:T.network==="mainnet"?"🌐":"🧪"})}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-purple-300 font-mono text-sm",children:[T.address.slice(0,15),"..."]}),o.jsx("button",{onClick:()=>k(T.address,"Address"),className:"text-purple-400 hover:text-purple-300",children:"📋"})]})}),o.jsx("td",{className:"px-6 py-4",children:T.encrypted_seed&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-purple-300 font-mono text-sm",children:d===T.id?T.encrypted_seed.slice(0,15)+"...":"••••••••"}),o.jsx("button",{onClick:()=>h(d===T.id?null:T.id),className:"text-purple-400 hover:text-purple-300",children:d===T.id?"🙈":"👁️"}),d===T.id&&o.jsx("button",{onClick:()=>k(T.encrypted_seed,"Seed"),className:"text-purple-400 hover:text-purple-300",children:"📋"})]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-purple-500/20 text-purple-300",children:T.purpose})}),o.jsxs("td",{className:"px-6 py-4 text-purple-200 font-bold",children:[T.balance_xrp||0," XRP"]}),o.jsx("td",{className:"px-6 py-4",children:(n==null?void 0:n.id)===T.id?o.jsx("button",{onClick:se,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm",children:"Disconnect"}):o.jsx("button",{onClick:()=>V(T),className:"btn-primary text-white px-3 py-1 rounded text-sm",children:"Connect"})}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>ne(T),className:"text-purple-400 hover:text-purple-300",children:"✏️"}),o.jsx("button",{onClick:()=>ue(T.id),className:"text-red-400 hover:text-red-300",children:"🗑️"})]})})]},T.id))})]})}),f&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:x?"Edit Wallet":"Add New Wallet"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Wallet Name *"}),o.jsx("input",{type:"text",value:$.name,onChange:T=>re({...$,name:T.target.value}),className:"input w-full text-purple-200",placeholder:"My Trading Wallet"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Wallet Address *"}),o.jsx("input",{type:"text",value:$.address,onChange:T=>re({...$,address:T.target.value}),className:"input w-full text-purple-200 font-mono",placeholder:"rXXXXXXXXXXXXXXXXXXXXXXXXXXXX",disabled:x})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-purple-300 mb-2",children:["Seed ",x?"(leave empty to keep current)":"(optional)"]}),o.jsx("input",{type:"password",value:$.seed,onChange:T=>re({...$,seed:T.target.value}),className:"input w-full text-purple-200 font-mono",placeholder:"sXXXXXXXXXXXXXXXXXXXXXXXXXXXX"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Purpose"}),o.jsxs("select",{value:$.purpose,onChange:T=>re({...$,purpose:T.target.value}),className:"input w-full text-purple-200",children:[o.jsx("option",{value:"trading",children:"Trading"}),o.jsx("option",{value:"issuer",children:"Token Issuer"}),o.jsx("option",{value:"receiver",children:"Token Receiver"}),o.jsx("option",{value:"hodl",children:"HODL"}),o.jsx("option",{value:"other",children:"Other"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Notes"}),o.jsx("textarea",{value:$.notes,onChange:T=>re({...$,notes:T.target.value}),className:"input w-full text-purple-200 h-24",placeholder:"Additional notes about this wallet..."})]})]}),o.jsxs("div",{className:"flex gap-3 mt-6",children:[o.jsxs("button",{onClick:Z,className:"btn-primary text-white px-6 py-2 rounded-lg font-medium flex-1",children:[x?"Update":"Add"," Wallet"]}),o.jsx("button",{onClick:()=>{m(!1),b(null),re({name:"",address:"",seed:"",purpose:"trading",notes:""})},className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium",children:"Cancel"})]})]})}),t.length===0&&o.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[o.jsx("div",{className:"text-6xl mb-4",children:"💼"}),o.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-2",children:"No Wallets Yet"}),o.jsx("p",{className:"text-purple-400",children:"Generate or add your first wallet to get started"})]}),_&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"glass rounded-lg p-8 max-w-2xl w-full",children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:"Generate New XRPL Wallet"}),E?o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsx("div",{className:"text-green-400 text-xl",children:"✓"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium text-green-300 mb-1",children:"Wallet Generated Successfully!"}),o.jsxs("div",{className:"text-green-200/80 text-sm",children:["Your new ",E.network," wallet has been created. Save your seed phrase securely!"]})]})]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-400 text-sm mb-2",children:"Wallet Address"}),o.jsx("div",{className:"input text-purple-200 font-mono text-sm break-all",children:E.address})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-400 text-sm mb-2",children:"Seed Phrase (Secret Key)"}),o.jsx("div",{className:"input text-red-400 font-mono text-sm break-all bg-red-500/10 border-red-500/30",children:E.seed}),o.jsx("div",{className:"text-red-400 text-xs mt-2",children:"⚠️ Keep this secret! Anyone with this can access your wallet."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-400 text-sm mb-2",children:"Public Key"}),o.jsx("div",{className:"input text-purple-300 font-mono text-xs break-all",children:E.publicKey})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-400 text-sm mb-2",children:"Network"}),o.jsx("div",{className:"input text-purple-200 uppercase",children:E.network})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Wallet Name *"}),o.jsx("input",{type:"text",id:"walletName",className:"input w-full text-purple-200",placeholder:"My Trading Wallet"})]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>{const T=document.getElementById("walletName").value;N(T)},className:"btn-primary text-white px-6 py-3 rounded-lg font-medium flex-1",children:"💾 Save Wallet"}),o.jsx("button",{onClick:()=>{confirm("Are you sure? Make sure you've saved your seed phrase!")&&(S(!1),L(null))},className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium",children:"Close"})]}),o.jsx("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-lg p-4",children:o.jsxs("div",{className:"text-purple-300 text-sm",children:[o.jsx("div",{className:"font-medium mb-2",children:"📋 Next Steps:"}),o.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[o.jsx("li",{children:"Copy and securely store your seed phrase"}),o.jsx("li",{children:"Save this wallet to your list"}),E.network==="mainnet"&&o.jsx("li",{children:"Send at least 10 XRP to activate the wallet"}),o.jsx("li",{children:"Start using your new wallet!"})]})]})})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-3 font-medium",children:"Select Network"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("button",{onClick:()=>ee("testnet"),className:`p-4 rounded-lg border-2 transition-all ${Y==="testnet"?"border-purple-500 bg-purple-500/20":"border-purple-500/30 bg-purple-900/20 hover:border-purple-500/50"}`,children:[o.jsx("div",{className:"text-xl mb-2",children:"🧪"}),o.jsx("div",{className:"font-bold text-purple-200",children:"Testnet"}),o.jsx("div",{className:"text-sm text-purple-400 mt-1",children:"Free test XRP included"})]}),o.jsxs("button",{onClick:()=>ee("mainnet"),className:`p-4 rounded-lg border-2 transition-all ${Y==="mainnet"?"border-purple-500 bg-purple-500/20":"border-purple-500/30 bg-purple-900/20 hover:border-purple-500/50"}`,children:[o.jsx("div",{className:"text-xl mb-2",children:"🌐"}),o.jsx("div",{className:"font-bold text-purple-200",children:"Mainnet"}),o.jsx("div",{className:"text-sm text-purple-400 mt-1",children:"Production network"})]})]})]}),o.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsx("div",{className:"text-yellow-400 text-xl",children:"⚠️"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium text-yellow-300 mb-1",children:"Important"}),o.jsx("div",{className:"text-yellow-200/80 text-sm",children:Y==="testnet"?"Testnet wallets receive free test XRP automatically. This is for testing only.":"Mainnet wallets require real XRP to activate. Make sure to securely save your seed phrase."})]})]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:J,disabled:v,className:"btn-primary text-white px-6 py-3 rounded-lg font-medium flex-1 disabled:opacity-50",children:v?"🔄 Generating...":"🎲 Generate Wallet"}),o.jsx("button",{onClick:()=>{S(!1),L(null)},className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium",disabled:v,children:"Cancel"})]})]})]})}),j&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:()=>y(!1),children:o.jsxs("div",{className:"glass rounded-lg max-w-2xl w-full p-8",onClick:T=>T.stopPropagation(),children:[o.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:"Import Wallet from Seed"}),ae?o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsx("div",{className:"text-green-400 text-2xl",children:"✓"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-green-400 font-medium mb-1",children:"Wallet Imported Successfully!"}),o.jsx("div",{className:"text-green-300 text-sm",children:"Please review the details and save this wallet."})]})]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-400 text-sm mb-2",children:"Wallet Address"}),o.jsxs("div",{className:"input text-purple-200 font-mono break-all flex items-center justify-between gap-2",children:[o.jsx("span",{children:ae.address}),o.jsx("button",{onClick:()=>k(ae.address,"Address"),className:"btn text-purple-300 px-2 py-1 text-xs rounded",children:"📋"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-400 text-sm mb-2",children:"Public Key"}),o.jsx("div",{className:"input text-purple-300 font-mono text-xs break-all",children:ae.publicKey})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-400 text-sm mb-2",children:"Current Balance"}),o.jsxs("div",{className:"input text-purple-200",children:[ae.balance," XRP"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Wallet Name *"}),o.jsx("input",{type:"text",id:"importWalletName",className:"input w-full text-purple-200",placeholder:"My Imported Wallet"})]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>{const T=document.getElementById("importWalletName").value;I(T)},className:"btn-primary text-white px-6 py-3 rounded-lg font-medium flex-1",children:"💾 Save Wallet"}),o.jsx("button",{onClick:()=>{y(!1),he(null),de("")},className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium",children:"Cancel"})]}),o.jsx("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-lg p-4",children:o.jsxs("div",{className:"text-purple-300 text-sm",children:[o.jsx("div",{className:"font-medium mb-2",children:"📋 Next Steps:"}),o.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[o.jsx("li",{children:"Verify the wallet address and balance"}),o.jsx("li",{children:"Give your wallet a memorable name"}),o.jsx("li",{children:"Save the wallet to your list"}),o.jsx("li",{children:"Start managing your tokens!"})]})]})})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsx("div",{className:"text-yellow-400 text-xl",children:"⚠️"}),o.jsxs("div",{className:"flex-1 text-yellow-200 text-sm",children:[o.jsx("div",{className:"font-medium mb-1",children:"Security Warning"}),o.jsx("div",{children:"Never share your seed phrase with anyone. Make sure you're in a secure environment."})]})]})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Seed Phrase *"}),o.jsx("textarea",{value:xe,onChange:T=>de(T.target.value),className:"input w-full text-purple-200 font-mono h-24",placeholder:"sXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",autoFocus:!0}),o.jsx("p",{className:"text-purple-400 text-xs mt-1",children:"Enter your XRPL seed phrase (starts with 's')"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:g,disabled:U||!xe.trim(),className:"btn-primary text-white px-6 py-3 rounded-lg font-medium flex-1 disabled:opacity-50",children:U?"🔄 Importing...":"📥 Import Wallet"}),o.jsx("button",{onClick:()=>{y(!1),de("")},disabled:U,className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium disabled:opacity-50",children:"Cancel"})]}),o.jsx("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-lg p-4",children:o.jsxs("div",{className:"text-purple-300 text-sm",children:[o.jsx("div",{className:"font-medium mb-2",children:"ℹ️ About Importing"}),o.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[o.jsx("li",{children:"This will import an existing XRPL wallet using its seed phrase"}),o.jsx("li",{children:"The wallet will be checked on the testnet network"}),o.jsx("li",{children:"Your seed phrase is securely stored in the database"}),o.jsx("li",{children:"You'll get full control over the imported wallet"})]})]})})]})]})})]})}function YX(){const[t,e]=z.useState([]),[n,r]=z.useState([]),[s,i]=z.useState([]),[a,l]=z.useState(""),[c,u]=z.useState("");z.useState(null),z.useEffect(()=>{d()},[]);const d=async()=>{var y,x;try{const[b,v,A]=await Promise.all([Pe.from("meme_tokens").select("*").order("created_at",{ascending:!1}),Pe.from("wallets").select("*").order("created_at",{ascending:!1}),Pe.from("activity_logs").select("*").order("created_at",{ascending:!1})]);if(b.error)throw b.error;if(v.error)throw v.error;if(A.error)throw A.error;e(b.data||[]),r(v.data||[]),i(A.data||[]),v.data&&v.data.length>=2&&(l(((y=v.data[0])==null?void 0:y.id)||""),u(((x=v.data[1])==null?void 0:x.id)||""))}catch(b){console.error("Error loading data:",b),ye.error("Failed to load data")}},h=async()=>{try{const y={tokens:t,wallets:n.map(A=>({...A,encrypted_seed:A.encrypted_seed?"***ENCRYPTED***":null})),activityLogs:s,settings:{issuer:a,receiver:c},stats:{totalTokens:t.length,totalWallets:n.length,totalActivities:s.length,activePools:t.filter(A=>A.amm_pool_created).length,totalXRPLocked:t.reduce((A,E)=>A+(E.amm_xrp_amount||0),0)},exportDate:new Date().toISOString(),version:"2.0"},x=new Blob([JSON.stringify(y,null,2)],{type:"application/json"}),b=URL.createObjectURL(x),v=document.createElement("a");v.href=b,v.download=`memekings-export-${Date.now()}.json`,document.body.appendChild(v),v.click(),document.body.removeChild(v),URL.revokeObjectURL(b),ye.success("Data exported successfully!")}catch(y){console.error("Error exporting data:",y),ye.error("Failed to export data")}},f=()=>{try{const y=["Token Name","Issuer Address","Supply","Market Cap (XRP)","XRP Locked","Status","Created"],x=t.map(L=>{const Y=L.amm_pool_created&&L.amm_xrp_amount&&L.amm_asset_amount?(L.supply*(L.amm_xrp_amount/L.amm_asset_amount)).toFixed(4):"0";return[L.token_name,L.issuer_address,L.supply,Y,L.amm_xrp_amount||0,L.amm_pool_created?"Active":"Pending",new Date(L.created_at).toLocaleString()]}),b=[y,...x].map(L=>L.join(",")).join(`
`),v=new Blob([b],{type:"text/csv"}),A=URL.createObjectURL(v),E=document.createElement("a");E.href=A,E.download=`memekings-tokens-${Date.now()}.csv`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(A),ye.success("Tokens exported to CSV!")}catch(y){console.error("Error exporting CSV:",y),ye.error("Failed to export CSV")}},m=async y=>{var b,v;const x=y.target.files[0];if(x)try{const A=await x.text(),E=JSON.parse(A);if(!E.tokens)throw new Error("Invalid data format - missing tokens");const L=((b=E.activityLogs)==null?void 0:b.length)||0,Y=((v=E.wallets)==null?void 0:v.length)||0;if(!confirm(`Import Data Summary:
• ${E.tokens.length} tokens
• ${Y} wallets
• ${L} activity logs

This will add to your existing data. Continue?`))return;const U=[];E.tokens&&E.tokens.length>0&&U.push(Pe.from("meme_tokens").upsert(E.tokens,{onConflict:"id"})),E.wallets&&E.wallets.length>0&&U.push(Pe.from("wallets").upsert(E.wallets,{onConflict:"id"})),E.activityLogs&&E.activityLogs.length>0&&U.push(Pe.from("activity_logs").upsert(E.activityLogs,{onConflict:"id"}));const ae=(await Promise.all(U)).filter(he=>he.error);if(ae.length>0)throw new Error("Some imports failed: "+ae.map(he=>he.error.message).join(", "));ye.success(`Imported successfully!
${E.tokens.length} tokens, ${Y} wallets, ${L} activities`),d()}catch(A){console.error("Error importing data:",A),ye.error("Failed to import data: "+A.message)}},_=async()=>{if(!(!confirm(`WARNING: This will delete ALL tokens, wallets, and activity logs!

This action cannot be undone. Are you sure?`)||!confirm("Are you ABSOLUTELY sure? This will delete everything!")))try{await Promise.all([Pe.from("meme_tokens").delete().neq("id","00000000-0000-0000-0000-000000000000"),Pe.from("wallets").delete().neq("id","00000000-0000-0000-0000-000000000000"),Pe.from("activity_logs").delete().neq("id","00000000-0000-0000-0000-000000000000")]),localStorage.clear(),ye.success("All data cleared!"),d()}catch(b){console.error("Error clearing data:",b),ye.error("Failed to clear data")}},S=n.find(y=>y.id===a),j=n.find(y=>y.id===c);return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-purple-200",children:"Setup & Configuration"}),o.jsx("p",{className:"text-purple-400 mt-1",children:"Manage your MEMEKINGS settings and data"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Token Creation Wallets"}),o.jsx("p",{className:"text-purple-400 text-sm mb-4",children:"Default wallets used for automatic token creation"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Issuer Wallet (Creates Tokens)"}),o.jsx("div",{className:"input w-full text-purple-400 bg-purple-900/20 cursor-not-allowed",children:S?`${S.address}`:"No issuer wallet set"}),S&&o.jsxs("div",{className:"mt-2 text-xs text-purple-400",children:["Balance: ",S.balance_xrp||0," XRP"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-purple-300 mb-2",children:"Receiver Wallet (Receives Tokens)"}),o.jsx("div",{className:"input w-full text-purple-400 bg-purple-900/20 cursor-not-allowed",children:j?`${j.address}`:"No receiver wallet set"}),j&&o.jsxs("div",{className:"mt-2 text-xs text-purple-400",children:["Balance: ",j.balance_xrp||0," XRP"]})]}),n.length<2&&o.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsx("div",{className:"text-yellow-400 text-xl",children:"⚠️"}),o.jsx("div",{className:"flex-1 text-yellow-200 text-sm",children:"You need at least 2 wallets to create tokens. Go to Wallet Management to add or generate wallets."})]})})]})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Data Statistics"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-300",children:"Total Tokens"}),o.jsx("span",{className:"text-2xl font-bold text-purple-200",children:t.length})]})}),o.jsx("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-300",children:"Total Wallets"}),o.jsx("span",{className:"text-2xl font-bold text-purple-200",children:n.length})]})}),o.jsx("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-300",children:"Active Pools"}),o.jsx("span",{className:"text-2xl font-bold text-purple-200",children:t.filter(y=>y.amm_pool_created).length})]})}),o.jsx("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-300",children:"Total XRP Locked"}),o.jsx("span",{className:"text-2xl font-bold text-purple-200",children:t.reduce((y,x)=>y+(x.amm_xrp_amount||0),0).toFixed(2)})]})}),o.jsx("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-purple-300",children:"Activity Logs"}),o.jsx("span",{className:"text-2xl font-bold text-purple-200",children:s.length})]})})]})]})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Export Data"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx("button",{onClick:h,className:"btn-primary text-white px-6 py-3 rounded-lg font-medium",children:"📦 Export All Data (JSON)"}),o.jsx("button",{onClick:f,className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium",children:"📊 Export Tokens (CSV)"}),o.jsx("button",{onClick:()=>{const y=JSON.stringify(n,null,2),x=new Blob([y],{type:"application/json"}),b=URL.createObjectURL(x),v=document.createElement("a");v.href=b,v.download=`wallets-${Date.now()}.json`,v.click(),URL.revokeObjectURL(b),ye.success("Wallets exported!")},className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium",children:"💼 Export Wallets (JSON)"}),o.jsx("button",{onClick:()=>{const y=JSON.stringify(s,null,2),x=new Blob([y],{type:"application/json"}),b=URL.createObjectURL(x),v=document.createElement("a");v.href=b,v.download=`activity-logs-${Date.now()}.json`,v.click(),URL.revokeObjectURL(b),ye.success("Activity logs exported!")},className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium",children:"📜 Export Activity Logs (JSON)"})]}),o.jsx("p",{className:"text-purple-400 text-sm mt-3",children:'Export your data for backup or migration purposes. "Export All Data" includes everything.'})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Import Data"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{children:o.jsxs("label",{className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium cursor-pointer inline-block",children:["📥 Import JSON File",o.jsx("input",{type:"file",accept:".json",onChange:m,className:"hidden"})]})}),o.jsx("p",{className:"text-purple-400 text-sm",children:"Import previously exported data. This will add to your existing data without deleting anything."})]})]}),o.jsxs("div",{className:"glass rounded-lg p-6 border-2 border-red-500/30",children:[o.jsx("h3",{className:"text-xl font-bold text-red-400 mb-4",children:"Danger Zone"}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"bg-red-500/10 rounded-lg p-4",children:[o.jsx("h4",{className:"text-red-300 font-bold mb-2",children:"Clear All Data"}),o.jsx("p",{className:"text-red-200/80 text-sm mb-3",children:"This will permanently delete all tokens, wallets, and settings. This action cannot be undone!"}),o.jsx("button",{onClick:_,className:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg font-medium",children:"🗑️ Clear All Data"})]})})]}),o.jsxs("div",{className:"glass rounded-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Local Storage Info"}),o.jsxs("div",{className:"space-y-2 text-sm text-purple-300",children:[o.jsx("p",{children:"• Wallet settings are saved locally in your browser"}),o.jsx("p",{children:"• Token and wallet data is stored in Supabase database"}),o.jsx("p",{children:"• Export your data regularly for backup"}),o.jsx("p",{children:"• Clearing browser data will remove local settings only"})]})]})]})}function JX(){const[t,e]=z.useState("dashboard");z.useEffect(()=>{const r=()=>{e("trade")};return window.addEventListener("navigateToTrade",r),()=>{window.removeEventListener("navigateToTrade",r)}},[]);const n=()=>{switch(t){case"dashboard":return o.jsx(pS,{});case"memes":return o.jsx(PX,{});case"pools":return o.jsx(RX,{});case"trade":return o.jsx(DX,{});case"bottrader":return o.jsx(UX,{});case"vault":return o.jsx(HX,{});case"mytokens":return o.jsx(XX,{});case"analytics":return o.jsx(KX,{});case"about":return o.jsx(qX,{});case"wallets":return o.jsx(GX,{});case"setup":return o.jsx(YX,{});default:return o.jsx(pS,{})}};return o.jsxs("div",{className:"min-h-screen",children:[o.jsx(FT,{position:"top-right",toastOptions:{style:{background:"rgba(88, 28, 135, 0.9)",color:"#e9d5ff",border:"1px solid rgba(139, 92, 246, 0.3)",backdropFilter:"blur(10px)"},success:{iconTheme:{primary:"#a78bfa",secondary:"#581c87"}},error:{iconTheme:{primary:"#f87171",secondary:"#581c87"}}}}),o.jsx(i8,{currentPage:t,onNavigate:e}),o.jsx("div",{className:"lg:ml-64 pt-20 lg:pt-6 p-4 sm:p-6 lg:p-8",children:o.jsx("div",{className:"w-full mx-auto",children:n()})})]})}zg.createRoot(document.getElementById("root")).render(o.jsxs(rk.StrictMode,{children:[o.jsx(JX,{}),o.jsx(FT,{position:"bottom-right",toastOptions:{duration:5e3,style:{background:"#1e1b4b",color:"#e9d5ff",border:"1px solid #7c3aed"},success:{iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{duration:8e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]}));
