var u4=Object.defineProperty;var h4=(t,e,r)=>e in t?u4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var n_=(t,e,r)=>(h4(t,typeof e!="symbol"?e+"":e,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Ce=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function p4(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function f4(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var i=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(r,s,i.get?i:{enumerable:!0,get:function(){return t[s]}})}),r}var B2={exports:{}},Hf={},$2={exports:{}},Ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vu=Symbol.for("react.element"),m4=Symbol.for("react.portal"),g4=Symbol.for("react.fragment"),x4=Symbol.for("react.strict_mode"),y4=Symbol.for("react.profiler"),v4=Symbol.for("react.provider"),b4=Symbol.for("react.context"),w4=Symbol.for("react.forward_ref"),_4=Symbol.for("react.suspense"),N4=Symbol.for("react.memo"),S4=Symbol.for("react.lazy"),i_=Symbol.iterator;function j4(t){return t===null||typeof t!="object"?null:(t=i_&&t[i_]||t["@@iterator"],typeof t=="function"?t:null)}var U2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V2=Object.assign,H2={};function Bc(t,e,r){this.props=t,this.context=e,this.refs=H2,this.updater=r||U2}Bc.prototype.isReactComponent={};Bc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Bc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function z2(){}z2.prototype=Bc.prototype;function zv(t,e,r){this.props=t,this.context=e,this.refs=H2,this.updater=r||U2}var Xv=zv.prototype=new z2;Xv.constructor=zv;V2(Xv,Bc.prototype);Xv.isPureReactComponent=!0;var a_=Array.isArray,X2=Object.prototype.hasOwnProperty,Wv={current:null},W2={key:!0,ref:!0,__self:!0,__source:!0};function q2(t,e,r){var s,i={},a=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)X2.call(e,s)&&!W2.hasOwnProperty(s)&&(i[s]=e[s]);var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(t&&t.defaultProps)for(s in l=t.defaultProps,l)i[s]===void 0&&(i[s]=l[s]);return{$$typeof:Vu,type:t,key:a,ref:o,props:i,_owner:Wv.current}}function E4(t,e){return{$$typeof:Vu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qv(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vu}function T4(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var o_=/\/+/g;function Km(t,e){return typeof t=="object"&&t!==null&&t.key!=null?T4(""+t.key):e.toString(36)}function jp(t,e,r,s,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Vu:case m4:o=!0}}if(o)return o=t,i=i(o),t=s===""?"."+Km(o,0):s,a_(i)?(r="",t!=null&&(r=t.replace(o_,"$&/")+"/"),jp(i,e,r,"",function(d){return d})):i!=null&&(qv(i)&&(i=E4(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(o_,"$&/")+"/")+t)),e.push(i)),1;if(o=0,s=s===""?".":s+":",a_(t))for(var l=0;l<t.length;l++){a=t[l];var c=s+Km(a,l);o+=jp(a,e,r,c,i)}else if(c=j4(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=s+Km(a,l++),o+=jp(a,e,r,c,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function wh(t,e,r){if(t==null)return t;var s=[],i=0;return jp(t,s,"","",function(a){return e.call(r,a,i++)}),s}function C4(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var is={current:null},Ep={transition:null},k4={ReactCurrentDispatcher:is,ReactCurrentBatchConfig:Ep,ReactCurrentOwner:Wv};function K2(){throw Error("act(...) is not supported in production builds of React.")}Ct.Children={map:wh,forEach:function(t,e,r){wh(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return wh(t,function(){e++}),e},toArray:function(t){return wh(t,function(e){return e})||[]},only:function(t){if(!qv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ct.Component=Bc;Ct.Fragment=g4;Ct.Profiler=y4;Ct.PureComponent=zv;Ct.StrictMode=x4;Ct.Suspense=_4;Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k4;Ct.act=K2;Ct.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=V2({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Wv.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)X2.call(e,c)&&!W2.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:Vu,type:t.type,key:i,ref:a,props:s,_owner:o}};Ct.createContext=function(t){return t={$$typeof:b4,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:v4,_context:t},t.Consumer=t};Ct.createElement=q2;Ct.createFactory=function(t){var e=q2.bind(null,t);return e.type=t,e};Ct.createRef=function(){return{current:null}};Ct.forwardRef=function(t){return{$$typeof:w4,render:t}};Ct.isValidElement=qv;Ct.lazy=function(t){return{$$typeof:S4,_payload:{_status:-1,_result:t},_init:C4}};Ct.memo=function(t,e){return{$$typeof:N4,type:t,compare:e===void 0?null:e}};Ct.startTransition=function(t){var e=Ep.transition;Ep.transition={};try{t()}finally{Ep.transition=e}};Ct.unstable_act=K2;Ct.useCallback=function(t,e){return is.current.useCallback(t,e)};Ct.useContext=function(t){return is.current.useContext(t)};Ct.useDebugValue=function(){};Ct.useDeferredValue=function(t){return is.current.useDeferredValue(t)};Ct.useEffect=function(t,e){return is.current.useEffect(t,e)};Ct.useId=function(){return is.current.useId()};Ct.useImperativeHandle=function(t,e,r){return is.current.useImperativeHandle(t,e,r)};Ct.useInsertionEffect=function(t,e){return is.current.useInsertionEffect(t,e)};Ct.useLayoutEffect=function(t,e){return is.current.useLayoutEffect(t,e)};Ct.useMemo=function(t,e){return is.current.useMemo(t,e)};Ct.useReducer=function(t,e,r){return is.current.useReducer(t,e,r)};Ct.useRef=function(t){return is.current.useRef(t)};Ct.useState=function(t){return is.current.useState(t)};Ct.useSyncExternalStore=function(t,e,r){return is.current.useSyncExternalStore(t,e,r)};Ct.useTransition=function(){return is.current.useTransition()};Ct.version="18.3.1";$2.exports=Ct;var T=$2.exports;const Td=p4(T);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A4=T,P4=Symbol.for("react.element"),R4=Symbol.for("react.fragment"),O4=Object.prototype.hasOwnProperty,I4=A4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,L4={key:!0,ref:!0,__self:!0,__source:!0};function G2(t,e,r){var s,i={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)O4.call(e,s)&&!L4.hasOwnProperty(s)&&(i[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)i[s]===void 0&&(i[s]=e[s]);return{$$typeof:P4,type:t,key:a,ref:o,props:i,_owner:I4.current}}Hf.Fragment=R4;Hf.jsx=G2;Hf.jsxs=G2;B2.exports=Hf;var n=B2.exports,Gx={},Y2={exports:{}},Xs={},J2={exports:{}},Q2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ee,H){var I=ee.length;ee.push(H);e:for(;0<I;){var K=I-1>>>1,re=ee[K];if(0<i(re,H))ee[K]=H,ee[I]=re,I=K;else break e}}function r(ee){return ee.length===0?null:ee[0]}function s(ee){if(ee.length===0)return null;var H=ee[0],I=ee.pop();if(I!==H){ee[0]=I;e:for(var K=0,re=ee.length,z=re>>>1;K<z;){var O=2*(K+1)-1,V=ee[O],ne=O+1,pe=ee[ne];if(0>i(V,I))ne<re&&0>i(pe,V)?(ee[K]=pe,ee[ne]=I,K=ne):(ee[K]=V,ee[O]=I,K=O);else if(ne<re&&0>i(pe,I))ee[K]=pe,ee[ne]=I,K=ne;else break e}}return H}function i(ee,H){var I=ee.sortIndex-H.sortIndex;return I!==0?I:ee.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,p=3,f=!1,m=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(ee){for(var H=r(d);H!==null;){if(H.callback===null)s(d);else if(H.startTime<=ee)s(d),H.sortIndex=H.expirationTime,e(c,H);else break;H=r(d)}}function w(ee){if(v=!1,g(ee),!m)if(r(c)!==null)m=!0,Z(S);else{var H=r(d);H!==null&&he(w,H.startTime-ee)}}function S(ee,H){m=!1,v&&(v=!1,b(B),B=-1),f=!0;var I=p;try{for(g(H),h=r(c);h!==null&&(!(h.expirationTime>H)||ee&&!q());){var K=h.callback;if(typeof K=="function"){h.callback=null,p=h.priorityLevel;var re=K(h.expirationTime<=H);H=t.unstable_now(),typeof re=="function"?h.callback=re:h===r(c)&&s(c),g(H)}else s(c);h=r(c)}if(h!==null)var z=!0;else{var O=r(d);O!==null&&he(w,O.startTime-H),z=!1}return z}finally{h=null,p=I,f=!1}}var _=!1,A=null,B=-1,Q=5,U=-1;function q(){return!(t.unstable_now()-U<Q)}function de(){if(A!==null){var ee=t.unstable_now();U=ee;var H=!0;try{H=A(!0,ee)}finally{H?me():(_=!1,A=null)}}else _=!1}var me;if(typeof y=="function")me=function(){y(de)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,G=ye.port2;ye.port1.onmessage=de,me=function(){G.postMessage(null)}}else me=function(){x(de,0)};function Z(ee){A=ee,_||(_=!0,me())}function he(ee,H){B=x(function(){ee(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,Z(S))},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(ee){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var I=p;p=H;try{return ee()}finally{p=I}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ee,H){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var I=p;p=ee;try{return H()}finally{p=I}},t.unstable_scheduleCallback=function(ee,H,I){var K=t.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?K+I:K):I=K,ee){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=I+re,ee={id:u++,callback:H,priorityLevel:ee,startTime:I,expirationTime:re,sortIndex:-1},I>K?(ee.sortIndex=I,e(d,ee),r(c)===null&&ee===r(d)&&(v?(b(B),B=-1):v=!0,he(w,I-K))):(ee.sortIndex=re,e(c,ee),m||f||(m=!0,Z(S))),ee},t.unstable_shouldYield=q,t.unstable_wrapCallback=function(ee){var H=p;return function(){var I=p;p=H;try{return ee.apply(this,arguments)}finally{p=I}}}})(Q2);J2.exports=Q2;var M4=J2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F4=T,zs=M4;function Xe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Z2=new Set,du={};function dl(t,e){_c(t,e),_c(t+"Capture",e)}function _c(t,e){for(du[t]=e,t=0;t<e.length;t++)Z2.add(e[t])}var Li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yx=Object.prototype.hasOwnProperty,D4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,l_={},c_={};function B4(t){return Yx.call(c_,t)?!0:Yx.call(l_,t)?!1:D4.test(t)?c_[t]=!0:(l_[t]=!0,!1)}function $4(t,e,r,s){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function U4(t,e,r,s){if(e===null||typeof e>"u"||$4(t,e,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function as(t,e,r,s,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Hr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Hr[t]=new as(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Hr[e]=new as(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Hr[t]=new as(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Hr[t]=new as(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Hr[t]=new as(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Hr[t]=new as(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Hr[t]=new as(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Hr[t]=new as(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Hr[t]=new as(t,5,!1,t.toLowerCase(),null,!1,!1)});var Kv=/[\-:]([a-z])/g;function Gv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Kv,Gv);Hr[e]=new as(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Kv,Gv);Hr[e]=new as(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Kv,Gv);Hr[e]=new as(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Hr[t]=new as(t,1,!1,t.toLowerCase(),null,!1,!1)});Hr.xlinkHref=new as("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Hr[t]=new as(t,1,!1,t.toLowerCase(),null,!0,!0)});function Yv(t,e,r,s){var i=Hr.hasOwnProperty(e)?Hr[e]:null;(i!==null?i.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(U4(e,r,i,s)&&(r=null),s||i===null?B4(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,s=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,s?t.setAttributeNS(s,e,r):t.setAttribute(e,r))))}var Ui=F4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_h=Symbol.for("react.element"),Jl=Symbol.for("react.portal"),Ql=Symbol.for("react.fragment"),Jv=Symbol.for("react.strict_mode"),Jx=Symbol.for("react.profiler"),ej=Symbol.for("react.provider"),tj=Symbol.for("react.context"),Qv=Symbol.for("react.forward_ref"),Qx=Symbol.for("react.suspense"),Zx=Symbol.for("react.suspense_list"),Zv=Symbol.for("react.memo"),na=Symbol.for("react.lazy"),rj=Symbol.for("react.offscreen"),d_=Symbol.iterator;function td(t){return t===null||typeof t!="object"?null:(t=d_&&t[d_]||t["@@iterator"],typeof t=="function"?t:null)}var or=Object.assign,Gm;function Cd(t){if(Gm===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Gm=e&&e[1]||""}return`
`+Gm+t}var Ym=!1;function Jm(t,e){if(!t||Ym)return"";Ym=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var s=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){s=d}t.call(e.prototype)}else{try{throw Error()}catch(d){s=d}t()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=s.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Ym=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Cd(t):""}function V4(t){switch(t.tag){case 5:return Cd(t.type);case 16:return Cd("Lazy");case 13:return Cd("Suspense");case 19:return Cd("SuspenseList");case 0:case 2:case 15:return t=Jm(t.type,!1),t;case 11:return t=Jm(t.type.render,!1),t;case 1:return t=Jm(t.type,!0),t;default:return""}}function ey(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ql:return"Fragment";case Jl:return"Portal";case Jx:return"Profiler";case Jv:return"StrictMode";case Qx:return"Suspense";case Zx:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case tj:return(t.displayName||"Context")+".Consumer";case ej:return(t._context.displayName||"Context")+".Provider";case Qv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zv:return e=t.displayName||null,e!==null?e:ey(t.type)||"Memo";case na:e=t._payload,t=t._init;try{return ey(t(e))}catch{}}return null}function H4(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ey(e);case 8:return e===Jv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Pa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function sj(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function z4(t){var e=sj(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){s=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Nh(t){t._valueTracker||(t._valueTracker=z4(t))}function nj(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),s="";return t&&(s=sj(t)?t.checked?"true":"false":t.value),t=s,t!==r?(e.setValue(t),!0):!1}function Gp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ty(t,e){var r=e.checked;return or({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function u_(t,e){var r=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;r=Pa(e.value!=null?e.value:r),t._wrapperState={initialChecked:s,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ij(t,e){e=e.checked,e!=null&&Yv(t,"checked",e,!1)}function ry(t,e){ij(t,e);var r=Pa(e.value),s=e.type;if(r!=null)s==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?sy(t,e.type,r):e.hasOwnProperty("defaultValue")&&sy(t,e.type,Pa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function h_(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function sy(t,e,r){(e!=="number"||Gp(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var kd=Array.isArray;function hc(t,e,r,s){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&s&&(t[r].defaultSelected=!0)}else{for(r=""+Pa(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,s&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ny(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Xe(91));return or({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function p_(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Xe(92));if(kd(r)){if(1<r.length)throw Error(Xe(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Pa(r)}}function aj(t,e){var r=Pa(e.value),s=Pa(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),s!=null&&(t.defaultValue=""+s)}function f_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function oj(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function iy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?oj(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Sh,lj=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,s,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,s,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Sh=Sh||document.createElement("div"),Sh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Sh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function uu(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Dd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},X4=["Webkit","ms","Moz","O"];Object.keys(Dd).forEach(function(t){X4.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Dd[e]=Dd[t]})});function cj(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Dd.hasOwnProperty(t)&&Dd[t]?(""+e).trim():e+"px"}function dj(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var s=r.indexOf("--")===0,i=cj(r,e[r],s);r==="float"&&(r="cssFloat"),s?t.setProperty(r,i):t[r]=i}}var W4=or({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ay(t,e){if(e){if(W4[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Xe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Xe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Xe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Xe(62))}}function oy(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ly=null;function eb(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var cy=null,pc=null,fc=null;function m_(t){if(t=Xu(t)){if(typeof cy!="function")throw Error(Xe(280));var e=t.stateNode;e&&(e=Kf(e),cy(t.stateNode,t.type,e))}}function uj(t){pc?fc?fc.push(t):fc=[t]:pc=t}function hj(){if(pc){var t=pc,e=fc;if(fc=pc=null,m_(t),e)for(t=0;t<e.length;t++)m_(e[t])}}function pj(t,e){return t(e)}function fj(){}var Qm=!1;function mj(t,e,r){if(Qm)return t(e,r);Qm=!0;try{return pj(t,e,r)}finally{Qm=!1,(pc!==null||fc!==null)&&(fj(),hj())}}function hu(t,e){var r=t.stateNode;if(r===null)return null;var s=Kf(r);if(s===null)return null;r=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Xe(231,e,typeof r));return r}var dy=!1;if(Li)try{var rd={};Object.defineProperty(rd,"passive",{get:function(){dy=!0}}),window.addEventListener("test",rd,rd),window.removeEventListener("test",rd,rd)}catch{dy=!1}function q4(t,e,r,s,i,a,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(r,d)}catch(u){this.onError(u)}}var Bd=!1,Yp=null,Jp=!1,uy=null,K4={onError:function(t){Bd=!0,Yp=t}};function G4(t,e,r,s,i,a,o,l,c){Bd=!1,Yp=null,q4.apply(K4,arguments)}function Y4(t,e,r,s,i,a,o,l,c){if(G4.apply(this,arguments),Bd){if(Bd){var d=Yp;Bd=!1,Yp=null}else throw Error(Xe(198));Jp||(Jp=!0,uy=d)}}function ul(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function gj(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function g_(t){if(ul(t)!==t)throw Error(Xe(188))}function J4(t){var e=t.alternate;if(!e){if(e=ul(t),e===null)throw Error(Xe(188));return e!==t?null:t}for(var r=t,s=e;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(s=i.return,s!==null){r=s;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return g_(i),t;if(a===s)return g_(i),e;a=a.sibling}throw Error(Xe(188))}if(r.return!==s.return)r=i,s=a;else{for(var o=!1,l=i.child;l;){if(l===r){o=!0,r=i,s=a;break}if(l===s){o=!0,s=i,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,s=i;break}if(l===s){o=!0,s=a,r=i;break}l=l.sibling}if(!o)throw Error(Xe(189))}}if(r.alternate!==s)throw Error(Xe(190))}if(r.tag!==3)throw Error(Xe(188));return r.stateNode.current===r?t:e}function xj(t){return t=J4(t),t!==null?yj(t):null}function yj(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=yj(t);if(e!==null)return e;t=t.sibling}return null}var vj=zs.unstable_scheduleCallback,x_=zs.unstable_cancelCallback,Q4=zs.unstable_shouldYield,Z4=zs.unstable_requestPaint,yr=zs.unstable_now,e3=zs.unstable_getCurrentPriorityLevel,tb=zs.unstable_ImmediatePriority,bj=zs.unstable_UserBlockingPriority,Qp=zs.unstable_NormalPriority,t3=zs.unstable_LowPriority,wj=zs.unstable_IdlePriority,zf=null,ai=null;function r3(t){if(ai&&typeof ai.onCommitFiberRoot=="function")try{ai.onCommitFiberRoot(zf,t,void 0,(t.current.flags&128)===128)}catch{}}var kn=Math.clz32?Math.clz32:i3,s3=Math.log,n3=Math.LN2;function i3(t){return t>>>=0,t===0?32:31-(s3(t)/n3|0)|0}var jh=64,Eh=4194304;function Ad(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Zp(t,e){var r=t.pendingLanes;if(r===0)return 0;var s=0,i=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~i;l!==0?s=Ad(l):(a&=o,a!==0&&(s=Ad(a)))}else o=r&~i,o!==0?s=Ad(o):a!==0&&(s=Ad(a));if(s===0)return 0;if(e!==0&&e!==s&&!(e&i)&&(i=s&-s,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(s&4&&(s|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)r=31-kn(e),i=1<<r,s|=t[r],e&=~i;return s}function a3(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function o3(t,e){for(var r=t.suspendedLanes,s=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-kn(a),l=1<<o,c=i[o];c===-1?(!(l&r)||l&s)&&(i[o]=a3(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function hy(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _j(){var t=jh;return jh<<=1,!(jh&4194240)&&(jh=64),t}function Zm(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Hu(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-kn(e),t[e]=r}function l3(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-kn(r),a=1<<i;e[i]=0,s[i]=-1,t[i]=-1,r&=~a}}function rb(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var s=31-kn(r),i=1<<s;i&e|t[s]&e&&(t[s]|=e),r&=~i}}var Ut=0;function Nj(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Sj,sb,jj,Ej,Tj,py=!1,Th=[],xa=null,ya=null,va=null,pu=new Map,fu=new Map,la=[],c3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function y_(t,e){switch(t){case"focusin":case"focusout":xa=null;break;case"dragenter":case"dragleave":ya=null;break;case"mouseover":case"mouseout":va=null;break;case"pointerover":case"pointerout":pu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":fu.delete(e.pointerId)}}function sd(t,e,r,s,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:s,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Xu(e),e!==null&&sb(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function d3(t,e,r,s,i){switch(e){case"focusin":return xa=sd(xa,t,e,r,s,i),!0;case"dragenter":return ya=sd(ya,t,e,r,s,i),!0;case"mouseover":return va=sd(va,t,e,r,s,i),!0;case"pointerover":var a=i.pointerId;return pu.set(a,sd(pu.get(a)||null,t,e,r,s,i)),!0;case"gotpointercapture":return a=i.pointerId,fu.set(a,sd(fu.get(a)||null,t,e,r,s,i)),!0}return!1}function Cj(t){var e=Po(t.target);if(e!==null){var r=ul(e);if(r!==null){if(e=r.tag,e===13){if(e=gj(r),e!==null){t.blockedOn=e,Tj(t.priority,function(){jj(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Tp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=fy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var s=new r.constructor(r.type,r);ly=s,r.target.dispatchEvent(s),ly=null}else return e=Xu(r),e!==null&&sb(e),t.blockedOn=r,!1;e.shift()}return!0}function v_(t,e,r){Tp(t)&&r.delete(e)}function u3(){py=!1,xa!==null&&Tp(xa)&&(xa=null),ya!==null&&Tp(ya)&&(ya=null),va!==null&&Tp(va)&&(va=null),pu.forEach(v_),fu.forEach(v_)}function nd(t,e){t.blockedOn===e&&(t.blockedOn=null,py||(py=!0,zs.unstable_scheduleCallback(zs.unstable_NormalPriority,u3)))}function mu(t){function e(i){return nd(i,t)}if(0<Th.length){nd(Th[0],t);for(var r=1;r<Th.length;r++){var s=Th[r];s.blockedOn===t&&(s.blockedOn=null)}}for(xa!==null&&nd(xa,t),ya!==null&&nd(ya,t),va!==null&&nd(va,t),pu.forEach(e),fu.forEach(e),r=0;r<la.length;r++)s=la[r],s.blockedOn===t&&(s.blockedOn=null);for(;0<la.length&&(r=la[0],r.blockedOn===null);)Cj(r),r.blockedOn===null&&la.shift()}var mc=Ui.ReactCurrentBatchConfig,ef=!0;function h3(t,e,r,s){var i=Ut,a=mc.transition;mc.transition=null;try{Ut=1,nb(t,e,r,s)}finally{Ut=i,mc.transition=a}}function p3(t,e,r,s){var i=Ut,a=mc.transition;mc.transition=null;try{Ut=4,nb(t,e,r,s)}finally{Ut=i,mc.transition=a}}function nb(t,e,r,s){if(ef){var i=fy(t,e,r,s);if(i===null)cg(t,e,s,tf,r),y_(t,s);else if(d3(i,t,e,r,s))s.stopPropagation();else if(y_(t,s),e&4&&-1<c3.indexOf(t)){for(;i!==null;){var a=Xu(i);if(a!==null&&Sj(a),a=fy(t,e,r,s),a===null&&cg(t,e,s,tf,r),a===i)break;i=a}i!==null&&s.stopPropagation()}else cg(t,e,s,null,r)}}var tf=null;function fy(t,e,r,s){if(tf=null,t=eb(s),t=Po(t),t!==null)if(e=ul(t),e===null)t=null;else if(r=e.tag,r===13){if(t=gj(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return tf=t,null}function kj(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(e3()){case tb:return 1;case bj:return 4;case Qp:case t3:return 16;case wj:return 536870912;default:return 16}default:return 16}}var ma=null,ib=null,Cp=null;function Aj(){if(Cp)return Cp;var t,e=ib,r=e.length,s,i="value"in ma?ma.value:ma.textContent,a=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(s=1;s<=o&&e[r-s]===i[a-s];s++);return Cp=i.slice(t,1<s?1-s:void 0)}function kp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ch(){return!0}function b_(){return!1}function Ws(t){function e(r,s,i,a,o){this._reactName=r,this._targetInst=i,this.type=s,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Ch:b_,this.isPropagationStopped=b_,this}return or(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ch)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ch)},persist:function(){},isPersistent:Ch}),e}var $c={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ab=Ws($c),zu=or({},$c,{view:0,detail:0}),f3=Ws(zu),eg,tg,id,Xf=or({},zu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ob,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==id&&(id&&t.type==="mousemove"?(eg=t.screenX-id.screenX,tg=t.screenY-id.screenY):tg=eg=0,id=t),eg)},movementY:function(t){return"movementY"in t?t.movementY:tg}}),w_=Ws(Xf),m3=or({},Xf,{dataTransfer:0}),g3=Ws(m3),x3=or({},zu,{relatedTarget:0}),rg=Ws(x3),y3=or({},$c,{animationName:0,elapsedTime:0,pseudoElement:0}),v3=Ws(y3),b3=or({},$c,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),w3=Ws(b3),_3=or({},$c,{data:0}),__=Ws(_3),N3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},S3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},j3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function E3(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=j3[t])?!!e[t]:!1}function ob(){return E3}var T3=or({},zu,{key:function(t){if(t.key){var e=N3[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=kp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?S3[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ob,charCode:function(t){return t.type==="keypress"?kp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?kp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),C3=Ws(T3),k3=or({},Xf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),N_=Ws(k3),A3=or({},zu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ob}),P3=Ws(A3),R3=or({},$c,{propertyName:0,elapsedTime:0,pseudoElement:0}),O3=Ws(R3),I3=or({},Xf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),L3=Ws(I3),M3=[9,13,27,32],lb=Li&&"CompositionEvent"in window,$d=null;Li&&"documentMode"in document&&($d=document.documentMode);var F3=Li&&"TextEvent"in window&&!$d,Pj=Li&&(!lb||$d&&8<$d&&11>=$d),S_=String.fromCharCode(32),j_=!1;function Rj(t,e){switch(t){case"keyup":return M3.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Oj(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zl=!1;function D3(t,e){switch(t){case"compositionend":return Oj(e);case"keypress":return e.which!==32?null:(j_=!0,S_);case"textInput":return t=e.data,t===S_&&j_?null:t;default:return null}}function B3(t,e){if(Zl)return t==="compositionend"||!lb&&Rj(t,e)?(t=Aj(),Cp=ib=ma=null,Zl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Pj&&e.locale!=="ko"?null:e.data;default:return null}}var $3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function E_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!$3[t.type]:e==="textarea"}function Ij(t,e,r,s){uj(s),e=rf(e,"onChange"),0<e.length&&(r=new ab("onChange","change",null,r,s),t.push({event:r,listeners:e}))}var Ud=null,gu=null;function U3(t){Xj(t,0)}function Wf(t){var e=rc(t);if(nj(e))return t}function V3(t,e){if(t==="change")return e}var Lj=!1;if(Li){var sg;if(Li){var ng="oninput"in document;if(!ng){var T_=document.createElement("div");T_.setAttribute("oninput","return;"),ng=typeof T_.oninput=="function"}sg=ng}else sg=!1;Lj=sg&&(!document.documentMode||9<document.documentMode)}function C_(){Ud&&(Ud.detachEvent("onpropertychange",Mj),gu=Ud=null)}function Mj(t){if(t.propertyName==="value"&&Wf(gu)){var e=[];Ij(e,gu,t,eb(t)),mj(U3,e)}}function H3(t,e,r){t==="focusin"?(C_(),Ud=e,gu=r,Ud.attachEvent("onpropertychange",Mj)):t==="focusout"&&C_()}function z3(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Wf(gu)}function X3(t,e){if(t==="click")return Wf(e)}function W3(t,e){if(t==="input"||t==="change")return Wf(e)}function q3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var In=typeof Object.is=="function"?Object.is:q3;function xu(t,e){if(In(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var i=r[s];if(!Yx.call(e,i)||!In(t[i],e[i]))return!1}return!0}function k_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function A_(t,e){var r=k_(t);t=0;for(var s;r;){if(r.nodeType===3){if(s=t+r.textContent.length,t<=e&&s>=e)return{node:r,offset:e-t};t=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=k_(r)}}function Fj(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Fj(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Dj(){for(var t=window,e=Gp();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Gp(t.document)}return e}function cb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function K3(t){var e=Dj(),r=t.focusedElem,s=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Fj(r.ownerDocument.documentElement,r)){if(s!==null&&cb(r)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,a=Math.min(s.start,i);s=s.end===void 0?a:Math.min(s.end,i),!t.extend&&a>s&&(i=s,s=a,a=i),i=A_(r,a);var o=A_(r,s);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var G3=Li&&"documentMode"in document&&11>=document.documentMode,ec=null,my=null,Vd=null,gy=!1;function P_(t,e,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;gy||ec==null||ec!==Gp(s)||(s=ec,"selectionStart"in s&&cb(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Vd&&xu(Vd,s)||(Vd=s,s=rf(my,"onSelect"),0<s.length&&(e=new ab("onSelect","select",null,e,r),t.push({event:e,listeners:s}),e.target=ec)))}function kh(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var tc={animationend:kh("Animation","AnimationEnd"),animationiteration:kh("Animation","AnimationIteration"),animationstart:kh("Animation","AnimationStart"),transitionend:kh("Transition","TransitionEnd")},ig={},Bj={};Li&&(Bj=document.createElement("div").style,"AnimationEvent"in window||(delete tc.animationend.animation,delete tc.animationiteration.animation,delete tc.animationstart.animation),"TransitionEvent"in window||delete tc.transitionend.transition);function qf(t){if(ig[t])return ig[t];if(!tc[t])return t;var e=tc[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Bj)return ig[t]=e[r];return t}var $j=qf("animationend"),Uj=qf("animationiteration"),Vj=qf("animationstart"),Hj=qf("transitionend"),zj=new Map,R_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qa(t,e){zj.set(t,e),dl(e,[t])}for(var ag=0;ag<R_.length;ag++){var og=R_[ag],Y3=og.toLowerCase(),J3=og[0].toUpperCase()+og.slice(1);qa(Y3,"on"+J3)}qa($j,"onAnimationEnd");qa(Uj,"onAnimationIteration");qa(Vj,"onAnimationStart");qa("dblclick","onDoubleClick");qa("focusin","onFocus");qa("focusout","onBlur");qa(Hj,"onTransitionEnd");_c("onMouseEnter",["mouseout","mouseover"]);_c("onMouseLeave",["mouseout","mouseover"]);_c("onPointerEnter",["pointerout","pointerover"]);_c("onPointerLeave",["pointerout","pointerover"]);dl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));dl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));dl("onBeforeInput",["compositionend","keypress","textInput","paste"]);dl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));dl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));dl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Q3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pd));function O_(t,e,r){var s=t.type||"unknown-event";t.currentTarget=r,Y4(s,e,void 0,t),t.currentTarget=null}function Xj(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var s=t[r],i=s.event;s=s.listeners;e:{var a=void 0;if(e)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==a&&i.isPropagationStopped())break e;O_(i,l,d),a=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==a&&i.isPropagationStopped())break e;O_(i,l,d),a=c}}}if(Jp)throw t=uy,Jp=!1,uy=null,t}function Jt(t,e){var r=e[wy];r===void 0&&(r=e[wy]=new Set);var s=t+"__bubble";r.has(s)||(Wj(e,t,2,!1),r.add(s))}function lg(t,e,r){var s=0;e&&(s|=4),Wj(r,t,s,e)}var Ah="_reactListening"+Math.random().toString(36).slice(2);function yu(t){if(!t[Ah]){t[Ah]=!0,Z2.forEach(function(r){r!=="selectionchange"&&(Q3.has(r)||lg(r,!1,t),lg(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ah]||(e[Ah]=!0,lg("selectionchange",!1,e))}}function Wj(t,e,r,s){switch(kj(e)){case 1:var i=h3;break;case 4:i=p3;break;default:i=nb}r=i.bind(null,e,r,t),i=void 0,!dy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function cg(t,e,r,s,i){var a=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Po(l),o===null)return;if(c=o.tag,c===5||c===6){s=a=o;continue e}l=l.parentNode}}s=s.return}mj(function(){var d=a,u=eb(r),h=[];e:{var p=zj.get(t);if(p!==void 0){var f=ab,m=t;switch(t){case"keypress":if(kp(r)===0)break e;case"keydown":case"keyup":f=C3;break;case"focusin":m="focus",f=rg;break;case"focusout":m="blur",f=rg;break;case"beforeblur":case"afterblur":f=rg;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=w_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=g3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=P3;break;case $j:case Uj:case Vj:f=v3;break;case Hj:f=O3;break;case"scroll":f=f3;break;case"wheel":f=L3;break;case"copy":case"cut":case"paste":f=w3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=N_}var v=(e&4)!==0,x=!v&&t==="scroll",b=v?p!==null?p+"Capture":null:p;v=[];for(var y=d,g;y!==null;){g=y;var w=g.stateNode;if(g.tag===5&&w!==null&&(g=w,b!==null&&(w=hu(y,b),w!=null&&v.push(vu(y,w,g)))),x)break;y=y.return}0<v.length&&(p=new f(p,m,null,r,u),h.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",p&&r!==ly&&(m=r.relatedTarget||r.fromElement)&&(Po(m)||m[Mi]))break e;if((f||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,f?(m=r.relatedTarget||r.toElement,f=d,m=m?Po(m):null,m!==null&&(x=ul(m),m!==x||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=d),f!==m)){if(v=w_,w="onMouseLeave",b="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=N_,w="onPointerLeave",b="onPointerEnter",y="pointer"),x=f==null?p:rc(f),g=m==null?p:rc(m),p=new v(w,y+"leave",f,r,u),p.target=x,p.relatedTarget=g,w=null,Po(u)===d&&(v=new v(b,y+"enter",m,r,u),v.target=g,v.relatedTarget=x,w=v),x=w,f&&m)t:{for(v=f,b=m,y=0,g=v;g;g=jl(g))y++;for(g=0,w=b;w;w=jl(w))g++;for(;0<y-g;)v=jl(v),y--;for(;0<g-y;)b=jl(b),g--;for(;y--;){if(v===b||b!==null&&v===b.alternate)break t;v=jl(v),b=jl(b)}v=null}else v=null;f!==null&&I_(h,p,f,v,!1),m!==null&&x!==null&&I_(h,x,m,v,!0)}}e:{if(p=d?rc(d):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var S=V3;else if(E_(p))if(Lj)S=W3;else{S=z3;var _=H3}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=X3);if(S&&(S=S(t,d))){Ij(h,S,r,u);break e}_&&_(t,p,d),t==="focusout"&&(_=p._wrapperState)&&_.controlled&&p.type==="number"&&sy(p,"number",p.value)}switch(_=d?rc(d):window,t){case"focusin":(E_(_)||_.contentEditable==="true")&&(ec=_,my=d,Vd=null);break;case"focusout":Vd=my=ec=null;break;case"mousedown":gy=!0;break;case"contextmenu":case"mouseup":case"dragend":gy=!1,P_(h,r,u);break;case"selectionchange":if(G3)break;case"keydown":case"keyup":P_(h,r,u)}var A;if(lb)e:{switch(t){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else Zl?Rj(t,r)&&(B="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(B="onCompositionStart");B&&(Pj&&r.locale!=="ko"&&(Zl||B!=="onCompositionStart"?B==="onCompositionEnd"&&Zl&&(A=Aj()):(ma=u,ib="value"in ma?ma.value:ma.textContent,Zl=!0)),_=rf(d,B),0<_.length&&(B=new __(B,t,null,r,u),h.push({event:B,listeners:_}),A?B.data=A:(A=Oj(r),A!==null&&(B.data=A)))),(A=F3?D3(t,r):B3(t,r))&&(d=rf(d,"onBeforeInput"),0<d.length&&(u=new __("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:d}),u.data=A))}Xj(h,e)})}function vu(t,e,r){return{instance:t,listener:e,currentTarget:r}}function rf(t,e){for(var r=e+"Capture",s=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=hu(t,r),a!=null&&s.unshift(vu(t,a,i)),a=hu(t,e),a!=null&&s.push(vu(t,a,i))),t=t.return}return s}function jl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function I_(t,e,r,s,i){for(var a=e._reactName,o=[];r!==null&&r!==s;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&d!==null&&(l=d,i?(c=hu(r,a),c!=null&&o.unshift(vu(r,c,l))):i||(c=hu(r,a),c!=null&&o.push(vu(r,c,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var Z3=/\r\n?/g,eP=/\u0000|\uFFFD/g;function L_(t){return(typeof t=="string"?t:""+t).replace(Z3,`
`).replace(eP,"")}function Ph(t,e,r){if(e=L_(e),L_(t)!==e&&r)throw Error(Xe(425))}function sf(){}var xy=null,yy=null;function vy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var by=typeof setTimeout=="function"?setTimeout:void 0,tP=typeof clearTimeout=="function"?clearTimeout:void 0,M_=typeof Promise=="function"?Promise:void 0,rP=typeof queueMicrotask=="function"?queueMicrotask:typeof M_<"u"?function(t){return M_.resolve(null).then(t).catch(sP)}:by;function sP(t){setTimeout(function(){throw t})}function dg(t,e){var r=e,s=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(s===0){t.removeChild(i),mu(e);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=i}while(r);mu(e)}function ba(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function F_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Uc=Math.random().toString(36).slice(2),Zn="__reactFiber$"+Uc,bu="__reactProps$"+Uc,Mi="__reactContainer$"+Uc,wy="__reactEvents$"+Uc,nP="__reactListeners$"+Uc,iP="__reactHandles$"+Uc;function Po(t){var e=t[Zn];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Mi]||r[Zn]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=F_(t);t!==null;){if(r=t[Zn])return r;t=F_(t)}return e}t=r,r=t.parentNode}return null}function Xu(t){return t=t[Zn]||t[Mi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function rc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Xe(33))}function Kf(t){return t[bu]||null}var _y=[],sc=-1;function Ka(t){return{current:t}}function Zt(t){0>sc||(t.current=_y[sc],_y[sc]=null,sc--)}function Kt(t,e){sc++,_y[sc]=t.current,t.current=e}var Ra={},Jr=Ka(Ra),Ns=Ka(!1),qo=Ra;function Nc(t,e){var r=t.type.contextTypes;if(!r)return Ra;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=e[a];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ss(t){return t=t.childContextTypes,t!=null}function nf(){Zt(Ns),Zt(Jr)}function D_(t,e,r){if(Jr.current!==Ra)throw Error(Xe(168));Kt(Jr,e),Kt(Ns,r)}function qj(t,e,r){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var i in s)if(!(i in e))throw Error(Xe(108,H4(t)||"Unknown",i));return or({},r,s)}function af(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ra,qo=Jr.current,Kt(Jr,t),Kt(Ns,Ns.current),!0}function B_(t,e,r){var s=t.stateNode;if(!s)throw Error(Xe(169));r?(t=qj(t,e,qo),s.__reactInternalMemoizedMergedChildContext=t,Zt(Ns),Zt(Jr),Kt(Jr,t)):Zt(Ns),Kt(Ns,r)}var Ni=null,Gf=!1,ug=!1;function Kj(t){Ni===null?Ni=[t]:Ni.push(t)}function aP(t){Gf=!0,Kj(t)}function Ga(){if(!ug&&Ni!==null){ug=!0;var t=0,e=Ut;try{var r=Ni;for(Ut=1;t<r.length;t++){var s=r[t];do s=s(!0);while(s!==null)}Ni=null,Gf=!1}catch(i){throw Ni!==null&&(Ni=Ni.slice(t+1)),vj(tb,Ga),i}finally{Ut=e,ug=!1}}return null}var nc=[],ic=0,of=null,lf=0,tn=[],rn=0,Ko=null,Ei=1,Ti="";function So(t,e){nc[ic++]=lf,nc[ic++]=of,of=t,lf=e}function Gj(t,e,r){tn[rn++]=Ei,tn[rn++]=Ti,tn[rn++]=Ko,Ko=t;var s=Ei;t=Ti;var i=32-kn(s)-1;s&=~(1<<i),r+=1;var a=32-kn(e)+i;if(30<a){var o=i-i%5;a=(s&(1<<o)-1).toString(32),s>>=o,i-=o,Ei=1<<32-kn(e)+i|r<<i|s,Ti=a+t}else Ei=1<<a|r<<i|s,Ti=t}function db(t){t.return!==null&&(So(t,1),Gj(t,1,0))}function ub(t){for(;t===of;)of=nc[--ic],nc[ic]=null,lf=nc[--ic],nc[ic]=null;for(;t===Ko;)Ko=tn[--rn],tn[rn]=null,Ti=tn[--rn],tn[rn]=null,Ei=tn[--rn],tn[rn]=null}var Vs=null,Us=null,er=!1,jn=null;function Yj(t,e){var r=nn(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function $_(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Vs=t,Us=ba(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Vs=t,Us=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Ko!==null?{id:Ei,overflow:Ti}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=nn(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Vs=t,Us=null,!0):!1;default:return!1}}function Ny(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Sy(t){if(er){var e=Us;if(e){var r=e;if(!$_(t,e)){if(Ny(t))throw Error(Xe(418));e=ba(r.nextSibling);var s=Vs;e&&$_(t,e)?Yj(s,r):(t.flags=t.flags&-4097|2,er=!1,Vs=t)}}else{if(Ny(t))throw Error(Xe(418));t.flags=t.flags&-4097|2,er=!1,Vs=t}}}function U_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Vs=t}function Rh(t){if(t!==Vs)return!1;if(!er)return U_(t),er=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!vy(t.type,t.memoizedProps)),e&&(e=Us)){if(Ny(t))throw Jj(),Error(Xe(418));for(;e;)Yj(t,e),e=ba(e.nextSibling)}if(U_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Xe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Us=ba(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Us=null}}else Us=Vs?ba(t.stateNode.nextSibling):null;return!0}function Jj(){for(var t=Us;t;)t=ba(t.nextSibling)}function Sc(){Us=Vs=null,er=!1}function hb(t){jn===null?jn=[t]:jn.push(t)}var oP=Ui.ReactCurrentBatchConfig;function ad(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Xe(309));var s=r.stateNode}if(!s)throw Error(Xe(147,t));var i=s,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(Xe(284));if(!r._owner)throw Error(Xe(290,t))}return t}function Oh(t,e){throw t=Object.prototype.toString.call(e),Error(Xe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function V_(t){var e=t._init;return e(t._payload)}function Qj(t){function e(b,y){if(t){var g=b.deletions;g===null?(b.deletions=[y],b.flags|=16):g.push(y)}}function r(b,y){if(!t)return null;for(;y!==null;)e(b,y),y=y.sibling;return null}function s(b,y){for(b=new Map;y!==null;)y.key!==null?b.set(y.key,y):b.set(y.index,y),y=y.sibling;return b}function i(b,y){return b=Sa(b,y),b.index=0,b.sibling=null,b}function a(b,y,g){return b.index=g,t?(g=b.alternate,g!==null?(g=g.index,g<y?(b.flags|=2,y):g):(b.flags|=2,y)):(b.flags|=1048576,y)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function l(b,y,g,w){return y===null||y.tag!==6?(y=yg(g,b.mode,w),y.return=b,y):(y=i(y,g),y.return=b,y)}function c(b,y,g,w){var S=g.type;return S===Ql?u(b,y,g.props.children,w,g.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===na&&V_(S)===y.type)?(w=i(y,g.props),w.ref=ad(b,y,g),w.return=b,w):(w=Mp(g.type,g.key,g.props,null,b.mode,w),w.ref=ad(b,y,g),w.return=b,w)}function d(b,y,g,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==g.containerInfo||y.stateNode.implementation!==g.implementation?(y=vg(g,b.mode,w),y.return=b,y):(y=i(y,g.children||[]),y.return=b,y)}function u(b,y,g,w,S){return y===null||y.tag!==7?(y=Bo(g,b.mode,w,S),y.return=b,y):(y=i(y,g),y.return=b,y)}function h(b,y,g){if(typeof y=="string"&&y!==""||typeof y=="number")return y=yg(""+y,b.mode,g),y.return=b,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case _h:return g=Mp(y.type,y.key,y.props,null,b.mode,g),g.ref=ad(b,null,y),g.return=b,g;case Jl:return y=vg(y,b.mode,g),y.return=b,y;case na:var w=y._init;return h(b,w(y._payload),g)}if(kd(y)||td(y))return y=Bo(y,b.mode,g,null),y.return=b,y;Oh(b,y)}return null}function p(b,y,g,w){var S=y!==null?y.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return S!==null?null:l(b,y,""+g,w);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case _h:return g.key===S?c(b,y,g,w):null;case Jl:return g.key===S?d(b,y,g,w):null;case na:return S=g._init,p(b,y,S(g._payload),w)}if(kd(g)||td(g))return S!==null?null:u(b,y,g,w,null);Oh(b,g)}return null}function f(b,y,g,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return b=b.get(g)||null,l(y,b,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case _h:return b=b.get(w.key===null?g:w.key)||null,c(y,b,w,S);case Jl:return b=b.get(w.key===null?g:w.key)||null,d(y,b,w,S);case na:var _=w._init;return f(b,y,g,_(w._payload),S)}if(kd(w)||td(w))return b=b.get(g)||null,u(y,b,w,S,null);Oh(y,w)}return null}function m(b,y,g,w){for(var S=null,_=null,A=y,B=y=0,Q=null;A!==null&&B<g.length;B++){A.index>B?(Q=A,A=null):Q=A.sibling;var U=p(b,A,g[B],w);if(U===null){A===null&&(A=Q);break}t&&A&&U.alternate===null&&e(b,A),y=a(U,y,B),_===null?S=U:_.sibling=U,_=U,A=Q}if(B===g.length)return r(b,A),er&&So(b,B),S;if(A===null){for(;B<g.length;B++)A=h(b,g[B],w),A!==null&&(y=a(A,y,B),_===null?S=A:_.sibling=A,_=A);return er&&So(b,B),S}for(A=s(b,A);B<g.length;B++)Q=f(A,b,B,g[B],w),Q!==null&&(t&&Q.alternate!==null&&A.delete(Q.key===null?B:Q.key),y=a(Q,y,B),_===null?S=Q:_.sibling=Q,_=Q);return t&&A.forEach(function(q){return e(b,q)}),er&&So(b,B),S}function v(b,y,g,w){var S=td(g);if(typeof S!="function")throw Error(Xe(150));if(g=S.call(g),g==null)throw Error(Xe(151));for(var _=S=null,A=y,B=y=0,Q=null,U=g.next();A!==null&&!U.done;B++,U=g.next()){A.index>B?(Q=A,A=null):Q=A.sibling;var q=p(b,A,U.value,w);if(q===null){A===null&&(A=Q);break}t&&A&&q.alternate===null&&e(b,A),y=a(q,y,B),_===null?S=q:_.sibling=q,_=q,A=Q}if(U.done)return r(b,A),er&&So(b,B),S;if(A===null){for(;!U.done;B++,U=g.next())U=h(b,U.value,w),U!==null&&(y=a(U,y,B),_===null?S=U:_.sibling=U,_=U);return er&&So(b,B),S}for(A=s(b,A);!U.done;B++,U=g.next())U=f(A,b,B,U.value,w),U!==null&&(t&&U.alternate!==null&&A.delete(U.key===null?B:U.key),y=a(U,y,B),_===null?S=U:_.sibling=U,_=U);return t&&A.forEach(function(de){return e(b,de)}),er&&So(b,B),S}function x(b,y,g,w){if(typeof g=="object"&&g!==null&&g.type===Ql&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case _h:e:{for(var S=g.key,_=y;_!==null;){if(_.key===S){if(S=g.type,S===Ql){if(_.tag===7){r(b,_.sibling),y=i(_,g.props.children),y.return=b,b=y;break e}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===na&&V_(S)===_.type){r(b,_.sibling),y=i(_,g.props),y.ref=ad(b,_,g),y.return=b,b=y;break e}r(b,_);break}else e(b,_);_=_.sibling}g.type===Ql?(y=Bo(g.props.children,b.mode,w,g.key),y.return=b,b=y):(w=Mp(g.type,g.key,g.props,null,b.mode,w),w.ref=ad(b,y,g),w.return=b,b=w)}return o(b);case Jl:e:{for(_=g.key;y!==null;){if(y.key===_)if(y.tag===4&&y.stateNode.containerInfo===g.containerInfo&&y.stateNode.implementation===g.implementation){r(b,y.sibling),y=i(y,g.children||[]),y.return=b,b=y;break e}else{r(b,y);break}else e(b,y);y=y.sibling}y=vg(g,b.mode,w),y.return=b,b=y}return o(b);case na:return _=g._init,x(b,y,_(g._payload),w)}if(kd(g))return m(b,y,g,w);if(td(g))return v(b,y,g,w);Oh(b,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,y!==null&&y.tag===6?(r(b,y.sibling),y=i(y,g),y.return=b,b=y):(r(b,y),y=yg(g,b.mode,w),y.return=b,b=y),o(b)):r(b,y)}return x}var jc=Qj(!0),Zj=Qj(!1),cf=Ka(null),df=null,ac=null,pb=null;function fb(){pb=ac=df=null}function mb(t){var e=cf.current;Zt(cf),t._currentValue=e}function jy(t,e,r){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===r)break;t=t.return}}function gc(t,e){df=t,pb=ac=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_s=!0),t.firstContext=null)}function cn(t){var e=t._currentValue;if(pb!==t)if(t={context:t,memoizedValue:e,next:null},ac===null){if(df===null)throw Error(Xe(308));ac=t,df.dependencies={lanes:0,firstContext:t}}else ac=ac.next=t;return e}var Ro=null;function gb(t){Ro===null?Ro=[t]:Ro.push(t)}function eE(t,e,r,s){var i=e.interleaved;return i===null?(r.next=r,gb(e)):(r.next=i.next,i.next=r),e.interleaved=r,Fi(t,s)}function Fi(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ia=!1;function xb(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ri(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function wa(t,e,r){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,Rt&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,Fi(t,r)}return i=s.interleaved,i===null?(e.next=e,gb(s)):(e.next=i.next,i.next=e),s.interleaved=e,Fi(t,r)}function Ap(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,rb(t,r)}}function H_(t,e){var r=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?i=a=e:a=a.next=e}else i=a=e;r={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:s.shared,effects:s.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function uf(t,e,r,s){var i=t.updateQueue;ia=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?a=d:o.next=d,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(a!==null){var h=i.baseState;o=0,u=d=c=null,l=a;do{var p=l.lane,f=l.eventTime;if((s&p)===p){u!==null&&(u=u.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=t,v=l;switch(p=e,f=r,v.tag){case 1:if(m=v.payload,typeof m=="function"){h=m.call(f,h,p);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,p=typeof m=="function"?m.call(f,h,p):m,p==null)break e;h=or({},h,p);break e;case 2:ia=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[l]:p.push(l))}else f={eventTime:f,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=f,c=h):u=u.next=f,o|=p;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;p=l,l=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(u===null&&(c=h),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Yo|=o,t.lanes=o,t.memoizedState=h}}function z_(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],i=s.callback;if(i!==null){if(s.callback=null,s=r,typeof i!="function")throw Error(Xe(191,i));i.call(s)}}}var Wu={},oi=Ka(Wu),wu=Ka(Wu),_u=Ka(Wu);function Oo(t){if(t===Wu)throw Error(Xe(174));return t}function yb(t,e){switch(Kt(_u,e),Kt(wu,t),Kt(oi,Wu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:iy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=iy(e,t)}Zt(oi),Kt(oi,e)}function Ec(){Zt(oi),Zt(wu),Zt(_u)}function rE(t){Oo(_u.current);var e=Oo(oi.current),r=iy(e,t.type);e!==r&&(Kt(wu,t),Kt(oi,r))}function vb(t){wu.current===t&&(Zt(oi),Zt(wu))}var ir=Ka(0);function hf(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var hg=[];function bb(){for(var t=0;t<hg.length;t++)hg[t]._workInProgressVersionPrimary=null;hg.length=0}var Pp=Ui.ReactCurrentDispatcher,pg=Ui.ReactCurrentBatchConfig,Go=0,ar=null,Tr=null,Ar=null,pf=!1,Hd=!1,Nu=0,lP=0;function Xr(){throw Error(Xe(321))}function wb(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!In(t[r],e[r]))return!1;return!0}function _b(t,e,r,s,i,a){if(Go=a,ar=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Pp.current=t===null||t.memoizedState===null?hP:pP,t=r(s,i),Hd){a=0;do{if(Hd=!1,Nu=0,25<=a)throw Error(Xe(301));a+=1,Ar=Tr=null,e.updateQueue=null,Pp.current=fP,t=r(s,i)}while(Hd)}if(Pp.current=ff,e=Tr!==null&&Tr.next!==null,Go=0,Ar=Tr=ar=null,pf=!1,e)throw Error(Xe(300));return t}function Nb(){var t=Nu!==0;return Nu=0,t}function Yn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ar===null?ar.memoizedState=Ar=t:Ar=Ar.next=t,Ar}function dn(){if(Tr===null){var t=ar.alternate;t=t!==null?t.memoizedState:null}else t=Tr.next;var e=Ar===null?ar.memoizedState:Ar.next;if(e!==null)Ar=e,Tr=t;else{if(t===null)throw Error(Xe(310));Tr=t,t={memoizedState:Tr.memoizedState,baseState:Tr.baseState,baseQueue:Tr.baseQueue,queue:Tr.queue,next:null},Ar===null?ar.memoizedState=Ar=t:Ar=Ar.next=t}return Ar}function Su(t,e){return typeof e=="function"?e(t):e}function fg(t){var e=dn(),r=e.queue;if(r===null)throw Error(Xe(311));r.lastRenderedReducer=t;var s=Tr,i=s.baseQueue,a=r.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}s.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,s=s.baseState;var l=o=null,c=null,d=a;do{var u=d.lane;if((Go&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:t(s,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=s):c=c.next=h,ar.lanes|=u,Yo|=u}d=d.next}while(d!==null&&d!==a);c===null?o=s:c.next=l,In(s,e.memoizedState)||(_s=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=c,r.lastRenderedState=s}if(t=r.interleaved,t!==null){i=t;do a=i.lane,ar.lanes|=a,Yo|=a,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function mg(t){var e=dn(),r=e.queue;if(r===null)throw Error(Xe(311));r.lastRenderedReducer=t;var s=r.dispatch,i=r.pending,a=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);In(a,e.memoizedState)||(_s=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,s]}function sE(){}function nE(t,e){var r=ar,s=dn(),i=e(),a=!In(s.memoizedState,i);if(a&&(s.memoizedState=i,_s=!0),s=s.queue,Sb(oE.bind(null,r,s,t),[t]),s.getSnapshot!==e||a||Ar!==null&&Ar.memoizedState.tag&1){if(r.flags|=2048,ju(9,aE.bind(null,r,s,i,e),void 0,null),Ir===null)throw Error(Xe(349));Go&30||iE(r,e,i)}return i}function iE(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=ar.updateQueue,e===null?(e={lastEffect:null,stores:null},ar.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function aE(t,e,r,s){e.value=r,e.getSnapshot=s,lE(e)&&cE(t)}function oE(t,e,r){return r(function(){lE(e)&&cE(t)})}function lE(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!In(t,r)}catch{return!0}}function cE(t){var e=Fi(t,1);e!==null&&An(e,t,1,-1)}function X_(t){var e=Yn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Su,lastRenderedState:t},e.queue=t,t=t.dispatch=uP.bind(null,ar,t),[e.memoizedState,t]}function ju(t,e,r,s){return t={tag:t,create:e,destroy:r,deps:s,next:null},e=ar.updateQueue,e===null?(e={lastEffect:null,stores:null},ar.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(s=r.next,r.next=t,t.next=s,e.lastEffect=t)),t}function dE(){return dn().memoizedState}function Rp(t,e,r,s){var i=Yn();ar.flags|=t,i.memoizedState=ju(1|e,r,void 0,s===void 0?null:s)}function Yf(t,e,r,s){var i=dn();s=s===void 0?null:s;var a=void 0;if(Tr!==null){var o=Tr.memoizedState;if(a=o.destroy,s!==null&&wb(s,o.deps)){i.memoizedState=ju(e,r,a,s);return}}ar.flags|=t,i.memoizedState=ju(1|e,r,a,s)}function W_(t,e){return Rp(8390656,8,t,e)}function Sb(t,e){return Yf(2048,8,t,e)}function uE(t,e){return Yf(4,2,t,e)}function hE(t,e){return Yf(4,4,t,e)}function pE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function fE(t,e,r){return r=r!=null?r.concat([t]):null,Yf(4,4,pE.bind(null,e,t),r)}function jb(){}function mE(t,e){var r=dn();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&wb(e,s[1])?s[0]:(r.memoizedState=[t,e],t)}function gE(t,e){var r=dn();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&wb(e,s[1])?s[0]:(t=t(),r.memoizedState=[t,e],t)}function xE(t,e,r){return Go&21?(In(r,e)||(r=_j(),ar.lanes|=r,Yo|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_s=!0),t.memoizedState=r)}function cP(t,e){var r=Ut;Ut=r!==0&&4>r?r:4,t(!0);var s=pg.transition;pg.transition={};try{t(!1),e()}finally{Ut=r,pg.transition=s}}function yE(){return dn().memoizedState}function dP(t,e,r){var s=Na(t);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},vE(t))bE(e,r);else if(r=eE(t,e,r,s),r!==null){var i=ss();An(r,t,s,i),wE(r,e,s)}}function uP(t,e,r){var s=Na(t),i={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(vE(t))bE(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,r);if(i.hasEagerState=!0,i.eagerState=l,In(l,o)){var c=e.interleaved;c===null?(i.next=i,gb(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}r=eE(t,e,i,s),r!==null&&(i=ss(),An(r,t,s,i),wE(r,e,s))}}function vE(t){var e=t.alternate;return t===ar||e!==null&&e===ar}function bE(t,e){Hd=pf=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function wE(t,e,r){if(r&4194240){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,rb(t,r)}}var ff={readContext:cn,useCallback:Xr,useContext:Xr,useEffect:Xr,useImperativeHandle:Xr,useInsertionEffect:Xr,useLayoutEffect:Xr,useMemo:Xr,useReducer:Xr,useRef:Xr,useState:Xr,useDebugValue:Xr,useDeferredValue:Xr,useTransition:Xr,useMutableSource:Xr,useSyncExternalStore:Xr,useId:Xr,unstable_isNewReconciler:!1},hP={readContext:cn,useCallback:function(t,e){return Yn().memoizedState=[t,e===void 0?null:e],t},useContext:cn,useEffect:W_,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Rp(4194308,4,pE.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Rp(4194308,4,t,e)},useInsertionEffect:function(t,e){return Rp(4,2,t,e)},useMemo:function(t,e){var r=Yn();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var s=Yn();return e=r!==void 0?r(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=dP.bind(null,ar,t),[s.memoizedState,t]},useRef:function(t){var e=Yn();return t={current:t},e.memoizedState=t},useState:X_,useDebugValue:jb,useDeferredValue:function(t){return Yn().memoizedState=t},useTransition:function(){var t=X_(!1),e=t[0];return t=cP.bind(null,t[1]),Yn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var s=ar,i=Yn();if(er){if(r===void 0)throw Error(Xe(407));r=r()}else{if(r=e(),Ir===null)throw Error(Xe(349));Go&30||iE(s,e,r)}i.memoizedState=r;var a={value:r,getSnapshot:e};return i.queue=a,W_(oE.bind(null,s,a,t),[t]),s.flags|=2048,ju(9,aE.bind(null,s,a,r,e),void 0,null),r},useId:function(){var t=Yn(),e=Ir.identifierPrefix;if(er){var r=Ti,s=Ei;r=(s&~(1<<32-kn(s)-1)).toString(32)+r,e=":"+e+"R"+r,r=Nu++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=lP++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},pP={readContext:cn,useCallback:mE,useContext:cn,useEffect:Sb,useImperativeHandle:fE,useInsertionEffect:uE,useLayoutEffect:hE,useMemo:gE,useReducer:fg,useRef:dE,useState:function(){return fg(Su)},useDebugValue:jb,useDeferredValue:function(t){var e=dn();return xE(e,Tr.memoizedState,t)},useTransition:function(){var t=fg(Su)[0],e=dn().memoizedState;return[t,e]},useMutableSource:sE,useSyncExternalStore:nE,useId:yE,unstable_isNewReconciler:!1},fP={readContext:cn,useCallback:mE,useContext:cn,useEffect:Sb,useImperativeHandle:fE,useInsertionEffect:uE,useLayoutEffect:hE,useMemo:gE,useReducer:mg,useRef:dE,useState:function(){return mg(Su)},useDebugValue:jb,useDeferredValue:function(t){var e=dn();return Tr===null?e.memoizedState=t:xE(e,Tr.memoizedState,t)},useTransition:function(){var t=mg(Su)[0],e=dn().memoizedState;return[t,e]},useMutableSource:sE,useSyncExternalStore:nE,useId:yE,unstable_isNewReconciler:!1};function wn(t,e){if(t&&t.defaultProps){e=or({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Ey(t,e,r,s){e=t.memoizedState,r=r(s,e),r=r==null?e:or({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Jf={isMounted:function(t){return(t=t._reactInternals)?ul(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var s=ss(),i=Na(t),a=Ri(s,i);a.payload=e,r!=null&&(a.callback=r),e=wa(t,a,i),e!==null&&(An(e,t,i,s),Ap(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var s=ss(),i=Na(t),a=Ri(s,i);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=wa(t,a,i),e!==null&&(An(e,t,i,s),Ap(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=ss(),s=Na(t),i=Ri(r,s);i.tag=2,e!=null&&(i.callback=e),e=wa(t,i,s),e!==null&&(An(e,t,s,r),Ap(e,t,s))}};function q_(t,e,r,s,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,a,o):e.prototype&&e.prototype.isPureReactComponent?!xu(r,s)||!xu(i,a):!0}function _E(t,e,r){var s=!1,i=Ra,a=e.contextType;return typeof a=="object"&&a!==null?a=cn(a):(i=Ss(e)?qo:Jr.current,s=e.contextTypes,a=(s=s!=null)?Nc(t,i):Ra),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jf,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function K_(t,e,r,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,s),e.state!==t&&Jf.enqueueReplaceState(e,e.state,null)}function Ty(t,e,r,s){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},xb(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=cn(a):(a=Ss(e)?qo:Jr.current,i.context=Nc(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Ey(t,e,a,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Jf.enqueueReplaceState(i,i.state,null),uf(t,r,i,s),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Tc(t,e){try{var r="",s=e;do r+=V4(s),s=s.return;while(s);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function gg(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Cy(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var mP=typeof WeakMap=="function"?WeakMap:Map;function NE(t,e,r){r=Ri(-1,r),r.tag=3,r.payload={element:null};var s=e.value;return r.callback=function(){gf||(gf=!0,Dy=s),Cy(t,e)},r}function SE(t,e,r){r=Ri(-1,r),r.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var i=e.value;r.payload=function(){return s(i)},r.callback=function(){Cy(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Cy(t,e),typeof s!="function"&&(_a===null?_a=new Set([this]):_a.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function G_(t,e,r){var s=t.pingCache;if(s===null){s=t.pingCache=new mP;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(r)||(i.add(r),t=kP.bind(null,t,e,r),e.then(t,t))}function Y_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function J_(t,e,r,s,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Ri(-1,1),e.tag=2,wa(r,e,1))),r.lanes|=1),t)}var gP=Ui.ReactCurrentOwner,_s=!1;function ts(t,e,r,s){e.child=t===null?Zj(e,null,r,s):jc(e,t.child,r,s)}function Q_(t,e,r,s,i){r=r.render;var a=e.ref;return gc(e,i),s=_b(t,e,r,s,a,i),r=Nb(),t!==null&&!_s?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Di(t,e,i)):(er&&r&&db(e),e.flags|=1,ts(t,e,s,i),e.child)}function Z_(t,e,r,s,i){if(t===null){var a=r.type;return typeof a=="function"&&!Ob(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,jE(t,e,a,s,i)):(t=Mp(r.type,null,s,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:xu,r(o,s)&&t.ref===e.ref)return Di(t,e,i)}return e.flags|=1,t=Sa(a,s),t.ref=e.ref,t.return=e,e.child=t}function jE(t,e,r,s,i){if(t!==null){var a=t.memoizedProps;if(xu(a,s)&&t.ref===e.ref)if(_s=!1,e.pendingProps=s=a,(t.lanes&i)!==0)t.flags&131072&&(_s=!0);else return e.lanes=t.lanes,Di(t,e,i)}return ky(t,e,r,s,i)}function EE(t,e,r){var s=e.pendingProps,i=s.children,a=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Kt(lc,Ms),Ms|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Kt(lc,Ms),Ms|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:r,Kt(lc,Ms),Ms|=s}else a!==null?(s=a.baseLanes|r,e.memoizedState=null):s=r,Kt(lc,Ms),Ms|=s;return ts(t,e,i,r),e.child}function TE(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function ky(t,e,r,s,i){var a=Ss(r)?qo:Jr.current;return a=Nc(e,a),gc(e,i),r=_b(t,e,r,s,a,i),s=Nb(),t!==null&&!_s?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Di(t,e,i)):(er&&s&&db(e),e.flags|=1,ts(t,e,r,i),e.child)}function e1(t,e,r,s,i){if(Ss(r)){var a=!0;af(e)}else a=!1;if(gc(e,i),e.stateNode===null)Op(t,e),_E(e,r,s),Ty(e,r,s,i),s=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=cn(d):(d=Ss(r)?qo:Jr.current,d=Nc(e,d));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==d)&&K_(e,o,s,d),ia=!1;var p=e.memoizedState;o.state=p,uf(e,s,o,i),c=e.memoizedState,l!==s||p!==c||Ns.current||ia?(typeof u=="function"&&(Ey(e,r,u,s),c=e.memoizedState),(l=ia||q_(e,r,l,s,p,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),o.props=s,o.state=c,o.context=d,s=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,tE(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:wn(e.type,l),o.props=d,h=e.pendingProps,p=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=cn(c):(c=Ss(r)?qo:Jr.current,c=Nc(e,c));var f=r.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||p!==c)&&K_(e,o,s,c),ia=!1,p=e.memoizedState,o.state=p,uf(e,s,o,i);var m=e.memoizedState;l!==h||p!==m||Ns.current||ia?(typeof f=="function"&&(Ey(e,r,f,s),m=e.memoizedState),(d=ia||q_(e,r,d,s,p,m,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,m,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=m),o.props=s,o.state=m,o.context=c,s=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),s=!1)}return Ay(t,e,r,s,a,i)}function Ay(t,e,r,s,i,a){TE(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return i&&B_(e,r,!1),Di(t,e,a);s=e.stateNode,gP.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=jc(e,t.child,null,a),e.child=jc(e,null,l,a)):ts(t,e,l,a),e.memoizedState=s.state,i&&B_(e,r,!0),e.child}function CE(t){var e=t.stateNode;e.pendingContext?D_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&D_(t,e.context,!1),yb(t,e.containerInfo)}function t1(t,e,r,s,i){return Sc(),hb(i),e.flags|=256,ts(t,e,r,s),e.child}var Py={dehydrated:null,treeContext:null,retryLane:0};function Ry(t){return{baseLanes:t,cachePool:null,transitions:null}}function kE(t,e,r){var s=e.pendingProps,i=ir.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Kt(ir,i&1),t===null)return Sy(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,a?(s=e.mode,a=e.child,o={mode:"hidden",children:o},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=e0(o,s,0,null),t=Bo(t,s,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Ry(r),e.memoizedState=Py,t):Eb(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return xP(t,e,o,s,l,i,r);if(a){a=s.fallback,o=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&e.child!==i?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=Sa(i,c),s.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=Sa(l,a):(a=Bo(a,o,r,null),a.flags|=2),a.return=e,s.return=e,s.sibling=a,e.child=s,s=a,a=e.child,o=t.child.memoizedState,o=o===null?Ry(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=Py,s}return a=t.child,t=a.sibling,s=Sa(a,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=r),s.return=e,s.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=s,e.memoizedState=null,s}function Eb(t,e){return e=e0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ih(t,e,r,s){return s!==null&&hb(s),jc(e,t.child,null,r),t=Eb(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xP(t,e,r,s,i,a,o){if(r)return e.flags&256?(e.flags&=-257,s=gg(Error(Xe(422))),Ih(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=s.fallback,i=e.mode,s=e0({mode:"visible",children:s.children},i,0,null),a=Bo(a,i,o,null),a.flags|=2,s.return=e,a.return=e,s.sibling=a,e.child=s,e.mode&1&&jc(e,t.child,null,o),e.child.memoizedState=Ry(o),e.memoizedState=Py,a);if(!(e.mode&1))return Ih(t,e,o,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var l=s.dgst;return s=l,a=Error(Xe(419)),s=gg(a,s,void 0),Ih(t,e,o,s)}if(l=(o&t.childLanes)!==0,_s||l){if(s=Ir,s!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Fi(t,i),An(s,t,i,-1))}return Rb(),s=gg(Error(Xe(421))),Ih(t,e,o,s)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=AP.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Us=ba(i.nextSibling),Vs=e,er=!0,jn=null,t!==null&&(tn[rn++]=Ei,tn[rn++]=Ti,tn[rn++]=Ko,Ei=t.id,Ti=t.overflow,Ko=e),e=Eb(e,s.children),e.flags|=4096,e)}function r1(t,e,r){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),jy(t.return,e,r)}function xg(t,e,r,s,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=r,a.tailMode=i)}function AE(t,e,r){var s=e.pendingProps,i=s.revealOrder,a=s.tail;if(ts(t,e,s.children,r),s=ir.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&r1(t,r,e);else if(t.tag===19)r1(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(Kt(ir,s),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&hf(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),xg(e,!1,i,r,a);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&hf(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}xg(e,!0,r,null,a);break;case"together":xg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Op(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Di(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Yo|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Xe(153));if(e.child!==null){for(t=e.child,r=Sa(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Sa(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function yP(t,e,r){switch(e.tag){case 3:CE(e),Sc();break;case 5:rE(e);break;case 1:Ss(e.type)&&af(e);break;case 4:yb(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,i=e.memoizedProps.value;Kt(cf,s._currentValue),s._currentValue=i;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Kt(ir,ir.current&1),e.flags|=128,null):r&e.child.childLanes?kE(t,e,r):(Kt(ir,ir.current&1),t=Di(t,e,r),t!==null?t.sibling:null);Kt(ir,ir.current&1);break;case 19:if(s=(r&e.childLanes)!==0,t.flags&128){if(s)return AE(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Kt(ir,ir.current),s)break;return null;case 22:case 23:return e.lanes=0,EE(t,e,r)}return Di(t,e,r)}var PE,Oy,RE,OE;PE=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Oy=function(){};RE=function(t,e,r,s){var i=t.memoizedProps;if(i!==s){t=e.stateNode,Oo(oi.current);var a=null;switch(r){case"input":i=ty(t,i),s=ty(t,s),a=[];break;case"select":i=or({},i,{value:void 0}),s=or({},s,{value:void 0}),a=[];break;case"textarea":i=ny(t,i),s=ny(t,s),a=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=sf)}ay(r,s);var o;r=null;for(d in i)if(!s.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(du.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in s){var c=s[d];if(l=i!=null?i[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(a||(a=[]),a.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(du.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Jt("scroll",t),a||l===c||(a=[])):(a=a||[]).push(d,c))}r&&(a=a||[]).push("style",r);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};OE=function(t,e,r,s){r!==s&&(e.flags|=4)};function od(t,e){if(!er)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Wr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,s=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=s,t.childLanes=r,e}function vP(t,e,r){var s=e.pendingProps;switch(ub(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wr(e),null;case 1:return Ss(e.type)&&nf(),Wr(e),null;case 3:return s=e.stateNode,Ec(),Zt(Ns),Zt(Jr),bb(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Rh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,jn!==null&&(Uy(jn),jn=null))),Oy(t,e),Wr(e),null;case 5:vb(e);var i=Oo(_u.current);if(r=e.type,t!==null&&e.stateNode!=null)RE(t,e,r,s,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(Xe(166));return Wr(e),null}if(t=Oo(oi.current),Rh(e)){s=e.stateNode,r=e.type;var a=e.memoizedProps;switch(s[Zn]=e,s[bu]=a,t=(e.mode&1)!==0,r){case"dialog":Jt("cancel",s),Jt("close",s);break;case"iframe":case"object":case"embed":Jt("load",s);break;case"video":case"audio":for(i=0;i<Pd.length;i++)Jt(Pd[i],s);break;case"source":Jt("error",s);break;case"img":case"image":case"link":Jt("error",s),Jt("load",s);break;case"details":Jt("toggle",s);break;case"input":u_(s,a),Jt("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},Jt("invalid",s);break;case"textarea":p_(s,a),Jt("invalid",s)}ay(r,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?s.textContent!==l&&(a.suppressHydrationWarning!==!0&&Ph(s.textContent,l,t),i=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Ph(s.textContent,l,t),i=["children",""+l]):du.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Jt("scroll",s)}switch(r){case"input":Nh(s),h_(s,a,!0);break;case"textarea":Nh(s),f_(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=sf)}s=i,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=oj(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(r,{is:s.is}):(t=o.createElement(r),r==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,r),t[Zn]=e,t[bu]=s,PE(t,e,!1,!1),e.stateNode=t;e:{switch(o=oy(r,s),r){case"dialog":Jt("cancel",t),Jt("close",t),i=s;break;case"iframe":case"object":case"embed":Jt("load",t),i=s;break;case"video":case"audio":for(i=0;i<Pd.length;i++)Jt(Pd[i],t);i=s;break;case"source":Jt("error",t),i=s;break;case"img":case"image":case"link":Jt("error",t),Jt("load",t),i=s;break;case"details":Jt("toggle",t),i=s;break;case"input":u_(t,s),i=ty(t,s),Jt("invalid",t);break;case"option":i=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},i=or({},s,{value:void 0}),Jt("invalid",t);break;case"textarea":p_(t,s),i=ny(t,s),Jt("invalid",t);break;default:i=s}ay(r,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?dj(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&lj(t,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&uu(t,c):typeof c=="number"&&uu(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(du.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Jt("scroll",t):c!=null&&Yv(t,a,c,o))}switch(r){case"input":Nh(t),h_(t,s,!1);break;case"textarea":Nh(t),f_(t);break;case"option":s.value!=null&&t.setAttribute("value",""+Pa(s.value));break;case"select":t.multiple=!!s.multiple,a=s.value,a!=null?hc(t,!!s.multiple,a,!1):s.defaultValue!=null&&hc(t,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=sf)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Wr(e),null;case 6:if(t&&e.stateNode!=null)OE(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(Xe(166));if(r=Oo(_u.current),Oo(oi.current),Rh(e)){if(s=e.stateNode,r=e.memoizedProps,s[Zn]=e,(a=s.nodeValue!==r)&&(t=Vs,t!==null))switch(t.tag){case 3:Ph(s.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ph(s.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Zn]=e,e.stateNode=s}return Wr(e),null;case 13:if(Zt(ir),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(er&&Us!==null&&e.mode&1&&!(e.flags&128))Jj(),Sc(),e.flags|=98560,a=!1;else if(a=Rh(e),s!==null&&s.dehydrated!==null){if(t===null){if(!a)throw Error(Xe(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Xe(317));a[Zn]=e}else Sc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Wr(e),a=!1}else jn!==null&&(Uy(jn),jn=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||ir.current&1?Cr===0&&(Cr=3):Rb())),e.updateQueue!==null&&(e.flags|=4),Wr(e),null);case 4:return Ec(),Oy(t,e),t===null&&yu(e.stateNode.containerInfo),Wr(e),null;case 10:return mb(e.type._context),Wr(e),null;case 17:return Ss(e.type)&&nf(),Wr(e),null;case 19:if(Zt(ir),a=e.memoizedState,a===null)return Wr(e),null;if(s=(e.flags&128)!==0,o=a.rendering,o===null)if(s)od(a,!1);else{if(Cr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=hf(t),o!==null){for(e.flags|=128,od(a,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=r,r=e.child;r!==null;)a=r,t=s,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Kt(ir,ir.current&1|2),e.child}t=t.sibling}a.tail!==null&&yr()>Cc&&(e.flags|=128,s=!0,od(a,!1),e.lanes=4194304)}else{if(!s)if(t=hf(o),t!==null){if(e.flags|=128,s=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),od(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!er)return Wr(e),null}else 2*yr()-a.renderingStartTime>Cc&&r!==1073741824&&(e.flags|=128,s=!0,od(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=yr(),e.sibling=null,r=ir.current,Kt(ir,s?r&1|2:r&1),e):(Wr(e),null);case 22:case 23:return Pb(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?Ms&1073741824&&(Wr(e),e.subtreeFlags&6&&(e.flags|=8192)):Wr(e),null;case 24:return null;case 25:return null}throw Error(Xe(156,e.tag))}function bP(t,e){switch(ub(e),e.tag){case 1:return Ss(e.type)&&nf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ec(),Zt(Ns),Zt(Jr),bb(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return vb(e),null;case 13:if(Zt(ir),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Xe(340));Sc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Zt(ir),null;case 4:return Ec(),null;case 10:return mb(e.type._context),null;case 22:case 23:return Pb(),null;case 24:return null;default:return null}}var Lh=!1,Gr=!1,wP=typeof WeakSet=="function"?WeakSet:Set,ot=null;function oc(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){ur(t,e,s)}else r.current=null}function Iy(t,e,r){try{r()}catch(s){ur(t,e,s)}}var s1=!1;function _P(t,e){if(xy=ef,t=Dj(),cb(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var i=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=t,p=null;t:for(;;){for(var f;h!==r||i!==0&&h.nodeType!==3||(l=o+i),h!==a||s!==0&&h.nodeType!==3||(c=o+s),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)p=h,h=f;for(;;){if(h===t)break t;if(p===r&&++d===i&&(l=o),p===a&&++u===s&&(c=o),(f=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=f}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(yy={focusedElem:t,selectionRange:r},ef=!1,ot=e;ot!==null;)if(e=ot,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ot=t;else for(;ot!==null;){e=ot;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,x=m.memoizedState,b=e.stateNode,y=b.getSnapshotBeforeUpdate(e.elementType===e.type?v:wn(e.type,v),x);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Xe(163))}}catch(w){ur(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,ot=t;break}ot=e.return}return m=s1,s1=!1,m}function zd(t,e,r){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&Iy(e,r,a)}i=i.next}while(i!==s)}}function Qf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var s=r.create;r.destroy=s()}r=r.next}while(r!==e)}}function Ly(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function IE(t){var e=t.alternate;e!==null&&(t.alternate=null,IE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Zn],delete e[bu],delete e[wy],delete e[nP],delete e[iP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function LE(t){return t.tag===5||t.tag===3||t.tag===4}function n1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||LE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function My(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=sf));else if(s!==4&&(t=t.child,t!==null))for(My(t,e,r),t=t.sibling;t!==null;)My(t,e,r),t=t.sibling}function Fy(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(Fy(t,e,r),t=t.sibling;t!==null;)Fy(t,e,r),t=t.sibling}var Fr=null,_n=!1;function Wi(t,e,r){for(r=r.child;r!==null;)ME(t,e,r),r=r.sibling}function ME(t,e,r){if(ai&&typeof ai.onCommitFiberUnmount=="function")try{ai.onCommitFiberUnmount(zf,r)}catch{}switch(r.tag){case 5:Gr||oc(r,e);case 6:var s=Fr,i=_n;Fr=null,Wi(t,e,r),Fr=s,_n=i,Fr!==null&&(_n?(t=Fr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Fr.removeChild(r.stateNode));break;case 18:Fr!==null&&(_n?(t=Fr,r=r.stateNode,t.nodeType===8?dg(t.parentNode,r):t.nodeType===1&&dg(t,r),mu(t)):dg(Fr,r.stateNode));break;case 4:s=Fr,i=_n,Fr=r.stateNode.containerInfo,_n=!0,Wi(t,e,r),Fr=s,_n=i;break;case 0:case 11:case 14:case 15:if(!Gr&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Iy(r,e,o),i=i.next}while(i!==s)}Wi(t,e,r);break;case 1:if(!Gr&&(oc(r,e),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(l){ur(r,e,l)}Wi(t,e,r);break;case 21:Wi(t,e,r);break;case 22:r.mode&1?(Gr=(s=Gr)||r.memoizedState!==null,Wi(t,e,r),Gr=s):Wi(t,e,r);break;default:Wi(t,e,r)}}function i1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new wP),e.forEach(function(s){var i=PP.bind(null,t,s);r.has(s)||(r.add(s),s.then(i,i))})}}function fn(t,e){var r=e.deletions;if(r!==null)for(var s=0;s<r.length;s++){var i=r[s];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Fr=l.stateNode,_n=!1;break e;case 3:Fr=l.stateNode.containerInfo,_n=!0;break e;case 4:Fr=l.stateNode.containerInfo,_n=!0;break e}l=l.return}if(Fr===null)throw Error(Xe(160));ME(a,o,i),Fr=null,_n=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){ur(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)FE(e,t),e=e.sibling}function FE(t,e){var r=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(fn(e,t),$n(t),s&4){try{zd(3,t,t.return),Qf(3,t)}catch(v){ur(t,t.return,v)}try{zd(5,t,t.return)}catch(v){ur(t,t.return,v)}}break;case 1:fn(e,t),$n(t),s&512&&r!==null&&oc(r,r.return);break;case 5:if(fn(e,t),$n(t),s&512&&r!==null&&oc(r,r.return),t.flags&32){var i=t.stateNode;try{uu(i,"")}catch(v){ur(t,t.return,v)}}if(s&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&ij(i,a),oy(l,o);var d=oy(l,a);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?dj(i,h):u==="dangerouslySetInnerHTML"?lj(i,h):u==="children"?uu(i,h):Yv(i,u,h,d)}switch(l){case"input":ry(i,a);break;case"textarea":aj(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var f=a.value;f!=null?hc(i,!!a.multiple,f,!1):p!==!!a.multiple&&(a.defaultValue!=null?hc(i,!!a.multiple,a.defaultValue,!0):hc(i,!!a.multiple,a.multiple?[]:"",!1))}i[bu]=a}catch(v){ur(t,t.return,v)}}break;case 6:if(fn(e,t),$n(t),s&4){if(t.stateNode===null)throw Error(Xe(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(v){ur(t,t.return,v)}}break;case 3:if(fn(e,t),$n(t),s&4&&r!==null&&r.memoizedState.isDehydrated)try{mu(e.containerInfo)}catch(v){ur(t,t.return,v)}break;case 4:fn(e,t),$n(t);break;case 13:fn(e,t),$n(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(kb=yr())),s&4&&i1(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(Gr=(d=Gr)||u,fn(e,t),Gr=d):fn(e,t),$n(t),s&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(ot=t,u=t.child;u!==null;){for(h=ot=u;ot!==null;){switch(p=ot,f=p.child,p.tag){case 0:case 11:case 14:case 15:zd(4,p,p.return);break;case 1:oc(p,p.return);var m=p.stateNode;if(typeof m.componentWillUnmount=="function"){s=p,r=p.return;try{e=s,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(v){ur(s,r,v)}}break;case 5:oc(p,p.return);break;case 22:if(p.memoizedState!==null){o1(h);continue}}f!==null?(f.return=p,ot=f):o1(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=cj("display",o))}catch(v){ur(t,t.return,v)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(v){ur(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fn(e,t),$n(t),s&4&&i1(t);break;case 21:break;default:fn(e,t),$n(t)}}function $n(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(LE(r)){var s=r;break e}r=r.return}throw Error(Xe(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(uu(i,""),s.flags&=-33);var a=n1(t);Fy(t,a,i);break;case 3:case 4:var o=s.stateNode.containerInfo,l=n1(t);My(t,l,o);break;default:throw Error(Xe(161))}}catch(c){ur(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function NP(t,e,r){ot=t,DE(t)}function DE(t,e,r){for(var s=(t.mode&1)!==0;ot!==null;){var i=ot,a=i.child;if(i.tag===22&&s){var o=i.memoizedState!==null||Lh;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Gr;l=Lh;var d=Gr;if(Lh=o,(Gr=c)&&!d)for(ot=i;ot!==null;)o=ot,c=o.child,o.tag===22&&o.memoizedState!==null?l1(i):c!==null?(c.return=o,ot=c):l1(i);for(;a!==null;)ot=a,DE(a),a=a.sibling;ot=i,Lh=l,Gr=d}a1(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,ot=a):a1(t)}}function a1(t){for(;ot!==null;){var e=ot;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Gr||Qf(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Gr)if(r===null)s.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:wn(e.type,r.memoizedProps);s.componentDidUpdate(i,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&z_(e,a,s);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}z_(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&mu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Xe(163))}Gr||e.flags&512&&Ly(e)}catch(p){ur(e,e.return,p)}}if(e===t){ot=null;break}if(r=e.sibling,r!==null){r.return=e.return,ot=r;break}ot=e.return}}function o1(t){for(;ot!==null;){var e=ot;if(e===t){ot=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ot=r;break}ot=e.return}}function l1(t){for(;ot!==null;){var e=ot;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Qf(4,e)}catch(c){ur(e,r,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var i=e.return;try{s.componentDidMount()}catch(c){ur(e,i,c)}}var a=e.return;try{Ly(e)}catch(c){ur(e,a,c)}break;case 5:var o=e.return;try{Ly(e)}catch(c){ur(e,o,c)}}}catch(c){ur(e,e.return,c)}if(e===t){ot=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ot=l;break}ot=e.return}}var SP=Math.ceil,mf=Ui.ReactCurrentDispatcher,Tb=Ui.ReactCurrentOwner,on=Ui.ReactCurrentBatchConfig,Rt=0,Ir=null,Nr=null,Vr=0,Ms=0,lc=Ka(0),Cr=0,Eu=null,Yo=0,Zf=0,Cb=0,Xd=null,ys=null,kb=0,Cc=1/0,wi=null,gf=!1,Dy=null,_a=null,Mh=!1,ga=null,xf=0,Wd=0,By=null,Ip=-1,Lp=0;function ss(){return Rt&6?yr():Ip!==-1?Ip:Ip=yr()}function Na(t){return t.mode&1?Rt&2&&Vr!==0?Vr&-Vr:oP.transition!==null?(Lp===0&&(Lp=_j()),Lp):(t=Ut,t!==0||(t=window.event,t=t===void 0?16:kj(t.type)),t):1}function An(t,e,r,s){if(50<Wd)throw Wd=0,By=null,Error(Xe(185));Hu(t,r,s),(!(Rt&2)||t!==Ir)&&(t===Ir&&(!(Rt&2)&&(Zf|=r),Cr===4&&ca(t,Vr)),js(t,s),r===1&&Rt===0&&!(e.mode&1)&&(Cc=yr()+500,Gf&&Ga()))}function js(t,e){var r=t.callbackNode;o3(t,e);var s=Zp(t,t===Ir?Vr:0);if(s===0)r!==null&&x_(r),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(r!=null&&x_(r),e===1)t.tag===0?aP(c1.bind(null,t)):Kj(c1.bind(null,t)),rP(function(){!(Rt&6)&&Ga()}),r=null;else{switch(Nj(s)){case 1:r=tb;break;case 4:r=bj;break;case 16:r=Qp;break;case 536870912:r=wj;break;default:r=Qp}r=WE(r,BE.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function BE(t,e){if(Ip=-1,Lp=0,Rt&6)throw Error(Xe(327));var r=t.callbackNode;if(xc()&&t.callbackNode!==r)return null;var s=Zp(t,t===Ir?Vr:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=yf(t,s);else{e=s;var i=Rt;Rt|=2;var a=UE();(Ir!==t||Vr!==e)&&(wi=null,Cc=yr()+500,Do(t,e));do try{TP();break}catch(l){$E(t,l)}while(1);fb(),mf.current=a,Rt=i,Nr!==null?e=0:(Ir=null,Vr=0,e=Cr)}if(e!==0){if(e===2&&(i=hy(t),i!==0&&(s=i,e=$y(t,i))),e===1)throw r=Eu,Do(t,0),ca(t,s),js(t,yr()),r;if(e===6)ca(t,s);else{if(i=t.current.alternate,!(s&30)&&!jP(i)&&(e=yf(t,s),e===2&&(a=hy(t),a!==0&&(s=a,e=$y(t,a))),e===1))throw r=Eu,Do(t,0),ca(t,s),js(t,yr()),r;switch(t.finishedWork=i,t.finishedLanes=s,e){case 0:case 1:throw Error(Xe(345));case 2:jo(t,ys,wi);break;case 3:if(ca(t,s),(s&130023424)===s&&(e=kb+500-yr(),10<e)){if(Zp(t,0)!==0)break;if(i=t.suspendedLanes,(i&s)!==s){ss(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=by(jo.bind(null,t,ys,wi),e);break}jo(t,ys,wi);break;case 4:if(ca(t,s),(s&4194240)===s)break;for(e=t.eventTimes,i=-1;0<s;){var o=31-kn(s);a=1<<o,o=e[o],o>i&&(i=o),s&=~a}if(s=i,s=yr()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*SP(s/1960))-s,10<s){t.timeoutHandle=by(jo.bind(null,t,ys,wi),s);break}jo(t,ys,wi);break;case 5:jo(t,ys,wi);break;default:throw Error(Xe(329))}}}return js(t,yr()),t.callbackNode===r?BE.bind(null,t):null}function $y(t,e){var r=Xd;return t.current.memoizedState.isDehydrated&&(Do(t,e).flags|=256),t=yf(t,e),t!==2&&(e=ys,ys=r,e!==null&&Uy(e)),t}function Uy(t){ys===null?ys=t:ys.push.apply(ys,t)}function jP(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var i=r[s],a=i.getSnapshot;i=i.value;try{if(!In(a(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ca(t,e){for(e&=~Cb,e&=~Zf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-kn(e),s=1<<r;t[r]=-1,e&=~s}}function c1(t){if(Rt&6)throw Error(Xe(327));xc();var e=Zp(t,0);if(!(e&1))return js(t,yr()),null;var r=yf(t,e);if(t.tag!==0&&r===2){var s=hy(t);s!==0&&(e=s,r=$y(t,s))}if(r===1)throw r=Eu,Do(t,0),ca(t,e),js(t,yr()),r;if(r===6)throw Error(Xe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,jo(t,ys,wi),js(t,yr()),null}function Ab(t,e){var r=Rt;Rt|=1;try{return t(e)}finally{Rt=r,Rt===0&&(Cc=yr()+500,Gf&&Ga())}}function Jo(t){ga!==null&&ga.tag===0&&!(Rt&6)&&xc();var e=Rt;Rt|=1;var r=on.transition,s=Ut;try{if(on.transition=null,Ut=1,t)return t()}finally{Ut=s,on.transition=r,Rt=e,!(Rt&6)&&Ga()}}function Pb(){Ms=lc.current,Zt(lc)}function Do(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,tP(r)),Nr!==null)for(r=Nr.return;r!==null;){var s=r;switch(ub(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&nf();break;case 3:Ec(),Zt(Ns),Zt(Jr),bb();break;case 5:vb(s);break;case 4:Ec();break;case 13:Zt(ir);break;case 19:Zt(ir);break;case 10:mb(s.type._context);break;case 22:case 23:Pb()}r=r.return}if(Ir=t,Nr=t=Sa(t.current,null),Vr=Ms=e,Cr=0,Eu=null,Cb=Zf=Yo=0,ys=Xd=null,Ro!==null){for(e=0;e<Ro.length;e++)if(r=Ro[e],s=r.interleaved,s!==null){r.interleaved=null;var i=s.next,a=r.pending;if(a!==null){var o=a.next;a.next=i,s.next=o}r.pending=s}Ro=null}return t}function $E(t,e){do{var r=Nr;try{if(fb(),Pp.current=ff,pf){for(var s=ar.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}pf=!1}if(Go=0,Ar=Tr=ar=null,Hd=!1,Nu=0,Tb.current=null,r===null||r.return===null){Cr=1,Eu=e,Nr=null;break}e:{var a=t,o=r.return,l=r,c=e;if(e=Vr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=Y_(o);if(f!==null){f.flags&=-257,J_(f,o,l,a,e),f.mode&1&&G_(a,d,e),e=f,c=d;var m=e.updateQueue;if(m===null){var v=new Set;v.add(c),e.updateQueue=v}else m.add(c);break e}else{if(!(e&1)){G_(a,d,e),Rb();break e}c=Error(Xe(426))}}else if(er&&l.mode&1){var x=Y_(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),J_(x,o,l,a,e),hb(Tc(c,l));break e}}a=c=Tc(c,l),Cr!==4&&(Cr=2),Xd===null?Xd=[a]:Xd.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var b=NE(a,c,e);H_(a,b);break e;case 1:l=c;var y=a.type,g=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(_a===null||!_a.has(g)))){a.flags|=65536,e&=-e,a.lanes|=e;var w=SE(a,l,e);H_(a,w);break e}}a=a.return}while(a!==null)}HE(r)}catch(S){e=S,Nr===r&&r!==null&&(Nr=r=r.return);continue}break}while(1)}function UE(){var t=mf.current;return mf.current=ff,t===null?ff:t}function Rb(){(Cr===0||Cr===3||Cr===2)&&(Cr=4),Ir===null||!(Yo&268435455)&&!(Zf&268435455)||ca(Ir,Vr)}function yf(t,e){var r=Rt;Rt|=2;var s=UE();(Ir!==t||Vr!==e)&&(wi=null,Do(t,e));do try{EP();break}catch(i){$E(t,i)}while(1);if(fb(),Rt=r,mf.current=s,Nr!==null)throw Error(Xe(261));return Ir=null,Vr=0,Cr}function EP(){for(;Nr!==null;)VE(Nr)}function TP(){for(;Nr!==null&&!Q4();)VE(Nr)}function VE(t){var e=XE(t.alternate,t,Ms);t.memoizedProps=t.pendingProps,e===null?HE(t):Nr=e,Tb.current=null}function HE(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=bP(r,e),r!==null){r.flags&=32767,Nr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Cr=6,Nr=null;return}}else if(r=vP(r,e,Ms),r!==null){Nr=r;return}if(e=e.sibling,e!==null){Nr=e;return}Nr=e=t}while(e!==null);Cr===0&&(Cr=5)}function jo(t,e,r){var s=Ut,i=on.transition;try{on.transition=null,Ut=1,CP(t,e,r,s)}finally{on.transition=i,Ut=s}return null}function CP(t,e,r,s){do xc();while(ga!==null);if(Rt&6)throw Error(Xe(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Xe(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(l3(t,a),t===Ir&&(Nr=Ir=null,Vr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Mh||(Mh=!0,WE(Qp,function(){return xc(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=on.transition,on.transition=null;var o=Ut;Ut=1;var l=Rt;Rt|=4,Tb.current=null,_P(t,r),FE(r,t),K3(yy),ef=!!xy,yy=xy=null,t.current=r,NP(r),Z4(),Rt=l,Ut=o,on.transition=a}else t.current=r;if(Mh&&(Mh=!1,ga=t,xf=i),a=t.pendingLanes,a===0&&(_a=null),r3(r.stateNode),js(t,yr()),e!==null)for(s=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],s(i.value,{componentStack:i.stack,digest:i.digest});if(gf)throw gf=!1,t=Dy,Dy=null,t;return xf&1&&t.tag!==0&&xc(),a=t.pendingLanes,a&1?t===By?Wd++:(Wd=0,By=t):Wd=0,Ga(),null}function xc(){if(ga!==null){var t=Nj(xf),e=on.transition,r=Ut;try{if(on.transition=null,Ut=16>t?16:t,ga===null)var s=!1;else{if(t=ga,ga=null,xf=0,Rt&6)throw Error(Xe(331));var i=Rt;for(Rt|=4,ot=t.current;ot!==null;){var a=ot,o=a.child;if(ot.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(ot=d;ot!==null;){var u=ot;switch(u.tag){case 0:case 11:case 15:zd(8,u,a)}var h=u.child;if(h!==null)h.return=u,ot=h;else for(;ot!==null;){u=ot;var p=u.sibling,f=u.return;if(IE(u),u===d){ot=null;break}if(p!==null){p.return=f,ot=p;break}ot=f}}}var m=a.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}ot=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,ot=o;else e:for(;ot!==null;){if(a=ot,a.flags&2048)switch(a.tag){case 0:case 11:case 15:zd(9,a,a.return)}var b=a.sibling;if(b!==null){b.return=a.return,ot=b;break e}ot=a.return}}var y=t.current;for(ot=y;ot!==null;){o=ot;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,ot=g;else e:for(o=y;ot!==null;){if(l=ot,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Qf(9,l)}}catch(S){ur(l,l.return,S)}if(l===o){ot=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,ot=w;break e}ot=l.return}}if(Rt=i,Ga(),ai&&typeof ai.onPostCommitFiberRoot=="function")try{ai.onPostCommitFiberRoot(zf,t)}catch{}s=!0}return s}finally{Ut=r,on.transition=e}}return!1}function d1(t,e,r){e=Tc(r,e),e=NE(t,e,1),t=wa(t,e,1),e=ss(),t!==null&&(Hu(t,1,e),js(t,e))}function ur(t,e,r){if(t.tag===3)d1(t,t,r);else for(;e!==null;){if(e.tag===3){d1(e,t,r);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(_a===null||!_a.has(s))){t=Tc(r,t),t=SE(e,t,1),e=wa(e,t,1),t=ss(),e!==null&&(Hu(e,1,t),js(e,t));break}}e=e.return}}function kP(t,e,r){var s=t.pingCache;s!==null&&s.delete(e),e=ss(),t.pingedLanes|=t.suspendedLanes&r,Ir===t&&(Vr&r)===r&&(Cr===4||Cr===3&&(Vr&130023424)===Vr&&500>yr()-kb?Do(t,0):Cb|=r),js(t,e)}function zE(t,e){e===0&&(t.mode&1?(e=Eh,Eh<<=1,!(Eh&130023424)&&(Eh=4194304)):e=1);var r=ss();t=Fi(t,e),t!==null&&(Hu(t,e,r),js(t,r))}function AP(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),zE(t,r)}function PP(t,e){var r=0;switch(t.tag){case 13:var s=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(Xe(314))}s!==null&&s.delete(e),zE(t,r)}var XE;XE=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ns.current)_s=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return _s=!1,yP(t,e,r);_s=!!(t.flags&131072)}else _s=!1,er&&e.flags&1048576&&Gj(e,lf,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Op(t,e),t=e.pendingProps;var i=Nc(e,Jr.current);gc(e,r),i=_b(null,e,s,t,i,r);var a=Nb();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ss(s)?(a=!0,af(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,xb(e),i.updater=Jf,e.stateNode=i,i._reactInternals=e,Ty(e,s,t,r),e=Ay(null,e,s,!0,a,r)):(e.tag=0,er&&a&&db(e),ts(null,e,i,r),e=e.child),e;case 16:s=e.elementType;e:{switch(Op(t,e),t=e.pendingProps,i=s._init,s=i(s._payload),e.type=s,i=e.tag=OP(s),t=wn(s,t),i){case 0:e=ky(null,e,s,t,r);break e;case 1:e=e1(null,e,s,t,r);break e;case 11:e=Q_(null,e,s,t,r);break e;case 14:e=Z_(null,e,s,wn(s.type,t),r);break e}throw Error(Xe(306,s,""))}return e;case 0:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:wn(s,i),ky(t,e,s,i,r);case 1:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:wn(s,i),e1(t,e,s,i,r);case 3:e:{if(CE(e),t===null)throw Error(Xe(387));s=e.pendingProps,a=e.memoizedState,i=a.element,tE(t,e),uf(e,s,null,r);var o=e.memoizedState;if(s=o.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Tc(Error(Xe(423)),e),e=t1(t,e,s,r,i);break e}else if(s!==i){i=Tc(Error(Xe(424)),e),e=t1(t,e,s,r,i);break e}else for(Us=ba(e.stateNode.containerInfo.firstChild),Vs=e,er=!0,jn=null,r=Zj(e,null,s,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Sc(),s===i){e=Di(t,e,r);break e}ts(t,e,s,r)}e=e.child}return e;case 5:return rE(e),t===null&&Sy(e),s=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,vy(s,i)?o=null:a!==null&&vy(s,a)&&(e.flags|=32),TE(t,e),ts(t,e,o,r),e.child;case 6:return t===null&&Sy(e),null;case 13:return kE(t,e,r);case 4:return yb(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=jc(e,null,s,r):ts(t,e,s,r),e.child;case 11:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:wn(s,i),Q_(t,e,s,i,r);case 7:return ts(t,e,e.pendingProps,r),e.child;case 8:return ts(t,e,e.pendingProps.children,r),e.child;case 12:return ts(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(s=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,Kt(cf,s._currentValue),s._currentValue=o,a!==null)if(In(a.value,o)){if(a.children===i.children&&!Ns.current){e=Di(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(a.tag===1){c=Ri(-1,r&-r),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),jy(a.return,r,e),l.lanes|=r;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Xe(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),jy(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}ts(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps.children,gc(e,r),i=cn(i),s=s(i),e.flags|=1,ts(t,e,s,r),e.child;case 14:return s=e.type,i=wn(s,e.pendingProps),i=wn(s.type,i),Z_(t,e,s,i,r);case 15:return jE(t,e,e.type,e.pendingProps,r);case 17:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:wn(s,i),Op(t,e),e.tag=1,Ss(s)?(t=!0,af(e)):t=!1,gc(e,r),_E(e,s,i),Ty(e,s,i,r),Ay(null,e,s,!0,t,r);case 19:return AE(t,e,r);case 22:return EE(t,e,r)}throw Error(Xe(156,e.tag))};function WE(t,e){return vj(t,e)}function RP(t,e,r,s){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nn(t,e,r,s){return new RP(t,e,r,s)}function Ob(t){return t=t.prototype,!(!t||!t.isReactComponent)}function OP(t){if(typeof t=="function")return Ob(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Qv)return 11;if(t===Zv)return 14}return 2}function Sa(t,e){var r=t.alternate;return r===null?(r=nn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Mp(t,e,r,s,i,a){var o=2;if(s=t,typeof t=="function")Ob(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ql:return Bo(r.children,i,a,e);case Jv:o=8,i|=8;break;case Jx:return t=nn(12,r,e,i|2),t.elementType=Jx,t.lanes=a,t;case Qx:return t=nn(13,r,e,i),t.elementType=Qx,t.lanes=a,t;case Zx:return t=nn(19,r,e,i),t.elementType=Zx,t.lanes=a,t;case rj:return e0(r,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ej:o=10;break e;case tj:o=9;break e;case Qv:o=11;break e;case Zv:o=14;break e;case na:o=16,s=null;break e}throw Error(Xe(130,t==null?t:typeof t,""))}return e=nn(o,r,e,i),e.elementType=t,e.type=s,e.lanes=a,e}function Bo(t,e,r,s){return t=nn(7,t,s,e),t.lanes=r,t}function e0(t,e,r,s){return t=nn(22,t,s,e),t.elementType=rj,t.lanes=r,t.stateNode={isHidden:!1},t}function yg(t,e,r){return t=nn(6,t,null,e),t.lanes=r,t}function vg(t,e,r){return e=nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function IP(t,e,r,s,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zm(0),this.expirationTimes=Zm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zm(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ib(t,e,r,s,i,a,o,l,c){return t=new IP(t,e,r,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=nn(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},xb(a),t}function LP(t,e,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jl,key:s==null?null:""+s,children:t,containerInfo:e,implementation:r}}function qE(t){if(!t)return Ra;t=t._reactInternals;e:{if(ul(t)!==t||t.tag!==1)throw Error(Xe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ss(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Xe(171))}if(t.tag===1){var r=t.type;if(Ss(r))return qj(t,r,e)}return e}function KE(t,e,r,s,i,a,o,l,c){return t=Ib(r,s,!0,t,i,a,o,l,c),t.context=qE(null),r=t.current,s=ss(),i=Na(r),a=Ri(s,i),a.callback=e??null,wa(r,a,i),t.current.lanes=i,Hu(t,i,s),js(t,s),t}function t0(t,e,r,s){var i=e.current,a=ss(),o=Na(i);return r=qE(r),e.context===null?e.context=r:e.pendingContext=r,e=Ri(a,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=wa(i,e,o),t!==null&&(An(t,i,o,a),Ap(t,i,o)),o}function vf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function u1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Lb(t,e){u1(t,e),(t=t.alternate)&&u1(t,e)}function MP(){return null}var GE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mb(t){this._internalRoot=t}r0.prototype.render=Mb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Xe(409));t0(t,e,null,null)};r0.prototype.unmount=Mb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Jo(function(){t0(null,t,null,null)}),e[Mi]=null}};function r0(t){this._internalRoot=t}r0.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ej();t={blockedOn:null,target:t,priority:e};for(var r=0;r<la.length&&e!==0&&e<la[r].priority;r++);la.splice(r,0,t),r===0&&Cj(t)}};function Fb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function s0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function h1(){}function FP(t,e,r,s,i){if(i){if(typeof s=="function"){var a=s;s=function(){var d=vf(o);a.call(d)}}var o=KE(e,s,t,0,null,!1,!1,"",h1);return t._reactRootContainer=o,t[Mi]=o.current,yu(t.nodeType===8?t.parentNode:t),Jo(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof s=="function"){var l=s;s=function(){var d=vf(c);l.call(d)}}var c=Ib(t,0,!1,null,null,!1,!1,"",h1);return t._reactRootContainer=c,t[Mi]=c.current,yu(t.nodeType===8?t.parentNode:t),Jo(function(){t0(e,c,r,s)}),c}function n0(t,e,r,s,i){var a=r._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var c=vf(o);l.call(c)}}t0(e,o,t,i)}else o=FP(r,e,t,i,s);return vf(o)}Sj=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Ad(e.pendingLanes);r!==0&&(rb(e,r|1),js(e,yr()),!(Rt&6)&&(Cc=yr()+500,Ga()))}break;case 13:Jo(function(){var s=Fi(t,1);if(s!==null){var i=ss();An(s,t,1,i)}}),Lb(t,1)}};sb=function(t){if(t.tag===13){var e=Fi(t,134217728);if(e!==null){var r=ss();An(e,t,134217728,r)}Lb(t,134217728)}};jj=function(t){if(t.tag===13){var e=Na(t),r=Fi(t,e);if(r!==null){var s=ss();An(r,t,e,s)}Lb(t,e)}};Ej=function(){return Ut};Tj=function(t,e){var r=Ut;try{return Ut=t,e()}finally{Ut=r}};cy=function(t,e,r){switch(e){case"input":if(ry(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var s=r[e];if(s!==t&&s.form===t.form){var i=Kf(s);if(!i)throw Error(Xe(90));nj(s),ry(s,i)}}}break;case"textarea":aj(t,r);break;case"select":e=r.value,e!=null&&hc(t,!!r.multiple,e,!1)}};pj=Ab;fj=Jo;var DP={usingClientEntryPoint:!1,Events:[Xu,rc,Kf,uj,hj,Ab]},ld={findFiberByHostInstance:Po,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},BP={bundleType:ld.bundleType,version:ld.version,rendererPackageName:ld.rendererPackageName,rendererConfig:ld.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ui.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=xj(t),t===null?null:t.stateNode},findFiberByHostInstance:ld.findFiberByHostInstance||MP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fh.isDisabled&&Fh.supportsFiber)try{zf=Fh.inject(BP),ai=Fh}catch{}}Xs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DP;Xs.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fb(e))throw Error(Xe(200));return LP(t,e,null,r)};Xs.createRoot=function(t,e){if(!Fb(t))throw Error(Xe(299));var r=!1,s="",i=GE;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ib(t,1,!1,null,null,r,!1,s,i),t[Mi]=e.current,yu(t.nodeType===8?t.parentNode:t),new Mb(e)};Xs.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Xe(188)):(t=Object.keys(t).join(","),Error(Xe(268,t)));return t=xj(e),t=t===null?null:t.stateNode,t};Xs.flushSync=function(t){return Jo(t)};Xs.hydrate=function(t,e,r){if(!s0(e))throw Error(Xe(200));return n0(null,t,e,!0,r)};Xs.hydrateRoot=function(t,e,r){if(!Fb(t))throw Error(Xe(405));var s=r!=null&&r.hydratedSources||null,i=!1,a="",o=GE;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=KE(e,null,t,1,r??null,i,!1,a,o),t[Mi]=e.current,yu(t),s)for(t=0;t<s.length;t++)r=s[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new r0(e)};Xs.render=function(t,e,r){if(!s0(e))throw Error(Xe(200));return n0(null,t,e,!1,r)};Xs.unmountComponentAtNode=function(t){if(!s0(t))throw Error(Xe(40));return t._reactRootContainer?(Jo(function(){n0(null,null,t,!1,function(){t._reactRootContainer=null,t[Mi]=null})}),!0):!1};Xs.unstable_batchedUpdates=Ab;Xs.unstable_renderSubtreeIntoContainer=function(t,e,r,s){if(!s0(r))throw Error(Xe(200));if(t==null||t._reactInternals===void 0)throw Error(Xe(38));return n0(t,e,r,!1,s)};Xs.version="18.3.1-next-f1338f8080-20240426";function YE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(YE)}catch(t){console.error(t)}}YE(),Y2.exports=Xs;var $P=Y2.exports,p1=$P;Gx.createRoot=p1.createRoot,Gx.hydrateRoot=p1.hydrateRoot;let UP={data:""},VP=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||UP,HP=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,zP=/\/\*[^]*?\*\/|  +/g,f1=/\n+/g,da=(t,e)=>{let r="",s="",i="";for(let a in t){let o=t[a];a[0]=="@"?a[1]=="i"?r=a+" "+o+";":s+=a[1]=="f"?da(o,a):a+"{"+da(o,a[1]=="k"?"":e)+"}":typeof o=="object"?s+=da(o,e?e.replace(/([^,])+/g,l=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):a):o!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=da.p?da.p(a,o):a+":"+o+";")}return r+(e&&i?e+"{"+i+"}":i)+s},pi={},JE=t=>{if(typeof t=="object"){let e="";for(let r in t)e+=r+JE(t[r]);return e}return t},XP=(t,e,r,s,i)=>{let a=JE(t),o=pi[a]||(pi[a]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(a));if(!pi[o]){let c=a!==t?t:(d=>{let u,h,p=[{}];for(;u=HP.exec(d.replace(zP,""));)u[4]?p.shift():u[3]?(h=u[3].replace(f1," ").trim(),p.unshift(p[0][h]=p[0][h]||{})):p[0][u[1]]=u[2].replace(f1," ").trim();return p[0]})(t);pi[o]=da(i?{["@keyframes "+o]:c}:c,r?"":"."+o)}let l=r&&pi.g?pi.g:null;return r&&(pi.g=pi[o]),((c,d,u,h)=>{h?d.data=d.data.replace(h,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(pi[o],e,s,l),o},WP=(t,e,r)=>t.reduce((s,i,a)=>{let o=e[a];if(o&&o.call){let l=o(r),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":da(l,""):l===!1?"":l}return s+i+(o??"")},"");function i0(t){let e=this||{},r=t.call?t(e.p):t;return XP(r.unshift?r.raw?WP(r,[].slice.call(arguments,1),e.p):r.reduce((s,i)=>Object.assign(s,i&&i.call?i(e.p):i),{}):r,VP(e.target),e.g,e.o,e.k)}let QE,Vy,Hy;i0.bind({g:1});let Bi=i0.bind({k:1});function qP(t,e,r,s){da.p=e,QE=t,Vy=r,Hy=s}function Ya(t,e){let r=this||{};return function(){let s=arguments;function i(a,o){let l=Object.assign({},a),c=l.className||i.className;r.p=Object.assign({theme:Vy&&Vy()},l),r.o=/ *go\d+/.test(c),l.className=i0.apply(r,s)+(c?" "+c:""),e&&(l.ref=o);let d=t;return t[0]&&(d=l.as||t,delete l.as),Hy&&d[0]&&Hy(l),QE(d,l)}return e?e(i):i}}var KP=t=>typeof t=="function",bf=(t,e)=>KP(t)?t(e):t,GP=(()=>{let t=0;return()=>(++t).toString()})(),ZE=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),YP=20,eT=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,YP)};case 1:return{...t,toasts:t.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:r}=e;return eT(t,{type:t.toasts.find(a=>a.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=e;return{...t,toasts:t.toasts.map(a=>a.id===s||s===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+i}))}}},Fp=[],Dp={toasts:[],pausedAt:void 0},hl=t=>{Dp=eT(Dp,t),Fp.forEach(e=>{e(Dp)})},JP={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},QP=(t={})=>{let[e,r]=T.useState(Dp);T.useEffect(()=>(Fp.push(r),()=>{let i=Fp.indexOf(r);i>-1&&Fp.splice(i,1)}),[e]);let s=e.toasts.map(i=>{var a,o,l;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((a=t[i.type])==null?void 0:a.removeDelay)||(t==null?void 0:t.removeDelay),duration:i.duration||((o=t[i.type])==null?void 0:o.duration)||(t==null?void 0:t.duration)||JP[i.type],style:{...t.style,...(l=t[i.type])==null?void 0:l.style,...i.style}}});return{...e,toasts:s}},ZP=(t,e="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:(r==null?void 0:r.id)||GP()}),qu=t=>(e,r)=>{let s=ZP(e,t,r);return hl({type:2,toast:s}),s.id},rs=(t,e)=>qu("blank")(t,e);rs.error=qu("error");rs.success=qu("success");rs.loading=qu("loading");rs.custom=qu("custom");rs.dismiss=t=>{hl({type:3,toastId:t})};rs.remove=t=>hl({type:4,toastId:t});rs.promise=(t,e,r)=>{let s=rs.loading(e.loading,{...r,...r==null?void 0:r.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let a=e.success?bf(e.success,i):void 0;return a?rs.success(a,{id:s,...r,...r==null?void 0:r.success}):rs.dismiss(s),i}).catch(i=>{let a=e.error?bf(e.error,i):void 0;a?rs.error(a,{id:s,...r,...r==null?void 0:r.error}):rs.dismiss(s)}),t};var eR=(t,e)=>{hl({type:1,toast:{id:t,height:e}})},tR=()=>{hl({type:5,time:Date.now()})},qd=new Map,rR=1e3,sR=(t,e=rR)=>{if(qd.has(t))return;let r=setTimeout(()=>{qd.delete(t),hl({type:4,toastId:t})},e);qd.set(t,r)},nR=t=>{let{toasts:e,pausedAt:r}=QP(t);T.useEffect(()=>{if(r)return;let a=Date.now(),o=e.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(a-l.createdAt);if(c<0){l.visible&&rs.dismiss(l.id);return}return setTimeout(()=>rs.dismiss(l.id),c)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[e,r]);let s=T.useCallback(()=>{r&&hl({type:6,time:Date.now()})},[r]),i=T.useCallback((a,o)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:d}=o||{},u=e.filter(f=>(f.position||d)===(a.position||d)&&f.height),h=u.findIndex(f=>f.id===a.id),p=u.filter((f,m)=>m<h&&f.visible).length;return u.filter(f=>f.visible).slice(...l?[p+1]:[0,p]).reduce((f,m)=>f+(m.height||0)+c,0)},[e]);return T.useEffect(()=>{e.forEach(a=>{if(a.dismissed)sR(a.id,a.removeDelay);else{let o=qd.get(a.id);o&&(clearTimeout(o),qd.delete(a.id))}})},[e]),{toasts:e,handlers:{updateHeight:eR,startPause:tR,endPause:s,calculateOffset:i}}},iR=Bi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,aR=Bi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,oR=Bi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,lR=Ya("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${iR} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${aR} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${oR} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,cR=Bi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,dR=Ya("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${cR} 1s linear infinite;
`,uR=Bi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,hR=Bi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,pR=Ya("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${uR} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${hR} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,fR=Ya("div")`
  position: absolute;
`,mR=Ya("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,gR=Bi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,xR=Ya("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${gR} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,yR=({toast:t})=>{let{icon:e,type:r,iconTheme:s}=t;return e!==void 0?typeof e=="string"?T.createElement(xR,null,e):e:r==="blank"?null:T.createElement(mR,null,T.createElement(dR,{...s}),r!=="loading"&&T.createElement(fR,null,r==="error"?T.createElement(lR,{...s}):T.createElement(pR,{...s})))},vR=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,bR=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,wR="0%{opacity:0;} 100%{opacity:1;}",_R="0%{opacity:1;} 100%{opacity:0;}",NR=Ya("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,SR=Ya("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,jR=(t,e)=>{let r=t.includes("top")?1:-1,[s,i]=ZE()?[wR,_R]:[vR(r),bR(r)];return{animation:e?`${Bi(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Bi(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},ER=T.memo(({toast:t,position:e,style:r,children:s})=>{let i=t.height?jR(t.position||e||"top-center",t.visible):{opacity:0},a=T.createElement(yR,{toast:t}),o=T.createElement(SR,{...t.ariaProps},bf(t.message,t));return T.createElement(NR,{className:t.className,style:{...i,...r,...t.style}},typeof s=="function"?s({icon:a,message:o}):T.createElement(T.Fragment,null,a,o))});qP(T.createElement);var TR=({id:t,className:e,style:r,onHeightUpdate:s,children:i})=>{let a=T.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;s(t,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,s]);return T.createElement("div",{ref:a,className:e,style:r},i)},CR=(t,e)=>{let r=t.includes("top"),s=r?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:ZE()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(r?1:-1)}px)`,...s,...i}},kR=i0`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Dh=16,tT=({reverseOrder:t,position:e="top-center",toastOptions:r,gutter:s,children:i,containerStyle:a,containerClassName:o})=>{let{toasts:l,handlers:c}=nR(r);return T.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Dh,left:Dh,right:Dh,bottom:Dh,pointerEvents:"none",...a},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(d=>{let u=d.position||e,h=c.calculateOffset(d,{reverseOrder:t,gutter:s,defaultPosition:e}),p=CR(u,h);return T.createElement(TR,{id:d.id,key:d.id,onHeightUpdate:c.updateHeight,className:d.visible?kR:"",style:p},d.type==="custom"?bf(d.message,d):i?i(d):T.createElement(ER,{toast:d,position:u}))}))},ie=rs;function rT(t,e){return function(){return t.apply(e,arguments)}}const{toString:AR}=Object.prototype,{getPrototypeOf:Db}=Object,a0=(t=>e=>{const r=AR.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Mn=t=>(t=t.toLowerCase(),e=>a0(e)===t),o0=t=>e=>typeof e===t,{isArray:Vc}=Array,Tu=o0("undefined");function PR(t){return t!==null&&!Tu(t)&&t.constructor!==null&&!Tu(t.constructor)&&Hs(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const sT=Mn("ArrayBuffer");function RR(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&sT(t.buffer),e}const OR=o0("string"),Hs=o0("function"),nT=o0("number"),l0=t=>t!==null&&typeof t=="object",IR=t=>t===!0||t===!1,Bp=t=>{if(a0(t)!=="object")return!1;const e=Db(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},LR=Mn("Date"),MR=Mn("File"),FR=Mn("Blob"),DR=Mn("FileList"),BR=t=>l0(t)&&Hs(t.pipe),$R=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Hs(t.append)&&((e=a0(t))==="formdata"||e==="object"&&Hs(t.toString)&&t.toString()==="[object FormData]"))},UR=Mn("URLSearchParams"),[VR,HR,zR,XR]=["ReadableStream","Request","Response","Headers"].map(Mn),WR=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ku(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let s,i;if(typeof t!="object"&&(t=[t]),Vc(t))for(s=0,i=t.length;s<i;s++)e.call(null,t[s],s,t);else{const a=r?Object.getOwnPropertyNames(t):Object.keys(t),o=a.length;let l;for(s=0;s<o;s++)l=a[s],e.call(null,t[l],l,t)}}function iT(t,e){e=e.toLowerCase();const r=Object.keys(t);let s=r.length,i;for(;s-- >0;)if(i=r[s],e===i.toLowerCase())return i;return null}const Io=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),aT=t=>!Tu(t)&&t!==Io;function zy(){const{caseless:t}=aT(this)&&this||{},e={},r=(s,i)=>{const a=t&&iT(e,i)||i;Bp(e[a])&&Bp(s)?e[a]=zy(e[a],s):Bp(s)?e[a]=zy({},s):Vc(s)?e[a]=s.slice():e[a]=s};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&Ku(arguments[s],r);return e}const qR=(t,e,r,{allOwnKeys:s}={})=>(Ku(e,(i,a)=>{r&&Hs(i)?t[a]=rT(i,r):t[a]=i},{allOwnKeys:s}),t),KR=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),GR=(t,e,r,s)=>{t.prototype=Object.create(e.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},YR=(t,e,r,s)=>{let i,a,o;const l={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),a=i.length;a-- >0;)o=i[a],(!s||s(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=r!==!1&&Db(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},JR=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const s=t.indexOf(e,r);return s!==-1&&s===r},QR=t=>{if(!t)return null;if(Vc(t))return t;let e=t.length;if(!nT(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},ZR=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Db(Uint8Array)),eO=(t,e)=>{const s=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=s.next())&&!i.done;){const a=i.value;e.call(t,a[0],a[1])}},tO=(t,e)=>{let r;const s=[];for(;(r=t.exec(e))!==null;)s.push(r);return s},rO=Mn("HTMLFormElement"),sO=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,i){return s.toUpperCase()+i}),m1=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),nO=Mn("RegExp"),oT=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),s={};Ku(r,(i,a)=>{let o;(o=e(i,a,t))!==!1&&(s[a]=o||i)}),Object.defineProperties(t,s)},iO=t=>{oT(t,(e,r)=>{if(Hs(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=t[r];if(Hs(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},aO=(t,e)=>{const r={},s=i=>{i.forEach(a=>{r[a]=!0})};return Vc(t)?s(t):s(String(t).split(e)),r},oO=()=>{},lO=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,bg="abcdefghijklmnopqrstuvwxyz",g1="0123456789",lT={DIGIT:g1,ALPHA:bg,ALPHA_DIGIT:bg+bg.toUpperCase()+g1},cO=(t=16,e=lT.ALPHA_DIGIT)=>{let r="";const{length:s}=e;for(;t--;)r+=e[Math.random()*s|0];return r};function dO(t){return!!(t&&Hs(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const uO=t=>{const e=new Array(10),r=(s,i)=>{if(l0(s)){if(e.indexOf(s)>=0)return;if(!("toJSON"in s)){e[i]=s;const a=Vc(s)?[]:{};return Ku(s,(o,l)=>{const c=r(o,i+1);!Tu(c)&&(a[l]=c)}),e[i]=void 0,a}}return s};return r(t,0)},hO=Mn("AsyncFunction"),pO=t=>t&&(l0(t)||Hs(t))&&Hs(t.then)&&Hs(t.catch),cT=((t,e)=>t?setImmediate:e?((r,s)=>(Io.addEventListener("message",({source:i,data:a})=>{i===Io&&a===r&&s.length&&s.shift()()},!1),i=>{s.push(i),Io.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Hs(Io.postMessage)),fO=typeof queueMicrotask<"u"?queueMicrotask.bind(Io):typeof process<"u"&&process.nextTick||cT,Ae={isArray:Vc,isArrayBuffer:sT,isBuffer:PR,isFormData:$R,isArrayBufferView:RR,isString:OR,isNumber:nT,isBoolean:IR,isObject:l0,isPlainObject:Bp,isReadableStream:VR,isRequest:HR,isResponse:zR,isHeaders:XR,isUndefined:Tu,isDate:LR,isFile:MR,isBlob:FR,isRegExp:nO,isFunction:Hs,isStream:BR,isURLSearchParams:UR,isTypedArray:ZR,isFileList:DR,forEach:Ku,merge:zy,extend:qR,trim:WR,stripBOM:KR,inherits:GR,toFlatObject:YR,kindOf:a0,kindOfTest:Mn,endsWith:JR,toArray:QR,forEachEntry:eO,matchAll:tO,isHTMLForm:rO,hasOwnProperty:m1,hasOwnProp:m1,reduceDescriptors:oT,freezeMethods:iO,toObjectSet:aO,toCamelCase:sO,noop:oO,toFiniteNumber:lO,findKey:iT,global:Io,isContextDefined:aT,ALPHABET:lT,generateString:cO,isSpecCompliantForm:dO,toJSONObject:uO,isAsyncFn:hO,isThenable:pO,setImmediate:cT,asap:fO};function _t(t,e,r,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),s&&(this.request=s),i&&(this.response=i,this.status=i.status?i.status:null)}Ae.inherits(_t,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ae.toJSONObject(this.config),code:this.code,status:this.status}}});const dT=_t.prototype,uT={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{uT[t]={value:t}});Object.defineProperties(_t,uT);Object.defineProperty(dT,"isAxiosError",{value:!0});_t.from=(t,e,r,s,i,a)=>{const o=Object.create(dT);return Ae.toFlatObject(t,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),_t.call(o,t.message,e,r,s,i),o.cause=t,o.name=t.name,a&&Object.assign(o,a),o};const mO=null;function Xy(t){return Ae.isPlainObject(t)||Ae.isArray(t)}function hT(t){return Ae.endsWith(t,"[]")?t.slice(0,-2):t}function x1(t,e,r){return t?t.concat(e).map(function(i,a){return i=hT(i),!r&&a?"["+i+"]":i}).join(r?".":""):e}function gO(t){return Ae.isArray(t)&&!t.some(Xy)}const xO=Ae.toFlatObject(Ae,{},null,function(e){return/^is[A-Z]/.test(e)});function c0(t,e,r){if(!Ae.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=Ae.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,x){return!Ae.isUndefined(x[v])});const s=r.metaTokens,i=r.visitor||u,a=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&Ae.isSpecCompliantForm(e);if(!Ae.isFunction(i))throw new TypeError("visitor must be a function");function d(m){if(m===null)return"";if(Ae.isDate(m))return m.toISOString();if(!c&&Ae.isBlob(m))throw new _t("Blob is not supported. Use a Buffer instead.");return Ae.isArrayBuffer(m)||Ae.isTypedArray(m)?c&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function u(m,v,x){let b=m;if(m&&!x&&typeof m=="object"){if(Ae.endsWith(v,"{}"))v=s?v:v.slice(0,-2),m=JSON.stringify(m);else if(Ae.isArray(m)&&gO(m)||(Ae.isFileList(m)||Ae.endsWith(v,"[]"))&&(b=Ae.toArray(m)))return v=hT(v),b.forEach(function(g,w){!(Ae.isUndefined(g)||g===null)&&e.append(o===!0?x1([v],w,a):o===null?v:v+"[]",d(g))}),!1}return Xy(m)?!0:(e.append(x1(x,v,a),d(m)),!1)}const h=[],p=Object.assign(xO,{defaultVisitor:u,convertValue:d,isVisitable:Xy});function f(m,v){if(!Ae.isUndefined(m)){if(h.indexOf(m)!==-1)throw Error("Circular reference detected in "+v.join("."));h.push(m),Ae.forEach(m,function(b,y){(!(Ae.isUndefined(b)||b===null)&&i.call(e,b,Ae.isString(y)?y.trim():y,v,p))===!0&&f(b,v?v.concat(y):[y])}),h.pop()}}if(!Ae.isObject(t))throw new TypeError("data must be an object");return f(t),e}function y1(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function Bb(t,e){this._pairs=[],t&&c0(t,this,e)}const pT=Bb.prototype;pT.append=function(e,r){this._pairs.push([e,r])};pT.toString=function(e){const r=e?function(s){return e.call(this,s,y1)}:y1;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function yO(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function fT(t,e,r){if(!e)return t;const s=r&&r.encode||yO;Ae.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let a;if(i?a=i(e,r):a=Ae.isURLSearchParams(e)?e.toString():new Bb(e,r).toString(s),a){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class vO{constructor(){this.handlers=[]}use(e,r,s){return this.handlers.push({fulfilled:e,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ae.forEach(this.handlers,function(s){s!==null&&e(s)})}}const v1=vO,mT={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},bO=typeof URLSearchParams<"u"?URLSearchParams:Bb,wO=typeof FormData<"u"?FormData:null,_O=typeof Blob<"u"?Blob:null,NO={isBrowser:!0,classes:{URLSearchParams:bO,FormData:wO,Blob:_O},protocols:["http","https","file","blob","url","data"]},$b=typeof window<"u"&&typeof document<"u",Wy=typeof navigator=="object"&&navigator||void 0,SO=$b&&(!Wy||["ReactNative","NativeScript","NS"].indexOf(Wy.product)<0),jO=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),EO=$b&&window.location.href||"http://localhost",TO=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:$b,hasStandardBrowserEnv:SO,hasStandardBrowserWebWorkerEnv:jO,navigator:Wy,origin:EO},Symbol.toStringTag,{value:"Module"})),Yr={...TO,...NO};function CO(t,e){return c0(t,new Yr.classes.URLSearchParams,Object.assign({visitor:function(r,s,i,a){return Yr.isNode&&Ae.isBuffer(r)?(this.append(s,r.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function kO(t){return Ae.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function AO(t){const e={},r=Object.keys(t);let s;const i=r.length;let a;for(s=0;s<i;s++)a=r[s],e[a]=t[a];return e}function gT(t){function e(r,s,i,a){let o=r[a++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=a>=r.length;return o=!o&&Ae.isArray(i)?i.length:o,c?(Ae.hasOwnProp(i,o)?i[o]=[i[o],s]:i[o]=s,!l):((!i[o]||!Ae.isObject(i[o]))&&(i[o]=[]),e(r,s,i[o],a)&&Ae.isArray(i[o])&&(i[o]=AO(i[o])),!l)}if(Ae.isFormData(t)&&Ae.isFunction(t.entries)){const r={};return Ae.forEachEntry(t,(s,i)=>{e(kO(s),i,r,0)}),r}return null}function PO(t,e,r){if(Ae.isString(t))try{return(e||JSON.parse)(t),Ae.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(t)}const Ub={transitional:mT,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const s=r.getContentType()||"",i=s.indexOf("application/json")>-1,a=Ae.isObject(e);if(a&&Ae.isHTMLForm(e)&&(e=new FormData(e)),Ae.isFormData(e))return i?JSON.stringify(gT(e)):e;if(Ae.isArrayBuffer(e)||Ae.isBuffer(e)||Ae.isStream(e)||Ae.isFile(e)||Ae.isBlob(e)||Ae.isReadableStream(e))return e;if(Ae.isArrayBufferView(e))return e.buffer;if(Ae.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(a){if(s.indexOf("application/x-www-form-urlencoded")>-1)return CO(e,this.formSerializer).toString();if((l=Ae.isFileList(e))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return c0(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return a||i?(r.setContentType("application/json",!1),PO(e)):e}],transformResponse:[function(e){const r=this.transitional||Ub.transitional,s=r&&r.forcedJSONParsing,i=this.responseType==="json";if(Ae.isResponse(e)||Ae.isReadableStream(e))return e;if(e&&Ae.isString(e)&&(s&&!this.responseType||i)){const o=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?_t.from(l,_t.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Yr.classes.FormData,Blob:Yr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ae.forEach(["delete","get","head","post","put","patch"],t=>{Ub.headers[t]={}});const Vb=Ub,RO=Ae.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),OO=t=>{const e={};let r,s,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),r=o.substring(0,i).trim().toLowerCase(),s=o.substring(i+1).trim(),!(!r||e[r]&&RO[r])&&(r==="set-cookie"?e[r]?e[r].push(s):e[r]=[s]:e[r]=e[r]?e[r]+", "+s:s)}),e},b1=Symbol("internals");function cd(t){return t&&String(t).trim().toLowerCase()}function $p(t){return t===!1||t==null?t:Ae.isArray(t)?t.map($p):String(t)}function IO(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(t);)e[s[1]]=s[2];return e}const LO=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function wg(t,e,r,s,i){if(Ae.isFunction(s))return s.call(this,e,r);if(i&&(e=r),!!Ae.isString(e)){if(Ae.isString(s))return e.indexOf(s)!==-1;if(Ae.isRegExp(s))return s.test(e)}}function MO(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,s)=>r.toUpperCase()+s)}function FO(t,e){const r=Ae.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+r,{value:function(i,a,o){return this[s].call(this,e,i,a,o)},configurable:!0})})}class d0{constructor(e){e&&this.set(e)}set(e,r,s){const i=this;function a(l,c,d){const u=cd(c);if(!u)throw new Error("header name must be a non-empty string");const h=Ae.findKey(i,u);(!h||i[h]===void 0||d===!0||d===void 0&&i[h]!==!1)&&(i[h||c]=$p(l))}const o=(l,c)=>Ae.forEach(l,(d,u)=>a(d,u,c));if(Ae.isPlainObject(e)||e instanceof this.constructor)o(e,r);else if(Ae.isString(e)&&(e=e.trim())&&!LO(e))o(OO(e),r);else if(Ae.isHeaders(e))for(const[l,c]of e.entries())a(c,l,s);else e!=null&&a(r,e,s);return this}get(e,r){if(e=cd(e),e){const s=Ae.findKey(this,e);if(s){const i=this[s];if(!r)return i;if(r===!0)return IO(i);if(Ae.isFunction(r))return r.call(this,i,s);if(Ae.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=cd(e),e){const s=Ae.findKey(this,e);return!!(s&&this[s]!==void 0&&(!r||wg(this,this[s],s,r)))}return!1}delete(e,r){const s=this;let i=!1;function a(o){if(o=cd(o),o){const l=Ae.findKey(s,o);l&&(!r||wg(s,s[l],l,r))&&(delete s[l],i=!0)}}return Ae.isArray(e)?e.forEach(a):a(e),i}clear(e){const r=Object.keys(this);let s=r.length,i=!1;for(;s--;){const a=r[s];(!e||wg(this,this[a],a,e,!0))&&(delete this[a],i=!0)}return i}normalize(e){const r=this,s={};return Ae.forEach(this,(i,a)=>{const o=Ae.findKey(s,a);if(o){r[o]=$p(i),delete r[a];return}const l=e?MO(a):String(a).trim();l!==a&&delete r[a],r[l]=$p(i),s[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return Ae.forEach(this,(s,i)=>{s!=null&&s!==!1&&(r[i]=e&&Ae.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const s=new this(e);return r.forEach(i=>s.set(i)),s}static accessor(e){const s=(this[b1]=this[b1]={accessors:{}}).accessors,i=this.prototype;function a(o){const l=cd(o);s[l]||(FO(i,o),s[l]=!0)}return Ae.isArray(e)?e.forEach(a):a(e),this}}d0.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ae.reduceDescriptors(d0.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(s){this[r]=s}}});Ae.freezeMethods(d0);const Pn=d0;function _g(t,e){const r=this||Vb,s=e||r,i=Pn.from(s.headers);let a=s.data;return Ae.forEach(t,function(l){a=l.call(r,a,i.normalize(),e?e.status:void 0)}),i.normalize(),a}function xT(t){return!!(t&&t.__CANCEL__)}function Hc(t,e,r){_t.call(this,t??"canceled",_t.ERR_CANCELED,e,r),this.name="CanceledError"}Ae.inherits(Hc,_t,{__CANCEL__:!0});function yT(t,e,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?t(r):e(new _t("Request failed with status code "+r.status,[_t.ERR_BAD_REQUEST,_t.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function DO(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function BO(t,e){t=t||10;const r=new Array(t),s=new Array(t);let i=0,a=0,o;return e=e!==void 0?e:1e3,function(c){const d=Date.now(),u=s[a];o||(o=d),r[i]=c,s[i]=d;let h=a,p=0;for(;h!==i;)p+=r[h++],h=h%t;if(i=(i+1)%t,i===a&&(a=(a+1)%t),d-o<e)return;const f=u&&d-u;return f?Math.round(p*1e3/f):void 0}}function $O(t,e){let r=0,s=1e3/e,i,a;const o=(d,u=Date.now())=>{r=u,i=null,a&&(clearTimeout(a),a=null),t.apply(null,d)};return[(...d)=>{const u=Date.now(),h=u-r;h>=s?o(d,u):(i=d,a||(a=setTimeout(()=>{a=null,o(i)},s-h)))},()=>i&&o(i)]}const wf=(t,e,r=3)=>{let s=0;const i=BO(50,250);return $O(a=>{const o=a.loaded,l=a.lengthComputable?a.total:void 0,c=o-s,d=i(c),u=o<=l;s=o;const h={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-o)/d:void 0,event:a,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(h)},r)},w1=(t,e)=>{const r=t!=null;return[s=>e[0]({lengthComputable:r,total:t,loaded:s}),e[1]]},_1=t=>(...e)=>Ae.asap(()=>t(...e)),UO=Yr.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,Yr.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(Yr.origin),Yr.navigator&&/(msie|trident)/i.test(Yr.navigator.userAgent)):()=>!0,VO=Yr.hasStandardBrowserEnv?{write(t,e,r,s,i,a){const o=[t+"="+encodeURIComponent(e)];Ae.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),Ae.isString(s)&&o.push("path="+s),Ae.isString(i)&&o.push("domain="+i),a===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function HO(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function zO(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function vT(t,e){return t&&!HO(e)?zO(t,e):e}const N1=t=>t instanceof Pn?{...t}:t;function Qo(t,e){e=e||{};const r={};function s(d,u,h,p){return Ae.isPlainObject(d)&&Ae.isPlainObject(u)?Ae.merge.call({caseless:p},d,u):Ae.isPlainObject(u)?Ae.merge({},u):Ae.isArray(u)?u.slice():u}function i(d,u,h,p){if(Ae.isUndefined(u)){if(!Ae.isUndefined(d))return s(void 0,d,h,p)}else return s(d,u,h,p)}function a(d,u){if(!Ae.isUndefined(u))return s(void 0,u)}function o(d,u){if(Ae.isUndefined(u)){if(!Ae.isUndefined(d))return s(void 0,d)}else return s(void 0,u)}function l(d,u,h){if(h in e)return s(d,u);if(h in t)return s(void 0,d)}const c={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,u,h)=>i(N1(d),N1(u),h,!0)};return Ae.forEach(Object.keys(Object.assign({},t,e)),function(u){const h=c[u]||i,p=h(t[u],e[u],u);Ae.isUndefined(p)&&h!==l||(r[u]=p)}),r}const bT=t=>{const e=Qo({},t);let{data:r,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:a,headers:o,auth:l}=e;e.headers=o=Pn.from(o),e.url=fT(vT(e.baseURL,e.url),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(Ae.isFormData(r)){if(Yr.hasStandardBrowserEnv||Yr.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[d,...u]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...u].join("; "))}}if(Yr.hasStandardBrowserEnv&&(s&&Ae.isFunction(s)&&(s=s(e)),s||s!==!1&&UO(e.url))){const d=i&&a&&VO.read(a);d&&o.set(i,d)}return e},XO=typeof XMLHttpRequest<"u",WO=XO&&function(t){return new Promise(function(r,s){const i=bT(t);let a=i.data;const o=Pn.from(i.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=i,u,h,p,f,m;function v(){f&&f(),m&&m(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let x=new XMLHttpRequest;x.open(i.method.toUpperCase(),i.url,!0),x.timeout=i.timeout;function b(){if(!x)return;const g=Pn.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),S={data:!l||l==="text"||l==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:g,config:t,request:x};yT(function(A){r(A),v()},function(A){s(A),v()},S),x=null}"onloadend"in x?x.onloadend=b:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(b)},x.onabort=function(){x&&(s(new _t("Request aborted",_t.ECONNABORTED,t,x)),x=null)},x.onerror=function(){s(new _t("Network Error",_t.ERR_NETWORK,t,x)),x=null},x.ontimeout=function(){let w=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const S=i.transitional||mT;i.timeoutErrorMessage&&(w=i.timeoutErrorMessage),s(new _t(w,S.clarifyTimeoutError?_t.ETIMEDOUT:_t.ECONNABORTED,t,x)),x=null},a===void 0&&o.setContentType(null),"setRequestHeader"in x&&Ae.forEach(o.toJSON(),function(w,S){x.setRequestHeader(S,w)}),Ae.isUndefined(i.withCredentials)||(x.withCredentials=!!i.withCredentials),l&&l!=="json"&&(x.responseType=i.responseType),d&&([p,m]=wf(d,!0),x.addEventListener("progress",p)),c&&x.upload&&([h,f]=wf(c),x.upload.addEventListener("progress",h),x.upload.addEventListener("loadend",f)),(i.cancelToken||i.signal)&&(u=g=>{x&&(s(!g||g.type?new Hc(null,t,x):g),x.abort(),x=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const y=DO(i.url);if(y&&Yr.protocols.indexOf(y)===-1){s(new _t("Unsupported protocol "+y+":",_t.ERR_BAD_REQUEST,t));return}x.send(a||null)})},qO=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let s=new AbortController,i;const a=function(d){if(!i){i=!0,l();const u=d instanceof Error?d:this.reason;s.abort(u instanceof _t?u:new Hc(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,a(new _t(`timeout ${e} of ms exceeded`,_t.ETIMEDOUT))},e);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(a):d.removeEventListener("abort",a)}),t=null)};t.forEach(d=>d.addEventListener("abort",a));const{signal:c}=s;return c.unsubscribe=()=>Ae.asap(l),c}},KO=qO,GO=function*(t,e){let r=t.byteLength;if(!e||r<e){yield t;return}let s=0,i;for(;s<r;)i=s+e,yield t.slice(s,i),s=i},YO=async function*(t,e){for await(const r of JO(t))yield*GO(r,e)},JO=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:s}=await e.read();if(r)break;yield s}}finally{await e.cancel()}},S1=(t,e,r,s)=>{const i=YO(t,e);let a=0,o,l=c=>{o||(o=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await i.next();if(d){l(),c.close();return}let h=u.byteLength;if(r){let p=a+=h;r(p)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),i.return()}},{highWaterMark:2})},u0=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",wT=u0&&typeof ReadableStream=="function",QO=u0&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),_T=(t,...e)=>{try{return!!t(...e)}catch{return!1}},ZO=wT&&_T(()=>{let t=!1;const e=new Request(Yr.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),j1=64*1024,qy=wT&&_T(()=>Ae.isReadableStream(new Response("").body)),_f={stream:qy&&(t=>t.body)};u0&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!_f[e]&&(_f[e]=Ae.isFunction(t[e])?r=>r[e]():(r,s)=>{throw new _t(`Response type '${e}' is not supported`,_t.ERR_NOT_SUPPORT,s)})})})(new Response);const eI=async t=>{if(t==null)return 0;if(Ae.isBlob(t))return t.size;if(Ae.isSpecCompliantForm(t))return(await new Request(Yr.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Ae.isArrayBufferView(t)||Ae.isArrayBuffer(t))return t.byteLength;if(Ae.isURLSearchParams(t)&&(t=t+""),Ae.isString(t))return(await QO(t)).byteLength},tI=async(t,e)=>{const r=Ae.toFiniteNumber(t.getContentLength());return r??eI(e)},rI=u0&&(async t=>{let{url:e,method:r,data:s,signal:i,cancelToken:a,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:d,headers:u,withCredentials:h="same-origin",fetchOptions:p}=bT(t);d=d?(d+"").toLowerCase():"text";let f=KO([i,a&&a.toAbortSignal()],o),m;const v=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let x;try{if(c&&ZO&&r!=="get"&&r!=="head"&&(x=await tI(u,s))!==0){let S=new Request(e,{method:"POST",body:s,duplex:"half"}),_;if(Ae.isFormData(s)&&(_=S.headers.get("content-type"))&&u.setContentType(_),S.body){const[A,B]=w1(x,wf(_1(c)));s=S1(S.body,j1,A,B)}}Ae.isString(h)||(h=h?"include":"omit");const b="credentials"in Request.prototype;m=new Request(e,{...p,signal:f,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:s,duplex:"half",credentials:b?h:void 0});let y=await fetch(m);const g=qy&&(d==="stream"||d==="response");if(qy&&(l||g&&v)){const S={};["status","statusText","headers"].forEach(Q=>{S[Q]=y[Q]});const _=Ae.toFiniteNumber(y.headers.get("content-length")),[A,B]=l&&w1(_,wf(_1(l),!0))||[];y=new Response(S1(y.body,j1,A,()=>{B&&B(),v&&v()}),S)}d=d||"text";let w=await _f[Ae.findKey(_f,d)||"text"](y,t);return!g&&v&&v(),await new Promise((S,_)=>{yT(S,_,{data:w,headers:Pn.from(y.headers),status:y.status,statusText:y.statusText,config:t,request:m})})}catch(b){throw v&&v(),b&&b.name==="TypeError"&&/fetch/i.test(b.message)?Object.assign(new _t("Network Error",_t.ERR_NETWORK,t,m),{cause:b.cause||b}):_t.from(b,b&&b.code,t,m)}}),Ky={http:mO,xhr:WO,fetch:rI};Ae.forEach(Ky,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const E1=t=>`- ${t}`,sI=t=>Ae.isFunction(t)||t===null||t===!1,NT={getAdapter:t=>{t=Ae.isArray(t)?t:[t];const{length:e}=t;let r,s;const i={};for(let a=0;a<e;a++){r=t[a];let o;if(s=r,!sI(r)&&(s=Ky[(o=String(r)).toLowerCase()],s===void 0))throw new _t(`Unknown adapter '${o}'`);if(s)break;i[o||"#"+a]=s}if(!s){const a=Object.entries(i).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=e?a.length>1?`since :
`+a.map(E1).join(`
`):" "+E1(a[0]):"as no adapter specified";throw new _t("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:Ky};function Ng(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Hc(null,t)}function T1(t){return Ng(t),t.headers=Pn.from(t.headers),t.data=_g.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),NT.getAdapter(t.adapter||Vb.adapter)(t).then(function(s){return Ng(t),s.data=_g.call(t,t.transformResponse,s),s.headers=Pn.from(s.headers),s},function(s){return xT(s)||(Ng(t),s&&s.response&&(s.response.data=_g.call(t,t.transformResponse,s.response),s.response.headers=Pn.from(s.response.headers))),Promise.reject(s)})}const ST="1.7.9",h0={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{h0[t]=function(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}});const C1={};h0.transitional=function(e,r,s){function i(a,o){return"[Axios v"+ST+"] Transitional option '"+a+"'"+o+(s?". "+s:"")}return(a,o,l)=>{if(e===!1)throw new _t(i(o," has been removed"+(r?" in "+r:"")),_t.ERR_DEPRECATED);return r&&!C1[o]&&(C1[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(a,o,l):!0}};h0.spelling=function(e){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function nI(t,e,r){if(typeof t!="object")throw new _t("options must be an object",_t.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let i=s.length;for(;i-- >0;){const a=s[i],o=e[a];if(o){const l=t[a],c=l===void 0||o(l,a,t);if(c!==!0)throw new _t("option "+a+" must be "+c,_t.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new _t("Unknown option "+a,_t.ERR_BAD_OPTION)}}const Up={assertOptions:nI,validators:h0},Un=Up.validators;class Nf{constructor(e){this.defaults=e,this.interceptors={request:new v1,response:new v1}}async request(e,r){try{return await this._request(e,r)}catch(s){if(s instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{s.stack?a&&!String(s.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+a):s.stack=a}catch{}}throw s}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Qo(this.defaults,r);const{transitional:s,paramsSerializer:i,headers:a}=r;s!==void 0&&Up.assertOptions(s,{silentJSONParsing:Un.transitional(Un.boolean),forcedJSONParsing:Un.transitional(Un.boolean),clarifyTimeoutError:Un.transitional(Un.boolean)},!1),i!=null&&(Ae.isFunction(i)?r.paramsSerializer={serialize:i}:Up.assertOptions(i,{encode:Un.function,serialize:Un.function},!0)),Up.assertOptions(r,{baseUrl:Un.spelling("baseURL"),withXsrfToken:Un.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=a&&Ae.merge(a.common,a[r.method]);a&&Ae.forEach(["delete","get","head","post","put","patch","common"],m=>{delete a[m]}),r.headers=Pn.concat(o,a);const l=[];let c=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(r)===!1||(c=c&&v.synchronous,l.unshift(v.fulfilled,v.rejected))});const d=[];this.interceptors.response.forEach(function(v){d.push(v.fulfilled,v.rejected)});let u,h=0,p;if(!c){const m=[T1.bind(this),void 0];for(m.unshift.apply(m,l),m.push.apply(m,d),p=m.length,u=Promise.resolve(r);h<p;)u=u.then(m[h++],m[h++]);return u}p=l.length;let f=r;for(h=0;h<p;){const m=l[h++],v=l[h++];try{f=m(f)}catch(x){v.call(this,x);break}}try{u=T1.call(this,f)}catch(m){return Promise.reject(m)}for(h=0,p=d.length;h<p;)u=u.then(d[h++],d[h++]);return u}getUri(e){e=Qo(this.defaults,e);const r=vT(e.baseURL,e.url);return fT(r,e.params,e.paramsSerializer)}}Ae.forEach(["delete","get","head","options"],function(e){Nf.prototype[e]=function(r,s){return this.request(Qo(s||{},{method:e,url:r,data:(s||{}).data}))}});Ae.forEach(["post","put","patch"],function(e){function r(s){return function(a,o,l){return this.request(Qo(l||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}Nf.prototype[e]=r(),Nf.prototype[e+"Form"]=r(!0)});const Vp=Nf;class Hb{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(a){r=a});const s=this;this.promise.then(i=>{if(!s._listeners)return;let a=s._listeners.length;for(;a-- >0;)s._listeners[a](i);s._listeners=null}),this.promise.then=i=>{let a;const o=new Promise(l=>{s.subscribe(l),a=l}).then(i);return o.cancel=function(){s.unsubscribe(a)},o},e(function(a,o,l){s.reason||(s.reason=new Hc(a,o,l),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=s=>{e.abort(s)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new Hb(function(i){e=i}),cancel:e}}}const iI=Hb;function aI(t){return function(r){return t.apply(null,r)}}function oI(t){return Ae.isObject(t)&&t.isAxiosError===!0}const Gy={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Gy).forEach(([t,e])=>{Gy[e]=t});const lI=Gy;function jT(t){const e=new Vp(t),r=rT(Vp.prototype.request,e);return Ae.extend(r,Vp.prototype,e,{allOwnKeys:!0}),Ae.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return jT(Qo(t,i))},r}const Sr=jT(Vb);Sr.Axios=Vp;Sr.CanceledError=Hc;Sr.CancelToken=iI;Sr.isCancel=xT;Sr.VERSION=ST;Sr.toFormData=c0;Sr.AxiosError=_t;Sr.Cancel=Sr.CanceledError;Sr.all=function(e){return Promise.all(e)};Sr.spread=aI;Sr.isAxiosError=oI;Sr.mergeConfig=Qo;Sr.AxiosHeaders=Pn;Sr.formToJSON=t=>gT(Ae.isHTMLForm(t)?new FormData(t):t);Sr.getAdapter=NT.getAdapter;Sr.HttpStatusCode=lI;Sr.default=Sr;const cI=Sr;var Ve={},p0={},ET={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(r=!1));function i(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function a(c,d,u,h,p){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new i(u,h||c,p),m=r?r+d:d;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],f]:c._events[m].push(f):(c._events[m]=f,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new s:delete c._events[d]}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,h;if(this._eventsCount===0)return d;for(h in u=this._events)e.call(u,h)&&d.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=r?r+d:d,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,f=h.length,m=new Array(f);p<f;p++)m[p]=h[p].fn;return m},l.prototype.listenerCount=function(d){var u=r?r+d:d,h=this._events[u];return h?h.fn?1:h.length:0},l.prototype.emit=function(d,u,h,p,f,m){var v=r?r+d:d;if(!this._events[v])return!1;var x=this._events[v],b=arguments.length,y,g;if(x.fn){switch(x.once&&this.removeListener(d,x.fn,void 0,!0),b){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,u),!0;case 3:return x.fn.call(x.context,u,h),!0;case 4:return x.fn.call(x.context,u,h,p),!0;case 5:return x.fn.call(x.context,u,h,p,f),!0;case 6:return x.fn.call(x.context,u,h,p,f,m),!0}for(g=1,y=new Array(b-1);g<b;g++)y[g-1]=arguments[g];x.fn.apply(x.context,y)}else{var w=x.length,S;for(g=0;g<w;g++)switch(x[g].once&&this.removeListener(d,x[g].fn,void 0,!0),b){case 1:x[g].fn.call(x[g].context);break;case 2:x[g].fn.call(x[g].context,u);break;case 3:x[g].fn.call(x[g].context,u,h);break;case 4:x[g].fn.call(x[g].context,u,h,p);break;default:if(!y)for(S=1,y=new Array(b-1);S<b;S++)y[S-1]=arguments[S];x[g].fn.apply(x[g].context,y)}}return!0},l.prototype.on=function(d,u,h){return a(this,d,u,h,!1)},l.prototype.once=function(d,u,h){return a(this,d,u,h,!0)},l.prototype.removeListener=function(d,u,h,p){var f=r?r+d:d;if(!this._events[f])return this;if(!u)return o(this,f),this;var m=this._events[f];if(m.fn)m.fn===u&&(!p||m.once)&&(!h||m.context===h)&&o(this,f);else{for(var v=0,x=[],b=m.length;v<b;v++)(m[v].fn!==u||p&&!m[v].once||h&&m[v].context!==h)&&x.push(m[v]);x.length?this._events[f]=x.length===1?x[0]:x:o(this,f)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=r?r+d:d,this._events[u]&&o(this,u)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(ET);var zb=ET.exports,et={};Object.defineProperty(et,"__esModule",{value:!0});et.XRPLFaucetError=et.NotFoundError=et.ValidationError=et.ResponseFormatError=et.TimeoutError=et.RippledNotInitializedError=et.DisconnectedError=et.NotConnectedError=et.RippledError=et.ConnectionError=et.UnexpectedError=et.XrplError=void 0;class pl extends Error{constructor(e="",r){super(e),this.name=this.constructor.name,this.message=e,this.data=r,Error.captureStackTrace!=null&&Error.captureStackTrace(this,this.constructor)}toString(){let e=`[${this.name}(${this.message}`;return this.data&&(e+=`, ${JSON.stringify(this.data)}`),e+=")]",e}inspect(){return this.toString()}}et.XrplError=pl;class dI extends pl{}et.RippledError=dI;class uI extends pl{}et.UnexpectedError=uI;class zc extends pl{}et.ConnectionError=zc;class hI extends zc{}et.NotConnectedError=hI;class pI extends zc{}et.DisconnectedError=pI;class fI extends zc{}et.RippledNotInitializedError=fI;class mI extends zc{}et.TimeoutError=mI;class gI extends zc{}et.ResponseFormatError=gI;class xI extends pl{}et.ValidationError=xI;class yI extends pl{}et.XRPLFaucetError=yI;class vI extends pl{constructor(e="Not found"){super(e)}}et.NotFoundError=vI;var Xb={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_API_VERSION=t.RIPPLED_API_V2=t.RIPPLED_API_V1=void 0,t.RIPPLED_API_V1=1,t.RIPPLED_API_V2=2,t.DEFAULT_API_VERSION=t.RIPPLED_API_V2})(Xb);var li={},Gu={};Object.defineProperty(Gu,"__esModule",{value:!0});Gu.AccountRootFlags=void 0;var k1;(function(t){t[t.lsfPasswordSpent=65536]="lsfPasswordSpent",t[t.lsfRequireDestTag=131072]="lsfRequireDestTag",t[t.lsfRequireAuth=262144]="lsfRequireAuth",t[t.lsfDisallowXRP=524288]="lsfDisallowXRP",t[t.lsfDisableMaster=1048576]="lsfDisableMaster",t[t.lsfNoFreeze=2097152]="lsfNoFreeze",t[t.lsfGlobalFreeze=4194304]="lsfGlobalFreeze",t[t.lsfDefaultRipple=8388608]="lsfDefaultRipple",t[t.lsfDepositAuth=16777216]="lsfDepositAuth",t[t.lsfAMM=33554432]="lsfAMM",t[t.lsfDisallowIncomingNFTokenOffer=67108864]="lsfDisallowIncomingNFTokenOffer",t[t.lsfDisallowIncomingCheck=134217728]="lsfDisallowIncomingCheck",t[t.lsfDisallowIncomingPayChan=268435456]="lsfDisallowIncomingPayChan",t[t.lsfDisallowIncomingTrustline=536870912]="lsfDisallowIncomingTrustline",t[t.lsfAllowTrustLineClawback=2147483648]="lsfAllowTrustLineClawback"})(k1||(Gu.AccountRootFlags=k1={}));var ci={},Ze={},At={},Ts={},f0={};Object.defineProperty(f0,"__esModule",{value:!0});f0.crypto=void 0;f0.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var un={};Object.defineProperty(un,"__esModule",{value:!0});un.anumber=Yy;un.abytes=TT;un.ahash=wI;un.aexists=_I;un.aoutput=NI;function Yy(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function bI(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function TT(t,...e){if(!bI(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function wI(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Yy(t.outputLen),Yy(t.blockLen)}function _I(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function NI(t,e){TT(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}(function(t){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=t.nextTick=t.byteSwapIfBE=t.isLE=void 0,t.isBytes=s,t.u8=i,t.u32=a,t.createView=o,t.rotr=l,t.rotl=c,t.byteSwap=d,t.byteSwap32=u,t.bytesToHex=p,t.hexToBytes=v,t.asyncLoop=b,t.utf8ToBytes=y,t.toBytes=g,t.concatBytes=w,t.checkOpts=_,t.wrapConstructor=A,t.wrapConstructorWithOpts=B,t.wrapXOFConstructorWithOpts=Q,t.randomBytes=U;const e=f0,r=un;function s(q){return q instanceof Uint8Array||ArrayBuffer.isView(q)&&q.constructor.name==="Uint8Array"}function i(q){return new Uint8Array(q.buffer,q.byteOffset,q.byteLength)}function a(q){return new Uint32Array(q.buffer,q.byteOffset,Math.floor(q.byteLength/4))}function o(q){return new DataView(q.buffer,q.byteOffset,q.byteLength)}function l(q,de){return q<<32-de|q>>>de}function c(q,de){return q<<de|q>>>32-de>>>0}t.isLE=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();function d(q){return q<<24&4278190080|q<<8&16711680|q>>>8&65280|q>>>24&255}t.byteSwapIfBE=t.isLE?q=>q:q=>d(q);function u(q){for(let de=0;de<q.length;de++)q[de]=d(q[de])}const h=Array.from({length:256},(q,de)=>de.toString(16).padStart(2,"0"));function p(q){(0,r.abytes)(q);let de="";for(let me=0;me<q.length;me++)de+=h[q[me]];return de}const f={_0:48,_9:57,A:65,F:70,a:97,f:102};function m(q){if(q>=f._0&&q<=f._9)return q-f._0;if(q>=f.A&&q<=f.F)return q-(f.A-10);if(q>=f.a&&q<=f.f)return q-(f.a-10)}function v(q){if(typeof q!="string")throw new Error("hex string expected, got "+typeof q);const de=q.length,me=de/2;if(de%2)throw new Error("hex string expected, got unpadded hex of length "+de);const ye=new Uint8Array(me);for(let G=0,Z=0;G<me;G++,Z+=2){const he=m(q.charCodeAt(Z)),ee=m(q.charCodeAt(Z+1));if(he===void 0||ee===void 0){const H=q[Z]+q[Z+1];throw new Error('hex string expected, got non-hex character "'+H+'" at index '+Z)}ye[G]=he*16+ee}return ye}const x=async()=>{};t.nextTick=x;async function b(q,de,me){let ye=Date.now();for(let G=0;G<q;G++){me(G);const Z=Date.now()-ye;Z>=0&&Z<de||(await(0,t.nextTick)(),ye+=Z)}}function y(q){if(typeof q!="string")throw new Error("utf8ToBytes expected string, got "+typeof q);return new Uint8Array(new TextEncoder().encode(q))}function g(q){return typeof q=="string"&&(q=y(q)),(0,r.abytes)(q),q}function w(...q){let de=0;for(let ye=0;ye<q.length;ye++){const G=q[ye];(0,r.abytes)(G),de+=G.length}const me=new Uint8Array(de);for(let ye=0,G=0;ye<q.length;ye++){const Z=q[ye];me.set(Z,G),G+=Z.length}return me}class S{clone(){return this._cloneInto()}}t.Hash=S;function _(q,de){if(de!==void 0&&{}.toString.call(de)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(q,de)}function A(q){const de=ye=>q().update(g(ye)).digest(),me=q();return de.outputLen=me.outputLen,de.blockLen=me.blockLen,de.create=()=>q(),de}function B(q){const de=(ye,G)=>q(G).update(g(ye)).digest(),me=q({});return de.outputLen=me.outputLen,de.blockLen=me.blockLen,de.create=ye=>q(ye),de}function Q(q){const de=(ye,G)=>q(G).update(g(ye)).digest(),me=q({});return de.outputLen=me.outputLen,de.blockLen=me.blockLen,de.create=ye=>q(ye),de}function U(q=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(q));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(q);throw new Error("crypto.getRandomValues must be defined")}})(Ts);var Oi={};Object.defineProperty(Oi,"__esModule",{value:!0});Oi.equal=Oi.concat=Oi.HEX_REGEX=void 0;const SI=Ts;Oi.HEX_REGEX=/^[A-F0-9]*$/iu;function jI(t){return(0,SI.concatBytes)(...t)}Oi.concat=jI;function EI(t,e){if(t.byteLength!==e.byteLength)return!1;const r=new Int8Array(t),s=new Int8Array(e);for(let i=0;i!==t.byteLength;i++)if(r[i]!==s[i])return!1;return!0}Oi.equal=EI;(function(t){var e=Ce&&Ce.__createBinding||(Object.create?function(d,u,h,p){p===void 0&&(p=h);var f=Object.getOwnPropertyDescriptor(u,h);(!f||("get"in f?!u.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return u[h]}}),Object.defineProperty(d,p,f)}:function(d,u,h,p){p===void 0&&(p=h),d[p]=u[h]}),r=Ce&&Ce.__exportStar||function(d,u){for(var h in d)h!=="default"&&!Object.prototype.hasOwnProperty.call(u,h)&&e(u,d,h)};Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.stringToHex=t.hexToString=t.hexToBytes=t.bytesToHex=void 0;const s=Ts,i=Oi,a=d=>(0,s.bytesToHex)(d instanceof Uint8Array?d:Uint8Array.from(d)).toUpperCase();t.bytesToHex=a;const o=d=>{const u=d.length,h=new Uint8Array(u/2);if(!i.HEX_REGEX.test(d))throw new Error("Invalid hex string");for(let p=0;p<h.length;p++){const f=p*2,m=d.slice(f,f+2),v=Number.parseInt(m,16);if(Number.isNaN(v)||v<0)throw new Error("Invalid byte sequence");h[p]=v}return h};t.hexToBytes=o;const l=(d,u="utf8")=>new TextDecoder(u).decode((0,t.hexToBytes)(d));t.hexToString=l;const c=d=>(0,t.bytesToHex)(new TextEncoder().encode(d));t.stringToHex=c,t.randomBytes=s.randomBytes,r(Oi,t)})(At);var Cs={},Wt={},m0={};(function(t){/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.bytes=t.stringToBytes=t.str=t.bytesToString=t.hex=t.utf8=t.bech32m=t.bech32=t.base58check=t.createBase58check=t.base58xmr=t.base58xrp=t.base58flickr=t.base58=t.base64urlnopad=t.base64url=t.base64nopad=t.base64=t.base32crockford=t.base32hexnopad=t.base32hex=t.base32nopad=t.base32=t.base16=t.utils=t.assertNumber=void 0;function e(H){return H instanceof Uint8Array||ArrayBuffer.isView(H)&&H.constructor.name==="Uint8Array"}function r(H,I){return Array.isArray(I)?I.length===0?!0:H?I.every(K=>typeof K=="string"):I.every(K=>Number.isSafeInteger(K)):!1}function s(H){if(typeof H!="function")throw new Error("function expected");return!0}function i(H,I){if(typeof I!="string")throw new Error(`${H}: string expected`);return!0}function a(H){if(!Number.isSafeInteger(H))throw new Error(`invalid integer: ${H}`)}t.assertNumber=a;function o(H){if(!Array.isArray(H))throw new Error("array expected")}function l(H,I){if(!r(!0,I))throw new Error(`${H}: array of strings expected`)}function c(H,I){if(!r(!1,I))throw new Error(`${H}: array of numbers expected`)}function d(...H){const I=O=>O,K=(O,V)=>ne=>O(V(ne)),re=H.map(O=>O.encode).reduceRight(K,I),z=H.map(O=>O.decode).reduce(K,I);return{encode:re,decode:z}}function u(H){const I=typeof H=="string"?H.split(""):H,K=I.length;l("alphabet",I);const re=new Map(I.map((z,O)=>[z,O]));return{encode:z=>(o(z),z.map(O=>{if(!Number.isSafeInteger(O)||O<0||O>=K)throw new Error(`alphabet.encode: digit index outside alphabet "${O}". Allowed: ${H}`);return I[O]})),decode:z=>(o(z),z.map(O=>{i("alphabet.decode",O);const V=re.get(O);if(V===void 0)throw new Error(`Unknown letter: "${O}". Allowed: ${H}`);return V}))}}function h(H=""){return i("join",H),{encode:I=>(l("join.decode",I),I.join(H)),decode:I=>(i("join.decode",I),I.split(H))}}function p(H,I="="){return a(H),i("padding",I),{encode(K){for(l("padding.encode",K);K.length*H%8;)K.push(I);return K},decode(K){l("padding.decode",K);let re=K.length;if(re*H%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;re>0&&K[re-1]===I;re--)if((re-1)*H%8===0)throw new Error("padding: invalid, string has too much padding");return K.slice(0,re)}}}function f(H){return s(H),{encode:I=>I,decode:I=>H(I)}}function m(H,I,K){if(I<2)throw new Error(`convertRadix: invalid from=${I}, base cannot be less than 2`);if(K<2)throw new Error(`convertRadix: invalid to=${K}, base cannot be less than 2`);if(o(H),!H.length)return[];let re=0;const z=[],O=Array.from(H,ne=>{if(a(ne),ne<0||ne>=I)throw new Error(`invalid integer: ${ne}`);return ne}),V=O.length;for(;;){let ne=0,pe=!0;for(let ae=re;ae<V;ae++){const se=O[ae],k=I*ne,j=k+se;if(!Number.isSafeInteger(j)||k/I!==ne||j-se!==k)throw new Error("convertRadix: carry overflow");const P=j/K;ne=j%K;const $=Math.floor(P);if(O[ae]=$,!Number.isSafeInteger($)||$*K+ne!==j)throw new Error("convertRadix: carry overflow");if(pe)$?pe=!1:re=ae;else continue}if(z.push(ne),pe)break}for(let ne=0;ne<H.length-1&&H[ne]===0;ne++)z.push(0);return z.reverse()}const v=(H,I)=>I===0?H:v(I,H%I),x=(H,I)=>H+(I-v(H,I)),b=(()=>{let H=[];for(let I=0;I<40;I++)H.push(2**I);return H})();function y(H,I,K,re){if(o(H),I<=0||I>32)throw new Error(`convertRadix2: wrong from=${I}`);if(K<=0||K>32)throw new Error(`convertRadix2: wrong to=${K}`);if(x(I,K)>32)throw new Error(`convertRadix2: carry overflow from=${I} to=${K} carryBits=${x(I,K)}`);let z=0,O=0;const V=b[I],ne=b[K]-1,pe=[];for(const ae of H){if(a(ae),ae>=V)throw new Error(`convertRadix2: invalid data word=${ae} from=${I}`);if(z=z<<I|ae,O+I>32)throw new Error(`convertRadix2: carry overflow pos=${O} from=${I}`);for(O+=I;O>=K;O-=K)pe.push((z>>O-K&ne)>>>0);const se=b[O];if(se===void 0)throw new Error("invalid carry");z&=se-1}if(z=z<<K-O&ne,!re&&O>=I)throw new Error("Excess padding");if(!re&&z>0)throw new Error(`Non-zero padding: ${z}`);return re&&O>0&&pe.push(z>>>0),pe}function g(H){a(H);const I=2**8;return{encode:K=>{if(!e(K))throw new Error("radix.encode input should be Uint8Array");return m(Array.from(K),I,H)},decode:K=>(c("radix.decode",K),Uint8Array.from(m(K,H,I)))}}function w(H,I=!1){if(a(H),H<=0||H>32)throw new Error("radix2: bits should be in (0..32]");if(x(8,H)>32||x(H,8)>32)throw new Error("radix2: carry overflow");return{encode:K=>{if(!e(K))throw new Error("radix2.encode input should be Uint8Array");return y(Array.from(K),8,H,!I)},decode:K=>(c("radix2.decode",K),Uint8Array.from(y(K,H,8,I)))}}function S(H){return s(H),function(...I){try{return H.apply(null,I)}catch{}}}function _(H,I){return a(H),s(I),{encode(K){if(!e(K))throw new Error("checksum.encode: input should be Uint8Array");const re=I(K).slice(0,H),z=new Uint8Array(K.length+H);return z.set(K),z.set(re,K.length),z},decode(K){if(!e(K))throw new Error("checksum.decode: input should be Uint8Array");const re=K.slice(0,-H),z=K.slice(-H),O=I(re).slice(0,H);for(let V=0;V<H;V++)if(O[V]!==z[V])throw new Error("Invalid checksum");return re}}}t.utils={alphabet:u,chain:d,checksum:_,convertRadix:m,convertRadix2:y,radix:g,radix2:w,join:h,padding:p},t.base16=d(w(4),u("0123456789ABCDEF"),h("")),t.base32=d(w(5),u("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),p(5),h("")),t.base32nopad=d(w(5),u("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),h("")),t.base32hex=d(w(5),u("0123456789ABCDEFGHIJKLMNOPQRSTUV"),p(5),h("")),t.base32hexnopad=d(w(5),u("0123456789ABCDEFGHIJKLMNOPQRSTUV"),h("")),t.base32crockford=d(w(5),u("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),h(""),f(H=>H.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),t.base64=d(w(6),u("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),p(6),h("")),t.base64nopad=d(w(6),u("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),h("")),t.base64url=d(w(6),u("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),p(6),h("")),t.base64urlnopad=d(w(6),u("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),h(""));const A=H=>d(g(58),u(H),h(""));t.base58=A("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),t.base58flickr=A("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),t.base58xrp=A("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const B=[0,2,3,5,6,7,9,10,11];t.base58xmr={encode(H){let I="";for(let K=0;K<H.length;K+=8){const re=H.subarray(K,K+8);I+=t.base58.encode(re).padStart(B[re.length],"1")}return I},decode(H){let I=[];for(let K=0;K<H.length;K+=11){const re=H.slice(K,K+11),z=B.indexOf(re.length),O=t.base58.decode(re);for(let V=0;V<O.length-z;V++)if(O[V]!==0)throw new Error("base58xmr: wrong padding");I=I.concat(Array.from(O.slice(O.length-z)))}return Uint8Array.from(I)}};const Q=H=>d(_(4,I=>H(H(I))),t.base58);t.createBase58check=Q,t.base58check=t.createBase58check;const U=d(u("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),h("")),q=[996825010,642813549,513874426,1027748829,705979059];function de(H){const I=H>>25;let K=(H&33554431)<<5;for(let re=0;re<q.length;re++)(I>>re&1)===1&&(K^=q[re]);return K}function me(H,I,K=1){const re=H.length;let z=1;for(let O=0;O<re;O++){const V=H.charCodeAt(O);if(V<33||V>126)throw new Error(`Invalid prefix (${H})`);z=de(z)^V>>5}z=de(z);for(let O=0;O<re;O++)z=de(z)^H.charCodeAt(O)&31;for(let O of I)z=de(z)^O;for(let O=0;O<6;O++)z=de(z);return z^=K,U.encode(y([z%b[30]],30,5,!1))}function ye(H){const I=H==="bech32"?1:734539939,K=w(5),re=K.decode,z=K.encode,O=S(re);function V(k,j,P=90){i("bech32.encode prefix",k),e(j)&&(j=Array.from(j)),c("bech32.encode",j);const $=k.length;if($===0)throw new TypeError(`Invalid prefix length ${$}`);const R=$+7+j.length;if(P!==!1&&R>P)throw new TypeError(`Length ${R} exceeds limit ${P}`);const W=k.toLowerCase(),te=me(W,j,I);return`${W}1${U.encode(j)}${te}`}function ne(k,j=90){i("bech32.decode input",k);const P=k.length;if(P<8||j!==!1&&P>j)throw new TypeError(`invalid string length: ${P} (${k}). Expected (8..${j})`);const $=k.toLowerCase();if(k!==$&&k!==k.toUpperCase())throw new Error("String must be lowercase or uppercase");const R=$.lastIndexOf("1");if(R===0||R===-1)throw new Error('Letter "1" must be present between prefix and data only');const W=$.slice(0,R),te=$.slice(R+1);if(te.length<6)throw new Error("Data must be at least 6 characters long");const X=U.decode(te).slice(0,-6),oe=me(W,X,I);if(!te.endsWith(oe))throw new Error(`Invalid checksum in ${k}: expected "${oe}"`);return{prefix:W,words:X}}const pe=S(ne);function ae(k){const{prefix:j,words:P}=ne(k,!1);return{prefix:j,words:P,bytes:re(P)}}function se(k,j){return V(k,z(j))}return{encode:V,decode:ne,encodeFromBytes:se,decodeToBytes:ae,decodeUnsafe:pe,fromWords:re,fromWordsUnsafe:O,toWords:z}}t.bech32=ye("bech32"),t.bech32m=ye("bech32m"),t.utf8={encode:H=>new TextDecoder().decode(H),decode:H=>new TextEncoder().encode(H)},t.hex=d(w(4),u("0123456789abcdef"),h(""),f(H=>{if(typeof H!="string"||H.length%2!==0)throw new TypeError(`hex.decode: expected string, got ${typeof H} with length ${H.length}`);return H.toLowerCase()}));const G={utf8:t.utf8,hex:t.hex,base16:t.base16,base32:t.base32,base64:t.base64,base64url:t.base64url,base58:t.base58,base58xmr:t.base58xmr},Z="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr",he=(H,I)=>{if(typeof H!="string"||!G.hasOwnProperty(H))throw new TypeError(Z);if(!e(I))throw new TypeError("bytesToString() expects Uint8Array");return G[H].encode(I)};t.bytesToString=he,t.str=t.bytesToString;const ee=(H,I)=>{if(!G.hasOwnProperty(H))throw new TypeError(Z);if(typeof I!="string")throw new TypeError("stringToBytes() expects string");return G[H].decode(I)};t.stringToBytes=ee,t.bytes=t.stringToBytes})(m0);var Yu={},Rn={},Vi={};Object.defineProperty(Vi,"__esModule",{value:!0});Vi.HashMD=void 0;Vi.setBigUint64=CT;Vi.Chi=TI;Vi.Maj=CI;const Sg=un,dd=Ts;function CT(t,e,r,s){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,s);const i=BigInt(32),a=BigInt(4294967295),o=Number(r>>i&a),l=Number(r&a),c=s?4:0,d=s?0:4;t.setUint32(e+c,o,s),t.setUint32(e+d,l,s)}function TI(t,e,r){return t&e^~t&r}function CI(t,e,r){return t&e^t&r^e&r}class kI extends dd.Hash{constructor(e,r,s,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=s,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,dd.createView)(this.buffer)}update(e){(0,Sg.aexists)(this);const{view:r,buffer:s,blockLen:i}=this;e=(0,dd.toBytes)(e);const a=e.length;for(let o=0;o<a;){const l=Math.min(i-this.pos,a-o);if(l===i){const c=(0,dd.createView)(e);for(;i<=a-o;o+=i)this.process(c,o);continue}s.set(e.subarray(o,o+l),this.pos),this.pos+=l,o+=l,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,Sg.aexists)(this),(0,Sg.aoutput)(e,this),this.finished=!0;const{buffer:r,view:s,blockLen:i,isLE:a}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(s,0),o=0);for(let h=o;h<i;h++)r[h]=0;CT(s,i-8,BigInt(this.length*8),a),this.process(s,0);const l=(0,dd.createView)(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=c/4,u=this.get();if(d>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<d;h++)l.setUint32(4*h,u[h],a)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const s=e.slice(0,r);return this.destroy(),s}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:s,length:i,finished:a,destroyed:o,pos:l}=this;return e.length=i,e.pos=l,e.finished=a,e.destroyed=o,i%r&&e.buffer.set(s),e}}Vi.HashMD=kI;Object.defineProperty(Rn,"__esModule",{value:!0});Rn.sha224=Rn.sha256=Rn.SHA256=void 0;const jg=Vi,Ys=Ts,AI=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),qi=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ki=new Uint32Array(64);class Wb extends jg.HashMD{constructor(){super(64,32,8,!1),this.A=qi[0]|0,this.B=qi[1]|0,this.C=qi[2]|0,this.D=qi[3]|0,this.E=qi[4]|0,this.F=qi[5]|0,this.G=qi[6]|0,this.H=qi[7]|0}get(){const{A:e,B:r,C:s,D:i,E:a,F:o,G:l,H:c}=this;return[e,r,s,i,a,o,l,c]}set(e,r,s,i,a,o,l,c){this.A=e|0,this.B=r|0,this.C=s|0,this.D=i|0,this.E=a|0,this.F=o|0,this.G=l|0,this.H=c|0}process(e,r){for(let h=0;h<16;h++,r+=4)Ki[h]=e.getUint32(r,!1);for(let h=16;h<64;h++){const p=Ki[h-15],f=Ki[h-2],m=(0,Ys.rotr)(p,7)^(0,Ys.rotr)(p,18)^p>>>3,v=(0,Ys.rotr)(f,17)^(0,Ys.rotr)(f,19)^f>>>10;Ki[h]=v+Ki[h-7]+m+Ki[h-16]|0}let{A:s,B:i,C:a,D:o,E:l,F:c,G:d,H:u}=this;for(let h=0;h<64;h++){const p=(0,Ys.rotr)(l,6)^(0,Ys.rotr)(l,11)^(0,Ys.rotr)(l,25),f=u+p+(0,jg.Chi)(l,c,d)+AI[h]+Ki[h]|0,v=((0,Ys.rotr)(s,2)^(0,Ys.rotr)(s,13)^(0,Ys.rotr)(s,22))+(0,jg.Maj)(s,i,a)|0;u=d,d=c,c=l,l=o+f|0,o=a,a=i,i=s,s=f+v|0}s=s+this.A|0,i=i+this.B|0,a=a+this.C|0,o=o+this.D|0,l=l+this.E|0,c=c+this.F|0,d=d+this.G|0,u=u+this.H|0,this.set(s,i,a,o,l,c,d,u)}roundClean(){Ki.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}Rn.SHA256=Wb;class PI extends Wb{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}Rn.sha256=(0,Ys.wrapConstructor)(()=>new Wb);Rn.sha224=(0,Ys.wrapConstructor)(()=>new PI);var Ju={},qb={};Object.defineProperty(qb,"__esModule",{value:!0});function RI(t){return Array.isArray(t)?new Uint8Array(t):t}qb.default=RI;var OI=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ju,"__esModule",{value:!0});const A1=OI(qb);function II(t){function e(r){return t((0,A1.default)(r))}return e.create=()=>{const r=t.create();return{update(s){return r.update((0,A1.default)(s)),this},digest(){return r.digest()}}},e}Ju.default=II;var LI=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Yu,"__esModule",{value:!0});Yu.sha256=void 0;const MI=Rn,FI=LI(Ju);Yu.sha256=(0,FI.default)(MI.sha256);var kc={};Object.defineProperty(kc,"__esModule",{value:!0});kc.concatArgs=kc.arrayEqual=void 0;function DI(t,e){return t.length!==e.length?!1:t.every((r,s)=>r===e[s])}kc.arrayEqual=DI;function BI(t){return typeof t=="number"}function $I(...t){return t.flatMap(e=>BI(e)?[e]:Array.from(e))}kc.concatArgs=$I;Object.defineProperty(Wt,"__esModule",{value:!0});Wt.isValidClassicAddress=Wt.decodeAccountPublic=Wt.encodeAccountPublic=Wt.encodeNodePublic=Wt.decodeNodePublic=Wt.decodeAddress=Wt.decodeAccountID=Wt.encodeAddress=Wt.encodeAccountID=Wt.decodeSeed=Wt.encodeSeed=Wt.codec=void 0;const UI=m0,VI=Yu,Bh=kc;class HI{constructor(e){this._sha256=e.sha256,this._codec=UI.base58xrp}encode(e,r){const s=r.versions;return this._encodeVersioned(e,s,r.expectedLength)}decode(e,r){var s;const i=r.versions,a=r.versionTypes,o=this.decodeChecked(e);if(i.length>1&&!r.expectedLength)throw new Error("expectedLength is required because there are >= 2 possible versions");const l=typeof i[0]=="number"?1:i[0].length,c=(s=r.expectedLength)!==null&&s!==void 0?s:o.length-l,d=o.slice(0,-c),u=o.slice(-c);for(let h=0;h<i.length;h++){const p=Array.isArray(i[h])?i[h]:[i[h]];if((0,Bh.arrayEqual)(d,p))return{version:p,bytes:u,type:a?a[h]:null}}throw new Error("version_invalid: version bytes do not match any of the provided version(s)")}encodeChecked(e){const r=this._sha256(this._sha256(e)).slice(0,4);return this._encodeRaw(Uint8Array.from((0,Bh.concatArgs)(e,r)))}decodeChecked(e){const r=this._decodeRaw(e);if(r.byteLength<5)throw new Error("invalid_input_size: decoded data must have length >= 5");if(!this._verifyCheckSum(r))throw new Error("checksum_invalid");return r.slice(0,-4)}_encodeVersioned(e,r,s){if(!LT(e,s))throw new Error("unexpected_payload_length: bytes.length does not match expectedLength. Ensure that the bytes are a Uint8Array.");return this.encodeChecked((0,Bh.concatArgs)(r,e))}_encodeRaw(e){return this._codec.encode(Uint8Array.from(e))}_decodeRaw(e){return this._codec.decode(e)}_verifyCheckSum(e){const r=this._sha256(this._sha256(e.slice(0,-4))).slice(0,4),s=e.slice(-4);return(0,Bh.arrayEqual)(r,s)}}const kT=0,AT=35,PT=33,RT=28,OT=[1,225,75],zI={sha256:VI.sha256},Hi=new HI(zI);Wt.codec=Hi;function XI(t,e){if(!LT(t,16))throw new Error("entropy must have length 16");const r={expectedLength:16,versions:e==="ed25519"?OT:[PT]};return Hi.encode(t,r)}Wt.encodeSeed=XI;function WI(t,e={versionTypes:["ed25519","secp256k1"],versions:[OT,PT],expectedLength:16}){return Hi.decode(t,e)}Wt.decodeSeed=WI;function IT(t){const e={versions:[kT],expectedLength:20};return Hi.encode(t,e)}Wt.encodeAccountID=IT;Wt.encodeAddress=IT;function Kb(t){const e={versions:[kT],expectedLength:20};return Hi.decode(t,e).bytes}Wt.decodeAccountID=Kb;Wt.decodeAddress=Kb;function qI(t){const e={versions:[RT],expectedLength:33};return Hi.decode(t,e).bytes}Wt.decodeNodePublic=qI;function KI(t){const e={versions:[RT],expectedLength:33};return Hi.encode(t,e)}Wt.encodeNodePublic=KI;function GI(t){const e={versions:[AT],expectedLength:33};return Hi.encode(t,e)}Wt.encodeAccountPublic=GI;function YI(t){const e={versions:[AT],expectedLength:33};return Hi.decode(t,e).bytes}Wt.decodeAccountPublic=YI;function JI(t){try{Kb(t)}catch{return!1}return!0}Wt.isValidClassicAddress=JI;function LT(t,e){return"byteLength"in t?t.byteLength===e:t.length===e}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isValidXAddress=t.decodeXAddress=t.xAddressToClassicAddress=t.encodeXAddress=t.classicAddressToXAddress=t.isValidClassicAddress=t.decodeAccountPublic=t.encodeAccountPublic=t.decodeNodePublic=t.encodeNodePublic=t.decodeAccountID=t.encodeAccountID=t.decodeSeed=t.encodeSeed=t.codec=void 0;const e=At,r=Wt;Object.defineProperty(t,"codec",{enumerable:!0,get:function(){return r.codec}}),Object.defineProperty(t,"encodeSeed",{enumerable:!0,get:function(){return r.encodeSeed}}),Object.defineProperty(t,"decodeSeed",{enumerable:!0,get:function(){return r.decodeSeed}}),Object.defineProperty(t,"encodeAccountID",{enumerable:!0,get:function(){return r.encodeAccountID}}),Object.defineProperty(t,"decodeAccountID",{enumerable:!0,get:function(){return r.decodeAccountID}}),Object.defineProperty(t,"encodeNodePublic",{enumerable:!0,get:function(){return r.encodeNodePublic}}),Object.defineProperty(t,"decodeNodePublic",{enumerable:!0,get:function(){return r.decodeNodePublic}}),Object.defineProperty(t,"encodeAccountPublic",{enumerable:!0,get:function(){return r.encodeAccountPublic}}),Object.defineProperty(t,"decodeAccountPublic",{enumerable:!0,get:function(){return r.decodeAccountPublic}}),Object.defineProperty(t,"isValidClassicAddress",{enumerable:!0,get:function(){return r.isValidClassicAddress}});const s={main:Uint8Array.from([5,68]),test:Uint8Array.from([4,147])},i=4294967295;function a(p,f,m){const v=(0,r.decodeAccountID)(p);return o(v,f,m)}t.classicAddressToXAddress=a;function o(p,f,m){if(p.length!==20)throw new Error("Account ID must be 20 bytes");if(f!==!1&&f>i)throw new Error("Invalid tag");const v=f||0,x=f===!1||f==null?0:1,b=(0,e.concat)([m?s.test:s.main,p,Uint8Array.from([x,v&255,v>>8&255,v>>16&255,v>>24&255,0,0,0,0])]);return r.codec.encodeChecked(b)}t.encodeXAddress=o;function l(p){const{accountId:f,tag:m,test:v}=c(p);return{classicAddress:(0,r.encodeAccountID)(f),tag:m,test:v}}t.xAddressToClassicAddress=l;function c(p){const f=r.codec.decodeChecked(p),m=d(f),v=f.slice(2,22),x=u(f);return{accountId:v,tag:x,test:m}}t.decodeXAddress=c;function d(p){const f=p.slice(0,2);if((0,e.equal)(s.main,f))return!1;if((0,e.equal)(s.test,f))return!0;throw new Error("Invalid X-address: bad prefix")}function u(p){const f=p[22];if(f>=2)throw new Error("Unsupported X-address");if(f===1)return p[23]+p[24]*256+p[25]*65536+p[26]*16777216;if(f!==0)throw new Error("flag must be zero to indicate no tag");if(!(0,e.equal)((0,e.hexToBytes)("0000000000000000"),p.slice(23,23+8)))throw new Error("remaining bytes must be zero");return!1}function h(p){try{c(p)}catch{return!1}return!0}t.isValidXAddress=h})(Cs);var hn={},MT={},zi={};const QI=[["Generic",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:0,type:"Unknown"}],["Invalid",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:-1,type:"Unknown"}],["ObjectEndMarker",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"STObject"}],["ArrayEndMarker",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"STArray"}],["taker_gets_funded",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:258,type:"Amount"}],["taker_pays_funded",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:259,type:"Amount"}],["LedgerEntryType",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"UInt16"}],["TransactionType",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"UInt16"}],["SignerWeight",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"UInt16"}],["TransferFee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"UInt16"}],["TradingFee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"UInt16"}],["DiscountedFee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:6,type:"UInt16"}],["Version",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"UInt16"}],["HookStateChangeCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:17,type:"UInt16"}],["HookEmitCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"UInt16"}],["HookExecutionIndex",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"UInt16"}],["HookApiVersion",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:20,type:"UInt16"}],["LedgerFixType",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:21,type:"UInt16"}],["NetworkID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"UInt32"}],["Flags",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"UInt32"}],["SourceTag",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"UInt32"}],["Sequence",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"UInt32"}],["PreviousTxnLgrSeq",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"UInt32"}],["LedgerSequence",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:6,type:"UInt32"}],["CloseTime",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:7,type:"UInt32"}],["ParentCloseTime",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:8,type:"UInt32"}],["SigningTime",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:9,type:"UInt32"}],["Expiration",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:10,type:"UInt32"}],["TransferRate",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:11,type:"UInt32"}],["WalletSize",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:12,type:"UInt32"}],["OwnerCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:13,type:"UInt32"}],["DestinationTag",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:14,type:"UInt32"}],["LastUpdateTime",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:15,type:"UInt32"}],["HighQualityIn",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"UInt32"}],["HighQualityOut",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:17,type:"UInt32"}],["LowQualityIn",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"UInt32"}],["LowQualityOut",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"UInt32"}],["QualityIn",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:20,type:"UInt32"}],["QualityOut",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:21,type:"UInt32"}],["StampEscrow",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:22,type:"UInt32"}],["BondAmount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:23,type:"UInt32"}],["LoadFee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:24,type:"UInt32"}],["OfferSequence",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:25,type:"UInt32"}],["FirstLedgerSequence",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:26,type:"UInt32"}],["LastLedgerSequence",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:27,type:"UInt32"}],["TransactionIndex",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:28,type:"UInt32"}],["OperationLimit",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:29,type:"UInt32"}],["ReferenceFeeUnits",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:30,type:"UInt32"}],["ReserveBase",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:31,type:"UInt32"}],["ReserveIncrement",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:32,type:"UInt32"}],["SetFlag",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:33,type:"UInt32"}],["ClearFlag",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:34,type:"UInt32"}],["SignerQuorum",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:35,type:"UInt32"}],["CancelAfter",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:36,type:"UInt32"}],["FinishAfter",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:37,type:"UInt32"}],["SignerListID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:38,type:"UInt32"}],["SettleDelay",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:39,type:"UInt32"}],["TicketCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:40,type:"UInt32"}],["TicketSequence",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:41,type:"UInt32"}],["NFTokenTaxon",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:42,type:"UInt32"}],["MintedNFTokens",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:43,type:"UInt32"}],["BurnedNFTokens",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:44,type:"UInt32"}],["HookStateCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:45,type:"UInt32"}],["EmitGeneration",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:46,type:"UInt32"}],["VoteWeight",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:48,type:"UInt32"}],["FirstNFTokenSequence",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:50,type:"UInt32"}],["OracleDocumentID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:51,type:"UInt32"}],["IndexNext",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"UInt64"}],["IndexPrevious",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"UInt64"}],["BookNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"UInt64"}],["OwnerNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"UInt64"}],["BaseFee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"UInt64"}],["ExchangeRate",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:6,type:"UInt64"}],["LowNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:7,type:"UInt64"}],["HighNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:8,type:"UInt64"}],["DestinationNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:9,type:"UInt64"}],["Cookie",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:10,type:"UInt64"}],["ServerVersion",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:11,type:"UInt64"}],["NFTokenOfferNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:12,type:"UInt64"}],["EmitBurden",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:13,type:"UInt64"}],["HookOn",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"UInt64"}],["HookInstructionCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:17,type:"UInt64"}],["HookReturnCode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"UInt64"}],["ReferenceCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"UInt64"}],["XChainClaimID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:20,type:"UInt64"}],["XChainAccountCreateCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:21,type:"UInt64"}],["XChainAccountClaimCount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:22,type:"UInt64"}],["AssetPrice",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:23,type:"UInt64"}],["MaximumAmount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:24,type:"UInt64"}],["OutstandingAmount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:25,type:"UInt64"}],["MPTAmount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:26,type:"UInt64"}],["IssuerNode",{nth:27,isVLEncoded:!1,isSerialized:!0,isSigningField:!0,type:"UInt64"}],["SubjectNode",{nth:28,isVLEncoded:!1,isSerialized:!0,isSigningField:!0,type:"UInt64"}],["EmailHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"Hash128"}],["LedgerHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"Hash256"}],["ParentHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"Hash256"}],["TransactionHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"Hash256"}],["AccountHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"Hash256"}],["PreviousTxnID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"Hash256"}],["LedgerIndex",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:6,type:"Hash256"}],["WalletLocator",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:7,type:"Hash256"}],["RootIndex",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:8,type:"Hash256"}],["AccountTxnID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:9,type:"Hash256"}],["NFTokenID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:10,type:"Hash256"}],["EmitParentTxnID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:11,type:"Hash256"}],["EmitNonce",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:12,type:"Hash256"}],["EmitHookHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:13,type:"Hash256"}],["AMMID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:14,type:"Hash256"}],["BookDirectory",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"Hash256"}],["InvoiceID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:17,type:"Hash256"}],["Nickname",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"Hash256"}],["Amendment",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"Hash256"}],["Digest",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:21,type:"Hash256"}],["Channel",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:22,type:"Hash256"}],["ConsensusHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:23,type:"Hash256"}],["CheckID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:24,type:"Hash256"}],["ValidatedHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:25,type:"Hash256"}],["PreviousPageMin",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:26,type:"Hash256"}],["NextPageMin",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:27,type:"Hash256"}],["NFTokenBuyOffer",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:28,type:"Hash256"}],["NFTokenSellOffer",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:29,type:"Hash256"}],["HookStateKey",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:30,type:"Hash256"}],["HookHash",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:31,type:"Hash256"}],["HookNamespace",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:32,type:"Hash256"}],["HookSetTxnID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:33,type:"Hash256"}],["hash",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:257,type:"Hash256"}],["index",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:258,type:"Hash256"}],["Amount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"Amount"}],["Balance",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"Amount"}],["LimitAmount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"Amount"}],["TakerPays",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"Amount"}],["TakerGets",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"Amount"}],["LowLimit",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:6,type:"Amount"}],["HighLimit",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:7,type:"Amount"}],["Fee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:8,type:"Amount"}],["SendMax",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:9,type:"Amount"}],["DeliverMin",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:10,type:"Amount"}],["Amount2",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:11,type:"Amount"}],["BidMin",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:12,type:"Amount"}],["BidMax",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:13,type:"Amount"}],["MinimumOffer",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"Amount"}],["RippleEscrow",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:17,type:"Amount"}],["DeliveredAmount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"Amount"}],["NFTokenBrokerFee",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"Amount"}],["BaseFeeDrops",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:22,type:"Amount"}],["ReserveBaseDrops",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:23,type:"Amount"}],["ReserveIncrementDrops",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:24,type:"Amount"}],["LPTokenOut",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:25,type:"Amount"}],["LPTokenIn",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:26,type:"Amount"}],["EPrice",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:27,type:"Amount"}],["Price",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:28,type:"Amount"}],["SignatureReward",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:29,type:"Amount"}],["MinAccountCreateAmount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:30,type:"Amount"}],["LPTokenBalance",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:31,type:"Amount"}],["PublicKey",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:1,type:"Blob"}],["MessageKey",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:2,type:"Blob"}],["SigningPubKey",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:3,type:"Blob"}],["TxnSignature",{isSerialized:!0,isSigningField:!1,isVLEncoded:!0,nth:4,type:"Blob"}],["URI",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:5,type:"Blob"}],["Signature",{isSerialized:!0,isSigningField:!1,isVLEncoded:!0,nth:6,type:"Blob"}],["Domain",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:7,type:"Blob"}],["FundCode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:8,type:"Blob"}],["RemoveCode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:9,type:"Blob"}],["ExpireCode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:10,type:"Blob"}],["CreateCode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:11,type:"Blob"}],["MemoType",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:12,type:"Blob"}],["MemoData",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:13,type:"Blob"}],["MemoFormat",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:14,type:"Blob"}],["Fulfillment",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:16,type:"Blob"}],["Condition",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:17,type:"Blob"}],["MasterSignature",{isSerialized:!0,isSigningField:!1,isVLEncoded:!0,nth:18,type:"Blob"}],["UNLModifyValidator",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:19,type:"Blob"}],["ValidatorToDisable",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:20,type:"Blob"}],["ValidatorToReEnable",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:21,type:"Blob"}],["HookStateData",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:22,type:"Blob"}],["HookReturnString",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:23,type:"Blob"}],["HookParameterName",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:24,type:"Blob"}],["HookParameterValue",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:25,type:"Blob"}],["DIDDocument",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:26,type:"Blob"}],["Data",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:27,type:"Blob"}],["AssetClass",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:28,type:"Blob"}],["Provider",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:29,type:"Blob"}],["MPTokenMetadata",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:30,type:"Blob"}],["CredentialType",{nth:31,isVLEncoded:!0,isSerialized:!0,isSigningField:!0,type:"Blob"}],["Account",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:1,type:"AccountID"}],["Owner",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:2,type:"AccountID"}],["Destination",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:3,type:"AccountID"}],["Issuer",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:4,type:"AccountID"}],["Authorize",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:5,type:"AccountID"}],["Unauthorize",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:6,type:"AccountID"}],["RegularKey",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:8,type:"AccountID"}],["NFTokenMinter",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:9,type:"AccountID"}],["EmitCallback",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:10,type:"AccountID"}],["Holder",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:11,type:"AccountID"}],["HookAccount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:16,type:"AccountID"}],["OtherChainSource",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:18,type:"AccountID"}],["OtherChainDestination",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:19,type:"AccountID"}],["AttestationSignerAccount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:20,type:"AccountID"}],["AttestationRewardAccount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:21,type:"AccountID"}],["LockingChainDoor",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:22,type:"AccountID"}],["IssuingChainDoor",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:23,type:"AccountID"}],["Subject",{nth:24,isVLEncoded:!0,isSerialized:!0,isSigningField:!0,type:"AccountID"}],["TransactionMetaData",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"STObject"}],["CreatedNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"STObject"}],["DeletedNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"STObject"}],["ModifiedNode",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"STObject"}],["PreviousFields",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:6,type:"STObject"}],["FinalFields",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:7,type:"STObject"}],["NewFields",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:8,type:"STObject"}],["TemplateEntry",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:9,type:"STObject"}],["Memo",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:10,type:"STObject"}],["SignerEntry",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:11,type:"STObject"}],["NFToken",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:12,type:"STObject"}],["EmitDetails",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:13,type:"STObject"}],["Hook",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:14,type:"STObject"}],["Signer",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"STObject"}],["Majority",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"STObject"}],["DisabledValidator",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"STObject"}],["EmittedTxn",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:20,type:"STObject"}],["HookExecution",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:21,type:"STObject"}],["HookDefinition",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:22,type:"STObject"}],["HookParameter",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:23,type:"STObject"}],["HookGrant",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:24,type:"STObject"}],["VoteEntry",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:25,type:"STObject"}],["AuctionSlot",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:26,type:"STObject"}],["AuthAccount",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:27,type:"STObject"}],["XChainClaimProofSig",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:28,type:"STObject"}],["XChainCreateAccountProofSig",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:29,type:"STObject"}],["XChainClaimAttestationCollectionElement",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:30,type:"STObject"}],["XChainCreateAccountAttestationCollectionElement",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:31,type:"STObject"}],["PriceData",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:32,type:"STObject"}],["Credential",{nth:33,isVLEncoded:!1,isSerialized:!0,isSigningField:!0,type:"STObject"}],["Signers",{isSerialized:!0,isSigningField:!1,isVLEncoded:!1,nth:3,type:"STArray"}],["SignerEntries",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"STArray"}],["Template",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"STArray"}],["Necessary",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:6,type:"STArray"}],["Sufficient",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:7,type:"STArray"}],["AffectedNodes",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:8,type:"STArray"}],["Memos",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:9,type:"STArray"}],["NFTokens",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:10,type:"STArray"}],["Hooks",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:11,type:"STArray"}],["VoteSlots",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:12,type:"STArray"}],["Majorities",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"STArray"}],["DisabledValidators",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:17,type:"STArray"}],["HookExecutions",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"STArray"}],["HookParameters",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"STArray"}],["HookGrants",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:20,type:"STArray"}],["XChainClaimAttestations",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:21,type:"STArray"}],["XChainCreateAccountAttestations",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:22,type:"STArray"}],["PriceDataSeries",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:24,type:"STArray"}],["AuthAccounts",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:25,type:"STArray"}],["AuthorizeCredentials",{nth:26,isVLEncoded:!1,isSerialized:!0,isSigningField:!0,type:"STArray"}],["UnauthorizeCredentials",{nth:27,isVLEncoded:!1,isSerialized:!0,isSigningField:!0,type:"STArray"}],["CloseResolution",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"UInt8"}],["Method",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"UInt8"}],["TransactionResult",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"UInt8"}],["Scale",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"UInt8"}],["AssetScale",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:5,type:"UInt8"}],["TickSize",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:16,type:"UInt8"}],["UNLModifyDisabling",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:17,type:"UInt8"}],["HookResult",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:18,type:"UInt8"}],["WasLockingChainSend",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:19,type:"UInt8"}],["TakerPaysCurrency",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"Hash160"}],["TakerPaysIssuer",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"Hash160"}],["TakerGetsCurrency",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"Hash160"}],["TakerGetsIssuer",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"Hash160"}],["Paths",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"PathSet"}],["Indexes",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:1,type:"Vector256"}],["Hashes",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:2,type:"Vector256"}],["Amendments",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:3,type:"Vector256"}],["NFTokenOffers",{isSerialized:!0,isSigningField:!0,isVLEncoded:!0,nth:4,type:"Vector256"}],["CredentialIDs",{nth:5,isVLEncoded:!0,isSerialized:!0,isSigningField:!0,type:"Vector256"}],["MPTokenIssuanceID",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"Hash192"}],["LockingChainIssue",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"Issue"}],["IssuingChainIssue",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"Issue"}],["Asset",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:3,type:"Issue"}],["Asset2",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:4,type:"Issue"}],["XChainBridge",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"XChainBridge"}],["BaseAsset",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:1,type:"Currency"}],["QuoteAsset",{isSerialized:!0,isSigningField:!0,isVLEncoded:!1,nth:2,type:"Currency"}],["Transaction",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:257,type:"Transaction"}],["LedgerEntry",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:257,type:"LedgerEntry"}],["Validation",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:257,type:"Validation"}],["Metadata",{isSerialized:!1,isSigningField:!1,isVLEncoded:!1,nth:257,type:"Metadata"}]],ZI={AMM:121,AccountRoot:97,Amendments:102,Bridge:105,Check:67,DID:73,DepositPreauth:112,DirectoryNode:100,Escrow:117,FeeSettings:115,Invalid:-1,LedgerHashes:104,MPToken:127,MPTokenIssuance:126,NFTokenOffer:55,NFTokenPage:80,NegativeUNL:78,Offer:111,Oracle:128,Credential:129,PayChannel:120,RippleState:114,SignerList:83,Ticket:84,XChainOwnedClaimID:113,XChainOwnedCreateAccountClaimID:116},eL={tecAMM_ACCOUNT:168,tecAMM_BALANCE:163,tecAMM_EMPTY:166,tecAMM_FAILED:164,tecAMM_INVALID_TOKENS:165,tecAMM_NOT_EMPTY:167,tecARRAY_EMPTY:190,tecARRAY_TOO_LARGE:191,tecBAD_CREDENTIALS:193,tecCANT_ACCEPT_OWN_NFTOKEN_OFFER:158,tecCLAIM:100,tecCRYPTOCONDITION_ERROR:146,tecDIR_FULL:121,tecDST_TAG_NEEDED:143,tecDUPLICATE:149,tecEMPTY_DID:187,tecEXPIRED:148,tecFAILED_PROCESSING:105,tecFROZEN:137,tecHAS_OBLIGATIONS:151,tecINCOMPLETE:169,tecINSUFFICIENT_FUNDS:159,tecINSUFFICIENT_PAYMENT:161,tecINSUFFICIENT_RESERVE:141,tecINSUFF_FEE:136,tecINSUF_RESERVE_LINE:122,tecINSUF_RESERVE_OFFER:123,tecINTERNAL:144,tecINVALID_UPDATE_TIME:188,tecINVARIANT_FAILED:147,tecKILLED:150,tecLOCKED:192,tecMAX_SEQUENCE_REACHED:154,tecNEED_MASTER_KEY:142,tecNFTOKEN_BUY_SELL_MISMATCH:156,tecNFTOKEN_OFFER_TYPE_MISMATCH:157,tecNO_ALTERNATIVE_KEY:130,tecNO_AUTH:134,tecNO_DST:124,tecNO_DST_INSUF_XRP:125,tecNO_ENTRY:140,tecNO_ISSUER:133,tecNO_LINE:135,tecNO_LINE_INSUF_RESERVE:126,tecNO_LINE_REDUNDANT:127,tecNO_PERMISSION:139,tecNO_REGULAR_KEY:131,tecNO_SUITABLE_NFTOKEN_PAGE:155,tecNO_TARGET:138,tecOBJECT_NOT_FOUND:160,tecOVERSIZE:145,tecOWNERS:132,tecPATH_DRY:128,tecPATH_PARTIAL:101,tecTOKEN_PAIR_NOT_FOUND:189,tecTOO_SOON:152,tecUNFUNDED:129,tecUNFUNDED_ADD:102,tecUNFUNDED_AMM:162,tecUNFUNDED_OFFER:103,tecUNFUNDED_PAYMENT:104,tecXCHAIN_ACCOUNT_CREATE_PAST:181,tecXCHAIN_ACCOUNT_CREATE_TOO_MANY:182,tecXCHAIN_BAD_CLAIM_ID:172,tecXCHAIN_BAD_PUBLIC_KEY_ACCOUNT_PAIR:185,tecXCHAIN_BAD_TRANSFER_ISSUE:170,tecXCHAIN_CLAIM_NO_QUORUM:173,tecXCHAIN_CREATE_ACCOUNT_DISABLED:186,tecXCHAIN_CREATE_ACCOUNT_NONXRP_ISSUE:175,tecXCHAIN_INSUFF_CREATE_AMOUNT:180,tecXCHAIN_NO_CLAIM_ID:171,tecXCHAIN_NO_SIGNERS_LIST:178,tecXCHAIN_PAYMENT_FAILED:183,tecXCHAIN_PROOF_UNKNOWN_KEY:174,tecXCHAIN_REWARD_MISMATCH:177,tecXCHAIN_SELF_COMMIT:184,tecXCHAIN_SENDING_ACCOUNT_MISMATCH:179,tecXCHAIN_WRONG_CHAIN:176,tefALREADY:-198,tefBAD_ADD_AUTH:-197,tefBAD_AUTH:-196,tefBAD_AUTH_MASTER:-183,tefBAD_LEDGER:-195,tefBAD_QUORUM:-185,tefBAD_SIGNATURE:-186,tefCREATED:-194,tefEXCEPTION:-193,tefFAILURE:-199,tefINTERNAL:-192,tefINVALID_LEDGER_FIX_TYPE:-178,tefINVARIANT_FAILED:-182,tefMASTER_DISABLED:-188,tefMAX_LEDGER:-187,tefNFTOKEN_IS_NOT_TRANSFERABLE:-179,tefNOT_MULTI_SIGNING:-184,tefNO_AUTH_REQUIRED:-191,tefNO_TICKET:-180,tefPAST_SEQ:-190,tefTOO_BIG:-181,tefWRONG_PRIOR:-189,telBAD_DOMAIN:-398,telBAD_PATH_COUNT:-397,telBAD_PUBLIC_KEY:-396,telCAN_NOT_QUEUE:-392,telCAN_NOT_QUEUE_BALANCE:-391,telCAN_NOT_QUEUE_BLOCKED:-389,telCAN_NOT_QUEUE_BLOCKS:-390,telCAN_NOT_QUEUE_FEE:-388,telCAN_NOT_QUEUE_FULL:-387,telENV_RPC_FAILED:-383,telFAILED_PROCESSING:-395,telINSUF_FEE_P:-394,telLOCAL_ERROR:-399,telNETWORK_ID_MAKES_TX_NON_CANONICAL:-384,telNO_DST_PARTIAL:-393,telREQUIRES_NETWORK_ID:-385,telWRONG_NETWORK:-386,temARRAY_EMPTY:-253,temARRAY_TOO_LARGE:-252,temBAD_AMM_TOKENS:-261,temBAD_AMOUNT:-298,temBAD_CURRENCY:-297,temBAD_EXPIRATION:-296,temBAD_FEE:-295,temBAD_ISSUER:-294,temBAD_LIMIT:-293,temBAD_NFTOKEN_TRANSFER_FEE:-262,temBAD_OFFER:-292,temBAD_PATH:-291,temBAD_PATH_LOOP:-290,temBAD_QUORUM:-271,temBAD_REGKEY:-289,temBAD_SEND_XRP_LIMIT:-288,temBAD_SEND_XRP_MAX:-287,temBAD_SEND_XRP_NO_DIRECT:-286,temBAD_SEND_XRP_PARTIAL:-285,temBAD_SEND_XRP_PATHS:-284,temBAD_SEQUENCE:-283,temBAD_SIGNATURE:-282,temBAD_SIGNER:-272,temBAD_SRC_ACCOUNT:-281,temBAD_TICK_SIZE:-269,temBAD_TRANSFER_FEE:-251,temBAD_TRANSFER_RATE:-280,temBAD_WEIGHT:-270,temCANNOT_PREAUTH_SELF:-267,temDISABLED:-273,temDST_IS_SRC:-279,temDST_NEEDED:-278,temEMPTY_DID:-254,temINVALID:-277,temINVALID_ACCOUNT_ID:-268,temINVALID_COUNT:-266,temINVALID_FLAG:-276,temMALFORMED:-299,temREDUNDANT:-275,temRIPPLE_EMPTY:-274,temSEQ_AND_TICKET:-263,temUNCERTAIN:-265,temUNKNOWN:-264,temXCHAIN_BAD_PROOF:-259,temXCHAIN_BRIDGE_BAD_ISSUES:-258,temXCHAIN_BRIDGE_BAD_MIN_ACCOUNT_CREATE_AMOUNT:-256,temXCHAIN_BRIDGE_BAD_REWARD_AMOUNT:-255,temXCHAIN_BRIDGE_NONDOOR_OWNER:-257,temXCHAIN_EQUAL_DOOR_ACCOUNTS:-260,terFUNDS_SPENT:-98,terINSUF_FEE_B:-97,terLAST:-91,terNO_ACCOUNT:-96,terNO_AMM:-87,terNO_AUTH:-95,terNO_LINE:-94,terNO_RIPPLE:-90,terOWNERS:-93,terPRE_SEQ:-92,terPRE_TICKET:-88,terQUEUED:-89,terRETRY:-99,tesSUCCESS:0},tL={AMMBid:39,AMMCreate:35,AMMDelete:40,AMMDeposit:36,AMMVote:38,AMMWithdraw:37,AccountDelete:21,AccountSet:3,CheckCancel:18,CheckCash:17,CheckCreate:16,Clawback:30,CredentialCreate:58,CredentialAccept:59,CredentialDelete:60,DIDDelete:50,DIDSet:49,DepositPreauth:19,EnableAmendment:100,EscrowCancel:4,EscrowCreate:1,EscrowFinish:2,Invalid:-1,LedgerStateFix:53,MPTokenAuthorize:57,MPTokenIssuanceCreate:54,MPTokenIssuanceDestroy:55,MPTokenIssuanceSet:56,NFTokenAcceptOffer:29,NFTokenBurn:26,NFTokenCancelOffer:28,NFTokenCreateOffer:27,NFTokenMint:25,OfferCancel:8,OfferCreate:7,OracleDelete:52,OracleSet:51,Payment:0,PaymentChannelClaim:15,PaymentChannelCreate:13,PaymentChannelFund:14,SetFee:101,SetRegularKey:5,SignerListSet:12,TicketCreate:10,TrustSet:20,UNLModify:102,XChainAccountCreateCommit:44,XChainAddAccountCreateAttestation:46,XChainAddClaimAttestation:45,XChainClaim:43,XChainCommit:42,XChainCreateBridge:48,XChainCreateClaimID:41,XChainModifyBridge:47},rL={AccountID:8,Amount:6,Blob:7,Currency:26,Done:-1,Hash128:4,Hash160:17,Hash192:21,Hash256:5,Issue:24,LedgerEntry:10002,Metadata:10004,NotPresent:0,PathSet:18,STArray:15,STObject:14,Transaction:10001,UInt16:1,UInt32:2,UInt384:22,UInt512:23,UInt64:3,UInt8:16,UInt96:20,Unknown:-2,Validation:10003,Vector256:19,XChainBridge:25},sL={FIELDS:QI,LEDGER_ENTRY_TYPES:ZI,TRANSACTION_RESULTS:eL,TRANSACTION_TYPES:tL,TYPES:rL};var Gb={},Zo={};Object.defineProperty(Zo,"__esModule",{value:!0});Zo.BytesLookup=Zo.Bytes=void 0;class Jy{constructor(e,r,s){this.name=e,this.ordinal=r,this.ordinalWidth=s,this.bytes=new Uint8Array(s);for(let i=0;i<s;i++)this.bytes[s-i-1]=r>>>i*8&255}toJSON(){return this.name}toBytesSink(e){e.put(this.bytes)}toBytes(){return this.bytes}}Zo.Bytes=Jy;class nL{constructor(e,r){this.ordinalWidth=r,Object.entries(e).forEach(([s,i])=>{this.add(s,i)})}add(e,r){if(this[e])throw new SyntaxError(`Attempted to add a value with a duplicate name "${e}". This is not allowed because it is unclear how to decode.`);if(this[r.toString()])throw new SyntaxError(`Attempted to add a duplicate value under a different name (Given name: "${e}" and previous name: "${this[r.toString()]}. This is not allowed because it is unclear how to decode.
Given value: ${r.toString()}`);this[e]=new Jy(e,r,this.ordinalWidth),this[r.toString()]=this[e]}from(e){return e instanceof Jy?e:this[e]}fromParser(e){return this.from(e.readUIntN(this.ordinalWidth).toString())}}Zo.BytesLookup=nL;var g0={},Qr={},ui={};Object.defineProperty(ui,"__esModule",{value:!0});ui.BinarySerializer=ui.BytesList=void 0;const Eg=At;class Qy{constructor(){this.bytesArray=[]}getLength(){return(0,Eg.concat)(this.bytesArray).byteLength}put(e){const r=Uint8Array.from(e);return this.bytesArray.push(r),this}toBytesSink(e){e.put(this.toBytes())}toBytes(){return(0,Eg.concat)(this.bytesArray)}toHex(){return(0,Eg.bytesToHex)(this.toBytes())}}ui.BytesList=Qy;class iL{constructor(e){this.sink=new Qy,this.sink=e}write(e){e.toBytesSink(this.sink)}put(e){this.sink.put(e)}writeType(e,r){this.write(e.from(r))}writeBytesList(e){e.toBytesSink(this.sink)}encodeVariableLength(e){const r=new Uint8Array(3);if(e<=192)return r[0]=e,r.slice(0,1);if(e<=12480)return e-=193,r[0]=193+(e>>>8),r[1]=e&255,r.slice(0,2);if(e<=918744)return e-=12481,r[0]=241+(e>>>16),r[1]=e>>8&255,r[2]=e&255,r.slice(0,3);throw new Error("Overflow error")}writeFieldAndValue(e,r,s=!1){const i=e.associatedType.from(r);if(i.toBytesSink===void 0||e.name===void 0)throw new Error;this.sink.put(e.header),e.isVariableLengthEncoded?this.writeLengthEncoded(i,s):i.toBytesSink(this.sink)}writeLengthEncoded(e,r=!1){const s=new Qy;r||e.toBytesSink(s),this.put(this.encodeVariableLength(s.getLength())),this.writeBytesList(s)}}ui.BinarySerializer=iL;Object.defineProperty(Qr,"__esModule",{value:!0});Qr.Comparable=Qr.SerializedType=void 0;const aL=ui,oL=At;class FT{constructor(e){this.bytes=new Uint8Array(0),this.bytes=e??new Uint8Array(0)}static fromParser(e,r){throw new Error("fromParser not implemented")}static from(e){throw new Error("from not implemented")}toBytesSink(e){e.put(this.bytes)}toHex(){return(0,oL.bytesToHex)(this.toBytes())}toBytes(){if(this.bytes)return this.bytes;const e=new aL.BytesList;return this.toBytesSink(e),e.toBytes()}toJSON(e,r){return this.toHex()}toString(){return this.toHex()}}Qr.SerializedType=FT;class lL extends FT{lt(e){return this.compareTo(e)<0}eq(e){return this.compareTo(e)===0}gt(e){return this.compareTo(e)>0}gte(e){return this.compareTo(e)>-1}lte(e){return this.compareTo(e)<1}compareTo(e){throw new Error(`cannot compare ${this.toString()} and ${e.toString()}`)}}Qr.Comparable=lL;var En={};Object.defineProperty(En,"__esModule",{value:!0});En.TRANSACTION_RESULT_WIDTH=En.TRANSACTION_TYPE_WIDTH=En.LEDGER_ENTRY_WIDTH=En.TYPE_WIDTH=void 0;En.TYPE_WIDTH=2;En.LEDGER_ENTRY_WIDTH=2;En.TRANSACTION_TYPE_WIDTH=2;En.TRANSACTION_RESULT_WIDTH=1;Object.defineProperty(g0,"__esModule",{value:!0});g0.FieldLookup=void 0;const cL=Zo,dL=Qr,uL=En;function hL(t,e){const r=[];return t<16?e<16?r.push(t<<4|e):r.push(t<<4,e):e<16?r.push(e,t):r.push(0,t,e),Uint8Array.from(r)}function pL([t,e],r){const s=hL(r,e.nth);return{name:t,nth:e.nth,isVariableLengthEncoded:e.isVLEncoded,isSerialized:e.isSerialized,isSigningField:e.isSigningField,ordinal:r<<16|e.nth,type:new cL.Bytes(e.type,r,uL.TYPE_WIDTH),header:s,associatedType:dL.SerializedType}}class fL{constructor(e,r){e.forEach(([s,i])=>{const a=r[i.type];this[s]=pL([s,i],a),this[this[s].ordinal.toString()]=this[s]})}fromString(e){return this[e]}}g0.FieldLookup=fL;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.BytesLookup=t.Bytes=t.FieldLookup=t.XrplDefinitionsBase=void 0;const e=Zo;Object.defineProperty(t,"Bytes",{enumerable:!0,get:function(){return e.Bytes}}),Object.defineProperty(t,"BytesLookup",{enumerable:!0,get:function(){return e.BytesLookup}});const r=g0;Object.defineProperty(t,"FieldLookup",{enumerable:!0,get:function(){return r.FieldLookup}});const s=En;class i{constructor(o,l){this.type=new e.BytesLookup(o.TYPES,s.TYPE_WIDTH),this.ledgerEntryType=new e.BytesLookup(o.LEDGER_ENTRY_TYPES,s.LEDGER_ENTRY_WIDTH),this.transactionType=new e.BytesLookup(o.TRANSACTION_TYPES,s.TRANSACTION_TYPE_WIDTH),this.transactionResult=new e.BytesLookup(o.TRANSACTION_RESULTS,s.TRANSACTION_RESULT_WIDTH),this.field=new r.FieldLookup(o.FIELDS,o.TYPES),this.transactionNames=Object.entries(o.TRANSACTION_TYPES).filter(([c,d])=>d>=0).map(([c,d])=>c),this.dataTypes={},this.associateTypes(l)}associateTypes(o){this.dataTypes=Object.assign({},this.dataTypes,o),Object.values(this.field).forEach(l=>{l.associatedType=this.dataTypes[l.type.name]}),this.field.TransactionType.associatedType=this.transactionType,this.field.TransactionResult.associatedType=this.transactionResult,this.field.LedgerEntryType.associatedType=this.ledgerEntryType}getAssociatedTypes(){return this.dataTypes}}t.XrplDefinitionsBase=i})(Gb);(function(t){var e=Ce&&Ce.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(t,"__esModule",{value:!0}),t.TRANSACTION_TYPES=t.TransactionType=t.TransactionResult=t.LedgerEntryType=t.Type=t.Field=t.DEFAULT_DEFINITIONS=t.XrplDefinitionsBase=t.Bytes=void 0;const r=e(sL),s=Gb;Object.defineProperty(t,"XrplDefinitionsBase",{enumerable:!0,get:function(){return s.XrplDefinitionsBase}}),Object.defineProperty(t,"Bytes",{enumerable:!0,get:function(){return s.Bytes}});const i=new s.XrplDefinitionsBase(r.default,{});t.DEFAULT_DEFINITIONS=i;const a=i.type;t.Type=a;const o=i.ledgerEntryType;t.LedgerEntryType=o;const l=i.transactionType;t.TransactionType=l;const c=i.transactionResult;t.TransactionResult=c;const d=i.field;t.Field=d;const u=i.transactionNames;t.TRANSACTION_TYPES=u})(zi);var Ja={},Qa={},Xc={},fl={},hr={};Object.defineProperty(hr,"__esModule",{value:!0});hr.compare=hr.equal=hr.readUInt32BE=hr.readUInt16BE=hr.writeUInt32BE=hr.writeUInt16BE=hr.writeUInt8=void 0;function mL(t,e,r){e=Number(e),t[r]=e}hr.writeUInt8=mL;function gL(t,e,r){e=Number(e),t[r]=e>>>8,t[r+1]=e}hr.writeUInt16BE=gL;function xL(t,e,r){t[r]=e>>>24&255,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=e&255}hr.writeUInt32BE=xL;function yL(t,e){return new DataView(t.buffer).getUint16(e,!1).toString(10)}hr.readUInt16BE=yL;function vL(t,e){return new DataView(t.buffer).getUint32(e,!1).toString(10)}hr.readUInt32BE=vL;function bL(t,e){const r=t instanceof ArrayBuffer?new Uint8Array(t,0):t,s=e instanceof ArrayBuffer?new Uint8Array(e,0):e;return r.byteLength!=s.byteLength?!1:R1(r)&&R1(s)?NL(r,s)===0:P1(r)&&P1(s)?_L(r,s)===0:wL(r,s)===0}hr.equal=bL;function wL(t,e){const r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),s=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);return x0(r,s)}function _L(t,e){const r=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),s=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);return x0(r,s)}function NL(t,e){const r=new Uint32Array(t.buffer,t.byteOffset,t.byteLength/4),s=new Uint32Array(e.buffer,e.byteOffset,e.byteLength/4);return x0(r,s)}function x0(t,e){if(t.byteLength!==e.byteLength)throw new Error("Cannot compare arrays of different length");for(let r=0;r<t.length-1;r+=1){if(t[r]>e[r])return 1;if(t[r]<e[r])return-1}return 0}hr.compare=x0;function P1(t){return t.byteOffset%2===0&&t.byteLength%2===0}function R1(t){return t.byteOffset%4===0&&t.byteLength%4===0}Object.defineProperty(fl,"__esModule",{value:!0});fl.Hash=void 0;const SL=Qr,jL=At,EL=hr;class TL extends SL.Comparable{constructor(e){if(super(e),this.bytes.length!==this.constructor.width)throw new Error(`Invalid Hash length ${this.bytes.byteLength}`)}static from(e){if(e instanceof this)return e;if(typeof e=="string")return new this((0,jL.hexToBytes)(e));throw new Error("Cannot construct Hash from given value")}static fromParser(e,r){return new this(e.read(r??this.width))}compareTo(e){return(0,EL.compare)(this.bytes,this.constructor.from(e).bytes)}toString(){return this.toHex()}nibblet(e){const r=e>0?e/2|0:0;let s=this.bytes[r];return e%2===0?s=(s&240)>>>4:s=s&15,s}}fl.Hash=TL;Object.defineProperty(Xc,"__esModule",{value:!0});Xc.Hash160=void 0;const CL=fl;class ja extends CL.Hash{constructor(e){e&&e.byteLength===0&&(e=ja.ZERO_160.bytes),super(e??ja.ZERO_160.bytes)}}Xc.Hash160=ja;ja.width=20;ja.ZERO_160=new ja(new Uint8Array(ja.width));Object.defineProperty(Qa,"__esModule",{value:!0});Qa.AccountID=void 0;const $h=Cs,kL=Xc,AL=At,PL=/^[A-F0-9]{40}$/;class ji extends kL.Hash160{constructor(e){super(e??ji.defaultAccountID.bytes)}static from(e){if(e instanceof ji)return e;if(typeof e=="string")return e===""?new ji:PL.test(e)?new ji((0,AL.hexToBytes)(e)):this.fromBase58(e);throw new Error("Cannot construct AccountID from value given")}static fromBase58(e){if((0,$h.isValidXAddress)(e)){const r=(0,$h.xAddressToClassicAddress)(e);if(r.tag!==!1)throw new Error("Only allowed to have tag on Account or Destination");e=r.classicAddress}return new ji(Uint8Array.from((0,$h.decodeAccountID)(e)))}toJSON(){return this.toBase58()}toBase58(){return(0,$h.encodeAccountID)(this.bytes)}}Qa.AccountID=ji;ji.defaultAccountID=new ji(new Uint8Array(20));var y0={},Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.BinaryParser=void 0;const RL=zi,OL=At;class IL{constructor(e,r=RL.DEFAULT_DEFINITIONS){this.bytes=(0,OL.hexToBytes)(e),this.definitions=r}peek(){if(this.bytes.byteLength===0)throw new Error;return this.bytes[0]}skip(e){if(e>this.bytes.byteLength)throw new Error;this.bytes=this.bytes.slice(e)}read(e){if(e>this.bytes.byteLength)throw new Error;const r=this.bytes.slice(0,e);return this.skip(e),r}readUIntN(e){if(0>=e||e>4)throw new Error("invalid n");return this.read(e).reduce((r,s)=>r<<8|s)>>>0}readUInt8(){return this.readUIntN(1)}readUInt16(){return this.readUIntN(2)}readUInt32(){return this.readUIntN(4)}size(){return this.bytes.byteLength}end(e){const r=this.bytes.byteLength;return r===0||e!==void 0&&r<=e}readVariableLength(){return this.read(this.readVariableLengthLength())}readVariableLengthLength(){const e=this.readUInt8();if(e<=192)return e;if(e<=240){const r=this.readUInt8();return 193+(e-193)*256+r}else if(e<=254){const r=this.readUInt8(),s=this.readUInt8();return 12481+(e-241)*65536+r*256+s}throw new Error("Invalid variable length indicator")}readFieldOrdinal(){let e=this.readUInt8(),r=e&15;if(e>>=4,e===0&&(e=this.readUInt8(),e===0||e<16))throw new Error(`Cannot read FieldOrdinal, type_code ${e} out of range`);if(r===0&&(r=this.readUInt8(),r===0||r<16))throw new Error(`Cannot read FieldOrdinal, field_code ${r} out of range`);return e<<16|r}readField(){return this.definitions.field.fromString(this.readFieldOrdinal().toString())}readType(e){return e.fromParser(this)}typeForField(e){return e.associatedType}readFieldValue(e){const r=this.typeForField(e);if(!r)throw new Error(`unsupported: (${e.name}, ${e.type.name})`);const s=e.isVariableLengthEncoded?this.readVariableLengthLength():void 0,i=r.fromParser(this,s);if(i===void 0)throw new Error(`fromParser for (${e.name}, ${e.type.name}) -> undefined `);return i}readFieldAndValue(){const e=this.readField();return[e,this.readFieldValue(e)]}}Fn.BinaryParser=IL;var ml={};Object.defineProperty(ml,"__esModule",{value:!0});ml.Currency=void 0;const LL=Xc,Cu=At,ML=/^0{40}$/,FL=/^[A-Z0-9a-z?!@#$%^&*(){}[\]|]{3}$/,DL=/^[A-F0-9]{40}$/,BL=/^0{24}[\x00-\x7F]{6}0{10}$/;function $L(t){const e=new Uint8Array(20);if(t!=="XRP"){const r=t.split("").map(s=>s.charCodeAt(0));e.set(r,12)}return e}function UL(t){return FL.test(t)}function VL(t){const e=(0,Cu.hexToString)((0,Cu.bytesToHex)(t));return e==="XRP"?null:UL(e)?e:null}function HL(t){return DL.test(t)}function zL(t){return t.length===3||HL(t)}function XL(t){return t.byteLength===20}function WL(t){return t instanceof Uint8Array?XL(t):zL(t)}function qL(t){if(!WL(t))throw new Error(`Unsupported Currency representation: ${t}`);return t.length===3?$L(t):(0,Cu.hexToBytes)(t)}class $o extends LL.Hash160{constructor(e){super(e??$o.XRP.bytes);const r=(0,Cu.bytesToHex)(this.bytes);ML.test(r)?this._iso="XRP":BL.test(r)?this._iso=VL(this.bytes.slice(12,15)):this._iso=null}iso(){return this._iso}static from(e){if(e instanceof $o)return e;if(typeof e=="string")return new $o(qL(e));throw new Error("Cannot construct Currency from value given")}toJSON(){const e=this.iso();return e!==null?e:(0,Cu.bytesToHex)(this.bytes)}}ml.Currency=$o;$o.XRP=new $o(new Uint8Array(20));var DT={exports:{}};(function(t){(function(e){var r,s=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,a=Math.floor,o="[BigNumber Error] ",l=o+"Number primitive has more than 15 significant digits: ",c=1e14,d=14,u=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],p=1e7,f=1e9;function m(_){var A,B,Q,U=O.prototype={constructor:O,toString:null,valueOf:null},q=new O(1),de=20,me=4,ye=-7,G=21,Z=-1e7,he=1e7,ee=!1,H=1,I=0,K={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},re="0123456789abcdefghijklmnopqrstuvwxyz",z=!0;function O(k,j){var P,$,R,W,te,X,oe,F,J=this;if(!(J instanceof O))return new O(k,j);if(j==null){if(k&&k._isBigNumber===!0){J.s=k.s,!k.c||k.e>he?J.c=J.e=null:k.e<Z?J.c=[J.e=0]:(J.e=k.e,J.c=k.c.slice());return}if((X=typeof k=="number")&&k*0==0){if(J.s=1/k<0?(k=-k,-1):1,k===~~k){for(W=0,te=k;te>=10;te/=10,W++);W>he?J.c=J.e=null:(J.e=W,J.c=[k]);return}F=String(k)}else{if(!s.test(F=String(k)))return Q(J,F,X);J.s=F.charCodeAt(0)==45?(F=F.slice(1),-1):1}(W=F.indexOf("."))>-1&&(F=F.replace(".","")),(te=F.search(/e/i))>0?(W<0&&(W=te),W+=+F.slice(te+1),F=F.substring(0,te)):W<0&&(W=F.length)}else{if(y(j,2,re.length,"Base"),j==10&&z)return J=new O(k),ae(J,de+J.e+1,me);if(F=String(k),X=typeof k=="number"){if(k*0!=0)return Q(J,F,X,j);if(J.s=1/k<0?(F=F.slice(1),-1):1,O.DEBUG&&F.replace(/^0\.0*|\./,"").length>15)throw Error(l+k)}else J.s=F.charCodeAt(0)===45?(F=F.slice(1),-1):1;for(P=re.slice(0,j),W=te=0,oe=F.length;te<oe;te++)if(P.indexOf($=F.charAt(te))<0){if($=="."){if(te>W){W=oe;continue}}else if(!R&&(F==F.toUpperCase()&&(F=F.toLowerCase())||F==F.toLowerCase()&&(F=F.toUpperCase()))){R=!0,te=-1,W=0;continue}return Q(J,String(k),X,j)}X=!1,F=B(F,j,10,J.s),(W=F.indexOf("."))>-1?F=F.replace(".",""):W=F.length}for(te=0;F.charCodeAt(te)===48;te++);for(oe=F.length;F.charCodeAt(--oe)===48;);if(F=F.slice(te,++oe)){if(oe-=te,X&&O.DEBUG&&oe>15&&(k>u||k!==a(k)))throw Error(l+J.s*k);if((W=W-te-1)>he)J.c=J.e=null;else if(W<Z)J.c=[J.e=0];else{if(J.e=W,J.c=[],te=(W+1)%d,W<0&&(te+=d),te<oe){for(te&&J.c.push(+F.slice(0,te)),oe-=d;te<oe;)J.c.push(+F.slice(te,te+=d));te=d-(F=F.slice(te)).length}else te-=oe;for(;te--;F+="0");J.c.push(+F)}}else J.c=[J.e=0]}O.clone=m,O.ROUND_UP=0,O.ROUND_DOWN=1,O.ROUND_CEIL=2,O.ROUND_FLOOR=3,O.ROUND_HALF_UP=4,O.ROUND_HALF_DOWN=5,O.ROUND_HALF_EVEN=6,O.ROUND_HALF_CEIL=7,O.ROUND_HALF_FLOOR=8,O.EUCLID=9,O.config=O.set=function(k){var j,P;if(k!=null)if(typeof k=="object"){if(k.hasOwnProperty(j="DECIMAL_PLACES")&&(P=k[j],y(P,0,f,j),de=P),k.hasOwnProperty(j="ROUNDING_MODE")&&(P=k[j],y(P,0,8,j),me=P),k.hasOwnProperty(j="EXPONENTIAL_AT")&&(P=k[j],P&&P.pop?(y(P[0],-f,0,j),y(P[1],0,f,j),ye=P[0],G=P[1]):(y(P,-f,f,j),ye=-(G=P<0?-P:P))),k.hasOwnProperty(j="RANGE"))if(P=k[j],P&&P.pop)y(P[0],-f,-1,j),y(P[1],1,f,j),Z=P[0],he=P[1];else if(y(P,-f,f,j),P)Z=-(he=P<0?-P:P);else throw Error(o+j+" cannot be zero: "+P);if(k.hasOwnProperty(j="CRYPTO"))if(P=k[j],P===!!P)if(P)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))ee=P;else throw ee=!P,Error(o+"crypto unavailable");else ee=P;else throw Error(o+j+" not true or false: "+P);if(k.hasOwnProperty(j="MODULO_MODE")&&(P=k[j],y(P,0,9,j),H=P),k.hasOwnProperty(j="POW_PRECISION")&&(P=k[j],y(P,0,f,j),I=P),k.hasOwnProperty(j="FORMAT"))if(P=k[j],typeof P=="object")K=P;else throw Error(o+j+" not an object: "+P);if(k.hasOwnProperty(j="ALPHABET"))if(P=k[j],typeof P=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(P))z=P.slice(0,10)=="0123456789",re=P;else throw Error(o+j+" invalid: "+P)}else throw Error(o+"Object expected: "+k);return{DECIMAL_PLACES:de,ROUNDING_MODE:me,EXPONENTIAL_AT:[ye,G],RANGE:[Z,he],CRYPTO:ee,MODULO_MODE:H,POW_PRECISION:I,FORMAT:K,ALPHABET:re}},O.isBigNumber=function(k){if(!k||k._isBigNumber!==!0)return!1;if(!O.DEBUG)return!0;var j,P,$=k.c,R=k.e,W=k.s;e:if({}.toString.call($)=="[object Array]"){if((W===1||W===-1)&&R>=-f&&R<=f&&R===a(R)){if($[0]===0){if(R===0&&$.length===1)return!0;break e}if(j=(R+1)%d,j<1&&(j+=d),String($[0]).length==j){for(j=0;j<$.length;j++)if(P=$[j],P<0||P>=c||P!==a(P))break e;if(P!==0)return!0}}}else if($===null&&R===null&&(W===null||W===1||W===-1))return!0;throw Error(o+"Invalid BigNumber: "+k)},O.maximum=O.max=function(){return ne(arguments,-1)},O.minimum=O.min=function(){return ne(arguments,1)},O.random=function(){var k=9007199254740992,j=Math.random()*k&2097151?function(){return a(Math.random()*k)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(P){var $,R,W,te,X,oe=0,F=[],J=new O(q);if(P==null?P=de:y(P,0,f),te=i(P/d),ee)if(crypto.getRandomValues){for($=crypto.getRandomValues(new Uint32Array(te*=2));oe<te;)X=$[oe]*131072+($[oe+1]>>>11),X>=9e15?(R=crypto.getRandomValues(new Uint32Array(2)),$[oe]=R[0],$[oe+1]=R[1]):(F.push(X%1e14),oe+=2);oe=te/2}else if(crypto.randomBytes){for($=crypto.randomBytes(te*=7);oe<te;)X=($[oe]&31)*281474976710656+$[oe+1]*1099511627776+$[oe+2]*4294967296+$[oe+3]*16777216+($[oe+4]<<16)+($[oe+5]<<8)+$[oe+6],X>=9e15?crypto.randomBytes(7).copy($,oe):(F.push(X%1e14),oe+=7);oe=te/7}else throw ee=!1,Error(o+"crypto unavailable");if(!ee)for(;oe<te;)X=j(),X<9e15&&(F[oe++]=X%1e14);for(te=F[--oe],P%=d,te&&P&&(X=h[d-P],F[oe]=a(te/X)*X);F[oe]===0;F.pop(),oe--);if(oe<0)F=[W=0];else{for(W=-1;F[0]===0;F.splice(0,1),W-=d);for(oe=1,X=F[0];X>=10;X/=10,oe++);oe<d&&(W-=d-oe)}return J.e=W,J.c=F,J}}(),O.sum=function(){for(var k=1,j=arguments,P=new O(j[0]);k<j.length;)P=P.plus(j[k++]);return P},B=function(){var k="0123456789";function j(P,$,R,W){for(var te,X=[0],oe,F=0,J=P.length;F<J;){for(oe=X.length;oe--;X[oe]*=$);for(X[0]+=W.indexOf(P.charAt(F++)),te=0;te<X.length;te++)X[te]>R-1&&(X[te+1]==null&&(X[te+1]=0),X[te+1]+=X[te]/R|0,X[te]%=R)}return X.reverse()}return function(P,$,R,W,te){var X,oe,F,J,xe,Ee,Te,Be,nt=P.indexOf("."),De=de,L=me;for(nt>=0&&(J=I,I=0,P=P.replace(".",""),Be=new O($),Ee=Be.pow(P.length-nt),I=J,Be.c=j(S(x(Ee.c),Ee.e,"0"),10,R,k),Be.e=Be.c.length),Te=j(P,$,R,te?(X=re,k):(X=k,re)),F=J=Te.length;Te[--J]==0;Te.pop());if(!Te[0])return X.charAt(0);if(nt<0?--F:(Ee.c=Te,Ee.e=F,Ee.s=W,Ee=A(Ee,Be,De,L,R),Te=Ee.c,xe=Ee.r,F=Ee.e),oe=F+De+1,nt=Te[oe],J=R/2,xe=xe||oe<0||Te[oe+1]!=null,xe=L<4?(nt!=null||xe)&&(L==0||L==(Ee.s<0?3:2)):nt>J||nt==J&&(L==4||xe||L==6&&Te[oe-1]&1||L==(Ee.s<0?8:7)),oe<1||!Te[0])P=xe?S(X.charAt(1),-De,X.charAt(0)):X.charAt(0);else{if(Te.length=oe,xe)for(--R;++Te[--oe]>R;)Te[oe]=0,oe||(++F,Te=[1].concat(Te));for(J=Te.length;!Te[--J];);for(nt=0,P="";nt<=J;P+=X.charAt(Te[nt++]));P=S(P,F,X.charAt(0))}return P}}(),A=function(){function k($,R,W){var te,X,oe,F,J=0,xe=$.length,Ee=R%p,Te=R/p|0;for($=$.slice();xe--;)oe=$[xe]%p,F=$[xe]/p|0,te=Te*oe+F*Ee,X=Ee*oe+te%p*p+J,J=(X/W|0)+(te/p|0)+Te*F,$[xe]=X%W;return J&&($=[J].concat($)),$}function j($,R,W,te){var X,oe;if(W!=te)oe=W>te?1:-1;else for(X=oe=0;X<W;X++)if($[X]!=R[X]){oe=$[X]>R[X]?1:-1;break}return oe}function P($,R,W,te){for(var X=0;W--;)$[W]-=X,X=$[W]<R[W]?1:0,$[W]=X*te+$[W]-R[W];for(;!$[0]&&$.length>1;$.splice(0,1));}return function($,R,W,te,X){var oe,F,J,xe,Ee,Te,Be,nt,De,L,N,E,Y,fe,we,Ne,Le,ze=$.s==R.s?1:-1,st=$.c,Qe=R.c;if(!st||!st[0]||!Qe||!Qe[0])return new O(!$.s||!R.s||(st?Qe&&st[0]==Qe[0]:!Qe)?NaN:st&&st[0]==0||!Qe?ze*0:ze/0);for(nt=new O(ze),De=nt.c=[],F=$.e-R.e,ze=W+F+1,X||(X=c,F=v($.e/d)-v(R.e/d),ze=ze/d|0),J=0;Qe[J]==(st[J]||0);J++);if(Qe[J]>(st[J]||0)&&F--,ze<0)De.push(1),xe=!0;else{for(fe=st.length,Ne=Qe.length,J=0,ze+=2,Ee=a(X/(Qe[0]+1)),Ee>1&&(Qe=k(Qe,Ee,X),st=k(st,Ee,X),Ne=Qe.length,fe=st.length),Y=Ne,L=st.slice(0,Ne),N=L.length;N<Ne;L[N++]=0);Le=Qe.slice(),Le=[0].concat(Le),we=Qe[0],Qe[1]>=X/2&&we++;do{if(Ee=0,oe=j(Qe,L,Ne,N),oe<0){if(E=L[0],Ne!=N&&(E=E*X+(L[1]||0)),Ee=a(E/we),Ee>1)for(Ee>=X&&(Ee=X-1),Te=k(Qe,Ee,X),Be=Te.length,N=L.length;j(Te,L,Be,N)==1;)Ee--,P(Te,Ne<Be?Le:Qe,Be,X),Be=Te.length,oe=1;else Ee==0&&(oe=Ee=1),Te=Qe.slice(),Be=Te.length;if(Be<N&&(Te=[0].concat(Te)),P(L,Te,N,X),N=L.length,oe==-1)for(;j(Qe,L,Ne,N)<1;)Ee++,P(L,Ne<N?Le:Qe,N,X),N=L.length}else oe===0&&(Ee++,L=[0]);De[J++]=Ee,L[0]?L[N++]=st[Y]||0:(L=[st[Y]],N=1)}while((Y++<fe||L[0]!=null)&&ze--);xe=L[0]!=null,De[0]||De.splice(0,1)}if(X==c){for(J=1,ze=De[0];ze>=10;ze/=10,J++);ae(nt,W+(nt.e=J+F*d-1)+1,te,xe)}else nt.e=F,nt.r=+xe;return nt}}();function V(k,j,P,$){var R,W,te,X,oe;if(P==null?P=me:y(P,0,8),!k.c)return k.toString();if(R=k.c[0],te=k.e,j==null)oe=x(k.c),oe=$==1||$==2&&(te<=ye||te>=G)?w(oe,te):S(oe,te,"0");else if(k=ae(new O(k),j,P),W=k.e,oe=x(k.c),X=oe.length,$==1||$==2&&(j<=W||W<=ye)){for(;X<j;oe+="0",X++);oe=w(oe,W)}else if(j-=te,oe=S(oe,W,"0"),W+1>X){if(--j>0)for(oe+=".";j--;oe+="0");}else if(j+=W-X,j>0)for(W+1==X&&(oe+=".");j--;oe+="0");return k.s<0&&R?"-"+oe:oe}function ne(k,j){for(var P,$,R=1,W=new O(k[0]);R<k.length;R++)$=new O(k[R]),(!$.s||(P=b(W,$))===j||P===0&&W.s===j)&&(W=$);return W}function pe(k,j,P){for(var $=1,R=j.length;!j[--R];j.pop());for(R=j[0];R>=10;R/=10,$++);return(P=$+P*d-1)>he?k.c=k.e=null:P<Z?k.c=[k.e=0]:(k.e=P,k.c=j),k}Q=function(){var k=/^(-?)0([xbo])(?=\w[\w.]*$)/i,j=/^([^.]+)\.$/,P=/^\.([^.]+)$/,$=/^-?(Infinity|NaN)$/,R=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(W,te,X,oe){var F,J=X?te:te.replace(R,"");if($.test(J))W.s=isNaN(J)?null:J<0?-1:1;else{if(!X&&(J=J.replace(k,function(xe,Ee,Te){return F=(Te=Te.toLowerCase())=="x"?16:Te=="b"?2:8,!oe||oe==F?Ee:xe}),oe&&(F=oe,J=J.replace(j,"$1").replace(P,"0.$1")),te!=J))return new O(J,F);if(O.DEBUG)throw Error(o+"Not a"+(oe?" base "+oe:"")+" number: "+te);W.s=null}W.c=W.e=null}}();function ae(k,j,P,$){var R,W,te,X,oe,F,J,xe=k.c,Ee=h;if(xe){e:{for(R=1,X=xe[0];X>=10;X/=10,R++);if(W=j-R,W<0)W+=d,te=j,oe=xe[F=0],J=a(oe/Ee[R-te-1]%10);else if(F=i((W+1)/d),F>=xe.length)if($){for(;xe.length<=F;xe.push(0));oe=J=0,R=1,W%=d,te=W-d+1}else break e;else{for(oe=X=xe[F],R=1;X>=10;X/=10,R++);W%=d,te=W-d+R,J=te<0?0:a(oe/Ee[R-te-1]%10)}if($=$||j<0||xe[F+1]!=null||(te<0?oe:oe%Ee[R-te-1]),$=P<4?(J||$)&&(P==0||P==(k.s<0?3:2)):J>5||J==5&&(P==4||$||P==6&&(W>0?te>0?oe/Ee[R-te]:0:xe[F-1])%10&1||P==(k.s<0?8:7)),j<1||!xe[0])return xe.length=0,$?(j-=k.e+1,xe[0]=Ee[(d-j%d)%d],k.e=-j||0):xe[0]=k.e=0,k;if(W==0?(xe.length=F,X=1,F--):(xe.length=F+1,X=Ee[d-W],xe[F]=te>0?a(oe/Ee[R-te]%Ee[te])*X:0),$)for(;;)if(F==0){for(W=1,te=xe[0];te>=10;te/=10,W++);for(te=xe[0]+=X,X=1;te>=10;te/=10,X++);W!=X&&(k.e++,xe[0]==c&&(xe[0]=1));break}else{if(xe[F]+=X,xe[F]!=c)break;xe[F--]=0,X=1}for(W=xe.length;xe[--W]===0;xe.pop());}k.e>he?k.c=k.e=null:k.e<Z&&(k.c=[k.e=0])}return k}function se(k){var j,P=k.e;return P===null?k.toString():(j=x(k.c),j=P<=ye||P>=G?w(j,P):S(j,P,"0"),k.s<0?"-"+j:j)}return U.absoluteValue=U.abs=function(){var k=new O(this);return k.s<0&&(k.s=1),k},U.comparedTo=function(k,j){return b(this,new O(k,j))},U.decimalPlaces=U.dp=function(k,j){var P,$,R,W=this;if(k!=null)return y(k,0,f),j==null?j=me:y(j,0,8),ae(new O(W),k+W.e+1,j);if(!(P=W.c))return null;if($=((R=P.length-1)-v(this.e/d))*d,R=P[R])for(;R%10==0;R/=10,$--);return $<0&&($=0),$},U.dividedBy=U.div=function(k,j){return A(this,new O(k,j),de,me)},U.dividedToIntegerBy=U.idiv=function(k,j){return A(this,new O(k,j),0,1)},U.exponentiatedBy=U.pow=function(k,j){var P,$,R,W,te,X,oe,F,J,xe=this;if(k=new O(k),k.c&&!k.isInteger())throw Error(o+"Exponent not an integer: "+se(k));if(j!=null&&(j=new O(j)),X=k.e>14,!xe.c||!xe.c[0]||xe.c[0]==1&&!xe.e&&xe.c.length==1||!k.c||!k.c[0])return J=new O(Math.pow(+se(xe),X?k.s*(2-g(k)):+se(k))),j?J.mod(j):J;if(oe=k.s<0,j){if(j.c?!j.c[0]:!j.s)return new O(NaN);$=!oe&&xe.isInteger()&&j.isInteger(),$&&(xe=xe.mod(j))}else{if(k.e>9&&(xe.e>0||xe.e<-1||(xe.e==0?xe.c[0]>1||X&&xe.c[1]>=24e7:xe.c[0]<8e13||X&&xe.c[0]<=9999975e7)))return W=xe.s<0&&g(k)?-0:0,xe.e>-1&&(W=1/W),new O(oe?1/W:W);I&&(W=i(I/d+2))}for(X?(P=new O(.5),oe&&(k.s=1),F=g(k)):(R=Math.abs(+se(k)),F=R%2),J=new O(q);;){if(F){if(J=J.times(xe),!J.c)break;W?J.c.length>W&&(J.c.length=W):$&&(J=J.mod(j))}if(R){if(R=a(R/2),R===0)break;F=R%2}else if(k=k.times(P),ae(k,k.e+1,1),k.e>14)F=g(k);else{if(R=+se(k),R===0)break;F=R%2}xe=xe.times(xe),W?xe.c&&xe.c.length>W&&(xe.c.length=W):$&&(xe=xe.mod(j))}return $?J:(oe&&(J=q.div(J)),j?J.mod(j):W?ae(J,I,me,te):J)},U.integerValue=function(k){var j=new O(this);return k==null?k=me:y(k,0,8),ae(j,j.e+1,k)},U.isEqualTo=U.eq=function(k,j){return b(this,new O(k,j))===0},U.isFinite=function(){return!!this.c},U.isGreaterThan=U.gt=function(k,j){return b(this,new O(k,j))>0},U.isGreaterThanOrEqualTo=U.gte=function(k,j){return(j=b(this,new O(k,j)))===1||j===0},U.isInteger=function(){return!!this.c&&v(this.e/d)>this.c.length-2},U.isLessThan=U.lt=function(k,j){return b(this,new O(k,j))<0},U.isLessThanOrEqualTo=U.lte=function(k,j){return(j=b(this,new O(k,j)))===-1||j===0},U.isNaN=function(){return!this.s},U.isNegative=function(){return this.s<0},U.isPositive=function(){return this.s>0},U.isZero=function(){return!!this.c&&this.c[0]==0},U.minus=function(k,j){var P,$,R,W,te=this,X=te.s;if(k=new O(k,j),j=k.s,!X||!j)return new O(NaN);if(X!=j)return k.s=-j,te.plus(k);var oe=te.e/d,F=k.e/d,J=te.c,xe=k.c;if(!oe||!F){if(!J||!xe)return J?(k.s=-j,k):new O(xe?te:NaN);if(!J[0]||!xe[0])return xe[0]?(k.s=-j,k):new O(J[0]?te:me==3?-0:0)}if(oe=v(oe),F=v(F),J=J.slice(),X=oe-F){for((W=X<0)?(X=-X,R=J):(F=oe,R=xe),R.reverse(),j=X;j--;R.push(0));R.reverse()}else for($=(W=(X=J.length)<(j=xe.length))?X:j,X=j=0;j<$;j++)if(J[j]!=xe[j]){W=J[j]<xe[j];break}if(W&&(R=J,J=xe,xe=R,k.s=-k.s),j=($=xe.length)-(P=J.length),j>0)for(;j--;J[P++]=0);for(j=c-1;$>X;){if(J[--$]<xe[$]){for(P=$;P&&!J[--P];J[P]=j);--J[P],J[$]+=c}J[$]-=xe[$]}for(;J[0]==0;J.splice(0,1),--F);return J[0]?pe(k,J,F):(k.s=me==3?-1:1,k.c=[k.e=0],k)},U.modulo=U.mod=function(k,j){var P,$,R=this;return k=new O(k,j),!R.c||!k.s||k.c&&!k.c[0]?new O(NaN):!k.c||R.c&&!R.c[0]?new O(R):(H==9?($=k.s,k.s=1,P=A(R,k,0,3),k.s=$,P.s*=$):P=A(R,k,0,H),k=R.minus(P.times(k)),!k.c[0]&&H==1&&(k.s=R.s),k)},U.multipliedBy=U.times=function(k,j){var P,$,R,W,te,X,oe,F,J,xe,Ee,Te,Be,nt,De,L=this,N=L.c,E=(k=new O(k,j)).c;if(!N||!E||!N[0]||!E[0])return!L.s||!k.s||N&&!N[0]&&!E||E&&!E[0]&&!N?k.c=k.e=k.s=null:(k.s*=L.s,!N||!E?k.c=k.e=null:(k.c=[0],k.e=0)),k;for($=v(L.e/d)+v(k.e/d),k.s*=L.s,oe=N.length,xe=E.length,oe<xe&&(Be=N,N=E,E=Be,R=oe,oe=xe,xe=R),R=oe+xe,Be=[];R--;Be.push(0));for(nt=c,De=p,R=xe;--R>=0;){for(P=0,Ee=E[R]%De,Te=E[R]/De|0,te=oe,W=R+te;W>R;)F=N[--te]%De,J=N[te]/De|0,X=Te*F+J*Ee,F=Ee*F+X%De*De+Be[W]+P,P=(F/nt|0)+(X/De|0)+Te*J,Be[W--]=F%nt;Be[W]=P}return P?++$:Be.splice(0,1),pe(k,Be,$)},U.negated=function(){var k=new O(this);return k.s=-k.s||null,k},U.plus=function(k,j){var P,$=this,R=$.s;if(k=new O(k,j),j=k.s,!R||!j)return new O(NaN);if(R!=j)return k.s=-j,$.minus(k);var W=$.e/d,te=k.e/d,X=$.c,oe=k.c;if(!W||!te){if(!X||!oe)return new O(R/0);if(!X[0]||!oe[0])return oe[0]?k:new O(X[0]?$:R*0)}if(W=v(W),te=v(te),X=X.slice(),R=W-te){for(R>0?(te=W,P=oe):(R=-R,P=X),P.reverse();R--;P.push(0));P.reverse()}for(R=X.length,j=oe.length,R-j<0&&(P=oe,oe=X,X=P,j=R),R=0;j;)R=(X[--j]=X[j]+oe[j]+R)/c|0,X[j]=c===X[j]?0:X[j]%c;return R&&(X=[R].concat(X),++te),pe(k,X,te)},U.precision=U.sd=function(k,j){var P,$,R,W=this;if(k!=null&&k!==!!k)return y(k,1,f),j==null?j=me:y(j,0,8),ae(new O(W),k,j);if(!(P=W.c))return null;if(R=P.length-1,$=R*d+1,R=P[R]){for(;R%10==0;R/=10,$--);for(R=P[0];R>=10;R/=10,$++);}return k&&W.e+1>$&&($=W.e+1),$},U.shiftedBy=function(k){return y(k,-u,u),this.times("1e"+k)},U.squareRoot=U.sqrt=function(){var k,j,P,$,R,W=this,te=W.c,X=W.s,oe=W.e,F=de+4,J=new O("0.5");if(X!==1||!te||!te[0])return new O(!X||X<0&&(!te||te[0])?NaN:te?W:1/0);if(X=Math.sqrt(+se(W)),X==0||X==1/0?(j=x(te),(j.length+oe)%2==0&&(j+="0"),X=Math.sqrt(+j),oe=v((oe+1)/2)-(oe<0||oe%2),X==1/0?j="5e"+oe:(j=X.toExponential(),j=j.slice(0,j.indexOf("e")+1)+oe),P=new O(j)):P=new O(X+""),P.c[0]){for(oe=P.e,X=oe+F,X<3&&(X=0);;)if(R=P,P=J.times(R.plus(A(W,R,F,1))),x(R.c).slice(0,X)===(j=x(P.c)).slice(0,X))if(P.e<oe&&--X,j=j.slice(X-3,X+1),j=="9999"||!$&&j=="4999"){if(!$&&(ae(R,R.e+de+2,0),R.times(R).eq(W))){P=R;break}F+=4,X+=4,$=1}else{(!+j||!+j.slice(1)&&j.charAt(0)=="5")&&(ae(P,P.e+de+2,1),k=!P.times(P).eq(W));break}}return ae(P,P.e+de+1,me,k)},U.toExponential=function(k,j){return k!=null&&(y(k,0,f),k++),V(this,k,j,1)},U.toFixed=function(k,j){return k!=null&&(y(k,0,f),k=k+this.e+1),V(this,k,j)},U.toFormat=function(k,j,P){var $,R=this;if(P==null)k!=null&&j&&typeof j=="object"?(P=j,j=null):k&&typeof k=="object"?(P=k,k=j=null):P=K;else if(typeof P!="object")throw Error(o+"Argument not an object: "+P);if($=R.toFixed(k,j),R.c){var W,te=$.split("."),X=+P.groupSize,oe=+P.secondaryGroupSize,F=P.groupSeparator||"",J=te[0],xe=te[1],Ee=R.s<0,Te=Ee?J.slice(1):J,Be=Te.length;if(oe&&(W=X,X=oe,oe=W,Be-=W),X>0&&Be>0){for(W=Be%X||X,J=Te.substr(0,W);W<Be;W+=X)J+=F+Te.substr(W,X);oe>0&&(J+=F+Te.slice(W)),Ee&&(J="-"+J)}$=xe?J+(P.decimalSeparator||"")+((oe=+P.fractionGroupSize)?xe.replace(new RegExp("\\d{"+oe+"}\\B","g"),"$&"+(P.fractionGroupSeparator||"")):xe):J}return(P.prefix||"")+$+(P.suffix||"")},U.toFraction=function(k){var j,P,$,R,W,te,X,oe,F,J,xe,Ee,Te=this,Be=Te.c;if(k!=null&&(X=new O(k),!X.isInteger()&&(X.c||X.s!==1)||X.lt(q)))throw Error(o+"Argument "+(X.isInteger()?"out of range: ":"not an integer: ")+se(X));if(!Be)return new O(Te);for(j=new O(q),F=P=new O(q),$=oe=new O(q),Ee=x(Be),W=j.e=Ee.length-Te.e-1,j.c[0]=h[(te=W%d)<0?d+te:te],k=!k||X.comparedTo(j)>0?W>0?j:F:X,te=he,he=1/0,X=new O(Ee),oe.c[0]=0;J=A(X,j,0,1),R=P.plus(J.times($)),R.comparedTo(k)!=1;)P=$,$=R,F=oe.plus(J.times(R=F)),oe=R,j=X.minus(J.times(R=j)),X=R;return R=A(k.minus(P),$,0,1),oe=oe.plus(R.times(F)),P=P.plus(R.times($)),oe.s=F.s=Te.s,W=W*2,xe=A(F,$,W,me).minus(Te).abs().comparedTo(A(oe,P,W,me).minus(Te).abs())<1?[F,$]:[oe,P],he=te,xe},U.toNumber=function(){return+se(this)},U.toPrecision=function(k,j){return k!=null&&y(k,1,f),V(this,k,j,2)},U.toString=function(k){var j,P=this,$=P.s,R=P.e;return R===null?$?(j="Infinity",$<0&&(j="-"+j)):j="NaN":(k==null?j=R<=ye||R>=G?w(x(P.c),R):S(x(P.c),R,"0"):k===10&&z?(P=ae(new O(P),de+R+1,me),j=S(x(P.c),P.e,"0")):(y(k,2,re.length,"Base"),j=B(S(x(P.c),R,"0"),10,k,$,!0)),$<0&&P.c[0]&&(j="-"+j)),j},U.valueOf=U.toJSON=function(){return se(this)},U._isBigNumber=!0,_!=null&&O.set(_),O}function v(_){var A=_|0;return _>0||_===A?A:A-1}function x(_){for(var A,B,Q=1,U=_.length,q=_[0]+"";Q<U;){for(A=_[Q++]+"",B=d-A.length;B--;A="0"+A);q+=A}for(U=q.length;q.charCodeAt(--U)===48;);return q.slice(0,U+1||1)}function b(_,A){var B,Q,U=_.c,q=A.c,de=_.s,me=A.s,ye=_.e,G=A.e;if(!de||!me)return null;if(B=U&&!U[0],Q=q&&!q[0],B||Q)return B?Q?0:-me:de;if(de!=me)return de;if(B=de<0,Q=ye==G,!U||!q)return Q?0:!U^B?1:-1;if(!Q)return ye>G^B?1:-1;for(me=(ye=U.length)<(G=q.length)?ye:G,de=0;de<me;de++)if(U[de]!=q[de])return U[de]>q[de]^B?1:-1;return ye==G?0:ye>G^B?1:-1}function y(_,A,B,Q){if(_<A||_>B||_!==a(_))throw Error(o+(Q||"Argument")+(typeof _=="number"?_<A||_>B?" out of range: ":" not an integer: ":" not a primitive number: ")+String(_))}function g(_){var A=_.c.length-1;return v(_.e/d)==A&&_.c[A]%2!=0}function w(_,A){return(_.length>1?_.charAt(0)+"."+_.slice(1):_)+(A<0?"e":"e+")+A}function S(_,A,B){var Q,U;if(A<0){for(U=B+".";++A;U+=B);_=U+_}else if(Q=_.length,++A>Q){for(U=B,A-=Q;--A;U+=B);_+=U}else A<Q&&(_=_.slice(0,A)+"."+_.slice(A));return _}r=m(),r.default=r.BigNumber=r,t.exports?t.exports=r:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=r)})(Ce)})(DT);var ks=DT.exports,Qu={};Object.defineProperty(Qu,"__esModule",{value:!0});Qu.Hash192=void 0;const KL=fl;class Ea extends KL.Hash{constructor(e){e&&e.byteLength===0&&(e=Ea.ZERO_192.bytes),super(e??Ea.ZERO_192.bytes)}}Qu.Hash192=Ea;Ea.width=24;Ea.ZERO_192=new Ea(new Uint8Array(Ea.width));var GL=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(y0,"__esModule",{value:!0});y0.Amount=void 0;const O1=Fn,I1=Qa,L1=ml,YL=Qr,Si=GL(ks),Eo=At,Vn=hr,M1=Qu,BT=-96,$T=80,Zy=16,JL=new Si.default("1e17"),QL=new Si.default("1e-6"),Tg=BigInt(4294967295),ZL=BigInt(9223372036854776e3);Si.default.config({EXPONENTIAL_AT:[BT-Zy,$T+Zy]});function e5(t){const e=Object.keys(t).sort();return e.length===3&&e[0]==="currency"&&e[1]==="issuer"&&e[2]==="value"}function t5(t){const e=Object.keys(t).sort();return e.length===2&&e[0]==="mpt_issuance_id"&&e[1]==="value"}class es extends YL.SerializedType{constructor(e){super(e??es.defaultAmount.bytes)}static from(e){if(e instanceof es)return e;let r=new Uint8Array(8);if(typeof e=="string"){es.assertXrpIsValid(e);const s=BigInt(e),i=[new Uint8Array(4),new Uint8Array(4)];return(0,Vn.writeUInt32BE)(i[0],Number(s>>BigInt(32)),0),(0,Vn.writeUInt32BE)(i[1],Number(s&BigInt(Tg)),0),r=(0,Eo.concat)(i),r[0]|=64,new es(r)}if(e5(e)){const s=new Si.default(e.value);if(es.assertIouIsValid(s),s.isZero())r[0]|=128;else{const o=s.times(`1e${-((s.e||0)-15)}`).abs().toString(),l=BigInt(o),c=[new Uint8Array(4),new Uint8Array(4)];(0,Vn.writeUInt32BE)(c[0],Number(l>>BigInt(32)),0),(0,Vn.writeUInt32BE)(c[1],Number(l&BigInt(Tg)),0),r=(0,Eo.concat)(c),r[0]|=128,s.gt(new Si.default(0))&&(r[0]|=64);const u=97+((s.e||0)-15);r[0]|=u>>>2,r[1]|=(u&3)<<6}const i=L1.Currency.from(e.currency).toBytes(),a=I1.AccountID.from(e.issuer).toBytes();return new es((0,Eo.concat)([r,i,a]))}if(t5(e)){es.assertMptIsValid(e.value);let s=new Uint8Array(1);s[0]|=96;const i=BigInt(e.value),a=[new Uint8Array(4),new Uint8Array(4)];(0,Vn.writeUInt32BE)(a[0],Number(i>>BigInt(32)),0),(0,Vn.writeUInt32BE)(a[1],Number(i&BigInt(Tg)),0),r=(0,Eo.concat)(a);const o=M1.Hash192.from(e.mpt_issuance_id).toBytes();return new es((0,Eo.concat)([s,r,o]))}throw new Error("Invalid type to construct an Amount")}static fromParser(e){if(e.peek()&128)return new es(e.read(48));const i=e.peek()&32?33:8;return new es(e.read(i))}toJSON(){if(this.isNative()){const e=this.bytes,s=e[0]&64?"":"-";e[0]&=63;const i=BigInt((0,Vn.readUInt32BE)(e.slice(0,4),0)),a=BigInt((0,Vn.readUInt32BE)(e.slice(4),0)),o=i<<BigInt(32)|a;return`${s}${o.toString()}`}if(this.isIOU()){const e=new O1.BinaryParser(this.toString()),r=e.read(8),s=L1.Currency.fromParser(e),i=I1.AccountID.fromParser(e),a=r[0],o=r[1],c=a&64?"":"-",d=((a&63)<<2)+((o&255)>>6)-97;r[0]=0,r[1]&=63;const u=new Si.default(`${c}0x${(0,Eo.bytesToHex)(r)}`).times(`1e${d}`);return es.assertIouIsValid(u),{value:u.toString(),currency:s.toJSON(),issuer:i.toJSON()}}if(this.isMPT()){const e=new O1.BinaryParser(this.toString()),r=e.read(1),s=e.read(8),i=M1.Hash192.fromParser(e),o=r[0]&64?"":"-",l=BigInt((0,Vn.readUInt32BE)(s.slice(0,4),0)),c=BigInt((0,Vn.readUInt32BE)(s.slice(4),0)),d=l<<BigInt(32)|c;return{value:`${o}${d.toString()}`,mpt_issuance_id:i.toString()}}throw new Error("Invalid amount to construct JSON")}static assertXrpIsValid(e){if(e.indexOf(".")!==-1)throw new Error(`${e.toString()} is an illegal amount`);const r=new Si.default(e);if(!r.isZero()&&(r.lt(QL)||r.gt(JL)))throw new Error(`${e.toString()} is an illegal amount`)}static assertIouIsValid(e){if(!e.isZero()){const r=e.precision(),s=(e.e||0)-15;if(r>Zy||s>$T||s<BT)throw new Error("Decimal precision out of range");this.verifyNoDecimal(e)}}static assertMptIsValid(e){if(e.indexOf(".")!==-1)throw new Error(`${e.toString()} is an illegal amount`);const r=new Si.default(e);if(!r.isZero()){if(r<(0,Si.default)(0))throw new Error(`${e.toString()} is an illegal amount`);if(Number(BigInt(e)&BigInt(ZL))!=0)throw new Error(`${e.toString()} is an illegal amount`)}}static verifyNoDecimal(e){if(e.times(`1e${-((e.e||0)-15)}`).abs().toString().indexOf(".")!==-1)throw new Error("Decimal place found in integerNumberString")}isNative(){return(this.bytes[0]&128)===0&&(this.bytes[0]&32)===0}isMPT(){return(this.bytes[0]&128)===0&&(this.bytes[0]&32)!==0}isIOU(){return(this.bytes[0]&128)!==0}}y0.Amount=es;es.defaultAmount=new es((0,Eo.hexToBytes)("4000000000000000"));var v0={};Object.defineProperty(v0,"__esModule",{value:!0});v0.Blob=void 0;const r5=Qr,s5=At;let n5=class Hp extends r5.SerializedType{constructor(e){super(e)}static fromParser(e,r){return new Hp(e.read(r))}static from(e){if(e instanceof Hp)return e;if(typeof e=="string"){if(!/^[A-F0-9]*$/iu.test(e))throw new Error("Cannot construct Blob from a non-hex string");return new Hp((0,s5.hexToBytes)(e))}throw new Error("Cannot construct Blob from value given")}};v0.Blob=n5;var b0={};Object.defineProperty(b0,"__esModule",{value:!0});b0.Hash128=void 0;const i5=fl,a5=At;class Ta extends i5.Hash{constructor(e){e&&e.byteLength===0&&(e=Ta.ZERO_128.bytes),super(e??Ta.ZERO_128.bytes)}toHex(){const e=(0,a5.bytesToHex)(this.toBytes());return/^0+$/.exec(e)?"":e}}b0.Hash128=Ta;Ta.width=16;Ta.ZERO_128=new Ta(new Uint8Array(Ta.width));var Wc={};Object.defineProperty(Wc,"__esModule",{value:!0});Wc.Hash256=void 0;const o5=fl;class Uo extends o5.Hash{constructor(e){super(e??Uo.ZERO_256.bytes)}}Wc.Hash256=Uo;Uo.width=32;Uo.ZERO_256=new Uo(new Uint8Array(Uo.width));var Zu={};Object.defineProperty(Zu,"__esModule",{value:!0});Zu.Issue=void 0;const F1=At,l5=Fn,D1=Qa,Cg=ml,c5=Qr;function d5(t){const e=Object.keys(t).sort();return e.length===1?e[0]==="currency":e.length===2&&e[0]==="currency"&&e[1]==="issuer"}class Qn extends c5.SerializedType{constructor(e){super(e??Qn.ZERO_ISSUED_CURRENCY.bytes)}static from(e){if(e instanceof Qn)return e;if(d5(e)){const r=Cg.Currency.from(e.currency).toBytes();if(e.issuer==null)return new Qn(r);const s=D1.AccountID.from(e.issuer).toBytes();return new Qn((0,F1.concat)([r,s]))}throw new Error("Invalid type to construct an Amount")}static fromParser(e){const r=e.read(20);if(new Cg.Currency(r).toJSON()==="XRP")return new Qn(r);const s=[r,e.read(20)];return new Qn((0,F1.concat)(s))}toJSON(){const e=new l5.BinaryParser(this.toString()),r=Cg.Currency.fromParser(e);if(r.toJSON()==="XRP")return{currency:r.toJSON()};const s=D1.AccountID.fromParser(e);return{currency:r.toJSON(),issuer:s.toJSON()}}}Zu.Issue=Qn;Qn.ZERO_ISSUED_CURRENCY=new Qn(new Uint8Array(20));var w0={};Object.defineProperty(w0,"__esModule",{value:!0});w0.PathSet=void 0;const El=Qa,kg=ml,Yb=Fn,Jb=Qr,Vo=At,ev=0,UT=255,Ag=1,Pg=16,Rg=32;function u5(t){return t.issuer!==void 0||t.account!==void 0||t.currency!==void 0}function h5(t){return Array.isArray(t)&&t.length===0||Array.isArray(t)&&Array.isArray(t[0])&&t[0].length===0||Array.isArray(t)&&Array.isArray(t[0])&&u5(t[0][0])}class Ho extends Jb.SerializedType{static from(e){if(e instanceof Ho)return e;const r=[Uint8Array.from([0])];return e.account&&(r.push(El.AccountID.from(e.account).toBytes()),r[0][0]|=Ag),e.currency&&(r.push(kg.Currency.from(e.currency).toBytes()),r[0][0]|=Pg),e.issuer&&(r.push(El.AccountID.from(e.issuer).toBytes()),r[0][0]|=Rg),new Ho((0,Vo.concat)(r))}static fromParser(e){const r=e.readUInt8(),s=[Uint8Array.from([r])];return r&Ag&&s.push(e.read(El.AccountID.width)),r&Pg&&s.push(e.read(kg.Currency.width)),r&Rg&&s.push(e.read(El.AccountID.width)),new Ho((0,Vo.concat)(s))}toJSON(){const e=new Yb.BinaryParser((0,Vo.bytesToHex)(this.bytes)),r=e.readUInt8();let s,i,a;r&Ag&&(s=El.AccountID.fromParser(e).toJSON()),r&Pg&&(i=kg.Currency.fromParser(e).toJSON()),r&Rg&&(a=El.AccountID.fromParser(e).toJSON());const o={};return s&&(o.account=s),a&&(o.issuer=a),i&&(o.currency=i),o}type(){return this.bytes[0]}}class zo extends Jb.SerializedType{static from(e){if(e instanceof zo)return e;const r=[];return e.forEach(s=>{r.push(Ho.from(s).toBytes())}),new zo((0,Vo.concat)(r))}static fromParser(e){const r=[];for(;!e.end()&&(r.push(Ho.fromParser(e).toBytes()),!(e.peek()===ev||e.peek()===UT)););return new zo((0,Vo.concat)(r))}toJSON(){const e=[],r=new Yb.BinaryParser(this.toString());for(;!r.end();)e.push(Ho.fromParser(r).toJSON());return e}}class Kd extends Jb.SerializedType{static from(e){if(e instanceof Kd)return e;if(h5(e)){const r=[];return e.forEach(s=>{r.push(zo.from(s).toBytes()),r.push(Uint8Array.from([UT]))}),r[r.length-1]=Uint8Array.from([ev]),new Kd((0,Vo.concat)(r))}throw new Error("Cannot construct PathSet from given value")}static fromParser(e){const r=[];for(;!e.end()&&(r.push(zo.fromParser(e).toBytes()),r.push(e.read(1)),r[r.length-1][0]!=ev););return new Kd((0,Vo.concat)(r))}toJSON(){const e=[],r=new Yb.BinaryParser(this.toString());for(;!r.end();)e.push(zo.fromParser(r).toJSON()),r.skip(1);return e}}w0.PathSet=Kd;var ud={},hd={},qc={},gl={};Object.defineProperty(gl,"__esModule",{value:!0});gl.UInt=void 0;const p5=Qr;function f5(t,e){return t<e?-1:t==e?0:1}class m5 extends p5.Comparable{constructor(e){super(e)}compareTo(e){return f5(this.valueOf(),e.valueOf())}toJSON(){const e=this.valueOf();return typeof e=="number"?e:e.toString()}static checkUintRange(e,r,s){if(e<r||e>s)throw new Error(`Invalid ${this.constructor.name}: ${e} must be >= ${r} and <= ${s}`)}}gl.UInt=m5;Object.defineProperty(qc,"__esModule",{value:!0});qc.UInt64=void 0;const g5=gl,Uh=At,Tl=hr,x5=zi,y5=/^[a-fA-F0-9]{1,16}$/,v5=/^[0-9]{1,20}$/,B1=BigInt(4294967295);function $1(t){return t==="MaximumAmount"||t==="OutstandingAmount"||t==="MPTAmount"}class gs extends g5.UInt{constructor(e){super(e??gs.defaultUInt64.bytes)}static fromParser(e){return new gs(e.read(gs.width))}static from(e,r=""){if(e instanceof gs)return e;let s=new Uint8Array(gs.width);if(typeof e=="number"){if(e<0)throw new Error("value must be an unsigned integer");const i=BigInt(e),a=[new Uint8Array(4),new Uint8Array(4)];return(0,Tl.writeUInt32BE)(a[0],Number(i>>BigInt(32)),0),(0,Tl.writeUInt32BE)(a[1],Number(i&BigInt(B1)),0),new gs((0,Uh.concat)(a))}if(typeof e=="string"){if($1(r)){if(!v5.test(e))throw new Error(`${r} ${e} is not a valid base 10 string`);e=BigInt(e).toString(16)}if(typeof e=="string"&&!y5.test(e))throw new Error(`${e} is not a valid hex-string`);const i=e.padStart(16,"0");return s=(0,Uh.hexToBytes)(i),new gs(s)}if(typeof e=="bigint"){const i=[new Uint8Array(4),new Uint8Array(4)];return(0,Tl.writeUInt32BE)(i[0],Number(Number(e>>BigInt(32))),0),(0,Tl.writeUInt32BE)(i[1],Number(e&BigInt(B1)),0),new gs((0,Uh.concat)(i))}throw new Error("Cannot construct UInt64 from given value")}toJSON(e=x5.DEFAULT_DEFINITIONS,r=""){const s=(0,Uh.bytesToHex)(this.bytes);return $1(r)?BigInt("0x"+s).toString(10):s}valueOf(){const e=BigInt((0,Tl.readUInt32BE)(this.bytes.slice(0,4),0)),r=BigInt((0,Tl.readUInt32BE)(this.bytes.slice(4),0));return e<<BigInt(32)|r}toBytes(){return this.bytes}}qc.UInt64=gs;gs.width=64/8;gs.defaultUInt64=new gs(new Uint8Array(gs.width));var U1;function Qb(){if(U1)return hd;U1=1,Object.defineProperty(hd,"__esModule",{value:!0}),hd.STObject=void 0;const t=zi,e=Qr,r=Cs,s=Fn,i=ui,a=VT(),o=qc,l=Uint8Array.from([225]),c="ObjectEndMarker",d="STObject",u="Destination",h="Account",p="SourceTag",f="DestinationTag";function m(b,y){const g=(0,r.xAddressToClassicAddress)(y);let w;if(b===u)w=f;else if(b===h)w=p;else if(g.tag!==!1)throw new Error(`${b} cannot have an associated tag`);return g.tag!==!1?{[b]:g.classicAddress,[w]:g.tag}:{[b]:g.classicAddress}}function v(b,y){if(!(b[p]===void 0||y[p]===void 0))throw new Error("Cannot have Account X-Address and SourceTag");if(!(b[f]===void 0||y[f]===void 0))throw new Error("Cannot have Destination X-Address and DestinationTag")}class x extends e.SerializedType{static fromParser(y){const g=new i.BytesList,w=new i.BinarySerializer(g);for(;!y.end();){const S=y.readField();if(S.name===c)break;const _=y.readFieldValue(S);w.writeFieldAndValue(S,_),S.type.name===d&&w.put(l)}return new x(g.toBytes())}static from(y,g,w=t.DEFAULT_DEFINITIONS){if(y instanceof x)return y;const S=new i.BytesList,_=new i.BinarySerializer(S);let A=!1;const B=Object.entries(y).reduce((U,[q,de])=>{let me;return de&&(0,r.isValidXAddress)(de.toString())&&(me=m(q,de.toString()),v(me,y)),Object.assign(U,me??{[q]:de})},{});let Q=Object.keys(B).map(U=>w.field[U]).filter(U=>U!==void 0&&B[U.name]!==void 0&&U.isSerialized).sort((U,q)=>U.ordinal-q.ordinal);return g!==void 0&&(Q=Q.filter(g)),Q.forEach(U=>{const q=U.type.name===d?this.from(B[U.name],void 0,w):U.type.name==="STArray"?a.STArray.from(B[U.name],w):U.type.name==="UInt64"?o.UInt64.from(B[U.name],U.name):U.associatedType.from(B[U.name]);if(q==null)throw new TypeError(`Unable to interpret "${U.name}: ${B[U.name]}".`);q.name==="UNLModify"&&(A=!0);const de=U.name=="Account"&&A;_.writeFieldAndValue(U,q,de),U.type.name===d&&_.put(l)}),new x(S.toBytes())}toJSON(y){const g=new s.BinaryParser(this.toString(),y),w={};for(;!g.end();){const S=g.readField();if(S.name===c)break;w[S.name]=g.readFieldValue(S).toJSON(y,S.name)}return w}}return hd.STObject=x,hd}var V1;function VT(){if(V1)return ud;V1=1,Object.defineProperty(ud,"__esModule",{value:!0}),ud.STArray=void 0;const t=zi,e=Qr,r=Qb(),s=Fn,i=At,a=Uint8Array.from([241]),o="ArrayEndMarker",l=Uint8Array.from([225]);function c(u){return Array.isArray(u)&&u.every(h=>typeof h=="object"&&Object.keys(h).length===1&&typeof Object.values(h)[0]=="object")}class d extends e.SerializedType{static fromParser(h){const p=[];for(;!h.end();){const f=h.readField();if(f.name===o)break;p.push(f.header,h.readFieldValue(f).toBytes(),l)}return p.push(a),new d((0,i.concat)(p))}static from(h,p=t.DEFAULT_DEFINITIONS){if(h instanceof d)return h;if(c(h)){const f=[];return h.forEach(m=>{f.push(r.STObject.from(m,void 0,p).toBytes())}),f.push(a),new d((0,i.concat)(f))}throw new Error("Cannot construct STArray from value given")}toJSON(h=t.DEFAULT_DEFINITIONS){const p=[],f=new s.BinaryParser(this.toString(),h);for(;!f.end();){const m=f.readField();if(m.name===o)break;const v={};v[m.name]=r.STObject.fromParser(f).toJSON(h),p.push(v)}return p}}return ud.STArray=d,ud}var _0={};Object.defineProperty(_0,"__esModule",{value:!0});_0.UInt16=void 0;const b5=gl,H1=hr;class Fs extends b5.UInt{constructor(e){super(e??Fs.defaultUInt16.bytes)}static fromParser(e){return new Fs(e.read(Fs.width))}static from(e){if(e instanceof Fs)return e;if(typeof e=="number"){Fs.checkUintRange(e,0,65535);const r=new Uint8Array(Fs.width);return(0,H1.writeUInt16BE)(r,e,0),new Fs(r)}throw new Error("Can not construct UInt16 with given value")}valueOf(){return parseInt((0,H1.readUInt16BE)(this.bytes,0))}}_0.UInt16=Fs;Fs.width=16/8;Fs.defaultUInt16=new Fs(new Uint8Array(Fs.width));var eh={};Object.defineProperty(eh,"__esModule",{value:!0});eh.UInt32=void 0;const w5=gl,Og=hr;class xs extends w5.UInt{constructor(e){super(e??xs.defaultUInt32.bytes)}static fromParser(e){return new xs(e.read(xs.width))}static from(e){if(e instanceof xs)return e;const r=new Uint8Array(xs.width);if(typeof e=="string"){const s=Number.parseInt(e);return(0,Og.writeUInt32BE)(r,s,0),new xs(r)}if(typeof e=="number")return xs.checkUintRange(e,0,4294967295),(0,Og.writeUInt32BE)(r,e,0),new xs(r);throw new Error("Cannot construct UInt32 from given value")}valueOf(){return parseInt((0,Og.readUInt32BE)(this.bytes,0),10)}}eh.UInt32=xs;xs.width=32/8;xs.defaultUInt32=new xs(new Uint8Array(xs.width));var th={};Object.defineProperty(th,"__esModule",{value:!0});th.UInt8=void 0;const _5=gl,N5=At,S5=hr;class Ds extends _5.UInt{constructor(e){super(e??Ds.defaultUInt8.bytes)}static fromParser(e){return new Ds(e.read(Ds.width))}static from(e){if(e instanceof Ds)return e;if(typeof e=="number"){Ds.checkUintRange(e,0,255);const r=new Uint8Array(Ds.width);return(0,S5.writeUInt8)(r,e,0),new Ds(r)}throw new Error("Cannot construct UInt8 from given value")}valueOf(){return parseInt((0,N5.bytesToHex)(this.bytes),16)}}th.UInt8=Ds;Ds.width=8/8;Ds.defaultUInt8=new Ds(new Uint8Array(Ds.width));var N0={};Object.defineProperty(N0,"__esModule",{value:!0});N0.Vector256=void 0;const j5=Qr,z1=Wc,X1=ui,E5=At;function T5(t){return Array.isArray(t)&&(t.length===0||typeof t[0]=="string")}class Gd extends j5.SerializedType{constructor(e){super(e)}static fromParser(e,r){const s=new X1.BytesList,a=(r??e.size())/32;for(let o=0;o<a;o++)z1.Hash256.fromParser(e).toBytesSink(s);return new Gd(s.toBytes())}static from(e){if(e instanceof Gd)return e;if(T5(e)){const r=new X1.BytesList;return e.forEach(s=>{z1.Hash256.from(s).toBytesSink(r)}),new Gd(r.toBytes())}throw new Error("Cannot construct Vector256 from given value")}toJSON(){if(this.bytes.byteLength%32!==0)throw new Error("Invalid bytes for Vector256");const e=[];for(let r=0;r<this.bytes.byteLength;r+=32)e.push((0,E5.bytesToHex)(this.bytes.slice(r,r+32)));return e}}N0.Vector256=Gd;var S0={};Object.defineProperty(S0,"__esModule",{value:!0});S0.XChainBridge=void 0;const C5=Fn,Yd=Qa,k5=Qr,W1=Zu,tv=At;function A5(t){const e=Object.keys(t).sort();return e.length===4&&e[0]==="IssuingChainDoor"&&e[1]==="IssuingChainIssue"&&e[2]==="LockingChainDoor"&&e[3]==="LockingChainIssue"}class ei extends k5.SerializedType{constructor(e){super(e??ei.ZERO_XCHAIN_BRIDGE.bytes)}static from(e){if(e instanceof ei)return e;if(!A5(e))throw new Error("Invalid type to construct an XChainBridge");const r=[];return this.TYPE_ORDER.forEach(s=>{const{name:i,type:a}=s;a===Yd.AccountID&&r.push(Uint8Array.from([20]));const o=a.from(e[i]);r.push(o.toBytes())}),new ei((0,tv.concat)(r))}static fromParser(e){const r=[];return this.TYPE_ORDER.forEach(s=>{const{type:i}=s;i===Yd.AccountID&&(e.skip(1),r.push(Uint8Array.from([20])));const a=i.fromParser(e);r.push(a.toBytes())}),new ei((0,tv.concat)(r))}toJSON(){const e=new C5.BinaryParser(this.toString()),r={};return ei.TYPE_ORDER.forEach(s=>{const{name:i,type:a}=s;a===Yd.AccountID&&e.skip(1);const o=a.fromParser(e).toJSON();r[i]=o}),r}}S0.XChainBridge=ei;ei.ZERO_XCHAIN_BRIDGE=new ei((0,tv.concat)([Uint8Array.from([20]),new Uint8Array(40),Uint8Array.from([20]),new Uint8Array(40)]));ei.TYPE_ORDER=[{name:"LockingChainDoor",type:Yd.AccountID},{name:"LockingChainIssue",type:W1.Issue},{name:"IssuingChainDoor",type:Yd.AccountID},{name:"IssuingChainIssue",type:W1.Issue}];(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Vector256=t.UInt64=t.UInt32=t.UInt16=t.UInt8=t.STObject=t.STArray=t.PathSet=t.Hash256=t.Hash192=t.Hash160=t.Hash128=t.Currency=t.Blob=t.Amount=t.AccountID=t.coreTypes=void 0;const e=Qa;Object.defineProperty(t,"AccountID",{enumerable:!0,get:function(){return e.AccountID}});const r=y0;Object.defineProperty(t,"Amount",{enumerable:!0,get:function(){return r.Amount}});const s=v0;Object.defineProperty(t,"Blob",{enumerable:!0,get:function(){return s.Blob}});const i=ml;Object.defineProperty(t,"Currency",{enumerable:!0,get:function(){return i.Currency}});const a=b0;Object.defineProperty(t,"Hash128",{enumerable:!0,get:function(){return a.Hash128}});const o=Xc;Object.defineProperty(t,"Hash160",{enumerable:!0,get:function(){return o.Hash160}});const l=Qu;Object.defineProperty(t,"Hash192",{enumerable:!0,get:function(){return l.Hash192}});const c=Wc;Object.defineProperty(t,"Hash256",{enumerable:!0,get:function(){return c.Hash256}});const d=Zu,u=w0;Object.defineProperty(t,"PathSet",{enumerable:!0,get:function(){return u.PathSet}});const h=VT();Object.defineProperty(t,"STArray",{enumerable:!0,get:function(){return h.STArray}});const p=Qb();Object.defineProperty(t,"STObject",{enumerable:!0,get:function(){return p.STObject}});const f=_0;Object.defineProperty(t,"UInt16",{enumerable:!0,get:function(){return f.UInt16}});const m=eh;Object.defineProperty(t,"UInt32",{enumerable:!0,get:function(){return m.UInt32}});const v=qc;Object.defineProperty(t,"UInt64",{enumerable:!0,get:function(){return v.UInt64}});const x=th;Object.defineProperty(t,"UInt8",{enumerable:!0,get:function(){return x.UInt8}});const b=N0;Object.defineProperty(t,"Vector256",{enumerable:!0,get:function(){return b.Vector256}});const y=S0,g=zi,w={AccountID:e.AccountID,Amount:r.Amount,Blob:s.Blob,Currency:i.Currency,Hash128:a.Hash128,Hash160:o.Hash160,Hash192:l.Hash192,Hash256:c.Hash256,Issue:d.Issue,PathSet:u.PathSet,STArray:h.STArray,STObject:p.STObject,UInt8:x.UInt8,UInt16:f.UInt16,UInt32:m.UInt32,UInt64:v.UInt64,Vector256:b.Vector256,XChainBridge:y.XChainBridge};t.coreTypes=w,g.DEFAULT_DEFINITIONS.associateTypes(w)})(Ja);var Zb={},Za={};Object.defineProperty(Za,"__esModule",{value:!0});Za.HashPrefix=void 0;const P5=hr;function Hn(t){const e=new Uint8Array(4);return(0,P5.writeUInt32BE)(e,t,0),e}const R5={transactionID:Hn(1415073280),transaction:Hn(1397638144),accountStateEntry:Hn(1296846336),innerNode:Hn(1296649728),ledgerHeader:Hn(1280791040),transactionSig:Hn(1398036480),transactionMultiSig:Hn(1397576704),validation:Hn(1447119872),proposal:Hn(1347571712),paymentChannelClaim:Hn(1129073920)};Za.HashPrefix=R5;var On={},Kc={},xr={},vt={};Object.defineProperty(vt,"__esModule",{value:!0});vt.add5L=vt.add5H=vt.add4H=vt.add4L=vt.add3H=vt.add3L=vt.rotlBL=vt.rotlBH=vt.rotlSL=vt.rotlSH=vt.rotr32L=vt.rotr32H=vt.rotrBL=vt.rotrBH=vt.rotrSL=vt.rotrSH=vt.shrSL=vt.shrSH=vt.toBig=void 0;vt.fromBig=ew;vt.split=HT;vt.add=sC;const Vh=BigInt(2**32-1),rv=BigInt(32);function ew(t,e=!1){return e?{h:Number(t&Vh),l:Number(t>>rv&Vh)}:{h:Number(t>>rv&Vh)|0,l:Number(t&Vh)|0}}function HT(t,e=!1){let r=new Uint32Array(t.length),s=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:a,l:o}=ew(t[i],e);[r[i],s[i]]=[a,o]}return[r,s]}const zT=(t,e)=>BigInt(t>>>0)<<rv|BigInt(e>>>0);vt.toBig=zT;const XT=(t,e,r)=>t>>>r;vt.shrSH=XT;const WT=(t,e,r)=>t<<32-r|e>>>r;vt.shrSL=WT;const qT=(t,e,r)=>t>>>r|e<<32-r;vt.rotrSH=qT;const KT=(t,e,r)=>t<<32-r|e>>>r;vt.rotrSL=KT;const GT=(t,e,r)=>t<<64-r|e>>>r-32;vt.rotrBH=GT;const YT=(t,e,r)=>t>>>r-32|e<<64-r;vt.rotrBL=YT;const JT=(t,e)=>e;vt.rotr32H=JT;const QT=(t,e)=>t;vt.rotr32L=QT;const ZT=(t,e,r)=>t<<r|e>>>32-r;vt.rotlSH=ZT;const eC=(t,e,r)=>e<<r|t>>>32-r;vt.rotlSL=eC;const tC=(t,e,r)=>e<<r-32|t>>>64-r;vt.rotlBH=tC;const rC=(t,e,r)=>t<<r-32|e>>>64-r;vt.rotlBL=rC;function sC(t,e,r,s){const i=(e>>>0)+(s>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const nC=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0);vt.add3L=nC;const iC=(t,e,r,s)=>e+r+s+(t/2**32|0)|0;vt.add3H=iC;const aC=(t,e,r,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(s>>>0);vt.add4L=aC;const oC=(t,e,r,s,i)=>e+r+s+i+(t/2**32|0)|0;vt.add4H=oC;const lC=(t,e,r,s,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(s>>>0)+(i>>>0);vt.add5L=lC;const cC=(t,e,r,s,i,a)=>e+r+s+i+a+(t/2**32|0)|0;vt.add5H=cC;const O5={fromBig:ew,split:HT,toBig:zT,shrSH:XT,shrSL:WT,rotrSH:qT,rotrSL:KT,rotrBH:GT,rotrBL:YT,rotr32H:JT,rotr32L:QT,rotlSH:ZT,rotlSL:eC,rotlBH:tC,rotlBL:rC,add:sC,add3L:nC,add3H:iC,add4L:aC,add4H:oC,add5H:cC,add5L:lC};vt.default=O5;Object.defineProperty(xr,"__esModule",{value:!0});xr.sha384=xr.sha512_256=xr.sha512_224=xr.sha512=xr.SHA384=xr.SHA512_256=xr.SHA512_224=xr.SHA512=void 0;const I5=Vi,jt=vt,j0=Ts,[L5,M5]=(()=>jt.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),Gi=new Uint32Array(80),Yi=new Uint32Array(80);class rh extends I5.HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:s,Bl:i,Ch:a,Cl:o,Dh:l,Dl:c,Eh:d,El:u,Fh:h,Fl:p,Gh:f,Gl:m,Hh:v,Hl:x}=this;return[e,r,s,i,a,o,l,c,d,u,h,p,f,m,v,x]}set(e,r,s,i,a,o,l,c,d,u,h,p,f,m,v,x){this.Ah=e|0,this.Al=r|0,this.Bh=s|0,this.Bl=i|0,this.Ch=a|0,this.Cl=o|0,this.Dh=l|0,this.Dl=c|0,this.Eh=d|0,this.El=u|0,this.Fh=h|0,this.Fl=p|0,this.Gh=f|0,this.Gl=m|0,this.Hh=v|0,this.Hl=x|0}process(e,r){for(let g=0;g<16;g++,r+=4)Gi[g]=e.getUint32(r),Yi[g]=e.getUint32(r+=4);for(let g=16;g<80;g++){const w=Gi[g-15]|0,S=Yi[g-15]|0,_=jt.default.rotrSH(w,S,1)^jt.default.rotrSH(w,S,8)^jt.default.shrSH(w,S,7),A=jt.default.rotrSL(w,S,1)^jt.default.rotrSL(w,S,8)^jt.default.shrSL(w,S,7),B=Gi[g-2]|0,Q=Yi[g-2]|0,U=jt.default.rotrSH(B,Q,19)^jt.default.rotrBH(B,Q,61)^jt.default.shrSH(B,Q,6),q=jt.default.rotrSL(B,Q,19)^jt.default.rotrBL(B,Q,61)^jt.default.shrSL(B,Q,6),de=jt.default.add4L(A,q,Yi[g-7],Yi[g-16]),me=jt.default.add4H(de,_,U,Gi[g-7],Gi[g-16]);Gi[g]=me|0,Yi[g]=de|0}let{Ah:s,Al:i,Bh:a,Bl:o,Ch:l,Cl:c,Dh:d,Dl:u,Eh:h,El:p,Fh:f,Fl:m,Gh:v,Gl:x,Hh:b,Hl:y}=this;for(let g=0;g<80;g++){const w=jt.default.rotrSH(h,p,14)^jt.default.rotrSH(h,p,18)^jt.default.rotrBH(h,p,41),S=jt.default.rotrSL(h,p,14)^jt.default.rotrSL(h,p,18)^jt.default.rotrBL(h,p,41),_=h&f^~h&v,A=p&m^~p&x,B=jt.default.add5L(y,S,A,M5[g],Yi[g]),Q=jt.default.add5H(B,b,w,_,L5[g],Gi[g]),U=B|0,q=jt.default.rotrSH(s,i,28)^jt.default.rotrBH(s,i,34)^jt.default.rotrBH(s,i,39),de=jt.default.rotrSL(s,i,28)^jt.default.rotrBL(s,i,34)^jt.default.rotrBL(s,i,39),me=s&a^s&l^a&l,ye=i&o^i&c^o&c;b=v|0,y=x|0,v=f|0,x=m|0,f=h|0,m=p|0,{h,l:p}=jt.default.add(d|0,u|0,Q|0,U|0),d=l|0,u=c|0,l=a|0,c=o|0,a=s|0,o=i|0;const G=jt.default.add3L(U,de,ye);s=jt.default.add3H(G,Q,q,me),i=G|0}({h:s,l:i}=jt.default.add(this.Ah|0,this.Al|0,s|0,i|0)),{h:a,l:o}=jt.default.add(this.Bh|0,this.Bl|0,a|0,o|0),{h:l,l:c}=jt.default.add(this.Ch|0,this.Cl|0,l|0,c|0),{h:d,l:u}=jt.default.add(this.Dh|0,this.Dl|0,d|0,u|0),{h,l:p}=jt.default.add(this.Eh|0,this.El|0,h|0,p|0),{h:f,l:m}=jt.default.add(this.Fh|0,this.Fl|0,f|0,m|0),{h:v,l:x}=jt.default.add(this.Gh|0,this.Gl|0,v|0,x|0),{h:b,l:y}=jt.default.add(this.Hh|0,this.Hl|0,b|0,y|0),this.set(s,i,a,o,l,c,d,u,h,p,f,m,v,x,b,y)}roundClean(){Gi.fill(0),Yi.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}xr.SHA512=rh;class dC extends rh{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}xr.SHA512_224=dC;class uC extends rh{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}xr.SHA512_256=uC;class hC extends rh{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}xr.SHA384=hC;xr.sha512=(0,j0.wrapConstructor)(()=>new rh);xr.sha512_224=(0,j0.wrapConstructor)(()=>new dC);xr.sha512_256=(0,j0.wrapConstructor)(()=>new uC);xr.sha384=(0,j0.wrapConstructor)(()=>new hC);var F5=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Kc,"__esModule",{value:!0});Kc.sha512=void 0;const D5=xr,B5=F5(Ju);Kc.sha512=(0,B5.default)(D5.sha512);Object.defineProperty(On,"__esModule",{value:!0});On.transactionID=On.sha512Half=On.Sha512Half=void 0;const $5=Za,pC=Ja,U5=ui,V5=Kc;class E0 extends U5.BytesList{constructor(){super(...arguments),this.hash=V5.sha512.create()}static put(e){return new E0().put(e)}put(e){return this.hash.update(e),this}finish256(){return Uint8Array.from(this.hash.digest().slice(0,32))}finish(){return new pC.Hash256(this.finish256())}}On.Sha512Half=E0;function fC(...t){const e=new E0;return t.forEach(r=>e.put(r)),e.finish256()}On.sha512Half=fC;function H5(t){return new pC.Hash256(fC($5.HashPrefix.transactionID,t))}On.transactionID=H5;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.transactionID=t.sha512Half=t.binaryToJSON=t.signingClaimData=t.signingData=t.multiSigningData=t.readJSON=t.serializeObject=t.makeParser=t.BytesList=t.BinarySerializer=t.BinaryParser=void 0;const e=At,r=Ja,s=Fn;Object.defineProperty(t,"BinaryParser",{enumerable:!0,get:function(){return s.BinaryParser}});const i=Za,a=ui;Object.defineProperty(t,"BinarySerializer",{enumerable:!0,get:function(){return a.BinarySerializer}}),Object.defineProperty(t,"BytesList",{enumerable:!0,get:function(){return a.BytesList}});const o=On;Object.defineProperty(t,"sha512Half",{enumerable:!0,get:function(){return o.sha512Half}}),Object.defineProperty(t,"transactionID",{enumerable:!0,get:function(){return o.transactionID}});const l=zi,c=(v,x)=>new s.BinaryParser(v instanceof Uint8Array?(0,e.bytesToHex)(v):v,x);t.makeParser=c;const d=(v,x=l.DEFAULT_DEFINITIONS)=>v.readType(r.coreTypes.STObject).toJSON(x);t.readJSON=d;const u=(v,x)=>d(c(v,x),x);t.binaryToJSON=u;function h(v,x={}){const{prefix:b,suffix:y,signingFieldsOnly:g=!1,definitions:w}=x,S=new a.BytesList;b&&S.put(b);const _=g?A=>A.isSigningField:void 0;return r.coreTypes.STObject.from(v,_,w).toBytesSink(S),y&&S.put(y),S.toBytes()}t.serializeObject=h;function p(v,x=i.HashPrefix.transactionSig,b={}){return h(v,{prefix:x,signingFieldsOnly:!0,definitions:b.definitions})}t.signingData=p;function f(v){const x=BigInt(String(v.amount)),b=i.HashPrefix.paymentChannelClaim,y=r.coreTypes.Hash256.from(v.channel).toBytes(),g=r.coreTypes.UInt64.from(x).toBytes(),w=new a.BytesList;return w.put(b),w.put(y),w.put(g),w.toBytes()}t.signingClaimData=f;function m(v,x,b={definitions:l.DEFAULT_DEFINITIONS}){const y=i.HashPrefix.transactionMultiSig,g=r.coreTypes.AccountID.from(x).toBytes();return h(v,{prefix:y,suffix:g,signingFieldsOnly:!0,definitions:b.definitions})}t.multiSigningData=m})(Zb);var Ii={};Object.defineProperty(Ii,"__esModule",{value:!0});Ii.ShaMapLeaf=Ii.ShaMapNode=Ii.ShaMap=void 0;const q1=Ja,z5=Za,mC=On;class tw{}Ii.ShaMapNode=tw;class sv extends tw{constructor(e,r){super(),this.index=e,this.item=r}isLeaf(){return!0}isInner(){return!1}hashPrefix(){return this.item===void 0?new Uint8Array(0):this.item.hashPrefix()}hash(){const e=mC.Sha512Half.put(this.hashPrefix());return this.toBytesSink(e),e.finish()}toBytesSink(e){this.item!==void 0&&this.item.toBytesSink(e),this.index.toBytesSink(e)}}Ii.ShaMapLeaf=sv;class Sf extends tw{constructor(e=0){super(),this.depth=e,this.slotBits=0,this.branches=Array(16)}isInner(){return!0}isLeaf(){return!1}hashPrefix(){return z5.HashPrefix.innerNode}setBranch(e,r){this.slotBits=this.slotBits|1<<e,this.branches[e]=r}empty(){return this.slotBits===0}hash(){if(this.empty())return q1.coreTypes.Hash256.ZERO_256;const e=mC.Sha512Half.put(this.hashPrefix());return this.toBytesSink(e),e.finish()}toBytesSink(e){for(let r=0;r<this.branches.length;r++){const s=this.branches[r];(s?s.hash():q1.coreTypes.Hash256.ZERO_256).toBytesSink(e)}}addItem(e,r,s){if(e===void 0)throw new Error;if(e!==void 0){const i=e.nibblet(this.depth),a=this.branches[i];if(a===void 0)this.setBranch(i,s||new sv(e,r));else if(a instanceof sv){const o=new Sf(this.depth+1);o.addItem(a.index,void 0,a),o.addItem(e,r,s),this.setBranch(i,o)}else if(a instanceof Sf)a.addItem(e,r,s);else throw new Error("invalid ShaMap.addItem call")}}}class X5 extends Sf{}Ii.ShaMap=X5;var Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});Tn.decodeLedgerData=Tn.ledgerHash=Tn.transactionTreeHash=Tn.accountStateHash=void 0;const W5=Ii,rw=Za,q5=On,gC=Zb,Ca=Wc,K1=Qb(),xC=qc,Ig=eh,G1=th,K5=Fn;function yC(t,e){const r=new W5.ShaMap;return e.forEach(s=>r.addItem(...t(s))),r.hash()}function G5(t){if(!t.hash)throw new Error;return[Ca.Hash256.from(t.hash),{hashPrefix(){return rw.HashPrefix.transaction},toBytesSink(s){const i=new gC.BinarySerializer(s);i.writeLengthEncoded(K1.STObject.from(t)),i.writeLengthEncoded(K1.STObject.from(t.metaData))}},void 0]}function Y5(t){const e=Ca.Hash256.from(t.index),r=(0,gC.serializeObject)(t);return[e,{hashPrefix(){return rw.HashPrefix.accountStateEntry},toBytesSink(i){i.put(r)}},void 0]}function J5(t){return yC(G5,t)}Tn.transactionTreeHash=J5;function Q5(t){return yC(Y5,t)}Tn.accountStateHash=Q5;function Z5(t){const e=new q5.Sha512Half;if(e.put(rw.HashPrefix.ledgerHeader),t.parent_close_time===void 0||t.close_flags===void 0)throw new Error;return Ig.UInt32.from(t.ledger_index).toBytesSink(e),xC.UInt64.from(BigInt(String(t.total_coins))).toBytesSink(e),Ca.Hash256.from(t.parent_hash).toBytesSink(e),Ca.Hash256.from(t.transaction_hash).toBytesSink(e),Ca.Hash256.from(t.account_hash).toBytesSink(e),Ig.UInt32.from(t.parent_close_time).toBytesSink(e),Ig.UInt32.from(t.close_time).toBytesSink(e),G1.UInt8.from(t.close_time_resolution).toBytesSink(e),G1.UInt8.from(t.close_flags).toBytesSink(e),e.finish()}Tn.ledgerHash=Z5;function eM(t,e){if(typeof t!="string")throw new Error("binary must be a hex string");const r=new K5.BinaryParser(t,e);return{ledger_index:r.readUInt32(),total_coins:r.readType(xC.UInt64).valueOf().toString(),parent_hash:r.readType(Ca.Hash256).toHex(),transaction_hash:r.readType(Ca.Hash256).toHex(),account_hash:r.readType(Ca.Hash256).toHex(),parent_close_time:r.readUInt32(),close_time:r.readUInt32(),close_time_resolution:r.readUInt8(),close_flags:r.readUInt8()}}Tn.decodeLedgerData=eM;var T0={},tM=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(T0,"__esModule",{value:!0});T0.quality=void 0;const rM=Ja,Y1=tM(ks),J1=At;let sM=class{static encode(e){const r=(0,Y1.default)(e),s=((r==null?void 0:r.e)||0)-15,i=r.times(`1e${-s}`).abs().toString(),a=rM.coreTypes.UInt64.from(BigInt(i)).toBytes();return a[0]=s+100,a}static decode(e){const r=(0,J1.hexToBytes)(e).slice(-8),s=r[0]-100;return new Y1.default(`0x${(0,J1.bytesToHex)(r.slice(1))}`).times(`1e${s}`)}};T0.quality=sM;(function(t){var e=Ce&&Ce.__createBinding||(Object.create?function(p,f,m,v){v===void 0&&(v=m);var x=Object.getOwnPropertyDescriptor(f,m);(!x||("get"in x?!f.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return f[m]}}),Object.defineProperty(p,v,x)}:function(p,f,m,v){v===void 0&&(v=m),p[v]=f[m]}),r=Ce&&Ce.__setModuleDefault||(Object.create?function(p,f){Object.defineProperty(p,"default",{enumerable:!0,value:f})}:function(p,f){p.default=f}),s=Ce&&Ce.__importStar||function(p){if(p&&p.__esModule)return p;var f={};if(p!=null)for(var m in p)m!=="default"&&Object.prototype.hasOwnProperty.call(p,m)&&e(f,p,m);return r(f,p),f};Object.defineProperty(t,"__esModule",{value:!0}),t.types=t.ShaMap=t.HashPrefix=t.quality=t.TransactionResult=t.Type=t.LedgerEntryType=t.TransactionType=t.Field=t.DEFAULT_DEFINITIONS=t.ledgerHashes=t.binary=t.hashes=void 0;const i=zi;Object.defineProperty(t,"DEFAULT_DEFINITIONS",{enumerable:!0,get:function(){return i.DEFAULT_DEFINITIONS}}),Object.defineProperty(t,"Field",{enumerable:!0,get:function(){return i.Field}}),Object.defineProperty(t,"TransactionType",{enumerable:!0,get:function(){return i.TransactionType}}),Object.defineProperty(t,"LedgerEntryType",{enumerable:!0,get:function(){return i.LedgerEntryType}}),Object.defineProperty(t,"Type",{enumerable:!0,get:function(){return i.Type}}),Object.defineProperty(t,"TransactionResult",{enumerable:!0,get:function(){return i.TransactionResult}});const a=s(Ja);t.types=a;const o=s(Zb);t.binary=o;const l=Ii;Object.defineProperty(t,"ShaMap",{enumerable:!0,get:function(){return l.ShaMap}});const c=s(Tn);t.ledgerHashes=c;const d=s(On);t.hashes=d;const u=T0;Object.defineProperty(t,"quality",{enumerable:!0,get:function(){return u.quality}});const h=Za;Object.defineProperty(t,"HashPrefix",{enumerable:!0,get:function(){return h.HashPrefix}})})(MT);var C0={};Object.defineProperty(C0,"__esModule",{value:!0});C0.XrplDefinitions=void 0;const nM=Gb,iM=Ja;class aM extends nM.XrplDefinitionsBase{constructor(e,r){const s=Object.assign({},iM.coreTypes,r);super(e,s)}}C0.XrplDefinitions=aM;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.coreTypes=t.DEFAULT_DEFINITIONS=t.XrplDefinitionsBase=t.XrplDefinitions=t.TRANSACTION_TYPES=t.decodeLedgerData=t.decodeQuality=t.encodeQuality=t.encodeForMultisigning=t.encodeForSigningClaim=t.encodeForSigning=t.encode=t.decode=void 0;const e=MT,r=Tn;Object.defineProperty(t,"decodeLedgerData",{enumerable:!0,get:function(){return r.decodeLedgerData}});const s=zi;Object.defineProperty(t,"XrplDefinitionsBase",{enumerable:!0,get:function(){return s.XrplDefinitionsBase}}),Object.defineProperty(t,"TRANSACTION_TYPES",{enumerable:!0,get:function(){return s.TRANSACTION_TYPES}}),Object.defineProperty(t,"DEFAULT_DEFINITIONS",{enumerable:!0,get:function(){return s.DEFAULT_DEFINITIONS}});const i=C0;Object.defineProperty(t,"XrplDefinitions",{enumerable:!0,get:function(){return i.XrplDefinitions}});const a=Ja;Object.defineProperty(t,"coreTypes",{enumerable:!0,get:function(){return a.coreTypes}});const o=At,{signingData:l,signingClaimData:c,multiSigningData:d,binaryToJSON:u,serializeObject:h}=e.binary;function p(g,w){if(typeof g!="string")throw new Error("binary must be a hex string");return u(g,w)}t.decode=p;function f(g,w){if(typeof g!="object")throw new Error;return(0,o.bytesToHex)(h(g,{definitions:w}))}t.encode=f;function m(g,w){if(typeof g!="object")throw new Error;return(0,o.bytesToHex)(l(g,e.HashPrefix.transactionSig,{definitions:w}))}t.encodeForSigning=m;function v(g){if(typeof g!="object")throw new Error;return(0,o.bytesToHex)(c(g))}t.encodeForSigningClaim=v;function x(g,w,S){if(typeof g!="object")throw new Error;if(g.SigningPubKey!=="")throw new Error;const _=S?{definitions:S}:void 0;return(0,o.bytesToHex)(d(g,w,_))}t.encodeForMultisigning=x;function b(g){if(typeof g!="string")throw new Error;return(0,o.bytesToHex)(e.quality.encode(g))}t.encodeQuality=b;function y(g){if(typeof g!="string")throw new Error;return e.quality.decode(g).toString()}t.decodeQuality=y})(hn);var Rr={};Object.defineProperty(Rr,"__esModule",{value:!0});Rr.isHex=Rr.isFlagEnabled=Rr.onlyHasFields=Rr.INTEGER_SANITY_CHECK=void 0;const oM=/^[0-9A-Fa-f]+$/u;Rr.INTEGER_SANITY_CHECK=/^[0-9]+$/u;function lM(t,e){return Object.keys(t).every(r=>e.includes(r))}Rr.onlyHasFields=lM;function cM(t,e){return(BigInt(e)&BigInt(t))===BigInt(e)}Rr.isFlagEnabled=cM;function dM(t){return oM.test(t)}Rr.isHex=dM;Object.defineProperty(Ze,"__esModule",{value:!0});Ze.validateCredentialsList=Ze.validateCredentialType=Ze.parseAmountValue=Ze.validateBaseTransaction=Ze.validateOptionalField=Ze.validateRequiredField=Ze.isXChainBridge=Ze.isAmount=Ze.isAccount=Ze.isMPTAmount=Ze.isIssuedCurrency=Ze.isCurrency=Ze.isNumber=Ze.isString=void 0;const uM=At,Q1=Cs,hM=hn,_r=et,pM=Rr,fM=3,Z1=8,mM=64,eN=mM*2;function gM(t){if(t.Memo==null)return!1;const e=t.Memo,r=Object.keys(e).length,s=e.MemoData==null||typeof e.MemoData=="string",i=e.MemoFormat==null||typeof e.MemoFormat=="string",a=e.MemoType==null||typeof e.MemoType=="string";return r>=1&&r<=fM&&s&&i&&a&&(0,pM.onlyHasFields)(e,["MemoFormat","MemoData","MemoType"])}const xM=3;function yM(t){const e=t;if(e.Signer==null)return!1;const r=e.Signer;return Object.keys(r).length===xM&&typeof r.Account=="string"&&typeof r.TxnSignature=="string"&&typeof r.SigningPubKey=="string"}const vM=1,bM=2,wM=3,_M=4,NM=2,SM=1;function Ac(t){return t!==null&&typeof t=="object"}function ua(t){return typeof t=="string"}Ze.isString=ua;function ql(t){return typeof t=="number"}Ze.isNumber=ql;function nv(t){return Ac(t)&&(Object.keys(t).length===bM&&typeof t.issuer=="string"&&typeof t.currency=="string"||Object.keys(t).length===vM&&t.currency==="XRP")}Ze.isCurrency=nv;function vC(t){return Ac(t)&&Object.keys(t).length===wM&&typeof t.value=="string"&&typeof t.issuer=="string"&&typeof t.currency=="string"}Ze.isIssuedCurrency=vC;function jM(t){return Ac(t)&&Ac(t.Credential)&&Object.keys(t).length===SM&&typeof t.Credential.CredentialType=="string"&&typeof t.Credential.Issuer=="string"}function bC(t){return Ac(t)&&Object.keys(t).length===NM&&typeof t.value=="string"&&typeof t.mpt_issuance_id=="string"}Ze.isMPTAmount=bC;function EM(t){return typeof t=="string"&&((0,Q1.isValidClassicAddress)(t)||(0,Q1.isValidXAddress)(t))}Ze.isAccount=EM;function wC(t){return typeof t=="string"||vC(t)||bC(t)}Ze.isAmount=wC;function TM(t){return Ac(t)&&Object.keys(t).length===_M&&typeof t.LockingChainDoor=="string"&&nv(t.LockingChainIssue)&&typeof t.IssuingChainDoor=="string"&&nv(t.IssuingChainIssue)}Ze.isXChainBridge=TM;function _C(t,e,r){if(t[e]==null)throw new _r.ValidationError(`${t.TransactionType}: missing field ${e}`);if(!r(t[e]))throw new _r.ValidationError(`${t.TransactionType}: invalid field ${e}`)}Ze.validateRequiredField=_C;function Gn(t,e,r){if(t[e]!==void 0&&!r(t[e]))throw new _r.ValidationError(`${t.TransactionType}: invalid field ${e}`)}Ze.validateOptionalField=Gn;function CM(t){if(t.TransactionType===void 0)throw new _r.ValidationError("BaseTransaction: missing field TransactionType");if(typeof t.TransactionType!="string")throw new _r.ValidationError("BaseTransaction: TransactionType not string");if(!hM.TRANSACTION_TYPES.includes(t.TransactionType))throw new _r.ValidationError("BaseTransaction: Unknown TransactionType");_C(t,"Account",ua),Gn(t,"Fee",ua),Gn(t,"Sequence",ql),Gn(t,"AccountTxnID",ua),Gn(t,"LastLedgerSequence",ql);const e=t.Memos;if(e!==void 0&&!e.every(gM))throw new _r.ValidationError("BaseTransaction: invalid Memos");const r=t.Signers;if(r!==void 0&&(r.length===0||!r.every(yM)))throw new _r.ValidationError("BaseTransaction: invalid Signers");Gn(t,"SourceTag",ql),Gn(t,"SigningPubKey",ua),Gn(t,"TicketSequence",ql),Gn(t,"TxnSignature",ua),Gn(t,"NetworkID",ql)}Ze.validateBaseTransaction=CM;function kM(t){return wC(t)?parseFloat(typeof t=="string"?t:t.value):NaN}Ze.parseAmountValue=kM;function AM(t){if(typeof t.TransactionType!="string")throw new _r.ValidationError("Invalid TransactionType");if(t.CredentialType===void 0)throw new _r.ValidationError(`${t.TransactionType}: missing field CredentialType`);if(!ua(t.CredentialType))throw new _r.ValidationError(`${t.TransactionType}: CredentialType must be a string`);if(t.CredentialType.length===0)throw new _r.ValidationError(`${t.TransactionType}: CredentialType cannot be an empty string`);if(t.CredentialType.length>eN)throw new _r.ValidationError(`${t.TransactionType}: CredentialType length cannot be > ${eN}`);if(!uM.HEX_REGEX.test(t.CredentialType))throw new _r.ValidationError(`${t.TransactionType}: CredentialType must be encoded in hex`)}Ze.validateCredentialType=AM;function PM(t,e,r){if(t!=null){if(!Array.isArray(t))throw new _r.ValidationError(`${e}: Credentials must be an array`);if(t.length>Z1)throw new _r.ValidationError(`${e}: Credentials length cannot exceed ${Z1} elements`);if(t.length===0)throw new _r.ValidationError(`${e}: Credentials cannot be an empty array`);if(t.forEach(s=>{if(r){if(!ua(s))throw new _r.ValidationError(`${e}: Invalid Credentials ID list format`)}else if(!jM(s))throw new _r.ValidationError(`${e}: Invalid Credentials format`)}),RM(t))throw new _r.ValidationError(`${e}: Credentials cannot contain duplicate elements`)}}Ze.validateCredentialsList=PM;function RM(t){return new Set(t.map(r=>JSON.stringify(r))).size!==t.length}Object.defineProperty(ci,"__esModule",{value:!0});ci.validateAccountSet=ci.AccountSetTfFlags=ci.AccountSetAsfFlags=void 0;const zn=et,Lg=Ze;var jf;(function(t){t[t.asfRequireDest=1]="asfRequireDest",t[t.asfRequireAuth=2]="asfRequireAuth",t[t.asfDisallowXRP=3]="asfDisallowXRP",t[t.asfDisableMaster=4]="asfDisableMaster",t[t.asfAccountTxnID=5]="asfAccountTxnID",t[t.asfNoFreeze=6]="asfNoFreeze",t[t.asfGlobalFreeze=7]="asfGlobalFreeze",t[t.asfDefaultRipple=8]="asfDefaultRipple",t[t.asfDepositAuth=9]="asfDepositAuth",t[t.asfAuthorizedNFTokenMinter=10]="asfAuthorizedNFTokenMinter",t[t.asfDisallowIncomingNFTokenOffer=12]="asfDisallowIncomingNFTokenOffer",t[t.asfDisallowIncomingCheck=13]="asfDisallowIncomingCheck",t[t.asfDisallowIncomingPayChan=14]="asfDisallowIncomingPayChan",t[t.asfDisallowIncomingTrustline=15]="asfDisallowIncomingTrustline",t[t.asfAllowTrustLineClawback=16]="asfAllowTrustLineClawback"})(jf||(ci.AccountSetAsfFlags=jf={}));var tN;(function(t){t[t.tfRequireDestTag=65536]="tfRequireDestTag",t[t.tfOptionalDestTag=131072]="tfOptionalDestTag",t[t.tfRequireAuth=262144]="tfRequireAuth",t[t.tfOptionalAuth=524288]="tfOptionalAuth",t[t.tfDisallowXRP=1048576]="tfDisallowXRP",t[t.tfAllowXRP=2097152]="tfAllowXRP"})(tN||(ci.AccountSetTfFlags=tN={}));const OM=3,IM=15;function LM(t){if((0,Lg.validateBaseTransaction)(t),(0,Lg.validateOptionalField)(t,"NFTokenMinter",Lg.isAccount),t.ClearFlag!==void 0){if(typeof t.ClearFlag!="number")throw new zn.ValidationError("AccountSet: invalid ClearFlag");if(!Object.values(jf).includes(t.ClearFlag))throw new zn.ValidationError("AccountSet: invalid ClearFlag")}if(t.Domain!==void 0&&typeof t.Domain!="string")throw new zn.ValidationError("AccountSet: invalid Domain");if(t.EmailHash!==void 0&&typeof t.EmailHash!="string")throw new zn.ValidationError("AccountSet: invalid EmailHash");if(t.MessageKey!==void 0&&typeof t.MessageKey!="string")throw new zn.ValidationError("AccountSet: invalid MessageKey");if(t.SetFlag!==void 0){if(typeof t.SetFlag!="number")throw new zn.ValidationError("AccountSet: invalid SetFlag");if(!Object.values(jf).includes(t.SetFlag))throw new zn.ValidationError("AccountSet: invalid SetFlag")}if(t.TransferRate!==void 0&&typeof t.TransferRate!="number")throw new zn.ValidationError("AccountSet: invalid TransferRate");if(t.TickSize!==void 0){if(typeof t.TickSize!="number")throw new zn.ValidationError("AccountSet: invalid TickSize");if(t.TickSize!==0&&(t.TickSize<OM||t.TickSize>IM))throw new zn.ValidationError("AccountSet: invalid TickSize")}}ci.validateAccountSet=LM;var Oa={};Object.defineProperty(Oa,"__esModule",{value:!0});Oa.validateAMMDeposit=Oa.AMMDepositFlags=void 0;const mn=et,oo=Ze;var rN;(function(t){t[t.tfLPToken=65536]="tfLPToken",t[t.tfSingleAsset=524288]="tfSingleAsset",t[t.tfTwoAsset=1048576]="tfTwoAsset",t[t.tfOneAssetLPToken=2097152]="tfOneAssetLPToken",t[t.tfLimitLPToken=4194304]="tfLimitLPToken",t[t.tfTwoAssetIfEmpty=8388608]="tfTwoAssetIfEmpty"})(rN||(Oa.AMMDepositFlags=rN={}));function MM(t){if((0,oo.validateBaseTransaction)(t),t.Asset==null)throw new mn.ValidationError("AMMDeposit: missing field Asset");if(!(0,oo.isCurrency)(t.Asset))throw new mn.ValidationError("AMMDeposit: Asset must be a Currency");if(t.Asset2==null)throw new mn.ValidationError("AMMDeposit: missing field Asset2");if(!(0,oo.isCurrency)(t.Asset2))throw new mn.ValidationError("AMMDeposit: Asset2 must be a Currency");if(t.Amount2!=null&&t.Amount==null)throw new mn.ValidationError("AMMDeposit: must set Amount with Amount2");if(t.EPrice!=null&&t.Amount==null)throw new mn.ValidationError("AMMDeposit: must set Amount with EPrice");if(t.LPTokenOut==null&&t.Amount==null)throw new mn.ValidationError("AMMDeposit: must set at least LPTokenOut or Amount");if(t.LPTokenOut!=null&&!(0,oo.isIssuedCurrency)(t.LPTokenOut))throw new mn.ValidationError("AMMDeposit: LPTokenOut must be an IssuedCurrencyAmount");if(t.Amount!=null&&!(0,oo.isAmount)(t.Amount))throw new mn.ValidationError("AMMDeposit: Amount must be an Amount");if(t.Amount2!=null&&!(0,oo.isAmount)(t.Amount2))throw new mn.ValidationError("AMMDeposit: Amount2 must be an Amount");if(t.EPrice!=null&&!(0,oo.isAmount)(t.EPrice))throw new mn.ValidationError("AMMDeposit: EPrice must be an Amount")}Oa.validateAMMDeposit=MM;var Ia={};Object.defineProperty(Ia,"__esModule",{value:!0});Ia.validateAMMWithdraw=Ia.AMMWithdrawFlags=void 0;const Xn=et,lo=Ze;var sN;(function(t){t[t.tfLPToken=65536]="tfLPToken",t[t.tfWithdrawAll=131072]="tfWithdrawAll",t[t.tfOneAssetWithdrawAll=262144]="tfOneAssetWithdrawAll",t[t.tfSingleAsset=524288]="tfSingleAsset",t[t.tfTwoAsset=1048576]="tfTwoAsset",t[t.tfOneAssetLPToken=2097152]="tfOneAssetLPToken",t[t.tfLimitLPToken=4194304]="tfLimitLPToken"})(sN||(Ia.AMMWithdrawFlags=sN={}));function FM(t){if((0,lo.validateBaseTransaction)(t),t.Asset==null)throw new Xn.ValidationError("AMMWithdraw: missing field Asset");if(!(0,lo.isCurrency)(t.Asset))throw new Xn.ValidationError("AMMWithdraw: Asset must be a Currency");if(t.Asset2==null)throw new Xn.ValidationError("AMMWithdraw: missing field Asset2");if(!(0,lo.isCurrency)(t.Asset2))throw new Xn.ValidationError("AMMWithdraw: Asset2 must be a Currency");if(t.Amount2!=null&&t.Amount==null)throw new Xn.ValidationError("AMMWithdraw: must set Amount with Amount2");if(t.EPrice!=null&&t.Amount==null)throw new Xn.ValidationError("AMMWithdraw: must set Amount with EPrice");if(t.LPTokenIn!=null&&!(0,lo.isIssuedCurrency)(t.LPTokenIn))throw new Xn.ValidationError("AMMWithdraw: LPTokenIn must be an IssuedCurrencyAmount");if(t.Amount!=null&&!(0,lo.isAmount)(t.Amount))throw new Xn.ValidationError("AMMWithdraw: Amount must be an Amount");if(t.Amount2!=null&&!(0,lo.isAmount)(t.Amount2))throw new Xn.ValidationError("AMMWithdraw: Amount2 must be an Amount");if(t.EPrice!=null&&!(0,lo.isAmount)(t.EPrice))throw new Xn.ValidationError("AMMWithdraw: EPrice must be an Amount")}Ia.validateAMMWithdraw=FM;var La={};Object.defineProperty(La,"__esModule",{value:!0});La.validateMPTokenAuthorize=La.MPTokenAuthorizeFlags=void 0;const pd=Ze;var nN;(function(t){t[t.tfMPTUnauthorize=1]="tfMPTUnauthorize"})(nN||(La.MPTokenAuthorizeFlags=nN={}));function DM(t){(0,pd.validateBaseTransaction)(t),(0,pd.validateRequiredField)(t,"MPTokenIssuanceID",pd.isString),(0,pd.validateOptionalField)(t,"Holder",pd.isAccount)}La.validateMPTokenAuthorize=DM;var Ma={};Object.defineProperty(Ma,"__esModule",{value:!0});Ma.validateMPTokenIssuanceCreate=Ma.MPTokenIssuanceCreateFlags=void 0;const Cl=et,Mg=Rr,fi=Ze,BM="9223372036854775807",iN=5e4;var iv;(function(t){t[t.tfMPTCanLock=2]="tfMPTCanLock",t[t.tfMPTRequireAuth=4]="tfMPTRequireAuth",t[t.tfMPTCanEscrow=8]="tfMPTCanEscrow",t[t.tfMPTCanTrade=16]="tfMPTCanTrade",t[t.tfMPTCanTransfer=32]="tfMPTCanTransfer",t[t.tfMPTCanClawback=64]="tfMPTCanClawback"})(iv||(Ma.MPTokenIssuanceCreateFlags=iv={}));function $M(t){var e;if((0,fi.validateBaseTransaction)(t),(0,fi.validateOptionalField)(t,"MaximumAmount",fi.isString),(0,fi.validateOptionalField)(t,"MPTokenMetadata",fi.isString),(0,fi.validateOptionalField)(t,"TransferFee",fi.isNumber),(0,fi.validateOptionalField)(t,"AssetScale",fi.isNumber),typeof t.MPTokenMetadata=="string"&&t.MPTokenMetadata==="")throw new Cl.ValidationError("MPTokenIssuanceCreate: MPTokenMetadata must not be empty string");if(typeof t.MPTokenMetadata=="string"&&!(0,Mg.isHex)(t.MPTokenMetadata))throw new Cl.ValidationError("MPTokenIssuanceCreate: MPTokenMetadata must be in hex format");if(typeof t.MaximumAmount=="string")if(Mg.INTEGER_SANITY_CHECK.exec(t.MaximumAmount)){if(BigInt(t.MaximumAmount)>BigInt(BM)||BigInt(t.MaximumAmount)<BigInt("0"))throw new Cl.ValidationError("MPTokenIssuanceCreate: MaximumAmount out of range")}else throw new Cl.ValidationError("MPTokenIssuanceCreate: Invalid MaximumAmount");if(typeof t.TransferFee=="number"){const r=t.Flags,s=typeof r=="number"?(0,Mg.isFlagEnabled)(r,iv.tfMPTCanTransfer):(e=r.tfMPTCanTransfer)!==null&&e!==void 0?e:!1;if(t.TransferFee<0||t.TransferFee>iN)throw new Cl.ValidationError(`MPTokenIssuanceCreate: TransferFee must be between 0 and ${iN}`);if(t.TransferFee&&!s)throw new Cl.ValidationError("MPTokenIssuanceCreate: TransferFee cannot be provided without enabling tfMPTCanTransfer flag")}}Ma.validateMPTokenIssuanceCreate=$M;var Fa={};Object.defineProperty(Fa,"__esModule",{value:!0});Fa.validateMPTokenIssuanceSet=Fa.MPTokenIssuanceSetFlags=void 0;const UM=et,aN=Rr,fd=Ze;var Ef;(function(t){t[t.tfMPTLock=1]="tfMPTLock",t[t.tfMPTUnlock=2]="tfMPTUnlock"})(Ef||(Fa.MPTokenIssuanceSetFlags=Ef={}));function VM(t){var e,r;(0,fd.validateBaseTransaction)(t),(0,fd.validateRequiredField)(t,"MPTokenIssuanceID",fd.isString),(0,fd.validateOptionalField)(t,"Holder",fd.isAccount);const s=t.Flags,i=typeof s=="number"?(0,aN.isFlagEnabled)(s,Ef.tfMPTLock):(e=s.tfMPTLock)!==null&&e!==void 0?e:!1,a=typeof s=="number"?(0,aN.isFlagEnabled)(s,Ef.tfMPTUnlock):(r=s.tfMPTUnlock)!==null&&r!==void 0?r:!1;if(i&&a)throw new UM.ValidationError("MPTokenIssuanceSet: flag conflict")}Fa.validateMPTokenIssuanceSet=VM;var Da={};Object.defineProperty(Da,"__esModule",{value:!0});Da.validateNFTokenCreateOffer=Da.NFTokenCreateOfferFlags=void 0;const Lo=et,HM=Rr,To=Ze;var av;(function(t){t[t.tfSellNFToken=1]="tfSellNFToken"})(av||(Da.NFTokenCreateOfferFlags=av={}));function zM(t){if(t.Owner!=null)throw new Lo.ValidationError("NFTokenCreateOffer: Owner must not be present for sell offers")}function XM(t){if(t.Owner==null)throw new Lo.ValidationError("NFTokenCreateOffer: Owner must be present for buy offers");if((0,To.parseAmountValue)(t.Amount)<=0)throw new Lo.ValidationError("NFTokenCreateOffer: Amount must be greater than 0 for buy offers")}function WM(t){if((0,To.validateBaseTransaction)(t),t.Account===t.Owner)throw new Lo.ValidationError("NFTokenCreateOffer: Owner and Account must not be equal");if(t.Account===t.Destination)throw new Lo.ValidationError("NFTokenCreateOffer: Destination and Account must not be equal");if((0,To.validateOptionalField)(t,"Destination",To.isAccount),(0,To.validateOptionalField)(t,"Owner",To.isAccount),t.NFTokenID==null)throw new Lo.ValidationError("NFTokenCreateOffer: missing field NFTokenID");if(!(0,To.isAmount)(t.Amount))throw new Lo.ValidationError("NFTokenCreateOffer: invalid Amount");typeof t.Flags=="number"&&(0,HM.isFlagEnabled)(t.Flags,av.tfSellNFToken)?zM(t):XM(t)}Da.validateNFTokenCreateOffer=WM;var Ba={};Object.defineProperty(Ba,"__esModule",{value:!0});Ba.validateNFTokenMint=Ba.NFTokenMintFlags=void 0;const Hh=et,qM=Rr,Fg=Ze;var oN;(function(t){t[t.tfBurnable=1]="tfBurnable",t[t.tfOnlyXRP=2]="tfOnlyXRP",t[t.tfTrustLine=4]="tfTrustLine",t[t.tfTransferable=8]="tfTransferable"})(oN||(Ba.NFTokenMintFlags=oN={}));function KM(t){if((0,Fg.validateBaseTransaction)(t),t.Account===t.Issuer)throw new Hh.ValidationError("NFTokenMint: Issuer must not be equal to Account");if((0,Fg.validateOptionalField)(t,"Issuer",Fg.isAccount),typeof t.URI=="string"&&t.URI==="")throw new Hh.ValidationError("NFTokenMint: URI must not be empty string");if(typeof t.URI=="string"&&!(0,qM.isHex)(t.URI))throw new Hh.ValidationError("NFTokenMint: URI must be in hex format");if(t.NFTokenTaxon==null)throw new Hh.ValidationError("NFTokenMint: missing field NFTokenTaxon")}Ba.validateNFTokenMint=KM;var $a={};Object.defineProperty($a,"__esModule",{value:!0});$a.validateOfferCreate=$a.OfferCreateFlags=void 0;const kl=et,Dg=Ze;var lN;(function(t){t[t.tfPassive=65536]="tfPassive",t[t.tfImmediateOrCancel=131072]="tfImmediateOrCancel",t[t.tfFillOrKill=262144]="tfFillOrKill",t[t.tfSell=524288]="tfSell"})(lN||($a.OfferCreateFlags=lN={}));function GM(t){if((0,Dg.validateBaseTransaction)(t),t.TakerGets===void 0)throw new kl.ValidationError("OfferCreate: missing field TakerGets");if(t.TakerPays===void 0)throw new kl.ValidationError("OfferCreate: missing field TakerPays");if(typeof t.TakerGets!="string"&&!(0,Dg.isAmount)(t.TakerGets))throw new kl.ValidationError("OfferCreate: invalid TakerGets");if(typeof t.TakerPays!="string"&&!(0,Dg.isAmount)(t.TakerPays))throw new kl.ValidationError("OfferCreate: invalid TakerPays");if(t.Expiration!==void 0&&typeof t.Expiration!="number")throw new kl.ValidationError("OfferCreate: invalid Expiration");if(t.OfferSequence!==void 0&&typeof t.OfferSequence!="number")throw new kl.ValidationError("OfferCreate: invalid OfferSequence")}$a.validateOfferCreate=GM;var Ua={};Object.defineProperty(Ua,"__esModule",{value:!0});Ua.validatePayment=Ua.PaymentFlags=void 0;const ha=et,YM=Rr,bi=Ze;var ov;(function(t){t[t.tfNoRippleDirect=65536]="tfNoRippleDirect",t[t.tfPartialPayment=131072]="tfPartialPayment",t[t.tfLimitQuality=262144]="tfLimitQuality"})(ov||(Ua.PaymentFlags=ov={}));function JM(t){if((0,bi.validateBaseTransaction)(t),t.Amount===void 0)throw new ha.ValidationError("PaymentTransaction: missing field Amount");if(!(0,bi.isAmount)(t.Amount))throw new ha.ValidationError("PaymentTransaction: invalid Amount");if((0,bi.validateRequiredField)(t,"Destination",bi.isAccount),(0,bi.validateOptionalField)(t,"DestinationTag",bi.isNumber),(0,bi.validateCredentialsList)(t.CredentialIDs,t.TransactionType,!0),t.InvoiceID!==void 0&&typeof t.InvoiceID!="string")throw new ha.ValidationError("PaymentTransaction: InvoiceID must be a string");if(t.Paths!==void 0&&!tF(t.Paths))throw new ha.ValidationError("PaymentTransaction: invalid Paths");if(t.SendMax!==void 0&&!(0,bi.isAmount)(t.SendMax))throw new ha.ValidationError("PaymentTransaction: invalid SendMax");QM(t)}Ua.validatePayment=JM;function QM(t){var e;if(t.DeliverMin!=null){if(t.Flags==null)throw new ha.ValidationError("PaymentTransaction: tfPartialPayment flag required with DeliverMin");const r=t.Flags;if(!(typeof r=="number"?(0,YM.isFlagEnabled)(r,ov.tfPartialPayment):(e=r.tfPartialPayment)!==null&&e!==void 0?e:!1))throw new ha.ValidationError("PaymentTransaction: tfPartialPayment flag required with DeliverMin");if(!(0,bi.isAmount)(t.DeliverMin))throw new ha.ValidationError("PaymentTransaction: invalid DeliverMin")}}function ZM(t){return t.account!==void 0&&typeof t.account!="string"||t.currency!==void 0&&typeof t.currency!="string"||t.issuer!==void 0&&typeof t.issuer!="string"?!1:t.account!==void 0&&t.currency===void 0&&t.issuer===void 0||t.currency!==void 0||t.issuer!==void 0}function eF(t){for(const e of t)if(!ZM(e))return!1;return!0}function tF(t){if(!Array.isArray(t)||t.length===0)return!1;for(const e of t)if(!Array.isArray(e)||e.length===0||!eF(e))return!1;return!0}var Va={};Object.defineProperty(Va,"__esModule",{value:!0});Va.validatePaymentChannelClaim=Va.PaymentChannelClaimFlags=void 0;const Al=et,cN=Ze;var dN;(function(t){t[t.tfRenew=65536]="tfRenew",t[t.tfClose=131072]="tfClose"})(dN||(Va.PaymentChannelClaimFlags=dN={}));function rF(t){if((0,cN.validateBaseTransaction)(t),(0,cN.validateCredentialsList)(t.CredentialIDs,t.TransactionType,!0),t.Channel===void 0)throw new Al.ValidationError("PaymentChannelClaim: missing Channel");if(typeof t.Channel!="string")throw new Al.ValidationError("PaymentChannelClaim: Channel must be a string");if(t.Balance!==void 0&&typeof t.Balance!="string")throw new Al.ValidationError("PaymentChannelClaim: Balance must be a string");if(t.Amount!==void 0&&typeof t.Amount!="string")throw new Al.ValidationError("PaymentChannelClaim: Amount must be a string");if(t.Signature!==void 0&&typeof t.Signature!="string")throw new Al.ValidationError("PaymentChannelClaim: Signature must be a string");if(t.PublicKey!==void 0&&typeof t.PublicKey!="string")throw new Al.ValidationError("PaymentChannelClaim: PublicKey must be a string")}Va.validatePaymentChannelClaim=rF;var Ha={};Object.defineProperty(Ha,"__esModule",{value:!0});Ha.validateTrustSet=Ha.TrustSetFlags=void 0;const zh=et,uN=Ze;var hN;(function(t){t[t.tfSetfAuth=65536]="tfSetfAuth",t[t.tfSetNoRipple=131072]="tfSetNoRipple",t[t.tfClearNoRipple=262144]="tfClearNoRipple",t[t.tfSetFreeze=1048576]="tfSetFreeze",t[t.tfClearFreeze=2097152]="tfClearFreeze"})(hN||(Ha.TrustSetFlags=hN={}));function sF(t){(0,uN.validateBaseTransaction)(t);const{LimitAmount:e,QualityIn:r,QualityOut:s}=t;if(e===void 0)throw new zh.ValidationError("TrustSet: missing field LimitAmount");if(!(0,uN.isAmount)(e))throw new zh.ValidationError("TrustSet: invalid LimitAmount");if(r!==void 0&&typeof r!="number")throw new zh.ValidationError("TrustSet: QualityIn must be a number");if(s!==void 0&&typeof s!="number")throw new zh.ValidationError("TrustSet: QualityOut must be a number")}Ha.validateTrustSet=sF;var za={};Object.defineProperty(za,"__esModule",{value:!0});za.validateXChainModifyBridge=za.XChainModifyBridgeFlags=void 0;const co=Ze;var pN;(function(t){t[t.tfClearAccountCreateAmount=65536]="tfClearAccountCreateAmount"})(pN||(za.XChainModifyBridgeFlags=pN={}));function nF(t){(0,co.validateBaseTransaction)(t),(0,co.validateRequiredField)(t,"XChainBridge",co.isXChainBridge),(0,co.validateOptionalField)(t,"SignatureReward",co.isAmount),(0,co.validateOptionalField)(t,"MinAccountCreateAmount",co.isAmount)}za.validateXChainModifyBridge=nF;Object.defineProperty(li,"__esModule",{value:!0});li.parseTransactionFlags=li.setTransactionFlagsToNumber=li.parseAccountRootFlags=void 0;const iF=et,fN=Gu,aF=ci,oF=Oa,lF=Ia,cF=La,dF=Ma,uF=Fa,hF=Da,pF=Ba,fF=$a,mF=Ua,gF=Va,xF=Ha,yF=za,NC=Rr;function vF(t){const e={};return Object.values(fN.AccountRootFlags).forEach(r=>{typeof r=="string"&&(0,NC.isFlagEnabled)(t,fN.AccountRootFlags[r])&&(e[r]=!0)}),e}li.parseAccountRootFlags=vF;const lv={AccountSet:aF.AccountSetTfFlags,AMMDeposit:oF.AMMDepositFlags,AMMWithdraw:lF.AMMWithdrawFlags,MPTokenAuthorize:cF.MPTokenAuthorizeFlags,MPTokenIssuanceCreate:dF.MPTokenIssuanceCreateFlags,MPTokenIssuanceSet:uF.MPTokenIssuanceSetFlags,NFTokenCreateOffer:hF.NFTokenCreateOfferFlags,NFTokenMint:pF.NFTokenMintFlags,OfferCreate:fF.OfferCreateFlags,PaymentChannelClaim:gF.PaymentChannelClaimFlags,Payment:mF.PaymentFlags,TrustSet:xF.TrustSetFlags,XChainModifyBridge:yF.XChainModifyBridgeFlags};function SC(t){if(t.Flags==null){t.Flags=0;return}typeof t.Flags!="number"&&(t.Flags=lv[t.TransactionType]?bF(t.Flags,lv[t.TransactionType]):0)}li.setTransactionFlagsToNumber=SC;function bF(t,e){return Object.keys(t).reduce((r,s)=>{if(e[s]==null)throw new iF.ValidationError(`flag ${s} doesn't exist in flagEnum: ${JSON.stringify(e)}`);return t[s]?r|e[s]:r},0)}function wF(t){if(SC(t),typeof t.Flags!="number"||!t.Flags||t.Flags===0)return{};const e=t.Flags,r={},s=lv[t.TransactionType];return Object.values(s).forEach(i=>{typeof i=="string"&&(0,NC.isFlagEnabled)(e,s[i])&&(r[i]=!0)}),r}li.parseTransactionFlags=wF;var jC={},si={},ku=Ce&&Ce.__awaiter||function(t,e,r,s){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};Object.defineProperty(si,"__esModule",{value:!0});si.getLastLedgerSequence=si.getSignedTx=si.waitForFinalTransactionOutcome=si.submitRequest=void 0;const sh=hn,sw=et,_F=1e3;function NF(t){return ku(this,void 0,void 0,function*(){return new Promise(e=>{setTimeout(e,t)})})}function SF(t,e,r=!1){return ku(this,void 0,void 0,function*(){if(!EC(e))throw new sw.ValidationError("Transaction must be signed");const i={command:"submit",tx_blob:typeof e=="string"?e:(0,sh.encode)(e),fail_hard:TF(e)||r};return t.request(i)})}si.submitRequest=SF;function cv(t,e,r,s){return ku(this,void 0,void 0,function*(){yield NF(_F);const i=yield t.getLedgerIndex();if(r<i)throw new sw.XrplError(`The latest ledger sequence ${i} is greater than the transaction's LastLedgerSequence (${r}).
Preliminary result: ${s}`);const a=yield t.request({command:"tx",transaction:e}).catch(o=>ku(this,void 0,void 0,function*(){var l;const c=(l=o==null?void 0:o.data)===null||l===void 0?void 0:l.error;if(c==="txnNotFound")return cv(t,e,r,s);throw new Error(`${c} 
 Preliminary result: ${s}.
Full error details: ${String(o)}`)}));return a.result.validated?a:cv(t,e,r,s)})}si.waitForFinalTransactionOutcome=cv;function EC(t){const e=typeof t=="string"?(0,sh.decode)(t):t;if(typeof e=="string")return!1;if(e.Signers!=null){const r=e.Signers;for(const s of r)if(s.Signer.SigningPubKey==null||s.Signer.TxnSignature==null)return!1;return!0}return e.SigningPubKey!=null&&e.TxnSignature!=null}function jF(t,e,{autofill:r=!0,wallet:s}={}){return ku(this,void 0,void 0,function*(){if(EC(e))return e;if(!s)throw new sw.ValidationError("Wallet must be provided when submitting an unsigned transaction");let i=typeof e=="string"?(0,sh.decode)(e):e;return r&&(i=yield t.autofill(i)),s.sign(i).tx_blob})}si.getSignedTx=jF;function EF(t){return(typeof t=="string"?(0,sh.decode)(t):t).LastLedgerSequence}si.getLastLedgerSequence=EF;function TF(t){return(typeof t=="string"?(0,sh.decode)(t):t).TransactionType==="AccountDelete"}var nh={};Object.defineProperty(nh,"__esModule",{value:!0});nh.ensureClassicAddress=void 0;const mN=Cs;function CF(t){if((0,mN.isValidXAddress)(t)){const{classicAddress:e,tag:r}=(0,mN.xAddressToClassicAddress)(t);if(r!==!1)throw new Error("This command does not support the use of a tag. Use an address without a tag.");return e}return t}nh.ensureClassicAddress=CF;(function(t){var e=Ce&&Ce.__createBinding||(Object.create?function(s,i,a,o){o===void 0&&(o=a);var l=Object.getOwnPropertyDescriptor(i,a);(!l||("get"in l?!i.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(s,o,l)}:function(s,i,a,o){o===void 0&&(o=a),s[o]=i[a]}),r=Ce&&Ce.__exportStar||function(s,i){for(var a in s)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,s,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(si,t),r(nh,t)})(jC);var vs={},k0={},eo={},A0={},el={};Object.defineProperty(el,"__esModule",{value:!0});el.ripemd160=el.RIPEMD160=void 0;const kF=Vi,Rd=Ts,AF=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),TC=new Uint8Array(new Array(16).fill(0).map((t,e)=>e)),PF=TC.map(t=>(9*t+5)%16);let nw=[TC],iw=[PF];for(let t=0;t<4;t++)for(let e of[nw,iw])e.push(e[t].map(r=>AF[r]));const CC=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),RF=nw.map((t,e)=>t.map(r=>CC[e][r])),OF=iw.map((t,e)=>t.map(r=>CC[e][r])),IF=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),LF=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);function gN(t,e,r,s){return t===0?e^r^s:t===1?e&r|~e&s:t===2?(e|~r)^s:t===3?e&s|r&~s:e^(r|~s)}const Xh=new Uint32Array(16);class kC extends kF.HashMD{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:r,h2:s,h3:i,h4:a}=this;return[e,r,s,i,a]}set(e,r,s,i,a){this.h0=e|0,this.h1=r|0,this.h2=s|0,this.h3=i|0,this.h4=a|0}process(e,r){for(let f=0;f<16;f++,r+=4)Xh[f]=e.getUint32(r,!0);let s=this.h0|0,i=s,a=this.h1|0,o=a,l=this.h2|0,c=l,d=this.h3|0,u=d,h=this.h4|0,p=h;for(let f=0;f<5;f++){const m=4-f,v=IF[f],x=LF[f],b=nw[f],y=iw[f],g=RF[f],w=OF[f];for(let S=0;S<16;S++){const _=(0,Rd.rotl)(s+gN(f,a,l,d)+Xh[b[S]]+v,g[S])+h|0;s=h,h=d,d=(0,Rd.rotl)(l,10)|0,l=a,a=_}for(let S=0;S<16;S++){const _=(0,Rd.rotl)(i+gN(m,o,c,u)+Xh[y[S]]+x,w[S])+p|0;i=p,p=u,u=(0,Rd.rotl)(c,10)|0,c=o,o=_}}this.set(this.h1+l+u|0,this.h2+d+p|0,this.h3+h+i|0,this.h4+s+o|0,this.h0+a+c|0)}roundClean(){Xh.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}el.RIPEMD160=kC;el.ripemd160=(0,Rd.wrapConstructor)(()=>new kC);var MF=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(A0,"__esModule",{value:!0});A0.ripemd160=void 0;const FF=el,DF=MF(Ju);A0.ripemd160=(0,DF.default)(FF.ripemd160);var tl={},P0={},R0={},O0={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;const e=un,r=Ts;class s extends r.Hash{constructor(o,l){super(),this.finished=!1,this.destroyed=!1,(0,e.ahash)(o);const c=(0,r.toBytes)(l);if(this.iHash=o.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const d=this.blockLen,u=new Uint8Array(d);u.set(c.length>d?o.create().update(c).digest():c);for(let h=0;h<u.length;h++)u[h]^=54;this.iHash.update(u),this.oHash=o.create();for(let h=0;h<u.length;h++)u[h]^=106;this.oHash.update(u),u.fill(0)}update(o){return(0,e.aexists)(this),this.iHash.update(o),this}digestInto(o){(0,e.aexists)(this),(0,e.abytes)(o,this.outputLen),this.finished=!0,this.iHash.digestInto(o),this.oHash.update(o),this.oHash.digestInto(o),this.destroy()}digest(){const o=new Uint8Array(this.oHash.outputLen);return this.digestInto(o),o}_cloneInto(o){o||(o=Object.create(Object.getPrototypeOf(this),{}));const{oHash:l,iHash:c,finished:d,destroyed:u,blockLen:h,outputLen:p}=this;return o=o,o.finished=d,o.destroyed=u,o.blockLen=h,o.outputLen=p,o.oHash=l._cloneInto(o.oHash),o.iHash=c._cloneInto(o.iHash),o}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=s;const i=(a,o,l)=>new s(a,o).update(l).digest();t.hmac=i,t.hmac.create=(a,o)=>new s(a,o)})(O0);var aw={},to={},Lt={},St={};/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(St,"__esModule",{value:!0});St.notImplemented=St.bitMask=void 0;St.isBytes=M0;St.abytes=F0;St.abool=$F;St.bytesToHex=ow;St.numberToHexUnpadded=AC;St.hexToNumber=lw;St.hexToBytes=D0;St.bytesToNumberBE=VF;St.bytesToNumberLE=HF;St.numberToBytesBE=PC;St.numberToBytesLE=zF;St.numberToVarBytesBE=XF;St.ensureBytes=WF;St.concatBytes=RC;St.equalBytes=qF;St.utf8ToBytes=KF;St.inRange=OC;St.aInRange=GF;St.bitLen=YF;St.bitGet=JF;St.bitSet=QF;St.createHmacDrbg=eD;St.validateObject=rD;St.memoized=nD;const I0=BigInt(0),L0=BigInt(1),BF=BigInt(2);function M0(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function F0(t){if(!M0(t))throw new Error("Uint8Array expected")}function $F(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const UF=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ow(t){F0(t);let e="";for(let r=0;r<t.length;r++)e+=UF[t[r]];return e}function AC(t){const e=t.toString(16);return e.length&1?"0"+e:e}function lw(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?I0:BigInt("0x"+t)}const mi={_0:48,_9:57,A:65,F:70,a:97,f:102};function xN(t){if(t>=mi._0&&t<=mi._9)return t-mi._0;if(t>=mi.A&&t<=mi.F)return t-(mi.A-10);if(t>=mi.a&&t<=mi.f)return t-(mi.a-10)}function D0(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const s=new Uint8Array(r);for(let i=0,a=0;i<r;i++,a+=2){const o=xN(t.charCodeAt(a)),l=xN(t.charCodeAt(a+1));if(o===void 0||l===void 0){const c=t[a]+t[a+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+a)}s[i]=o*16+l}return s}function VF(t){return lw(ow(t))}function HF(t){return F0(t),lw(ow(Uint8Array.from(t).reverse()))}function PC(t,e){return D0(t.toString(16).padStart(e*2,"0"))}function zF(t,e){return PC(t,e).reverse()}function XF(t){return D0(AC(t))}function WF(t,e,r){let s;if(typeof e=="string")try{s=D0(e)}catch(a){throw new Error(t+" must be hex string or Uint8Array, cause: "+a)}else if(M0(e))s=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=s.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return s}function RC(...t){let e=0;for(let s=0;s<t.length;s++){const i=t[s];F0(i),e+=i.length}const r=new Uint8Array(e);for(let s=0,i=0;s<t.length;s++){const a=t[s];r.set(a,i),i+=a.length}return r}function qF(t,e){if(t.length!==e.length)return!1;let r=0;for(let s=0;s<t.length;s++)r|=t[s]^e[s];return r===0}function KF(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const Bg=t=>typeof t=="bigint"&&I0<=t;function OC(t,e,r){return Bg(t)&&Bg(e)&&Bg(r)&&e<=t&&t<r}function GF(t,e,r,s){if(!OC(e,r,s))throw new Error("expected valid "+t+": "+r+" <= n < "+s+", got "+e)}function YF(t){let e;for(e=0;t>I0;t>>=L0,e+=1);return e}function JF(t,e){return t>>BigInt(e)&L0}function QF(t,e,r){return t|(r?L0:I0)<<BigInt(e)}const ZF=t=>(BF<<BigInt(t-1))-L0;St.bitMask=ZF;const $g=t=>new Uint8Array(t),yN=t=>Uint8Array.from(t);function eD(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let s=$g(t),i=$g(t),a=0;const o=()=>{s.fill(1),i.fill(0),a=0},l=(...h)=>r(i,s,...h),c=(h=$g())=>{i=l(yN([0]),h),s=l(),h.length!==0&&(i=l(yN([1]),h),s=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const p=[];for(;h<e;){s=l();const f=s.slice();p.push(f),h+=s.length}return RC(...p)};return(h,p)=>{o(),c(h);let f;for(;!(f=p(d()));)c();return o(),f}}const tD={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||M0(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function rD(t,e,r={}){const s=(i,a,o)=>{const l=tD[a];if(typeof l!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!l(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+a+", got "+c)};for(const[i,a]of Object.entries(e))s(i,a,!1);for(const[i,a]of Object.entries(r))s(i,a,!0);return t}const sD=()=>{throw new Error("not implemented")};St.notImplemented=sD;function nD(t){const e=new WeakMap;return(r,...s)=>{const i=e.get(r);if(i!==void 0)return i;const a=t(r,...s);return e.set(r,a),a}}Object.defineProperty(Lt,"__esModule",{value:!0});Lt.isNegativeLE=void 0;Lt.mod=Bs;Lt.pow=IC;Lt.pow2=aD;Lt.invert=Tf;Lt.tonelliShanks=LC;Lt.FpSqrt=MC;Lt.validateField=cD;Lt.FpPow=FC;Lt.FpInvertBatch=DC;Lt.FpDiv=dD;Lt.FpLegendre=BC;Lt.FpIsSquare=uD;Lt.nLength=cw;Lt.Field=hD;Lt.FpSqrtOdd=pD;Lt.FpSqrtEven=fD;Lt.hashToPrivateScalar=mD;Lt.getFieldBytesLength=dw;Lt.getMinHashLength=$C;Lt.mapHashToField=gD;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $s=St,Or=BigInt(0),qt=BigInt(1),pa=BigInt(2),iD=BigInt(3),dv=BigInt(4),vN=BigInt(5),bN=BigInt(8);function Bs(t,e){const r=t%e;return r>=Or?r:e+r}function IC(t,e,r){if(e<Or)throw new Error("invalid exponent, negatives unsupported");if(r<=Or)throw new Error("invalid modulus");if(r===qt)return Or;let s=qt;for(;e>Or;)e&qt&&(s=s*t%r),t=t*t%r,e>>=qt;return s}function aD(t,e,r){let s=t;for(;e-- >Or;)s*=s,s%=r;return s}function Tf(t,e){if(t===Or)throw new Error("invert: expected non-zero number");if(e<=Or)throw new Error("invert: expected positive modulus, got "+e);let r=Bs(t,e),s=e,i=Or,a=qt;for(;r!==Or;){const l=s/r,c=s%r,d=i-a*l;s=r,r=c,i=a,a=d}if(s!==qt)throw new Error("invert: does not exist");return Bs(i,e)}function LC(t){const e=(t-qt)/pa;let r,s,i;for(r=t-qt,s=0;r%pa===Or;r/=pa,s++);for(i=pa;i<t&&IC(i,e,t)!==t-qt;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(s===1){const o=(t+qt)/dv;return function(c,d){const u=c.pow(d,o);if(!c.eql(c.sqr(u),d))throw new Error("Cannot find square root");return u}}const a=(r+qt)/pa;return function(l,c){if(l.pow(c,e)===l.neg(l.ONE))throw new Error("Cannot find square root");let d=s,u=l.pow(l.mul(l.ONE,i),r),h=l.pow(c,a),p=l.pow(c,r);for(;!l.eql(p,l.ONE);){if(l.eql(p,l.ZERO))return l.ZERO;let f=1;for(let v=l.sqr(p);f<d&&!l.eql(v,l.ONE);f++)v=l.sqr(v);const m=l.pow(u,qt<<BigInt(d-f-1));u=l.sqr(m),h=l.mul(h,m),p=l.mul(p,u),d=f}return h}}function MC(t){if(t%dv===iD){const e=(t+qt)/dv;return function(s,i){const a=s.pow(i,e);if(!s.eql(s.sqr(a),i))throw new Error("Cannot find square root");return a}}if(t%bN===vN){const e=(t-vN)/bN;return function(s,i){const a=s.mul(i,pa),o=s.pow(a,e),l=s.mul(i,o),c=s.mul(s.mul(l,pa),o),d=s.mul(l,s.sub(c,s.ONE));if(!s.eql(s.sqr(d),i))throw new Error("Cannot find square root");return d}}return LC(t)}const oD=(t,e)=>(Bs(t,e)&qt)===qt;Lt.isNegativeLE=oD;const lD=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function cD(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=lD.reduce((s,i)=>(s[i]="function",s),e);return(0,$s.validateObject)(t,r)}function FC(t,e,r){if(r<Or)throw new Error("invalid exponent, negatives unsupported");if(r===Or)return t.ONE;if(r===qt)return e;let s=t.ONE,i=e;for(;r>Or;)r&qt&&(s=t.mul(s,i)),i=t.sqr(i),r>>=qt;return s}function DC(t,e){const r=new Array(e.length),s=e.reduce((a,o,l)=>t.is0(o)?a:(r[l]=a,t.mul(a,o)),t.ONE),i=t.inv(s);return e.reduceRight((a,o,l)=>t.is0(o)?a:(r[l]=t.mul(a,r[l]),t.mul(a,o)),i),r}function dD(t,e,r){return t.mul(e,typeof r=="bigint"?Tf(r,t.ORDER):t.inv(r))}function BC(t){const e=(t-qt)/pa;return(r,s)=>r.pow(s,e)}function uD(t){const e=BC(t.ORDER);return r=>{const s=e(t,r);return t.eql(s,t.ZERO)||t.eql(s,t.ONE)}}function cw(t,e){const r=e!==void 0?e:t.toString(2).length,s=Math.ceil(r/8);return{nBitLength:r,nByteLength:s}}function hD(t,e,r=!1,s={}){if(t<=Or)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:a}=cw(t,e);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const l=Object.freeze({ORDER:t,isLE:r,BITS:i,BYTES:a,MASK:(0,$s.bitMask)(i),ZERO:Or,ONE:qt,create:c=>Bs(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Or<=c&&c<t},is0:c=>c===Or,isOdd:c=>(c&qt)===qt,neg:c=>Bs(-c,t),eql:(c,d)=>c===d,sqr:c=>Bs(c*c,t),add:(c,d)=>Bs(c+d,t),sub:(c,d)=>Bs(c-d,t),mul:(c,d)=>Bs(c*d,t),pow:(c,d)=>FC(l,c,d),div:(c,d)=>Bs(c*Tf(d,t),t),sqrN:c=>c*c,addN:(c,d)=>c+d,subN:(c,d)=>c-d,mulN:(c,d)=>c*d,inv:c=>Tf(c,t),sqrt:s.sqrt||(c=>(o||(o=MC(t)),o(l,c))),invertBatch:c=>DC(l,c),cmov:(c,d,u)=>u?d:c,toBytes:c=>r?(0,$s.numberToBytesLE)(c,a):(0,$s.numberToBytesBE)(c,a),fromBytes:c=>{if(c.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+c.length);return r?(0,$s.bytesToNumberLE)(c):(0,$s.bytesToNumberBE)(c)}});return Object.freeze(l)}function pD(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const r=t.sqrt(e);return t.isOdd(r)?r:t.neg(r)}function fD(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const r=t.sqrt(e);return t.isOdd(r)?t.neg(r):r}function mD(t,e,r=!1){t=(0,$s.ensureBytes)("privateHash",t);const s=t.length,i=cw(e).nByteLength+8;if(i<24||s<i||s>1024)throw new Error("hashToPrivateScalar: expected "+i+"-1024 bytes of input, got "+s);const a=r?(0,$s.bytesToNumberLE)(t):(0,$s.bytesToNumberBE)(t);return Bs(a,e-qt)+qt}function dw(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function $C(t){const e=dw(t);return e+Math.ceil(e/2)}function gD(t,e,r=!1){const s=t.length,i=dw(e),a=$C(e);if(s<16||s<a||s>1024)throw new Error("expected "+a+"-1024 bytes of input, got "+s);const o=r?(0,$s.bytesToNumberLE)(t):(0,$s.bytesToNumberBE)(t),l=Bs(o,e-qt)+qt;return r?(0,$s.numberToBytesLE)(l,i):(0,$s.numberToBytesBE)(l,i)}Object.defineProperty(to,"__esModule",{value:!0});to.wNAF=xD;to.pippenger=yD;to.precomputeMSMUnsafe=vD;to.validateBasic=bD;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wN=Lt,UC=St,_N=BigInt(0),Wh=BigInt(1);function Ug(t,e){const r=e.negate();return t?r:e}function uw(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Vg(t,e){uw(t,e);const r=Math.ceil(e/t)+1,s=2**(t-1);return{windows:r,windowSize:s}}function VC(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,s)=>{if(!(r instanceof e))throw new Error("invalid point at index "+s)})}function HC(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,s)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+s)})}const Hg=new WeakMap,zC=new WeakMap;function zg(t){return zC.get(t)||1}function xD(t,e){return{constTimeNegate:Ug,hasPrecomputes(r){return zg(r)!==1},unsafeLadder(r,s,i=t.ZERO){let a=r;for(;s>_N;)s&Wh&&(i=i.add(a)),a=a.double(),s>>=Wh;return i},precomputeWindow(r,s){const{windows:i,windowSize:a}=Vg(s,e),o=[];let l=r,c=l;for(let d=0;d<i;d++){c=l,o.push(c);for(let u=1;u<a;u++)c=c.add(l),o.push(c);l=c.double()}return o},wNAF(r,s,i){const{windows:a,windowSize:o}=Vg(r,e);let l=t.ZERO,c=t.BASE;const d=BigInt(2**r-1),u=2**r,h=BigInt(r);for(let p=0;p<a;p++){const f=p*o;let m=Number(i&d);i>>=h,m>o&&(m-=u,i+=Wh);const v=f,x=f+Math.abs(m)-1,b=p%2!==0,y=m<0;m===0?c=c.add(Ug(b,s[v])):l=l.add(Ug(y,s[x]))}return{p:l,f:c}},wNAFUnsafe(r,s,i,a=t.ZERO){const{windows:o,windowSize:l}=Vg(r,e),c=BigInt(2**r-1),d=2**r,u=BigInt(r);for(let h=0;h<o;h++){const p=h*l;if(i===_N)break;let f=Number(i&c);if(i>>=u,f>l&&(f-=d,i+=Wh),f===0)continue;let m=s[p+Math.abs(f)-1];f<0&&(m=m.negate()),a=a.add(m)}return a},getPrecomputes(r,s,i){let a=Hg.get(s);return a||(a=this.precomputeWindow(s,r),r!==1&&Hg.set(s,i(a))),a},wNAFCached(r,s,i){const a=zg(r);return this.wNAF(a,this.getPrecomputes(a,r,i),s)},wNAFCachedUnsafe(r,s,i,a){const o=zg(r);return o===1?this.unsafeLadder(r,s,a):this.wNAFUnsafe(o,this.getPrecomputes(o,r,i),s,a)},setWindowSize(r,s){uw(s,e),zC.set(r,s),Hg.delete(r)}}}function yD(t,e,r,s){if(VC(r,t),HC(s,e),r.length!==s.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,a=(0,UC.bitLen)(BigInt(r.length)),o=a>12?a-3:a>4?a-2:a?2:1,l=(1<<o)-1,c=new Array(l+1).fill(i),d=Math.floor((e.BITS-1)/o)*o;let u=i;for(let h=d;h>=0;h-=o){c.fill(i);for(let f=0;f<s.length;f++){const m=s[f],v=Number(m>>BigInt(h)&BigInt(l));c[v]=c[v].add(r[f])}let p=i;for(let f=c.length-1,m=i;f>0;f--)m=m.add(c[f]),p=p.add(m);if(u=u.add(p),h!==0)for(let f=0;f<o;f++)u=u.double()}return u}function vD(t,e,r,s){uw(s,e.BITS),VC(r,t);const i=t.ZERO,a=2**s-1,o=Math.ceil(e.BITS/s),l=BigInt((1<<s)-1),c=r.map(d=>{const u=[];for(let h=0,p=d;h<a;h++)u.push(p),p=p.add(d);return u});return d=>{if(HC(d,e),d.length>r.length)throw new Error("array of scalars must be smaller than array of points");let u=i;for(let h=0;h<o;h++){if(u!==i)for(let f=0;f<s;f++)u=u.double();const p=BigInt(o*s-(h+1)*s);for(let f=0;f<d.length;f++){const m=d[f],v=Number(m>>p&l);v&&(u=u.add(c[f][v-1]))}}return u}}function bD(t){return(0,wN.validateField)(t.Fp),(0,UC.validateObject)(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,wN.nLength)(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DER=t.DERErr=void 0,t.weierstrassPoints=v,t.weierstrass=b,t.SWUFpSqrtRatio=y,t.mapToCurveSimpleSWU=g;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const e=to,r=Lt,s=St,i=St;function a(w){w.lowS!==void 0&&(0,i.abool)("lowS",w.lowS),w.prehash!==void 0&&(0,i.abool)("prehash",w.prehash)}function o(w){const S=(0,e.validateBasic)(w);s.validateObject(S,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:_,Fp:A,a:B}=S;if(_){if(!A.eql(B,A.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof _!="object"||typeof _.beta!="bigint"||typeof _.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...S})}const{bytesToNumberBE:l,hexToBytes:c}=s;class d extends Error{constructor(S=""){super(S)}}t.DERErr=d,t.DER={Err:d,_tlv:{encode:(w,S)=>{const{Err:_}=t.DER;if(w<0||w>256)throw new _("tlv.encode: wrong tag");if(S.length&1)throw new _("tlv.encode: unpadded data");const A=S.length/2,B=s.numberToHexUnpadded(A);if(B.length/2&128)throw new _("tlv.encode: long form length too big");const Q=A>127?s.numberToHexUnpadded(B.length/2|128):"";return s.numberToHexUnpadded(w)+Q+B+S},decode(w,S){const{Err:_}=t.DER;let A=0;if(w<0||w>256)throw new _("tlv.encode: wrong tag");if(S.length<2||S[A++]!==w)throw new _("tlv.decode: wrong tlv");const B=S[A++],Q=!!(B&128);let U=0;if(!Q)U=B;else{const de=B&127;if(!de)throw new _("tlv.decode(long): indefinite length not supported");if(de>4)throw new _("tlv.decode(long): byte length is too big");const me=S.subarray(A,A+de);if(me.length!==de)throw new _("tlv.decode: length bytes not complete");if(me[0]===0)throw new _("tlv.decode(long): zero leftmost byte");for(const ye of me)U=U<<8|ye;if(A+=de,U<128)throw new _("tlv.decode(long): not minimal encoding")}const q=S.subarray(A,A+U);if(q.length!==U)throw new _("tlv.decode: wrong value length");return{v:q,l:S.subarray(A+U)}}},_int:{encode(w){const{Err:S}=t.DER;if(w<u)throw new S("integer: negative integers are not allowed");let _=s.numberToHexUnpadded(w);if(Number.parseInt(_[0],16)&8&&(_="00"+_),_.length&1)throw new S("unexpected DER parsing assertion: unpadded hex");return _},decode(w){const{Err:S}=t.DER;if(w[0]&128)throw new S("invalid signature integer: negative");if(w[0]===0&&!(w[1]&128))throw new S("invalid signature integer: unnecessary leading zero");return l(w)}},toSig(w){const{Err:S,_int:_,_tlv:A}=t.DER,B=typeof w=="string"?c(w):w;s.abytes(B);const{v:Q,l:U}=A.decode(48,B);if(U.length)throw new S("invalid signature: left bytes after parsing");const{v:q,l:de}=A.decode(2,Q),{v:me,l:ye}=A.decode(2,de);if(ye.length)throw new S("invalid signature: left bytes after parsing");return{r:_.decode(q),s:_.decode(me)}},hexFromSig(w){const{_tlv:S,_int:_}=t.DER,A=S.encode(2,_.encode(w.r)),B=S.encode(2,_.encode(w.s)),Q=A+B;return S.encode(48,Q)}};const u=BigInt(0),h=BigInt(1),p=BigInt(2),f=BigInt(3),m=BigInt(4);function v(w){const S=o(w),{Fp:_}=S,A=(0,r.Field)(S.n,S.nBitLength),B=S.toBytes||((H,I,K)=>{const re=I.toAffine();return s.concatBytes(Uint8Array.from([4]),_.toBytes(re.x),_.toBytes(re.y))}),Q=S.fromBytes||(H=>{const I=H.subarray(1),K=_.fromBytes(I.subarray(0,_.BYTES)),re=_.fromBytes(I.subarray(_.BYTES,2*_.BYTES));return{x:K,y:re}});function U(H){const{a:I,b:K}=S,re=_.sqr(H),z=_.mul(re,H);return _.add(_.add(z,_.mul(H,I)),K)}if(!_.eql(_.sqr(S.Gy),U(S.Gx)))throw new Error("bad generator point: equation left != right");function q(H){return s.inRange(H,h,S.n)}function de(H){const{allowedPrivateKeyLengths:I,nByteLength:K,wrapPrivateKey:re,n:z}=S;if(I&&typeof H!="bigint"){if(s.isBytes(H)&&(H=s.bytesToHex(H)),typeof H!="string"||!I.includes(H.length))throw new Error("invalid private key");H=H.padStart(K*2,"0")}let O;try{O=typeof H=="bigint"?H:s.bytesToNumberBE((0,i.ensureBytes)("private key",H,K))}catch{throw new Error("invalid private key, expected hex or "+K+" bytes, got "+typeof H)}return re&&(O=(0,r.mod)(O,z)),s.aInRange("private key",O,h,z),O}function me(H){if(!(H instanceof Z))throw new Error("ProjectivePoint expected")}const ye=(0,i.memoized)((H,I)=>{const{px:K,py:re,pz:z}=H;if(_.eql(z,_.ONE))return{x:K,y:re};const O=H.is0();I==null&&(I=O?_.ONE:_.inv(z));const V=_.mul(K,I),ne=_.mul(re,I),pe=_.mul(z,I);if(O)return{x:_.ZERO,y:_.ZERO};if(!_.eql(pe,_.ONE))throw new Error("invZ was invalid");return{x:V,y:ne}}),G=(0,i.memoized)(H=>{if(H.is0()){if(S.allowInfinityPoint&&!_.is0(H.py))return;throw new Error("bad point: ZERO")}const{x:I,y:K}=H.toAffine();if(!_.isValid(I)||!_.isValid(K))throw new Error("bad point: x or y not FE");const re=_.sqr(K),z=U(I);if(!_.eql(re,z))throw new Error("bad point: equation left != right");if(!H.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class Z{constructor(I,K,re){if(this.px=I,this.py=K,this.pz=re,I==null||!_.isValid(I))throw new Error("x required");if(K==null||!_.isValid(K))throw new Error("y required");if(re==null||!_.isValid(re))throw new Error("z required");Object.freeze(this)}static fromAffine(I){const{x:K,y:re}=I||{};if(!I||!_.isValid(K)||!_.isValid(re))throw new Error("invalid affine point");if(I instanceof Z)throw new Error("projective point not allowed");const z=O=>_.eql(O,_.ZERO);return z(K)&&z(re)?Z.ZERO:new Z(K,re,_.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(I){const K=_.invertBatch(I.map(re=>re.pz));return I.map((re,z)=>re.toAffine(K[z])).map(Z.fromAffine)}static fromHex(I){const K=Z.fromAffine(Q((0,i.ensureBytes)("pointHex",I)));return K.assertValidity(),K}static fromPrivateKey(I){return Z.BASE.multiply(de(I))}static msm(I,K){return(0,e.pippenger)(Z,A,I,K)}_setWindowSize(I){ee.setWindowSize(this,I)}assertValidity(){G(this)}hasEvenY(){const{y:I}=this.toAffine();if(_.isOdd)return!_.isOdd(I);throw new Error("Field doesn't support isOdd")}equals(I){me(I);const{px:K,py:re,pz:z}=this,{px:O,py:V,pz:ne}=I,pe=_.eql(_.mul(K,ne),_.mul(O,z)),ae=_.eql(_.mul(re,ne),_.mul(V,z));return pe&&ae}negate(){return new Z(this.px,_.neg(this.py),this.pz)}double(){const{a:I,b:K}=S,re=_.mul(K,f),{px:z,py:O,pz:V}=this;let ne=_.ZERO,pe=_.ZERO,ae=_.ZERO,se=_.mul(z,z),k=_.mul(O,O),j=_.mul(V,V),P=_.mul(z,O);return P=_.add(P,P),ae=_.mul(z,V),ae=_.add(ae,ae),ne=_.mul(I,ae),pe=_.mul(re,j),pe=_.add(ne,pe),ne=_.sub(k,pe),pe=_.add(k,pe),pe=_.mul(ne,pe),ne=_.mul(P,ne),ae=_.mul(re,ae),j=_.mul(I,j),P=_.sub(se,j),P=_.mul(I,P),P=_.add(P,ae),ae=_.add(se,se),se=_.add(ae,se),se=_.add(se,j),se=_.mul(se,P),pe=_.add(pe,se),j=_.mul(O,V),j=_.add(j,j),se=_.mul(j,P),ne=_.sub(ne,se),ae=_.mul(j,k),ae=_.add(ae,ae),ae=_.add(ae,ae),new Z(ne,pe,ae)}add(I){me(I);const{px:K,py:re,pz:z}=this,{px:O,py:V,pz:ne}=I;let pe=_.ZERO,ae=_.ZERO,se=_.ZERO;const k=S.a,j=_.mul(S.b,f);let P=_.mul(K,O),$=_.mul(re,V),R=_.mul(z,ne),W=_.add(K,re),te=_.add(O,V);W=_.mul(W,te),te=_.add(P,$),W=_.sub(W,te),te=_.add(K,z);let X=_.add(O,ne);return te=_.mul(te,X),X=_.add(P,R),te=_.sub(te,X),X=_.add(re,z),pe=_.add(V,ne),X=_.mul(X,pe),pe=_.add($,R),X=_.sub(X,pe),se=_.mul(k,te),pe=_.mul(j,R),se=_.add(pe,se),pe=_.sub($,se),se=_.add($,se),ae=_.mul(pe,se),$=_.add(P,P),$=_.add($,P),R=_.mul(k,R),te=_.mul(j,te),$=_.add($,R),R=_.sub(P,R),R=_.mul(k,R),te=_.add(te,R),P=_.mul($,te),ae=_.add(ae,P),P=_.mul(X,te),pe=_.mul(W,pe),pe=_.sub(pe,P),P=_.mul(W,$),se=_.mul(X,se),se=_.add(se,P),new Z(pe,ae,se)}subtract(I){return this.add(I.negate())}is0(){return this.equals(Z.ZERO)}wNAF(I){return ee.wNAFCached(this,I,Z.normalizeZ)}multiplyUnsafe(I){const{endo:K,n:re}=S;s.aInRange("scalar",I,u,re);const z=Z.ZERO;if(I===u)return z;if(this.is0()||I===h)return this;if(!K||ee.hasPrecomputes(this))return ee.wNAFCachedUnsafe(this,I,Z.normalizeZ);let{k1neg:O,k1:V,k2neg:ne,k2:pe}=K.splitScalar(I),ae=z,se=z,k=this;for(;V>u||pe>u;)V&h&&(ae=ae.add(k)),pe&h&&(se=se.add(k)),k=k.double(),V>>=h,pe>>=h;return O&&(ae=ae.negate()),ne&&(se=se.negate()),se=new Z(_.mul(se.px,K.beta),se.py,se.pz),ae.add(se)}multiply(I){const{endo:K,n:re}=S;s.aInRange("scalar",I,h,re);let z,O;if(K){const{k1neg:V,k1:ne,k2neg:pe,k2:ae}=K.splitScalar(I);let{p:se,f:k}=this.wNAF(ne),{p:j,f:P}=this.wNAF(ae);se=ee.constTimeNegate(V,se),j=ee.constTimeNegate(pe,j),j=new Z(_.mul(j.px,K.beta),j.py,j.pz),z=se.add(j),O=k.add(P)}else{const{p:V,f:ne}=this.wNAF(I);z=V,O=ne}return Z.normalizeZ([z,O])[0]}multiplyAndAddUnsafe(I,K,re){const z=Z.BASE,O=(ne,pe)=>pe===u||pe===h||!ne.equals(z)?ne.multiplyUnsafe(pe):ne.multiply(pe),V=O(this,K).add(O(I,re));return V.is0()?void 0:V}toAffine(I){return ye(this,I)}isTorsionFree(){const{h:I,isTorsionFree:K}=S;if(I===h)return!0;if(K)return K(Z,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:I,clearCofactor:K}=S;return I===h?this:K?K(Z,this):this.multiplyUnsafe(S.h)}toRawBytes(I=!0){return(0,i.abool)("isCompressed",I),this.assertValidity(),B(Z,this,I)}toHex(I=!0){return(0,i.abool)("isCompressed",I),s.bytesToHex(this.toRawBytes(I))}}Z.BASE=new Z(S.Gx,S.Gy,_.ONE),Z.ZERO=new Z(_.ZERO,_.ONE,_.ZERO);const he=S.nBitLength,ee=(0,e.wNAF)(Z,S.endo?Math.ceil(he/2):he);return{CURVE:S,ProjectivePoint:Z,normPrivateKeyToScalar:de,weierstrassEquation:U,isWithinCurveOrder:q}}function x(w){const S=(0,e.validateBasic)(w);return s.validateObject(S,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...S})}function b(w){const S=x(w),{Fp:_,n:A}=S,B=_.BYTES+1,Q=2*_.BYTES+1;function U(R){return(0,r.mod)(R,A)}function q(R){return(0,r.invert)(R,A)}const{ProjectivePoint:de,normPrivateKeyToScalar:me,weierstrassEquation:ye,isWithinCurveOrder:G}=v({...S,toBytes(R,W,te){const X=W.toAffine(),oe=_.toBytes(X.x),F=s.concatBytes;return(0,i.abool)("isCompressed",te),te?F(Uint8Array.from([W.hasEvenY()?2:3]),oe):F(Uint8Array.from([4]),oe,_.toBytes(X.y))},fromBytes(R){const W=R.length,te=R[0],X=R.subarray(1);if(W===B&&(te===2||te===3)){const oe=s.bytesToNumberBE(X);if(!s.inRange(oe,h,_.ORDER))throw new Error("Point is not on curve");const F=ye(oe);let J;try{J=_.sqrt(F)}catch(Te){const Be=Te instanceof Error?": "+Te.message:"";throw new Error("Point is not on curve"+Be)}const xe=(J&h)===h;return(te&1)===1!==xe&&(J=_.neg(J)),{x:oe,y:J}}else if(W===Q&&te===4){const oe=_.fromBytes(X.subarray(0,_.BYTES)),F=_.fromBytes(X.subarray(_.BYTES,2*_.BYTES));return{x:oe,y:F}}else{const oe=B,F=Q;throw new Error("invalid Point, expected length of "+oe+", or uncompressed "+F+", got "+W)}}}),Z=R=>s.bytesToHex(s.numberToBytesBE(R,S.nByteLength));function he(R){const W=A>>h;return R>W}function ee(R){return he(R)?U(-R):R}const H=(R,W,te)=>s.bytesToNumberBE(R.slice(W,te));class I{constructor(W,te,X){this.r=W,this.s=te,this.recovery=X,this.assertValidity()}static fromCompact(W){const te=S.nByteLength;return W=(0,i.ensureBytes)("compactSignature",W,te*2),new I(H(W,0,te),H(W,te,2*te))}static fromDER(W){const{r:te,s:X}=t.DER.toSig((0,i.ensureBytes)("DER",W));return new I(te,X)}assertValidity(){s.aInRange("r",this.r,h,A),s.aInRange("s",this.s,h,A)}addRecoveryBit(W){return new I(this.r,this.s,W)}recoverPublicKey(W){const{r:te,s:X,recovery:oe}=this,F=ne((0,i.ensureBytes)("msgHash",W));if(oe==null||![0,1,2,3].includes(oe))throw new Error("recovery id invalid");const J=oe===2||oe===3?te+S.n:te;if(J>=_.ORDER)throw new Error("recovery id 2 or 3 invalid");const xe=oe&1?"03":"02",Ee=de.fromHex(xe+Z(J)),Te=q(J),Be=U(-F*Te),nt=U(X*Te),De=de.BASE.multiplyAndAddUnsafe(Ee,Be,nt);if(!De)throw new Error("point at infinify");return De.assertValidity(),De}hasHighS(){return he(this.s)}normalizeS(){return this.hasHighS()?new I(this.r,U(-this.s),this.recovery):this}toDERRawBytes(){return s.hexToBytes(this.toDERHex())}toDERHex(){return t.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return s.hexToBytes(this.toCompactHex())}toCompactHex(){return Z(this.r)+Z(this.s)}}const K={isValidPrivateKey(R){try{return me(R),!0}catch{return!1}},normPrivateKeyToScalar:me,randomPrivateKey:()=>{const R=(0,r.getMinHashLength)(S.n);return(0,r.mapHashToField)(S.randomBytes(R),S.n)},precompute(R=8,W=de.BASE){return W._setWindowSize(R),W.multiply(BigInt(3)),W}};function re(R,W=!0){return de.fromPrivateKey(R).toRawBytes(W)}function z(R){const W=s.isBytes(R),te=typeof R=="string",X=(W||te)&&R.length;return W?X===B||X===Q:te?X===2*B||X===2*Q:R instanceof de}function O(R,W,te=!0){if(z(R))throw new Error("first arg must be private key");if(!z(W))throw new Error("second arg must be public key");return de.fromHex(W).multiply(me(R)).toRawBytes(te)}const V=S.bits2int||function(R){if(R.length>8192)throw new Error("input is too large");const W=s.bytesToNumberBE(R),te=R.length*8-S.nBitLength;return te>0?W>>BigInt(te):W},ne=S.bits2int_modN||function(R){return U(V(R))},pe=s.bitMask(S.nBitLength);function ae(R){return s.aInRange("num < 2^"+S.nBitLength,R,u,pe),s.numberToBytesBE(R,S.nByteLength)}function se(R,W,te=k){if(["recovered","canonical"].some(N=>N in te))throw new Error("sign() legacy options not supported");const{hash:X,randomBytes:oe}=S;let{lowS:F,prehash:J,extraEntropy:xe}=te;F==null&&(F=!0),R=(0,i.ensureBytes)("msgHash",R),a(te),J&&(R=(0,i.ensureBytes)("prehashed msgHash",X(R)));const Ee=ne(R),Te=me(W),Be=[ae(Te),ae(Ee)];if(xe!=null&&xe!==!1){const N=xe===!0?oe(_.BYTES):xe;Be.push((0,i.ensureBytes)("extraEntropy",N))}const nt=s.concatBytes(...Be),De=Ee;function L(N){const E=V(N);if(!G(E))return;const Y=q(E),fe=de.BASE.multiply(E).toAffine(),we=U(fe.x);if(we===u)return;const Ne=U(Y*U(De+we*Te));if(Ne===u)return;let Le=(fe.x===we?0:2)|Number(fe.y&h),ze=Ne;return F&&he(Ne)&&(ze=ee(Ne),Le^=1),new I(we,ze,Le)}return{seed:nt,k2sig:L}}const k={lowS:S.lowS,prehash:!1},j={lowS:S.lowS,prehash:!1};function P(R,W,te=k){const{seed:X,k2sig:oe}=se(R,W,te),F=S;return s.createHmacDrbg(F.hash.outputLen,F.nByteLength,F.hmac)(X,oe)}de.BASE._setWindowSize(8);function $(R,W,te,X=j){var Le;const oe=R;W=(0,i.ensureBytes)("msgHash",W),te=(0,i.ensureBytes)("publicKey",te);const{lowS:F,prehash:J,format:xe}=X;if(a(X),"strict"in X)throw new Error("options.strict was renamed to lowS");if(xe!==void 0&&xe!=="compact"&&xe!=="der")throw new Error("format must be compact or der");const Ee=typeof oe=="string"||s.isBytes(oe),Te=!Ee&&!xe&&typeof oe=="object"&&oe!==null&&typeof oe.r=="bigint"&&typeof oe.s=="bigint";if(!Ee&&!Te)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let Be,nt;try{if(Te&&(Be=new I(oe.r,oe.s)),Ee){try{xe!=="compact"&&(Be=I.fromDER(oe))}catch(ze){if(!(ze instanceof t.DER.Err))throw ze}!Be&&xe!=="der"&&(Be=I.fromCompact(oe))}nt=de.fromHex(te)}catch{return!1}if(!Be||F&&Be.hasHighS())return!1;J&&(W=S.hash(W));const{r:De,s:L}=Be,N=ne(W),E=q(L),Y=U(N*E),fe=U(De*E),we=(Le=de.BASE.multiplyAndAddUnsafe(nt,Y,fe))==null?void 0:Le.toAffine();return we?U(we.x)===De:!1}return{CURVE:S,getPublicKey:re,getSharedSecret:O,sign:P,verify:$,ProjectivePoint:de,Signature:I,utils:K}}function y(w,S){const _=w.ORDER;let A=u;for(let ee=_-h;ee%p===u;ee/=p)A+=h;const B=A,Q=p<<B-h-h,U=Q*p,q=(_-h)/U,de=(q-h)/p,me=U-h,ye=Q,G=w.pow(S,q),Z=w.pow(S,(q+h)/p);let he=(ee,H)=>{let I=G,K=w.pow(H,me),re=w.sqr(K);re=w.mul(re,H);let z=w.mul(ee,re);z=w.pow(z,de),z=w.mul(z,K),K=w.mul(z,H),re=w.mul(z,ee);let O=w.mul(re,K);z=w.pow(O,ye);let V=w.eql(z,w.ONE);K=w.mul(re,Z),z=w.mul(O,I),re=w.cmov(K,re,V),O=w.cmov(z,O,V);for(let ne=B;ne>h;ne--){let pe=ne-p;pe=p<<pe-h;let ae=w.pow(O,pe);const se=w.eql(ae,w.ONE);K=w.mul(re,I),I=w.mul(I,I),ae=w.mul(O,I),re=w.cmov(K,re,se),O=w.cmov(ae,O,se)}return{isValid:V,value:re}};if(w.ORDER%m===f){const ee=(w.ORDER-f)/m,H=w.sqrt(w.neg(S));he=(I,K)=>{let re=w.sqr(K);const z=w.mul(I,K);re=w.mul(re,z);let O=w.pow(re,ee);O=w.mul(O,z);const V=w.mul(O,H),ne=w.mul(w.sqr(O),K),pe=w.eql(ne,I);let ae=w.cmov(V,O,pe);return{isValid:pe,value:ae}}}return he}function g(w,S){if((0,r.validateField)(w),!w.isValid(S.A)||!w.isValid(S.B)||!w.isValid(S.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const _=y(w,S.Z);if(!w.isOdd)throw new Error("Fp.isOdd is not implemented!");return A=>{let B,Q,U,q,de,me,ye,G;B=w.sqr(A),B=w.mul(B,S.Z),Q=w.sqr(B),Q=w.add(Q,B),U=w.add(Q,w.ONE),U=w.mul(U,S.B),q=w.cmov(S.Z,w.neg(Q),!w.eql(Q,w.ZERO)),q=w.mul(q,S.A),Q=w.sqr(U),me=w.sqr(q),de=w.mul(me,S.A),Q=w.add(Q,de),Q=w.mul(Q,U),me=w.mul(me,q),de=w.mul(me,S.B),Q=w.add(Q,de),ye=w.mul(B,U);const{isValid:Z,value:he}=_(Q,me);G=w.mul(B,A),G=w.mul(G,he),ye=w.cmov(ye,U,Z),G=w.cmov(G,he,Z);const ee=w.isOdd(A)===w.isOdd(G);return G=w.cmov(w.neg(G),G,ee),ye=w.div(ye,q),{x:ye,y:G}}}})(aw);Object.defineProperty(R0,"__esModule",{value:!0});R0.getHash=XC;R0.createCurve=ND;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wD=O0,NN=Ts,_D=aw;function XC(t){return{hash:t,hmac:(e,...r)=>(0,wD.hmac)(t,e,(0,NN.concatBytes)(...r)),randomBytes:NN.randomBytes}}function ND(t,e){const r=s=>(0,_D.weierstrass)({...t,...XC(s)});return{...r(e),create:r}}var ro={};Object.defineProperty(ro,"__esModule",{value:!0});ro.expand_message_xmd=WC;ro.expand_message_xof=qC;ro.hash_to_field=uv;ro.isogenyMap=TD;ro.createHasher=CD;const SD=Lt,Kr=St,jD=Kr.bytesToNumberBE;function aa(t,e){if(Au(t),Au(e),t<0||t>=1<<8*e)throw new Error("invalid I2OSP input: "+t);const r=Array.from({length:e}).fill(0);for(let s=e-1;s>=0;s--)r[s]=t&255,t>>>=8;return new Uint8Array(r)}function ED(t,e){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t[s]^e[s];return r}function Au(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function WC(t,e,r,s){(0,Kr.abytes)(t),(0,Kr.abytes)(e),Au(r),e.length>255&&(e=s((0,Kr.concatBytes)((0,Kr.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));const{outputLen:i,blockLen:a}=s,o=Math.ceil(r/i);if(r>65535||o>255)throw new Error("expand_message_xmd: invalid lenInBytes");const l=(0,Kr.concatBytes)(e,aa(e.length,1)),c=aa(0,a),d=aa(r,2),u=new Array(o),h=s((0,Kr.concatBytes)(c,t,d,aa(0,1),l));u[0]=s((0,Kr.concatBytes)(h,aa(1,1),l));for(let f=1;f<=o;f++){const m=[ED(h,u[f-1]),aa(f+1,1),l];u[f]=s((0,Kr.concatBytes)(...m))}return(0,Kr.concatBytes)(...u).slice(0,r)}function qC(t,e,r,s,i){if((0,Kr.abytes)(t),(0,Kr.abytes)(e),Au(r),e.length>255){const a=Math.ceil(2*s/8);e=i.create({dkLen:a}).update((0,Kr.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if(r>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(t).update(aa(r,2)).update(e).update(aa(e.length,1)).digest()}function uv(t,e,r){(0,Kr.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:s,k:i,m:a,hash:o,expand:l,DST:c}=r;(0,Kr.abytes)(t),Au(e);const d=typeof c=="string"?(0,Kr.utf8ToBytes)(c):c,u=s.toString(2).length,h=Math.ceil((u+i)/8),p=e*a*h;let f;if(l==="xmd")f=WC(t,d,p,o);else if(l==="xof")f=qC(t,d,p,i,o);else if(l==="_internal_pass")f=t;else throw new Error('expand must be "xmd" or "xof"');const m=new Array(e);for(let v=0;v<e;v++){const x=new Array(a);for(let b=0;b<a;b++){const y=h*(b+v*a),g=f.subarray(y,y+h);x[b]=(0,SD.mod)(jD(g),s)}m[v]=x}return m}function TD(t,e){const r=e.map(s=>Array.from(s).reverse());return(s,i)=>{const[a,o,l,c]=r.map(d=>d.reduce((u,h)=>t.add(t.mul(u,s),h)));return s=t.div(a,o),i=t.mul(i,t.div(l,c)),{x:s,y:i}}}function CD(t,e,r){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(s,i){const a=uv(s,2,{...r,DST:r.DST,...i}),o=t.fromAffine(e(a[0])),l=t.fromAffine(e(a[1])),c=o.add(l).clearCofactor();return c.assertValidity(),c},encodeToCurve(s,i){const a=uv(s,1,{...r,DST:r.encodeDST,...i}),o=t.fromAffine(e(a[0])).clearCofactor();return o.assertValidity(),o},mapToCurve(s){if(!Array.isArray(s))throw new Error("mapToCurve: expected array of bigints");for(const a of s)if(typeof a!="bigint")throw new Error("mapToCurve: expected array of bigints");const i=t.fromAffine(e(s)).clearCofactor();return i.assertValidity(),i}}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.encodeToCurve=t.hashToCurve=t.schnorr=t.secp256k1=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const e=Rn,r=Ts,s=R0,i=ro,a=Lt,o=St,l=aw,c=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),d=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),u=BigInt(1),h=BigInt(2),p=(ee,H)=>(ee+H/h)/H;function f(ee){const H=c,I=BigInt(3),K=BigInt(6),re=BigInt(11),z=BigInt(22),O=BigInt(23),V=BigInt(44),ne=BigInt(88),pe=ee*ee*ee%H,ae=pe*pe*ee%H,se=(0,a.pow2)(ae,I,H)*ae%H,k=(0,a.pow2)(se,I,H)*ae%H,j=(0,a.pow2)(k,h,H)*pe%H,P=(0,a.pow2)(j,re,H)*j%H,$=(0,a.pow2)(P,z,H)*P%H,R=(0,a.pow2)($,V,H)*$%H,W=(0,a.pow2)(R,ne,H)*R%H,te=(0,a.pow2)(W,V,H)*$%H,X=(0,a.pow2)(te,I,H)*ae%H,oe=(0,a.pow2)(X,O,H)*P%H,F=(0,a.pow2)(oe,K,H)*pe%H,J=(0,a.pow2)(F,h,H);if(!m.eql(m.sqr(J),ee))throw new Error("Cannot find square root");return J}const m=(0,a.Field)(c,void 0,void 0,{sqrt:f});t.secp256k1=(0,s.createCurve)({a:BigInt(0),b:BigInt(7),Fp:m,n:d,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:ee=>{const H=d,I=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),K=-u*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),re=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),z=I,O=BigInt("0x100000000000000000000000000000000"),V=p(z*ee,H),ne=p(-K*ee,H);let pe=(0,a.mod)(ee-V*I-ne*re,H),ae=(0,a.mod)(-V*K-ne*z,H);const se=pe>O,k=ae>O;if(se&&(pe=H-pe),k&&(ae=H-ae),pe>O||ae>O)throw new Error("splitScalar: Endomorphism failed, k="+ee);return{k1neg:se,k1:pe,k2neg:k,k2:ae}}}},e.sha256);const v=BigInt(0),x={};function b(ee,...H){let I=x[ee];if(I===void 0){const K=(0,e.sha256)(Uint8Array.from(ee,re=>re.charCodeAt(0)));I=(0,o.concatBytes)(K,K),x[ee]=I}return(0,e.sha256)((0,o.concatBytes)(I,...H))}const y=ee=>ee.toRawBytes(!0).slice(1),g=ee=>(0,o.numberToBytesBE)(ee,32),w=ee=>(0,a.mod)(ee,c),S=ee=>(0,a.mod)(ee,d),_=t.secp256k1.ProjectivePoint,A=(ee,H,I)=>_.BASE.multiplyAndAddUnsafe(ee,H,I);function B(ee){let H=t.secp256k1.utils.normPrivateKeyToScalar(ee),I=_.fromPrivateKey(H);return{scalar:I.hasEvenY()?H:S(-H),bytes:y(I)}}function Q(ee){(0,o.aInRange)("x",ee,u,c);const H=w(ee*ee),I=w(H*ee+BigInt(7));let K=f(I);K%h!==v&&(K=w(-K));const re=new _(ee,K,u);return re.assertValidity(),re}const U=o.bytesToNumberBE;function q(...ee){return S(U(b("BIP0340/challenge",...ee)))}function de(ee){return B(ee).bytes}function me(ee,H,I=(0,r.randomBytes)(32)){const K=(0,o.ensureBytes)("message",ee),{bytes:re,scalar:z}=B(H),O=(0,o.ensureBytes)("auxRand",I,32),V=g(z^U(b("BIP0340/aux",O))),ne=b("BIP0340/nonce",V,re,K),pe=S(U(ne));if(pe===v)throw new Error("sign failed: k is zero");const{bytes:ae,scalar:se}=B(pe),k=q(ae,re,K),j=new Uint8Array(64);if(j.set(ae,0),j.set(g(S(se+k*z)),32),!ye(j,K,re))throw new Error("sign: Invalid signature produced");return j}function ye(ee,H,I){const K=(0,o.ensureBytes)("signature",ee,64),re=(0,o.ensureBytes)("message",H),z=(0,o.ensureBytes)("publicKey",I,32);try{const O=Q(U(z)),V=U(K.subarray(0,32));if(!(0,o.inRange)(V,u,c))return!1;const ne=U(K.subarray(32,64));if(!(0,o.inRange)(ne,u,d))return!1;const pe=q(g(V),y(O),re),ae=A(O,ne,S(-pe));return!(!ae||!ae.hasEvenY()||ae.toAffine().x!==V)}catch{return!1}}t.schnorr=(()=>({getPublicKey:de,sign:me,verify:ye,utils:{randomPrivateKey:t.secp256k1.utils.randomPrivateKey,lift_x:Q,pointToBytes:y,numberToBytesBE:o.numberToBytesBE,bytesToNumberBE:o.bytesToNumberBE,taggedHash:b,mod:a.mod}}))();const G=(()=>(0,i.isogenyMap)(m,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(ee=>ee.map(H=>BigInt(H)))))(),Z=(()=>(0,l.mapToCurveSimpleSWU)(m,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:m.create(BigInt("-11"))}))(),he=(()=>(0,i.createHasher)(t.secp256k1.ProjectivePoint,ee=>{const{x:H,y:I}=Z(m.create(ee[0]));return G(H,I)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:m.ORDER,m:1,k:128,expand:"xmd",hash:e.sha256}))();t.hashToCurve=(()=>he.hashToCurve)(),t.encodeToCurve=(()=>he.encodeToCurve)()})(P0);var Gc={};Object.defineProperty(Gc,"__esModule",{value:!0});const kD=Kc,AD=St;class hw{constructor(){this.hash=kD.sha512.create()}static half(e){return new hw().add(e).first256()}add(e){return this.hash.update(e),this}addU32(e){const r=new Uint8Array(4);return new DataView(r.buffer).setUint32(0,e),this.add(r)}finish(){return this.hash.digest()}first256(){return this.finish().slice(0,32)}first256BigInt(){return(0,AD.bytesToNumberBE)(this.first256())}}Gc.default=hw;var PD=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tl,"__esModule",{value:!0});tl.accountPublicFromPublicGenerator=tl.derivePrivateKey=void 0;const Pu=P0,RD=PD(Gc),OD=BigInt(0);function hv(t,e){const r=Pu.secp256k1.CURVE.n;for(let s=0;s<=4294967295;s++){const i=new RD.default().add(t);e!==void 0&&i.addU32(e),i.addU32(s);const a=i.first256BigInt();if(a>OD&&a<r)return a}throw new Error("impossible unicorn ;)")}function ID(t,e={}){const r=e.validator,s=Pu.secp256k1.CURVE.n,i=hv(t);if(r)return i;const a=Pu.secp256k1.ProjectivePoint.BASE.multiply(i).toRawBytes(!0),o=e.accountIndex||0;return(hv(a,o)+i)%s}tl.derivePrivateKey=ID;function LD(t){const e=Pu.secp256k1.ProjectivePoint.fromHex(t),r=hv(t,0),s=Pu.secp256k1.ProjectivePoint.BASE.multiply(r);return e.add(s).toRawBytes(!0)}tl.accountPublicFromPublicGenerator=LD;var ih={};Object.defineProperty(ih,"__esModule",{value:!0});const MD={ok(t,e){if(!t)throw new Error(e)}};ih.default=MD;var ka={};Object.defineProperty(ka,"__esModule",{value:!0});ka.getAlgorithmFromPrivateKey=ka.getAlgorithmFromPublicKey=ka.getAlgorithmFromKey=void 0;var en;(function(t){t[t.NONE=-1]="NONE",t[t.ED25519=237]="ED25519",t[t.SECP256K1_PUB_X=2]="SECP256K1_PUB_X",t[t.SECP256K1_PUB_X_ODD_Y=3]="SECP256K1_PUB_X_ODD_Y",t[t.SECP256K1_PUB_XY=4]="SECP256K1_PUB_XY",t[t.SECP256K1_PRIVATE=0]="SECP256K1_PRIVATE"})(en||(en={}));const KC={[`private_${en.NONE}_32`]:"ecdsa-secp256k1",[`private_${en.SECP256K1_PRIVATE}_33`]:"ecdsa-secp256k1",[`private_${en.ED25519}_33`]:"ed25519",[`public_${en.ED25519}_33`]:"ed25519",[`public_${en.SECP256K1_PUB_X}_33`]:"ecdsa-secp256k1",[`public_${en.SECP256K1_PUB_X_ODD_Y}_33`]:"ecdsa-secp256k1",[`public_${en.SECP256K1_PUB_XY}_65`]:"ecdsa-secp256k1"};function FD(t){return{prefix:t.length<2?en.NONE:parseInt(t.slice(0,2),16),len:t.length/2}}function GC(t){return t===en.NONE?"None":`0x${t.toString(16).padStart(2,"0")}`}function DD(t){const r={algorithm:17,prefix:6};return Object.entries(KC).filter(([s])=>s.startsWith(t)).map(([s,i])=>{const[,a,o]=s.split("_"),l=i.padEnd(r.algorithm),c=GC(Number(a)).padEnd(r.prefix);return`${l} - Prefix: ${c} Length: ${o} bytes`}).join(`
`)}function BD({key:t,type:e,prefix:r,len:s}){const i=DD(e);return`invalid_key:

Type: ${e}
Key: ${t}
Prefix: ${GC(r)} 
Length: ${s} bytes

Acceptable ${e} formats are:
${i}
`}function pw(t,e){const{prefix:r,len:s}=FD(t),i=e==="private"&&s===32?en.NONE:r,a=KC[`${e}_${i}_${s}`];if(!a)throw new Error(BD({key:t,type:e,len:s,prefix:i}));return a}ka.getAlgorithmFromKey=pw;function $D(t){return pw(t,"public")}ka.getAlgorithmFromPublicKey=$D;function UD(t){return pw(t,"private")}ka.getAlgorithmFromPrivateKey=UD;var fw={},YC=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fw,"__esModule",{value:!0});const VD=St,qh=P0,SN=At,HD=tl,zD=YC(ih),jN=YC(Gc),EN="00",XD={deriveKeypair(t,e){const r=(0,HD.derivePrivateKey)(t,e),s=EN+(0,SN.bytesToHex)((0,VD.numberToBytesBE)(r,32)),i=(0,SN.bytesToHex)(qh.secp256k1.getPublicKey(r,!0));return{privateKey:s,publicKey:i}},sign(t,e){zD.default.ok(e.length===66&&e.startsWith(EN)||e.length===64);const r=e.length===66?e.slice(2):e;return qh.secp256k1.sign(jN.default.half(t),r,{lowS:!0,extraEntropy:void 0}).toDERHex(!0).toUpperCase()},verify(t,e,r){const s=qh.secp256k1.Signature.fromDER(e);return qh.secp256k1.verify(s,jN.default.half(t),r)}};fw.default=XD;var mw={},JC={},gw={};Object.defineProperty(gw,"__esModule",{value:!0});gw.twistedEdwards=GD;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pv=to,TN=Lt,ms=St,us=St,gn=BigInt(0),hs=BigInt(1),Kh=BigInt(2),WD=BigInt(8),qD={zip215:!0};function KD(t){const e=(0,pv.validateBasic)(t);return ms.validateObject(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function GD(t){const e=KD(t),{Fp:r,n:s,prehash:i,hash:a,randomBytes:o,nByteLength:l,h:c}=e,d=Kh<<BigInt(l*8)-hs,u=r.create,h=(0,TN.Field)(e.n,e.nBitLength),p=e.uvRatio||((Z,he)=>{try{return{isValid:!0,value:r.sqrt(Z*r.inv(he))}}catch{return{isValid:!1,value:gn}}}),f=e.adjustScalarBytes||(Z=>Z),m=e.domain||((Z,he,ee)=>{if((0,us.abool)("phflag",ee),he.length||ee)throw new Error("Contexts/pre-hash are not supported");return Z});function v(Z,he){ms.aInRange("coordinate "+Z,he,gn,d)}function x(Z){if(!(Z instanceof g))throw new Error("ExtendedPoint expected")}const b=(0,us.memoized)((Z,he)=>{const{ex:ee,ey:H,ez:I}=Z,K=Z.is0();he==null&&(he=K?WD:r.inv(I));const re=u(ee*he),z=u(H*he),O=u(I*he);if(K)return{x:gn,y:hs};if(O!==hs)throw new Error("invZ was invalid");return{x:re,y:z}}),y=(0,us.memoized)(Z=>{const{a:he,d:ee}=e;if(Z.is0())throw new Error("bad point: ZERO");const{ex:H,ey:I,ez:K,et:re}=Z,z=u(H*H),O=u(I*I),V=u(K*K),ne=u(V*V),pe=u(z*he),ae=u(V*u(pe+O)),se=u(ne+u(ee*u(z*O)));if(ae!==se)throw new Error("bad point: equation left != right (1)");const k=u(H*I),j=u(K*re);if(k!==j)throw new Error("bad point: equation left != right (2)");return!0});class g{constructor(he,ee,H,I){this.ex=he,this.ey=ee,this.ez=H,this.et=I,v("x",he),v("y",ee),v("z",H),v("t",I),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(he){if(he instanceof g)throw new Error("extended point not allowed");const{x:ee,y:H}=he||{};return v("x",ee),v("y",H),new g(ee,H,hs,u(ee*H))}static normalizeZ(he){const ee=r.invertBatch(he.map(H=>H.ez));return he.map((H,I)=>H.toAffine(ee[I])).map(g.fromAffine)}static msm(he,ee){return(0,pv.pippenger)(g,h,he,ee)}_setWindowSize(he){_.setWindowSize(this,he)}assertValidity(){y(this)}equals(he){x(he);const{ex:ee,ey:H,ez:I}=this,{ex:K,ey:re,ez:z}=he,O=u(ee*z),V=u(K*I),ne=u(H*z),pe=u(re*I);return O===V&&ne===pe}is0(){return this.equals(g.ZERO)}negate(){return new g(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:he}=e,{ex:ee,ey:H,ez:I}=this,K=u(ee*ee),re=u(H*H),z=u(Kh*u(I*I)),O=u(he*K),V=ee+H,ne=u(u(V*V)-K-re),pe=O+re,ae=pe-z,se=O-re,k=u(ne*ae),j=u(pe*se),P=u(ne*se),$=u(ae*pe);return new g(k,j,$,P)}add(he){x(he);const{a:ee,d:H}=e,{ex:I,ey:K,ez:re,et:z}=this,{ex:O,ey:V,ez:ne,et:pe}=he;if(ee===BigInt(-1)){const J=u((K-I)*(V+O)),xe=u((K+I)*(V-O)),Ee=u(xe-J);if(Ee===gn)return this.double();const Te=u(re*Kh*pe),Be=u(z*Kh*ne),nt=Be+Te,De=xe+J,L=Be-Te,N=u(nt*Ee),E=u(De*L),Y=u(nt*L),fe=u(Ee*De);return new g(N,E,fe,Y)}const ae=u(I*O),se=u(K*V),k=u(z*H*pe),j=u(re*ne),P=u((I+K)*(O+V)-ae-se),$=j-k,R=j+k,W=u(se-ee*ae),te=u(P*$),X=u(R*W),oe=u(P*W),F=u($*R);return new g(te,X,F,oe)}subtract(he){return this.add(he.negate())}wNAF(he){return _.wNAFCached(this,he,g.normalizeZ)}multiply(he){const ee=he;ms.aInRange("scalar",ee,hs,s);const{p:H,f:I}=this.wNAF(ee);return g.normalizeZ([H,I])[0]}multiplyUnsafe(he,ee=g.ZERO){const H=he;return ms.aInRange("scalar",H,gn,s),H===gn?S:this.is0()||H===hs?this:_.wNAFCachedUnsafe(this,H,g.normalizeZ,ee)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return _.unsafeLadder(this,s).is0()}toAffine(he){return b(this,he)}clearCofactor(){const{h:he}=e;return he===hs?this:this.multiplyUnsafe(he)}static fromHex(he,ee=!1){const{d:H,a:I}=e,K=r.BYTES;he=(0,us.ensureBytes)("pointHex",he,K),(0,us.abool)("zip215",ee);const re=he.slice(),z=he[K-1];re[K-1]=z&-129;const O=ms.bytesToNumberLE(re),V=ee?d:r.ORDER;ms.aInRange("pointHex.y",O,gn,V);const ne=u(O*O),pe=u(ne-hs),ae=u(H*ne-I);let{isValid:se,value:k}=p(pe,ae);if(!se)throw new Error("Point.fromHex: invalid y coordinate");const j=(k&hs)===hs,P=(z&128)!==0;if(!ee&&k===gn&&P)throw new Error("Point.fromHex: x=0 and x_0=1");return P!==j&&(k=u(-k)),g.fromAffine({x:k,y:O})}static fromPrivateKey(he){return Q(he).point}toRawBytes(){const{x:he,y:ee}=this.toAffine(),H=ms.numberToBytesLE(ee,r.BYTES);return H[H.length-1]|=he&hs?128:0,H}toHex(){return ms.bytesToHex(this.toRawBytes())}}g.BASE=new g(e.Gx,e.Gy,hs,u(e.Gx*e.Gy)),g.ZERO=new g(gn,hs,hs,gn);const{BASE:w,ZERO:S}=g,_=(0,pv.wNAF)(g,l*8);function A(Z){return(0,TN.mod)(Z,s)}function B(Z){return A(ms.bytesToNumberLE(Z))}function Q(Z){const he=r.BYTES;Z=(0,us.ensureBytes)("private key",Z,he);const ee=(0,us.ensureBytes)("hashed private key",a(Z),2*he),H=f(ee.slice(0,he)),I=ee.slice(he,2*he),K=B(H),re=w.multiply(K),z=re.toRawBytes();return{head:H,prefix:I,scalar:K,point:re,pointBytes:z}}function U(Z){return Q(Z).pointBytes}function q(Z=new Uint8Array,...he){const ee=ms.concatBytes(...he);return B(a(m(ee,(0,us.ensureBytes)("context",Z),!!i)))}function de(Z,he,ee={}){Z=(0,us.ensureBytes)("message",Z),i&&(Z=i(Z));const{prefix:H,scalar:I,pointBytes:K}=Q(he),re=q(ee.context,H,Z),z=w.multiply(re).toRawBytes(),O=q(ee.context,z,K,Z),V=A(re+O*I);ms.aInRange("signature.s",V,gn,s);const ne=ms.concatBytes(z,ms.numberToBytesLE(V,r.BYTES));return(0,us.ensureBytes)("result",ne,r.BYTES*2)}const me=qD;function ye(Z,he,ee,H=me){const{context:I,zip215:K}=H,re=r.BYTES;Z=(0,us.ensureBytes)("signature",Z,2*re),he=(0,us.ensureBytes)("message",he),ee=(0,us.ensureBytes)("publicKey",ee,re),K!==void 0&&(0,us.abool)("zip215",K),i&&(he=i(he));const z=ms.bytesToNumberLE(Z.slice(re,2*re));let O,V,ne;try{O=g.fromHex(ee,K),V=g.fromHex(Z.slice(0,re),K),ne=w.multiplyUnsafe(z)}catch{return!1}if(!K&&O.isSmallOrder())return!1;const pe=q(I,V.toRawBytes(),O.toRawBytes(),he);return V.add(O.multiplyUnsafe(pe)).subtract(ne).clearCofactor().equals(g.ZERO)}return w._setWindowSize(8),{CURVE:e,getPublicKey:U,sign:de,verify:ye,ExtendedPoint:g,utils:{getExtendedPublicKey:Q,randomPrivateKey:()=>o(r.BYTES),precompute(Z=8,he=g.BASE){return he._setWindowSize(Z),he.multiply(BigInt(3)),he}}}}var xw={};Object.defineProperty(xw,"__esModule",{value:!0});xw.montgomery=JD;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const CN=Lt,ra=St,Pl=BigInt(0),Xg=BigInt(1);function YD(t){return(0,ra.validateObject)(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function JD(t){const e=YD(t),{P:r}=e,s=y=>(0,CN.mod)(y,r),i=e.montgomeryBits,a=Math.ceil(i/8),o=e.nByteLength,l=e.adjustScalarBytes||(y=>y),c=e.powPminus2||(y=>(0,CN.pow)(y,r-BigInt(2),r));function d(y,g,w){const S=s(y*(g-w));return g=s(g-S),w=s(w+S),[g,w]}const u=(e.a-BigInt(2))/BigInt(4);function h(y,g){(0,ra.aInRange)("u",y,Pl,r),(0,ra.aInRange)("scalar",g,Pl,r);const w=g,S=y;let _=Xg,A=Pl,B=y,Q=Xg,U=Pl,q;for(let me=BigInt(i-1);me>=Pl;me--){const ye=w>>me&Xg;U^=ye,q=d(U,_,B),_=q[0],B=q[1],q=d(U,A,Q),A=q[0],Q=q[1],U=ye;const G=_+A,Z=s(G*G),he=_-A,ee=s(he*he),H=Z-ee,I=B+Q,K=B-Q,re=s(K*G),z=s(I*he),O=re+z,V=re-z;B=s(O*O),Q=s(S*s(V*V)),_=s(Z*ee),A=s(H*(Z+s(u*H)))}q=d(U,_,B),_=q[0],B=q[1],q=d(U,A,Q),A=q[0],Q=q[1];const de=c(A);return s(_*de)}function p(y){return(0,ra.numberToBytesLE)(s(y),a)}function f(y){const g=(0,ra.ensureBytes)("u coordinate",y,a);return o===32&&(g[31]&=127),(0,ra.bytesToNumberLE)(g)}function m(y){const g=(0,ra.ensureBytes)("scalar",y),w=g.length;if(w!==a&&w!==o){let S=""+a+" or "+o;throw new Error("invalid scalar, expected "+S+" bytes, got "+w)}return(0,ra.bytesToNumberLE)(l(g))}function v(y,g){const w=f(g),S=m(y),_=h(w,S);if(_===Pl)throw new Error("invalid private or public key received");return p(_)}const x=p(e.Gu);function b(y){return v(y,x)}return{scalarMult:v,scalarMultBase:b,getSharedSecret:(y,g)=>v(y,g),getPublicKey:y=>b(y),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:x}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hash_to_ristretto255=t.hashToRistretto255=t.RistrettoPoint=t.encodeToCurve=t.hashToCurve=t.edwardsToMontgomery=t.x25519=t.ed25519ph=t.ed25519ctx=t.ed25519=t.ED25519_TORSION_SUBGROUP=void 0,t.edwardsToMontgomeryPub=A,t.edwardsToMontgomeryPriv=B;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const e=xr,r=Ts,s=to,i=gw,a=ro,o=Lt,l=xw,c=St,d=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),u=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),h=BigInt(0),p=BigInt(1),f=BigInt(2),m=BigInt(3),v=BigInt(5),x=BigInt(8);function b(ae){const se=BigInt(10),k=BigInt(20),j=BigInt(40),P=BigInt(80),$=d,W=ae*ae%$*ae%$,te=(0,o.pow2)(W,f,$)*W%$,X=(0,o.pow2)(te,p,$)*ae%$,oe=(0,o.pow2)(X,v,$)*X%$,F=(0,o.pow2)(oe,se,$)*oe%$,J=(0,o.pow2)(F,k,$)*F%$,xe=(0,o.pow2)(J,j,$)*J%$,Ee=(0,o.pow2)(xe,P,$)*xe%$,Te=(0,o.pow2)(Ee,P,$)*xe%$,Be=(0,o.pow2)(Te,se,$)*oe%$;return{pow_p_5_8:(0,o.pow2)(Be,f,$)*ae%$,b2:W}}function y(ae){return ae[0]&=248,ae[31]&=127,ae[31]|=64,ae}function g(ae,se){const k=d,j=(0,o.mod)(se*se*se,k),P=(0,o.mod)(j*j*se,k),$=b(ae*P).pow_p_5_8;let R=(0,o.mod)(ae*j*$,k);const W=(0,o.mod)(se*R*R,k),te=R,X=(0,o.mod)(R*u,k),oe=W===ae,F=W===(0,o.mod)(-ae,k),J=W===(0,o.mod)(-ae*u,k);return oe&&(R=te),(F||J)&&(R=X),(0,o.isNegativeLE)(R,k)&&(R=(0,o.mod)(-R,k)),{isValid:oe||F,value:R}}t.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];const w=(()=>(0,o.Field)(d,void 0,!0))(),S=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:w,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:x,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:e.sha512,randomBytes:r.randomBytes,adjustScalarBytes:y,uvRatio:g}))();t.ed25519=(()=>(0,i.twistedEdwards)(S))();function _(ae,se,k){if(se.length>255)throw new Error("Context is too big");return(0,r.concatBytes)((0,r.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([k?1:0,se.length]),se,ae)}t.ed25519ctx=(()=>(0,i.twistedEdwards)({...S,domain:_}))(),t.ed25519ph=(()=>(0,i.twistedEdwards)(Object.assign({},S,{domain:_,prehash:e.sha512})))(),t.x25519=(()=>(0,l.montgomery)({P:d,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:ae=>{const se=d,{pow_p_5_8:k,b2:j}=b(ae);return(0,o.mod)((0,o.pow2)(k,m,se)*j,se)},adjustScalarBytes:y,randomBytes:r.randomBytes}))();function A(ae){const{y:se}=t.ed25519.ExtendedPoint.fromHex(ae),k=BigInt(1);return w.toBytes(w.create((k+se)*w.inv(k-se)))}t.edwardsToMontgomery=A;function B(ae){const se=S.hash(ae.subarray(0,32));return S.adjustScalarBytes(se).subarray(0,32)}const Q=(()=>(w.ORDER+m)/x)(),U=(()=>w.pow(f,Q))(),q=(()=>w.sqrt(w.neg(w.ONE)))();function de(ae){const se=(w.ORDER-v)/x,k=BigInt(486662);let j=w.sqr(ae);j=w.mul(j,f);let P=w.add(j,w.ONE),$=w.neg(k),R=w.sqr(P),W=w.mul(R,P),te=w.mul(j,k);te=w.mul(te,$),te=w.add(te,R),te=w.mul(te,$);let X=w.sqr(W);R=w.sqr(X),X=w.mul(X,W),X=w.mul(X,te),R=w.mul(R,X);let oe=w.pow(R,se);oe=w.mul(oe,X);let F=w.mul(oe,q);R=w.sqr(oe),R=w.mul(R,W);let J=w.eql(R,te),xe=w.cmov(F,oe,J),Ee=w.mul($,j),Te=w.mul(oe,ae);Te=w.mul(Te,U);let Be=w.mul(Te,q),nt=w.mul(te,j);R=w.sqr(Te),R=w.mul(R,W);let De=w.eql(R,nt),L=w.cmov(Be,Te,De);R=w.sqr(xe),R=w.mul(R,W);let N=w.eql(R,te),E=w.cmov(Ee,$,N),Y=w.cmov(L,xe,N),fe=w.isOdd(Y);return Y=w.cmov(Y,w.neg(Y),N!==fe),{xMn:E,xMd:P,yMn:Y,yMd:p}}const me=(()=>(0,o.FpSqrtEven)(w,w.neg(BigInt(486664))))();function ye(ae){const{xMn:se,xMd:k,yMn:j,yMd:P}=de(ae);let $=w.mul(se,P);$=w.mul($,me);let R=w.mul(k,j),W=w.sub(se,k),te=w.add(se,k),X=w.mul(R,te),oe=w.eql(X,w.ZERO);$=w.cmov($,w.ZERO,oe),R=w.cmov(R,w.ONE,oe),W=w.cmov(W,w.ONE,oe),te=w.cmov(te,w.ONE,oe);const F=w.invertBatch([R,te]);return{x:w.mul($,F[0]),y:w.mul(W,F[1])}}const G=(()=>(0,a.createHasher)(t.ed25519.ExtendedPoint,ae=>ye(ae[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:w.ORDER,m:1,k:128,expand:"xmd",hash:e.sha512}))();t.hashToCurve=(()=>G.hashToCurve)(),t.encodeToCurve=(()=>G.encodeToCurve)();function Z(ae){if(!(ae instanceof ne))throw new Error("RistrettoPoint expected")}const he=u,ee=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),H=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),I=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),K=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),re=ae=>g(p,ae),z=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),O=ae=>t.ed25519.CURVE.Fp.create((0,c.bytesToNumberLE)(ae)&z);function V(ae){const{d:se}=t.ed25519.CURVE,k=t.ed25519.CURVE.Fp.ORDER,j=t.ed25519.CURVE.Fp.create,P=j(he*ae*ae),$=j((P+p)*I);let R=BigInt(-1);const W=j((R-se*P)*j(P+se));let{isValid:te,value:X}=g($,W),oe=j(X*ae);(0,o.isNegativeLE)(oe,k)||(oe=j(-oe)),te||(X=oe),te||(R=P);const F=j(R*(P-p)*K-W),J=X*X,xe=j((X+X)*W),Ee=j(F*ee),Te=j(p-J),Be=j(p+J);return new t.ed25519.ExtendedPoint(j(xe*Be),j(Te*Ee),j(Ee*Be),j(xe*Te))}class ne{constructor(se){this.ep=se}static fromAffine(se){return new ne(t.ed25519.ExtendedPoint.fromAffine(se))}static hashToCurve(se){se=(0,c.ensureBytes)("ristrettoHash",se,64);const k=O(se.slice(0,32)),j=V(k),P=O(se.slice(32,64)),$=V(P);return new ne(j.add($))}static fromHex(se){se=(0,c.ensureBytes)("ristrettoHex",se,32);const{a:k,d:j}=t.ed25519.CURVE,P=t.ed25519.CURVE.Fp.ORDER,$=t.ed25519.CURVE.Fp.create,R="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",W=O(se);if(!(0,c.equalBytes)((0,c.numberToBytesLE)(W,32),se)||(0,o.isNegativeLE)(W,P))throw new Error(R);const te=$(W*W),X=$(p+k*te),oe=$(p-k*te),F=$(X*X),J=$(oe*oe),xe=$(k*j*F-J),{isValid:Ee,value:Te}=re($(xe*J)),Be=$(Te*oe),nt=$(Te*Be*xe);let De=$((W+W)*Be);(0,o.isNegativeLE)(De,P)&&(De=$(-De));const L=$(X*nt),N=$(De*L);if(!Ee||(0,o.isNegativeLE)(N,P)||L===h)throw new Error(R);return new ne(new t.ed25519.ExtendedPoint(De,L,p,N))}static msm(se,k){const j=(0,o.Field)(t.ed25519.CURVE.n,t.ed25519.CURVE.nBitLength);return(0,s.pippenger)(ne,j,se,k)}toRawBytes(){let{ex:se,ey:k,ez:j,et:P}=this.ep;const $=t.ed25519.CURVE.Fp.ORDER,R=t.ed25519.CURVE.Fp.create,W=R(R(j+k)*R(j-k)),te=R(se*k),X=R(te*te),{value:oe}=re(R(W*X)),F=R(oe*W),J=R(oe*te),xe=R(F*J*P);let Ee;if((0,o.isNegativeLE)(P*xe,$)){let Be=R(k*he),nt=R(se*he);se=Be,k=nt,Ee=R(F*H)}else Ee=J;(0,o.isNegativeLE)(se*xe,$)&&(k=R(-k));let Te=R((j-k)*Ee);return(0,o.isNegativeLE)(Te,$)&&(Te=R(-Te)),(0,c.numberToBytesLE)(Te,32)}toHex(){return(0,c.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals(se){Z(se);const{ex:k,ey:j}=this.ep,{ex:P,ey:$}=se.ep,R=t.ed25519.CURVE.Fp.create,W=R(k*$)===R(j*P),te=R(j*$)===R(k*P);return W||te}add(se){return Z(se),new ne(this.ep.add(se.ep))}subtract(se){return Z(se),new ne(this.ep.subtract(se.ep))}multiply(se){return new ne(this.ep.multiply(se))}multiplyUnsafe(se){return new ne(this.ep.multiplyUnsafe(se))}double(){return new ne(this.ep.double())}negate(){return new ne(this.ep.negate())}}t.RistrettoPoint=(()=>(ne.BASE||(ne.BASE=new ne(t.ed25519.ExtendedPoint.BASE)),ne.ZERO||(ne.ZERO=new ne(t.ed25519.ExtendedPoint.ZERO)),ne))();const pe=(ae,se)=>{const k=se.DST,j=typeof k=="string"?(0,r.utf8ToBytes)(k):k,P=(0,a.expand_message_xmd)(ae,j,64,e.sha512);return ne.hashToCurve(P)};t.hashToRistretto255=pe,t.hash_to_ristretto255=t.hashToRistretto255})(JC);var QC=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mw,"__esModule",{value:!0});const Wg=JC,qg=At,Kg=QC(ih),QD=QC(Gc),kN="ED",ZD={deriveKeypair(t){const e=QD.default.half(t),r=kN+(0,qg.bytesToHex)(e),s=kN+(0,qg.bytesToHex)(Wg.ed25519.getPublicKey(e));return{privateKey:r,publicKey:s}},sign(t,e){return Kg.default.ok(t instanceof Uint8Array,"message must be array of octets"),Kg.default.ok(e.length===66,"private key must be 33 bytes including prefix"),(0,qg.bytesToHex)(Wg.ed25519.sign(t,e.slice(2)))},verify(t,e,r){return Kg.default.ok(r.length===66,"public key must be 33 bytes including prefix"),Wg.ed25519.verify(e,t,r.slice(2),{zip215:!1})}};mw.default=ZD;(function(t){var e=Ce&&Ce.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeSeed=t.deriveNodeAddress=t.deriveAddress=t.verify=t.sign=t.deriveKeypair=t.generateSeed=void 0;const r=Cs;Object.defineProperty(t,"decodeSeed",{enumerable:!0,get:function(){return r.decodeSeed}});const s=A0,i=Yu,a=At,o=tl,l=e(Gc),c=e(ih),d=ka,u=e(fw),h=e(mw);function p(S){return{"ecdsa-secp256k1":u.default,ed25519:h.default}[S]}function f(S={}){c.default.ok(!S.entropy||S.entropy.length>=16,"entropy too short");const _=S.entropy?S.entropy.slice(0,16):(0,a.randomBytes)(16),A=S.algorithm==="ed25519"?"ed25519":"secp256k1";return(0,r.encodeSeed)(_,A)}t.generateSeed=f;function m(S,_){var A;const B=(0,r.decodeSeed)(S),U=((A=_==null?void 0:_.algorithm)!==null&&A!==void 0?A:B.type)==="ed25519"?"ed25519":"ecdsa-secp256k1",q=p(U),de=q.deriveKeypair(B.bytes,_),me=l.default.half("This test message should verify."),ye=q.sign(me,de.privateKey);if(!q.verify(me,ye,de.publicKey))throw new Error("derived keypair did not generate verifiable signature");return de}t.deriveKeypair=m;function v(S,_){const A=(0,d.getAlgorithmFromPrivateKey)(_);return p(A).sign((0,a.hexToBytes)(S),_)}t.sign=v;function x(S,_,A){const B=(0,d.getAlgorithmFromPublicKey)(A);return p(B).verify((0,a.hexToBytes)(S),_,A)}t.verify=x;function b(S){return(0,s.ripemd160)((0,i.sha256)(S))}function y(S){return(0,r.encodeAccountID)(b(S))}function g(S){return y((0,a.hexToBytes)(S))}t.deriveAddress=g;function w(S){const _=(0,r.decodeNodePublic)(S),A=(0,o.accountPublicFromPublicGenerator)(_);return y(A)}t.deriveNodeAddress=w})(eo);var ZC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.deriveXAddress=t.deriveAddress=t.deriveKeypair=void 0;const e=Cs,r=eo;Object.defineProperty(t,"deriveKeypair",{enumerable:!0,get:function(){return r.deriveKeypair}}),Object.defineProperty(t,"deriveAddress",{enumerable:!0,get:function(){return r.deriveAddress}});function s(i){const a=(0,r.deriveAddress)(i.publicKey);return(0,e.classicAddressToXAddress)(a,i.tag,i.test)}t.deriveXAddress=s})(ZC);var yw={},rl={};Object.defineProperty(rl,"__esModule",{value:!0});rl.omitBy=rl.groupBy=void 0;function eB(t,e){function r(s,i,a,o){const l=e(i,a,o)||0,c=s[l]||[];return c.push(i),s[l]=c,s}return t.reduce(r,{})}rl.groupBy=eB;function tB(t,e){return Object.keys(t).filter(i=>!e(t[i],i)).reduce((i,a)=>(i[a]=t[a],i),{})}rl.omitBy=tB;var $i={},rB=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($i,"__esModule",{value:!0});$i.xrpToDrops=$i.dropsToXrp=void 0;const Jd=rB(ks),Mo=et,ek=1e6,sB=6,fv=10,tk=/^-?[0-9.]+$/u;function nB(t){const e=new Jd.default(t).toString(fv);if(typeof t=="string"&&e==="NaN")throw new Mo.ValidationError(`dropsToXrp: invalid value '${t}', should be a BigNumber or string-encoded number.`);if(e.includes("."))throw new Mo.ValidationError(`dropsToXrp: value '${e}' has too many decimal places.`);if(!tk.exec(e))throw new Mo.ValidationError(`dropsToXrp: failed sanity check - value '${e}', does not match (^-?[0-9]+$).`);return new Jd.default(e).dividedBy(ek).toNumber()}$i.dropsToXrp=nB;function iB(t){const e=new Jd.default(t).toString(fv);if(typeof t=="string"&&e==="NaN")throw new Mo.ValidationError(`xrpToDrops: invalid value '${t}', should be a BigNumber or string-encoded number.`);if(!tk.exec(e))throw new Mo.ValidationError(`xrpToDrops: failed sanity check - value '${e}', does not match (^-?[0-9.]+$).`);const r=e.split(".");if(r.length>2)throw new Mo.ValidationError(`xrpToDrops: failed sanity check - value '${e}' has too many decimal points.`);if((r[1]||"0").length>sB)throw new Mo.ValidationError(`xrpToDrops: value '${e}' has too many decimal places.`);return new Jd.default(e).times(ek).integerValue(Jd.default.ROUND_FLOOR).toString(fv)}$i.xrpToDrops=iB;var aB=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yw,"__esModule",{value:!0});const mv=aB(ks),oB=rl,lB=$i;function cB(t){const e=Object.keys(t)[0],r=t[e];return Object.assign(Object.assign({},r),{NodeType:e,LedgerEntryType:r.LedgerEntryType,LedgerIndex:r.LedgerIndex,NewFields:r.NewFields,FinalFields:r.FinalFields,PreviousFields:r.PreviousFields})}function dB(t){return t.AffectedNodes.length===0?[]:t.AffectedNodes.map(cB)}function uB(t){const e=(0,oB.groupBy)(t,r=>r.account);return Object.entries(e).map(([r,s])=>({account:r,balances:s.map(i=>i.balance)}))}function Gg(t){return typeof t=="string"?new mv.default(t):new mv.default(t.value)}function rk(t){var e,r,s;let i=null;return!((e=t.NewFields)===null||e===void 0)&&e.Balance?i=Gg(t.NewFields.Balance):!((r=t.PreviousFields)===null||r===void 0)&&r.Balance&&(!((s=t.FinalFields)===null||s===void 0)&&s.Balance)&&(i=Gg(t.FinalFields.Balance).minus(Gg(t.PreviousFields.Balance))),i===null||i.isZero()?null:i}function hB(t){var e,r,s;const i=rk(t);return i===null?null:{account:(r=(e=t.FinalFields)===null||e===void 0?void 0:e.Account)!==null&&r!==void 0?r:(s=t.NewFields)===null||s===void 0?void 0:s.Account,balance:{currency:"XRP",value:(0,lB.dropsToXrp)(i).toString()}}}function pB(t){const e=new mv.default(t.balance.value).negated();return{account:t.balance.issuer,balance:{issuer:t.account,currency:t.balance.currency,value:e.toString()}}}function fB(t){var e,r;const s=rk(t);if(s===null)return null;const i=t.NewFields==null?t.FinalFields:t.NewFields,a={account:(e=i==null?void 0:i.LowLimit)===null||e===void 0?void 0:e.issuer,balance:{issuer:(r=i==null?void 0:i.HighLimit)===null||r===void 0?void 0:r.issuer,currency:(i==null?void 0:i.Balance).currency,value:s.toString()}};return[a,pB(a)]}function mB(t){const e=dB(t).map(r=>{if(r.LedgerEntryType==="AccountRoot"){const s=hB(r);return s==null?[]:[s]}if(r.LedgerEntryType==="RippleState"){const s=fB(r);return s??[]}return[]});return uB(e.flat())}yw.default=mB;var vw={},di={};Object.defineProperty(di,"__esModule",{value:!0});di.isDeletedNode=di.isModifiedNode=di.isCreatedNode=void 0;function gB(t){return Object.prototype.hasOwnProperty.call(t,"CreatedNode")}di.isCreatedNode=gB;function xB(t){return Object.prototype.hasOwnProperty.call(t,"ModifiedNode")}di.isModifiedNode=xB;function yB(t){return Object.prototype.hasOwnProperty.call(t,"DeletedNode")}di.isDeletedNode=yB;Object.defineProperty(vw,"__esModule",{value:!0});const vB=hn,Yg=di;function bB(t){return typeof t=="string"?(0,vB.decode)(t):t}function wB(t){if(typeof t!="string"&&(t==null?void 0:t.AffectedNodes)===void 0)throw new TypeError(`Unable to parse the parameter given to getNFTokenID.
      'meta' must be the metadata from an NFTokenMint transaction. Received ${JSON.stringify(t)} instead.`);const r=bB(t).AffectedNodes.filter(o=>{var l;return(0,Yg.isCreatedNode)(o)?o.CreatedNode.LedgerEntryType==="NFTokenPage":(0,Yg.isModifiedNode)(o)?o.ModifiedNode.LedgerEntryType==="NFTokenPage"&&!!(!((l=o.ModifiedNode.PreviousFields)===null||l===void 0)&&l.NFTokens):!1}),s=new Set(r.flatMap(o=>{var l;return((0,Yg.isModifiedNode)(o)?(l=o.ModifiedNode.PreviousFields)===null||l===void 0?void 0:l.NFTokens:[]).map(d=>d.NFToken.NFTokenID)}).filter(o=>!!o));return r.flatMap(o=>{var l,c,d,u,h,p;return((p=(d=(c=(l=o.ModifiedNode)===null||l===void 0?void 0:l.FinalFields)===null||c===void 0?void 0:c.NFTokens)!==null&&d!==void 0?d:(h=(u=o.CreatedNode)===null||u===void 0?void 0:u.NewFields)===null||h===void 0?void 0:h.NFTokens)!==null&&p!==void 0?p:[]).map(f=>f.NFToken.NFTokenID)}).filter(o=>!!o).find(o=>!s.has(o))}vw.default=wB;var bw={};Object.defineProperty(bw,"__esModule",{value:!0});const _B=hn,NB=di;function SB(t){return typeof t=="string"?(0,_B.decode)(t):t}function jB(t){if(typeof t!="string"&&(t==null?void 0:t.AffectedNodes)===void 0)throw new TypeError(`Unable to parse the parameter given to getXChainClaimID.
      'meta' must be the metadata from an XChainCreateClaimID transaction. Received ${JSON.stringify(t)} instead.`);const e=SB(t);if(!e.TransactionResult)throw new TypeError("Cannot get XChainClaimID from un-validated transaction");return e.TransactionResult!=="tesSUCCESS"?void 0:e.AffectedNodes.find(s=>(0,NB.isCreatedNode)(s)&&s.CreatedNode.LedgerEntryType==="XChainOwnedClaimID").CreatedNode.NewFields.XChainClaimID}bw.default=jB;var sk={},an={},Yc={};Object.defineProperty(Yc,"__esModule",{value:!0});var gv;(function(t){t[t.TRANSACTION_ID=1415073280]="TRANSACTION_ID",t[t.TRANSACTION_NODE=1397638144]="TRANSACTION_NODE",t[t.INNER_NODE=1296649728]="INNER_NODE",t[t.LEAF_NODE=1296846336]="LEAF_NODE",t[t.TRANSACTION_SIGN=1398036480]="TRANSACTION_SIGN",t[t.TRANSACTION_SIGN_TESTNET=1937012736]="TRANSACTION_SIGN_TESTNET",t[t.TRANSACTION_MULTISIGN=1397576704]="TRANSACTION_MULTISIGN",t[t.LEDGER=1280791040]="LEDGER"})(gv||(gv={}));Yc.default=gv;var Jc={};Object.defineProperty(Jc,"__esModule",{value:!0});const EB=Kc,AN=At,TB=32;function CB(t){return(0,AN.bytesToHex)((0,EB.sha512)((0,AN.hexToBytes)(t)).slice(0,TB))}Jc.default=CB;var nk={},ww={},B0={},Xa={};Object.defineProperty(Xa,"__esModule",{value:!0});Xa.Node=Xa.NodeType=void 0;var PN;(function(t){t[t.INNER=1]="INNER",t[t.TRANSACTION_NO_METADATA=2]="TRANSACTION_NO_METADATA",t[t.TRANSACTION_METADATA=3]="TRANSACTION_METADATA",t[t.ACCOUNT_STATE=4]="ACCOUNT_STATE"})(PN||(Xa.NodeType=PN={}));class kB{}Xa.Node=kB;var ik=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(B0,"__esModule",{value:!0});const RN=et,Jg=ik(Yc),Qg=ik(Jc),Gh=Xa,Zg=16;class AB extends Gh.Node{constructor(e,r,s){super(),this.tag=e,this.type=s,this.data=r}get hash(){switch(this.type){case Gh.NodeType.ACCOUNT_STATE:{const e=Jg.default.LEAF_NODE.toString(Zg);return(0,Qg.default)(e+this.data+this.tag)}case Gh.NodeType.TRANSACTION_NO_METADATA:{const e=Jg.default.TRANSACTION_ID.toString(Zg);return(0,Qg.default)(e+this.data)}case Gh.NodeType.TRANSACTION_METADATA:{const e=Jg.default.TRANSACTION_NODE.toString(Zg);return(0,Qg.default)(e+this.data+this.tag)}default:throw new RN.XrplError("Tried to hash a SHAMap node of unknown type.")}}addItem(e,r){throw new RN.XrplError("Cannot call addItem on a LeafNode")}}B0.default=AB;var _w=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ww,"__esModule",{value:!0});const ex=et,PB=_w(Yc),RB=_w(Jc),OB=_w(B0),ON=Xa,IN="0000000000000000000000000000000000000000000000000000000000000000",tx=15,Yh=16;class Cf extends ON.Node{constructor(e=0){super(),this.leaves={},this.type=ON.NodeType.INNER,this.depth=e,this.empty=!0}get hash(){if(this.empty)return IN;let e="";for(let s=0;s<=tx;s++){const i=this.leaves[s],a=i==null?IN:i.hash;e+=a}const r=PB.default.INNER_NODE.toString(Yh);return(0,RB.default)(r+e)}addItem(e,r){const s=this.getNode(parseInt(e[this.depth],Yh));if(s===void 0){this.setNode(parseInt(e[this.depth],Yh),r);return}if(s instanceof Cf)s.addItem(e,r);else if(s instanceof OB.default){if(s.tag===e)throw new ex.XrplError("Tried to add a node to a SHAMap that was already in there.");{const i=new Cf(this.depth+1);i.addItem(s.tag,s),i.addItem(e,r),this.setNode(parseInt(e[this.depth],Yh),i)}}}setNode(e,r){if(e<0||e>tx)throw new ex.XrplError("Invalid slot: slot must be between 0-15.");this.leaves[e]=r,this.empty=!1}getNode(e){if(e<0||e>tx)throw new ex.XrplError("Invalid slot: slot must be between 0-15.");return this.leaves[e]}}ww.default=Cf;(function(t){var e=Ce&&Ce.__createBinding||(Object.create?function(l,c,d,u){u===void 0&&(u=d);var h=Object.getOwnPropertyDescriptor(c,d);(!h||("get"in h?!c.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return c[d]}}),Object.defineProperty(l,u,h)}:function(l,c,d,u){u===void 0&&(u=d),l[u]=c[d]}),r=Ce&&Ce.__exportStar||function(l,c){for(var d in l)d!=="default"&&!Object.prototype.hasOwnProperty.call(c,d)&&e(c,l,d)},s=Ce&&Ce.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(ww),a=s(B0);class o{constructor(){this.root=new i.default(0)}get hash(){return this.root.hash}addItem(c,d,u){this.root.addItem(c,new a.default(c,d,u))}}r(Xa,t),t.default=o})(nk);var IB=Ce&&Ce.__createBinding||(Object.create?function(t,e,r,s){s===void 0&&(s=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,s,i)}:function(t,e,r,s){s===void 0&&(s=r),t[s]=e[r]}),LB=Ce&&Ce.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),MB=Ce&&Ce.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&IB(e,t,r);return LB(e,t),e},Nw=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(an,"__esModule",{value:!0});an.hashStateTree=an.hashTxTree=an.hashLedgerHeader=an.hashSignedTx=void 0;const rx=At,FB=Nw(ks),Ru=hn,Pc=et,ak=Nw(Yc),ok=Nw(Jc),kf=MB(nk),Sw=16;function md(t,e){return Number(t).toString(Sw).padStart(e*2,"0")}function DB(t,e){return new FB.default(t).toString(Sw).padStart(e*2,"0")}function LN(t){const e=t.length/2;if(e<=192)return(0,rx.bytesToHex)([e])+t;if(e<=12480){const r=e-193;return(0,rx.bytesToHex)([193+(r>>>8),r&255])+t}if(e<=918744){const r=e-12481;return(0,rx.bytesToHex)([241+(r>>>16),r>>>8&255,r&255])+t}throw new Pc.XrplError("Variable integer overflow.")}function lk(t){let e,r;if(typeof t=="string"?(e=t,r=(0,Ru.decode)(t)):(e=(0,Ru.encode)(t),r=t),r.TxnSignature===void 0&&r.Signers===void 0&&r.SigningPubKey===void 0)throw new Pc.ValidationError("The transaction must be signed to hash it.");const s=ak.default.TRANSACTION_ID.toString(16).toUpperCase();return(0,ok.default)(s.concat(e))}an.hashSignedTx=lk;function ck(t){const r=ak.default.LEDGER.toString(Sw).toUpperCase()+md(Number(t.ledger_index),4)+DB(t.total_coins,8)+t.parent_hash+t.transaction_hash+t.account_hash+md(t.parent_close_time,4)+md(t.close_time,4)+md(t.close_time_resolution,1)+md(t.close_flags,1);return(0,ok.default)(r)}an.hashLedgerHeader=ck;function dk(t){var e;const r=new kf.default;for(const s of t){const i=(0,Ru.encode)(s),a=(0,Ru.encode)((e=s.metaData)!==null&&e!==void 0?e:{}),o=lk(i),l=LN(i)+LN(a);r.addItem(o,l,kf.NodeType.TRANSACTION_METADATA)}return r.hash}an.hashTxTree=dk;function uk(t){const e=new kf.default;return t.forEach(r=>{const s=(0,Ru.encode)(r);e.addItem(r.index,s,kf.NodeType.ACCOUNT_STATE)}),e.hash}an.hashStateTree=uk;function BB(t,e){const{transaction_hash:r}=t;if(!e.computeTreeHashes)return r;if(t.transactions==null)throw new Pc.ValidationError("transactions is missing from the ledger");const s=dk(t.transactions);if(r!==s)throw new Pc.ValidationError("transactionHash in header does not match computed hash of transactions",{transactionHashInHeader:r,computedHashOfTransactions:s});return s}function $B(t,e){const{account_hash:r}=t;if(!e.computeTreeHashes)return r;if(t.accountState==null)throw new Pc.ValidationError("accountState is missing from the ledger");const s=uk(t.accountState);if(r!==s)throw new Pc.ValidationError("stateHash in header does not match computed hash of state");return s}function UB(t,e={}){const r={transaction_hash:BB(t,e),account_hash:$B(t,e)};return ck(Object.assign(Object.assign({},t),r))}an.default=UB;var jw={};Object.defineProperty(jw,"__esModule",{value:!0});const VB={account:"a",dirNode:"d",generatorMap:"g",rippleState:"r",offer:"o",ownerDir:"O",bookDir:"B",contract:"c",skipList:"s",escrow:"u",amendment:"f",feeSettings:"e",ticket:"T",signerList:"S",paychan:"x",check:"C",depositPreauth:"p"};jw.default=VB;(function(t){var e=Ce&&Ce.__createBinding||(Object.create?function(Q,U,q,de){de===void 0&&(de=q);var me=Object.getOwnPropertyDescriptor(U,q);(!me||("get"in me?!U.__esModule:me.writable||me.configurable))&&(me={enumerable:!0,get:function(){return U[q]}}),Object.defineProperty(Q,de,me)}:function(Q,U,q,de){de===void 0&&(de=q),Q[de]=U[q]}),r=Ce&&Ce.__setModuleDefault||(Object.create?function(Q,U){Object.defineProperty(Q,"default",{enumerable:!0,value:U})}:function(Q,U){Q.default=U}),s=Ce&&Ce.__importStar||function(Q){if(Q&&Q.__esModule)return Q;var U={};if(Q!=null)for(var q in Q)q!=="default"&&Object.prototype.hasOwnProperty.call(Q,q)&&e(U,Q,q);return r(U,Q),U},i=Ce&&Ce.__importDefault||function(Q){return Q&&Q.__esModule?Q:{default:Q}};Object.defineProperty(t,"__esModule",{value:!0}),t.hashTxTree=t.hashStateTree=t.hashLedger=t.hashSignedTx=t.hashLedgerHeader=t.hashPaymentChannel=t.hashEscrow=t.hashTrustline=t.hashOfferId=t.hashSignerListId=t.hashAccountRoot=t.hashTx=void 0;const a=At,o=i(ks),l=Cs,c=s(an);t.hashLedger=c.default,Object.defineProperty(t,"hashLedgerHeader",{enumerable:!0,get:function(){return c.hashLedgerHeader}}),Object.defineProperty(t,"hashSignedTx",{enumerable:!0,get:function(){return c.hashSignedTx}}),Object.defineProperty(t,"hashTxTree",{enumerable:!0,get:function(){return c.hashTxTree}}),Object.defineProperty(t,"hashStateTree",{enumerable:!0,get:function(){return c.hashStateTree}});const d=i(Yc),u=i(jw),h=i(Jc),p=16,f=4;function m(Q){return(0,a.bytesToHex)((0,l.decodeAccountID)(Q))}function v(Q){return u.default[Q].charCodeAt(0).toString(p).padStart(4,"0")}const x=255;function b(Q){if(Q.length!==3)return Q;const U=Array(20).fill(0);return U[12]=Q.charCodeAt(0)&x,U[13]=Q.charCodeAt(1)&x,U[14]=Q.charCodeAt(2)&x,(0,a.bytesToHex)(Uint8Array.from(U))}function y(Q){const U=d.default.TRANSACTION_SIGN.toString(p).toUpperCase();return(0,h.default)(U+Q)}t.hashTx=y;function g(Q){return(0,h.default)(v("account")+m(Q))}t.hashAccountRoot=g;function w(Q){return(0,h.default)(`${v("signerList")+m(Q)}00000000`)}t.hashSignerListId=w;function S(Q,U){const q=u.default.offer.charCodeAt(0).toString(p).padStart(2,"0"),de=U.toString(p).padStart(8,"0"),me=`00${q}`;return(0,h.default)(me+m(Q)+de)}t.hashOfferId=S;function _(Q,U,q){const de=m(Q),me=m(U),ye=new o.default(de,16).isGreaterThan(new o.default(me,16)),G=ye?me:de,Z=ye?de:me,he=v("rippleState");return(0,h.default)(he+G+Z+b(q))}t.hashTrustline=_;function A(Q,U){return(0,h.default)(v("escrow")+m(Q)+U.toString(p).padStart(f*2,"0"))}t.hashEscrow=A;function B(Q,U,q){return(0,h.default)(v("paychan")+m(Q)+m(U)+q.toString(p).padStart(f*2,"0"))}t.hashPaymentChannel=B})(sk);var Ew={},HB=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ew,"__esModule",{value:!0});const zB=At,Od=HB(ks),XB=Cs,WB=et;function qB(t,e){const a=new Od.default(384160001).multipliedBy(e).modulo(4294967296).plus(2459).modulo(4294967296).toNumber();return(t^a)>>>0}function KB(t){if(t.length!==64)throw new WB.XrplError(`Attempting to parse a nftokenID with length ${t.length}
    , but expected a token with length 64`);const r=new Od.default(t.substring(48,56),16).toNumber(),s=new Od.default(t.substring(56,64),16).toNumber();return{NFTokenID:t,Flags:new Od.default(t.substring(0,4),16).toNumber(),TransferFee:new Od.default(t.substring(4,8),16).toNumber(),Issuer:(0,XB.encodeAccountID)((0,zB.hexToBytes)(t.substring(8,48))),Taxon:qB(r,s),Sequence:s}}Ew.default=KB;var bs={},GB=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bs,"__esModule",{value:!0});bs.percentToQuality=bs.transferRateToDecimal=bs.qualityToDecimal=bs.decimalToQuality=bs.percentToTransferRate=bs.decimalToTransferRate=void 0;const ah=GB(ks),ln=et,oh=10,Ci="1000000000",YB="2000000000";function hk(t){if(!t.endsWith("%"))throw new ln.ValidationError(`Value ${t} must end with %`);const e=t.split("%").filter(r=>r!=="");if(e.length!==1)throw new ln.ValidationError(`Value ${t} contains too many % signs`);return new ah.default(e[0]).dividedBy("100").toString(oh)}function pk(t){const e=new ah.default(t).times(Ci).plus(Ci);if(e.isLessThan(Ci)||e.isGreaterThan(YB))throw new ln.ValidationError("Decimal value must be between 0 and 1.00.");const r=e.toString(oh);if(r===Ci)return 0;if(r==="NaN")throw new ln.ValidationError("Value is not a number");if(r.includes("."))throw new ln.ValidationError("Decimal exceeds maximum precision.");return Number(r)}bs.decimalToTransferRate=pk;function JB(t){return pk(hk(t))}bs.percentToTransferRate=JB;function fk(t){const r=new ah.default(t).times(Ci).toString(oh);if(r==="NaN")throw new ln.ValidationError("Value is not a number");if(r.includes("-"))throw new ln.ValidationError("Cannot have negative Quality");if(r===Ci)return 0;if(r.includes("."))throw new ln.ValidationError("Decimal exceeds maximum precision.");return Number(r)}bs.decimalToQuality=fk;function QB(t){if(!Number.isInteger(t))throw new ln.ValidationError("Quality must be an integer");if(t<0)throw new ln.ValidationError("Negative quality not allowed");return t===0?"1":new ah.default(t).dividedBy(Ci).toString(oh)}bs.qualityToDecimal=QB;function ZB(t){if(!Number.isInteger(t))throw new ln.ValidationError("Error decoding, transfer Rate must be an integer");if(t===0)return"0";const e=new ah.default(t).minus(Ci).dividedBy(Ci);if(e.isLessThan(0))throw new ln.ValidationError("Error decoding, negative transfer rate");return e.toString(oh)}bs.transferRateToDecimal=ZB;function e6(t){return fk(hk(t))}bs.percentToQuality=e6;var Tw={};Object.defineProperty(Tw,"__esModule",{value:!0});const t6=hn,r6=eo,s6=$i;function n6(t,e,r){const s=(0,t6.encodeForSigningClaim)({channel:t,amount:(0,s6.xrpToDrops)(e)});return(0,r6.sign)(s,r)}Tw.default=n6;var Rc={};Object.defineProperty(Rc,"__esModule",{value:!0});Rc.convertStringToHex=Rc.convertHexToString=void 0;const mk=At;function i6(t){return(0,mk.stringToHex)(t)}Rc.convertStringToHex=i6;function a6(t,e="utf8"){return(0,mk.hexToString)(t,e)}Rc.convertHexToString=a6;var ni={};Object.defineProperty(ni,"__esModule",{value:!0});ni.isoTimeToRippleTime=ni.rippleTimeToISOTime=ni.unixTimeToRippleTime=ni.rippleTimeToUnixTime=void 0;const gk=946684800;function xk(t){return(t+gk)*1e3}ni.rippleTimeToUnixTime=xk;function yk(t){return Math.round(t/1e3)-gk}ni.unixTimeToRippleTime=yk;function o6(t){return new Date(xk(t)).toISOString()}ni.rippleTimeToISOTime=o6;function l6(t){const e=typeof t=="string"?new Date(t):t;return yk(e.getTime())}ni.isoTimeToRippleTime=l6;var Cw={};Object.defineProperty(Cw,"__esModule",{value:!0});const c6=hn,d6=eo,u6=$i;function h6(t,e,r,s){const i=(0,c6.encodeForSigningClaim)({channel:t,amount:(0,u6.xrpToDrops)(e)});return(0,d6.verify)(i,r,s)}Cw.default=h6;(function(t){var e=Ce&&Ce.__importDefault||function(U){return U&&U.__esModule?U:{default:U}};Object.defineProperty(t,"__esModule",{value:!0}),t.getXChainClaimID=t.parseNFTokenID=t.getNFTokenID=t.encodeForSigningClaim=t.encodeForSigning=t.encodeForMultiSigning=t.decode=t.encode=t.decodeXAddress=t.encodeXAddress=t.decodeAccountPublic=t.encodeAccountPublic=t.decodeNodePublic=t.encodeNodePublic=t.decodeAccountID=t.encodeAccountID=t.decodeSeed=t.encodeSeed=t.isValidClassicAddress=t.isValidXAddress=t.xAddressToClassicAddress=t.classicAddressToXAddress=t.convertHexToString=t.convertStringToHex=t.verifyPaymentChannelClaim=t.verifyKeypairSignature=t.signPaymentChannelClaim=t.deriveXAddress=t.deriveAddress=t.deriveKeypair=t.hashes=t.isValidAddress=t.isValidSecret=t.qualityToDecimal=t.transferRateToDecimal=t.decimalToTransferRate=t.percentToTransferRate=t.decimalToQuality=t.percentToQuality=t.unixTimeToRippleTime=t.rippleTimeToUnixTime=t.isoTimeToRippleTime=t.rippleTimeToISOTime=t.hasNextPage=t.xrpToDrops=t.dropsToXrp=t.getBalanceChanges=void 0;const r=Cs;Object.defineProperty(t,"classicAddressToXAddress",{enumerable:!0,get:function(){return r.classicAddressToXAddress}}),Object.defineProperty(t,"decodeAccountID",{enumerable:!0,get:function(){return r.decodeAccountID}}),Object.defineProperty(t,"decodeAccountPublic",{enumerable:!0,get:function(){return r.decodeAccountPublic}}),Object.defineProperty(t,"decodeNodePublic",{enumerable:!0,get:function(){return r.decodeNodePublic}}),Object.defineProperty(t,"decodeSeed",{enumerable:!0,get:function(){return r.decodeSeed}}),Object.defineProperty(t,"decodeXAddress",{enumerable:!0,get:function(){return r.decodeXAddress}}),Object.defineProperty(t,"encodeAccountID",{enumerable:!0,get:function(){return r.encodeAccountID}}),Object.defineProperty(t,"encodeAccountPublic",{enumerable:!0,get:function(){return r.encodeAccountPublic}}),Object.defineProperty(t,"encodeNodePublic",{enumerable:!0,get:function(){return r.encodeNodePublic}}),Object.defineProperty(t,"encodeSeed",{enumerable:!0,get:function(){return r.encodeSeed}}),Object.defineProperty(t,"encodeXAddress",{enumerable:!0,get:function(){return r.encodeXAddress}}),Object.defineProperty(t,"isValidClassicAddress",{enumerable:!0,get:function(){return r.isValidClassicAddress}}),Object.defineProperty(t,"isValidXAddress",{enumerable:!0,get:function(){return r.isValidXAddress}}),Object.defineProperty(t,"xAddressToClassicAddress",{enumerable:!0,get:function(){return r.xAddressToClassicAddress}});const s=hn,i=eo;Object.defineProperty(t,"verifyKeypairSignature",{enumerable:!0,get:function(){return i.verify}});const a=ZC;Object.defineProperty(t,"deriveKeypair",{enumerable:!0,get:function(){return a.deriveKeypair}}),Object.defineProperty(t,"deriveAddress",{enumerable:!0,get:function(){return a.deriveAddress}}),Object.defineProperty(t,"deriveXAddress",{enumerable:!0,get:function(){return a.deriveXAddress}});const o=e(yw);t.getBalanceChanges=o.default;const l=e(vw);t.getNFTokenID=l.default;const c=e(bw);t.getXChainClaimID=c.default;const d=sk,u=e(Ew);t.parseNFTokenID=u.default;const h=bs;Object.defineProperty(t,"percentToTransferRate",{enumerable:!0,get:function(){return h.percentToTransferRate}}),Object.defineProperty(t,"decimalToTransferRate",{enumerable:!0,get:function(){return h.decimalToTransferRate}}),Object.defineProperty(t,"transferRateToDecimal",{enumerable:!0,get:function(){return h.transferRateToDecimal}}),Object.defineProperty(t,"percentToQuality",{enumerable:!0,get:function(){return h.percentToQuality}}),Object.defineProperty(t,"decimalToQuality",{enumerable:!0,get:function(){return h.decimalToQuality}}),Object.defineProperty(t,"qualityToDecimal",{enumerable:!0,get:function(){return h.qualityToDecimal}});const p=e(Tw);t.signPaymentChannelClaim=p.default;const f=Rc;Object.defineProperty(t,"convertHexToString",{enumerable:!0,get:function(){return f.convertHexToString}}),Object.defineProperty(t,"convertStringToHex",{enumerable:!0,get:function(){return f.convertStringToHex}});const m=ni;Object.defineProperty(t,"rippleTimeToISOTime",{enumerable:!0,get:function(){return m.rippleTimeToISOTime}}),Object.defineProperty(t,"isoTimeToRippleTime",{enumerable:!0,get:function(){return m.isoTimeToRippleTime}}),Object.defineProperty(t,"rippleTimeToUnixTime",{enumerable:!0,get:function(){return m.rippleTimeToUnixTime}}),Object.defineProperty(t,"unixTimeToRippleTime",{enumerable:!0,get:function(){return m.unixTimeToRippleTime}});const v=e(Cw);t.verifyPaymentChannelClaim=v.default;const x=$i;Object.defineProperty(t,"xrpToDrops",{enumerable:!0,get:function(){return x.xrpToDrops}}),Object.defineProperty(t,"dropsToXrp",{enumerable:!0,get:function(){return x.dropsToXrp}});function b(U){try{return(0,a.deriveKeypair)(U),!0}catch{return!1}}t.isValidSecret=b;function y(U){return(0,s.encode)(U)}t.encode=y;function g(U){return(0,s.encodeForSigning)(U)}t.encodeForSigning=g;function w(U){return(0,s.encodeForSigningClaim)(U)}t.encodeForSigningClaim=w;function S(U,q){return(0,s.encodeForMultisigning)(U,q)}t.encodeForMultiSigning=S;function _(U){return(0,s.decode)(U)}t.decode=_;function A(U){return(0,r.isValidXAddress)(U)||(0,r.isValidClassicAddress)(U)}t.isValidAddress=A;function B(U){return!!U.result.marker}t.hasNextPage=B;const Q={hashSignedTx:d.hashSignedTx,hashTx:d.hashTx,hashAccountRoot:d.hashAccountRoot,hashSignerListId:d.hashSignerListId,hashOfferId:d.hashOfferId,hashTrustline:d.hashTrustline,hashTxTree:d.hashTxTree,hashStateTree:d.hashStateTree,hashLedger:d.hashLedger,hashLedgerHeader:d.hashLedgerHeader,hashEscrow:d.hashEscrow,hashPaymentChannel:d.hashPaymentChannel};t.hashes=Q})(k0);var kw={},p6=Ce&&Ce.__awaiter||function(t,e,r,s){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})},f6=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(kw,"__esModule",{value:!0});const sx=f6(ks),m6=et,g6=6,x6=10;function y6(t,e){var r;return p6(this,void 0,void 0,function*(){const s=e??t.feeCushion,i=(yield t.request({command:"server_info"})).result.info,a=(r=i.validated_ledger)===null||r===void 0?void 0:r.base_fee_xrp;if(a==null)throw new m6.XrplError("getFeeXrp: Could not get base_fee_xrp from server_info");const o=new sx.default(a);i.load_factor==null&&(i.load_factor=1);let l=o.times(i.load_factor).times(s);return l=sx.default.min(l,t.maxFeeXRP),new sx.default(l.toFixed(g6)).toString(x6)})}kw.default=y6;var lh=Ce&&Ce.__awaiter||function(t,e,r,s){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})},vk=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vs,"__esModule",{value:!0});vs.checkAccountDeleteBlockers=vs.setLatestValidatedLedgerSequence=vs.calculateFeePerTransactionType=vs.setNextValidSequenceNumber=vs.setValidAddresses=vs.txNeedsNetworkID=void 0;const oa=vk(ks),MN=Cs,Aw=et,FN=k0,v6=vk(kw),b6=20,w6=1024,_6="1.11.0";function N6(t,e){if(t===e)return!0;const r=t.split("."),s=e.split("."),i=parseInt(r[0],10),a=parseInt(r[1],10),o=parseInt(s[0],10),l=parseInt(s[1],10);if(i!==o)return i<o;if(a!==l)return a<l;const c=r[2].split("-"),d=s[2].split("-"),u=parseInt(c[0],10),h=parseInt(d[0],10);return u!==h?u<h:c.length!==d.length?c.length>d.length:c.length===2?c[1][0].startsWith(d[1][0])?c[1].startsWith("b")?parseInt(c[1].slice(1),10)<parseInt(d[1].slice(1),10):parseInt(c[1].slice(2),10)<parseInt(d[1].slice(2),10):c[1]<d[1]:!1}function S6(t){return!!(t.networkID!==void 0&&t.networkID>w6&&t.buildVersion&&N6(_6,t.buildVersion))}vs.txNeedsNetworkID=S6;function j6(t){DN(t,"Account","SourceTag"),t.Destination!=null&&DN(t,"Destination","DestinationTag"),Jh(t,"Authorize"),Jh(t,"Unauthorize"),Jh(t,"Owner"),Jh(t,"RegularKey")}vs.setValidAddresses=j6;function DN(t,e,r){const{classicAccount:s,tag:i}=bk(t[e]);if(t[e]=s,i!=null&&i!==!1){if(t[r]&&t[r]!==i)throw new Aw.ValidationError(`The ${r}, if present, must match the tag of the ${e} X-address`);t[r]=i}}function bk(t,e){if((0,MN.isValidXAddress)(t)){const r=(0,MN.xAddressToClassicAddress)(t);if(e!=null&&r.tag!==e)throw new Aw.ValidationError("address includes a tag that does not match the tag specified in the transaction");return{classicAccount:r.classicAddress,tag:r.tag}}return{classicAccount:t,tag:e}}function Jh(t,e){const r=t[e];if(typeof r=="string"){const{classicAccount:s}=bk(r);t[e]=s}}function E6(t,e){return lh(this,void 0,void 0,function*(){const r={command:"account_info",account:e.Account,ledger_index:"current"},s=yield t.request(r);e.Sequence=s.result.account_data.Sequence})}vs.setNextValidSequenceNumber=E6;function T6(t){var e;return lh(this,void 0,void 0,function*(){const s=(e=(yield t.request({command:"server_state"})).result.state.validated_ledger)===null||e===void 0?void 0:e.reserve_inc;return s==null?Promise.reject(new Error("Could not fetch Owner Reserve.")):new oa.default(s)})}function C6(t,e,r=0){return lh(this,void 0,void 0,function*(){const s=yield(0,v6.default)(t),i=(0,FN.xrpToDrops)(s);let a=new oa.default(i);if(e.TransactionType==="EscrowFinish"&&e.Fulfillment!=null){const c=Math.ceil(e.Fulfillment.length/2);a=new oa.default(BN(i,33+c/16)).dp(0,oa.default.ROUND_CEIL)}(e.TransactionType==="AccountDelete"||e.TransactionType==="AMMCreate")&&(a=yield T6(t)),r>0&&(a=oa.default.sum(a,BN(i,1+r)));const o=(0,FN.xrpToDrops)(t.maxFeeXRP),l=e.TransactionType==="AccountDelete"?a:oa.default.min(a,o);e.Fee=l.dp(0,oa.default.ROUND_CEIL).toString(10)})}vs.calculateFeePerTransactionType=C6;function BN(t,e){return new oa.default(t).times(e).toString()}function k6(t,e){return lh(this,void 0,void 0,function*(){const r=yield t.getLedgerIndex();e.LastLedgerSequence=r+b6})}vs.setLatestValidatedLedgerSequence=k6;function A6(t,e){return lh(this,void 0,void 0,function*(){const r={command:"account_objects",account:e.Account,ledger_index:"validated",deletion_blockers_only:!0},s=yield t.request(r);return new Promise((i,a)=>{s.result.account_objects.length>0&&a(new Aw.XrplError(`Account ${e.Account} cannot be deleted; there are Escrows, PayChannels, RippleStates, or Checks associated with the account.`,s.result.account_objects)),i()})})}vs.checkAccountDeleteBlockers=A6;var $0={};Object.defineProperty($0,"__esModule",{value:!0});$0.formatBalances=void 0;function P6(t){return t.map(e=>({value:e.balance,currency:e.currency,issuer:e.account}))}$0.formatBalances=P6;var Pr={},ch={};Object.defineProperty(ch,"__esModule",{value:!0});ch.OfferFlags=void 0;var $N;(function(t){t[t.lsfPassive=65536]="lsfPassive",t[t.lsfSell=131072]="lsfSell"})($N||(ch.OfferFlags=$N={}));var R6=Ce&&Ce.__awaiter||function(t,e,r,s){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})},O6=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pr,"__esModule",{value:!0});Pr.sortAndLimitOffers=Pr.separateBuySellOrders=Pr.combineOrders=Pr.extractOffers=Pr.reverseRequest=Pr.requestAllOffers=Pr.createBookOffersRequest=Pr.validateOrderbookOptions=void 0;const I6=O6(ks),gd=et,L6=ch,M6=20;function F6(t){return t.sort((e,r)=>{var s,i;const a=(s=e.quality)!==null&&s!==void 0?s:0,o=(i=r.quality)!==null&&i!==void 0?i:0;return new I6.default(a).comparedTo(o)})}const D6=new Set(["limit","ledger_index","ledger_hash","taker"]);function B6(t){for(const e of Object.keys(t))if(!D6.has(e))throw new gd.ValidationError(`Unexpected option: ${e}`,t);if(t.limit&&typeof t.limit!="number")throw new gd.ValidationError("limit must be a number",t.limit);if(t.ledger_index&&!(typeof t.ledger_index=="number"||typeof t.ledger_index=="string"&&["validated","closed","current"].includes(t.ledger_index)))throw new gd.ValidationError('ledger_index must be a number or a string of "validated", "closed", or "current"',t.ledger_index);if(t.ledger_hash!==void 0&&t.ledger_hash!==null&&typeof t.ledger_hash!="string")throw new gd.ValidationError("ledger_hash must be a string",t.ledger_hash);if(t.taker!==void 0&&typeof t.taker!="string")throw new gd.ValidationError("taker must be a string",t.taker)}Pr.validateOrderbookOptions=B6;function $6(t,e,r){var s,i;return{command:"book_offers",taker_pays:t,taker_gets:e,ledger_index:(s=r.ledger_index)!==null&&s!==void 0?s:"validated",ledger_hash:r.ledger_hash===null?void 0:r.ledger_hash,limit:(i=r.limit)!==null&&i!==void 0?i:M6,taker:r.taker?r.taker:void 0}}Pr.createBookOffersRequest=$6;function U6(t,e){return R6(this,void 0,void 0,function*(){return(yield t.requestAll(e)).map(s=>s.result.offers)})}Pr.requestAllOffers=U6;function V6(t){return Object.assign(Object.assign({},t),{taker_pays:t.taker_gets,taker_gets:t.taker_pays})}Pr.reverseRequest=V6;function H6(t){return t.flatMap(e=>e)}Pr.extractOffers=H6;function z6(t,e){return[...t,...e]}Pr.combineOrders=z6;function X6(t){const e=[],r=[];return t.forEach(s=>{s.Flags&L6.OfferFlags.lsfSell?r.push(s):e.push(s)}),{buy:e,sell:r}}Pr.separateBuySellOrders=X6;function W6(t,e){return F6(t).slice(0,e)}Pr.sortAndLimitOffers=W6;var xl={},wk={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.HDKey=t.HARDENED_OFFSET=void 0;/*! scure-bip32 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const e=O0,r=el,s=Rn,i=xr,a=un,o=Ts,l=P0,c=Lt,d=m0,u=l.secp256k1.ProjectivePoint,h=(0,d.createBase58check)(s.sha256);function p(w){(0,a.abytes)(w);const S=w.length===0?"0":(0,o.bytesToHex)(w);return BigInt("0x"+S)}function f(w){if(typeof w!="bigint")throw new Error("bigint expected");return(0,o.hexToBytes)(w.toString(16).padStart(64,"0"))}const m=(0,o.utf8ToBytes)("Bitcoin seed"),v={private:76066276,public:76067358};t.HARDENED_OFFSET=2147483648;const x=w=>(0,r.ripemd160)((0,s.sha256)(w)),b=w=>(0,o.createView)(w).getUint32(0,!1),y=w=>{if(!Number.isSafeInteger(w)||w<0||w>2**32-1)throw new Error("invalid number, should be from 0 to 2**32-1, got "+w);const S=new Uint8Array(4);return(0,o.createView)(S).setUint32(0,w,!1),S};class g{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return b(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const S=this.privateKey;if(!S)throw new Error("No private key");return h.encode(this.serialize(this.versions.private,(0,o.concatBytes)(new Uint8Array([0]),S)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return h.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(S,_=v){if((0,a.abytes)(S),8*S.length<128||8*S.length>512)throw new Error("HDKey: seed length must be between 128 and 512 bits; 256 bits is advised, got "+S.length);const A=(0,e.hmac)(i.sha512,m,S);return new g({versions:_,chainCode:A.slice(32),privateKey:A.slice(0,32)})}static fromExtendedKey(S,_=v){const A=h.decode(S),B=(0,o.createView)(A),Q=B.getUint32(0,!1),U={versions:_,depth:A[4],parentFingerprint:B.getUint32(5,!1),index:B.getUint32(9,!1),chainCode:A.slice(13,45)},q=A.slice(45),de=q[0]===0;if(Q!==_[de?"private":"public"])throw new Error("Version mismatch");return de?new g({...U,privateKey:q.slice(1)}):new g({...U,publicKey:q})}static fromJSON(S){return g.fromExtendedKey(S.xpriv)}constructor(S){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!S||typeof S!="object")throw new Error("HDKey.constructor must not be called directly");if(this.versions=S.versions||v,this.depth=S.depth||0,this.chainCode=S.chainCode||null,this.index=S.index||0,this.parentFingerprint=S.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(S.publicKey&&S.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(S.privateKey){if(!l.secp256k1.utils.isValidPrivateKey(S.privateKey))throw new Error("Invalid private key");this.privKey=typeof S.privateKey=="bigint"?S.privateKey:p(S.privateKey),this.privKeyBytes=f(this.privKey),this.pubKey=l.secp256k1.getPublicKey(S.privateKey,!0)}else if(S.publicKey)this.pubKey=u.fromHex(S.publicKey).toRawBytes(!0);else throw new Error("HDKey: no public or private key provided");this.pubHash=x(this.pubKey)}derive(S){if(!/^[mM]'?/.test(S))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(S))return this;const _=S.replace(/^[mM]'?\//,"").split("/");let A=this;for(const B of _){const Q=/^(\d+)('?)$/.exec(B),U=Q&&Q[1];if(!Q||Q.length!==3||typeof U!="string")throw new Error("invalid child index: "+B);let q=+U;if(!Number.isSafeInteger(q)||q>=t.HARDENED_OFFSET)throw new Error("Invalid index");Q[2]==="'"&&(q+=t.HARDENED_OFFSET),A=A.deriveChild(q)}return A}deriveChild(S){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let _=y(S);if(S>=t.HARDENED_OFFSET){const q=this.privateKey;if(!q)throw new Error("Could not derive hardened child key");_=(0,o.concatBytes)(new Uint8Array([0]),q,_)}else _=(0,o.concatBytes)(this.pubKey,_);const A=(0,e.hmac)(i.sha512,this.chainCode,_),B=p(A.slice(0,32)),Q=A.slice(32);if(!l.secp256k1.utils.isValidPrivateKey(B))throw new Error("Tweak bigger than curve order");const U={versions:this.versions,chainCode:Q,depth:this.depth+1,parentFingerprint:this.fingerprint,index:S};try{if(this.privateKey){const q=(0,c.mod)(this.privKey+B,l.secp256k1.CURVE.n);if(!l.secp256k1.utils.isValidPrivateKey(q))throw new Error("The tweak was out of range or the resulted private key is invalid");U.privateKey=q}else{const q=u.fromHex(this.pubKey).add(u.fromPrivateKey(B));if(q.equals(u.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");U.publicKey=q.toRawBytes(!0)}return new g(U)}catch{return this.deriveChild(S+1)}}sign(S){if(!this.privateKey)throw new Error("No privateKey set!");return(0,a.abytes)(S,32),l.secp256k1.sign(S,this.privKey).toCompactRawBytes()}verify(S,_){if((0,a.abytes)(S,32),(0,a.abytes)(_,64),!this.publicKey)throw new Error("No publicKey set!");let A;try{A=l.secp256k1.Signature.fromCompact(_)}catch{return!1}return l.secp256k1.verify(A,S,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(S,_){if(!this.chainCode)throw new Error("No chainCode set");return(0,a.abytes)(_,33),(0,o.concatBytes)(y(S),new Uint8Array([this.depth]),y(this.parentFingerprint),y(this.index),this.chainCode,_)}}t.HDKey=g})(wk);var so={},U0={};Object.defineProperty(U0,"__esModule",{value:!0});U0.pbkdf2=K6;U0.pbkdf2Async=G6;const Qh=un,q6=O0,yc=Ts;function _k(t,e,r,s){(0,Qh.ahash)(t);const i=(0,yc.checkOpts)({dkLen:32,asyncTick:10},s),{c:a,dkLen:o,asyncTick:l}=i;if((0,Qh.anumber)(a),(0,Qh.anumber)(o),(0,Qh.anumber)(l),a<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=(0,yc.toBytes)(e),d=(0,yc.toBytes)(r),u=new Uint8Array(o),h=q6.hmac.create(t,c),p=h._cloneInto().update(d);return{c:a,dkLen:o,asyncTick:l,DK:u,PRF:h,PRFSalt:p}}function Nk(t,e,r,s,i){return t.destroy(),e.destroy(),s&&s.destroy(),i.fill(0),r}function K6(t,e,r,s){const{c:i,dkLen:a,DK:o,PRF:l,PRFSalt:c}=_k(t,e,r,s);let d;const u=new Uint8Array(4),h=(0,yc.createView)(u),p=new Uint8Array(l.outputLen);for(let f=1,m=0;m<a;f++,m+=l.outputLen){const v=o.subarray(m,m+l.outputLen);h.setInt32(0,f,!1),(d=c._cloneInto(d)).update(u).digestInto(p),v.set(p.subarray(0,v.length));for(let x=1;x<i;x++){l._cloneInto(d).update(p).digestInto(p);for(let b=0;b<v.length;b++)v[b]^=p[b]}}return Nk(l,c,o,d,p)}async function G6(t,e,r,s){const{c:i,dkLen:a,asyncTick:o,DK:l,PRF:c,PRFSalt:d}=_k(t,e,r,s);let u;const h=new Uint8Array(4),p=(0,yc.createView)(h),f=new Uint8Array(c.outputLen);for(let m=1,v=0;v<a;m++,v+=c.outputLen){const x=l.subarray(v,v+c.outputLen);p.setInt32(0,m,!1),(u=d._cloneInto(u)).update(h).digestInto(f),x.set(f.subarray(0,x.length)),await(0,yc.asyncLoop)(i-1,o,()=>{c._cloneInto(u).update(f).digestInto(f);for(let b=0;b<x.length;b++)x[b]^=f[b]})}return Nk(c,d,l,u,f)}Object.defineProperty(so,"__esModule",{value:!0});so.generateMnemonic=Z6;so.mnemonicToEntropy=Ak;so.entropyToMnemonic=Pk;so.validateMnemonic=t$;so.mnemonicToSeed=r$;so.mnemonicToSeedSync=s$;/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const Sk=un,jk=U0,Y6=Rn,Ek=xr,J6=Ts,Zh=m0,Q6=t=>t[0]==="あいこくしん";function Tk(t){if(typeof t!="string")throw new TypeError("invalid mnemonic type: "+typeof t);return t.normalize("NFKD")}function Pw(t){const e=Tk(t),r=e.split(" ");if(![12,15,18,21,24].includes(r.length))throw new Error("Invalid mnemonic");return{nfkd:e,words:r}}function Ck(t){(0,Sk.abytes)(t,16,20,24,28,32)}function Z6(t,e=128){if((0,Sk.anumber)(e),e%32!==0||e>256)throw new TypeError("Invalid entropy");return Pk((0,J6.randomBytes)(e/8),t)}const e$=t=>{const e=8-t.length/4;return new Uint8Array([(0,Y6.sha256)(t)[0]>>e<<e])};function kk(t){if(!Array.isArray(t)||t.length!==2048||typeof t[0]!="string")throw new Error("Wordlist: expected array of 2048 strings");return t.forEach(e=>{if(typeof e!="string")throw new Error("wordlist: non-string element: "+e)}),Zh.utils.chain(Zh.utils.checksum(1,e$),Zh.utils.radix2(11,!0),Zh.utils.alphabet(t))}function Ak(t,e){const{words:r}=Pw(t),s=kk(e).decode(r);return Ck(s),s}function Pk(t,e){return Ck(t),kk(e).encode(t).join(Q6(e)?"　":" ")}function t$(t,e){try{Ak(t,e)}catch{return!1}return!0}const Rk=t=>Tk("mnemonic"+t);function r$(t,e=""){return(0,jk.pbkdf2Async)(Ek.sha512,Pw(t).nfkd,Rk(e),{c:2048,dkLen:64})}function s$(t,e=""){return(0,jk.pbkdf2)(Ek.sha512,Pw(t).nfkd,Rk(e),{c:2048,dkLen:64})}var V0={};Object.defineProperty(V0,"__esModule",{value:!0});V0.wordlist=void 0;V0.wordlist=`abandon
ability
able
about
above
absent
absorb
abstract
absurd
abuse
access
accident
account
accuse
achieve
acid
acoustic
acquire
across
act
action
actor
actress
actual
adapt
add
addict
address
adjust
admit
adult
advance
advice
aerobic
affair
afford
afraid
again
age
agent
agree
ahead
aim
air
airport
aisle
alarm
album
alcohol
alert
alien
all
alley
allow
almost
alone
alpha
already
also
alter
always
amateur
amazing
among
amount
amused
analyst
anchor
ancient
anger
angle
angry
animal
ankle
announce
annual
another
answer
antenna
antique
anxiety
any
apart
apology
appear
apple
approve
april
arch
arctic
area
arena
argue
arm
armed
armor
army
around
arrange
arrest
arrive
arrow
art
artefact
artist
artwork
ask
aspect
assault
asset
assist
assume
asthma
athlete
atom
attack
attend
attitude
attract
auction
audit
august
aunt
author
auto
autumn
average
avocado
avoid
awake
aware
away
awesome
awful
awkward
axis
baby
bachelor
bacon
badge
bag
balance
balcony
ball
bamboo
banana
banner
bar
barely
bargain
barrel
base
basic
basket
battle
beach
bean
beauty
because
become
beef
before
begin
behave
behind
believe
below
belt
bench
benefit
best
betray
better
between
beyond
bicycle
bid
bike
bind
biology
bird
birth
bitter
black
blade
blame
blanket
blast
bleak
bless
blind
blood
blossom
blouse
blue
blur
blush
board
boat
body
boil
bomb
bone
bonus
book
boost
border
boring
borrow
boss
bottom
bounce
box
boy
bracket
brain
brand
brass
brave
bread
breeze
brick
bridge
brief
bright
bring
brisk
broccoli
broken
bronze
broom
brother
brown
brush
bubble
buddy
budget
buffalo
build
bulb
bulk
bullet
bundle
bunker
burden
burger
burst
bus
business
busy
butter
buyer
buzz
cabbage
cabin
cable
cactus
cage
cake
call
calm
camera
camp
can
canal
cancel
candy
cannon
canoe
canvas
canyon
capable
capital
captain
car
carbon
card
cargo
carpet
carry
cart
case
cash
casino
castle
casual
cat
catalog
catch
category
cattle
caught
cause
caution
cave
ceiling
celery
cement
census
century
cereal
certain
chair
chalk
champion
change
chaos
chapter
charge
chase
chat
cheap
check
cheese
chef
cherry
chest
chicken
chief
child
chimney
choice
choose
chronic
chuckle
chunk
churn
cigar
cinnamon
circle
citizen
city
civil
claim
clap
clarify
claw
clay
clean
clerk
clever
click
client
cliff
climb
clinic
clip
clock
clog
close
cloth
cloud
clown
club
clump
cluster
clutch
coach
coast
coconut
code
coffee
coil
coin
collect
color
column
combine
come
comfort
comic
common
company
concert
conduct
confirm
congress
connect
consider
control
convince
cook
cool
copper
copy
coral
core
corn
correct
cost
cotton
couch
country
couple
course
cousin
cover
coyote
crack
cradle
craft
cram
crane
crash
crater
crawl
crazy
cream
credit
creek
crew
cricket
crime
crisp
critic
crop
cross
crouch
crowd
crucial
cruel
cruise
crumble
crunch
crush
cry
crystal
cube
culture
cup
cupboard
curious
current
curtain
curve
cushion
custom
cute
cycle
dad
damage
damp
dance
danger
daring
dash
daughter
dawn
day
deal
debate
debris
decade
december
decide
decline
decorate
decrease
deer
defense
define
defy
degree
delay
deliver
demand
demise
denial
dentist
deny
depart
depend
deposit
depth
deputy
derive
describe
desert
design
desk
despair
destroy
detail
detect
develop
device
devote
diagram
dial
diamond
diary
dice
diesel
diet
differ
digital
dignity
dilemma
dinner
dinosaur
direct
dirt
disagree
discover
disease
dish
dismiss
disorder
display
distance
divert
divide
divorce
dizzy
doctor
document
dog
doll
dolphin
domain
donate
donkey
donor
door
dose
double
dove
draft
dragon
drama
drastic
draw
dream
dress
drift
drill
drink
drip
drive
drop
drum
dry
duck
dumb
dune
during
dust
dutch
duty
dwarf
dynamic
eager
eagle
early
earn
earth
easily
east
easy
echo
ecology
economy
edge
edit
educate
effort
egg
eight
either
elbow
elder
electric
elegant
element
elephant
elevator
elite
else
embark
embody
embrace
emerge
emotion
employ
empower
empty
enable
enact
end
endless
endorse
enemy
energy
enforce
engage
engine
enhance
enjoy
enlist
enough
enrich
enroll
ensure
enter
entire
entry
envelope
episode
equal
equip
era
erase
erode
erosion
error
erupt
escape
essay
essence
estate
eternal
ethics
evidence
evil
evoke
evolve
exact
example
excess
exchange
excite
exclude
excuse
execute
exercise
exhaust
exhibit
exile
exist
exit
exotic
expand
expect
expire
explain
expose
express
extend
extra
eye
eyebrow
fabric
face
faculty
fade
faint
faith
fall
false
fame
family
famous
fan
fancy
fantasy
farm
fashion
fat
fatal
father
fatigue
fault
favorite
feature
february
federal
fee
feed
feel
female
fence
festival
fetch
fever
few
fiber
fiction
field
figure
file
film
filter
final
find
fine
finger
finish
fire
firm
first
fiscal
fish
fit
fitness
fix
flag
flame
flash
flat
flavor
flee
flight
flip
float
flock
floor
flower
fluid
flush
fly
foam
focus
fog
foil
fold
follow
food
foot
force
forest
forget
fork
fortune
forum
forward
fossil
foster
found
fox
fragile
frame
frequent
fresh
friend
fringe
frog
front
frost
frown
frozen
fruit
fuel
fun
funny
furnace
fury
future
gadget
gain
galaxy
gallery
game
gap
garage
garbage
garden
garlic
garment
gas
gasp
gate
gather
gauge
gaze
general
genius
genre
gentle
genuine
gesture
ghost
giant
gift
giggle
ginger
giraffe
girl
give
glad
glance
glare
glass
glide
glimpse
globe
gloom
glory
glove
glow
glue
goat
goddess
gold
good
goose
gorilla
gospel
gossip
govern
gown
grab
grace
grain
grant
grape
grass
gravity
great
green
grid
grief
grit
grocery
group
grow
grunt
guard
guess
guide
guilt
guitar
gun
gym
habit
hair
half
hammer
hamster
hand
happy
harbor
hard
harsh
harvest
hat
have
hawk
hazard
head
health
heart
heavy
hedgehog
height
hello
helmet
help
hen
hero
hidden
high
hill
hint
hip
hire
history
hobby
hockey
hold
hole
holiday
hollow
home
honey
hood
hope
horn
horror
horse
hospital
host
hotel
hour
hover
hub
huge
human
humble
humor
hundred
hungry
hunt
hurdle
hurry
hurt
husband
hybrid
ice
icon
idea
identify
idle
ignore
ill
illegal
illness
image
imitate
immense
immune
impact
impose
improve
impulse
inch
include
income
increase
index
indicate
indoor
industry
infant
inflict
inform
inhale
inherit
initial
inject
injury
inmate
inner
innocent
input
inquiry
insane
insect
inside
inspire
install
intact
interest
into
invest
invite
involve
iron
island
isolate
issue
item
ivory
jacket
jaguar
jar
jazz
jealous
jeans
jelly
jewel
job
join
joke
journey
joy
judge
juice
jump
jungle
junior
junk
just
kangaroo
keen
keep
ketchup
key
kick
kid
kidney
kind
kingdom
kiss
kit
kitchen
kite
kitten
kiwi
knee
knife
knock
know
lab
label
labor
ladder
lady
lake
lamp
language
laptop
large
later
latin
laugh
laundry
lava
law
lawn
lawsuit
layer
lazy
leader
leaf
learn
leave
lecture
left
leg
legal
legend
leisure
lemon
lend
length
lens
leopard
lesson
letter
level
liar
liberty
library
license
life
lift
light
like
limb
limit
link
lion
liquid
list
little
live
lizard
load
loan
lobster
local
lock
logic
lonely
long
loop
lottery
loud
lounge
love
loyal
lucky
luggage
lumber
lunar
lunch
luxury
lyrics
machine
mad
magic
magnet
maid
mail
main
major
make
mammal
man
manage
mandate
mango
mansion
manual
maple
marble
march
margin
marine
market
marriage
mask
mass
master
match
material
math
matrix
matter
maximum
maze
meadow
mean
measure
meat
mechanic
medal
media
melody
melt
member
memory
mention
menu
mercy
merge
merit
merry
mesh
message
metal
method
middle
midnight
milk
million
mimic
mind
minimum
minor
minute
miracle
mirror
misery
miss
mistake
mix
mixed
mixture
mobile
model
modify
mom
moment
monitor
monkey
monster
month
moon
moral
more
morning
mosquito
mother
motion
motor
mountain
mouse
move
movie
much
muffin
mule
multiply
muscle
museum
mushroom
music
must
mutual
myself
mystery
myth
naive
name
napkin
narrow
nasty
nation
nature
near
neck
need
negative
neglect
neither
nephew
nerve
nest
net
network
neutral
never
news
next
nice
night
noble
noise
nominee
noodle
normal
north
nose
notable
note
nothing
notice
novel
now
nuclear
number
nurse
nut
oak
obey
object
oblige
obscure
observe
obtain
obvious
occur
ocean
october
odor
off
offer
office
often
oil
okay
old
olive
olympic
omit
once
one
onion
online
only
open
opera
opinion
oppose
option
orange
orbit
orchard
order
ordinary
organ
orient
original
orphan
ostrich
other
outdoor
outer
output
outside
oval
oven
over
own
owner
oxygen
oyster
ozone
pact
paddle
page
pair
palace
palm
panda
panel
panic
panther
paper
parade
parent
park
parrot
party
pass
patch
path
patient
patrol
pattern
pause
pave
payment
peace
peanut
pear
peasant
pelican
pen
penalty
pencil
people
pepper
perfect
permit
person
pet
phone
photo
phrase
physical
piano
picnic
picture
piece
pig
pigeon
pill
pilot
pink
pioneer
pipe
pistol
pitch
pizza
place
planet
plastic
plate
play
please
pledge
pluck
plug
plunge
poem
poet
point
polar
pole
police
pond
pony
pool
popular
portion
position
possible
post
potato
pottery
poverty
powder
power
practice
praise
predict
prefer
prepare
present
pretty
prevent
price
pride
primary
print
priority
prison
private
prize
problem
process
produce
profit
program
project
promote
proof
property
prosper
protect
proud
provide
public
pudding
pull
pulp
pulse
pumpkin
punch
pupil
puppy
purchase
purity
purpose
purse
push
put
puzzle
pyramid
quality
quantum
quarter
question
quick
quit
quiz
quote
rabbit
raccoon
race
rack
radar
radio
rail
rain
raise
rally
ramp
ranch
random
range
rapid
rare
rate
rather
raven
raw
razor
ready
real
reason
rebel
rebuild
recall
receive
recipe
record
recycle
reduce
reflect
reform
refuse
region
regret
regular
reject
relax
release
relief
rely
remain
remember
remind
remove
render
renew
rent
reopen
repair
repeat
replace
report
require
rescue
resemble
resist
resource
response
result
retire
retreat
return
reunion
reveal
review
reward
rhythm
rib
ribbon
rice
rich
ride
ridge
rifle
right
rigid
ring
riot
ripple
risk
ritual
rival
river
road
roast
robot
robust
rocket
romance
roof
rookie
room
rose
rotate
rough
round
route
royal
rubber
rude
rug
rule
run
runway
rural
sad
saddle
sadness
safe
sail
salad
salmon
salon
salt
salute
same
sample
sand
satisfy
satoshi
sauce
sausage
save
say
scale
scan
scare
scatter
scene
scheme
school
science
scissors
scorpion
scout
scrap
screen
script
scrub
sea
search
season
seat
second
secret
section
security
seed
seek
segment
select
sell
seminar
senior
sense
sentence
series
service
session
settle
setup
seven
shadow
shaft
shallow
share
shed
shell
sheriff
shield
shift
shine
ship
shiver
shock
shoe
shoot
shop
short
shoulder
shove
shrimp
shrug
shuffle
shy
sibling
sick
side
siege
sight
sign
silent
silk
silly
silver
similar
simple
since
sing
siren
sister
situate
six
size
skate
sketch
ski
skill
skin
skirt
skull
slab
slam
sleep
slender
slice
slide
slight
slim
slogan
slot
slow
slush
small
smart
smile
smoke
smooth
snack
snake
snap
sniff
snow
soap
soccer
social
sock
soda
soft
solar
soldier
solid
solution
solve
someone
song
soon
sorry
sort
soul
sound
soup
source
south
space
spare
spatial
spawn
speak
special
speed
spell
spend
sphere
spice
spider
spike
spin
spirit
split
spoil
sponsor
spoon
sport
spot
spray
spread
spring
spy
square
squeeze
squirrel
stable
stadium
staff
stage
stairs
stamp
stand
start
state
stay
steak
steel
stem
step
stereo
stick
still
sting
stock
stomach
stone
stool
story
stove
strategy
street
strike
strong
struggle
student
stuff
stumble
style
subject
submit
subway
success
such
sudden
suffer
sugar
suggest
suit
summer
sun
sunny
sunset
super
supply
supreme
sure
surface
surge
surprise
surround
survey
suspect
sustain
swallow
swamp
swap
swarm
swear
sweet
swift
swim
swing
switch
sword
symbol
symptom
syrup
system
table
tackle
tag
tail
talent
talk
tank
tape
target
task
taste
tattoo
taxi
teach
team
tell
ten
tenant
tennis
tent
term
test
text
thank
that
theme
then
theory
there
they
thing
this
thought
three
thrive
throw
thumb
thunder
ticket
tide
tiger
tilt
timber
time
tiny
tip
tired
tissue
title
toast
tobacco
today
toddler
toe
together
toilet
token
tomato
tomorrow
tone
tongue
tonight
tool
tooth
top
topic
topple
torch
tornado
tortoise
toss
total
tourist
toward
tower
town
toy
track
trade
traffic
tragic
train
transfer
trap
trash
travel
tray
treat
tree
trend
trial
tribe
trick
trigger
trim
trip
trophy
trouble
truck
true
truly
trumpet
trust
truth
try
tube
tuition
tumble
tuna
tunnel
turkey
turn
turtle
twelve
twenty
twice
twin
twist
two
type
typical
ugly
umbrella
unable
unaware
uncle
uncover
under
undo
unfair
unfold
unhappy
uniform
unique
unit
universe
unknown
unlock
until
unusual
unveil
update
upgrade
uphold
upon
upper
upset
urban
urge
usage
use
used
useful
useless
usual
utility
vacant
vacuum
vague
valid
valley
valve
van
vanish
vapor
various
vast
vault
vehicle
velvet
vendor
venture
venue
verb
verify
version
very
vessel
veteran
viable
vibrant
vicious
victory
video
view
village
vintage
violin
virtual
virus
visa
visit
visual
vital
vivid
vocal
voice
void
volcano
volume
vote
voyage
wage
wagon
wait
walk
wall
walnut
want
warfare
warm
warrior
wash
wasp
waste
water
wave
way
wealth
weapon
wear
weasel
weather
web
wedding
weekend
weird
welcome
west
wet
whale
what
wheat
wheel
when
where
whip
whisper
wide
width
wife
wild
will
win
window
wine
wing
wink
winner
winter
wire
wisdom
wise
wish
witness
wolf
woman
wonder
wood
wool
word
work
world
worry
worth
wrap
wreck
wrestle
wrist
write
wrong
yard
year
yellow
you
young
youth
zebra
zero
zone
zoo`.split(`
`);var dh={};Object.defineProperty(dh,"__esModule",{value:!0});var xv;(function(t){t.ed25519="ed25519",t.secp256k1="ecdsa-secp256k1"})(xv||(xv={}));dh.default=xv;var uh={},H0={},z0={};Object.defineProperty(z0,"__esModule",{value:!0});z0.validateAccountDelete=void 0;const Rl=Ze;function n$(t){(0,Rl.validateBaseTransaction)(t),(0,Rl.validateRequiredField)(t,"Destination",Rl.isAccount),(0,Rl.validateOptionalField)(t,"DestinationTag",Rl.isNumber),(0,Rl.validateCredentialsList)(t.CredentialIDs,t.TransactionType,!0)}z0.validateAccountDelete=n$;var X0={};Object.defineProperty(X0,"__esModule",{value:!0});X0.validateAMMBid=void 0;const Zs=et,xd=Ze,UN=4;function i$(t){if((0,xd.validateBaseTransaction)(t),t.Asset==null)throw new Zs.ValidationError("AMMBid: missing field Asset");if(!(0,xd.isCurrency)(t.Asset))throw new Zs.ValidationError("AMMBid: Asset must be a Currency");if(t.Asset2==null)throw new Zs.ValidationError("AMMBid: missing field Asset2");if(!(0,xd.isCurrency)(t.Asset2))throw new Zs.ValidationError("AMMBid: Asset2 must be a Currency");if(t.BidMin!=null&&!(0,xd.isAmount)(t.BidMin))throw new Zs.ValidationError("AMMBid: BidMin must be an Amount");if(t.BidMax!=null&&!(0,xd.isAmount)(t.BidMax))throw new Zs.ValidationError("AMMBid: BidMax must be an Amount");if(t.AuthAccounts!=null){if(!Array.isArray(t.AuthAccounts))throw new Zs.ValidationError("AMMBid: AuthAccounts must be an AuthAccount array");if(t.AuthAccounts.length>UN)throw new Zs.ValidationError(`AMMBid: AuthAccounts length must not be greater than ${UN}`);a$(t.Account,t.AuthAccounts)}}X0.validateAMMBid=i$;function a$(t,e){for(const r of e){if(r.AuthAccount==null||typeof r.AuthAccount!="object")throw new Zs.ValidationError("AMMBid: invalid AuthAccounts");if(r.AuthAccount.Account==null)throw new Zs.ValidationError("AMMBid: invalid AuthAccounts");if(typeof r.AuthAccount.Account!="string")throw new Zs.ValidationError("AMMBid: invalid AuthAccounts");if(r.AuthAccount.Account===t)throw new Zs.ValidationError("AMMBid: AuthAccounts must not include sender's address")}return!0}var Rw={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateAMMCreate=t.AMM_MAX_TRADING_FEE=void 0;const e=et,r=Ze;t.AMM_MAX_TRADING_FEE=1e3;function s(i){if((0,r.validateBaseTransaction)(i),i.Amount==null)throw new e.ValidationError("AMMCreate: missing field Amount");if(!(0,r.isAmount)(i.Amount))throw new e.ValidationError("AMMCreate: Amount must be an Amount");if(i.Amount2==null)throw new e.ValidationError("AMMCreate: missing field Amount2");if(!(0,r.isAmount)(i.Amount2))throw new e.ValidationError("AMMCreate: Amount2 must be an Amount");if(i.TradingFee==null)throw new e.ValidationError("AMMCreate: missing field TradingFee");if(typeof i.TradingFee!="number")throw new e.ValidationError("AMMCreate: TradingFee must be a number");if(i.TradingFee<0||i.TradingFee>t.AMM_MAX_TRADING_FEE)throw new e.ValidationError(`AMMCreate: TradingFee must be between 0 and ${t.AMM_MAX_TRADING_FEE}`)}t.validateAMMCreate=s})(Rw);var W0={};Object.defineProperty(W0,"__esModule",{value:!0});W0.validateAMMDelete=void 0;const ep=et,nx=Ze;function o$(t){if((0,nx.validateBaseTransaction)(t),t.Asset==null)throw new ep.ValidationError("AMMDelete: missing field Asset");if(!(0,nx.isCurrency)(t.Asset))throw new ep.ValidationError("AMMDelete: Asset must be a Currency");if(t.Asset2==null)throw new ep.ValidationError("AMMDelete: missing field Asset2");if(!(0,nx.isCurrency)(t.Asset2))throw new ep.ValidationError("AMMDelete: Asset2 must be a Currency")}W0.validateAMMDelete=o$;var q0={};Object.defineProperty(q0,"__esModule",{value:!0});q0.validateAMMVote=void 0;const uo=et,VN=Rw,ix=Ze;function l$(t){if((0,ix.validateBaseTransaction)(t),t.Asset==null)throw new uo.ValidationError("AMMVote: missing field Asset");if(!(0,ix.isCurrency)(t.Asset))throw new uo.ValidationError("AMMVote: Asset must be a Currency");if(t.Asset2==null)throw new uo.ValidationError("AMMVote: missing field Asset2");if(!(0,ix.isCurrency)(t.Asset2))throw new uo.ValidationError("AMMVote: Asset2 must be a Currency");if(t.TradingFee==null)throw new uo.ValidationError("AMMVote: missing field TradingFee");if(typeof t.TradingFee!="number")throw new uo.ValidationError("AMMVote: TradingFee must be a number");if(t.TradingFee<0||t.TradingFee>VN.AMM_MAX_TRADING_FEE)throw new uo.ValidationError(`AMMVote: TradingFee must be between 0 and ${VN.AMM_MAX_TRADING_FEE}`)}q0.validateAMMVote=l$;var K0={};Object.defineProperty(K0,"__esModule",{value:!0});K0.validateCheckCancel=void 0;const c$=et,d$=Ze;function u$(t){if((0,d$.validateBaseTransaction)(t),t.CheckID!==void 0&&typeof t.CheckID!="string")throw new c$.ValidationError("CheckCancel: invalid CheckID")}K0.validateCheckCancel=u$;var G0={};Object.defineProperty(G0,"__esModule",{value:!0});G0.validateCheckCash=void 0;const yd=et,ax=Ze;function h$(t){if((0,ax.validateBaseTransaction)(t),t.Amount==null&&t.DeliverMin==null)throw new yd.ValidationError("CheckCash: must have either Amount or DeliverMin");if(t.Amount!=null&&t.DeliverMin!=null)throw new yd.ValidationError("CheckCash: cannot have both Amount and DeliverMin");if(t.Amount!=null&&t.Amount!==void 0&&!(0,ax.isAmount)(t.Amount))throw new yd.ValidationError("CheckCash: invalid Amount");if(t.DeliverMin!=null&&t.DeliverMin!==void 0&&!(0,ax.isAmount)(t.DeliverMin))throw new yd.ValidationError("CheckCash: invalid DeliverMin");if(t.CheckID!==void 0&&typeof t.CheckID!="string")throw new yd.ValidationError("CheckCash: invalid CheckID")}G0.validateCheckCash=h$;var Y0={};Object.defineProperty(Y0,"__esModule",{value:!0});Y0.validateCheckCreate=void 0;const tp=et,Ol=Ze;function p$(t){if((0,Ol.validateBaseTransaction)(t),t.SendMax===void 0)throw new tp.ValidationError("CheckCreate: missing field SendMax");if((0,Ol.validateRequiredField)(t,"Destination",Ol.isAccount),(0,Ol.validateOptionalField)(t,"DestinationTag",Ol.isNumber),typeof t.SendMax!="string"&&!(0,Ol.isIssuedCurrency)(t.SendMax))throw new tp.ValidationError("CheckCreate: invalid SendMax");if(t.Expiration!==void 0&&typeof t.Expiration!="number")throw new tp.ValidationError("CheckCreate: invalid Expiration");if(t.InvoiceID!==void 0&&typeof t.InvoiceID!="string")throw new tp.ValidationError("CheckCreate: invalid InvoiceID")}Y0.validateCheckCreate=p$;var J0={};Object.defineProperty(J0,"__esModule",{value:!0});J0.validateClawback=void 0;const Il=et,gi=Ze;function f$(t){if((0,gi.validateBaseTransaction)(t),(0,gi.validateOptionalField)(t,"Holder",gi.isAccount),t.Amount==null)throw new Il.ValidationError("Clawback: missing field Amount");if(!(0,gi.isIssuedCurrency)(t.Amount)&&!(0,gi.isMPTAmount)(t.Amount))throw new Il.ValidationError("Clawback: invalid Amount");if((0,gi.isIssuedCurrency)(t.Amount)&&t.Account===t.Amount.issuer)throw new Il.ValidationError("Clawback: invalid holder Account");if((0,gi.isMPTAmount)(t.Amount)&&t.Account===t.Holder)throw new Il.ValidationError("Clawback: invalid holder Account");if((0,gi.isIssuedCurrency)(t.Amount)&&t.Holder)throw new Il.ValidationError("Clawback: cannot have Holder for currency");if((0,gi.isMPTAmount)(t.Amount)&&!t.Holder)throw new Il.ValidationError("Clawback: missing Holder")}J0.validateClawback=f$;var Q0={};Object.defineProperty(Q0,"__esModule",{value:!0});Q0.validateCredentialAccept=void 0;const Ll=Ze;function m$(t){(0,Ll.validateBaseTransaction)(t),(0,Ll.validateRequiredField)(t,"Account",Ll.isString),(0,Ll.validateRequiredField)(t,"Issuer",Ll.isString),(0,Ll.validateCredentialType)(t)}Q0.validateCredentialAccept=m$;var Z0={};Object.defineProperty(Z0,"__esModule",{value:!0});Z0.validateCredentialCreate=void 0;const g$=At,rp=et,Ji=Ze,HN=256;function x$(t){(0,Ji.validateBaseTransaction)(t),(0,Ji.validateRequiredField)(t,"Account",Ji.isString),(0,Ji.validateRequiredField)(t,"Subject",Ji.isString),(0,Ji.validateCredentialType)(t),(0,Ji.validateOptionalField)(t,"Expiration",Ji.isNumber),y$(t.URI)}Z0.validateCredentialCreate=x$;function y$(t){if(t!==void 0){if(typeof t!="string")throw new rp.ValidationError("CredentialCreate: invalid field URI");if(t.length===0)throw new rp.ValidationError("CredentialCreate: URI cannot be an empty string");if(t.length>HN)throw new rp.ValidationError(`CredentialCreate: URI length must be <= ${HN}`);if(!g$.HEX_REGEX.test(t))throw new rp.ValidationError("CredentialCreate: URI must be encoded in hex")}}var em={};Object.defineProperty(em,"__esModule",{value:!0});em.validateCredentialDelete=void 0;const v$=et,Qi=Ze;function b$(t){if((0,Qi.validateBaseTransaction)(t),!t.Subject&&!t.Issuer)throw new v$.ValidationError("CredentialDelete: either `Issuer` or `Subject` must be provided");(0,Qi.validateRequiredField)(t,"Account",Qi.isString),(0,Qi.validateCredentialType)(t),(0,Qi.validateOptionalField)(t,"Subject",Qi.isString),(0,Qi.validateOptionalField)(t,"Issuer",Qi.isString)}em.validateCredentialDelete=b$;var tm={};Object.defineProperty(tm,"__esModule",{value:!0});tm.validateDepositPreauth=void 0;const Id=et,ox=Ze;function w$(t){if((0,ox.validateBaseTransaction)(t),_$(t),t.Authorize!==void 0){if(typeof t.Authorize!="string")throw new Id.ValidationError("DepositPreauth: Authorize must be a string");if(t.Account===t.Authorize)throw new Id.ValidationError("DepositPreauth: Account can't preauthorize its own address")}else if(t.Unauthorize!==void 0){if(typeof t.Unauthorize!="string")throw new Id.ValidationError("DepositPreauth: Unauthorize must be a string");if(t.Account===t.Unauthorize)throw new Id.ValidationError("DepositPreauth: Account can't unauthorize its own address")}else t.AuthorizeCredentials!==void 0?(0,ox.validateCredentialsList)(t.AuthorizeCredentials,t.TransactionType,!1):t.UnauthorizeCredentials!==void 0&&(0,ox.validateCredentialsList)(t.UnauthorizeCredentials,t.TransactionType,!1)}tm.validateDepositPreauth=w$;function _$(t){if(["Authorize","Unauthorize","AuthorizeCredentials","UnauthorizeCredentials"].filter(s=>t[s]!==void 0).length!==1)throw new Id.ValidationError("DepositPreauth: Requires exactly one field of the following: Authorize, Unauthorize, AuthorizeCredentials, UnauthorizeCredentials.")}var rm={};Object.defineProperty(rm,"__esModule",{value:!0});rm.validateDIDDelete=void 0;const N$=Ze;function S$(t){(0,N$.validateBaseTransaction)(t)}rm.validateDIDDelete=S$;var sm={};Object.defineProperty(sm,"__esModule",{value:!0});sm.validateDIDSet=void 0;const j$=et,ho=Ze;function E$(t){if((0,ho.validateBaseTransaction)(t),(0,ho.validateOptionalField)(t,"Data",ho.isString),(0,ho.validateOptionalField)(t,"DIDDocument",ho.isString),(0,ho.validateOptionalField)(t,"URI",ho.isString),t.Data===void 0&&t.DIDDocument===void 0&&t.URI===void 0)throw new j$.ValidationError("DIDSet: Must have at least one of `Data`, `DIDDocument`, and `URI`")}sm.validateDIDSet=E$;var nm={};Object.defineProperty(nm,"__esModule",{value:!0});nm.validateEscrowCancel=void 0;const zN=et,lx=Ze;function T$(t){if((0,lx.validateBaseTransaction)(t),(0,lx.validateRequiredField)(t,"Owner",lx.isAccount),t.OfferSequence==null)throw new zN.ValidationError("EscrowCancel: missing OfferSequence");if(typeof t.OfferSequence!="number"&&typeof t.OfferSequence!="string"||Number.isNaN(Number(t.OfferSequence)))throw new zN.ValidationError("EscrowCancel: OfferSequence must be a number")}nm.validateEscrowCancel=T$;var im={};Object.defineProperty(im,"__esModule",{value:!0});im.validateEscrowCreate=void 0;const po=et,vd=Ze;function C$(t){if((0,vd.validateBaseTransaction)(t),t.Amount===void 0)throw new po.ValidationError("EscrowCreate: missing field Amount");if(typeof t.Amount!="string")throw new po.ValidationError("EscrowCreate: Amount must be a string");if((0,vd.validateRequiredField)(t,"Destination",vd.isAccount),(0,vd.validateOptionalField)(t,"DestinationTag",vd.isNumber),t.CancelAfter===void 0&&t.FinishAfter===void 0)throw new po.ValidationError("EscrowCreate: Either CancelAfter or FinishAfter must be specified");if(t.FinishAfter===void 0&&t.Condition===void 0)throw new po.ValidationError("EscrowCreate: Either Condition or FinishAfter must be specified");if(t.CancelAfter!==void 0&&typeof t.CancelAfter!="number")throw new po.ValidationError("EscrowCreate: CancelAfter must be a number");if(t.FinishAfter!==void 0&&typeof t.FinishAfter!="number")throw new po.ValidationError("EscrowCreate: FinishAfter must be a number");if(t.Condition!==void 0&&typeof t.Condition!="string")throw new po.ValidationError("EscrowCreate: Condition must be a string")}im.validateEscrowCreate=C$;var am={};Object.defineProperty(am,"__esModule",{value:!0});am.validateEscrowFinish=void 0;const sp=et,np=Ze;function k$(t){if((0,np.validateBaseTransaction)(t),(0,np.validateRequiredField)(t,"Owner",np.isAccount),(0,np.validateCredentialsList)(t.CredentialIDs,t.TransactionType,!0),t.OfferSequence==null)throw new sp.ValidationError("EscrowFinish: missing field OfferSequence");if(typeof t.OfferSequence!="number"&&typeof t.OfferSequence!="string"||Number.isNaN(Number(t.OfferSequence)))throw new sp.ValidationError("EscrowFinish: OfferSequence must be a number");if(t.Condition!==void 0&&typeof t.Condition!="string")throw new sp.ValidationError("EscrowFinish: Condition must be a string");if(t.Fulfillment!==void 0&&typeof t.Fulfillment!="string")throw new sp.ValidationError("EscrowFinish: Fulfillment must be a string")}am.validateEscrowFinish=k$;var om={};Object.defineProperty(om,"__esModule",{value:!0});om.validateMPTokenIssuanceDestroy=void 0;const cx=Ze;function A$(t){(0,cx.validateBaseTransaction)(t),(0,cx.validateRequiredField)(t,"MPTokenIssuanceID",cx.isString)}om.validateMPTokenIssuanceDestroy=A$;var lm={};Object.defineProperty(lm,"__esModule",{value:!0});lm.validateNFTokenAcceptOffer=void 0;const zp=et,Ok=Ze;function P$(t){const e=(0,Ok.parseAmountValue)(t.NFTokenBrokerFee);if(Number.isNaN(e))throw new zp.ValidationError("NFTokenAcceptOffer: invalid NFTokenBrokerFee");if(e<=0)throw new zp.ValidationError("NFTokenAcceptOffer: NFTokenBrokerFee must be greater than 0; omit if there is no fee");if(t.NFTokenSellOffer==null||t.NFTokenBuyOffer==null)throw new zp.ValidationError("NFTokenAcceptOffer: both NFTokenSellOffer and NFTokenBuyOffer must be set if using brokered mode")}function R$(t){if((0,Ok.validateBaseTransaction)(t),t.NFTokenBrokerFee!=null&&P$(t),t.NFTokenSellOffer==null&&t.NFTokenBuyOffer==null)throw new zp.ValidationError("NFTokenAcceptOffer: must set either NFTokenSellOffer or NFTokenBuyOffer")}lm.validateNFTokenAcceptOffer=R$;var cm={};Object.defineProperty(cm,"__esModule",{value:!0});cm.validateNFTokenBurn=void 0;const bd=Ze;function O$(t){(0,bd.validateBaseTransaction)(t),(0,bd.validateRequiredField)(t,"NFTokenID",bd.isString),(0,bd.validateOptionalField)(t,"Owner",bd.isAccount)}cm.validateNFTokenBurn=O$;var dm={};Object.defineProperty(dm,"__esModule",{value:!0});dm.validateNFTokenCancelOffer=void 0;const XN=et,I$=Ze;function L$(t){if((0,I$.validateBaseTransaction)(t),!Array.isArray(t.NFTokenOffers))throw new XN.ValidationError("NFTokenCancelOffer: missing field NFTokenOffers");if(t.NFTokenOffers.length<1)throw new XN.ValidationError("NFTokenCancelOffer: empty field NFTokenOffers")}dm.validateNFTokenCancelOffer=L$;var um={};Object.defineProperty(um,"__esModule",{value:!0});um.validateOfferCancel=void 0;const WN=et,M$=Ze;function F$(t){if((0,M$.validateBaseTransaction)(t),t.OfferSequence===void 0)throw new WN.ValidationError("OfferCancel: missing field OfferSequence");if(typeof t.OfferSequence!="number")throw new WN.ValidationError("OfferCancel: OfferSequence must be a number")}um.validateOfferCancel=F$;var hm={};Object.defineProperty(hm,"__esModule",{value:!0});hm.validateOracleDelete=void 0;const dx=Ze;function D$(t){(0,dx.validateBaseTransaction)(t),(0,dx.validateRequiredField)(t,"OracleDocumentID",dx.isNumber)}hm.validateOracleDelete=D$;var pm={};Object.defineProperty(pm,"__esModule",{value:!0});pm.validateOracleSet=void 0;const xn=et,ps=Ze,qN=10,KN=10;function B$(t){(0,ps.validateBaseTransaction)(t),(0,ps.validateRequiredField)(t,"OracleDocumentID",ps.isNumber),(0,ps.validateRequiredField)(t,"LastUpdateTime",ps.isNumber),(0,ps.validateOptionalField)(t,"Provider",ps.isString),(0,ps.validateOptionalField)(t,"URI",ps.isString),(0,ps.validateOptionalField)(t,"AssetClass",ps.isString),(0,ps.validateRequiredField)(t,"PriceDataSeries",e=>{if(!Array.isArray(e))throw new xn.ValidationError("OracleSet: PriceDataSeries must be an array");if(e.length>qN)throw new xn.ValidationError(`OracleSet: PriceDataSeries must have at most ${qN} PriceData objects`);for(const r of e){if(typeof r!="object")throw new xn.ValidationError("OracleSet: PriceDataSeries must be an array of objects");if(r.PriceData==null)throw new xn.ValidationError("OracleSet: PriceDataSeries must have a `PriceData` object");if(Object.keys(r).length!==1)throw new xn.ValidationError("OracleSet: PriceDataSeries must only have a single PriceData object");if(typeof r.PriceData.BaseAsset!="string")throw new xn.ValidationError("OracleSet: PriceDataSeries must have a `BaseAsset` string");if(typeof r.PriceData.QuoteAsset!="string")throw new xn.ValidationError("OracleSet: PriceDataSeries must have a `QuoteAsset` string");if(r.PriceData.AssetPrice==null!=(r.PriceData.Scale==null))throw new xn.ValidationError("OracleSet: PriceDataSeries must have both `AssetPrice` and `Scale` if any are present");if("AssetPrice"in r.PriceData&&!(0,ps.isNumber)(r.PriceData.AssetPrice))throw new xn.ValidationError("OracleSet: invalid field AssetPrice");if("Scale"in r.PriceData&&!(0,ps.isNumber)(r.PriceData.Scale))throw new xn.ValidationError("OracleSet: invalid field Scale");if(r.PriceData.Scale<0||r.PriceData.Scale>KN)throw new xn.ValidationError(`OracleSet: Scale must be in range 0-${KN}`)}return!0})}pm.validateOracleSet=B$;var fm={};Object.defineProperty(fm,"__esModule",{value:!0});fm.validatePaymentChannelCreate=void 0;const fo=et,wd=Ze;function $$(t){if((0,wd.validateBaseTransaction)(t),t.Amount===void 0)throw new fo.ValidationError("PaymentChannelCreate: missing Amount");if(typeof t.Amount!="string")throw new fo.ValidationError("PaymentChannelCreate: Amount must be a string");if((0,wd.validateRequiredField)(t,"Destination",wd.isAccount),(0,wd.validateOptionalField)(t,"DestinationTag",wd.isNumber),t.SettleDelay===void 0)throw new fo.ValidationError("PaymentChannelCreate: missing SettleDelay");if(typeof t.SettleDelay!="number")throw new fo.ValidationError("PaymentChannelCreate: SettleDelay must be a number");if(t.PublicKey===void 0)throw new fo.ValidationError("PaymentChannelCreate: missing PublicKey");if(typeof t.PublicKey!="string")throw new fo.ValidationError("PaymentChannelCreate: PublicKey must be a string");if(t.CancelAfter!==void 0&&typeof t.CancelAfter!="number")throw new fo.ValidationError("PaymentChannelCreate: CancelAfter must be a number")}fm.validatePaymentChannelCreate=$$;var mm={};Object.defineProperty(mm,"__esModule",{value:!0});mm.validatePaymentChannelFund=void 0;const _d=et,U$=Ze;function V$(t){if((0,U$.validateBaseTransaction)(t),t.Channel===void 0)throw new _d.ValidationError("PaymentChannelFund: missing Channel");if(typeof t.Channel!="string")throw new _d.ValidationError("PaymentChannelFund: Channel must be a string");if(t.Amount===void 0)throw new _d.ValidationError("PaymentChannelFund: missing Amount");if(typeof t.Amount!="string")throw new _d.ValidationError("PaymentChannelFund: Amount must be a string");if(t.Expiration!==void 0&&typeof t.Expiration!="number")throw new _d.ValidationError("PaymentChannelFund: Expiration must be a number")}mm.validatePaymentChannelFund=V$;var gm={};Object.defineProperty(gm,"__esModule",{value:!0});gm.validateSetRegularKey=void 0;const H$=et,z$=Ze;function X$(t){if((0,z$.validateBaseTransaction)(t),t.RegularKey!==void 0&&typeof t.RegularKey!="string")throw new H$.ValidationError("SetRegularKey: RegularKey must be a string")}gm.validateSetRegularKey=X$;var xm={};Object.defineProperty(xm,"__esModule",{value:!0});xm.validateSignerListSet=void 0;const mo=et,W$=Ze,GN=32,q$=/^[0-9A-Fa-f]{64}$/u;function K$(t){if((0,W$.validateBaseTransaction)(t),t.SignerQuorum===void 0)throw new mo.ValidationError("SignerListSet: missing field SignerQuorum");if(typeof t.SignerQuorum!="number")throw new mo.ValidationError("SignerListSet: invalid SignerQuorum");if(t.SignerQuorum!==0){if(t.SignerEntries===void 0)throw new mo.ValidationError("SignerListSet: missing field SignerEntries");if(!Array.isArray(t.SignerEntries))throw new mo.ValidationError("SignerListSet: invalid SignerEntries");if(t.SignerEntries.length===0)throw new mo.ValidationError("SignerListSet: need at least 1 member in SignerEntries");if(t.SignerEntries.length>GN)throw new mo.ValidationError(`SignerListSet: maximum of ${GN} members allowed in SignerEntries`);for(const e of t.SignerEntries){const r=e,{WalletLocator:s}=r.SignerEntry;if(s!==void 0&&!q$.test(s))throw new mo.ValidationError("SignerListSet: WalletLocator in SignerEntry must be a 256-bit (32-byte) hexadecimal value")}}}xm.validateSignerListSet=K$;var ym={};Object.defineProperty(ym,"__esModule",{value:!0});ym.validateTicketCreate=void 0;const ux=et,G$=Ze,Y$=250;function J$(t){(0,G$.validateBaseTransaction)(t);const{TicketCount:e}=t;if(e===void 0)throw new ux.ValidationError("TicketCreate: missing field TicketCount");if(typeof e!="number")throw new ux.ValidationError("TicketCreate: TicketCount must be a number");if(!Number.isInteger(e)||e<1||e>Y$)throw new ux.ValidationError("TicketCreate: TicketCount must be an integer from 1 to 250")}ym.validateTicketCreate=J$;var vm={};Object.defineProperty(vm,"__esModule",{value:!0});vm.validateXChainAccountCreateCommit=void 0;const xi=Ze;function Q$(t){(0,xi.validateBaseTransaction)(t),(0,xi.validateRequiredField)(t,"XChainBridge",xi.isXChainBridge),(0,xi.validateRequiredField)(t,"SignatureReward",xi.isAmount),(0,xi.validateRequiredField)(t,"Destination",xi.isAccount),(0,xi.validateRequiredField)(t,"Amount",xi.isAmount)}vm.validateXChainAccountCreateCommit=Q$;var bm={};Object.defineProperty(bm,"__esModule",{value:!0});bm.validateXChainAddAccountCreateAttestation=void 0;const nr=Ze;function Z$(t){(0,nr.validateBaseTransaction)(t),(0,nr.validateRequiredField)(t,"Amount",nr.isAmount),(0,nr.validateRequiredField)(t,"AttestationRewardAccount",nr.isAccount),(0,nr.validateRequiredField)(t,"AttestationSignerAccount",nr.isAccount),(0,nr.validateRequiredField)(t,"Destination",nr.isAccount),(0,nr.validateRequiredField)(t,"OtherChainSource",nr.isAccount),(0,nr.validateRequiredField)(t,"PublicKey",nr.isString),(0,nr.validateRequiredField)(t,"Signature",nr.isString),(0,nr.validateRequiredField)(t,"SignatureReward",nr.isAmount),(0,nr.validateRequiredField)(t,"WasLockingChainSend",e=>e===0||e===1),(0,nr.validateRequiredField)(t,"XChainAccountCreateCount",e=>(0,nr.isNumber)(e)||(0,nr.isString)(e)),(0,nr.validateRequiredField)(t,"XChainBridge",nr.isXChainBridge)}bm.validateXChainAddAccountCreateAttestation=Z$;var wm={};Object.defineProperty(wm,"__esModule",{value:!0});wm.validateXChainAddClaimAttestation=void 0;const mr=Ze;function eU(t){(0,mr.validateBaseTransaction)(t),(0,mr.validateRequiredField)(t,"Amount",mr.isAmount),(0,mr.validateRequiredField)(t,"AttestationRewardAccount",mr.isAccount),(0,mr.validateRequiredField)(t,"AttestationSignerAccount",mr.isAccount),(0,mr.validateOptionalField)(t,"Destination",mr.isAccount),(0,mr.validateRequiredField)(t,"OtherChainSource",mr.isAccount),(0,mr.validateRequiredField)(t,"PublicKey",mr.isString),(0,mr.validateRequiredField)(t,"Signature",mr.isString),(0,mr.validateRequiredField)(t,"WasLockingChainSend",e=>e===0||e===1),(0,mr.validateRequiredField)(t,"XChainBridge",mr.isXChainBridge),(0,mr.validateRequiredField)(t,"XChainClaimID",e=>(0,mr.isNumber)(e)||(0,mr.isString)(e))}wm.validateXChainAddClaimAttestation=eU;var _m={};Object.defineProperty(_m,"__esModule",{value:!0});_m.validateXChainClaim=void 0;const Ks=Ze;function tU(t){(0,Ks.validateBaseTransaction)(t),(0,Ks.validateRequiredField)(t,"XChainBridge",Ks.isXChainBridge),(0,Ks.validateRequiredField)(t,"XChainClaimID",e=>(0,Ks.isNumber)(e)||(0,Ks.isString)(e)),(0,Ks.validateRequiredField)(t,"Destination",Ks.isAccount),(0,Ks.validateOptionalField)(t,"DestinationTag",Ks.isNumber),(0,Ks.validateRequiredField)(t,"Amount",Ks.isAmount)}_m.validateXChainClaim=tU;var Nm={};Object.defineProperty(Nm,"__esModule",{value:!0});Nm.validateXChainCommit=void 0;const Wn=Ze;function rU(t){(0,Wn.validateBaseTransaction)(t),(0,Wn.validateRequiredField)(t,"XChainBridge",Wn.isXChainBridge),(0,Wn.validateRequiredField)(t,"XChainClaimID",e=>(0,Wn.isNumber)(e)||(0,Wn.isString)(e)),(0,Wn.validateOptionalField)(t,"OtherChainDestination",Wn.isAccount),(0,Wn.validateRequiredField)(t,"Amount",Wn.isAmount)}Nm.validateXChainCommit=rU;var Sm={};Object.defineProperty(Sm,"__esModule",{value:!0});Sm.validateXChainCreateBridge=void 0;const go=Ze;function sU(t){(0,go.validateBaseTransaction)(t),(0,go.validateRequiredField)(t,"XChainBridge",go.isXChainBridge),(0,go.validateRequiredField)(t,"SignatureReward",go.isAmount),(0,go.validateOptionalField)(t,"MinAccountCreateAmount",go.isAmount)}Sm.validateXChainCreateBridge=sU;var jm={};Object.defineProperty(jm,"__esModule",{value:!0});jm.validateXChainCreateClaimID=void 0;const xo=Ze;function nU(t){(0,xo.validateBaseTransaction)(t),(0,xo.validateRequiredField)(t,"XChainBridge",xo.isXChainBridge),(0,xo.validateRequiredField)(t,"SignatureReward",xo.isAmount),(0,xo.validateRequiredField)(t,"OtherChainSource",xo.isAccount)}jm.validateXChainCreateClaimID=nU;Object.defineProperty(H0,"__esModule",{value:!0});H0.validate=void 0;const yi=et,hx=Rr,iU=li,aU=z0,oU=ci,lU=X0,cU=Rw,dU=W0,uU=Oa,hU=q0,pU=Ia,fU=K0,mU=G0,gU=Y0,xU=J0,yU=Ze,vU=Q0,bU=Z0,wU=em,_U=tm,NU=rm,SU=sm,jU=nm,EU=im,TU=am,CU=La,kU=Ma,AU=om,PU=Fa,RU=lm,OU=cm,IU=dm,LU=Da,MU=Ba,FU=um,DU=$a,BU=hm,$U=pm,UU=Ua,VU=Va,HU=fm,zU=mm,XU=gm,WU=xm,qU=ym,KU=Ha,GU=vm,YU=bm,JU=wm,QU=_m,ZU=Nm,e8=Sm,t8=jm,r8=za;function s8(t){const e=Object.assign({},t);if(e.TransactionType==null)throw new yi.ValidationError("Object does not have a `TransactionType`");if(typeof e.TransactionType!="string")throw new yi.ValidationError("Object's `TransactionType` is not a string");if(e.Memos!=null&&typeof e.Memos!="object")throw new yi.ValidationError("Memo must be array");switch(e.Memos!=null&&e.Memos.forEach(r=>{if((r==null?void 0:r.Memo)==null)throw new yi.ValidationError("Memo data must be in a `Memo` field");if(r.Memo.MemoData&&!(0,hx.isHex)(r.Memo.MemoData))throw new yi.ValidationError("MemoData field must be a hex value");if(r.Memo.MemoType&&!(0,hx.isHex)(r.Memo.MemoType))throw new yi.ValidationError("MemoType field must be a hex value");if(r.Memo.MemoFormat&&!(0,hx.isHex)(r.Memo.MemoFormat))throw new yi.ValidationError("MemoFormat field must be a hex value")}),Object.keys(e).forEach(r=>{if(e[r]&&(0,yU.isIssuedCurrency)(e[r])){const i=e[r].currency;if(i.length===3&&i.toUpperCase()==="XRP")throw new yi.ValidationError(`Cannot have an issued currency with a similar standard code to XRP (received '${i}'). XRP is not an issued currency.`)}}),(0,iU.setTransactionFlagsToNumber)(e),e.TransactionType){case"AMMBid":(0,lU.validateAMMBid)(e);break;case"AMMCreate":(0,cU.validateAMMCreate)(e);break;case"AMMDelete":(0,dU.validateAMMDelete)(e);break;case"AMMDeposit":(0,uU.validateAMMDeposit)(e);break;case"AMMVote":(0,hU.validateAMMVote)(e);break;case"AMMWithdraw":(0,pU.validateAMMWithdraw)(e);break;case"AccountDelete":(0,aU.validateAccountDelete)(e);break;case"AccountSet":(0,oU.validateAccountSet)(e);break;case"CheckCancel":(0,fU.validateCheckCancel)(e);break;case"CheckCash":(0,mU.validateCheckCash)(e);break;case"CheckCreate":(0,gU.validateCheckCreate)(e);break;case"Clawback":(0,xU.validateClawback)(e);break;case"CredentialAccept":(0,vU.validateCredentialAccept)(e);break;case"CredentialCreate":(0,bU.validateCredentialCreate)(e);break;case"CredentialDelete":(0,wU.validateCredentialDelete)(e);break;case"DIDDelete":(0,NU.validateDIDDelete)(e);break;case"DIDSet":(0,SU.validateDIDSet)(e);break;case"DepositPreauth":(0,_U.validateDepositPreauth)(e);break;case"EscrowCancel":(0,jU.validateEscrowCancel)(e);break;case"EscrowCreate":(0,EU.validateEscrowCreate)(e);break;case"EscrowFinish":(0,TU.validateEscrowFinish)(e);break;case"MPTokenAuthorize":(0,CU.validateMPTokenAuthorize)(e);break;case"MPTokenIssuanceCreate":(0,kU.validateMPTokenIssuanceCreate)(e);break;case"MPTokenIssuanceDestroy":(0,AU.validateMPTokenIssuanceDestroy)(e);break;case"MPTokenIssuanceSet":(0,PU.validateMPTokenIssuanceSet)(e);break;case"NFTokenAcceptOffer":(0,RU.validateNFTokenAcceptOffer)(e);break;case"NFTokenBurn":(0,OU.validateNFTokenBurn)(e);break;case"NFTokenCancelOffer":(0,IU.validateNFTokenCancelOffer)(e);break;case"NFTokenCreateOffer":(0,LU.validateNFTokenCreateOffer)(e);break;case"NFTokenMint":(0,MU.validateNFTokenMint)(e);break;case"OfferCancel":(0,FU.validateOfferCancel)(e);break;case"OfferCreate":(0,DU.validateOfferCreate)(e);break;case"OracleDelete":(0,BU.validateOracleDelete)(e);break;case"OracleSet":(0,$U.validateOracleSet)(e);break;case"Payment":(0,UU.validatePayment)(e);break;case"PaymentChannelClaim":(0,VU.validatePaymentChannelClaim)(e);break;case"PaymentChannelCreate":(0,HU.validatePaymentChannelCreate)(e);break;case"PaymentChannelFund":(0,zU.validatePaymentChannelFund)(e);break;case"SetRegularKey":(0,XU.validateSetRegularKey)(e);break;case"SignerListSet":(0,WU.validateSignerListSet)(e);break;case"TicketCreate":(0,qU.validateTicketCreate)(e);break;case"TrustSet":(0,KU.validateTrustSet)(e);break;case"XChainAccountCreateCommit":(0,GU.validateXChainAccountCreateCommit)(e);break;case"XChainAddAccountCreateAttestation":(0,YU.validateXChainAddAccountCreateAttestation)(e);break;case"XChainAddClaimAttestation":(0,JU.validateXChainAddClaimAttestation)(e);break;case"XChainClaim":(0,QU.validateXChainClaim)(e);break;case"XChainCommit":(0,ZU.validateXChainCommit)(e);break;case"XChainCreateBridge":(0,e8.validateXChainCreateBridge)(e);break;case"XChainCreateClaimID":(0,t8.validateXChainCreateClaimID)(e);break;case"XChainModifyBridge":(0,r8.validateXChainModifyBridge)(e);break;default:throw new yi.ValidationError(`Invalid field TransactionType: ${e.TransactionType}`)}}H0.validate=s8;var Em={};Object.defineProperty(Em,"__esModule",{value:!0});Em.EnableAmendmentFlags=void 0;var YN;(function(t){t[t.tfGotMajority=65536]="tfGotMajority",t[t.tfLostMajority=131072]="tfLostMajority"})(YN||(Em.EnableAmendmentFlags=YN={}));(function(t){var e=Ce&&Ce.__createBinding||(Object.create?function(g,w,S,_){_===void 0&&(_=S);var A=Object.getOwnPropertyDescriptor(w,S);(!A||("get"in A?!w.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return w[S]}}),Object.defineProperty(g,_,A)}:function(g,w,S,_){_===void 0&&(_=S),g[_]=w[S]}),r=Ce&&Ce.__exportStar||function(g,w){for(var S in g)S!=="default"&&!Object.prototype.hasOwnProperty.call(w,S)&&e(w,g,S)};Object.defineProperty(t,"__esModule",{value:!0}),t.XChainModifyBridgeFlags=t.TrustSetFlags=t.PaymentChannelClaimFlags=t.PaymentFlags=t.OfferCreateFlags=t.NFTokenMintFlags=t.NFTokenCreateOfferFlags=t.MPTokenIssuanceSetFlags=t.MPTokenIssuanceCreateFlags=t.MPTokenAuthorizeFlags=t.EnableAmendmentFlags=t.AMMWithdrawFlags=t.AMMDepositFlags=t.AccountSetTfFlags=t.AccountSetAsfFlags=t.validate=t.isMPTAmount=void 0;var s=Ze;Object.defineProperty(t,"isMPTAmount",{enumerable:!0,get:function(){return s.isMPTAmount}});var i=H0;Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return i.validate}}),r(di,t);var a=ci;Object.defineProperty(t,"AccountSetAsfFlags",{enumerable:!0,get:function(){return a.AccountSetAsfFlags}}),Object.defineProperty(t,"AccountSetTfFlags",{enumerable:!0,get:function(){return a.AccountSetTfFlags}});var o=Oa;Object.defineProperty(t,"AMMDepositFlags",{enumerable:!0,get:function(){return o.AMMDepositFlags}});var l=Ia;Object.defineProperty(t,"AMMWithdrawFlags",{enumerable:!0,get:function(){return l.AMMWithdrawFlags}});var c=Em;Object.defineProperty(t,"EnableAmendmentFlags",{enumerable:!0,get:function(){return c.EnableAmendmentFlags}});var d=La;Object.defineProperty(t,"MPTokenAuthorizeFlags",{enumerable:!0,get:function(){return d.MPTokenAuthorizeFlags}});var u=Ma;Object.defineProperty(t,"MPTokenIssuanceCreateFlags",{enumerable:!0,get:function(){return u.MPTokenIssuanceCreateFlags}});var h=Fa;Object.defineProperty(t,"MPTokenIssuanceSetFlags",{enumerable:!0,get:function(){return h.MPTokenIssuanceSetFlags}});var p=Da;Object.defineProperty(t,"NFTokenCreateOfferFlags",{enumerable:!0,get:function(){return p.NFTokenCreateOfferFlags}});var f=Ba;Object.defineProperty(t,"NFTokenMintFlags",{enumerable:!0,get:function(){return f.NFTokenMintFlags}});var m=$a;Object.defineProperty(t,"OfferCreateFlags",{enumerable:!0,get:function(){return m.OfferCreateFlags}});var v=Ua;Object.defineProperty(t,"PaymentFlags",{enumerable:!0,get:function(){return v.PaymentFlags}});var x=Va;Object.defineProperty(t,"PaymentChannelClaimFlags",{enumerable:!0,get:function(){return x.PaymentChannelClaimFlags}});var b=Ha;Object.defineProperty(t,"TrustSetFlags",{enumerable:!0,get:function(){return b.TrustSetFlags}});var y=za;Object.defineProperty(t,"XChainModifyBridgeFlags",{enumerable:!0,get:function(){return y.XChainModifyBridgeFlags}})})(uh);var sl={};const n8=["A","ABE","ACE","ACT","AD","ADA","ADD","AGO","AID","AIM","AIR","ALL","ALP","AM","AMY","AN","ANA","AND","ANN","ANT","ANY","APE","APS","APT","ARC","ARE","ARK","ARM","ART","AS","ASH","ASK","AT","ATE","AUG","AUK","AVE","AWE","AWK","AWL","AWN","AX","AYE","BAD","BAG","BAH","BAM","BAN","BAR","BAT","BAY","BE","BED","BEE","BEG","BEN","BET","BEY","BIB","BID","BIG","BIN","BIT","BOB","BOG","BON","BOO","BOP","BOW","BOY","BUB","BUD","BUG","BUM","BUN","BUS","BUT","BUY","BY","BYE","CAB","CAL","CAM","CAN","CAP","CAR","CAT","CAW","COD","COG","COL","CON","COO","COP","COT","COW","COY","CRY","CUB","CUE","CUP","CUR","CUT","DAB","DAD","DAM","DAN","DAR","DAY","DEE","DEL","DEN","DES","DEW","DID","DIE","DIG","DIN","DIP","DO","DOE","DOG","DON","DOT","DOW","DRY","DUB","DUD","DUE","DUG","DUN","EAR","EAT","ED","EEL","EGG","EGO","ELI","ELK","ELM","ELY","EM","END","EST","ETC","EVA","EVE","EWE","EYE","FAD","FAN","FAR","FAT","FAY","FED","FEE","FEW","FIB","FIG","FIN","FIR","FIT","FLO","FLY","FOE","FOG","FOR","FRY","FUM","FUN","FUR","GAB","GAD","GAG","GAL","GAM","GAP","GAS","GAY","GEE","GEL","GEM","GET","GIG","GIL","GIN","GO","GOT","GUM","GUN","GUS","GUT","GUY","GYM","GYP","HA","HAD","HAL","HAM","HAN","HAP","HAS","HAT","HAW","HAY","HE","HEM","HEN","HER","HEW","HEY","HI","HID","HIM","HIP","HIS","HIT","HO","HOB","HOC","HOE","HOG","HOP","HOT","HOW","HUB","HUE","HUG","HUH","HUM","HUT","I","ICY","IDA","IF","IKE","ILL","INK","INN","IO","ION","IQ","IRA","IRE","IRK","IS","IT","ITS","IVY","JAB","JAG","JAM","JAN","JAR","JAW","JAY","JET","JIG","JIM","JO","JOB","JOE","JOG","JOT","JOY","JUG","JUT","KAY","KEG","KEN","KEY","KID","KIM","KIN","KIT","LA","LAB","LAC","LAD","LAG","LAM","LAP","LAW","LAY","LEA","LED","LEE","LEG","LEN","LEO","LET","LEW","LID","LIE","LIN","LIP","LIT","LO","LOB","LOG","LOP","LOS","LOT","LOU","LOW","LOY","LUG","LYE","MA","MAC","MAD","MAE","MAN","MAO","MAP","MAT","MAW","MAY","ME","MEG","MEL","MEN","MET","MEW","MID","MIN","MIT","MOB","MOD","MOE","MOO","MOP","MOS","MOT","MOW","MUD","MUG","MUM","MY","NAB","NAG","NAN","NAP","NAT","NAY","NE","NED","NEE","NET","NEW","NIB","NIL","NIP","NIT","NO","NOB","NOD","NON","NOR","NOT","NOV","NOW","NU","NUN","NUT","O","OAF","OAK","OAR","OAT","ODD","ODE","OF","OFF","OFT","OH","OIL","OK","OLD","ON","ONE","OR","ORB","ORE","ORR","OS","OTT","OUR","OUT","OVA","OW","OWE","OWL","OWN","OX","PA","PAD","PAL","PAM","PAN","PAP","PAR","PAT","PAW","PAY","PEA","PEG","PEN","PEP","PER","PET","PEW","PHI","PI","PIE","PIN","PIT","PLY","PO","POD","POE","POP","POT","POW","PRO","PRY","PUB","PUG","PUN","PUP","PUT","QUO","RAG","RAM","RAN","RAP","RAT","RAW","RAY","REB","RED","REP","RET","RIB","RID","RIG","RIM","RIO","RIP","ROB","ROD","ROE","RON","ROT","ROW","ROY","RUB","RUE","RUG","RUM","RUN","RYE","SAC","SAD","SAG","SAL","SAM","SAN","SAP","SAT","SAW","SAY","SEA","SEC","SEE","SEN","SET","SEW","SHE","SHY","SIN","SIP","SIR","SIS","SIT","SKI","SKY","SLY","SO","SOB","SOD","SON","SOP","SOW","SOY","SPA","SPY","SUB","SUD","SUE","SUM","SUN","SUP","TAB","TAD","TAG","TAN","TAP","TAR","TEA","TED","TEE","TEN","THE","THY","TIC","TIE","TIM","TIN","TIP","TO","TOE","TOG","TOM","TON","TOO","TOP","TOW","TOY","TRY","TUB","TUG","TUM","TUN","TWO","UN","UP","US","USE","VAN","VAT","VET","VIE","WAD","WAG","WAR","WAS","WAY","WE","WEB","WED","WEE","WET","WHO","WHY","WIN","WIT","WOK","WON","WOO","WOW","WRY","WU","YAM","YAP","YAW","YE","YEA","YES","YET","YOU","ABED","ABEL","ABET","ABLE","ABUT","ACHE","ACID","ACME","ACRE","ACTA","ACTS","ADAM","ADDS","ADEN","AFAR","AFRO","AGEE","AHEM","AHOY","AIDA","AIDE","AIDS","AIRY","AJAR","AKIN","ALAN","ALEC","ALGA","ALIA","ALLY","ALMA","ALOE","ALSO","ALTO","ALUM","ALVA","AMEN","AMES","AMID","AMMO","AMOK","AMOS","AMRA","ANDY","ANEW","ANNA","ANNE","ANTE","ANTI","AQUA","ARAB","ARCH","AREA","ARGO","ARID","ARMY","ARTS","ARTY","ASIA","ASKS","ATOM","AUNT","AURA","AUTO","AVER","AVID","AVIS","AVON","AVOW","AWAY","AWRY","BABE","BABY","BACH","BACK","BADE","BAIL","BAIT","BAKE","BALD","BALE","BALI","BALK","BALL","BALM","BAND","BANE","BANG","BANK","BARB","BARD","BARE","BARK","BARN","BARR","BASE","BASH","BASK","BASS","BATE","BATH","BAWD","BAWL","BEAD","BEAK","BEAM","BEAN","BEAR","BEAT","BEAU","BECK","BEEF","BEEN","BEER","BEET","BELA","BELL","BELT","BEND","BENT","BERG","BERN","BERT","BESS","BEST","BETA","BETH","BHOY","BIAS","BIDE","BIEN","BILE","BILK","BILL","BIND","BING","BIRD","BITE","BITS","BLAB","BLAT","BLED","BLEW","BLOB","BLOC","BLOT","BLOW","BLUE","BLUM","BLUR","BOAR","BOAT","BOCA","BOCK","BODE","BODY","BOGY","BOHR","BOIL","BOLD","BOLO","BOLT","BOMB","BONA","BOND","BONE","BONG","BONN","BONY","BOOK","BOOM","BOON","BOOT","BORE","BORG","BORN","BOSE","BOSS","BOTH","BOUT","BOWL","BOYD","BRAD","BRAE","BRAG","BRAN","BRAY","BRED","BREW","BRIG","BRIM","BROW","BUCK","BUDD","BUFF","BULB","BULK","BULL","BUNK","BUNT","BUOY","BURG","BURL","BURN","BURR","BURT","BURY","BUSH","BUSS","BUST","BUSY","BYTE","CADY","CAFE","CAGE","CAIN","CAKE","CALF","CALL","CALM","CAME","CANE","CANT","CARD","CARE","CARL","CARR","CART","CASE","CASH","CASK","CAST","CAVE","CEIL","CELL","CENT","CERN","CHAD","CHAR","CHAT","CHAW","CHEF","CHEN","CHEW","CHIC","CHIN","CHOU","CHOW","CHUB","CHUG","CHUM","CITE","CITY","CLAD","CLAM","CLAN","CLAW","CLAY","CLOD","CLOG","CLOT","CLUB","CLUE","COAL","COAT","COCA","COCK","COCO","CODA","CODE","CODY","COED","COIL","COIN","COKE","COLA","COLD","COLT","COMA","COMB","COME","COOK","COOL","COON","COOT","CORD","CORE","CORK","CORN","COST","COVE","COWL","CRAB","CRAG","CRAM","CRAY","CREW","CRIB","CROW","CRUD","CUBA","CUBE","CUFF","CULL","CULT","CUNY","CURB","CURD","CURE","CURL","CURT","CUTS","DADE","DALE","DAME","DANA","DANE","DANG","DANK","DARE","DARK","DARN","DART","DASH","DATA","DATE","DAVE","DAVY","DAWN","DAYS","DEAD","DEAF","DEAL","DEAN","DEAR","DEBT","DECK","DEED","DEEM","DEER","DEFT","DEFY","DELL","DENT","DENY","DESK","DIAL","DICE","DIED","DIET","DIME","DINE","DING","DINT","DIRE","DIRT","DISC","DISH","DISK","DIVE","DOCK","DOES","DOLE","DOLL","DOLT","DOME","DONE","DOOM","DOOR","DORA","DOSE","DOTE","DOUG","DOUR","DOVE","DOWN","DRAB","DRAG","DRAM","DRAW","DREW","DRUB","DRUG","DRUM","DUAL","DUCK","DUCT","DUEL","DUET","DUKE","DULL","DUMB","DUNE","DUNK","DUSK","DUST","DUTY","EACH","EARL","EARN","EASE","EAST","EASY","EBEN","ECHO","EDDY","EDEN","EDGE","EDGY","EDIT","EDNA","EGAN","ELAN","ELBA","ELLA","ELSE","EMIL","EMIT","EMMA","ENDS","ERIC","EROS","EVEN","EVER","EVIL","EYED","FACE","FACT","FADE","FAIL","FAIN","FAIR","FAKE","FALL","FAME","FANG","FARM","FAST","FATE","FAWN","FEAR","FEAT","FEED","FEEL","FEET","FELL","FELT","FEND","FERN","FEST","FEUD","FIEF","FIGS","FILE","FILL","FILM","FIND","FINE","FINK","FIRE","FIRM","FISH","FISK","FIST","FITS","FIVE","FLAG","FLAK","FLAM","FLAT","FLAW","FLEA","FLED","FLEW","FLIT","FLOC","FLOG","FLOW","FLUB","FLUE","FOAL","FOAM","FOGY","FOIL","FOLD","FOLK","FOND","FONT","FOOD","FOOL","FOOT","FORD","FORE","FORK","FORM","FORT","FOSS","FOUL","FOUR","FOWL","FRAU","FRAY","FRED","FREE","FRET","FREY","FROG","FROM","FUEL","FULL","FUME","FUND","FUNK","FURY","FUSE","FUSS","GAFF","GAGE","GAIL","GAIN","GAIT","GALA","GALE","GALL","GALT","GAME","GANG","GARB","GARY","GASH","GATE","GAUL","GAUR","GAVE","GAWK","GEAR","GELD","GENE","GENT","GERM","GETS","GIBE","GIFT","GILD","GILL","GILT","GINA","GIRD","GIRL","GIST","GIVE","GLAD","GLEE","GLEN","GLIB","GLOB","GLOM","GLOW","GLUE","GLUM","GLUT","GOAD","GOAL","GOAT","GOER","GOES","GOLD","GOLF","GONE","GONG","GOOD","GOOF","GORE","GORY","GOSH","GOUT","GOWN","GRAB","GRAD","GRAY","GREG","GREW","GREY","GRID","GRIM","GRIN","GRIT","GROW","GRUB","GULF","GULL","GUNK","GURU","GUSH","GUST","GWEN","GWYN","HAAG","HAAS","HACK","HAIL","HAIR","HALE","HALF","HALL","HALO","HALT","HAND","HANG","HANK","HANS","HARD","HARK","HARM","HART","HASH","HAST","HATE","HATH","HAUL","HAVE","HAWK","HAYS","HEAD","HEAL","HEAR","HEAT","HEBE","HECK","HEED","HEEL","HEFT","HELD","HELL","HELM","HERB","HERD","HERE","HERO","HERS","HESS","HEWN","HICK","HIDE","HIGH","HIKE","HILL","HILT","HIND","HINT","HIRE","HISS","HIVE","HOBO","HOCK","HOFF","HOLD","HOLE","HOLM","HOLT","HOME","HONE","HONK","HOOD","HOOF","HOOK","HOOT","HORN","HOSE","HOST","HOUR","HOVE","HOWE","HOWL","HOYT","HUCK","HUED","HUFF","HUGE","HUGH","HUGO","HULK","HULL","HUNK","HUNT","HURD","HURL","HURT","HUSH","HYDE","HYMN","IBIS","ICON","IDEA","IDLE","IFFY","INCA","INCH","INTO","IONS","IOTA","IOWA","IRIS","IRMA","IRON","ISLE","ITCH","ITEM","IVAN","JACK","JADE","JAIL","JAKE","JANE","JAVA","JEAN","JEFF","JERK","JESS","JEST","JIBE","JILL","JILT","JIVE","JOAN","JOBS","JOCK","JOEL","JOEY","JOHN","JOIN","JOKE","JOLT","JOVE","JUDD","JUDE","JUDO","JUDY","JUJU","JUKE","JULY","JUNE","JUNK","JUNO","JURY","JUST","JUTE","KAHN","KALE","KANE","KANT","KARL","KATE","KEEL","KEEN","KENO","KENT","KERN","KERR","KEYS","KICK","KILL","KIND","KING","KIRK","KISS","KITE","KLAN","KNEE","KNEW","KNIT","KNOB","KNOT","KNOW","KOCH","KONG","KUDO","KURD","KURT","KYLE","LACE","LACK","LACY","LADY","LAID","LAIN","LAIR","LAKE","LAMB","LAME","LAND","LANE","LANG","LARD","LARK","LASS","LAST","LATE","LAUD","LAVA","LAWN","LAWS","LAYS","LEAD","LEAF","LEAK","LEAN","LEAR","LEEK","LEER","LEFT","LEND","LENS","LENT","LEON","LESK","LESS","LEST","LETS","LIAR","LICE","LICK","LIED","LIEN","LIES","LIEU","LIFE","LIFT","LIKE","LILA","LILT","LILY","LIMA","LIMB","LIME","LIND","LINE","LINK","LINT","LION","LISA","LIST","LIVE","LOAD","LOAF","LOAM","LOAN","LOCK","LOFT","LOGE","LOIS","LOLA","LONE","LONG","LOOK","LOON","LOOT","LORD","LORE","LOSE","LOSS","LOST","LOUD","LOVE","LOWE","LUCK","LUCY","LUGE","LUKE","LULU","LUND","LUNG","LURA","LURE","LURK","LUSH","LUST","LYLE","LYNN","LYON","LYRA","MACE","MADE","MAGI","MAID","MAIL","MAIN","MAKE","MALE","MALI","MALL","MALT","MANA","MANN","MANY","MARC","MARE","MARK","MARS","MART","MARY","MASH","MASK","MASS","MAST","MATE","MATH","MAUL","MAYO","MEAD","MEAL","MEAN","MEAT","MEEK","MEET","MELD","MELT","MEMO","MEND","MENU","MERT","MESH","MESS","MICE","MIKE","MILD","MILE","MILK","MILL","MILT","MIMI","MIND","MINE","MINI","MINK","MINT","MIRE","MISS","MIST","MITE","MITT","MOAN","MOAT","MOCK","MODE","MOLD","MOLE","MOLL","MOLT","MONA","MONK","MONT","MOOD","MOON","MOOR","MOOT","MORE","MORN","MORT","MOSS","MOST","MOTH","MOVE","MUCH","MUCK","MUDD","MUFF","MULE","MULL","MURK","MUSH","MUST","MUTE","MUTT","MYRA","MYTH","NAGY","NAIL","NAIR","NAME","NARY","NASH","NAVE","NAVY","NEAL","NEAR","NEAT","NECK","NEED","NEIL","NELL","NEON","NERO","NESS","NEST","NEWS","NEWT","NIBS","NICE","NICK","NILE","NINA","NINE","NOAH","NODE","NOEL","NOLL","NONE","NOOK","NOON","NORM","NOSE","NOTE","NOUN","NOVA","NUDE","NULL","NUMB","OATH","OBEY","OBOE","ODIN","OHIO","OILY","OINT","OKAY","OLAF","OLDY","OLGA","OLIN","OMAN","OMEN","OMIT","ONCE","ONES","ONLY","ONTO","ONUS","ORAL","ORGY","OSLO","OTIS","OTTO","OUCH","OUST","OUTS","OVAL","OVEN","OVER","OWLY","OWNS","QUAD","QUIT","QUOD","RACE","RACK","RACY","RAFT","RAGE","RAID","RAIL","RAIN","RAKE","RANK","RANT","RARE","RASH","RATE","RAVE","RAYS","READ","REAL","REAM","REAR","RECK","REED","REEF","REEK","REEL","REID","REIN","RENA","REND","RENT","REST","RICE","RICH","RICK","RIDE","RIFT","RILL","RIME","RING","RINK","RISE","RISK","RITE","ROAD","ROAM","ROAR","ROBE","ROCK","RODE","ROIL","ROLL","ROME","ROOD","ROOF","ROOK","ROOM","ROOT","ROSA","ROSE","ROSS","ROSY","ROTH","ROUT","ROVE","ROWE","ROWS","RUBE","RUBY","RUDE","RUDY","RUIN","RULE","RUNG","RUNS","RUNT","RUSE","RUSH","RUSK","RUSS","RUST","RUTH","SACK","SAFE","SAGE","SAID","SAIL","SALE","SALK","SALT","SAME","SAND","SANE","SANG","SANK","SARA","SAUL","SAVE","SAYS","SCAN","SCAR","SCAT","SCOT","SEAL","SEAM","SEAR","SEAT","SEED","SEEK","SEEM","SEEN","SEES","SELF","SELL","SEND","SENT","SETS","SEWN","SHAG","SHAM","SHAW","SHAY","SHED","SHIM","SHIN","SHOD","SHOE","SHOT","SHOW","SHUN","SHUT","SICK","SIDE","SIFT","SIGH","SIGN","SILK","SILL","SILO","SILT","SINE","SING","SINK","SIRE","SITE","SITS","SITU","SKAT","SKEW","SKID","SKIM","SKIN","SKIT","SLAB","SLAM","SLAT","SLAY","SLED","SLEW","SLID","SLIM","SLIT","SLOB","SLOG","SLOT","SLOW","SLUG","SLUM","SLUR","SMOG","SMUG","SNAG","SNOB","SNOW","SNUB","SNUG","SOAK","SOAR","SOCK","SODA","SOFA","SOFT","SOIL","SOLD","SOME","SONG","SOON","SOOT","SORE","SORT","SOUL","SOUR","SOWN","STAB","STAG","STAN","STAR","STAY","STEM","STEW","STIR","STOW","STUB","STUN","SUCH","SUDS","SUIT","SULK","SUMS","SUNG","SUNK","SURE","SURF","SWAB","SWAG","SWAM","SWAN","SWAT","SWAY","SWIM","SWUM","TACK","TACT","TAIL","TAKE","TALE","TALK","TALL","TANK","TASK","TATE","TAUT","TEAL","TEAM","TEAR","TECH","TEEM","TEEN","TEET","TELL","TEND","TENT","TERM","TERN","TESS","TEST","THAN","THAT","THEE","THEM","THEN","THEY","THIN","THIS","THUD","THUG","TICK","TIDE","TIDY","TIED","TIER","TILE","TILL","TILT","TIME","TINA","TINE","TINT","TINY","TIRE","TOAD","TOGO","TOIL","TOLD","TOLL","TONE","TONG","TONY","TOOK","TOOL","TOOT","TORE","TORN","TOTE","TOUR","TOUT","TOWN","TRAG","TRAM","TRAY","TREE","TREK","TRIG","TRIM","TRIO","TROD","TROT","TROY","TRUE","TUBA","TUBE","TUCK","TUFT","TUNA","TUNE","TUNG","TURF","TURN","TUSK","TWIG","TWIN","TWIT","ULAN","UNIT","URGE","USED","USER","USES","UTAH","VAIL","VAIN","VALE","VARY","VASE","VAST","VEAL","VEDA","VEIL","VEIN","VEND","VENT","VERB","VERY","VETO","VICE","VIEW","VINE","VISE","VOID","VOLT","VOTE","WACK","WADE","WAGE","WAIL","WAIT","WAKE","WALE","WALK","WALL","WALT","WAND","WANE","WANG","WANT","WARD","WARM","WARN","WART","WASH","WAST","WATS","WATT","WAVE","WAVY","WAYS","WEAK","WEAL","WEAN","WEAR","WEED","WEEK","WEIR","WELD","WELL","WELT","WENT","WERE","WERT","WEST","WHAM","WHAT","WHEE","WHEN","WHET","WHOA","WHOM","WICK","WIFE","WILD","WILL","WIND","WINE","WING","WINK","WINO","WIRE","WISE","WISH","WITH","WOLF","WONT","WOOD","WOOL","WORD","WORE","WORK","WORM","WORN","WOVE","WRIT","WYNN","YALE","YANG","YANK","YARD","YARN","YAWL","YAWN","YEAH","YEAR","YELL","YOGA","YOKE"];var i8=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sl,"__esModule",{value:!0});sl.keyToRFC1751Mnemonic=sl.rfc1751MnemonicToKey=void 0;const Ik=At,a8=i8(n8),Lk=a8.default,JN=["0000","0001","0010","0011","0100","0101","0110","0111","1000","1001","1010","1011","1100","1101","1110","1111"];function yv(t){let e="";for(const r of t)e+=JN[r>>4]+JN[r&15];return e}function Af(t,e,r){const s=t.substring(e,e+r);let i=0;for(let a=0;a<s.length;a++)i=i*2+s.charCodeAt(a)-48;return i}function o8(t){const e=(0,Ik.hexToBytes)(t.replace(/\s+/gu,""));let r=d8(Mk(e));const s=[];for(let a=0;a<(8-r.length%8)%8;a++)s.push(0);r=s.concat(r);const i=[];for(let a=0;a<r.length;a+=8){const o=r.slice(a,a+8);let l=yv(o),c=0;for(let d=0;d<64;d+=2)c+=Af(l,d,2);o.push(c<<6&255),l=yv(o);for(let d=0;d<64;d+=11)i.push(Lk[Af(l,d,11)])}return i.join(" ")}sl.keyToRFC1751Mnemonic=o8;function l8(t){const e=t.split(" ");let r=[];for(let i=0;i<e.length;i+=6){const{subKey:a,word:o}=c8(e,i),l=yv(a);let c=0;for(let h=0;h<64;h+=2)c+=Af(l,h,2);const d=Af(l,64,2),u=c&3;if(d!==u)throw new Error(`Parity error at ${o}`);r=r.concat(a.slice(0,8))}return Mk(Uint8Array.from(r))}sl.rfc1751MnemonicToKey=l8;function c8(t,e){const r=t.slice(e,e+6);let s=0;const i=[0,0,0,0,0,0,0,0,0];let a="";for(a of r){const l=Lk.indexOf(a.toUpperCase());if(l===-1)throw new TypeError(`Expected an RFC1751 word, but received '${a}'. For the full list of words in the RFC1751 encoding see https://datatracker.ietf.org/doc/html/rfc1751`);const c=(8-(s+11)%8)%8,d=l<<c,u=d>>16,h=d>>8&255,p=d&255,f=Math.floor(s/8);c>5?(i[f]|=u,i[f+1]|=h,i[f+2]|=p):c>-3?(i[f]|=h,i[f+1]|=p):i[f]|=p,s+=11}return{subKey:i.slice(),word:a}}function d8(t){return Array.prototype.slice.call(t)}function ip(t,e,r){const s=t[e];t[e]=t[r],t[r]=s}function u8(t){const e=t.length;for(let r=0;r<e;r+=8)ip(t,r,r+7),ip(t,r+1,r+6),ip(t,r+2,r+5),ip(t,r+3,r+4);return t}function Mk(t){const e=u8(t);return(0,Ik.concat)([e.slice(8,16),e.slice(0,8)])}var nl={};Object.defineProperty(nl,"__esModule",{value:!0});nl.multisign=nl.verifySignature=void 0;const h8=At,p8=ks,f8=Cs,Qd=hn,m8=eo,Xp=et,g8=uh;function x8(t){if(t.length===0)throw new Xp.ValidationError("There were 0 transactions to multisign");const e=t.map(r=>Fk(r));return e.forEach(r=>{if((0,g8.validate)(r),r.Signers==null||r.Signers.length===0)throw new Xp.ValidationError("For multisigning all transactions must include a Signers field containing an array of signatures. You may have forgotten to pass the 'forMultisign' parameter when signing.");if(r.SigningPubKey!=="")throw new Xp.ValidationError("SigningPubKey must be an empty string for all transactions when multisigning.")}),v8(e),(0,Qd.encode)(b8(e))}nl.multisign=x8;function y8(t,e){const r=Fk(t);let s=e;if(typeof r.TxnSignature!="string"||!r.TxnSignature)throw new Error("Transaction is missing a signature, TxnSignature");if(!s){if(typeof r.SigningPubKey!="string"||!r.SigningPubKey)throw new Error("Transaction is missing a public key, SigningPubKey");s=r.SigningPubKey}return(0,m8.verify)((0,Qd.encodeForSigning)(r),r.TxnSignature,s)}nl.verifySignature=y8;function v8(t){const e=JSON.stringify(Object.assign(Object.assign({},t[0]),{Signers:null}));if(t.slice(1).some(r=>JSON.stringify(Object.assign(Object.assign({},r),{Signers:null}))!==e))throw new Xp.ValidationError("txJSON is not the same for all signedTransactions")}function b8(t){const e=t.flatMap(r=>{var s;return(s=r.Signers)!==null&&s!==void 0?s:[]}).sort(w8);return Object.assign(Object.assign({},t[0]),{Signers:e})}function w8(t,e){return QN(t.Signer.Account).comparedTo(QN(e.Signer.Account))}const _8=16;function QN(t){const e=(0,h8.bytesToHex)((0,f8.decodeAccountID)(t));return new p8.BigNumber(e,_8)}function Fk(t){return typeof t=="object"?(0,Qd.decode)((0,Qd.encode)(t)):(0,Qd.decode)(t)}var Dk=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xl,"__esModule",{value:!0});xl.Wallet=void 0;const N8=wk,ZN=so,S8=V0,eS=At,j8=Dk(ks),Pf=Cs,vv=hn,cc=eo,bv=Dk(dh),Zd=et,E8=uh,T8=nh,C8=rl,k8=an,A8=sl,P8=nl,px=bv.default.ed25519,R8="m/44'/144'/0'/0/0";function O8(t){if(!(t.privateKey instanceof Uint8Array))throw new Zd.ValidationError("Unable to derive privateKey from mnemonic input");if(!(t.publicKey instanceof Uint8Array))throw new Zd.ValidationError("Unable to derive publicKey from mnemonic input")}class Nn{constructor(e,r,s={}){this.publicKey=e,this.privateKey=r,this.classicAddress=s.masterAddress?(0,T8.ensureClassicAddress)(s.masterAddress):(0,cc.deriveAddress)(e),this.seed=s.seed}get address(){return this.classicAddress}static generate(e=px){if(!Object.values(bv.default).includes(e))throw new Zd.ValidationError("Invalid cryptographic signing algorithm");const r=(0,cc.generateSeed)({algorithm:e});return Nn.fromSeed(r,{algorithm:e})}static fromSeed(e,r={}){return Nn.deriveWallet(e,{algorithm:r.algorithm,masterAddress:r.masterAddress})}static fromEntropy(e,r={}){var s;const i=(s=r.algorithm)!==null&&s!==void 0?s:px,a={entropy:Uint8Array.from(e),algorithm:i},o=(0,cc.generateSeed)(a);return Nn.deriveWallet(o,{algorithm:i,masterAddress:r.masterAddress})}static fromMnemonic(e,r={}){var s;if(r.mnemonicEncoding==="rfc1751")return Nn.fromRFC1751Mnemonic(e,{masterAddress:r.masterAddress,algorithm:r.algorithm});if(!(0,ZN.validateMnemonic)(e,S8.wordlist))throw new Zd.ValidationError("Unable to parse the given mnemonic using bip39 encoding");const i=(0,ZN.mnemonicToSeedSync)(e),o=N8.HDKey.fromMasterSeed(i).derive((s=r.derivationPath)!==null&&s!==void 0?s:R8);O8(o);const l=(0,eS.bytesToHex)(o.publicKey),c=(0,eS.bytesToHex)(o.privateKey);return new Nn(l,`00${c}`,{masterAddress:r.masterAddress})}static fromRFC1751Mnemonic(e,r){const s=(0,A8.rfc1751MnemonicToKey)(e);let i;r.algorithm===bv.default.ed25519?i="ed25519":i="secp256k1";const a=(0,Pf.encodeSeed)(s,i);return Nn.fromSeed(a,{masterAddress:r.masterAddress,algorithm:r.algorithm})}static deriveWallet(e,r={}){var s;const{publicKey:i,privateKey:a}=(0,cc.deriveKeypair)(e,{algorithm:(s=r.algorithm)!==null&&s!==void 0?s:px});return new Nn(i,a,{seed:e,masterAddress:r.masterAddress})}sign(e,r){let s=!1;typeof r=="string"&&r.startsWith("X")?s=r:r&&(s=this.classicAddress);const i=(0,C8.omitBy)(Object.assign({},e),l=>l==null);if(i.TxnSignature||i.Signers)throw new Zd.ValidationError('txJSON must not contain "TxnSignature" or "Signers" properties');I8(i),(0,E8.validate)(i);const a=Object.assign({},i);if(a.SigningPubKey=s?"":this.publicKey,s){const l={Account:s,SigningPubKey:this.publicKey,TxnSignature:tS(a,this.privateKey,s)};a.Signers=[{Signer:l}]}else a.TxnSignature=tS(a,this.privateKey);const o=(0,vv.encode)(a);return{tx_blob:o,hash:(0,k8.hashSignedTx)(o)}}verifyTransaction(e){return(0,P8.verifySignature)(e,this.publicKey)}getXAddress(e=!1,r=!1){return(0,Pf.classicAddressToXAddress)(this.classicAddress,e,r)}}xl.Wallet=Nn;Nn.fromSecret=Nn.fromSeed;function tS(t,e,r){if(r){const s=(0,Pf.isValidXAddress)(r)?(0,Pf.xAddressToClassicAddress)(r).classicAddress:r;return(0,cc.sign)((0,vv.encodeForMultisigning)(t,s),e)}return(0,cc.sign)((0,vv.encodeForSigning)(t),e)}function I8(t){t.TransactionType==="Payment"&&typeof t.Amount!="string"&&t.Amount.value.includes(".")&&t.Amount.value.endsWith("0")&&(t.Amount=Object.assign({},t.Amount),t.Amount.value=new j8.default(t.Amount.value).toString())}var Aa={},Bk={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultFaucetPath=t.getFaucetHost=t.FaucetNetworkPaths=t.FaucetNetwork=void 0;const e=et;var r;(function(a){a.Testnet="faucet.altnet.rippletest.net",a.Devnet="faucet.devnet.rippletest.net"})(r||(t.FaucetNetwork=r={})),t.FaucetNetworkPaths={[r.Testnet]:"/accounts",[r.Devnet]:"/accounts"};function s(a){const o=a.url;if(o.includes("altnet")||o.includes("testnet"))return r.Testnet;if(o.includes("sidechain-net2"))throw new e.XRPLFaucetError("Cannot fund an account on an issuing chain. Accounts must be created via the bridge.");if(o.includes("devnet"))return r.Devnet;throw new e.XRPLFaucetError("Faucet URL is not defined or inferrable.")}t.getFaucetHost=s;function i(a){return a===void 0?"/accounts":t.FaucetNetworkPaths[a]||"/accounts"}t.getDefaultFaucetPath=i})(Bk);var Oc=Ce&&Ce.__awaiter||function(t,e,r,s){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};Object.defineProperty(Aa,"__esModule",{value:!0});Aa.requestFunding=Aa.getStartingBalance=Aa.generateWalletToFund=void 0;const L8=Cs,vc=et,rS=Bk,M8=xl,$k=1,Uk=20;function F8(t){return t&&(0,L8.isValidClassicAddress)(t.classicAddress)?t:M8.Wallet.generate()}Aa.generateWalletToFund=F8;function D8(t,e){return Oc(this,void 0,void 0,function*(){let r=0;try{r=Number(yield t.getXrpBalance(e))}catch{}return r})}Aa.getStartingBalance=D8;function B8(t,e,r,s,i){var a,o,l;return Oc(this,void 0,void 0,function*(){const c=(a=t.faucetHost)!==null&&a!==void 0?a:(0,rS.getFaucetHost)(e);if(!c)throw new vc.XRPLFaucetError("No faucet hostname could be derived");const d=(o=t.faucetPath)!==null&&o!==void 0?o:(0,rS.getDefaultFaucetPath)(c),u=yield fetch(`https://${c}${d}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),h=yield u.json();if(u.ok&&(!((l=u.headers.get("Content-Type"))===null||l===void 0)&&l.startsWith("application/json"))){const p=h.account.classicAddress;return $8(e,p,s,r)}return U8(u,h)})}Aa.requestFunding=B8;function $8(t,e,r,s){return Oc(this,void 0,void 0,function*(){if(!e)return Promise.reject(new vc.XRPLFaucetError("The faucet account is undefined"));try{const i=yield V8(t,e,s);if(i>s)return{wallet:r,balance:i};throw new vc.XRPLFaucetError(`Unable to fund address with faucet after waiting ${$k*Uk} seconds`)}catch(i){throw i instanceof Error?new vc.XRPLFaucetError(i.message):i}})}function U8(t,e){return Oc(this,void 0,void 0,function*(){return Promise.reject(new vc.XRPLFaucetError(`Request failed: ${JSON.stringify({body:e||{},contentType:t.headers.get("Content-Type"),statusCode:t.status})}`))})}function V8(t,e,r){return Oc(this,void 0,void 0,function*(){return new Promise((s,i)=>{let a=Uk;const o=setInterval(()=>Oc(this,void 0,void 0,function*(){a<0?(clearInterval(o),s(r)):a-=1;try{let l;try{l=Number(yield t.getXrpBalance(e))}catch{}l>r&&(clearInterval(o),s(l))}catch(l){clearInterval(o),l instanceof Error&&i(new vc.XRPLFaucetError(`Unable to check if the address ${e} balance has increased. Error: ${l.message}`)),i(l)}}),$k*1e3)})})}var Vk={},Ow={};Object.defineProperty(Ow,"__esModule",{value:!0});const H8=zb;class hh extends H8.EventEmitter{constructor(e,r,s){super(),this.ws=new WebSocket(e),this.ws.onclose=i=>{let a;i.reason&&(a=new TextEncoder().encode(i.reason)),this.emit("close",i.code,a)},this.ws.onopen=()=>{this.emit("open")},this.ws.onerror=i=>{this.emit("error",i)},this.ws.onmessage=i=>{this.emit("message",i.data)}}get readyState(){return this.ws.readyState}close(e,r){this.readyState===1&&this.ws.close(e,r)}send(e){this.ws.send(e)}}hh.CONNECTING=0;hh.OPEN=1;hh.CLOSING=2;hh.CLOSED=3;Ow.default=hh;var Iw={},z8=Ce&&Ce.__awaiter||function(t,e,r,s){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};Object.defineProperty(Iw,"__esModule",{value:!0});class X8{constructor(){this.promisesAwaitingConnection=[]}resolveAllAwaiting(){this.promisesAwaitingConnection.map(({resolve:e})=>e()),this.promisesAwaitingConnection=[]}rejectAllAwaiting(e){this.promisesAwaitingConnection.map(({reject:r})=>r(e)),this.promisesAwaitingConnection=[]}awaitConnection(){return z8(this,void 0,void 0,function*(){return new Promise((e,r)=>{this.promisesAwaitingConnection.push({resolve:e,reject:r})})})}}Iw.default=X8;var Lw={};Object.defineProperty(Lw,"__esModule",{value:!0});const W8=100,q8=1e3;class K8{constructor(e={}){var r,s;this.factor=2,this.numAttempts=0,this.ms=(r=e.min)!==null&&r!==void 0?r:W8,this.max=(s=e.max)!==null&&s!==void 0?s:q8}get attempts(){return this.numAttempts}duration(){const e=this.ms*Math.pow(this.factor,this.numAttempts);return this.numAttempts+=1,Math.floor(Math.min(e,this.max))}reset(){this.numAttempts=0}}Lw.default=K8;var Mw={},G8=Ce&&Ce.__awaiter||function(t,e,r,s){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};Object.defineProperty(Mw,"__esModule",{value:!0});const Zi=et;class Y8{constructor(){this.nextId=0,this.promisesAwaitingResponse=new Map}addPromise(e,r){return G8(this,void 0,void 0,function*(){return new Promise((s,i)=>{this.promisesAwaitingResponse.set(e,{resolve:s,reject:i,timer:r})})})}resolve(e,r){const s=this.promisesAwaitingResponse.get(e);if(s==null)throw new Zi.XrplError(`No existing promise with id ${e}`,{type:"resolve",response:r});clearTimeout(s.timer),s.resolve(r),this.deletePromise(e)}reject(e,r){const s=this.promisesAwaitingResponse.get(e);if(s==null)throw new Zi.XrplError(`No existing promise with id ${e}`,{type:"reject",error:r});clearTimeout(s.timer),s.reject(r),this.deletePromise(e)}rejectAll(e){this.promisesAwaitingResponse.forEach((r,s,i)=>{this.reject(s,e),this.deletePromise(s)})}createRequest(e,r){let s;e.id==null?(s=this.nextId,this.nextId+=1):s=e.id;const i=JSON.stringify(Object.assign(Object.assign({},e),{id:s})),a=setTimeout(()=>{this.reject(s,new Zi.TimeoutError(`Timeout for request: ${JSON.stringify(e)} with id ${s}`,e))},r);if(a.unref&&a.unref(),this.promisesAwaitingResponse.has(s))throw clearTimeout(a),new Zi.XrplError(`Response with id '${s}' is already pending`,e);const o=new Promise((l,c)=>{this.promisesAwaitingResponse.set(s,{resolve:l,reject:c,timer:a})});return[s,i,o]}handleResponse(e){var r,s;if(e.id==null||!(typeof e.id=="string"||typeof e.id=="number"))throw new Zi.ResponseFormatError("valid id not found in response",e);if(this.promisesAwaitingResponse.has(e.id)){if(e.status==null){const i=new Zi.ResponseFormatError("Response has no status");this.reject(e.id,i)}if(e.status==="error"){const i=e,a=new Zi.RippledError((r=i.error_message)!==null&&r!==void 0?r:i.error,i);this.reject(e.id,a);return}if(e.status!=="success"){const i=new Zi.ResponseFormatError(`unrecognized response.status: ${(s=e.status)!==null&&s!==void 0?s:""}`,e);this.reject(e.id,i);return}delete e.status,this.resolve(e.id,e)}}deletePromise(e){this.promisesAwaitingResponse.delete(e)}}Mw.default=Y8;(function(t){var e=Ce&&Ce.__awaiter||function(x,b,y,g){function w(S){return S instanceof y?S:new y(function(_){_(S)})}return new(y||(y=Promise))(function(S,_){function A(U){try{Q(g.next(U))}catch(q){_(q)}}function B(U){try{Q(g.throw(U))}catch(q){_(q)}}function Q(U){U.done?S(U.value):w(U.value).then(A,B)}Q((g=g.apply(x,b||[])).next())})},r=Ce&&Ce.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(t,"__esModule",{value:!0}),t.Connection=t.INTENTIONAL_DISCONNECT_CODE=void 0;const s=At,i=r(Ow),a=zb,o=et,l=r(Iw),c=r(Lw),d=r(Mw),u=60,h=20,p=5;t.INTENTIONAL_DISCONNECT_CODE=4e3;function f(x,b){const y={agent:b.agent};b.headers&&(y.headers=b.headers),b.authorization!=null&&(y.headers=Object.assign(Object.assign({},y.headers),{Authorization:`Basic ${btoa(b.authorization)}`}));const g=Object.assign({},y);return new i.default(x,g)}function m(x,b){return e(this,void 0,void 0,function*(){return new Promise((y,g)=>{x.send(b,w=>{w?g(new o.DisconnectedError(w.message,w)):y()})})})}class v extends a.EventEmitter{constructor(b,y={}){super(),this.ws=null,this.reconnectTimeoutID=null,this.heartbeatIntervalID=null,this.retryConnectionBackoff=new c.default({min:100,max:u*1e3}),this.requestManager=new d.default,this.connectionManager=new l.default,this.trace=()=>{},this.url=b,this.config=Object.assign({timeout:h*1e3,connectionTimeout:p*1e3},y),typeof y.trace=="function"?this.trace=y.trace:y.trace&&(this.trace=console.log)}get state(){return this.ws?this.ws.readyState:i.default.CLOSED}get shouldBeConnected(){return this.ws!==null}isConnected(){return this.state===i.default.OPEN}connect(){return e(this,void 0,void 0,function*(){if(this.isConnected())return Promise.resolve();if(this.state===i.default.CONNECTING)return this.connectionManager.awaitConnection();if(!this.url)return Promise.reject(new o.ConnectionError("Cannot connect because no server was specified"));if(this.ws!=null)return Promise.reject(new o.XrplError("Websocket connection never cleaned up.",{state:this.state}));const b=setTimeout(()=>{this.onConnectionFailed(new o.ConnectionError(`Error: connect() timed out after ${this.config.connectionTimeout} ms. If your internet connection is working, the rippled server may be blocked or inaccessible. You can also try setting the 'connectionTimeout' option in the Client constructor.`))},this.config.connectionTimeout);if(this.ws=f(this.url,this.config),this.ws==null)throw new o.XrplError("Connect: created null websocket");return this.ws.on("error",y=>this.onConnectionFailed(y)),this.ws.on("error",()=>clearTimeout(b)),this.ws.on("close",y=>this.onConnectionFailed(y)),this.ws.on("close",()=>clearTimeout(b)),this.ws.once("open",()=>{this.onceOpen(b)}),this.connectionManager.awaitConnection()})}disconnect(){return e(this,void 0,void 0,function*(){return this.clearHeartbeatInterval(),this.reconnectTimeoutID!==null&&(clearTimeout(this.reconnectTimeoutID),this.reconnectTimeoutID=null),this.state===i.default.CLOSED||this.ws==null?Promise.resolve(void 0):new Promise(b=>{this.ws==null&&b(void 0),this.ws!=null&&this.ws.once("close",y=>b(y)),this.ws!=null&&this.state!==i.default.CLOSING&&this.ws.close(t.INTENTIONAL_DISCONNECT_CODE)})})}reconnect(){return e(this,void 0,void 0,function*(){this.emit("reconnect"),yield this.disconnect(),yield this.connect()})}request(b,y){return e(this,void 0,void 0,function*(){if(!this.shouldBeConnected||this.ws==null)throw new o.NotConnectedError(JSON.stringify(b),b);const[g,w,S]=this.requestManager.createRequest(b,y??this.config.timeout);return this.trace("send",w),m(this.ws,w).catch(_=>{this.requestManager.reject(g,_)}),S})}getUrl(){var b;return(b=this.url)!==null&&b!==void 0?b:""}onMessage(b){this.trace("receive",b);let y;try{y=JSON.parse(b)}catch(g){g instanceof Error&&this.emit("error","badMessage",g.message,b);return}if(y.type==null&&y.error){this.emit("error",y.error,y.error_message,y);return}if(y.type&&this.emit(y.type,y),y.type==="response")try{this.requestManager.handleResponse(y)}catch(g){g instanceof Error?this.emit("error","badMessage",g.message,b):this.emit("error","badMessage",g,g)}}onceOpen(b){return e(this,void 0,void 0,function*(){if(this.ws==null)throw new o.XrplError("onceOpen: ws is null");this.ws.removeAllListeners(),clearTimeout(b),this.ws.on("message",y=>this.onMessage(y)),this.ws.on("error",y=>this.emit("error","websocket",y.message,y)),this.ws.once("close",(y,g)=>{if(this.ws==null)throw new o.XrplError("onceClose: ws is null");this.clearHeartbeatInterval(),this.requestManager.rejectAll(new o.DisconnectedError(`websocket was closed, ${g?(0,s.hexToString)((0,s.bytesToHex)(g)):""}`)),this.ws.removeAllListeners(),this.ws=null,y===void 0?this.emit("disconnected",1011):this.emit("disconnected",y),y!==t.INTENTIONAL_DISCONNECT_CODE&&y!==void 0&&this.intentionalDisconnect()});try{this.retryConnectionBackoff.reset(),this.startHeartbeatInterval(),this.connectionManager.resolveAllAwaiting(),this.emit("connected")}catch(y){y instanceof Error&&(this.connectionManager.rejectAllAwaiting(y),yield this.disconnect().catch(()=>{}))}})}intentionalDisconnect(){const b=this.retryConnectionBackoff.duration();this.trace("reconnect",`Retrying connection in ${b}ms.`),this.emit("reconnecting",this.retryConnectionBackoff.attempts),this.reconnectTimeoutID=setTimeout(()=>{this.reconnect().catch(y=>{this.emit("error","reconnect",y.message,y)})},b)}clearHeartbeatInterval(){this.heartbeatIntervalID&&clearInterval(this.heartbeatIntervalID)}startHeartbeatInterval(){this.clearHeartbeatInterval(),this.heartbeatIntervalID=setInterval(()=>{this.heartbeat()},this.config.timeout)}heartbeat(){return e(this,void 0,void 0,function*(){this.request({command:"ping"}).catch(()=>e(this,void 0,void 0,function*(){return this.reconnect().catch(b=>{this.emit("error","reconnect",b.message,b)})}))})}onConnectionFailed(b){this.ws&&(this.ws.removeAllListeners(),this.ws.on("error",()=>{}),this.ws.close(),this.ws=null),typeof b=="number"?this.connectionManager.rejectAllAwaiting(new o.NotConnectedError(`Connection failed with code ${b}.`,{code:b})):b!=null&&b.message?this.connectionManager.rejectAllAwaiting(new o.NotConnectedError(b.message,b)):this.connectionManager.rejectAllAwaiting(new o.NotConnectedError("Connection failed."))}}t.Connection=v})(Vk);var Ic={},J8=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ic,"__esModule",{value:!0});Ic.handleStreamPartialPayment=Ic.handlePartialPayment=void 0;const ap=J8(ks),Q8=hn,Ld=uh,Z8=Rr,Hk=2001;function eV(t,e){if(typeof t=="string"&&typeof e=="string")return t===e;if(typeof t=="string"||typeof e=="string")return!1;if((0,Ld.isMPTAmount)(t)&&(0,Ld.isMPTAmount)(e)){const i=new ap.default(t.value),a=new ap.default(e.value);return t.mpt_issuance_id===e.mpt_issuance_id&&i.isEqualTo(a)}if((0,Ld.isMPTAmount)(t)||(0,Ld.isMPTAmount)(e))return!1;const r=new ap.default(t.value),s=new ap.default(e.value);return t.currency===e.currency&&t.issuer===e.issuer&&r.isEqualTo(s)}function Ou(t,e){var r;if(t==null||e==null||t.TransactionType!=="Payment")return!1;let s=e;if(typeof s=="string"){if(s==="unavailable")return!1;s=(0,Q8.decode)(s)}if(!(typeof t.Flags=="number"?(0,Z8.isFlagEnabled)(t.Flags,Ld.PaymentFlags.tfPartialPayment):(r=t.Flags)===null||r===void 0?void 0:r.tfPartialPayment))return!1;const a=s.delivered_amount,o=t.DeliverMax;return a===void 0?!1:!eV(a,o)}function tV(t){return Ou(t.result.tx_json,t.result.meta)}function rV(t){return Ou(t.result.tx_json,t.result.metadata)}function sV(t){const{transactions:e}=t.result;return e.some(s=>{if(s.tx_json!=null){const a=s;return Ou(a.tx_json,a.meta)}const i=s;return Ou(i.tx,i.meta)})}function nV(t,e){switch(t){case"tx":return tV(e);case"transaction_entry":return rV(e);case"account_tx":return sV(e);default:return!1}}function iV(t,e){var r;if(nV(t,e)){const s=(r=e.warnings)!==null&&r!==void 0?r:[],i={id:Hk,message:"This response contains a Partial Payment"};s.push(i),e.warnings=s}}Ic.handlePartialPayment=iV;function aV(t,e){var r,s;if(Ou((r=t.tx_json)!==null&&r!==void 0?r:t.transaction,t.meta)){const i=(s=t.warnings)!==null&&s!==void 0?s:[],a={id:Hk,message:"This response contains a Partial Payment"};i.push(a),t.warnings=i,e("Partial payment received",JSON.stringify(t))}}Ic.handleStreamPartialPayment=aV;var qr=Ce&&Ce.__awaiter||function(t,e,r,s){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};Object.defineProperty(p0,"__esModule",{value:!0});p0.Client=void 0;const oV=zb,yo=et,lV=Xb,cV=li,vo=jC,Ml=vs,dV=$0,yn=Pr,fx=k0,uV=xl,hV=Aa,sS=Vk,nS=Ic;function pV(t){switch(t){case"account_channels":return"channels";case"account_lines":return"lines";case"account_objects":return"account_objects";case"account_tx":return"transactions";case"account_offers":case"book_offers":return"offers";case"ledger_data":return"state";default:return null}}function fV(t,e,r){if(e>r)throw new Error("Illegal clamp bounds");return Math.min(Math.max(t,e),r)}const mV=1.2,gV="2",xV=10,yV=400,vV=1e3;class bV extends oV.EventEmitter{constructor(e,r={}){var s,i;if(super(),this.apiVersion=lV.DEFAULT_API_VERSION,typeof e!="string"||!/wss?(?:\+unix)?:\/\//u.exec(e))throw new yo.ValidationError("server URI must start with `wss://`, `ws://`, `wss+unix://`, or `ws+unix://`.");this.feeCushion=(s=r.feeCushion)!==null&&s!==void 0?s:mV,this.maxFeeXRP=(i=r.maxFeeXRP)!==null&&i!==void 0?i:gV,this.connection=new sS.Connection(e,r),this.connection.on("error",(a,o,l)=>{this.emit("error",a,o,l)}),this.connection.on("reconnect",()=>{this.connection.on("connected",()=>this.emit("connected"))}),this.connection.on("disconnected",a=>{let o=a;o===sS.INTENTIONAL_DISCONNECT_CODE&&(o=vV),this.emit("disconnected",o)}),this.connection.on("ledgerClosed",a=>{this.emit("ledgerClosed",a)}),this.connection.on("transaction",a=>{(0,nS.handleStreamPartialPayment)(a,this.connection.trace),this.emit("transaction",a)}),this.connection.on("validationReceived",a=>{this.emit("validationReceived",a)}),this.connection.on("manifestReceived",a=>{this.emit("manifestReceived",a)}),this.connection.on("peerStatusChange",a=>{this.emit("peerStatusChange",a)}),this.connection.on("consensusPhase",a=>{this.emit("consensusPhase",a)}),this.connection.on("path_find",a=>{this.emit("path_find",a)})}get url(){return this.connection.getUrl()}request(e){var r;return qr(this,void 0,void 0,function*(){const s=Object.assign(Object.assign({},e),{account:typeof e.account=="string"?(0,vo.ensureClassicAddress)(e.account):void 0,api_version:(r=e.api_version)!==null&&r!==void 0?r:this.apiVersion}),i=yield this.connection.request(s);return(0,nS.handlePartialPayment)(e.command,i),i})}requestNextPage(e,r){return qr(this,void 0,void 0,function*(){if(!r.result.marker)return Promise.reject(new yo.NotFoundError("response does not have a next page"));const s=Object.assign(Object.assign({},e),{marker:r.result.marker});return this.request(s)})}on(e,r){return super.on(e,r)}requestAll(e,r){return qr(this,void 0,void 0,function*(){const s=r??pV(e.command);if(!s)throw new yo.ValidationError(`no collect key for command ${e.command}`);const i=e.limit==null?1/0:e.limit;let a=0,o=e.marker;const l=[];do{const c=fV(i-a,xV,yV),d=Object.assign(Object.assign({},e),{limit:c,marker:o}),u=yield this.connection.request(d),h=u.result;if(!(s in h))throw new yo.XrplError(`${s} not in result`);const p=h[s];o=h.marker,l.push(u),Array.isArray(p)&&(a+=p.length)}while(o&&a<i);return l})}getServerInfo(){var e;return qr(this,void 0,void 0,function*(){try{const r=yield this.request({command:"server_info"});this.networkID=(e=r.result.info.network_id)!==null&&e!==void 0?e:void 0,this.buildVersion=r.result.info.build_version}catch(r){console.error(r)}})}connect(){return qr(this,void 0,void 0,function*(){return this.connection.connect().then(()=>qr(this,void 0,void 0,function*(){yield this.getServerInfo(),this.emit("connected")}))})}disconnect(){return qr(this,void 0,void 0,function*(){yield this.connection.disconnect()})}isConnected(){return this.connection.isConnected()}autofill(e,r){return qr(this,void 0,void 0,function*(){const s=Object.assign({},e);(0,Ml.setValidAddresses)(s),(0,cV.setTransactionFlagsToNumber)(s);const i=[];if(s.NetworkID==null&&(s.NetworkID=(0,Ml.txNeedsNetworkID)(this)?this.networkID:void 0),s.Sequence==null&&i.push((0,Ml.setNextValidSequenceNumber)(this,s)),s.Fee==null&&i.push((0,Ml.calculateFeePerTransactionType)(this,s,r)),s.LastLedgerSequence==null&&i.push((0,Ml.setLatestValidatedLedgerSequence)(this,s)),s.TransactionType==="AccountDelete"&&i.push((0,Ml.checkAccountDeleteBlockers)(this,s)),s.TransactionType==="Payment"&&s.DeliverMax!=null){if(s.Amount==null&&(s.Amount=s.DeliverMax),s.Amount!=null&&s.Amount!==s.DeliverMax)return Promise.reject(new yo.ValidationError("PaymentTransaction: Amount and DeliverMax fields must be identical when both are provided"));delete s.DeliverMax}return Promise.all(i).then(()=>s)})}submit(e,r){return qr(this,void 0,void 0,function*(){const s=yield(0,vo.getSignedTx)(this,e,r);return(0,vo.submitRequest)(this,s,r==null?void 0:r.failHard)})}submitAndWait(e,r){return qr(this,void 0,void 0,function*(){const s=yield(0,vo.getSignedTx)(this,e,r),i=(0,vo.getLastLedgerSequence)(s);if(i==null)throw new yo.ValidationError("Transaction must contain a LastLedgerSequence value for reliable submission.");const a=yield(0,vo.submitRequest)(this,s,r==null?void 0:r.failHard),o=fx.hashes.hashSignedTx(s);return(0,vo.waitForFinalTransactionOutcome)(this,o,i,a.result.engine_result)})}prepareTransaction(e,r){return qr(this,void 0,void 0,function*(){return this.autofill(e,r)})}getXrpBalance(e,r={}){var s;return qr(this,void 0,void 0,function*(){const i={command:"account_info",account:e,ledger_index:(s=r.ledger_index)!==null&&s!==void 0?s:"validated",ledger_hash:r.ledger_hash},a=yield this.request(i);return(0,fx.dropsToXrp)(a.result.account_data.Balance)})}getBalances(e,r={}){var s;return qr(this,void 0,void 0,function*(){const i=[];let a=Promise.resolve(0);r.peer||(a=this.getXrpBalance(e,{ledger_hash:r.ledger_hash,ledger_index:r.ledger_index}));const o={command:"account_lines",account:e,ledger_index:(s=r.ledger_index)!==null&&s!==void 0?s:"validated",ledger_hash:r.ledger_hash,peer:r.peer,limit:r.limit},l=this.requestAll(o);return yield Promise.all([a,l]).then(([c,d])=>{const u=d.flatMap(h=>(0,dV.formatBalances)(h.result.lines));c!==0&&i.push({currency:"XRP",value:c.toString()}),i.push(...u)}),i.slice(0,r.limit)})}getOrderbook(e,r,s={}){return qr(this,void 0,void 0,function*(){(0,yn.validateOrderbookOptions)(s);const i=(0,yn.createBookOffersRequest)(e,r,s),a=yield(0,yn.requestAllOffers)(this,i),o=yield(0,yn.requestAllOffers)(this,(0,yn.reverseRequest)(i)),l=(0,yn.extractOffers)(a),c=(0,yn.extractOffers)(o),d=(0,yn.combineOrders)(l,c),{buy:u,sell:h}=(0,yn.separateBuySellOrders)(d);return{buy:(0,yn.sortAndLimitOffers)(u,s.limit),sell:(0,yn.sortAndLimitOffers)(h,s.limit)}})}getLedgerIndex(){return qr(this,void 0,void 0,function*(){return(yield this.request({command:"ledger",ledger_index:"validated"})).result.ledger_index})}fundWallet(e,r={}){return qr(this,void 0,void 0,function*(){if(!this.isConnected())throw new yo.RippledError("Client not connected, cannot call faucet");const s=!!e,i=e&&(0,fx.isValidClassicAddress)(e.classicAddress)?e:uV.Wallet.generate(),a={destination:i.classicAddress,xrpAmount:r.amount,usageContext:r.usageContext,userAgent:"xrpl.js"};let o=0;if(s)try{o=Number(yield this.getXrpBalance(i.classicAddress))}catch{}return(0,hV.requestFunding)(r,this,o,i,a)})}}p0.Client=bV;var zk={},Xk={},Tm={};Object.defineProperty(Tm,"__esModule",{value:!0});Tm.AMENDMENTS_ID=void 0;Tm.AMENDMENTS_ID="7DB0788C020F02780A673DC74757F23823FA3014C1866E72CC4CD8B226CD6EF4";var Cm={};Object.defineProperty(Cm,"__esModule",{value:!0});Cm.FEE_SETTINGS_ID=void 0;Cm.FEE_SETTINGS_ID="4BC50C9B0D8515D3EAAE1E74B29A95804346C491EE1A95BF25E4AAB854A6A651";var km={};Object.defineProperty(km,"__esModule",{value:!0});km.NEGATIVE_UNL_ID=void 0;km.NEGATIVE_UNL_ID="2E8A59AA9D3B5B186B0B9E0F62E6C02587CA74A4D778938E957B6357D364B244";var Am={};Object.defineProperty(Am,"__esModule",{value:!0});Am.RippleStateFlags=void 0;var iS;(function(t){t[t.lsfLowReserve=65536]="lsfLowReserve",t[t.lsfHighReserve=131072]="lsfHighReserve",t[t.lsfLowAuth=262144]="lsfLowAuth",t[t.lsfHighAuth=524288]="lsfHighAuth",t[t.lsfLowNoRipple=1048576]="lsfLowNoRipple",t[t.lsfHighNoRipple=2097152]="lsfHighNoRipple",t[t.lsfLowFreeze=4194304]="lsfLowFreeze",t[t.lsfHighFreeze=8388608]="lsfHighFreeze",t[t.lsfAMMNode=16777216]="lsfAMMNode"})(iS||(Am.RippleStateFlags=iS={}));var Pm={};Object.defineProperty(Pm,"__esModule",{value:!0});Pm.SignerListFlags=void 0;var aS;(function(t){t[t.lsfOneOwnerCount=65536]="lsfOneOwnerCount"})(aS||(Pm.SignerListFlags=aS={}));(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SignerListFlags=t.RippleStateFlags=t.OfferFlags=t.NEGATIVE_UNL_ID=t.FEE_SETTINGS_ID=t.AMENDMENTS_ID=t.AccountRootFlags=void 0;const e=Gu;Object.defineProperty(t,"AccountRootFlags",{enumerable:!0,get:function(){return e.AccountRootFlags}});const r=Tm;Object.defineProperty(t,"AMENDMENTS_ID",{enumerable:!0,get:function(){return r.AMENDMENTS_ID}});const s=Cm;Object.defineProperty(t,"FEE_SETTINGS_ID",{enumerable:!0,get:function(){return s.FEE_SETTINGS_ID}});const i=km;Object.defineProperty(t,"NEGATIVE_UNL_ID",{enumerable:!0,get:function(){return i.NEGATIVE_UNL_ID}});const a=ch;Object.defineProperty(t,"OfferFlags",{enumerable:!0,get:function(){return a.OfferFlags}});const o=Am;Object.defineProperty(t,"RippleStateFlags",{enumerable:!0,get:function(){return o.RippleStateFlags}});const l=Pm;Object.defineProperty(t,"SignerListFlags",{enumerable:!0,get:function(){return l.SignerListFlags}})})(Xk);var Wk={};Object.defineProperty(Wk,"__esModule",{value:!0});(function(t){var e=Ce&&Ce.__createBinding||(Object.create?function(o,l,c,d){d===void 0&&(d=c);var u=Object.getOwnPropertyDescriptor(l,c);(!u||("get"in u?!l.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return l[c]}}),Object.defineProperty(o,d,u)}:function(o,l,c,d){d===void 0&&(d=c),o[d]=l[c]}),r=Ce&&Ce.__setModuleDefault||(Object.create?function(o,l){Object.defineProperty(o,"default",{enumerable:!0,value:l})}:function(o,l){o.default=l}),s=Ce&&Ce.__importStar||function(o){if(o&&o.__esModule)return o;var l={};if(o!=null)for(var c in o)c!=="default"&&Object.prototype.hasOwnProperty.call(o,c)&&e(l,o,c);return r(l,o),l},i=Ce&&Ce.__exportStar||function(o,l){for(var c in o)c!=="default"&&!Object.prototype.hasOwnProperty.call(l,c)&&e(l,o,c)};Object.defineProperty(t,"__esModule",{value:!0}),t.parseTransactionFlags=t.parseAccountRootFlags=t.setTransactionFlagsToNumber=t.LedgerEntry=void 0,t.LedgerEntry=s(Xk);var a=li;Object.defineProperty(t,"setTransactionFlagsToNumber",{enumerable:!0,get:function(){return a.setTransactionFlagsToNumber}}),Object.defineProperty(t,"parseAccountRootFlags",{enumerable:!0,get:function(){return a.parseAccountRootFlags}}),Object.defineProperty(t,"parseTransactionFlags",{enumerable:!0,get:function(){return a.parseTransactionFlags}}),i(Wk,t),i(uh,t),i(Xb,t)})(zk);var Rm={},qk={},Om={},Br={};Object.defineProperty(Br,"__esModule",{value:!0});Br.parseSecretString=Br.checkChecksum=Br.calculateChecksum=Br.secretToEntropy=Br.entropyToSecret=Br.randomSecret=Br.randomEntropy=void 0;const Rf=At;function Kk(){return(0,Rf.randomBytes)(16)}Br.randomEntropy=Kk;function Gk(t,e){return e*(t*2+1)%9}Br.calculateChecksum=Gk;function Yk(t,e,r){let s,i;if(typeof e=="string"){if(e.length!==6)throw new Error("value must have a length of 6");s=parseInt(e.slice(5),10),i=parseInt(e.slice(0,5),10)}else{if(typeof r!="number")throw new Error("checksum must be a number when value is a number");s=r,i=e}return i*(t*2+1)%9===s}Br.checkChecksum=Yk;function Jk(t){const e=new Array(Math.ceil(t.length/2)),r=Array.from(e,(s,i)=>{const a=t.slice(i*2,(i+1)*2),o=parseInt((0,Rf.bytesToHex)(a),16);return"0".repeat(5-String(o).length)+String(o)+String(Gk(i,o))});if(r.length!==8)throw new Error("Chucks must have 8 digits");return r}Br.entropyToSecret=Jk;function wV(){return Jk(Kk())}Br.randomSecret=wV;function _V(t){return(0,Rf.concat)(t.map((e,r)=>{const s=Number(e.slice(0,5)),i=Number(e.slice(5));if(e.length!==6)throw new Error("Invalid secret: number invalid");if(!Yk(r,s,i))throw new Error("Invalid secret part: checksum invalid");const a=`0000${s.toString(16)}`.slice(-4);return(0,Rf.hexToBytes)(a)}))}Br.secretToEntropy=_V;function NV(t){const e=t.replace(/[^0-9]/gu,"");if(e.length!==48)throw new Error("Invalid secret string (should contain 8 blocks of 6 digits");return Array.from(new Array(8),(r,s)=>e.slice(s*6,(s+1)*6))}Br.parseSecretString=NV;Object.defineProperty(Om,"__esModule",{value:!0});Om.Account=void 0;const mx=eo,op=Br;class SV{constructor(e){this._account={familySeed:"",address:"",keypair:{publicKey:"",privateKey:""}},typeof e=="string"?this._secret=(0,op.parseSecretString)(e):Array.isArray(e)?this._secret=e:e instanceof Uint8Array?this._secret=(0,op.entropyToSecret)(e):this._secret=(0,op.randomSecret)(),jV(this._secret),this.derive()}getSecret(){return this._secret}getSecretString(){return this._secret.join(" ")}getAddress(){return this._account.address}getFamilySeed(){return this._account.familySeed}getKeypair(){return this._account.keypair}toString(){return this.getSecretString()}derive(){try{const e=(0,op.secretToEntropy)(this._secret);this._account.familySeed=(0,mx.generateSeed)({entropy:e}),this._account.keypair=(0,mx.deriveKeypair)(this._account.familySeed),this._account.address=(0,mx.deriveAddress)(this._account.keypair.publicKey)}catch(e){let r="Unknown Error";throw e instanceof Error&&(r=e.message),new Error(r)}}}Om.Account=SV;function jV(t){if(t.length!==8)throw new Error("Secret must have 8 numbers");t.forEach(e=>{if(e.length!==6)throw new Error("Each secret number must be 6 digits")})}(function(t){var e=Ce&&Ce.__createBinding||(Object.create?function(s,i,a,o){o===void 0&&(o=a);var l=Object.getOwnPropertyDescriptor(i,a);(!l||("get"in l?!i.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(s,o,l)}:function(s,i,a,o){o===void 0&&(o=a),s[o]=i[a]}),r=Ce&&Ce.__exportStar||function(s,i){for(var a in s)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,s,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Om,t),r(Br,t)})(qk);var EV=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Rm,"__esModule",{value:!0});Rm.walletFromSecretNumbers=void 0;const TV=qk,oS=EV(dh),CV=xl;function kV(t,e){var r;const s=new TV.Account(t).getFamilySeed(),i={masterAddress:void 0,algorithm:void 0};return e===void 0?i.algorithm=oS.default.secp256k1:(i.masterAddress=e.masterAddress,i.algorithm=(r=e.algorithm)!==null&&r!==void 0?r:oS.default.secp256k1),CV.Wallet.fromSecret(s,i)}Rm.walletFromSecretNumbers=kV;(function(t){var e=Ce&&Ce.__createBinding||(Object.create?function(d,u,h,p){p===void 0&&(p=h);var f=Object.getOwnPropertyDescriptor(u,h);(!f||("get"in f?!u.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return u[h]}}),Object.defineProperty(d,p,f)}:function(d,u,h,p){p===void 0&&(p=h),d[p]=u[h]}),r=Ce&&Ce.__exportStar||function(d,u){for(var h in d)h!=="default"&&!Object.prototype.hasOwnProperty.call(u,h)&&e(u,d,h)},s=Ce&&Ce.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(t,"__esModule",{value:!0}),t.rfc1751MnemonicToKey=t.keyToRFC1751Mnemonic=t.walletFromSecretNumbers=t.Wallet=t.ECDSA=t.Client=void 0;var i=p0;Object.defineProperty(t,"Client",{enumerable:!0,get:function(){return i.Client}}),r(zk,t),r(k0,t);var a=dh;Object.defineProperty(t,"ECDSA",{enumerable:!0,get:function(){return s(a).default}}),r(et,t);var o=xl;Object.defineProperty(t,"Wallet",{enumerable:!0,get:function(){return o.Wallet}});var l=Rm;Object.defineProperty(t,"walletFromSecretNumbers",{enumerable:!0,get:function(){return l.walletFromSecretNumbers}});var c=sl;Object.defineProperty(t,"keyToRFC1751Mnemonic",{enumerable:!0,get:function(){return c.keyToRFC1751Mnemonic}}),Object.defineProperty(t,"rfc1751MnemonicToKey",{enumerable:!0,get:function(){return c.rfc1751MnemonicToKey}}),r(nl,t)})(Ve);const sn=[{url:"wss://xrplcluster.com",name:"XRPL Cluster"},{url:"wss://ancient-stylish-snowflake.xrp-mainnet.quiknode.pro/4e504cf032eb3a85a185ec069480a11363600a96",name:"MEMEKINGS NODE"},{url:"wss://s1.ripple.com",name:"Ripple S1"},{url:"wss://s2.ripple.com",name:"Ripple S2"},{url:"wss://xrpl.ws",name:"XRPL.ws"}];let ti=null;class AV{constructor(){this.client=null,this.connecting=!1,this.serverIndex=0}getNextServer(){return this.serverIndex=(this.serverIndex+1)%sn.length,sn[this.serverIndex]}async connect(){if(this.client&&this.client.isConnected())return this.client;if(this.connecting)return await new Promise(e=>setTimeout(e,100)),this.connect();this.connecting=!0;try{const e=ti!==null?ti:this.serverIndex,r=sn[e];return this.client=new Ve.Client(r.url),await Promise.race([this.client.connect(),new Promise((s,i)=>setTimeout(()=>i(new Error("Connection timeout")),1e4))]),console.log(`✅ Connected to ${r.name}`),this.connecting=!1,this.client}catch(e){this.connecting=!1;const r=ti!==null?ti:this.serverIndex;if(console.error(`Failed to connect to ${sn[r].name}:`,e.message),ti===null){const s=this.getNextServer();return console.log(`Switching to ${s.name}`),this.connect()}else throw new Error(`Failed to connect to selected node: ${sn[r].name}`)}}async disconnect(){if(this.client&&this.client.isConnected()){try{await this.client.disconnect()}catch(e){console.error("Error disconnecting:",e)}this.client=null}}isConnected(){return this.client&&this.client.isConnected()}}const Xo=new AV;async function PV(t){return new Promise(e=>setTimeout(e,t))}async function Im(t,e=5,r=1e3){var i,a,o,l,c,d,u,h;let s;for(let p=0;p<e;p++)try{const f=await Xo.connect();return await t(f)}catch(f){s=f;const m=((i=f.message)==null?void 0:i.includes("rate"))||((a=f.message)==null?void 0:a.includes("limit"))||((o=f.message)==null?void 0:o.includes("Too many"))||((l=f.data)==null?void 0:l.error)==="slowDown"||((c=f.data)==null?void 0:c.error)==="tooBusy",v=((d=f.message)==null?void 0:d.includes("timeout"))||((u=f.message)==null?void 0:u.includes("disconnect"))||((h=f.message)==null?void 0:h.includes("WebSocket"))||!Xo.isConnected();if(m||v){const x=r*Math.pow(2,p),b=Math.random()*1e3,y=x+b;console.log(`Rate limit or network error detected. Retry ${p+1}/${e} after ${Math.round(y)}ms`),v&&await Xo.disconnect(),await PV(y);continue}throw f}throw new Error(`Max retries (${e}) exceeded. Last error: ${s.message}`)}async function Qk(){return Xo.connect()}async function RV(){return Xo.disconnect()}async function Zk(t,e=5){return Im(async r=>await r.request(t),e)}async function OV(t,e,r=5){return Im(async s=>await s.submitAndWait(t,{wallet:e}),r)}async function IV(t,e=5){return Im(async r=>await r.autofill(t),e)}function wv(){return sn}function eA(){const t=ti!==null?ti:Xo.serverIndex;return sn[t]}async function tA(t){if(t<0||t>=sn.length)throw new Error("Invalid server index");ti=t,localStorage.setItem("selectedNodeIndex",t.toString()),await Xo.disconnect(),window.dispatchEvent(new CustomEvent("networkChanged",{detail:sn[t]}))}function LV(){ti=null,localStorage.removeItem("selectedNodeIndex")}function rA(){const t=localStorage.getItem("selectedNodeIndex");if(t!==null){const e=parseInt(t,10);if(e>=0&&e<sn.length)return ti=e,sn[e]}return null}const tr=Object.freeze(Object.defineProperty({__proto__:null,XRPL_SERVERS:sn,autofillWithRetry:IV,clearManualServer:LV,disconnectClient:RV,getAvailableServers:wv,getClient:Qk,getCurrentServer:eA,loadSavedServer:rA,requestWithRetry:Zk,setManualServer:tA,submitWithRetry:OV,withRetry:Im},Symbol.toStringTag,{value:"Module"})),gx=new Map,MV=1e4;async function Of(t,e=!0){var r;if(!t)return 0;if(e&&gx.has(t)){const s=gx.get(t);if(Date.now()-s.timestamp<MV)return s.balance}try{const s=await Zk({command:"account_info",account:t,ledger_index:"validated"}),i=parseFloat(s.result.account_data.Balance)/1e6;return gx.set(t,{balance:i,timestamp:Date.now()}),i}catch(s){if(((r=s.data)==null?void 0:r.error)==="actNotFound")return 0;throw console.error("Error fetching XRP balance:",s),s}}function FV({currentPage:t,onNavigate:e}){const[r,s]=T.useState(null),[i,a]=T.useState(!0),[o,l]=T.useState(null),[c,d]=T.useState(0),[u,h]=T.useState(!1),[p,f]=T.useState(null),[m,v]=T.useState(!1),x=T.useRef(null),b=T.useRef(null);T.useEffect(()=>{const A=B=>{x.current&&!x.current.contains(B.target)&&h(!1),b.current&&!b.current.contains(B.target)&&v(!1)};return(u||m)&&(document.addEventListener("mousedown",A),document.addEventListener("touchstart",A)),()=>{document.removeEventListener("mousedown",A),document.removeEventListener("touchstart",A)}},[u,m]),T.useEffect(()=>{w(),y();const A=rA();f(A||eA());const B=()=>y(),Q=U=>f(U.detail);return window.addEventListener("walletConnected",B),window.addEventListener("walletDisconnected",B),window.addEventListener("networkChanged",Q),()=>{window.removeEventListener("walletConnected",B),window.removeEventListener("walletDisconnected",B),window.removeEventListener("networkChanged",Q)}},[]),T.useEffect(()=>{o!=null&&o.address?g():d(0)},[o]);const y=()=>{const A=localStorage.getItem("connectedWallet");l(A?JSON.parse(A):null)},g=async()=>{if(o!=null&&o.address)try{const A=await Of(o.address);d(A)}catch(A){console.error("Error fetching wallet balance:",A)}},w=async()=>{try{const A=await cI.get("https://api.coingecko.com/api/v3/simple/price?ids=ripple&vs_currencies=usd&include_24hr_change=true");s({price:A.data.ripple.usd,change:A.data.ripple.usd_24h_change}),a(!1)}catch(A){console.error("Error fetching XRP price:",A),a(!1)}},S=async A=>{try{await tA(A);const B=wv();f(B[A]),v(!1)}catch(B){console.error("Error changing network:",B)}},_=[{id:"dashboard",label:"Dashboard",icon:"📊"},{id:"top10",label:"Top 10",icon:"🏆"},{id:"kingslist",label:"Kings List",icon:"👑"},{id:"memes",label:"Memes",icon:"🚀"},{id:"pools",label:"Pools",icon:"🏊"},{id:"trade",label:"Trade",icon:"💱"},{id:"bottrader",label:"Bot Trader",icon:"🤖"},{id:"vault",label:"Vault",icon:"🏦"},{id:"mytokens",label:"My Tokens",icon:"💎"},{id:"analytics",label:"Analytics",icon:"📈"},{id:"aichat",label:"AI Chat",icon:"💬"},{id:"about",label:"About",icon:"ℹ️"},{id:"wallets",label:"Wallets",icon:"💼"},{id:"setup",label:"Setup",icon:"⚙️"}];return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"hidden lg:block fixed left-0 top-0 h-screen w-64 glass flex-col border-r border-purple-500/20",children:[n.jsxs("div",{className:"p-6 border-b border-purple-500/20",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("h1",{className:"text-3xl font-bold",children:[n.jsx("span",{className:"text-white",children:"MEME"}),n.jsx("span",{className:"bg-gradient-to-r from-purple-400 to-purple-600 bg-clip-text text-transparent",children:"KINGS"})]}),n.jsx("span",{className:"text-3xl",style:{filter:"drop-shadow(0 0 8px rgba(168, 85, 247, 0.8))",textShadow:"0 0 12px rgba(168, 85, 247, 0.6)"},children:"👑"})]}),n.jsx("p",{className:"text-purple-300/60 text-xs mt-1",children:"XRPL Meme Token Factory"})]}),n.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:_.map(A=>n.jsxs("button",{onClick:()=>e(A.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-300 ${t===A.id?"bg-gradient-to-r from-purple-600 to-purple-700 text-white shadow-lg shadow-purple-500/50":"text-purple-300 hover:bg-purple-900/30 hover:text-purple-200"}`,children:[n.jsx("span",{className:"text-xl",children:A.icon}),n.jsx("span",{className:"font-medium",children:A.label})]},A.id))}),n.jsxs("div",{className:"p-4 border-t border-purple-500/20 space-y-3",children:[o&&n.jsxs("div",{className:"glass rounded-lg p-4 bg-green-500/10 border border-green-500/30",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"}),n.jsx("span",{className:"text-green-300 text-xs font-medium",children:"Connected Wallet"})]}),n.jsx("div",{className:"text-purple-200 font-bold text-sm mb-1",children:o.name}),n.jsxs("div",{className:"text-purple-300 text-xs font-mono break-all",children:[o.address.slice(0,10),"...",o.address.slice(-8)]}),n.jsxs("div",{className:"text-purple-400 text-xs mt-2",children:[c.toFixed(3)," XRP"]})]}),n.jsxs("div",{className:"glass rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-purple-300 text-sm font-medium",children:"XRP/USD"}),!i&&r&&n.jsxs("span",{className:`text-xs font-medium ${r.change>=0?"text-green-400":"text-red-400"}`,children:[r.change>=0?"↑":"↓"," ",Math.abs(r.change).toFixed(2),"%"]})]}),i?n.jsx("div",{className:"text-purple-400 text-lg animate-pulse",children:"Loading..."}):r?n.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:["$",r.price.toFixed(4)]}):n.jsx("div",{className:"text-purple-400 text-sm",children:"Unable to load"})]}),n.jsxs("div",{ref:b,className:"glass rounded-lg p-4 relative",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-purple-300 text-sm font-medium",children:"Network Node"}),n.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 animate-pulse"})]}),n.jsxs("button",{onClick:()=>v(!m),className:"w-full flex items-center justify-between text-purple-200 text-sm hover:text-purple-100 transition-colors",children:[n.jsx("span",{className:"truncate",children:(p==null?void 0:p.name)||"Loading..."}),n.jsx("span",{className:"ml-2",children:m?"▲":"▼"})]}),m&&n.jsx("div",{className:"absolute left-0 right-0 mt-2 bg-gray-900 rounded-lg border border-purple-500/50 shadow-2xl z-[100] max-h-64 overflow-y-auto",children:wv().map((A,B)=>n.jsx("button",{onClick:()=>S(B),className:`w-full text-left px-4 py-3 text-sm transition-colors border-b border-purple-500/20 last:border-b-0 ${(p==null?void 0:p.url)===A.url?"bg-purple-600 text-white":"text-purple-300 hover:bg-purple-900/60"}`,children:A.name},B))})]})]})]}),n.jsxs("div",{ref:x,className:"lg:hidden fixed top-0 left-0 right-0 glass border-b border-purple-500/20 z-50 backdrop-blur-lg",children:[n.jsxs("div",{className:"flex items-center justify-between p-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("h1",{className:"text-2xl font-bold",children:[n.jsx("span",{className:"text-white",children:"MEME"}),n.jsx("span",{className:"bg-gradient-to-r from-purple-400 to-purple-600 bg-clip-text text-transparent",children:"KINGS"})]}),n.jsx("span",{className:"text-2xl",style:{filter:"drop-shadow(0 0 8px rgba(168, 85, 247, 0.8))",textShadow:"0 0 12px rgba(168, 85, 247, 0.6)"},children:"👑"})]}),n.jsx("button",{onClick:()=>h(!u),className:"p-2 rounded-lg text-purple-300 hover:bg-purple-900/30 transition-all duration-200 touch-manipulation active:scale-95","aria-label":"Toggle menu",children:n.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u?n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"}):n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})})]}),n.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${u?"max-h-[calc(100vh-80px)] opacity-100":"max-h-0 opacity-0"}`,children:n.jsxs("div",{className:"px-2 pb-3 space-y-1 max-h-[calc(100vh-100px)] overflow-y-auto",children:[_.map(A=>n.jsxs("button",{onClick:()=>{e(A.id),h(!1)},className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 touch-manipulation active:scale-98 text-base ${t===A.id?"bg-gradient-to-r from-purple-600 to-purple-700 text-white shadow-lg":"text-purple-300 hover:bg-purple-900/30"}`,children:[n.jsx("span",{className:"text-xl",children:A.icon}),n.jsx("span",{className:"font-medium",children:A.label})]},A.id)),o&&n.jsxs("div",{className:"glass rounded-lg p-4 bg-green-500/10 border border-green-500/30 mt-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"}),n.jsx("span",{className:"text-green-300 text-xs font-medium",children:"Connected Wallet"})]}),n.jsx("div",{className:"text-purple-200 font-bold text-sm mb-1",children:o.name}),n.jsxs("div",{className:"text-purple-300 text-xs font-mono break-all",children:[o.address.slice(0,10),"...",o.address.slice(-8)]}),n.jsxs("div",{className:"text-purple-400 text-xs mt-2",children:[c.toFixed(3)," XRP"]})]}),n.jsxs("div",{className:"glass rounded-lg p-4 mt-2",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-purple-300 text-sm font-medium",children:"XRP/USD"}),!i&&r&&n.jsxs("span",{className:`text-xs font-medium ${r.change>=0?"text-green-400":"text-red-400"}`,children:[r.change>=0?"↑":"↓"," ",Math.abs(r.change).toFixed(2),"%"]})]}),i?n.jsx("div",{className:"text-purple-400 text-lg animate-pulse",children:"Loading..."}):r?n.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:["$",r.price.toFixed(4)]}):n.jsx("div",{className:"text-purple-400 text-sm",children:"Unable to load"})]})]})})]})]})}const DV="modulepreload",BV=function(t){return"/"+t},lS={},$t=function(e,r,s){if(!r||r.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(r.map(a=>{if(a=BV(a),a in lS)return;lS[a]=!0;const o=a.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!s)for(let u=i.length-1;u>=0;u--){const h=i[u];if(h.href===a&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${l}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":DV,o||(d.as="script",d.crossOrigin=""),d.href=a,document.head.appendChild(d),o)return new Promise((u,h)=>{d.addEventListener("load",u),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>e()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})},$V=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>$t(()=>Promise.resolve().then(()=>Qc),void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)};class Fw extends Error{constructor(e,r="FunctionsError",s){super(e),this.name=r,this.context=s}}class cS extends Fw{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class dS extends Fw{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class uS extends Fw{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var _v;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(_v||(_v={}));var UV=globalThis&&globalThis.__awaiter||function(t,e,r,s){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};class VV{constructor(e,{headers:r={},customFetch:s,region:i=_v.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=$V(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return UV(this,arguments,void 0,function*(r,s={}){var i;try{const{headers:a,method:o,body:l,signal:c}=s;let d={},{region:u}=s;u||(u=this.region);const h=new URL(`${this.url}/${r}`);u&&u!=="any"&&(d["x-region"]=u,h.searchParams.set("forceFunctionRegion",u));let p;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",p=l):typeof l=="string"?(d["Content-Type"]="text/plain",p=l):typeof FormData<"u"&&l instanceof FormData?p=l:(d["Content-Type"]="application/json",p=JSON.stringify(l)));const f=yield this.fetch(h.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),a),body:p,signal:c}).catch(b=>{throw b.name==="AbortError"?b:new cS(b)}),m=f.headers.get("x-relay-error");if(m&&m==="true")throw new dS(f);if(!f.ok)throw new uS(f);let v=((i=f.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),x;return v==="application/json"?x=yield f.json():v==="application/octet-stream"?x=yield f.blob():v==="text/event-stream"?x=f:v==="multipart/form-data"?x=yield f.formData():x=yield f.text(),{data:x,error:null,response:f}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new cS(a)}:{data:null,error:a,response:a instanceof uS||a instanceof dS?a.context:void 0}}})}}var ws={},Dw={},Lm={},ph={},Mm={},Fm={},HV=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Lc=HV();const zV=Lc.fetch,sA=Lc.fetch.bind(Lc),nA=Lc.Headers,XV=Lc.Request,WV=Lc.Response,Qc=Object.freeze(Object.defineProperty({__proto__:null,Headers:nA,Request:XV,Response:WV,default:sA,fetch:zV},Symbol.toStringTag,{value:"Module"})),qV=f4(Qc);var Dm={};Object.defineProperty(Dm,"__esModule",{value:!0});let KV=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Dm.default=KV;var iA=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Fm,"__esModule",{value:!0});const GV=iA(qV),YV=iA(Dm);let JV=class{constructor(e){var r,s;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(r=e.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=e.signal,this.isMaybeSingle=(s=e.isMaybeSingle)!==null&&s!==void 0?s:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=GV.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=new Headers(this.headers),this.headers.set(e,r),this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let i=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,l,c,d;let u=null,h=null,p=null,f=a.status,m=a.statusText;if(a.ok){if(this.method!=="HEAD"){const y=await a.text();y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=y:h=JSON.parse(y))}const x=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),b=(c=a.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");x&&b&&b.length>1&&(p=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,p=null,f=406,m="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const x=await a.text();try{u=JSON.parse(x),Array.isArray(u)&&a.status===404&&(h=[],u=null,f=200,m="OK")}catch{a.status===404&&x===""?(f=204,m="No Content"):u={message:x}}if(u&&this.isMaybeSingle&&(!((d=u==null?void 0:u.details)===null||d===void 0)&&d.includes("0 rows"))&&(u=null,f=200,m="OK"),u&&this.shouldThrowOnError)throw new YV.default(u)}return{error:u,data:h,count:p,status:f,statusText:m}});return this.shouldThrowOnError||(i=i.catch(a=>{var o,l,c;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,r)}returns(){return this}overrideTypes(){return this}};Fm.default=JV;var QV=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Mm,"__esModule",{value:!0});const ZV=QV(Fm);let eH=class extends ZV.default{select(e){let r=!1;const s=(e??"*").split("").map(i=>/\s/.test(i)&&!r?"":(i==='"'&&(r=!r),i)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:r=!0,nullsFirst:s,foreignTable:i,referencedTable:a=i}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,r,{foreignTable:s,referencedTable:i=s}={}){const a=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:r=!1,settings:s=!1,buffers:i=!1,wal:a=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,r?"verbose":null,s?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Mm.default=eH;var tH=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ph,"__esModule",{value:!0});const rH=tH(Mm);let sH=class extends rH.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const s=Array.from(new Set(r)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:s,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${a}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,s])=>{this.url.searchParams.append(r,`eq.${s}`)}),this}not(e,r,s){return this.url.searchParams.append(e,`not.${r}.${s}`),this}or(e,{foreignTable:r,referencedTable:s=r}={}){const i=s?`${s}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,r,s){return this.url.searchParams.append(e,`${r}.${s}`),this}};ph.default=sH;var nH=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Lm,"__esModule",{value:!0});const Nd=nH(ph);let iH=class{constructor(e,{headers:r={},schema:s,fetch:i}){this.url=e,this.headers=new Headers(r),this.schema=s,this.fetch=i}select(e,r){const{head:s=!1,count:i}=r??{},a=s?"HEAD":"GET";let o=!1;const l=(e??"*").split("").map(c=>/\s/.test(c)&&!o?"":(c==='"'&&(o=!o),c)).join("");return this.url.searchParams.set("select",l),i&&this.headers.append("Prefer",`count=${i}`),new Nd.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:r,defaultToNull:s=!0}={}){var i;const a="POST";if(r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Nd.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(e,{onConflict:r,ignoreDuplicates:s=!1,count:i,defaultToNull:a=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),i&&this.headers.append("Prefer",`count=${i}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Nd.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:r}={}){var s;const i="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new Nd.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:e}={}){var r;const s="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Nd.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Lm.default=iH;var aA=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Dw,"__esModule",{value:!0});const aH=aA(Lm),oH=aA(ph);let lH=class oA{constructor(e,{headers:r={},schema:s,fetch:i}={}){this.url=e,this.headers=new Headers(r),this.schemaName=s,this.fetch=i}from(e){const r=new URL(`${this.url}/${e}`);return new aH.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new oA(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:s=!1,get:i=!1,count:a}={}){var o;let l;const c=new URL(`${this.url}/rpc/${e}`);let d;s||i?(l=s?"HEAD":"GET",Object.entries(r).filter(([h,p])=>p!==void 0).map(([h,p])=>[h,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([h,p])=>{c.searchParams.append(h,p)})):(l="POST",d=r);const u=new Headers(this.headers);return a&&u.set("Prefer",`count=${a}`),new oH.default({method:l,url:c,headers:u,schema:this.schemaName,body:d,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};Dw.default=lH;var Zc=Ce&&Ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ws,"__esModule",{value:!0});ws.PostgrestError=ws.PostgrestBuilder=ws.PostgrestTransformBuilder=ws.PostgrestFilterBuilder=ws.PostgrestQueryBuilder=ws.PostgrestClient=void 0;const lA=Zc(Dw);ws.PostgrestClient=lA.default;const cA=Zc(Lm);ws.PostgrestQueryBuilder=cA.default;const dA=Zc(ph);ws.PostgrestFilterBuilder=dA.default;const uA=Zc(Mm);ws.PostgrestTransformBuilder=uA.default;const hA=Zc(Fm);ws.PostgrestBuilder=hA.default;const pA=Zc(Dm);ws.PostgrestError=pA.default;var cH=ws.default={PostgrestClient:lA.default,PostgrestQueryBuilder:cA.default,PostgrestFilterBuilder:dA.default,PostgrestTransformBuilder:uA.default,PostgrestBuilder:hA.default,PostgrestError:pA.default};const{PostgrestClient:dH,PostgrestQueryBuilder:Hq,PostgrestFilterBuilder:zq,PostgrestTransformBuilder:Xq,PostgrestBuilder:Wq,PostgrestError:qq}=cH;class uH{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const s=this.getWebSocketConstructor();return new s(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const hH="2.74.0",pH=`realtime-js/${hH}`,fH="1.0.0",Nv=1e4,mH=1e3,gH=100;var eu;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(eu||(eu={}));var Er;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Er||(Er={}));var Sn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Sn||(Sn={}));var Sv;(function(t){t.websocket="websocket"})(Sv||(Sv={}));var ko;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ko||(ko={}));class xH{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,r,s)}_decodeBroadcast(e,r,s){const i=r.getUint8(1),a=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=s.decode(e.slice(o,o+i));o=o+i;const c=s.decode(e.slice(o,o+a));o=o+a;const d=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class fA{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Xt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Xt||(Xt={}));const hS=(t,e,r={})=>{var s;const i=(s=r.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((a,o)=>(a[o]=yH(o,t,e,i),a),{}):{}},yH=(t,e,r,s)=>{const i=e.find(l=>l.name===t),a=i==null?void 0:i.type,o=r[t];return a&&!s.includes(a)?mA(a,o):jv(o)},mA=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return _H(e,r)}switch(t){case Xt.bool:return vH(e);case Xt.float4:case Xt.float8:case Xt.int2:case Xt.int4:case Xt.int8:case Xt.numeric:case Xt.oid:return bH(e);case Xt.json:case Xt.jsonb:return wH(e);case Xt.timestamp:return NH(e);case Xt.abstime:case Xt.date:case Xt.daterange:case Xt.int4range:case Xt.int8range:case Xt.money:case Xt.reltime:case Xt.text:case Xt.time:case Xt.timestamptz:case Xt.timetz:case Xt.tsrange:case Xt.tstzrange:return jv(e);default:return jv(e)}},jv=t=>t,vH=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},bH=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},wH=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},_H=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,s=t[r];if(t[0]==="{"&&s==="}"){let a;const o=t.slice(1,r);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>mA(e,l))}return t},NH=t=>typeof t=="string"?t.replace(" ","T"):t,gA=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class xx{constructor(e,r,s={},i=Nv){this.channel=e,this.event=r,this.payload=s,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var s;return this._hasReceived(e)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var pS;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(pS||(pS={}));class tu{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=tu.syncState(this.state,i,a,o),this.pendingDiffs.forEach(c=>{this.state=tu.syncDiff(this.state,c,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=tu.syncDiff(this.state,i,a,o),l())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,s,i){const a=this.cloneDeep(e),o=this.transformState(r),l={},c={};return this.map(a,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=a[d];if(h){const p=u.map(x=>x.presence_ref),f=h.map(x=>x.presence_ref),m=u.filter(x=>f.indexOf(x.presence_ref)<0),v=h.filter(x=>p.indexOf(x.presence_ref)<0);m.length>0&&(l[d]=m),v.length>0&&(c[d]=v)}else l[d]=u}),this.syncDiff(a,{joins:l,leaves:c},s,i)}static syncDiff(e,r,s,i){const{joins:a,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),i||(i=()=>{}),this.map(a,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const h=e[l].map(f=>f.presence_ref),p=u.filter(f=>h.indexOf(f.presence_ref)<0);e[l].unshift(...p)}s(l,u,c)}),this.map(o,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=d,i(l,d,c),d.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(s=>r(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,s)=>{const i=e[s];return"metas"in i?r[s]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[s]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var fS;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(fS||(fS={}));var ru;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ru||(ru={}));var _i;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(_i||(_i={}));class Bw{constructor(e,r={config:{}},s){var i,a;if(this.topic=e,this.params=r,this.socket=s,this.bindings={},this.state=Er.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new xx(this,Sn.join,this.params,this.timeout),this.rejoinTimer=new fA(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Er.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Er.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Er.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Er.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Er.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Sn.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new tu(this),this.broadcastEndpointURL=gA(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var s,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Er.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,d=(i=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(f=>f.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[ru.PRESENCE]&&this.bindings[ru.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,h={},p={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:u}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(_i.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(_i.CLOSED)),this.updateJoinPayload(Object.assign({config:p},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var m;if(this.socket.setAuth(),f===void 0){e==null||e(_i.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,x=(m=v==null?void 0:v.length)!==null&&m!==void 0?m:0,b=[];for(let y=0;y<x;y++){const g=v[y],{filter:{event:w,schema:S,table:_,filter:A}}=g,B=f&&f[y];if(B&&B.event===w&&B.schema===S&&B.table===_&&B.filter===A)b.push(Object.assign(Object.assign({},g),{id:B.id}));else{this.unsubscribe(),this.state=Er.errored,e==null||e(_i.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(_i.SUBSCRIBED);return}}).receive("error",f=>{this.state=Er.errored,e==null||e(_i.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(_i.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,s){return this.state===Er.joined&&e===ru.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,s)}async send(e,r={}){var s,i;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,c;const d=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Er.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Sn.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(i=>{s=new xx(this,Sn.leave,{},e),s.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Er.closed,this.bindings={}}async _fetchWithTimeout(e,r,s){const i=new AbortController,a=setTimeout(()=>i.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(a),o}_push(e,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new xx(this,e,r,s);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>gH){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,s){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,s){var i,a;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=Sn;if(s&&[l,c,d,u].indexOf(o)>=0&&s!==this._joinRef())return;let p=this._onMessage(o,r,s);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var m,v,x;return((m=f.filter)===null||m===void 0?void 0:m.event)==="*"||((x=(v=f.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(f=>f.callback(p,s)):(a=this.bindings[o])===null||a===void 0||a.filter(f=>{var m,v,x,b,y,g;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const w=f.id,S=(m=f.filter)===null||m===void 0?void 0:m.event;return w&&((v=r.ids)===null||v===void 0?void 0:v.includes(w))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const w=(y=(b=f==null?void 0:f.filter)===null||b===void 0?void 0:b.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return w==="*"||w===((g=r==null?void 0:r.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof p=="object"&&"ids"in p){const m=p.data,{schema:v,table:x,commit_timestamp:b,type:y,errors:g}=m;p=Object.assign(Object.assign({},{schema:v,table:x,commit_timestamp:b,eventType:y,new:{},old:{},errors:g}),this._getPayloadRecords(m))}f.callback(p,s)})}_isClosed(){return this.state===Er.closed}_isJoined(){return this.state===Er.joined}_isJoining(){return this.state===Er.joining}_isLeaving(){return this.state===Er.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,s){const i=e.toLocaleLowerCase(),a={type:i,filter:r,callback:s};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,r){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===s&&Bw.isEqual(i.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const s in e)if(e[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Sn.close,{},e)}_onError(e){this._on(Sn.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Er.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=hS(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=hS(e.columns,e.old_record)),r}}const yx=()=>{},lp={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},SH=[1e3,2e3,5e3,1e4],jH=1e4,EH=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class TH{constructor(e,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Nv,this.transport=null,this.heartbeatIntervalMs=lp.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yx,this.ref=0,this.reconnectTimer=null,this.logger=yx,this.conn=null,this.sendBuffer=[],this.serializer=new xH,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...o)=>$t(()=>Promise.resolve().then(()=>Qc),void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...o)=>a(...o)},!(!((s=r==null?void 0:r.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Sv.websocket}`,this.httpEndpoint=gA(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=uH.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:fH}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,s){this.logger(e,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case eu.connecting:return ko.Connecting;case eu.open:return ko.Open;case eu.closing:return ko.Closing;default:return ko.Closed}}isConnected(){return this.connectionState()===ko.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const s=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===s);if(i)return i;{const a=new Bw(`realtime:${e}`,r,this);return this.channels.push(a),a}}push(e){const{topic:r,event:s,payload:i,ref:a}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${s} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(mH,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},lp.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:i,payload:a,ref:o}=r,l=o?`(${o})`:"",c=a.status||"";this.log("receive",`${c} ${s} ${i} ${l}`.trim(),a),this.channels.filter(d=>d._isMember(s)).forEach(d=>d._trigger(i,a,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Sn.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const s=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${s}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const s=new Blob([EH],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:pH};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Sn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(r)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new fA(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},lp.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,s,i,a,o,l,c,d,u;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:Nv,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:lp.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:yx,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:h=>SH[h-1]||jH,this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(h,p)=>p(JSON.stringify(h)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class $w extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function wr(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class CH extends $w{constructor(e,r,s){super(e),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ev extends $w{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var kH=globalThis&&globalThis.__awaiter||function(t,e,r,s){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};const xA=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>$t(()=>Promise.resolve().then(()=>Qc),void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)},AH=()=>kH(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield $t(()=>Promise.resolve().then(()=>Qc),void 0)).Response:Response}),Tv=t=>{if(Array.isArray(t))return t.map(r=>Tv(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,s])=>{const i=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=Tv(s)}),e},PH=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var yl=globalThis&&globalThis.__awaiter||function(t,e,r,s){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};const vx=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),RH=(t,e,r)=>yl(void 0,void 0,void 0,function*(){const s=yield AH();t instanceof s&&!(r!=null&&r.noResolveJson)?t.json().then(i=>{const a=t.status||500,o=(i==null?void 0:i.statusCode)||a+"";e(new CH(vx(i),a,o))}).catch(i=>{e(new Ev(vx(i),i))}):e(new Ev(vx(t),t))}),OH=(t,e,r,s)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!s?i:(PH(s)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(s)):i.body=s,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),r))};function fh(t,e,r,s,i,a){return yl(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,OH(e,s,i,a)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>RH(c,l,s))})})}function If(t,e,r,s){return yl(this,void 0,void 0,function*(){return fh(t,"GET",e,r,s)})}function Jn(t,e,r,s,i){return yl(this,void 0,void 0,function*(){return fh(t,"POST",e,s,i,r)})}function Cv(t,e,r,s,i){return yl(this,void 0,void 0,function*(){return fh(t,"PUT",e,s,i,r)})}function IH(t,e,r,s){return yl(this,void 0,void 0,function*(){return fh(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function yA(t,e,r,s,i){return yl(this,void 0,void 0,function*(){return fh(t,"DELETE",e,s,i,r)})}var LH=globalThis&&globalThis.__awaiter||function(t,e,r,s){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};class MH{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return LH(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(wr(e))return{data:null,error:e};throw e}})}}var FH=globalThis&&globalThis.__awaiter||function(t,e,r,s){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};class DH{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}asStream(){return new MH(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.execute().then(e,r)}execute(){return FH(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(wr(e))return{data:null,error:e};throw e}})}}var fs=globalThis&&globalThis.__awaiter||function(t,e,r,s){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};const BH={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},mS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class $H{constructor(e,r={},s,i){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=s,this.fetch=xA(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,s,i){return fs(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},mS),i);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=s,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),h=yield(e=="PUT"?Cv:Jn)(this.fetch,`${this.url}/object/${u}`,a,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(wr(a))return{data:null,error:a};throw a}})}upload(e,r,s){return fs(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,s)})}uploadToSignedUrl(e,r,s,i){return fs(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:mS.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",d.cacheControl)):(c=s,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield Cv(this.fetch,l.toString(),c,{headers:u});return{data:{path:a,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(wr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return fs(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const a=yield Jn(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:i}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new $w("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(wr(s))return{data:null,error:s};throw s}})}update(e,r,s){return fs(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,s)})}move(e,r,s){return fs(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(wr(i))return{data:null,error:i};throw i}})}copy(e,r,s){return fs(this,void 0,void 0,function*(){try{return{data:{path:(yield Jn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(wr(i))return{data:null,error:i};throw i}})}createSignedUrl(e,r,s){return fs(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield Jn(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(wr(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,s){return fs(this,void 0,void 0,function*(){try{const i=yield Jn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(wr(i))return{data:null,error:i};throw i}})}download(e,r){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=a?`?${a}`:"",l=this._getFinalPath(e),c=()=>If(this.fetch,`${this.url}/${i}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new DH(c,this.shouldThrowOnError)}info(e){return fs(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const s=yield If(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Tv(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(wr(s))return{data:null,error:s};throw s}})}exists(e){return fs(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield IH(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(wr(s)&&s instanceof Ev){const i=s.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,r){const s=this._getFinalPath(e),i=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&i.push(a);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&i.push(c);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${d}`)}}}remove(e){return fs(this,void 0,void 0,function*(){try{return{data:yield yA(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wr(r))return{data:null,error:r};throw r}})}list(e,r,s){return fs(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},BH),r),{prefix:e||""});return{data:yield Jn(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},s),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(wr(i))return{data:null,error:i};throw i}})}listV2(e,r){return fs(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield Jn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(wr(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const UH="2.74.0",VH={"X-Client-Info":`storage-js/${UH}`};var Fl=globalThis&&globalThis.__awaiter||function(t,e,r,s){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};class HH{constructor(e,r={},s,i){this.shouldThrowOnError=!1;const a=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},VH),r),this.fetch=xA(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Fl(this,void 0,void 0,function*(){try{return{data:yield If(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(wr(e))return{data:null,error:e};throw e}})}getBucket(e){return Fl(this,void 0,void 0,function*(){try{return{data:yield If(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wr(r))return{data:null,error:r};throw r}})}createBucket(e){return Fl(this,arguments,void 0,function*(r,s={public:!1}){try{return{data:yield Jn(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(wr(i))return{data:null,error:i};throw i}})}updateBucket(e,r){return Fl(this,void 0,void 0,function*(){try{return{data:yield Cv(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(wr(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Fl(this,void 0,void 0,function*(){try{return{data:yield Jn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wr(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Fl(this,void 0,void 0,function*(){try{return{data:yield yA(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wr(r))return{data:null,error:r};throw r}})}}class zH extends HH{constructor(e,r={},s,i){super(e,r,s,i)}from(e){return new $H(this.url,this.headers,e,this.fetch)}}const XH="2.74.0";let Md="";typeof Deno<"u"?Md="deno":typeof document<"u"?Md="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Md="react-native":Md="node";const WH={"X-Client-Info":`supabase-js-${Md}/${XH}`},qH={headers:WH},KH={schema:"public"},GH={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},YH={};var JH=globalThis&&globalThis.__awaiter||function(t,e,r,s){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};const QH=t=>{let e;return t?e=t:typeof fetch>"u"?e=sA:e=fetch,(...r)=>e(...r)},ZH=()=>typeof Headers>"u"?nA:Headers,ez=(t,e,r)=>{const s=QH(r),i=ZH();return(a,o)=>JH(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let d=new i(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),s(a,Object.assign(Object.assign({},o),{headers:d}))})};var tz=globalThis&&globalThis.__awaiter||function(t,e,r,s){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};function rz(t){return t.endsWith("/")?t:t+"/"}function sz(t,e){var r,s;const{db:i,auth:a,realtime:o,global:l}=t,{db:c,auth:d,realtime:u,global:h}=e,p={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},d),a),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>tz(this,void 0,void 0,function*(){return""})};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}function nz(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(rz(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const vA="2.74.0",Kl=30*1e3,kv=3,bx=kv*Kl,iz="http://localhost:9999",az="supabase.auth.token",oz={"X-Client-Info":`gotrue-js/${vA}`},Av="X-Supabase-Api-Version",bA={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},lz=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,cz=10*60*1e3;class Iu extends Error{constructor(e,r,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function ht(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class dz extends Iu{constructor(e,r,s){super(e,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function uz(t){return ht(t)&&t.name==="AuthApiError"}class Ao extends Iu{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class no extends Iu{constructor(e,r,s,i){super(e,s,i),this.name=r,this.status=s}}class sa extends no{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function hz(t){return ht(t)&&t.name==="AuthSessionMissingError"}class Dl extends no{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class cp extends no{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class dp extends no{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function pz(t){return ht(t)&&t.name==="AuthImplicitGrantRedirectError"}class gS extends no{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Pv extends no{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function wx(t){return ht(t)&&t.name==="AuthRetryableFetchError"}class xS extends no{constructor(e,r,s){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class Rv extends no{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Lf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),yS=` 	
\r=`.split(""),fz=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<yS.length;e+=1)t[yS[e].charCodeAt(0)]=-2;for(let e=0;e<Lf.length;e+=1)t[Lf[e].charCodeAt(0)]=e;return t})();function vS(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(Lf[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(Lf[s]),e.queuedBits-=6}}function wA(t,e,r){const s=fz[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function bS(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{xz(o,s,r)};for(let o=0;o<t.length;o+=1)wA(t.charCodeAt(o),i,a);return e.join("")}function mz(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function gz(t,e){for(let r=0;r<t.length;r+=1){let s=t.charCodeAt(r);if(s>55295&&s<=56319){const i=(s-55296)*1024&65535;s=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}mz(s,e)}}function xz(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let s=1;s<6;s+=1)if(!(t>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function bc(t){const e=[],r={queue:0,queuedBits:0},s=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)wA(t.charCodeAt(i),r,s);return new Uint8Array(e)}function yz(t){const e=[];return gz(t,r=>e.push(r)),new Uint8Array(e)}function Fo(t){const e=[],r={queue:0,queuedBits:0},s=i=>{e.push(i)};return t.forEach(i=>vS(i,r,s)),vS(null,r,s),e.join("")}function vz(t){return Math.round(Date.now()/1e3)+t}function bz(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ls=()=>typeof window<"u"&&typeof document<"u",bo={tested:!1,writable:!1},_A=()=>{if(!Ls())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(bo.tested)return bo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),bo.tested=!0,bo.writable=!0}catch{bo.tested=!0,bo.writable=!1}return bo.writable};function wz(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return r.searchParams.forEach((s,i)=>{e[i]=s}),e}const NA=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>$t(()=>Promise.resolve().then(()=>Qc),void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)},_z=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Gl=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},wo=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ea=async(t,e)=>{await t.removeItem(e)};class Bm{constructor(){this.promise=new Bm.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Bm.promiseConstructor=Promise;function _x(t){const e=t.split(".");if(e.length!==3)throw new Rv("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!lz.test(e[s]))throw new Rv("JWT not in base64url format");return{header:JSON.parse(bS(e[0])),payload:JSON.parse(bS(e[1])),signature:bc(e[2]),raw:{header:e[0],payload:e[1]}}}async function Nz(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Sz(t,e){return new Promise((s,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await t(a);if(!e(a,null,o)){s(o);return}}catch(o){if(!e(a,o)){i(o);return}}})()})}function jz(t){return("0"+t.toString(16)).substr(-2)}function Ez(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let i="";for(let a=0;a<56;a++)i+=r.charAt(Math.floor(Math.random()*s));return i}return crypto.getRandomValues(e),Array.from(e,jz).join("")}async function Tz(t){const r=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(s);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function Cz(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await Tz(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Bl(t,e,r=!1){const s=Ez();let i=s;r&&(i+="/PASSWORD_RECOVERY"),await Gl(t,`${e}-code-verifier`,i);const a=await Cz(s);return[a,s===a?"plain":"s256"]}const kz=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Az(t){const e=t.headers.get(Av);if(!e||!e.match(kz))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Pz(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Rz(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Oz=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function $l(t){if(!Oz.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Nx(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function wS(t){return JSON.parse(JSON.stringify(t))}var Iz=globalThis&&globalThis.__rest||function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(r[s[i]]=t[s[i]]);return r};const Co=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Lz=[502,503,504];async function _S(t){var e;if(!_z(t))throw new Pv(Co(t),0);if(Lz.includes(t.status))throw new Pv(Co(t),t.status);let r;try{r=await t.json()}catch(a){throw new Ao(Co(a),a)}let s;const i=Az(t);if(i&&i.getTime()>=bA["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new xS(Co(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new sa}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new xS(Co(r),t.status,r.weak_password.reasons);throw new dz(Co(r),t.status||500,s)}const Mz=(t,e,r,s)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(s),Object.assign(Object.assign({},i),r))};async function yt(t,e,r,s){var i;const a=Object.assign({},s==null?void 0:s.headers);a[Av]||(a[Av]=bA["2024-01-01"].name),s!=null&&s.jwt&&(a.Authorization=`Bearer ${s.jwt}`);const o=(i=s==null?void 0:s.query)!==null&&i!==void 0?i:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Fz(t,e,r+l,{headers:a,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function Fz(t,e,r,s,i,a){const o=Mz(e,s,i,a);let l;try{l=await t(r,Object.assign({},o))}catch(c){throw console.error(c),new Pv(Co(c),0)}if(l.ok||await _S(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await _S(c)}}function bn(t){var e;let r=null;$z(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=vz(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:s},error:null}}function NS(t){const e=bn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function fa(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Dz(t){return{data:t,error:null}}function Bz(t){const{action_link:e,email_otp:r,hashed_token:s,redirect_to:i,verification_type:a}=t,o=Iz(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:s,redirect_to:i,verification_type:a},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function SS(t){return t}function $z(t){return t.access_token&&t.refresh_token&&t.expires_in}const Sx=["global","local","others"];var Uz=globalThis&&globalThis.__rest||function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(r[s[i]]=t[s[i]]);return r};class Vz{constructor({url:e="",headers:r={},fetch:s}){this.url=e,this.headers=r,this.fetch=NA(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=Sx[0]){if(Sx.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Sx.join(", ")}`);try{return await yt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(ht(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,r={}){try{return await yt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:fa})}catch(s){if(ht(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:r}=e,s=Uz(e,["options"]),i=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(i.new_email=s==null?void 0:s.newEmail,delete i.newEmail),await yt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Bz,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ht(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await yt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:fa})}catch(r){if(ht(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,s,i,a,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await yt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:SS});if(u.error)throw u.error;const h=await u.json(),p=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(m=>{const v=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(m.split(";")[1].split("=")[1]);d[`${x}Page`]=v}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(ht(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){$l(e);try{return await yt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:fa})}catch(r){if(ht(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){$l(e);try{return await yt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:fa})}catch(s){if(ht(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,r=!1){$l(e);try{return await yt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:fa})}catch(s){if(ht(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){$l(e.userId);try{const{data:r,error:s}=await yt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:s}}catch(r){if(ht(r))return{data:null,error:r};throw r}}async _deleteFactor(e){$l(e.userId),$l(e.id);try{return{data:await yt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(ht(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,s,i,a,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await yt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:SS});if(u.error)throw u.error;const h=await u.json(),p=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(m=>{const v=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(m.split(";")[1].split("=")[1]);d[`${x}Page`]=v}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(ht(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(e){try{return await yt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ht(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await yt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ht(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await yt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ht(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await yt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ht(r))return{data:null,error:r};throw r}}}function jS(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const Ul={debug:!!(globalThis&&_A()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class SA extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Hz extends SA{}async function zz(t,e,r){Ul.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Ul.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async i=>{if(i){Ul.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{Ul.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Ul.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Hz(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ul.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Xz(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function jA(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Wz(t){return parseInt(t,16)}function qz(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function Kz(t){var e;const{chainId:r,domain:s,expirationTime:i,issuedAt:a=new Date,nonce:o,notBefore:l,requestId:c,resources:d,scheme:u,uri:h,version:p}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const f=jA(t.address),m=u?`${u}://${s}`:s,v=t.statement?`${t.statement}
`:"",x=`${m} wants you to sign in with your Ethereum account:
${f}

${v}`;let b=`URI: ${h}
Version: ${p}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${a.toISOString()}`;if(i&&(b+=`
Expiration Time: ${i.toISOString()}`),l&&(b+=`
Not Before: ${l.toISOString()}`),c&&(b+=`
Request ID: ${c}`),d){let y=`
Resources:`;for(const g of d){if(!g||typeof g!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${g}`);y+=`
- ${g}`}b+=y}return`${x}
${b}`}class br extends Error{constructor({message:e,code:r,cause:s,name:i}){var a;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(a=i??(s instanceof Error?s.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class Mf extends br{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function Gz({error:t,options:e}){var r,s,i;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new br({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new br({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new br({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new br({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new br({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new br({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return a.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new br({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new br({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(TA(o)){if(a.rp.id!==o)return new br({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new br({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new br({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new br({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new br({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Yz({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new br({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new br({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(TA(s)){if(r.rpId!==s)return new br({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new br({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new br({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new br({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}var EA=globalThis&&globalThis.__rest||function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(r[s[i]]=t[s[i]]);return r};class Jz{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Qz=new Jz;function Zz(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:s}=t,i=EA(t,["challenge","user","excludeCredentials"]),a=bc(e).buffer,o=Object.assign(Object.assign({},r),{id:bc(r.id).buffer}),l=Object.assign(Object.assign({},i),{challenge:a,user:o});if(s&&s.length>0){l.excludeCredentials=new Array(s.length);for(let c=0;c<s.length;c++){const d=s[c];l.excludeCredentials[c]=Object.assign(Object.assign({},d),{id:bc(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function eX(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,s=EA(t,["challenge","allowCredentials"]),i=bc(e).buffer,a=Object.assign(Object.assign({},s),{challenge:i});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];a.allowCredentials[o]=Object.assign(Object.assign({},l),{id:bc(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function tX(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Fo(new Uint8Array(t.response.attestationObject)),clientDataJSON:Fo(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function rX(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,s=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Fo(new Uint8Array(i.authenticatorData)),clientDataJSON:Fo(new Uint8Array(i.clientDataJSON)),signature:Fo(new Uint8Array(i.signature)),userHandle:i.userHandle?Fo(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function TA(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function ES(){var t,e;return!!(Ls()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function sX(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Mf("Browser returned unexpected credential type",e)}:{data:null,error:new Mf("Empty credential response",e)}}catch(e){return{data:null,error:Gz({error:e,options:t})}}}async function nX(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Mf("Browser returned unexpected credential type",e)}:{data:null,error:new Mf("Empty credential response",e)}}catch(e){return{data:null,error:Yz({error:e,options:t})}}}const iX={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},aX={userVerification:"preferred",hints:["security-key"]};function Ff(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),s={};for(const i of t)if(i)for(const a in i){const o=i[a];if(o!==void 0)if(Array.isArray(o))s[a]=o;else if(r(o))s[a]=o;else if(e(o)){const l=s[a];e(l)?s[a]=Ff(l,o):s[a]=Ff(o)}else s[a]=o}return s}function oX(t,e){return Ff(iX,t,e||{})}function lX(t,e){return Ff(aX,t,e||{})}class cX{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:s,signal:i},a){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!o)return{data:null,error:l};const c=i??Qz.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:d}=o.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${s}`),d.displayName||(d.displayName=d.name)}switch(o.webauthn.type){case"create":{const d=oX(o.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:u,error:h}=await sX({publicKey:d,signal:c});return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}case"request":{const d=lX(o.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:u,error:h}=await nX(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:d,signal:c}));return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}}}catch(o){return ht(o)?{data:null,error:o}:{data:null,error:new Ao("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:i}},a){if(!r)return{data:null,error:new Iu("rpId is required for WebAuthn authentication")};try{if(!ES())return{data:null,error:new Ao("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:s},signal:i},{request:a});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:s,credential_response:c.credential_response}})}catch(o){return ht(o)?{data:null,error:o}:{data:null,error:new Ao("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:i},a){if(!r)return{data:null,error:new Iu("rpId is required for WebAuthn registration")};try{if(!ES())return{data:null,error:new Ao("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(u=>{var h;return(h=u.data)===null||h===void 0?void 0:h.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===e&&p.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:l};const{data:c,error:d}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:i},{create:a});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:s,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:d}}catch(o){return ht(o)?{data:null,error:o}:{data:null,error:new Ao("Unexpected error in register",o)}}}}Xz();const dX={url:iz,storageKey:az,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:oz,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function TS(t,e,r){return await r()}const Vl={};class Lu{get jwks(){var e,r;return(r=(e=Vl[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Vl[this.storageKey]=Object.assign(Object.assign({},Vl[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Vl[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Vl[this.storageKey]=Object.assign(Object.assign({},Vl[this.storageKey]),{cachedAt:e})}constructor(e){var r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Lu.nextInstanceID,Lu.nextInstanceID+=1,this.instanceID>0&&Ls()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},dX),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Vz({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=NA(i.fetch),this.lock=i.lock||TS,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Ls()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=zz:this.lock=TS,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new cX(this)},this.persistSession?(i.storage?this.storage=i.storage:_A()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=jS(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=jS(this.memoryStorage)),Ls()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${vA}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=wz(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),Ls()&&this.detectSessionInUrl&&s!=="none"){const{data:i,error:a}=await this._getSessionFromURL(r,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),pz(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ht(r)?{error:r}:{error:new Ao("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,s,i;try{const a=await yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:bn}),{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(ht(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var r,s,i;try{let a;if("email"in e){const{email:u,password:h,options:p}=e;let f=null,m=null;this.flowType==="pkce"&&([f,m]=await Bl(this.storage,this.storageKey)),a=await yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:u,password:h,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:f,code_challenge_method:m},xform:bn})}else if("phone"in e){const{phone:u,password:h,options:p}=e;a=await yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(s=p==null?void 0:p.data)!==null&&s!==void 0?s:{},channel:(i=p==null?void 0:p.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:bn})}else throw new cp("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(ht(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let r;if("email"in e){const{email:a,password:o,options:l}=e;r=await yt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:NS})}else if("phone"in e){const{phone:a,password:o,options:l}=e;r=await yt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:NS})}else throw new cp("You must provide either an email or phone number and a password");const{data:s,error:i}=r;return i?{data:{user:null,session:null},error:i}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Dl}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:i})}catch(r){if(ht(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,s,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,s,i,a,o,l,c,d,u,h,p;let f,m;if("message"in e)f=e.message,m=e.signature;else{const{chain:v,wallet:x,statement:b,options:y}=e;let g;if(Ls())if(typeof x=="object")g=x;else{const Q=window;if("ethereum"in Q&&typeof Q.ethereum=="object"&&"request"in Q.ethereum&&typeof Q.ethereum.request=="function")g=Q.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=x}const w=new URL((r=y==null?void 0:y.url)!==null&&r!==void 0?r:window.location.href),S=await g.request({method:"eth_requestAccounts"}).then(Q=>Q).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const _=jA(S[0]);let A=(s=y==null?void 0:y.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!A){const Q=await g.request({method:"eth_chainId"});A=Wz(Q)}const B={domain:w.host,address:_,statement:b,uri:w.href,version:"1",chainId:A,nonce:(i=y==null?void 0:y.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(a=y==null?void 0:y.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=y==null?void 0:y.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=y==null?void 0:y.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(d=y==null?void 0:y.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(u=y==null?void 0:y.signInWithEthereum)===null||u===void 0?void 0:u.resources};f=Kz(B),m=await g.request({method:"personal_sign",params:[qz(f),_]})}try{const{data:v,error:x}=await yt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:m},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:bn});if(x)throw x;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new Dl}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:x})}catch(v){if(ht(v))return{data:{user:null,session:null},error:v};throw v}}async signInWithSolana(e){var r,s,i,a,o,l,c,d,u,h,p,f;let m,v;if("message"in e)m=e.message,v=e.signature;else{const{chain:x,wallet:b,statement:y,options:g}=e;let w;if(Ls())if(typeof b=="object")w=b;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))w=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=b}const S=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in w&&w.signIn){const _=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),y?{statement:y}:null));let A;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")A=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)A=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in A&&"signature"in A&&(typeof A.signedMessage=="string"||A.signedMessage instanceof Uint8Array)&&A.signature instanceof Uint8Array)m=typeof A.signedMessage=="string"?A.signedMessage:new TextDecoder().decode(A.signedMessage),v=A.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${S.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(i=(s=g==null?void 0:g.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=g==null?void 0:g.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((c=g==null?void 0:g.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((d=g==null?void 0:g.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((h=(u=g==null?void 0:g.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...g.signInWithSolana.resources.map(A=>`- ${A}`)]:[]].join(`
`);const _=await w.signMessage(new TextEncoder().encode(m),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=_}}try{const{data:x,error:b}=await yt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Fo(v)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:bn});if(b)throw b;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new Dl}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:b})}catch(x){if(ht(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(e){const r=await wo(this.storage,`${this.storageKey}-code-verifier`),[s,i]=(r??"").split("/");try{const{data:a,error:o}=await yt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:bn});if(await ea(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Dl}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(ht(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:r,provider:s,token:i,access_token:a,nonce:o}=e,l=await yt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:bn}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Dl}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if(ht(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,s,i,a,o;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Bl(this.storage,this.storageKey));const{error:h}=await yt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await yt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new cp("You must provide either an email or phone number.")}catch(l){if(ht(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,s;try{let i,a;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,a=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await yt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:bn});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(ht(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var r,s,i;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await Bl(this.storage,this.storageKey)),await yt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:Dz})}catch(a){if(ht(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;if(s)throw s;if(!r)throw new sa;const{error:i}=await yt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(ht(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:s,type:i,options:a}=e,{error:o}=await yt(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:i,options:a}=e,{data:o,error:l}=await yt(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new cp("You must provide either an email or phone number and a type")}catch(r){if(ht(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await wo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<bx:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const o=await wo(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Nx()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await yt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:fa}):await this._useSession(async r=>{var s,i,a;const{data:o,error:l}=r;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new sa}:await yt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:fa})})}catch(r){if(ht(r))return hz(r)&&(await this._removeSession(),await ea(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async s=>{const{data:i,error:a}=s;if(a)throw a;if(!i.session)throw new sa;const o=i.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Bl(this.storage,this.storageKey));const{data:d,error:u}=await yt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:fa});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(ht(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new sa;const r=Date.now()/1e3;let s=r,i=!0,a=null;const{payload:o}=_x(e.access_token);if(o.exp&&(s=o.exp,i=s<=r),i){const{data:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(ht(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var s;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new sa;const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ht(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!Ls())throw new dp("No browser detected.");if(e.error||e.error_description||e.error_code)throw new dp(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new gS("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new dp("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new gS("No code detected.");const{data:y,error:g}=await this._exchangeCodeForSession(e.code);if(g)throw g;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=e;if(!a||!l||!o||!d)throw new dp("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let p=u+h;c&&(p=parseInt(c));const f=p-u;f*1e3<=Kl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const m=p-h;u-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,p,u):u-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,p,u);const{data:v,error:x}=await this._getUser(a);if(x)throw x;const b={provider_token:s,provider_refresh_token:i,access_token:a,expires_in:h,expires_at:p,refresh_token:o,token_type:d,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:e.type},error:null}}catch(s){if(ht(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await wo(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:i,error:a}=r;if(a)return{error:a};const o=(s=i.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(uz(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await ea(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=bz(),s={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async r=>{var s,i;try{const{data:{session:a},error:o}=r;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,r={}){let s=null,i=null;this.flowType==="pkce"&&([s,i]=await Bl(this.storage,this.storageKey,!0));try{return await yt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(ht(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(ht(r))return{data:null,error:r};throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:s,error:i}=await this._useSession(async a=>{var o,l,c,d,u;const{data:h,error:p}=a;if(p)throw p;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await yt(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return Ls()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(ht(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var s;try{const{error:i,data:{session:a}}=r;if(i)throw i;const{options:o,provider:l,token:c,access_token:d,nonce:u}=e,h=await yt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=a==null?void 0:a.access_token)!==null&&s!==void 0?s:void 0,body:{provider:l,id_token:c,access_token:d,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:bn}),{data:p,error:f}=h;return f?{data:{user:null,session:null},error:f}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new Dl}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),{data:p,error:f})}catch(i){if(ht(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var s,i;const{data:a,error:o}=r;if(o)throw o;return await yt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(ht(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await Sz(async i=>(i>0&&await Nz(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await yt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:bn})),(i,a)=>{const o=200*Math.pow(2,i);return a&&wx(a)&&Date.now()+o-s<Kl})}catch(s){if(this._debug(r,"error",s),ht(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",s),Ls()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const i=await wo(this.storage,this.storageKey);if(i&&this.userStorage){let o=await wo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Gl(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Nx()}else if(i&&!i.user&&!i.user){const o=await wo(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await ea(this.storage,this.storageKey+"-user"),await Gl(this.storage,this.storageKey,i)):i.user=Nx()}if(this._debug(s,"session from storage",i),!this._isValidSession(i)){this._debug(s,"session is not valid"),i!==null&&await this._removeSession();return}const a=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<bx;if(this._debug(s,`session has${a?"":" not"} expired with margin of ${bx}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),wx(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(i.access_token);!l&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(s,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(s,"error",i),console.error(i);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var r,s;if(!e)throw new sa;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Bm;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new sa;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={data:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(i,"error",a),ht(a)){const o={data:null,error:a};return wx(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,s=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:r});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){a.push(c)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await Gl(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const a=wS(i);await Gl(this.storage,this.storageKey,a)}else{const i=wS(r);await Gl(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await ea(this.storage,this.storageKey),await ea(this.storage,this.storageKey+"-code-verifier"),await ea(this.storage,this.storageKey+"-user"),this.userStorage&&await ea(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ls()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Kl);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((s.expires_at*1e3-e)/Kl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Kl}ms, refresh threshold is ${kv} ticks`),i<=kv&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof SA)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ls()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,s){const i=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&i.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&i.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[a,o]=await Bl(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(l.toString())}if(s!=null&&s.queryParams){const a=new URLSearchParams(s.queryParams);i.push(a.toString())}return s!=null&&s.skipBrowserRedirect&&i.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var s;const{data:i,error:a}=r;return a?{data:null,error:a}:await yt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(ht(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var s,i;const{data:a,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:d}=await yt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&c.type==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(ht(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:i,error:a}=r;if(a)return{data:null,error:a};const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?tX(e.webauthn.credential_response):rX(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:c}=await yt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(r){if(ht(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:i,error:a}=r;if(a)return{data:null,error:a};const o=await yt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Zz(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:eX(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(ht(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:s}=await this.getUser();if(s)return{data:null,error:s};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,s;const{data:{session:i},error:a}=e;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=_x(i.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((s=(r=i.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,r={keys:[]}){let s=r.keys.find(l=>l.kid===e);if(s)return s;const i=Date.now();if(s=this.jwks.keys.find(l=>l.kid===e),s&&this.jwks_cached_at+cz>i)return s;const{data:a,error:o}=await yt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,s=a.keys.find(l=>l.kid===e),!s)?null:s}async getClaims(e,r={}){try{let s=e;if(!s){const{data:f,error:m}=await this.getSession();if(m||!f.session)return{data:null,error:m};s=f.session.access_token}const{header:i,payload:a,signature:o,raw:{header:l,payload:c}}=_x(s);r!=null&&r.allowExpired||Pz(a.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:f}=await this.getUser(s);if(f)throw f;return{data:{claims:a,header:i,signature:o},error:null}}const u=Rz(i.alg),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,yz(`${l}.${c}`)))throw new Rv("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(s){if(ht(s))return{data:null,error:s};throw s}}}Lu.nextInstanceID=0;const uX=Lu;class hX extends uX{constructor(e){super(e)}}var pX=globalThis&&globalThis.__awaiter||function(t,e,r,s){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};class fX{constructor(e,r,s){var i,a,o;this.supabaseUrl=e,this.supabaseKey=r;const l=nz(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:KH,realtime:YH,auth:Object.assign(Object.assign({},GH),{storageKey:c}),global:qH},u=sz(s??{},d);this.storageKey=(i=u.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=u.global.headers)!==null&&a!==void 0?a:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=ez(r,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new dH(new URL("rest/v1",l).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new zH(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new VV(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},s={}){return this.rest.rpc(e,r,s)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return pX(this,void 0,void 0,function*(){var e,r;if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:i,userStorage:a,storageKey:o,flowType:l,lock:c,debug:d},u,h){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new hX({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),u),storageKey:o,autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:i,userStorage:a,flowType:l,lock:c,debug:d,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new TH(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,r,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const mX=(t,e,r)=>new fX(t,e,r);function gX(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}gX()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const xX="https://evlhnwqfnnozottgfwam.supabase.co",yX="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV2bGhud3Fmbm5vem90dGdmd2FtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk4NzU5ODYsImV4cCI6MjA3NTQ1MTk4Nn0.xzB23ELtSev8FkU8QPaQe1GUHSzk8ldoaCuWqrvKoDI",le=mX(xX,yX),su={BALANCE:5*60*1e3,POOL_DATA:3*60*1e3,TOKEN_HOLDERS:10*60*1e3,PRICE_DATA:2*60*1e3,LP_POSITION:5*60*1e3,TOKEN_LIST:5*60*1e3,MARKET_DATA:2*60*1e3},vX=(t,e=5*60*1e3)=>{try{const r=localStorage.getItem(t),s=localStorage.getItem(`${t}_timestamp`);if(r&&s&&Date.now()-parseInt(s)<e)return JSON.parse(r)}catch(r){console.error("Error reading from cache:",r)}return null},bX=(t,e)=>{try{localStorage.setItem(t,JSON.stringify(e)),localStorage.setItem(`${t}_timestamp`,Date.now().toString())}catch(r){console.error("Error writing to cache:",r)}};var Et={},$m={};$m.byteLength=NX;$m.toByteArray=jX;$m.fromByteArray=CX;var ri=[],Js=[],wX=typeof Uint8Array<"u"?Uint8Array:Array,jx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Hl=0,_X=jx.length;Hl<_X;++Hl)ri[Hl]=jx[Hl],Js[jx.charCodeAt(Hl)]=Hl;Js["-".charCodeAt(0)]=62;Js["_".charCodeAt(0)]=63;function CA(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var s=r===e?0:4-r%4;return[r,s]}function NX(t){var e=CA(t),r=e[0],s=e[1];return(r+s)*3/4-s}function SX(t,e,r){return(e+r)*3/4-r}function jX(t){var e,r=CA(t),s=r[0],i=r[1],a=new wX(SX(t,s,i)),o=0,l=i>0?s-4:s,c;for(c=0;c<l;c+=4)e=Js[t.charCodeAt(c)]<<18|Js[t.charCodeAt(c+1)]<<12|Js[t.charCodeAt(c+2)]<<6|Js[t.charCodeAt(c+3)],a[o++]=e>>16&255,a[o++]=e>>8&255,a[o++]=e&255;return i===2&&(e=Js[t.charCodeAt(c)]<<2|Js[t.charCodeAt(c+1)]>>4,a[o++]=e&255),i===1&&(e=Js[t.charCodeAt(c)]<<10|Js[t.charCodeAt(c+1)]<<4|Js[t.charCodeAt(c+2)]>>2,a[o++]=e>>8&255,a[o++]=e&255),a}function EX(t){return ri[t>>18&63]+ri[t>>12&63]+ri[t>>6&63]+ri[t&63]}function TX(t,e,r){for(var s,i=[],a=e;a<r;a+=3)s=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),i.push(EX(s));return i.join("")}function CX(t){for(var e,r=t.length,s=r%3,i=[],a=16383,o=0,l=r-s;o<l;o+=a)i.push(TX(t,o,o+a>l?l:o+a));return s===1?(e=t[r-1],i.push(ri[e>>2]+ri[e<<4&63]+"==")):s===2&&(e=(t[r-2]<<8)+t[r-1],i.push(ri[e>>10]+ri[e>>4&63]+ri[e<<2&63]+"=")),i.join("")}var Uw={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Uw.read=function(t,e,r,s,i){var a,o,l=i*8-s-1,c=(1<<l)-1,d=c>>1,u=-7,h=r?i-1:0,p=r?-1:1,f=t[e+h];for(h+=p,a=f&(1<<-u)-1,f>>=-u,u+=l;u>0;a=a*256+t[e+h],h+=p,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=s;u>0;o=o*256+t[e+h],h+=p,u-=8);if(a===0)a=1-d;else{if(a===c)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,s),a=a-d}return(f?-1:1)*o*Math.pow(2,a-s)};Uw.write=function(t,e,r,s,i,a){var o,l,c,d=a*8-i-1,u=(1<<d)-1,h=u>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=s?0:a-1,m=s?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+h>=1?e+=p/c:e+=p*Math.pow(2,1-h),e*c>=2&&(o++,c/=2),o+h>=u?(l=0,o=u):o+h>=1?(l=(e*c-1)*Math.pow(2,i),o=o+h):(l=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[r+f]=l&255,f+=m,l/=256,i-=8);for(o=o<<i|l,d+=i;d>0;t[r+f]=o&255,f+=m,o/=256,d-=8);t[r+f-m]|=v*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=$m,r=Uw,s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=y,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,l.TYPED_ARRAY_SUPPORT=a(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const L=new Uint8Array(1),N={foo:function(){return 42}};return Object.setPrototypeOf(N,Uint8Array.prototype),Object.setPrototypeOf(L,N),L.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function o(L){if(L>i)throw new RangeError('The value "'+L+'" is invalid for option "size"');const N=new Uint8Array(L);return Object.setPrototypeOf(N,l.prototype),N}function l(L,N,E){if(typeof L=="number"){if(typeof N=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(L)}return c(L,N,E)}l.poolSize=8192;function c(L,N,E){if(typeof L=="string")return p(L,N);if(ArrayBuffer.isView(L))return m(L);if(L==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L);if(Ee(L,ArrayBuffer)||L&&Ee(L.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ee(L,SharedArrayBuffer)||L&&Ee(L.buffer,SharedArrayBuffer)))return v(L,N,E);if(typeof L=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Y=L.valueOf&&L.valueOf();if(Y!=null&&Y!==L)return l.from(Y,N,E);const fe=x(L);if(fe)return fe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof L[Symbol.toPrimitive]=="function")return l.from(L[Symbol.toPrimitive]("string"),N,E);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L)}l.from=function(L,N,E){return c(L,N,E)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function d(L){if(typeof L!="number")throw new TypeError('"size" argument must be of type number');if(L<0)throw new RangeError('The value "'+L+'" is invalid for option "size"')}function u(L,N,E){return d(L),L<=0?o(L):N!==void 0?typeof E=="string"?o(L).fill(N,E):o(L).fill(N):o(L)}l.alloc=function(L,N,E){return u(L,N,E)};function h(L){return d(L),o(L<0?0:b(L)|0)}l.allocUnsafe=function(L){return h(L)},l.allocUnsafeSlow=function(L){return h(L)};function p(L,N){if((typeof N!="string"||N==="")&&(N="utf8"),!l.isEncoding(N))throw new TypeError("Unknown encoding: "+N);const E=g(L,N)|0;let Y=o(E);const fe=Y.write(L,N);return fe!==E&&(Y=Y.slice(0,fe)),Y}function f(L){const N=L.length<0?0:b(L.length)|0,E=o(N);for(let Y=0;Y<N;Y+=1)E[Y]=L[Y]&255;return E}function m(L){if(Ee(L,Uint8Array)){const N=new Uint8Array(L);return v(N.buffer,N.byteOffset,N.byteLength)}return f(L)}function v(L,N,E){if(N<0||L.byteLength<N)throw new RangeError('"offset" is outside of buffer bounds');if(L.byteLength<N+(E||0))throw new RangeError('"length" is outside of buffer bounds');let Y;return N===void 0&&E===void 0?Y=new Uint8Array(L):E===void 0?Y=new Uint8Array(L,N):Y=new Uint8Array(L,N,E),Object.setPrototypeOf(Y,l.prototype),Y}function x(L){if(l.isBuffer(L)){const N=b(L.length)|0,E=o(N);return E.length===0||L.copy(E,0,0,N),E}if(L.length!==void 0)return typeof L.length!="number"||Te(L.length)?o(0):f(L);if(L.type==="Buffer"&&Array.isArray(L.data))return f(L.data)}function b(L){if(L>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return L|0}function y(L){return+L!=L&&(L=0),l.alloc(+L)}l.isBuffer=function(N){return N!=null&&N._isBuffer===!0&&N!==l.prototype},l.compare=function(N,E){if(Ee(N,Uint8Array)&&(N=l.from(N,N.offset,N.byteLength)),Ee(E,Uint8Array)&&(E=l.from(E,E.offset,E.byteLength)),!l.isBuffer(N)||!l.isBuffer(E))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(N===E)return 0;let Y=N.length,fe=E.length;for(let we=0,Ne=Math.min(Y,fe);we<Ne;++we)if(N[we]!==E[we]){Y=N[we],fe=E[we];break}return Y<fe?-1:fe<Y?1:0},l.isEncoding=function(N){switch(String(N).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(N,E){if(!Array.isArray(N))throw new TypeError('"list" argument must be an Array of Buffers');if(N.length===0)return l.alloc(0);let Y;if(E===void 0)for(E=0,Y=0;Y<N.length;++Y)E+=N[Y].length;const fe=l.allocUnsafe(E);let we=0;for(Y=0;Y<N.length;++Y){let Ne=N[Y];if(Ee(Ne,Uint8Array))we+Ne.length>fe.length?(l.isBuffer(Ne)||(Ne=l.from(Ne)),Ne.copy(fe,we)):Uint8Array.prototype.set.call(fe,Ne,we);else if(l.isBuffer(Ne))Ne.copy(fe,we);else throw new TypeError('"list" argument must be an Array of Buffers');we+=Ne.length}return fe};function g(L,N){if(l.isBuffer(L))return L.length;if(ArrayBuffer.isView(L)||Ee(L,ArrayBuffer))return L.byteLength;if(typeof L!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof L);const E=L.length,Y=arguments.length>2&&arguments[2]===!0;if(!Y&&E===0)return 0;let fe=!1;for(;;)switch(N){case"ascii":case"latin1":case"binary":return E;case"utf8":case"utf-8":return X(L).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E*2;case"hex":return E>>>1;case"base64":return J(L).length;default:if(fe)return Y?-1:X(L).length;N=(""+N).toLowerCase(),fe=!0}}l.byteLength=g;function w(L,N,E){let Y=!1;if((N===void 0||N<0)&&(N=0),N>this.length||((E===void 0||E>this.length)&&(E=this.length),E<=0)||(E>>>=0,N>>>=0,E<=N))return"";for(L||(L="utf8");;)switch(L){case"hex":return H(this,N,E);case"utf8":case"utf-8":return ye(this,N,E);case"ascii":return he(this,N,E);case"latin1":case"binary":return ee(this,N,E);case"base64":return me(this,N,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,N,E);default:if(Y)throw new TypeError("Unknown encoding: "+L);L=(L+"").toLowerCase(),Y=!0}}l.prototype._isBuffer=!0;function S(L,N,E){const Y=L[N];L[N]=L[E],L[E]=Y}l.prototype.swap16=function(){const N=this.length;if(N%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let E=0;E<N;E+=2)S(this,E,E+1);return this},l.prototype.swap32=function(){const N=this.length;if(N%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let E=0;E<N;E+=4)S(this,E,E+3),S(this,E+1,E+2);return this},l.prototype.swap64=function(){const N=this.length;if(N%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let E=0;E<N;E+=8)S(this,E,E+7),S(this,E+1,E+6),S(this,E+2,E+5),S(this,E+3,E+4);return this},l.prototype.toString=function(){const N=this.length;return N===0?"":arguments.length===0?ye(this,0,N):w.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(N){if(!l.isBuffer(N))throw new TypeError("Argument must be a Buffer");return this===N?!0:l.compare(this,N)===0},l.prototype.inspect=function(){let N="";const E=t.INSPECT_MAX_BYTES;return N=this.toString("hex",0,E).replace(/(.{2})/g,"$1 ").trim(),this.length>E&&(N+=" ... "),"<Buffer "+N+">"},s&&(l.prototype[s]=l.prototype.inspect),l.prototype.compare=function(N,E,Y,fe,we){if(Ee(N,Uint8Array)&&(N=l.from(N,N.offset,N.byteLength)),!l.isBuffer(N))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof N);if(E===void 0&&(E=0),Y===void 0&&(Y=N?N.length:0),fe===void 0&&(fe=0),we===void 0&&(we=this.length),E<0||Y>N.length||fe<0||we>this.length)throw new RangeError("out of range index");if(fe>=we&&E>=Y)return 0;if(fe>=we)return-1;if(E>=Y)return 1;if(E>>>=0,Y>>>=0,fe>>>=0,we>>>=0,this===N)return 0;let Ne=we-fe,Le=Y-E;const ze=Math.min(Ne,Le),st=this.slice(fe,we),Qe=N.slice(E,Y);for(let at=0;at<ze;++at)if(st[at]!==Qe[at]){Ne=st[at],Le=Qe[at];break}return Ne<Le?-1:Le<Ne?1:0};function _(L,N,E,Y,fe){if(L.length===0)return-1;if(typeof E=="string"?(Y=E,E=0):E>2147483647?E=2147483647:E<-2147483648&&(E=-2147483648),E=+E,Te(E)&&(E=fe?0:L.length-1),E<0&&(E=L.length+E),E>=L.length){if(fe)return-1;E=L.length-1}else if(E<0)if(fe)E=0;else return-1;if(typeof N=="string"&&(N=l.from(N,Y)),l.isBuffer(N))return N.length===0?-1:A(L,N,E,Y,fe);if(typeof N=="number")return N=N&255,typeof Uint8Array.prototype.indexOf=="function"?fe?Uint8Array.prototype.indexOf.call(L,N,E):Uint8Array.prototype.lastIndexOf.call(L,N,E):A(L,[N],E,Y,fe);throw new TypeError("val must be string, number or Buffer")}function A(L,N,E,Y,fe){let we=1,Ne=L.length,Le=N.length;if(Y!==void 0&&(Y=String(Y).toLowerCase(),Y==="ucs2"||Y==="ucs-2"||Y==="utf16le"||Y==="utf-16le")){if(L.length<2||N.length<2)return-1;we=2,Ne/=2,Le/=2,E/=2}function ze(Qe,at){return we===1?Qe[at]:Qe.readUInt16BE(at*we)}let st;if(fe){let Qe=-1;for(st=E;st<Ne;st++)if(ze(L,st)===ze(N,Qe===-1?0:st-Qe)){if(Qe===-1&&(Qe=st),st-Qe+1===Le)return Qe*we}else Qe!==-1&&(st-=st-Qe),Qe=-1}else for(E+Le>Ne&&(E=Ne-Le),st=E;st>=0;st--){let Qe=!0;for(let at=0;at<Le;at++)if(ze(L,st+at)!==ze(N,at)){Qe=!1;break}if(Qe)return st}return-1}l.prototype.includes=function(N,E,Y){return this.indexOf(N,E,Y)!==-1},l.prototype.indexOf=function(N,E,Y){return _(this,N,E,Y,!0)},l.prototype.lastIndexOf=function(N,E,Y){return _(this,N,E,Y,!1)};function B(L,N,E,Y){E=Number(E)||0;const fe=L.length-E;Y?(Y=Number(Y),Y>fe&&(Y=fe)):Y=fe;const we=N.length;Y>we/2&&(Y=we/2);let Ne;for(Ne=0;Ne<Y;++Ne){const Le=parseInt(N.substr(Ne*2,2),16);if(Te(Le))return Ne;L[E+Ne]=Le}return Ne}function Q(L,N,E,Y){return xe(X(N,L.length-E),L,E,Y)}function U(L,N,E,Y){return xe(oe(N),L,E,Y)}function q(L,N,E,Y){return xe(J(N),L,E,Y)}function de(L,N,E,Y){return xe(F(N,L.length-E),L,E,Y)}l.prototype.write=function(N,E,Y,fe){if(E===void 0)fe="utf8",Y=this.length,E=0;else if(Y===void 0&&typeof E=="string")fe=E,Y=this.length,E=0;else if(isFinite(E))E=E>>>0,isFinite(Y)?(Y=Y>>>0,fe===void 0&&(fe="utf8")):(fe=Y,Y=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const we=this.length-E;if((Y===void 0||Y>we)&&(Y=we),N.length>0&&(Y<0||E<0)||E>this.length)throw new RangeError("Attempt to write outside buffer bounds");fe||(fe="utf8");let Ne=!1;for(;;)switch(fe){case"hex":return B(this,N,E,Y);case"utf8":case"utf-8":return Q(this,N,E,Y);case"ascii":case"latin1":case"binary":return U(this,N,E,Y);case"base64":return q(this,N,E,Y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return de(this,N,E,Y);default:if(Ne)throw new TypeError("Unknown encoding: "+fe);fe=(""+fe).toLowerCase(),Ne=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function me(L,N,E){return N===0&&E===L.length?e.fromByteArray(L):e.fromByteArray(L.slice(N,E))}function ye(L,N,E){E=Math.min(L.length,E);const Y=[];let fe=N;for(;fe<E;){const we=L[fe];let Ne=null,Le=we>239?4:we>223?3:we>191?2:1;if(fe+Le<=E){let ze,st,Qe,at;switch(Le){case 1:we<128&&(Ne=we);break;case 2:ze=L[fe+1],(ze&192)===128&&(at=(we&31)<<6|ze&63,at>127&&(Ne=at));break;case 3:ze=L[fe+1],st=L[fe+2],(ze&192)===128&&(st&192)===128&&(at=(we&15)<<12|(ze&63)<<6|st&63,at>2047&&(at<55296||at>57343)&&(Ne=at));break;case 4:ze=L[fe+1],st=L[fe+2],Qe=L[fe+3],(ze&192)===128&&(st&192)===128&&(Qe&192)===128&&(at=(we&15)<<18|(ze&63)<<12|(st&63)<<6|Qe&63,at>65535&&at<1114112&&(Ne=at))}}Ne===null?(Ne=65533,Le=1):Ne>65535&&(Ne-=65536,Y.push(Ne>>>10&1023|55296),Ne=56320|Ne&1023),Y.push(Ne),fe+=Le}return Z(Y)}const G=4096;function Z(L){const N=L.length;if(N<=G)return String.fromCharCode.apply(String,L);let E="",Y=0;for(;Y<N;)E+=String.fromCharCode.apply(String,L.slice(Y,Y+=G));return E}function he(L,N,E){let Y="";E=Math.min(L.length,E);for(let fe=N;fe<E;++fe)Y+=String.fromCharCode(L[fe]&127);return Y}function ee(L,N,E){let Y="";E=Math.min(L.length,E);for(let fe=N;fe<E;++fe)Y+=String.fromCharCode(L[fe]);return Y}function H(L,N,E){const Y=L.length;(!N||N<0)&&(N=0),(!E||E<0||E>Y)&&(E=Y);let fe="";for(let we=N;we<E;++we)fe+=Be[L[we]];return fe}function I(L,N,E){const Y=L.slice(N,E);let fe="";for(let we=0;we<Y.length-1;we+=2)fe+=String.fromCharCode(Y[we]+Y[we+1]*256);return fe}l.prototype.slice=function(N,E){const Y=this.length;N=~~N,E=E===void 0?Y:~~E,N<0?(N+=Y,N<0&&(N=0)):N>Y&&(N=Y),E<0?(E+=Y,E<0&&(E=0)):E>Y&&(E=Y),E<N&&(E=N);const fe=this.subarray(N,E);return Object.setPrototypeOf(fe,l.prototype),fe};function K(L,N,E){if(L%1!==0||L<0)throw new RangeError("offset is not uint");if(L+N>E)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(N,E,Y){N=N>>>0,E=E>>>0,Y||K(N,E,this.length);let fe=this[N],we=1,Ne=0;for(;++Ne<E&&(we*=256);)fe+=this[N+Ne]*we;return fe},l.prototype.readUintBE=l.prototype.readUIntBE=function(N,E,Y){N=N>>>0,E=E>>>0,Y||K(N,E,this.length);let fe=this[N+--E],we=1;for(;E>0&&(we*=256);)fe+=this[N+--E]*we;return fe},l.prototype.readUint8=l.prototype.readUInt8=function(N,E){return N=N>>>0,E||K(N,1,this.length),this[N]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(N,E){return N=N>>>0,E||K(N,2,this.length),this[N]|this[N+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(N,E){return N=N>>>0,E||K(N,2,this.length),this[N]<<8|this[N+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(N,E){return N=N>>>0,E||K(N,4,this.length),(this[N]|this[N+1]<<8|this[N+2]<<16)+this[N+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(N,E){return N=N>>>0,E||K(N,4,this.length),this[N]*16777216+(this[N+1]<<16|this[N+2]<<8|this[N+3])},l.prototype.readBigUInt64LE=nt(function(N){N=N>>>0,$(N,"offset");const E=this[N],Y=this[N+7];(E===void 0||Y===void 0)&&R(N,this.length-8);const fe=E+this[++N]*2**8+this[++N]*2**16+this[++N]*2**24,we=this[++N]+this[++N]*2**8+this[++N]*2**16+Y*2**24;return BigInt(fe)+(BigInt(we)<<BigInt(32))}),l.prototype.readBigUInt64BE=nt(function(N){N=N>>>0,$(N,"offset");const E=this[N],Y=this[N+7];(E===void 0||Y===void 0)&&R(N,this.length-8);const fe=E*2**24+this[++N]*2**16+this[++N]*2**8+this[++N],we=this[++N]*2**24+this[++N]*2**16+this[++N]*2**8+Y;return(BigInt(fe)<<BigInt(32))+BigInt(we)}),l.prototype.readIntLE=function(N,E,Y){N=N>>>0,E=E>>>0,Y||K(N,E,this.length);let fe=this[N],we=1,Ne=0;for(;++Ne<E&&(we*=256);)fe+=this[N+Ne]*we;return we*=128,fe>=we&&(fe-=Math.pow(2,8*E)),fe},l.prototype.readIntBE=function(N,E,Y){N=N>>>0,E=E>>>0,Y||K(N,E,this.length);let fe=E,we=1,Ne=this[N+--fe];for(;fe>0&&(we*=256);)Ne+=this[N+--fe]*we;return we*=128,Ne>=we&&(Ne-=Math.pow(2,8*E)),Ne},l.prototype.readInt8=function(N,E){return N=N>>>0,E||K(N,1,this.length),this[N]&128?(255-this[N]+1)*-1:this[N]},l.prototype.readInt16LE=function(N,E){N=N>>>0,E||K(N,2,this.length);const Y=this[N]|this[N+1]<<8;return Y&32768?Y|4294901760:Y},l.prototype.readInt16BE=function(N,E){N=N>>>0,E||K(N,2,this.length);const Y=this[N+1]|this[N]<<8;return Y&32768?Y|4294901760:Y},l.prototype.readInt32LE=function(N,E){return N=N>>>0,E||K(N,4,this.length),this[N]|this[N+1]<<8|this[N+2]<<16|this[N+3]<<24},l.prototype.readInt32BE=function(N,E){return N=N>>>0,E||K(N,4,this.length),this[N]<<24|this[N+1]<<16|this[N+2]<<8|this[N+3]},l.prototype.readBigInt64LE=nt(function(N){N=N>>>0,$(N,"offset");const E=this[N],Y=this[N+7];(E===void 0||Y===void 0)&&R(N,this.length-8);const fe=this[N+4]+this[N+5]*2**8+this[N+6]*2**16+(Y<<24);return(BigInt(fe)<<BigInt(32))+BigInt(E+this[++N]*2**8+this[++N]*2**16+this[++N]*2**24)}),l.prototype.readBigInt64BE=nt(function(N){N=N>>>0,$(N,"offset");const E=this[N],Y=this[N+7];(E===void 0||Y===void 0)&&R(N,this.length-8);const fe=(E<<24)+this[++N]*2**16+this[++N]*2**8+this[++N];return(BigInt(fe)<<BigInt(32))+BigInt(this[++N]*2**24+this[++N]*2**16+this[++N]*2**8+Y)}),l.prototype.readFloatLE=function(N,E){return N=N>>>0,E||K(N,4,this.length),r.read(this,N,!0,23,4)},l.prototype.readFloatBE=function(N,E){return N=N>>>0,E||K(N,4,this.length),r.read(this,N,!1,23,4)},l.prototype.readDoubleLE=function(N,E){return N=N>>>0,E||K(N,8,this.length),r.read(this,N,!0,52,8)},l.prototype.readDoubleBE=function(N,E){return N=N>>>0,E||K(N,8,this.length),r.read(this,N,!1,52,8)};function re(L,N,E,Y,fe,we){if(!l.isBuffer(L))throw new TypeError('"buffer" argument must be a Buffer instance');if(N>fe||N<we)throw new RangeError('"value" argument is out of bounds');if(E+Y>L.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(N,E,Y,fe){if(N=+N,E=E>>>0,Y=Y>>>0,!fe){const Le=Math.pow(2,8*Y)-1;re(this,N,E,Y,Le,0)}let we=1,Ne=0;for(this[E]=N&255;++Ne<Y&&(we*=256);)this[E+Ne]=N/we&255;return E+Y},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(N,E,Y,fe){if(N=+N,E=E>>>0,Y=Y>>>0,!fe){const Le=Math.pow(2,8*Y)-1;re(this,N,E,Y,Le,0)}let we=Y-1,Ne=1;for(this[E+we]=N&255;--we>=0&&(Ne*=256);)this[E+we]=N/Ne&255;return E+Y},l.prototype.writeUint8=l.prototype.writeUInt8=function(N,E,Y){return N=+N,E=E>>>0,Y||re(this,N,E,1,255,0),this[E]=N&255,E+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(N,E,Y){return N=+N,E=E>>>0,Y||re(this,N,E,2,65535,0),this[E]=N&255,this[E+1]=N>>>8,E+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(N,E,Y){return N=+N,E=E>>>0,Y||re(this,N,E,2,65535,0),this[E]=N>>>8,this[E+1]=N&255,E+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(N,E,Y){return N=+N,E=E>>>0,Y||re(this,N,E,4,4294967295,0),this[E+3]=N>>>24,this[E+2]=N>>>16,this[E+1]=N>>>8,this[E]=N&255,E+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(N,E,Y){return N=+N,E=E>>>0,Y||re(this,N,E,4,4294967295,0),this[E]=N>>>24,this[E+1]=N>>>16,this[E+2]=N>>>8,this[E+3]=N&255,E+4};function z(L,N,E,Y,fe){P(N,Y,fe,L,E,7);let we=Number(N&BigInt(4294967295));L[E++]=we,we=we>>8,L[E++]=we,we=we>>8,L[E++]=we,we=we>>8,L[E++]=we;let Ne=Number(N>>BigInt(32)&BigInt(4294967295));return L[E++]=Ne,Ne=Ne>>8,L[E++]=Ne,Ne=Ne>>8,L[E++]=Ne,Ne=Ne>>8,L[E++]=Ne,E}function O(L,N,E,Y,fe){P(N,Y,fe,L,E,7);let we=Number(N&BigInt(4294967295));L[E+7]=we,we=we>>8,L[E+6]=we,we=we>>8,L[E+5]=we,we=we>>8,L[E+4]=we;let Ne=Number(N>>BigInt(32)&BigInt(4294967295));return L[E+3]=Ne,Ne=Ne>>8,L[E+2]=Ne,Ne=Ne>>8,L[E+1]=Ne,Ne=Ne>>8,L[E]=Ne,E+8}l.prototype.writeBigUInt64LE=nt(function(N,E=0){return z(this,N,E,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=nt(function(N,E=0){return O(this,N,E,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(N,E,Y,fe){if(N=+N,E=E>>>0,!fe){const ze=Math.pow(2,8*Y-1);re(this,N,E,Y,ze-1,-ze)}let we=0,Ne=1,Le=0;for(this[E]=N&255;++we<Y&&(Ne*=256);)N<0&&Le===0&&this[E+we-1]!==0&&(Le=1),this[E+we]=(N/Ne>>0)-Le&255;return E+Y},l.prototype.writeIntBE=function(N,E,Y,fe){if(N=+N,E=E>>>0,!fe){const ze=Math.pow(2,8*Y-1);re(this,N,E,Y,ze-1,-ze)}let we=Y-1,Ne=1,Le=0;for(this[E+we]=N&255;--we>=0&&(Ne*=256);)N<0&&Le===0&&this[E+we+1]!==0&&(Le=1),this[E+we]=(N/Ne>>0)-Le&255;return E+Y},l.prototype.writeInt8=function(N,E,Y){return N=+N,E=E>>>0,Y||re(this,N,E,1,127,-128),N<0&&(N=255+N+1),this[E]=N&255,E+1},l.prototype.writeInt16LE=function(N,E,Y){return N=+N,E=E>>>0,Y||re(this,N,E,2,32767,-32768),this[E]=N&255,this[E+1]=N>>>8,E+2},l.prototype.writeInt16BE=function(N,E,Y){return N=+N,E=E>>>0,Y||re(this,N,E,2,32767,-32768),this[E]=N>>>8,this[E+1]=N&255,E+2},l.prototype.writeInt32LE=function(N,E,Y){return N=+N,E=E>>>0,Y||re(this,N,E,4,2147483647,-2147483648),this[E]=N&255,this[E+1]=N>>>8,this[E+2]=N>>>16,this[E+3]=N>>>24,E+4},l.prototype.writeInt32BE=function(N,E,Y){return N=+N,E=E>>>0,Y||re(this,N,E,4,2147483647,-2147483648),N<0&&(N=4294967295+N+1),this[E]=N>>>24,this[E+1]=N>>>16,this[E+2]=N>>>8,this[E+3]=N&255,E+4},l.prototype.writeBigInt64LE=nt(function(N,E=0){return z(this,N,E,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=nt(function(N,E=0){return O(this,N,E,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function V(L,N,E,Y,fe,we){if(E+Y>L.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("Index out of range")}function ne(L,N,E,Y,fe){return N=+N,E=E>>>0,fe||V(L,N,E,4),r.write(L,N,E,Y,23,4),E+4}l.prototype.writeFloatLE=function(N,E,Y){return ne(this,N,E,!0,Y)},l.prototype.writeFloatBE=function(N,E,Y){return ne(this,N,E,!1,Y)};function pe(L,N,E,Y,fe){return N=+N,E=E>>>0,fe||V(L,N,E,8),r.write(L,N,E,Y,52,8),E+8}l.prototype.writeDoubleLE=function(N,E,Y){return pe(this,N,E,!0,Y)},l.prototype.writeDoubleBE=function(N,E,Y){return pe(this,N,E,!1,Y)},l.prototype.copy=function(N,E,Y,fe){if(!l.isBuffer(N))throw new TypeError("argument should be a Buffer");if(Y||(Y=0),!fe&&fe!==0&&(fe=this.length),E>=N.length&&(E=N.length),E||(E=0),fe>0&&fe<Y&&(fe=Y),fe===Y||N.length===0||this.length===0)return 0;if(E<0)throw new RangeError("targetStart out of bounds");if(Y<0||Y>=this.length)throw new RangeError("Index out of range");if(fe<0)throw new RangeError("sourceEnd out of bounds");fe>this.length&&(fe=this.length),N.length-E<fe-Y&&(fe=N.length-E+Y);const we=fe-Y;return this===N&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(E,Y,fe):Uint8Array.prototype.set.call(N,this.subarray(Y,fe),E),we},l.prototype.fill=function(N,E,Y,fe){if(typeof N=="string"){if(typeof E=="string"?(fe=E,E=0,Y=this.length):typeof Y=="string"&&(fe=Y,Y=this.length),fe!==void 0&&typeof fe!="string")throw new TypeError("encoding must be a string");if(typeof fe=="string"&&!l.isEncoding(fe))throw new TypeError("Unknown encoding: "+fe);if(N.length===1){const Ne=N.charCodeAt(0);(fe==="utf8"&&Ne<128||fe==="latin1")&&(N=Ne)}}else typeof N=="number"?N=N&255:typeof N=="boolean"&&(N=Number(N));if(E<0||this.length<E||this.length<Y)throw new RangeError("Out of range index");if(Y<=E)return this;E=E>>>0,Y=Y===void 0?this.length:Y>>>0,N||(N=0);let we;if(typeof N=="number")for(we=E;we<Y;++we)this[we]=N;else{const Ne=l.isBuffer(N)?N:l.from(N,fe),Le=Ne.length;if(Le===0)throw new TypeError('The value "'+N+'" is invalid for argument "value"');for(we=0;we<Y-E;++we)this[we+E]=Ne[we%Le]}return this};const ae={};function se(L,N,E){ae[L]=class extends E{constructor(){super(),Object.defineProperty(this,"message",{value:N.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${L}]`,this.stack,delete this.name}get code(){return L}set code(fe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:fe,writable:!0})}toString(){return`${this.name} [${L}]: ${this.message}`}}}se("ERR_BUFFER_OUT_OF_BOUNDS",function(L){return L?`${L} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),se("ERR_INVALID_ARG_TYPE",function(L,N){return`The "${L}" argument must be of type number. Received type ${typeof N}`},TypeError),se("ERR_OUT_OF_RANGE",function(L,N,E){let Y=`The value of "${L}" is out of range.`,fe=E;return Number.isInteger(E)&&Math.abs(E)>2**32?fe=k(String(E)):typeof E=="bigint"&&(fe=String(E),(E>BigInt(2)**BigInt(32)||E<-(BigInt(2)**BigInt(32)))&&(fe=k(fe)),fe+="n"),Y+=` It must be ${N}. Received ${fe}`,Y},RangeError);function k(L){let N="",E=L.length;const Y=L[0]==="-"?1:0;for(;E>=Y+4;E-=3)N=`_${L.slice(E-3,E)}${N}`;return`${L.slice(0,E)}${N}`}function j(L,N,E){$(N,"offset"),(L[N]===void 0||L[N+E]===void 0)&&R(N,L.length-(E+1))}function P(L,N,E,Y,fe,we){if(L>E||L<N){const Ne=typeof N=="bigint"?"n":"";let Le;throw we>3?N===0||N===BigInt(0)?Le=`>= 0${Ne} and < 2${Ne} ** ${(we+1)*8}${Ne}`:Le=`>= -(2${Ne} ** ${(we+1)*8-1}${Ne}) and < 2 ** ${(we+1)*8-1}${Ne}`:Le=`>= ${N}${Ne} and <= ${E}${Ne}`,new ae.ERR_OUT_OF_RANGE("value",Le,L)}j(Y,fe,we)}function $(L,N){if(typeof L!="number")throw new ae.ERR_INVALID_ARG_TYPE(N,"number",L)}function R(L,N,E){throw Math.floor(L)!==L?($(L,E),new ae.ERR_OUT_OF_RANGE(E||"offset","an integer",L)):N<0?new ae.ERR_BUFFER_OUT_OF_BOUNDS:new ae.ERR_OUT_OF_RANGE(E||"offset",`>= ${E?1:0} and <= ${N}`,L)}const W=/[^+/0-9A-Za-z-_]/g;function te(L){if(L=L.split("=")[0],L=L.trim().replace(W,""),L.length<2)return"";for(;L.length%4!==0;)L=L+"=";return L}function X(L,N){N=N||1/0;let E;const Y=L.length;let fe=null;const we=[];for(let Ne=0;Ne<Y;++Ne){if(E=L.charCodeAt(Ne),E>55295&&E<57344){if(!fe){if(E>56319){(N-=3)>-1&&we.push(239,191,189);continue}else if(Ne+1===Y){(N-=3)>-1&&we.push(239,191,189);continue}fe=E;continue}if(E<56320){(N-=3)>-1&&we.push(239,191,189),fe=E;continue}E=(fe-55296<<10|E-56320)+65536}else fe&&(N-=3)>-1&&we.push(239,191,189);if(fe=null,E<128){if((N-=1)<0)break;we.push(E)}else if(E<2048){if((N-=2)<0)break;we.push(E>>6|192,E&63|128)}else if(E<65536){if((N-=3)<0)break;we.push(E>>12|224,E>>6&63|128,E&63|128)}else if(E<1114112){if((N-=4)<0)break;we.push(E>>18|240,E>>12&63|128,E>>6&63|128,E&63|128)}else throw new Error("Invalid code point")}return we}function oe(L){const N=[];for(let E=0;E<L.length;++E)N.push(L.charCodeAt(E)&255);return N}function F(L,N){let E,Y,fe;const we=[];for(let Ne=0;Ne<L.length&&!((N-=2)<0);++Ne)E=L.charCodeAt(Ne),Y=E>>8,fe=E%256,we.push(fe),we.push(Y);return we}function J(L){return e.toByteArray(te(L))}function xe(L,N,E,Y){let fe;for(fe=0;fe<Y&&!(fe+E>=N.length||fe>=L.length);++fe)N[fe+E]=L[fe];return fe}function Ee(L,N){return L instanceof N||L!=null&&L.constructor!=null&&L.constructor.name!=null&&L.constructor.name===N.name}function Te(L){return L!==L}const Be=function(){const L="0123456789abcdef",N=new Array(256);for(let E=0;E<16;++E){const Y=E*16;for(let fe=0;fe<16;++fe)N[Y+fe]=L[E]+L[fe]}return N}();function nt(L){return typeof BigInt>"u"?De:L}function De(){throw new Error("BigInt not supported")}})(Et);const CS="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySW5mb3JtYXRpb24iOnsiaWQiOiJjYzJlODE1OC00Zjg5LTQ0MTUtOGRjNS0xYjhiODE3ZjJhNGQiLCJlbWFpbCI6ImRpdmVyY2l0eXJlY29yZHNAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsInBpbl9wb2xpY3kiOnsicmVnaW9ucyI6W3siZGVzaXJlZFJlcGxpY2F0aW9uQ291bnQiOjEsImlkIjoiRlJBMSJ9LHsiZGVzaXJlZFJlcGxpY2F0aW9uQ291bnQiOjEsImlkIjoiTllDMSJ9XSwidmVyc2lvbiI6MX0sIm1mYV9lbmFibGVkIjpmYWxzZSwic3RhdHVzIjoiQUNUSVZFIn0sImF1dGhlbnRpY2F0aW9uVHlwZSI6InNjb3BlZEtleSIsInNjb3BlZEtleUtleSI6IjUyYTYyNTYxMTFiZWU1MTI5Njc3Iiwic2NvcGVkS2V5U2VjcmV0IjoiNzM1NzkzYjU3MjY3OTJiZWExNTQ5OTQwOGM4YzE4NjJhYjUzNDVhYTNlNGQ2N2U3MTA5YmFkYzQ2ZWNjOTBjNSIsImV4cCI6MTc3NTcxMzUzNn0.YYXsotBUiPEFdu40xv0sLrLGuU6CGsVDMjbqjB5zEjA",kX="https://api.pinata.cloud/pinning/pinFileToIPFS",AX="https://gateway.pinata.cloud/ipfs/",Df=async t=>{try{console.log("Starting Pinata upload for file:",t.name);const e=new FormData;e.append("file",t);const r=JSON.stringify({name:`token-${Date.now()}-${t.name}`});e.append("pinataMetadata",r);const s=JSON.stringify({cidVersion:1});e.append("pinataOptions",s),console.log("Uploading to Pinata with JWT:",CS?"JWT exists":"JWT missing");const i=await fetch(kX,{method:"POST",headers:{Authorization:`Bearer ${CS}`},body:e});if(console.log("Pinata response status:",i.status),!i.ok){const l=await i.text();throw console.error("Pinata error response:",l),new Error(`Failed to upload image to Pinata: ${i.status} ${l}`)}const a=await i.json();console.log("Pinata upload successful:",a);const o=`${AX}${a.IpfsHash}`;return console.log("Generated image URL:",o),o}catch(e){throw console.error("Error uploading to Pinata:",e),e}};function Qt(t){var e=t.width,r=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(r<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:r}}function Wo(t,e){return t.width===e.width&&t.height===e.height}var PX=function(){function t(e){var r=this;this._resolutionListener=function(){return r._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var r=this,s={next:e};return this._observers.push(s),{unsubscribe:function(){r._observers=r._observers.filter(function(i){return i!==s})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(r){return r.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function RX(t){return new PX(t)}var OX=function(){function t(e,r,s){var i;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=Qt({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=r??function(a){return a},this._allowResizeObserver=(i=s==null?void 0:s.allowResizeObserver)!==null&&i!==void 0?i:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,r;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(r=this._devicePixelRatioObservable)===null||r===void 0||r.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return Qt({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=Qt(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(r){return r!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(r){return r!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var r=this.bitmapSize;Wo(r,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(r,e))},t.prototype._emitBitmapSizeChanged=function(e,r){var s=this;this._bitmapSizeChangedListeners.forEach(function(i){return i.call(s,e,r)})},t.prototype._suggestNewBitmapSize=function(e){var r=this._suggestedBitmapSize,s=Qt(this._transformBitmapSize(e,this._canvasElementClientSize)),i=Wo(this.bitmapSize,s)?null:s;r===null&&i===null||r!==null&&i!==null&&Wo(r,i)||(this._suggestedBitmapSize=i,this._emitSuggestedBitmapSizeChanged(r,i))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,r){var s=this;this._suggestedBitmapSizeChangedListeners.forEach(function(i){return i.call(s,e,r)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}LX().then(function(r){return r?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var r=kS(this._canvasElement);if(r===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=RX(r),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,r;if(this._canvasElement!==null){var s=kS(this._canvasElement);if(s!==null){var i=(r=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&r!==void 0?r:s.devicePixelRatio,a=this._canvasElement.getClientRects(),o=a[0]!==void 0?MX(a[0],i):Qt({width:this._canvasElementClientSize.width*i,height:this._canvasElementClientSize.height*i});this._suggestNewBitmapSize(o)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(r){var s=r.find(function(o){return o.target===e._canvasElement});if(!(!s||!s.devicePixelContentBoxSize||!s.devicePixelContentBoxSize[0])){var i=s.devicePixelContentBoxSize[0],a=Qt({width:i.inlineSize,height:i.blockSize});e._suggestNewBitmapSize(a)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function IX(t,e){if(e.type==="device-pixel-content-box")return new OX(t,e.transform,e.options);throw new Error("Unsupported binding target")}function kS(t){return t.ownerDocument.defaultView}function LX(){return new Promise(function(t){var e=new ResizeObserver(function(r){t(r.every(function(s){return"devicePixelContentBoxSize"in s})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function MX(t,e){return Qt({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var FX=function(){function t(e,r,s){if(r.width===0||r.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=r,s.width===0||s.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=s,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function il(t,e){var r=t.canvasElementClientSize;if(r.width===0||r.height===0)return null;var s=t.bitmapSize;if(s.width===0||s.height===0)return null;var i=t.canvasElement.getContext("2d",e);return i===null?null:new FX(i,r,s)}/*!
 * @license
 * TradingView Lightweight Charts™ v4.2.3
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const DX={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},BX={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},$X={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},UX={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},VX={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},HX={color:"#26a69a",base:0},kA={color:"#2196f3"},AA={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var AS,PS;function al(t,e){const r={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(r)}function PA(t,e,r,s){t.beginPath();const i=t.lineWidth%2?.5:0;t.moveTo(r,e+i),t.lineTo(s,e+i),t.stroke()}function Wa(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function ns(t){if(t===void 0)throw new Error("Value is undefined");return t}function He(t){if(t===null)throw new Error("Value is null");return t}function dc(t){return He(ns(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(AS||(AS={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(PS||(PS={}));const RS={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function Qs(t){return t<0?0:t>255?255:Math.round(t)||0}function RA(t){return t<=0||t>1?Math.min(Math.max(t,0),1):Math.round(1e4*t)/1e4}const zX=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,XX=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,WX=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,qX=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d*\.?\d+)\s*\)$/;function Mu(t){(t=t.toLowerCase())in RS&&(t=RS[t]);{const e=qX.exec(t)||WX.exec(t);if(e)return[Qs(parseInt(e[1],10)),Qs(parseInt(e[2],10)),Qs(parseInt(e[3],10)),RA(e.length<5?1:parseFloat(e[4]))]}{const e=XX.exec(t);if(e)return[Qs(parseInt(e[1],16)),Qs(parseInt(e[2],16)),Qs(parseInt(e[3],16)),1]}{const e=zX.exec(t);if(e)return[Qs(17*parseInt(e[1],16)),Qs(17*parseInt(e[2],16)),Qs(17*parseInt(e[3],16)),1]}throw new Error(`Cannot parse color: ${t}`)}function OA(t){return .199*t[0]+.687*t[1]+.114*t[2]}function Um(t){const e=Mu(t);return{t:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,i:OA(e)>160?"black":"white"}}class vr{constructor(){this.h=[]}l(e,r,s){const i={o:e,_:r,u:s===!0};this.h.push(i)}v(e){const r=this.h.findIndex(s=>e===s.o);r>-1&&this.h.splice(r,1)}p(e){this.h=this.h.filter(r=>r._!==e)}m(e,r,s){const i=[...this.h];this.h=this.h.filter(a=>!a.u),i.forEach(a=>a.o(e,r,s))}M(){return this.h.length>0}S(){this.h=[]}}function Ln(t,...e){for(const r of e)for(const s in r)r[s]!==void 0&&Object.prototype.hasOwnProperty.call(r,s)&&!["__proto__","constructor","prototype"].includes(s)&&(typeof r[s]!="object"||t[s]===void 0||Array.isArray(r[s])?t[s]=r[s]:Ln(t[s],r[s]));return t}function ii(t){return typeof t=="number"&&isFinite(t)}function Fu(t){return typeof t=="number"&&t%1==0}function mh(t){return typeof t=="string"}function up(t){return typeof t=="boolean"}function ki(t){const e=t;if(!e||typeof e!="object")return e;let r,s,i;for(s in r=Array.isArray(e)?[]:{},e)e.hasOwnProperty(s)&&(i=e[s],r[s]=i&&typeof i=="object"?ki(i):i);return r}function KX(t){return t!==null}function Du(t){return t===null?void 0:t}const Vw="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Mc(t,e,r){return e===void 0&&(e=Vw),`${r=r!==void 0?`${r} `:""}${t}px ${e}`}class GX{constructor(e){this.k={C:1,T:5,P:NaN,R:"",D:"",V:"",O:"",B:0,A:0,I:0,L:0,N:0},this.F=e}W(){const e=this.k,r=this.j(),s=this.H();return e.P===r&&e.D===s||(e.P=r,e.D=s,e.R=Mc(r,s),e.L=2.5/12*r,e.B=e.L,e.A=r/12*e.T,e.I=r/12*e.T,e.N=0),e.V=this.$(),e.O=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class Hw{constructor(){this.Y=[]}Z(e){this.Y=e}X(e,r,s){this.Y.forEach(i=>{i.X(e,r,s)})}}class Dn{X(e,r,s){e.useBitmapCoordinateSpace(i=>this.K(i,r,s))}}class YX extends Dn{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K({context:e,horizontalPixelRatio:r,verticalPixelRatio:s}){if(this.G===null||this.G.tt===null)return;const i=this.G.tt,a=this.G,o=Math.max(1,Math.floor(r))%2/2,l=c=>{e.beginPath();for(let d=i.to-1;d>=i.from;--d){const u=a.it[d],h=Math.round(u.nt*r)+o,p=u.st*s,f=c*s+o;e.moveTo(h,p),e.arc(h,p,f,0,2*Math.PI)}e.fill()};a.et>0&&(e.fillStyle=a.rt,l(a.ht+a.et)),e.fillStyle=a.lt,l(a.ht)}}function JX(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}const QX={from:0,to:1};class ZX{constructor(e,r){this.ut=new Hw,this.ct=[],this.dt=[],this.ft=!0,this.F=e,this.vt=r,this.ut.Z(this.ct)}bt(e){const r=this.F.wt();r.length!==this.ct.length&&(this.dt=r.map(JX),this.ct=this.dt.map(s=>{const i=new YX;return i.J(s),i}),this.ut.Z(this.ct)),this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.ut}Mt(){const e=this.vt.W().mode===2,r=this.F.wt(),s=this.vt.xt(),i=this.F.St();r.forEach((a,o)=>{var l;const c=this.dt[o],d=a.kt(s);if(e||d===null||!a.yt())return void(c.tt=null);const u=He(a.Ct());c.lt=d.Tt,c.ht=d.ht,c.et=d.Pt,c.it[0]._t=d._t,c.it[0].st=a.Dt().Rt(d._t,u.Vt),c.rt=(l=d.Ot)!==null&&l!==void 0?l:this.F.Bt(c.it[0].st/a.Dt().At()),c.it[0].ot=s,c.it[0].nt=i.It(s),c.tt=QX})}}class e9 extends Dn{constructor(e){super(),this.zt=e}K({context:e,bitmapSize:r,horizontalPixelRatio:s,verticalPixelRatio:i}){if(this.zt===null)return;const a=this.zt.Lt.yt,o=this.zt.Et.yt;if(!a&&!o)return;const l=Math.round(this.zt.nt*s),c=Math.round(this.zt.st*i);e.lineCap="butt",a&&l>=0&&(e.lineWidth=Math.floor(this.zt.Lt.et*s),e.strokeStyle=this.zt.Lt.V,e.fillStyle=this.zt.Lt.V,al(e,this.zt.Lt.Nt),function(d,u,h,p){d.beginPath();const f=d.lineWidth%2?.5:0;d.moveTo(u+f,h),d.lineTo(u+f,p),d.stroke()}(e,l,0,r.height)),o&&c>=0&&(e.lineWidth=Math.floor(this.zt.Et.et*i),e.strokeStyle=this.zt.Et.V,e.fillStyle=this.zt.Et.V,al(e,this.zt.Et.Nt),PA(e,c,0,r.width))}}class t9{constructor(e){this.ft=!0,this.Ft={Lt:{et:1,Nt:0,V:"",yt:!1},Et:{et:1,Nt:0,V:"",yt:!1},nt:0,st:0},this.Wt=new e9(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.yt(),r=He(this.jt.Ht()),s=r.$t().W().crosshair,i=this.Ft;if(s.mode===2)return i.Et.yt=!1,void(i.Lt.yt=!1);i.Et.yt=e&&this.jt.Ut(r),i.Lt.yt=e&&this.jt.qt(),i.Et.et=s.horzLine.width,i.Et.Nt=s.horzLine.style,i.Et.V=s.horzLine.color,i.Lt.et=s.vertLine.width,i.Lt.Nt=s.vertLine.style,i.Lt.V=s.vertLine.color,i.nt=this.jt.Yt(),i.st=this.jt.Zt()}}function r9(t,e,r,s,i,a){t.fillRect(e+a,r,s-2*a,a),t.fillRect(e+a,r+i-a,s-2*a,a),t.fillRect(e,r,a,i),t.fillRect(e+s-a,r,a,i)}function Vm(t,e,r,s,i,a){t.save(),t.globalCompositeOperation="copy",t.fillStyle=a,t.fillRect(e,r,s,i),t.restore()}function OS(t,e,r,s,i,a){t.beginPath(),t.roundRect?t.roundRect(e,r,s,i,a):(t.lineTo(e+s-a[1],r),a[1]!==0&&t.arcTo(e+s,r,e+s,r+a[1],a[1]),t.lineTo(e+s,r+i-a[2]),a[2]!==0&&t.arcTo(e+s,r+i,e+s-a[2],r+i,a[2]),t.lineTo(e+a[3],r+i),a[3]!==0&&t.arcTo(e,r+i,e,r+i-a[3],a[3]),t.lineTo(e,r+a[0]),a[0]!==0&&t.arcTo(e,r,e+a[0],r,a[0]))}function IS(t,e,r,s,i,a,o=0,l=[0,0,0,0],c=""){if(t.save(),!o||!c||c===a)return OS(t,e,r,s,i,l),t.fillStyle=a,t.fill(),void t.restore();const d=o/2;var u;OS(t,e+d,r+d,s-o,i-o,(u=-d,l.map(h=>h===0?h:h+u))),a!=="transparent"&&(t.fillStyle=a,t.fill()),c!=="transparent"&&(t.lineWidth=o,t.strokeStyle=c,t.closePath(),t.stroke()),t.restore()}function IA(t,e,r,s,i,a,o){t.save(),t.globalCompositeOperation="copy";const l=t.createLinearGradient(0,0,0,i);l.addColorStop(0,a),l.addColorStop(1,o),t.fillStyle=l,t.fillRect(e,r,s,i),t.restore()}class LS{constructor(e,r){this.J(e,r)}J(e,r){this.zt=e,this.Xt=r}At(e,r){return this.zt.yt?e.P+e.L+e.B:0}X(e,r,s,i){if(!this.zt.yt||this.zt.Kt.length===0)return;const a=this.zt.V,o=this.Xt.t,l=e.useBitmapCoordinateSpace(c=>{const d=c.context;d.font=r.R;const u=this.Gt(c,r,s,i),h=u.Jt;return u.Qt?IS(d,h.ti,h.ii,h.ni,h.si,o,h.ei,[h.ht,0,0,h.ht],o):IS(d,h.ri,h.ii,h.ni,h.si,o,h.ei,[0,h.ht,h.ht,0],o),this.zt.hi&&(d.fillStyle=a,d.fillRect(h.ri,h.li,h.ai-h.ri,h.oi)),this.zt._i&&(d.fillStyle=r.O,d.fillRect(u.Qt?h.ui-h.ei:0,h.ii,h.ei,h.ci-h.ii)),u});e.useMediaCoordinateSpace(({context:c})=>{const d=l.di;c.font=r.R,c.textAlign=l.Qt?"right":"left",c.textBaseline="middle",c.fillStyle=a,c.fillText(this.zt.Kt,d.fi,(d.ii+d.ci)/2+d.pi)})}Gt(e,r,s,i){var a;const{context:o,bitmapSize:l,mediaSize:c,horizontalPixelRatio:d,verticalPixelRatio:u}=e,h=this.zt.hi||!this.zt.mi?r.T:0,p=this.zt.bi?r.C:0,f=r.L+this.Xt.wi,m=r.B+this.Xt.gi,v=r.A,x=r.I,b=this.zt.Kt,y=r.P,g=s.Mi(o,b),w=Math.ceil(s.xi(o,b)),S=y+f+m,_=r.C+v+x+w+h,A=Math.max(1,Math.floor(u));let B=Math.round(S*u);B%2!=A%2&&(B+=1);const Q=p>0?Math.max(1,Math.floor(p*d)):0,U=Math.round(_*d),q=Math.round(h*d),de=(a=this.Xt.Si)!==null&&a!==void 0?a:this.Xt.ki,me=Math.round(de*u)-Math.floor(.5*u),ye=Math.floor(me+A/2-B/2),G=ye+B,Z=i==="right",he=Z?c.width-p:p,ee=Z?l.width-Q:Q;let H,I,K;return Z?(H=ee-U,I=ee-q,K=he-h-v-p):(H=ee+U,I=ee+q,K=he+h+v),{Qt:Z,Jt:{ii:ye,li:me,ci:G,ni:U,si:B,ht:2*d,ei:Q,ti:H,ri:ee,ai:I,oi:A,ui:l.width},di:{ii:ye/u,ci:G/u,fi:K,pi:g}}}}class Hm{constructor(e){this.yi={ki:0,t:"#000",gi:0,wi:0},this.Ci={Kt:"",yt:!1,hi:!0,mi:!1,Ot:"",V:"#FFF",_i:!1,bi:!1},this.Ti={Kt:"",yt:!1,hi:!1,mi:!0,Ot:"",V:"#FFF",_i:!0,bi:!0},this.ft=!0,this.Pi=new(e||LS)(this.Ci,this.yi),this.Ri=new(e||LS)(this.Ti,this.yi)}Kt(){return this.Di(),this.Ci.Kt}ki(){return this.Di(),this.yi.ki}bt(){this.ft=!0}At(e,r=!1){return Math.max(this.Pi.At(e,r),this.Ri.At(e,r))}Vi(){return this.yi.Si||0}Oi(e){this.yi.Si=e}Bi(){return this.Di(),this.Ci.yt||this.Ti.yt}Ai(){return this.Di(),this.Ci.yt}gt(e){return this.Di(),this.Ci.hi=this.Ci.hi&&e.W().ticksVisible,this.Ti.hi=this.Ti.hi&&e.W().ticksVisible,this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Pi}Ii(){return this.Di(),this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Ri}Di(){this.ft&&(this.Ci.hi=!0,this.Ti.hi=!1,this.zi(this.Ci,this.Ti,this.yi))}}class s9 extends Hm{constructor(e,r,s){super(),this.jt=e,this.Li=r,this.Ei=s}zi(e,r,s){if(e.yt=!1,this.jt.W().mode===2)return;const i=this.jt.W().horzLine;if(!i.labelVisible)return;const a=this.Li.Ct();if(!this.jt.yt()||this.Li.Ni()||a===null)return;const o=Um(i.labelBackgroundColor);s.t=o.t,e.V=o.i;const l=2/12*this.Li.P();s.wi=l,s.gi=l;const c=this.Ei(this.Li);s.ki=c.ki,e.Kt=this.Li.Fi(c._t,a),e.yt=!0}}const n9=/[1-9]/g;class LA{constructor(){this.zt=null}J(e){this.zt=e}X(e,r){if(this.zt===null||this.zt.yt===!1||this.zt.Kt.length===0)return;const s=e.useMediaCoordinateSpace(({context:p})=>(p.font=r.R,Math.round(r.Wi.xi(p,He(this.zt).Kt,n9))));if(s<=0)return;const i=r.ji,a=s+2*i,o=a/2,l=this.zt.Hi;let c=this.zt.ki,d=Math.floor(c-o)+.5;d<0?(c+=Math.abs(0-d),d=Math.floor(c-o)+.5):d+a>l&&(c-=Math.abs(l-(d+a)),d=Math.floor(c-o)+.5);const u=d+a,h=Math.ceil(0+r.C+r.T+r.L+r.P+r.B);e.useBitmapCoordinateSpace(({context:p,horizontalPixelRatio:f,verticalPixelRatio:m})=>{const v=He(this.zt);p.fillStyle=v.t;const x=Math.round(d*f),b=Math.round(0*m),y=Math.round(u*f),g=Math.round(h*m),w=Math.round(2*f);if(p.beginPath(),p.moveTo(x,b),p.lineTo(x,g-w),p.arcTo(x,g,x+w,g,w),p.lineTo(y-w,g),p.arcTo(y,g,y,g-w,w),p.lineTo(y,b),p.fill(),v.hi){const S=Math.round(v.ki*f),_=b,A=Math.round((_+r.T)*m);p.fillStyle=v.V;const B=Math.max(1,Math.floor(f)),Q=Math.floor(.5*f);p.fillRect(S-Q,_,B,A-_)}}),e.useMediaCoordinateSpace(({context:p})=>{const f=He(this.zt),m=0+r.C+r.T+r.L+r.P/2;p.font=r.R,p.textAlign="left",p.textBaseline="middle",p.fillStyle=f.V;const v=r.Wi.Mi(p,"Apr0");p.translate(d+i,m+v),p.fillText(f.Kt,0,0)})}}class i9{constructor(e,r,s){this.ft=!0,this.Wt=new LA,this.Ft={yt:!1,t:"#4c525e",V:"white",Kt:"",Hi:0,ki:NaN,hi:!0},this.vt=e,this.$i=r,this.Ei=s}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt.J(this.Ft),this.Wt}Mt(){const e=this.Ft;if(e.yt=!1,this.vt.W().mode===2)return;const r=this.vt.W().vertLine;if(!r.labelVisible)return;const s=this.$i.St();if(s.Ni())return;e.Hi=s.Hi();const i=this.Ei();if(i===null)return;e.ki=i.ki;const a=s.Ui(this.vt.xt());e.Kt=s.qi(He(a)),e.yt=!0;const o=Um(r.labelBackgroundColor);e.t=o.t,e.V=o.i,e.hi=s.W().ticksVisible}}class zw{constructor(){this.Yi=null,this.Zi=0}Xi(){return this.Zi}Ki(e){this.Zi=e}Dt(){return this.Yi}Gi(e){this.Yi=e}Ji(e){return[]}Qi(){return[]}yt(){return!0}}var MS;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden"})(MS||(MS={}));class a9 extends zw{constructor(e,r){super(),this.tn=null,this.nn=NaN,this.sn=0,this.en=!0,this.rn=new Map,this.hn=!1,this.ln=NaN,this.an=NaN,this._n=NaN,this.un=NaN,this.$i=e,this.cn=r,this.dn=new ZX(e,this),this.fn=((i,a)=>o=>{const l=a(),c=i();if(o===He(this.tn).vn())return{_t:c,ki:l};{const d=He(o.Ct());return{_t:o.pn(l,d),ki:l}}})(()=>this.nn,()=>this.an);const s=((i,a)=>()=>{const o=this.$i.St().mn(i()),l=a();return o&&Number.isFinite(l)?{ot:o,ki:l}:null})(()=>this.sn,()=>this.Yt());this.bn=new i9(this,e,s),this.wn=new t9(this)}W(){return this.cn}gn(e,r){this._n=e,this.un=r}Mn(){this._n=NaN,this.un=NaN}xn(){return this._n}Sn(){return this.un}kn(e,r,s){this.hn||(this.hn=!0),this.en=!0,this.yn(e,r,s)}xt(){return this.sn}Yt(){return this.ln}Zt(){return this.an}yt(){return this.en}Cn(){this.en=!1,this.Tn(),this.nn=NaN,this.ln=NaN,this.an=NaN,this.tn=null,this.Mn()}Pn(e){return this.tn!==null?[this.wn,this.dn]:[]}Ut(e){return e===this.tn&&this.cn.horzLine.visible}qt(){return this.cn.vertLine.visible}Rn(e,r){this.en&&this.tn===e||this.rn.clear();const s=[];return this.tn===e&&s.push(this.Dn(this.rn,r,this.fn)),s}Qi(){return this.en?[this.bn]:[]}Ht(){return this.tn}Vn(){this.wn.bt(),this.rn.forEach(e=>e.bt()),this.bn.bt(),this.dn.bt()}On(e){return e&&!e.vn().Ni()?e.vn():null}yn(e,r,s){this.Bn(e,r,s)&&this.Vn()}Bn(e,r,s){const i=this.ln,a=this.an,o=this.nn,l=this.sn,c=this.tn,d=this.On(s);this.sn=e,this.ln=isNaN(e)?NaN:this.$i.St().It(e),this.tn=s;const u=d!==null?d.Ct():null;return d!==null&&u!==null?(this.nn=r,this.an=d.Rt(r,u)):(this.nn=NaN,this.an=NaN),i!==this.ln||a!==this.an||l!==this.sn||o!==this.nn||c!==this.tn}Tn(){const e=this.$i.wt().map(s=>s.In().An()).filter(KX),r=e.length===0?null:Math.max(...e);this.sn=r!==null?r:NaN}Dn(e,r,s){let i=e.get(r);return i===void 0&&(i=new s9(this,r,s),e.set(r,i)),i}}function zm(t){return t==="left"||t==="right"}class Dr{constructor(e){this.zn=new Map,this.Ln=[],this.En=e}Nn(e,r){const s=function(i,a){return i===void 0?a:{Fn:Math.max(i.Fn,a.Fn),Wn:i.Wn||a.Wn}}(this.zn.get(e),r);this.zn.set(e,s)}jn(){return this.En}Hn(e){const r=this.zn.get(e);return r===void 0?{Fn:this.En}:{Fn:Math.max(this.En,r.Fn),Wn:r.Wn}}$n(){this.Un(),this.Ln=[{qn:0}]}Yn(e){this.Un(),this.Ln=[{qn:1,Vt:e}]}Zn(e){this.Xn(),this.Ln.push({qn:5,Vt:e})}Un(){this.Xn(),this.Ln.push({qn:6})}Kn(){this.Un(),this.Ln=[{qn:4}]}Gn(e){this.Un(),this.Ln.push({qn:2,Vt:e})}Jn(e){this.Un(),this.Ln.push({qn:3,Vt:e})}Qn(){return this.Ln}ts(e){for(const r of e.Ln)this.ns(r);this.En=Math.max(this.En,e.En),e.zn.forEach((r,s)=>{this.Nn(s,r)})}static ss(){return new Dr(2)}static es(){return new Dr(3)}ns(e){switch(e.qn){case 0:this.$n();break;case 1:this.Yn(e.Vt);break;case 2:this.Gn(e.Vt);break;case 3:this.Jn(e.Vt);break;case 4:this.Kn();break;case 5:this.Zn(e.Vt);break;case 6:this.Xn()}}Xn(){const e=this.Ln.findIndex(r=>r.qn===5);e!==-1&&this.Ln.splice(e,1)}}const FS=".";function Ai(t,e){if(!ii(t))return"n/a";if(!Fu(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class Xm{constructor(e,r){if(r||(r=1),ii(e)&&Fu(e)||(e=100),e<0)throw new TypeError("invalid base");this.Li=e,this.rs=r,this.hs()}format(e){const r=e<0?"−":"";return e=Math.abs(e),r+this.ls(e)}hs(){if(this._s=0,this.Li>0&&this.rs>0){let e=this.Li;for(;e>1;)e/=10,this._s++}}ls(e){const r=this.Li/this.rs;let s=Math.floor(e),i="";const a=this._s!==void 0?this._s:NaN;if(r>1){let o=+(Math.round(e*r)-s*r).toFixed(this._s);o>=r&&(o-=r,s+=1),i=FS+Ai(+o.toFixed(this._s)*this.rs,a)}else s=Math.round(s*r)/r,a>0&&(i=FS+Ai(0,a));return s.toFixed(0)+i}}class MA extends Xm{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class o9{constructor(e){this.us=e}format(e){let r="";return e<0&&(r="-",e=-e),e<995?r+this.cs(e):e<999995?r+this.cs(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),r+this.cs(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),r+this.cs(e/1e9)+"B")}cs(e){let r;const s=Math.pow(10,this.us);return r=(e=Math.round(e*s)/s)>=1e-15&&e<1?e.toFixed(this.us).replace(/\.?0+$/,""):String(e),r.replace(/(\.[1-9]*)0+$/,(i,a)=>a)}}function FA(t,e,r,s,i,a,o){if(e.length===0||s.from>=e.length||s.to<=0)return;const{context:l,horizontalPixelRatio:c,verticalPixelRatio:d}=t,u=e[s.from];let h=a(t,u),p=u;if(s.to-s.from<2){const f=i/2;l.beginPath();const m={nt:u.nt-f,st:u.st},v={nt:u.nt+f,st:u.st};l.moveTo(m.nt*c,m.st*d),l.lineTo(v.nt*c,v.st*d),o(t,h,m,v)}else{const f=(v,x)=>{o(t,h,p,x),l.beginPath(),h=v,p=x};let m=p;l.beginPath(),l.moveTo(u.nt*c,u.st*d);for(let v=s.from+1;v<s.to;++v){m=e[v];const x=a(t,m);switch(r){case 0:l.lineTo(m.nt*c,m.st*d);break;case 1:l.lineTo(m.nt*c,e[v-1].st*d),x!==h&&(f(x,m),l.lineTo(m.nt*c,e[v-1].st*d)),l.lineTo(m.nt*c,m.st*d);break;case 2:{const[b,y]=l9(e,v-1,v);l.bezierCurveTo(b.nt*c,b.st*d,y.nt*c,y.st*d,m.nt*c,m.st*d);break}}r!==1&&x!==h&&(f(x,m),l.moveTo(m.nt*c,m.st*d))}(p!==m||p===m&&r===1)&&o(t,h,p,m)}}const DS=6;function Ex(t,e){return{nt:t.nt-e.nt,st:t.st-e.st}}function BS(t,e){return{nt:t.nt/e,st:t.st/e}}function l9(t,e,r){const s=Math.max(0,e-1),i=Math.min(t.length-1,r+1);var a,o;return[(a=t[e],o=BS(Ex(t[r],t[s]),DS),{nt:a.nt+o.nt,st:a.st+o.st}),Ex(t[r],BS(Ex(t[i],t[e]),DS))]}function c9(t,e,r,s,i){const{context:a,horizontalPixelRatio:o,verticalPixelRatio:l}=e;a.lineTo(i.nt*o,t*l),a.lineTo(s.nt*o,t*l),a.closePath(),a.fillStyle=r,a.fill()}class DA extends Dn{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){var r;if(this.G===null)return;const{it:s,tt:i,ds:a,et:o,Nt:l,fs:c}=this.G,d=(r=this.G.vs)!==null&&r!==void 0?r:this.G.ps?0:e.mediaSize.height;if(i===null)return;const u=e.context;u.lineCap="butt",u.lineJoin="round",u.lineWidth=o,al(u,l),u.lineWidth=1,FA(e,s,c,i,a,this.bs.bind(this),c9.bind(null,d))}}function Ov(t,e,r){return Math.min(Math.max(t,e),r)}function hp(t,e,r){return e-t<=r}function BA(t){const e=Math.ceil(t);return e%2==0?e-1:e}class Xw{ws(e,r){const s=this.gs,{Ms:i,xs:a,Ss:o,ks:l,ys:c,vs:d}=r;if(this.Cs===void 0||s===void 0||s.Ms!==i||s.xs!==a||s.Ss!==o||s.ks!==l||s.vs!==d||s.ys!==c){const u=e.context.createLinearGradient(0,0,0,c);if(u.addColorStop(0,i),d!=null){const h=Ov(d*e.verticalPixelRatio/c,0,1);u.addColorStop(h,a),u.addColorStop(h,o)}u.addColorStop(1,l),this.Cs=u,this.gs=r}return this.Cs}}class d9 extends DA{constructor(){super(...arguments),this.Ts=new Xw}bs(e,r){return this.Ts.ws(e,{Ms:r.Ps,xs:"",Ss:"",ks:r.Rs,ys:e.bitmapSize.height})}}function u9(t,e){const r=t.context;r.strokeStyle=e,r.stroke()}class $A extends Dn{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){if(this.G===null)return;const{it:r,tt:s,ds:i,fs:a,et:o,Nt:l,Ds:c}=this.G;if(s===null)return;const d=e.context;d.lineCap="butt",d.lineWidth=o*e.verticalPixelRatio,al(d,l),d.lineJoin="round";const u=this.Vs.bind(this);a!==void 0&&FA(e,r,a,s,i,u,u9),c&&function(h,p,f,m,v){const{horizontalPixelRatio:x,verticalPixelRatio:b,context:y}=h;let g=null;const w=Math.max(1,Math.floor(x))%2/2,S=f*b+w;for(let _=m.to-1;_>=m.from;--_){const A=p[_];if(A){const B=v(h,A);B!==g&&(y.beginPath(),g!==null&&y.fill(),y.fillStyle=B,g=B);const Q=Math.round(A.nt*x)+w,U=A.st*b;y.moveTo(Q,U),y.arc(Q,U,S,0,2*Math.PI)}}y.fill()}(e,r,c,s,u)}}class UA extends $A{Vs(e,r){return r.lt}}function VA(t,e,r,s,i=0,a=e.length){let o=a-i;for(;0<o;){const l=o>>1,c=i+l;s(e[c],r)===t?(i=c+1,o-=l+1):o=l}return i}const gh=VA.bind(null,!0),HA=VA.bind(null,!1);function h9(t,e){return t.ot<e}function p9(t,e){return e<t.ot}function zA(t,e,r){const s=e.Os(),i=e.ui(),a=gh(t,s,h9),o=HA(t,i,p9);if(!r)return{from:a,to:o};let l=a,c=o;return a>0&&a<t.length&&t[a].ot>=s&&(l=a-1),o>0&&o<t.length&&t[o-1].ot<=i&&(c=o+1),{from:l,to:c}}class Ww{constructor(e,r,s){this.Bs=!0,this.As=!0,this.Is=!0,this.zs=[],this.Ls=null,this.Es=e,this.Ns=r,this.Fs=s}bt(e){this.Bs=!0,e==="data"&&(this.As=!0),e==="options"&&(this.Is=!0)}gt(){return this.Es.yt()?(this.Ws(),this.Ls===null?null:this.js):null}Hs(){this.zs=this.zs.map(e=>Object.assign(Object.assign({},e),this.Es.Us().$s(e.ot)))}qs(){this.Ls=null}Ws(){this.As&&(this.Ys(),this.As=!1),this.Is&&(this.Hs(),this.Is=!1),this.Bs&&(this.Zs(),this.Bs=!1)}Zs(){const e=this.Es.Dt(),r=this.Ns.St();if(this.qs(),r.Ni()||e.Ni())return;const s=r.Xs();if(s===null||this.Es.In().Ks()===0)return;const i=this.Es.Ct();i!==null&&(this.Ls=zA(this.zs,s,this.Fs),this.Gs(e,r,i.Vt),this.Js())}}class Wm extends Ww{constructor(e,r){super(e,r,!0)}Gs(e,r,s){r.Qs(this.zs,Du(this.Ls)),e.te(this.zs,s,Du(this.Ls))}ie(e,r){return{ot:e,_t:r,nt:NaN,st:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(r=>{const s=r.Vt[3];return this.se(r.ee,s,e)})}}class f9 extends Wm{constructor(e,r){super(e,r),this.js=new Hw,this.re=new d9,this.he=new UA,this.js.Z([this.re,this.he])}se(e,r,s){return Object.assign(Object.assign({},this.ie(e,r)),s.$s(e))}Js(){const e=this.Es.W();this.re.J({fs:e.lineType,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,vs:null,ps:e.invertFilledArea,tt:this.Ls,ds:this.Ns.St().le()}),this.he.J({fs:e.lineVisible?e.lineType:void 0,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,tt:this.Ls,ds:this.Ns.St().le(),Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0})}}class m9 extends Dn{constructor(){super(...arguments),this.zt=null,this.ae=0,this.oe=0}J(e){this.zt=e}K({context:e,horizontalPixelRatio:r,verticalPixelRatio:s}){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;this.ae=this._e(r),this.ae>=2&&Math.max(1,Math.floor(r))%2!=this.ae%2&&this.ae--,this.oe=this.zt.ue?Math.min(this.ae,Math.floor(r)):this.ae;let i=null;const a=this.oe<=this.ae&&this.zt.le>=Math.floor(1.5*r);for(let o=this.zt.tt.from;o<this.zt.tt.to;++o){const l=this.zt.In[o];i!==l.ce&&(e.fillStyle=l.ce,i=l.ce);const c=Math.floor(.5*this.oe),d=Math.round(l.nt*r),u=d-c,h=this.oe,p=u+h-1,f=Math.min(l.de,l.fe),m=Math.max(l.de,l.fe),v=Math.round(f*s)-c,x=Math.round(m*s)+c,b=Math.max(x-v,this.oe);e.fillRect(u,v,h,b);const y=Math.ceil(1.5*this.ae);if(a){if(this.zt.ve){const _=d-y;let A=Math.max(v,Math.round(l.pe*s)-c),B=A+h-1;B>v+b-1&&(B=v+b-1,A=B-h+1),e.fillRect(_,A,u-_,B-A+1)}const g=d+y;let w=Math.max(v,Math.round(l.me*s)-c),S=w+h-1;S>v+b-1&&(S=v+b-1,w=S-h+1),e.fillRect(p+1,w,g-p,S-w+1)}}}_e(e){const r=Math.floor(e);return Math.max(r,Math.floor(function(s,i){return Math.floor(.3*s*i)}(He(this.zt).le,e)))}}class XA extends Ww{constructor(e,r){super(e,r,!1)}Gs(e,r,s){r.Qs(this.zs,Du(this.Ls)),e.be(this.zs,s,Du(this.Ls))}we(e,r,s){return{ot:e,ge:r.Vt[0],Me:r.Vt[1],xe:r.Vt[2],Se:r.Vt[3],nt:NaN,pe:NaN,de:NaN,fe:NaN,me:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(r=>this.se(r.ee,r,e))}}class g9 extends XA{constructor(){super(...arguments),this.js=new m9}se(e,r,s){return Object.assign(Object.assign({},this.we(e,r,s)),s.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),ve:e.openVisible,ue:e.thinBars,tt:this.Ls})}}class x9 extends DA{constructor(){super(...arguments),this.Ts=new Xw}bs(e,r){const s=this.G;return this.Ts.ws(e,{Ms:r.ke,xs:r.ye,Ss:r.Ce,ks:r.Te,ys:e.bitmapSize.height,vs:s.vs})}}class y9 extends $A{constructor(){super(...arguments),this.Pe=new Xw}Vs(e,r){const s=this.G;return this.Pe.ws(e,{Ms:r.Re,xs:r.Re,Ss:r.De,ks:r.De,ys:e.bitmapSize.height,vs:s.vs})}}class v9 extends Wm{constructor(e,r){super(e,r),this.js=new Hw,this.Ve=new x9,this.Oe=new y9,this.js.Z([this.Ve,this.Oe])}se(e,r,s){return Object.assign(Object.assign({},this.ie(e,r)),s.$s(e))}Js(){const e=this.Es.Ct();if(e===null)return;const r=this.Es.W(),s=this.Es.Dt().Rt(r.baseValue.price,e.Vt),i=this.Ns.St().le();this.Ve.J({it:this.zs,et:r.lineWidth,Nt:r.lineStyle,fs:r.lineType,vs:s,ps:!1,tt:this.Ls,ds:i}),this.Oe.J({it:this.zs,et:r.lineWidth,Nt:r.lineStyle,fs:r.lineVisible?r.lineType:void 0,Ds:r.pointMarkersVisible?r.pointMarkersRadius||r.lineWidth/2+2:void 0,vs:s,tt:this.Ls,ds:i})}}class b9 extends Dn{constructor(){super(...arguments),this.zt=null,this.ae=0}J(e){this.zt=e}K(e){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;const{horizontalPixelRatio:r}=e;this.ae=function(a,o){if(a>=2.5&&a<=4)return Math.floor(3*o);const l=1-.2*Math.atan(Math.max(4,a)-4)/(.5*Math.PI),c=Math.floor(a*l*o),d=Math.floor(a*o),u=Math.min(c,d);return Math.max(Math.floor(o),u)}(this.zt.le,r),this.ae>=2&&Math.floor(r)%2!=this.ae%2&&this.ae--;const s=this.zt.In;this.zt.Be&&this.Ae(e,s,this.zt.tt),this.zt._i&&this.Ie(e,s,this.zt.tt);const i=this.ze(r);(!this.zt._i||this.ae>2*i)&&this.Le(e,s,this.zt.tt)}Ae(e,r,s){if(this.zt===null)return;const{context:i,horizontalPixelRatio:a,verticalPixelRatio:o}=e;let l="",c=Math.min(Math.floor(a),Math.floor(this.zt.le*a));c=Math.max(Math.floor(a),Math.min(c,this.ae));const d=Math.floor(.5*c);let u=null;for(let h=s.from;h<s.to;h++){const p=r[h];p.Ee!==l&&(i.fillStyle=p.Ee,l=p.Ee);const f=Math.round(Math.min(p.pe,p.me)*o),m=Math.round(Math.max(p.pe,p.me)*o),v=Math.round(p.de*o),x=Math.round(p.fe*o);let b=Math.round(a*p.nt)-d;const y=b+c-1;u!==null&&(b=Math.max(u+1,b),b=Math.min(b,y));const g=y-b+1;i.fillRect(b,v,g,f-v),i.fillRect(b,m+1,g,x-m),u=y}}ze(e){let r=Math.floor(1*e);this.ae<=2*r&&(r=Math.floor(.5*(this.ae-1)));const s=Math.max(Math.floor(e),r);return this.ae<=2*s?Math.max(Math.floor(e),Math.floor(1*e)):s}Ie(e,r,s){if(this.zt===null)return;const{context:i,horizontalPixelRatio:a,verticalPixelRatio:o}=e;let l="";const c=this.ze(a);let d=null;for(let u=s.from;u<s.to;u++){const h=r[u];h.Ne!==l&&(i.fillStyle=h.Ne,l=h.Ne);let p=Math.round(h.nt*a)-Math.floor(.5*this.ae);const f=p+this.ae-1,m=Math.round(Math.min(h.pe,h.me)*o),v=Math.round(Math.max(h.pe,h.me)*o);if(d!==null&&(p=Math.max(d+1,p),p=Math.min(p,f)),this.zt.le*a>2*c)r9(i,p,m,f-p+1,v-m+1,c);else{const x=f-p+1;i.fillRect(p,m,x,v-m+1)}d=f}}Le(e,r,s){if(this.zt===null)return;const{context:i,horizontalPixelRatio:a,verticalPixelRatio:o}=e;let l="";const c=this.ze(a);for(let d=s.from;d<s.to;d++){const u=r[d];let h=Math.round(Math.min(u.pe,u.me)*o),p=Math.round(Math.max(u.pe,u.me)*o),f=Math.round(u.nt*a)-Math.floor(.5*this.ae),m=f+this.ae-1;if(u.ce!==l){const v=u.ce;i.fillStyle=v,l=v}this.zt._i&&(f+=c,h+=c,m-=c,p-=c),h>p||i.fillRect(f,h,m-f+1,p-h+1)}}}class w9 extends XA{constructor(){super(...arguments),this.js=new b9}se(e,r,s){return Object.assign(Object.assign({},this.we(e,r,s)),s.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),Be:e.wickVisible,_i:e.borderVisible,tt:this.Ls})}}class _9{constructor(e,r){this.Fe=e,this.Li=r}X(e,r,s){this.Fe.draw(e,this.Li,r,s)}}class Tx extends Ww{constructor(e,r,s){super(e,r,!1),this.wn=s,this.js=new _9(this.wn.renderer(),i=>{const a=e.Ct();return a===null?null:e.Dt().Rt(i,a.Vt)})}We(e){return this.wn.priceValueBuilder(e)}je(e){return this.wn.isWhitespace(e)}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(r=>Object.assign(Object.assign({ot:r.ee,nt:NaN},e.$s(r.ee)),{He:r.$e}))}Gs(e,r){r.Qs(this.zs,Du(this.Ls))}Js(){this.wn.update({bars:this.zs.map(N9),barSpacing:this.Ns.St().le(),visibleRange:this.Ls},this.Es.W())}}function N9(t){return{x:t.nt,time:t.ot,originalData:t.He,barColor:t.ce}}class S9 extends Dn{constructor(){super(...arguments),this.zt=null,this.Ue=[]}J(e){this.zt=e,this.Ue=[]}K({context:e,horizontalPixelRatio:r,verticalPixelRatio:s}){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return;this.Ue.length||this.qe(r);const i=Math.max(1,Math.floor(s)),a=Math.round(this.zt.Ye*s)-Math.floor(i/2),o=a+i;for(let l=this.zt.tt.from;l<this.zt.tt.to;l++){const c=this.zt.it[l],d=this.Ue[l-this.zt.tt.from],u=Math.round(c.st*s);let h,p;e.fillStyle=c.ce,u<=a?(h=u,p=o):(h=a,p=u-Math.floor(i/2)+i),e.fillRect(d.Os,h,d.ui-d.Os+1,p-h)}}qe(e){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return void(this.Ue=[]);const r=Math.ceil(this.zt.le*e)<=1?0:Math.max(1,Math.floor(e)),s=Math.round(this.zt.le*e)-r;this.Ue=new Array(this.zt.tt.to-this.zt.tt.from);for(let a=this.zt.tt.from;a<this.zt.tt.to;a++){const o=this.zt.it[a],l=Math.round(o.nt*e);let c,d;if(s%2){const u=(s-1)/2;c=l-u,d=l+u}else{const u=s/2;c=l-u,d=l+u-1}this.Ue[a-this.zt.tt.from]={Os:c,ui:d,Ze:l,Xe:o.nt*e,ot:o.ot}}for(let a=this.zt.tt.from+1;a<this.zt.tt.to;a++){const o=this.Ue[a-this.zt.tt.from],l=this.Ue[a-this.zt.tt.from-1];o.ot===l.ot+1&&o.Os-l.ui!==r+1&&(l.Ze>l.Xe?l.ui=o.Os-r-1:o.Os=l.ui+r+1)}let i=Math.ceil(this.zt.le*e);for(let a=this.zt.tt.from;a<this.zt.tt.to;a++){const o=this.Ue[a-this.zt.tt.from];o.ui<o.Os&&(o.ui=o.Os);const l=o.ui-o.Os+1;i=Math.min(l,i)}if(r>0&&i<4)for(let a=this.zt.tt.from;a<this.zt.tt.to;a++){const o=this.Ue[a-this.zt.tt.from];o.ui-o.Os+1>i&&(o.Ze>o.Xe?o.ui-=1:o.Os+=1)}}}class j9 extends Wm{constructor(){super(...arguments),this.js=new S9}se(e,r,s){return Object.assign(Object.assign({},this.ie(e,r)),s.$s(e))}Js(){const e={it:this.zs,le:this.Ns.St().le(),tt:this.Ls,Ye:this.Es.Dt().Rt(this.Es.W().base,He(this.Es.Ct()).Vt)};this.js.J(e)}}class E9 extends Wm{constructor(){super(...arguments),this.js=new UA}se(e,r,s){return Object.assign(Object.assign({},this.ie(e,r)),s.$s(e))}Js(){const e=this.Es.W(),r={it:this.zs,Nt:e.lineStyle,fs:e.lineVisible?e.lineType:void 0,et:e.lineWidth,Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,tt:this.Ls,ds:this.Ns.St().le()};this.js.J(r)}}const T9=/[2-9]/g;class Bu{constructor(e=50){this.Ke=0,this.Ge=1,this.Je=1,this.Qe={},this.tr=new Map,this.ir=e}nr(){this.Ke=0,this.tr.clear(),this.Ge=1,this.Je=1,this.Qe={}}xi(e,r,s){return this.sr(e,r,s).width}Mi(e,r,s){const i=this.sr(e,r,s);return((i.actualBoundingBoxAscent||0)-(i.actualBoundingBoxDescent||0))/2}sr(e,r,s){const i=s||T9,a=String(r).replace(i,"0");if(this.tr.has(a))return ns(this.tr.get(a)).er;if(this.Ke===this.ir){const l=this.Qe[this.Je];delete this.Qe[this.Je],this.tr.delete(l),this.Je++,this.Ke--}e.save(),e.textBaseline="middle";const o=e.measureText(a);return e.restore(),o.width===0&&r.length||(this.tr.set(a,{er:o,rr:this.Ge}),this.Qe[this.Ge]=a,this.Ke++,this.Ge++),o}}class C9{constructor(e){this.hr=null,this.k=null,this.lr="right",this.ar=e}_r(e,r,s){this.hr=e,this.k=r,this.lr=s}X(e){this.k!==null&&this.hr!==null&&this.hr.X(e,this.k,this.ar,this.lr)}}class WA{constructor(e,r,s){this.ur=e,this.ar=new Bu(50),this.cr=r,this.F=s,this.j=-1,this.Wt=new C9(this.ar)}gt(){const e=this.F.dr(this.cr);if(e===null)return null;const r=e.vr(this.cr)?e.pr():this.cr.Dt();if(r===null)return null;const s=e.mr(r);if(s==="overlay")return null;const i=this.F.br();return i.P!==this.j&&(this.j=i.P,this.ar.nr()),this.Wt._r(this.ur.Ii(),i,s),this.Wt}}class k9 extends Dn{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}wr(e,r){var s;if(!(!((s=this.zt)===null||s===void 0)&&s.yt))return null;const{st:i,et:a,gr:o}=this.zt;return r>=i-a-7&&r<=i+a+7?{Mr:this.zt,gr:o}:null}K({context:e,bitmapSize:r,horizontalPixelRatio:s,verticalPixelRatio:i}){if(this.zt===null||this.zt.yt===!1)return;const a=Math.round(this.zt.st*i);a<0||a>r.height||(e.lineCap="butt",e.strokeStyle=this.zt.V,e.lineWidth=Math.floor(this.zt.et*s),al(e,this.zt.Nt),PA(e,a,0,r.width))}}class qw{constructor(e){this.Sr={st:0,V:"rgba(0, 0, 0, 0)",et:1,Nt:0,yt:!1},this.kr=new k9,this.ft=!0,this.Es=e,this.Ns=e.$t(),this.kr.J(this.Sr)}bt(){this.ft=!0}gt(){return this.Es.yt()?(this.ft&&(this.yr(),this.ft=!1),this.kr):null}}class A9 extends qw{constructor(e){super(e)}yr(){this.Sr.yt=!1;const e=this.Es.Dt(),r=e.Cr().Cr;if(r!==2&&r!==3)return;const s=this.Es.W();if(!s.baseLineVisible||!this.Es.yt())return;const i=this.Es.Ct();i!==null&&(this.Sr.yt=!0,this.Sr.st=e.Rt(i.Vt,i.Vt),this.Sr.V=s.baseLineColor,this.Sr.et=s.baseLineWidth,this.Sr.Nt=s.baseLineStyle)}}class P9 extends Dn{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}$e(){return this.zt}K({context:e,horizontalPixelRatio:r,verticalPixelRatio:s}){const i=this.zt;if(i===null)return;const a=Math.max(1,Math.floor(r)),o=a%2/2,l=Math.round(i.Xe.x*r)+o,c=i.Xe.y*s;e.fillStyle=i.Tr,e.beginPath();const d=Math.max(2,1.5*i.Pr)*r;e.arc(l,c,d,0,2*Math.PI,!1),e.fill(),e.fillStyle=i.Rr,e.beginPath(),e.arc(l,c,i.ht*r,0,2*Math.PI,!1),e.fill(),e.lineWidth=a,e.strokeStyle=i.Dr,e.beginPath(),e.arc(l,c,i.ht*r+a/2,0,2*Math.PI,!1),e.stroke()}}const R9=[{Vr:0,Or:.25,Br:4,Ar:10,Ir:.25,zr:0,Lr:.4,Er:.8},{Vr:.25,Or:.525,Br:10,Ar:14,Ir:0,zr:0,Lr:.8,Er:0},{Vr:.525,Or:1,Br:14,Ar:14,Ir:0,zr:0,Lr:0,Er:0}];function $S(t,e,r,s){return function(i,a){if(i==="transparent")return i;const o=Mu(i),l=o[3];return`rgba(${o[0]}, ${o[1]}, ${o[2]}, ${a*l})`}(t,r+(s-r)*e)}function US(t,e){const r=t%2600/2600;let s;for(const c of R9)if(r>=c.Vr&&r<=c.Or){s=c;break}Wa(s!==void 0,"Last price animation internal logic error");const i=(r-s.Vr)/(s.Or-s.Vr);return{Rr:$S(e,i,s.Ir,s.zr),Dr:$S(e,i,s.Lr,s.Er),ht:(a=i,o=s.Br,l=s.Ar,o+(l-o)*a)};var a,o,l}class O9{constructor(e){this.Wt=new P9,this.ft=!0,this.Nr=!0,this.Fr=performance.now(),this.Wr=this.Fr-1,this.jr=e}Hr(){this.Wr=this.Fr-1,this.bt()}$r(){if(this.bt(),this.jr.W().lastPriceAnimation===2){const e=performance.now(),r=this.Wr-e;if(r>0)return void(r<650&&(this.Wr+=2600));this.Fr=e,this.Wr=e+2600}}bt(){this.ft=!0}Ur(){this.Nr=!0}yt(){return this.jr.W().lastPriceAnimation!==0}qr(){switch(this.jr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Wr}}gt(){return this.ft?(this.Mt(),this.ft=!1,this.Nr=!1):this.Nr&&(this.Yr(),this.Nr=!1),this.Wt}Mt(){this.Wt.J(null);const e=this.jr.$t().St(),r=e.Xs(),s=this.jr.Ct();if(r===null||s===null)return;const i=this.jr.Zr(!0);if(i.Xr||!r.Kr(i.ee))return;const a={x:e.It(i.ee),y:this.jr.Dt().Rt(i._t,s.Vt)},o=i.V,l=this.jr.W().lineWidth,c=US(this.Gr(),o);this.Wt.J({Tr:o,Pr:l,Rr:c.Rr,Dr:c.Dr,ht:c.ht,Xe:a})}Yr(){const e=this.Wt.$e();if(e!==null){const r=US(this.Gr(),e.Tr);e.Rr=r.Rr,e.Dr=r.Dr,e.ht=r.ht}}Gr(){return this.qr()?performance.now()-this.Fr:2599}}function nu(t,e){return BA(Math.min(Math.max(t,12),30)*e)}function $u(t,e){switch(t){case"arrowDown":case"arrowUp":return nu(e,1);case"circle":return nu(e,.8);case"square":return nu(e,.7)}}function qA(t){return function(e){const r=Math.ceil(e);return r%2!=0?r-1:r}(nu(t,1))}function VS(t){return Math.max(nu(t,.1),3)}function HS(t,e,r){return e?t:r?Math.ceil(t/2):0}function KA(t,e,r,s,i){const a=$u("square",r),o=(a-1)/2,l=t-o,c=e-o;return s>=l&&s<=l+a&&i>=c&&i<=c+a}function zS(t,e,r,s){const i=($u("arrowUp",s)-1)/2*r.Jr,a=(BA(s/2)-1)/2*r.Jr;e.beginPath(),t?(e.moveTo(r.nt-i,r.st),e.lineTo(r.nt,r.st-i),e.lineTo(r.nt+i,r.st),e.lineTo(r.nt+a,r.st),e.lineTo(r.nt+a,r.st+i),e.lineTo(r.nt-a,r.st+i),e.lineTo(r.nt-a,r.st)):(e.moveTo(r.nt-i,r.st),e.lineTo(r.nt,r.st+i),e.lineTo(r.nt+i,r.st),e.lineTo(r.nt+a,r.st),e.lineTo(r.nt+a,r.st-i),e.lineTo(r.nt-a,r.st-i),e.lineTo(r.nt-a,r.st)),e.fill()}function I9(t,e,r,s,i,a){return KA(e,r,s,i,a)}class L9 extends Dn{constructor(){super(...arguments),this.zt=null,this.ar=new Bu,this.j=-1,this.H="",this.Qr=""}J(e){this.zt=e}_r(e,r){this.j===e&&this.H===r||(this.j=e,this.H=r,this.Qr=Mc(e,r),this.ar.nr())}wr(e,r){if(this.zt===null||this.zt.tt===null)return null;for(let s=this.zt.tt.from;s<this.zt.tt.to;s++){const i=this.zt.it[s];if(F9(i,e,r))return{Mr:i.th,gr:i.gr}}return null}K({context:e,horizontalPixelRatio:r,verticalPixelRatio:s},i,a){if(this.zt!==null&&this.zt.tt!==null){e.textBaseline="middle",e.font=this.Qr;for(let o=this.zt.tt.from;o<this.zt.tt.to;o++){const l=this.zt.it[o];l.Kt!==void 0&&(l.Kt.Hi=this.ar.xi(e,l.Kt.ih),l.Kt.At=this.j,l.Kt.nt=l.nt-l.Kt.Hi/2),M9(l,e,r,s)}}}}function M9(t,e,r,s){e.fillStyle=t.V,t.Kt!==void 0&&function(i,a,o,l,c,d){i.save(),i.scale(c,d),i.fillText(a,o,l),i.restore()}(e,t.Kt.ih,t.Kt.nt,t.Kt.st,r,s),function(i,a,o){if(i.Ks!==0){switch(i.nh){case"arrowDown":return void zS(!1,a,o,i.Ks);case"arrowUp":return void zS(!0,a,o,i.Ks);case"circle":return void function(l,c,d){const u=($u("circle",d)-1)/2;l.beginPath(),l.arc(c.nt,c.st,u*c.Jr,0,2*Math.PI,!1),l.fill()}(a,o,i.Ks);case"square":return void function(l,c,d){const u=$u("square",d),h=(u-1)*c.Jr/2,p=c.nt-h,f=c.st-h;l.fillRect(p,f,u*c.Jr,u*c.Jr)}(a,o,i.Ks)}i.nh}}(t,e,function(i,a,o){const l=Math.max(1,Math.floor(a))%2/2;return{nt:Math.round(i.nt*a)+l,st:i.st*o,Jr:a}}(t,r,s))}function F9(t,e,r){return!(t.Kt===void 0||!function(s,i,a,o,l,c){const d=o/2;return l>=s&&l<=s+a&&c>=i-d&&c<=i+d}(t.Kt.nt,t.Kt.st,t.Kt.Hi,t.Kt.At,e,r))||function(s,i,a){if(s.Ks===0)return!1;switch(s.nh){case"arrowDown":case"arrowUp":return I9(0,s.nt,s.st,s.Ks,i,a);case"circle":return function(o,l,c,d,u){const h=2+$u("circle",c)/2,p=o-d,f=l-u;return Math.sqrt(p*p+f*f)<=h}(s.nt,s.st,s.Ks,i,a);case"square":return KA(s.nt,s.st,s.Ks,i,a)}}(t,e,r)}function D9(t,e,r,s,i,a,o,l,c){const d=ii(r)?r:r.Se,u=ii(r)?r:r.Me,h=ii(r)?r:r.xe,p=ii(e.size)?Math.max(e.size,0):1,f=qA(l.le())*p,m=f/2;switch(t.Ks=f,e.position){case"inBar":return t.st=o.Rt(d,c),void(t.Kt!==void 0&&(t.Kt.st=t.st+m+a+.6*i));case"aboveBar":return t.st=o.Rt(u,c)-m-s.sh,t.Kt!==void 0&&(t.Kt.st=t.st-m-.6*i,s.sh+=1.2*i),void(s.sh+=f+a);case"belowBar":return t.st=o.Rt(h,c)+m+s.eh,t.Kt!==void 0&&(t.Kt.st=t.st+m+a+.6*i,s.eh+=1.2*i),void(s.eh+=f+a)}e.position}class B9{constructor(e,r){this.ft=!0,this.rh=!0,this.hh=!0,this.ah=null,this.oh=null,this.Wt=new L9,this.jr=e,this.$i=r,this.zt={it:[],tt:null}}bt(e){this.ft=!0,this.hh=!0,e==="data"&&(this.rh=!0,this.oh=null)}gt(e){if(!this.jr.yt())return null;this.ft&&this._h();const r=this.$i.W().layout;return this.Wt._r(r.fontSize,r.fontFamily),this.Wt.J(this.zt),this.Wt}uh(){if(this.hh){if(this.jr.dh().length>0){const e=this.$i.St().le(),r=VS(e),s=1.5*qA(e)+2*r,i=this.fh();this.ah={above:HS(s,i.aboveBar,i.inBar),below:HS(s,i.belowBar,i.inBar)}}else this.ah=null;this.hh=!1}return this.ah}fh(){return this.oh===null&&(this.oh=this.jr.dh().reduce((e,r)=>(e[r.position]||(e[r.position]=!0),e),{inBar:!1,aboveBar:!1,belowBar:!1})),this.oh}_h(){const e=this.jr.Dt(),r=this.$i.St(),s=this.jr.dh();this.rh&&(this.zt.it=s.map(u=>({ot:u.time,nt:0,st:0,Ks:0,nh:u.shape,V:u.color,th:u.th,gr:u.id,Kt:void 0})),this.rh=!1);const i=this.$i.W().layout;this.zt.tt=null;const a=r.Xs();if(a===null)return;const o=this.jr.Ct();if(o===null||this.zt.it.length===0)return;let l=NaN;const c=VS(r.le()),d={sh:c,eh:c};this.zt.tt=zA(this.zt.it,a,!0);for(let u=this.zt.tt.from;u<this.zt.tt.to;u++){const h=s[u];h.time!==l&&(d.sh=c,d.eh=c,l=h.time);const p=this.zt.it[u];p.nt=r.It(h.time),h.text!==void 0&&h.text.length>0&&(p.Kt={ih:h.text,nt:0,st:0,Hi:0,At:0});const f=this.jr.ph(h.time);f!==null&&D9(p,h,f,d,i.fontSize,c,e,r,o.Vt)}this.ft=!1}}class $9 extends qw{constructor(e){super(e)}yr(){const e=this.Sr;e.yt=!1;const r=this.Es.W();if(!r.priceLineVisible||!this.Es.yt())return;const s=this.Es.Zr(r.priceLineSource===0);s.Xr||(e.yt=!0,e.st=s.ki,e.V=this.Es.mh(s.V),e.et=r.priceLineWidth,e.Nt=r.priceLineStyle)}}class U9 extends Hm{constructor(e){super(),this.jt=e}zi(e,r,s){e.yt=!1,r.yt=!1;const i=this.jt;if(!i.yt())return;const a=i.W(),o=a.lastValueVisible,l=i.bh()!=="",c=a.seriesLastValueMode===0,d=i.Zr(!1);if(d.Xr)return;o&&(e.Kt=this.wh(d,o,c),e.yt=e.Kt.length!==0),(l||c)&&(r.Kt=this.gh(d,o,l,c),r.yt=r.Kt.length>0);const u=i.mh(d.V),h=Um(u);s.t=h.t,s.ki=d.ki,r.Ot=i.$t().Bt(d.ki/i.Dt().At()),e.Ot=u,e.V=h.i,r.V=h.i}gh(e,r,s,i){let a="";const o=this.jt.bh();return s&&o.length!==0&&(a+=`${o} `),r&&i&&(a+=this.jt.Dt().Mh()?e.xh:e.Sh),a.trim()}wh(e,r,s){return r?s?this.jt.Dt().Mh()?e.Sh:e.xh:e.Kt:""}}function XS(t,e,r,s){const i=Number.isFinite(e),a=Number.isFinite(r);return i&&a?t(e,r):i||a?i?e:r:s}class Es{constructor(e,r){this.kh=e,this.yh=r}Ch(e){return e!==null&&this.kh===e.kh&&this.yh===e.yh}Th(){return new Es(this.kh,this.yh)}Ph(){return this.kh}Rh(){return this.yh}Dh(){return this.yh-this.kh}Ni(){return this.yh===this.kh||Number.isNaN(this.yh)||Number.isNaN(this.kh)}ts(e){return e===null?this:new Es(XS(Math.min,this.Ph(),e.Ph(),-1/0),XS(Math.max,this.Rh(),e.Rh(),1/0))}Vh(e){if(!ii(e)||this.yh-this.kh===0)return;const r=.5*(this.yh+this.kh);let s=this.yh-r,i=this.kh-r;s*=e,i*=e,this.yh=r+s,this.kh=r+i}Oh(e){ii(e)&&(this.yh+=e,this.kh+=e)}Bh(){return{minValue:this.kh,maxValue:this.yh}}static Ah(e){return e===null?null:new Es(e.minValue,e.maxValue)}}class Bf{constructor(e,r){this.Ih=e,this.zh=r||null}Lh(){return this.Ih}Eh(){return this.zh}Bh(){return this.Ih===null?null:{priceRange:this.Ih.Bh(),margins:this.zh||void 0}}static Ah(e){return e===null?null:new Bf(Es.Ah(e.priceRange),e.margins)}}class V9 extends qw{constructor(e,r){super(e),this.Nh=r}yr(){const e=this.Sr;e.yt=!1;const r=this.Nh.W();if(!this.Es.yt()||!r.lineVisible)return;const s=this.Nh.Fh();s!==null&&(e.yt=!0,e.st=s,e.V=r.color,e.et=r.lineWidth,e.Nt=r.lineStyle,e.gr=this.Nh.W().id)}}class H9 extends Hm{constructor(e,r){super(),this.jr=e,this.Nh=r}zi(e,r,s){e.yt=!1,r.yt=!1;const i=this.Nh.W(),a=i.axisLabelVisible,o=i.title!=="",l=this.jr;if(!a||!l.yt())return;const c=this.Nh.Fh();if(c===null)return;o&&(r.Kt=i.title,r.yt=!0),r.Ot=l.$t().Bt(c/l.Dt().At()),e.Kt=this.Wh(i.price),e.yt=!0;const d=Um(i.axisLabelColor||i.color);s.t=d.t;const u=i.axisLabelTextColor||d.i;e.V=u,r.V=u,s.ki=c}Wh(e){const r=this.jr.Ct();return r===null?"":this.jr.Dt().Fi(e,r.Vt)}}class z9{constructor(e,r){this.jr=e,this.cn=r,this.jh=new V9(e,this),this.ur=new H9(e,this),this.Hh=new WA(this.ur,e,e.$t())}$h(e){Ln(this.cn,e),this.bt(),this.jr.$t().Uh()}W(){return this.cn}qh(){return this.jh}Yh(){return this.Hh}Zh(){return this.ur}bt(){this.jh.bt(),this.ur.bt()}Fh(){const e=this.jr,r=e.Dt();if(e.$t().St().Ni()||r.Ni())return null;const s=e.Ct();return s===null?null:r.Rt(this.cn.price,s.Vt)}}class X9 extends zw{constructor(e){super(),this.$i=e}$t(){return this.$i}}const W9={Bar:(t,e,r,s)=>{var i;const a=e.upColor,o=e.downColor,l=He(t(r,s)),c=dc(l.Vt[0])<=dc(l.Vt[3]);return{ce:(i=l.V)!==null&&i!==void 0?i:c?a:o}},Candlestick:(t,e,r,s)=>{var i,a,o;const l=e.upColor,c=e.downColor,d=e.borderUpColor,u=e.borderDownColor,h=e.wickUpColor,p=e.wickDownColor,f=He(t(r,s)),m=dc(f.Vt[0])<=dc(f.Vt[3]);return{ce:(i=f.V)!==null&&i!==void 0?i:m?l:c,Ne:(a=f.Ot)!==null&&a!==void 0?a:m?d:u,Ee:(o=f.Xh)!==null&&o!==void 0?o:m?h:p}},Custom:(t,e,r,s)=>{var i;return{ce:(i=He(t(r,s)).V)!==null&&i!==void 0?i:e.color}},Area:(t,e,r,s)=>{var i,a,o,l;const c=He(t(r,s));return{ce:(i=c.lt)!==null&&i!==void 0?i:e.lineColor,lt:(a=c.lt)!==null&&a!==void 0?a:e.lineColor,Ps:(o=c.Ps)!==null&&o!==void 0?o:e.topColor,Rs:(l=c.Rs)!==null&&l!==void 0?l:e.bottomColor}},Baseline:(t,e,r,s)=>{var i,a,o,l,c,d;const u=He(t(r,s));return{ce:u.Vt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,Re:(i=u.Re)!==null&&i!==void 0?i:e.topLineColor,De:(a=u.De)!==null&&a!==void 0?a:e.bottomLineColor,ke:(o=u.ke)!==null&&o!==void 0?o:e.topFillColor1,ye:(l=u.ye)!==null&&l!==void 0?l:e.topFillColor2,Ce:(c=u.Ce)!==null&&c!==void 0?c:e.bottomFillColor1,Te:(d=u.Te)!==null&&d!==void 0?d:e.bottomFillColor2}},Line:(t,e,r,s)=>{var i,a;const o=He(t(r,s));return{ce:(i=o.V)!==null&&i!==void 0?i:e.color,lt:(a=o.V)!==null&&a!==void 0?a:e.color}},Histogram:(t,e,r,s)=>{var i;return{ce:(i=He(t(r,s)).V)!==null&&i!==void 0?i:e.color}}};class q9{constructor(e){this.Kh=(r,s)=>s!==void 0?s.Vt:this.jr.In().Gh(r),this.jr=e,this.Jh=W9[e.Qh()]}$s(e,r){return this.Jh(this.Kh,this.jr.W(),e,r)}}var WS;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})(WS||(WS={}));const ta=30;class K9{constructor(){this.tl=[],this.il=new Map,this.nl=new Map}sl(){return this.Ks()>0?this.tl[this.tl.length-1]:null}el(){return this.Ks()>0?this.rl(0):null}An(){return this.Ks()>0?this.rl(this.tl.length-1):null}Ks(){return this.tl.length}Ni(){return this.Ks()===0}Kr(e){return this.hl(e,0)!==null}Gh(e){return this.ll(e)}ll(e,r=0){const s=this.hl(e,r);return s===null?null:Object.assign(Object.assign({},this.al(s)),{ee:this.rl(s)})}ne(){return this.tl}ol(e,r,s){if(this.Ni())return null;let i=null;for(const a of s)i=pp(i,this._l(e,r,a));return i}J(e){this.nl.clear(),this.il.clear(),this.tl=e}rl(e){return this.tl[e].ee}al(e){return this.tl[e]}hl(e,r){const s=this.ul(e);if(s===null&&r!==0)switch(r){case-1:return this.cl(e);case 1:return this.dl(e);default:throw new TypeError("Unknown search mode")}return s}cl(e){let r=this.fl(e);return r>0&&(r-=1),r!==this.tl.length&&this.rl(r)<e?r:null}dl(e){const r=this.vl(e);return r!==this.tl.length&&e<this.rl(r)?r:null}ul(e){const r=this.fl(e);return r===this.tl.length||e<this.tl[r].ee?null:r}fl(e){return gh(this.tl,e,(r,s)=>r.ee<s)}vl(e){return HA(this.tl,e,(r,s)=>r.ee>s)}pl(e,r,s){let i=null;for(let a=e;a<r;a++){const o=this.tl[a].Vt[s];Number.isNaN(o)||(i===null?i={ml:o,bl:o}:(o<i.ml&&(i.ml=o),o>i.bl&&(i.bl=o)))}return i}_l(e,r,s){if(this.Ni())return null;let i=null;const a=He(this.el()),o=He(this.An()),l=Math.max(e,a),c=Math.min(r,o),d=Math.ceil(l/ta)*ta,u=Math.max(d,Math.floor(c/ta)*ta);{const p=this.fl(l),f=this.vl(Math.min(c,d,r));i=pp(i,this.pl(p,f,s))}let h=this.il.get(s);h===void 0&&(h=new Map,this.il.set(s,h));for(let p=Math.max(d+1,l);p<u;p+=ta){const f=Math.floor(p/ta);let m=h.get(f);if(m===void 0){const v=this.fl(f*ta),x=this.vl((f+1)*ta-1);m=this.pl(v,x,s),h.set(f,m)}i=pp(i,m)}{const p=this.fl(u),f=this.vl(c);i=pp(i,this.pl(p,f,s))}return i}}function pp(t,e){return t===null?e:e===null?t:{ml:Math.min(t.ml,e.ml),bl:Math.max(t.bl,e.bl)}}class G9{constructor(e){this.wl=e}X(e,r,s){this.wl.draw(e)}gl(e,r,s){var i,a;(a=(i=this.wl).drawBackground)===null||a===void 0||a.call(i,e)}}class Cx{constructor(e){this.tr=null,this.wn=e}gt(){var e;const r=this.wn.renderer();if(r===null)return null;if(((e=this.tr)===null||e===void 0?void 0:e.Ml)===r)return this.tr.xl;const s=new G9(r);return this.tr={Ml:r,xl:s},s}Sl(){var e,r,s;return(s=(r=(e=this.wn).zOrder)===null||r===void 0?void 0:r.call(e))!==null&&s!==void 0?s:"normal"}}function GA(t){var e,r,s,i,a;return{Kt:t.text(),ki:t.coordinate(),Si:(e=t.fixedCoordinate)===null||e===void 0?void 0:e.call(t),V:t.textColor(),t:t.backColor(),yt:(s=(r=t.visible)===null||r===void 0?void 0:r.call(t))===null||s===void 0||s,hi:(a=(i=t.tickVisible)===null||i===void 0?void 0:i.call(t))===null||a===void 0||a}}class Y9{constructor(e,r){this.Wt=new LA,this.kl=e,this.yl=r}gt(){return this.Wt.J(Object.assign({Hi:this.yl.Hi()},GA(this.kl))),this.Wt}}class J9 extends Hm{constructor(e,r){super(),this.kl=e,this.Li=r}zi(e,r,s){const i=GA(this.kl);s.t=i.t,e.V=i.V;const a=2/12*this.Li.P();s.wi=a,s.gi=a,s.ki=i.ki,s.Si=i.Si,e.Kt=i.Kt,e.yt=i.yt,e.hi=i.hi}}class Q9{constructor(e,r){this.Cl=null,this.Tl=null,this.Pl=null,this.Rl=null,this.Dl=null,this.Vl=e,this.jr=r}Ol(){return this.Vl}Vn(){var e,r;(r=(e=this.Vl).updateAllViews)===null||r===void 0||r.call(e)}Pn(){var e,r,s,i;const a=(s=(r=(e=this.Vl).paneViews)===null||r===void 0?void 0:r.call(e))!==null&&s!==void 0?s:[];if(((i=this.Cl)===null||i===void 0?void 0:i.Ml)===a)return this.Cl.xl;const o=a.map(l=>new Cx(l));return this.Cl={Ml:a,xl:o},o}Qi(){var e,r,s,i;const a=(s=(r=(e=this.Vl).timeAxisViews)===null||r===void 0?void 0:r.call(e))!==null&&s!==void 0?s:[];if(((i=this.Tl)===null||i===void 0?void 0:i.Ml)===a)return this.Tl.xl;const o=this.jr.$t().St(),l=a.map(c=>new Y9(c,o));return this.Tl={Ml:a,xl:l},l}Rn(){var e,r,s,i;const a=(s=(r=(e=this.Vl).priceAxisViews)===null||r===void 0?void 0:r.call(e))!==null&&s!==void 0?s:[];if(((i=this.Pl)===null||i===void 0?void 0:i.Ml)===a)return this.Pl.xl;const o=this.jr.Dt(),l=a.map(c=>new J9(c,o));return this.Pl={Ml:a,xl:l},l}Bl(){var e,r,s,i;const a=(s=(r=(e=this.Vl).priceAxisPaneViews)===null||r===void 0?void 0:r.call(e))!==null&&s!==void 0?s:[];if(((i=this.Rl)===null||i===void 0?void 0:i.Ml)===a)return this.Rl.xl;const o=a.map(l=>new Cx(l));return this.Rl={Ml:a,xl:o},o}Al(){var e,r,s,i;const a=(s=(r=(e=this.Vl).timeAxisPaneViews)===null||r===void 0?void 0:r.call(e))!==null&&s!==void 0?s:[];if(((i=this.Dl)===null||i===void 0?void 0:i.Ml)===a)return this.Dl.xl;const o=a.map(l=>new Cx(l));return this.Dl={Ml:a,xl:o},o}Il(e,r){var s,i,a;return(a=(i=(s=this.Vl).autoscaleInfo)===null||i===void 0?void 0:i.call(s,e,r))!==null&&a!==void 0?a:null}wr(e,r){var s,i,a;return(a=(i=(s=this.Vl).hitTest)===null||i===void 0?void 0:i.call(s,e,r))!==null&&a!==void 0?a:null}}function kx(t,e,r,s){t.forEach(i=>{e(i).forEach(a=>{a.Sl()===r&&s.push(a)})})}function Ax(t){return t.Pn()}function Z9(t){return t.Bl()}function eW(t){return t.Al()}class Kw extends X9{constructor(e,r,s,i,a){super(e),this.zt=new K9,this.jh=new $9(this),this.zl=[],this.Ll=new A9(this),this.El=null,this.Nl=null,this.Fl=[],this.Wl=[],this.jl=null,this.Hl=[],this.cn=r,this.$l=s;const o=new U9(this);this.rn=[o],this.Hh=new WA(o,this,e),s!=="Area"&&s!=="Line"&&s!=="Baseline"||(this.El=new O9(this)),this.Ul(),this.ql(a)}S(){this.jl!==null&&clearTimeout(this.jl)}mh(e){return this.cn.priceLineColor||e}Zr(e){const r={Xr:!0},s=this.Dt();if(this.$t().St().Ni()||s.Ni()||this.zt.Ni())return r;const i=this.$t().St().Xs(),a=this.Ct();if(i===null||a===null)return r;let o,l;if(e){const h=this.zt.sl();if(h===null)return r;o=h,l=h.ee}else{const h=this.zt.ll(i.ui(),-1);if(h===null||(o=this.zt.Gh(h.ee),o===null))return r;l=h.ee}const c=o.Vt[3],d=this.Us().$s(l,{Vt:o}),u=s.Rt(c,a.Vt);return{Xr:!1,_t:c,Kt:s.Fi(c,a.Vt),xh:s.Yl(c),Sh:s.Zl(c,a.Vt),V:d.ce,ki:u,ee:l}}Us(){return this.Nl!==null||(this.Nl=new q9(this)),this.Nl}W(){return this.cn}$h(e){const r=e.priceScaleId;r!==void 0&&r!==this.cn.priceScaleId&&this.$t().Xl(this,r),Ln(this.cn,e),e.priceFormat!==void 0&&(this.Ul(),this.$t().Kl()),this.$t().Gl(this),this.$t().Jl(),this.wn.bt("options")}J(e,r){this.zt.J(e),this.Ql(),this.wn.bt("data"),this.dn.bt("data"),this.El!==null&&(r&&r.ta?this.El.$r():e.length===0&&this.El.Hr());const s=this.$t().dr(this);this.$t().ia(s),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}na(e){this.Fl=e,this.Ql();const r=this.$t().dr(this);this.dn.bt("data"),this.$t().ia(r),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}sa(){return this.Fl}dh(){return this.Wl}ea(e){const r=new z9(this,e);return this.zl.push(r),this.$t().Gl(this),r}ra(e){const r=this.zl.indexOf(e);r!==-1&&this.zl.splice(r,1),this.$t().Gl(this)}Qh(){return this.$l}Ct(){const e=this.ha();return e===null?null:{Vt:e.Vt[3],la:e.ot}}ha(){const e=this.$t().St().Xs();if(e===null)return null;const r=e.Os();return this.zt.ll(r,1)}In(){return this.zt}ph(e){const r=this.zt.Gh(e);return r===null?null:this.$l==="Bar"||this.$l==="Candlestick"||this.$l==="Custom"?{ge:r.Vt[0],Me:r.Vt[1],xe:r.Vt[2],Se:r.Vt[3]}:r.Vt[3]}aa(e){const r=[];kx(this.Hl,Ax,"top",r);const s=this.El;return s!==null&&s.yt()&&(this.jl===null&&s.qr()&&(this.jl=setTimeout(()=>{this.jl=null,this.$t().oa()},0)),s.Ur(),r.unshift(s)),r}Pn(){const e=[];this._a()||e.push(this.Ll),e.push(this.wn,this.jh,this.dn);const r=this.zl.map(s=>s.qh());return e.push(...r),kx(this.Hl,Ax,"normal",e),e}ua(){return this.ca(Ax,"bottom")}da(e){return this.ca(Z9,e)}fa(e){return this.ca(eW,e)}va(e,r){return this.Hl.map(s=>s.wr(e,r)).filter(s=>s!==null)}Ji(e){return[this.Hh,...this.zl.map(r=>r.Yh())]}Rn(e,r){if(r!==this.Yi&&!this._a())return[];const s=[...this.rn];for(const i of this.zl)s.push(i.Zh());return this.Hl.forEach(i=>{s.push(...i.Rn())}),s}Qi(){const e=[];return this.Hl.forEach(r=>{e.push(...r.Qi())}),e}Il(e,r){if(this.cn.autoscaleInfoProvider!==void 0){const s=this.cn.autoscaleInfoProvider(()=>{const i=this.pa(e,r);return i===null?null:i.Bh()});return Bf.Ah(s)}return this.pa(e,r)}ma(){return this.cn.priceFormat.minMove}ba(){return this.wa}Vn(){var e;this.wn.bt(),this.dn.bt();for(const r of this.rn)r.bt();for(const r of this.zl)r.bt();this.jh.bt(),this.Ll.bt(),(e=this.El)===null||e===void 0||e.bt(),this.Hl.forEach(r=>r.Vn())}Dt(){return He(super.Dt())}kt(e){if(!((this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline")&&this.cn.crosshairMarkerVisible))return null;const r=this.zt.Gh(e);return r===null?null:{_t:r.Vt[3],ht:this.ga(),Ot:this.Ma(),Pt:this.xa(),Tt:this.Sa(e)}}bh(){return this.cn.title}yt(){return this.cn.visible}ka(e){this.Hl.push(new Q9(e,this))}ya(e){this.Hl=this.Hl.filter(r=>r.Ol()!==e)}Ca(){if(this.wn instanceof Tx)return e=>this.wn.We(e)}Ta(){if(this.wn instanceof Tx)return e=>this.wn.je(e)}_a(){return!zm(this.Dt().Pa())}pa(e,r){if(!Fu(e)||!Fu(r)||this.zt.Ni())return null;const s=this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline"||this.$l==="Histogram"?[3]:[2,1],i=this.zt.ol(e,r,s);let a=i!==null?new Es(i.ml,i.bl):null;if(this.Qh()==="Histogram"){const l=this.cn.base,c=new Es(l,l);a=a!==null?a.ts(c):c}let o=this.dn.uh();return this.Hl.forEach(l=>{const c=l.Il(e,r);if(c!=null&&c.priceRange){const f=new Es(c.priceRange.minValue,c.priceRange.maxValue);a=a!==null?a.ts(f):f}var d,u,h,p;c!=null&&c.margins&&(d=o,u=c.margins,o={above:Math.max((h=d==null?void 0:d.above)!==null&&h!==void 0?h:0,u.above),below:Math.max((p=d==null?void 0:d.below)!==null&&p!==void 0?p:0,u.below)})}),new Bf(a,o)}ga(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerRadius}return 0}Ma(){switch(this.$l){case"Line":case"Area":case"Baseline":{const e=this.cn.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}xa(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerBorderWidth}return 0}Sa(e){switch(this.$l){case"Line":case"Area":case"Baseline":{const r=this.cn.crosshairMarkerBackgroundColor;if(r.length!==0)return r}}return this.Us().$s(e).ce}Ul(){switch(this.cn.priceFormat.type){case"custom":this.wa={format:this.cn.priceFormat.formatter};break;case"volume":this.wa=new o9(this.cn.priceFormat.precision);break;case"percent":this.wa=new MA(this.cn.priceFormat.precision);break;default:{const e=Math.pow(10,this.cn.priceFormat.precision);this.wa=new Xm(e,this.cn.priceFormat.minMove*e)}}this.Yi!==null&&this.Yi.Ra()}Ql(){const e=this.$t().St();if(!e.Da()||this.zt.Ni())return void(this.Wl=[]);const r=He(this.zt.el());this.Wl=this.Fl.map((s,i)=>{const a=He(e.Va(s.time,!0)),o=a<r?1:-1;return{time:He(this.zt.ll(a,o)).ee,position:s.position,shape:s.shape,color:s.color,id:s.id,th:i,text:s.text,size:s.size,originalTime:s.originalTime}})}ql(e){switch(this.dn=new B9(this,this.$t()),this.$l){case"Bar":this.wn=new g9(this,this.$t());break;case"Candlestick":this.wn=new w9(this,this.$t());break;case"Line":this.wn=new E9(this,this.$t());break;case"Custom":this.wn=new Tx(this,this.$t(),ns(e));break;case"Area":this.wn=new f9(this,this.$t());break;case"Baseline":this.wn=new v9(this,this.$t());break;case"Histogram":this.wn=new j9(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.$l)}}ca(e,r){const s=[];return kx(this.Hl,e,r,s),s}}class tW{constructor(e){this.cn=e}Oa(e,r,s){let i=e;if(this.cn.mode===0)return i;const a=s.vn(),o=a.Ct();if(o===null)return i;const l=a.Rt(e,o),c=s.Ba().filter(u=>u instanceof Kw).reduce((u,h)=>{if(s.vr(h)||!h.yt())return u;const p=h.Dt(),f=h.In();if(p.Ni()||!f.Kr(r))return u;const m=f.Gh(r);if(m===null)return u;const v=dc(h.Ct());return u.concat([p.Rt(m.Vt[3],v.Vt)])},[]);if(c.length===0)return i;c.sort((u,h)=>Math.abs(u-l)-Math.abs(h-l));const d=c[0];return i=a.pn(d,o),i}}class rW extends Dn{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}K({context:e,bitmapSize:r,horizontalPixelRatio:s,verticalPixelRatio:i}){if(this.zt===null)return;const a=Math.max(1,Math.floor(s));e.lineWidth=a,function(o,l){o.save(),o.lineWidth%2&&o.translate(.5,.5),l(),o.restore()}(e,()=>{const o=He(this.zt);if(o.Aa){e.strokeStyle=o.Ia,al(e,o.za),e.beginPath();for(const l of o.La){const c=Math.round(l.Ea*s);e.moveTo(c,-a),e.lineTo(c,r.height+a)}e.stroke()}if(o.Na){e.strokeStyle=o.Fa,al(e,o.Wa),e.beginPath();for(const l of o.ja){const c=Math.round(l.Ea*i);e.moveTo(-a,c),e.lineTo(r.width+a,c)}e.stroke()}})}}class sW{constructor(e){this.Wt=new rW,this.ft=!0,this.tn=e}bt(){this.ft=!0}gt(){if(this.ft){const e=this.tn.$t().W().grid,r={Na:e.horzLines.visible,Aa:e.vertLines.visible,Fa:e.horzLines.color,Ia:e.vertLines.color,Wa:e.horzLines.style,za:e.vertLines.style,ja:this.tn.vn().Ha(),La:(this.tn.$t().St().Ha()||[]).map(s=>({Ea:s.coord}))};this.Wt.J(r),this.ft=!1}return this.Wt}}class nW{constructor(e){this.wn=new sW(e)}qh(){return this.wn}}const Px={$a:4,Ua:1e-4};function uc(t,e){const r=100*(t-e)/e;return e<0?-r:r}function iW(t,e){const r=uc(t.Ph(),e),s=uc(t.Rh(),e);return new Es(r,s)}function iu(t,e){const r=100*(t-e)/e+100;return e<0?-r:r}function aW(t,e){const r=iu(t.Ph(),e),s=iu(t.Rh(),e);return new Es(r,s)}function $f(t,e){const r=Math.abs(t);if(r<1e-15)return 0;const s=Math.log10(r+e.Ua)+e.$a;return t<0?-s:s}function au(t,e){const r=Math.abs(t);if(r<1e-15)return 0;const s=Math.pow(10,r-e.$a)-e.Ua;return t<0?-s:s}function Sd(t,e){if(t===null)return null;const r=$f(t.Ph(),e),s=$f(t.Rh(),e);return new Es(r,s)}function fp(t,e){if(t===null)return null;const r=au(t.Ph(),e),s=au(t.Rh(),e);return new Es(r,s)}function Rx(t){if(t===null)return Px;const e=Math.abs(t.Rh()-t.Ph());if(e>=1||e<1e-15)return Px;const r=Math.ceil(Math.abs(Math.log10(e))),s=Px.$a+r;return{$a:s,Ua:1/Math.pow(10,s)}}class Ox{constructor(e,r){if(this.qa=e,this.Ya=r,function(s){if(s<0)return!1;for(let i=s;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.qa))this.Za=[2,2.5,2];else{this.Za=[];for(let s=this.qa;s!==1;){if(s%2==0)this.Za.push(2),s/=2;else{if(s%5!=0)throw new Error("unexpected base");this.Za.push(2,2.5),s/=5}if(this.Za.length>100)throw new Error("something wrong with base")}}}Xa(e,r,s){const i=this.qa===0?0:1/this.qa;let a=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-r)))),o=0,l=this.Ya[0];for(;;){const h=hp(a,i,1e-14)&&a>i+1e-14,p=hp(a,s*l,1e-14),f=hp(a,1,1e-14);if(!(h&&p&&f))break;a/=l,l=this.Ya[++o%this.Ya.length]}if(a<=i+1e-14&&(a=i),a=Math.max(1,a),this.Za.length>0&&(c=a,d=1,u=1e-14,Math.abs(c-d)<u))for(o=0,l=this.Za[0];hp(a,s*l,1e-14)&&a>i+1e-14;)a/=l,l=this.Za[++o%this.Za.length];var c,d,u;return a}}class qS{constructor(e,r,s,i){this.Ka=[],this.Li=e,this.qa=r,this.Ga=s,this.Ja=i}Xa(e,r){if(e<r)throw new Error("high < low");const s=this.Li.At(),i=(e-r)*this.Qa()/s,a=new Ox(this.qa,[2,2.5,2]),o=new Ox(this.qa,[2,2,2.5]),l=new Ox(this.qa,[2.5,2,2]),c=[];return c.push(a.Xa(e,r,i),o.Xa(e,r,i),l.Xa(e,r,i)),function(d){if(d.length<1)throw Error("array is empty");let u=d[0];for(let h=1;h<d.length;++h)d[h]<u&&(u=d[h]);return u}(c)}io(){const e=this.Li,r=e.Ct();if(r===null)return void(this.Ka=[]);const s=e.At(),i=this.Ga(s-1,r),a=this.Ga(0,r),o=this.Li.W().entireTextOnly?this.no()/2:0,l=o,c=s-1-o,d=Math.max(i,a),u=Math.min(i,a);if(d===u)return void(this.Ka=[]);let h=this.Xa(d,u),p=d%h;p+=p<0?h:0;const f=d>=u?1:-1;let m=null,v=0;for(let x=d-p;x>u;x-=h){const b=this.Ja(x,r,!0);m!==null&&Math.abs(b-m)<this.Qa()||b<l||b>c||(v<this.Ka.length?(this.Ka[v].Ea=b,this.Ka[v].so=e.eo(x)):this.Ka.push({Ea:b,so:e.eo(x)}),v++,m=b,e.ro()&&(h=this.Xa(x*f,u)))}this.Ka.length=v}Ha(){return this.Ka}no(){return this.Li.P()}Qa(){return Math.ceil(2.5*this.no())}}function YA(t){return t.slice().sort((e,r)=>He(e.Xi())-He(r.Xi()))}var KS;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(KS||(KS={}));const GS=new MA,YS=new Xm(100,1);class oW{constructor(e,r,s,i){this.ho=0,this.lo=null,this.Ih=null,this.ao=null,this.oo={_o:!1,uo:null},this.co=0,this.do=0,this.fo=new vr,this.vo=new vr,this.po=[],this.mo=null,this.bo=null,this.wo=null,this.Mo=null,this.wa=YS,this.xo=Rx(null),this.So=e,this.cn=r,this.ko=s,this.yo=i,this.Co=new qS(this,100,this.To.bind(this),this.Po.bind(this))}Pa(){return this.So}W(){return this.cn}$h(e){if(Ln(this.cn,e),this.Ra(),e.mode!==void 0&&this.Ro({Cr:e.mode}),e.scaleMargins!==void 0){const r=ns(e.scaleMargins.top),s=ns(e.scaleMargins.bottom);if(r<0||r>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${r}`);if(s<0||s>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${s}`);if(r+s>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${r+s}`);this.Do(),this.bo=null}}Vo(){return this.cn.autoScale}ro(){return this.cn.mode===1}Mh(){return this.cn.mode===2}Oo(){return this.cn.mode===3}Cr(){return{Wn:this.cn.autoScale,Bo:this.cn.invertScale,Cr:this.cn.mode}}Ro(e){const r=this.Cr();let s=null;e.Wn!==void 0&&(this.cn.autoScale=e.Wn),e.Cr!==void 0&&(this.cn.mode=e.Cr,e.Cr!==2&&e.Cr!==3||(this.cn.autoScale=!0),this.oo._o=!1),r.Cr===1&&e.Cr!==r.Cr&&(function(a,o){if(a===null)return!1;const l=au(a.Ph(),o),c=au(a.Rh(),o);return isFinite(l)&&isFinite(c)}(this.Ih,this.xo)?(s=fp(this.Ih,this.xo),s!==null&&this.Ao(s)):this.cn.autoScale=!0),e.Cr===1&&e.Cr!==r.Cr&&(s=Sd(this.Ih,this.xo),s!==null&&this.Ao(s));const i=r.Cr!==this.cn.mode;i&&(r.Cr===2||this.Mh())&&this.Ra(),i&&(r.Cr===3||this.Oo())&&this.Ra(),e.Bo!==void 0&&r.Bo!==e.Bo&&(this.cn.invertScale=e.Bo,this.Io()),this.vo.m(r,this.Cr())}zo(){return this.vo}P(){return this.ko.fontSize}At(){return this.ho}Lo(e){this.ho!==e&&(this.ho=e,this.Do(),this.bo=null)}Eo(){if(this.lo)return this.lo;const e=this.At()-this.No()-this.Fo();return this.lo=e,e}Lh(){return this.Wo(),this.Ih}Ao(e,r){const s=this.Ih;(r||s===null&&e!==null||s!==null&&!s.Ch(e))&&(this.bo=null,this.Ih=e)}Ni(){return this.Wo(),this.ho===0||!this.Ih||this.Ih.Ni()}jo(e){return this.Bo()?e:this.At()-1-e}Rt(e,r){return this.Mh()?e=uc(e,r):this.Oo()&&(e=iu(e,r)),this.Po(e,r)}te(e,r,s){this.Wo();const i=this.Fo(),a=He(this.Lh()),o=a.Ph(),l=a.Rh(),c=this.Eo()-1,d=this.Bo(),u=c/(l-o),h=s===void 0?0:s.from,p=s===void 0?e.length:s.to,f=this.Ho();for(let m=h;m<p;m++){const v=e[m],x=v._t;if(isNaN(x))continue;let b=x;f!==null&&(b=f(v._t,r));const y=i+u*(b-o),g=d?y:this.ho-1-y;v.st=g}}be(e,r,s){this.Wo();const i=this.Fo(),a=He(this.Lh()),o=a.Ph(),l=a.Rh(),c=this.Eo()-1,d=this.Bo(),u=c/(l-o),h=s===void 0?0:s.from,p=s===void 0?e.length:s.to,f=this.Ho();for(let m=h;m<p;m++){const v=e[m];let x=v.ge,b=v.Me,y=v.xe,g=v.Se;f!==null&&(x=f(v.ge,r),b=f(v.Me,r),y=f(v.xe,r),g=f(v.Se,r));let w=i+u*(x-o),S=d?w:this.ho-1-w;v.pe=S,w=i+u*(b-o),S=d?w:this.ho-1-w,v.de=S,w=i+u*(y-o),S=d?w:this.ho-1-w,v.fe=S,w=i+u*(g-o),S=d?w:this.ho-1-w,v.me=S}}pn(e,r){const s=this.To(e,r);return this.$o(s,r)}$o(e,r){let s=e;return this.Mh()?s=function(i,a){return a<0&&(i=-i),i/100*a+a}(s,r):this.Oo()&&(s=function(i,a){return i-=100,a<0&&(i=-i),i/100*a+a}(s,r)),s}Ba(){return this.po}Uo(){if(this.mo)return this.mo;let e=[];for(let r=0;r<this.po.length;r++){const s=this.po[r];s.Xi()===null&&s.Ki(r+1),e.push(s)}return e=YA(e),this.mo=e,this.mo}qo(e){this.po.indexOf(e)===-1&&(this.po.push(e),this.Ra(),this.Yo())}Zo(e){const r=this.po.indexOf(e);if(r===-1)throw new Error("source is not attached to scale");this.po.splice(r,1),this.po.length===0&&(this.Ro({Wn:!0}),this.Ao(null)),this.Ra(),this.Yo()}Ct(){let e=null;for(const r of this.po){const s=r.Ct();s!==null&&(e===null||s.la<e.la)&&(e=s)}return e===null?null:e.Vt}Bo(){return this.cn.invertScale}Ha(){const e=this.Ct()===null;if(this.bo!==null&&(e||this.bo.Xo===e))return this.bo.Ha;this.Co.io();const r=this.Co.Ha();return this.bo={Ha:r,Xo:e},this.fo.m(),r}Ko(){return this.fo}Go(e){this.Mh()||this.Oo()||this.wo===null&&this.ao===null&&(this.Ni()||(this.wo=this.ho-e,this.ao=He(this.Lh()).Th()))}Jo(e){if(this.Mh()||this.Oo()||this.wo===null)return;this.Ro({Wn:!1}),(e=this.ho-e)<0&&(e=0);let r=(this.wo+.2*(this.ho-1))/(e+.2*(this.ho-1));const s=He(this.ao).Th();r=Math.max(r,.1),s.Vh(r),this.Ao(s)}Qo(){this.Mh()||this.Oo()||(this.wo=null,this.ao=null)}t_(e){this.Vo()||this.Mo===null&&this.ao===null&&(this.Ni()||(this.Mo=e,this.ao=He(this.Lh()).Th()))}i_(e){if(this.Vo()||this.Mo===null)return;const r=He(this.Lh()).Dh()/(this.Eo()-1);let s=e-this.Mo;this.Bo()&&(s*=-1);const i=s*r,a=He(this.ao).Th();a.Oh(i),this.Ao(a,!0),this.bo=null}n_(){this.Vo()||this.Mo!==null&&(this.Mo=null,this.ao=null)}ba(){return this.wa||this.Ra(),this.wa}Fi(e,r){switch(this.cn.mode){case 2:return this.s_(uc(e,r));case 3:return this.ba().format(iu(e,r));default:return this.Wh(e)}}eo(e){switch(this.cn.mode){case 2:return this.s_(e);case 3:return this.ba().format(e);default:return this.Wh(e)}}Yl(e){return this.Wh(e,He(this.e_()).ba())}Zl(e,r){return e=uc(e,r),this.s_(e,GS)}r_(){return this.po}h_(e){this.oo={uo:e,_o:!1}}Vn(){this.po.forEach(e=>e.Vn())}Ra(){this.bo=null;const e=this.e_();let r=100;e!==null&&(r=Math.round(1/e.ma())),this.wa=YS,this.Mh()?(this.wa=GS,r=100):this.Oo()?(this.wa=new Xm(100,1),r=100):e!==null&&(this.wa=e.ba()),this.Co=new qS(this,r,this.To.bind(this),this.Po.bind(this)),this.Co.io()}Yo(){this.mo=null}e_(){return this.po[0]||null}No(){return this.Bo()?this.cn.scaleMargins.bottom*this.At()+this.do:this.cn.scaleMargins.top*this.At()+this.co}Fo(){return this.Bo()?this.cn.scaleMargins.top*this.At()+this.co:this.cn.scaleMargins.bottom*this.At()+this.do}Wo(){this.oo._o||(this.oo._o=!0,this.l_())}Do(){this.lo=null}Po(e,r){if(this.Wo(),this.Ni())return 0;e=this.ro()&&e?$f(e,this.xo):e;const s=He(this.Lh()),i=this.Fo()+(this.Eo()-1)*(e-s.Ph())/s.Dh();return this.jo(i)}To(e,r){if(this.Wo(),this.Ni())return 0;const s=this.jo(e),i=He(this.Lh()),a=i.Ph()+i.Dh()*((s-this.Fo())/(this.Eo()-1));return this.ro()?au(a,this.xo):a}Io(){this.bo=null,this.Co.io()}l_(){const e=this.oo.uo;if(e===null)return;let r=null;const s=this.r_();let i=0,a=0;for(const c of s){if(!c.yt())continue;const d=c.Ct();if(d===null)continue;const u=c.Il(e.Os(),e.ui());let h=u&&u.Lh();if(h!==null){switch(this.cn.mode){case 1:h=Sd(h,this.xo);break;case 2:h=iW(h,d.Vt);break;case 3:h=aW(h,d.Vt)}if(r=r===null?h:r.ts(He(h)),u!==null){const p=u.Eh();p!==null&&(i=Math.max(i,p.above),a=Math.max(a,p.below))}}}if(i===this.co&&a===this.do||(this.co=i,this.do=a,this.bo=null,this.Do()),r!==null){if(r.Ph()===r.Rh()){const c=this.e_(),d=5*(c===null||this.Mh()||this.Oo()?1:c.ma());this.ro()&&(r=fp(r,this.xo)),r=new Es(r.Ph()-d,r.Rh()+d),this.ro()&&(r=Sd(r,this.xo))}if(this.ro()){const c=fp(r,this.xo),d=Rx(c);if(o=d,l=this.xo,o.$a!==l.$a||o.Ua!==l.Ua){const u=this.ao!==null?fp(this.ao,this.xo):null;this.xo=d,r=Sd(c,d),u!==null&&(this.ao=Sd(u,d))}}this.Ao(r)}else this.Ih===null&&(this.Ao(new Es(-.5,.5)),this.xo=Rx(null));var o,l;this.oo._o=!0}Ho(){return this.Mh()?uc:this.Oo()?iu:this.ro()?e=>$f(e,this.xo):null}a_(e,r,s){return r===void 0?(s===void 0&&(s=this.ba()),s.format(e)):r(e)}Wh(e,r){return this.a_(e,this.yo.priceFormatter,r)}s_(e,r){return this.a_(e,this.yo.percentageFormatter,r)}}class lW{constructor(e,r){this.po=[],this.o_=new Map,this.ho=0,this.__=0,this.u_=1e3,this.mo=null,this.c_=new vr,this.yl=e,this.$i=r,this.d_=new nW(this);const s=r.W();this.f_=this.v_("left",s.leftPriceScale),this.p_=this.v_("right",s.rightPriceScale),this.f_.zo().l(this.m_.bind(this,this.f_),this),this.p_.zo().l(this.m_.bind(this,this.p_),this),this.b_(s)}b_(e){if(e.leftPriceScale&&this.f_.$h(e.leftPriceScale),e.rightPriceScale&&this.p_.$h(e.rightPriceScale),e.localization&&(this.f_.Ra(),this.p_.Ra()),e.overlayPriceScales){const r=Array.from(this.o_.values());for(const s of r){const i=He(s[0].Dt());i.$h(e.overlayPriceScales),e.localization&&i.Ra()}}}w_(e){switch(e){case"left":return this.f_;case"right":return this.p_}return this.o_.has(e)?ns(this.o_.get(e))[0].Dt():null}S(){this.$t().g_().p(this),this.f_.zo().p(this),this.p_.zo().p(this),this.po.forEach(e=>{e.S&&e.S()}),this.c_.m()}M_(){return this.u_}x_(e){this.u_=e}$t(){return this.$i}Hi(){return this.__}At(){return this.ho}S_(e){this.__=e,this.k_()}Lo(e){this.ho=e,this.f_.Lo(e),this.p_.Lo(e),this.po.forEach(r=>{if(this.vr(r)){const s=r.Dt();s!==null&&s.Lo(e)}}),this.k_()}Ba(){return this.po}vr(e){const r=e.Dt();return r===null||this.f_!==r&&this.p_!==r}qo(e,r,s){const i=s!==void 0?s:this.C_().y_+1;this.T_(e,r,i)}Zo(e){const r=this.po.indexOf(e);Wa(r!==-1,"removeDataSource: invalid data source"),this.po.splice(r,1);const s=He(e.Dt()).Pa();if(this.o_.has(s)){const a=ns(this.o_.get(s)),o=a.indexOf(e);o!==-1&&(a.splice(o,1),a.length===0&&this.o_.delete(s))}const i=e.Dt();i&&i.Ba().indexOf(e)>=0&&i.Zo(e),i!==null&&(i.Yo(),this.P_(i)),this.mo=null}mr(e){return e===this.f_?"left":e===this.p_?"right":"overlay"}R_(){return this.f_}D_(){return this.p_}V_(e,r){e.Go(r)}O_(e,r){e.Jo(r),this.k_()}B_(e){e.Qo()}A_(e,r){e.t_(r)}I_(e,r){e.i_(r),this.k_()}z_(e){e.n_()}k_(){this.po.forEach(e=>{e.Vn()})}vn(){let e=null;return this.$i.W().rightPriceScale.visible&&this.p_.Ba().length!==0?e=this.p_:this.$i.W().leftPriceScale.visible&&this.f_.Ba().length!==0?e=this.f_:this.po.length!==0&&(e=this.po[0].Dt()),e===null&&(e=this.p_),e}pr(){let e=null;return this.$i.W().rightPriceScale.visible?e=this.p_:this.$i.W().leftPriceScale.visible&&(e=this.f_),e}P_(e){e!==null&&e.Vo()&&this.L_(e)}E_(e){const r=this.yl.Xs();e.Ro({Wn:!0}),r!==null&&e.h_(r),this.k_()}N_(){this.L_(this.f_),this.L_(this.p_)}F_(){this.P_(this.f_),this.P_(this.p_),this.po.forEach(e=>{this.vr(e)&&this.P_(e.Dt())}),this.k_(),this.$i.Uh()}Uo(){return this.mo===null&&(this.mo=YA(this.po)),this.mo}W_(){return this.c_}j_(){return this.d_}L_(e){const r=e.r_();if(r&&r.length>0&&!this.yl.Ni()){const s=this.yl.Xs();s!==null&&e.h_(s)}e.Vn()}C_(){const e=this.Uo();if(e.length===0)return{H_:0,y_:0};let r=0,s=0;for(let i=0;i<e.length;i++){const a=e[i].Xi();a!==null&&(a<r&&(r=a),a>s&&(s=a))}return{H_:r,y_:s}}T_(e,r,s){let i=this.w_(r);if(i===null&&(i=this.v_(r,this.$i.W().overlayPriceScales)),this.po.push(e),!zm(r)){const a=this.o_.get(r)||[];a.push(e),this.o_.set(r,a)}i.qo(e),e.Gi(i),e.Ki(s),this.P_(i),this.mo=null}m_(e,r,s){r.Cr!==s.Cr&&this.L_(e)}v_(e,r){const s=Object.assign({visible:!0,autoScale:!0},ki(r)),i=new oW(e,s,this.$i.W().layout,this.$i.W().localization);return i.Lo(this.At()),i}}class cW{constructor(e,r,s=50){this.Ke=0,this.Ge=1,this.Je=1,this.tr=new Map,this.Qe=new Map,this.U_=e,this.q_=r,this.ir=s}Y_(e){const r=e.time,s=this.q_.cacheKey(r),i=this.tr.get(s);if(i!==void 0)return i.Z_;if(this.Ke===this.ir){const o=this.Qe.get(this.Je);this.Qe.delete(this.Je),this.tr.delete(ns(o)),this.Je++,this.Ke--}const a=this.U_(e);return this.tr.set(s,{Z_:a,rr:this.Ge}),this.Qe.set(this.Ge,s),this.Ke++,this.Ge++,a}}class ou{constructor(e,r){Wa(e<=r,"right should be >= left"),this.X_=e,this.K_=r}Os(){return this.X_}ui(){return this.K_}G_(){return this.K_-this.X_+1}Kr(e){return this.X_<=e&&e<=this.K_}Ch(e){return this.X_===e.Os()&&this.K_===e.ui()}}function JS(t,e){return t===null||e===null?t===e:t.Ch(e)}class dW{constructor(){this.J_=new Map,this.tr=null,this.Q_=!1}tu(e){this.Q_=e,this.tr=null}iu(e,r){this.nu(r),this.tr=null;for(let s=r;s<e.length;++s){const i=e[s];let a=this.J_.get(i.timeWeight);a===void 0&&(a=[],this.J_.set(i.timeWeight,a)),a.push({index:s,time:i.time,weight:i.timeWeight,originalTime:i.originalTime})}}su(e,r){const s=Math.ceil(r/e);return this.tr!==null&&this.tr.eu===s||(this.tr={Ha:this.ru(s),eu:s}),this.tr.Ha}nu(e){if(e===0)return void this.J_.clear();const r=[];this.J_.forEach((s,i)=>{e<=s[0].index?r.push(i):s.splice(gh(s,e,a=>a.index<e),1/0)});for(const s of r)this.J_.delete(s)}ru(e){let r=[];for(const s of Array.from(this.J_.keys()).sort((i,a)=>a-i)){if(!this.J_.get(s))continue;const i=r;r=[];const a=i.length;let o=0;const l=ns(this.J_.get(s)),c=l.length;let d=1/0,u=-1/0;for(let h=0;h<c;h++){const p=l[h],f=p.index;for(;o<a;){const m=i[o],v=m.index;if(!(v<f)){d=v;break}o++,r.push(m),u=v,d=1/0}if(d-f>=e&&f-u>=e)r.push(p),u=f;else if(this.Q_)return i}for(;o<a;o++)r.push(i[o])}return r}}class wc{constructor(e){this.hu=e}lu(){return this.hu===null?null:new ou(Math.floor(this.hu.Os()),Math.ceil(this.hu.ui()))}au(){return this.hu}static ou(){return new wc(null)}}function uW(t,e){return t.weight>e.weight?t:e}class hW{constructor(e,r,s,i){this.__=0,this._u=null,this.uu=[],this.Mo=null,this.wo=null,this.cu=new dW,this.du=new Map,this.fu=wc.ou(),this.vu=!0,this.pu=new vr,this.mu=new vr,this.bu=new vr,this.wu=null,this.gu=null,this.Mu=[],this.cn=r,this.yo=s,this.xu=r.rightOffset,this.Su=r.barSpacing,this.$i=e,this.q_=i,this.ku(),this.cu.tu(r.uniformDistribution)}W(){return this.cn}yu(e){Ln(this.yo,e),this.Cu(),this.ku()}$h(e,r){var s;Ln(this.cn,e),this.cn.fixLeftEdge&&this.Tu(),this.cn.fixRightEdge&&this.Pu(),e.barSpacing!==void 0&&this.$i.Gn(e.barSpacing),e.rightOffset!==void 0&&this.$i.Jn(e.rightOffset),e.minBarSpacing!==void 0&&this.$i.Gn((s=e.barSpacing)!==null&&s!==void 0?s:this.Su),this.Cu(),this.ku(),this.bu.m()}mn(e){var r,s;return(s=(r=this.uu[e])===null||r===void 0?void 0:r.time)!==null&&s!==void 0?s:null}Ui(e){var r;return(r=this.uu[e])!==null&&r!==void 0?r:null}Va(e,r){if(this.uu.length<1)return null;if(this.q_.key(e)>this.q_.key(this.uu[this.uu.length-1].time))return r?this.uu.length-1:null;const s=gh(this.uu,this.q_.key(e),(i,a)=>this.q_.key(i.time)<a);return this.q_.key(e)<this.q_.key(this.uu[s].time)?r?s:null:s}Ni(){return this.__===0||this.uu.length===0||this._u===null}Da(){return this.uu.length>0}Xs(){return this.Ru(),this.fu.lu()}Du(){return this.Ru(),this.fu.au()}Vu(){const e=this.Xs();if(e===null)return null;const r={from:e.Os(),to:e.ui()};return this.Ou(r)}Ou(e){const r=Math.round(e.from),s=Math.round(e.to),i=He(this.Bu()),a=He(this.Au());return{from:He(this.Ui(Math.max(i,r))),to:He(this.Ui(Math.min(a,s)))}}Iu(e){return{from:He(this.Va(e.from,!0)),to:He(this.Va(e.to,!0))}}Hi(){return this.__}S_(e){if(!isFinite(e)||e<=0||this.__===e)return;const r=this.Du(),s=this.__;if(this.__=e,this.vu=!0,this.cn.lockVisibleTimeRangeOnResize&&s!==0){const i=this.Su*e/s;this.Su=i}if(this.cn.fixLeftEdge&&r!==null&&r.Os()<=0){const i=s-e;this.xu-=Math.round(i/this.Su)+1,this.vu=!0}this.zu(),this.Lu()}It(e){if(this.Ni()||!Fu(e))return 0;const r=this.Eu()+this.xu-e;return this.__-(r+.5)*this.Su-1}Qs(e,r){const s=this.Eu(),i=r===void 0?0:r.from,a=r===void 0?e.length:r.to;for(let o=i;o<a;o++){const l=e[o].ot,c=s+this.xu-l,d=this.__-(c+.5)*this.Su-1;e[o].nt=d}}Nu(e){return Math.ceil(this.Fu(e))}Jn(e){this.vu=!0,this.xu=e,this.Lu(),this.$i.Wu(),this.$i.Uh()}le(){return this.Su}Gn(e){this.ju(e),this.Lu(),this.$i.Wu(),this.$i.Uh()}Hu(){return this.xu}Ha(){if(this.Ni())return null;if(this.gu!==null)return this.gu;const e=this.Su,r=5*(this.$i.W().layout.fontSize+4)/8*(this.cn.tickMarkMaxCharacterLength||8),s=Math.round(r/e),i=He(this.Xs()),a=Math.max(i.Os(),i.Os()-s),o=Math.max(i.ui(),i.ui()-s),l=this.cu.su(e,r),c=this.Bu()+s,d=this.Au()-s,u=this.$u(),h=this.cn.fixLeftEdge||u,p=this.cn.fixRightEdge||u;let f=0;for(const m of l){if(!(a<=m.index&&m.index<=o))continue;let v;f<this.Mu.length?(v=this.Mu[f],v.coord=this.It(m.index),v.label=this.Uu(m),v.weight=m.weight):(v={needAlignCoordinate:!1,coord:this.It(m.index),label:this.Uu(m),weight:m.weight},this.Mu.push(v)),this.Su>r/2&&!u?v.needAlignCoordinate=!1:v.needAlignCoordinate=h&&m.index<=c||p&&m.index>=d,f++}return this.Mu.length=f,this.gu=this.Mu,this.Mu}qu(){this.vu=!0,this.Gn(this.cn.barSpacing),this.Jn(this.cn.rightOffset)}Yu(e){this.vu=!0,this._u=e,this.Lu(),this.Tu()}Zu(e,r){const s=this.Fu(e),i=this.le(),a=i+r*(i/10);this.Gn(a),this.cn.rightBarStaysOnScroll||this.Jn(this.Hu()+(s-this.Fu(e)))}Go(e){this.Mo&&this.n_(),this.wo===null&&this.wu===null&&(this.Ni()||(this.wo=e,this.Xu()))}Jo(e){if(this.wu===null)return;const r=Ov(this.__-e,0,this.__),s=Ov(this.__-He(this.wo),0,this.__);r!==0&&s!==0&&this.Gn(this.wu.le*r/s)}Qo(){this.wo!==null&&(this.wo=null,this.Ku())}t_(e){this.Mo===null&&this.wu===null&&(this.Ni()||(this.Mo=e,this.Xu()))}i_(e){if(this.Mo===null)return;const r=(this.Mo-e)/this.le();this.xu=He(this.wu).Hu+r,this.vu=!0,this.Lu()}n_(){this.Mo!==null&&(this.Mo=null,this.Ku())}Gu(){this.Ju(this.cn.rightOffset)}Ju(e,r=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(r)||r<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const s=this.xu,i=performance.now();this.$i.Zn({Qu:a=>(a-i)/r>=1,tc:a=>{const o=(a-i)/r;return o>=1?e:s+(e-s)*o}})}bt(e,r){this.vu=!0,this.uu=e,this.cu.iu(e,r),this.Lu()}nc(){return this.pu}sc(){return this.mu}ec(){return this.bu}Eu(){return this._u||0}rc(e){const r=e.G_();this.ju(this.__/r),this.xu=e.ui()-this.Eu(),this.Lu(),this.vu=!0,this.$i.Wu(),this.$i.Uh()}hc(){const e=this.Bu(),r=this.Au();e!==null&&r!==null&&this.rc(new ou(e,r+this.cn.rightOffset))}lc(e){const r=new ou(e.from,e.to);this.rc(r)}qi(e){return this.yo.timeFormatter!==void 0?this.yo.timeFormatter(e.originalTime):this.q_.formatHorzItem(e.time)}$u(){const{handleScroll:e,handleScale:r}=this.$i.W();return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||r.axisDoubleClickReset.time||r.axisPressedMouseMove.time||r.mouseWheel||r.pinch)}Bu(){return this.uu.length===0?null:0}Au(){return this.uu.length===0?null:this.uu.length-1}ac(e){return(this.__-1-e)/this.Su}Fu(e){const r=this.ac(e),s=this.Eu()+this.xu-r;return Math.round(1e6*s)/1e6}ju(e){const r=this.Su;this.Su=e,this.zu(),r!==this.Su&&(this.vu=!0,this.oc())}Ru(){if(!this.vu)return;if(this.vu=!1,this.Ni())return void this._c(wc.ou());const e=this.Eu(),r=this.__/this.Su,s=this.xu+e,i=new ou(s-r+1,s);this._c(new wc(i))}zu(){const e=this.uc();if(this.Su<e&&(this.Su=e,this.vu=!0),this.__!==0){const r=.5*this.__;this.Su>r&&(this.Su=r,this.vu=!0)}}uc(){return this.cn.fixLeftEdge&&this.cn.fixRightEdge&&this.uu.length!==0?this.__/this.uu.length:this.cn.minBarSpacing}Lu(){const e=this.cc();e!==null&&this.xu<e&&(this.xu=e,this.vu=!0);const r=this.dc();this.xu>r&&(this.xu=r,this.vu=!0)}cc(){const e=this.Bu(),r=this._u;return e===null||r===null?null:e-r-1+(this.cn.fixLeftEdge?this.__/this.Su:Math.min(2,this.uu.length))}dc(){return this.cn.fixRightEdge?0:this.__/this.Su-Math.min(2,this.uu.length)}Xu(){this.wu={le:this.le(),Hu:this.Hu()}}Ku(){this.wu=null}Uu(e){let r=this.du.get(e.weight);return r===void 0&&(r=new cW(s=>this.fc(s),this.q_),this.du.set(e.weight,r)),r.Y_(e)}fc(e){return this.q_.formatTickmark(e,this.yo)}_c(e){const r=this.fu;this.fu=e,JS(r.lu(),this.fu.lu())||this.pu.m(),JS(r.au(),this.fu.au())||this.mu.m(),this.oc()}oc(){this.gu=null}Cu(){this.oc(),this.du.clear()}ku(){this.q_.updateFormatter(this.yo)}Tu(){if(!this.cn.fixLeftEdge)return;const e=this.Bu();if(e===null)return;const r=this.Xs();if(r===null)return;const s=r.Os()-e;if(s<0){const i=this.xu-s-1;this.Jn(i)}this.zu()}Pu(){this.Lu(),this.zu()}}class pW{X(e,r,s){e.useMediaCoordinateSpace(i=>this.K(i,r,s))}gl(e,r,s){e.useMediaCoordinateSpace(i=>this.vc(i,r,s))}vc(e,r,s){}}class fW extends pW{constructor(e){super(),this.mc=new Map,this.zt=e}K(e){}vc(e){if(!this.zt.yt)return;const{context:r,mediaSize:s}=e;let i=0;for(const o of this.zt.bc){if(o.Kt.length===0)continue;r.font=o.R;const l=this.wc(r,o.Kt);l>s.width?o.Zu=s.width/l:o.Zu=1,i+=o.gc*o.Zu}let a=0;switch(this.zt.Mc){case"top":a=0;break;case"center":a=Math.max((s.height-i)/2,0);break;case"bottom":a=Math.max(s.height-i,0)}r.fillStyle=this.zt.V;for(const o of this.zt.bc){r.save();let l=0;switch(this.zt.xc){case"left":r.textAlign="left",l=o.gc/2;break;case"center":r.textAlign="center",l=s.width/2;break;case"right":r.textAlign="right",l=s.width-1-o.gc/2}r.translate(l,a),r.textBaseline="top",r.font=o.R,r.scale(o.Zu,o.Zu),r.fillText(o.Kt,0,o.Sc),r.restore(),a+=o.gc*o.Zu}}wc(e,r){const s=this.kc(e.font);let i=s.get(r);return i===void 0&&(i=e.measureText(r).width,s.set(r,i)),i}kc(e){let r=this.mc.get(e);return r===void 0&&(r=new Map,this.mc.set(e,r)),r}}class mW{constructor(e){this.ft=!0,this.Ft={yt:!1,V:"",bc:[],Mc:"center",xc:"center"},this.Wt=new fW(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.W(),r=this.Ft;r.yt=e.visible,r.yt&&(r.V=e.color,r.xc=e.horzAlign,r.Mc=e.vertAlign,r.bc=[{Kt:e.text,R:Mc(e.fontSize,e.fontFamily,e.fontStyle),gc:1.2*e.fontSize,Sc:0,Zu:0}])}}class gW extends zw{constructor(e,r){super(),this.cn=r,this.wn=new mW(this)}Rn(){return[]}Pn(){return[this.wn]}W(){return this.cn}Vn(){this.wn.bt()}}var QS,ZS,e2,t2,r2;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(QS||(QS={}));class xW{constructor(e,r,s){this.yc=[],this.Cc=[],this.__=0,this.Tc=null,this.Pc=new vr,this.Rc=new vr,this.Dc=null,this.Vc=e,this.cn=r,this.q_=s,this.Oc=new GX(this),this.yl=new hW(this,r.timeScale,this.cn.localization,s),this.vt=new a9(this,r.crosshair),this.Bc=new tW(r.crosshair),this.Ac=new gW(this,r.watermark),this.Ic(),this.yc[0].x_(2e3),this.zc=this.Lc(0),this.Ec=this.Lc(1)}Kl(){this.Nc(Dr.es())}Uh(){this.Nc(Dr.ss())}oa(){this.Nc(new Dr(1))}Gl(e){const r=this.Fc(e);this.Nc(r)}Wc(){return this.Tc}jc(e){const r=this.Tc;this.Tc=e,r!==null&&this.Gl(r.Hc),e!==null&&this.Gl(e.Hc)}W(){return this.cn}$h(e){Ln(this.cn,e),this.yc.forEach(r=>r.b_(e)),e.timeScale!==void 0&&this.yl.$h(e.timeScale),e.localization!==void 0&&this.yl.yu(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Pc.m(),this.zc=this.Lc(0),this.Ec=this.Lc(1),this.Kl()}$c(e,r){if(e==="left")return void this.$h({leftPriceScale:r});if(e==="right")return void this.$h({rightPriceScale:r});const s=this.Uc(e);s!==null&&(s.Dt.$h(r),this.Pc.m())}Uc(e){for(const r of this.yc){const s=r.w_(e);if(s!==null)return{Ht:r,Dt:s}}return null}St(){return this.yl}qc(){return this.yc}Yc(){return this.Ac}Zc(){return this.vt}Xc(){return this.Rc}Kc(e,r){e.Lo(r),this.Wu()}S_(e){this.__=e,this.yl.S_(this.__),this.yc.forEach(r=>r.S_(e)),this.Wu()}Ic(e){const r=new lW(this.yl,this);e!==void 0?this.yc.splice(e,0,r):this.yc.push(r);const s=e===void 0?this.yc.length-1:e,i=Dr.es();return i.Nn(s,{Fn:0,Wn:!0}),this.Nc(i),r}V_(e,r,s){e.V_(r,s)}O_(e,r,s){e.O_(r,s),this.Jl(),this.Nc(this.Gc(e,2))}B_(e,r){e.B_(r),this.Nc(this.Gc(e,2))}A_(e,r,s){r.Vo()||e.A_(r,s)}I_(e,r,s){r.Vo()||(e.I_(r,s),this.Jl(),this.Nc(this.Gc(e,2)))}z_(e,r){r.Vo()||(e.z_(r),this.Nc(this.Gc(e,2)))}E_(e,r){e.E_(r),this.Nc(this.Gc(e,2))}Jc(e){this.yl.Go(e)}Qc(e,r){const s=this.St();if(s.Ni()||r===0)return;const i=s.Hi();e=Math.max(1,Math.min(e,i)),s.Zu(e,r),this.Wu()}td(e){this.nd(0),this.sd(e),this.ed()}rd(e){this.yl.Jo(e),this.Wu()}hd(){this.yl.Qo(),this.Uh()}nd(e){this.yl.t_(e)}sd(e){this.yl.i_(e),this.Wu()}ed(){this.yl.n_(),this.Uh()}wt(){return this.Cc}ld(e,r,s,i,a){this.vt.gn(e,r);let o=NaN,l=this.yl.Nu(e);const c=this.yl.Xs();c!==null&&(l=Math.min(Math.max(c.Os(),l),c.ui()));const d=i.vn(),u=d.Ct();u!==null&&(o=d.pn(r,u)),o=this.Bc.Oa(o,l,i),this.vt.kn(l,o,i),this.oa(),a||this.Rc.m(this.vt.xt(),{x:e,y:r},s)}ad(e,r,s){const i=s.vn(),a=i.Ct(),o=i.Rt(e,He(a)),l=this.yl.Va(r,!0),c=this.yl.It(He(l));this.ld(c,o,null,s,!0)}od(e){this.Zc().Cn(),this.oa(),e||this.Rc.m(null,null,null)}Jl(){const e=this.vt.Ht();if(e!==null){const r=this.vt.xn(),s=this.vt.Sn();this.ld(r,s,null,e)}this.vt.Vn()}_d(e,r,s){const i=this.yl.mn(0);r!==void 0&&s!==void 0&&this.yl.bt(r,s);const a=this.yl.mn(0),o=this.yl.Eu(),l=this.yl.Xs();if(l!==null&&i!==null&&a!==null){const c=l.Kr(o),d=this.q_.key(i)>this.q_.key(a),u=e!==null&&e>o&&!d,h=this.yl.W().allowShiftVisibleRangeOnWhitespaceReplacement,p=c&&(s!==void 0||h)&&this.yl.W().shiftVisibleRangeOnNewBar;if(u&&!p){const f=e-o;this.yl.Jn(this.yl.Hu()-f)}}this.yl.Yu(e)}ia(e){e!==null&&e.F_()}dr(e){const r=this.yc.find(s=>s.Uo().includes(e));return r===void 0?null:r}Wu(){this.Ac.Vn(),this.yc.forEach(e=>e.F_()),this.Jl()}S(){this.yc.forEach(e=>e.S()),this.yc.length=0,this.cn.localization.priceFormatter=void 0,this.cn.localization.percentageFormatter=void 0,this.cn.localization.timeFormatter=void 0}ud(){return this.Oc}br(){return this.Oc.W()}g_(){return this.Pc}dd(e,r,s){const i=this.yc[0],a=this.fd(r,e,i,s);return this.Cc.push(a),this.Cc.length===1?this.Kl():this.Uh(),a}vd(e){const r=this.dr(e),s=this.Cc.indexOf(e);Wa(s!==-1,"Series not found"),this.Cc.splice(s,1),He(r).Zo(e),e.S&&e.S()}Xl(e,r){const s=He(this.dr(e));s.Zo(e);const i=this.Uc(r);if(i===null){const a=e.Xi();s.qo(e,r,a)}else{const a=i.Ht===s?e.Xi():void 0;i.Ht.qo(e,r,a)}}hc(){const e=Dr.ss();e.$n(),this.Nc(e)}pd(e){const r=Dr.ss();r.Yn(e),this.Nc(r)}Kn(){const e=Dr.ss();e.Kn(),this.Nc(e)}Gn(e){const r=Dr.ss();r.Gn(e),this.Nc(r)}Jn(e){const r=Dr.ss();r.Jn(e),this.Nc(r)}Zn(e){const r=Dr.ss();r.Zn(e),this.Nc(r)}Un(){const e=Dr.ss();e.Un(),this.Nc(e)}md(){return this.cn.rightPriceScale.visible?"right":"left"}bd(){return this.Ec}q(){return this.zc}Bt(e){const r=this.Ec,s=this.zc;if(r===s)return r;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Dc===null||this.Dc.Ps!==s||this.Dc.Rs!==r)this.Dc={Ps:s,Rs:r,wd:new Map};else{const a=this.Dc.wd.get(e);if(a!==void 0)return a}const i=function(a,o,l){const[c,d,u,h]=Mu(a),[p,f,m,v]=Mu(o),x=[Qs(c+l*(p-c)),Qs(d+l*(f-d)),Qs(u+l*(m-u)),RA(h+l*(v-h))];return`rgba(${x[0]}, ${x[1]}, ${x[2]}, ${x[3]})`}(s,r,e/100);return this.Dc.wd.set(e,i),i}Gc(e,r){const s=new Dr(r);if(e!==null){const i=this.yc.indexOf(e);s.Nn(i,{Fn:r})}return s}Fc(e,r){return r===void 0&&(r=2),this.Gc(this.dr(e),r)}Nc(e){this.Vc&&this.Vc(e),this.yc.forEach(r=>r.j_().qh().bt())}fd(e,r,s,i){const a=new Kw(this,e,r,s,i),o=e.priceScaleId!==void 0?e.priceScaleId:this.md();return s.qo(a,o),zm(o)||a.$h(e),a}Lc(e){const r=this.cn.layout;return r.background.type==="gradient"?e===0?r.background.topColor:r.background.bottomColor:r.background.color}}function Iv(t){return!ii(t)&&!mh(t)}function JA(t){return ii(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(ZS||(ZS={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(e2||(e2={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(t2||(t2={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(r2||(r2={}));const s2=t=>t.getUTCFullYear();function yW(t,e,r){return e.replace(/yyyy/g,(s=>Ai(s2(s),4))(t)).replace(/yy/g,(s=>Ai(s2(s)%100,2))(t)).replace(/MMMM/g,((s,i)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(i,{month:"long"}))(t,r)).replace(/MMM/g,((s,i)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(i,{month:"short"}))(t,r)).replace(/MM/g,(s=>Ai((i=>i.getUTCMonth()+1)(s),2))(t)).replace(/dd/g,(s=>Ai((i=>i.getUTCDate())(s),2))(t))}class QA{constructor(e="yyyy-MM-dd",r="default"){this.gd=e,this.Md=r}Y_(e){return yW(e,this.gd,this.Md)}}class vW{constructor(e){this.xd=e||"%h:%m:%s"}Y_(e){return this.xd.replace("%h",Ai(e.getUTCHours(),2)).replace("%m",Ai(e.getUTCMinutes(),2)).replace("%s",Ai(e.getUTCSeconds(),2))}}const bW={Sd:"yyyy-MM-dd",kd:"%h:%m:%s",yd:" ",Cd:"default"};class wW{constructor(e={}){const r=Object.assign(Object.assign({},bW),e);this.Td=new QA(r.Sd,r.Cd),this.Pd=new vW(r.kd),this.Rd=r.yd}Y_(e){return`${this.Td.Y_(e)}${this.Rd}${this.Pd.Y_(e)}`}}function mp(t){return 60*t*60*1e3}function Ix(t){return 60*t*1e3}const gp=[{Dd:(n2=1,1e3*n2),Vd:10},{Dd:Ix(1),Vd:20},{Dd:Ix(5),Vd:21},{Dd:Ix(30),Vd:22},{Dd:mp(1),Vd:30},{Dd:mp(3),Vd:31},{Dd:mp(6),Vd:32},{Dd:mp(12),Vd:33}];var n2;function i2(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let r=gp.length-1;r>=0;--r)if(Math.floor(e.getTime()/gp[r].Dd)!==Math.floor(t.getTime()/gp[r].Dd))return gp[r].Vd;return 0}function Lx(t){let e=t;if(mh(t)&&(e=Gw(t)),!Iv(e))throw new Error("time must be of type BusinessDay");const r=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{Od:Math.round(r.getTime()/1e3),Bd:e}}function a2(t){if(!JA(t))throw new Error("time must be of type isUTCTimestamp");return{Od:t}}function Gw(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function o2(t){mh(t.time)&&(t.time=Gw(t.time))}class l2{options(){return this.cn}setOptions(e){this.cn=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(r){r.forEach(o2)}(e):o2(e)}createConverterToInternalObj(e){return He(function(r){return r.length===0?null:Iv(r[0].time)||mh(r[0].time)?Lx:a2}(e))}key(e){return typeof e=="object"&&"Od"in e?e.Od:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const r=e;return r.Bd===void 0?new Date(1e3*r.Od).getTime():new Date(Date.UTC(r.Bd.year,r.Bd.month-1,r.Bd.day)).getTime()}convertHorzItemToInternal(e){return JA(r=e)?a2(r):Iv(r)?Lx(r):Lx(Gw(r));var r}updateFormatter(e){if(!this.cn)return;const r=e.dateFormat;this.cn.timeScale.timeVisible?this.Ad=new wW({Sd:r,kd:this.cn.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",yd:"   ",Cd:e.locale}):this.Ad=new QA(r,e.locale)}formatHorzItem(e){const r=e;return this.Ad.Y_(new Date(1e3*r.Od))}formatTickmark(e,r){const s=function(a,o,l){switch(a){case 0:case 10:return o?l?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.cn.timeScale.timeVisible,this.cn.timeScale.secondsVisible),i=this.cn.timeScale;if(i.tickMarkFormatter!==void 0){const a=i.tickMarkFormatter(e.originalTime,s,r.locale);if(a!==null)return a}return function(a,o,l){const c={};switch(o){case 0:c.year="numeric";break;case 1:c.month="short";break;case 2:c.day="numeric";break;case 3:c.hour12=!1,c.hour="2-digit",c.minute="2-digit";break;case 4:c.hour12=!1,c.hour="2-digit",c.minute="2-digit",c.second="2-digit"}const d=a.Bd===void 0?new Date(1e3*a.Od):new Date(Date.UTC(a.Bd.year,a.Bd.month-1,a.Bd.day));return new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()).toLocaleString(l,c)}(e.time,s,r.locale)}maxTickMarkWeight(e){let r=e.reduce(uW,e[0]).weight;return r>30&&r<50&&(r=30),r}fillWeightsForPoints(e,r){(function(s,i=0){if(s.length===0)return;let a=i===0?null:s[i-1].time.Od,o=a!==null?new Date(1e3*a):null,l=0;for(let c=i;c<s.length;++c){const d=s[c],u=new Date(1e3*d.time.Od);o!==null&&(d.timeWeight=i2(u,o)),l+=d.time.Od-(a||d.time.Od),a=d.time.Od,o=u}if(i===0&&s.length>1){const c=Math.ceil(l/(s.length-1)),d=new Date(1e3*(s[0].time.Od-c));s[0].timeWeight=i2(new Date(1e3*s[0].time.Od),d)}})(e,r)}static Id(e){return Ln({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const Fc=typeof window<"u";function c2(){return!!Fc&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Mx(){return!!Fc&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function Lv(t){return t+t%2}function Fx(t,e){return t.zd-e.zd}function Dx(t,e,r){const s=(t.zd-e.zd)/(t.ot-e.ot);return Math.sign(s)*Math.min(Math.abs(s),r)}class _W{constructor(e,r,s,i){this.Ld=null,this.Ed=null,this.Nd=null,this.Fd=null,this.Wd=null,this.jd=0,this.Hd=0,this.$d=e,this.Ud=r,this.qd=s,this.rs=i}Yd(e,r){if(this.Ld!==null){if(this.Ld.ot===r)return void(this.Ld.zd=e);if(Math.abs(this.Ld.zd-e)<this.rs)return}this.Fd=this.Nd,this.Nd=this.Ed,this.Ed=this.Ld,this.Ld={ot:r,zd:e}}Vr(e,r){if(this.Ld===null||this.Ed===null||r-this.Ld.ot>50)return;let s=0;const i=Dx(this.Ld,this.Ed,this.Ud),a=Fx(this.Ld,this.Ed),o=[i],l=[a];if(s+=a,this.Nd!==null){const d=Dx(this.Ed,this.Nd,this.Ud);if(Math.sign(d)===Math.sign(i)){const u=Fx(this.Ed,this.Nd);if(o.push(d),l.push(u),s+=u,this.Fd!==null){const h=Dx(this.Nd,this.Fd,this.Ud);if(Math.sign(h)===Math.sign(i)){const p=Fx(this.Nd,this.Fd);o.push(h),l.push(p),s+=p}}}}let c=0;for(let d=0;d<o.length;++d)c+=l[d]/s*o[d];Math.abs(c)<this.$d||(this.Wd={zd:e,ot:r},this.Hd=c,this.jd=function(d,u){const h=Math.log(u);return Math.log(1*h/-d)/h}(Math.abs(c),this.qd))}tc(e){const r=He(this.Wd),s=e-r.ot;return r.zd+this.Hd*(Math.pow(this.qd,s)-1)/Math.log(this.qd)}Qu(e){return this.Wd===null||this.Zd(e)===this.jd}Zd(e){const r=e-He(this.Wd).ot;return Math.min(r,this.jd)}}class NW{constructor(e,r){this.Xd=void 0,this.Kd=void 0,this.Gd=void 0,this.en=!1,this.Jd=e,this.Qd=r,this.tf()}bt(){this.tf()}if(){this.Xd&&this.Jd.removeChild(this.Xd),this.Kd&&this.Jd.removeChild(this.Kd),this.Xd=void 0,this.Kd=void 0}nf(){return this.en!==this.sf()||this.Gd!==this.ef()}ef(){return OA(Mu(this.Qd.W().layout.textColor))>160?"dark":"light"}sf(){return this.Qd.W().layout.attributionLogo}rf(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}tf(){this.nf()&&(this.if(),this.en=this.sf(),this.en&&(this.Gd=this.ef(),this.Kd=document.createElement("style"),this.Kd.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Xd=document.createElement("a"),this.Xd.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.rf()}`,this.Xd.title="Charting by TradingView",this.Xd.id="tv-attr-logo",this.Xd.target="_blank",this.Xd.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 19" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Xd.toggleAttribute("data-dark",this.Gd==="dark"),this.Jd.appendChild(this.Kd),this.Jd.appendChild(this.Xd)))}}function ol(t,e){const r=He(t.ownerDocument).createElement("canvas");t.appendChild(r);const s=IX(r,{type:"device-pixel-content-box",options:{allowResizeObserver:!1},transform:(i,a)=>({width:Math.max(i.width,a.width),height:Math.max(i.height,a.height)})});return s.resizeCanvasElement(e),s}function ll(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))===null||e===void 0||e.clearRect(0,0,1,1)}function Mv(t,e,r,s){t.gl&&t.gl(e,r,s)}function Wp(t,e,r,s){t.X(e,r,s)}function Fv(t,e,r,s){const i=t(r,s);for(const a of i){const o=a.gt();o!==null&&e(o)}}function SW(t){Fc&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class Yw{constructor(e,r,s){this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.df=null,this.ff=!1,this.vf=null,this.pf=null,this.mf=!1,this.bf=!1,this.wf=!1,this.gf=null,this.Mf=null,this.xf=null,this.Sf=null,this.kf=null,this.yf=null,this.Cf=null,this.Tf=0,this.Pf=!1,this.Rf=!1,this.Df=!1,this.Vf=0,this.Of=null,this.Bf=!Mx(),this.Af=i=>{this.If(i)},this.zf=i=>{if(this.Lf(i)){const a=this.Ef(i);if(++this._f,this.uf&&this._f>1){const{Nf:o}=this.Ff(qn(i),this.cf);o<30&&!this.wf&&this.Wf(a,this.Hf.jf),this.$f()}}else{const a=this.Ef(i);if(++this.hf,this.lf&&this.hf>1){const{Nf:o}=this.Ff(qn(i),this.af);o<5&&!this.bf&&this.Uf(a,this.Hf.qf),this.Yf()}}},this.Zf=e,this.Hf=r,this.cn=s,this.Xf()}S(){this.gf!==null&&(this.gf(),this.gf=null),this.Mf!==null&&(this.Mf(),this.Mf=null),this.Sf!==null&&(this.Sf(),this.Sf=null),this.kf!==null&&(this.kf(),this.kf=null),this.yf!==null&&(this.yf(),this.yf=null),this.xf!==null&&(this.xf(),this.xf=null),this.Kf(),this.Yf()}Gf(e){this.Sf&&this.Sf();const r=this.Jf.bind(this);if(this.Sf=()=>{this.Zf.removeEventListener("mousemove",r)},this.Zf.addEventListener("mousemove",r),this.Lf(e))return;const s=this.Ef(e);this.Uf(s,this.Hf.Qf),this.Bf=!0}Yf(){this.lf!==null&&clearTimeout(this.lf),this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}$f(){this.uf!==null&&clearTimeout(this.uf),this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Jf(e){if(this.Df||this.pf!==null||this.Lf(e))return;const r=this.Ef(e);this.Uf(r,this.Hf.tv),this.Bf=!0}iv(e){const r=Bx(e.changedTouches,He(this.Of));if(r===null||(this.Vf=xp(e),this.Cf!==null)||this.Rf)return;this.Pf=!0;const s=this.Ff(qn(r),He(this.pf)),{nv:i,sv:a,Nf:o}=s;if(this.mf||!(o<5)){if(!this.mf){const l=.5*i,c=a>=l&&!this.cn.ev(),d=l>a&&!this.cn.rv();c||d||(this.Rf=!0),this.mf=!0,this.wf=!0,this.Kf(),this.$f()}if(!this.Rf){const l=this.Ef(e,r);this.Wf(l,this.Hf.hv),zl(e)}}}lv(e){if(e.button!==0)return;const r=this.Ff(qn(e),He(this.vf)),{Nf:s}=r;if(s>=5&&(this.bf=!0,this.Yf()),this.bf){const i=this.Ef(e);this.Uf(i,this.Hf.av)}}Ff(e,r){const s=Math.abs(r.nt-e.nt),i=Math.abs(r.st-e.st);return{nv:s,sv:i,Nf:s+i}}ov(e){let r=Bx(e.changedTouches,He(this.Of));if(r===null&&e.touches.length===0&&(r=e.changedTouches[0]),r===null)return;this.Of=null,this.Vf=xp(e),this.Kf(),this.pf=null,this.yf&&(this.yf(),this.yf=null);const s=this.Ef(e,r);if(this.Wf(s,this.Hf._v),++this._f,this.uf&&this._f>1){const{Nf:i}=this.Ff(qn(r),this.cf);i<30&&!this.wf&&this.Wf(s,this.Hf.jf),this.$f()}else this.wf||(this.Wf(s,this.Hf.uv),this.Hf.uv&&zl(e));this._f===0&&zl(e),e.touches.length===0&&this.ff&&(this.ff=!1,zl(e))}If(e){if(e.button!==0)return;const r=this.Ef(e);if(this.vf=null,this.Df=!1,this.kf&&(this.kf(),this.kf=null),c2()&&this.Zf.ownerDocument.documentElement.removeEventListener("mouseleave",this.Af),!this.Lf(e))if(this.Uf(r,this.Hf.cv),++this.hf,this.lf&&this.hf>1){const{Nf:s}=this.Ff(qn(e),this.af);s<5&&!this.bf&&this.Uf(r,this.Hf.qf),this.Yf()}else this.bf||this.Uf(r,this.Hf.dv)}Kf(){this.df!==null&&(clearTimeout(this.df),this.df=null)}fv(e){if(this.Of!==null)return;const r=e.changedTouches[0];this.Of=r.identifier,this.Vf=xp(e);const s=this.Zf.ownerDocument.documentElement;this.wf=!1,this.mf=!1,this.Rf=!1,this.pf=qn(r),this.yf&&(this.yf(),this.yf=null);{const a=this.iv.bind(this),o=this.ov.bind(this);this.yf=()=>{s.removeEventListener("touchmove",a),s.removeEventListener("touchend",o)},s.addEventListener("touchmove",a,{passive:!1}),s.addEventListener("touchend",o,{passive:!1}),this.Kf(),this.df=setTimeout(this.vv.bind(this,e),240)}const i=this.Ef(e,r);this.Wf(i,this.Hf.pv),this.uf||(this._f=0,this.uf=setTimeout(this.$f.bind(this),500),this.cf=qn(r))}mv(e){if(e.button!==0)return;const r=this.Zf.ownerDocument.documentElement;c2()&&r.addEventListener("mouseleave",this.Af),this.bf=!1,this.vf=qn(e),this.kf&&(this.kf(),this.kf=null);{const i=this.lv.bind(this),a=this.If.bind(this);this.kf=()=>{r.removeEventListener("mousemove",i),r.removeEventListener("mouseup",a)},r.addEventListener("mousemove",i),r.addEventListener("mouseup",a)}if(this.Df=!0,this.Lf(e))return;const s=this.Ef(e);this.Uf(s,this.Hf.bv),this.lf||(this.hf=0,this.lf=setTimeout(this.Yf.bind(this),500),this.af=qn(e))}Xf(){this.Zf.addEventListener("mouseenter",this.Gf.bind(this)),this.Zf.addEventListener("touchcancel",this.Kf.bind(this));{const e=this.Zf.ownerDocument,r=s=>{this.Hf.wv&&(s.composed&&this.Zf.contains(s.composedPath()[0])||s.target&&this.Zf.contains(s.target)||this.Hf.wv())};this.Mf=()=>{e.removeEventListener("touchstart",r)},this.gf=()=>{e.removeEventListener("mousedown",r)},e.addEventListener("mousedown",r),e.addEventListener("touchstart",r,{passive:!0})}Mx()&&(this.xf=()=>{this.Zf.removeEventListener("dblclick",this.zf)},this.Zf.addEventListener("dblclick",this.zf)),this.Zf.addEventListener("mouseleave",this.gv.bind(this)),this.Zf.addEventListener("touchstart",this.fv.bind(this),{passive:!0}),SW(this.Zf),this.Zf.addEventListener("mousedown",this.mv.bind(this)),this.Mv(),this.Zf.addEventListener("touchmove",()=>{},{passive:!1})}Mv(){this.Hf.xv===void 0&&this.Hf.Sv===void 0&&this.Hf.kv===void 0||(this.Zf.addEventListener("touchstart",e=>this.yv(e.touches),{passive:!0}),this.Zf.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Cf!==null&&this.Hf.Sv!==void 0){const r=d2(e.touches[0],e.touches[1])/this.Tf;this.Hf.Sv(this.Cf,r),zl(e)}},{passive:!1}),this.Zf.addEventListener("touchend",e=>{this.yv(e.touches)}))}yv(e){e.length===1&&(this.Pf=!1),e.length!==2||this.Pf||this.ff?this.Cv():this.Tv(e)}Tv(e){const r=this.Zf.getBoundingClientRect()||{left:0,top:0};this.Cf={nt:(e[0].clientX-r.left+(e[1].clientX-r.left))/2,st:(e[0].clientY-r.top+(e[1].clientY-r.top))/2},this.Tf=d2(e[0],e[1]),this.Hf.xv!==void 0&&this.Hf.xv(),this.Kf()}Cv(){this.Cf!==null&&(this.Cf=null,this.Hf.kv!==void 0&&this.Hf.kv())}gv(e){if(this.Sf&&this.Sf(),this.Lf(e)||!this.Bf)return;const r=this.Ef(e);this.Uf(r,this.Hf.Pv),this.Bf=!Mx()}vv(e){const r=Bx(e.touches,He(this.Of));if(r===null)return;const s=this.Ef(e,r);this.Wf(s,this.Hf.Rv),this.wf=!0,this.ff=!0}Lf(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:xp(e)<this.Vf+500}Wf(e,r){r&&r.call(this.Hf,e)}Uf(e,r){r&&r.call(this.Hf,e)}Ef(e,r){const s=r||e,i=this.Zf.getBoundingClientRect()||{left:0,top:0};return{clientX:s.clientX,clientY:s.clientY,pageX:s.pageX,pageY:s.pageY,screenX:s.screenX,screenY:s.screenY,localX:s.clientX-i.left,localY:s.clientY-i.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Dv:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Vv:e.type,Ov:s.target,Bv:e.view,Av:()=>{e.type!=="touchstart"&&zl(e)}}}}function d2(t,e){const r=t.clientX-e.clientX,s=t.clientY-e.clientY;return Math.sqrt(r*r+s*s)}function zl(t){t.cancelable&&t.preventDefault()}function qn(t){return{nt:t.pageX,st:t.pageY}}function xp(t){return t.timeStamp||performance.now()}function Bx(t,e){for(let r=0;r<t.length;++r)if(t[r].identifier===e)return t[r];return null}function yp(t){return{Hc:t.Hc,Iv:{gr:t.zv.externalId},Lv:t.zv.cursorStyle}}function jW(t,e,r){for(const s of t){const i=s.gt();if(i!==null&&i.wr){const a=i.wr(e,r);if(a!==null)return{Bv:s,Iv:a}}}return null}function $x(t,e){return r=>{var s,i,a,o;return((i=(s=r.Dt())===null||s===void 0?void 0:s.Pa())!==null&&i!==void 0?i:"")!==e?[]:(o=(a=r.da)===null||a===void 0?void 0:a.call(r,t))!==null&&o!==void 0?o:[]}}function u2(t,e,r,s){if(!t.length)return;let i=0;const a=r/2,o=t[0].At(s,!0);let l=e===1?a-(t[0].Vi()-o/2):t[0].Vi()-o/2-a;l=Math.max(0,l);for(let c=1;c<t.length;c++){const d=t[c],u=t[c-1],h=u.At(s,!1),p=d.Vi(),f=u.Vi();if(e===1?p>f-h:p<f+h){const m=f-h*e;d.Oi(m);const v=m-e*h/2;if((e===1?v<0:v>r)&&l>0){const x=e===1?-1-v:v-r,b=Math.min(x,l);for(let y=i;y<t.length;y++)t[y].Oi(t[y].Vi()+e*b);l-=b}}else i=c,l=e===1?f-h-p:p-(f+h)}}class h2{constructor(e,r,s,i){this.Li=null,this.Ev=null,this.Nv=!1,this.Fv=new Bu(200),this.Qr=null,this.Wv=0,this.jv=!1,this.Hv=()=>{this.jv||this.tn.$v().$t().Uh()},this.Uv=()=>{this.jv||this.tn.$v().$t().Uh()},this.tn=e,this.cn=r,this.ko=r.layout,this.Oc=s,this.qv=i==="left",this.Yv=$x("normal",i),this.Zv=$x("top",i),this.Xv=$x("bottom",i),this.Kv=document.createElement("div"),this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Kv.style.width="25px",this.Kv.style.left="0",this.Kv.style.position="relative",this.Gv=ol(this.Kv,Qt({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const a=this.Gv.canvasElement;a.style.position="absolute",a.style.zIndex="1",a.style.left="0",a.style.top="0",this.Jv=ol(this.Kv,Qt({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const o=this.Jv.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const l={bv:this.Qv.bind(this),pv:this.Qv.bind(this),av:this.tp.bind(this),hv:this.tp.bind(this),wv:this.ip.bind(this),cv:this.np.bind(this),_v:this.np.bind(this),qf:this.sp.bind(this),jf:this.sp.bind(this),Qf:this.ep.bind(this),Pv:this.rp.bind(this)};this.hp=new Yw(this.Jv.canvasElement,l,{ev:()=>!this.cn.handleScroll.vertTouchDrag,rv:()=>!0})}S(){this.hp.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),ll(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),ll(this.Gv.canvasElement),this.Gv.dispose(),this.Li!==null&&this.Li.Ko().p(this),this.Li=null}lp(){return this.Kv}P(){return this.ko.fontSize}ap(){const e=this.Oc.W();return this.Qr!==e.R&&(this.Fv.nr(),this.Qr=e.R),e}op(){if(this.Li===null)return 0;let e=0;const r=this.ap(),s=He(this.Gv.canvasElement.getContext("2d"));s.save();const i=this.Li.Ha();s.font=this._p(),i.length>0&&(e=Math.max(this.Fv.xi(s,i[0].so),this.Fv.xi(s,i[i.length-1].so)));const a=this.up();for(let d=a.length;d--;){const u=this.Fv.xi(s,a[d].Kt());u>e&&(e=u)}const o=this.Li.Ct();if(o!==null&&this.Ev!==null&&(l=this.cn.crosshair).mode!==2&&l.horzLine.visible&&l.horzLine.labelVisible){const d=this.Li.pn(1,o),u=this.Li.pn(this.Ev.height-2,o);e=Math.max(e,this.Fv.xi(s,this.Li.Fi(Math.floor(Math.min(d,u))+.11111111111111,o)),this.Fv.xi(s,this.Li.Fi(Math.ceil(Math.max(d,u))-.11111111111111,o)))}var l;s.restore();const c=e||34;return Lv(Math.ceil(r.C+r.T+r.A+r.I+5+c))}cp(e){this.Ev!==null&&Wo(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`)}dp(){return He(this.Ev).width}Gi(e){this.Li!==e&&(this.Li!==null&&this.Li.Ko().p(this),this.Li=e,e.Ko().l(this.fo.bind(this),this))}Dt(){return this.Li}nr(){const e=this.tn.fp();this.tn.$v().$t().E_(e,He(this.Dt()))}vp(e){if(this.Ev===null)return;if(e!==1){this.pp(),this.Gv.applySuggestedBitmapSize();const s=il(this.Gv);s!==null&&(s.useBitmapCoordinateSpace(i=>{this.mp(i),this.Ie(i)}),this.tn.bp(s,this.Xv),this.wp(s),this.tn.bp(s,this.Yv),this.gp(s))}this.Jv.applySuggestedBitmapSize();const r=il(this.Jv);r!==null&&(r.useBitmapCoordinateSpace(({context:s,bitmapSize:i})=>{s.clearRect(0,0,i.width,i.height)}),this.Mp(r),this.tn.bp(r,this.Zv))}xp(){return this.Gv.bitmapSize}Sp(e,r,s){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,r,s)}bt(){var e;(e=this.Li)===null||e===void 0||e.Ha()}Qv(e){if(this.Li===null||this.Li.Ni()||!this.cn.handleScale.axisPressedMouseMove.price)return;const r=this.tn.$v().$t(),s=this.tn.fp();this.Nv=!0,r.V_(s,this.Li,e.localY)}tp(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const r=this.tn.$v().$t(),s=this.tn.fp(),i=this.Li;r.O_(s,i,e.localY)}ip(){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.tn.$v().$t(),r=this.tn.fp(),s=this.Li;this.Nv&&(this.Nv=!1,e.B_(r,s))}np(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const r=this.tn.$v().$t(),s=this.tn.fp();this.Nv=!1,r.B_(s,this.Li)}sp(e){this.cn.handleScale.axisDoubleClickReset.price&&this.nr()}ep(e){this.Li!==null&&(!this.tn.$v().$t().W().handleScale.axisPressedMouseMove.price||this.Li.Mh()||this.Li.Oo()||this.kp(1))}rp(e){this.kp(0)}up(){const e=[],r=this.Li===null?void 0:this.Li;return(s=>{for(let i=0;i<s.length;++i){const a=s[i].Rn(this.tn.fp(),r);for(let o=0;o<a.length;o++)e.push(a[o])}})(this.tn.fp().Uo()),e}mp({context:e,bitmapSize:r}){const{width:s,height:i}=r,a=this.tn.fp().$t(),o=a.q(),l=a.bd();o===l?Vm(e,0,0,s,i,o):IA(e,0,0,s,i,o,l)}Ie({context:e,bitmapSize:r,horizontalPixelRatio:s}){if(this.Ev===null||this.Li===null||!this.Li.W().borderVisible)return;e.fillStyle=this.Li.W().borderColor;const i=Math.max(1,Math.floor(this.ap().C*s));let a;a=this.qv?r.width-i:0,e.fillRect(a,0,i,r.height)}wp(e){if(this.Ev===null||this.Li===null)return;const r=this.Li.Ha(),s=this.Li.W(),i=this.ap(),a=this.qv?this.Ev.width-i.T:0;s.borderVisible&&s.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:l,verticalPixelRatio:c})=>{o.fillStyle=s.borderColor;const d=Math.max(1,Math.floor(c)),u=Math.floor(.5*c),h=Math.round(i.T*l);o.beginPath();for(const p of r)o.rect(Math.floor(a*l),Math.round(p.Ea*c)-u,h,d);o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{var l;o.font=this._p(),o.fillStyle=(l=s.textColor)!==null&&l!==void 0?l:this.ko.textColor,o.textAlign=this.qv?"right":"left",o.textBaseline="middle";const c=this.qv?Math.round(a-i.A):Math.round(a+i.T+i.A),d=r.map(u=>this.Fv.Mi(o,u.so));for(let u=r.length;u--;){const h=r[u];o.fillText(h.so,c,h.Ea+d[u])}})}pp(){if(this.Ev===null||this.Li===null)return;const e=[],r=this.Li.Uo().slice(),s=this.tn.fp(),i=this.ap();this.Li===s.pr()&&this.tn.fp().Uo().forEach(o=>{s.vr(o)&&r.push(o)});const a=this.Li;r.forEach(o=>{o.Rn(s,a).forEach(l=>{l.Oi(null),l.Bi()&&e.push(l)})}),e.forEach(o=>o.Oi(o.ki())),this.Li.W().alignLabels&&this.yp(e,i)}yp(e,r){if(this.Ev===null)return;const s=this.Ev.height/2,i=e.filter(o=>o.ki()<=s),a=e.filter(o=>o.ki()>s);i.sort((o,l)=>l.ki()-o.ki()),a.sort((o,l)=>o.ki()-l.ki());for(const o of e){const l=Math.floor(o.At(r)/2),c=o.ki();c>-l&&c<l&&o.Oi(l),c>this.Ev.height-l&&c<this.Ev.height+l&&o.Oi(this.Ev.height-l)}u2(i,1,this.Ev.height,r),u2(a,-1,this.Ev.height,r)}gp(e){if(this.Ev===null)return;const r=this.up(),s=this.ap(),i=this.qv?"right":"left";r.forEach(a=>{a.Ai()&&a.gt(He(this.Li)).X(e,s,this.Fv,i)})}Mp(e){if(this.Ev===null||this.Li===null)return;const r=this.tn.$v().$t(),s=[],i=this.tn.fp(),a=r.Zc().Rn(i,this.Li);a.length&&s.push(a);const o=this.ap(),l=this.qv?"right":"left";s.forEach(c=>{c.forEach(d=>{d.gt(He(this.Li)).X(e,o,this.Fv,l)})})}kp(e){this.Kv.style.cursor=e===1?"ns-resize":"default"}fo(){const e=this.op();this.Wv<e&&this.tn.$v().$t().Kl(),this.Wv=e}_p(){return Mc(this.ko.fontSize,this.ko.fontFamily)}}function EW(t,e){var r,s;return(s=(r=t.ua)===null||r===void 0?void 0:r.call(t,e))!==null&&s!==void 0?s:[]}function vp(t,e){var r,s;return(s=(r=t.Pn)===null||r===void 0?void 0:r.call(t,e))!==null&&s!==void 0?s:[]}function TW(t,e){var r,s;return(s=(r=t.Ji)===null||r===void 0?void 0:r.call(t,e))!==null&&s!==void 0?s:[]}function CW(t,e){var r,s;return(s=(r=t.aa)===null||r===void 0?void 0:r.call(t,e))!==null&&s!==void 0?s:[]}class Jw{constructor(e,r){this.Ev=Qt({width:0,height:0}),this.Cp=null,this.Tp=null,this.Pp=null,this.Rp=null,this.Dp=!1,this.Vp=new vr,this.Op=new vr,this.Bp=0,this.Ap=!1,this.Ip=null,this.zp=!1,this.Lp=null,this.Ep=null,this.jv=!1,this.Hv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Uv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Qd=e,this.Np=r,this.Np.W_().l(this.Fp.bind(this),this,!0),this.Wp=document.createElement("td"),this.Wp.style.padding="0",this.Wp.style.position="relative";const s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.position="relative",s.style.overflow="hidden",this.jp=document.createElement("td"),this.jp.style.padding="0",this.Hp=document.createElement("td"),this.Hp.style.padding="0",this.Wp.appendChild(s),this.Gv=ol(s,Qt({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const i=this.Gv.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Jv=ol(s,Qt({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const a=this.Jv.canvasElement;a.style.position="absolute",a.style.zIndex="2",a.style.left="0",a.style.top="0",this.$p=document.createElement("tr"),this.$p.appendChild(this.jp),this.$p.appendChild(this.Wp),this.$p.appendChild(this.Hp),this.Up(),this.hp=new Yw(this.Jv.canvasElement,this,{ev:()=>this.Ip===null&&!this.Qd.W().handleScroll.vertTouchDrag,rv:()=>this.Ip===null&&!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.Cp!==null&&this.Cp.S(),this.Tp!==null&&this.Tp.S(),this.Pp=null,this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),ll(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),ll(this.Gv.canvasElement),this.Gv.dispose(),this.Np!==null&&this.Np.W_().p(this),this.hp.S()}fp(){return He(this.Np)}qp(e){var r,s;this.Np!==null&&this.Np.W_().p(this),this.Np=e,this.Np!==null&&this.Np.W_().l(Jw.prototype.Fp.bind(this),this,!0),this.Up(),this.Qd.Yp().indexOf(this)===this.Qd.Yp().length-1?(this.Pp=(r=this.Pp)!==null&&r!==void 0?r:new NW(this.Wp,this.Qd),this.Pp.bt()):((s=this.Pp)===null||s===void 0||s.if(),this.Pp=null)}$v(){return this.Qd}lp(){return this.$p}Up(){if(this.Np!==null&&(this.Zp(),this.$i().wt().length!==0)){if(this.Cp!==null){const e=this.Np.R_();this.Cp.Gi(He(e))}if(this.Tp!==null){const e=this.Np.D_();this.Tp.Gi(He(e))}}}Xp(){this.Cp!==null&&this.Cp.bt(),this.Tp!==null&&this.Tp.bt()}M_(){return this.Np!==null?this.Np.M_():0}x_(e){this.Np&&this.Np.x_(e)}Qf(e){if(!this.Np)return;this.Kp();const r=e.localX,s=e.localY;this.Gp(r,s,e)}bv(e){this.Kp(),this.Jp(),this.Gp(e.localX,e.localY,e)}tv(e){var r;if(!this.Np)return;this.Kp();const s=e.localX,i=e.localY;this.Gp(s,i,e);const a=this.wr(s,i);this.Qd.Qp((r=a==null?void 0:a.Lv)!==null&&r!==void 0?r:null),this.$i().jc(a&&{Hc:a.Hc,Iv:a.Iv})}dv(e){this.Np!==null&&(this.Kp(),this.tm(e))}qf(e){this.Np!==null&&this.im(this.Op,e)}jf(e){this.qf(e)}av(e){this.Kp(),this.nm(e),this.Gp(e.localX,e.localY,e)}cv(e){this.Np!==null&&(this.Kp(),this.Ap=!1,this.sm(e))}uv(e){this.Np!==null&&this.tm(e)}Rv(e){if(this.Ap=!0,this.Ip===null){const r={x:e.localX,y:e.localY};this.rm(r,r,e)}}Pv(e){this.Np!==null&&(this.Kp(),this.Np.$t().jc(null),this.hm())}lm(){return this.Vp}am(){return this.Op}xv(){this.Bp=1,this.$i().Un()}Sv(e,r){if(!this.Qd.W().handleScale.pinch)return;const s=5*(r-this.Bp);this.Bp=r,this.$i().Qc(e.nt,s)}pv(e){this.Ap=!1,this.zp=this.Ip!==null,this.Jp();const r=this.$i().Zc();this.Ip!==null&&r.yt()&&(this.Lp={x:r.Yt(),y:r.Zt()},this.Ip={x:e.localX,y:e.localY})}hv(e){if(this.Np===null)return;const r=e.localX,s=e.localY;if(this.Ip===null)this.nm(e);else{this.zp=!1;const i=He(this.Lp),a=i.x+(r-this.Ip.x),o=i.y+(s-this.Ip.y);this.Gp(a,o,e)}}_v(e){this.$v().W().trackingMode.exitMode===0&&(this.zp=!0),this.om(),this.sm(e)}wr(e,r){const s=this.Np;return s===null?null:function(i,a,o){const l=i.Uo(),c=function(d,u,h){var p,f;let m,v;for(const y of d){const g=(f=(p=y.va)===null||p===void 0?void 0:p.call(y,u,h))!==null&&f!==void 0?f:[];for(const w of g)x=w.zOrder,(!(b=m==null?void 0:m.zOrder)||x==="top"&&b!=="top"||x==="normal"&&b==="bottom")&&(m=w,v=y)}var x,b;return m&&v?{zv:m,Hc:v}:null}(l,a,o);if((c==null?void 0:c.zv.zOrder)==="top")return yp(c);for(const d of l){if(c&&c.Hc===d&&c.zv.zOrder!=="bottom"&&!c.zv.isBackground)return yp(c);const u=jW(d.Pn(i),a,o);if(u!==null)return{Hc:d,Bv:u.Bv,Iv:u.Iv};if(c&&c.Hc===d&&c.zv.zOrder!=="bottom"&&c.zv.isBackground)return yp(c)}return c!=null&&c.zv?yp(c):null}(s,e,r)}_m(e,r){He(r==="left"?this.Cp:this.Tp).cp(Qt({width:e,height:this.Ev.height}))}um(){return this.Ev}cp(e){Wo(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Wp.style.width=e.width+"px",this.Wp.style.height=e.height+"px")}dm(){const e=He(this.Np);e.P_(e.R_()),e.P_(e.D_());for(const r of e.Ba())if(e.vr(r)){const s=r.Dt();s!==null&&e.P_(s),r.Vn()}}xp(){return this.Gv.bitmapSize}Sp(e,r,s){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,r,s)}vp(e){if(e===0||this.Np===null)return;if(e>1&&this.dm(),this.Cp!==null&&this.Cp.vp(e),this.Tp!==null&&this.Tp.vp(e),e!==1){this.Gv.applySuggestedBitmapSize();const s=il(this.Gv);s!==null&&(s.useBitmapCoordinateSpace(i=>{this.mp(i)}),this.Np&&(this.fm(s,EW),this.vm(s),this.pm(s),this.fm(s,vp),this.fm(s,TW)))}this.Jv.applySuggestedBitmapSize();const r=il(this.Jv);r!==null&&(r.useBitmapCoordinateSpace(({context:s,bitmapSize:i})=>{s.clearRect(0,0,i.width,i.height)}),this.bm(r),this.fm(r,CW))}wm(){return this.Cp}gm(){return this.Tp}bp(e,r){this.fm(e,r)}Fp(){this.Np!==null&&this.Np.W_().p(this),this.Np=null}tm(e){this.im(this.Vp,e)}im(e,r){const s=r.localX,i=r.localY;e.M()&&e.m(this.$i().St().Nu(s),{x:s,y:i},r)}mp({context:e,bitmapSize:r}){const{width:s,height:i}=r,a=this.$i(),o=a.q(),l=a.bd();o===l?Vm(e,0,0,s,i,l):IA(e,0,0,s,i,o,l)}vm(e){const r=He(this.Np).j_().qh().gt();r!==null&&r.X(e,!1)}pm(e){const r=this.$i().Yc();this.Mm(e,vp,Mv,r),this.Mm(e,vp,Wp,r)}bm(e){this.Mm(e,vp,Wp,this.$i().Zc())}fm(e,r){const s=He(this.Np).Uo();for(const i of s)this.Mm(e,r,Mv,i);for(const i of s)this.Mm(e,r,Wp,i)}Mm(e,r,s,i){const a=He(this.Np),o=a.$t().Wc(),l=o!==null&&o.Hc===i,c=o!==null&&l&&o.Iv!==void 0?o.Iv.Mr:void 0;Fv(r,d=>s(d,e,l,c),i,a)}Zp(){if(this.Np===null)return;const e=this.Qd,r=this.Np.R_().W().visible,s=this.Np.D_().W().visible;r||this.Cp===null||(this.jp.removeChild(this.Cp.lp()),this.Cp.S(),this.Cp=null),s||this.Tp===null||(this.Hp.removeChild(this.Tp.lp()),this.Tp.S(),this.Tp=null);const i=e.$t().ud();r&&this.Cp===null&&(this.Cp=new h2(this,e.W(),i,"left"),this.jp.appendChild(this.Cp.lp())),s&&this.Tp===null&&(this.Tp=new h2(this,e.W(),i,"right"),this.Hp.appendChild(this.Tp.lp()))}xm(e){return e.Dv&&this.Ap||this.Ip!==null}Sm(e){return Math.max(0,Math.min(e,this.Ev.width-1))}km(e){return Math.max(0,Math.min(e,this.Ev.height-1))}Gp(e,r,s){this.$i().ld(this.Sm(e),this.km(r),s,He(this.Np))}hm(){this.$i().od()}om(){this.zp&&(this.Ip=null,this.hm())}rm(e,r,s){this.Ip=e,this.zp=!1,this.Gp(r.x,r.y,s);const i=this.$i().Zc();this.Lp={x:i.Yt(),y:i.Zt()}}$i(){return this.Qd.$t()}sm(e){if(!this.Dp)return;const r=this.$i(),s=this.fp();if(r.z_(s,s.vn()),this.Rp=null,this.Dp=!1,r.ed(),this.Ep!==null){const i=performance.now(),a=r.St();this.Ep.Vr(a.Hu(),i),this.Ep.Qu(i)||r.Zn(this.Ep)}}Kp(){this.Ip=null}Jp(){if(this.Np){if(this.$i().Un(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)He(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Np.vn().Ni()&&this.$i().St().Ni()}}nm(e){if(this.Np===null)return;const r=this.$i(),s=r.St();if(s.Ni())return;const i=this.Qd.W(),a=i.handleScroll,o=i.kineticScroll;if((!a.pressedMouseMove||e.Dv)&&(!a.horzTouchDrag&&!a.vertTouchDrag||!e.Dv))return;const l=this.Np.vn(),c=performance.now();if(this.Rp!==null||this.xm(e)||(this.Rp={x:e.clientX,y:e.clientY,Od:c,ym:e.localX,Cm:e.localY}),this.Rp!==null&&!this.Dp&&(this.Rp.x!==e.clientX||this.Rp.y!==e.clientY)){if(e.Dv&&o.touch||!e.Dv&&o.mouse){const d=s.le();this.Ep=new _W(.2/d,7/d,.997,15/d),this.Ep.Yd(s.Hu(),this.Rp.Od)}else this.Ep=null;l.Ni()||r.A_(this.Np,l,e.localY),r.nd(e.localX),this.Dp=!0}this.Dp&&(l.Ni()||r.I_(this.Np,l,e.localY),r.sd(e.localX),this.Ep!==null&&this.Ep.Yd(s.Hu(),c))}}class p2{constructor(e,r,s,i,a){this.ft=!0,this.Ev=Qt({width:0,height:0}),this.Hv=()=>this.vp(3),this.qv=e==="left",this.Oc=s.ud,this.cn=r,this.Tm=i,this.Pm=a,this.Kv=document.createElement("div"),this.Kv.style.width="25px",this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Gv=ol(this.Kv,Qt({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv)}S(){this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),ll(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Kv}um(){return this.Ev}cp(e){Wo(this.Ev,e)||(this.Ev=e,this.Gv.resizeCanvasElement(e),this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.ft=!0)}vp(e){if(e<3&&!this.ft||this.Ev.width===0||this.Ev.height===0)return;this.ft=!1,this.Gv.applySuggestedBitmapSize();const r=il(this.Gv);r!==null&&r.useBitmapCoordinateSpace(s=>{this.mp(s),this.Ie(s)})}xp(){return this.Gv.bitmapSize}Sp(e,r,s){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,r,s)}Ie({context:e,bitmapSize:r,horizontalPixelRatio:s,verticalPixelRatio:i}){if(!this.Tm())return;e.fillStyle=this.cn.timeScale.borderColor;const a=Math.floor(this.Oc.W().C*s),o=Math.floor(this.Oc.W().C*i),l=this.qv?r.width-a:0;e.fillRect(l,0,a,o)}mp({context:e,bitmapSize:r}){Vm(e,0,0,r.width,r.height,this.Pm())}}function Qw(t){return e=>{var r,s;return(s=(r=e.fa)===null||r===void 0?void 0:r.call(e,t))!==null&&s!==void 0?s:[]}}const kW=Qw("normal"),AW=Qw("top"),PW=Qw("bottom");class RW{constructor(e,r){this.Rm=null,this.Dm=null,this.k=null,this.Vm=!1,this.Ev=Qt({width:0,height:0}),this.Om=new vr,this.Fv=new Bu(5),this.jv=!1,this.Hv=()=>{this.jv||this.Qd.$t().Uh()},this.Uv=()=>{this.jv||this.Qd.$t().Uh()},this.Qd=e,this.q_=r,this.cn=e.W().layout,this.Xd=document.createElement("tr"),this.Bm=document.createElement("td"),this.Bm.style.padding="0",this.Am=document.createElement("td"),this.Am.style.padding="0",this.Kv=document.createElement("td"),this.Kv.style.height="25px",this.Kv.style.padding="0",this.Im=document.createElement("div"),this.Im.style.width="100%",this.Im.style.height="100%",this.Im.style.position="relative",this.Im.style.overflow="hidden",this.Kv.appendChild(this.Im),this.Gv=ol(this.Im,Qt({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const s=this.Gv.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Jv=ol(this.Im,Qt({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const i=this.Jv.canvasElement;i.style.position="absolute",i.style.zIndex="2",i.style.left="0",i.style.top="0",this.Xd.appendChild(this.Bm),this.Xd.appendChild(this.Kv),this.Xd.appendChild(this.Am),this.zm(),this.Qd.$t().g_().l(this.zm.bind(this),this),this.hp=new Yw(this.Jv.canvasElement,this,{ev:()=>!0,rv:()=>!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.hp.S(),this.Rm!==null&&this.Rm.S(),this.Dm!==null&&this.Dm.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),ll(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),ll(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Xd}Lm(){return this.Rm}Em(){return this.Dm}bv(e){if(this.Vm)return;this.Vm=!0;const r=this.Qd.$t();!r.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&r.Jc(e.localX)}pv(e){this.bv(e)}wv(){const e=this.Qd.$t();!e.St().Ni()&&this.Vm&&(this.Vm=!1,this.Qd.W().handleScale.axisPressedMouseMove.time&&e.hd())}av(e){const r=this.Qd.$t();!r.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&r.rd(e.localX)}hv(e){this.av(e)}cv(){this.Vm=!1;const e=this.Qd.$t();e.St().Ni()&&!this.Qd.W().handleScale.axisPressedMouseMove.time||e.hd()}_v(){this.cv()}qf(){this.Qd.W().handleScale.axisDoubleClickReset.time&&this.Qd.$t().Kn()}jf(){this.qf()}Qf(){this.Qd.$t().W().handleScale.axisPressedMouseMove.time&&this.kp(1)}Pv(){this.kp(0)}um(){return this.Ev}Nm(){return this.Om}Fm(e,r,s){Wo(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.Om.m(e)),this.Rm!==null&&this.Rm.cp(Qt({width:r,height:e.height})),this.Dm!==null&&this.Dm.cp(Qt({width:s,height:e.height}))}Wm(){const e=this.jm();return Math.ceil(e.C+e.T+e.P+e.L+e.B+e.Hm)}bt(){this.Qd.$t().St().Ha()}xp(){return this.Gv.bitmapSize}Sp(e,r,s){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,r,s)}vp(e){if(e===0)return;if(e!==1){this.Gv.applySuggestedBitmapSize();const s=il(this.Gv);s!==null&&(s.useBitmapCoordinateSpace(i=>{this.mp(i),this.Ie(i),this.$m(s,PW)}),this.wp(s),this.$m(s,kW)),this.Rm!==null&&this.Rm.vp(e),this.Dm!==null&&this.Dm.vp(e)}this.Jv.applySuggestedBitmapSize();const r=il(this.Jv);r!==null&&(r.useBitmapCoordinateSpace(({context:s,bitmapSize:i})=>{s.clearRect(0,0,i.width,i.height)}),this.Um([...this.Qd.$t().wt(),this.Qd.$t().Zc()],r),this.$m(r,AW))}$m(e,r){const s=this.Qd.$t().wt();for(const i of s)Fv(r,a=>Mv(a,e,!1,void 0),i,void 0);for(const i of s)Fv(r,a=>Wp(a,e,!1,void 0),i,void 0)}mp({context:e,bitmapSize:r}){Vm(e,0,0,r.width,r.height,this.Qd.$t().bd())}Ie({context:e,bitmapSize:r,verticalPixelRatio:s}){if(this.Qd.W().timeScale.borderVisible){e.fillStyle=this.qm();const i=Math.max(1,Math.floor(this.jm().C*s));e.fillRect(0,0,r.width,i)}}wp(e){const r=this.Qd.$t().St(),s=r.Ha();if(!s||s.length===0)return;const i=this.q_.maxTickMarkWeight(s),a=this.jm(),o=r.W();o.borderVisible&&o.ticksVisible&&e.useBitmapCoordinateSpace(({context:l,horizontalPixelRatio:c,verticalPixelRatio:d})=>{l.strokeStyle=this.qm(),l.fillStyle=this.qm();const u=Math.max(1,Math.floor(c)),h=Math.floor(.5*c);l.beginPath();const p=Math.round(a.T*d);for(let f=s.length;f--;){const m=Math.round(s[f].coord*c);l.rect(m-h,0,u,p)}l.fill()}),e.useMediaCoordinateSpace(({context:l})=>{const c=a.C+a.T+a.L+a.P/2;l.textAlign="center",l.textBaseline="middle",l.fillStyle=this.$(),l.font=this._p();for(const d of s)if(d.weight<i){const u=d.needAlignCoordinate?this.Ym(l,d.coord,d.label):d.coord;l.fillText(d.label,u,c)}this.Qd.W().timeScale.allowBoldLabels&&(l.font=this.Zm());for(const d of s)if(d.weight>=i){const u=d.needAlignCoordinate?this.Ym(l,d.coord,d.label):d.coord;l.fillText(d.label,u,c)}})}Ym(e,r,s){const i=this.Fv.xi(e,s),a=i/2,o=Math.floor(r-a)+.5;return o<0?r+=Math.abs(0-o):o+i>this.Ev.width&&(r-=Math.abs(this.Ev.width-(o+i))),r}Um(e,r){const s=this.jm();for(const i of e)for(const a of i.Qi())a.gt().X(r,s)}qm(){return this.Qd.W().timeScale.borderColor}$(){return this.cn.textColor}j(){return this.cn.fontSize}_p(){return Mc(this.j(),this.cn.fontFamily)}Zm(){return Mc(this.j(),this.cn.fontFamily,"bold")}jm(){this.k===null&&(this.k={C:1,N:NaN,L:NaN,B:NaN,ji:NaN,T:5,P:NaN,R:"",Wi:new Bu,Hm:0});const e=this.k,r=this._p();if(e.R!==r){const s=this.j();e.P=s,e.R=r,e.L=3*s/12,e.B=3*s/12,e.ji=9*s/12,e.N=0,e.Hm=4*s/12,e.Wi.nr()}return this.k}kp(e){this.Kv.style.cursor=e===1?"ew-resize":"default"}zm(){const e=this.Qd.$t(),r=e.W();r.leftPriceScale.visible||this.Rm===null||(this.Bm.removeChild(this.Rm.lp()),this.Rm.S(),this.Rm=null),r.rightPriceScale.visible||this.Dm===null||(this.Am.removeChild(this.Dm.lp()),this.Dm.S(),this.Dm=null);const s={ud:this.Qd.$t().ud()},i=()=>r.leftPriceScale.borderVisible&&e.St().W().borderVisible,a=()=>e.bd();r.leftPriceScale.visible&&this.Rm===null&&(this.Rm=new p2("left",r,s,i,a),this.Bm.appendChild(this.Rm.lp())),r.rightPriceScale.visible&&this.Dm===null&&(this.Dm=new p2("right",r,s,i,a),this.Am.appendChild(this.Dm.lp()))}}const OW=!!Fc&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!Fc&&(!((Ux=navigator==null?void 0:navigator.userAgentData)===null||Ux===void 0)&&Ux.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);var Ux;class IW{constructor(e,r,s){var i;this.Xm=[],this.Km=0,this.ho=0,this.__=0,this.Gm=0,this.Jm=0,this.Qm=null,this.tb=!1,this.Vp=new vr,this.Op=new vr,this.Rc=new vr,this.ib=null,this.nb=null,this.Jd=e,this.cn=r,this.q_=s,this.Xd=document.createElement("div"),this.Xd.classList.add("tv-lightweight-charts"),this.Xd.style.overflow="hidden",this.Xd.style.direction="ltr",this.Xd.style.width="100%",this.Xd.style.height="100%",(i=this.Xd).style.userSelect="none",i.style.webkitUserSelect="none",i.style.msUserSelect="none",i.style.MozUserSelect="none",i.style.webkitTapHighlightColor="transparent",this.sb=document.createElement("table"),this.sb.setAttribute("cellspacing","0"),this.Xd.appendChild(this.sb),this.eb=this.rb.bind(this),Vx(this.cn)&&this.hb(!0),this.$i=new xW(this.Vc.bind(this),this.cn,s),this.$t().Xc().l(this.lb.bind(this),this),this.ab=new RW(this,this.q_),this.sb.appendChild(this.ab.lp());const a=r.autoSize&&this.ob();let o=this.cn.width,l=this.cn.height;if(a||o===0||l===0){const c=e.getBoundingClientRect();o=o||c.width,l=l||c.height}this._b(o,l),this.ub(),e.appendChild(this.Xd),this.cb(),this.$i.St().ec().l(this.$i.Kl.bind(this.$i),this),this.$i.g_().l(this.$i.Kl.bind(this.$i),this)}$t(){return this.$i}W(){return this.cn}Yp(){return this.Xm}fb(){return this.ab}S(){this.hb(!1),this.Km!==0&&window.cancelAnimationFrame(this.Km),this.$i.Xc().p(this),this.$i.St().ec().p(this),this.$i.g_().p(this),this.$i.S();for(const e of this.Xm)this.sb.removeChild(e.lp()),e.lm().p(this),e.am().p(this),e.S();this.Xm=[],He(this.ab).S(),this.Xd.parentElement!==null&&this.Xd.parentElement.removeChild(this.Xd),this.Rc.S(),this.Vp.S(),this.Op.S(),this.pb()}_b(e,r,s=!1){if(this.ho===r&&this.__===e)return;const i=function(l){const c=Math.floor(l.width),d=Math.floor(l.height);return Qt({width:c-c%2,height:d-d%2})}(Qt({width:e,height:r}));this.ho=i.height,this.__=i.width;const a=this.ho+"px",o=this.__+"px";He(this.Xd).style.height=a,He(this.Xd).style.width=o,this.sb.style.height=a,this.sb.style.width=o,s?this.mb(Dr.es(),performance.now()):this.$i.Kl()}vp(e){e===void 0&&(e=Dr.es());for(let r=0;r<this.Xm.length;r++)this.Xm[r].vp(e.Hn(r).Fn);this.cn.timeScale.visible&&this.ab.vp(e.jn())}$h(e){const r=Vx(this.cn);this.$i.$h(e);const s=Vx(this.cn);s!==r&&this.hb(s),this.cb(),this.bb(e)}lm(){return this.Vp}am(){return this.Op}Xc(){return this.Rc}wb(){this.Qm!==null&&(this.mb(this.Qm,performance.now()),this.Qm=null);const e=this.gb(null),r=document.createElement("canvas");r.width=e.width,r.height=e.height;const s=He(r.getContext("2d"));return this.gb(s),r}Mb(e){return e==="left"&&!this.xb()||e==="right"&&!this.Sb()||this.Xm.length===0?0:He(e==="left"?this.Xm[0].wm():this.Xm[0].gm()).dp()}kb(){return this.cn.autoSize&&this.ib!==null}yb(){return this.Xd}Qp(e){this.nb=e,this.nb?this.yb().style.setProperty("cursor",e):this.yb().style.removeProperty("cursor")}Cb(){return this.nb}Tb(){return ns(this.Xm[0]).um()}bb(e){(e.autoSize!==void 0||!this.ib||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.ib&&this.ob(),e.autoSize===!1&&this.ib!==null&&this.pb(),e.autoSize||e.width===void 0&&e.height===void 0||this._b(e.width||this.__,e.height||this.ho))}gb(e){let r=0,s=0;const i=this.Xm[0],a=(l,c)=>{let d=0;for(let u=0;u<this.Xm.length;u++){const h=this.Xm[u],p=He(l==="left"?h.wm():h.gm()),f=p.xp();e!==null&&p.Sp(e,c,d),d+=f.height}};this.xb()&&(a("left",0),r+=He(i.wm()).xp().width);for(let l=0;l<this.Xm.length;l++){const c=this.Xm[l],d=c.xp();e!==null&&c.Sp(e,r,s),s+=d.height}r+=i.xp().width,this.Sb()&&(a("right",r),r+=He(i.gm()).xp().width);const o=(l,c,d)=>{He(l==="left"?this.ab.Lm():this.ab.Em()).Sp(He(e),c,d)};if(this.cn.timeScale.visible){const l=this.ab.xp();if(e!==null){let c=0;this.xb()&&(o("left",c,s),c=He(i.wm()).xp().width),this.ab.Sp(e,c,s),c+=l.width,this.Sb()&&o("right",c,s)}s+=l.height}return Qt({width:r,height:s})}Pb(){let e=0,r=0,s=0;for(const m of this.Xm)this.xb()&&(r=Math.max(r,He(m.wm()).op(),this.cn.leftPriceScale.minimumWidth)),this.Sb()&&(s=Math.max(s,He(m.gm()).op(),this.cn.rightPriceScale.minimumWidth)),e+=m.M_();r=Lv(r),s=Lv(s);const i=this.__,a=this.ho,o=Math.max(i-r-s,0),l=this.cn.timeScale.visible;let c=l?Math.max(this.ab.Wm(),this.cn.timeScale.minimumHeight):0;var d;c=(d=c)+d%2;const u=0+c,h=a<u?0:a-u,p=h/e;let f=0;for(let m=0;m<this.Xm.length;++m){const v=this.Xm[m];v.qp(this.$i.qc()[m]);let x=0,b=0;b=m===this.Xm.length-1?h-f:Math.round(v.M_()*p),x=Math.max(b,2),f+=x,v.cp(Qt({width:o,height:x})),this.xb()&&v._m(r,"left"),this.Sb()&&v._m(s,"right"),v.fp()&&this.$i.Kc(v.fp(),x)}this.ab.Fm(Qt({width:l?o:0,height:c}),l?r:0,l?s:0),this.$i.S_(o),this.Gm!==r&&(this.Gm=r),this.Jm!==s&&(this.Jm=s)}hb(e){e?this.Xd.addEventListener("wheel",this.eb,{passive:!1}):this.Xd.removeEventListener("wheel",this.eb)}Rb(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return OW?1/window.devicePixelRatio:1}rb(e){if(!(e.deltaX!==0&&this.cn.handleScroll.mouseWheel||e.deltaY!==0&&this.cn.handleScale.mouseWheel))return;const r=this.Rb(e),s=r*e.deltaX/100,i=-r*e.deltaY/100;if(e.cancelable&&e.preventDefault(),i!==0&&this.cn.handleScale.mouseWheel){const a=Math.sign(i)*Math.min(1,Math.abs(i)),o=e.clientX-this.Xd.getBoundingClientRect().left;this.$t().Qc(o,a)}s!==0&&this.cn.handleScroll.mouseWheel&&this.$t().td(-80*s)}mb(e,r){var s;const i=e.jn();i===3&&this.Db(),i!==3&&i!==2||(this.Vb(e),this.Ob(e,r),this.ab.bt(),this.Xm.forEach(a=>{a.Xp()}),((s=this.Qm)===null||s===void 0?void 0:s.jn())===3&&(this.Qm.ts(e),this.Db(),this.Vb(this.Qm),this.Ob(this.Qm,r),e=this.Qm,this.Qm=null)),this.vp(e)}Ob(e,r){for(const s of e.Qn())this.ns(s,r)}Vb(e){const r=this.$i.qc();for(let s=0;s<r.length;s++)e.Hn(s).Wn&&r[s].N_()}ns(e,r){const s=this.$i.St();switch(e.qn){case 0:s.hc();break;case 1:s.lc(e.Vt);break;case 2:s.Gn(e.Vt);break;case 3:s.Jn(e.Vt);break;case 4:s.qu();break;case 5:e.Vt.Qu(r)||s.Jn(e.Vt.tc(r))}}Vc(e){this.Qm!==null?this.Qm.ts(e):this.Qm=e,this.tb||(this.tb=!0,this.Km=window.requestAnimationFrame(r=>{if(this.tb=!1,this.Km=0,this.Qm!==null){const s=this.Qm;this.Qm=null,this.mb(s,r);for(const i of s.Qn())if(i.qn===5&&!i.Vt.Qu(r)){this.$t().Zn(i.Vt);break}}}))}Db(){this.ub()}ub(){const e=this.$i.qc(),r=e.length,s=this.Xm.length;for(let i=r;i<s;i++){const a=ns(this.Xm.pop());this.sb.removeChild(a.lp()),a.lm().p(this),a.am().p(this),a.S()}for(let i=s;i<r;i++){const a=new Jw(this,e[i]);a.lm().l(this.Bb.bind(this),this),a.am().l(this.Ab.bind(this),this),this.Xm.push(a),this.sb.insertBefore(a.lp(),this.ab.lp())}for(let i=0;i<r;i++){const a=e[i],o=this.Xm[i];o.fp()!==a?o.qp(a):o.Up()}this.cb(),this.Pb()}Ib(e,r,s){var i;const a=new Map;e!==null&&this.$i.wt().forEach(u=>{const h=u.In().ll(e);h!==null&&a.set(u,h)});let o;if(e!==null){const u=(i=this.$i.St().Ui(e))===null||i===void 0?void 0:i.originalTime;u!==void 0&&(o=u)}const l=this.$t().Wc(),c=l!==null&&l.Hc instanceof Kw?l.Hc:void 0,d=l!==null&&l.Iv!==void 0?l.Iv.gr:void 0;return{zb:o,ee:e??void 0,Lb:r??void 0,Eb:c,Nb:a,Fb:d,Wb:s??void 0}}Bb(e,r,s){this.Vp.m(()=>this.Ib(e,r,s))}Ab(e,r,s){this.Op.m(()=>this.Ib(e,r,s))}lb(e,r,s){this.Rc.m(()=>this.Ib(e,r,s))}cb(){const e=this.cn.timeScale.visible?"":"none";this.ab.lp().style.display=e}xb(){return this.Xm[0].fp().R_().W().visible}Sb(){return this.Xm[0].fp().D_().W().visible}ob(){return"ResizeObserver"in window&&(this.ib=new ResizeObserver(e=>{const r=e.find(s=>s.target===this.Jd);r&&this._b(r.contentRect.width,r.contentRect.height)}),this.ib.observe(this.Jd,{box:"border-box"}),!0)}pb(){this.ib!==null&&this.ib.disconnect(),this.ib=null}}function Vx(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function LW(t){return function(e){return e.open!==void 0}(t)||function(e){return e.value!==void 0}(t)}function ZA(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(r[s[i]]=t[s[i]])}return r}function f2(t,e,r,s){const i=r.value,a={ee:e,ot:t,Vt:[i,i,i,i],zb:s};return r.color!==void 0&&(a.V=r.color),a}function MW(t,e,r,s){const i=r.value,a={ee:e,ot:t,Vt:[i,i,i,i],zb:s};return r.lineColor!==void 0&&(a.lt=r.lineColor),r.topColor!==void 0&&(a.Ps=r.topColor),r.bottomColor!==void 0&&(a.Rs=r.bottomColor),a}function FW(t,e,r,s){const i=r.value,a={ee:e,ot:t,Vt:[i,i,i,i],zb:s};return r.topLineColor!==void 0&&(a.Re=r.topLineColor),r.bottomLineColor!==void 0&&(a.De=r.bottomLineColor),r.topFillColor1!==void 0&&(a.ke=r.topFillColor1),r.topFillColor2!==void 0&&(a.ye=r.topFillColor2),r.bottomFillColor1!==void 0&&(a.Ce=r.bottomFillColor1),r.bottomFillColor2!==void 0&&(a.Te=r.bottomFillColor2),a}function DW(t,e,r,s){const i={ee:e,ot:t,Vt:[r.open,r.high,r.low,r.close],zb:s};return r.color!==void 0&&(i.V=r.color),i}function BW(t,e,r,s){const i={ee:e,ot:t,Vt:[r.open,r.high,r.low,r.close],zb:s};return r.color!==void 0&&(i.V=r.color),r.borderColor!==void 0&&(i.Ot=r.borderColor),r.wickColor!==void 0&&(i.Xh=r.wickColor),i}function $W(t,e,r,s,i){const a=ns(i)(r),o=Math.max(...a),l=Math.min(...a),c=a[a.length-1],d=[c,o,l,c],u=r,{time:h,color:p}=u;return{ee:e,ot:t,Vt:d,zb:s,$e:ZA(u,["time","color"]),V:p}}function bp(t){return t.Vt!==void 0}function m2(t,e){return e.customValues!==void 0&&(t.jb=e.customValues),t}function _o(t){return(e,r,s,i,a,o)=>function(l,c){return c?c(l):(d=l).open===void 0&&d.value===void 0;var d}(s,o)?m2({ot:e,ee:r,zb:i},s):m2(t(e,r,s,i,a),s)}function g2(t){return{Candlestick:_o(BW),Bar:_o(DW),Area:_o(MW),Baseline:_o(FW),Histogram:_o(f2),Line:_o(f2),Custom:_o($W)}[t]}function x2(t){return{ee:0,Hb:new Map,la:t}}function y2(t,e){if(t!==void 0&&t.length!==0)return{$b:e.key(t[0].ot),Ub:e.key(t[t.length-1].ot)}}function v2(t){let e;return t.forEach(r=>{e===void 0&&(e=r.zb)}),ns(e)}class UW{constructor(e){this.qb=new Map,this.Yb=new Map,this.Zb=new Map,this.Xb=[],this.q_=e}S(){this.qb.clear(),this.Yb.clear(),this.Zb.clear(),this.Xb=[]}Kb(e,r){let s=this.qb.size!==0,i=!1;const a=this.Yb.get(e);if(a!==void 0)if(this.Yb.size===1)s=!1,i=!0,this.qb.clear();else for(const c of this.Xb)c.pointData.Hb.delete(e)&&(i=!0);let o=[];if(r.length!==0){const c=r.map(f=>f.time),d=this.q_.createConverterToInternalObj(r),u=g2(e.Qh()),h=e.Ca(),p=e.Ta();o=r.map((f,m)=>{const v=d(f.time),x=this.q_.key(v);let b=this.qb.get(x);b===void 0&&(b=x2(v),this.qb.set(x,b),i=!0);const y=u(v,b.ee,f,c[m],h,p);return b.Hb.set(e,y),y})}s&&this.Gb(),this.Jb(e,o);let l=-1;if(i){const c=[];this.qb.forEach(d=>{c.push({timeWeight:0,time:d.la,pointData:d,originalTime:v2(d.Hb)})}),c.sort((d,u)=>this.q_.key(d.time)-this.q_.key(u.time)),l=this.Qb(c)}return this.tw(e,l,function(c,d,u){const h=y2(c,u),p=y2(d,u);if(h!==void 0&&p!==void 0)return{ta:h.Ub>=p.Ub&&h.$b>=p.$b}}(this.Yb.get(e),a,this.q_))}vd(e){return this.Kb(e,[])}iw(e,r){const s=r;(function(v){v.zb===void 0&&(v.zb=v.time)})(s),this.q_.preprocessData(r);const i=this.q_.createConverterToInternalObj([r])(r.time),a=this.Zb.get(e);if(a!==void 0&&this.q_.key(i)<this.q_.key(a))throw new Error(`Cannot update oldest data, last time=${a}, new time=${i}`);let o=this.qb.get(this.q_.key(i));const l=o===void 0;o===void 0&&(o=x2(i),this.qb.set(this.q_.key(i),o));const c=g2(e.Qh()),d=e.Ca(),u=e.Ta(),h=c(i,o.ee,r,s.zb,d,u);o.Hb.set(e,h),this.nw(e,h);const p={ta:bp(h)};if(!l)return this.tw(e,-1,p);const f={timeWeight:0,time:o.la,pointData:o,originalTime:v2(o.Hb)},m=gh(this.Xb,this.q_.key(f.time),(v,x)=>this.q_.key(v.time)<x);this.Xb.splice(m,0,f);for(let v=m;v<this.Xb.length;++v)Hx(this.Xb[v].pointData,v);return this.q_.fillWeightsForPoints(this.Xb,m),this.tw(e,m,p)}nw(e,r){let s=this.Yb.get(e);s===void 0&&(s=[],this.Yb.set(e,s));const i=s.length!==0?s[s.length-1]:null;i===null||this.q_.key(r.ot)>this.q_.key(i.ot)?bp(r)&&s.push(r):bp(r)?s[s.length-1]=r:s.splice(-1,1),this.Zb.set(e,r.ot)}Jb(e,r){r.length!==0?(this.Yb.set(e,r.filter(bp)),this.Zb.set(e,r[r.length-1].ot)):(this.Yb.delete(e),this.Zb.delete(e))}Gb(){for(const e of this.Xb)e.pointData.Hb.size===0&&this.qb.delete(this.q_.key(e.time))}Qb(e){let r=-1;for(let s=0;s<this.Xb.length&&s<e.length;++s){const i=this.Xb[s],a=e[s];if(this.q_.key(i.time)!==this.q_.key(a.time)){r=s;break}a.timeWeight=i.timeWeight,Hx(a.pointData,s)}if(r===-1&&this.Xb.length!==e.length&&(r=Math.min(this.Xb.length,e.length)),r===-1)return-1;for(let s=r;s<e.length;++s)Hx(e[s].pointData,s);return this.q_.fillWeightsForPoints(e,r),this.Xb=e,r}sw(){if(this.Yb.size===0)return null;let e=0;return this.Yb.forEach(r=>{r.length!==0&&(e=Math.max(e,r[r.length-1].ee))}),e}tw(e,r,s){const i={ew:new Map,St:{Eu:this.sw()}};if(r!==-1)this.Yb.forEach((a,o)=>{i.ew.set(o,{$e:a,rw:o===e?s:void 0})}),this.Yb.has(e)||i.ew.set(e,{$e:[],rw:s}),i.St.hw=this.Xb,i.St.lw=r;else{const a=this.Yb.get(e);i.ew.set(e,{$e:a||[],rw:s})}return i}}function Hx(t,e){t.ee=e,t.Hb.forEach(r=>{r.ee=e})}function Zw(t){const e={value:t.Vt[3],time:t.zb};return t.jb!==void 0&&(e.customValues=t.jb),e}function b2(t){const e=Zw(t);return t.V!==void 0&&(e.color=t.V),e}function VW(t){const e=Zw(t);return t.lt!==void 0&&(e.lineColor=t.lt),t.Ps!==void 0&&(e.topColor=t.Ps),t.Rs!==void 0&&(e.bottomColor=t.Rs),e}function HW(t){const e=Zw(t);return t.Re!==void 0&&(e.topLineColor=t.Re),t.De!==void 0&&(e.bottomLineColor=t.De),t.ke!==void 0&&(e.topFillColor1=t.ke),t.ye!==void 0&&(e.topFillColor2=t.ye),t.Ce!==void 0&&(e.bottomFillColor1=t.Ce),t.Te!==void 0&&(e.bottomFillColor2=t.Te),e}function e4(t){const e={open:t.Vt[0],high:t.Vt[1],low:t.Vt[2],close:t.Vt[3],time:t.zb};return t.jb!==void 0&&(e.customValues=t.jb),e}function zW(t){const e=e4(t);return t.V!==void 0&&(e.color=t.V),e}function XW(t){const e=e4(t),{V:r,Ot:s,Xh:i}=t;return r!==void 0&&(e.color=r),s!==void 0&&(e.borderColor=s),i!==void 0&&(e.wickColor=i),e}function Dv(t){return{Area:VW,Line:b2,Baseline:HW,Histogram:b2,Bar:zW,Candlestick:XW,Custom:WW}[t]}function WW(t){const e=t.zb;return Object.assign(Object.assign({},t.$e),{time:e})}const qW={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},KW={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},GW={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Vw,attributionLogo:!0},zx={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},YW={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},JW={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:Vw,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function w2(){return{width:0,height:0,autoSize:!1,layout:GW,crosshair:qW,grid:KW,overlayPriceScales:Object.assign({},zx),leftPriceScale:Object.assign(Object.assign({},zx),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},zx),{visible:!0}),timeScale:YW,watermark:JW,localization:{locale:Fc?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class QW{constructor(e,r){this.aw=e,this.ow=r}applyOptions(e){this.aw.$t().$c(this.ow,e)}options(){return this.Li().W()}width(){return zm(this.ow)?this.aw.Mb(this.ow):0}Li(){return He(this.aw.$t().Uc(this.ow)).Dt}}function _2(t,e,r){const s=ZA(t,["time","originalTime"]),i=Object.assign({time:e},s);return r!==void 0&&(i.originalTime=r),i}const ZW={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class e7{constructor(e){this.Nh=e}applyOptions(e){this.Nh.$h(e)}options(){return this.Nh.W()}_w(){return this.Nh}}class t7{constructor(e,r,s,i,a){this.uw=new vr,this.Es=e,this.cw=r,this.dw=s,this.q_=a,this.fw=i}S(){this.uw.S()}priceFormatter(){return this.Es.ba()}priceToCoordinate(e){const r=this.Es.Ct();return r===null?null:this.Es.Dt().Rt(e,r.Vt)}coordinateToPrice(e){const r=this.Es.Ct();return r===null?null:this.Es.Dt().pn(e,r.Vt)}barsInLogicalRange(e){if(e===null)return null;const r=new wc(new ou(e.from,e.to)).lu(),s=this.Es.In();if(s.Ni())return null;const i=s.ll(r.Os(),1),a=s.ll(r.ui(),-1),o=He(s.el()),l=He(s.An());if(i!==null&&a!==null&&i.ee>a.ee)return{barsBefore:e.from-o,barsAfter:l-e.to};const c={barsBefore:i===null||i.ee===o?e.from-o:i.ee-o,barsAfter:a===null||a.ee===l?l-e.to:l-a.ee};return i!==null&&a!==null&&(c.from=i.zb,c.to=a.zb),c}setData(e){this.q_,this.Es.Qh(),this.cw.pw(this.Es,e),this.mw("full")}update(e){this.Es.Qh(),this.cw.bw(this.Es,e),this.mw("update")}dataByIndex(e,r){const s=this.Es.In().ll(e,r);return s===null?null:Dv(this.seriesType())(s)}data(){const e=Dv(this.seriesType());return this.Es.In().ne().map(r=>e(r))}subscribeDataChanged(e){this.uw.l(e)}unsubscribeDataChanged(e){this.uw.v(e)}setMarkers(e){this.q_;const r=e.map(s=>_2(s,this.q_.convertHorzItemToInternal(s.time),s.time));this.Es.na(r)}markers(){return this.Es.sa().map(e=>_2(e,e.originalTime,void 0))}applyOptions(e){this.Es.$h(e)}options(){return ki(this.Es.W())}priceScale(){return this.dw.priceScale(this.Es.Dt().Pa())}createPriceLine(e){const r=Ln(ki(ZW),e),s=this.Es.ea(r);return new e7(s)}removePriceLine(e){this.Es.ra(e._w())}seriesType(){return this.Es.Qh()}attachPrimitive(e){this.Es.ka(e),e.attached&&e.attached({chart:this.fw,series:this,requestUpdate:()=>this.Es.$t().Kl()})}detachPrimitive(e){this.Es.ya(e),e.detached&&e.detached()}mw(e){this.uw.M()&&this.uw.m(e)}}class r7{constructor(e,r,s){this.ww=new vr,this.mu=new vr,this.Om=new vr,this.$i=e,this.yl=e.St(),this.ab=r,this.yl.nc().l(this.gw.bind(this)),this.yl.sc().l(this.Mw.bind(this)),this.ab.Nm().l(this.xw.bind(this)),this.q_=s}S(){this.yl.nc().p(this),this.yl.sc().p(this),this.ab.Nm().p(this),this.ww.S(),this.mu.S(),this.Om.S()}scrollPosition(){return this.yl.Hu()}scrollToPosition(e,r){r?this.yl.Ju(e,1e3):this.$i.Jn(e)}scrollToRealTime(){this.yl.Gu()}getVisibleRange(){const e=this.yl.Vu();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const r={from:this.q_.convertHorzItemToInternal(e.from),to:this.q_.convertHorzItemToInternal(e.to)},s=this.yl.Iu(r);this.$i.pd(s)}getVisibleLogicalRange(){const e=this.yl.Du();return e===null?null:{from:e.Os(),to:e.ui()}}setVisibleLogicalRange(e){Wa(e.from<=e.to,"The from index cannot be after the to index."),this.$i.pd(e)}resetTimeScale(){this.$i.Kn()}fitContent(){this.$i.hc()}logicalToCoordinate(e){const r=this.$i.St();return r.Ni()?null:r.It(e)}coordinateToLogical(e){return this.yl.Ni()?null:this.yl.Nu(e)}timeToCoordinate(e){const r=this.q_.convertHorzItemToInternal(e),s=this.yl.Va(r,!1);return s===null?null:this.yl.It(s)}coordinateToTime(e){const r=this.$i.St(),s=r.Nu(e),i=r.Ui(s);return i===null?null:i.originalTime}width(){return this.ab.um().width}height(){return this.ab.um().height}subscribeVisibleTimeRangeChange(e){this.ww.l(e)}unsubscribeVisibleTimeRangeChange(e){this.ww.v(e)}subscribeVisibleLogicalRangeChange(e){this.mu.l(e)}unsubscribeVisibleLogicalRangeChange(e){this.mu.v(e)}subscribeSizeChange(e){this.Om.l(e)}unsubscribeSizeChange(e){this.Om.v(e)}applyOptions(e){this.yl.$h(e)}options(){return Object.assign(Object.assign({},ki(this.yl.W())),{barSpacing:this.yl.le()})}gw(){this.ww.M()&&this.ww.m(this.getVisibleRange())}Mw(){this.mu.M()&&this.mu.m(this.getVisibleLogicalRange())}xw(e){this.Om.m(e.width,e.height)}}function s7(t){if(t===void 0||t.type==="custom")return;const e=t;e.minMove!==void 0&&e.precision===void 0&&(e.precision=function(r){if(r>=1)return 0;let s=0;for(;s<8;s++){const i=Math.round(r);if(Math.abs(i-r)<1e-8)return s;r*=10}return s}(e.minMove))}function N2(t){return function(e){if(up(e.handleScale)){const s=e.handleScale;e.handleScale={axisDoubleClickReset:{time:s,price:s},axisPressedMouseMove:{time:s,price:s},mouseWheel:s,pinch:s}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:s,axisDoubleClickReset:i}=e.handleScale;up(s)&&(e.handleScale.axisPressedMouseMove={time:s,price:s}),up(i)&&(e.handleScale.axisDoubleClickReset={time:i,price:i})}const r=e.handleScroll;up(r)&&(e.handleScroll={horzTouchDrag:r,vertTouchDrag:r,mouseWheel:r,pressedMouseMove:r})}(t),t}class n7{constructor(e,r,s){this.Sw=new Map,this.kw=new Map,this.yw=new vr,this.Cw=new vr,this.Tw=new vr,this.Pw=new UW(r);const i=s===void 0?ki(w2()):Ln(ki(w2()),N2(s));this.q_=r,this.aw=new IW(e,i,r),this.aw.lm().l(o=>{this.yw.M()&&this.yw.m(this.Rw(o()))},this),this.aw.am().l(o=>{this.Cw.M()&&this.Cw.m(this.Rw(o()))},this),this.aw.Xc().l(o=>{this.Tw.M()&&this.Tw.m(this.Rw(o()))},this);const a=this.aw.$t();this.Dw=new r7(a,this.aw.fb(),this.q_)}remove(){this.aw.lm().p(this),this.aw.am().p(this),this.aw.Xc().p(this),this.Dw.S(),this.aw.S(),this.Sw.clear(),this.kw.clear(),this.yw.S(),this.Cw.S(),this.Tw.S(),this.Pw.S()}resize(e,r,s){this.autoSizeActive()||this.aw._b(e,r,s)}addCustomSeries(e,r){const s=dc(e),i=Object.assign(Object.assign({},kA),s.defaultOptions());return this.Vw("Custom",i,r,s)}addAreaSeries(e){return this.Vw("Area",UX,e)}addBaselineSeries(e){return this.Vw("Baseline",VX,e)}addBarSeries(e){return this.Vw("Bar",BX,e)}addCandlestickSeries(e={}){return function(r){r.borderColor!==void 0&&(r.borderUpColor=r.borderColor,r.borderDownColor=r.borderColor),r.wickColor!==void 0&&(r.wickUpColor=r.wickColor,r.wickDownColor=r.wickColor)}(e),this.Vw("Candlestick",DX,e)}addHistogramSeries(e){return this.Vw("Histogram",HX,e)}addLineSeries(e){return this.Vw("Line",$X,e)}removeSeries(e){const r=ns(this.Sw.get(e)),s=this.Pw.vd(r);this.aw.$t().vd(r),this.Ow(s),this.Sw.delete(e),this.kw.delete(r)}pw(e,r){this.Ow(this.Pw.Kb(e,r))}bw(e,r){this.Ow(this.Pw.iw(e,r))}subscribeClick(e){this.yw.l(e)}unsubscribeClick(e){this.yw.v(e)}subscribeCrosshairMove(e){this.Tw.l(e)}unsubscribeCrosshairMove(e){this.Tw.v(e)}subscribeDblClick(e){this.Cw.l(e)}unsubscribeDblClick(e){this.Cw.v(e)}priceScale(e){return new QW(this.aw,e)}timeScale(){return this.Dw}applyOptions(e){this.aw.$h(N2(e))}options(){return this.aw.W()}takeScreenshot(){return this.aw.wb()}autoSizeActive(){return this.aw.kb()}chartElement(){return this.aw.yb()}paneSize(){const e=this.aw.Tb();return{height:e.height,width:e.width}}setCrosshairPosition(e,r,s){const i=this.Sw.get(s);if(i===void 0)return;const a=this.aw.$t().dr(i);a!==null&&this.aw.$t().ad(e,r,a)}clearCrosshairPosition(){this.aw.$t().od(!0)}Vw(e,r,s={},i){s7(s.priceFormat);const a=Ln(ki(AA),ki(r),s),o=this.aw.$t().dd(e,a,i),l=new t7(o,this,this,this,this.q_);return this.Sw.set(l,o),this.kw.set(o,l),l}Ow(e){const r=this.aw.$t();r._d(e.St.Eu,e.St.hw,e.St.lw),e.ew.forEach((s,i)=>i.J(s.$e,s.rw)),r.Wu()}Bw(e){return ns(this.kw.get(e))}Rw(e){const r=new Map;e.Nb.forEach((i,a)=>{const o=a.Qh(),l=Dv(o)(i);if(o!=="Custom")Wa(LW(l));else{const c=a.Ta();Wa(!c||c(l)===!1)}r.set(this.Bw(a),l)});const s=e.Eb!==void 0&&this.kw.has(e.Eb)?this.Bw(e.Eb):void 0;return{time:e.zb,logical:e.ee,point:e.Lb,hoveredSeries:s,hoveredObjectId:e.Fb,seriesData:r,sourceEvent:e.Wb}}}function i7(t,e,r){let s;if(mh(t)){const a=document.getElementById(t);Wa(a!==null,`Cannot find element in DOM with id=${t}`),s=a}else s=t;const i=new n7(s,e,r);return e.setOptions(i.options()),i}function Uu(t,e){return i7(t,new l2,l2.Id(e))}Object.assign(Object.assign({},AA),kA);const a7="TokenImageCache",o7=1,Gs="images",S2=7*24*60*60*1e3;class l7{constructor(){this.db=null,this.memoryCache=new Map,this.initDB()}async initDB(){return new Promise((e,r)=>{const s=indexedDB.open(a7,o7);s.onerror=()=>{console.warn("IndexedDB not available, using memory cache only"),e(null)},s.onsuccess=i=>{this.db=i.target.result,e(this.db)},s.onupgradeneeded=i=>{const a=i.target.result;a.objectStoreNames.contains(Gs)||a.createObjectStore(Gs,{keyPath:"url"}).createIndex("timestamp","timestamp",{unique:!1})}})}async get(e){return this.memoryCache.has(e)?this.memoryCache.get(e):this.db?new Promise(r=>{try{const a=this.db.transaction([Gs],"readonly").objectStore(Gs).get(e);a.onsuccess=()=>{const o=a.result;o?Date.now()-o.timestamp<S2?(this.memoryCache.set(e,o.data),r(o.data)):(this.delete(e),r(null)):r(null)},a.onerror=()=>r(null)}catch(s){console.warn("Error reading from cache:",s),r(null)}}):null}async set(e,r){if(this.memoryCache.set(e,r),!!this.db)return new Promise(s=>{try{const o=this.db.transaction([Gs],"readwrite").objectStore(Gs).put({url:e,data:r,timestamp:Date.now()});o.onsuccess=()=>s(!0),o.onerror=()=>s(!1)}catch(i){console.warn("Error writing to cache:",i),s(!1)}})}async delete(e){if(this.memoryCache.delete(e),!!this.db)return new Promise(r=>{try{const a=this.db.transaction([Gs],"readwrite").objectStore(Gs).delete(e);a.onsuccess=()=>r(!0),a.onerror=()=>r(!1)}catch{r(!1)}})}async clear(){if(this.memoryCache.clear(),!!this.db)return new Promise(e=>{try{const i=this.db.transaction([Gs],"readwrite").objectStore(Gs).clear();i.onsuccess=()=>e(!0),i.onerror=()=>e(!1)}catch{e(!1)}})}async cleanOldEntries(){if(this.db)return new Promise(e=>{try{const r=Date.now()-S2,a=this.db.transaction([Gs],"readwrite").objectStore(Gs).index("timestamp"),o=IDBKeyRange.upperBound(r),l=a.openCursor(o);l.onsuccess=c=>{const d=c.target.result;d?(d.delete(),d.continue()):e(!0)},l.onerror=()=>e(!1)}catch{e(!1)}})}}const Bv=new l7,j2=t=>{if(!t)return null;if(t.startsWith("ipfs://"))return t.replace("ipfs://","");const e=t.match(/\/ipfs\/([a-zA-Z0-9]+)/);if(e)return e[1];const r=t.match(/\/(Qm[a-zA-Z0-9]{44}|bafyb[a-zA-Z0-9]{50,})/);return r?r[1]:t.startsWith("http")?null:t},c7=t=>t?t.startsWith("http://")?t.replace("http://","https://"):t:null,wp=["https://gateway.pinata.cloud/ipfs/","https://ipfs.io/ipfs/","https://cloudflare-ipfs.com/ipfs/","https://dweb.link/ipfs/"];function d7({token:t,size:e="md",className:r=""}){const s=`token-img-${t.id}`,[i,a]=T.useState(!1),[o,l]=T.useState(!1),[c,d]=T.useState(0),[u,h]=T.useState(0),p=T.useRef(null),[f,m]=T.useState(null),v={sm:"w-8 h-8 min-w-[2rem] min-h-[2rem] text-sm",md:"w-12 h-12 min-w-[3rem] min-h-[3rem] text-xl",lg:"w-16 h-16 min-w-[4rem] min-h-[4rem] text-2xl",xl:"w-20 h-20 min-w-[5rem] min-h-[5rem] text-3xl","2xl":"w-24 h-24 min-w-[6rem] min-h-[6rem] text-4xl","3xl":"w-32 h-32 min-w-[8rem] min-h-[8rem] text-6xl"},x=v[e]||v.md;T.useEffect(()=>{if(!t.image_url){a(!0);return}(async()=>{const g=await Bv.get(s);if(g){m(g),l(!0),a(!1);return}if(p.current!==t.image_url){a(!1),l(!1),d(0),h(0),p.current=t.image_url;let w=c7(t.image_url);if(w.includes("gateway.pinata.cloud")||w.includes("ipfs.io")||w.includes("cloudflare-ipfs.com")||w.includes("dweb.link"))m(w);else{const S=j2(t.image_url);S&&(w=`${wp[0]}${S}`),m(w)}}})()},[t.image_url,t.id,s]);const b=()=>{console.error("Image load error for token:",t.token_name,"URL:",f,"Gateway:",c,"Retry:",u);const y=j2(t.image_url);if(y&&c<wp.length-1){console.log("Trying next gateway...");const g=c+1;d(g),m(`${wp[g]}${y}`),h(0)}else u<1?(console.log("Retrying from first gateway..."),h(g=>g+1),y&&(d(0),m(`${wp[0]}${y}`))):(console.error("All gateways failed for:",t.token_name),a(!0))};return f&&!i?n.jsx("div",{className:`relative inline-block ${x} flex-shrink-0`,children:n.jsxs("div",{className:"relative w-full h-full rounded-full overflow-hidden border-2 border-purple-500 bg-gradient-to-br from-purple-500 to-purple-700",children:[!o&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white font-bold",children:t.token_name[0]}),n.jsx("img",{src:f,alt:t.token_name,className:`w-full h-full object-cover transition-opacity duration-200 ${o?"opacity-100":"opacity-0"}`,onLoad:async()=>{await Bv.set(s,f),l(!0)},onError:b,loading:"lazy",decoding:"async",crossOrigin:"anonymous"},`${t.id}-${c}-${u}`)]})}):n.jsx("div",{className:`${x} rounded-full bg-gradient-to-br from-purple-500 to-purple-700 flex items-center justify-center text-white font-bold ${r} flex-shrink-0 aspect-square`,children:t.token_name[0]})}const Ht=T.memo(d7,(t,e)=>t.token.id===e.token.id&&t.token.image_url===e.token.image_url&&t.size===e.size&&t.className===e.className),$r=async({userAddress:t,actionType:e,description:r,details:s={},txHash:i=null,tokenId:a=null})=>{try{const{error:o}=await le.from("activity_logs").insert([{user_address:t,action_type:e,description:r,details:s,tx_hash:i,token_id:a}]);o&&console.error("Error logging activity:",o)}catch(o){console.error("Error logging activity:",o)}},Ur={TOKEN_CREATED:"token_created",TOKEN_SENT:"token_sent",TOKEN_RECEIVED:"token_received",TRUSTLINE_CREATED:"trustline_created",SWAP_EXECUTED:"swap_executed",AMM_CREATED:"amm_created",WALLET_CONNECTED:"wallet_connected",WALLET_DISCONNECTED:"wallet_disconnected",BOT_CREATED:"bot_created",BOT_TRADE:"bot_trade",FAILED_TRADE:"failed_trade",START_EARNING:"start_earning",STOP_EARNING:"stop_earning",CLAIM_EARNINGS:"claim_earnings"},E2=.01;function e_({token:t,balance:e,wallet:r,onClose:s,onSuccess:i}){const[a,o]=T.useState(""),[l,c]=T.useState(""),[d,u]=T.useState(!1),h=async()=>{if(!a||!l){ie.error("Please fill in all fields");return}if(parseFloat(l)<=0){ie.error("Amount must be greater than 0");return}if(parseFloat(l)>parseFloat(e)){ie.error("Insufficient balance");return}if(!Ve.isValidClassicAddress(a)){ie.error("Invalid recipient address");return}u(!0);try{const p=new Ve.Client("wss://s.altnet.rippletest.net:51233");await p.connect();const f=Ve.Wallet.fromSeed(r.seed),m={TransactionType:"Payment",Account:r.address,Destination:a,Amount:{currency:t.currency_code,value:l,issuer:t.issuer_address}},v=await p.autofill(m),x=f.sign(v),b=await p.submitAndWait(x.tx_blob);if(b.result.meta.TransactionResult==="tesSUCCESS")await $r({userAddress:r.address,actionType:Ur.TOKEN_SENT,description:`Sent ${l} ${t.token_name} to ${a.slice(0,8)}...`,details:{amount:l,token_name:t.token_name,from:r.address,to:a},txHash:b.result.hash,tokenId:t.id}),ie.success(`Sent ${l} ${t.token_name} successfully! Fee: ${E2} XRP`),await p.disconnect(),i(),s();else throw new Error("Transaction failed: "+b.result.meta.TransactionResult)}catch(p){console.error("Send error:",p),ie.error("Failed to send tokens: "+p.message)}finally{u(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:s,children:n.jsxs("div",{className:"glass rounded-lg max-w-lg w-full p-6",onClick:p=>p.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h3",{className:"text-2xl font-bold text-purple-200",children:["Send ",t.token_name]}),n.jsx("button",{onClick:s,className:"text-purple-400 hover:text-purple-300 text-2xl",children:"×"})]}),n.jsxs("div",{className:"flex items-center gap-4 mb-6 p-4 glass rounded-lg",children:[n.jsx(Ht,{token:t,size:"lg"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-purple-200 font-bold",children:t.token_name}),n.jsxs("div",{className:"text-purple-400 text-sm",children:["Available: ",parseFloat(e).toFixed(4)]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:"Recipient Address"}),n.jsx("input",{type:"text",value:a,onChange:p=>o(p.target.value),placeholder:"rXXXXXXXXXXXXXXXXXXXXXXXXXXXX",className:"input w-full text-purple-200 font-mono text-sm"}),n.jsx("div",{className:"text-purple-400 text-xs mt-1",children:"Enter the XRPL address to send to"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:"Amount"}),n.jsx("input",{type:"number",value:l,onChange:p=>c(p.target.value),placeholder:"0.00",step:"0.0001",className:"input w-full text-purple-200 text-lg"}),n.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[n.jsx("span",{className:"text-purple-400",children:"Min: 0.0001"}),n.jsxs("button",{onClick:()=>c(e),className:"text-purple-400 hover:text-purple-300",children:["Max: ",parseFloat(e).toFixed(4)]})]})]}),n.jsxs("div",{className:"glass rounded-lg p-4 bg-blue-500/10 border border-blue-500/30",children:[n.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[n.jsx("span",{className:"text-blue-300",children:"Network Fee"}),n.jsxs("span",{className:"text-blue-200 font-bold",children:[E2," XRP"]})]}),n.jsx("div",{className:"text-blue-400 text-xs",children:"Platform fee for processing the transaction"})]}),n.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:[n.jsx("div",{className:"text-yellow-200 font-medium mb-1",children:"⚠️ Important"}),n.jsx("p",{className:"text-yellow-300 text-xs",children:"Double-check the recipient address. Transactions cannot be reversed once confirmed."})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:h,disabled:d||!a||!l,className:"flex-1 btn-primary text-white py-3 rounded-lg font-medium disabled:opacity-50",children:d?"⏳ Sending...":`📤 Send ${l||"0"} ${t.token_name}`}),n.jsx("button",{onClick:s,disabled:d,className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium disabled:opacity-50",children:"Cancel"})]})]})]})})}var u7=Object.defineProperty,Uf=Object.getOwnPropertySymbols,t4=Object.prototype.hasOwnProperty,r4=Object.prototype.propertyIsEnumerable,T2=(t,e,r)=>e in t?u7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,h7=(t,e)=>{for(var r in e||(e={}))t4.call(e,r)&&T2(t,r,e[r]);if(Uf)for(var r of Uf(e))r4.call(e,r)&&T2(t,r,e[r]);return t},p7=(t,e)=>{var r={};for(var s in t)t4.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&Uf)for(var s of Uf(t))e.indexOf(s)<0&&r4.call(t,s)&&(r[s]=t[s]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var cl;(t=>{const e=class{constructor(c,d,u,h){if(this.version=c,this.errorCorrectionLevel=d,this.modules=[],this.isFunction=[],c<e.MIN_VERSION||c>e.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=c*4+17;let p=[];for(let m=0;m<this.size;m++)p.push(!1);for(let m=0;m<this.size;m++)this.modules.push(p.slice()),this.isFunction.push(p.slice());this.drawFunctionPatterns();const f=this.addEccAndInterleave(u);if(this.drawCodewords(f),h==-1){let m=1e9;for(let v=0;v<8;v++){this.applyMask(v),this.drawFormatBits(v);const x=this.getPenaltyScore();x<m&&(h=v,m=x),this.applyMask(v)}}a(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(c,d){const u=t.QrSegment.makeSegments(c);return e.encodeSegments(u,d)}static encodeBinary(c,d){const u=t.QrSegment.makeBytes(c);return e.encodeSegments([u],d)}static encodeSegments(c,d,u=1,h=40,p=-1,f=!0){if(!(e.MIN_VERSION<=u&&u<=h&&h<=e.MAX_VERSION)||p<-1||p>7)throw new RangeError("Invalid value");let m,v;for(m=u;;m++){const g=e.getNumDataCodewords(m,d)*8,w=l.getTotalBits(c,m);if(w<=g){v=w;break}if(m>=h)throw new RangeError("Data too long")}for(const g of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])f&&v<=e.getNumDataCodewords(m,g)*8&&(d=g);let x=[];for(const g of c){s(g.mode.modeBits,4,x),s(g.numChars,g.mode.numCharCountBits(m),x);for(const w of g.getData())x.push(w)}a(x.length==v);const b=e.getNumDataCodewords(m,d)*8;a(x.length<=b),s(0,Math.min(4,b-x.length),x),s(0,(8-x.length%8)%8,x),a(x.length%8==0);for(let g=236;x.length<b;g^=253)s(g,8,x);let y=[];for(;y.length*8<x.length;)y.push(0);return x.forEach((g,w)=>y[w>>>3]|=g<<7-(w&7)),new e(m,d,y,p)}getModule(c,d){return 0<=c&&c<this.size&&0<=d&&d<this.size&&this.modules[d][c]}getModules(){return this.modules}drawFunctionPatterns(){for(let u=0;u<this.size;u++)this.setFunctionModule(6,u,u%2==0),this.setFunctionModule(u,6,u%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const c=this.getAlignmentPatternPositions(),d=c.length;for(let u=0;u<d;u++)for(let h=0;h<d;h++)u==0&&h==0||u==0&&h==d-1||u==d-1&&h==0||this.drawAlignmentPattern(c[u],c[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(c){const d=this.errorCorrectionLevel.formatBits<<3|c;let u=d;for(let p=0;p<10;p++)u=u<<1^(u>>>9)*1335;const h=(d<<10|u)^21522;a(h>>>15==0);for(let p=0;p<=5;p++)this.setFunctionModule(8,p,i(h,p));this.setFunctionModule(8,7,i(h,6)),this.setFunctionModule(8,8,i(h,7)),this.setFunctionModule(7,8,i(h,8));for(let p=9;p<15;p++)this.setFunctionModule(14-p,8,i(h,p));for(let p=0;p<8;p++)this.setFunctionModule(this.size-1-p,8,i(h,p));for(let p=8;p<15;p++)this.setFunctionModule(8,this.size-15+p,i(h,p));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let c=this.version;for(let u=0;u<12;u++)c=c<<1^(c>>>11)*7973;const d=this.version<<12|c;a(d>>>18==0);for(let u=0;u<18;u++){const h=i(d,u),p=this.size-11+u%3,f=Math.floor(u/3);this.setFunctionModule(p,f,h),this.setFunctionModule(f,p,h)}}drawFinderPattern(c,d){for(let u=-4;u<=4;u++)for(let h=-4;h<=4;h++){const p=Math.max(Math.abs(h),Math.abs(u)),f=c+h,m=d+u;0<=f&&f<this.size&&0<=m&&m<this.size&&this.setFunctionModule(f,m,p!=2&&p!=4)}}drawAlignmentPattern(c,d){for(let u=-2;u<=2;u++)for(let h=-2;h<=2;h++)this.setFunctionModule(c+h,d+u,Math.max(Math.abs(h),Math.abs(u))!=1)}setFunctionModule(c,d,u){this.modules[d][c]=u,this.isFunction[d][c]=!0}addEccAndInterleave(c){const d=this.version,u=this.errorCorrectionLevel;if(c.length!=e.getNumDataCodewords(d,u))throw new RangeError("Invalid argument");const h=e.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][d],p=e.ECC_CODEWORDS_PER_BLOCK[u.ordinal][d],f=Math.floor(e.getNumRawDataModules(d)/8),m=h-f%h,v=Math.floor(f/h);let x=[];const b=e.reedSolomonComputeDivisor(p);for(let g=0,w=0;g<h;g++){let S=c.slice(w,w+v-p+(g<m?0:1));w+=S.length;const _=e.reedSolomonComputeRemainder(S,b);g<m&&S.push(0),x.push(S.concat(_))}let y=[];for(let g=0;g<x[0].length;g++)x.forEach((w,S)=>{(g!=v-p||S>=m)&&y.push(w[g])});return a(y.length==f),y}drawCodewords(c){if(c.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let d=0;for(let u=this.size-1;u>=1;u-=2){u==6&&(u=5);for(let h=0;h<this.size;h++)for(let p=0;p<2;p++){const f=u-p,v=(u+1&2)==0?this.size-1-h:h;!this.isFunction[v][f]&&d<c.length*8&&(this.modules[v][f]=i(c[d>>>3],7-(d&7)),d++)}}a(d==c.length*8)}applyMask(c){if(c<0||c>7)throw new RangeError("Mask value out of range");for(let d=0;d<this.size;d++)for(let u=0;u<this.size;u++){let h;switch(c){case 0:h=(u+d)%2==0;break;case 1:h=d%2==0;break;case 2:h=u%3==0;break;case 3:h=(u+d)%3==0;break;case 4:h=(Math.floor(u/3)+Math.floor(d/2))%2==0;break;case 5:h=u*d%2+u*d%3==0;break;case 6:h=(u*d%2+u*d%3)%2==0;break;case 7:h=((u+d)%2+u*d%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[d][u]&&h&&(this.modules[d][u]=!this.modules[d][u])}}getPenaltyScore(){let c=0;for(let p=0;p<this.size;p++){let f=!1,m=0,v=[0,0,0,0,0,0,0];for(let x=0;x<this.size;x++)this.modules[p][x]==f?(m++,m==5?c+=e.PENALTY_N1:m>5&&c++):(this.finderPenaltyAddHistory(m,v),f||(c+=this.finderPenaltyCountPatterns(v)*e.PENALTY_N3),f=this.modules[p][x],m=1);c+=this.finderPenaltyTerminateAndCount(f,m,v)*e.PENALTY_N3}for(let p=0;p<this.size;p++){let f=!1,m=0,v=[0,0,0,0,0,0,0];for(let x=0;x<this.size;x++)this.modules[x][p]==f?(m++,m==5?c+=e.PENALTY_N1:m>5&&c++):(this.finderPenaltyAddHistory(m,v),f||(c+=this.finderPenaltyCountPatterns(v)*e.PENALTY_N3),f=this.modules[x][p],m=1);c+=this.finderPenaltyTerminateAndCount(f,m,v)*e.PENALTY_N3}for(let p=0;p<this.size-1;p++)for(let f=0;f<this.size-1;f++){const m=this.modules[p][f];m==this.modules[p][f+1]&&m==this.modules[p+1][f]&&m==this.modules[p+1][f+1]&&(c+=e.PENALTY_N2)}let d=0;for(const p of this.modules)d=p.reduce((f,m)=>f+(m?1:0),d);const u=this.size*this.size,h=Math.ceil(Math.abs(d*20-u*10)/u)-1;return a(0<=h&&h<=9),c+=h*e.PENALTY_N4,a(0<=c&&c<=2568888),c}getAlignmentPatternPositions(){if(this.version==1)return[];{const c=Math.floor(this.version/7)+2,d=this.version==32?26:Math.ceil((this.version*4+4)/(c*2-2))*2;let u=[6];for(let h=this.size-7;u.length<c;h-=d)u.splice(1,0,h);return u}}static getNumRawDataModules(c){if(c<e.MIN_VERSION||c>e.MAX_VERSION)throw new RangeError("Version number out of range");let d=(16*c+128)*c+64;if(c>=2){const u=Math.floor(c/7)+2;d-=(25*u-10)*u-55,c>=7&&(d-=36)}return a(208<=d&&d<=29648),d}static getNumDataCodewords(c,d){return Math.floor(e.getNumRawDataModules(c)/8)-e.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c]*e.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c]}static reedSolomonComputeDivisor(c){if(c<1||c>255)throw new RangeError("Degree out of range");let d=[];for(let h=0;h<c-1;h++)d.push(0);d.push(1);let u=1;for(let h=0;h<c;h++){for(let p=0;p<d.length;p++)d[p]=e.reedSolomonMultiply(d[p],u),p+1<d.length&&(d[p]^=d[p+1]);u=e.reedSolomonMultiply(u,2)}return d}static reedSolomonComputeRemainder(c,d){let u=d.map(h=>0);for(const h of c){const p=h^u.shift();u.push(0),d.forEach((f,m)=>u[m]^=e.reedSolomonMultiply(f,p))}return u}static reedSolomonMultiply(c,d){if(c>>>8||d>>>8)throw new RangeError("Byte out of range");let u=0;for(let h=7;h>=0;h--)u=u<<1^(u>>>7)*285,u^=(d>>>h&1)*c;return a(u>>>8==0),u}finderPenaltyCountPatterns(c){const d=c[1];a(d<=this.size*3);const u=d>0&&c[2]==d&&c[3]==d*3&&c[4]==d&&c[5]==d;return(u&&c[0]>=d*4&&c[6]>=d?1:0)+(u&&c[6]>=d*4&&c[0]>=d?1:0)}finderPenaltyTerminateAndCount(c,d,u){return c&&(this.finderPenaltyAddHistory(d,u),d=0),d+=this.size,this.finderPenaltyAddHistory(d,u),this.finderPenaltyCountPatterns(u)}finderPenaltyAddHistory(c,d){d[0]==0&&(c+=this.size),d.pop(),d.unshift(c)}};let r=e;r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=r;function s(c,d,u){if(d<0||d>31||c>>>d)throw new RangeError("Value out of range");for(let h=d-1;h>=0;h--)u.push(c>>>h&1)}function i(c,d){return(c>>>d&1)!=0}function a(c){if(!c)throw new Error("Assertion error")}const o=class{constructor(c,d,u){if(this.mode=c,this.numChars=d,this.bitData=u,d<0)throw new RangeError("Invalid argument");this.bitData=u.slice()}static makeBytes(c){let d=[];for(const u of c)s(u,8,d);return new o(o.Mode.BYTE,c.length,d)}static makeNumeric(c){if(!o.isNumeric(c))throw new RangeError("String contains non-numeric characters");let d=[];for(let u=0;u<c.length;){const h=Math.min(c.length-u,3);s(parseInt(c.substr(u,h),10),h*3+1,d),u+=h}return new o(o.Mode.NUMERIC,c.length,d)}static makeAlphanumeric(c){if(!o.isAlphanumeric(c))throw new RangeError("String contains unencodable characters in alphanumeric mode");let d=[],u;for(u=0;u+2<=c.length;u+=2){let h=o.ALPHANUMERIC_CHARSET.indexOf(c.charAt(u))*45;h+=o.ALPHANUMERIC_CHARSET.indexOf(c.charAt(u+1)),s(h,11,d)}return u<c.length&&s(o.ALPHANUMERIC_CHARSET.indexOf(c.charAt(u)),6,d),new o(o.Mode.ALPHANUMERIC,c.length,d)}static makeSegments(c){return c==""?[]:o.isNumeric(c)?[o.makeNumeric(c)]:o.isAlphanumeric(c)?[o.makeAlphanumeric(c)]:[o.makeBytes(o.toUtf8ByteArray(c))]}static makeEci(c){let d=[];if(c<0)throw new RangeError("ECI assignment value out of range");if(c<128)s(c,8,d);else if(c<16384)s(2,2,d),s(c,14,d);else if(c<1e6)s(6,3,d),s(c,21,d);else throw new RangeError("ECI assignment value out of range");return new o(o.Mode.ECI,0,d)}static isNumeric(c){return o.NUMERIC_REGEX.test(c)}static isAlphanumeric(c){return o.ALPHANUMERIC_REGEX.test(c)}getData(){return this.bitData.slice()}static getTotalBits(c,d){let u=0;for(const h of c){const p=h.mode.numCharCountBits(d);if(h.numChars>=1<<p)return 1/0;u+=4+p+h.bitData.length}return u}static toUtf8ByteArray(c){c=encodeURI(c);let d=[];for(let u=0;u<c.length;u++)c.charAt(u)!="%"?d.push(c.charCodeAt(u)):(d.push(parseInt(c.substr(u+1,2),16)),u+=2);return d}};let l=o;l.NUMERIC_REGEX=/^[0-9]*$/,l.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,l.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=l})(cl||(cl={}));(t=>{(e=>{const r=class{constructor(i,a){this.ordinal=i,this.formatBits=a}};let s=r;s.LOW=new r(0,1),s.MEDIUM=new r(1,0),s.QUARTILE=new r(2,3),s.HIGH=new r(3,2),e.Ecc=s})(t.QrCode||(t.QrCode={}))})(cl||(cl={}));(t=>{(e=>{const r=class{constructor(i,a){this.modeBits=i,this.numBitsCharCount=a}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};let s=r;s.NUMERIC=new r(1,[10,12,14]),s.ALPHANUMERIC=new r(2,[9,11,13]),s.BYTE=new r(4,[8,16,16]),s.KANJI=new r(8,[8,10,12]),s.ECI=new r(7,[0,0,0]),e.Mode=s})(t.QrSegment||(t.QrSegment={}))})(cl||(cl={}));var Fd=cl;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var f7={L:Fd.QrCode.Ecc.LOW,M:Fd.QrCode.Ecc.MEDIUM,Q:Fd.QrCode.Ecc.QUARTILE,H:Fd.QrCode.Ecc.HIGH},m7=128,g7="L",x7="#FFFFFF",y7="#000000",v7=!1,s4=4,b7=.1;function w7(t,e=0){const r=[];return t.forEach(function(s,i){let a=null;s.forEach(function(o,l){if(!o&&a!==null){r.push(`M${a+e} ${i+e}h${l-a}v1H${a+e}z`),a=null;return}if(l===s.length-1){if(!o)return;a===null?r.push(`M${l+e},${i+e} h1v1H${l+e}z`):r.push(`M${a+e},${i+e} h${l+1-a}v1H${a+e}z`);return}o&&a===null&&(a=l)})}),r.join("")}function _7(t,e){return t.slice().map((r,s)=>s<e.y||s>=e.y+e.h?r:r.map((i,a)=>a<e.x||a>=e.x+e.w?i:!1))}function N7(t,e,r,s){if(s==null)return null;const i=r?s4:0,a=t.length+i*2,o=Math.floor(e*b7),l=a/e,c=(s.width||o)*l,d=(s.height||o)*l,u=s.x==null?t.length/2-c/2:s.x*l,h=s.y==null?t.length/2-d/2:s.y*l;let p=null;if(s.excavate){let f=Math.floor(u),m=Math.floor(h),v=Math.ceil(c+u-f),x=Math.ceil(d+h-m);p={x:f,y:m,w:v,h:x}}return{x:u,y:h,h:d,w:c,excavation:p}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function S7(t){const e=t,{value:r,size:s=m7,level:i=g7,bgColor:a=x7,fgColor:o=y7,includeMargin:l=v7,imageSettings:c}=e,d=p7(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let u=Fd.QrCode.encodeText(r,f7[i]).getModules();const h=l?s4:0,p=u.length+h*2,f=N7(u,s,l,c);let m=null;c!=null&&f!=null&&(f.excavation!=null&&(u=_7(u,f.excavation)),m=Td.createElement("image",{xlinkHref:c.src,height:f.h,width:f.w,x:f.x+h,y:f.y+h,preserveAspectRatio:"none"}));const v=w7(u,h);return Td.createElement("svg",h7({height:s,width:s,viewBox:`0 0 ${p} ${p}`},d),Td.createElement("path",{fill:a,d:`M0,0 h${p}v${p}H0z`,shapeRendering:"crispEdges"}),Td.createElement("path",{fill:o,d:v,shapeRendering:"crispEdges"}),m)}function t_({token:t,wallet:e,onClose:r}){const[s,i]=T.useState(!1),a=()=>{navigator.clipboard.writeText(e.address),i(!0),ie.success("Address copied to clipboard!"),setTimeout(()=>i(!1),2e3)};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsx("div",{className:"glass rounded-xl shadow-2xl max-w-md w-full border border-purple-500/30",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-purple-200",children:"Receive Tokens"}),n.jsx("button",{onClick:r,className:"text-purple-400 hover:text-purple-200 text-2xl",children:"×"})]}),n.jsx("div",{className:"mb-6 text-center",children:n.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[n.jsx(Ht,{token:t,size:"lg"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-purple-200",children:t.token_name}),n.jsx("p",{className:"text-sm text-purple-400",children:t.currency_code})]})]})}),n.jsx("div",{className:"bg-white p-4 rounded-lg mb-4 flex justify-center",children:n.jsx(S7,{value:e.address,size:200,level:"H",includeMargin:!0})}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-purple-300 mb-2",children:"Your Wallet Address"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:e.address,readOnly:!0,className:"flex-1 px-4 py-2 bg-purple-900/30 border border-purple-500/30 rounded-lg text-purple-200 font-mono text-sm"}),n.jsx("button",{onClick:a,className:`px-4 py-2 rounded-lg font-medium transition-all ${s?"bg-green-500 text-white":"bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white"}`,children:s?"✓ Copied":"📋 Copy"})]})]}),n.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4 mb-4",children:n.jsxs("p",{className:"text-yellow-200 text-sm",children:[n.jsx("strong",{children:"Important:"})," Make sure the sender has set up a trustline for this token before sending. Share your wallet address with them."]})}),n.jsx("div",{className:"flex gap-3",children:n.jsx("button",{onClick:r,className:"flex-1 bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white font-bold py-3 rounded-lg transition-all",children:"Close"})})]})})})}function r_({token:t,onClose:e}){const r=T.useRef(null),s=T.useRef(null),i=T.useRef(null),a=T.useRef(null),o=T.useRef(null),l=T.useRef(null),c=T.useRef([]),d=T.useRef(null),[u,h]=T.useState(null),[p,f]=T.useState(!0),[m,v]=T.useState("area"),[x,b]=T.useState("1h"),[y,g]=T.useState(0),[w,S]=T.useState(0),[_,A]=T.useState(!1),[B,Q]=T.useState(!1),[U,q]=T.useState(null),[de,me]=T.useState(0);T.useEffect(()=>(Z(),ye(),()=>{H()}),[t]),T.useEffect(()=>{U&&t&&G()},[U,t]);const ye=()=>{const se=localStorage.getItem("connectedWallet");se&&q(JSON.parse(se))},G=async()=>{if(!(!U||!t))try{const se=new Ve.Client(U.network==="mainnet"?"wss://xrplcluster.com":"wss://s.altnet.rippletest.net:51233");await se.connect();const P=((await se.request({command:"account_lines",account:U.address,ledger_index:"validated"})).result.lines||[]).find($=>$.account===t.issuer_address&&($.currency===t.currency_hex||$.currency===t.currency_code));me(P?parseFloat(P.balance):0),await se.disconnect()}catch(se){console.error("Error fetching user balance:",se),me(0)}};T.useEffect(()=>(u&&r.current&&s.current&&K(),()=>{H()}),[u,m,x]),T.useEffect(()=>{if(!(t!=null&&t.amm_pool_created))return;const se=async()=>{var j;try{const{data:P}=await le.from("pool_data_cache").select("*").eq("token_id",t.id).gte("last_updated",new Date(Date.now()-3e5).toISOString()).maybeSingle();if(P){const te=parseFloat(P.price);g(te);return}const{requestWithRetry:$}=await $t(()=>Promise.resolve().then(()=>tr),void 0),R=t.currency_code.length>3?Buffer.from(t.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):t.currency_code,W=await $({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:R,issuer:t.issuer_address},ledger_index:"validated"});if((j=W==null?void 0:W.result)!=null&&j.amm){const te=W.result.amm,X=parseFloat(te.amount)/1e6,oe=parseFloat(te.amount2.value),F=X/oe;g(F)}}catch(P){console.error("Error fetching live price:",P)}};se();const k=setInterval(se,5e3);return()=>clearInterval(k)},[t]);const Z=async()=>{var se,k;if(!t.amm_pool_created){f(!1);return}try{const{data:j}=await le.from("pool_data_cache").select("*").eq("token_id",t.id).gte("last_updated",new Date(Date.now()-3e5).toISOString()).maybeSingle();if(j){console.log("✅ Using cached pool data for modal");const W=parseFloat(j.xrp_amount),te=parseFloat(j.token_amount),X=parseFloat(j.price);if(h({xrpAmount:W,tokenAmount:te,price:X,lpTokens:parseFloat(j.lp_tokens||0),accountId:j.account_id}),g(X),t.amm_xrp_amount&&t.amm_asset_amount){const oe=t.amm_xrp_amount/t.amm_asset_amount,F=(X-oe)/oe*100;S(F)}f(!1);return}console.log("🔄 Fetching fresh pool data for modal...");const{requestWithRetry:P}=await $t(()=>Promise.resolve().then(()=>tr),void 0),$=t.currency_code.length>3?Buffer.from(t.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):t.currency_code,R=await P({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:$,issuer:t.issuer_address},ledger_index:"validated"});if(R.result.amm){const W=R.result.amm,te=parseFloat(W.amount)/1e6,X=parseFloat(W.amount2.value),oe=te/X;if(h({xrpAmount:te,tokenAmount:X,price:oe,lpTokens:parseFloat(((se=W.lp_token)==null?void 0:se.value)||0),accountId:W.account}),g(oe),t.amm_xrp_amount&&t.amm_asset_amount){const F=t.amm_xrp_amount/t.amm_asset_amount,J=(oe-F)/F*100;S(J)}await le.from("pool_data_cache").upsert({token_id:t.id,xrp_amount:te,token_amount:X,lp_tokens:parseFloat(((k=W.lp_token)==null?void 0:k.value)||0),price:oe,account_id:W.account,volume_24h:0,price_change_24h:0,last_updated:new Date().toISOString()},{onConflict:"token_id"}),console.log("💾 Cached pool data from modal")}}catch(j){console.error("Error fetching live pool data:",j)}finally{f(!1)}},he=()=>{if(!u)return[];const se=u.price,k=[],j=Math.floor(Date.now()/1e3);let P;switch(x){case"5m":P=1;break;case"15m":P=4;break;case"30m":P=8;break;case"1h":P=24;break;case"4h":P=96;break;case"1d":P=168;break;default:P=24}for(let $=P;$>=0;$--){const R=j-$*3600,W=(Math.random()-.5)*.3,te=(P-$)/P*.15,X=se*(1+W+te);k.push({time:R,value:X,open:X*.98,high:X*1.03,low:X*.97,close:X,volume:Math.random()*1e4+1e3})}return c.current=k,k},ee=()=>{H(),!(!u||!o.current)&&(d.current=setInterval(()=>{I()},5e3))},H=()=>{d.current&&(clearInterval(d.current),d.current=null)},I=()=>{if(!u||!o.current||c.current.length===0)return;const se=c.current[c.current.length-1],k=Math.floor(Date.now()/1e3),j=(Math.random()-.5)*.02,P=y||u.price*(1+j);if(k-se.time>=60){const $={time:k,value:P,open:se.close||P,high:Math.max(P,se.close||P)*1.002,low:Math.min(P,se.close||P)*.998,close:P,volume:Math.random()*5e3+500};c.current.push($),c.current.length>500&&c.current.shift();try{m==="area"||m==="line"||m==="baseline"?o.current.update({time:$.time,value:$.value}):o.current.update({time:$.time,open:$.open,high:$.high,low:$.low,close:$.close}),l.current&&l.current.update({time:$.time,value:$.volume,color:$.close>=$.open?"rgba(34, 197, 94, 0.5)":"rgba(239, 68, 68, 0.5)"})}catch(R){console.error("Error updating chart:",R)}}},K=()=>{if(!(!r.current||!s.current||!u))try{i.current&&(i.current.remove(),i.current=null),a.current&&(a.current.remove(),a.current=null),r.current&&(r.current.innerHTML=""),s.current&&(s.current.innerHTML="");const se=Uu(r.current,{width:r.current.clientWidth,height:400,layout:{background:{color:"transparent"},textColor:"#a78bfa"},grid:{vertLines:{color:"rgba(139, 92, 246, 0.1)"},horzLines:{color:"rgba(139, 92, 246, 0.1)"}},rightPriceScale:{borderColor:"rgba(139, 92, 246, 0.3)",scaleMargins:{top:.1,bottom:.1}},timeScale:{borderColor:"rgba(139, 92, 246, 0.3)",timeVisible:!0,secondsVisible:!1,visible:!1}});i.current=se;const k=he();if(!k||k.length===0)throw new Error("Unable to generate chart data");let j;const P={type:"price",precision:8,minMove:1e-8};switch(m){case"bars":j=se.addBarSeries({upColor:"#22c55e",downColor:"#ef4444",priceFormat:P}),j.setData(k.map(X=>({time:X.time,open:X.open,high:X.high,low:X.low,close:X.close})));break;case"candlestick":j=se.addCandlestickSeries({upColor:"#22c55e",downColor:"#ef4444",borderVisible:!1,wickUpColor:"#22c55e",wickDownColor:"#ef4444",priceFormat:P}),j.setData(k.map(X=>({time:X.time,open:X.open,high:X.high,low:X.low,close:X.close})));break;case"hollow":j=se.addCandlestickSeries({upColor:"transparent",downColor:"#ef4444",borderUpColor:"#22c55e",borderDownColor:"#ef4444",wickUpColor:"#22c55e",wickDownColor:"#ef4444",priceFormat:P}),j.setData(k.map(X=>({time:X.time,open:X.open,high:X.high,low:X.low,close:X.close})));break;case"line":j=se.addLineSeries({color:"#8b5cf6",lineWidth:2,priceFormat:P}),j.setData(k.map(X=>({time:X.time,value:X.close})));break;case"area":j=se.addAreaSeries({topColor:"rgba(139, 92, 246, 0.4)",bottomColor:"rgba(139, 92, 246, 0.0)",lineColor:"#8b5cf6",lineWidth:2,priceFormat:P}),j.setData(k.map(X=>({time:X.time,value:X.close})));break;case"baseline":j=se.addBaselineSeries({topLineColor:"#22c55e",topFillColor1:"rgba(34, 197, 94, 0.4)",topFillColor2:"rgba(34, 197, 94, 0.0)",bottomLineColor:"#ef4444",bottomFillColor1:"rgba(239, 68, 68, 0.0)",bottomFillColor2:"rgba(239, 68, 68, 0.4)",priceFormat:P}),j.setData(k.map(X=>({time:X.time,value:X.close})));break;case"heikin":j=se.addCandlestickSeries({upColor:"#22c55e",downColor:"#ef4444",borderVisible:!1,wickUpColor:"#22c55e",wickDownColor:"#ef4444",priceFormat:P});const te=k.map((X,oe)=>{if(oe===0)return X;const F=k[oe-1],J=(X.open+X.high+X.low+X.close)/4,xe=(F.open+F.close)/2,Ee=Math.max(X.high,xe,J),Te=Math.min(X.low,xe,J);return{time:X.time,open:xe,high:Ee,low:Te,close:J}});j.setData(te);break;default:j=se.addAreaSeries({topColor:"rgba(139, 92, 246, 0.4)",bottomColor:"rgba(139, 92, 246, 0.0)",lineColor:"#8b5cf6",lineWidth:2,priceFormat:P}),j.setData(k.map(X=>({time:X.time,value:X.close})))}o.current=j;const $=Uu(s.current,{width:s.current.clientWidth,height:100,layout:{background:{color:"transparent"},textColor:"#a78bfa"},grid:{vertLines:{color:"rgba(139, 92, 246, 0.1)"},horzLines:{color:"rgba(139, 92, 246, 0.1)"}},rightPriceScale:{borderColor:"rgba(139, 92, 246, 0.3)",scaleMargins:{top:.1,bottom:.1}},timeScale:{borderColor:"rgba(139, 92, 246, 0.3)",timeVisible:!0,secondsVisible:!1}});a.current=$;const R=$.addHistogramSeries({color:"#8b5cf6",priceFormat:{type:"volume"}});R.setData(k.map(te=>({time:te.time,value:te.volume,color:te.close>=te.open?"rgba(34, 197, 94, 0.5)":"rgba(239, 68, 68, 0.5)"}))),l.current=R,se.timeScale().fitContent(),$.timeScale().fitContent(),se.timeScale().subscribeVisibleTimeRangeChange(()=>{const te=se.timeScale().getVisibleRange();te&&$.timeScale().setVisibleRange(te)});const W=()=>{i.current&&r.current&&i.current.applyOptions({width:r.current.clientWidth}),a.current&&s.current&&a.current.applyOptions({width:s.current.clientWidth})};window.addEventListener("resize",W),setTimeout(()=>{ee()},100)}catch(se){console.error("Error rendering chart:",se)}},re=()=>y>0?y:(u==null?void 0:u.price)>0?u.price:t.amm_xrp_amount>0&&t.amm_asset_amount>0?t.amm_xrp_amount/t.amm_asset_amount:0,z=()=>{const se=re();return!se||!t.supply?0:t.supply*se},O=()=>(u==null?void 0:u.xrpAmount)||t.amm_xrp_amount||0,V=()=>(u==null?void 0:u.tokenAmount)||t.amm_asset_amount||0,ne=()=>{const se=z();return!se||se===0?0:se*.12},pe=re(),ae=z();return n.jsxs("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:e,children:[n.jsxs("div",{className:"glass rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",onClick:se=>se.stopPropagation(),children:[n.jsxs("div",{className:"sticky top-0 glass border-b border-purple-500/20 p-6 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(Ht,{token:t,size:"lg"}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-purple-200",children:t.token_name}),n.jsx("p",{className:"text-purple-400 text-sm",children:t.currency_code})]})]}),n.jsx("button",{onClick:e,className:"text-purple-400 hover:text-purple-300 text-3xl leading-none",children:"×"})]}),n.jsx("div",{className:"p-6 space-y-6",children:p?n.jsx("div",{className:"text-center text-purple-400 py-8",children:"Loading live data..."}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"glass rounded-lg p-4",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Price"}),n.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[pe>0?pe.toFixed(8):"0.00000000"," XRP"]}),w!==0&&n.jsxs("div",{className:`text-sm mt-1 ${w>=0?"text-green-400":"text-red-400"}`,children:[w>=0?"↑":"↓"," ",Math.abs(w).toFixed(2),"% (24h)"]})]}),n.jsxs("div",{className:"glass rounded-lg p-4",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Market Cap"}),n.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[ae>0?ae.toFixed(4):"0.0000"," XRP"]}),n.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Fully diluted"})]}),n.jsxs("div",{className:"glass rounded-lg p-4",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"24h Volume"}),n.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[ne()>0?ne().toFixed(2):"0.00"," XRP"]}),n.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Estimated"})]})]}),u&&n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-xl font-bold text-purple-200",children:"Price Chart"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{value:x,onChange:se=>b(se.target.value),className:"input px-3 py-1 text-sm text-purple-200",children:[n.jsx("option",{value:"5m",children:"5m"}),n.jsx("option",{value:"15m",children:"15m"}),n.jsx("option",{value:"30m",children:"30m"}),n.jsx("option",{value:"1h",children:"1h"}),n.jsx("option",{value:"4h",children:"4h"}),n.jsx("option",{value:"1d",children:"1d"})]}),n.jsxs("select",{value:m,onChange:se=>v(se.target.value),className:"input px-3 py-1 text-sm text-purple-200",children:[n.jsx("option",{value:"candlestick",children:"Candles"}),n.jsx("option",{value:"bars",children:"Bars"}),n.jsx("option",{value:"hollow",children:"Hollow"}),n.jsx("option",{value:"heikin",children:"Heikin Ashi"}),n.jsx("option",{value:"line",children:"Line"}),n.jsx("option",{value:"area",children:"Area"}),n.jsx("option",{value:"baseline",children:"Baseline"})]})]})]}),n.jsx("div",{ref:r,className:"w-full mb-2"}),n.jsx("div",{ref:s,className:"w-full"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-bold text-purple-200 mb-4",children:"Token Details"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-purple-400",children:"Total Supply"}),n.jsx("span",{className:"text-purple-200 font-bold",children:(t.supply||0).toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-purple-400",children:"Circulating"}),n.jsx("span",{className:"text-purple-200 font-bold",children:((t.supply||0)*.9).toLocaleString()})]}),t.amm_pool_created&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-purple-400",children:"AMM Liquidity"}),n.jsx("span",{className:"text-purple-200 font-bold",children:V()>0?V().toLocaleString():"0.322"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-purple-400",children:"XRP Locked"}),n.jsxs("span",{className:"text-purple-200 font-bold",children:[O()>0?O().toFixed(2):"2.80"," XRP"]})]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-purple-400",children:"Status"}),n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${t.amm_pool_created?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:t.amm_pool_created?"✓ Active":"○ Pending"})]})]})]}),n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-bold text-purple-200 mb-4",children:"Blockchain Info"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Issuer Address"}),n.jsx("div",{className:"text-purple-300 text-xs font-mono bg-black/30 p-2 rounded break-all",children:t.issuer_address})]}),t.tx_hash&&n.jsxs("div",{children:[n.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Creation TX"}),n.jsx("div",{className:"text-purple-300 text-xs font-mono bg-black/30 p-2 rounded break-all",children:t.tx_hash})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Created"}),n.jsx("div",{className:"text-purple-300 text-sm",children:new Date(t.created_at).toLocaleString()})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[U&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>A(!0),className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white font-bold px-4 py-3 rounded-lg shadow-lg",children:"📤 Send"}),n.jsx("button",{onClick:()=>Q(!0),className:"bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white font-bold px-4 py-3 rounded-lg shadow-lg",children:"📥 Receive"})]}),n.jsx("button",{onClick:()=>{localStorage.setItem("selectedTradeToken",JSON.stringify(t)),window.dispatchEvent(new CustomEvent("navigateToTrade",{detail:t})),e()},className:"bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white font-bold px-4 py-3 rounded-lg shadow-lg",children:"💱 Trade on MEMEKINGS"}),n.jsx("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"bottrader"})),e()},className:"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-bold px-4 py-3 rounded-lg shadow-lg",children:"🤖 Bot Trader"}),n.jsx("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"pools"})),e()},className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold px-4 py-3 rounded-lg shadow-lg",children:"💧 LP Pools"}),n.jsx("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("navigateToToken",{detail:t.token_name})),e()},className:"bg-gradient-to-r from-indigo-500 to-indigo-600 hover:from-indigo-600 hover:to-indigo-700 text-white font-bold px-4 py-3 rounded-lg shadow-lg",children:"👁️ View Full Profile"}),n.jsx("a",{href:`https://xrpscan.com/account/${t.issuer_address}`,target:"_blank",rel:"noopener noreferrer",className:"bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white font-bold px-4 py-3 rounded-lg shadow-lg text-center",children:"🔍 Explorer"}),n.jsx("button",{onClick:e,className:"bg-purple-900/30 border border-purple-500/30 hover:bg-purple-900/50 text-purple-200 font-medium px-4 py-3 rounded-lg",children:"← Back"})]})]})})]}),_&&U&&n.jsx(e_,{token:t,balance:de,wallet:U,onClose:()=>A(!1),onSuccess:()=>{A(!1),G()}}),B&&U&&n.jsx(t_,{token:t,wallet:U,onClose:()=>Q(!1)})]})}function Vf({token:t,connectedWallet:e,tokenBalance:r=0,onTrustlineUpdate:s,className:i="",size:a="md",showDropdown:o=!1,isDropdownOpen:l=!1,onDropdownToggle:c=null}){const[d,u]=T.useState(!1),[h,p]=T.useState(!1),[f,m]=T.useState(!0),[v,x]=T.useState(!1),b=c?l:v,y=c||x,g=Q=>Q.currency_hex?Q.currency_hex:Q.currency_code?Q.currency_code.length>3?Et.Buffer.from(Q.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):Q.currency_code:null,w=Q=>Q.issuer_address||Q.issuer||null;T.useEffect(()=>{e&&t?S():(m(!1),p(!1))},[t==null?void 0:t.id,e==null?void 0:e.address]);const S=async()=>{var de;if(!e||!t){m(!1);return}const Q=g(t),U=w(t);if(!Q||!U){console.error("Token missing required fields:",t),m(!1);return}m(!0);let q=null;try{const me=e.network==="mainnet"?"wss://xrplcluster.com":"wss://s.altnet.rippletest.net:51233";q=new Ve.Client(me),await Promise.race([q.connect(),new Promise((he,ee)=>setTimeout(()=>ee(new Error("Connection timeout")),1e4))]);const Z=((await Promise.race([q.request({command:"account_lines",account:e.address,ledger_index:"validated"}),new Promise((he,ee)=>setTimeout(()=>ee(new Error("Request timeout")),1e4))])).result.lines||[]).some(he=>he.currency===Q&&he.account===U);p(Z)}catch(me){console.error("Error checking trustline:",me),((de=me.data)==null?void 0:de.error)==="actNotFound"&&console.log("Wallet not activated on network"),p(!1)}finally{try{q&&q.isConnected()&&await q.disconnect()}catch(me){console.error("Error disconnecting client:",me)}m(!1)}},_=async()=>{var de,me,ye,G;if(!e){ie.error("Please connect a wallet first");return}if(!t){ie.error("Token information not available");return}const Q=g(t),U=w(t);if(!Q||!U){ie.error("Token missing required information (currency or issuer)");return}if(!e.seed){ie.error("Wallet seed not available. Please reconnect your wallet.");return}u(!0);let q=null;try{const Z=e.network==="mainnet"?"wss://xrplcluster.com":"wss://s.altnet.rippletest.net:51233";if(q=new Ve.Client(Z),await Promise.race([q.connect(),new Promise((V,ne)=>setTimeout(()=>ne(new Error("Connection timeout")),15e3))]),((await Promise.race([q.request({command:"account_lines",account:e.address,ledger_index:"validated"}),new Promise((V,ne)=>setTimeout(()=>ne(new Error("Request timeout")),1e4))])).result.lines||[]).some(V=>V.currency===Q&&V.account===U)){ie.success("You already have a trustline for this token!"),p(!0),u(!1),q&&q.isConnected()&&await q.disconnect();return}const I=Ve.Wallet.fromSeed(e.seed);if(I.address!==e.address)throw new Error("Wallet address mismatch. Please reconnect your wallet.");const K={TransactionType:"TrustSet",Account:I.address,LimitAmount:{currency:Q,issuer:U,value:"1000000000"}},re=await q.autofill(K),z=I.sign(re),O=await Promise.race([q.submitAndWait(z.tx_blob),new Promise((V,ne)=>setTimeout(()=>ne(new Error("Transaction timeout")),3e4))]);if(O.result.meta.TransactionResult==="tesSUCCESS")ie.success(`Trustline set for ${t.name||t.symbol}!`),p(!0),await $r({type:Ur.TRUSTLINE_CREATED,walletAddress:e.address,details:{token:t.name||t.symbol,symbol:t.symbol,issuer:U,currency:Q}}),s&&s();else{const V=O.result.meta.TransactionResult;let ne="Failed to set trustline";switch(V){case"tecNO_DST_INSUF_XRP":ne="Insufficient XRP balance. You need at least 10 XRP reserve.";break;case"tecDST_TAG_NEEDED":ne="Destination tag required.";break;case"tecNO_LINE_INSUF_RESERVE":ne="Insufficient reserve. You need more XRP in your wallet.";break;case"tecUNFUNDED":ne="Wallet is unfunded. Please add XRP to your wallet.";break;case"tefPAST_SEQ":ne="Transaction sequence error. Please try again.";break;case"terRETRY":ne="Network busy. Please retry in a moment.";break;default:ne=`Failed: ${V}`}ie.error(ne)}}catch(Z){console.error("Error setting up trustline:",Z);let he="Failed to set up trustline";Z.message.includes("timeout")||Z.message.includes("Timeout")?he="Connection timed out. The network may be slow. Please try again.":Z.message.includes("Connection")||Z.message.includes("connect")?he="Unable to connect to the XRPL network. Please check your internet connection and try again.":Z.message.includes("address mismatch")?he=Z.message:((de=Z.data)==null?void 0:de.error)==="actNotFound"?he="Your wallet is not activated on the network. Please send at least 2 XRP to your wallet first.":((me=Z.data)==null?void 0:me.error)==="amendmentBlocked"?he="This transaction type is blocked by the network. Please try again later.":((ye=Z.data)==null?void 0:ye.error_code)===19?he="Insufficient XRP balance. You need at least 2 XRP plus reserve for trustlines.":Z.name==="RippledError"?he=`Network error: ${((G=Z.data)==null?void 0:G.error_message)||"Unknown error"}`:Z.message&&(he=`Error: ${Z.message}`),ie.error(he)}finally{try{q&&q.isConnected()&&await q.disconnect()}catch(Z){console.error("Error disconnecting client:",Z)}u(!1)}},A=async()=>{var de,me;if(!e){ie.error("Please connect a wallet first");return}if(r>0){ie.error("Cannot remove trustline with non-zero balance. Balance must be 0.");return}const Q=g(t),U=w(t);if(!Q||!U){ie.error("Token missing required information");return}if(!e.seed){ie.error("Wallet seed not available. Please reconnect your wallet.");return}u(!0);let q=null;try{if(await S(),!h){ie("No trustline exists for this token",{icon:"ℹ️"}),u(!1);return}const ye=e.network==="mainnet"?"wss://xrplcluster.com":"wss://s.altnet.rippletest.net:51233";q=new Ve.Client(ye),await Promise.race([q.connect(),new Promise((I,K)=>setTimeout(()=>K(new Error("Connection timeout")),15e3))]);const G=Ve.Wallet.fromSeed(e.seed);if(G.address!==e.address)throw new Error("Wallet address mismatch. Please reconnect your wallet.");const Z={TransactionType:"TrustSet",Account:G.address,LimitAmount:{currency:Q,issuer:U,value:"0"}},he=await q.autofill(Z),ee=G.sign(he),H=await Promise.race([q.submitAndWait(ee.tx_blob),new Promise((I,K)=>setTimeout(()=>K(new Error("Transaction timeout")),3e4))]);if(H.result.meta.TransactionResult==="tesSUCCESS")ie.success(`Trustline removed for ${t.name||t.symbol}!`),p(!1),await $r({type:Ur.TRUSTLINE_REMOVED,walletAddress:e.address,details:{token:t.name||t.symbol,symbol:t.symbol,issuer:U,currency:Q}}),s&&s();else{const I=H.result.meta.TransactionResult;let K="Failed to remove trustline";switch(I){case"tecNO_LINE":K="Trustline does not exist.";break;case"tecHAS_OBLIGATIONS":K="Cannot remove trustline with obligations.";break;default:K=`Failed: ${I}`}ie.error(K)}}catch(ye){console.error("Error removing trustline:",ye);let G="Failed to remove trustline";ye.message.includes("timeout")||ye.message.includes("Timeout")?G="Connection timed out. The network may be slow. Please try again.":ye.message.includes("Connection")||ye.message.includes("connect")?G="Unable to connect to the XRPL network. Please check your internet connection and try again.":ye.message.includes("address mismatch")?G=ye.message:((de=ye.data)==null?void 0:de.error)==="actNotFound"?G="Your wallet is not activated on the network.":ye.name==="RippledError"?G=`Network error: ${((me=ye.data)==null?void 0:me.error_message)||"Unknown error"}`:ye.message&&(G=`Error: ${ye.message}`),ie.error(G)}finally{try{q&&q.isConnected()&&await q.disconnect()}catch(ye){console.error("Error disconnecting client:",ye)}u(!1)}},B=()=>{switch(a){case"sm":return"px-3 py-2 text-xs";case"lg":return"px-6 py-3 text-base";default:return"px-4 py-2 text-sm"}};return f?n.jsx("button",{disabled:!0,className:`bg-gray-700 text-gray-400 rounded-lg disabled:opacity-50 cursor-not-allowed ${B()} ${i}`,children:n.jsxs("svg",{className:"animate-spin h-4 w-4 inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):e?o?n.jsxs("div",{className:`relative trust-dropdown ${i}`,children:[n.jsx("button",{onClick:Q=>{Q.stopPropagation(),c?c(t.id):y(!b)},disabled:d||f,className:`w-full bg-gradient-to-r from-green-600 to-green-500 text-white rounded-lg hover:from-green-500 hover:to-green-400 disabled:opacity-50 shadow-lg shadow-green-500/20 transition-all duration-300 flex items-center justify-center gap-2 ${B()}`,children:d?n.jsxs("svg",{className:"animate-spin h-4 w-4 inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):n.jsxs(n.Fragment,{children:[n.jsx("span",{children:h?"✓ Trusted":"Trust"}),n.jsx("svg",{className:`w-4 h-4 transition-transform ${b?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),b&&n.jsxs("div",{className:"absolute bottom-full left-0 mb-2 w-64 bg-gradient-to-br from-purple-900 to-purple-800 border border-purple-500/30 rounded-lg shadow-xl overflow-hidden backdrop-blur-xl",style:{zIndex:9999},onClick:Q=>Q.stopPropagation(),children:[n.jsxs("button",{onClick:()=>{c?c(null):y(!1),_()},disabled:d||h,className:"w-full px-4 py-3 text-left hover:bg-purple-600/30 transition-colors flex items-center gap-3 border-b border-purple-500/20 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-600/20 flex items-center justify-center text-green-400",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-purple-100 font-medium",children:"Setup"}),n.jsx("div",{className:"text-purple-300 text-xs",children:"Add this token trustline"})]})]}),n.jsxs("button",{onClick:()=>{c?c(null):y(!1),A()},disabled:d||!h||r>0,className:"w-full px-4 py-3 text-left hover:bg-purple-600/30 transition-colors flex items-center gap-3 border-b border-purple-500/20 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-red-600/20 flex items-center justify-center text-red-400",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-purple-100 font-medium",children:"Remove"}),n.jsx("div",{className:"text-purple-300 text-xs",children:r>0?"Balance must be 0":"Remove empty trustline"})]})]}),n.jsxs("a",{href:`https://xrpscan.com/account/${w(t)}`,target:"_blank",rel:"noopener noreferrer",className:"w-full px-4 py-3 text-left hover:bg-purple-600/30 transition-colors flex items-center gap-3",onClick:()=>{c?c(null):y(!1)},children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-600/20 flex items-center justify-center text-blue-400",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-purple-100 font-medium",children:"XRPScan Link"}),n.jsx("div",{className:"text-purple-300 text-xs",children:"View issuer details"})]})]})]})]}):h?r>0?n.jsx("button",{disabled:!0,className:`bg-gray-700 text-gray-400 rounded-lg disabled:opacity-50 cursor-not-allowed ${B()} ${i}`,title:"Trustline active with balance",children:"✓ Trusted"}):n.jsx("button",{onClick:A,disabled:d,className:`bg-gradient-to-r from-red-600 to-red-500 text-white rounded-lg hover:from-red-500 hover:to-red-400 disabled:opacity-50 shadow-lg shadow-red-500/20 transition-all duration-300 ${B()} ${i}`,title:"Remove trustline (balance is 0)",children:d?n.jsxs("svg",{className:"animate-spin h-4 w-4 inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Remove Trust"}):n.jsx("button",{onClick:_,disabled:d,className:`bg-gradient-to-r from-green-600 to-green-500 text-white rounded-lg hover:from-green-500 hover:to-green-400 disabled:opacity-50 shadow-lg shadow-green-500/20 transition-all duration-300 ${B()} ${i}`,children:d?n.jsxs("svg",{className:"animate-spin h-4 w-4 inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Trust"}):o?n.jsx("div",{className:`relative trust-dropdown ${i}`,children:n.jsx("button",{disabled:!0,className:`w-full bg-gray-700 text-gray-400 rounded-lg disabled:opacity-50 cursor-not-allowed flex items-center justify-center gap-2 ${B()}`,children:n.jsx("span",{children:"Connect Wallet"})})}):n.jsx("button",{disabled:!0,className:`bg-gray-700 text-gray-400 rounded-lg disabled:opacity-50 cursor-not-allowed ${B()} ${i}`,children:"Connect Wallet"})}const C2=["ABLE","ACID","AGED","ALSO","AREA","ARMY","AWAY","BABY","BACK","BALL","BAND","BANK","BASE","BATH","BEAR","BEAT","BEEN","BEER","BELL","BELT","BEST","BILL","BIRD","BLOW","BLUE","BOAT","BODY","BOMB","BOND","BONE","BOOK","BOOM","BORN","BOSS","BOTH","BOWL","BULK","BURN","BUSH","BUSY","CAFE","CAKE","CALL","CALM","CAME","CAMP","CARD","CARE","CART","CASE","CASH","CAST","CELL","CHAT","CHEF","CHIP","CITY","CLUB","COAL","COAT","CODE","COLD","COME","COOK","COOL","COPE","COPY","CORE","CORN","COST","CREW","CROP","DARK","DATA","DATE","DAWN","DAYS","DEAD","DEAL","DEAR","DEBT","DEEP","DENY","DESK","DIAL","DIET","DISC","DISK","DIVE","DOCK","DOES","DOGS","DONE","DOOR","DOSE","DOWN","DRAW","DREW","DROP","DRUG","DUAL","DUCK","DUMP","DUST","DUTY","EACH","EARN","EASE","EAST","EASY","ECHO","EDGE","ELSE","EVEN","EVER","EVIL","EXIT","FACE","FACT","FAIL","FAIR","FALL","FARM","FAST","FATE","FEAR","FEED","FEEL","FEET","FELL","FELT","FILE","FILL","FILM","FIND","FINE","FIRE","FIRM","FISH","FLAT","FLED","FLEW","FLOW","FOLK","FOOD","FOOT","FORD","FORM","FORT","FOUL","FOUR","FREE","FROM","FUEL","FULL","FUND","GAIN","GAME","GATE","GAVE","GEAR","GENE","GIFT","GIRL","GIVE","GLAD","GOAL","GOES","GOLD","GOLF","GONE","GOOD","GRAD","GRAY","GREW","GREY","GRIP","GROW","GULF","HAIR","HALF","HALL","HAND","HANG","HARD","HARM","HATE","HAVE","HEAD","HEAR","HEAT","HELD","HELL","HELP","HERE","HERO","HIGH","HILL","HIRE","HOLD","HOLE","HOLY","HOME","HOPE","HOST","HOUR","HUGE","HUNG","HUNT","HURT","IDEA","INCH","INTO","IRON","ITEM","JACK","JANE","JAZZ","JEAN","JOHN","JOIN","JUMP","JUNE","JURY","JUST","KEEN","KEEP","KENT","KEPT","KICK","KILL","KIND","KING","KNEE","KNEW","KNOW","LACK","LADY","LAID","LAKE","LAND","LANE","LAST","LATE","LEAD","LEFT","LESS","LIED","LIFE","LIFT","LIKE","LINE","LINK","LIST","LIVE","LOAD","LOAN","LOCK","LONE","LONG","LOOK","LORD","LOSE","LOSS","LOST","LOTS","LOUD","LOVE","LUCK","LUNG","MADE","MAIL","MAIN","MAKE","MALE","MALL","MANY","MARK","MASS","MATE","MATH","MEAL","MEAN","MEAT","MEET","MENU","MERE","MESS","MICE","MILE","MILK","MILL","MIND","MINE","MISS","MODE","MOOD","MOON","MORE","MOST","MOVE","MUCH","MUST","MYTH","NAME","NAVY","NEAR","NECK","NEED","NEWS","NEXT","NICE","NINE","NONE","NOON","NORM","NOSE","NOTE","NOVEL","NURSE","OKAY","ONCE","ONES","ONLY","ONTO","OPEN","ORAL","OVEN","OVER","PACE","PACK","PAGE","PAID","PAIN","PAIR","PALM","PARK","PART","PASS","PAST","PATH","PEAK","PICK","PIER","PILE","PINE","PINK","PIPE","PLAN","PLAY","PLOT","PLUG","PLUS","POEM","POET","POLL","POND","POOL","POOR","PORT","POST","POUR","PRAY","PRAY","PURE","PUSH","RACE","RACK","RAIL","RAIN","RANK","RARE","RATE","READ","REAL","REAR","RELY","RENT","REST","RICE","RICH","RIDE","RING","RISE","RISK","ROAD","ROCK","RODE","ROLE","ROLL","ROOF","ROOM","ROOT","ROPE","ROSE","RUDE","RULE","RUSH","RUTH","SAFE","SAGA","SAGE","SAID","SAKE","SALE","SALT","SAME","SAND","SANK","SAVE","SEAT","SEED","SEEK","SEEM","SEEN","SELF","SELL","SEND","SENT","SEPT","SHED","SHIP","SHOP","SHOT","SHOW","SHUT","SICK","SIDE","SIGN","SILK","SING","SINK","SITE","SIZE","SKIN","SKIP","SLOW","SNOW","SOFT","SOIL","SOLD","SOLE","SOME","SONG","SOON","SORT","SOUL","SOUP","SOUR","SPAN","SPEC","SPIN","SPOT","STAR","STAY","STEM","STEP","STIR","STOP","SUCH","SUED","SUIT","SUNG","SURE","SWIM","TALE","TALK","TALL","TANK","TAPE","TASK","TEAM","TEAR","TECH","TELL","TEND","TERM","TEST","TEXT","THAN","THAT","THEM","THEN","THEY","THIN","THIS","THOU","THUS","TIDE","TIED","TIER","TILL","TIME","TINY","TOLL","TONE","TOOK","TOOL","TOPS","TORN","TOUR","TOWN","TOYS","TREE","TREK","TRIM","TRIO","TRIP","TRUE","TUBE","TUNE","TURN","TWIN","TYPE","UNIT","UPON","USED","USER","VARY","VAST","VERY","VICE","VIEW","VISA","VOTE","WAGE","WAIT","WAKE","WALK","WALL","WANT","WARD","WARM","WARN","WASH","WAVE","WAYS","WEAK","WEAR","WEEK","WELL","WENT","WERE","WEST","WHAT","WHEN","WHOM","WIDE","WIFE","WILD","WILL","WIND","WINE","WING","WIRE","WISE","WISH","WITH","WOOD","WORD","WORE","WORK","WORM","WORN","WRAP","YARD","YEAH","YEAR","YELL","YOUR","ZONE","ZOOM","MOON","PEEL","BEAM","LEAN","PEAK","RAGE","VIBE","DOGE"],j7=()=>C2[Math.floor(Math.random()*C2.length)],$v="token-updated",E7=t=>{const e=new CustomEvent($v,{detail:{tokenId:t,timestamp:Date.now()}});window.dispatchEvent(e)},xh=t=>{const e=r=>t(r.detail);return window.addEventListener($v,e),()=>window.removeEventListener($v,e)},Uv=async t=>{try{const{data:e,error:r}=await le.from("meme_tokens").select("id, featured_order").eq("is_featured",!0).order("featured_order",{ascending:!0,nullsLast:!0});if(r)throw r;const s=[];e.forEach((a,o)=>{o<2?s.push(le.from("meme_tokens").update({featured_order:o+2}).eq("id",a.id)):s.push(le.from("meme_tokens").update({is_featured:!1,featured_order:null}).eq("id",a.id))}),await Promise.all(s);const{error:i}=await le.from("meme_tokens").update({is_featured:!0,featured_order:1}).eq("id",t);if(i)throw i;console.log("Token promoted to featured position 1")}catch(e){throw console.error("Error promoting token to featured:",e),e}},k2=async(t,e)=>{try{if(e===null||e===0){const{error:o}=await le.from("meme_tokens").update({is_featured:!1,featured_order:null}).eq("id",t);if(o)throw o;return}if(e<1||e>3)throw new Error("Featured position must be between 1 and 3");const{data:r,error:s}=await le.from("meme_tokens").select("id, featured_order").eq("is_featured",!0).order("featured_order",{ascending:!0,nullsLast:!0});if(s)throw s;const i=r.find(o=>o.featured_order===e);if(i&&i.id!==t){const o=r.filter(h=>h.id!==t&&h.id!==i.id),l=[e],c=[1,2,3].filter(h=>h!==e),d=[];o.forEach(h=>{const p=c.find(f=>!l.includes(f));p?(l.push(p),d.push(le.from("meme_tokens").update({featured_order:p}).eq("id",h.id))):d.push(le.from("meme_tokens").update({is_featured:!1,featured_order:null}).eq("id",h.id))});const u=c[0];d.push(le.from("meme_tokens").update({featured_order:u}).eq("id",i.id)),await Promise.all(d)}else{const o=r.filter(u=>u.id!==t),l=[e],c=[1,2,3].filter(u=>u!==e),d=[];o.forEach(u=>{const h=c.find(p=>!l.includes(p));h?(l.push(h),d.push(le.from("meme_tokens").update({featured_order:h}).eq("id",u.id))):d.push(le.from("meme_tokens").update({is_featured:!1,featured_order:null}).eq("id",u.id))}),await Promise.all(d)}const{error:a}=await le.from("meme_tokens").update({is_featured:!0,featured_order:e}).eq("id",t);if(a)throw a;console.log(`Token set to featured position ${e}`)}catch(r){throw console.error("Error setting featured position:",r),r}},Xx=[{value:"Meme",color:"from-pink-500 to-rose-500",bgColor:"bg-gradient-to-r from-pink-500/20 to-rose-500/20",textColor:"text-pink-300",emoji:"😂"},{value:"Gaming",color:"from-violet-500 to-purple-500",bgColor:"bg-gradient-to-r from-violet-500/20 to-purple-500/20",textColor:"text-violet-300",emoji:"🎮"},{value:"DeFi",color:"from-blue-500 to-cyan-500",bgColor:"bg-gradient-to-r from-blue-500/20 to-cyan-500/20",textColor:"text-blue-300",emoji:"💰"},{value:"Utility",color:"from-green-500 to-emerald-500",bgColor:"bg-gradient-to-r from-green-500/20 to-emerald-500/20",textColor:"text-green-300",emoji:"🔧"},{value:"Community",color:"from-orange-500 to-amber-500",bgColor:"bg-gradient-to-r from-orange-500/20 to-amber-500/20",textColor:"text-orange-300",emoji:"👥"},{value:"NFT",color:"from-indigo-500 to-blue-500",bgColor:"bg-gradient-to-r from-indigo-500/20 to-blue-500/20",textColor:"text-indigo-300",emoji:"🎨"},{value:"AI",color:"from-teal-500 to-cyan-500",bgColor:"bg-gradient-to-r from-teal-500/20 to-cyan-500/20",textColor:"text-teal-300",emoji:"🤖"},{value:"Other",color:"from-gray-500 to-slate-500",bgColor:"bg-gradient-to-r from-gray-500/20 to-slate-500/20",textColor:"text-gray-300",emoji:"📦"}],T7=t=>Xx.find(r=>r.value===t)||Xx[Xx.length-1],Dc=({category:t,size:e="sm"})=>{const r=T7(t),s={xs:"text-xs px-1.5 py-0.5",sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1.5",lg:"text-base px-4 py-2"};return n.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full font-medium ${r.bgColor} ${r.textColor} ${s[e]}`,children:[n.jsx("span",{children:r.emoji}),n.jsx("span",{children:r.value})]})},Cn=t=>{if(!t)return 0;const e=new Date(t),s=Math.abs(new Date-e);return Math.ceil(s/(1e3*60*60*24))},C7="rKxBBMmY969Ph1y63ddVfYyN7xmxwDfVq6",k7=1,A7=async()=>{try{const{data:t,error:e}=await le.rpc("get_active_featured_spots");if(e)throw e;return t||[]}catch(t){return console.error("Error fetching active featured spots:",t),[]}},P7=async t=>{try{const{data:e,error:r}=await le.rpc("is_featured_spot_available",{spot_pos:t});if(r)throw r;return e}catch(e){return console.error("Error checking spot availability:",e),!1}},R7=async({tokenId:t,spotPosition:e,hours:r,walletSeed:s,walletAddress:i,xrpAmount:a})=>{try{const o=a||r*k7,l=await Qk(),c=Ve.Wallet.fromSeed(s),d={TransactionType:"Payment",Account:c.address,Amount:Ve.xrpToDrops(o),Destination:C7,Memos:[{Memo:{MemoType:Et.Buffer.from("featured_spot","utf8").toString("hex").toUpperCase(),MemoData:Et.Buffer.from(JSON.stringify({tokenId:t,spotPosition:e,hours:r,deal:a?"day_buyout":"standard"}),"utf8").toString("hex").toUpperCase()}}]},u=await l.autofill(d),h=c.sign(u),p=await l.submitAndWait(h.tx_blob);if(p.result.meta.TransactionResult!=="tesSUCCESS")throw new Error(`Transaction failed: ${p.result.meta.TransactionResult}`);const f=new Date,m=new Date(f.getTime()+r*60*60*1e3),{data:v,error:x}=await le.from("featured_spot_purchases").insert({token_id:t,wallet_address:i,spot_position:e,hours_purchased:r,xrp_amount:o,tx_hash:p.result.hash,started_at:f.toISOString(),expires_at:m.toISOString(),is_active:!0}).select().single();if(x)throw x;return{success:!0,purchase:v,txHash:p.result.hash}}catch(o){throw console.error("Error purchasing featured spot:",o),o}},O7="rphatRpwXcPAo7CVm46dC78JAQ6kLMqb2M";function I7({isOpen:t,onClose:e,token:r,walletSeed:s,walletAddress:i}){const[a,o]=T.useState(null),[l,c]=T.useState(1),[d,u]=T.useState(!1),[h,p]=T.useState([]),[f,m]=T.useState({}),[v,x]=T.useState(!0),[b,y]=T.useState(!1),g=1,w=24,S=20,_=i===O7,A=b?S:l*g,B=b?w:l;T.useEffect(()=>{t&&Q()},[t]);const Q=async()=>{x(!0);try{const me=await A7();p(me);const ye={};for(let G=1;G<=3;G++)ye[G]=await P7(G);m(ye)}catch(me){console.error("Error loading spot data:",me),ie.error("Failed to load spot availability")}finally{x(!1)}},U=async()=>{if(!a){ie.error("Please select a spot");return}if(!s||!i){ie.error("Wallet not connected");return}if(!f[a]){ie.error("This spot is currently occupied");return}u(!0);const me=ie.loading("Processing payment...");try{const ye=await R7({tokenId:r.id,spotPosition:a,hours:B,walletSeed:s,walletAddress:i,xrpAmount:A});ie.dismiss(me),ie.success(n.jsxs("div",{children:[n.jsx("div",{className:"font-bold",children:"Featured spot purchased!"}),n.jsxs("div",{className:"text-sm",children:[r.token_name," is now in spot #",a," for ",B," hour",B>1?"s":""]})]}),{duration:5e3}),e()}catch(ye){ie.dismiss(me),ie.error(ye.message||"Failed to purchase featured spot")}finally{u(!1)}},q=me=>h.find(ye=>ye.spot_position===me),de=me=>{const ye=new Date,Z=new Date(me)-ye;if(Z<=0)return"Expired";const he=Math.floor(Z/(1e3*60*60)),ee=Math.floor(Z%(1e3*60*60)/(1e3*60));return he>0?`${he}h ${ee}m remaining`:`${ee}m remaining`};return t?n.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"glass rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-purple-200",children:"Purchase Featured Spot"}),n.jsx("button",{onClick:e,className:"text-purple-400 hover:text-purple-200 transition-colors",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r&&n.jsx("div",{className:"glass rounded-lg p-4 mb-6",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ht,{token:r,size:"2xl"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-purple-200",children:r.token_name}),n.jsx("p",{className:"text-purple-400",children:r.currency_code})]})]})}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-3 font-semibold",children:"Select Spot Position"}),v?n.jsx("div",{className:"text-center text-purple-400 py-8",children:"Loading availability..."}):n.jsx("div",{className:"grid grid-cols-3 gap-4",children:[1,2,3].map(me=>{const ye=q(me),G=f[me];return n.jsx("button",{type:"button",onClick:()=>G&&o(me),disabled:!G||d,className:`p-4 rounded-lg border-2 transition-all ${a===me?"border-green-500 bg-green-500/20":G?"border-purple-500/30 bg-purple-500/10 hover:border-purple-500/50":"border-red-500/30 bg-red-500/10 opacity-60 cursor-not-allowed"}`,children:n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-2xl font-bold text-purple-200 mb-2",children:["Spot #",me]}),G?n.jsx("div",{className:"text-green-400 text-sm font-medium",children:"✓ Available"}):ye?n.jsxs("div",{className:"text-red-400 text-xs",children:[n.jsx("div",{children:"Occupied"}),n.jsx("div",{className:"mt-1",children:de(ye.expires_at)})]}):n.jsx("div",{className:"text-red-400 text-sm",children:"Occupied"})]})},me)})})]}),_&&n.jsx("div",{className:"bg-gradient-to-r from-yellow-500/20 to-orange-500/20 border-2 border-yellow-500/50 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"text-3xl",children:"⭐"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-yellow-200 font-bold text-lg mb-2",children:"Special Receiver Wallet Deal!"}),n.jsx("p",{className:"text-yellow-100 text-sm mb-3",children:"Get a full 24-hour featured spot for only 20 XRP - Save 4 XRP!"}),n.jsx("button",{type:"button",onClick:()=>{y(!b),b||c(24)},className:`px-4 py-2 rounded-lg font-semibold transition-all ${b?"bg-yellow-500 text-black":"bg-yellow-500/30 text-yellow-200 hover:bg-yellow-500/40"}`,children:b?"✓ Day Buyout Selected":"Use Day Buyout (24hrs for 20 XRP)"})]})]})}),!b&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2 font-semibold",children:"Hours to Feature"}),n.jsx("input",{type:"number",min:"1",max:"168",value:l,onChange:me=>c(Math.max(1,parseInt(me.target.value)||1)),className:"w-full bg-purple-900/30 border border-purple-500/30 rounded-lg px-4 py-3 text-purple-200 focus:outline-none focus:border-purple-500",disabled:d}),n.jsx("p",{className:"text-purple-400 text-sm mt-2",children:"1 XRP per hour. Maximum 168 hours (7 days)."})]}),n.jsxs("div",{className:"glass rounded-lg p-4 space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-purple-300",children:[n.jsx("span",{children:"Rate:"}),n.jsx("span",{children:b?"Special Deal":`${g} XRP/hour`})]}),n.jsxs("div",{className:"flex justify-between text-purple-300",children:[n.jsx("span",{children:"Duration:"}),n.jsxs("span",{children:[B," hour",B>1?"s":""]})]}),b&&n.jsxs("div",{className:"flex justify-between text-green-400 text-sm",children:[n.jsx("span",{children:"Regular Cost:"}),n.jsxs("span",{className:"line-through",children:[w," XRP"]})]}),b&&n.jsxs("div",{className:"flex justify-between text-green-400 text-sm font-semibold",children:[n.jsx("span",{children:"You Save:"}),n.jsx("span",{children:"4 XRP"})]}),n.jsx("div",{className:"border-t border-purple-500/30 pt-2 mt-2",children:n.jsxs("div",{className:"flex justify-between text-xl font-bold text-purple-200",children:[n.jsx("span",{children:"Total Cost:"}),n.jsxs("span",{className:b?"text-yellow-400":"",children:[A," XRP"]})]})})]}),n.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"text-blue-400 text-xl",children:"ℹ️"}),n.jsxs("div",{className:"text-blue-200 text-sm space-y-1",children:[n.jsx("p",{children:n.jsx("strong",{children:"How it works:"})}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[n.jsx("li",{children:"Your token will appear in the selected top spot"}),n.jsx("li",{children:"Featured tokens get premium visibility on the dashboard"}),n.jsx("li",{children:"The spot is reserved for the duration you purchase"}),n.jsx("li",{children:"After expiration, the spot becomes available again"})]})]})]})}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:e,disabled:d,className:"flex-1 glass hover:bg-purple-500/20 text-purple-300 py-3 rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:U,disabled:!a||d||v,className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white py-3 rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Processing...":`Pay ${A} XRP`})]})]})]})}):null}function L7({isOpen:t,onClose:e,tokens:r,onSelectToken:s}){const[i,a]=T.useState("");if(!t)return null;const o=r.filter(l=>l.token_name.toLowerCase().includes(i.toLowerCase())||l.currency_code.toLowerCase().includes(i.toLowerCase()));return n.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"glass rounded-2xl p-6 max-w-2xl w-full max-h-[80vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-purple-200",children:"Select a Token to Feature"}),n.jsx("button",{onClick:e,className:"text-purple-400 hover:text-purple-200 transition-colors",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsx("div",{className:"mb-4",children:n.jsx("input",{type:"text",placeholder:"Search tokens...",value:i,onChange:l=>a(l.target.value),className:"w-full bg-purple-900/30 border border-purple-500/30 rounded-lg px-4 py-3 text-purple-200 placeholder-purple-400/50 focus:outline-none focus:border-purple-500"})}),n.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:o.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-4xl mb-4",children:"🔍"}),n.jsx("p",{className:"text-purple-400",children:"No tokens found"})]}):o.map(l=>n.jsx("button",{onClick:()=>s(l),className:"w-full glass rounded-lg p-4 hover:bg-purple-500/20 transition-all text-left",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ht,{token:l,size:"xl"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-bold text-purple-200",children:l.token_name}),n.jsx("p",{className:"text-purple-400 text-sm",children:l.currency_code})]}),l.amm_pool_created&&n.jsx("span",{className:"px-3 py-1 bg-green-500/20 text-green-400 text-sm rounded-full",children:"Pool Active"})]})},l.id))})]})})}const M7="sEd7bAfzqZWKxaatJpoWzTvENyaTg1Y",Wx="rKxBBMmY969Ph1y63ddVfYyN7xmxwDfVq6",F7="sEd7W72aANTbLTG98XDhU1yfotPJdhu";function A2(){var Sl,_e;const[t,e]=T.useState([]),[r,s]=T.useState({}),[i,a]=T.useState({}),[o,l]=T.useState(null),[c,d]=T.useState({totalTokens:0,totalValue:0,topPerformer:null,recentActivity:[]}),[u,h]=T.useState(0),[p,f]=T.useState({totalXrpLocked:0,totalMarketCap:0}),[m,v]=T.useState({totalXrpLocked:0,totalMarketCap:0}),[x,b]=T.useState({totalTrustlines:0,totalHolders:0,trustlines24hAgo:0,holders24hAgo:0}),[y,g]=T.useState(0),[w,S]=T.useState(!1),[_,A]=T.useState(!1),[B,Q]=T.useState(!1),[U,q]=T.useState(""),[de,me]=T.useState(null),[ye,G]=T.useState(!1),[Z,he]=T.useState(!1),[ee,H]=T.useState(""),[I,K]=T.useState({name:"",issuer:"",supply:"1000000",xrpLocked:"1",description:"",twitterHandle:"",websiteUrl:""}),[re,z]=T.useState(null),[O,V]=T.useState(null),[ne,pe]=T.useState(!1),[ae,se]=T.useState(()=>window.innerWidth<768?"grid":"list"),[k,j]=T.useState("grid"),[P,$]=T.useState(null),[R,W]=T.useState(!1),[te,X]=T.useState([]),[oe,F]=T.useState(!1),[J,xe]=T.useState(!1),[Ee,Te]=T.useState(""),[Be,nt]=T.useState(null),[De,L]=T.useState(null),[N,E]=T.useState(null),[Y,fe]=T.useState(null),[we,Ne]=T.useState(!1),[Le,ze]=T.useState(!1),[st,Qe]=T.useState([]),[at,wt]=T.useState(0),[Gt,Dt]=T.useState(!1),[lr,os]=T.useState(null),[Bt,cr]=T.useState(""),[xt,pt]=T.useState("all"),[M,ve]=T.useState("all"),[be,Pe]=T.useState("newest"),[Me,Se]=T.useState("desc"),[Fe,Ke]=T.useState(1),[it,$e]=T.useState("all"),[lt,Yt]=T.useState("all"),[D,je]=T.useState(null),[Ue,Je]=T.useState(null),[dt,bt]=T.useState(!1),[Ye,Nt]=T.useState({}),[Tt,zt]=T.useState(!1),[rt,tt]=T.useState(!1),[kt,Pt]=T.useState(null),Mt=100;T.useEffect(()=>{(async()=>{await fr(),await pn(),It(),pr()})();const ue=setInterval(()=>{fr(),pr()},6e4),ge=()=>{It()};return window.addEventListener("walletConnected",ge),window.addEventListener("walletDisconnected",ge),()=>{clearInterval(ue),window.removeEventListener("walletConnected",ge),window.removeEventListener("walletDisconnected",ge)}},[]),T.useEffect(()=>{const C=ue=>{D&&!ue.target.closest(".swap-dropdown")&&je(null),Ue&&!ue.target.closest(".trust-dropdown")&&Je(null)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[D,Ue]),T.useEffect(()=>{t.length>0&&Object.keys(r).length===0&&Bn()},[t]),T.useEffect(()=>{const C=setInterval(()=>{t.length>0&&Bn(!1)},3e5);return()=>clearInterval(C)},[t]),T.useEffect(()=>{Object.keys(r).length>0&&ls()},[r,t]),T.useEffect(()=>{t.length>0&&x.totalTrustlines===0&&(As(),cs())},[t]),T.useEffect(()=>{o&&Object.keys(r).length>0&&Object.keys(i).length===0&&rr()},[o,r]),T.useEffect(()=>{if(t.length>0){const C={};t.forEach(ge=>{if(ge.amm_pool_created){const Re=parseFloat(Ft(ge));Ye[ge.id]||(C[ge.id]=Re)}}),Object.keys(C).length>0&&Nt(ge=>({...ge,...C}));const ue=setInterval(()=>{const ge={};t.forEach(Re=>{Re.amm_pool_created&&(ge[Re.id]=parseFloat(Ft(Re)))}),Nt(ge)},6e4);return()=>clearInterval(ue)}},[t]);const It=()=>{const C=localStorage.getItem("connectedWallet");l(C?JSON.parse(C):null)},pr=async()=>{var C;try{const ge=await(await fetch("https://api.coingecko.com/api/v3/simple/price?ids=ripple&vs_currencies=usd")).json();h(((C=ge.ripple)==null?void 0:C.usd)||0)}catch(ue){console.error("Error fetching XRP/USD price:",ue)}},ls=()=>{let C=0,ue=0,ge=0,Re=0;const ke=Date.now()-24*60*60*1e3;t.forEach(Ge=>{const qe=r[Ge.id];if(qe){C+=qe.xrpAmount;const Ie=qe.price,ft=Ge.supply||0;ue+=Ie*ft,new Date(Ge.created_at).getTime()>ke||(ge+=qe.xrpAmount,Re+=Ie*ft)}}),f({totalXrpLocked:C,totalMarketCap:ue}),v({totalXrpLocked:ge,totalMarketCap:Re})},cs=()=>{const C=Date.now()-864e5,ue=t.filter(ge=>new Date(ge.created_at).getTime()>C);g(ue.length)},As=async()=>{const C=new Ve.Client("wss://xrplcluster.com");try{await C.connect();let ue=0;const ge=new Set,Re=new Set,ke=Date.now()-24*60*60*1e3,Ge=t.filter(Ie=>new Date(Ie.created_at).getTime()>ke);let qe=0;for(const Ie of t){if(!Ie.amm_pool_created)continue;const ft=Ge.some(mt=>mt.id===Ie.id);try{const mt=Ie.currency_code.length>3?Et.Buffer.from(Ie.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):Ie.currency_code,ct=await C.request({command:"account_lines",account:Ie.issuer_address,ledger_index:"validated"});if(ct.result.lines){const gt=ct.result.lines.filter(Ot=>Ie.currency_code.length>3?Ot.currency===mt:Ot.currency===Ie.currency_code);ue+=gt.length,ft||(qe+=gt.length),gt.forEach(Ot=>{parseFloat(Ot.balance)>0&&(ge.add(Ot.account),ft||Re.add(Ot.account))})}}catch(mt){console.error(`Error fetching trustlines for ${Ie.token_name}:`,mt.message)}}b({totalTrustlines:ue,totalHolders:ge.size,trustlines24hAgo:qe,holders24hAgo:Re.size}),await C.disconnect()}catch(ue){console.error("Error fetching trustline stats:",ue)}},fr=async()=>{try{const C=vX("dashboard_tokens",su.TOKEN_LIST);if(C){console.log("✅ Using cached token list"),e(C),setFilteredTokens(C);return}const{data:ue,error:ge}=await le.from("meme_tokens").select("*").order("created_at",{ascending:!1});if(ge)throw ge;const Re=ue||[],{data:ke}=await le.from("pool_data_cache").select("*").gte("last_updated",new Date(Date.now()-su.POOL_DATA).toISOString());if(ke&&ke.length>0){const qe={};ke.forEach(Ie=>{qe[Ie.token_id]=Ie}),Re.forEach(Ie=>{if(Ie.amm_pool_created){const ft=qe[Ie.id];ft&&(Ie.amm_xrp_amount=parseFloat(ft.xrp_amount),Ie.amm_asset_amount=parseFloat(ft.token_amount))}})}e(Re),bX("dashboard_tokens",Re);const Ge={totalTokens:Re.length,totalValue:Re.reduce((qe,Ie)=>qe+(Ie.amm_xrp_amount||0),0),topPerformer:Re[0]||null,recentActivity:Re.slice(0,5)};d(Ge)}catch(C){console.error("Error loading tokens:",C)}},pn=async()=>{try{const{data:C,error:ue}=await le.from("pool_data_cache").select("*");if(!ue&&C&&C.length>0){const ge={};C.forEach(Re=>{ge[Re.token_id]={xrpAmount:parseFloat(Re.xrp_amount),tokenAmount:parseFloat(Re.token_amount),lpTokens:parseFloat(Re.lp_tokens),price:parseFloat(Re.price),accountId:Re.account_id,volume24h:parseFloat(Re.volume_24h||0),priceChange24h:parseFloat(Re.price_change_24h||0)}}),s(ge),console.log(`⚡ Dashboard: Loaded ${C.length} pools from cache instantly`)}}catch(C){console.error("Error loading cached pool data:",C)}},zr=async C=>{try{const ue=new Date(Date.now()-864e5).toISOString(),{data:ge,error:Re}=await le.from("trade_history").select("token_id, xrp_amount").in("token_id",C).gte("created_at",ue);if(Re)throw Re;const ke={};return C.forEach(Ge=>ke[Ge]=0),ge&&ge.length>0&&ge.forEach(Ge=>{const qe=parseFloat(Ge.xrp_amount||0);ke[Ge.token_id]=(ke[Ge.token_id]||0)+qe}),ke}catch(ue){return console.error("Error fetching 24h volumes:",ue),{}}},Bn=async(C=!1)=>{var ue;try{const{data:Re,error:ke}=await le.from("pool_data_cache").select("*").gte("last_updated",new Date(Date.now()-3e5).toISOString());if(!C&&Re&&Re.length>0&&!ke){console.log(`✅ Using cached pool data (${Re.length} pools)`);const ct={};Re.forEach(gt=>{ct[gt.token_id]={xrpAmount:parseFloat(gt.xrp_amount),tokenAmount:parseFloat(gt.token_amount),lpTokens:parseFloat(gt.lp_tokens),price:parseFloat(gt.price),accountId:gt.account_id,volume24h:parseFloat(gt.volume_24h||0),priceChange24h:parseFloat(gt.price_change_24h||0)}}),s(ct);return}console.log("🔄 Fetching fresh pool data from XRPL...");const{requestWithRetry:Ge}=await $t(()=>Promise.resolve().then(()=>tr),void 0),qe={},Ie=t.filter(ct=>ct.amm_pool_created),ft=await zr(Ie.map(ct=>ct.id));for(const ct of t)if(ct.amm_pool_created)try{const gt=ct.currency_code.length>3?Et.Buffer.from(ct.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):ct.currency_code,Ot=await Ge({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:gt,issuer:ct.issuer_address},ledger_index:"validated"});if(Ot.result.amm){const Vt=Ot.result.amm,jr=parseFloat(Vt.amount)/1e6,Lr=parseFloat(Vt.amount2.value),ds=parseFloat(((ue=Vt.lp_token)==null?void 0:ue.value)||0),Is=ft[ct.id]||0;qe[ct.id]={xrpAmount:jr,tokenAmount:Lr,lpTokens:ds,price:jr/Lr,accountId:Vt.account,volume24h:Is}}}catch(gt){console.error(`Error fetching pool data for ${ct.token_name}:`,gt.message)}const mt=Object.entries(qe).map(([ct,gt])=>({token_id:ct,xrp_amount:gt.xrpAmount,token_amount:gt.tokenAmount,lp_tokens:gt.lpTokens,price:gt.price,account_id:gt.accountId,volume_24h:gt.volume24h||0,price_change_24h:0,last_updated:new Date().toISOString()}));if(mt.length>0){for(const ct of mt)await le.from("pool_data_cache").upsert(ct,{onConflict:"token_id"});console.log(`💾 Cached ${mt.length} pools`)}s(qe)}catch(ge){console.error("Error fetching pools data:",ge)}},rr=async()=>{if(!o)return;const C=new Ve.Client("wss://xrplcluster.com");try{await C.connect();const ue=await C.request({command:"account_lines",account:o.address,ledger_index:"validated"}),ge={};ue.result.lines&&ue.result.lines.forEach(Re=>{const ke=t.find(Ge=>{const qe=r[Ge.id];return qe&&Re.account===qe.accountId});ke&&(ge[ke.id]=Re.balance)}),a(ge),await C.disconnect()}catch(ue){console.error("Error fetching LP balances:",ue)}},dr=()=>{if(ee!=="divercity"){ie.error("Incorrect password!");return}he(!1),A(!0),H("")},Ps=C=>{const ue=C.target.files[0];if(ue){z(ue);const ge=new FileReader;ge.onloadend=()=>{V(ge.result)},ge.readAsDataURL(ue)}},ce=async()=>{if(!I.name||!I.issuer){ie.error("Token name and issuer are required");return}try{pe(!0);let C=null;re&&(C=await Df(re));const ue={token_name:I.name,currency_code:I.name,issuer_address:I.issuer,receiver_address:"Manual Entry",supply:parseFloat(I.supply),amm_xrp_amount:parseFloat(I.xrpLocked),amm_pool_created:!0,status:"manual",amm_asset_amount:parseFloat(I.supply)*.9,description:I.description||null,twitter_handle:I.twitterHandle||null,website_url:I.websiteUrl||null};C&&(ue.image_url=C);const{data:ge,error:Re}=await le.from("meme_tokens").insert([ue]).select();if(Re)throw Re;ge&&ge[0]&&await Uv(ge[0].id),ie.success(`Token ${I.name} added successfully!`),A(!1),K({name:"",issuer:"",supply:"1000000",xrpLocked:"1",description:"",twitterHandle:"",websiteUrl:""}),z(null),V(null),fr()}catch(C){console.error("Error adding token:",C),ie.error("Failed to add token")}finally{pe(!1)}},Oe=async()=>{var ge,Re;if(U!=="divercity"){ie.error("Incorrect password!");return}S(!0),Q(!1),ze(!0),Dt(!1),wt(0),Qe([{title:"Generating Token Name",status:"pending"},{title:"Connecting to XRPL",status:"pending"},{title:"Validating Wallets",status:"pending"},{title:"Creating Trust Line",status:"pending"},{title:"Issuing Tokens",status:"pending"},{title:"Saving to Database",status:"pending"},{title:"Creating AMM Pool",status:"pending"},{title:"Complete",status:"pending"}]);const ue=(ke,Ge,qe={})=>{Qe(Ie=>Ie.map((ft,mt)=>mt===ke?{...ft,status:Ge,...qe}:ft)),wt(ke)};try{ue(0,"active");const ke=j7();ue(0,"complete",{data:`Token name: ${ke}`}),ue(1,"active");const Ge=new Ve.Client("wss://s.altnet.rippletest.net:51233");await Ge.connect(),ue(1,"complete"),ue(2,"active");const qe=Ve.Wallet.fromSeed(M7),Ie=Ve.Wallet.fromSeed(F7);try{await Ge.request({command:"account_info",account:qe.address})}catch(Mr){if(((ge=Mr.data)==null?void 0:ge.error)==="actNotFound"){ue(2,"error",{error:"Issuer wallet not funded"}),ie.error("Issuer wallet needs XRP. Please fund: "+qe.address),await Ge.disconnect(),S(!1);return}}try{await Ge.request({command:"account_info",account:Ie.address})}catch(Mr){if(((Re=Mr.data)==null?void 0:Re.error)==="actNotFound"){ue(2,"error",{error:"Receiver wallet not funded"}),ie.error("Receiver wallet needs XRP. Please fund: "+Ie.address),await Ge.disconnect(),S(!1);return}}ue(2,"complete"),ue(3,"active");const ft={TransactionType:"TrustSet",Account:Ie.address,LimitAmount:{currency:ke,issuer:qe.address,value:"1000000"}},mt=await Ge.autofill(ft),ct=Ie.sign(mt),gt=await Ge.submitAndWait(ct.tx_blob);if(gt.result.meta.TransactionResult!=="tesSUCCESS")throw ue(3,"error",{error:gt.result.meta.TransactionResult}),new Error("Trust line creation failed: "+gt.result.meta.TransactionResult);ue(3,"complete",{txHash:gt.result.hash}),ue(4,"active");const Ot={TransactionType:"Payment",Account:qe.address,Destination:Ie.address,Amount:{currency:ke,value:"1000000",issuer:qe.address}},Vt=await Ge.autofill(Ot),jr=qe.sign(Vt),Lr=await Ge.submitAndWait(jr.tx_blob);if(Lr.result.meta.TransactionResult!=="tesSUCCESS")throw ue(4,"error",{error:Lr.result.meta.TransactionResult}),new Error("Token issuance failed: "+Lr.result.meta.TransactionResult);ue(4,"complete",{txHash:Lr.result.hash}),ue(5,"active");const{data:ds,error:Is}=await le.from("meme_tokens").insert([{token_name:ke,currency_code:ke,issuer_address:qe.address,receiver_address:Ie.address,supply:1e6,tx_hash:Lr.result.hash,status:"issued",amm_pool_created:!1}]).select().single();if(Is)throw ue(5,"error",{error:Is.message}),Is;await Uv(ds.id),await $r({userAddress:qe.address,actionType:Ur.TOKEN_CREATED,description:`Created random meme token "${ke}" with 1M supply`,details:{token_name:ke,supply:1e6,issuer:qe.address},txHash:Lr.result.hash,tokenId:ds.id}),ue(5,"complete"),ue(6,"active");try{const Mr={TransactionType:"AMMCreate",Account:Ie.address,Amount:{currency:ke,value:"900000",issuer:qe.address},Amount2:Ve.xrpToDrops("1"),TradingFee:500},ed=await Ge.autofill(Mr),io=Ie.sign(ed),ao=await Ge.submitAndWait(io.tx_blob);ao.result.meta.TransactionResult==="tesSUCCESS"?(await le.from("meme_tokens").update({amm_pool_created:!0,amm_tx_hash:ao.result.hash,amm_asset_amount:9e5,amm_xrp_amount:1,initial_asset_amount:9e5,initial_xrp_amount:1,status:"amm_created"}).eq("id",ds.id),await $r({userAddress:Ie.address,actionType:Ur.AMM_CREATED,description:`Created AMM pool for ${ke} with 900K tokens and 1 XRP`,details:{token_name:ke,token_amount:9e5,xrp_amount:1},txHash:ao.result.hash,tokenId:ds.id}),ue(6,"complete",{txHash:ao.result.hash})):ue(6,"error",{error:ao.result.meta.TransactionResult})}catch(Mr){console.error("AMM creation error:",Mr),ue(6,"error",{error:Mr.message})}await Ge.disconnect(),ue(7,"complete"),Dt(!0),os({name:ke,supply:1e6,issuer:qe.address,receiver:Ie.address,token:ds}),fr()}catch(ke){console.error("Error creating token:",ke),ie.error(`Failed to create token: ${ke.message}`),ze(!1)}finally{S(!1),q("")}},We=C=>{if(!C.amm_pool_created||!C.amm_xrp_amount||!C.amm_asset_amount)return 0;const ue=C.amm_xrp_amount/C.amm_asset_amount;return(C.supply*ue).toFixed(4)},ut=C=>{const ue=r[C.id];return ue?ue.price.toFixed(8):!C.amm_pool_created||!C.amm_xrp_amount||!C.amm_asset_amount?0:(C.amm_xrp_amount/C.amm_asset_amount).toFixed(8)},Ft=C=>{const ue=r[C.id];return ue?(ue.xrpAmount*.15).toFixed(2):C.amm_pool_created?((C.amm_xrp_amount||0)*.15).toFixed(2):"-"},Rs=C=>{const ue=r[C.id];if(!ue||!ue.price)return"0.00";const ge=parseFloat(C.initial_xrp_amount)||parseFloat(C.amm_xrp_amount),Re=parseFloat(C.initial_asset_amount)||parseFloat(C.amm_asset_amount);if(!ge||!Re||Re===0)return"0.00";const ke=ue.price,Ge=ge/Re;return!Ge||Ge===0?"0.00":((ke-Ge)/Ge*100).toFixed(2)},kr=C=>{const ue=parseFloat(Ft(C));if(!ue||ue===0||!Ye[C.id])return"0.00";const ge=Ye[C.id];return!ge||ge===0?"0.00":((ue-ge)/ge*100).toFixed(2)},qs=C=>{be===C?Se(Me==="asc"?"desc":"asc"):(Pe(C),Se("desc"))},vl=C=>{const ue=ut(C),ge=We(C),Re=Et.Buffer.from(C.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"),ke=`https://xrpl.services/?issuer=${C.issuer_address}&currency=${Re}&limit=${C.supply}`,Ge=`https://xmagnetic.org/dex/${C.currency_code}+${C.issuer_address}_XRP+XRP?network=mainnet`,qe=`🚀 ${C.token_name} Token Info

💰 Supply: ${C.supply.toLocaleString()}
📊 Price: ${ue} XRP
💎 Market Cap: ${ge} XRP
✅ Status: ${C.amm_pool_created?"AMM Pool Active":"Pending"}

🔗 Trust Line:
${ke}

💱 Trade on Magnetic:
${Ge}

MORE #MEME COINS @ MEMEKINGS.ONLINE

#XRPL #Crypto #XRP`,Ie=`https://twitter.com/intent/tweet?text=${encodeURIComponent(qe)}`;window.open(Ie,"_blank","width=550,height=420")},Os=(C,ue=null)=>{nt({type:C,token:ue}),xe(!0),Te("")},vh=async()=>{if(Ee!=="divercity"){ie.error("Incorrect admin password!");return}try{if(Be.type==="delete"){const{error:C}=await le.from("meme_tokens").delete().eq("id",Be.token.id);if(C)throw C;ie.success(`Token ${Be.token.token_name} deleted!`)}else if(Be.type==="edit"){L({...Be.token,is_featured:Be.token.is_featured||!1,featured_order:Be.token.featured_order||null}),E(null),fe(null),xe(!1);return}xe(!1),Te(""),nt(null),fr()}catch(C){console.error("Admin action error:",C),ie.error("Failed to execute action")}},qm=C=>{const ue=C.target.files[0];if(ue){E(ue);const ge=new FileReader;ge.onloadend=()=>{fe(ge.result)},ge.readAsDataURL(ue)}},hi=async()=>{if(Ee!=="divercity"){ie.error("Incorrect admin password!");return}try{Ne(!0);let C=De.image_url;N&&(ie.loading("Uploading image to IPFS..."),C=await Df(N),ie.dismiss(),ie.success("Image uploaded successfully!")),De.is_featured&&De.featured_order?await k2(De.id,De.featured_order):De.is_featured===!1&&await k2(De.id,null);const ue={token_name:De.token_name,supply:parseFloat(De.supply),amm_xrp_amount:parseFloat(De.amm_xrp_amount),amm_asset_amount:parseFloat(De.amm_asset_amount),image_url:C,category:De.category||"Other",updated_at:new Date().toISOString()},{data:ge,error:Re}=await le.from("meme_tokens").update(ue).eq("id",De.id).select();if(Re)throw Re;const ke=ge[0];e(Ge=>Ge.map(qe=>qe.id===De.id?{...ke}:qe)),E7(De.id),L(null),Te(""),E(null),fe(null),ie.success("Token updated successfully!"),setTimeout(()=>{fr()},1e3)}catch(C){console.error("Update error:",C),ie.error("Failed to update token: "+C.message)}finally{Ne(!1)}},Xi=t.filter(C=>{const ue=C.token_name.toLowerCase().includes(Bt.toLowerCase())||C.issuer_address.toLowerCase().includes(Bt.toLowerCase()),ge=xt==="all"||xt==="active"&&C.amm_pool_created||xt==="pending"&&!C.amm_pool_created,Re=M==="all"||C.category===M,ke=it==="all"||it==="memeking"&&C.issuer_address===Wx||it==="user"&&o&&C.issuer_address===o.address;return ue&&ge&&Re&&ke}).sort((C,ue)=>{let ge=0;switch(be){case"newest":ge=new Date(ue.created_at)-new Date(C.created_at);break;case"oldest":ge=new Date(C.created_at)-new Date(ue.created_at);break;case"name":ge=C.token_name.localeCompare(ue.token_name);break;case"name-asc":ge=C.token_name.localeCompare(ue.token_name);break;case"name-desc":ge=ue.token_name.localeCompare(C.token_name);break;case"category":ge=(C.category||"").localeCompare(ue.category||"");break;case"days":ge=Cn(ue.created_at)-Cn(C.created_at);break;case"supply":ge=ue.supply-C.supply;break;case"supply-high":ge=ue.supply-C.supply;break;case"supply-low":ge=C.supply-ue.supply;break;case"price":ge=parseFloat(ut(ue))-parseFloat(ut(C));break;case"price-high":ge=parseFloat(ut(ue))-parseFloat(ut(C));break;case"price-low":ge=parseFloat(ut(C))-parseFloat(ut(ue));break;case"volume":ge=parseFloat(Ft(ue))-parseFloat(Ft(C));break;case"lp":ge=(parseFloat(i[ue.id])||0)-(parseFloat(i[C.id])||0);break;case"marketcap":ge=parseFloat(We(ue))-parseFloat(We(C));break;case"xrplocked":ge=(ue.amm_xrp_amount||0)-(C.amm_xrp_amount||0);break;case"status":ge=(ue.amm_pool_created?1:0)-(C.amm_pool_created?1:0);break;default:ge=0}return Me==="asc"?-ge:ge}),bl=Math.ceil(Xi.length/Mt),bh=Xi.slice((Fe-1)*Mt,Fe*Mt),wl=t.filter(C=>C.issuer_address===Wx),_l=t.filter(C=>C.issuer_address!==Wx),Zr=[...t].filter(C=>C.is_featured===!0&&C.amm_pool_created).sort((C,ue)=>(C.featured_order||999)-(ue.featured_order||999)).slice(0,3),sr=({token:C,featured:ue=!1})=>n.jsxs("div",{className:`glass rounded-lg p-6 space-y-4 hover:scale-105 transition-transform cursor-pointer ${ue?"border-2 border-purple-500/50":""}`,onClick:()=>$(C),children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ht,{token:C,size:"3xl"}),n.jsxs("div",{children:[n.jsx("h3",{className:`${ue?"text-2xl":"text-xl"} font-bold text-purple-200`,children:C.token_name}),n.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[n.jsx("p",{className:"text-purple-400 text-sm",children:C.currency_code}),C.category&&n.jsx(Dc,{category:C.category,size:"xs"}),n.jsxs("span",{className:"px-2 py-0.5 bg-purple-500/20 text-purple-300 text-xs rounded-full font-medium",children:["📅 ",Cn(C.created_at),"d"]})]})]})]}),C.amm_pool_created&&n.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-bold ${parseFloat(Rs(C))>=0?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:[parseFloat(Rs(C))>=0?"+":"",Rs(C),"%"]}),!C.amm_pool_created&&n.jsx("div",{className:"px-3 py-1 rounded-full text-xs font-medium bg-yellow-500/20 text-yellow-400",children:"○ Pending"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-purple-400 text-xs",children:"Live Price"}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-purple-200 text-sm font-bold",children:[ut(C)," XRP"]}),n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(parseFloat(ut(C))*u).toFixed(6)]})]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-purple-400 text-xs",children:"Volume 24h"}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[n.jsx("span",{className:"text-purple-200 text-sm font-bold",children:C.amm_pool_created?`${Ft(C)} XRP`:"-"}),C.amm_pool_created&&Ye[C.id]&&n.jsxs("span",{className:`text-xs font-medium px-1.5 py-0.5 rounded ${parseFloat(kr(C))>=0?"text-green-300 bg-green-500/10":"text-red-300 bg-red-500/10"}`,children:[parseFloat(kr(C))>=0?"+":"",kr(C),"%"]})]}),C.amm_pool_created&&n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(parseFloat(Ft(C))*u).toFixed(2)]})]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-purple-400 text-xs",children:"Your LP"}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-green-400 text-sm font-bold",children:i[C.id]?parseFloat(i[C.id]).toFixed(4):"-"}),i[C.id]&&r[C.id]&&n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(parseFloat(i[C.id])*r[C.id].price*2*u).toFixed(2)]})]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-purple-400 text-xs",children:"Market Cap (Live)"}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-purple-200 text-sm font-bold font-mono",children:[We(C)," XRP"]}),n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(parseFloat(We(C))*u).toFixed(2)]})]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-purple-400 text-xs",children:"XRP Locked (Live)"}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-purple-200 text-sm font-bold font-mono",children:[C.amm_xrp_amount?C.amm_xrp_amount.toFixed(2):"0.00"," XRP"]}),C.amm_xrp_amount&&n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(C.amm_xrp_amount*u).toFixed(2)]})]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-purple-400 text-xs",children:"Total Supply"}),n.jsx("span",{className:"text-purple-200 text-sm font-bold",children:C.supply.toLocaleString()})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-3 border-t border-purple-500/20",children:[n.jsx("div",{onClick:ge=>{ge.stopPropagation()},children:n.jsx(Vf,{token:C,connectedWallet:o,tokenBalance:0,onTrustlineUpdate:()=>{As()},size:"sm",className:"w-full",showDropdown:!0,isDropdownOpen:Ue===C.id,onDropdownToggle:ge=>Je(Ue===ge?null:ge)})}),n.jsxs("div",{className:"relative swap-dropdown",onClick:ge=>{ge.stopPropagation()},children:[n.jsxs("button",{onClick:()=>je(D===C.id?null:C.id),className:"w-full bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white font-bold text-xs px-3 py-2 rounded-lg text-center shadow-lg transition-all duration-300 flex items-center justify-center gap-1.5",children:[n.jsx("span",{children:"💱 Swap"}),n.jsx("svg",{className:`w-3.5 h-3.5 transition-transform ${D===C.id?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),D===C.id&&n.jsxs("div",{className:"absolute top-full left-0 mt-2 w-64 glass bg-gradient-to-br from-purple-900/95 to-purple-800/95 border border-purple-500/30 rounded-lg shadow-xl z-[9999] overflow-hidden",children:[n.jsxs("button",{onClick:()=>{je(null),localStorage.setItem("selectedTradeToken",JSON.stringify(C)),window.dispatchEvent(new CustomEvent("navigateToTrade",{detail:C}))},className:"w-full px-4 py-3 text-left hover:bg-purple-600/30 transition-colors flex items-center gap-3 border-b border-purple-500/30",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-500/20 flex items-center justify-center text-purple-300",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-purple-100 font-medium",children:"Trade Page"}),n.jsx("div",{className:"text-purple-300 text-xs",children:"Swap on MEMEKINGS"})]})]}),n.jsxs("a",{href:`https://xmagnetic.org/dex/${encodeURIComponent(C.currency_code)}+${encodeURIComponent(C.issuer_address)}_XRP+XRP?network=mainnet`,target:"_blank",rel:"noopener noreferrer",className:"w-full px-4 py-3 text-left hover:bg-purple-600/30 transition-colors flex items-center gap-3",onClick:()=>je(null),children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-500/20 flex items-center justify-center text-purple-300",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-purple-100 font-medium",children:"Magnetic Link"}),n.jsx("div",{className:"text-purple-300 text-xs",children:"Trade on xMagnetic"})]})]})]})]}),n.jsx("button",{className:"bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white font-bold text-xs px-3 py-2 rounded-lg shadow-lg shadow-purple-500/50 hover:shadow-purple-500/70",onClick:ge=>{ge.stopPropagation(),vl(C)},children:"𝕏 Post on X"}),n.jsx("button",{className:"bg-gradient-to-r from-indigo-600 to-indigo-700 hover:from-indigo-700 hover:to-indigo-800 text-white font-bold text-xs px-3 py-2 rounded-lg shadow-lg shadow-indigo-500/50 hover:shadow-indigo-500/70",onClick:ge=>{ge.stopPropagation(),window.dispatchEvent(new CustomEvent("navigateToToken",{detail:C.token_name}))},children:"👁️ View Profile"})]})]}),Nl=({token:C})=>n.jsxs("tr",{className:"border-t border-purple-500/20 hover:bg-purple-900/20 cursor-pointer",onClick:()=>$(C),children:[n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ht,{token:C,size:"3xl"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-bold text-purple-200 hover:text-purple-100 cursor-pointer",onClick:ue=>{ue.stopPropagation(),window.dispatchEvent(new CustomEvent("navigateToToken",{detail:C.token_name}))},children:C.token_name}),n.jsx("div",{className:"text-purple-400 text-xs",children:C.currency_code})]})]})}),n.jsx("td",{className:"px-4 py-3",children:C.category?n.jsx(Dc,{category:C.category,size:"xs"}):n.jsx("span",{className:"text-purple-400 text-xs",children:"-"})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("span",{className:"px-2 py-0.5 bg-purple-500/20 text-purple-300 text-xs rounded-full font-medium inline-block",children:["📅 ",Cn(C.created_at),"d"]})}),n.jsx("td",{className:"px-4 py-3 text-purple-300 text-xs",children:C.supply.toLocaleString()}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-purple-200 font-mono text-xs",children:ut(C)}),C.amm_pool_created&&n.jsxs("span",{className:`text-xs font-medium px-1.5 py-0.5 rounded whitespace-nowrap ${parseFloat(Rs(C))>=0?"text-green-300 bg-green-500/10":"text-red-300 bg-red-500/10"}`,children:[parseFloat(Rs(C))>=0?"+":"",Rs(C),"%"]})]}),n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(parseFloat(ut(C))*u).toFixed(6)]})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-purple-200 text-xs",children:C.amm_pool_created?`${Ft(C)} XRP`:"-"}),C.amm_pool_created&&Ye[C.id]&&n.jsxs("span",{className:`text-xs font-medium px-1.5 py-0.5 rounded whitespace-nowrap ${parseFloat(kr(C))>=0?"text-green-300 bg-green-500/10":"text-red-300 bg-red-500/10"}`,children:[parseFloat(kr(C))>=0?"+":"",kr(C),"%"]})]}),C.amm_pool_created&&n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(parseFloat(Ft(C))*u).toFixed(2)]})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-green-400 text-xs font-bold",children:i[C.id]?parseFloat(i[C.id]).toFixed(4):"-"}),i[C.id]&&r[C.id]&&n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(parseFloat(i[C.id])*r[C.id].price*2*u).toFixed(2)]})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{children:[n.jsxs("div",{className:"text-purple-200 text-xs font-mono",children:[We(C)," XRP"]}),n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(parseFloat(We(C))*u).toFixed(2)]})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{children:[n.jsxs("div",{className:"text-purple-300 text-xs font-mono",children:[C.amm_xrp_amount?C.amm_xrp_amount.toFixed(2):"0.00"," XRP"]}),C.amm_xrp_amount&&n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(C.amm_xrp_amount*u).toFixed(2)]})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${C.amm_pool_created?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:C.amm_pool_created?"✓":"○"})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex gap-1 flex-wrap",children:[n.jsx("div",{onClick:ue=>{ue.stopPropagation()},children:n.jsx(Vf,{token:C,connectedWallet:o,tokenBalance:0,onTrustlineUpdate:()=>{As()},size:"sm",showDropdown:!0,isDropdownOpen:Ue===C.id,onDropdownToggle:ue=>Je(Ue===ue?null:ue)})}),n.jsxs("div",{className:"relative swap-dropdown",onClick:ue=>{ue.stopPropagation()},children:[n.jsxs("button",{onClick:()=>je(D===C.id?null:C.id),className:"bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white font-bold text-xs px-3 py-2 rounded-lg shadow-lg transition-all duration-300 flex items-center gap-1.5",title:"Swap options",children:[n.jsx("span",{children:"💱 Swap"}),n.jsx("svg",{className:`w-3.5 h-3.5 transition-transform ${D===C.id?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),D===C.id&&n.jsxs("div",{className:"absolute top-full left-0 mt-2 w-64 glass bg-gradient-to-br from-purple-900/95 to-purple-800/95 border border-purple-500/30 rounded-lg shadow-xl z-[9999] overflow-hidden",children:[n.jsxs("button",{onClick:()=>{je(null),localStorage.setItem("selectedTradeToken",JSON.stringify(C)),window.dispatchEvent(new CustomEvent("navigateToTrade",{detail:C}))},className:"w-full px-4 py-3 text-left hover:bg-purple-600/30 transition-colors flex items-center gap-3 border-b border-purple-500/30",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-500/20 flex items-center justify-center text-purple-300",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-purple-100 font-medium",children:"Trade Page"}),n.jsx("div",{className:"text-purple-300 text-xs",children:"Swap on MEMEKINGS"})]})]}),n.jsxs("a",{href:`https://xmagnetic.org/dex/${encodeURIComponent(C.currency_code)}+${encodeURIComponent(C.issuer_address)}_XRP+XRP?network=mainnet`,target:"_blank",rel:"noopener noreferrer",className:"w-full px-4 py-3 text-left hover:bg-purple-600/30 transition-colors flex items-center gap-3",onClick:()=>je(null),children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-500/20 flex items-center justify-center text-purple-300",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-purple-100 font-medium",children:"Magnetic Link"}),n.jsx("div",{className:"text-purple-300 text-xs",children:"Trade on xMagnetic"})]})]})]})]}),n.jsx("button",{className:"bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white font-bold text-xs px-3 py-2 rounded-lg shadow-lg shadow-purple-500/50 hover:shadow-purple-500/70",onClick:ue=>{ue.stopPropagation(),vl(C)},title:"Post on X",children:"𝕏 Post"})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white text-xs px-2 py-1 rounded",onClick:ue=>{ue.stopPropagation(),Os("edit",C)},title:"Edit Token",children:"✏️"}),n.jsx("button",{className:"bg-red-600 hover:bg-red-700 text-white text-xs px-2 py-1 rounded",onClick:ue=>{ue.stopPropagation(),Os("delete",C)},title:"Delete Token",children:"🗑️"})]})})]});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-purple-200",children:"Dashboard"}),n.jsx("p",{className:"text-purple-400 mt-1 text-sm sm:text-base",children:"Meme token factory control center"})]}),n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 w-full sm:w-auto",children:[n.jsx("button",{onClick:async()=>{bt(!0);try{await fr(),await Bn(!0),ie.success("Dashboard refreshed!")}catch(C){console.error("Error refreshing:",C),ie.error("Failed to refresh")}finally{bt(!1)}},disabled:dt,className:"btn text-purple-300 px-3 sm:px-4 py-2 sm:py-3 rounded-lg font-medium flex items-center gap-1 sm:gap-2 text-sm sm:text-base flex-1 sm:flex-initial justify-center disabled:opacity-50",title:"Refresh Dashboard",children:n.jsx("span",{className:dt?"animate-spin":"",children:dt?"⟳":"🔄"})}),n.jsxs("button",{onClick:async()=>{if(!o){ie.error("Please connect a wallet first");return}W(!0),F(!0);try{const{data:C,error:ue}=await le.from("activity_logs").select("*").eq("user_address",o.address).order("created_at",{ascending:!1}).limit(50);if(ue)throw ue;X(C||[])}catch(C){console.error("Error loading activities:",C),ie.error("Failed to load activities")}finally{F(!1)}},className:"btn text-purple-300 px-3 sm:px-4 py-2 sm:py-3 rounded-lg font-medium flex items-center gap-1 sm:gap-2 text-sm sm:text-base flex-1 sm:flex-initial justify-center",children:[n.jsx("span",{children:"📜"})," ",n.jsx("span",{className:"hidden xs:inline",children:"Activity"})]}),n.jsxs("a",{href:"https://x.com/MEMEKINGSXRPL",target:"_blank",rel:"noopener noreferrer",className:"btn text-white px-3 sm:px-4 py-2 sm:py-3 rounded-lg font-medium flex items-center gap-1 sm:gap-2 relative overflow-hidden group animate-glow text-sm sm:text-base flex-1 sm:flex-initial justify-center",style:{background:"linear-gradient(135deg, #9333ea 0%, #7e22ce 100%)",boxShadow:"0 0 20px rgba(147, 51, 234, 0.5)"},children:[n.jsx("span",{className:"text-xl",children:"𝕏"})," ",n.jsx("span",{className:"hidden xs:inline",children:"Twitter"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[n.jsxs("div",{className:"glass rounded-lg p-4 sm:p-6",children:[n.jsx("div",{className:"text-purple-400 text-xs sm:text-sm mb-2",children:"Total Tokens"}),n.jsxs("div",{className:"flex items-baseline gap-2 flex-wrap",children:[n.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-green-400",children:c.totalTokens}),y>0&&n.jsxs("div",{className:"text-green-300 text-sm sm:text-base font-medium",children:["+",y," (+",(y/c.totalTokens*100).toFixed(1),"%)"]})]}),n.jsx("div",{className:"text-green-300 text-xs sm:text-sm mt-1",children:"MEMEKINGS Tokens"}),n.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Last 24h"})]}),n.jsxs("div",{className:"glass rounded-lg p-4 sm:p-6",children:[n.jsx("div",{className:"text-purple-400 text-xs sm:text-sm mb-2",children:"Total XRP Locked"}),n.jsxs("div",{className:"flex items-baseline gap-2 flex-wrap",children:[n.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-green-400",children:p.totalXrpLocked.toFixed(2)}),m.totalXrpLocked>0&&n.jsxs("div",{className:`text-sm sm:text-base font-medium ${p.totalXrpLocked>m.totalXrpLocked?"text-green-300":p.totalXrpLocked<m.totalXrpLocked?"text-red-300":"text-purple-400"}`,children:[p.totalXrpLocked>m.totalXrpLocked?"+":"",(p.totalXrpLocked-m.totalXrpLocked).toFixed(2),"(",((p.totalXrpLocked-m.totalXrpLocked)/m.totalXrpLocked*100).toFixed(1),"%)"]})]}),n.jsxs("div",{className:"text-green-300 text-xs sm:text-sm mt-1",children:["$",(p.totalXrpLocked*u).toFixed(2)," USD"]}),n.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Last 24h"})]}),n.jsxs("div",{className:"glass rounded-lg p-4 sm:p-6",children:[n.jsx("div",{className:"text-purple-400 text-xs sm:text-sm mb-2",children:"Total Market Cap"}),n.jsxs("div",{className:"flex items-baseline gap-2 flex-wrap",children:[n.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-green-400",children:p.totalMarketCap.toFixed(2)}),m.totalMarketCap>0&&n.jsxs("div",{className:`text-sm sm:text-base font-medium ${p.totalMarketCap>m.totalMarketCap?"text-green-300":p.totalMarketCap<m.totalMarketCap?"text-red-300":"text-purple-400"}`,children:[p.totalMarketCap>m.totalMarketCap?"+":"",(p.totalMarketCap-m.totalMarketCap).toFixed(2),"(",((p.totalMarketCap-m.totalMarketCap)/m.totalMarketCap*100).toFixed(1),"%)"]})]}),n.jsxs("div",{className:"text-green-300 text-xs sm:text-sm mt-1",children:["$",(p.totalMarketCap*u).toFixed(2)," USD"]}),n.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Last 24h"})]}),n.jsxs("div",{className:"glass rounded-lg p-4 sm:p-6",children:[n.jsx("div",{className:"text-purple-400 text-xs sm:text-sm mb-2",children:"Total Holders"}),n.jsxs("div",{className:"flex items-baseline gap-2 flex-wrap",children:[n.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-green-400",children:x.totalHolders.toLocaleString()}),x.holders24hAgo>0&&n.jsxs("div",{className:`text-sm sm:text-base font-medium ${x.totalHolders>x.holders24hAgo?"text-green-300":x.totalHolders<x.holders24hAgo?"text-red-300":"text-purple-400"}`,children:[x.totalHolders>x.holders24hAgo?"+":"",(x.totalHolders-x.holders24hAgo).toLocaleString(),"(",((x.totalHolders-x.holders24hAgo)/x.holders24hAgo*100).toFixed(1),"%)"]})]}),n.jsxs("div",{className:"text-green-300 text-xs sm:text-sm mt-1",children:[x.totalTrustlines.toLocaleString()," trustlines"]}),n.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Last 24h"})]})]}),Zr.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[n.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-purple-200",children:"🔥 Top 3 Featured"}),n.jsx("button",{onClick:()=>{if(!o){ie.error("Please connect your wallet first");return}zt(!0)},className:"bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-700 hover:to-orange-700 text-white px-4 py-2 rounded-lg text-sm font-semibold transition-all shadow-lg hover:shadow-xl flex items-center gap-2",children:"⭐ Get Featured"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>j("grid"),className:`px-4 py-2 rounded-lg transition-all text-sm ${k==="grid"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"▦ Grid"}),n.jsx("button",{onClick:()=>j("list"),className:`px-4 py-2 rounded-lg transition-all text-sm ${k==="list"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"☰ List"})]})]}),k==="grid"?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Zr.map(C=>n.jsx(sr,{token:C,featured:!0},C.id))}):n.jsx("div",{className:"overflow-x-auto glass rounded-lg p-4",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-purple-900/30",children:n.jsxs("tr",{children:[n.jsxs("th",{className:"text-left px-4 py-3 text-purple-300 font-medium cursor-pointer hover:text-purple-200 select-none",onDoubleClick:()=>qs("name"),title:"Double-click to sort",children:["Token ",be==="name"&&(Me==="asc"?"↑":"↓")]}),n.jsxs("th",{className:"text-left px-4 py-3 text-purple-300 font-medium cursor-pointer hover:text-purple-200 select-none",onDoubleClick:()=>qs("category"),title:"Double-click to sort",children:["Category ",be==="category"&&(Me==="asc"?"↑":"↓")]}),n.jsxs("th",{className:"text-left px-4 py-3 text-purple-300 font-medium cursor-pointer hover:text-purple-200 select-none",onDoubleClick:()=>qs("days"),title:"Double-click to sort",children:["Days ",be==="days"&&(Me==="asc"?"↑":"↓")]}),n.jsxs("th",{className:"text-left px-4 py-3 text-purple-300 font-medium cursor-pointer hover:text-purple-200 select-none",onDoubleClick:()=>qs("supply"),title:"Double-click to sort",children:["Supply ",be==="supply"&&(Me==="asc"?"↑":"↓")]}),n.jsxs("th",{className:"text-left px-4 py-3 text-purple-300 font-medium cursor-pointer hover:text-purple-200 select-none",onDoubleClick:()=>qs("price"),title:"Double-click to sort",children:["Live Price ",be==="price"&&(Me==="asc"?"↑":"↓")]}),n.jsxs("th",{className:"text-left px-4 py-3 text-purple-300 font-medium cursor-pointer hover:text-purple-200 select-none",onDoubleClick:()=>qs("volume"),title:"Double-click to sort",children:["Volume 24h ",be==="volume"&&(Me==="asc"?"↑":"↓")]}),n.jsxs("th",{className:"text-left px-4 py-3 text-purple-300 font-medium cursor-pointer hover:text-purple-200 select-none",onDoubleClick:()=>qs("lp"),title:"Double-click to sort",children:["Your LP ",be==="lp"&&(Me==="asc"?"↑":"↓")]}),n.jsxs("th",{className:"text-left px-4 py-3 text-purple-300 font-medium cursor-pointer hover:text-purple-200 select-none",onDoubleClick:()=>qs("marketcap"),title:"Double-click to sort",children:["Market Cap (Live) ",be==="marketcap"&&(Me==="asc"?"↑":"↓")]}),n.jsxs("th",{className:"text-left px-4 py-3 text-purple-300 font-medium cursor-pointer hover:text-purple-200 select-none",onDoubleClick:()=>qs("xrplocked"),title:"Double-click to sort",children:["XRP Locked (Live) ",be==="xrplocked"&&(Me==="asc"?"↑":"↓")]}),n.jsxs("th",{className:"text-left px-4 py-3 text-purple-300 font-medium cursor-pointer hover:text-purple-200 select-none",onDoubleClick:()=>qs("status"),title:"Double-click to sort",children:["Status ",be==="status"&&(Me==="asc"?"↑":"↓")]}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Actions"})]})}),n.jsx("tbody",{children:Zr.map(C=>n.jsx(Nl,{token:C},C.id))})]})})]}),n.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 mb-6 overflow-x-auto",children:[n.jsx("button",{onClick:()=>Yt("all"),className:`px-4 sm:px-6 py-2 sm:py-3 rounded-lg transition-all font-medium text-sm sm:text-lg whitespace-nowrap ${lt==="all"?"bg-purple-600 text-white shadow-lg":"glass text-purple-300 hover:bg-purple-900/30"}`,children:"All Tokens"}),n.jsx("button",{onClick:()=>Yt("user"),className:`px-4 sm:px-6 py-2 sm:py-3 rounded-lg transition-all font-medium text-sm sm:text-lg whitespace-nowrap ${lt==="user"?"bg-purple-600 text-white shadow-lg":"glass text-purple-300 hover:bg-purple-900/30"}`,children:"User Tokens"})]}),lt==="all"&&n.jsxs("div",{className:"glass rounded-lg p-4 sm:p-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mb-4",children:[n.jsx("h3",{className:"text-lg sm:text-xl font-bold text-purple-200",children:"All Tokens"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>se("list"),className:`px-3 sm:px-4 py-2 rounded-lg transition-all text-sm sm:text-base ${ae==="list"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:["☰ ",n.jsx("span",{className:"hidden sm:inline",children:"List"})]}),n.jsxs("button",{onClick:()=>se("grid"),className:`px-3 sm:px-4 py-2 rounded-lg transition-all text-sm sm:text-base ${ae==="grid"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:["▦ ",n.jsx("span",{className:"hidden sm:inline",children:"Grid"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-2 sm:gap-3 mb-6",children:[n.jsx("input",{type:"text",placeholder:"🔍 Search...",value:Bt,onChange:C=>cr(C.target.value),className:"input text-purple-200 sm:col-span-2 lg:col-span-2 text-sm sm:text-base"}),n.jsxs("select",{value:xt,onChange:C=>pt(C.target.value),className:"input text-purple-200 text-sm sm:text-base",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"pending",children:"Pending"})]}),n.jsxs("select",{value:M,onChange:C=>ve(C.target.value),className:"input text-purple-200 text-sm sm:text-base",children:[n.jsx("option",{value:"all",children:"All Categories"}),n.jsx("option",{value:"Meme",children:"😂 Meme"}),n.jsx("option",{value:"Gaming",children:"🎮 Gaming"}),n.jsx("option",{value:"DeFi",children:"💰 DeFi"}),n.jsx("option",{value:"Utility",children:"🔧 Utility"}),n.jsx("option",{value:"Community",children:"👥 Community"}),n.jsx("option",{value:"NFT",children:"🎨 NFT"}),n.jsx("option",{value:"AI",children:"🤖 AI"}),n.jsx("option",{value:"Other",children:"📦 Other"})]}),n.jsxs("select",{value:be,onChange:C=>Pe(C.target.value),className:"input text-purple-200 text-sm sm:text-base",children:[n.jsx("option",{value:"newest",children:"Newest"}),n.jsx("option",{value:"oldest",children:"Oldest"}),n.jsx("option",{value:"name-asc",children:"Name (A-Z)"}),n.jsx("option",{value:"name-desc",children:"Name (Z-A)"}),n.jsx("option",{value:"marketcap",children:"Market Cap"}),n.jsx("option",{value:"supply-high",children:"Supply ↓"}),n.jsx("option",{value:"supply-low",children:"Supply ↑"}),n.jsx("option",{value:"price-high",children:"Price ↓"}),n.jsx("option",{value:"price-low",children:"Price ↑"})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0 mb-3",children:[n.jsxs("div",{className:"text-purple-400 text-xs sm:text-sm",children:["Showing ",(Fe-1)*Mt+1,"-",Math.min(Fe*Mt,Xi.length)," of ",Xi.length," tokens"]}),bl>1&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:()=>Ke(C=>Math.max(1,C-1)),disabled:Fe===1,className:"px-2 sm:px-3 py-1 btn text-purple-300 rounded disabled:opacity-50 text-xs sm:text-sm",children:[n.jsx("span",{className:"hidden sm:inline",children:"Previous"}),n.jsx("span",{className:"sm:hidden",children:"Prev"})]}),n.jsxs("span",{className:"text-purple-300 text-xs sm:text-sm whitespace-nowrap",children:[Fe,"/",bl]}),n.jsx("button",{onClick:()=>Ke(C=>Math.min(bl,C+1)),disabled:Fe===bl,className:"px-2 sm:px-3 py-1 btn text-purple-300 rounded disabled:opacity-50 text-xs sm:text-sm",children:"Next"})]})]}),ae==="grid"?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:bh.map(C=>n.jsx(sr,{token:C},C.id))}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-purple-900/30",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Token"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Category"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Days"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Supply"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Live Price"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Volume 24h"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Your LP"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Market Cap (Live)"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"XRP Locked (Live)"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Status"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Actions"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Admin"})]})}),n.jsx("tbody",{children:bh.map(C=>n.jsx(Nl,{token:C},C.id))})]})})]}),lt==="memeking_disabled"&&n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-xl font-bold text-purple-200",children:"MemeKing Tokens"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>se("list"),className:`px-4 py-2 rounded-lg transition-all ${ae==="list"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"☰ List"}),n.jsx("button",{onClick:()=>se("grid"),className:`px-4 py-2 rounded-lg transition-all ${ae==="grid"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"▦ Grid"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-6",children:[n.jsx("input",{type:"text",placeholder:"🔍 Search tokens...",value:Bt,onChange:C=>cr(C.target.value),className:"input text-purple-200 md:col-span-2"}),n.jsxs("select",{value:xt,onChange:C=>pt(C.target.value),className:"input text-purple-200",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"active",children:"Active Only"}),n.jsx("option",{value:"pending",children:"Pending Only"})]}),n.jsxs("select",{value:be,onChange:C=>Pe(C.target.value),className:"input text-purple-200",children:[n.jsx("option",{value:"newest",children:"Newest First"}),n.jsx("option",{value:"oldest",children:"Oldest First"}),n.jsx("option",{value:"marketcap",children:"Market Cap"}),n.jsx("option",{value:"supply",children:"Supply"})]})]}),n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"text-purple-400 text-sm",children:["Showing ",wl.filter(C=>{const ue=C.token_name.toLowerCase().includes(Bt.toLowerCase())||C.issuer_address.toLowerCase().includes(Bt.toLowerCase()),ge=xt==="all"||xt==="active"&&C.amm_pool_created||xt==="pending"&&!C.amm_pool_created;return ue&&ge}).length," of ",wl.length," MemeKing tokens"]})}),ae==="grid"?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:wl.filter(C=>{const ue=C.token_name.toLowerCase().includes(Bt.toLowerCase())||C.issuer_address.toLowerCase().includes(Bt.toLowerCase()),ge=xt==="all"||xt==="active"&&C.amm_pool_created||xt==="pending"&&!C.amm_pool_created;return ue&&ge}).sort((C,ue)=>{var ge,Re;switch(be){case"oldest":return new Date(C.created_at)-new Date(ue.created_at);case"marketcap":return(((ge=r[ue.id])==null?void 0:ge.marketCap)||0)-(((Re=r[C.id])==null?void 0:Re.marketCap)||0);case"supply":return ue.supply-C.supply;default:return new Date(ue.created_at)-new Date(C.created_at)}}).map(C=>renderTokenCard(C))}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-purple-500/20",children:[n.jsx("th",{className:"text-left py-3 px-4 text-purple-300",children:"Token"}),n.jsx("th",{className:"text-left py-3 px-4 text-purple-300",children:"Supply"}),n.jsx("th",{className:"text-left py-3 px-4 text-purple-300",children:"XRP Locked (Live)"}),n.jsx("th",{className:"text-left py-3 px-4 text-purple-300",children:"Price"}),n.jsx("th",{className:"text-left py-3 px-4 text-purple-300",children:"Market Cap (Live)"}),n.jsx("th",{className:"text-left py-3 px-4 text-purple-300",children:"Status"}),n.jsx("th",{className:"text-left py-3 px-4 text-purple-300",children:"Actions"})]})}),n.jsx("tbody",{children:wl.filter(C=>{const ue=C.token_name.toLowerCase().includes(Bt.toLowerCase())||C.issuer_address.toLowerCase().includes(Bt.toLowerCase()),ge=xt==="all"||xt==="active"&&C.amm_pool_created||xt==="pending"&&!C.amm_pool_created;return ue&&ge}).sort((C,ue)=>{var ge,Re;switch(be){case"oldest":return new Date(C.created_at)-new Date(ue.created_at);case"marketcap":return(((ge=r[ue.id])==null?void 0:ge.marketCap)||0)-(((Re=r[C.id])==null?void 0:Re.marketCap)||0);case"supply":return ue.supply-C.supply;default:return new Date(ue.created_at)-new Date(C.created_at)}}).map(C=>n.jsx(Nl,{token:C},C.id))})]})})]}),lt==="user"&&n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-xl font-bold text-purple-200",children:"User Created Tokens"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>se("list"),className:`px-4 py-2 rounded-lg transition-all ${ae==="list"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"☰ List"}),n.jsx("button",{onClick:()=>se("grid"),className:`px-4 py-2 rounded-lg transition-all ${ae==="grid"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"▦ Grid"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-6",children:[n.jsx("input",{type:"text",placeholder:"🔍 Search tokens...",value:Bt,onChange:C=>cr(C.target.value),className:"input text-purple-200 md:col-span-2"}),n.jsxs("select",{value:xt,onChange:C=>pt(C.target.value),className:"input text-purple-200",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"active",children:"Active Only"}),n.jsx("option",{value:"pending",children:"Pending Only"})]}),n.jsxs("select",{value:be,onChange:C=>Pe(C.target.value),className:"input text-purple-200",children:[n.jsx("option",{value:"newest",children:"Newest First"}),n.jsx("option",{value:"oldest",children:"Oldest First"}),n.jsx("option",{value:"marketcap",children:"Market Cap"}),n.jsx("option",{value:"supply",children:"Supply"})]})]}),n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"text-purple-400 text-sm",children:["Showing ",_l.filter(C=>{const ue=C.token_name.toLowerCase().includes(Bt.toLowerCase())||C.issuer_address.toLowerCase().includes(Bt.toLowerCase()),ge=xt==="all"||xt==="active"&&C.amm_pool_created||xt==="pending"&&!C.amm_pool_created;return ue&&ge}).length," of ",_l.length," user tokens"]})}),ae==="grid"?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_l.filter(C=>{const ue=C.token_name.toLowerCase().includes(Bt.toLowerCase())||C.issuer_address.toLowerCase().includes(Bt.toLowerCase()),ge=xt==="all"||xt==="active"&&C.amm_pool_created||xt==="pending"&&!C.amm_pool_created;return ue&&ge}).sort((C,ue)=>{switch(be){case"newest":return new Date(ue.created_at)-new Date(C.created_at);case"oldest":return new Date(C.created_at)-new Date(ue.created_at);case"marketcap":return parseFloat(We(ue))-parseFloat(We(C));case"supply":return ue.supply-C.supply;default:return 0}}).map(C=>n.jsx(sr,{token:C},C.id))}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-purple-900/30",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Token"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Supply"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Starting Price"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Live Price"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Volume 24h"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Your LP"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Starting Cap"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Starting XRP"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Status"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Actions"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Admin"})]})}),n.jsx("tbody",{children:_l.filter(C=>{const ue=C.token_name.toLowerCase().includes(Bt.toLowerCase())||C.issuer_address.toLowerCase().includes(Bt.toLowerCase()),ge=xt==="all"||xt==="active"&&C.amm_pool_created||xt==="pending"&&!C.amm_pool_created;return ue&&ge}).sort((C,ue)=>{switch(be){case"newest":return new Date(ue.created_at)-new Date(C.created_at);case"oldest":return new Date(C.created_at)-new Date(ue.created_at);case"marketcap":return parseFloat(We(ue))-parseFloat(We(C));case"supply":return ue.supply-C.supply;default:return 0}}).map(C=>n.jsx(Nl,{token:C},C.id))})]})})]}),Z&&n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"glass rounded-lg p-8 max-w-md w-full",children:[n.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-4",children:"Password Required"}),n.jsx("p",{className:"text-purple-300 mb-6",children:"Enter password to add a token manually to the dashboard."}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:"Password"}),n.jsx("input",{type:"password",value:ee,onChange:C=>H(C.target.value),onKeyPress:C=>C.key==="Enter"&&dr(),className:"input w-full text-purple-200",placeholder:"Enter password",autoFocus:!0})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:dr,className:"btn-primary text-white px-6 py-2 rounded-lg font-medium flex-1",children:"Continue"}),n.jsx("button",{onClick:()=>{he(!1),H("")},className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium",children:"Cancel"})]})]})}),_&&n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"glass rounded-lg p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:"Add Token Manually"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:"Token Name *"}),n.jsx("input",{type:"text",value:I.name,onChange:C=>K({...I,name:C.target.value}),className:"input w-full text-purple-200",placeholder:"KOOL"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:"Issuer Address *"}),n.jsx("input",{type:"text",value:I.issuer,onChange:C=>K({...I,issuer:C.target.value}),className:"input w-full text-purple-200 font-mono",placeholder:"rXXXXXXXXXXXXXXXXXXXXXXXXXXXX"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:"Total Supply"}),n.jsx("input",{type:"number",value:I.supply,onChange:C=>K({...I,supply:C.target.value}),className:"input w-full text-purple-200",placeholder:"1000000"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:"XRP Locked (for market cap calc)"}),n.jsx("input",{type:"number",step:"0.01",value:I.xrpLocked,onChange:C=>K({...I,xrpLocked:C.target.value}),className:"input w-full text-purple-200",placeholder:"1"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:"Token Image (Optional)"}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("input",{type:"file",accept:"image/*",onChange:Ps,className:"input w-full text-purple-200"}),n.jsx("p",{className:"text-purple-400 text-xs mt-1",children:"Upload an image for the token icon"})]}),O&&n.jsx("div",{className:"w-20 h-20 rounded-lg border-2 border-purple-500/30 overflow-hidden",children:n.jsx("img",{src:O,alt:"Preview",className:"w-full h-full object-cover"})})]})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:ce,disabled:ne,className:"btn-primary text-white px-6 py-2 rounded-lg font-medium flex-1 disabled:opacity-50",children:ne?"Uploading...":"Add Token"}),n.jsx("button",{onClick:()=>{A(!1),K({name:"",issuer:"",supply:"1000000",xrpLocked:"1"}),z(null),V(null)},className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium",children:"Cancel"})]})]})}),P&&n.jsx(r_,{token:P,onClose:()=>$(null)}),J&&n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"glass rounded-lg p-8 max-w-md w-full",children:[n.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-4",children:"Admin Access Required"}),n.jsx("p",{className:"text-purple-300 mb-6",children:(Be==null?void 0:Be.type)==="delete"?`Delete token "${(Sl=Be==null?void 0:Be.token)==null?void 0:Sl.token_name}"?`:`Edit token "${(_e=Be==null?void 0:Be.token)==null?void 0:_e.token_name}"?`}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:"Admin Password"}),n.jsx("input",{type:"password",value:Ee,onChange:C=>Te(C.target.value),onKeyPress:C=>C.key==="Enter"&&vh(),className:"input w-full text-purple-200",placeholder:"Enter admin password",autoFocus:!0})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:vh,className:"btn-primary text-white px-6 py-2 rounded-lg font-medium flex-1",children:"Confirm"}),n.jsx("button",{onClick:()=>{xe(!1),Te(""),nt(null)},className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium",children:"Cancel"})]})]})}),B&&n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"glass rounded-lg p-8 max-w-md w-full",children:[n.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-4",children:"Create Random Meme Token"}),n.jsx("p",{className:"text-purple-300 mb-6",children:"This will generate a random meme token with a 3-5 letter name, issue 1M tokens, and create an AMM pool with 1 XRP."}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:"Password Required"}),n.jsx("input",{type:"password",value:U,onChange:C=>q(C.target.value),onKeyPress:C=>C.key==="Enter"&&Oe(),className:"input w-full text-purple-200",placeholder:"Enter password to create token",autoFocus:!0})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:Oe,className:"btn-primary text-white px-6 py-2 rounded-lg font-medium flex-1",children:"Create Token"}),n.jsx("button",{onClick:()=>{Q(!1),q("")},className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium",children:"Cancel"})]})]})}),ye&&de&&n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"glass rounded-lg p-8 max-w-md w-full",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),n.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-2",children:"Token Created Successfully!"}),n.jsx("p",{className:"text-purple-300 text-lg font-bold",children:de.token_name}),n.jsx("p",{className:"text-purple-400 text-sm mt-2",children:"Your meme token is now live on the XRPL!"})]}),n.jsxs("div",{className:"space-y-3 mb-6",children:[n.jsx("a",{href:`https://testnet.xrpl.org/transactions/${de.tx_hash}`,target:"_blank",rel:"noopener noreferrer",className:"btn-primary text-white w-full px-6 py-3 rounded-lg font-medium text-center block",children:"View on XRPL Explorer"}),n.jsx("a",{href:`https://xmagnetic.org/amm/${de.currency_code}+${de.issuer_address}_XRP+XRP?network=testnet`,target:"_blank",rel:"noopener noreferrer",className:"btn text-purple-300 w-full px-6 py-3 rounded-lg font-medium text-center block",children:"AMM Pool"}),n.jsx("a",{href:`https://xmagnetic.org/dex/${de.currency_code}+${de.issuer_address}_XRP+XRP?network=testnet`,target:"_blank",rel:"noopener noreferrer",className:"btn text-purple-300 w-full px-6 py-3 rounded-lg font-medium text-center block",children:"Trade on Magnetic DEX"}),n.jsx("button",{onClick:()=>{$(de),G(!1),me(null)},className:"btn text-purple-300 w-full px-6 py-3 rounded-lg font-medium",children:"View Token Details"})]}),n.jsx("button",{onClick:()=>{G(!1),me(null)},className:"btn text-purple-400 w-full px-6 py-2 rounded-lg font-medium",children:"Close"})]})}),De&&n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"glass rounded-lg p-8 max-w-2xl w-full",children:[n.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:"Edit Token"}),n.jsxs("div",{className:"space-y-4 mb-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:"Token Name"}),n.jsx("input",{type:"text",value:De.token_name,onChange:C=>L({...De,token_name:C.target.value}),className:"input w-full text-purple-200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:"Total Supply"}),n.jsx("input",{type:"number",value:De.supply,onChange:C=>L({...De,supply:C.target.value}),className:"input w-full text-purple-200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:"XRP Locked"}),n.jsx("input",{type:"number",step:"0.01",value:De.amm_xrp_amount||0,onChange:C=>L({...De,amm_xrp_amount:C.target.value}),className:"input w-full text-purple-200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:"Asset Amount in Pool"}),n.jsx("input",{type:"number",value:De.amm_asset_amount||0,onChange:C=>L({...De,amm_asset_amount:C.target.value}),className:"input w-full text-purple-200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-3",children:"Category"}),n.jsx("div",{className:"grid grid-cols-4 gap-2",children:[{value:"Meme",color:"from-pink-500 to-rose-500",emoji:"😂"},{value:"Gaming",color:"from-violet-500 to-purple-500",emoji:"🎮"},{value:"DeFi",color:"from-blue-500 to-cyan-500",emoji:"💰"},{value:"Utility",color:"from-green-500 to-emerald-500",emoji:"🔧"},{value:"Community",color:"from-orange-500 to-amber-500",emoji:"👥"},{value:"NFT",color:"from-indigo-500 to-blue-500",emoji:"🎨"},{value:"AI",color:"from-teal-500 to-cyan-500",emoji:"🤖"},{value:"Other",color:"from-gray-500 to-slate-500",emoji:"📦"}].map(C=>n.jsxs("button",{type:"button",onClick:()=>L({...De,category:C.value}),className:`px-3 py-2 rounded-lg transition-all text-sm font-medium ${De.category===C.value?`bg-gradient-to-r ${C.color} text-white shadow-lg`:"glass text-purple-300 hover:bg-purple-500/20"}`,children:[n.jsx("span",{className:"mr-1",children:C.emoji}),C.value]},C.value))}),n.jsxs("p",{className:"text-purple-400 text-xs mt-2",children:["Current category: ",De.category||"Other"]})]}),n.jsxs("div",{className:"border-t border-purple-500/20 pt-4",children:[n.jsx("label",{className:"block text-purple-300 mb-3",children:"Featured Token Position"}),n.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{console.log("Setting to None"),L(C=>({...C,is_featured:!1,featured_order:null}))},className:`px-4 py-2 rounded-lg transition-colors ${!De.is_featured||De.is_featured===!1?"bg-purple-600 text-white":"glass text-purple-300 hover:bg-purple-500/20"}`,children:"None"}),[1,2,3].map(C=>n.jsxs("button",{type:"button",onClick:()=>{console.log("Setting to position:",C),L(ue=>({...ue,is_featured:!0,featured_order:C}))},className:`px-4 py-2 rounded-lg transition-colors ${De.is_featured===!0&&De.featured_order===C?"bg-purple-600 text-white":"glass text-purple-300 hover:bg-purple-500/20"}`,children:["Top ",C]},C))]}),n.jsxs("p",{className:"text-purple-400 text-xs mt-2",children:["Current: is_featured=",String(De.is_featured),", order=",De.featured_order||"null"," -",De.is_featured===!0&&De.featured_order?` This token will appear in position ${De.featured_order} on the featured list`:" This token will not be featured"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:"Token Icon"}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("input",{type:"file",accept:"image/*",onChange:qm,className:"input w-full text-purple-200"},De.id),n.jsx("p",{className:"text-purple-400 text-xs mt-1",children:"Upload new image or leave blank to keep current"})]}),(Y||De.image_url)&&n.jsxs("div",{className:"w-20 h-20 rounded-lg border-2 border-purple-500/30 overflow-hidden bg-gradient-to-br from-purple-900 to-purple-800 flex items-center justify-center",children:[n.jsx("img",{src:Y||De.image_url,alt:"Preview",className:"w-full h-full object-cover",onError:C=>{C.target.style.display="none"}}),!Y&&!De.image_url&&n.jsx("span",{className:"text-3xl",children:De.token_name[0]})]})]})]}),n.jsxs("div",{className:"border-t border-purple-500/20 pt-4",children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:"Confirm Admin Password"}),n.jsx("input",{type:"password",value:Ee,onChange:C=>Te(C.target.value),onKeyPress:C=>C.key==="Enter"&&hi(),className:"input w-full text-purple-200",placeholder:"Enter admin password to save"})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:hi,className:"btn-primary text-white px-6 py-2 rounded-lg font-medium flex-1",children:"Save Changes"}),n.jsx("button",{onClick:()=>{L(null),Te("")},className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium",children:"Cancel"})]})]})},De.id),Le&&n.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"glass rounded-lg max-w-2xl w-full p-8",children:[n.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:Gt?"✅ Token Created Successfully!":"🚀 Creating Random Meme Token"}),n.jsx("div",{className:"space-y-4 mb-6",children:st.map((C,ue)=>n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold",children:C.status==="complete"?n.jsx("div",{className:"text-green-400 text-2xl",children:"✓"}):C.status==="active"?n.jsx("div",{className:"w-6 h-6 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"}):C.status==="error"?n.jsx("div",{className:"text-red-400 text-2xl",children:"✗"}):n.jsx("div",{className:"w-6 h-6 border-2 border-purple-900 rounded-full"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:`font-medium ${C.status==="complete"?"text-green-400":C.status==="active"?"text-purple-200":C.status==="error"?"text-red-400":"text-purple-500"}`,children:C.title}),C.data&&n.jsx("div",{className:"text-sm text-purple-400 mt-1",children:C.data}),C.txHash&&n.jsx("a",{href:`https://testnet.xrpl.org/transactions/${C.txHash}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-400 hover:text-blue-300 mt-1 inline-block",children:"View Transaction →"}),C.error&&n.jsxs("div",{className:"text-sm text-red-400 mt-1",children:["Error: ",C.error]})]})]},ue))}),Gt&&lr&&n.jsx("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-6 mb-6",children:n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-green-400 mb-1",children:"Token Name"}),n.jsx("div",{className:"text-green-200 font-bold text-lg",children:lr.name})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-green-400 mb-1",children:"Supply"}),n.jsx("div",{className:"text-green-200 font-mono",children:lr.supply.toLocaleString()})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-green-400 mb-1",children:"Issuer"}),n.jsxs("div",{className:"text-green-200 font-mono text-xs",children:[lr.issuer.substring(0,20),"..."]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-green-400 mb-1",children:"Status"}),n.jsx("div",{className:"text-green-200",children:"✓ AMM Pool Created"})]})]})}),Gt&&n.jsx("button",{onClick:()=>{ze(!1),Qe([]),os(null)},className:"btn-primary text-white px-6 py-3 rounded-lg font-medium w-full",children:"Close"}),!Gt&&n.jsx("div",{className:"text-center text-purple-400 text-sm",children:"Please wait while we create your token..."})]})}),R&&n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"glass rounded-lg max-w-4xl w-full max-h-[80vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-purple-500/20",children:[n.jsx("h3",{className:"text-2xl font-bold text-purple-200",children:"My App Activity"}),n.jsx("button",{onClick:()=>W(!1),className:"text-purple-400 hover:text-purple-200 text-2xl",children:"×"})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:oe?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-4xl mb-4 animate-pulse",children:"⏳"}),n.jsx("div",{className:"text-purple-200",children:"Loading activities..."})]}):te.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-6xl mb-4",children:"📭"}),n.jsx("h4",{className:"text-xl font-bold text-purple-200 mb-2",children:"No Activity Yet"}),n.jsx("p",{className:"text-purple-400",children:"Your app activity will appear here"})]}):n.jsx("div",{className:"space-y-3",children:te.map(C=>n.jsx("div",{className:"glass rounded-lg p-4 border-l-4 border-green-500",children:n.jsx("div",{className:"flex items-start justify-between gap-4",children:n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-purple-200 font-medium mb-1",children:C.action_type.replace(/_/g," ").replace(/\b\w/g,ue=>ue.toUpperCase())}),n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:C.description}),C.details&&Object.keys(C.details).length>0&&n.jsxs("div",{className:"flex flex-wrap gap-3 text-xs",children:[C.details.amount&&n.jsxs("span",{className:"text-purple-300",children:["Amount: ",C.details.amount]}),C.details.xrpCost&&n.jsxs("span",{className:"text-purple-300",children:["XRP: ",C.details.xrpCost]}),C.details.tradeType&&n.jsx("span",{className:`px-2 py-1 rounded ${C.details.tradeType==="BUY"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:C.details.tradeType})]}),n.jsxs("div",{className:"flex items-center gap-3 mt-3 text-xs text-purple-500",children:[n.jsx("span",{children:new Date(C.created_at).toLocaleString()}),C.tx_hash&&n.jsx("a",{href:`https://testnet.xrpl.org/transactions/${C.tx_hash}`,target:"_blank",rel:"noopener noreferrer",className:"text-purple-400 hover:text-purple-300",children:"View TX"})]})]})})},C.id))})})]})}),n.jsx(L7,{isOpen:Tt,onClose:()=>zt(!1),tokens:t,onSelectToken:C=>{Pt(C),zt(!1),tt(!0)}}),n.jsx(I7,{isOpen:rt,onClose:()=>{tt(!1),Pt(null)},token:kt,walletSeed:o==null?void 0:o.seed,walletAddress:o==null?void 0:o.address})]})}function n4({isOpen:t,steps:e,currentStep:r,onClose:s,canClose:i,title:a,successTitle:o,failTitle:l}){if(!t)return null;const c=v=>v<r?"completed":v===r?"active":"pending",d=v=>v==="completed"?"✓":v==="active"?"⏳":"○",u=e.filter((v,x)=>x<=r).length,h=Math.min(100,u/e.length*100),p=a||"🚀 Creating Token on XRPL",f=o||"🎉 Token Created Successfully!",m=l||"❌ Token Creation Failed";return n.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"glass rounded-lg p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto relative",children:[n.jsx("button",{onClick:s,className:"absolute top-4 right-4 w-10 h-10 rounded-lg glass hover:bg-red-500/20 text-purple-300 hover:text-red-300 flex items-center justify-center transition-all z-10 text-2xl font-bold","aria-label":"Close",children:"×"}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-3xl font-bold text-purple-200 mb-2",children:e.some(v=>v.error)?m:r>=e.length?f:p}),n.jsx("p",{className:"text-purple-400",children:e.some(v=>v.error)?"An error occurred during the transaction. Please review the details below.":r>=e.length?"Your transaction has been completed successfully":"Please wait while we process your transaction..."})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm text-purple-300 mb-1",children:[n.jsx("span",{children:"Progress"}),n.jsxs("span",{children:[Math.round(h),"%"]})]}),n.jsx("div",{className:"w-full bg-purple-900/30 rounded-full h-3 overflow-hidden",children:n.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all duration-500 ease-out rounded-full",style:{width:`${h}%`}})})]}),n.jsx("div",{className:"space-y-3",children:e.map((v,x)=>{const b=c(x),y=d(b);return n.jsxs("div",{className:`flex items-start gap-4 p-4 rounded-lg transition-all ${v.error?"bg-red-500/10 border border-red-500/30":b==="completed"?"bg-green-500/10 border border-green-500/30":b==="active"?"bg-purple-500/20 border border-purple-500/50 animate-pulse":"bg-purple-900/20 border border-purple-500/20"}`,children:[n.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center font-bold ${v.error?"bg-red-500 text-white":b==="completed"?"bg-green-500 text-white":b==="active"?"bg-purple-500 text-white":"bg-purple-900/50 text-purple-400"}`,children:v.error?"✕":y}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:`font-semibold mb-1 ${v.error?"text-red-300":b==="completed"?"text-green-300":b==="active"?"text-purple-200":"text-purple-400"}`,children:v.title}),n.jsx("div",{className:`text-sm ${v.error?"text-red-300":b==="completed"||b==="active"?"text-purple-300":"text-purple-500"}`,children:v.description}),v.txHash&&n.jsxs("a",{href:`https://testnet.xrpl.org/transactions/${v.txHash}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-purple-400 hover:text-purple-300 mt-2 inline-block",children:["View Transaction: ",v.txHash.slice(0,20),"..."]})]})]},x)})}),i&&n.jsx("div",{className:"flex gap-3 pt-4",children:n.jsx("button",{onClick:s,className:"btn-primary text-white px-6 py-3 rounded-lg font-medium flex-1",children:e.some(v=>v.error)?"Close":"Close & View Token"})}),!i&&r<e.length&&!e.some(v=>v.error)&&n.jsx("div",{className:"text-center text-purple-400 text-sm animate-pulse",children:"Processing transaction..."})]})]})})}const D7="sEd7bAfzqZWKxaatJpoWzTvENyaTg1Y",P2="rKxBBMmY969Ph1y63ddVfYyN7xmxwDfVq6",B7="sEd7W72aANTbLTG98XDhU1yfotPJdhu",vi="rphatRpwXcPAo7CVm46dC78JAQ6kLMqb2M";function $7(){const[t,e]=T.useState([]),[r,s]=T.useState("all"),[i,a]=T.useState("all"),[o,l]=T.useState(""),[c,d]=T.useState(()=>window.innerWidth<768?"grid":"list"),[u,h]=T.useState("newest"),[p,f]=T.useState("desc"),[m,v]=T.useState([]),[x,b]=T.useState(null),[y,g]=T.useState({}),[w,S]=T.useState({}),[_,A]=T.useState(0),[B,Q]=T.useState({}),[U,q]=T.useState({}),[de,me]=T.useState({}),[ye,G]=T.useState({}),[Z,he]=T.useState({}),[ee,H]=T.useState(!1),[I,K]=T.useState(!1),[re,z]=T.useState("manual"),[O,V]=T.useState("admin"),[ne,pe]=T.useState([]),[ae,se]=T.useState(null),[k,j]=T.useState(null),[P,$]=T.useState(!1),[R,W]=T.useState({name:"",issuer:"",supply:"1000000",xrpLocked:"1",image:null,imageUrl:"",tfTransferable:!1,requireDestTag:!1,description:"",twitterHandle:"",websiteUrl:""}),[te,X]=T.useState(null),[oe,F]=T.useState(!1),[J,xe]=T.useState(null),[Ee,Te]=T.useState(!1),[Be,nt]=T.useState(!1),[De,L]=T.useState([]),[N,E]=T.useState(0),[Y,fe]=T.useState(!1);T.useEffect(()=>{(async()=>{await st(),await Qe(),we(),Ne()})();const je=xh(()=>{st()});return()=>je()},[]),T.useEffect(()=>{t.length>0&&Object.keys(y).length===0&&wt()},[t]),T.useEffect(()=>{const D=setInterval(()=>{t.length>0&&wt(!1)},3e5);return()=>clearInterval(D)},[t]),T.useEffect(()=>{x&&Object.keys(y).length>0&&Gt()},[x,y]),T.useEffect(()=>{x&&Le()},[x]),T.useEffect(()=>{const D=async()=>{try{const Je=await(await fetch("https://api.coingecko.com/api/v3/simple/price?ids=ripple&vs_currencies=usd")).json();A(Je.ripple.usd)}catch(Ue){console.error("Error fetching XRP price:",Ue)}};D();const je=setInterval(D,6e4);return()=>clearInterval(je)},[]),T.useEffect(()=>{if(t.length>0&&Object.keys(y).length>0){const D={},je={},Ue={},Je={},dt={};t.forEach(Ye=>{if(Ye.amm_pool_created&&y[Ye.id]){const Nt=parseFloat(M(Ye)),Tt=parseFloat(xt(Ye)),zt=parseFloat(w[Ye.id])||0,rt=parseFloat(cr(Ye)),tt=Ye.amm_xrp_amount||0;B[Ye.id]||(D[Ye.id]=Nt),U[Ye.id]||(je[Ye.id]=Tt),de[Ye.id]||(Ue[Ye.id]=zt),ye[Ye.id]||(Je[Ye.id]=rt),Z[Ye.id]||(dt[Ye.id]=tt)}}),Object.keys(D).length>0&&(Q(Ye=>({...Ye,...D})),q(Ye=>({...Ye,...je})),me(Ye=>({...Ye,...Ue})),G(Ye=>({...Ye,...Je})),he(Ye=>({...Ye,...dt})));const bt=setInterval(()=>{const Ye={},Nt={},Tt={},zt={},rt={};t.forEach(tt=>{tt.amm_pool_created&&y[tt.id]&&(Ye[tt.id]=parseFloat(M(tt)),Nt[tt.id]=parseFloat(xt(tt)),Tt[tt.id]=parseFloat(w[tt.id])||0,zt[tt.id]=parseFloat(cr(tt)),rt[tt.id]=tt.amm_xrp_amount||0)}),Q(Ye),q(Nt),me(Tt),G(zt),he(rt)},6e4);return()=>clearInterval(bt)}},[t,y,w]);const we=()=>{const D=localStorage.getItem("connectedWallet");D&&b(JSON.parse(D))},Ne=async()=>{try{const{data:D,error:je}=await le.from("wallets").select("*").order("created_at",{ascending:!1});if(je)throw je;pe(D||[]),D&&D.length>=2?(se(D[0]),j(D[1])):D&&D.length>=1&&se(D[0])}catch(D){console.error("Error loading wallets:",D)}},Le=async()=>{if(x)try{const{data:D,error:je}=await le.from("token_favorites").select("token_id").eq("user_address",x.address);if(je)throw je;v((D==null?void 0:D.map(Ue=>Ue.token_id))||[])}catch(D){console.error("Error loading favorites:",D)}},ze=async(D,je)=>{if(je&&je.stopPropagation(),!x){ie.error("Connect wallet to favorite tokens");return}try{if(m.includes(D)){const{error:Je}=await le.from("token_favorites").delete().eq("user_address",x.address).eq("token_id",D);if(Je)throw Je;v(m.filter(dt=>dt!==D)),ie.success("Removed from favorites")}else{const{error:Je}=await le.from("token_favorites").insert({user_address:x.address,token_id:D});if(Je)throw Je;v([...m,D]),ie.success("Added to favorites")}}catch(Ue){console.error("Error toggling favorite:",Ue),ie.error("Failed to update favorite")}},st=async()=>{try{const{data:D,error:je}=await le.from("meme_tokens").select("*").order("created_at",{ascending:!1});if(je)throw je;e(D||[])}catch(D){console.error("Error loading tokens:",D)}},Qe=async()=>{try{const{data:D,error:je}=await le.from("pool_data_cache").select("*");if(!je&&D&&D.length>0){const Ue={};D.forEach(Je=>{Ue[Je.token_id]={xrpAmount:parseFloat(Je.xrp_amount),tokenAmount:parseFloat(Je.token_amount),lpTokens:parseFloat(Je.lp_tokens),price:parseFloat(Je.price),accountId:Je.account_id,volume24h:parseFloat(Je.volume_24h||0),priceChange24h:parseFloat(Je.price_change_24h||0)}}),g(Ue),console.log(`⚡ Memes: Loaded ${D.length} pools from cache instantly`)}}catch(D){console.error("Error loading cached pool data:",D)}},at=async D=>{try{const je=new Date(Date.now()-864e5).toISOString(),{data:Ue,error:Je}=await le.from("trade_history").select("token_id, xrp_amount").in("token_id",D).gte("created_at",je);if(Je)throw Je;const dt={};return D.forEach(bt=>dt[bt]=0),Ue&&Ue.length>0&&Ue.forEach(bt=>{const Ye=parseFloat(bt.xrp_amount||0);dt[bt.token_id]=(dt[bt.token_id]||0)+Ye}),dt}catch(je){return console.error("Error fetching 24h volumes:",je),{}}},wt=async(D=!1)=>{var je;try{const{data:Je,error:dt}=await le.from("pool_data_cache").select("*").gte("last_updated",new Date(Date.now()-3e5).toISOString());if(!D&&Je&&Je.length>0&&!dt){console.log(`✅ Using cached pool data (${Je.length} pools)`);const rt={};Je.forEach(tt=>{rt[tt.token_id]={xrpAmount:parseFloat(tt.xrp_amount),tokenAmount:parseFloat(tt.token_amount),lpTokens:parseFloat(tt.lp_tokens),price:parseFloat(tt.price),accountId:tt.account_id,volume24h:parseFloat(tt.volume_24h||0),priceChange24h:parseFloat(tt.price_change_24h||0)}}),g(rt);return}console.log("🔄 Fetching fresh pool data from XRPL...");const{requestWithRetry:bt}=await $t(()=>Promise.resolve().then(()=>tr),void 0),Ye=t.filter(rt=>rt.amm_pool_created),Nt=await at(Ye.map(rt=>rt.id)),Tt={};for(const rt of t)if(rt.amm_pool_created)try{const tt=rt.currency_code.length>3?Et.Buffer.from(rt.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):rt.currency_code,kt=await bt({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:tt,issuer:rt.issuer_address},ledger_index:"validated"});if(kt.result.amm){const Pt=kt.result.amm,Mt=parseFloat(Pt.amount)/1e6,It=parseFloat(Pt.amount2.value),pr=parseFloat(((je=Pt.lp_token)==null?void 0:je.value)||0),ls=Nt[rt.id]||0;Tt[rt.id]={xrpAmount:Mt,tokenAmount:It,lpTokens:pr,price:Mt/It,accountId:Pt.account,volume24h:ls}}}catch(tt){console.error(`Error fetching pool data for ${rt.token_name}:`,tt.message)}const zt=Object.entries(Tt).map(([rt,tt])=>({token_id:rt,xrp_amount:tt.xrpAmount,token_amount:tt.tokenAmount,lp_tokens:tt.lpTokens,price:tt.price,account_id:tt.accountId,volume_24h:tt.volume24h||0,price_change_24h:0,last_updated:new Date().toISOString()}));if(zt.length>0){for(const rt of zt)await le.from("pool_data_cache").upsert(rt,{onConflict:"token_id"});console.log(`💾 Cached ${zt.length} pools`)}g(Tt)}catch(Ue){console.error("Error fetching pools data:",Ue)}},Gt=async()=>{if(!x)return;const D=new Ve.Client("wss://xrplcluster.com");try{await D.connect();const je=await D.request({command:"account_lines",account:x.address,ledger_index:"validated"}),Ue={};je.result.lines.forEach(Je=>{const dt=Object.entries(y).find(([bt,Ye])=>Ye.accountId===Je.account);if(dt){const[bt,Ye]=dt,Nt=parseFloat(Je.balance),Tt=Nt/Ye.lpTokens*100;Ue[bt]={balance:Nt,share:Tt}}}),S(Ue),await D.disconnect()}catch(je){console.error("Error fetching LP balances:",je)}},Dt=async()=>{if(!R.name||!R.issuer){ie.error("Token name and issuer are required");return}try{let D=null;if(R.image){F(!0),ie.loading("Uploading image...");try{D=await Df(R.image),ie.dismiss(),ie.success("Image uploaded successfully!")}catch{ie.dismiss(),ie.error("Failed to upload image"),F(!1);return}F(!1)}const{error:je}=await le.from("meme_tokens").insert([{token_name:R.name,currency_code:R.name,issuer_address:R.issuer,receiver_address:"Manual Entry",supply:parseFloat(R.supply),amm_xrp_amount:parseFloat(R.xrpLocked),amm_pool_created:!0,status:"manual",amm_asset_amount:parseFloat(R.supply)*.9,initial_xrp_amount:parseFloat(R.xrpLocked),initial_asset_amount:parseFloat(R.supply)*.9,image_url:D,description:R.description||null,twitter_handle:R.twitterHandle||null,website_url:R.websiteUrl||null}]);if(je)throw je;ie.success(`Token ${R.name} added successfully!`),H(!1),W({name:"",issuer:"",supply:"1000000",xrpLocked:"1",image:null,imageUrl:"",tfTransferable:!1,requireDestTag:!1,description:"",twitterHandle:"",websiteUrl:""}),X(null),st()}catch(D){console.error("Error adding token:",D),ie.error("Failed to add token")}},lr=async D=>{const je=D.target.files[0];if(!je)return;if(je.size>5*1024*1024){ie.error("Image must be less than 5MB");return}const Ue=new FileReader;Ue.onloadend=()=>{X(Ue.result)},Ue.readAsDataURL(je),W({...R,image:je})},os=async D=>{if(!x)throw new Error("Connected wallet required to pay creation fee");if(x.address===vi)return"FEE_WAIVED_ADMIN";const je=Ve.Wallet.fromSeed(x.seed),Ue={TransactionType:"Payment",Account:x.address,Destination:vi,Amount:Ve.xrpToDrops("5"),Memos:[{Memo:{MemoData:Et.Buffer.from(`Token Creation Fee: ${R.name}`,"utf8").toString("hex").toUpperCase()}}]},Je=await D.autofill(Ue),dt=je.sign(Je),bt=await D.submitAndWait(dt.tx_blob);if(bt.result.meta.TransactionResult!=="tesSUCCESS")throw new Error(`Payment failed: ${bt.result.meta.TransactionResult}`);return bt.result.hash},Bt=async()=>{var Ue,Je,dt;if(!R.name){ie.error("Token name is required");return}$(!0),H(!1),nt(!0),fe(!1);const D=[{title:"Processing Creation Fee",description:(x==null?void 0:x.address)===vi?"Creation fee waived (admin)":"Processing 5 XRP creation fee payment"},{title:"Validating Wallets",description:"Checking issuer and receiver wallet balances"},{title:"Creating Trust Line",description:"Setting up trust line for the new token"},{title:"Issuing Tokens",description:"Minting tokens to receiver wallet"}];R.image&&D.push({title:"Uploading Image",description:"Uploading token image to IPFS"}),D.push({title:"Saving to Database",description:"Storing token information"}),parseFloat(R.xrpLocked)>0&&D.push({title:"Creating AMM Pool",description:"Setting up automated market maker pool"}),D.push({title:"Complete",description:"Token creation finished successfully"}),L(D),E(0);let je;try{E(0);try{const{getClient:rr}=await $t(()=>Promise.resolve().then(()=>tr),void 0);je=await rr()}catch(rr){throw new Error(`Failed to connect to XRP Ledger: ${rr.message}`)}const bt=await os(je),Ye=[...D];Ye[0]={...Ye[0],txHash:bt},L(Ye),E(1);let Nt,Tt;if(O==="admin")Nt=Ve.Wallet.fromSeed(D7),Tt=Ve.Wallet.fromSeed(B7);else{if(!ae||!k)throw new Error("Please select both issuer and receiver wallets");Nt=Ve.Wallet.fromSeed(ae.encrypted_seed),Tt=Ve.Wallet.fromSeed(k.encrypted_seed)}E(2);try{await je.request({command:"account_info",account:Nt.address})}catch(rr){if(((Ue=rr.data)==null?void 0:Ue.error)==="actNotFound"){const dr=[...D];dr[2]={...dr[2],description:`Error: Issuer wallet not funded. Address: ${Nt.address}`,error:!0},L(dr),fe(!0),$(!1);return}}try{await je.request({command:"account_info",account:Tt.address})}catch(rr){if(((Je=rr.data)==null?void 0:Je.error)==="actNotFound"){const dr=[...D];dr[2]={...dr[2],description:`Error: Receiver wallet not funded. Address: ${Tt.address}`,error:!0},L(dr),fe(!0),$(!1);return}}if(E(3),!R.tfTransferable){const rr={TransactionType:"AccountSet",Account:Nt.address,SetFlag:8},dr=await je.autofill(rr),Ps=Nt.sign(dr),ce=await je.submitAndWait(Ps.tx_blob);if(ce.result.meta.TransactionResult!=="tesSUCCESS")throw new Error("Failed to disable rippling on issuer: "+ce.result.meta.TransactionResult)}const zt=R.name.length<=3?R.name.toUpperCase():Et.Buffer.from(R.name,"utf8").toString("hex").toUpperCase().padEnd(40,"0"),rt={TransactionType:"TrustSet",Account:Tt.address,LimitAmount:{currency:zt,issuer:Nt.address,value:R.supply.toString()}};R.tfTransferable||(rt.Flags=Ve.TrustSetFlags.tfSetNoRipple);const tt=await je.autofill(rt),kt=Tt.sign(tt),Pt=await je.submitAndWait(kt.tx_blob);if(Pt.result.meta.TransactionResult!=="tesSUCCESS")throw new Error("Trust line creation failed: "+Pt.result.meta.TransactionResult);const Mt=[...D];Mt[3]={...Mt[2],txHash:Pt.result.hash},L(Mt),E(4);const It={TransactionType:"Payment",Account:Nt.address,Destination:Tt.address,Amount:{currency:zt,value:R.supply.toString(),issuer:Nt.address}};R.requireDestTag&&(It.DestinationTag=1);const pr=await je.autofill(It),ls=Nt.sign(pr),cs=await je.submitAndWait(ls.tx_blob);if(cs.result.meta.TransactionResult!=="tesSUCCESS")throw new Error("Token issuance failed: "+cs.result.meta.TransactionResult);const As=[...Mt];As[3]={...As[3],txHash:cs.result.hash},L(As);let fr=4,pn=null;if(R.image){E(fr);try{pn=await Df(R.image)}catch(rr){console.error("Image upload failed:",rr)}fr++}E(fr);const{data:zr,error:Bn}=await le.from("meme_tokens").insert([{token_name:R.name,currency_code:R.name,issuer_address:Nt.address,receiver_address:Tt.address,supply:parseFloat(R.supply),tx_hash:cs.result.hash,status:"issued",amm_pool_created:!1,image_url:pn,description:R.description||null,twitter_handle:R.twitterHandle||null,website_url:R.websiteUrl||null}]).select().single();if(Bn)throw Bn;if(fr++,parseFloat(R.xrpLocked)>0){E(fr);try{const rr=parseFloat(R.supply)*.9,dr={TransactionType:"AMMCreate",Account:Tt.address,Amount:{currency:zt,value:rr.toString(),issuer:Nt.address},Amount2:Ve.xrpToDrops(R.xrpLocked),TradingFee:500},Ps=await je.autofill(dr),ce=Tt.sign(Ps),Oe=await je.submitAndWait(ce.tx_blob);if(Oe.result.meta.TransactionResult==="tesSUCCESS"){await le.from("meme_tokens").update({amm_pool_created:!0,amm_tx_hash:Oe.result.hash,amm_asset_amount:rr,amm_xrp_amount:parseFloat(R.xrpLocked),initial_asset_amount:rr,initial_xrp_amount:parseFloat(R.xrpLocked),status:"amm_created"}).eq("id",zr.id);const We=[...As];We[fr]={...We[fr],txHash:Oe.result.hash},L(We)}}catch(rr){console.error("AMM creation error:",rr)}fr++}E(fr),fe(!0),await Uv(zr.id),await $r({userAddress:P2,actionType:Ur.TOKEN_CREATED,description:`Created token ${R.name} with supply of ${R.supply}`,details:{tokenName:R.name,supply:R.supply,xrpLocked:R.xrpLocked,hasAMM:parseFloat(R.xrpLocked)>0},txHash:(dt=cs==null?void 0:cs.result)==null?void 0:dt.hash,tokenId:zr==null?void 0:zr.id}),W({name:"",issuer:"",supply:"1000000",xrpLocked:"1",image:null,imageUrl:"",tfTransferable:!1,requireDestTag:!1,description:"",twitterHandle:"",websiteUrl:""}),X(null),z("manual"),K(!1),await st(),setTimeout(()=>{nt(!1),L([]),E(0),fe(!1)},3e3)}catch(bt){console.error("Error creating token:",bt);const Ye=[...D],Nt=N<D.length?N:D.length-1;Ye[Nt]={...Ye[Nt],description:`Error: ${bt.message||"Unknown error occurred"}`,error:!0},L(Ye),fe(!0),$(!1)}},cr=D=>{const je=pt(D),Ue=parseFloat(D.total_supply)||parseFloat(D.supply)||0;return je*Ue},xt=D=>!D.amm_pool_created||!D.amm_xrp_amount||!D.amm_asset_amount?0:D.amm_xrp_amount/D.amm_asset_amount,pt=D=>{const je=y[D.id];return je&&je.price?je.price:xt(D)},M=D=>{const je=y[D.id];return je?(je.xrpAmount*.15).toFixed(2):D.amm_pool_created?((D.amm_xrp_amount||0)*.15).toFixed(2):"0"},ve=(D,je)=>!D||!je||je===0?"0.00":((D-je)/je*100).toFixed(2),be=D=>{const je=parseFloat(M(D));return ve(je,B[D.id])},Pe=D=>{const je=parseFloat(xt(D));return ve(je,U[D.id])},Me=D=>{const je=parseFloat(w[D.id])||0;return ve(je,de[D.id])},Se=D=>{const je=parseFloat(cr(D));return ve(je,ye[D.id])},Fe=D=>{const je=D.amm_xrp_amount||0;return ve(je,Z[D.id])},Ke=D=>{u===D?f(p==="asc"?"desc":"asc"):(h(D),f("desc"))},it=D=>{const je=xt(D),Ue=cr(D),Je=Et.Buffer.from(D.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"),dt=`https://xrpl.services/?issuer=${D.issuer_address}&currency=${Je}&limit=${D.supply}`,bt=`https://xmagnetic.org/dex/${D.currency_code}+${D.issuer_address}_XRP+XRP?network=mainnet`,Ye=`🚀 ${D.token_name} Token Info

💰 Supply: ${D.supply.toLocaleString()}
📊 Price: ${je} XRP
💎 Market Cap: ${Ue} XRP
🔒 XRP Locked: ${D.amm_xrp_amount||0} XRP
✅ Status: ${D.amm_pool_created?"AMM Pool Active":"Pending"}

🔗 Trust Line:
${dt}

💱 Trade on Magnetic:
${bt}

MORE #MEME COINS @ MEMEKINGS.ONLINE

#XRPL #Crypto #XRP`,Nt=`https://twitter.com/intent/tweet?text=${encodeURIComponent(Ye)}`;window.open(Nt,"_blank","width=550,height=420")},$e=t.filter(D=>{const je=D.token_name.toLowerCase().includes(o.toLowerCase()),Ue=r==="all"||r==="active"&&D.amm_pool_created||r==="pending"&&!D.amm_pool_created||r==="favorites"&&m.includes(D.id),Je=i==="all"||D.category===i;return je&&Ue&&Je}).sort((D,je)=>{var Je,dt,bt,Ye;let Ue=0;switch(u){case"newest":Ue=new Date(je.created_at)-new Date(D.created_at);break;case"oldest":Ue=new Date(D.created_at)-new Date(je.created_at);break;case"name":Ue=D.token_name.localeCompare(je.token_name);break;case"name-asc":Ue=D.token_name.localeCompare(je.token_name);break;case"name-desc":Ue=je.token_name.localeCompare(D.token_name);break;case"category":Ue=(D.category||"").localeCompare(je.category||"");break;case"days":Ue=Cn(je.created_at)-Cn(D.created_at);break;case"supply-high":Ue=je.supply-D.supply;break;case"supply-low":Ue=D.supply-je.supply;break;case"price":Ue=xt(je)-xt(D);break;case"price-high":Ue=xt(je)-xt(D);break;case"price-low":Ue=xt(D)-xt(je);break;case"volume":Ue=parseFloat(M(je))-parseFloat(M(D));break;case"lp":Ue=(((Je=w[je.id])==null?void 0:Je.balance)||0)-(((dt=w[D.id])==null?void 0:dt.balance)||0);break;case"marketcap":Ue=cr(je)-cr(D);break;case"liquidity":Ue=(((bt=y[je.id])==null?void 0:bt.xrpAmount)||je.amm_xrp_amount||0)-(((Ye=y[D.id])==null?void 0:Ye.xrpAmount)||D.amm_xrp_amount||0);break;case"status":Ue=(je.amm_pool_created?1:0)-(D.amm_pool_created?1:0);break;default:Ue=0}return p==="asc"?-Ue:Ue}),lt=({token:D})=>{var Ue,Je;const je=m.includes(D.id);return n.jsxs("div",{className:"glass rounded-lg p-6 space-y-4 hover:scale-105 transition-transform cursor-pointer relative",onClick:()=>{xe(D),Te(!0)},children:[n.jsx("button",{onClick:dt=>ze(D.id,dt),className:"absolute top-4 right-4 text-2xl hover:scale-110 transition-transform z-10",title:je?"Remove from favorites":"Add to favorites",children:je?"⭐":"☆"}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ht,{token:D,size:"3xl"}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"text-2xl font-bold text-purple-200",children:D.token_name}),n.jsx("button",{onClick:dt=>ze(D.id,dt),className:"text-xl hover:scale-110 transition-transform",children:m.includes(D.id)?"⭐":"☆"})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[n.jsx("p",{className:"text-purple-400 text-sm",children:"Meme Token"}),D.category&&n.jsx(Dc,{category:D.category,size:"xs"}),n.jsxs("span",{className:"px-2 py-0.5 bg-purple-500/20 text-purple-300 text-xs rounded-full font-medium",children:["📅 ",Cn(D.created_at),"d"]})]})]})]}),n.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${D.amm_pool_created?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:D.amm_pool_created?"🟢 Live":"🟡 Pending"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-purple-400 text-xs",children:"Total Supply"}),n.jsx("span",{className:"text-purple-200 text-sm font-bold",children:D.supply.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-purple-400 text-xs",children:"Currency Code"}),n.jsx("span",{className:"text-purple-200 font-mono text-xs",children:D.currency_code})]}),D.amm_pool_created&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-purple-400 text-xs",children:"Live Price"}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[n.jsxs("span",{className:"text-green-400 text-sm font-bold",children:[pt(D).toFixed(8)," XRP"]}),U[D.id]&&n.jsxs("span",{className:`text-xs font-medium px-2 py-0.5 rounded ${parseFloat(Pe(D))>=0?"text-green-300 bg-green-500/10":"text-red-300 bg-red-500/10"}`,children:[parseFloat(Pe(D))>=0?"+":"",Pe(D),"%"]})]}),n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(pt(D)*_).toFixed(6)]})]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-purple-400 text-xs",children:"Market Cap (Live)"}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[n.jsxs("span",{className:"text-purple-200 text-sm font-bold",children:[cr(D).toFixed(2)," XRP"]}),ye[D.id]&&n.jsxs("span",{className:`text-xs font-medium px-1.5 py-0.5 rounded ${parseFloat(Se(D))>=0?"text-green-300 bg-green-500/10":"text-red-300 bg-red-500/10"}`,children:[parseFloat(Se(D))>=0?"+":"",Se(D),"%"]})]}),n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(cr(D)*_).toFixed(2)]})]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-purple-400 text-xs",children:"Liquidity (XRP)"}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[n.jsxs("span",{className:"text-purple-200 text-sm font-bold",children:[(Ue=y[D.id])!=null&&Ue.xrpAmount?y[D.id].xrpAmount.toFixed(2):(D.amm_xrp_amount||0).toFixed(2)," XRP"]}),Z[D.id]&&n.jsxs("span",{className:`text-xs font-medium px-1.5 py-0.5 rounded ${parseFloat(Fe(D))>=0?"text-green-300 bg-green-500/10":"text-red-300 bg-red-500/10"}`,children:[parseFloat(Fe(D))>=0?"+":"",Fe(D),"%"]})]}),n.jsxs("div",{className:"text-green-400 text-xs",children:["$",((((Je=y[D.id])==null?void 0:Je.xrpAmount)||D.amm_xrp_amount||0)*_).toFixed(2)]})]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-purple-400 text-xs",children:"Volume 24h"}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[n.jsx("span",{className:"text-purple-200 text-sm font-bold",children:D.amm_pool_created?`${M(D)} XRP`:"-"}),D.amm_pool_created&&B[D.id]&&n.jsxs("span",{className:`text-xs font-medium px-1.5 py-0.5 rounded ${parseFloat(be(D))>=0?"text-green-300 bg-green-500/10":"text-red-300 bg-red-500/10"}`,children:[parseFloat(be(D))>=0?"+":"",be(D),"%"]})]}),D.amm_pool_created&&n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(parseFloat(M(D))*_).toFixed(2)]})]})]}),n.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-purple-500/20",children:[n.jsx("span",{className:"text-purple-400 text-xs",children:"Your LP"}),w[D.id]?n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-green-400 text-sm font-bold",children:w[D.id].balance.toFixed(4)}),n.jsxs("div",{className:"text-green-500 text-xs",children:[w[D.id].share.toFixed(2),"%"]})]}),de[D.id]&&de[D.id]>0&&n.jsxs("span",{className:`text-xs font-medium px-1.5 py-0.5 rounded ${parseFloat(Me(D))>=0?"text-green-300 bg-green-500/10":"text-red-300 bg-red-500/10"}`,children:[parseFloat(Me(D))>=0?"+":"",Me(D),"%"]})]}),n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(w[D.id].balance*pt(D)*2*_).toFixed(2)]})]}):n.jsx("span",{className:"text-purple-500 text-sm font-bold",children:"-"})]})]}),n.jsxs("div",{className:"pt-2 border-t border-purple-500/20",children:[n.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"Issuer Address"}),n.jsx("div",{className:"text-purple-300 text-xs font-mono bg-black/30 p-2 rounded break-all",children:D.issuer_address})]}),n.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-purple-500/20",children:[n.jsx("span",{className:"text-purple-500 text-xs",children:"Created"}),n.jsx("span",{className:"text-purple-400 text-xs",children:new Date(D.created_at).toLocaleString()})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx("a",{href:`https://xmagnetic.org/dex/${D.currency_code}+${D.issuer_address}_XRP+XRP?network=mainnet`,target:"_blank",rel:"noopener noreferrer",className:"btn-primary text-white text-xs px-2 py-2 rounded-lg text-center",onClick:dt=>{dt.stopPropagation()},title:"Trade on xMagnetic DEX",children:"💱 Trade"}),n.jsx("button",{className:"bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white font-bold text-xs px-2 py-2 rounded-lg shadow-lg shadow-purple-500/50 hover:shadow-purple-500/70",onClick:dt=>{dt.stopPropagation(),it(D)},title:"Post on X",children:"𝕏 Post"}),n.jsx("a",{href:`https://xmagnetic.org/amm/${D.currency_code}+${D.issuer_address}_XRP+XRP?network=mainnet`,target:"_blank",rel:"noopener noreferrer",className:"btn text-purple-300 text-xs px-2 py-2 rounded-lg text-center",onClick:dt=>{dt.stopPropagation()},title:"AMM Pool",children:"🔗 AMM Pool"}),n.jsx("a",{href:`https://xrpl.services/?issuer=${D.issuer_address}&currency=${D.currency_code.length>3?Et.Buffer.from(D.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):D.currency_code}&limit=${D.supply}`,target:"_blank",rel:"noopener noreferrer",className:"btn text-purple-300 text-xs px-2 py-2 rounded-lg text-center",onClick:dt=>{dt.stopPropagation()},title:"Set up Trustline",children:"✅ Trustline"})]})]})},Yt=({token:D})=>{var je,Ue;return n.jsxs("tr",{className:"border-t border-purple-500/20 hover:bg-purple-900/20 cursor-pointer",onClick:()=>{xe(D),Te(!0)},children:[n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ht,{token:D,size:"3xl"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-bold text-purple-200",children:D.token_name}),n.jsx("div",{className:"text-purple-400 text-xs",children:D.currency_code})]}),n.jsx("button",{onClick:Je=>ze(D.id,Je),className:"text-lg hover:scale-110 transition-transform",children:m.includes(D.id)?"⭐":"☆"})]})]})}),n.jsx("td",{className:"px-4 py-3",children:D.category?n.jsx(Dc,{category:D.category,size:"xs"}):n.jsx("span",{className:"text-purple-400 text-xs",children:"-"})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("span",{className:"px-2 py-0.5 bg-purple-500/20 text-purple-300 text-xs rounded-full font-medium inline-block",children:["📅 ",Cn(D.created_at),"d"]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-purple-200 font-bold",children:pt(D).toFixed(8)}),n.jsx("div",{className:"text-purple-400 text-xs",children:"XRP"})]}),D.amm_pool_created&&U[D.id]&&n.jsxs("span",{className:`text-xs font-medium px-1.5 py-0.5 rounded whitespace-nowrap ${parseFloat(Pe(D))>=0?"text-green-300 bg-green-500/10":"text-red-300 bg-red-500/10"}`,children:[parseFloat(Pe(D))>=0?"+":"",Pe(D),"%"]})]}),n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(pt(D)*_).toFixed(6)]})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-purple-300",children:D.amm_pool_created?`${M(D)} XRP`:"-"}),D.amm_pool_created&&B[D.id]&&n.jsxs("span",{className:`text-xs font-medium px-1.5 py-0.5 rounded whitespace-nowrap ${parseFloat(be(D))>=0?"text-green-300 bg-green-500/10":"text-red-300 bg-red-500/10"}`,children:[parseFloat(be(D))>=0?"+":"",be(D),"%"]})]}),D.amm_pool_created&&n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(parseFloat(M(D))*_).toFixed(2)]})]})}),n.jsx("td",{className:"px-4 py-3",children:w[D.id]?n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-green-200 font-medium",children:w[D.id].balance.toFixed(4)}),n.jsxs("div",{className:"text-green-400 text-xs",children:[w[D.id].share.toFixed(2),"%"]})]}),de[D.id]&&de[D.id]>0&&n.jsxs("span",{className:`text-xs font-medium px-1.5 py-0.5 rounded whitespace-nowrap ${parseFloat(Me(D))>=0?"text-green-300 bg-green-500/10":"text-red-300 bg-red-500/10"}`,children:[parseFloat(Me(D))>=0?"+":"",Me(D),"%"]})]}),n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(w[D.id].balance*pt(D)*2*_).toFixed(2)]})]}):n.jsx("span",{className:"text-purple-500",children:"-"})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-purple-200",children:[cr(D).toFixed(2)," XRP"]}),ye[D.id]&&n.jsxs("span",{className:`text-xs font-medium px-1.5 py-0.5 rounded whitespace-nowrap ${parseFloat(Se(D))>=0?"text-green-300 bg-green-500/10":"text-red-300 bg-red-500/10"}`,children:[parseFloat(Se(D))>=0?"+":"",Se(D),"%"]})]}),n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(cr(D)*_).toFixed(2)]})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-purple-200 font-bold",children:(je=y[D.id])!=null&&je.xrpAmount?`${y[D.id].xrpAmount.toFixed(2)} XRP`:`${(D.amm_xrp_amount||0).toFixed(2)} XRP`}),Z[D.id]&&n.jsxs("span",{className:`text-xs font-medium px-1.5 py-0.5 rounded whitespace-nowrap ${parseFloat(Fe(D))>=0?"text-green-300 bg-green-500/10":"text-red-300 bg-red-500/10"}`,children:[parseFloat(Fe(D))>=0?"+":"",Fe(D),"%"]})]}),n.jsxs("div",{className:"text-green-400 text-xs",children:["$",((((Ue=y[D.id])==null?void 0:Ue.xrpAmount)||D.amm_xrp_amount||0)*_).toFixed(2)]})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${D.amm_pool_created?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:D.amm_pool_created?"🟢":"🟡"})}),n.jsx("td",{className:"px-4 py-3",onClick:Je=>Je.stopPropagation(),children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("a",{href:`https://xmagnetic.org/dex/${D.currency_code}+${D.issuer_address}_XRP+XRP?network=mainnet`,target:"_blank",rel:"noopener noreferrer",className:"btn-primary text-white text-xs px-2 py-1 rounded",title:"Trade",children:"💱"}),n.jsx("button",{className:"bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white font-bold text-xs px-2 py-1 rounded shadow-md shadow-purple-500/50 hover:shadow-purple-500/70",onClick:Je=>{Je.stopPropagation(),it(D)},title:"Post on X",children:"𝕏"}),n.jsx("a",{href:`https://xmagnetic.org/amm/${D.currency_code}+${D.issuer_address}_XRP+XRP?network=mainnet`,target:"_blank",rel:"noopener noreferrer",className:"btn text-purple-300 text-xs px-2 py-1 rounded",title:"AMM",children:"🔗"}),n.jsx("a",{href:`https://xrpl.services/?issuer=${D.issuer_address}&currency=${D.currency_code.length>3?Et.Buffer.from(D.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):D.currency_code}&limit=${D.supply}`,target:"_blank",rel:"noopener noreferrer",className:"btn text-purple-300 text-xs px-2 py-1 rounded",title:"Trustline",onClick:Je=>Je.stopPropagation(),children:"✅"})]})})]})};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-purple-200",children:"Memes"}),n.jsx("p",{className:"text-purple-400 mt-1",children:"All minted tokens from the factory"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>H(!0),className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium",children:"+ Add Token"}),n.jsx("button",{onClick:()=>K(!0),className:"btn-primary text-white px-6 py-3 rounded-lg font-medium",children:"🚀 Create Token"})]})]}),n.jsx("div",{className:"glass rounded-lg p-4",children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4",children:[n.jsx("input",{type:"text",value:o,onChange:D=>l(D.target.value),placeholder:"🔍 Search tokens...",className:"input flex-1 text-purple-200"}),n.jsxs("select",{value:i,onChange:D=>a(D.target.value),className:"input text-purple-200 w-full md:w-auto",children:[n.jsx("option",{value:"all",children:"All Categories"}),n.jsx("option",{value:"Meme",children:"😂 Meme"}),n.jsx("option",{value:"Gaming",children:"🎮 Gaming"}),n.jsx("option",{value:"DeFi",children:"💰 DeFi"}),n.jsx("option",{value:"Utility",children:"🔧 Utility"}),n.jsx("option",{value:"Community",children:"👥 Community"}),n.jsx("option",{value:"NFT",children:"🎨 NFT"}),n.jsx("option",{value:"AI",children:"🤖 AI"}),n.jsx("option",{value:"Other",children:"📦 Other"})]}),n.jsxs("select",{value:u,onChange:D=>h(D.target.value),className:"input text-purple-200 w-full md:w-auto",children:[n.jsx("option",{value:"newest",children:"Newest First"}),n.jsx("option",{value:"oldest",children:"Oldest First"}),n.jsx("option",{value:"name-asc",children:"Name (A-Z)"}),n.jsx("option",{value:"name-desc",children:"Name (Z-A)"}),n.jsx("option",{value:"marketcap",children:"Market Cap"}),n.jsx("option",{value:"supply-high",children:"Supply (High-Low)"}),n.jsx("option",{value:"supply-low",children:"Supply (Low-High)"}),n.jsx("option",{value:"price-high",children:"Price (High-Low)"}),n.jsx("option",{value:"price-low",children:"Price (Low-High)"})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 items-center justify-between",children:[n.jsxs("div",{className:"flex gap-2 flex-wrap",children:[n.jsxs("button",{onClick:()=>s("all"),className:`px-4 py-2 rounded-lg transition-all ${r==="all"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:["All (",t.length,")"]}),n.jsxs("button",{onClick:()=>s("active"),className:`px-4 py-2 rounded-lg transition-all ${r==="active"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:["🟢 Active (",t.filter(D=>D.amm_pool_created).length,")"]}),n.jsxs("button",{onClick:()=>s("pending"),className:`px-4 py-2 rounded-lg transition-all ${r==="pending"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:["🟡 Pending (",t.filter(D=>!D.amm_pool_created).length,")"]}),n.jsxs("button",{onClick:()=>s("favorites"),className:`px-4 py-2 rounded-lg transition-all ${r==="favorites"?"bg-purple-600 text-white":"glass text-purple-300"}`,disabled:!x,title:x?"":"Connect wallet to view favorites",children:["⭐ Favorites (",m.length,")"]}),n.jsxs("button",{disabled:!0,className:"px-4 py-2 rounded-lg transition-all font-medium text-purple-500/50 cursor-not-allowed relative group",children:["👤 User",n.jsx("span",{className:"ml-2 text-xs bg-purple-900/50 px-2 py-0.5 rounded",children:"Coming Soon"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>d("grid"),className:`px-4 py-2 rounded-lg transition-all ${c==="grid"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"▦ Grid"}),n.jsx("button",{onClick:()=>d("list"),className:`px-4 py-2 rounded-lg transition-all ${c==="list"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"☰ List"})]})]})]})}),c==="grid"?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:$e.map(D=>n.jsx(lt,{token:D},D.id))}):n.jsx("div",{className:"glass rounded-lg p-4",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-purple-900/30",children:n.jsxs("tr",{children:[n.jsxs("th",{className:"text-left px-4 py-3 text-purple-300 font-medium cursor-pointer hover:text-purple-200 select-none",onDoubleClick:()=>Ke("name"),title:"Double-click to sort",children:["Token ",u==="name"&&(p==="asc"?"↑":"↓")]}),n.jsxs("th",{className:"text-left px-4 py-3 text-purple-300 font-medium cursor-pointer hover:text-purple-200 select-none",onDoubleClick:()=>Ke("category"),title:"Double-click to sort",children:["Category ",u==="category"&&(p==="asc"?"↑":"↓")]}),n.jsxs("th",{className:"text-left px-4 py-3 text-purple-300 font-medium cursor-pointer hover:text-purple-200 select-none",onDoubleClick:()=>Ke("days"),title:"Double-click to sort",children:["Days ",u==="days"&&(p==="asc"?"↑":"↓")]}),n.jsxs("th",{className:"text-left px-4 py-3 text-purple-300 font-medium cursor-pointer hover:text-purple-200 select-none",onDoubleClick:()=>Ke("price"),title:"Double-click to sort",children:["Live Price ",u==="price"&&(p==="asc"?"↑":"↓")]}),n.jsxs("th",{className:"text-left px-4 py-3 text-purple-300 font-medium cursor-pointer hover:text-purple-200 select-none",onDoubleClick:()=>Ke("volume"),title:"Double-click to sort",children:["Volume 24h ",u==="volume"&&(p==="asc"?"↑":"↓")]}),n.jsxs("th",{className:"text-left px-4 py-3 text-purple-300 font-medium cursor-pointer hover:text-purple-200 select-none",onDoubleClick:()=>Ke("lp"),title:"Double-click to sort",children:["Your LP ",u==="lp"&&(p==="asc"?"↑":"↓")]}),n.jsxs("th",{className:"text-left px-4 py-3 text-purple-300 font-medium cursor-pointer hover:text-purple-200 select-none",onDoubleClick:()=>Ke("marketcap"),title:"Double-click to sort",children:["Market Cap ",u==="marketcap"&&(p==="asc"?"↑":"↓")]}),n.jsxs("th",{className:"text-left px-4 py-3 text-purple-300 font-medium cursor-pointer hover:text-purple-200 select-none",onDoubleClick:()=>Ke("liquidity"),title:"Double-click to sort",children:["Liquidity (XRP) ",u==="liquidity"&&(p==="asc"?"↑":"↓")]}),n.jsxs("th",{className:"text-left px-4 py-3 text-purple-300 font-medium cursor-pointer hover:text-purple-200 select-none",onDoubleClick:()=>Ke("status"),title:"Double-click to sort",children:["Status ",u==="status"&&(p==="asc"?"↑":"↓")]}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Actions"})]})}),n.jsx("tbody",{children:$e.map(D=>n.jsx(Yt,{token:D},D.id))})]})})}),$e.length===0&&n.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:"🚀"}),n.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-2",children:"No Tokens Found"}),n.jsx("p",{className:"text-purple-400",children:o?"Try a different search term":"Create your first token from the dashboard"})]}),ee&&n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"glass rounded-lg p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:"Add Token"}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("input",{type:"text",placeholder:"Token Name",value:R.name,onChange:D=>W({...R,name:D.target.value}),className:"w-full px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 placeholder-purple-400"}),n.jsx("input",{type:"text",placeholder:"Issuer Address",value:R.issuer,onChange:D=>W({...R,issuer:D.target.value}),className:"w-full px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 placeholder-purple-400"}),n.jsx("input",{type:"number",placeholder:"Supply",value:R.supply,onChange:D=>W({...R,supply:D.target.value}),className:"w-full px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 placeholder-purple-400"})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:Dt,disabled:P||oe,className:"btn-primary text-white px-6 py-2 rounded-lg font-medium flex-1 disabled:opacity-50",children:P?"🔄 Adding...":"+ Add Token"}),n.jsx("button",{onClick:()=>{H(!1),W({name:"",issuer:"",supply:"1000000",xrpLocked:"1",image:null,imageUrl:"",tfTransferable:!1,requireDestTag:!1,description:"",twitterHandle:"",websiteUrl:""}),X(null),z("manual")},disabled:P,className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium disabled:opacity-50",children:"Cancel"})]})]})}),I&&n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"glass rounded-lg p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-2",children:"Create Token"}),n.jsx("p",{className:"text-purple-400 text-sm mb-6",children:"Create a new token on the XRP Ledger. The token will be minted and automatically added to a liquidity pool with the XRP you lock."}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2 text-sm font-medium",children:"Token Name *"}),n.jsx("input",{type:"text",placeholder:"e.g., MemeKing",value:R.name,onChange:D=>W({...R,name:D.target.value}),className:"w-full px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 placeholder-purple-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2 text-sm font-medium",children:"Total Supply *"}),n.jsx("input",{type:"number",placeholder:"1000000",value:R.supply,onChange:D=>W({...R,supply:D.target.value}),className:"w-full px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 placeholder-purple-400"}),n.jsx("p",{className:"text-xs text-purple-400 mt-1",children:"Maximum number of tokens that will exist"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2 text-sm font-medium",children:"XRP to Lock in Initial Pool *"}),n.jsx("input",{type:"number",placeholder:"1",value:R.xrpLocked,onChange:D=>W({...R,xrpLocked:D.target.value}),className:"w-full px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 placeholder-purple-400"}),n.jsx("p",{className:"text-xs text-purple-400 mt-1",children:"Amount of XRP to add as initial liquidity (determines starting price)"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2 text-sm font-medium",children:"Description"}),n.jsx("textarea",{placeholder:"Tell the community about your token...",value:R.description,onChange:D=>W({...R,description:D.target.value}),className:"w-full px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 placeholder-purple-400 min-h-[80px]"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2 text-sm font-medium",children:"Twitter Handle"}),n.jsx("input",{type:"text",placeholder:"e.g., @mytoken",value:R.twitterHandle,onChange:D=>W({...R,twitterHandle:D.target.value}),className:"w-full px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 placeholder-purple-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2 text-sm font-medium",children:"Website URL"}),n.jsx("input",{type:"url",placeholder:"https://yourtoken.com",value:R.websiteUrl,onChange:D=>W({...R,websiteUrl:D.target.value}),className:"w-full px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 placeholder-purple-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2 text-sm",children:"Token Image"}),n.jsx("input",{type:"file",accept:"image/*",onChange:lr,className:"w-full px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-purple-600 file:text-white hover:file:bg-purple-700"}),te&&n.jsx("div",{className:"mt-3",children:n.jsx("img",{src:te,alt:"Preview",className:"w-24 h-24 rounded-lg object-cover"})})]}),n.jsxs("div",{className:"glass rounded-lg p-4",children:[n.jsx("h4",{className:"text-purple-200 font-medium mb-3",children:"Token Settings"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:R.tfTransferable,onChange:D=>W({...R,tfTransferable:D.target.checked}),className:"w-4 h-4 rounded border-purple-500/30"}),n.jsx("span",{className:"text-purple-300 text-sm",children:"Transferable"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:R.requireDestTag,onChange:D=>W({...R,requireDestTag:D.target.checked}),className:"w-4 h-4 rounded border-purple-500/30"}),n.jsx("span",{className:"text-purple-300 text-sm",children:"Require Destination Tag"})]})]})]}),n.jsxs("div",{className:"glass rounded-lg p-4",children:[n.jsx("h4",{className:"text-purple-200 font-medium mb-3",children:"Wallet Configuration"}),n.jsxs("div",{className:"flex gap-2 mb-3",children:[n.jsx("button",{onClick:()=>V("admin"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${O==="admin"?"bg-purple-600 text-white":"bg-purple-900/20 text-purple-300 hover:bg-purple-900/40"}`,children:"Admin Token"}),n.jsx("button",{onClick:()=>V("custom"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${O==="custom"?"bg-purple-600 text-white":"bg-purple-900/20 text-purple-300 hover:bg-purple-900/40"}`,children:"Custom Wallet"})]}),O==="admin"?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"space-y-2 text-sm text-purple-300",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Issuer:"})," ",P2]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Receiver:"})," ",vi]}),n.jsx("p",{className:"text-xs text-purple-400 mt-2",children:"Using MEMEKINGS managed wallets for token creation"})]}),!x&&n.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3",children:[n.jsx("p",{className:"text-yellow-300 text-xs font-medium",children:"⚠️ Connected wallet required"}),n.jsx("p",{className:"text-yellow-300/80 text-xs mt-1",children:"You must connect your wallet to pay the 5 XRP creation fee when using Admin Token mode."})]}),(x==null?void 0:x.address)===vi&&n.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-3",children:[n.jsx("p",{className:"text-green-300 text-xs font-medium",children:"✓ Admin Wallet Connected"}),n.jsx("p",{className:"text-green-300/80 text-xs mt-1",children:"Creation fee waived for admin wallet"})]}),n.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[n.jsx("p",{className:"text-blue-300 text-xs font-medium",children:"ℹ️ What happens during creation:"}),n.jsxs("ul",{className:"text-blue-300/80 text-xs mt-2 space-y-1 list-disc list-inside",children:[(x==null?void 0:x.address)===vi?n.jsx("li",{children:"5 XRP creation fee waived (admin wallet)"}):n.jsx("li",{children:"5 XRP fee is paid from your connected wallet"}),n.jsx("li",{children:"Token is issued by MEMEKINGS managed issuer"}),n.jsx("li",{children:"Tokens are sent to platform receiver wallet"}),n.jsx("li",{children:"Automatic trustline setup and liquidity pool creation"})]})]})]}):n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2 text-sm",children:"Issuer Wallet"}),n.jsxs("select",{value:(ae==null?void 0:ae.id)||"",onChange:D=>{if(D.target.value==="connected")se({id:"connected",address:x.address,encrypted_seed:x.seed});else{const je=ne.find(Ue=>Ue.id===D.target.value);se(je||null)}},className:"w-full px-3 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 text-sm",children:[n.jsx("option",{value:"",children:"Select issuer wallet..."}),x&&n.jsxs("option",{value:"connected",children:[x.address," (Connected)"]}),ne.map(D=>n.jsxs("option",{value:D.id,children:[D.name," - ",D.address.substring(0,10),"..."]},D.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2 text-sm",children:"Receiver Wallet"}),n.jsxs("select",{value:(k==null?void 0:k.id)||"",onChange:D=>{if(D.target.value==="connected")j({id:"connected",address:x.address,encrypted_seed:x.seed});else if(D.target.value==="default")j({id:"default",address:vi,encrypted_seed:"sEd7W72aANTbLTG98XDhU1yfotPJdhu"});else{const je=ne.find(Ue=>Ue.id===D.target.value);j(je||null)}},className:"w-full px-3 py-2 bg-purple-900/20 border border-purple-500/30 rounded-lg text-purple-200 text-sm",children:[n.jsx("option",{value:"",children:"Select receiver wallet..."}),x&&n.jsxs("option",{value:"connected",children:[x.address," (Connected)"]}),n.jsxs("option",{value:"default",children:[vi," (Platform Default)"]}),ne.map(D=>n.jsxs("option",{value:D.id,children:[D.name," - ",D.address.substring(0,10),"..."]},D.id))]})]}),n.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[n.jsx("p",{className:"text-blue-300 text-xs font-medium",children:"ℹ️ What happens during creation:"}),n.jsxs("ul",{className:"text-blue-300/80 text-xs mt-2 space-y-1 list-disc list-inside",children:[n.jsx("li",{children:"5 XRP fee is paid from your connected wallet"}),n.jsx("li",{children:"Token is issued by your selected issuer wallet"}),n.jsx("li",{children:"Tokens are sent to your selected receiver wallet"}),n.jsx("li",{children:"Automatic trustline setup and liquidity pool creation"})]})]})]})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:Bt,disabled:P||oe||O==="admin"&&!x||O==="custom"&&(!ae||!k),className:"btn-primary text-white px-6 py-2 rounded-lg font-medium flex-1 disabled:opacity-50",children:oe?n.jsx("span",{children:"⬆️ Uploading Image..."}):P?n.jsx("span",{children:"🔄 Creating..."}):n.jsxs("span",{children:["🚀 Create Token",(x==null?void 0:x.address)===vi&&O==="admin"?" (Admin - Free)":" (5 XRP)"]})}),n.jsx("button",{onClick:()=>{K(!1),W({name:"",issuer:"",supply:"1000000",xrpLocked:"1",image:null,imageUrl:"",tfTransferable:!1,requireDestTag:!1,description:"",twitterHandle:"",websiteUrl:""}),X(null)},disabled:P||oe,className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium disabled:opacity-50",children:"Cancel"})]})]})}),Ee&&J&&n.jsx(r_,{token:J,onClose:()=>{Te(!1),xe(null)}}),n.jsx(n4,{isOpen:Be,steps:De,currentStep:N,canClose:Y,onClose:()=>{nt(!1),L([]),E(0)}})]})}function U7(){const[t,e]=T.useState([]),[r,s]=T.useState({}),[i,a]=T.useState(!1),[o,l]=T.useState(null),[c,d]=T.useState({}),[u,h]=T.useState(()=>window.innerWidth<768?"grid":"list"),[p,f]=T.useState(""),[m,v]=T.useState("liquidity"),[x,b]=T.useState("all"),[y,g]=T.useState([]),[w,S]=T.useState(2.5),[_,A]=T.useState(null);T.useEffect(()=>{(async()=>{await de(),await me(),B(),Q()})();const O=xh(()=>{de()}),V=()=>{B()};return window.addEventListener("walletConnected",V),window.addEventListener("walletDisconnected",V),()=>{O(),window.removeEventListener("walletConnected",V),window.removeEventListener("walletDisconnected",V)}},[]),T.useEffect(()=>{t.length>0&&Object.keys(r).length===0&&G()},[t]),T.useEffect(()=>{const z=setInterval(()=>{t.length>0&&G(!1)},3e5);return()=>clearInterval(z)},[t]),T.useEffect(()=>{o&&Object.keys(r).length>0&&Object.keys(c).length===0&&Z()},[o,r]),T.useEffect(()=>{o&&U()},[o]),T.useEffect(()=>{const z=O=>{_&&!O.target.closest(".swap-dropdown")&&A(null)};return document.addEventListener("mousedown",z),()=>document.removeEventListener("mousedown",z)},[_]);const B=()=>{const z=localStorage.getItem("connectedWallet");l(z?JSON.parse(z):null)},Q=async()=>{var z;try{const V=await(await fetch("https://api.coingecko.com/api/v3/simple/price?ids=ripple&vs_currencies=usd")).json();S(((z=V.ripple)==null?void 0:z.usd)||2.5)}catch(O){console.error("Error fetching XRP/USD price:",O),S(2.5)}},U=async()=>{if(o)try{const{data:z,error:O}=await le.from("token_favorites").select("token_id").eq("user_address",o.address);if(O)throw O;g((z==null?void 0:z.map(V=>V.token_id))||[])}catch(z){console.error("Error loading favorites:",z)}},q=async(z,O)=>{if(O&&O.stopPropagation(),!o){ie.error("Connect wallet to favorite pools");return}try{if(y.includes(z)){const{error:ne}=await le.from("token_favorites").delete().eq("user_address",o.address).eq("token_id",z);if(ne)throw ne;g(y.filter(pe=>pe!==z)),ie.success("Removed from favorites")}else{const{error:ne}=await le.from("token_favorites").insert([{user_address:o.address,token_id:z}]);if(ne)throw ne;g([...y,z]),ie.success("Added to favorites")}}catch(V){console.error("Error toggling favorite:",V),ie.error("Failed to update favorite")}},de=async()=>{try{const{data:z,error:O}=await le.from("meme_tokens").select("*").eq("amm_pool_created",!0).order("created_at",{ascending:!1});if(O)throw O;e(z||[])}catch(z){console.error("Error loading tokens:",z)}},me=async()=>{try{const{data:z,error:O}=await le.from("pool_data_cache").select("*");if(!O&&z&&z.length>0){const V={};z.forEach(ne=>{V[ne.token_id]={xrpAmount:parseFloat(ne.xrp_amount),tokenAmount:parseFloat(ne.token_amount),lpTokens:parseFloat(ne.lp_tokens),price:parseFloat(ne.price),accountId:ne.account_id,volume24h:parseFloat(ne.volume_24h||0),priceChange24h:parseFloat(ne.price_change_24h||0)}}),s(V),console.log(`⚡ Loaded ${z.length} pools from cache instantly`)}}catch(z){console.error("Error loading cached pool data:",z)}},ye=async z=>{try{const O=new Date(Date.now()-864e5).toISOString(),{data:V,error:ne}=await le.from("trade_history").select("token_id, xrp_amount").in("token_id",z).gte("created_at",O);if(ne)throw ne;const pe={};return z.forEach(ae=>pe[ae]=0),V&&V.length>0&&V.forEach(ae=>{const se=parseFloat(ae.xrp_amount||0);pe[ae.token_id]=(pe[ae.token_id]||0)+se}),console.log("📊 24h volumes calculated:",pe),pe}catch(O){return console.error("Error fetching 24h volumes:",O),{}}},G=async(z=!1)=>{var O;a(!0);try{const{data:ne,error:pe}=await le.from("pool_data_cache").select("*").gte("last_updated",new Date(Date.now()-3e5).toISOString());if(!z&&ne&&ne.length>0&&!pe){console.log(`✅ Using cached pool data (${ne.length} pools)`);const P={};ne.forEach($=>{P[$.token_id]={xrpAmount:parseFloat($.xrp_amount),tokenAmount:parseFloat($.token_amount),lpTokens:parseFloat($.lp_tokens),price:parseFloat($.price),accountId:$.account_id,volume24h:parseFloat($.volume_24h||0),priceChange24h:parseFloat($.price_change_24h||0)}}),s(P),a(!1);return}console.log("🔄 Fetching fresh pool data from XRPL...");const{requestWithRetry:ae}=await $t(()=>Promise.resolve().then(()=>tr),void 0),se={},k=await ye(t.map(P=>P.id));for(const P of t)try{const $=P.currency_code.length>3?Et.Buffer.from(P.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):P.currency_code;console.log(`Fetching AMM info for ${P.token_name}:`,{currency:P.currency_code,hex:$,issuer:P.issuer_address});const R=await ae({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:$,issuer:P.issuer_address},ledger_index:"validated"});if(R.result.amm){const W=R.result.amm,te=parseFloat(W.amount)/1e6,X=parseFloat(W.amount2.value),oe=parseFloat(((O=W.lp_token)==null?void 0:O.value)||0),F=parseFloat(W.trading_fee||0)/1e3,J=W.auction_slot||null,xe=k[P.id]||0,Ee=xe*(F/100),Te=te>0?Ee*365/te*100:0;se[P.id]={xrpAmount:te,tokenAmount:X,lpTokens:oe,price:te/X,accountId:W.account,tradingFee:F,volume24h:xe,fees24h:Ee,apr:Te,auctionSlot:J},console.log(`Found pool for ${P.token_name}:`,se[P.id])}else console.log(`No AMM found for ${P.token_name}`)}catch($){console.error(`Error fetching pool data for ${P.token_name}:`,$.message),se[P.id]=null}const j=Object.entries(se).filter(([P,$])=>$!==null).map(([P,$])=>({token_id:P,xrp_amount:$.xrpAmount,token_amount:$.tokenAmount,lp_tokens:$.lpTokens,price:$.price,account_id:$.accountId,volume_24h:$.volume24h||0,price_change_24h:0,last_updated:new Date().toISOString()}));if(j.length>0){for(const P of j)await le.from("pool_data_cache").upsert(P,{onConflict:"token_id"});console.log(`💾 Cached ${j.length} pools`)}s(se),console.log("All pool data loaded:",se)}catch(V){console.error("Error fetching pools data:",V),ie.error(`Failed to fetch pool data: ${V.message}`)}finally{a(!1)}},Z=async()=>{if(o)try{console.log("💰 Checking LP balance cache...");const{data:z}=await le.from("lp_balance_cache").select("*").eq("wallet_address",o.address).gte("last_updated",new Date(Date.now()-5*60*1e3).toISOString());if(z&&z.length>0){console.log("✅ Using cached LP balances:",z.length);const ae={};z.forEach(se=>{ae[se.token_id]={balance:parseFloat(se.lp_balance),share:parseFloat(se.lp_share_percentage)}}),d(ae);return}console.log("🔄 Fetching fresh LP balances from XRPL...");const{requestWithRetry:O}=await $t(()=>Promise.resolve().then(()=>tr),void 0),V=await O({command:"account_lines",account:o.address,ledger_index:"validated"}),ne={},pe=[];if(V.result.lines&&V.result.lines.forEach(ae=>{const se=Object.entries(r).find(([k,j])=>j&&j.accountId===ae.account);if(se){const[k,j]=se,P=parseFloat(ae.balance),$=j.lpTokens>0?P/j.lpTokens*100:0;ne[k]={balance:P,share:$},pe.push({wallet_address:o.address,token_id:k,amm_account_id:ae.account,lp_balance:P,lp_share_percentage:$,last_updated:new Date().toISOString()})}}),pe.length>0){for(const ae of pe)await le.from("lp_balance_cache").upsert(ae,{onConflict:"wallet_address,token_id"});console.log(`💾 Cached ${pe.length} LP balances`)}d(ne)}catch(z){console.error("Error fetching LP balances:",z)}},he=z=>!z.amm_pool_created||!z.amm_xrp_amount||!z.amm_asset_amount?0:z.amm_xrp_amount/z.amm_asset_amount,ee=z=>{const O=r[z.id];return O&&O.price?O.price:he(z)},H=z=>{const O=ee(z),V=parseFloat(z.total_supply)||0;return O*V},I=z=>{const O=r[z.id];if(!O||!O.price||!z.amm_xrp_amount||!z.amm_asset_amount)return"0.00";const V=O.price,ne=z.amm_xrp_amount/z.amm_asset_amount;return!ne||ne===0?"0.00":((V-ne)/ne*100).toFixed(2)},K=({token:z})=>{const O=r[z.id],V=c[z.id],ne=ee(z),pe=H(z);return n.jsxs("div",{className:"glass rounded-lg p-3 sm:p-6 space-y-3 sm:space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[n.jsx(Ht,{token:z,size:"lg",className:"flex-shrink-0"}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[n.jsxs("h3",{className:"text-sm sm:text-lg md:text-xl font-bold text-purple-200 truncate",children:[z.token_name,"/XRP"]}),n.jsx("button",{onClick:ae=>q(z.id,ae),className:"text-base sm:text-lg hover:scale-110 transition-transform flex-shrink-0",children:y.includes(z.id)?"⭐":"☆"})]}),n.jsx("p",{className:"text-purple-400 text-xs sm:text-sm",children:"AMM Pool"})]})]}),n.jsxs("div",{className:"text-left sm:text-right w-full sm:w-auto",children:[n.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[n.jsxs("div",{className:"min-w-0",children:[n.jsx("div",{className:"text-base sm:text-xl md:text-2xl font-bold text-purple-200 font-mono truncate",children:ne.toFixed(8)}),n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(ne*w).toFixed(6)]})]}),z.amm_pool_created&&n.jsxs("span",{className:`text-xs font-medium px-1.5 sm:px-2 py-1 rounded whitespace-nowrap flex-shrink-0 ${parseFloat(I(z))>=0?"text-green-300 bg-green-500/10":"text-red-300 bg-red-500/10"}`,children:[parseFloat(I(z))>=0?"+":"",I(z),"%"]})]}),n.jsx("div",{className:"text-purple-400 text-xs",children:"XRP per token"})]})]}),O?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-4",children:[n.jsxs("div",{className:"glass rounded-lg p-2 sm:p-4",children:[n.jsx("div",{className:"text-purple-400 text-xs mb-0.5 sm:mb-1",children:"XRP Liquidity"}),n.jsx("div",{className:"text-sm sm:text-lg font-bold text-purple-200 truncate",children:O.xrpAmount.toFixed(2)}),n.jsxs("div",{className:"text-green-400 text-xs truncate",children:["$",(O.xrpAmount*w).toFixed(2)]})]}),n.jsxs("div",{className:"glass rounded-lg p-2 sm:p-4",children:[n.jsx("div",{className:"text-purple-400 text-xs mb-0.5 sm:mb-1",children:"24h Volume"}),n.jsxs("div",{className:"text-sm sm:text-lg font-bold text-purple-200 truncate",children:[O.volume24h?O.volume24h.toFixed(2):"0"," XRP"]}),n.jsxs("div",{className:"text-green-400 text-xs truncate",children:["$",((O.volume24h||0)*w).toFixed(2)]})]}),n.jsxs("div",{className:"glass rounded-lg p-2 sm:p-4",children:[n.jsx("div",{className:"text-purple-400 text-xs mb-0.5 sm:mb-1",children:"LP Tokens"}),n.jsx("div",{className:"text-sm sm:text-lg font-bold text-purple-200 truncate",children:O.lpTokens.toFixed(2)})]}),n.jsxs("div",{className:"glass rounded-lg p-2 sm:p-4",children:[n.jsx("div",{className:"text-purple-400 text-xs mb-0.5 sm:mb-1",children:"Market Cap"}),n.jsxs("div",{className:"text-sm sm:text-lg font-bold text-purple-200 truncate",children:[pe.toFixed(2)," XRP"]})]})]}),V&&n.jsx("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-2 sm:p-4",children:n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-3",children:[n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("div",{className:"text-green-300 text-xs sm:text-sm font-medium mb-0.5 sm:mb-1",children:"Your LP Position"}),n.jsxs("div",{className:"text-green-200 text-xs truncate",children:[V.balance.toFixed(4)," LP Tokens (",V.share.toFixed(4),"% of pool)"]})]}),n.jsxs("div",{className:"text-left sm:text-right flex-shrink-0",children:[n.jsxs("div",{className:"text-green-200 text-sm sm:text-base font-bold truncate",children:["~",(O.xrpAmount*V.share/100).toFixed(4)," XRP"]}),n.jsxs("div",{className:"text-green-400 text-xs truncate",children:["$",(O.xrpAmount*V.share/100*w).toFixed(2)]}),n.jsx("div",{className:"text-green-300 text-xs",children:"Your Share Value"})]})]})}),n.jsxs("div",{className:"relative swap-dropdown",children:[n.jsxs("button",{onClick:ae=>{ae.stopPropagation(),A(_===z.id?null:z.id)},className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-bold py-2.5 sm:py-3 rounded-lg shadow-md shadow-blue-500/50 hover:shadow-blue-500/70 flex items-center justify-center gap-2 text-sm sm:text-base",children:["💱 Swap",n.jsx("svg",{className:`w-4 h-4 transition-transform ${_===z.id?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),_===z.id&&n.jsxs("div",{className:"absolute bottom-full left-0 right-0 mb-2 glass bg-gradient-to-br from-purple-900/95 to-purple-800/95 border border-purple-500/30 rounded-lg shadow-xl z-[9999] overflow-hidden",children:[n.jsxs("button",{onClick:()=>{A(null),localStorage.setItem("selectedTradeToken",JSON.stringify(z)),window.dispatchEvent(new CustomEvent("navigateToTrade",{detail:z}))},className:"w-full px-4 py-3 text-left hover:bg-purple-600/30 transition-colors flex items-center gap-3 border-b border-purple-500/30",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-500/20 flex items-center justify-center text-purple-300",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-purple-100 font-medium",children:"Trade Page"}),n.jsx("div",{className:"text-purple-300 text-xs",children:"Swap on MEMEKINGS"})]})]}),n.jsxs("a",{href:`https://xmagnetic.org/dex/${z.currency_code}+${z.issuer_address}_XRP+XRP?network=mainnet`,target:"_blank",rel:"noopener noreferrer",className:"w-full px-4 py-3 text-left hover:bg-purple-600/30 transition-colors flex items-center gap-3",onClick:()=>A(null),children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-500/20 flex items-center justify-center text-purple-300",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-purple-100 font-medium",children:"Magnetic Link"}),n.jsx("div",{className:"text-purple-300 text-xs",children:"Trade on xMagnetic"})]})]})]})]})]}):n.jsx("div",{className:"text-center text-purple-400 py-8",children:n.jsx("div",{className:"animate-pulse",children:"Loading pool data..."})})]})},re=({token:z})=>{const O=r[z.id],V=c[z.id],ne=ee(z);return O?n.jsxs("tr",{className:"border-t border-purple-500/20 hover:bg-purple-900/20",children:[n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ht,{token:z,size:"md"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"font-bold text-purple-200",children:[z.token_name,"/XRP"]}),n.jsx("div",{className:"text-purple-400 text-xs",children:z.currency_code})]}),n.jsx("button",{onClick:pe=>q(z.id,pe),className:"text-lg hover:scale-110 transition-transform",children:y.includes(z.id)?"⭐":"☆"})]})]})}),n.jsxs("td",{className:"px-4 py-3",children:[n.jsxs("div",{className:"text-purple-200 font-bold",children:[ne.toFixed(8)," XRP"]}),n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(ne*w).toFixed(6)]})]}),n.jsx("td",{className:"px-4 py-3",children:z.amm_pool_created&&n.jsxs("span",{className:`text-sm font-bold px-2 py-1 rounded ${parseFloat(I(z))>=0?"text-green-300 bg-green-500/10":"text-red-300 bg-red-500/10"}`,children:[parseFloat(I(z))>=0?"+":"",I(z),"%"]})}),n.jsxs("td",{className:"px-4 py-3",children:[n.jsx("div",{className:"text-purple-200 font-bold",children:O?`${O.xrpAmount.toFixed(2)} XRP`:"Loading..."}),n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(O?O.xrpAmount*w:0).toFixed(2)]})]}),n.jsxs("td",{className:"px-4 py-3",children:[n.jsx("div",{className:"text-purple-200 font-bold",children:O&&O.volume24h>0?`${O.volume24h.toFixed(2)} XRP`:"0 XRP"}),n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(((O==null?void 0:O.volume24h)||0)*w).toFixed(2)]})]}),n.jsx("td",{className:"px-4 py-3",children:O&&O.apr>0?n.jsxs("span",{className:"text-green-400 font-bold",children:[O.apr.toFixed(2),"%"]}):n.jsx("span",{className:"text-purple-500",children:"0%"})}),n.jsx("td",{className:"px-4 py-3 text-purple-300",children:O&&O.fees24h>0?`${O.fees24h.toFixed(4)} XRP`:"0 XRP"}),n.jsx("td",{className:"px-4 py-3 text-purple-300",children:O&&O.lpTokens>0?n.jsxs("span",{className:"font-medium",children:[(O.lpTokens/1e3).toFixed(0),"K"]}):n.jsx("span",{className:"text-purple-500",children:"-"})}),n.jsx("td",{className:"px-4 py-3 text-purple-200 font-medium",children:O&&O.contributors>0?O.contributors:"0"}),n.jsx("td",{className:"px-4 py-3",children:V?n.jsxs("div",{children:[n.jsxs("div",{className:"text-green-200 font-bold",children:[(O.xrpAmount*V.share/100).toFixed(4)," XRP"]}),n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(O&&O.xrpAmount?O.xrpAmount*V.share/100*w:0).toFixed(2)]}),n.jsxs("div",{className:"text-green-300 text-xs",children:[V.share.toFixed(2),"% share"]})]}):n.jsx("span",{className:"text-purple-500",children:"-"})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"relative swap-dropdown",children:[n.jsxs("button",{onClick:pe=>{pe.stopPropagation(),A(_===z.id?null:z.id)},className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-bold text-xs px-3 py-2 rounded shadow-md shadow-blue-500/50 hover:shadow-blue-500/70 flex items-center gap-1",children:["💱 Swap",n.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),_===z.id&&n.jsxs("div",{className:"absolute top-full left-0 mt-2 w-64 glass bg-gradient-to-br from-purple-900/95 to-purple-800/95 border border-purple-500/30 rounded-lg shadow-xl z-[9999] overflow-hidden",children:[n.jsxs("button",{onClick:()=>{A(null),localStorage.setItem("selectedTradeToken",JSON.stringify(z)),window.dispatchEvent(new CustomEvent("navigateToTrade",{detail:z}))},className:"w-full px-4 py-3 text-left hover:bg-purple-600/30 transition-colors flex items-center gap-3 border-b border-purple-500/30",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-500/20 flex items-center justify-center text-purple-300",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-purple-100 font-medium",children:"Trade Page"}),n.jsx("div",{className:"text-purple-300 text-xs",children:"Swap on MEMEKINGS"})]})]}),n.jsxs("a",{href:`https://xmagnetic.org/dex/${z.currency_code}+${z.issuer_address}_XRP+XRP?network=mainnet`,target:"_blank",rel:"noopener noreferrer",className:"w-full px-4 py-3 text-left hover:bg-purple-600/30 transition-colors flex items-center gap-3",onClick:()=>A(null),children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-500/20 flex items-center justify-center text-purple-300",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-purple-100 font-medium",children:"Magnetic Link"}),n.jsx("div",{className:"text-purple-300 text-xs",children:"Trade on xMagnetic"})]})]})]})]})})]}):null};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-purple-200",children:"AMM Pools"}),n.jsx("p",{className:"text-purple-400 mt-1",children:"Liquidity pools for all platform tokens"})]}),n.jsx("button",{onClick:G,disabled:i,className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium disabled:opacity-50",children:i?"🔄 Refreshing...":"🔄 Refresh Pools"})]}),!o&&n.jsx("div",{className:"glass rounded-lg p-6 bg-yellow-500/10 border border-yellow-500/30",children:n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("div",{className:"text-2xl",children:"💡"}),n.jsx("div",{className:"text-yellow-200 font-medium",children:"Connect Wallet to See Your LP Positions"}),n.jsx("p",{className:"text-yellow-300 text-sm",children:"Connect your wallet from the Setup page to view your liquidity provider positions"})]})}),n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>b("all"),className:`px-6 py-2 rounded-lg font-medium transition-all ${x==="all"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"All AMM Pools"}),n.jsx("button",{onClick:()=>b("mine"),className:`px-6 py-2 rounded-lg font-medium transition-all ${x==="mine"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"My AMM Pools"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>h("list"),className:`px-4 py-2 rounded-lg transition-all ${u==="list"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"☰ List"}),n.jsx("button",{onClick:()=>h("grid"),className:`px-4 py-2 rounded-lg transition-all ${u==="grid"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"▦ Grid"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-6",children:[n.jsx("input",{type:"text",placeholder:"🔍 Search pools...",value:p,onChange:z=>f(z.target.value),className:"input text-purple-200 md:col-span-2"}),n.jsxs("select",{value:m,onChange:z=>v(z.target.value),className:"input text-purple-200",children:[n.jsx("option",{value:"liquidity",children:"Sort by Liquidity"}),n.jsx("option",{value:"volume",children:"Sort by Volume"}),n.jsx("option",{value:"change24h",children:"Sort by 24h %"}),n.jsx("option",{value:"price",children:"Sort by Price"}),n.jsx("option",{value:"apr",children:"Sort by APR"}),n.jsx("option",{value:"name",children:"Sort by Name"})]})]}),u==="grid"?n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:t.filter(z=>{if(!z.amm_pool_created)return!1;const O=z.token_name.toLowerCase().includes(p.toLowerCase())||z.currency_code.toLowerCase().includes(p.toLowerCase()),V=c[z.id]&&c[z.id].balance>0;return O&&(x==="all"||x==="mine"&&V)}).sort((z,O)=>{var V,ne,pe,ae,se,k;return m==="liquidity"?(((V=r[O.id])==null?void 0:V.xrpAmount)||0)-(((ne=r[z.id])==null?void 0:ne.xrpAmount)||0):m==="volume"?(((pe=r[O.id])==null?void 0:pe.volume24h)||0)-(((ae=r[z.id])==null?void 0:ae.volume24h)||0):m==="change24h"?parseFloat(I(O))-parseFloat(I(z)):m==="price"?ee(O)-ee(z):m==="apr"?(((se=r[O.id])==null?void 0:se.apr)||0)-(((k=r[z.id])==null?void 0:k.apr)||0):z.token_name.localeCompare(O.token_name)}).map(z=>n.jsx(K,{token:z},z.id))}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-purple-900/30",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium cursor-pointer hover:text-purple-100",onClick:()=>v("name"),children:"Pool"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium cursor-pointer hover:text-purple-100",onClick:()=>v("price"),children:"Live Price"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium cursor-pointer hover:text-purple-100",onClick:()=>v("change24h"),children:"24h %"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium cursor-pointer hover:text-purple-100",onClick:()=>v("liquidity"),children:"Liquidity"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium cursor-pointer hover:text-purple-100",onClick:()=>v("volume"),children:"24h Volume"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium cursor-pointer hover:text-purple-100",onClick:()=>v("apr"),children:"APR (1 year)"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"24h Fees"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"LP Tokens"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Contributors"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Your Share"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Actions"})]})}),n.jsx("tbody",{children:t.filter(z=>{if(!z.amm_pool_created)return!1;const O=z.token_name.toLowerCase().includes(p.toLowerCase())||z.currency_code.toLowerCase().includes(p.toLowerCase()),V=c[z.id]&&c[z.id].balance>0;return O&&(x==="all"||x==="mine"&&V)}).sort((z,O)=>{var V,ne,pe,ae,se,k;return m==="liquidity"?(((V=r[O.id])==null?void 0:V.xrpAmount)||0)-(((ne=r[z.id])==null?void 0:ne.xrpAmount)||0):m==="volume"?(((pe=r[O.id])==null?void 0:pe.volume24h)||0)-(((ae=r[z.id])==null?void 0:ae.volume24h)||0):m==="change24h"?parseFloat(I(O))-parseFloat(I(z)):m==="price"?ee(O)-ee(z):m==="apr"?(((se=r[O.id])==null?void 0:se.apr)||0)-(((k=r[z.id])==null?void 0:k.apr)||0):z.token_name.localeCompare(O.token_name)}).map(z=>n.jsx(re,{token:z},z.id))})]})})]}),t.length===0&&n.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:"🏊"}),n.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-2",children:"No AMM Pools Yet"}),n.jsx("p",{className:"text-purple-400",children:"AMM pools will appear here once tokens are created with liquidity"})]})]})}function V7({isOpen:t,currentSlippage:e,suggestedSlippage:r,tradeType:s,amount:i,tokenName:a,onRetry:o,onCancel:l,onClose:c,isRetrying:d=!1,retryComplete:u=!1,retrySuccess:h=!1,retryError:p=null}){const[f,m]=T.useState(3);return T.useEffect(()=>{if(u&&h){const v=setTimeout(()=>{c()},2e3);return()=>clearTimeout(v)}},[u,h,c]),T.useEffect(()=>{if(d){m(3);const v=setInterval(()=>{m(x=>x<=1?(clearInterval(v),0):x-1)},1e3);return()=>clearInterval(v)}},[d]),t?n.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-[100] p-4 animate-fadeIn",children:n.jsxs("div",{className:"glass rounded-lg p-8 max-w-md w-full shadow-2xl border border-purple-500/30 animate-slideUp relative",children:[n.jsx("button",{onClick:c,className:"absolute top-4 right-4 w-10 h-10 rounded-lg glass hover:bg-red-500/20 text-purple-300 hover:text-red-300 flex items-center justify-center transition-all z-10 text-2xl font-bold","aria-label":"Close",children:"×"}),u?n.jsx("div",{className:"text-center space-y-6",children:h?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-20 h-20 rounded-full bg-green-500/20 flex items-center justify-center mx-auto",children:n.jsx("span",{className:"text-5xl",children:"✓"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-bold text-green-400 mb-2",children:"Trade Successful!"}),n.jsxs("p",{className:"text-purple-300",children:["Your ",s.toLowerCase()," order completed with ",r,"% slippage."]})]}),n.jsx("div",{className:"text-purple-400 text-sm",children:"Closing automatically..."})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-20 h-20 rounded-full bg-red-500/20 flex items-center justify-center mx-auto",children:n.jsx("span",{className:"text-5xl",children:"✗"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-bold text-red-400 mb-2",children:"Retry Failed"}),n.jsx("p",{className:"text-purple-300 mb-4",children:p||"Trade could not be completed. Please try again manually."}),n.jsx("div",{className:"glass rounded-lg p-3",children:n.jsxs("p",{className:"text-purple-400 text-sm",children:[n.jsx("strong",{children:"Suggestions:"}),n.jsx("br",{}),"• Try a smaller amount",n.jsx("br",{}),"• Increase slippage further",n.jsx("br",{}),"• Wait for pool liquidity to improve"]})})]}),n.jsx("button",{onClick:c,className:"w-full btn-primary text-white py-3 rounded-lg font-medium",children:"Close"})]})}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-yellow-500/20 flex items-center justify-center",children:n.jsx("span",{className:"text-2xl",children:"⚠️"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-purple-200",children:"Slippage Too Low"}),n.jsx("p",{className:"text-purple-400 text-sm",children:"Trade couldn't complete"})]})]}),n.jsxs("div",{className:"glass rounded-lg p-4 space-y-3 mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-purple-400 text-sm",children:"Trade Type"}),n.jsx("span",{className:"text-purple-200 font-medium",children:s})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-purple-400 text-sm",children:"Amount"}),n.jsxs("span",{className:"text-purple-200 font-medium",children:[i," ",a]})]}),n.jsx("div",{className:"h-px bg-purple-500/20 my-2"}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-purple-400 text-sm",children:"Current Slippage"}),n.jsxs("span",{className:"text-red-400 font-bold",children:[e,"%"]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-purple-400 text-sm",children:"Suggested Slippage"}),n.jsxs("span",{className:"text-green-400 font-bold",children:[r,"%"]})]})]}),n.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-6",children:n.jsxs("p",{className:"text-blue-300 text-sm",children:[n.jsx("strong",{children:"Why did this happen?"}),n.jsx("br",{}),"The pool's price moved while your trade was processing. Increasing slippage tolerance allows for more price movement."]})}),d?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 border-4 border-purple-500/30 border-t-purple-500 rounded-full animate-spin"}),n.jsxs("span",{className:"text-purple-200 font-medium",children:["Retrying with ",r,"% slippage..."]})]}),f>0&&n.jsxs("div",{className:"text-center text-purple-400 text-sm",children:["Executing in ",f,"s"]})]}):n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:l,className:"flex-1 glass hover:bg-purple-500/10 text-purple-300 py-3 rounded-lg font-medium transition-all",children:"Cancel"}),n.jsxs("button",{onClick:o,className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white py-3 rounded-lg font-medium transition-all shadow-lg",children:["Retry with ",r,"%"]})]})]})]})}):null}function H7({isOpen:t,onClose:e,token:r,transactions:s,loading:i}){if(T.useEffect(()=>{const d=u=>{u.key==="Escape"&&e()};if(t)return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[t,e]),!t)return null;const a=d=>{const u=new Date(d),p=new Date-u,f=Math.floor(p/6e4),m=Math.floor(f/60);return f<1?"Just now":f<60?`${f}m ago`:m<24?`${m}h ago`:u.toLocaleString()},o=d=>{const u=parseFloat(d);return u>=1e6?`${(u/1e6).toFixed(2)}M`:u>=1e3?`${(u/1e3).toFixed(2)}K`:u.toFixed(2)},l=d=>{var u;return d.TransactionType==="AMMDeposit"?"Deposit":d.TransactionType==="AMMWithdraw"?"Withdraw":d.TransactionType==="Payment"?(u=d.meta)!=null&&u.delivered_amount&&typeof d.meta.delivered_amount=="string"?"Buy":"Sell":d.TransactionType},c=d=>{switch(d){case"Buy":return"bg-green-500/20 text-green-300 border-green-500/30";case"Sell":return"bg-red-500/20 text-red-300 border-red-500/30";case"Deposit":return"bg-blue-500/20 text-blue-300 border-blue-500/30";case"Withdraw":return"bg-yellow-500/20 text-yellow-300 border-yellow-500/30";default:return"bg-purple-500/20 text-purple-300 border-purple-500/30"}};return n.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-[100] p-4 animate-fadeIn",onClick:e,children:n.jsxs("div",{className:"glass rounded-lg p-6 max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col animate-slideUp",onClick:d=>d.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-bold text-purple-200",children:"AMM Pool History"}),n.jsxs("p",{className:"text-purple-400 text-sm mt-1",children:[r==null?void 0:r.token_name," - Last 24 Hours"]})]}),n.jsx("button",{onClick:e,className:"w-10 h-10 rounded-lg glass hover:bg-purple-500/20 flex items-center justify-center text-purple-300 text-xl transition-all",children:"×"})]}),i?n.jsx("div",{className:"flex-1 flex items-center justify-center py-20",children:n.jsxs("div",{className:"text-center space-y-4",children:[n.jsx("div",{className:"w-16 h-16 border-4 border-purple-500/30 border-t-purple-500 rounded-full animate-spin mx-auto"}),n.jsx("p",{className:"text-purple-300",children:"Loading transaction history..."})]})}):s.length===0?n.jsx("div",{className:"flex-1 flex items-center justify-center py-20",children:n.jsxs("div",{className:"text-center space-y-3",children:[n.jsx("div",{className:"text-6xl",children:"📊"}),n.jsx("h4",{className:"text-xl font-bold text-purple-200",children:"No Transactions Found"}),n.jsx("p",{className:"text-purple-400",children:"No AMM pool activity in the last 24 hours"})]})}):n.jsxs("div",{className:"flex-1 overflow-y-auto space-y-3",children:[n.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4 px-4 text-sm font-semibold text-purple-400",children:[n.jsx("div",{children:"Type"}),n.jsx("div",{children:"Amount"}),n.jsx("div",{children:"Account"}),n.jsx("div",{className:"text-right",children:"Time"})]}),s.map((d,u)=>{const h=l(d),p=c(h);return n.jsx("div",{className:"glass rounded-lg p-4 hover:bg-purple-500/10 transition-all",children:n.jsxs("div",{className:"grid grid-cols-4 gap-4 items-center",children:[n.jsx("div",{children:n.jsx("div",{className:`inline-flex px-3 py-1 rounded-lg text-xs font-medium border ${p}`,children:h})}),n.jsx("div",{children:n.jsx("div",{className:"text-purple-200 font-medium text-sm",children:d.Amount?typeof d.Amount=="string"?`${o(parseInt(d.Amount)/1e6)} XRP`:`${o(d.Amount.value)} ${d.Amount.currency}`:"N/A"})}),n.jsx("div",{children:n.jsx("div",{className:"text-purple-300 text-xs font-mono",children:d.Account?`${d.Account.substring(0,8)}...${d.Account.substring(d.Account.length-6)}`:"Unknown"})}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-purple-400 text-xs",children:a(d.date?(d.date+946684800)*1e3:Date.now())}),d.hash&&n.jsx("a",{href:`https://livenet.xrpl.org/transactions/${d.hash}`,target:"_blank",rel:"noopener noreferrer",className:"text-purple-500 hover:text-purple-400 text-xs mt-1 inline-block",children:"View →"})]})]})},d.hash||u)})]}),n.jsxs("div",{className:"mt-6 pt-4 border-t border-purple-500/20 flex justify-between items-center",children:[n.jsxs("div",{className:"text-purple-400 text-sm",children:[s.length," transaction",s.length!==1?"s":""," found"]}),n.jsx("button",{onClick:e,className:"btn-primary text-white px-6 py-2 rounded-lg font-medium",children:"Close"})]})]})})}function Pi({type:t,value:e,network:r}){const s=`https://${r==="mainnet"?"":"test."}xrpscan.com`,i=t==="address"?"/account/":"/tx/";return n.jsxs("a",{href:`${s}${i}${e}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-600 hover:underline",children:[e.substring(0,12),"...",e.substring(e.length-8)]})}function i4({tokenId:t,connectedWallet:e}){const[r,s]=T.useState([]),[i,a]=T.useState(!0),[o,l]=T.useState(0),[c,d]=T.useState(3);T.useEffect(()=>{u(),h();const m=le.channel("trade_history_changes").on("postgres_changes",{event:"*",schema:"public",table:"trade_history",filter:`token_id=eq.${t}`},()=>{h()}).subscribe();return()=>{m.unsubscribe()}},[t,e]);const u=async()=>{var m;try{const x=await(await fetch("https://api.coingecko.com/api/v3/simple/price?ids=ripple&vs_currencies=usd")).json();l(((m=x.ripple)==null?void 0:m.usd)||0)}catch(v){console.error("Error fetching XRP/USD price:",v)}},h=async()=>{try{if(a(!0),e!=null&&e.address){const m=new Date(Date.now()-864e5).toISOString(),{data:v,error:x}=await le.from("trade_history").select("*").eq("token_id",t).eq("trader_address",e.address).gte("created_at",m).order("created_at",{ascending:!1}).limit(100);if(x)throw x;s(v||[])}else s([])}catch(m){console.error("Error fetching trade history:",m)}finally{a(!1)}},p=m=>{const v=new Date(m),b=Math.floor((new Date-v)/6e4);if(b<1)return"Just now";if(b<60)return`${b}m ago`;const y=Math.floor(b/60);return y<24?`${y}h ago`:v.toLocaleString()},f=m=>{if(m.length===0)return n.jsxs("div",{className:"text-center py-8 text-purple-400",children:[n.jsx("div",{className:"text-4xl mb-2",children:"📊"}),n.jsx("div",{children:"No recent trades"})]});const v=m.slice(0,c);return n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"max-h-[300px] overflow-y-auto space-y-2 pr-2",children:v.map(x=>n.jsxs("div",{className:"glass rounded-lg p-3 hover:bg-purple-900/20 transition-all border border-purple-500/10",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("span",{className:`px-3 py-1 rounded-lg text-xs font-bold flex items-center gap-1 ${x.trade_type==="buy"?"bg-green-500/20 text-green-300 border border-green-500/30":"bg-red-500/20 text-red-300 border border-red-500/30"}`,children:x.trade_type==="buy"?"🟢 BUY":"🔴 SELL"}),n.jsx("span",{className:"text-xs text-purple-400 font-medium",children:p(x.created_at)})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"Token Amount"}),n.jsx("div",{className:"text-purple-200 font-bold",children:parseFloat(x.token_amount).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:4})})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"XRP Amount"}),n.jsxs("div",{className:"text-purple-200 font-bold",children:[parseFloat(x.xrp_amount).toFixed(4)," XRP"]}),o>0&&n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(parseFloat(x.xrp_amount)*o).toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"Price"}),n.jsxs("div",{className:"text-purple-300 text-xs font-mono",children:[parseFloat(x.price).toFixed(8)," XRP"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"Transaction"}),x.tx_hash?n.jsx(Pi,{type:"tx",value:x.tx_hash,network:"mainnet",className:"text-xs"}):n.jsx("span",{className:"text-purple-500 text-xs",children:"Pending"})]})]})]},x.id))}),m.length>c&&n.jsxs("button",{onClick:()=>d(x=>x+5),className:"w-full py-2 rounded-lg glass hover:bg-purple-500/20 text-purple-300 text-sm font-medium transition-all",children:["Load More (",m.length-c," remaining)"]}),c>3&&n.jsx("button",{onClick:()=>d(3),className:"w-full py-2 rounded-lg glass hover:bg-purple-500/20 text-purple-400 text-xs transition-all",children:"Show Less"})]})};return i?n.jsxs("div",{className:"glass rounded-lg p-4",children:[n.jsx("h3",{className:"text-lg font-bold text-purple-200 mb-4",children:"Trade History"}),n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-purple-500 border-t-transparent"})})]}):n.jsxs("div",{className:"glass rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-bold text-purple-200",children:"My Trades"}),r.length>0&&n.jsxs("span",{className:"text-sm text-purple-400",children:[r.length," in 24h"]})]}),e?f(r):n.jsxs("div",{className:"text-center py-8 text-purple-400",children:[n.jsx("div",{className:"text-4xl mb-2",children:"🔒"}),n.jsx("div",{children:"Connect wallet to view your trades"})]})]})}function z7({isOpen:t,onClose:e,onSelectAddress:r,walletAddress:s}){const[i,a]=T.useState([]),[o,l]=T.useState(!0),[c,d]=T.useState(null),[u,h]=T.useState(!1),[p,f]=T.useState(""),[m,v]=T.useState({name:"",address:"",notes:"",is_favorite:!1});T.useEffect(()=>{t&&s&&x()},[t,s]);const x=async()=>{try{l(!0);const{data:_,error:A}=await le.from("address_book").select("*").eq("wallet_address",s).order("is_favorite",{ascending:!1}).order("name",{ascending:!0});if(A)throw A;a(_||[])}catch(_){console.error("Error loading contacts:",_),ie.error("Failed to load address book")}finally{l(!1)}},b=async()=>{try{if(!m.name||!m.address){ie.error("Name and address are required");return}if(c){const{error:_}=await le.from("address_book").update({name:m.name,address:m.address,notes:m.notes,is_favorite:m.is_favorite}).eq("id",c.id);if(_)throw _;ie.success("Contact updated successfully")}else{const{error:_}=await le.from("address_book").insert({wallet_address:s,name:m.name,address:m.address,notes:m.notes,is_favorite:m.is_favorite});if(_)throw _;ie.success("Contact added successfully")}h(!1),d(null),v({name:"",address:"",notes:"",is_favorite:!1}),x()}catch(_){console.error("Error saving contact:",_),ie.error("Failed to save contact")}},y=async _=>{if(confirm("Are you sure you want to delete this contact?"))try{const{error:A}=await le.from("address_book").delete().eq("id",_);if(A)throw A;ie.success("Contact deleted"),x()}catch(A){console.error("Error deleting contact:",A),ie.error("Failed to delete contact")}},g=_=>{d(_),v({name:_.name,address:_.address,notes:_.notes||"",is_favorite:_.is_favorite}),h(!0)},w=async _=>{try{const{error:A}=await le.from("address_book").update({is_favorite:!_.is_favorite}).eq("id",_.id);if(A)throw A;x()}catch(A){console.error("Error toggling favorite:",A),ie.error("Failed to update favorite")}},S=i.filter(_=>_.name.toLowerCase().includes(p.toLowerCase())||_.address.toLowerCase().includes(p.toLowerCase()));return t?n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",children:n.jsxs("div",{className:"w-full max-w-2xl max-h-[90vh] rounded-xl overflow-hidden border border-purple-500/40",style:{background:"linear-gradient(135deg, rgba(88, 28, 135, 0.98), rgba(59, 7, 100, 0.98))",backdropFilter:"blur(20px)"},children:[n.jsxs("div",{className:"p-6 border-b border-purple-500/30 bg-purple-900/40",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-2xl font-bold text-white",children:"📇 Address Book"}),n.jsx("button",{onClick:e,className:"text-purple-300 hover:text-white transition-colors",children:"✕"})]}),n.jsx("input",{type:"text",value:p,onChange:_=>f(_.target.value),placeholder:"Search contacts...",className:"w-full bg-purple-950/60 border border-purple-500/40 rounded-lg px-4 py-2 text-white placeholder-purple-400/60 focus:outline-none focus:border-purple-400/60 focus:ring-2 focus:ring-purple-500/30"})]}),n.jsxs("div",{className:"p-6 overflow-y-auto",style:{maxHeight:"calc(90vh - 200px)"},children:[u?n.jsxs("div",{className:"space-y-4 mb-6 p-4 bg-purple-900/30 rounded-lg border border-purple-500/30",children:[n.jsx("h3",{className:"text-lg font-bold text-white",children:c?"Edit Contact":"Add New Contact"}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-purple-200 mb-1",children:["Name ",n.jsx("span",{className:"text-red-400",children:"*"})]}),n.jsx("input",{type:"text",value:m.name,onChange:_=>v({...m,name:_.target.value}),placeholder:"John Doe",className:"w-full bg-purple-950/60 border border-purple-500/40 rounded-lg px-3 py-2 text-white placeholder-purple-400/50 focus:outline-none focus:border-purple-400/60 focus:ring-2 focus:ring-purple-500/30"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-purple-200 mb-1",children:["XRPL Address ",n.jsx("span",{className:"text-red-400",children:"*"})]}),n.jsx("input",{type:"text",value:m.address,onChange:_=>v({...m,address:_.target.value}),placeholder:"rXXXXXXXXXXXXXXXXXXXXXXXXXXXX",className:"w-full bg-purple-950/60 border border-purple-500/40 rounded-lg px-3 py-2 text-white placeholder-purple-400/50 focus:outline-none focus:border-purple-400/60 focus:ring-2 focus:ring-purple-500/30"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-purple-200 mb-1",children:"Notes"}),n.jsx("textarea",{value:m.notes,onChange:_=>v({...m,notes:_.target.value}),placeholder:"Optional notes about this contact",className:"w-full bg-purple-950/60 border border-purple-500/40 rounded-lg px-3 py-2 text-white placeholder-purple-400/50 focus:outline-none focus:border-purple-400/60 focus:ring-2 focus:ring-purple-500/30 resize-none",rows:"2"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",id:"is_favorite",checked:m.is_favorite,onChange:_=>v({...m,is_favorite:_.target.checked}),className:"w-4 h-4 text-purple-600 bg-purple-950/60 border-purple-500/40 rounded focus:ring-purple-500/30"}),n.jsx("label",{htmlFor:"is_favorite",className:"text-sm text-purple-200",children:"Mark as favorite"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:b,className:"flex-1 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:shadow-lg hover:shadow-purple-500/50 text-white rounded-lg font-medium transition-all duration-200",children:c?"Update Contact":"Add Contact"}),n.jsx("button",{onClick:()=>{h(!1),d(null),v({name:"",address:"",notes:"",is_favorite:!1})},className:"px-4 py-2 bg-purple-800/40 hover:bg-purple-800/60 text-purple-200 rounded-lg font-medium transition-all duration-200 border border-purple-500/30",children:"Cancel"})]})]}):n.jsxs("button",{onClick:()=>h(!0),className:"w-full mb-4 px-4 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:shadow-lg hover:shadow-purple-500/50 text-white rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2",children:[n.jsx("span",{children:"➕"}),"Add New Contact"]}),o?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx("div",{className:"w-8 h-8 border-2 border-purple-400 border-t-transparent rounded-full animate-spin"})}):S.length===0?n.jsx("div",{className:"text-center py-12 text-purple-300/60",children:p?"No contacts found":"No contacts yet. Add your first contact!"}):n.jsx("div",{className:"space-y-2",children:S.map(_=>n.jsx("div",{className:"p-4 bg-purple-900/30 rounded-lg border border-purple-500/20 hover:border-purple-500/40 transition-all duration-200",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>w(_),className:"text-xl hover:scale-110 transition-transform",children:_.is_favorite?"⭐":"☆"}),n.jsx("h3",{className:"text-lg font-bold text-white",children:_.name})]}),n.jsx("p",{className:"text-sm text-purple-300/80 mt-1 font-mono break-all",children:_.address}),_.notes&&n.jsx("p",{className:"text-sm text-purple-400/60 mt-2",children:_.notes})]}),n.jsxs("div",{className:"flex gap-2 ml-4",children:[r&&n.jsx("button",{onClick:()=>r(_),className:"px-3 py-1.5 bg-green-600/30 hover:bg-green-600/50 text-green-200 rounded-lg text-sm font-medium transition-all duration-200 border border-green-500/30",children:"Select"}),n.jsx("button",{onClick:()=>g(_),className:"px-3 py-1.5 bg-blue-600/30 hover:bg-blue-600/50 text-blue-200 rounded-lg text-sm font-medium transition-all duration-200 border border-blue-500/30",children:"Edit"}),n.jsx("button",{onClick:()=>y(_.id),className:"px-3 py-1.5 bg-red-600/30 hover:bg-red-600/50 text-red-200 rounded-lg text-sm font-medium transition-all duration-200 border border-red-500/30",children:"Delete"})]})]})},_.id))})]}),n.jsx("div",{className:"p-4 border-t border-purple-500/30 bg-purple-900/40",children:n.jsx("button",{onClick:e,className:"w-full px-4 py-2 bg-purple-800/40 hover:bg-purple-800/60 text-purple-200 rounded-lg font-medium transition-all duration-200 border border-purple-500/30",children:"Close"})})]})}):null}function X7({execution:t,onExecute:e,onCancel:r}){var v;const[s,i]=T.useState(t.defaultValues||{}),[a,o]=T.useState(!1),[l,c]=T.useState(0),[d,u]=T.useState(!1),h=JSON.parse(localStorage.getItem("connectedWallet")||"{}").address,p=x=>{f("destinationAddress",x.address),u(!1)},f=(x,b)=>{i(y=>({...y,[x]:b}))},m=async()=>{o(!0),c(0);try{for(let x=0;x<t.steps.length;x++)c(x),await new Promise(b=>setTimeout(b,800));await e(s),c(t.steps.length)}catch(x){console.error("Execution error:",x)}finally{o(!1)}};return n.jsxs("div",{className:"mt-4 rounded-xl overflow-hidden border border-purple-500/40",style:{background:"linear-gradient(135deg, rgba(88, 28, 135, 0.95), rgba(59, 7, 100, 0.95))",backdropFilter:"blur(20px)"},children:[n.jsx("div",{className:"p-4 border-b border-purple-500/30 bg-purple-900/40",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"text-3xl",children:t.icon}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-bold text-white",children:t.title}),n.jsx("p",{className:"text-purple-300/80 text-sm",children:t.description})]}),t.badge&&n.jsx("span",{className:"px-3 py-1 bg-purple-600/40 text-purple-200 text-xs font-medium rounded-full border border-purple-500/30",children:t.badge})]})}),t.fields&&t.fields.length>0&&n.jsx("div",{className:"p-4 space-y-3 bg-purple-900/20",children:t.fields.map(x=>{var b;return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-purple-200 mb-1",children:[x.label,x.required&&n.jsx("span",{className:"text-red-400 ml-1",children:"*"})]}),x.type==="select"?n.jsxs("select",{value:s[x.name]||"",onChange:y=>f(x.name,y.target.value),className:"w-full bg-purple-950/60 border border-purple-500/40 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-purple-400/60 focus:ring-2 focus:ring-purple-500/30",disabled:a,children:[n.jsxs("option",{value:"",children:["Select ",x.label]}),(b=x.options)==null?void 0:b.map(y=>n.jsx("option",{value:y.value,children:y.label},y.value))]}):x.type==="textarea"?n.jsx("textarea",{value:s[x.name]||"",onChange:y=>f(x.name,y.target.value),placeholder:x.placeholder,className:"w-full bg-purple-950/60 border border-purple-500/40 rounded-lg px-3 py-2 text-white placeholder-purple-400/50 focus:outline-none focus:border-purple-400/60 focus:ring-2 focus:ring-purple-500/30 resize-none",rows:"3",disabled:a}):n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:x.type||"text",value:s[x.name]||"",onChange:y=>f(x.name,y.target.value),placeholder:x.placeholder,className:"w-full bg-purple-950/60 border border-purple-500/40 rounded-lg px-3 py-2 text-white placeholder-purple-400/50 focus:outline-none focus:border-purple-400/60 focus:ring-2 focus:ring-purple-500/30",disabled:a}),x.name==="destinationAddress"&&!a&&n.jsx("button",{type:"button",onClick:()=>u(!0),className:"absolute right-2 top-1/2 -translate-y-1/2 px-3 py-1 bg-purple-700/40 hover:bg-purple-700/60 text-purple-200 rounded text-xs font-medium transition-all duration-200 border border-purple-500/30",children:"📇 Address Book"})]}),x.hint&&n.jsx("p",{className:"text-xs text-purple-400/60 mt-1",children:x.hint})]},x.name)})}),t.steps&&t.steps.length>0&&n.jsxs("div",{className:"p-4 space-y-2 bg-purple-900/10 border-t border-purple-500/20",children:[n.jsx("div",{className:"text-xs font-medium text-purple-300 mb-2",children:"Execution Steps:"}),t.steps.map((x,b)=>n.jsxs("div",{className:`flex items-center gap-3 p-2 rounded-lg transition-all duration-300 ${a&&b===l?"bg-purple-600/30 border border-purple-500/40 animate-pulse":a&&b<l?"bg-green-600/20 border border-green-500/30":"bg-purple-900/20 border border-purple-500/10"}`,children:[n.jsx("div",{className:"flex-shrink-0",children:a&&b<l?n.jsx("div",{className:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-white text-xs",children:"✓"})}):a&&b===l?n.jsx("div",{className:"w-5 h-5 border-2 border-purple-400 border-t-transparent rounded-full animate-spin"}):n.jsx("div",{className:"w-5 h-5 bg-purple-700/30 rounded-full flex items-center justify-center text-purple-400 text-xs font-bold",children:b+1})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:`text-sm ${a&&b===l?"text-white font-medium":a&&b<l?"text-green-300":"text-purple-300/80"}`,children:x.label}),x.description&&n.jsx("div",{className:"text-xs text-purple-400/60 mt-0.5",children:x.description})]})]},b))]}),n.jsxs("div",{className:"p-4 bg-purple-900/30 border-t border-purple-500/20 flex gap-2",children:[n.jsx("button",{onClick:m,disabled:a||!((v=t.fields)!=null&&v.every(x=>!x.required||s[x.name])),className:"flex-1 px-4 py-2.5 bg-gradient-to-r from-purple-600 to-blue-600 hover:shadow-lg hover:shadow-purple-500/50 text-white rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:shadow-none flex items-center justify-center gap-2",children:a?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Executing..."]}):n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"Execute"}),n.jsx("span",{children:"➤"})]})}),r&&!a&&n.jsx("button",{onClick:r,className:"px-4 py-2.5 bg-purple-800/40 hover:bg-purple-800/60 text-purple-200 rounded-lg font-medium transition-all duration-200 border border-purple-500/30",children:"Cancel"})]}),n.jsx(z7,{isOpen:d,onClose:()=>u(!1),onSelectAddress:p,walletAddress:h})]})}function W7({result:t}){return n.jsxs("div",{className:"mt-4 rounded-xl overflow-hidden border border-purple-500/40 animate-fadeInUp",style:{background:"linear-gradient(135deg, rgba(88, 28, 135, 0.95), rgba(59, 7, 100, 0.95))",backdropFilter:"blur(20px)"},children:[n.jsx("div",{className:`p-4 border-b ${t.status==="success"?"bg-green-900/30 border-green-500/30":t.status==="error"?"bg-red-900/30 border-red-500/30":"bg-purple-900/30 border-purple-500/30"}`,children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"text-3xl",children:t.status==="success"?"✅":t.status==="error"?"❌":"ℹ️"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-bold text-white",children:t.title}),n.jsx("p",{className:`text-sm ${t.status==="success"?"text-green-300":t.status==="error"?"text-red-300":"text-purple-300"}`,children:t.message})]})]})}),t.data&&n.jsx("div",{className:"p-4 space-y-3 bg-purple-900/20",children:Object.entries(t.data).map(([e,r])=>n.jsxs("div",{className:"flex justify-between items-center p-2 bg-purple-950/40 rounded-lg border border-purple-500/20",children:[n.jsxs("span",{className:"text-sm text-purple-300 capitalize",children:[e.replace(/_/g," "),":"]}),n.jsx("span",{className:"text-sm text-white font-medium",children:r})]},e))}),t.transactionHash&&n.jsxs("div",{className:"p-4 bg-purple-900/30 border-t border-purple-500/20",children:[n.jsx("div",{className:"text-xs text-purple-300 mb-2",children:"Transaction Hash:"}),n.jsxs("div",{className:"flex items-center gap-2 p-2 bg-purple-950/60 rounded-lg border border-purple-500/30",children:[n.jsx("code",{className:"flex-1 text-xs text-purple-200 break-all",children:t.transactionHash}),n.jsx("button",{onClick:()=>{navigator.clipboard.writeText(t.transactionHash)},className:"px-2 py-1 bg-purple-700/40 hover:bg-purple-700/60 text-purple-200 rounded text-xs transition-colors",children:"Copy"}),n.jsx("button",{onClick:()=>{window.open(`https://xrpscan.com/tx/${t.transactionHash}`,"_blank")},className:"px-2 py-1 bg-purple-700/40 hover:bg-purple-700/60 text-purple-200 rounded text-xs transition-colors",children:"View"})]})]}),t.actions&&t.actions.length>0&&n.jsx("div",{className:"p-4 bg-purple-900/30 border-t border-purple-500/20 flex gap-2",children:t.actions.map((e,r)=>n.jsxs("button",{onClick:e.onClick,className:`px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200 ${e.style==="primary"?"bg-gradient-to-r from-purple-600 to-blue-600 hover:shadow-lg hover:shadow-purple-500/50 text-white":"bg-purple-800/40 hover:bg-purple-800/60 text-purple-200 border border-purple-500/30"}`,children:[e.icon&&n.jsx("span",{className:"mr-1",children:e.icon}),e.label]},r))})]})}const yh="wss://s.altnet.rippletest.net:51233";async function q7(t){const{destinationAddress:e,amount:r,memo:s}=t,i=JSON.parse(localStorage.getItem("connectedWallet"));if(!i||!i.seed)throw new Error("No wallet connected or seed not available");const a=new Ve.Client(yh);await a.connect();try{const o=Ve.Wallet.fromSeed(i.seed),l={TransactionType:"Payment",Account:o.address,Destination:e,Amount:Ve.xrpToDrops(r)};s&&(l.Memos=[{Memo:{MemoData:Buffer.from(s,"utf8").toString("hex").toUpperCase()}}]);const c=await a.autofill(l),d=o.sign(c),u=await a.submitAndWait(d.tx_blob);return await le.from("activity_logs").insert({wallet_address:o.address,action_type:"send_xrp",details:{destination:e,amount:r,memo:s,txHash:u.result.hash}}),{status:"success",title:"XRP Sent Successfully",message:`Successfully sent ${r} XRP to ${e.slice(0,12)}...`,transactionHash:u.result.hash,data:{amount:`${r} XRP`,destination:`${e.slice(0,12)}...`,fee:`${parseFloat(u.result.Fee)/1e6} XRP`,ledger:u.result.ledger_index,timestamp:new Date().toLocaleString()},actions:[{label:"Send More XRP",icon:"📤",style:"secondary",onClick:()=>window.dispatchEvent(new CustomEvent("sendAIMessage",{detail:"send XRP"}))},{label:"Check Balance",icon:"💰",style:"secondary",onClick:()=>window.dispatchEvent(new CustomEvent("sendAIMessage",{detail:"check my balance"}))}]}}catch(o){throw new Error(o.message||"Failed to send XRP")}finally{await a.disconnect()}}async function K7(t){let{destinationAddress:e,currencyCode:r,issuerAddress:s,amount:i,memo:a,tokenId:o}=t;if(o)try{const d=JSON.parse(o);r=d.code,s=d.issuer}catch(d){console.error("Failed to parse tokenId:",d)}const l=JSON.parse(localStorage.getItem("connectedWallet"));if(!l||!l.seed)throw new Error("No wallet connected or seed not available");const c=new Ve.Client(yh);await c.connect();try{const d=Ve.Wallet.fromSeed(l.seed),u={TransactionType:"Payment",Account:d.address,Destination:e,Amount:{currency:r,value:i,issuer:s}};a&&(u.Memos=[{Memo:{MemoData:Buffer.from(a,"utf8").toString("hex").toUpperCase()}}]);const h=await c.autofill(u),p=d.sign(h),f=await c.submitAndWait(p.tx_blob);return await le.from("activity_logs").insert({wallet_address:d.address,action_type:"send_token",details:{destination:e,currency:r,amount:i,issuer:s,txHash:f.result.hash}}),{status:"success",title:"Token Sent Successfully",message:`Successfully sent ${i} ${r} to ${e.slice(0,12)}...`,transactionHash:f.result.hash,data:{token:r,amount:`${i} ${r}`,destination:`${e.slice(0,12)}...`,fee:`${parseFloat(f.result.Fee)/1e6} XRP`,ledger:f.result.ledger_index},actions:[{label:"Send More",icon:"📤",style:"secondary",onClick:()=>window.dispatchEvent(new CustomEvent("sendAIMessage",{detail:"send tokens"}))}]}}catch(d){throw new Error(d.message||"Failed to send token")}finally{await c.disconnect()}}async function G7(t){const{currencyCode:e,issuerAddress:r,limit:s}=t,i=JSON.parse(localStorage.getItem("connectedWallet"));if(!i||!i.seed)throw new Error("No wallet connected or seed not available");const a=new Ve.Client(yh);await a.connect();try{const o=Ve.Wallet.fromSeed(i.seed),l={TransactionType:"TrustSet",Account:o.address,LimitAmount:{currency:e,issuer:r,value:s||"1000000000"}},c=await a.autofill(l),d=o.sign(c),u=await a.submitAndWait(d.tx_blob);return await le.from("activity_logs").insert({wallet_address:o.address,action_type:"setup_trustline",details:{currency:e,issuer:r,limit:s,txHash:u.result.hash}}),{status:"success",title:"Trustline Created Successfully",message:`Trustline for ${e} has been set up`,transactionHash:u.result.hash,data:{currency:e,issuer:r.slice(0,12)+"...",limit:s||"Unlimited"}}}catch(o){throw new Error(o.message||"Failed to setup trustline")}finally{await a.disconnect()}}async function Y7(t){const{tokenId:e,amountXRP:r,slippage:s}=t,i=JSON.parse(localStorage.getItem("connectedWallet"));if(!i||!i.seed)throw new Error("No wallet connected");const{data:a,error:o}=await le.from("tokens").select("*").eq("id",e).single();if(o||!a)throw new Error("Token not found");const l=new Ve.Client(yh);await l.connect();try{const c=Ve.Wallet.fromSeed(i.seed),d={TransactionType:"OfferCreate",Account:c.address,TakerPays:{currency:a.currency_code,value:"1000",issuer:a.issuer_address},TakerGets:Ve.xrpToDrops(r)},u=await l.autofill(d),h=c.sign(u),p=await l.submitAndWait(h.tx_blob);return await le.from("activity_logs").insert({wallet_address:c.address,action_type:"buy_token",details:{token:a.name,amountXRP:r,txHash:p.result.hash}}),{status:"success",title:"Buy Order Placed",message:`Successfully placed buy order for ${a.name}`,transactionHash:p.result.hash,data:{token:a.name,spent:`${r} XRP`,slippage:`${s}%`},actions:[{label:"View Token",icon:"👁️",style:"secondary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"trade"}))}]}}catch(c){throw new Error(c.message||"Failed to buy token")}finally{await l.disconnect()}}async function J7(t){const{tokenId:e,amountToken:r,minXRP:s}=t,i=JSON.parse(localStorage.getItem("connectedWallet"));if(!i||!i.seed)throw new Error("No wallet connected");const{data:a,error:o}=await le.from("tokens").select("*").eq("id",e).single();if(o||!a)throw new Error("Token not found");const l=new Ve.Client(yh);await l.connect();try{const c=Ve.Wallet.fromSeed(i.seed),d={TransactionType:"OfferCreate",Account:c.address,TakerPays:Ve.xrpToDrops(s),TakerGets:{currency:a.currency_code,value:r,issuer:a.issuer_address}},u=await l.autofill(d),h=c.sign(u),p=await l.submitAndWait(h.tx_blob);return await le.from("activity_logs").insert({wallet_address:c.address,action_type:"sell_token",details:{token:a.name,amount:r,minXRP:s,txHash:p.result.hash}}),{status:"success",title:"Sell Order Placed",message:`Successfully placed sell order for ${r} ${a.name}`,transactionHash:p.result.hash,data:{token:a.name,amount:`${r} ${a.currency_code}`,minReceive:`${s} XRP`},actions:[{label:"View Orders",icon:"📊",style:"secondary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"trade"}))}]}}catch(c){throw new Error(c.message||"Failed to sell token")}finally{await l.disconnect()}}async function Q7(t){const{name:e,strategy:r,tokenId:s,buyAmount:i,sellThreshold:a,buyThreshold:o}=t,l=JSON.parse(localStorage.getItem("connectedWallet"));if(!l)throw new Error("No wallet connected");try{const{data:c,error:d}=await le.from("trading_bots").insert({wallet_address:l.address,name:e,strategy:r,token_id:s,buy_amount:parseFloat(i),sell_threshold:parseFloat(a),buy_threshold:parseFloat(o),status:"active",last_check:new Date().toISOString()}).select().single();if(d)throw d;return{status:"success",title:"Trading Bot Created",message:`Bot "${e}" has been created and activated`,data:{name:e,strategy:r,status:"Active",buyAmount:`${i} XRP`},actions:[{label:"Manage Bots",icon:"⚙️",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"bottrader"}))}]}}catch(c){throw new Error(c.message||"Failed to create bot")}}function a4({message:t,onAddResult:e}){const r=t.role==="user",[s,i]=T.useState(null),[a,o]=T.useState(null),l=(v,x)=>{navigator.clipboard.writeText(v),i(x),setTimeout(()=>i(null),2e3)},c=()=>{var v;return(v=t.data)!=null&&v.actions?n.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:t.data.actions.map((x,b)=>n.jsxs("button",{onClick:()=>x.onClick(),className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${x.style==="primary"?"bg-gradient-to-r from-purple-600 to-blue-600 text-white hover:shadow-lg hover:shadow-purple-500/50":x.style==="danger"?"bg-red-600/20 text-red-300 border border-red-500/30 hover:bg-red-600/30":"bg-purple-600/20 text-purple-300 border border-purple-500/30 hover:bg-purple-600/30"}`,children:[x.icon&&n.jsx("span",{className:"mr-2",children:x.icon}),x.label]},b))}):null},d=()=>{var x;if(!((x=t.data)!=null&&x.card))return null;const{card:v}=t.data;return n.jsxs("div",{className:"mt-4 glass rounded-lg p-4 border border-purple-500/20",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[v.icon&&n.jsx("span",{className:"text-2xl",children:v.icon}),n.jsx("h3",{className:"text-lg font-bold text-white",children:v.title})]}),v.badge&&n.jsx("span",{className:"px-2 py-1 bg-purple-600/30 text-purple-200 rounded text-xs font-medium",children:v.badge})]}),v.items&&n.jsx("div",{className:"space-y-2",children:v.items.map((b,y)=>n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-purple-300/80 text-sm",children:b.label}),n.jsx("span",{className:"text-white font-medium",children:b.value})]},y))}),v.description&&n.jsx("p",{className:"text-purple-300/70 text-sm mt-3",children:v.description}),v.link&&n.jsx("div",{className:"mt-3",children:n.jsx(Pi,{type:v.link.type,value:v.link.value,network:"mainnet"})})]})},u=()=>{var x;if(!((x=t.data)!=null&&x.table))return null;const{table:v}=t.data;return n.jsx("div",{className:"mt-4 glass rounded-lg overflow-hidden border border-purple-500/20",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsx("tr",{className:"bg-purple-900/30 border-b border-purple-500/20",children:v.headers.map((b,y)=>n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-purple-300 uppercase tracking-wider",children:b},y))})}),n.jsx("tbody",{children:v.rows.map((b,y)=>n.jsx("tr",{className:"border-b border-purple-500/10 hover:bg-purple-900/20 transition-colors",children:b.map((g,w)=>n.jsx("td",{className:"px-4 py-3 text-sm text-white",children:g},w))},y))})]})})})},h=()=>{var v;return(v=t.data)!=null&&v.quickActions?n.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:t.data.quickActions.map((x,b)=>n.jsx("button",{onClick:()=>x.onClick(),className:"px-3 py-1.5 bg-purple-900/30 hover:bg-purple-900/50 text-purple-200 rounded-full text-xs font-medium transition-all duration-200 border border-purple-500/20",children:x.label},b))}):null},p=async v=>{const x=t.data.execution;try{let b;switch(x.type){case"send_xrp":b=await q7(v);break;case"send_token":b=await K7(v);break;case"setup_trustline":b=await G7(v);break;case"buy_token":b=await Y7(v);break;case"sell_token":b=await J7(v);break;case"create_bot":b=await Q7(v);break;default:throw new Error("Unknown execution type")}o(b),ie.success(b.message),e&&e(b)}catch(b){const y={status:"error",title:"Execution Failed",message:b.message||"An error occurred during execution",data:null};o(y),ie.error(b.message)}},f=()=>{var v;return(v=t.data)!=null&&v.execution?n.jsxs(n.Fragment,{children:[n.jsx(X7,{execution:t.data.execution,onExecute:p}),a&&n.jsx(W7,{result:a})]}):null},m=v=>v.split(`
`).map((x,b)=>x.startsWith("•")?n.jsx("li",{className:"ml-4",children:x.substring(1).trim()},b):x?n.jsx("p",{children:x},b):n.jsx("br",{},b));return n.jsxs("div",{className:`flex items-start gap-3 ${r?"flex-row-reverse":""}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${r?"bg-gradient-to-br from-green-500 to-emerald-600":"bg-gradient-to-br from-purple-500 to-blue-600"}`,children:n.jsx("span",{className:"text-sm",children:r?"👤":"🤖"})}),n.jsx("div",{className:`flex-1 max-w-3xl ${r?"flex justify-end":""}`,children:n.jsxs("div",{className:`rounded-lg p-4 ${r?"bg-gradient-to-br from-green-600/20 to-emerald-600/20 border border-green-500/20":"bg-purple-900/30 border border-purple-500/20"}`,children:[n.jsx("div",{className:`text-sm ${r?"text-white":"text-purple-100"} space-y-2`,children:m(t.content)}),!r&&n.jsxs(n.Fragment,{children:[d(),u(),f(),c(),h()]}),n.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-purple-500/10",children:[n.jsx("span",{className:"text-xs text-purple-400/60",children:t.timestamp.toLocaleTimeString()}),n.jsx("button",{onClick:()=>l(t.content,t.id),className:"text-xs text-purple-400/60 hover:text-purple-300 transition-colors",children:s===t.id?"✓ Copied":"📋 Copy"})]})]})})]})}const Z7="rphatRpwXcPAo7CVm46dC78JAQ6kLMqb2M",eq="rphatRpwXcPAo7CVm46dC78JAQ6kLMqb2M",qp=.01,lu=async(t,e)=>{if(e.address===eq)return console.log("Developer wallet - fee waived"),{success:!0,hash:null,fee:0,waived:!0};try{const r={TransactionType:"Payment",Account:e.address,Destination:Z7,Amount:(qp*1e6).toString()},s=await t.autofill(r),i=e.sign(s),a=await t.submitAndWait(i.tx_blob);return{success:a.result.meta.TransactionResult==="tesSUCCESS",hash:a.result.hash,fee:qp,waived:!1}}catch(r){return console.error("Error sending trading fee:",r),{success:!1,error:r.message,fee:qp,waived:!1}}};class tq{constructor(){this.wallet=null,this.client=null}setWallet(e){this.wallet=e}async connect(){return(!this.client||!this.client.isConnected())&&(this.client=new Ve.Client("wss://xrplcluster.com"),await this.client.connect()),this.client}async disconnect(){this.client&&this.client.isConnected()&&await this.client.disconnect()}parseCommand(e){const r=e.toLowerCase().trim(),s=r.match(/send\s+([rR][a-zA-Z0-9]{24,34})\s+(\d+(?:\.\d+)?)\s+xrp/);if(s)return{type:"SEND_XRP",destination:s[1],amount:parseFloat(s[2])};const i=r.match(/send\s+(\d+(?:\.\d+)?)\s+([a-z]+)\s+(?:to\s+)?([rR][a-zA-Z0-9]{24,34})/);if(i)return{type:"SEND_TOKEN",amount:parseFloat(i[1]),token:i[2].toUpperCase(),destination:i[3]};const a=r.match(/buy\s+(\d+(?:\.\d+)?)\s+([a-z]+)/);if(a)return{type:"BUY_TOKEN",amount:parseFloat(a[1]),token:a[2].toUpperCase()};const o=r.match(/sell\s+(\d+(?:\.\d+)?)\s+([a-z]+)/);if(o)return{type:"SELL_TOKEN",amount:parseFloat(o[1]),token:o[2].toUpperCase()};if(r.match(/(?:check|show|what(?:'s| is)?|get)\s+(?:my\s+)?balance/))return{type:"CHECK_BALANCE"};const c=r.match(/(?:info|information|details|about)\s+(?:about\s+)?([a-z]+)/);if(c)return{type:"TOKEN_INFO",token:c[1].toUpperCase()};const d=r.match(/(?:price|cost)\s+(?:of\s+)?([a-z]+)/);if(d)return{type:"TOKEN_PRICE",token:d[1].toUpperCase()};const u=r.match(/(?:setup|create|add)\s+trustline\s+(?:for\s+)?([a-z]+)/);return u?{type:"SETUP_TRUSTLINE",token:u[1].toUpperCase()}:{type:"UNKNOWN",input:e}}async executeCommand(e){if(!this.wallet)return{success:!1,message:"Please connect your wallet first to execute commands.",requiresWallet:!0};try{switch(await this.connect(),e.type){case"SEND_XRP":return await this.executeSendXRP(e);case"SEND_TOKEN":return await this.executeSendToken(e);case"BUY_TOKEN":return await this.executeBuyToken(e);case"SELL_TOKEN":return await this.executeSellToken(e);case"CHECK_BALANCE":return await this.executeCheckBalance();case"TOKEN_INFO":return await this.executeTokenInfo(e);case"TOKEN_PRICE":return await this.executeTokenPrice(e);case"SETUP_TRUSTLINE":return await this.executeSetupTrustline(e);default:return{success:!1,message:`I couldn't understand that command. Try:
• "SEND Rxxx... 15 XRP"
• "BUY 1000 ORANGE"
• "SELL 500 BANANA"
• "CHECK BALANCE"
• "PRICE OF BANANA"`}}}catch(r){return console.error("Command execution error:",r),{success:!1,message:`Error: ${r.message}`,error:r.message}}}async executeSendXRP({destination:e,amount:r}){try{const s={TransactionType:"Payment",Account:this.wallet.address,Destination:e,Amount:Ve.xrpToDrops(r.toString())},i=await this.client.autofill(s),o=Ve.Wallet.fromSeed(this.wallet.seed).sign(i),l=await this.client.submitAndWait(o.tx_blob);return l.result.meta.TransactionResult==="tesSUCCESS"?(await $r({userAddress:this.wallet.address,actionType:Ur.XRP_SENT,description:`Sent ${r} XRP to ${e}`,txHash:l.result.hash}),{success:!0,message:`Successfully sent ${r} XRP to ${e}!`,txHash:l.result.hash,data:{amount:r,destination:e,fee:(parseFloat(l.result.Fee)/1e6).toFixed(6)}}):{success:!1,message:`Transaction failed: ${l.result.meta.TransactionResult}`}}catch(s){return{success:!1,message:`Failed to send XRP: ${s.message}`}}}async executeSendToken({amount:e,token:r,destination:s}){try{const{data:i}=await le.from("meme_tokens").select("*").ilike("currency_code",r).single();if(!i)return{success:!1,message:`Token "${r}" not found. Please check the token name.`};const a=Et.Buffer.from(i.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"),o={TransactionType:"Payment",Account:this.wallet.address,Destination:s,Amount:{currency:a,issuer:i.issuer_address,value:e.toString()}},l=await this.client.autofill(o),d=Ve.Wallet.fromSeed(this.wallet.seed).sign(l),u=await this.client.submitAndWait(d.tx_blob);return u.result.meta.TransactionResult==="tesSUCCESS"?(await $r({userAddress:this.wallet.address,actionType:Ur.TOKEN_SENT,description:`Sent ${e} ${r} to ${s}`,txHash:u.result.hash,tokenId:i.id}),{success:!0,message:`Successfully sent ${e} ${r} to ${s}!`,txHash:u.result.hash,data:{amount:e,token:r,destination:s}}):{success:!1,message:`Transaction failed: ${u.result.meta.TransactionResult}`}}catch(i){return{success:!1,message:`Failed to send token: ${i.message}`}}}async executeBuyToken({amount:e,token:r}){var s;try{const{data:i}=await le.from("meme_tokens").select("*").ilike("currency_code",r).eq("amm_pool_created",!0).single();if(!i)return{success:!1,message:`Token "${r}" not found or doesn't have an AMM pool yet.`};const a=i.amm_xrp_amount/i.amm_asset_amount,o=e*a,c=o*1.02,d=Et.Buffer.from(i.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"),u={TransactionType:"Payment",Account:this.wallet.address,Destination:this.wallet.address,Amount:{currency:d,issuer:i.issuer_address,value:e.toString()},SendMax:Ve.xrpToDrops(c.toFixed(6)),Flags:131072},h=await this.client.autofill(u),p=Ve.Wallet.fromSeed(this.wallet.seed),f=p.sign(h),m=await Promise.race([this.client.submitAndWait(f.tx_blob),new Promise((v,x)=>setTimeout(()=>x(new Error("Transaction timed out after 20 seconds")),2e4))]);if(m.result.meta.TransactionResult==="tesSUCCESS"){const v=(s=m.result.meta.delivered_amount)!=null&&s.value?parseFloat(m.result.meta.delivered_amount.value):e;await lu(this.client,p);const{data:x}=await le.from("trade_history").insert({token_id:i.id,trader_address:this.wallet.address,trade_type:"buy",token_amount:v,xrp_amount:o,price:a,tx_hash:m.result.hash,slippage:2}).select().single();return await $r({userAddress:this.wallet.address,actionType:Ur.SWAP_EXECUTED,description:`Bought ${v.toFixed(4)} ${r}`,txHash:m.result.hash,tokenId:i.id}),{success:!0,message:`Successfully bought ${v.toFixed(4)} ${r} for approximately ${o.toFixed(4)} XRP!`,txHash:m.result.hash,data:{token:r,amount:v,xrpSpent:o,price:a}}}else return{success:!1,message:`Buy transaction failed: ${m.result.meta.TransactionResult}`}}catch(i){return console.error("Buy token error:",i),{success:!1,message:`Failed to buy token: ${i.message}. ${i.message.includes("timeout")?"The network may be slow, try again with fewer tokens.":"Check your balance and try again."}`}}}async executeSellToken({amount:e,token:r}){try{const{data:s}=await le.from("meme_tokens").select("*").ilike("currency_code",r).eq("amm_pool_created",!0).single();if(!s)return{success:!1,message:`Token "${r}" not found or doesn't have an AMM pool yet.`};const i=s.amm_xrp_amount/s.amm_asset_amount,a=e*i,l=a*.98,c=Et.Buffer.from(s.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"),d={TransactionType:"Payment",Account:this.wallet.address,Destination:this.wallet.address,Amount:Ve.xrpToDrops(a.toFixed(6)),SendMax:{currency:c,issuer:s.issuer_address,value:(e*1.02).toString()},DeliverMin:Ve.xrpToDrops(l.toFixed(6)),Flags:131072},u=await this.client.autofill(d),h=Ve.Wallet.fromSeed(this.wallet.seed),p=h.sign(u),f=await Promise.race([this.client.submitAndWait(p.tx_blob),new Promise((m,v)=>setTimeout(()=>v(new Error("Transaction timed out after 20 seconds")),2e4))]);return f.result.meta.TransactionResult==="tesSUCCESS"?(await lu(this.client,h),await le.from("trade_history").insert({token_id:s.id,trader_address:this.wallet.address,trade_type:"sell",token_amount:e,xrp_amount:a,price:i,tx_hash:f.result.hash,slippage:2}),await $r({userAddress:this.wallet.address,actionType:Ur.SWAP_EXECUTED,description:`Sold ${e.toFixed(4)} ${r}`,txHash:f.result.hash,tokenId:s.id}),{success:!0,message:`Successfully sold ${e.toFixed(4)} ${r} for approximately ${a.toFixed(4)} XRP!`,txHash:f.result.hash,data:{token:r,amount:e,xrpReceived:a,price:i}}):{success:!1,message:`Sell transaction failed: ${f.result.meta.TransactionResult}`}}catch(s){return console.error("Sell token error:",s),{success:!1,message:`Failed to sell token: ${s.message}. ${s.message.includes("timeout")?"The network may be slow, try again with fewer tokens.":"Check your token balance and try again."}`}}}async executeCheckBalance(){try{const e=await this.client.request({command:"account_info",account:this.wallet.address,ledger_index:"validated"}),r=parseFloat(Ve.dropsToXrp(e.result.account_data.Balance)),s=10+e.result.account_data.OwnerCount*2,a=(await this.client.request({command:"account_lines",account:this.wallet.address,ledger_index:"validated"})).result.lines.map(o=>({currency:o.currency.length>3?Et.Buffer.from(o.currency,"hex").toString("utf8").replace(/\0/g,""):o.currency,balance:parseFloat(o.balance),issuer:o.account})).filter(o=>o.balance>0);return{success:!0,message:`Your XRP balance is ${r.toFixed(6)} XRP (${(r-s).toFixed(6)} available)`,data:{xrpBalance:r,xrpAvailable:r-s,reserve:s,tokenBalances:a}}}catch(e){return{success:!1,message:`Failed to check balance: ${e.message}`}}}async executeTokenInfo({token:e}){try{const{data:r}=await le.from("meme_tokens").select("*").ilike("currency_code",e).single();if(!r)return{success:!1,message:`Token "${e}" not found.`};const s=r.amm_pool_created?r.amm_xrp_amount/r.amm_asset_amount:0,i=r.supply*s;return{success:!0,message:`${r.token_name} (${r.currency_code})

Price: ${s.toFixed(8)} XRP
Supply: ${r.supply.toLocaleString()}
Market Cap: ${i.toFixed(2)} XRP
Liquidity: ${(r.amm_xrp_amount||0).toFixed(2)} XRP
Pool: ${r.amm_pool_created?"Active":"Not created"}`,data:{...r,price:s,marketCap:i}}}catch(r){return{success:!1,message:`Failed to get token info: ${r.message}`}}}async executeTokenPrice({token:e}){try{const{data:r}=await le.from("meme_tokens").select("*").ilike("currency_code",e).eq("amm_pool_created",!0).single();if(!r)return{success:!1,message:`Token "${e}" not found or doesn't have an active pool.`};const s=r.amm_xrp_amount/r.amm_asset_amount,{data:i}=await le.from("trade_history").select("created_at, price").eq("token_id",r.id).order("created_at",{ascending:!1}).limit(10);let a=0;if(r.initial_xrp_amount&&r.initial_asset_amount){const o=r.initial_xrp_amount/r.initial_asset_amount;a=(s-o)/o*100}return{success:!0,message:`${e} is currently trading at ${s.toFixed(8)} XRP${a!==0?` (${a>=0?"+":""}${a.toFixed(2)}% 24h)`:""}`,data:{token:e,price:s,change24h:a,recentTrades:(i==null?void 0:i.length)||0}}}catch(r){return{success:!1,message:`Failed to get price: ${r.message}`}}}async executeSetupTrustline({token:e}){try{const{data:r}=await le.from("meme_tokens").select("*").ilike("currency_code",e).single();if(!r)return{success:!1,message:`Token "${e}" not found.`};const s=Et.Buffer.from(r.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"),i={TransactionType:"TrustSet",Account:this.wallet.address,LimitAmount:{currency:s,issuer:r.issuer_address,value:"10000000000"}},a=await this.client.autofill(i),l=Ve.Wallet.fromSeed(this.wallet.seed).sign(a),c=await this.client.submitAndWait(l.tx_blob);return c.result.meta.TransactionResult==="tesSUCCESS"?(await $r({userAddress:this.wallet.address,actionType:Ur.TRUSTLINE_ADDED,description:`Setup trustline for ${e}`,txHash:c.result.hash,tokenId:r.id}),{success:!0,message:`Successfully setup trustline for ${e}! You can now receive and trade this token.`,txHash:c.result.hash}):{success:!1,message:`Trustline setup failed: ${c.result.meta.TransactionResult}`}}catch(r){return{success:!1,message:`Failed to setup trustline: ${r.message}`}}}}const qx=new tq;class Yl{static async getTokenWithCache(e){var r;try{const{data:s,error:i}=await le.from("meme_tokens").select("*, pool_data_cache(*)").ilike("currency_code",e).single();if(i||!s)return null;const a=(r=s.pool_data_cache)==null?void 0:r[0],o=a&&Date.now()-new Date(a.last_updated).getTime()<this.CACHE_EXPIRY,l=o&&a.price>0?a.price:s.amm_xrp_amount&&s.amm_asset_amount?parseFloat(s.amm_xrp_amount)/parseFloat(s.amm_asset_amount):0,c=l*parseFloat(s.supply||0),d=o?a.xrp_amount:s.amm_xrp_amount||0,u=o&&a.volume_24h||0,h=o&&a.price_change_24h||0;return{...s,currentPrice:l,marketCap:c,liquidity:d,volume24h:u,priceChange24h:h,cacheStatus:o?"valid":"stale"}}catch(s){return console.error("Error fetching cached token data:",s),null}}static async getAllTokensWithCache(e=20){try{const{data:r,error:s}=await le.from("meme_tokens").select("*, pool_data_cache(*)").eq("amm_pool_created",!0).order("created_at",{ascending:!1}).limit(e);if(s)throw s;return r.map(i=>{var d;const a=(d=i.pool_data_cache)==null?void 0:d[0],o=a&&Date.now()-new Date(a.last_updated).getTime()<this.CACHE_EXPIRY,l=o&&a.price>0?a.price:i.amm_xrp_amount&&i.amm_asset_amount?parseFloat(i.amm_xrp_amount)/parseFloat(i.amm_asset_amount):0,c=l*parseFloat(i.supply||0);return{...i,currentPrice:l,marketCap:c,liquidity:o?a.xrp_amount:i.amm_xrp_amount||0,volume24h:o&&a.volume_24h||0,priceChange24h:o&&a.price_change_24h||0,cacheStatus:o?"valid":"stale"}})}catch(r){return console.error("Error fetching cached tokens:",r),[]}}static async getMarketCapRankings(e=10){try{return(await this.getAllTokensWithCache(50)).filter(s=>s.marketCap>0).sort((s,i)=>i.marketCap-s.marketCap).slice(0,e)}catch(r){return console.error("Error fetching market cap rankings:",r),[]}}static async getVolumeLeaders(e=10){try{return(await this.getAllTokensWithCache(50)).filter(s=>s.volume24h>0).sort((s,i)=>i.volume24h-s.volume24h).slice(0,e)}catch(r){return console.error("Error fetching volume leaders:",r),[]}}static async getTopGainers(e=10){try{return(await this.getAllTokensWithCache(50)).filter(s=>s.priceChange24h>0).sort((s,i)=>i.priceChange24h-s.priceChange24h).slice(0,e)}catch(r){return console.error("Error fetching top gainers:",r),[]}}static async getTopLosers(e=10){try{return(await this.getAllTokensWithCache(50)).filter(s=>s.priceChange24h<0).sort((s,i)=>s.priceChange24h-i.priceChange24h).slice(0,e)}catch(r){return console.error("Error fetching top losers:",r),[]}}static async getTokenHolders(e,r=10){try{const{data:s}=await le.from("meme_tokens").select("id, token_name, supply").ilike("currency_code",e).single();if(!s)return null;const{data:i,error:a}=await le.from("token_holdings_cache").select("*").eq("token_id",s.id).order("balance",{ascending:!1}).limit(r);if(a)return console.error("Holder query error:",a),null;const o=(i==null?void 0:i.length)>0&&i[0].last_updated&&Date.now()-new Date(i[0].last_updated).getTime()<this.CACHE_EXPIRY*10;return{token:s,holders:i||[],totalHolders:(i==null?void 0:i.length)||0,totalBalance:(i==null?void 0:i.reduce((l,c)=>l+parseFloat(c.balance||0),0))||0,cacheStatus:o?"valid":"stale"}}catch(s){return console.error("Error fetching holders from cache:",s),null}}static async getWalletHoldings(e){try{const{data:r,error:s}=await le.from("token_holdings_cache").select("*, meme_tokens(*)").eq("wallet_address",e).gt("balance",0).order("value",{ascending:!1});if(s)throw s;const i=(r==null?void 0:r.length)>0&&r[0].last_updated&&Date.now()-new Date(r[0].last_updated).getTime()<this.CACHE_EXPIRY,a=(r==null?void 0:r.reduce((o,l)=>o+parseFloat(l.value||0),0))||0;return{holdings:r||[],totalValue:a,totalAssets:(r==null?void 0:r.length)||0,cacheStatus:i?"valid":"stale"}}catch(r){return console.error("Error fetching wallet holdings from cache:",r),{holdings:[],totalValue:0,totalAssets:0,cacheStatus:"error"}}}static async getPoolData(e){try{const{data:r,error:s}=await le.from("pool_data_cache").select("*").eq("token_id",e).single();if(s)return null;const i=r&&Date.now()-new Date(r.last_updated).getTime()<this.CACHE_EXPIRY;return{...r,cacheStatus:i?"valid":"stale"}}catch(r){return console.error("Error fetching pool cache:",r),null}}static async getXRPPrice(){try{const{data:e,error:r}=await le.from("xrp_price_cache").select("*").order("updated_at",{ascending:!1}).limit(1).single();if(r||!e)return null;const s=Date.now()-new Date(e.updated_at).getTime()<6e4;return{priceUsd:parseFloat(e.price_usd||0),updatedAt:e.updated_at,cacheStatus:s?"valid":"stale"}}catch(e){return console.error("Error fetching XRP price cache:",e),null}}static formatTokenData(e){const r=Math.floor((Date.now()-new Date(e.created_at).getTime())/864e5);return{name:e.token_name||"Unknown",symbol:e.currency_code||"N/A",supply:e.supply?parseFloat(e.supply).toLocaleString():"N/A",price:e.currentPrice>0?`${e.currentPrice.toFixed(8)} XRP`:"N/A",marketCap:e.marketCap>0?`${e.marketCap.toFixed(4)} XRP`:"N/A",liquidity:e.liquidity>0?`${parseFloat(e.liquidity).toFixed(4)} XRP`:"N/A",volume24h:e.volume24h>0?`${e.volume24h.toFixed(2)} XRP`:"N/A",priceChange24h:e.priceChange24h?`${e.priceChange24h>0?"+":""}${e.priceChange24h.toFixed(2)}%`:"N/A",daysOld:`${r} days`,category:e.category||"Other",status:e.status||"Unknown",issuer:e.issuer_address?`${e.issuer_address.slice(0,8)}...${e.issuer_address.slice(-6)}`:"N/A",created:new Date(e.created_at).toLocaleString(),description:e.description||null,twitter:e.twitter_handle||null,website:e.website_url||null,cacheStatus:e.cacheStatus||"unknown"}}}n_(Yl,"CACHE_EXPIRY",3e4);class o4{constructor(){this.xrplClient=null,this.context={connectedWallet:null,lastQuery:null,sessionData:{}},this.initializeContext()}initializeContext(){const e=localStorage.getItem("connectedWallet");e&&(this.context.connectedWallet=JSON.parse(e),qx.setWallet(this.context.connectedWallet))}async processMessage(e){const r=e.toLowerCase(),s=qx.parseCommand(e);if(s.type!=="UNKNOWN"){const i=await qx.executeCommand(s);return i.success?{content:i.message,data:i.data?{card:{icon:"✅",title:"Command Executed Successfully",badge:"Success",items:Object.entries(i.data).map(([a,o])=>({label:a.charAt(0).toUpperCase()+a.slice(1),value:String(o)}))},txHash:i.txHash,actions:i.txHash?[{label:"View on XRPScan",icon:"🔍",style:"primary",onClick:()=>window.open(`https://xrpscan.com/tx/${i.txHash}`,"_blank")}]:[]}:null}:i.requiresWallet?{content:i.message,data:{actions:[{label:"Connect Wallet",icon:"🔗",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"setup"}))}]}}:{content:i.message,data:null}}return this.isAddressBookQuery(r)?await this.handleAddressBook():this.isBuyTokenQuery(r)?await this.handleBuyToken():this.isSellTokenQuery(r)?await this.handleSellToken():this.isCreateBotQuery(r)?await this.handleCreateBot():this.isSendXRPQuery(r)?await this.handleSendXRP():this.isSendCustomTokenQuery(r)?await this.handleSendCustomToken():this.isSendTokenQuery(r)?await this.handleSendToken(e):this.isReceiveTokenQuery(r)?this.handleReceiveToken():this.isWalletAssetsQuery(r)?await this.handleWalletAssets():this.isBalanceQuery(r)?await this.handleBalanceQuery():this.isTokenQuery(r)?await this.handleTokenQuery(e):this.isTradeQuery(r)?await this.handleTradeQuery():this.isPriceQuery(r)?await this.handlePriceQuery(e):this.isMarketQuery(r)?await this.handleMarketQuery():this.isWalletQuery(r)?await this.handleWalletInfo():this.isNavigationQuery(r)?this.handleNavigation(r):this.isTokenStatsQuery(r)?await this.handleTokenStats():this.isMarketCapQuery(r)?await this.handleMarketCapQuery():this.isVolumeQuery(r)?await this.handleVolumeQuery():this.isHoldersQuery(r)?await this.handleHoldersQuery(e):this.isBotQuery(r)?await this.handleBotQuery():this.isHelpQuery(r)?this.handleHelp():this.handleGeneral(e)}isBalanceQuery(e){return e.includes("balance")||e.includes("how much")||e.includes("my xrp")}isTokenQuery(e){return(e.includes("token")||e.includes("coin"))&&(e.includes("info")||e.includes("about")||e.includes("details")||e.includes("show")||e.includes("tell me")||e.includes("what is")||e.includes("stats")||e.includes("statistics")||e.includes("market cap")||e.includes("supply")||e.includes("price")||e.includes("liquidity")||e.includes("days")||/\b[A-Z]{3,10}\b/.test(e))}isTradeQuery(e){return e.includes("trade")||e.includes("swap")||e.includes("recent")&&e.includes("history")}isPriceQuery(e){return e.includes("price")||e.includes("cost")||e.includes("worth")}isMarketQuery(e){return e.includes("market")||e.includes("top")||e.includes("trending")||e.includes("overview")}isWalletQuery(e){return e.includes("wallet")&&(e.includes("info")||e.includes("detail")||e.includes("address"))}isNavigationQuery(e){return e.includes("go to")||e.includes("open")||e.includes("show me")||e.includes("navigate")}isHelpQuery(e){return e.includes("help")||e.includes("what can you")||e.includes("how do i")}isSendTokenQuery(e){return e.includes("send")&&(e.includes("token")||e.includes("xrp"))||e.includes("transfer")||e.includes("payment")}isSendXRPQuery(e){return e.includes("send")&&e.includes("xrp")&&!e.includes("custom")&&!e.includes("token")}isSendCustomTokenQuery(e){return e.includes("send")&&(e.includes("custom")||e.includes("specific"))||e.includes("send")&&e.includes("token")&&!e.includes("xrp")}isReceiveTokenQuery(e){return e.includes("receive")||e.includes("get token")||e.includes("my address")}isWalletAssetsQuery(e){return e.includes("wallet")&&e.includes("asset")||e.includes("what tokens")||e.includes("my holdings")}isTokenStatsQuery(e){return e.includes("token")&&(e.includes("stat")||e.includes("analytic")||e.includes("performance"))}isBotQuery(e){return e.includes("bot")&&(e.includes("status")||e.includes("trading")||e.includes("performance"))}isMarketCapQuery(e){return e.includes("market cap")||e.includes("marketcap")||e.includes("mcap")}isVolumeQuery(e){return e.includes("volume")||e.includes("trading volume")}isHoldersQuery(e){return e.includes("holder")||e.includes("who holds")||e.includes("ownership")}isBuyTokenQuery(e){return e.includes("buy")&&e.includes("token")||e.includes("purchase token")}isSellTokenQuery(e){return e.includes("sell")&&e.includes("token")||e.includes("sell my")}isCreateBotQuery(e){return e.includes("create")&&e.includes("bot")||e.includes("new bot")||e.includes("setup bot")}isAddressBookQuery(e){return e.includes("address book")||e.includes("contacts")||e.includes("saved addresses")}async handleBalanceQuery(){if(!this.context.connectedWallet)return{content:"No wallet is currently connected. Please connect a wallet first to check your balance.",data:{actions:[{label:"Go to Wallets",icon:"💼",style:"primary",onClick:()=>{window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"wallets"}))}}]}};try{const e=await Of(this.context.connectedWallet.address);return{content:"Here is your current wallet balance:",data:{card:{icon:"💰",title:"Wallet Balance",badge:"Live",items:[{label:"Address",value:`${this.context.connectedWallet.address.slice(0,10)}...${this.context.connectedWallet.address.slice(-8)}`},{label:"XRP Balance",value:`${e.toFixed(6)} XRP`},{label:"Wallet Name",value:this.context.connectedWallet.name}]},quickActions:[{label:"Send XRP",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"wallets"}))},{label:"View on XRPScan",onClick:()=>window.open(`https://xrpscan.com/account/${this.context.connectedWallet.address}`,"_blank")}]}}}catch{return{content:"I encountered an error fetching your balance. Please make sure your wallet is properly connected.",data:null}}}async handleTokenQuery(e){try{const r=e.match(/(?:about|info|details|for|show)\s+([A-Z]{3,10})/i);if(r){const o=r[1].toUpperCase();return await this.getDetailedTokenInfo(o)}const{data:s,error:i}=await le.from("meme_tokens").select("*").eq("amm_pool_created",!0).order("created_at",{ascending:!1}).limit(10);if(i)throw i;if(!s||s.length===0)return{content:"No tokens found in the database. Create your first token to get started!",data:{actions:[{label:"Create Token",icon:"✨",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"memes"}))}]}};const a=s.reduce((o,l)=>o+(parseFloat(l.supply)||0),0);return{content:`I found ${s.length} active tokens:`,data:{card:{icon:"💎",title:"Token Overview",badge:`${s.length} Tokens`,items:[{label:"Total Tokens",value:`${s.length}`},{label:"Total Supply",value:a.toLocaleString()}]},table:{headers:["Token","Symbol","Supply","Created"],rows:s.slice(0,5).map(o=>[o.token_name||"Unknown",o.currency_code||"N/A",o.supply?parseFloat(o.supply).toLocaleString():"N/A",new Date(o.created_at).toLocaleDateString()])},actions:[{label:"View All Tokens",icon:"📋",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"mytokens"}))},{label:"Trade Tokens",icon:"💱",style:"secondary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"trade"}))}]}}}catch{return{content:"I had trouble fetching token information. Please try again.",data:null}}}async getDetailedTokenInfo(e){try{const r=await Yl.getTokenWithCache(e);if(!r)return{content:`Token "${e}" not found. Make sure the token code is correct.`,data:{actions:[{label:"View All Tokens",icon:"📋",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"mytokens"}))}]}};const s=Yl.formatTokenData(r),i=[{label:"Token Name",value:s.name},{label:"Symbol",value:s.symbol},{label:"Total Supply",value:s.supply},{label:"Current Price",value:s.price},{label:"Market Cap",value:s.marketCap},{label:"Liquidity",value:s.liquidity},{label:"24h Volume",value:s.volume24h},{label:"24h Change",value:s.priceChange24h},{label:"Days Old",value:s.daysOld},{label:"Category",value:s.category},{label:"AMM Pool",value:r.amm_pool_created?"Yes ✅":"No ❌"},{label:"Status",value:s.status},{label:"Issuer",value:s.issuer},{label:"Created",value:s.created}];return s.description&&i.splice(2,0,{label:"Description",value:s.description}),s.twitter&&i.push({label:"Twitter",value:`@${s.twitter}`}),s.website&&i.push({label:"Website",value:s.website}),{content:`Here are the complete details for ${r.token_name||e}:`,data:{card:{icon:"💎",title:`${r.token_name||e} (${r.currency_code})`,badge:r.category||"Token",items:i},actions:[{label:"Trade This Token",icon:"💱",style:"primary",onClick:()=>{window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"trade"})),setTimeout(()=>{window.dispatchEvent(new CustomEvent("selectToken",{detail:r}))},100)}},{label:"View on XRPScan",icon:"🔍",style:"secondary",onClick:()=>window.open(`https://xrpscan.com/account/${r.issuer_address}`,"_blank")}]}}}catch(r){return console.error("Error fetching token details:",r),{content:`I had trouble fetching details for "${e}". Please try again.`,data:null}}}async handleTradeQuery(){try{const{data:e,error:r}=await le.from("bot_trades").select("*").order("created_at",{ascending:!1}).limit(5);if(r)throw r;if(!e||e.length===0)return{content:"No recent trades found. Start trading to see your history here!",data:{actions:[{label:"Start Trading",icon:"💱",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"trade"}))}]}};const s=e.filter(o=>o.status==="success").length,i=e.reduce((o,l)=>o+(l.amount_bought||0),0),a=e.length>0?(s/e.length*100).toFixed(1):0;return{content:"Here is your trading activity from the platform:",data:{card:{icon:"📊",title:"Trading Summary",badge:`${e.length} Trades`,items:[{label:"Total Trades",value:`${e.length}`},{label:"Successful",value:`${s}`},{label:"Success Rate",value:`${a}%`},{label:"Total Volume",value:`${i.toFixed(2)} tokens`}]},table:{headers:["Type","Amount","Status","Date"],rows:e.map(o=>[o.trade_type||"Unknown",`${(o.amount_bought||0).toFixed(2)}`,o.status||"N/A",new Date(o.created_at).toLocaleString()])},actions:[{label:"View All Trades",icon:"📊",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"bottrader"}))},{label:"Start Trading",icon:"💱",style:"secondary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"trade"}))}]}}}catch{return{content:"I had trouble fetching your trade history. Please try again.",data:null}}}async handlePriceQuery(e){try{const{data:r,error:s}=await le.from("tokens").select("*").order("volume_24h",{ascending:!1,nullsFirst:!1}).limit(5);if(s)throw s;return{content:"Here are the top tokens by trading volume:",data:{table:{headers:["Token","Symbol","24h Volume","24h Change"],rows:(r==null?void 0:r.map(i=>[i.name||"Unknown",i.currency_code||"N/A",i.volume_24h?`${i.volume_24h.toFixed(2)}`:"N/A",i.price_change_24h?`${i.price_change_24h>0?"+":""}${i.price_change_24h.toFixed(2)}%`:"N/A"]))||[]},actions:[{label:"View All Prices",icon:"💰",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"trade"}))},{label:"Top 10 Tokens",icon:"👑",style:"secondary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"top10"}))}]}}}catch{return{content:"I can help you check token prices! Visit the Trade page for real-time prices.",data:{actions:[{label:"View Prices",icon:"💰",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"trade"}))}]}}}}async handleMarketQuery(){try{const{data:e,error:r}=await le.from("tokens").select("*").order("price_change_24h",{ascending:!1,nullsFirst:!1}).limit(10);if(r)throw r;const{count:s}=await le.from("tokens").select("*",{count:"exact",head:!0}),{count:i}=await le.from("liquidity_pools").select("*",{count:"exact",head:!0}),{count:a}=await le.from("trading_bots").select("*",{count:"exact",head:!0}).eq("status","active"),o=(e==null?void 0:e.reduce((h,p)=>h+parseFloat(p.total_supply||0),0))||0,l=(e==null?void 0:e.reduce((h,p)=>h+(p.volume_24h||0),0))||0,c=(e==null?void 0:e.length)>0?o/e.length:0,d=e&&e.length>0?e[0]:null,u=(e==null?void 0:e.filter(h=>{const p=new Date(h.created_at);return new Date-p<24*60*60*1e3}).length)||0;return{content:"Here is comprehensive market analytics with data from the Analytics page:",data:{card:{icon:"📊",title:"Market Analytics",badge:"Live Data",items:[{label:"Total Tokens",value:`${s||0}`},{label:"Active Pools",value:`${i||0}`},{label:"Active Bots",value:`${a||0}`},{label:"24h New Tokens",value:`${u}`},{label:"Total Supply",value:`${o.toFixed(0)}`},{label:"24h Volume",value:`${l.toFixed(2)}`},{label:"Avg Market Cap",value:`${c.toFixed(2)}`},{label:"Top Gainer",value:d?`${d.name}`:"N/A"}]},table:{headers:["Token","Symbol","24h Change","24h Volume","Created"],rows:(e==null?void 0:e.slice(0,5).map(h=>[h.name||"Unknown",h.currency_code||"N/A",h.price_change_24h?`${h.price_change_24h>0?"+":""}${h.price_change_24h.toFixed(2)}%`:"N/A",h.volume_24h?h.volume_24h.toFixed(2):"N/A",new Date(h.created_at).toLocaleDateString()]))||[]},actions:[{label:"View Top 10",icon:"👑",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"top10"}))},{label:"Full Analytics",icon:"📈",style:"secondary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"analytics"}))}]}}}catch{return{content:"I had trouble fetching market data. Please try again.",data:null}}}async handleWalletInfo(){return this.context.connectedWallet?{content:"Here is your connected wallet information:",data:{card:{icon:"💼",title:"Wallet Information",badge:"Active",items:[{label:"Name",value:this.context.connectedWallet.name},{label:"Address",value:this.context.connectedWallet.address},{label:"Network",value:"XRPL Mainnet"}],description:"Your wallet is securely connected to the XRPL network."},actions:[{label:"Manage Wallet",icon:"⚙️",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"wallets"}))}]}}:{content:"No wallet is currently connected. Connect a wallet to see detailed information.",data:{actions:[{label:"Connect Wallet",icon:"🔗",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"wallets"}))}]}}}handleNavigation(e){const r={dashboard:["dashboard","home"],trade:["trade","swap","trading"],memes:["meme","create token"],pools:["pool","liquidity"],bottrader:["bot","automated trading"],vault:["vault","collect","fees"],mytokens:["my token","tokens"],analytics:["analytic","stats","chart"],top10:["top 10","top ten","leaderboard"],wallets:["wallet","manage wallet"],about:["about","info"]};for(const[s,i]of Object.entries(r))if(i.some(a=>e.includes(a)))return setTimeout(()=>{window.dispatchEvent(new CustomEvent("navigateToPage",{detail:s}))},500),{content:`Taking you to ${s.charAt(0).toUpperCase()+s.slice(1)}...`,data:null};return{content:"I can help you navigate to different sections. Which page would you like to visit?",data:{quickActions:[{label:"Dashboard",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"dashboard"}))},{label:"Trade",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"trade"}))},{label:"Create Token",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"memes"}))},{label:"Bot Trader",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"bottrader"}))}]}}}handleHelp(){return{content:"I'm your advanced XRPL AI assistant. Here's what I can help you with:",data:{card:{icon:"🤖",title:"Available Commands",items:[{label:"Balance Queries",value:"Check wallet balances and XRP amounts"},{label:"Token Information",value:"Get details about any token"},{label:"Trade History",value:"View your recent trades and swaps"},{label:"Market Data",value:"Get market overview and analytics"},{label:"Navigation",value:"Navigate to any page on the platform"},{label:"Price Checking",value:"Check token prices and values"}]},quickActions:[{label:"Check Balance",onClick:()=>{}},{label:"View Tokens",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"mytokens"}))},{label:"Market Overview",onClick:()=>{}},{label:"Trade History",onClick:()=>{}}]}}}async handleSendXRP(){return this.context.connectedWallet?{content:"Ready to send XRP! Fill in the details below and I'll execute the transaction for you.",data:{execution:{type:"send_xrp",icon:"📤",title:"Send XRP",description:"Direct XRP transfer to any XRPL address",badge:"Ready to Execute",fields:[{name:"destinationAddress",label:"Destination Address",type:"text",placeholder:"rXXXXXXXXXXXXXXXXXXXXXXXXXXXX",required:!0,hint:"Enter recipient XRPL address or use Address Book"},{name:"amount",label:"Amount (XRP)",type:"number",placeholder:"10",required:!0,hint:"Amount of XRP to send"},{name:"memo",label:"Memo (Optional)",type:"text",placeholder:"Payment for services",hint:"Optional memo for this transaction"}],steps:[{label:"Validate destination",description:"Verifying XRPL address format"},{label:"Check balance",description:"Ensuring sufficient XRP balance"},{label:"Prepare payment",description:"Creating XRP payment transaction"},{label:"Sign with wallet",description:"Cryptographically signing transaction"},{label:"Broadcast to network",description:"Submitting to XRPL"},{label:"Wait for confirmation",description:"Transaction being validated"}],defaultValues:{amount:"10"}}}}:{content:"Please connect a wallet first to send XRP.",data:{actions:[{label:"Connect Wallet",icon:"🔗",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"wallets"}))}]}}}async handleSendCustomToken(){if(!this.context.connectedWallet)return{content:"Please connect a wallet first to send custom tokens.",data:{actions:[{label:"Connect Wallet",icon:"🔗",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"wallets"}))}]}};const{data:e}=await le.from("tokens").select("*").order("name",{ascending:!0}).limit(100);return!e||e.length===0?{content:"No custom tokens found in the platform. You can only send tokens that exist in the system.",data:{actions:[{label:"View Available Tokens",icon:"🪙",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"trade"}))}]}}:{content:`I can help you send any of the ${e.length} available tokens. Select the token and provide details:`,data:{execution:{type:"send_token",icon:"🪙",title:"Send Custom Token",description:"Transfer tokens to any XRPL address with trustline",badge:`${e.length} Tokens Available`,fields:[{name:"tokenId",label:"Select Token",type:"select",required:!0,options:e.map(r=>({value:JSON.stringify({code:r.currency_code,issuer:r.issuer_address,name:r.name}),label:`${r.name} (${r.currency_code})`})),hint:"Choose which token to send"},{name:"destinationAddress",label:"Destination Address",type:"text",placeholder:"rXXXXXXXXXXXXXXXXXXXXXXXXXXXX",required:!0,hint:"Recipient must have trustline for this token"},{name:"amount",label:"Amount",type:"number",placeholder:"100",required:!0,hint:"Amount of tokens to send"},{name:"memo",label:"Memo (Optional)",type:"text",placeholder:"Payment note",hint:"Optional transaction memo"}],steps:[{label:"Parse token selection",description:"Extracting token details"},{label:"Validate addresses",description:"Checking destination and issuer"},{label:"Verify trustline",description:"Ensuring recipient can receive"},{label:"Prepare payment",description:"Creating token payment transaction"},{label:"Sign transaction",description:"Signing with your wallet"},{label:"Submit to XRPL",description:"Broadcasting transaction"},{label:"Confirm delivery",description:"Waiting for ledger confirmation"}],defaultValues:{amount:"100"}}}}}async handleSendToken(e){if(!this.context.connectedWallet)return{content:"Please connect a wallet first to send tokens.",data:{actions:[{label:"Connect Wallet",icon:"🔗",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"wallets"}))}]}};const{data:r}=await le.from("tokens").select("id, name, currency_code, issuer_address").limit(50),s=(e==null?void 0:e.toLowerCase())||"";if(s.includes("send")&&(r==null?void 0:r.some(a=>s.includes(a.name.toLowerCase())||s.includes(a.currency_code.toLowerCase())))){const a=r.find(o=>s.includes(o.name.toLowerCase())||s.includes(o.currency_code.toLowerCase()));return{content:`I'll help you send ${a.name} (${a.currency_code}). Please provide the details:`,data:{execution:{type:"send_token",icon:"📤",title:`Send ${a.name}`,description:`Send ${a.currency_code} tokens to any XRPL address`,badge:"Token Transfer",fields:[{name:"destinationAddress",label:"Destination Address",type:"text",placeholder:"rXXXXXXXXXXXXXXXXXXXXXXXXXXXX",required:!0,hint:"Enter recipient address or use Address Book"},{name:"amount",label:`Amount (${a.currency_code})`,type:"number",placeholder:"100",required:!0,hint:`Amount of ${a.currency_code} to send`},{name:"currencyCode",label:"Currency Code",type:"text",placeholder:a.currency_code,required:!0,hint:"Token currency code"},{name:"issuerAddress",label:"Issuer Address",type:"text",placeholder:a.issuer_address,required:!0,hint:"Token issuer address"},{name:"memo",label:"Memo (Optional)",type:"text",placeholder:"Payment for services",hint:"Optional memo to include"}],steps:[{label:"Validate addresses",description:"Checking destination and issuer addresses"},{label:"Check trustline",description:"Verifying recipient has trustline"},{label:"Prepare transaction",description:"Creating token payment"},{label:"Sign transaction",description:"Signing with your wallet"},{label:"Submit to XRPL",description:"Broadcasting to network"},{label:"Confirm transaction",description:"Waiting for confirmation"}],defaultValues:{amount:"100",currencyCode:a.currency_code,issuerAddress:a.issuer_address}}}}}return{content:"I can help you send XRP or custom tokens directly from chat! What would you like to send?",data:{card:{icon:"💱",title:"Send Options",badge:"Choose Type",items:[{label:"XRP",value:"Native XRPL currency"},{label:"Custom Tokens",value:`${(r==null?void 0:r.length)||0} available`}]},quickActions:[{label:"Send XRP",onClick:()=>window.dispatchEvent(new CustomEvent("sendAIMessage",{detail:"send XRP"}))},{label:"Send Custom Token",onClick:()=>window.dispatchEvent(new CustomEvent("sendAIMessage",{detail:"send custom token"}))}]}}}handleReceiveToken(){return this.context.connectedWallet?{content:"Here is your wallet address for receiving tokens:",data:{card:{icon:"📥",title:"Receive Tokens",badge:"Your Address",items:[{label:"Wallet Name",value:this.context.connectedWallet.name},{label:"Address",value:this.context.connectedWallet.address},{label:"Network",value:"XRPL Mainnet"}],description:"Share this address with others to receive XRP and tokens. Make sure senders are using the XRPL network."},quickActions:[{label:"Copy Address",onClick:()=>navigator.clipboard.writeText(this.context.connectedWallet.address)},{label:"View on Explorer",onClick:()=>window.open(`https://xrpscan.com/account/${this.context.connectedWallet.address}`,"_blank")}]}}:{content:"Please connect a wallet first to receive tokens.",data:{actions:[{label:"Connect Wallet",icon:"🔗",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"wallets"}))}]}}}async handleWalletAssets(){if(!this.context.connectedWallet)return{content:"Please connect a wallet to view your assets.",data:{actions:[{label:"Connect Wallet",icon:"🔗",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"wallets"}))}]}};try{return{content:"Here are your wallet assets:",data:{card:{icon:"💎",title:"Wallet Assets",badge:"Live",items:[{label:"XRP Balance",value:`${(await Of(this.context.connectedWallet.address)).toFixed(6)} XRP`},{label:"Wallet",value:this.context.connectedWallet.name},{label:"Address",value:`${this.context.connectedWallet.address.slice(0,12)}...`}],description:"View all your assets including tokens and XRP holdings in the Wallets page."},actions:[{label:"View All Assets",icon:"💼",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"wallets"}))},{label:"Send Tokens",icon:"📤",style:"secondary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"wallets"}))}]}}}catch{return{content:"I had trouble fetching your wallet assets. Please try again.",data:null}}}async handleTokenStats(){try{const{data:e,error:r}=await le.from("tokens").select("*").order("created_at",{ascending:!1}).limit(5);if(r)throw r;const{count:s}=await le.from("tokens").select("*",{count:"exact",head:!0});return{content:"Here are the latest token statistics:",data:{card:{icon:"📊",title:"Token Statistics",badge:"Real-time",items:[{label:"Total Tokens",value:`${s||0}`},{label:"Recent Tokens",value:`${(e==null?void 0:e.length)||0} new`},{label:"Network",value:"XRPL Mainnet"}]},table:{headers:["Token","Symbol","Created"],rows:(e==null?void 0:e.slice(0,5).map(i=>[i.name||"Unknown",i.currency_code||"N/A",new Date(i.created_at).toLocaleDateString()]))||[]},actions:[{label:"View All Tokens",icon:"📋",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"mytokens"}))},{label:"Create Token",icon:"✨",style:"secondary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"memes"}))}]}}}catch{return{content:"I had trouble fetching token statistics. Please try again.",data:null}}}async handleMarketCapQuery(){try{const e=await Yl.getMarketCapRankings(10);if(!e||e.length===0)return{content:"No market cap data available yet.",data:null};const r=e.reduce((s,i)=>s+i.marketCap,0);return{content:"Here are tokens ranked by market cap (from cache):",data:{card:{icon:"💰",title:"Market Cap Rankings",badge:"Top Tokens",items:[{label:"Total Tokens",value:`${e.length}`},{label:"Total Market Cap",value:`${r.toFixed(2)} XRP`},{label:"Cache Status",value:e[0].cacheStatus==="valid"?"✅ Fresh":"⚠️ Updating"}]},table:{headers:["Rank","Token","Market Cap","Price","24h Change"],rows:e.map((s,i)=>[`#${i+1}`,`${s.token_name} (${s.currency_code})`,`${s.marketCap.toFixed(2)} XRP`,`${s.currentPrice.toFixed(8)} XRP`,s.priceChange24h?`${s.priceChange24h>0?"+":""}${s.priceChange24h.toFixed(2)}%`:"N/A"])},actions:[{label:"View Top 10",icon:"👑",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"top10"}))}]}}}catch{return{content:"I had trouble fetching market cap data. Please try again.",data:null}}}async handleVolumeQuery(){try{const e=await Yl.getVolumeLeaders(10);return!e||e.length===0?{content:"No volume data available yet.",data:null}:{content:"Here are the top tokens by 24h trading volume (from cache):",data:{card:{icon:"📊",title:"24h Trading Volume",badge:"Last 24 Hours",items:[{label:"Total Volume",value:`${e.reduce((s,i)=>s+i.volume24h,0).toFixed(2)} XRP`},{label:"Top Tokens",value:`${e.length}`},{label:"Cache Status",value:e[0].cacheStatus==="valid"?"✅ Fresh":"⚠️ Updating"}]},table:{headers:["Token","24h Volume","Price","24h Change"],rows:e.map(s=>[`${s.token_name} (${s.currency_code})`,`${s.volume24h.toFixed(2)} XRP`,`${s.currentPrice.toFixed(8)} XRP`,s.priceChange24h?`${s.priceChange24h>0?"+":""}${s.priceChange24h.toFixed(2)}%`:"N/A"])},actions:[{label:"View Trade History",icon:"📈",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"activity"}))}]}}}catch{return{content:"I had trouble fetching volume data. Please try again.",data:null}}}async handleHoldersQuery(e){try{const r=e.match(/(?:holder|holds|ownership).*?([A-Z]{3,10})/i),s=r?r[1].toUpperCase():null;if(!s)return{content:'Please specify which token you want to check holders for. Example: "Who holds ORANGE?" or "Show holders for KOOL"',data:null};const i=await Yl.getTokenHolders(s,10);return i?!i.holders||i.holders.length===0?{content:`No holder data available yet for ${i.token.token_name} (${s}). Holder data is updated periodically.`,data:{card:{icon:"👥",title:`${i.token.token_name} (${s})`,badge:"No Data",items:[{label:"Status",value:"Holder data not yet available"},{label:"Total Supply",value:i.token.supply?parseFloat(i.token.supply).toLocaleString():"N/A"}]}}}:{content:`Here are the top holders of ${i.token.token_name} (${s}) (from cache):`,data:{card:{icon:"👥",title:`${i.token.token_name} Holders`,badge:`${i.totalHolders} Holders`,items:[{label:"Total Holders",value:`${i.totalHolders}`},{label:"Total Balance",value:i.totalBalance.toLocaleString()},{label:"Total Supply",value:i.token.supply?parseFloat(i.token.supply).toLocaleString():"N/A"},{label:"Cache Status",value:i.cacheStatus==="valid"?"✅ Fresh":"⚠️ Updating"}]},table:{headers:["Rank","Address","Balance","% of Supply"],rows:i.holders.map((a,o)=>{var l,c;return[`#${o+1}`,`${(l=a.wallet_address)==null?void 0:l.slice(0,8)}...${(c=a.wallet_address)==null?void 0:c.slice(-6)}`,parseFloat(a.balance).toLocaleString(),`${(parseFloat(a.balance)/parseFloat(i.token.supply)*100).toFixed(2)}%`]})},actions:[{label:"Trade This Token",icon:"💱",style:"primary",onClick:()=>{window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"trade"})),setTimeout(()=>{window.dispatchEvent(new CustomEvent("selectToken",{detail:i.token}))},100)}}]}}:{content:`Token "${s}" not found.`,data:null}}catch(r){return console.error("Error fetching holder data:",r),{content:"I had trouble fetching holder data. Please try again.",data:null}}}async handleBotQuery(){try{const{data:e,error:r}=await le.from("trading_bots").select("*").order("created_at",{ascending:!1}).limit(5);if(r)throw r;if(!e||e.length===0)return{content:"You don't have any trading bots yet. Create your first bot to automate your trading!",data:{actions:[{label:"Create Trading Bot",icon:"🤖",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"bottrader"}))}]}};const s=e.filter(a=>a.status==="active").length,i=e.reduce((a,o)=>a+(o.total_trades||0),0);return{content:"Here is your trading bot overview:",data:{card:{icon:"🤖",title:"Trading Bots",badge:`${s} Active`,items:[{label:"Total Bots",value:`${e.length}`},{label:"Active Bots",value:`${s}`},{label:"Total Trades",value:`${i}`}]},table:{headers:["Bot","Status","Strategy","Trades"],rows:e.slice(0,5).map(a=>[a.name||"Unnamed Bot",a.status||"Unknown",a.strategy||"N/A",`${a.total_trades||0}`])},actions:[{label:"Manage Bots",icon:"⚙️",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"bottrader"}))}]}}}catch{return{content:"I had trouble fetching bot information. Please try again.",data:null}}}async handleBuyToken(){if(!this.context.connectedWallet)return{content:"Please connect a wallet to buy tokens.",data:{actions:[{label:"Connect Wallet",icon:"🔗",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"wallets"}))}]}};const{data:e}=await le.from("tokens").select("id, name, currency_code").limit(50);return{content:"Let's buy some tokens! I'll guide you through the process step by step.",data:{execution:{type:"buy_token",icon:"🛒",title:"Buy Token",description:"Purchase tokens using XRP",badge:"Trade",fields:[{name:"tokenId",label:"Select Token",type:"select",required:!0,options:(e==null?void 0:e.map(r=>({value:r.id,label:`${r.name} (${r.currency_code})`})))||[],hint:"Choose which token to buy"},{name:"amountXRP",label:"Amount to Spend (XRP)",type:"number",placeholder:"100",required:!0,hint:"Amount of XRP to spend"},{name:"slippage",label:"Slippage Tolerance (%)",type:"number",placeholder:"2",required:!0,hint:"Maximum price slippage allowed"}],steps:[{label:"Select token",description:"Choose token to purchase"},{label:"Create offer",description:"Preparing buy order on XRPL"},{label:"Sign transaction",description:"Signing with wallet"},{label:"Submit order",description:"Submitting to ledger"},{label:"Confirm purchase",description:"Waiting for confirmation"}],defaultValues:{amountXRP:"100",slippage:"2"}}}}}async handleSellToken(){if(!this.context.connectedWallet)return{content:"Please connect a wallet to sell tokens.",data:{actions:[{label:"Connect Wallet",icon:"🔗",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"wallets"}))}]}};const{data:e}=await le.from("tokens").select("id, name, currency_code").limit(50);return{content:"Ready to sell tokens! I'll help you create a sell order.",data:{execution:{type:"sell_token",icon:"💸",title:"Sell Token",description:"Sell tokens for XRP",badge:"Trade",fields:[{name:"tokenId",label:"Select Token",type:"select",required:!0,options:(e==null?void 0:e.map(r=>({value:r.id,label:`${r.name} (${r.currency_code})`})))||[],hint:"Choose which token to sell"},{name:"amountToken",label:"Amount to Sell",type:"number",placeholder:"1000",required:!0,hint:"Amount of tokens to sell"},{name:"minXRP",label:"Minimum XRP to Receive",type:"number",placeholder:"50",required:!0,hint:"Minimum XRP you want to receive"}],steps:[{label:"Validate holdings",description:"Checking token balance"},{label:"Create sell order",description:"Preparing sell order"},{label:"Sign transaction",description:"Signing with wallet"},{label:"Submit order",description:"Submitting to ledger"},{label:"Confirm sale",description:"Waiting for confirmation"}],defaultValues:{amountToken:"1000",minXRP:"50"}}}}}async handleCreateBot(){if(!this.context.connectedWallet)return{content:"Please connect a wallet to create a trading bot.",data:{actions:[{label:"Connect Wallet",icon:"🔗",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"wallets"}))}]}};const{data:e}=await le.from("tokens").select("id, name, currency_code").limit(50);return{content:"Let's create an automated trading bot! I'll set it up for you.",data:{execution:{type:"create_bot",icon:"🤖",title:"Create Trading Bot",description:"Automate your token trading",badge:"Automation",fields:[{name:"name",label:"Bot Name",type:"text",placeholder:"My Trading Bot",required:!0,hint:"Give your bot a name"},{name:"tokenId",label:"Token to Trade",type:"select",required:!0,options:(e==null?void 0:e.map(r=>({value:r.id,label:`${r.name} (${r.currency_code})`})))||[],hint:"Which token should the bot trade"},{name:"strategy",label:"Trading Strategy",type:"select",required:!0,options:[{value:"dca",label:"Dollar Cost Averaging (DCA)"},{value:"momentum",label:"Momentum Trading"},{value:"scalping",label:"Scalping"}],hint:"Choose trading strategy"},{name:"buyAmount",label:"Buy Amount (XRP)",type:"number",placeholder:"50",required:!0,hint:"Amount to spend per trade"},{name:"buyThreshold",label:"Buy Threshold (%)",type:"number",placeholder:"-5",required:!0,hint:"Buy when price drops by this %"},{name:"sellThreshold",label:"Sell Threshold (%)",type:"number",placeholder:"10",required:!0,hint:"Sell when price rises by this %"}],steps:[{label:"Validate settings",description:"Checking bot configuration"},{label:"Create bot",description:"Setting up trading bot"},{label:"Configure strategy",description:"Applying trading rules"},{label:"Activate bot",description:"Starting automated trading"}],defaultValues:{name:"Trading Bot",strategy:"dca",buyAmount:"50",buyThreshold:"-5",sellThreshold:"10"}}}}}async handleAddressBook(){if(!this.context.connectedWallet)return{content:"Please connect a wallet to view your address book.",data:{actions:[{label:"Connect Wallet",icon:"🔗",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"wallets"}))}]}};try{const{data:e,error:r}=await le.from("address_book").select("*").eq("wallet_address",this.context.connectedWallet.address).order("is_favorite",{ascending:!1}).order("name",{ascending:!0});if(r)throw r;const s=(e==null?void 0:e.filter(i=>i.is_favorite).length)||0;return{content:`Here is your address book with ${(e==null?void 0:e.length)||0} saved contacts:`,data:{card:{icon:"📇",title:"Address Book",badge:`${(e==null?void 0:e.length)||0} Contacts`,items:[{label:"Total Contacts",value:`${(e==null?void 0:e.length)||0}`},{label:"Favorites",value:`${s}`}]},table:{headers:["Name","Address","Notes"],rows:(e==null?void 0:e.slice(0,10).map(i=>[i.is_favorite?`⭐ ${i.name}`:i.name,`${i.address.slice(0,20)}...`,i.notes||"No notes"]))||[]},actions:[{label:"Send to Contact",icon:"📤",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("sendAIMessage",{detail:"send tokens"}))}]}}}catch{return{content:"I had trouble loading your address book. You can add contacts when sending tokens!",data:null}}}handleGeneral(e){const r=e.toLowerCase();return r.includes("create")&&r.includes("token")?{content:"I cannot create tokens through the chat. Token creation requires admin access and must be done through the Memes page of the platform.",data:{actions:[{label:"Go to Memes Page",icon:"🎨",style:"primary",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"memes"}))}]}}:r.includes("admin")||r.includes("settings")||r.includes("configure")?{content:`I don't have access to administrative functions or platform settings. I can only help with:

• Wallet operations (balance, send, receive)
• Token trading (buy/sell)
• Market information
• Address book management
• Trading bot creation

What would you like help with?`,data:null}:!e||e.length<3?{content:`I'm not sure I understand. Could you please provide more details about what you'd like to do?

For example, you can ask me to:
• "Send 10 XRP to an address"
• "Buy some tokens"
• "Check my balance"
• "Show my address book"
• "What are the top tokens?"

What would you like help with?`,data:null}:{content:`I'm not sure what you're asking for. I can help you with:

• Wallet Operations: Check balance, send/receive XRP and tokens
• Trading: Buy and sell tokens from the platform
• Address Book: Manage saved contacts for easy sending
• Market Data: View prices, volumes, and analytics
• Trading Bots: Create automated trading strategies

Note: I cannot create tokens or access admin functions.

Try one of these:`,data:{quickActions:["Check my balance","Send XRP","Send custom token","Buy token","Sell token","Show address book"].map(i=>({label:i,onClick:()=>{const a=new CustomEvent("sendAIMessage",{detail:i});window.dispatchEvent(a)}}))}}}}function rq({isOpen:t,onClose:e}){const[r,s]=T.useState([]),[i,a]=T.useState(""),[o,l]=T.useState(!1),[c,d]=T.useState(null),u=T.useRef(null),h=T.useRef(new o4),p=T.useRef(null);T.useEffect(()=>{t&&(m(),v())},[t]),T.useEffect(()=>{f()},[r,o]);const f=()=>{setTimeout(()=>{var A;(A=u.current)==null||A.scrollIntoView({behavior:"smooth",block:"end"})},100)},m=()=>{const A=localStorage.getItem("ai_chat_session");if(A)d(A);else{const B=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;d(B),localStorage.setItem("ai_chat_session",B)}},v=async()=>{try{const{data:A,error:B}=await le.from("ai_chat_messages").select("*").order("created_at",{ascending:!0}).limit(20);if(B)throw B;A&&A.length>0?s(A.map(Q=>({id:Q.id,role:Q.role,content:Q.content,timestamp:new Date(Q.created_at),data:Q.metadata}))):x()}catch(A){console.error("Error loading messages:",A),x()}},x=()=>{const A={id:`welcome_${Date.now()}`,role:"assistant",content:`👋 Quick AI Assistant ready! Try:
• "BUY 1000 ORANGE"
• "SELL 500 BANANA"
• "CHECK BALANCE"
• "PRICE OF APPLE"`,timestamp:new Date,data:null};s([A])},b=async A=>{try{await le.from("ai_chat_messages").insert({session_id:c,role:A.role,content:A.content,metadata:A.data||null})}catch(B){console.error("Error saving message:",B)}},y=async A=>{if(!A.trim())return;const B={id:`user_${Date.now()}`,role:"user",content:A,timestamp:new Date,data:null};s(Q=>[...Q,B]),await b(B),a(""),l(!0),p.current&&(p.current.style.height="auto");try{const Q=new Promise((de,me)=>setTimeout(()=>me(new Error("Request timed out after 30 seconds")),3e4)),U=await Promise.race([h.current.processMessage(A),Q]),q={id:`assistant_${Date.now()}`,role:"assistant",content:U.content,timestamp:new Date,data:U.data||null};s(de=>[...de,q]),await b(q)}catch(Q){console.error("Error processing message:",Q);const U={id:`error_${Date.now()}`,role:"assistant",content:`Error: ${Q.message||"Something went wrong"}. Please try again or check your wallet connection.`,timestamp:new Date,data:null};s(q=>[...q,U]),await b(U)}finally{l(!1)}},g=A=>{A.preventDefault(),y(i.trim())},w=A=>{A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),g(A))},S=A=>{a(A.target.value),A.target.style.height="auto",A.target.style.height=Math.min(A.target.scrollHeight,100)+"px"},_=[{label:"💰 Balance",command:"CHECK BALANCE"},{label:"💱 Buy",command:"I want to buy tokens"},{label:"💸 Sell",command:"I want to sell tokens"}];return t?n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fadeIn",children:n.jsxs("div",{className:"relative w-full max-w-2xl bg-gradient-to-br from-purple-900/95 to-purple-800/95 rounded-xl border border-purple-500/50 shadow-2xl shadow-purple-500/30 flex flex-col animate-slideUp",style:{maxHeight:"90vh"},children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-purple-500/30 bg-purple-900/50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-blue-600 rounded-lg flex items-center justify-center animate-pulse",children:n.jsx("span",{className:"text-2xl",children:"🤖"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-bold text-white",children:"AI Trading Assistant"}),n.jsx("p",{className:"text-purple-300/80 text-xs",children:"Execute commands instantly"})]})]}),n.jsx("button",{onClick:e,className:"w-8 h-8 flex items-center justify-center rounded-lg bg-purple-800/40 hover:bg-purple-800/60 text-purple-200 hover:text-white transition-all duration-200 border border-purple-500/30",children:"✕"})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",style:{minHeight:0,maxHeight:"60vh"},children:[r.map((A,B)=>n.jsx("div",{className:"animate-fadeInUp",style:{animationDelay:`${B*30}ms`},children:n.jsx(a4,{message:A})},A.id)),o&&n.jsxs("div",{className:"flex items-start gap-3 animate-fadeInUp",children:[n.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-blue-600 rounded-full flex items-center justify-center flex-shrink-0 animate-pulse",children:n.jsx("span",{className:"text-sm",children:"🤖"})}),n.jsx("div",{className:"flex-1 bg-purple-900/30 rounded-lg p-3 border border-purple-500/20",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),n.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),n.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),n.jsx("div",{ref:u})]}),n.jsxs("div",{className:"p-4 border-t border-purple-500/30 bg-purple-900/50 space-y-3",children:[n.jsx("div",{className:"flex flex-wrap gap-2",children:_.map((A,B)=>n.jsx("button",{onClick:()=>y(A.command),disabled:o,className:"px-3 py-1.5 bg-purple-800/40 hover:bg-purple-800/60 text-purple-200 hover:text-white rounded-full text-xs font-medium transition-all duration-200 border border-purple-500/30 disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105",children:A.label},B))}),n.jsxs("form",{onSubmit:g,className:"flex gap-2",children:[n.jsx("textarea",{ref:p,value:i,onChange:S,onKeyDown:w,placeholder:"Type command: BUY 1000 ORANGE, CHECK BALANCE...",disabled:o,rows:"1",className:"flex-1 bg-purple-900/40 border border-purple-500/40 rounded-lg px-4 py-2.5 text-white placeholder-purple-400/60 focus:outline-none focus:border-purple-500/60 focus:ring-2 focus:ring-purple-500/30 disabled:opacity-50 disabled:cursor-not-allowed resize-none overflow-hidden transition-all duration-200 text-sm",style:{minHeight:"42px",maxHeight:"100px"}}),n.jsxs("button",{type:"submit",disabled:o||!i.trim(),className:"px-5 bg-gradient-to-r from-purple-600 to-blue-600 hover:shadow-lg hover:shadow-purple-500/50 text-white rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:shadow-none hover:scale-105",children:[n.jsx("span",{className:"hidden sm:inline",children:"Send"}),n.jsx("span",{className:"sm:hidden",children:"➤"})]})]}),n.jsx("div",{className:"text-center text-xs text-purple-400/60",children:"Press Enter to send • Shift+Enter for new line"})]})]})}):null}const Xl=qp,_p=t=>{const e=parseFloat(t);if(isNaN(e)||e<=0)throw new Error("Invalid XRP amount");if(e>1e11)throw new Error("XRP amount too large");if(e<1e-6)throw new Error("XRP amount too small (minimum 0.000001)");const r=Math.floor(e*1e6)/1e6;return parseFloat(r.toFixed(6))},Kx=t=>{const e=parseFloat(t);if(isNaN(e)||e<=0)throw new Error("Invalid token amount");return e.toFixed(6)};function sq({preselectedToken:t=null}){const[e,r]=T.useState([]),[s,i]=T.useState(null),[a,o]=T.useState("buy"),[l,c]=T.useState(""),[d,u]=T.useState(""),[h,p]=T.useState(null),[f,m]=T.useState(!1),[v,x]=T.useState(!1),[b,y]=T.useState(!1),[g,w]=T.useState(!1),[S,_]=T.useState("0"),[A,B]=T.useState(0),[Q,U]=T.useState(!1),[q,de]=T.useState("candlestick"),[me,ye]=T.useState("15m"),[G,Z]=T.useState(null),[he,ee]=T.useState(0),[H,I]=T.useState(0),[K,re]=T.useState(!1),[z,O]=T.useState("0.5"),[V,ne]=T.useState("amm"),[pe,ae]=T.useState([]),[se,k]=T.useState(0),[j,P]=T.useState(!1),[$,R]=T.useState(""),[W,te]=T.useState(!1),[X,oe]=T.useState(null),[F,J]=T.useState(!1),[xe,Ee]=T.useState(!1),[Te,Be]=T.useState(!1),[nt,De]=T.useState(null),[L,N]=T.useState(!1),[E,Y]=T.useState([]),[fe,we]=T.useState(!1),[Ne,Le]=T.useState(.5),[ze,st]=T.useState(0),[Qe,at]=T.useState(null),[wt,Gt]=T.useState(null),[Dt,lr]=T.useState(!1),[os,Bt]=T.useState(0),[cr,xt]=T.useState("select"),[pt,M]=T.useState(null),[ve,be]=T.useState(!1),[Pe,Me]=T.useState(!1),Se=T.useRef(null),[Fe,Ke]=T.useState("both"),[it,$e]=T.useState(""),[lt,Yt]=T.useState(!1),[D,je]=T.useState(""),[Ue,Je]=T.useState(""),[dt,bt]=T.useState(!1);T.useState(!1);const[Ye,Nt]=T.useState("both"),[Tt,zt]=T.useState(!1),rt=T.useRef(null),tt=T.useRef(null),kt=T.useRef(null),Pt=T.useRef(null),Mt=T.useRef(null),It=T.useRef(null),pr=T.useRef([]),ls=T.useRef(null);T.useEffect(()=>{pn(),cs(),As();const _e=xh(()=>{pn()}),C=()=>{cs()};return window.addEventListener("walletConnected",C),window.addEventListener("walletDisconnected",C),()=>{_e(),window.removeEventListener("walletConnected",C),window.removeEventListener("walletDisconnected",C)}},[]),T.useEffect(()=>{if(t&&e.length>0&&!s){const _e=e.find(C=>C.id===t.id);_e&&i(_e)}},[t,e,s]),T.useEffect(()=>{s&&fr()},[s,Ne]),T.useEffect(()=>(s&&rt.current&&tt.current&&Oe(),s&&h&&(kr(),vl()),s&&(Se.current&&clearTimeout(Se.current),Se.current=setTimeout(()=>{Ft()},300)),()=>{Ps(),Se.current&&clearTimeout(Se.current)}),[s,h]),T.useEffect(()=>(s&&rt.current&&tt.current&&Oe(),()=>{Ps()}),[q]),T.useEffect(()=>(s&&rt.current&&tt.current&&Oe(),()=>{Ps()}),[me]),T.useEffect(()=>{ut()},[l,d,z,a,G]),T.useEffect(()=>{if(!s)return;let _e=!0;const C=async()=>{var ge;if(_e)try{const Re=new Ve.Client("wss://xrplcluster.com");if(await Re.connect(),!_e){await Re.disconnect();return}const ke=s.currency_code.length>3?Et.Buffer.from(s.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):s.currency_code,Ge=await Re.request({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:ke,issuer:s.issuer_address},ledger_index:"validated"});if(await Re.disconnect(),_e&&((ge=Ge==null?void 0:Ge.result)!=null&&ge.amm)){const qe=Ge.result.amm,Ie=parseFloat(qe.amount)/1e6,ft=parseFloat(qe.amount2.value),mt=Ie/ft;if(ee(mt),s.amm_xrp_amount&&s.amm_asset_amount){const ct=s.amm_xrp_amount/s.amm_asset_amount,gt=(mt-ct)/ct*100;I(gt)}}}catch(Re){_e&&console.error("Error fetching live price:",Re)}};C();const ue=setInterval(()=>{_e&&C()},15e3);return()=>{_e=!1,clearInterval(ue)}},[s]);const cs=async()=>{const _e=localStorage.getItem("connectedWallet");if(_e){const C=JSON.parse(_e);if(!C.seed&&C.id)try{const{data:ue,error:ge}=await le.from("wallets").select("*").eq("id",C.id).maybeSingle();if(ue){const Re={...ue,seed:ue.encrypted_seed||ue.seed};localStorage.setItem("connectedWallet",JSON.stringify(Re)),p(Re);return}}catch(ue){console.error("Error refreshing wallet:",ue)}p(C)}else p(null)},As=async()=>{var _e;try{const ue=await(await fetch("https://api.coingecko.com/api/v3/simple/price?ids=ripple&vs_currencies=usd")).json();Le(((_e=ue.ripple)==null?void 0:_e.usd)||.5)}catch(C){console.error("Error fetching XRP/USD price:",C),Le(.5)}},fr=()=>{if(!s||!s.total_supply){st(0);return}const _e=zr(s),C=parseFloat(s.total_supply),ge=_e*C*Ne;st(ge)},pn=async()=>{try{const{data:_e,error:C}=await le.from("meme_tokens").select("*").eq("amm_pool_created",!0).order("created_at",{ascending:!1});if(C)throw C;r(_e||[]);const ue=localStorage.getItem("selectedTradeToken");if(ue)try{const ge=JSON.parse(ue),Re=_e==null?void 0:_e.find(ke=>ke.id===ge.id||ke.currency_code===ge.currency_code&&ke.issuer_address===ge.issuer_address);if(Re){i(Re),localStorage.removeItem("selectedTradeToken");return}}catch(ge){console.error("Error parsing stored token:",ge)}_e&&_e.length>0&&!s&&i(_e[0])}catch(_e){console.error("Error loading tokens:",_e)}},zr=_e=>!_e||!_e.amm_xrp_amount||!_e.amm_asset_amount?0:_e.amm_xrp_amount/_e.amm_asset_amount,Bn=_e=>{if(!_e||!_e.amm_xrp_amount||!_e.amm_asset_amount)return 0;const C=_e.amm_xrp_amount/_e.amm_asset_amount;return _e.supply*C},rr=()=>{if(!s)return console.log("No token selected for chart data"),[];try{const _e=zr(s);if(!_e||isNaN(_e)||_e<=0)return console.error("Invalid base price:",_e),[];const C=[],ue=Math.floor(Date.now()/1e3),ge=48;for(let Re=ge;Re>=0;Re--){const ke=ue-Re*3600,Ge=(Math.random()-.5)*.3,qe=(ge-Re)/ge*.15,Ie=_e*(1+Ge+qe);C.push({time:ke,value:Ie,open:Ie*.98,high:Ie*1.03,low:Ie*.97,close:Ie,volume:Math.random()*1e4+1e3})}return pr.current=C,C}catch(_e){return console.error("Error generating chart data:",_e),[]}},dr=()=>{Ps(),!(!s||!Mt.current)&&(ls.current=setInterval(()=>{ce()},2e4))},Ps=()=>{ls.current&&(clearInterval(ls.current),ls.current=null)},ce=()=>{if(!s||!Mt.current||pr.current.length===0)return;const _e=zr(s),C=pr.current[pr.current.length-1],ue=Math.floor(Date.now()/1e3),ge=(Math.random()-.5)*.02,Re=_e*(1+ge);if(ue-C.time>=60){const ke={time:ue,value:Re,open:C.close||Re,high:Math.max(Re,C.close||Re)*1.002,low:Math.min(Re,C.close||Re)*.998,close:Re,volume:Math.random()*5e3+500};pr.current.push(ke),pr.current.length>500&&pr.current.shift();try{q==="area"||q==="line"||q==="baseline"?Mt.current.update({time:ke.time,value:ke.value}):Mt.current.update({time:ke.time,open:ke.open,high:ke.high,low:ke.low,close:ke.close}),It.current&&It.current.update({time:ke.time,value:ke.volume,color:ke.close>=ke.open?"rgba(34, 197, 94, 0.5)":"rgba(239, 68, 68, 0.5)"})}catch(Ge){console.error("Error updating chart:",Ge)}}},Oe=()=>{if(!rt.current||!tt.current||!s){console.log("Chart render skipped - missing refs or token");return}try{if(kt.current){try{kt.current.remove()}catch(qe){console.error("Error removing price chart:",qe)}kt.current=null}if(Pt.current){try{Pt.current.remove()}catch(qe){console.error("Error removing volume chart:",qe)}Pt.current=null}rt.current&&(rt.current.innerHTML=""),tt.current&&(tt.current.innerHTML="");const _e=Uu(rt.current,{width:rt.current.clientWidth,height:500,layout:{background:{color:"transparent"},textColor:"#a78bfa"},grid:{vertLines:{color:"rgba(139, 92, 246, 0.1)"},horzLines:{color:"rgba(139, 92, 246, 0.1)"}},rightPriceScale:{borderColor:"rgba(139, 92, 246, 0.3)",scaleMargins:{top:.1,bottom:.1},minimumWidth:window.innerWidth<640?70:80},timeScale:{borderColor:"rgba(139, 92, 246, 0.3)",timeVisible:!0,secondsVisible:!1,visible:!1},handleScale:{axisPressedMouseMove:{time:!0,price:!0}}});kt.current=_e;const C=rr();if(!C||C.length===0)throw console.error("No chart data generated"),new Error("Unable to generate chart data. Please check token configuration.");let ue;const ge={type:"price",precision:8,minMove:1e-8};switch(q){case"bars":ue=_e.addBarSeries({upColor:"#22c55e",downColor:"#ef4444",priceFormat:ge}),ue.setData(C.map(Ie=>({time:Ie.time,open:Ie.open,high:Ie.high,low:Ie.low,close:Ie.close})));break;case"candlestick":ue=_e.addCandlestickSeries({upColor:"#22c55e",downColor:"#ef4444",borderVisible:!1,wickUpColor:"#22c55e",wickDownColor:"#ef4444",priceFormat:ge}),ue.setData(C.map(Ie=>({time:Ie.time,open:Ie.open,high:Ie.high,low:Ie.low,close:Ie.close})));break;case"hollow":ue=_e.addCandlestickSeries({upColor:"transparent",downColor:"#ef4444",borderUpColor:"#22c55e",borderDownColor:"#ef4444",wickUpColor:"#22c55e",wickDownColor:"#ef4444",priceFormat:ge}),ue.setData(C.map(Ie=>({time:Ie.time,open:Ie.open,high:Ie.high,low:Ie.low,close:Ie.close})));break;case"line":ue=_e.addLineSeries({color:"#8b5cf6",lineWidth:2,priceFormat:ge}),ue.setData(C.map(Ie=>({time:Ie.time,value:Ie.close})));break;case"area":ue=_e.addAreaSeries({topColor:"rgba(139, 92, 246, 0.4)",bottomColor:"rgba(139, 92, 246, 0.0)",lineColor:"#8b5cf6",lineWidth:2,priceFormat:ge}),ue.setData(C.map(Ie=>({time:Ie.time,value:Ie.close})));break;case"baseline":ue=_e.addBaselineSeries({topLineColor:"#22c55e",topFillColor1:"rgba(34, 197, 94, 0.4)",topFillColor2:"rgba(34, 197, 94, 0.0)",bottomLineColor:"#ef4444",bottomFillColor1:"rgba(239, 68, 68, 0.0)",bottomFillColor2:"rgba(239, 68, 68, 0.4)",priceFormat:ge}),ue.setData(C.map(Ie=>({time:Ie.time,value:Ie.close})));break;case"heikin":ue=_e.addCandlestickSeries({upColor:"#22c55e",downColor:"#ef4444",borderVisible:!1,wickUpColor:"#22c55e",wickDownColor:"#ef4444",priceFormat:ge});const qe=C.map((Ie,ft)=>{if(ft===0)return Ie;const mt=C[ft-1],ct=(Ie.open+Ie.high+Ie.low+Ie.close)/4,gt=(mt.open+mt.close)/2,Ot=Math.max(Ie.high,gt,ct),Vt=Math.min(Ie.low,gt,ct);return{time:Ie.time,open:gt,high:Ot,low:Vt,close:ct}});ue.setData(qe);break;default:ue=_e.addCandlestickSeries({upColor:"#22c55e",downColor:"#ef4444",borderVisible:!1,wickUpColor:"#22c55e",wickDownColor:"#ef4444",priceFormat:ge}),ue.setData(C.map(Ie=>({time:Ie.time,open:Ie.open,high:Ie.high,low:Ie.low,close:Ie.close})))}Mt.current=ue;const Re=Uu(tt.current,{width:tt.current.clientWidth,height:120,layout:{background:{color:"transparent"},textColor:"#a78bfa"},grid:{vertLines:{color:"rgba(139, 92, 246, 0.1)"},horzLines:{color:"rgba(139, 92, 246, 0.1)"}},rightPriceScale:{borderColor:"rgba(139, 92, 246, 0.3)",scaleMargins:{top:.1,bottom:.1},minimumWidth:window.innerWidth<640?70:80},timeScale:{borderColor:"rgba(139, 92, 246, 0.3)",timeVisible:!0,secondsVisible:!1}});Pt.current=Re;const ke=Re.addHistogramSeries({color:"#8b5cf6",priceFormat:{type:"volume"}});ke.setData(C.map(qe=>({time:qe.time,value:qe.volume,color:qe.close>=qe.open?"rgba(34, 197, 94, 0.5)":"rgba(239, 68, 68, 0.5)"}))),It.current=ke,_e.timeScale().fitContent(),Re.timeScale().fitContent(),_e.timeScale().subscribeVisibleTimeRangeChange(()=>{const qe=_e.timeScale().getVisibleRange();qe&&Re.timeScale().setVisibleRange(qe)});const Ge=()=>{kt.current&&rt.current&&kt.current.applyOptions({width:rt.current.clientWidth}),Pt.current&&tt.current&&Pt.current.applyOptions({width:tt.current.clientWidth})};window.addEventListener("resize",Ge),setTimeout(()=>{dr()},100)}catch(_e){if(console.error("Error rendering chart:",_e),ie.error("Failed to render chart. Please refresh the page."),kt.current){try{kt.current.remove()}catch(C){console.error("Error cleaning up price chart:",C)}kt.current=null}if(Pt.current){try{Pt.current.remove()}catch(C){console.error("Error cleaning up volume chart:",C)}Pt.current=null}}},We=()=>{if(!s||!l||isNaN(l))return{tokenAmount:0,xrpAmount:0,priceImpact:0,fee:0};const _e=he>0?he:zr(s);if(!_e||_e===0)return{tokenAmount:0,xrpAmount:0,priceImpact:0,fee:0};if(a==="buy"){const C=parseFloat(l),ue=C/_e,ge=s.amm_xrp_amount>0?C/s.amm_xrp_amount*100:0;return{tokenAmount:ue.toFixed(4),xrpAmount:C.toFixed(4),priceImpact:ge.toFixed(2),fee:Xl.toFixed(2)}}else{const C=parseFloat(l),ue=C*_e,ge=s.amm_asset_amount>0?C/s.amm_asset_amount*100:0;return{tokenAmount:C.toFixed(4),xrpAmount:ue.toFixed(4),priceImpact:ge.toFixed(2),fee:Xl.toFixed(2)}}},ut=()=>{if(!G||!l||!d){R("");return}const _e=We();if(!_e){R("");return}G.liquidity;const C=parseFloat(_e.priceImpact),ue=parseFloat(z);let ge=.5;C>10?ge=Math.max(15,C*1.5):C>5?ge=Math.max(10,C*1.3):C>2?ge=Math.max(5,C*1.2):C>1?ge=3:C>.5&&(ge=1),ue<ge?R(`⚠️ Low slippage detected. Recommended: ${ge.toFixed(1)}% (Price Impact: ${C}%)`):R("")},Ft=async(_e=!1)=>{var C;if(s)try{re(!0);const{data:ue}=await le.from("pool_data_cache").select("*").eq("token_id",s.id).gte("last_updated",new Date(Date.now()-su.POOL_DATA).toISOString()).maybeSingle();if(!_e&&ue){console.log("✅ Using cached market data");const Ge=parseFloat(ue.xrp_amount),qe=parseFloat(ue.token_amount),Ie=parseFloat(ue.price),ft=Ie*s.supply;Z({price:Ie,liquidity:Ge,marketCap:ft,volume24h:parseFloat(ue.volume_24h||0)}),ee(Ie),st(ft*Ne),re(!1);return}console.log("🔄 Fetching fresh market data from XRPL...");const{requestWithRetry:ge}=await $t(()=>Promise.resolve().then(()=>tr),void 0),Re=await ge({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:s.currency_code,issuer:s.issuer_address},ledger_index:"validated"});let ke=0;if(Re.result.amm){const Ge=Re.result.amm,qe=Ge.account,Ie=parseFloat(Ge.amount)/1e6,ft=parseFloat(Ge.amount2.value),mt=Ie/ft,ct=mt*s.supply;ke=Ie*.15,Z({marketCap:ct,liquidity:Ie,volume24h:ke,poolSize:ft,price:mt}),ee(mt),st(ct*Ne),await le.from("pool_data_cache").upsert({token_id:s.id,xrp_amount:Ie,token_amount:ft,lp_tokens:parseFloat(((C=Ge.lp_token)==null?void 0:C.value)||0),price:mt,account_id:qe,volume_24h:ke,price_change_24h:0,last_updated:new Date().toISOString()},{onConflict:"token_id"}),console.log("💾 Cached market data")}}catch(ue){console.error("Error fetching market data:",ue),Z(null)}finally{re(!1)}},kr=async()=>{var _e;if(h)try{U(!0);const C=await Of(h.address);if(B(C),s){const ue=await le.from("token_holdings_cache").select("*").eq("wallet_address",h.address).eq("token_id",s.id).gte("last_updated",new Date(Date.now()-su.BALANCE).toISOString()).maybeSingle();if(ue.data){console.log("Using cached token balance:",ue.data.balance),_(ue.data.balance.toString()),m(!0),U(!1);return}const{getClient:ge,requestWithRetry:Re}=await $t(()=>Promise.resolve().then(()=>tr),void 0),ke=await ge(),Ge=await Re({command:"account_lines",account:h.address,ledger_index:"validated"}),qe=s.currency_code.length>3?Et.Buffer.from(s.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):s.currency_code;console.log("Looking for token:",{currency_code:s.currency_code,currencyHex:qe,issuer:s.issuer_address});const Ie=(_e=Ge.result.lines)==null?void 0:_e.find(ct=>{const gt=ct.account===s.issuer_address,Ot=ct.currency===s.currency_code||ct.currency===qe||ct.currency.toUpperCase()===qe.toUpperCase();return gt&&Ot&&console.log("Found matching trustline:",ct),gt&&Ot}),ft=Ie?Ie.balance:"0";console.log("Token balance:",ft),_(ft);const mt=Ie!==void 0;m(mt),console.log("Trustline active:",mt),await le.from("token_holdings_cache").upsert({wallet_address:h.address,token_id:s.id,balance:parseFloat(ft),price:he||0,value:parseFloat(ft)*(he||0),is_lp_token:!1,last_updated:new Date().toISOString(),updated_at:new Date().toISOString()},{onConflict:"wallet_address,token_id"})}else _("0"),m(!1)}catch(C){console.error("Error fetching balances:",C),_("0"),m(!1)}finally{U(!1)}},qs=async()=>{if(!s||!h||!h.seed){ie.error("Wallet seed required for trustline setup");return}try{y(!0);const _e=new Ve.Client("wss://xrplcluster.com");await _e.connect();const C=Ve.Wallet.fromSeed(h.seed),ue={TransactionType:"TrustSet",Account:h.address,LimitAmount:{currency:s.currency_code,issuer:s.issuer_address,value:"1000000000"}},ge=await _e.autofill(ue),Re=C.sign(ge);(await _e.submitAndWait(Re.tx_blob)).result.meta.TransactionResult==="tesSUCCESS"?(ie.success("Trustline established successfully!"),m(!0),kr()):ie.error("Failed to establish trustline"),await _e.disconnect()}catch(_e){console.error("Error setting up trustline:",_e),ie.error("Failed to setup trustline: "+_e.message)}finally{y(!1)}},vl=async()=>{var _e,C,ue;if(!s||!h){M(null);return}try{be(!0);const ge=await le.from("lp_balance_cache").select("*").eq("wallet_address",h.address).eq("token_id",s.id).gte("last_updated",new Date(Date.now()-su.LP_POSITION).toISOString()).maybeSingle();if(ge.data&&ge.data.lp_balance>0){console.log("Using cached LP position");const{getClient:Vt,requestWithRetry:jr}=await $t(()=>Promise.resolve().then(()=>tr),void 0),Lr=await Vt(),ds=s.currency_code.length>3?Et.Buffer.from(s.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):s.currency_code,Is=await jr({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:ds,issuer:s.issuer_address},ledger_index:"validated"});if((_e=Is==null?void 0:Is.result)!=null&&_e.amm){const Mr=Is.result.amm,ed=parseFloat(Mr.lp_token.value),io=parseFloat(ge.data.lp_balance)/ed*100,ao=parseFloat(Mr.amount)/1e6,l4=parseFloat(Mr.amount2.value),s_=ao*io/100,c4=l4*io/100,d4=s_*2;M({xrp:s_.toFixed(6),tokens:c4.toFixed(6),lpTokens:ge.data.lp_balance.toString(),sharePercentage:io.toFixed(6),estimatedValue:d4.toFixed(6),lpTokenCurrency:Mr.lp_token.currency,lpTokenIssuer:Mr.lp_token.issuer}),be(!1);return}}const{getClient:Re,requestWithRetry:ke}=await $t(()=>Promise.resolve().then(()=>tr),void 0),Ge=await Re(),qe=s.currency_code.length>3?Et.Buffer.from(s.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):s.currency_code,Ie=await ke({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:qe,issuer:s.issuer_address},ledger_index:"validated"});if(!((C=Ie==null?void 0:Ie.result)!=null&&C.amm)){M(null),be(!1);return}const ft=Ie.result.amm,mt=ft.lp_token.currency,ct=ft.lp_token.issuer,Ot=(ue=(await ke({command:"account_lines",account:h.address,ledger_index:"validated"})).result.lines)==null?void 0:ue.find(Vt=>Vt.currency===mt&&Vt.account===ct);if(Ot){const Vt=parseFloat(Ot.balance),jr=parseFloat(ft.lp_token.value),Lr=Vt/jr*100,ds=parseFloat(ft.amount)/1e6,Is=parseFloat(ft.amount2.value),Mr=ds*Lr/100,ed=Is*Lr/100,io=Mr*2;M({xrp:Mr.toFixed(6),tokens:ed.toFixed(6),lpTokens:Vt.toFixed(6),sharePercentage:Lr.toFixed(6),estimatedValue:io.toFixed(6),lpTokenCurrency:mt,lpTokenIssuer:ct}),await le.from("lp_balance_cache").upsert({wallet_address:h.address,token_id:s.id,amm_account_id:ft.account,lp_balance:Vt,lp_share_percentage:Lr,last_updated:new Date().toISOString()},{onConflict:"wallet_address,token_id"})}else M(null),await le.from("lp_balance_cache").delete().eq("wallet_address",h.address).eq("token_id",s.id)}catch(ge){console.error("Error fetching LP position:",ge),M(null)}finally{be(!1)}},Os=()=>{if(!pt||!it||isNaN(it))return null;const _e=parseFloat(it),C=parseFloat(pt.lpTokens),ue=_e/C,ge=parseFloat(pt.xrp)*ue,Re=parseFloat(pt.tokens)*ue,ke=Re*sr,Ge=ge+ke,qe=Ge*Ne;return{xrpToReceive:ge.toFixed(6),tokensToReceive:Re.toFixed(6),tokenValueInXrp:ke.toFixed(6),totalValueInXrp:Ge.toFixed(6),totalValueInUsd:qe.toFixed(2),networkFee:"0.00001",platformFee:Xl.toFixed(2),netXrp:(ge-Xl).toFixed(6),estimatedTotal:Ge.toFixed(6)}},vh=async()=>{if(!h||!h.seed){ie.error("Wallet seed required for deposit");return}if(Ye==="both"){if(!D||!Ue||parseFloat(D)<=0||parseFloat(Ue)<=0){ie.error("Enter valid amounts for both XRP and tokens");return}}else if(Ye==="xrp"){if(!D||parseFloat(D)<=0){ie.error("Enter valid XRP amount");return}}else if(Ye==="token"&&(!Ue||parseFloat(Ue)<=0)){ie.error("Enter valid token amount");return}try{bt(!0);const _e=new Ve.Client("wss://xrplcluster.com");await _e.connect();const C=Ve.Wallet.fromSeed(h.seed),ue=s.currency_code.length>3?Et.Buffer.from(s.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):s.currency_code,ge={TransactionType:"AMMDeposit",Account:h.address,Asset:{currency:"XRP"},Asset2:{currency:ue,issuer:s.issuer_address}};Ye==="both"?(ge.Amount=Ve.xrpToDrops(D),ge.Amount2={currency:ue,issuer:s.issuer_address,value:Ue},ge.Flags=1048576):Ye==="xrp"?(ge.Amount=Ve.xrpToDrops(D),ge.Flags=65536):Ye==="token"&&(ge.Amount2={currency:ue,issuer:s.issuer_address,value:Ue},ge.Flags=131072),console.log("Deposit TX:",ge);const Re=await _e.autofill(ge),ke=C.sign(Re),Ge=await _e.submitAndWait(ke.tx_blob,{timeout:45e3});if(Ge.result.meta.TransactionResult==="tesSUCCESS"){const qe=await lu(_e,C);ie.success(Ie=>n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("div",{className:"font-semibold",children:"Deposit Successful!"}),n.jsxs("div",{className:"text-sm",children:["Deposited ",D," XRP and ",Ue," ",s.token_name," to pool"]}),n.jsxs("div",{className:"text-xs opacity-75",children:["Platform fee: ",Xl," XRP"]}),n.jsx("div",{className:"text-xs",children:n.jsx(Pi,{type:"tx",value:Ge.result.hash,network:"mainnet"})})]}),{duration:8e3,style:{background:"#065f46",color:"#d1fae5",border:"1px solid #10b981"}}),je(""),Je(""),await vl(),await kr()}else throw new Error(`Deposit failed: ${Ge.result.meta.TransactionResult}`);await _e.disconnect()}catch(_e){console.error("Deposit error:",_e),ie.error("Deposit failed: "+_e.message)}finally{bt(!1)}},qm=async()=>{if(!h||!h.seed){ie.error("Wallet seed required for withdrawal");return}if(!pt){ie.error("No LP position found");return}const _e=Os();if(!_e){ie.error("Invalid withdraw amount");return}try{Yt(!0);const C=new Ve.Client("wss://xrplcluster.com");await C.connect();const ue=Ve.Wallet.fromSeed(h.seed),ge=s.currency_code.length>3?Et.Buffer.from(s.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):s.currency_code,Re=Math.floor(parseFloat(it)*1e6),ke={TransactionType:"AMMWithdraw",Account:h.address,Asset:{currency:"XRP"},Asset2:{currency:ge,issuer:s.issuer_address},LPTokenIn:{currency:pt.lpTokenCurrency,issuer:pt.lpTokenIssuer,value:it}};Fe==="both"?ke.Flags=1048576:Fe==="xrp"?ke.Flags=65536:Fe==="token"&&(ke.Flags=131072),console.log("Withdraw TX:",ke);const Ge=await C.autofill(ke),qe=ue.sign(Ge),Ie=await C.submitAndWait(qe.tx_blob,{timeout:45e3});if(Ie.result.meta.TransactionResult==="tesSUCCESS"){const ft=await lu(C,ue);ie.success(mt=>n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("div",{className:"font-semibold",children:"Withdrawal Successful!"}),n.jsxs("div",{className:"text-sm",children:["Received ",_e.xrpToReceive," XRP and ",_e.tokensToReceive," ",s.token_name]}),n.jsxs("div",{className:"text-xs opacity-75",children:["Platform fee: ",Xl," XRP"]}),n.jsx("div",{className:"text-xs",children:n.jsx(Pi,{type:"tx",value:Ie.result.hash,network:"mainnet"})})]}),{duration:8e3,style:{background:"#065f46",color:"#d1fae5",border:"1px solid #10b981"}}),$e(""),await vl(),await kr()}else throw new Error(`Withdrawal failed: ${Ie.result.meta.TransactionResult}`);await C.disconnect()}catch(C){console.error("Withdrawal error:",C),ie.error("Withdrawal failed: "+C.message)}finally{Yt(!1)}},hi=(_e,C,ue={})=>{ae(ge=>{const Re=[...ge];return C==="error"?Re[_e]={...Re[_e],error:!0,description:ue.error||Re[_e].description}:C==="success"&&(Re[_e]={...Re[_e],description:ue.description||Re[_e].description,txHash:ue.txHash}),Re}),C!=="error"&&k(_e+1)},Xi=async()=>{if(!h||!h.seed){ie.error("Wallet seed required for trading");return}if(!f){ie.error("Please setup trustline first");return}if(g&&!Dt){ie.error("Trade already in progress");return}const _e=We(),ue=[{title:"Connecting to XRPL",description:"Establishing connection to the XRP Ledger network"},{title:`${a==="buy"?"Buying":"Selling"} ${s.token_name}`,description:`${a==="buy"?"Buying":"Selling"} ${_e.tokenAmount} ${s.token_name} ${a==="buy"?"with":"for"} ${_e.xrpAmount} XRP`},{title:"Trade Complete",description:`${a==="buy"?"Bought":"Sold"} ${s.token_name} successfully`}];ae(ue),k(0),P(!0),w(!0);let ge=null;try{hi(0,"loading"),ge=new Ve.Client("wss://xrplcluster.com"),await ge.connect(),hi(0,"success",{description:"Connected to XRPL successfully"});const Re=Ve.Wallet.fromSeed(h.seed),ke=s.currency_code.length>3?Et.Buffer.from(s.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):s.currency_code,Ge=1+parseFloat(z)/100;hi(1,"loading");let qe;if(a==="buy"){const ct=parseFloat(_e.tokenAmount),gt=parseFloat(_e.xrpAmount)*Ge;qe={TransactionType:"Payment",Account:h.address,Destination:h.address,Amount:{currency:ke,issuer:s.issuer_address,value:Kx(ct)},SendMax:Ve.xrpToDrops(_p(gt).toString()),Flags:131072};try{const Ot={command:"ripple_path_find",source_account:h.address,destination_account:h.address,destination_amount:{currency:ke,issuer:s.issuer_address,value:Kx(ct)},source_currencies:[{currency:"XRP"}]},Vt=await ge.request(Ot);if(Vt.result.alternatives&&Vt.result.alternatives.length>0){const jr=Vt.result.alternatives[0];jr.paths_computed&&jr.paths_computed.length>0&&(qe.Paths=jr.paths_computed,console.log("✓ Using AMM path for swap"))}}catch(Ot){console.warn("Path finding warning (will use auto-path):",Ot.message)}}else{const ct=parseFloat(_e.tokenAmount),gt=parseFloat(_e.xrpAmount)*(1-parseFloat(z)/100);qe={TransactionType:"Payment",Account:h.address,Destination:h.address,Amount:Ve.xrpToDrops(_p(parseFloat(_e.xrpAmount)).toString()),SendMax:{currency:ke,issuer:s.issuer_address,value:Kx(ct*Ge)},DeliverMin:Ve.xrpToDrops(_p(gt).toString()),Flags:131072};try{const Ot={command:"ripple_path_find",source_account:h.address,destination_account:h.address,destination_amount:Ve.xrpToDrops(_p(parseFloat(_e.xrpAmount)).toString()),source_currencies:[{currency:ke,issuer:s.issuer_address}]},Vt=await ge.request(Ot);if(Vt.result.alternatives&&Vt.result.alternatives.length>0){const jr=Vt.result.alternatives[0];jr.paths_computed&&jr.paths_computed.length>0&&(qe.Paths=jr.paths_computed,console.log("✓ Using AMM path for swap"))}}catch(Ot){console.warn("Path finding warning (will use auto-path):",Ot.message)}}console.log(`
💱 ${a.toUpperCase()} Swap:`),console.log(`   ${a==="buy"?"Spending":"Receiving"}: ${_e.xrpAmount} XRP`),console.log(`   ${a==="buy"?"Receiving":"Spending"}: ${_e.tokenAmount} ${s.token_name}`),console.log(`   Slippage: ${z}%`),console.log("   Payment:",JSON.stringify(qe,null,2));const Ie=await ge.autofill(qe),ft=Re.sign(Ie),mt=await ge.submitAndWait(ft.tx_blob,{timeout:45e3});if(mt.result.meta.TransactionResult==="tesSUCCESS"){let ct;a==="buy"&&mt.result.meta.delivered_amount&&typeof mt.result.meta.delivered_amount=="object"&&mt.result.meta.delivered_amount.value?ct=parseFloat(mt.result.meta.delivered_amount.value):ct=parseFloat(_e.tokenAmount);const gt=mt.result.hash;at(gt),Bt(0);const Ot=await lu(ge,Re),Vt={hash:gt,type:a,tokenAmount:ct.toFixed(4),xrpAmount:_e.xrpAmount,tokenName:s.token_name,timestamp:new Date().toISOString(),fee:(parseFloat(mt.result.Fee)/1e6).toFixed(6),platformFee:Ot.fee,platformFeeTx:Ot.hash};Gt(Vt),hi(1,"success",{description:`${a==="buy"?"Bought":"Sold"} ${ct.toFixed(4)} ${s.token_name}`,txHash:gt}),await $r({userAddress:h.address,actionType:Ur.SWAP_EXECUTED,description:`${a==="buy"?"Bought":"Sold"} ${ct.toFixed(4)} ${s.token_name}`,details:{tradeType:a,tokenAmount:ct.toFixed(4),xrpAmount:_e.xrpAmount,txDetails:Vt},txHash:gt,tokenId:s.id});const jr={token_id:s.id,trader_address:h.address,trade_type:a,token_amount:ct,xrp_amount:parseFloat(_e.xrpAmount),price:he,tx_hash:gt,slippage:parseFloat(z),platform_fee:Ot.waived?0:Ot.fee};console.log("Inserting trade record:",jr);const{data:Lr,error:ds}=await le.from("trade_history").insert([jr]).select();ds?console.error("Error saving trade to history:",ds):console.log("Trade saved successfully:",Lr),hi(2,"success",{description:"Trade completed successfully"}),k(3),await kr(),setTimeout(()=>{P(!1),c(""),u(""),w(!1)},2500),ie.success(Is=>n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("div",{className:"font-semibold",children:"Trade Successful!"}),n.jsxs("div",{className:"text-sm",children:[a==="buy"?"Bought":"Sold"," ",ct.toFixed(4)," ",s.token_name]}),n.jsx("div",{className:"text-xs",children:n.jsx(Pi,{type:"tx",value:gt,network:"mainnet"})})]}),{duration:8e3,style:{background:"#065f46",color:"#d1fae5",border:"1px solid #10b981"}})}else throw new Error(`Transaction failed: ${mt.result.meta.TransactionResult}`);ge&&ge.isConnected()&&await ge.disconnect()}catch(Re){console.error("Error executing trade:",Re);let ke=Re.message||"Unknown error occurred";if(ke.includes("xrpToDrops")||ke.includes("decimal")||ke.includes("precision")||ke.includes("Decimal precision out of range"))ke="Amount precision error. Use round numbers (e.g., 1.50 instead of 1.5678).";else if(ke.includes("too small")||ke.includes("too large"))ke=ke;else if(ke.includes("Invalid XRP amount")||ke.includes("Invalid token amount"))ke="Invalid amount entered. Please check your trade amounts.";else if(ke.includes("tecPATH_DRY"))ke="Insufficient liquidity in the pool. Try a smaller amount or increase slippage.";else if(ke.includes("tecUNFUNDED_PAYMENT"))ke="Insufficient funds for this transaction. Check your balance.";else if(ke.includes("tecUNFUNDED"))ke="Insufficient XRP balance for this transaction and fees.";else if(ke.includes("tecNO_LINE"))ke="Trustline not found. Please set up trustline first.";else if(ke.includes("tecPATH_PARTIAL")){const qe=parseFloat(z),Ie=We(),ft=parseFloat(Ie.priceImpact);let mt=Math.min(qe*2.5,50);if(ft>10?mt=Math.min(Math.max(20,ft*2),50):ft>5?mt=Math.min(Math.max(15,ft*1.8),50):ft>2&&(mt=Math.min(Math.max(10,ft*1.5),50)),os<2){lr(!0),Bt(ct=>ct+1),O(mt.toFixed(1)),ie.info(ct=>n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("div",{className:"font-semibold",children:"Slippage Too Low"}),n.jsxs("div",{className:"text-sm",children:["Automatically retrying with ",mt.toFixed(1),"% slippage..."]}),n.jsxs("div",{className:"text-xs opacity-75",children:["Attempt ",os+1," of 2"]})]}),{duration:3e3}),setTimeout(()=>{lr(!1),Xi()},1500);return}else oe({currentSlippage:qe,suggestedSlippage:mt,tradeType:a.charAt(0).toUpperCase()+a.slice(1),amount:l,tokenName:s.token_name}),te(!0),Ee(!1),Be(!1),De(null),J(!1),Bt(0),ke=`Slippage too low. Suggested: ${mt.toFixed(1)}%. Click retry to try again.`}else ke.includes("tecNO_AUTH")?ke="Token issuer requires authorization. Cannot trade this token.":ke.includes("temREDUNDANT")?ke="Transaction expired. Please try again.":ke.includes("LastLedgerSequence")?ke="Transaction took too long to process. Please try again.":ke.includes("timeout")||ke.includes("Connection timeout")?ke="Connection timeout. Please check your internet and try again.":ke.includes("Failed to fetch")?ke="Network error. Please check your connection and try again.":ke.includes("WebSocket")&&(ke="Connection to XRPL failed. Please try again.");const Ge=Math.min(se,pe.length-1);hi(Ge,"error",{error:ke}),Dt||(console.error("❌ Trade Failed:",ke),console.error("   Full error:",Re),ie.error(qe=>n.jsxs("div",{className:"flex items-start gap-3 max-w-md",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-semibold mb-1",children:"Trade Failed"}),n.jsx("div",{className:"text-sm opacity-90",children:ke}),Re.stack&&n.jsx("div",{className:"text-xs opacity-70 mt-2 font-mono",children:Re.message})]}),n.jsx("button",{onClick:()=>ie.dismiss(qe.id),className:"flex-shrink-0 ml-2 text-white/70 hover:text-white transition-colors",children:"✕"})]}),{duration:1e4,style:{background:"#991b1b",color:"#fef2f2",border:"1px solid #dc2626",maxWidth:"500px"}}))}finally{if(w(!1),ge&&ge.isConnected())try{await ge.disconnect()}catch(Re){console.error("Error disconnecting client:",Re)}}},bl=async()=>{X&&(J(!0),O(X.suggestedSlippage.toString()),setTimeout(async()=>{try{await Xi(),Ee(!0),Be(!0)}catch(_e){Ee(!0),Be(!1),De(_e.message||"Trade failed. Please try again.")}finally{J(!1)}},3e3))},bh=()=>{te(!1),oe(null),J(!1),Ee(!1),Be(!1),De(null)},wl=()=>{te(!1),oe(null),J(!1),Ee(!1),Be(!1),De(null),P(!1),c(""),u("")},_l=async()=>{if(s){we(!0),N(!0);try{const _e=new Ve.Client("wss://s1.ripple.com");await _e.connect();const ue=Date.now()-24*60*60*1e3,ge=Math.floor(ue/1e3)-946684800,ke=(await _e.request({command:"account_tx",account:s.issuer_address,ledger_index_min:-1,ledger_index_max:-1,limit:200})).result.transactions.filter(Ge=>Ge.tx.date>=ge).filter(Ge=>{const qe=Ge.tx.TransactionType;return["Payment","AMMDeposit","AMMWithdraw"].includes(qe)}).map(Ge=>({...Ge.tx,meta:Ge.meta,hash:Ge.tx.hash})).sort((Ge,qe)=>qe.date-Ge.date);Y(ke),await _e.disconnect()}catch(_e){console.error("Error fetching pool history:",_e),ie.error("Failed to load transaction history"),Y([])}finally{we(!1)}}};T.useEffect(()=>{L&&s&&E.length===0&&_l()},[L]);const Zr=We(),sr=he>0?he:s?zr(s):0,Nl=s?Bn(s):0,Sl=H||(s&&s.amm_xrp_amount?((sr-s.amm_xrp_amount/s.amm_asset_amount*.95)/(s.amm_xrp_amount/s.amm_asset_amount*.95)*100).toFixed(2):"0.00");return s&&Et.Buffer.from(s.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-purple-200",children:"Trade"}),n.jsx("p",{className:"text-purple-400 text-sm",children:"Buy and sell meme tokens"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>zt(!0),className:"btn-primary text-white px-4 py-2 rounded-lg font-medium text-sm flex items-center gap-2 hover:scale-105 transition-transform",children:"🤖 AI Chat"}),s&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>N(!0),className:"btn-primary text-white px-4 py-2 rounded-lg font-medium text-sm",children:"📊 History"}),n.jsx("a",{href:`https://xmagnetic.org/dex/${s.currency_code}+${s.issuer_address}_XRP+XRP?network=mainnet`,target:"_blank",rel:"noopener noreferrer",className:"btn-primary text-white px-4 py-2 rounded-lg font-medium text-sm",children:"Magnetic DEX →"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:h-[calc(100vh-12rem)]",children:[n.jsxs("div",{className:"lg:col-span-2 flex flex-col space-y-4",children:[n.jsxs("div",{className:"glass rounded-lg p-4 overflow-hidden",children:[s&&n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mb-2",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ht,{token:s,size:"3xl"}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-base font-bold text-purple-200",children:[s.token_name,"/XRP"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"text-base sm:text-lg font-bold text-purple-200 font-mono",children:[pr.current.length>0?(pr.current[pr.current.length-1].close||pr.current[pr.current.length-1].value||sr).toFixed(8):sr.toFixed(8)," XRP"]}),n.jsxs("span",{className:`text-xs font-medium px-1.5 py-0.5 rounded whitespace-nowrap ${parseFloat(Sl)>=0?"text-green-300 bg-green-500/10":"text-red-300 bg-red-500/10"}`,children:[parseFloat(Sl)>=0?"+":"",Sl,"%"]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsxs("select",{value:me,onChange:_e=>ye(_e.target.value),className:"input px-2 py-1 text-xs text-purple-200",children:[n.jsx("option",{value:"5m",children:"5m"}),n.jsx("option",{value:"15m",children:"15m"}),n.jsx("option",{value:"30m",children:"30m"}),n.jsx("option",{value:"1h",children:"1h"}),n.jsx("option",{value:"4h",children:"4h"}),n.jsx("option",{value:"1d",children:"1D"})]}),n.jsxs("select",{value:q,onChange:_e=>de(_e.target.value),className:"input px-2 py-1 text-xs text-purple-200",children:[n.jsx("option",{value:"candlestick",children:"🕯 Candles"}),n.jsx("option",{value:"bars",children:"📊 Bars"}),n.jsx("option",{value:"hollow",children:"⬜ Hollow"}),n.jsx("option",{value:"heikin",children:"🎴 Heikin Ashi"}),n.jsx("option",{value:"line",children:"📈 Line"}),n.jsx("option",{value:"area",children:"📉 Area"}),n.jsx("option",{value:"baseline",children:"📏 Baseline"})]}),n.jsx("button",{onClick:async()=>{await Ft(!0),s&&await loadChartData()},disabled:K,className:"btn-secondary px-2 py-1 text-xs disabled:opacity-50",title:"Refresh price and chart",children:K?"⏳":"🔄"})]})]}),s?n.jsxs(n.Fragment,{children:[n.jsx("div",{ref:rt,className:"w-full h-[300px] sm:h-[400px] lg:h-[500px] overflow-hidden bg-purple-900/20 rounded"}),n.jsx("div",{ref:tt,className:"w-full h-[80px] sm:h-[100px] lg:h-[120px] overflow-hidden bg-purple-900/20 rounded mt-1"})]}):n.jsx("div",{className:"w-full h-[380px] sm:h-[500px] lg:h-[620px] flex items-center justify-center bg-purple-900/20 rounded",children:n.jsxs("div",{className:"text-center text-purple-400",children:[n.jsx("div",{className:"text-4xl mb-2",children:"📊"}),n.jsx("p",{children:"Select a token to view chart"})]})})]}),n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[n.jsxs("div",{className:"glass rounded-lg p-2",children:[n.jsx("div",{className:"text-purple-400 text-xs",children:"Market Cap"}),n.jsxs("div",{className:"text-sm font-bold text-purple-200",children:[G?G.marketCap.toFixed(2):Nl.toFixed(2)," XRP"]}),ze>0&&n.jsxs("div",{className:"text-xs text-purple-400",children:["$",ze>=1e6?`${(ze/1e6).toFixed(2)}M`:ze>=1e3?`${(ze/1e3).toFixed(2)}K`:ze.toFixed(2)]})]}),n.jsxs("div",{className:"glass rounded-lg p-2",children:[n.jsx("div",{className:"text-purple-400 text-xs",children:"Liquidity"}),n.jsxs("div",{className:"text-sm font-bold text-purple-200",children:[G?G.liquidity.toFixed(2):s?s.amm_xrp_amount.toFixed(2):0," XRP"]})]}),n.jsxs("div",{className:"glass rounded-lg p-2",children:[n.jsx("div",{className:"text-purple-400 text-xs",children:"Volume 24h"}),n.jsxs("div",{className:"text-sm font-bold text-purple-200",children:[G?G.volume24h.toFixed(2):s?(s.amm_xrp_amount*.15).toFixed(2):0," XRP"]})]}),n.jsxs("div",{className:"glass rounded-lg p-2",children:[n.jsx("div",{className:"text-purple-400 text-xs",children:"Pool Size"}),n.jsxs("div",{className:"text-sm font-bold text-purple-200",children:[G?(G.poolSize/1e3).toFixed(0):s?(s.amm_asset_amount/1e3).toFixed(0):0,"K"]})]})]}),n.jsxs("div",{className:"glass rounded-lg p-2",children:[n.jsx("h3",{className:"text-sm font-bold text-purple-200 mb-2",children:"Token Info"}),n.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-purple-400 text-[10px]",children:"Supply"}),n.jsxs("span",{className:"text-purple-200 font-bold text-[11px]",children:[s?(s.supply/1e9).toFixed(1):0,"B"]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-purple-400 text-[10px]",children:"Circulating"}),n.jsxs("span",{className:"text-purple-200 font-bold text-[11px]",children:[s?(s.supply*.9/1e9).toFixed(1):0,"B"]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-purple-400 text-[10px]",children:"Price"}),n.jsx("span",{className:"text-purple-200 font-bold text-[11px]",children:s?sr.toFixed(8):0})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-purple-400 text-[10px]",children:"Liquidity"}),n.jsx("span",{className:"text-purple-200 font-bold text-[11px]",children:G?G.liquidity.toFixed(0):s?s.amm_xrp_amount.toFixed(0):0})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 pt-2 border-t border-purple-500/20",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-purple-400 text-[10px]",children:"Currency Code"}),n.jsx("div",{className:"text-purple-300 text-[10px] font-mono bg-black/30 px-1 py-0.5 rounded",children:s?s.currency_code:""})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-purple-400 text-[10px]",children:"Issuer"}),n.jsx("div",{className:"text-purple-300 text-[10px] font-mono bg-black/30 px-1 py-0.5 rounded truncate",children:s?`${s.issuer_address.slice(0,8)}...`:""})]})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[!h&&n.jsx("div",{className:"glass rounded-lg p-4 bg-yellow-500/10 border border-yellow-500/30",children:n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("div",{className:"text-3xl",children:"⚠️"}),n.jsx("h3",{className:"text-sm font-bold text-yellow-200",children:"Wallet Not Connected"}),n.jsx("p",{className:"text-yellow-300 text-xs",children:"Connect wallet from Setup"})]})}),n.jsxs("div",{className:"glass rounded-lg p-4",children:[n.jsxs("div",{className:"flex gap-2 mb-4",children:[n.jsx("button",{onClick:()=>xt("select"),className:`flex-1 py-2 px-4 rounded-lg font-medium transition-all ${cr==="select"?"bg-purple-600 text-white":"bg-purple-900/30 text-purple-300 hover:bg-purple-900/50"}`,children:"Select Token"}),n.jsx("button",{onClick:()=>xt("history"),className:`flex-1 py-2 px-4 rounded-lg font-medium transition-all ${cr==="history"?"bg-purple-600 text-white":"bg-purple-900/30 text-purple-300 hover:bg-purple-900/50"}`,children:"Trade History"})]}),cr==="select"?n.jsx(n.Fragment,{children:n.jsxs("select",{value:(s==null?void 0:s.id)||"",onChange:_e=>{const C=e.find(ue=>ue.id===_e.target.value);i(C)},className:"input w-full mb-3 text-purple-200",children:[n.jsx("option",{value:"",children:"Choose a token..."}),e.map(_e=>n.jsxs("option",{value:_e.id,children:[_e.token_name," - ",zr(_e).toFixed(8)," XRP"]},_e.id))]})}):n.jsx("div",{className:"min-h-[200px]",children:s?n.jsx(i4,{tokenId:s.id,connectedWallet:h}):n.jsxs("div",{className:"text-center py-8 text-purple-400",children:[n.jsx("div",{className:"text-4xl mb-2",children:"📊"}),n.jsx("div",{children:"Select a token to view trade history"})]})}),s&&n.jsx("div",{className:"glass rounded-lg p-3 bg-blue-500/10 border border-blue-500/30 mb-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-blue-400 text-xs",children:"Trading Pair"}),n.jsxs("div",{className:"text-blue-200 font-bold",children:[s.currency_code,"/XRP"]})]})}),s&&h&&n.jsxs("div",{className:"mt-3 space-y-2",children:[n.jsxs("div",{className:"glass rounded-lg p-3 bg-purple-500/10 border border-purple-500/30",children:[n.jsx("div",{className:"text-purple-300 text-xs mb-1",children:"Your Balance"}),n.jsx("div",{className:"text-lg font-bold text-purple-200",children:Q?n.jsx("span",{className:"animate-pulse",children:"Loading..."}):`${parseFloat(S).toFixed(4)} ${s.token_name}`})]}),v?n.jsx("div",{className:"glass rounded-lg p-4 text-center",children:n.jsx("div",{className:"text-purple-300 animate-pulse",children:"Checking trustline..."})}):f?n.jsx("div",{className:"glass rounded-lg p-4 bg-green-500/10 border border-green-500/30",children:n.jsxs("div",{className:"flex items-center gap-2 justify-center text-green-300",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),n.jsx("span",{className:"text-sm font-medium",children:"Trustline Active"})]})}):n.jsx("button",{onClick:qs,disabled:b,className:"w-full btn-primary text-white py-3 rounded-lg font-medium disabled:opacity-50",children:b?"Setting up Trustline...":"✓ Setup Trustline"})]})]}),n.jsxs("div",{className:"glass rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>Me(!1),className:`px-4 py-2 rounded-lg font-medium transition-all ${Pe?"glass text-purple-300 hover:bg-purple-900/50":"bg-purple-600 text-white"}`,children:"Trade"}),n.jsx("button",{onClick:()=>Me(!0),className:`px-4 py-2 rounded-lg font-medium transition-all ${Pe?"bg-purple-600 text-white":"glass text-purple-300 hover:bg-purple-900/50"}`,children:"My Position"})]}),!Pe&&n.jsxs("select",{value:V,onChange:_e=>ne(_e.target.value),className:"input px-3 py-1.5 text-sm text-purple-200 bg-purple-900/50 border-purple-500/30",children:[n.jsx("option",{value:"amm",children:"AMM Pool"}),n.jsx("option",{value:"market",children:"Market"})]})]}),Pe?n.jsx("div",{className:"space-y-4",children:ve?n.jsx("div",{className:"text-center py-8 text-purple-400",children:"Loading position..."}):h?pt?n.jsx(n.Fragment,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-purple-500/20",children:[n.jsxs("div",{className:"flex items-center gap-2 text-purple-400",children:[n.jsx("span",{className:"text-2xl",children:"✕"}),n.jsx("span",{children:"XRP"})]}),n.jsx("span",{className:"text-purple-200 font-bold text-lg",children:pt.xrp})]}),n.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-purple-500/20",children:[n.jsxs("div",{className:"flex items-center gap-2 text-purple-400",children:[n.jsx(Ht,{token:s,size:"sm"}),n.jsx("span",{children:s.token_name})]}),n.jsx("span",{className:"text-purple-200 font-bold text-lg",children:pt.tokens})]}),n.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-purple-500/20",children:[n.jsxs("div",{className:"flex items-center gap-2 text-purple-400",children:[n.jsx("span",{className:"text-2xl",children:"🔗"}),n.jsxs("span",{children:["LP_",s.currency_code,"_XRP"]})]}),n.jsx("span",{className:"text-purple-200 font-bold text-lg",children:pt.lpTokens})]})]}),n.jsxs("div",{className:"glass rounded-lg p-4 space-y-3",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-purple-400",children:"Pool Share"}),n.jsxs("span",{className:"text-purple-200 font-bold",children:[pt.sharePercentage,"%"]})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-purple-400",children:"Position Value"}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-purple-200 font-bold",children:[pt.estimatedValue," XRP"]}),n.jsxs("div",{className:"text-xs text-green-400",children:["$",(parseFloat(pt.estimatedValue)*Ne).toFixed(2)]})]})]}),n.jsxs("div",{className:"pt-2 border-t border-purple-500/20",children:[n.jsxs("div",{className:"flex justify-between text-xs",children:[n.jsx("span",{className:"text-purple-400",children:"XRP Value"}),n.jsxs("span",{className:"text-purple-300",children:["$",(parseFloat(pt.xrp)*Ne).toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[n.jsxs("span",{className:"text-purple-400",children:[s.token_name," Value"]}),n.jsxs("span",{className:"text-purple-300",children:["$",(parseFloat(pt.tokens)*sr*Ne).toFixed(2)]})]})]})]}),n.jsxs("div",{className:"space-y-3 mt-6 pt-6 border-t border-purple-500/20",children:[n.jsx("h4",{className:"font-bold text-purple-200 mb-3",children:"Deposit to Pool"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:"Deposit Mode"}),n.jsxs("select",{value:Ye,onChange:_e=>{Nt(_e.target.value),_e.target.value==="xrp"&&Je(""),_e.target.value==="token"&&je("")},className:"input w-full text-purple-200",children:[n.jsx("option",{value:"both",children:"Both Assets"}),n.jsx("option",{value:"xrp",children:"XRP Only"}),n.jsxs("option",{value:"token",children:[s.token_name," Only"]})]})]}),(Ye==="both"||Ye==="xrp")&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:"XRP Amount"}),n.jsx("input",{type:"number",value:D,onChange:_e=>{if(je(_e.target.value),Ye==="both"&&_e.target.value&&sr){const C=(parseFloat(_e.target.value)/sr).toFixed(6);Je(C)}},placeholder:"0.00",step:"0.000001",className:"input w-full text-purple-200 text-lg"}),n.jsxs("div",{className:"flex justify-between text-xs text-purple-400 mt-1",children:[n.jsxs("div",{children:["Balance: ",A.toFixed(4)," XRP"]}),n.jsxs("div",{className:"text-green-400",children:["$",(A*Ne).toFixed(2)," USD"]})]}),Ye==="xrp"&&D&&sr&&n.jsxs("div",{className:"text-xs text-purple-300 mt-1",children:["≈ ",(parseFloat(D)/sr).toFixed(4)," ",s.token_name," equivalent"]})]}),(Ye==="both"||Ye==="token")&&n.jsxs("div",{children:[n.jsxs("label",{className:"block text-purple-300 mb-2",children:[s.token_name," Amount"]}),n.jsx("input",{type:"number",value:Ue,onChange:_e=>{if(Je(_e.target.value),Ye==="both"&&_e.target.value&&sr){const C=(parseFloat(_e.target.value)*sr).toFixed(6);je(C)}},placeholder:"0.00",step:"0.000001",className:"input w-full text-purple-200 text-lg"}),n.jsxs("div",{className:"flex justify-between text-xs text-purple-400 mt-1",children:[n.jsxs("div",{children:["Balance: ",parseFloat(S).toFixed(4)," ",s.token_name]}),n.jsxs("div",{className:"text-green-400",children:["≈ ",(parseFloat(S)*sr).toFixed(4)," XRP"]})]}),Ye==="token"&&Ue&&sr&&n.jsxs("div",{className:"text-xs text-purple-300 mt-1",children:["≈ ",(parseFloat(Ue)*sr).toFixed(4)," XRP equivalent"]})]}),n.jsx("button",{onClick:vh,disabled:dt||Ye==="both"&&(!D||!Ue||parseFloat(D)<=0||parseFloat(Ue)<=0)||Ye==="xrp"&&(!D||parseFloat(D)<=0)||Ye==="token"&&(!Ue||parseFloat(Ue)<=0),className:"w-full py-4 rounded-lg font-bold text-lg bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:dt?"Depositing...":"💰 Deposit to Pool"})]}),n.jsxs("div",{className:"space-y-3 mt-6 pt-6 border-t border-purple-500/20",children:[n.jsx("h4",{className:"font-bold text-purple-200 mb-3",children:"Withdraw"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:"Amount to Withdraw"}),n.jsx("input",{type:"number",value:it,onChange:_e=>$e(_e.target.value),placeholder:"0.00",max:pt.lpTokens,step:"0.000001",className:"input w-full text-purple-200 text-lg"}),n.jsxs("div",{className:"flex justify-between text-xs text-purple-400 mt-1",children:[n.jsx("span",{children:"LP Tokens to withdraw"}),n.jsx("button",{onClick:()=>$e(pt.lpTokens),className:"text-purple-300 hover:text-purple-200 font-medium",children:"MAX"})]})]}),it&&parseFloat(it)>0&&Os()&&n.jsxs("div",{className:"glass rounded-lg p-4 space-y-3",children:[n.jsx("h5",{className:"font-medium text-purple-200 mb-2",children:"Withdraw Estimate"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-purple-400",children:"XRP"}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-purple-200 font-bold",children:Os().xrpToReceive}),n.jsxs("div",{className:"text-xs text-purple-400",children:["$",(parseFloat(Os().xrpToReceive)*Ne).toFixed(2)]})]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-purple-400",children:s.token_name}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-purple-200 font-bold",children:Os().tokensToReceive}),n.jsxs("div",{className:"text-xs text-purple-400",children:[Os().tokenValueInXrp," XRP"]})]})]})]}),n.jsxs("div",{className:"pt-2 border-t border-purple-500/20 space-y-1",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-purple-400",children:"Total Value"}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-purple-200 font-bold",children:[Os().totalValueInXrp," XRP"]}),n.jsxs("div",{className:"text-xs text-green-400",children:["$",Os().totalValueInUsd]})]})]}),n.jsxs("div",{className:"flex justify-between text-xs",children:[n.jsx("span",{className:"text-purple-400",children:"Platform Fee"}),n.jsxs("span",{className:"text-red-300",children:[Os().platformFee," XRP"]})]}),n.jsxs("div",{className:"flex justify-between text-xs",children:[n.jsx("span",{className:"text-purple-400",children:"Network Fee"}),n.jsxs("span",{className:"text-purple-300",children:[Os().networkFee," XRP"]})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:"Withdrawn asset"}),n.jsxs("select",{value:Fe,onChange:_e=>Ke(_e.target.value),className:"input w-full text-purple-200",children:[n.jsx("option",{value:"both",children:"Both Assets"}),n.jsx("option",{value:"xrp",children:"XRP Only"}),n.jsxs("option",{value:"token",children:[s.token_name," Only"]})]}),n.jsxs("div",{className:"text-xs text-purple-400 mt-1",children:[Fe==="both"&&`Withdrawing both XRP and ${s.token_name}`,Fe==="xrp"&&"Withdrawing XRP only",Fe==="token"&&`Withdrawing ${s.token_name} only`]})]}),n.jsx("button",{onClick:qm,disabled:!it||parseFloat(it)<=0||lt||parseFloat(it)>parseFloat(pt.lpTokens),className:"w-full py-4 rounded-lg font-bold text-lg bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:lt?"Withdrawing...":"Withdraw from Pool"})]})]})}):n.jsx("div",{className:"text-center py-8 text-purple-400",children:"No LP position found for this pool"}):n.jsx("div",{className:"text-center py-8 text-purple-400",children:"Connect wallet to view your position"})}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex gap-2 mb-3",children:[n.jsx("button",{onClick:()=>o("buy"),className:`flex-1 py-3 rounded-lg font-medium transition-all ${a==="buy"?"bg-green-600 text-white":"glass text-purple-300"}`,children:"Buy"}),n.jsx("button",{onClick:()=>o("sell"),className:`flex-1 py-3 rounded-lg font-medium transition-all ${a==="sell"?"bg-red-600 text-white":"glass text-purple-300"}`,children:"Sell"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:a==="buy"?"XRP Amount":"Token Amount"}),n.jsx("input",{type:"number",value:l,onChange:_e=>{const C=_e.target.value;c(C)},placeholder:"0.00",step:"0.000001",className:"input w-full text-purple-200 text-lg"}),n.jsx("div",{className:"flex items-center justify-between mt-2",children:n.jsx("div",{className:"text-purple-400 text-xs",children:a==="buy"?n.jsxs("div",{children:[n.jsxs("div",{children:["Balance: ",A.toFixed(4)," XRP"]}),n.jsxs("div",{className:"text-green-400",children:["$",(A*Ne).toFixed(2)," USD"]})]}):n.jsxs("div",{children:[n.jsxs("div",{children:["Balance: ",parseFloat(S).toFixed(4)," ",(s==null?void 0:s.token_name)||""]}),n.jsxs("div",{className:"text-green-400",children:["≈ ",(parseFloat(S)*sr).toFixed(4)," XRP ($",(parseFloat(S)*sr*Ne).toFixed(2)," USD)"]})]})})}),n.jsx("div",{className:"grid grid-cols-4 gap-2 mt-2",children:["25","50","75","100"].map(_e=>n.jsx("button",{onClick:()=>{const C=a==="buy"?A:parseFloat(S),ue=parseFloat(_e)/100;let ge=C*ue;a==="buy"&&(ge=Math.max(0,ge-2)),c(ge>0?ge.toFixed(6):"0")},className:"py-1.5 rounded-lg text-xs font-medium glass text-purple-300 hover:bg-purple-600 hover:text-white transition-all",children:_e==="100"?"MAX":`${_e}%`},_e))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:"Slippage Tolerance"}),n.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[["0.1","0.5","1","3"].map(_e=>n.jsxs("button",{onClick:()=>O(_e),className:`py-2 rounded-lg text-sm font-medium transition-all ${z===_e?"bg-purple-600 text-white":"glass text-purple-300 hover:bg-purple-900/30"}`,children:[_e,"%"]},_e)),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",value:z,onChange:_e=>O(_e.target.value),placeholder:"0.5",className:"input w-full px-2 py-2 text-sm text-purple-200 text-center",step:"0.1",min:"0.1",max:"50"}),n.jsx("div",{className:"absolute inset-y-0 right-2 flex items-center pointer-events-none text-purple-400 text-xs",children:"%"})]})]}),n.jsxs("div",{className:"text-purple-400 text-xs mt-1",children:["Trade will revert if price changes by more than ",z,"%"]}),$&&n.jsxs("div",{className:"mt-2 p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:[n.jsx("p",{className:"text-yellow-400 text-sm",children:$}),n.jsx("button",{onClick:()=>{const _e=We();if(_e){const C=parseFloat(_e.priceImpact);let ue=.5;C>10?ue=Math.max(15,C*1.5):C>5?ue=Math.max(10,C*1.3):C>2?ue=Math.max(5,C*1.2):C>1?ue=3:C>.5&&(ue=1),O(ue.toFixed(1))}},className:"mt-2 text-xs px-3 py-1 bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-300 rounded-lg transition-colors",children:"Use Recommended Slippage"})]})]}),l&&!isNaN(l)&&parseFloat(l)>0&&n.jsxs("div",{className:"glass rounded-lg p-4 space-y-3",children:[n.jsx("h4",{className:"font-bold text-purple-200",children:"Estimate"}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{className:"text-purple-400 text-sm",children:["You ",a==="buy"?"Receive":"Get"]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-purple-200 font-bold",children:a==="buy"?`${Zr.tokenAmount} ${(s==null?void 0:s.token_name)||""}`:`${Zr.xrpAmount} XRP`}),a==="sell"&&n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(parseFloat(Zr.xrpAmount)*Ne).toFixed(2)," USD"]})]})]}),a==="buy"&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-purple-400 text-sm",children:"You Spend"}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-purple-200 font-bold",children:[Zr.xrpAmount," XRP"]}),n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(parseFloat(Zr.xrpAmount)*Ne).toFixed(2)," USD"]})]})]}),a==="sell"&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-purple-400 text-sm",children:"You Sell"}),n.jsx("div",{className:"text-right",children:n.jsxs("div",{className:"text-purple-200 font-bold",children:[Zr.tokenAmount," ",(s==null?void 0:s.token_name)||""]})})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-purple-400 text-sm",children:"Price"}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-purple-200",children:[sr.toFixed(8)," XRP"]}),n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(sr*Ne).toFixed(8)," USD"]})]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-purple-400 text-sm",children:"Price Impact"}),n.jsxs("span",{className:`font-medium ${parseFloat(Zr.priceImpact)>5?"text-red-400":"text-green-400"}`,children:[Zr.priceImpact,"%"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-purple-400 text-sm",children:"Trading Fee"}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-purple-200",children:[Zr.fee," XRP"]}),n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(parseFloat(Zr.fee)*Ne).toFixed(2)," USD"]})]})]}),parseFloat(Zr.priceImpact)>10&&n.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded p-3 text-yellow-200 text-xs",children:"⚠️ High price impact! Consider reducing trade size."})]}),n.jsx("button",{onClick:Xi,disabled:!h||!f||!l||isNaN(l)||parseFloat(l)<=0||g,className:`w-full py-4 rounded-lg font-bold text-lg transition-all ${a==="buy"?"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800":"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800"} text-white shadow-lg disabled:opacity-50 disabled:cursor-not-allowed`,children:g?"Processing...":h?f?`${a==="buy"?"💚 Buy":"❤️ Sell"} ${(s==null?void 0:s.currency_code)||"Token"}`:"Setup Trustline First":"Connect Wallet First"}),wt&&n.jsxs("div",{className:"glass rounded-lg p-4 space-y-3 mt-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h4",{className:"font-bold text-purple-200",children:"Last Transaction"}),n.jsx("span",{className:"text-xs text-purple-400",children:new Date(wt.timestamp).toLocaleTimeString()})]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-purple-400",children:"Type"}),n.jsx("span",{className:`font-medium ${wt.type==="buy"?"text-green-400":"text-red-400"}`,children:wt.type==="buy"?"📈 Buy":"📉 Sell"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-purple-400",children:"Amount"}),n.jsxs("span",{className:"text-purple-200 font-medium",children:[wt.tokenAmount," ",wt.tokenName]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-purple-400",children:"Cost"}),n.jsxs("span",{className:"text-purple-200 font-medium",children:[wt.xrpAmount," XRP"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-purple-400",children:"Network Fee"}),n.jsxs("span",{className:"text-purple-200 font-medium",children:[wt.fee," XRP"]})]}),n.jsx("div",{className:"pt-2 border-t border-purple-500/20",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-purple-400",children:"Transaction"}),n.jsx(Pi,{type:"tx",value:wt.hash,network:"mainnet"})]})})]})]})]})]})]})]})]}),n.jsx(n4,{isOpen:j,steps:pe,currentStep:se,onClose:()=>P(!1),canClose:se>=pe.length||pe.some(_e=>_e.error),title:a==="buy"?"💰 Buying Token on XRPL":"💸 Selling Token on XRPL",successTitle:a==="buy"?"🎉 Purchase Successful!":"🎉 Sale Successful!",failTitle:a==="buy"?"❌ Purchase Failed":"❌ Sale Failed"}),X&&n.jsx(V7,{isOpen:W,currentSlippage:X.currentSlippage,suggestedSlippage:X.suggestedSlippage,tradeType:X.tradeType,amount:X.amount,tokenName:X.tokenName,onRetry:bl,onCancel:bh,onClose:wl,isRetrying:F,retryComplete:xe,retrySuccess:Te,retryError:nt}),n.jsx(H7,{isOpen:L,onClose:()=>N(!1),token:s,transactions:E,loading:fe}),n.jsx(rq,{isOpen:Tt,onClose:()=>zt(!1)})]})}function nq({bot:t,onClose:e}){const[r,s]=T.useState([]),[i,a]=T.useState(!0);T.useEffect(()=>{o()},[t.id]);const o=async()=>{try{a(!0);const{data:d,error:u}=await le.from("bot_trades").select("*").eq("bot_id",t.id).order("created_at",{ascending:!1}).limit(100);if(u)throw u;s(d||[])}catch(d){console.error("Error loading trades:",d)}finally{a(!1)}},l=d=>d.status==="failed"?"text-red-400":d.trade_type==="BUY"?"text-green-400":d.trade_type==="SELL"?"text-yellow-400":"text-gray-400",c=d=>d.status==="failed"?"❌":d.trade_type==="BUY"?"📈":d.trade_type==="SELL"?"📉":"⚠️";return n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"glass rounded-lg p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-2xl font-bold text-purple-200",children:["Trade History: ",t.name]}),n.jsx("button",{onClick:e,className:"text-purple-400 hover:text-purple-200 text-2xl",children:"✕"})]}),n.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[n.jsxs("div",{className:"glass rounded-lg p-4 bg-purple-500/10",children:[n.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"Total Trades"}),n.jsx("div",{className:"text-2xl font-bold text-purple-200",children:t.total_trades||0})]}),n.jsxs("div",{className:"glass rounded-lg p-4 bg-green-500/10",children:[n.jsx("div",{className:"text-green-400 text-xs mb-1",children:"Successful"}),n.jsx("div",{className:"text-2xl font-bold text-green-400",children:t.successful_trades||0})]}),n.jsxs("div",{className:"glass rounded-lg p-4 bg-red-500/10",children:[n.jsx("div",{className:"text-red-400 text-xs mb-1",children:"Failed"}),n.jsx("div",{className:"text-2xl font-bold text-red-400",children:t.failed_trades||0})]}),n.jsxs("div",{className:"glass rounded-lg p-4 bg-blue-500/10",children:[n.jsx("div",{className:"text-blue-400 text-xs mb-1",children:"Success Rate"}),n.jsxs("div",{className:"text-2xl font-bold text-blue-400",children:[t.total_trades>0?(t.successful_trades/t.total_trades*100).toFixed(1):0,"%"]})]})]}),i?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-4xl mb-4",children:"⏳"}),n.jsx("p",{className:"text-purple-300",children:"Loading trades..."})]}):r.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-6xl mb-4",children:"📊"}),n.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-2",children:"No Trades Yet"}),n.jsx("p",{className:"text-purple-400",children:"This bot hasn't executed any trades yet"})]}):n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"grid grid-cols-7 gap-4 px-4 py-2 text-purple-400 text-sm font-medium border-b border-purple-500/30",children:[n.jsx("div",{children:"Type"}),n.jsx("div",{className:"text-right",children:"Amount"}),n.jsx("div",{className:"text-right",children:"XRP Cost"}),n.jsx("div",{className:"text-right",children:"Price"}),n.jsx("div",{className:"text-right",children:"Status"}),n.jsx("div",{className:"text-right",children:"Time"}),n.jsx("div",{className:"text-center",children:"TX"})]}),r.map(d=>n.jsxs("div",{className:"glass rounded-lg p-4 grid grid-cols-7 gap-4 items-center hover:bg-purple-500/5 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xl",children:c(d)}),n.jsx("span",{className:`font-bold ${l(d)}`,children:d.trade_type})]}),n.jsx("div",{className:"text-right text-purple-200 font-medium",children:parseFloat(d.amount).toFixed(4)}),n.jsxs("div",{className:"text-right text-purple-200 font-medium",children:[parseFloat(d.xrp_cost).toFixed(4)," XRP"]}),n.jsx("div",{className:"text-right text-purple-300 text-sm",children:parseFloat(d.price).toFixed(8)}),n.jsx("div",{className:"text-right",children:n.jsx("span",{className:`px-2 py-1 rounded text-xs ${d.status==="success"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:d.status})}),n.jsx("div",{className:"text-right text-purple-400 text-xs",children:new Date(d.created_at).toLocaleTimeString()}),n.jsx("div",{className:"text-center",children:d.tx_hash?n.jsxs("a",{href:`https://xrpscan.com/tx/${d.tx_hash}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 text-xs underline flex items-center justify-center gap-1",title:"View on XRPScan (Mainnet)",children:[n.jsx("span",{children:"🔍"}),n.jsx("span",{children:"View"})]}):n.jsx("span",{className:"text-gray-500 text-xs",children:"-"})})]},d.id))]}),n.jsx("div",{className:"flex justify-end pt-4 border-t border-purple-500/30",children:n.jsx("button",{onClick:e,className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium",children:"Close"})})]})})}const iq=(t,e=6)=>{const r=parseFloat(t);if(isNaN(r)||r<=0)throw new Error("Invalid amount");const s=Math.pow(10,e);return Math.floor(r*s)/s},Vv=t=>iq(t,6),R2=t=>{const e=parseFloat(t);if(isNaN(e)||e<=0)throw new Error("Invalid token amount");return e.toFixed(6)},vn=t=>parseFloat(t).toFixed(2),O2=(t,e)=>{const r=e-t,s=t+Math.random()*r;return Vv(s)},Wl=5,jd="rphatRpwXcPAo7CVm46dC78JAQ6kLMqb2M",Kn=.1,Np=100,gr={ACCUMULATE:"accumulate",DISTRIBUTE:"distribute",BALANCED:"balanced"};function aq(){const[t,e]=T.useState([]),[r,s]=T.useState({}),[i,a]=T.useState(null),[o,l]=T.useState([]),[c,d]=T.useState(!1),[u,h]=T.useState(!1),[p,f]=T.useState(null),[m,v]=T.useState(null),[x,b]=T.useState({}),[y,g]=T.useState({}),[w,S]=T.useState({}),[_,A]=T.useState("grid"),[B,Q]=T.useState(""),[U,q]=T.useState([]),[de,me]=T.useState("grid"),[ye,G]=T.useState(""),[Z,he]=T.useState([]),[ee,H]=T.useState("name"),[I,K]=T.useState(2.5),[re,z]=T.useState({name:"",tokenId:"",strategy:gr.BALANCED,interval:15,minAmount:.5,maxAmount:2,slippage:10,buyProbability:50}),[O,V]=T.useState(!1),[ne,pe]=T.useState({show:!1,message:""}),[ae,se]=T.useState({}),k=T.useRef({}),j=T.useRef(new Set),P=T.useRef(new Set);T.useEffect(()=>{F(),R(),W(),$()},[]);const $=async()=>{var M;try{const be=await(await fetch("https://api.coingecko.com/api/v3/simple/price?ids=ripple&vs_currencies=usd")).json();K(((M=be.ripple)==null?void 0:M.usd)||2.5)}catch(ve){console.error("Error fetching XRP/USD price:",ve)}};T.useEffect(()=>{t.length>0&&xe()},[t]),T.useEffect(()=>{let M=!0;if(i){Be(),W(),te(),J();const ve=setInterval(()=>{M&&Te()},1e4),be=le.channel("bot_updates").on("postgres_changes",{event:"*",schema:"public",table:"trading_bots",filter:`wallet_address=eq.${i.address}`},Me=>{console.log("Bot update received:",Me),Me.eventType==="UPDATE"||Me.eventType==="INSERT"?l(Se=>Se.find(Ke=>Ke.id===Me.new.id)?Se.map(Ke=>Ke.id===Me.new.id?Me.new:Ke):[...Se,Me.new]):Me.eventType==="DELETE"&&l(Se=>Se.filter(Fe=>Fe.id!==Me.old.id))}).subscribe(),Pe=le.channel("bot_trades_updates").on("postgres_changes",{event:"INSERT",schema:"public",table:"bot_trades"},Me=>{console.log("New bot trade:",Me),Te()}).subscribe();return()=>{M=!1,clearInterval(ve),be.unsubscribe(),Pe.unsubscribe()}}},[i]),T.useEffect(()=>{i&&t.length>0&&J()},[t,i]),T.useEffect(()=>{const M=()=>{R()};return window.addEventListener("walletConnected",M),window.addEventListener("walletDisconnected",M),()=>{window.removeEventListener("walletConnected",M),window.removeEventListener("walletDisconnected",M)}},[]);const R=()=>{const M=localStorage.getItem("connectedWallet");M&&a(JSON.parse(M))},W=async()=>{if(i)try{const{data:M,error:ve}=await le.from("token_favorites").select("token_id").eq("wallet_address",i.address);if(ve)throw ve;q((M==null?void 0:M.map(be=>be.token_id))||[])}catch(M){console.error("Error loading favorites:",M)}},te=()=>{if(i)try{const M=localStorage.getItem(`bot_favorites_${i.address}`);M&&he(JSON.parse(M))}catch(M){console.error("Error loading bot favorites:",M)}},X=M=>{if(!i)return;const ve=Z.includes(M),be=ve?Z.filter(Pe=>Pe!==M):[...Z,M];he(be),localStorage.setItem(`bot_favorites_${i.address}`,JSON.stringify(be)),ie.success(ve?"Removed from favorites":"Added to favorites")},oe=async M=>{if(!i)return;const ve=U.includes(M);try{if(ve){const{error:be}=await le.from("token_favorites").delete().eq("wallet_address",i.address).eq("token_id",M);if(be)throw be;q(Pe=>Pe.filter(Me=>Me!==M)),ie.success("Removed from favorites")}else{const{error:be}=await le.from("token_favorites").insert({wallet_address:i.address,token_id:M});if(be)throw be;q(Pe=>[...Pe,M]),ie.success("Added to favorites")}}catch(be){console.error("Error toggling favorite:",be),ie.error("Failed to update favorites")}},F=async()=>{try{const{data:M,error:ve}=await le.from("meme_tokens").select("*").order("created_at",{ascending:!1});if(ve)throw ve;e(M||[]);const be={};(M||[]).forEach(Pe=>{Pe.current_price&&Pe.current_price>0&&(be[Pe.id]={amm_xrp_amount:Pe.amm_xrp_amount||0,amm_asset_amount:Pe.amm_asset_amount||0,price:Pe.current_price})}),Object.keys(be).length>0&&s(be)}catch(M){console.error("Error loading tokens:",M)}},J=async()=>{if(!(!i||t.length===0))try{const{requestWithRetry:M}=await $t(()=>Promise.resolve().then(()=>tr),void 0),ve=await M({command:"account_lines",account:i.address,ledger_index:"validated"}),be={};t.forEach(Pe=>{const Me=Pe.currency_code.length>3?Et.Buffer.from(Pe.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):Pe.currency_code,Se=ve.result.lines.find(Fe=>{if(Fe.account!==Pe.issuer_address)return!1;const Ke=Fe.currency;return Pe.currency_code.length<=3?Ke===Pe.currency_code:Ke.length===40?Ke===Me:Ke===Pe.currency_code});be[Pe.id]=Se?parseFloat(Se.balance):0}),se(be)}catch(M){console.error("Error fetching token balances:",M)}},xe=async(M=!1)=>{try{const{data:be,error:Pe}=await le.from("pool_data_cache").select("*").gte("last_updated",new Date(Date.now()-3e4).toISOString());if(!M&&be&&be.length>0&&!Pe){const $e={};be.forEach(lt=>{$e[lt.token_id]={amm_xrp_amount:parseFloat(lt.xrp_amount),amm_asset_amount:parseFloat(lt.token_amount),price:parseFloat(lt.price)}}),s($e);return}const Me=t.filter($e=>!r[$e.id]&&!j.current.has($e.id));if(Me.length===0)return;Me.forEach($e=>j.current.add($e.id));const{requestWithRetry:Se}=await $t(()=>Promise.resolve().then(()=>tr),void 0),Fe=Me.map(async $e=>{var lt;try{const Yt=$e.currency_code.length>3?Et.Buffer.from($e.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):$e.currency_code,D=await Se({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:Yt,issuer:$e.issuer_address},ledger_index:"validated"});if((lt=D==null?void 0:D.result)!=null&&lt.amm){const je=D.result.amm,Ue=parseFloat(je.amount)/1e6,Je=parseFloat(je.amount2.value),dt=Ue/Je;return{tokenId:$e.id,poolData:{amm_xrp_amount:Ue,amm_asset_amount:Je,price:dt}}}return{tokenId:$e.id,poolData:null}}catch(Yt){return console.error(`Error fetching pool data for ${$e.token_name}:`,Yt),{tokenId:$e.id,poolData:null}}finally{j.current.delete($e.id)}}),Ke=await Promise.all(Fe),it=Ke.filter(({poolData:$e})=>$e!==null).map(({tokenId:$e,poolData:lt})=>({token_id:$e,xrp_amount:lt.amm_xrp_amount,token_amount:lt.amm_asset_amount,lp_tokens:0,price:lt.price,account_id:"",volume_24h:0,price_change_24h:0,last_updated:new Date().toISOString()}));if(it.length>0){for(const $e of it)await le.from("pool_data_cache").upsert($e,{onConflict:"token_id"});console.log(`💾 Cached ${it.length} pools`)}s($e=>{const lt={...$e};return Ke.forEach(({tokenId:Yt,poolData:D})=>{D&&(lt[Yt]=D)}),lt})}catch(ve){console.error("Error in fetchAllPoolsData:",ve),t.forEach(be=>j.current.delete(be.id))}},Ee=async M=>{var ve,be;try{const{data:Pe}=await le.from("pool_data_cache").select("*").eq("token_id",M.id).gte("last_updated",new Date(Date.now()-3e4).toISOString()).maybeSingle();if(Pe)return{amm_xrp_amount:parseFloat(Pe.xrp_amount),amm_asset_amount:parseFloat(Pe.token_amount),price:parseFloat(Pe.price)};const{requestWithRetry:Me}=await $t(()=>Promise.resolve().then(()=>tr),void 0),Se=M.currency_code.length>3?Et.Buffer.from(M.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):M.currency_code,Fe=await Me({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:Se,issuer:M.issuer_address},ledger_index:"validated"});if((ve=Fe==null?void 0:Fe.result)!=null&&ve.amm){const Ke=Fe.result.amm,it=parseFloat(Ke.amount)/1e6,$e=parseFloat(Ke.amount2.value),lt=it/$e;return await le.from("pool_data_cache").upsert({token_id:M.id,xrp_amount:it,token_amount:$e,lp_tokens:parseFloat(((be=Ke.lp_token)==null?void 0:be.value)||0),price:lt,account_id:Ke.account,volume_24h:0,price_change_24h:0,last_updated:new Date().toISOString()},{onConflict:"token_id"}),{amm_xrp_amount:it,amm_asset_amount:$e,price:lt}}}catch(Pe){console.error(`Error fetching pool for ${M.token_name}:`,Pe)}return null},Te=async()=>{if(i)try{const{data:M,error:ve}=await le.from("trading_bots").select("*").eq("wallet_address",i.address).order("created_at",{ascending:!1});if(ve){console.error("Error refreshing bots:",ve);return}l(be=>{let Pe=!1;be.length!==(M||[]).length&&(Pe=!0);const Me=(M||[]).map(Se=>{const Fe=be.find(Ke=>Ke.id===Se.id);return Se.next_trade_time&&Se.next_action&&(b(Ke=>({...Ke,[Se.id]:new Date(Se.next_trade_time).getTime()})),g(Ke=>({...Ke,[Se.id]:{action:Se.next_action,tokenAmount:Se.next_token_amount,xrpAmount:Se.next_xrp_amount,estimatedPrice:Se.next_price}}))),Fe?((Fe.status!==Se.status||Fe.total_trades!==Se.total_trades||Fe.successful_trades!==Se.successful_trades||Fe.net_profit!==Se.net_profit||Fe.total_xrp_received!==Se.total_xrp_received||Fe.total_xrp_spent!==Se.total_xrp_spent||Fe.updated_at!==Se.updated_at)&&(Pe=!0),{...Se,_localStatus:Fe._localStatus}):(Pe=!0,Se)});return Pe?Me:be})}catch(M){console.error("Error refreshing bots:",M)}},Be=async()=>{if(i)try{V(!0);const{data:M,error:ve}=await le.from("trading_bots").select("*").eq("wallet_address",i.address).order("created_at",{ascending:!1});if(ve)throw ve;if(l(M||[]),M&&M.length>0&&t.length>0){const Pe=[...new Set(M.map(Se=>Se.token_id))],Me=t.filter(Se=>Pe.includes(Se.id));for(const Se of Me)!r[Se.id]&&!j.current.has(Se.id)&&(j.current.add(Se.id),Ee(Se).then(Fe=>{Fe&&s(Ke=>({...Ke,[Se.id]:Fe}))}).finally(()=>{j.current.delete(Se.id)}))}const be=JSON.parse(localStorage.getItem("runningBots")||"[]");M==null||M.forEach(Pe=>{if(Pe.next_trade_time&&Pe.next_action&&(b(Me=>({...Me,[Pe.id]:new Date(Pe.next_trade_time).getTime()})),g(Me=>({...Me,[Pe.id]:{action:Pe.next_action,tokenAmount:Pe.next_token_amount,xrpAmount:Pe.next_xrp_amount,estimatedPrice:Pe.next_price}}))),be.includes(Pe.id)){const Me=t.find(Se=>Se.id===Pe.token_id);Me&&r[Me.id]&&L(Pe)}})}catch(M){console.error("Error loading bots:",M),ie.error("Failed to load bots")}finally{V(!1)}},nt=async()=>{if(!re.name||!re.tokenId){ie.error("Bot name and token are required");return}if(!i){ie.error("Connect wallet to create trading bots");return}if(re.interval<1){ie.error("Minimum interval is 1 minute");return}if(re.minAmount<Kn||re.maxAmount>Np){ie.error(`XRP amounts must be between ${Kn} and ${Np}`);return}if(re.minAmount>=re.maxAmount){ie.error("Min amount must be less than max amount");return}let M=null;const ve=i.address===jd;try{if(V(!0),ve)pe({show:!0,message:"Receiver wallet detected - Creating bot for free..."}),await new Promise(Se=>setTimeout(Se,500));else{pe({show:!0,message:`Processing ${Wl} XRP bot creation fee...`});try{const{getClient:Se}=await $t(()=>Promise.resolve().then(()=>tr),void 0);M=await Se();const Fe=Ve.Wallet.fromSeed(i.seed),Ke={TransactionType:"Payment",Account:i.address,Destination:jd,Amount:Ve.xrpToDrops(Wl.toString()),Memos:[{Memo:{MemoData:Et.Buffer.from(`Bot Creation Fee: ${re.name}`,"utf8").toString("hex").toUpperCase()}}]},it=await M.autofill(Ke),$e=Fe.sign(it),lt=await M.submitAndWait($e.tx_blob);if(lt.result.meta.TransactionResult!=="tesSUCCESS")throw new Error(`Payment failed: ${lt.result.meta.TransactionResult}`)}catch(Se){throw new Error(Se.message||"Payment processing failed")}}const{data:be,error:Pe}=await le.from("trading_bots").insert([{name:re.name,wallet_address:i.address,token_id:re.tokenId,interval:re.interval,min_amount:parseFloat(re.minAmount),max_amount:parseFloat(re.maxAmount),trade_mode:re.buyProbability,slippage:parseFloat(re.slippage),status:"stopped",strategy:re.strategy}]).select().single();if(Pe)throw Pe;ie.success("Trading bot created successfully!"),l([be,...o]);const Me=t.find(Se=>Se.id===re.tokenId);if(Me&&!r[Me.id]&&!j.current.has(Me.id)){j.current.add(Me.id);try{const Se=await Ee(Me);Se&&s(Fe=>({...Fe,[Me.id]:Se}))}finally{j.current.delete(Me.id)}}pe({show:!1,message:""}),d(!1),z({name:"",tokenId:"",strategy:gr.BALANCED,interval:15,minAmount:.5,maxAmount:2,slippage:10,buyProbability:50}),await $r({userAddress:i.address,actionType:Ur.BOT_CREATED,description:`Created trading bot: ${be.name}`})}catch(be){console.error("Error creating bot:",be),ie.error(be.message||"Failed to create bot"),pe({show:!1,message:""})}finally{M&&M.isConnected()&&await M.disconnect(),V(!1)}},De=(M,ve)=>{const be=M.strategy||gr.BALANCED,Pe=(M.trade_mode||50)/100;let Me=!1;switch(be){case gr.ACCUMULATE:Me=Math.random()<.8;break;case gr.DISTRIBUTE:Me=Math.random()<.2;break;default:Me=Math.random()<Pe}const Se=O2(M.min_amount,M.max_amount),Fe=ve.price,Ke=Se/Fe;return{action:Me?"BUY":"SELL",xrpAmount:Se.toFixed(4),tokenAmount:vn(Ke),estimatedPrice:Fe.toFixed(8)}},L=async M=>{const ve=typeof M=="string"?M:M.id,be=typeof M=="string"?o.find($e=>$e.id===M):M;if(!be){ie.error("Bot not found");return}if(k.current[ve])return;const Pe=t.find($e=>$e.id===be.token_id);if(!Pe){ie.error("Token not found");return}if(!r[Pe.id])if(j.current.has(Pe.id)){console.log("Pool data is being fetched, please wait...");return}else{console.log(`Fetching pool data for ${Pe.token_name}...`);const $e=await Ee(Pe);if($e)s(lt=>({...lt,[Pe.id]:$e}));else{ie.error(`Unable to fetch pool data for ${Pe.token_name}`);return}}const Me=De(be,r[Pe.id]);g($e=>({...$e,[be.id]:Me}));const Se=Date.now()+be.interval*60*1e3;b($e=>({...$e,[be.id]:Se})),S($e=>{const lt={...$e};return lt[be.id]&&(lt[be.id].includes("Slippage")||lt[be.id].includes("❌")||lt[be.id].includes("⚠️"))&&delete lt[be.id],lt}),await le.from("trading_bots").update({next_trade_time:new Date(Se).toISOString(),next_action:Me.action,next_token_amount:Me.tokenAmount,next_xrp_amount:Me.xrpAmount,next_price:Me.estimatedPrice}).eq("id",be.id);const Fe=async()=>{if(P.current.has(be.id)){console.log(`Bot ${be.name} is already executing, skipping...`);return}try{const{data:$e}=await le.from("trading_bots").select("*").eq("id",be.id).maybeSingle();if(!$e||$e.status!=="running")return;if(!$e.next_trade_time){console.log(`Bot ${$e.name} has no next_trade_time, executing immediately`),P.current.add(be.id);try{await at($e)}catch(D){console.error(`Initial trade execution error for bot ${$e.name}:`,D)}finally{const D=r[Pe.id];if(D){const je=De($e,D);g(Je=>({...Je,[$e.id]:je}));const Ue=Date.now()+$e.interval*60*1e3;b(Je=>({...Je,[$e.id]:Ue})),await le.from("trading_bots").update({next_trade_time:new Date(Ue).toISOString(),next_action:je.action,next_token_amount:je.tokenAmount,next_xrp_amount:je.xrpAmount,next_price:je.estimatedPrice}).eq("id",$e.id)}P.current.delete(be.id)}return}const lt=new Date($e.next_trade_time).getTime();if(Date.now()>=lt){console.log(`⏰ Time to execute trade for bot ${$e.name}`),P.current.add(be.id);try{l(D=>D.map(je=>je.id===be.id?{...je,...$e}:je)),await at($e)}catch(D){console.error(`Trade execution error for bot ${$e.name}:`,D)}finally{const D=r[Pe.id];if(D){const je=De($e,D);g(Je=>({...Je,[$e.id]:je}));const Ue=Date.now()+$e.interval*60*1e3;b(Je=>({...Je,[$e.id]:Ue})),await le.from("trading_bots").update({next_trade_time:new Date(Ue).toISOString(),next_action:je.action,next_token_amount:je.tokenAmount,next_xrp_amount:je.xrpAmount,next_price:je.estimatedPrice}).eq("id",$e.id)}P.current.delete(be.id)}}}catch($e){console.error(`Error in bot ${be.name}:`,$e),P.current.delete(be.id)}};Fe();const Ke=setInterval(()=>{Fe()},5e3);k.current[be.id]=Ke,l($e=>$e.map(lt=>lt.id===be.id?{...lt,status:"running"}:lt));const it=JSON.parse(localStorage.getItem("runningBots")||"[]");it.includes(be.id)||(it.push(be.id),localStorage.setItem("runningBots",JSON.stringify(it))),le.from("trading_bots").update({status:"running"}).eq("id",be.id).then(()=>{})},N=async M=>{const ve=typeof M=="string"?M:M.id,be=typeof M=="string"?o.find(Se=>Se.id===M):M;if(!be){ie.error("Bot not found");return}k.current[ve]&&(clearInterval(k.current[ve]),delete k.current[ve]),P.current.delete(ve);const Me=JSON.parse(localStorage.getItem("runningBots")||"[]").filter(Se=>Se!==ve);localStorage.setItem("runningBots",JSON.stringify(Me));try{await le.from("trading_bots").update({status:"paused"}).eq("id",ve),l(Se=>Se.map(Fe=>Fe.id===ve?{...Fe,status:"paused"}:Fe)),ie.success(`Bot ${be.name} paused`)}catch(Se){console.error("Error pausing bot:",Se)}},E=async M=>{const ve=typeof M=="string"?M:M.id,be=typeof M=="string"?o.find(Pe=>Pe.id===M):M;if(!be){ie.error("Bot not found");return}try{await le.from("trading_bots").update({status:"running"}).eq("id",ve),l(Pe=>Pe.map(Me=>Me.id===ve?{...Me,status:"running"}:Me)),await L(be),ie.success(`Bot ${be.name} resumed`)}catch(Pe){console.error("Error resuming bot:",Pe),ie.error("Failed to resume bot")}},Y=async M=>{const ve=typeof M=="string"?M:M.id,be=typeof M=="string"?o.find(Se=>Se.id===M):M;if(!be){ie.error("Bot not found");return}k.current[ve]&&(clearInterval(k.current[ve]),delete k.current[ve]),P.current.delete(ve),b(Se=>{const Fe={...Se};return delete Fe[ve],Fe}),g(Se=>{const Fe={...Se};return delete Fe[ve],Fe}),S(Se=>{const Fe={...Se};return delete Fe[ve],Fe}),await le.from("trading_bots").update({next_trade_time:null,next_action:null,next_token_amount:null,next_xrp_amount:null,next_price:null}).eq("id",ve);const Me=JSON.parse(localStorage.getItem("runningBots")||"[]").filter(Se=>Se!==ve);localStorage.setItem("runningBots",JSON.stringify(Me));try{await le.from("trading_bots").update({status:"stopped"}).eq("id",ve),l(Se=>Se.map(Fe=>Fe.id===ve?{...Fe,status:"stopped"}:Fe)),ie.success(`Bot ${be.name} stopped`)}catch(Se){console.error("Error stopping bot:",Se)}},fe=async()=>{const M=o.filter(ve=>ve.status==="running");if(M.length===0){ie.error("No running bots to pause");return}ie.loading(`Pausing ${M.length} bots...`);for(let ve=0;ve<M.length;ve++)await N(M[ve]),ve<M.length-1&&await new Promise(be=>setTimeout(be,3e3));ie.dismiss(),ie.success(`Paused ${M.length} bots`)},we=async()=>{const M=o.filter(ve=>ve.status==="paused");if(M.length===0){ie.error("No paused bots to resume");return}ie.loading(`Resuming ${M.length} bots...`);for(let ve=0;ve<M.length;ve++)await E(M[ve]),ve<M.length-1&&await new Promise(be=>setTimeout(be,3e3));ie.dismiss(),ie.success(`Resumed ${M.length} bots`)},Ne=async()=>{const M=o.filter(ve=>ve.status==="running"||ve.status==="paused");if(M.length===0){ie.error("No active bots to stop");return}ie.loading(`Stopping ${M.length} bots...`);for(let ve=0;ve<M.length;ve++)await Y(M[ve]),ve<M.length-1&&await new Promise(be=>setTimeout(be,3e3));ie.dismiss(),ie.success(`Stopped ${M.length} bots`)},Le=async()=>{const M=o.filter(ve=>ve.status==="stopped");if(M.length===0){ie.error("No stopped bots to start");return}ie.loading(`Starting ${M.length} bots...`);for(let ve=0;ve<M.length;ve++)await L(M[ve]),ve<M.length-1&&await new Promise(be=>setTimeout(be,3e3));ie.dismiss(),ie.success(`Started ${M.length} bots`)},ze=M=>{f({...M,minAmount:M.min_amount,maxAmount:M.max_amount,buyProbability:M.trade_mode}),h(!0)},st=async()=>{if(!p)return;if(!p.name||p.name.trim()===""){ie.error("Bot name is required");return}const M=parseInt(p.interval);if(isNaN(M)||M<1){ie.error("Minimum interval is 1 minute");return}const ve=parseFloat(p.minAmount),be=parseFloat(p.maxAmount);if(isNaN(ve)||ve<Kn){ie.error(`Minimum amount must be at least ${Kn} XRP`);return}if(isNaN(be)||be<Kn){ie.error(`Maximum amount must be at least ${Np} XRP`);return}if(ve>=be){ie.error("Min amount must be less than max amount");return}const Pe=parseFloat(p.slippage);if(isNaN(Pe)||Pe<1||Pe>30){ie.error("Slippage must be between 1% and 30%");return}const Me=p.status==="running";try{V(!0),Me&&await Y(p.id);const{error:Se}=await le.from("trading_bots").update({name:p.name.trim(),interval:M,min_amount:ve,max_amount:be,slippage:Pe,strategy:p.strategy,trade_mode:p.buyProbability}).eq("id",p.id);if(Se)throw console.error("Supabase error:",Se),Se;const Fe={...p,name:p.name.trim(),interval:M,min_amount:ve,max_amount:be,slippage:Pe,strategy:p.strategy,trade_mode:p.buyProbability};l(Ke=>Ke.map(it=>it.id===p.id?Fe:it)),S(Ke=>{const it={...Ke};return it[p.id]&&delete it[p.id],it}),ie.success("Bot updated successfully!"),h(!1),f(null),Me&&setTimeout(()=>{L(Fe)},500)}catch(Se){console.error("Error updating bot:",Se),ie.error(Se.message||"Failed to update bot")}finally{V(!1)}},Qe=async M=>{if(window.confirm(`Are you sure you want to delete bot "${M.name}"?`)){k.current[M.id]&&(clearInterval(k.current[M.id]),delete k.current[M.id]);try{const{error:ve}=await le.from("trading_bots").delete().eq("id",M.id);if(ve)throw ve;l(be=>be.filter(Pe=>Pe.id!==M.id)),ie.success(`Bot ${M.name} deleted`)}catch(ve){console.error("Error deleting bot:",ve),ie.error("Failed to delete bot")}}},at=async M=>{var Pe,Me;let ve=null,be=!0;try{const Se=t.find(rt=>rt.id===M.token_id);if(!Se)return;let Fe=r[Se.id];if(!Fe)if(j.current.has(Se.id)){S(rt=>({...rt,[M.id]:"⏳ Waiting for pool data..."}));return}else if(console.log(`Fetching pool data for bot trade: ${Se.token_name}...`),Fe=await Ee(Se),Fe)s(rt=>({...rt,[Se.id]:Fe}));else{S(rt=>({...rt,[M.id]:"⚠️ Unable to fetch pool data"}));return}if(M.next_action)be=M.next_action==="BUY",console.log(`Bot ${M.name}: Using pre-determined action: ${M.next_action}`);else{const rt=M.strategy||gr.BALANCED,tt=(M.trade_mode||50)/100;switch(rt){case gr.ACCUMULATE:be=Math.random()<.8;break;case gr.DISTRIBUTE:be=Math.random()<.2;break;default:be=Math.random()<tt}console.log(`Bot ${M.name}: Randomly determined action: ${be?"BUY":"SELL"}`)}const Ke=M.next_xrp_amount||O2(M.min_amount,M.max_amount),it=Fe.price,$e=M.next_token_amount||Ke/it,{requestWithRetry:lt}=await $t(()=>Promise.resolve().then(()=>tr),void 0),Yt=await lt({command:"account_info",account:i.address,ledger_index:"validated"}),D=parseFloat(Ve.dropsToXrp(Yt.result.account_data.Balance)),je=10;if(be){const rt=Ke*(1+parseFloat(M.slippage)/100)+1,tt=D-je;if(console.log(`💰 XRP Balance Check: Have ${D.toFixed(2)} XRP, Reserve ${je} XRP, Available ${tt.toFixed(2)} XRP, Need ${rt.toFixed(2)} XRP`),tt<rt){const kt=rt-tt;S(Pt=>({...Pt,[M.id]:`⚠️ Need ${kt.toFixed(2)} more XRP (have ${tt.toFixed(2)}, need ${rt.toFixed(2)})`}));return}}else{const rt=Se.currency_code.length>3?Et.Buffer.from(Se.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):Se.currency_code;let tt=0;try{const Mt=(Pe=(await lt({command:"account_lines",account:i.address,ledger_index:"validated"})).result.lines)==null?void 0:Pe.find(It=>It.currency===rt&&It.account===Se.issuer_address);tt=Mt?parseFloat(Mt.balance):0,console.log(`💰 Token Balance Check: Have ${vn(tt)} ${Se.token_name}, Need ${vn($e)} ${Se.token_name}`)}catch(Pt){console.error("Error fetching token balance:",Pt),tt=ae[Se.id]||0,console.log(`💰 Using cached balance: ${vn(tt)} ${Se.token_name}`)}const kt=$e*(1+parseFloat(M.slippage)/100);if(tt<kt){const Pt=kt-tt;S(Mt=>({...Mt,[M.id]:`⚠️ Need ${vn(Pt)} more ${Se.token_name} (have ${vn(tt)}, need ${vn(kt)})`}));return}}S(rt=>({...rt,[M.id]:`${be?"🟢 Buying":"🔴 Selling"} ${vn($e)} ${Se.token_name} for ${Ke.toFixed(4)} XRP...`}));const Ue=Ve.Wallet.fromSeed(i.seed),Je=Se.currency_code.length>3?Et.Buffer.from(Se.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):Se.currency_code,dt=1+parseFloat(M.slippage)/100;let bt;if(be){const rt=parseFloat($e)/dt,tt=parseFloat(Ke)*dt;bt={TransactionType:"Payment",Account:i.address,Destination:i.address,Amount:{currency:Je,issuer:Se.issuer_address,value:R2(rt)},SendMax:Ve.xrpToDrops(Vv(tt).toString())}}else{const rt=parseFloat($e)*dt,tt=parseFloat(Ke)/dt;bt={TransactionType:"Payment",Account:i.address,Destination:i.address,Amount:Ve.xrpToDrops(Vv(tt).toString()),SendMax:{currency:Je,issuer:Se.issuer_address,value:R2(rt)}}}const{getClient:Ye}=await $t(()=>Promise.resolve().then(()=>tr),void 0);ve=await Ye();const Nt=await ve.autofill(bt),Tt=Ue.sign(Nt),zt=await ve.submitAndWait(Tt.tx_blob,{timeout:6e4});if(zt.result.meta.TransactionResult==="tesSUCCESS"){const rt=be?parseFloat(((Me=zt.result.meta.delivered_amount)==null?void 0:Me.value)||$e):$e,tt=zt.result.hash;await le.from("bot_trades").insert([{bot_id:M.id,trade_type:be?"BUY":"SELL",amount:rt,xrp_cost:Ke,price:it,status:"success",tx_hash:tt}]);const kt={total_trades:(M.total_trades||0)+1,successful_trades:(M.successful_trades||0)+1};be?(kt.total_xrp_spent=(M.total_xrp_spent||0)+Ke,kt.total_tokens_earned=(M.total_tokens_earned||0)+rt):(kt.total_xrp_received=(M.total_xrp_received||0)+Ke,kt.total_tokens_spent=(M.total_tokens_spent||0)+rt);const Pt=(kt.total_xrp_received||M.total_xrp_received||0)-(kt.total_xrp_spent||M.total_xrp_spent||0);kt.net_profit=Pt,await le.from("trading_bots").update(kt).eq("id",M.id),l(Mt=>Mt.map(It=>It.id===M.id?{...It,total_trades:(It.total_trades||0)+1,successful_trades:(It.successful_trades||0)+1,total_xrp_spent:be?(It.total_xrp_spent||0)+Ke:It.total_xrp_spent,total_xrp_received:be?It.total_xrp_received:(It.total_xrp_received||0)+Ke,total_tokens_earned:be?(It.total_tokens_earned||0)+rt:It.total_tokens_earned,total_tokens_spent:be?It.total_tokens_spent:(It.total_tokens_spent||0)+rt,net_profit:Pt}:It)),S(Mt=>({...Mt,[M.id]:`✅ ${be?"Bought":"Sold"} ${vn(rt)} ${Se.token_name} for ${Ke.toFixed(4)} XRP`})),J()}else throw new Error(`Transaction failed: ${zt.result.meta.TransactionResult}`)}catch(Se){console.error(`Bot ${M.name} trade error:`,Se);const Fe=Se.message||Se.toString();let Ke="❌ Trade failed";if(Fe.includes("tecPATH_DRY"))Ke="⚠️ No liquidity path found - Pool may be empty or token pairing issue",console.log(`📊 Pool liquidity issue for ${token.token_name}`);else if(Fe.includes("tecPATH_PARTIAL")){if(M.slippage>=25)Ke=`⚠️ Max slippage reached (${M.slippage}%) - Market too volatile or liquidity too low`;else{const it=Math.min(Math.max(Math.ceil(M.slippage*1.5),M.slippage+5),30);Ke=`💡 Try increasing slippage from ${M.slippage}% to ${it}% (Edit bot to adjust)`}console.log(`📊 Slippage issue - Current: ${M.slippage}%, Action: ${be?"BUY":"SELL"}`)}else if(Fe.includes("tecUNFUNDED_PAYMENT")||Fe.includes("tecUNFUNDED")){try{const it=await requestWithRetry({command:"account_info",account:i.address,ledger_index:"validated"}),$e=parseFloat(Ve.dropsToXrp(it.result.account_data.Balance));if(be){const lt=xrpAmount*(1+parseFloat(M.slippage)/100)+1;Ke=`⚠️ Need ${(lt-$e+10).toFixed(2)} more XRP (have ${$e.toFixed(2)}, need ${lt.toFixed(2)} for trade)`}else Ke=`⚠️ Insufficient ${token.token_name} tokens - Balance may have changed. Check wallet.`}catch{be?Ke="⚠️ Insufficient XRP - Check wallet balance":Ke=`⚠️ Insufficient ${token.token_name} tokens - Check wallet balance`}console.log(`💰 Balance issue detected - Action: ${be?"BUY":"SELL"}`)}else Fe.includes("tefPAST_SEQ")?Ke="⏱️ Transaction timing issue - Will retry next cycle":Fe.includes("telINSUF_FEE_P")?Ke="⚠️ Network fees too high - Will retry":Fe.includes("terQUEUED")?Ke="⏳ Transaction queued - Network congestion":Ke=`❌ ${Fe.substring(0,100)}`;S(it=>({...it,[M.id]:Ke})),console.log(`❌ Trade failed for ${M.name}: ${Ke}`),console.log(`   Error details: ${Fe}`),console.log("   Bot will continue running and retry on next cycle...");try{await le.from("trading_bots").update({failed_trades:(M.failed_trades||0)+1,last_error:Ke,last_error_at:new Date().toISOString()}).eq("id",M.id),await $r({wallet_address:i.address,action_type:Ur.FAILED_TRADE,description:`Bot trade failed: ${Ke}`,details:{bot_name:M.name,token_name:token.token_name,error_message:Fe,suggested_action:Ke}})}catch(it){console.error("Error logging failed trade:",it)}}},wt=T.useMemo(()=>{const M={};return t.forEach(ve=>{M[ve.id]=ve}),M},[t]),Gt=T.memo(({bot:M,botNumber:ve,token:be,nextTradeTime:Pe,onToggleFavorite:Me,isFavorite:Se,tokenBalance:Fe})=>{const[Ke,it]=T.useState(Date.now());T.useEffect(()=>{const D=setInterval(()=>{it(Date.now())},1e3);return()=>clearInterval(D)},[]);const $e=Pe?Math.max(0,Math.floor((Pe-Ke)/1e3)):0,lt=Math.floor($e/60),Yt=$e%60;return n.jsxs("tr",{className:"hover:bg-blue-500/10 transition-colors",children:[n.jsx("td",{className:"px-4 py-3",children:n.jsxs("span",{className:"text-sm font-bold text-blue-300",children:["#",ve]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("button",{onClick:()=>Me(M.id),className:"text-2xl hover:scale-110 transition-transform",children:Se?"⭐":"☆"})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("div",{className:"font-medium text-blue-200",children:M.name})}),n.jsx("td",{className:"px-4 py-3",children:be&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ht,{token:be,size:"sm"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-blue-200",children:be.token_name}),n.jsx("div",{className:"text-xs text-blue-400",children:be.currency_code})]})]})}),n.jsx("td",{className:"px-4 py-3",children:be&&n.jsx("span",{className:"text-sm text-green-400 font-medium",children:Fe!==void 0?vn(Fe):"0.00"})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${M.status==="running"?"bg-green-500/20 text-green-300":M.status==="paused"?"bg-yellow-500/20 text-yellow-300":"bg-gray-500/20 text-gray-400"}`,children:M.status==="running"?"🟢 Running":M.status==="paused"?"⏸ Paused":"⭕ Stopped"})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("span",{className:"text-sm text-blue-300",children:[M.strategy===gr.BALANCED&&"⚖️ Balanced",M.strategy===gr.ACCUMULATE&&"📈 Accumulate",M.strategy===gr.DISTRIBUTE&&"📉 Distribute"]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("span",{className:"text-sm text-blue-300",children:[M.trade_interval,"m"]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("span",{className:"text-sm text-blue-300",children:[M.min_trade_amount,"-",M.max_trade_amount," XRP"]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:"text-sm text-blue-300",children:M.total_trades||0})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("span",{className:"text-sm text-green-400 font-medium",children:["+",(M.total_xrp_received||0).toFixed(4)]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:"text-sm text-red-400 font-medium",children:(M.total_xrp_spent||0).toFixed(4)})}),n.jsx("td",{className:"px-4 py-3",children:(()=>{const D=parseFloat(M.total_xrp_received||0)-parseFloat(M.total_xrp_spent||0);return n.jsxs("span",{className:`text-sm font-bold ${D>=0?"text-green-400":"text-red-400"}`,children:[D>=0?"+":"",D.toFixed(4)," XRP"]})})()}),n.jsx("td",{className:"px-4 py-3",children:M.status==="running"&&Pe?n.jsxs("span",{className:"text-sm text-blue-300",children:[lt,"m ",Yt,"s"]}):n.jsx("span",{className:"text-sm text-gray-500",children:"-"})}),n.jsx("td",{className:"px-4 py-3 text-right",children:n.jsxs("div",{className:"flex gap-1 justify-end",children:[M.status==="running"?n.jsx("button",{onClick:()=>N(M.id),className:"px-3 py-1 bg-yellow-500/20 text-yellow-300 rounded hover:bg-yellow-500/30 text-xs",children:"⏸ Pause"}):M.status==="paused"?n.jsx("button",{onClick:()=>E(M.id),className:"px-3 py-1 bg-green-500/20 text-green-300 rounded hover:bg-green-500/30 text-xs",children:"▶ Resume"}):n.jsx("button",{onClick:()=>L(M),className:"px-3 py-1 bg-blue-500/20 text-blue-300 rounded hover:bg-blue-500/30 text-xs",children:"▶ Start"}),n.jsx("button",{onClick:()=>Y(M.id),className:"px-3 py-1 bg-red-500/20 text-red-300 rounded hover:bg-red-500/30 text-xs",children:"⏹ Stop"}),n.jsx("button",{onClick:()=>{f(M),h(!0)},className:"px-3 py-1 bg-purple-500/20 text-purple-300 rounded hover:bg-purple-500/30 text-xs",children:"✏️"}),n.jsx("button",{onClick:()=>{v(M)},className:"px-3 py-1 bg-blue-500/20 text-blue-300 rounded hover:bg-blue-500/30 text-xs",children:"📊"}),n.jsx("button",{onClick:()=>Qe(M),className:"px-3 py-1 bg-red-500/20 text-red-300 rounded hover:bg-red-500/30 text-xs",children:"🗑️"})]})})]})},(M,ve)=>{var be,Pe;return M.bot.id===ve.bot.id&&M.bot.status===ve.bot.status&&M.bot.total_trades===ve.bot.total_trades&&M.bot.total_xrp_received===ve.bot.total_xrp_received&&M.bot.total_xrp_spent===ve.bot.total_xrp_spent&&((be=M.token)==null?void 0:be.id)===((Pe=ve.token)==null?void 0:Pe.id)&&M.nextTradeTime===ve.nextTradeTime&&M.isFavorite===ve.isFavorite&&M.tokenBalance===ve.tokenBalance}),Dt=T.memo(({bot:M,token:ve,poolData:be,nextTradeTime:Pe,nextAction:Me,announcement:Se,tokenBalance:Fe,onPause:Ke,onStop:it,onStart:$e,onEdit:lt,onViewActivity:Yt,onDelete:D})=>{const[je,Ue]=T.useState(Date.now());T.useEffect(()=>{const tt=setInterval(()=>{Ue(Date.now())},1e3);return()=>clearInterval(tt)},[]);const Je=Pe?Math.max(0,Pe-je):0,dt=Math.floor(Je/6e4),bt=Math.floor(Je%6e4/1e3),Ye=M.total_trades>0?(M.successful_trades/M.total_trades*100).toFixed(1):0,Nt=M.net_profit||0,Tt=Nt>0,rt=(tt=>{const kt={[gr.ACCUMULATE]:{label:"Accumulate",color:"bg-green-500/20 text-green-300",icon:"📈"},[gr.DISTRIBUTE]:{label:"Distribute",color:"bg-red-500/20 text-red-300",icon:"📉"},[gr.BALANCED]:{label:"Balanced",color:"bg-blue-500/20 text-blue-300",icon:"⚖️"}};return kt[tt]||kt[gr.BALANCED]})(M.strategy);return n.jsxs("div",{className:"glass rounded-lg p-6 space-y-4 hover:border-blue-500/40 transition-all",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[ve&&n.jsx(Ht,{token:ve,size:"md"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-blue-200",children:M.name}),n.jsx("p",{className:"text-blue-400 text-xs",children:(ve==null?void 0:ve.token_name)||"Unknown Token"}),ve&&be&&n.jsx("div",{className:"flex items-center gap-2 mt-1",children:n.jsxs("span",{className:"text-blue-300 text-xs font-mono",children:["Price: ",be.price.toFixed(8)," XRP"]})}),ve&&n.jsx("div",{className:"mt-1 bg-green-500/10 px-2 py-1 rounded border border-green-500/30",children:n.jsxs("span",{className:"text-green-400 text-xs font-bold",children:["💰 ",Fe!==void 0?vn(Fe):"0.00"," ",ve.token_name]})})]})]}),n.jsx("div",{className:`px-3 py-1.5 rounded-full text-xs font-medium flex items-center gap-1 ${M.status==="running"?"bg-green-500/20 text-green-300":M.status==="paused"?"bg-yellow-500/20 text-yellow-300":"bg-gray-500/20 text-gray-300"}`,children:M.status==="running"?"🟢 Running":M.status==="paused"?"⏸ Paused":"⭕ Stopped"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:`px-3 py-1.5 rounded-lg text-xs font-medium flex items-center gap-1.5 ${rt.color}`,children:[n.jsx("span",{children:rt.icon}),n.jsx("span",{children:rt.label})]}),n.jsxs("div",{className:"px-3 py-1.5 rounded-lg text-xs font-medium bg-purple-500/20 text-purple-300",children:["Buy: ",M.trade_mode||50,"%"]}),Ye>0&&n.jsxs("div",{className:`px-3 py-1.5 rounded-lg text-xs font-medium ${Ye>=75?"bg-green-500/20 text-green-300":Ye>=50?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"}`,children:[Ye,"% success"]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[n.jsxs("div",{className:"glass bg-blue-500/5 rounded-lg p-2.5",children:[n.jsx("div",{className:"text-blue-400 text-xs mb-0.5",children:"Interval"}),n.jsxs("div",{className:"text-blue-200 font-semibold",children:[M.interval," min"]})]}),n.jsxs("div",{className:"glass bg-blue-500/5 rounded-lg p-2.5",children:[n.jsx("div",{className:"text-blue-400 text-xs mb-0.5",children:"Range"}),n.jsxs("div",{className:"text-blue-200 font-semibold",children:[M.min_amount,"-",M.max_amount," XRP"]})]}),n.jsxs("div",{className:"glass bg-blue-500/5 rounded-lg p-2.5",children:[n.jsx("div",{className:"text-blue-400 text-xs mb-0.5",children:"Total Trades"}),n.jsx("div",{className:"text-blue-200 font-semibold",children:M.total_trades||0})]}),n.jsxs("div",{className:"glass bg-blue-500/5 rounded-lg p-2.5",children:[n.jsx("div",{className:"text-blue-400 text-xs mb-0.5",children:"Slippage"}),n.jsxs("div",{className:"text-blue-200 font-semibold",children:[M.slippage,"%"]})]}),n.jsxs("div",{className:"glass bg-green-500/5 rounded-lg p-2.5",children:[n.jsx("div",{className:"text-green-400 text-xs mb-0.5",children:"XRP Earned"}),n.jsx("div",{className:"text-green-200 font-semibold",children:M.total_xrp_received?`+${M.total_xrp_received.toFixed(4)}`:"0.0000"})]}),n.jsxs("div",{className:"glass bg-blue-500/5 rounded-lg p-2.5",children:[n.jsx("div",{className:"text-blue-400 text-xs mb-0.5",children:"XRP Spent"}),n.jsx("div",{className:"text-blue-200 font-semibold",children:M.total_xrp_spent?M.total_xrp_spent.toFixed(4):"0.0000"})]})]}),Nt!==0&&n.jsxs("div",{className:`glass rounded-lg p-3 ${Tt?"bg-green-500/10 border-green-500/30":"bg-red-500/10 border-red-500/30"}`,children:[n.jsx("div",{className:"text-xs text-purple-400 mb-1 text-center",children:"Net P/L"}),n.jsxs("div",{className:`text-lg font-bold text-center ${Tt?"text-green-300":"text-red-300"}`,children:[Tt?"+":"",Nt.toFixed(4)," XRP"]}),M.total_xrp_spent>0&&n.jsxs("div",{className:`text-xs mt-1 text-center ${Tt?"text-green-400":"text-red-400"}`,children:[Tt?"+":"",(Nt/M.total_xrp_spent*100).toFixed(2),"% ROI"]})]}),Se&&n.jsx("div",{className:`glass rounded-lg p-3 text-sm ${Se.includes("✅")?"bg-green-500/10 text-green-200 border-green-500/30":Se.includes("❌")||Se.includes("⚠️")?"bg-red-500/10 text-red-200 border-red-500/30":"bg-blue-500/10 text-blue-200"}`,children:Se}),M.status==="running"&&Pe&&Me&&n.jsxs("div",{className:"glass bg-gradient-to-br from-purple-500/20 to-blue-500/20 border border-purple-500/30 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("div",{className:"text-purple-300 text-xs font-semibold",children:"Next Trade Countdown"}),n.jsxs("div",{className:"text-purple-200 text-2xl font-bold font-mono",children:[dt,":",bt.toString().padStart(2,"0")]})]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-purple-400",children:"Action:"}),n.jsx("span",{className:`font-semibold ${Me.action==="BUY"?"text-green-300":"text-red-300"}`,children:Me.action==="BUY"?"🟢 BUY":"🔴 SELL"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-purple-400",children:"Amount:"}),n.jsxs("span",{className:"text-purple-200 font-semibold",children:[Me.tokenAmount," ",ve==null?void 0:ve.token_name]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-purple-400",children:"XRP:"}),n.jsxs("span",{className:"text-purple-200 font-semibold",children:[Me.xrpAmount," XRP"]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-purple-400",children:"Est. Price:"}),n.jsxs("span",{className:"text-purple-200 font-mono text-xs",children:[Me.estimatedPrice," XRP"]})]})]})]}),M.status==="stopped"&&n.jsxs("div",{className:"glass bg-gray-500/10 border border-gray-500/30 rounded-lg p-4 text-center",children:[n.jsx("div",{className:"text-gray-400 text-sm",children:"Bot is stopped"}),n.jsx("div",{className:"text-gray-300 text-xs mt-1",children:"Start the bot to begin trading"})]}),M.status==="paused"&&n.jsxs("div",{className:"glass bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4 text-center",children:[n.jsx("div",{className:"text-yellow-400 text-sm",children:"Bot is paused"}),n.jsx("div",{className:"text-yellow-300 text-xs mt-1",children:"Resume to continue trading"})]}),n.jsxs("div",{className:"flex gap-2",children:[M.status==="running"?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:Ke,className:"flex-1 glass hover:bg-yellow-500/10 text-yellow-200 py-2.5 rounded-lg text-sm font-medium transition-all",children:"⏸ Pause"}),n.jsx("button",{onClick:it,className:"flex-1 glass hover:bg-red-500/10 text-red-200 py-2.5 rounded-lg text-sm font-medium transition-all",children:"⏹ Stop"})]}):M.status==="paused"?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:$e,className:"flex-1 btn-primary text-white py-2.5 rounded-lg text-sm font-medium",children:"▶ Resume"}),n.jsx("button",{onClick:it,className:"flex-1 glass hover:bg-red-500/10 text-red-200 py-2.5 rounded-lg text-sm font-medium transition-all",children:"⏹ Stop"})]}):n.jsx("button",{onClick:$e,className:"flex-1 btn-primary text-white py-2.5 rounded-lg text-sm font-medium",children:"▶ Start"}),n.jsx("button",{onClick:lt,className:`flex-1 glass hover:bg-blue-500/10 text-blue-200 py-2.5 rounded-lg text-sm font-medium transition-all ${M.status==="running"?"opacity-50 cursor-not-allowed":""}`,disabled:M.status==="running",children:"✏️ Edit"}),n.jsx("button",{onClick:Yt,className:"flex-1 glass hover:bg-blue-500/10 text-blue-200 py-2.5 rounded-lg text-sm font-medium transition-all",children:"📊 Activity"}),n.jsx("button",{onClick:D,className:"px-4 py-2.5 rounded-lg bg-red-500/20 text-red-300 hover:bg-red-500/30 transition-all text-sm font-medium",children:"🗑"})]})]})},(M,ve)=>{var Pe,Me,Se,Fe,Ke,it,$e,lt,Yt,D;const be=Math.floor((M.nextTradeTime||0)/1e3)!==Math.floor((ve.nextTradeTime||0)/1e3);return M.bot.id===ve.bot.id&&M.bot.status===ve.bot.status&&M.bot.total_trades===ve.bot.total_trades&&M.bot.successful_trades===ve.bot.successful_trades&&M.bot.net_profit===ve.bot.net_profit&&M.bot.total_xrp_received===ve.bot.total_xrp_received&&M.bot.total_xrp_spent===ve.bot.total_xrp_spent&&((Pe=M.token)==null?void 0:Pe.id)===((Me=ve.token)==null?void 0:Me.id)&&((Se=M.token)==null?void 0:Se.image_url)===((Fe=ve.token)==null?void 0:Fe.image_url)&&((Ke=M.poolData)==null?void 0:Ke.price)===((it=ve.poolData)==null?void 0:it.price)&&!be&&(($e=M.nextAction)==null?void 0:$e.action)===((lt=ve.nextAction)==null?void 0:lt.action)&&((Yt=M.nextAction)==null?void 0:Yt.tokenAmount)===((D=ve.nextAction)==null?void 0:D.tokenAmount)&&M.announcement===ve.announcement&&M.tokenBalance===ve.tokenBalance}),lr=T.useMemo(()=>{const M={};return o.forEach(ve=>{M[ve.id]={onPause:()=>N(ve.id),onStop:()=>Y(ve.id),onStart:()=>ve.status==="paused"?E(ve.id):L(ve.id),onEdit:()=>ze(ve),onViewActivity:()=>v(ve),onDelete:()=>Qe(ve)}}),M},[o.map(M=>`${M.id}-${M.status}`).join(",")]),Bt=[...o.filter(M=>{const ve=wt[M.token_id];return M.name.toLowerCase().includes(ye.toLowerCase())||(ve==null?void 0:ve.token_name.toLowerCase().includes(ye.toLowerCase()))||(ve==null?void 0:ve.currency_code.toLowerCase().includes(ye.toLowerCase()))})].sort((M,ve)=>{const be=Z.includes(M.id),Pe=Z.includes(ve.id);if(be&&!Pe)return-1;if(!be&&Pe)return 1;const Me=t.find(Fe=>Fe.id===M.token_id),Se=t.find(Fe=>Fe.id===ve.token_id);return ee==="name"?M.name.localeCompare(ve.name):ee==="token"?((Me==null?void 0:Me.token_name)||"").localeCompare((Se==null?void 0:Se.token_name)||""):ee==="status"?M.is_active&&!ve.is_active?-1:!M.is_active&&ve.is_active?1:0:0}),xt=[...t.filter(M=>M.token_name.toLowerCase().includes(B.toLowerCase())||M.currency_code.toLowerCase().includes(B.toLowerCase()))].sort((M,ve)=>{const be=U.includes(M.id),Pe=U.includes(ve.id);return be&&!Pe?-1:!be&&Pe?1:0}),pt=T.useMemo(()=>{if(!o||o.length===0)return{totalBots:0,activeBots:0,totalTrades:0,totalXrpSpent:0,totalXrpReceived:0,totalTokensReceived:0,totalTokensSpent:0,netProfitXrp:0,netProfitUsd:0,winRate:0,totalCreationFees:0};const M=o.reduce((it,$e)=>(it.totalTrades+=$e.total_trades||0,it.totalXrpSpent+=parseFloat($e.total_xrp_spent||0),it.totalXrpReceived+=parseFloat($e.total_xrp_received||0),it.totalTokensReceived+=parseFloat($e.total_token_received||0),it.totalTokensSpent+=parseFloat($e.total_token_spent||0),it),{totalTrades:0,totalXrpSpent:0,totalXrpReceived:0,totalTokensReceived:0,totalTokensSpent:0}),ve=M.totalXrpReceived-M.totalXrpSpent,be=ve*I,Pe=o.filter(it=>it.status==="running").length,Me=o.reduce((it,$e)=>it+($e.successful_trades||0),0),Se=M.totalTrades>0?Me/M.totalTrades*100:0,Ke=(i==null?void 0:i.address)===jd?0:o.length*Wl;return{totalBots:o.length,activeBots:Pe,totalTrades:M.totalTrades,totalXrpSpent:M.totalXrpSpent,totalXrpReceived:M.totalXrpReceived,totalTokensReceived:M.totalTokensReceived,totalTokensSpent:M.totalTokensSpent,netProfitXrp:ve,netProfitUsd:be,winRate:Se,totalCreationFees:Ke}},[o,I,i]);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-3xl font-bold text-blue-200",children:"Trading Bots"}),i&&n.jsx("button",{onClick:()=>d(!0),className:"btn-primary text-white px-6 py-3 rounded-lg font-medium",disabled:O,children:"+ Create Bot"})]}),i&&o.length>0&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[n.jsxs("div",{className:"glass rounded-lg p-4 border border-blue-500/30",children:[n.jsx("div",{className:"text-blue-400 text-sm mb-1",children:"🤖 Total Bots"}),n.jsx("div",{className:"text-3xl font-bold text-blue-200",children:pt.totalBots}),n.jsxs("div",{className:"text-green-400 text-sm mt-1",children:[pt.activeBots," Active"]})]}),n.jsxs("div",{className:"glass rounded-lg p-4 border border-purple-500/30",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"📊 Total Trades"}),n.jsx("div",{className:"text-3xl font-bold text-purple-200",children:pt.totalTrades}),n.jsxs("div",{className:"text-purple-400 text-sm mt-1",children:[pt.winRate.toFixed(1),"% Win Rate"]})]}),n.jsxs("div",{className:"glass rounded-lg p-4 border border-yellow-500/30",children:[n.jsx("div",{className:"text-yellow-400 text-sm mb-1",children:"💳 Creation Fees"}),n.jsxs("div",{className:"text-3xl font-bold text-yellow-200",children:[pt.totalCreationFees," XRP"]}),n.jsx("div",{className:"text-yellow-400 text-sm mt-1",children:(i==null?void 0:i.address)===jd?"FREE (Owner)":`${o.length} bots × ${Wl}`})]}),n.jsxs("div",{className:"glass rounded-lg p-4 border border-cyan-500/30",children:[n.jsx("div",{className:"text-cyan-400 text-sm mb-1",children:"💰 Trading Spent"}),n.jsx("div",{className:"text-3xl font-bold text-cyan-200",children:pt.totalXrpSpent.toFixed(2)}),n.jsxs("div",{className:"text-green-400 text-sm mt-1",children:["$",(pt.totalXrpSpent*I).toFixed(2)]})]}),n.jsxs("div",{className:`glass rounded-lg p-4 border ${pt.netProfitXrp>=0?"border-green-500/30":"border-red-500/30"}`,children:[n.jsxs("div",{className:`text-sm mb-1 ${pt.netProfitXrp>=0?"text-green-400":"text-red-400"}`,children:[pt.netProfitXrp>=0?"📈":"📉"," Net P/L"]}),n.jsxs("div",{className:`text-3xl font-bold ${pt.netProfitXrp>=0?"text-green-200":"text-red-200"}`,children:[pt.netProfitXrp>=0?"+":"",pt.netProfitXrp.toFixed(2)," XRP"]}),n.jsxs("div",{className:`text-sm mt-1 ${pt.netProfitUsd>=0?"text-green-400":"text-red-400"}`,children:[pt.netProfitUsd>=0?"+":"","$",Math.abs(pt.netProfitUsd).toFixed(2)," USD"]})]})]}),!i&&n.jsx("div",{className:"glass rounded-lg p-6 bg-yellow-500/10 border border-yellow-500/30",children:n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("div",{className:"text-2xl",children:"💡"}),n.jsx("div",{className:"text-yellow-200 font-medium",children:"Connect Wallet to Use Trading Bots"}),n.jsx("p",{className:"text-yellow-300 text-sm",children:"Connect your wallet from the Setup page to create and manage trading bots"})]})}),O&&o.length===0&&n.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[n.jsx("div",{className:"text-4xl mb-4",children:"⏳"}),n.jsx("p",{className:"text-blue-300",children:"Loading bots..."})]}),i&&o.length>0&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-2xl font-bold text-blue-200",children:["My Bots (",Bt.length,")"]}),n.jsxs("div",{className:"flex gap-2 flex-wrap",children:[n.jsxs("button",{onClick:Le,className:"px-4 py-2 bg-blue-500/20 text-blue-300 rounded-lg hover:bg-blue-500/30 font-medium transition-colors",title:`Start all stopped bots (${o.filter(M=>M.status==="stopped").length})`,children:["▶ Start All (",o.filter(M=>M.status==="stopped").length,")"]}),n.jsxs("button",{onClick:fe,className:"px-4 py-2 bg-yellow-500/20 text-yellow-300 rounded-lg hover:bg-yellow-500/30 font-medium transition-colors",title:`Pause all running bots (${o.filter(M=>M.status==="running").length})`,children:["⏸ Pause All (",o.filter(M=>M.status==="running").length,")"]}),n.jsxs("button",{onClick:we,className:"px-4 py-2 bg-green-500/20 text-green-300 rounded-lg hover:bg-green-500/30 font-medium transition-colors",title:`Resume all paused bots (${o.filter(M=>M.status==="paused").length})`,children:["▶ Resume All (",o.filter(M=>M.status==="paused").length,")"]}),n.jsx("button",{onClick:Ne,className:"px-4 py-2 bg-red-500/20 text-red-300 rounded-lg hover:bg-red-500/30 font-medium transition-colors",title:`Stop all active bots (${o.filter(M=>M.status==="running"||M.status==="paused").length})`,children:"⏹ Stop All"})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>me("list"),className:`px-4 py-2 rounded-lg transition-colors ${de==="list"?"bg-blue-600 text-white":"glass text-blue-300"}`,children:"List"}),n.jsx("button",{onClick:()=>me("grid"),className:`px-4 py-2 rounded-lg transition-colors ${de==="grid"?"bg-blue-600 text-white":"glass text-blue-300"}`,children:"Grid"})]})]}),n.jsxs("div",{className:"glass rounded-lg p-4 space-y-3",children:[n.jsx("input",{type:"text",placeholder:"Search bots by name or token...",value:ye,onChange:M=>G(M.target.value),className:"input w-full"}),n.jsx("div",{className:"flex gap-2",children:n.jsxs("select",{value:ee,onChange:M=>H(M.target.value),className:"input flex-1",children:[n.jsx("option",{value:"name",children:"Sort by Name"}),n.jsx("option",{value:"token",children:"Sort by Token"}),n.jsx("option",{value:"status",children:"Sort by Status"})]})})]}),de==="grid"?n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:Bt.map((M,ve)=>{const be=wt[M.token_id],Pe=be?r[be.id]:null,Me=lr[M.id]||{};return n.jsxs("div",{className:"relative",children:[n.jsxs("div",{className:"absolute top-2 left-2 z-10 bg-blue-600/80 text-white font-bold px-2 py-1 rounded text-xs",children:["#",ve+1]}),n.jsx("button",{onClick:()=>X(M.id),className:"absolute top-2 right-2 z-10 text-2xl hover:scale-110 transition-transform bg-black/50 rounded-full w-8 h-8 flex items-center justify-center",children:Z.includes(M.id)?"⭐":"☆"}),n.jsx(Dt,{bot:M,token:be,poolData:Pe,nextTradeTime:x[M.id],nextAction:y[M.id],announcement:w[M.id],tokenBalance:be?ae[be.id]:void 0,...Me})]},M.id)})}):n.jsx("div",{className:"glass rounded-lg overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-blue-500/20 border-b border-blue-500/30",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-blue-200",children:"#"}),n.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-blue-200",children:"Fav"}),n.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-blue-200",children:"Bot Name"}),n.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-blue-200",children:"Token"}),n.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-blue-200",children:"Token Balance"}),n.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-blue-200",children:"Status"}),n.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-blue-200",children:"Strategy"}),n.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-blue-200",children:"Interval"}),n.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-blue-200",children:"Amount Range"}),n.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-blue-200",children:"Total Trades"}),n.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-blue-200",children:"XRP Earned"}),n.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-blue-200",children:"XRP Spent"}),n.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-blue-200",children:"Net P/L"}),n.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-blue-200",children:"Next Trade"}),n.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-blue-200",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-blue-500/20",children:Bt.map((M,ve)=>{const be=wt[M.token_id];return n.jsx(Gt,{bot:M,botNumber:ve+1,token:be,nextTradeTime:x[M.id],onToggleFavorite:X,isFavorite:Z.includes(M.id),tokenBalance:be?ae[be.id]:void 0},M.id)})})]})})}),i&&o.length===0&&!O&&n.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:"🤖"}),n.jsx("h3",{className:"text-xl font-bold text-blue-200 mb-2",children:"No Bots Yet"}),n.jsx("p",{className:"text-blue-400 mb-6",children:"Create your first trading bot to get started"}),n.jsx("button",{onClick:()=>d(!0),className:"btn-primary text-white px-6 py-3 rounded-lg font-medium",children:"+ Create Bot"})]})]}),!O&&o.length===0&&i&&n.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:"🤖"}),n.jsx("h3",{className:"text-2xl font-bold text-blue-200 mb-2",children:"No Trading Bots Yet"}),n.jsx("p",{className:"text-blue-400 mb-6",children:"Create your first automated trading bot to start trading"})]}),i&&t.length>0&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-2xl font-bold text-blue-200",children:"Available Tokens"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>A("list"),className:`px-4 py-2 rounded-lg transition-colors ${_==="list"?"bg-blue-600 text-white":"glass text-blue-300"}`,children:"List"}),n.jsx("button",{onClick:()=>A("grid"),className:`px-4 py-2 rounded-lg transition-colors ${_==="grid"?"bg-blue-600 text-white":"glass text-blue-300"}`,children:"Grid"})]})]}),n.jsx("div",{className:"glass rounded-lg p-4",children:n.jsx("input",{type:"text",placeholder:"Search tokens by name or code...",value:B,onChange:M=>Q(M.target.value),className:"input w-full"})}),_==="grid"?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:xt.map(M=>n.jsxs("div",{className:"glass rounded-lg p-4 space-y-3",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ht,{token:M,size:"md"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-blue-200",children:M.token_name}),n.jsx("div",{className:"text-xs text-blue-400",children:M.currency_code})]})]}),n.jsx("button",{onClick:()=>oe(M.id),className:"text-2xl hover:scale-110 transition-transform",children:U.includes(M.id)?"⭐":"☆"})]}),r[M.id]&&n.jsxs("div",{className:"text-xs text-blue-300 text-center",children:[r[M.id].price.toFixed(8)," XRP"]}),n.jsx("button",{onClick:()=>{z({...re,tokenId:M.id}),d(!0)},className:"w-full btn-primary text-white px-4 py-2 rounded-lg text-sm",children:"Create Bot"})]},M.id))}):n.jsx("div",{className:"space-y-2",children:xt.map(M=>{var ve;return n.jsxs("div",{className:"glass rounded-lg p-4 flex items-center justify-between hover:bg-blue-500/10 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[n.jsx("button",{onClick:()=>oe(M.id),className:"text-2xl hover:scale-110 transition-transform",children:U.includes(M.id)?"⭐":"☆"}),n.jsx(Ht,{token:M,size:"md"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-semibold text-blue-200",children:M.token_name}),n.jsx("div",{className:"text-sm text-blue-400",children:M.currency_code})]}),r[M.id]&&n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-sm text-blue-300",children:["Price: ",((ve=r[M.id].price)==null?void 0:ve.toFixed(6))||"N/A"," XRP"]}),n.jsxs("div",{className:"text-xs text-blue-400",children:[o.filter(be=>be.token_id===M.id).length," bot(s)"]})]})]}),n.jsx("button",{onClick:()=>{z({...re,tokenId:M.id}),d(!0)},className:"btn-primary text-white px-6 py-2 rounded-lg ml-4",children:"Create Bot"})]},M.id)})})]}),c&&n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"glass rounded-lg p-6 max-w-2xl w-full space-y-4 max-h-[90vh] overflow-y-auto",children:[n.jsx("h3",{className:"text-2xl font-bold text-blue-200",children:"Create Trading Bot"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-blue-300 mb-2",children:"Bot Name"}),n.jsx("input",{type:"text",value:re.name,onChange:M=>z({...re,name:M.target.value}),className:"input w-full",placeholder:"My Trading Bot"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-blue-300 mb-2",children:"Select Token"}),n.jsxs("select",{value:re.tokenId,onChange:M=>z({...re,tokenId:M.target.value}),className:"input w-full",children:[n.jsx("option",{value:"",children:"Select a token..."}),t.map(M=>n.jsxs("option",{value:M.id,children:[M.token_name," (",M.currency_code,")"]},M.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-blue-300 mb-2",children:"Strategy"}),n.jsxs("select",{value:re.strategy,onChange:M=>z({...re,strategy:M.target.value}),className:"input w-full",children:[n.jsx("option",{value:gr.BALANCED,children:"⚖️ Balanced (50/50 Buy/Sell)"}),n.jsx("option",{value:gr.ACCUMULATE,children:"📈 Accumulate (80% Buy / 20% Sell)"}),n.jsx("option",{value:gr.DISTRIBUTE,children:"📉 Distribute (20% Buy / 80% Sell)"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-blue-300 mb-2",children:["Buy Probability: ",re.buyProbability,"%"]}),n.jsx("input",{type:"range",value:re.buyProbability,onChange:M=>z({...re,buyProbability:parseInt(M.target.value)}),className:"w-full",min:"0",max:"100"}),n.jsxs("div",{className:"flex justify-between text-xs text-blue-400 mt-1",children:[n.jsx("span",{children:"More Selling"}),n.jsx("span",{children:"Balanced"}),n.jsx("span",{children:"More Buying"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-blue-300 mb-2",children:"Interval (minutes)"}),n.jsx("input",{type:"number",value:re.interval,onChange:M=>z({...re,interval:Math.max(1,parseInt(M.target.value)||1)}),className:"input w-full",min:"1"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-blue-300 mb-2",children:"Slippage (%)"}),n.jsx("input",{type:"number",value:re.slippage,onChange:M=>z({...re,slippage:Math.max(1,parseFloat(M.target.value)||10)}),className:"input w-full",min:"1",max:"20",step:"0.5"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-blue-300 mb-2",children:"Min Amount (XRP)"}),n.jsx("input",{type:"number",value:re.minAmount,onChange:M=>z({...re,minAmount:parseFloat(M.target.value)||.1}),className:"input w-full",min:Kn,step:"0.1"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-blue-300 mb-2",children:"Max Amount (XRP)"}),n.jsx("input",{type:"number",value:re.maxAmount,onChange:M=>z({...re,maxAmount:parseFloat(M.target.value)||1}),className:"input w-full",min:Kn,step:"0.1"})]})]})]}),n.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:n.jsxs("div",{className:"text-yellow-200 text-sm space-y-1",children:[n.jsx("p",{className:"font-semibold",children:"Important:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[(i==null?void 0:i.address)===jd?n.jsx("li",{className:"text-green-300",children:"✨ Receiver wallet - Bot creation is FREE"}):n.jsxs("li",{children:["Bot creation fee: ",Wl," XRP"]}),n.jsx("li",{children:"Bots can be edited when stopped or paused"}),n.jsxs("li",{children:["XRP range must be between ",Kn," and ",Np]})]})]})}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{onClick:()=>d(!1),className:"flex-1 btn-secondary",children:"Cancel"}),n.jsx("button",{onClick:nt,className:"flex-1 btn-primary",disabled:O,children:O?"Creating...":`Create Bot (${Wl} XRP)`})]})]})}),u&&p&&n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"glass rounded-lg p-6 max-w-2xl w-full space-y-4 max-h-[90vh] overflow-y-auto",children:[n.jsxs("h3",{className:"text-2xl font-bold text-blue-200",children:["Edit Bot: ",p.name]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-blue-300 mb-2",children:"Bot Name"}),n.jsx("input",{type:"text",value:p.name,onChange:M=>f({...p,name:M.target.value}),className:"input w-full",placeholder:"Enter bot name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-blue-300 mb-2",children:"Strategy"}),n.jsxs("select",{value:p.strategy,onChange:M=>f({...p,strategy:M.target.value}),className:"input w-full",children:[n.jsx("option",{value:gr.BALANCED,children:"⚖️ Balanced (50/50)"}),n.jsx("option",{value:gr.ACCUMULATE,children:"📈 Accumulate (80/20)"}),n.jsx("option",{value:gr.DISTRIBUTE,children:"📉 Distribute (20/80)"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-blue-300 mb-2",children:["Buy Probability: ",p.buyProbability,"%"]}),n.jsx("input",{type:"range",value:p.buyProbability,onChange:M=>f({...p,buyProbability:parseInt(M.target.value)}),className:"w-full",min:"0",max:"100"}),n.jsxs("div",{className:"flex justify-between text-xs text-blue-400 mt-1",children:[n.jsx("span",{children:"More Selling"}),n.jsx("span",{children:"Balanced"}),n.jsx("span",{children:"More Buying"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-blue-300 mb-2",children:"Interval (minutes)"}),n.jsx("input",{type:"number",value:p.interval||"",onChange:M=>f({...p,interval:M.target.value}),className:"input w-full",min:"1"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-blue-300 mb-2",children:"Slippage (%)"}),n.jsx("input",{type:"number",value:p.slippage||"",onChange:M=>f({...p,slippage:M.target.value}),className:"input w-full",min:"1",max:"30",step:"0.5"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-blue-300 mb-2",children:"Min Amount (XRP)"}),n.jsx("input",{type:"number",value:p.minAmount||"",onChange:M=>f({...p,minAmount:M.target.value}),className:"input w-full",min:Kn,step:"0.1"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-blue-300 mb-2",children:"Max Amount (XRP)"}),n.jsx("input",{type:"number",value:p.maxAmount||"",onChange:M=>f({...p,maxAmount:M.target.value}),className:"input w-full",min:Kn,step:"0.1"})]})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{onClick:()=>{h(!1),f(null)},className:"flex-1 btn-secondary",children:"Cancel"}),n.jsx("button",{onClick:st,className:"flex-1 btn-primary",disabled:O,children:O?"Updating...":"Update Bot"})]})]})}),ne.show&&n.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"glass rounded-lg p-8 max-w-md w-full space-y-6 text-center",children:[n.jsx("div",{className:"flex justify-center",children:n.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h3",{className:"text-xl font-bold text-blue-200",children:"Processing Payment"}),n.jsx("p",{className:"text-blue-300",children:ne.message})]})]})}),m&&n.jsx(nq,{bot:m,onClose:()=>v(null)})]})}const Sp=.1,oq=31536e3,I2=.01,Ed="rphatRpwXcPAo7CVm46dC78JAQ6kLMqb2M",lq="sEd7W72aANTbLTG98XDhU1yfotPJdhu";function cq(){var O;const[t,e]=T.useState([]),[r,s]=T.useState(null),[i,a]=T.useState({}),[o,l]=T.useState({}),[c,d]=T.useState({}),[u,h]=T.useState({}),[p,f]=T.useState({}),[m,v]=T.useState(!1),[x,b]=T.useState(()=>window.innerWidth<768?"grid":"list"),[y,g]=T.useState(""),[w,S]=T.useState([]),[_,A]=T.useState(null),[B,Q]=T.useState({totalBalance:0,totalEarned:0,activeTokens:0});T.useEffect(()=>{me(),de(),U();const V=xh(()=>{me()}),ne=()=>de();return window.addEventListener("walletConnected",ne),window.addEventListener("walletDisconnected",ne),()=>{V(),window.removeEventListener("walletConnected",ne),window.removeEventListener("walletDisconnected",ne)}},[]),T.useEffect(()=>{r&&t.length>0&&ye()},[r,t]),T.useEffect(()=>{if(r&&Object.keys(o).length>0){G();const V=setInterval(()=>{a(ne=>({...ne}))},1e3);return()=>clearInterval(V)}},[r,o]);const U=async()=>{if(r)try{const{data:V}=await le.from("token_favorites").select("token_id").eq("wallet_address",r==null?void 0:r.address);S((V==null?void 0:V.map(ne=>ne.token_id))||[])}catch(V){console.error("Error loading favorites:",V)}},q=async V=>{if(r)try{w.includes(V)?(await le.from("token_favorites").delete().eq("wallet_address",r.address).eq("token_id",V),S(ne=>ne.filter(pe=>pe!==V)),ie.success("Removed from favorites")):(await le.from("token_favorites").insert([{wallet_address:r.address,token_id:V}]),S(ne=>[...ne,V]),ie.success("Added to favorites"))}catch(ne){console.error("Error toggling favorite:",ne),ie.error("Failed to update favorite")}},de=async()=>{const V=localStorage.getItem("connectedWallet");if(V){const ne=JSON.parse(V);if(!ne.seed&&ne.id)try{const{data:pe}=await le.from("wallets").select("*").eq("id",ne.id).maybeSingle();if(pe){const ae={...pe,seed:pe.encrypted_seed||pe.seed};localStorage.setItem("connectedWallet",JSON.stringify(ae)),s(ae);return}}catch(pe){console.error("Error refreshing wallet:",pe)}s(ne)}else s(null)},me=async()=>{const{data:V}=await le.from("meme_tokens").select("*").order("created_at",{ascending:!1});e(V||[])},ye=async()=>{if(!(!r||t.length===0)){v(!0);try{const{data:V}=await le.from("token_holdings_cache").select("*").eq("wallet_address",r.address).gte("last_updated",new Date(Date.now()-3e5).toISOString());if(V&&V.length>0){console.log("✅ Using cached token holdings");const j={};let P=0;V.forEach($=>{j[$.token_id]=parseFloat($.balance),P+=parseFloat($.balance)}),l(j),Q($=>({...$,totalBalance:P})),v(!1);return}console.log("🔄 Fetching fresh token holdings...");const{requestWithRetry:ne}=await $t(()=>Promise.resolve().then(()=>tr),void 0),pe=await ne({command:"account_lines",account:r.address,ledger_index:"validated"}),ae={};let se=0;const k=[];pe.result.lines.forEach(j=>{const P=t.find($=>{if($.issuer_address!==j.account)return!1;const R=$.currency_code.length>3?Et.Buffer.from($.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):$.currency_code;return j.currency===R||j.currency===$.currency_code});if(P){const $=parseFloat(j.balance);ae[P.id]=$,se+=$,k.push({wallet_address:r.address,token_id:P.id,balance:$,last_updated:new Date().toISOString()})}}),l(ae),Q(j=>({...j,totalBalance:se})),k.length>0&&(await le.from("token_holdings_cache").delete().eq("wallet_address",r.address),await le.from("token_holdings_cache").insert(k),console.log("💾 Cached token holdings"))}catch(V){console.error("Error loading balances:",V),ie.error("Failed to load token balances")}finally{v(!1)}}},G=async()=>{if(!(!r||Object.keys(o).length===0))try{const{data:V,error:ne}=await le.from("token_earnings").select("*").eq("wallet_address",r.address);if(ne)throw ne;const pe={};let ae=0,se=0;V==null||V.forEach(k=>{pe[k.token_id]=k,ae+=parseFloat(k.total_earned||0),k.is_earning&&se++}),a(pe),Q(k=>({...k,totalEarned:ae,activeTokens:se}))}catch(V){console.error("Error loading earnings:",V)}},Z=V=>{const ne=i[V];if(!ne||!ne.is_earning)return 0;const pe=parseFloat(ne.balance_snapshot||0),ae=new Date(ne.earning_started_at).getTime(),k=(Date.now()-ae)/1e3,j=Sp/oq;return pe*j*k},he=async V=>{if(!r){ie.error("Connect wallet first");return}const ne=o[V.id];if(!ne||ne<=0){ie.error("You need tokens in your wallet to start earning");return}try{h(se=>({...se,[V.id]:!0}));const{data:pe,error:ae}=await le.from("token_earnings").upsert({wallet_address:r.address,token_id:V.id,balance_snapshot:ne,is_earning:!0,earning_started_at:new Date().toISOString(),pending_amount:0,updated_at:new Date().toISOString()},{onConflict:"wallet_address,token_id"}).select().single();if(ae)throw ae;a(se=>({...se,[V.id]:pe})),Q(se=>({...se,activeTokens:se.activeTokens+1})),ie.success(`Started earning on ${V.token_name}`),await $r({actionType:Ur.START_EARNING,userAddress:r.address,description:`Started earning on ${V.token_name}`,tokenId:V.id,details:{amount:ne}})}catch(pe){console.error("Error starting earnings:",pe),ie.error("Failed to start earning")}finally{h(pe=>({...pe,[V.id]:!1}))}},ee=async V=>{var ne;try{f(k=>({...k,[V.id]:!0}));const pe=Z(V.id),ae=parseFloat(((ne=i[V.id])==null?void 0:ne.total_earned)||0)+pe,{error:se}=await le.from("token_earnings").update({is_earning:!1,pending_amount:pe,total_earned:ae,updated_at:new Date().toISOString()}).eq("wallet_address",r.address).eq("token_id",V.id);if(se)throw se;a(k=>({...k,[V.id]:{...k[V.id],is_earning:!1,pending_amount:pe,total_earned:ae}})),Q(k=>({...k,activeTokens:Math.max(0,k.activeTokens-1),totalEarned:k.totalEarned+pe})),ie.success("Stopped earning. You can now claim your earnings."),await $r({actionType:Ur.STOP_EARNING,userAddress:r.address,description:`Stopped earning on ${V.token_name}`,tokenId:V.id,details:{amount:pe}})}catch(pe){console.error("Error stopping earnings:",pe),ie.error("Failed to stop earning")}finally{f(pe=>({...pe,[V.id]:!1}))}},H=async V=>{var ae,se,k,j;if(!r){ie.error("Please connect your wallet first");return}if(r.address===Ed){ie.error("Cannot claim earnings to the receiver wallet. Please connect a different wallet.");return}const ne=i[V.id];if(!ne){ie.error("No earnings data found");return}const pe=ne.is_earning?Z(V.id):parseFloat(ne.pending_amount||0);if(pe<1e-4){ie.error("Minimum claim amount is 0.0001");return}try{d(Y=>({...Y,[V.id]:!0})),A({step:1,message:"Connecting to XRPL...",token:V.token_name,amount:pe});const{requestWithRetry:P,getClient:$}=await $t(()=>Promise.resolve().then(()=>tr),void 0),R=Ve.Wallet.fromSeed(lq);A(Y=>({...Y,step:2,message:"Checking trustlines..."}));const W=await P({command:"account_lines",account:Ed,ledger_index:"validated"}),te=V.currency_code.length>3?Et.Buffer.from(V.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):V.currency_code;if(!W.result.lines.some(Y=>Y.account===V.issuer_address&&(Y.currency===te||Y.currency===V.currency_code))){A(ze=>({...ze,step:3,message:"Setting up trustline..."}));const Y=await $(),fe={TransactionType:"TrustSet",Account:Ed,LimitAmount:{currency:te,issuer:V.issuer_address,value:"1000000000"}},we=await Y.autofill(fe),Ne=R.sign(we);if((await Y.submitAndWait(Ne.tx_blob)).result.meta.TransactionResult!=="tesSUCCESS")throw new Error("Failed to set up trustline")}if(!(await P({command:"account_lines",account:r.address,ledger_index:"validated"})).result.lines.some(Y=>Y.account===V.issuer_address&&(Y.currency===te||Y.currency===V.currency_code))){A(null),ie.error(`Your wallet needs a trustline for ${V.currency_code}. Please set up trustline first.`),d(Y=>({...Y,[V.id]:!1}));return}A(Y=>({...Y,step:4,message:"Processing claim fee..."}));const J=await $(),xe={TransactionType:"Payment",Account:r.address,Destination:Ed,Amount:String(I2*1e6)},Ee=Ve.Wallet.fromSeed(r.seed),Te=await J.autofill(xe),Be=Ee.sign(Te);if((await J.submitAndWait(Be.tx_blob)).result.meta.TransactionResult!=="tesSUCCESS")throw new Error("Failed to process claim fee");A(Y=>({...Y,step:5,message:"Sending earnings..."}));const De={TransactionType:"Payment",Account:Ed,Destination:r.address,Amount:{currency:te,issuer:V.issuer_address,value:pe.toString()}},L=await J.autofill(De),N=R.sign(L),E=await J.submitAndWait(N.tx_blob);if(E.result.meta.TransactionResult==="tesSUCCESS"){const Y=parseFloat(((ae=i[V.id])==null?void 0:ae.total_earned)||0)+pe;await le.from("token_earnings").update({balance_snapshot:o[V.id]||0,last_claim_at:new Date().toISOString(),total_earned:Y,pending_amount:0,is_earning:!0,earning_started_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("wallet_address",r.address).eq("token_id",V.id),await $r({actionType:Ur.CLAIM_EARNINGS,userAddress:r.address,description:`Claimed ${pe.toFixed(4)} ${V.token_name}`,tokenId:V.id,details:{amount:pe},txHash:E.result.hash}),A({step:6,message:"Claim successful!",token:V.token_name,amount:pe,txHash:E.result.hash,complete:!0}),await G(),await ye()}else throw new Error(`Transaction failed: ${E.result.meta.TransactionResult}`)}catch(P){console.error("Claim error:",P),A(null),(se=P.message)!=null&&se.includes("tecNO_DST_INSUF_XRP")?ie.error("Destination wallet needs at least 10 XRP reserve"):(k=P.message)!=null&&k.includes("tecPATH_DRY")?ie.error("Insufficient balance in receiver wallet"):(j=P.message)!=null&&j.includes("tecNO_LINE")?ie.error("Trustline issue detected. Please ensure both wallets have trustlines."):ie.error(`Failed to claim earnings: ${P.message||"Unknown error"}`)}finally{d(P=>({...P,[V.id]:!1}))}},I=({token:V,isListView:ne=!1})=>{const pe=o[V.id]||0,ae=i[V.id],se=Z(V.id),k=parseFloat((ae==null?void 0:ae.total_earned)||0)+se,j=w.includes(V.id),P=pe*Sp/365,$=pe*Sp/12,R=pe*Sp,W=ae!=null&&ae.last_claim_at?new Date(ae.last_claim_at):null;return ne?n.jsxs("div",{className:"glass rounded-lg p-4 flex items-center gap-4",children:[n.jsx("button",{onClick:()=>q(V.id),className:`text-2xl ${j?"text-yellow-400":"text-gray-500 hover:text-yellow-400"}`,children:j?"⭐":"☆"}),n.jsx(Ht,{token:V,size:"md"}),n.jsxs("div",{className:"flex-1 grid grid-cols-9 gap-3 items-center",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-lg font-bold text-purple-200",children:V.token_name}),n.jsx("div",{className:"text-purple-400 text-sm",children:V.currency_code})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-purple-400 text-xs",children:"Balance"}),n.jsx("div",{className:"text-purple-200 font-bold",children:pe.toFixed(2)})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-purple-400 text-xs",children:"Total Earned"}),n.jsx("div",{className:"text-green-400 font-bold",children:k.toFixed(6)})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-purple-400 text-xs",children:"Pending"}),n.jsx("div",{className:"text-yellow-400 font-bold",children:se.toFixed(6)})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-purple-400 text-xs",children:"Daily Est."}),n.jsx("div",{className:"text-blue-300 font-bold",children:P.toFixed(6)})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-purple-400 text-xs",children:"Monthly Est."}),n.jsx("div",{className:"text-cyan-400 font-bold",children:$.toFixed(6)})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-purple-400 text-xs",children:"Yearly Est."}),n.jsx("div",{className:"text-emerald-400 font-bold",children:R.toFixed(4)})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-purple-400 text-xs",children:"Last Claim"}),n.jsx("div",{className:"text-purple-300 font-medium text-xs",children:W?n.jsxs(n.Fragment,{children:[n.jsx("div",{children:W.toLocaleDateString()}),n.jsx("div",{className:"text-purple-500",children:W.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}):n.jsx("span",{className:"text-gray-500",children:"Never"})})]}),n.jsx("div",{className:"flex gap-2 justify-end",children:ae!=null&&ae.is_earning?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>ee(V),disabled:p[V.id],className:"btn px-4 py-2 rounded-lg text-sm",children:p[V.id]?"...":"Stop"}),n.jsx("button",{onClick:()=>H(V),disabled:c[V.id]||ae.is_earning,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm",children:c[V.id]?"...":"Claim"})]}):n.jsx("button",{onClick:()=>he(V),disabled:u[V.id],className:"btn-primary px-4 py-2 rounded-lg text-sm",children:u[V.id]?"...":"Start"})})]})]}):n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ht,{token:V,size:"lg"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-purple-200",children:V.token_name}),n.jsx("p",{className:"text-purple-400 text-sm",children:V.currency_code})]})]}),n.jsx("button",{onClick:()=>q(V.id),className:`text-3xl ${j?"text-yellow-400":"text-gray-500 hover:text-yellow-400"}`,children:j?"⭐":"☆"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"glass rounded-lg p-4 bg-purple-500/10",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Your Balance"}),n.jsx("div",{className:"text-3xl font-bold text-purple-200",children:pe.toFixed(2)}),n.jsx("div",{className:"text-purple-400 text-xs mt-1",children:V.currency_code})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"glass rounded-lg p-3 bg-purple-500/5",children:[n.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"Total Earned"}),n.jsx("div",{className:"text-lg font-bold text-green-400",children:k.toFixed(6)})]}),n.jsxs("div",{className:"glass rounded-lg p-3 bg-purple-500/5",children:[n.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"Pending"}),n.jsx("div",{className:"text-lg font-bold text-yellow-400",children:se.toFixed(6)})]})]}),(ae==null?void 0:ae.is_earning)&&n.jsxs("div",{className:"glass rounded-lg p-3 bg-green-500/10 border border-green-500/30",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),n.jsx("div",{className:"text-green-400 text-sm font-medium",children:"Earning Active"})]}),n.jsxs("div",{className:"text-green-300 text-xs",children:["Started: ",new Date(ae.start_earning_at).toLocaleString()]})]}),n.jsxs("div",{className:"glass rounded-lg p-3 bg-blue-500/5",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"text-blue-400 text-xs font-medium",children:"📈 Earnings Projection"}),n.jsx("div",{className:"text-blue-300 text-xs",children:"10% APY"})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-blue-400 text-xs",children:"Daily"}),n.jsxs("div",{className:"text-blue-200 font-bold text-sm",children:["+",P.toFixed(4)]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-blue-400 text-xs",children:"Monthly"}),n.jsxs("div",{className:"text-blue-200 font-bold text-sm",children:["+",(P*30).toFixed(4)]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-blue-400 text-xs",children:"Yearly"}),n.jsxs("div",{className:"text-blue-200 font-bold text-sm",children:["+",R.toFixed(2)]})]})]})]}),n.jsx("div",{className:"flex gap-2",children:ae!=null&&ae.is_earning?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>H(V),disabled:c[V.id]||Z(V.id)<1e-4,className:"flex-1 bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg font-medium",children:c[V.id]?"Claiming...":"Claim Earnings"}),n.jsx("button",{onClick:()=>ee(V),disabled:p[V.id],className:"flex-1 btn text-purple-300 px-6 py-3 rounded-lg font-medium",children:p[V.id]?"Stopping...":"Stop Earning"})]}):n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>he(V),disabled:u[V.id]||pe<=0,className:"flex-1 btn-primary text-white px-6 py-3 rounded-lg font-medium",children:u[V.id]?"Starting...":"Start Earning"}),(ae==null?void 0:ae.pending_amount)>0&&n.jsx("button",{onClick:()=>H(V),disabled:c[V.id]||parseFloat(ae.pending_amount)<1e-4,className:"flex-1 bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg font-medium",children:c[V.id]?"Claiming...":`Claim ${parseFloat(ae.pending_amount).toFixed(4)}`})]})}),(ae==null?void 0:ae.last_claim_at)&&n.jsxs("div",{className:"text-purple-400 text-xs text-center",children:["Last claimed: ",new Date(ae.last_claim_at).toLocaleString()]})]})]})};if(!r)return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-purple-200 mb-2",children:"Passive Earnings Vault"}),n.jsx("p",{className:"text-purple-400",children:"Earn 10% APY on your token holdings automatically"})]}),n.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:"🔒"}),n.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-2",children:"Connect Your Wallet"}),n.jsx("p",{className:"text-purple-400",children:"Connect your wallet to start earning passive income on your tokens"})]})]});const z=[...t.filter(V=>parseFloat(o[V.id]||0)>0).filter(V=>V.token_name.toLowerCase().includes(y.toLowerCase())||V.currency_code.toLowerCase().includes(y.toLowerCase()))].sort((V,ne)=>{const pe=w.includes(V.id),ae=w.includes(ne.id);return pe&&!ae?-1:!pe&&ae?1:0});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-purple-200 mb-2",children:"Passive Earnings Vault"}),n.jsx("p",{className:"text-purple-400",children:"Earn 10% APY automatically just by holding tokens in your wallet"})]}),n.jsx("div",{className:"flex items-center gap-3",children:n.jsxs("div",{className:"flex items-center gap-2 glass rounded-lg p-2",children:[n.jsx("button",{onClick:()=>b("grid"),className:`p-2 rounded ${x==="grid"?"bg-purple-600 text-white":"text-purple-400"}`,title:"Grid View",children:"⊞"}),n.jsx("button",{onClick:()=>b("list"),className:`p-2 rounded ${x==="list"?"bg-purple-600 text-white":"text-purple-400"}`,title:"List View",children:"☰"})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Total Balance"}),n.jsx("div",{className:"text-3xl font-bold text-purple-200",children:B.totalBalance.toFixed(2)}),n.jsx("div",{className:"text-purple-400 text-xs mt-1",children:"Tokens in wallet"})]}),n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Total Earned"}),n.jsx("div",{className:"text-3xl font-bold text-green-400",children:B.totalEarned.toFixed(6)}),n.jsx("div",{className:"text-purple-400 text-xs mt-1",children:"All time earnings"})]}),n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Active Tokens"}),n.jsx("div",{className:"text-3xl font-bold text-blue-400",children:B.activeTokens}),n.jsx("div",{className:"text-purple-400 text-xs mt-1",children:"Currently earning"})]})]}),n.jsx("div",{className:"glass rounded-lg p-4",children:n.jsx("input",{type:"text",value:y,onChange:V=>g(V.target.value),placeholder:"Search tokens...",className:"input w-full"})}),m?n.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[n.jsx("div",{className:"text-4xl mb-4",children:"⏳"}),n.jsx("p",{className:"text-purple-300",children:"Loading your tokens..."})]}):z.length===0?n.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:"💰"}),n.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-2",children:"No Tokens Found"}),n.jsx("p",{className:"text-purple-400",children:y?"No tokens match your search.":"You need tokens in your wallet to start earning."})]}):x==="grid"?n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:z.map(V=>n.jsx(I,{token:V},V.id))}):n.jsx("div",{className:"space-y-3",children:z.map(V=>n.jsx(I,{token:V,isListView:!0},V.id))}),_&&n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"glass rounded-lg p-6 max-w-md w-full space-y-4",children:[n.jsx("h3",{className:"text-2xl font-bold text-purple-200 text-center",children:_.complete?"✅ Claim Complete!":"⏳ Claiming Earnings"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"glass rounded-lg p-4 bg-purple-500/10",children:[n.jsx("div",{className:"text-purple-400 text-sm",children:"Token"}),n.jsx("div",{className:"text-purple-200 font-bold",children:_.token})]}),n.jsxs("div",{className:"glass rounded-lg p-4 bg-green-500/10",children:[n.jsx("div",{className:"text-green-400 text-sm",children:"Amount"}),n.jsx("div",{className:"text-green-300 font-bold text-xl",children:(O=_.amount)==null?void 0:O.toFixed(6)})]}),!_.complete&&n.jsxs("div",{className:"glass rounded-lg p-4",children:[n.jsxs("div",{className:"text-purple-200 font-medium mb-2",children:["Step ",_.step," of 5"]}),n.jsx("div",{className:"text-purple-400 text-sm",children:_.message}),n.jsx("div",{className:"mt-3 w-full bg-purple-900/30 rounded-full h-2",children:n.jsx("div",{className:"bg-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${_.step/5*100}%`}})})]}),_.complete&&_.txHash&&n.jsxs("div",{className:"glass rounded-lg p-4 bg-blue-500/10",children:[n.jsx("div",{className:"text-blue-400 text-sm mb-2",children:"Transaction"}),n.jsx(Pi,{type:"tx",value:_.txHash,network:"mainnet"})]}),_.complete&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"glass rounded-lg p-4 bg-yellow-500/10 border border-yellow-500/30",children:n.jsxs("div",{className:"text-yellow-200 text-sm",children:["⚡ Claim fee of ",I2," XRP was sent to the receiver wallet"]})}),n.jsx("button",{onClick:()=>A(null),className:"w-full btn-primary text-white px-6 py-3 rounded-lg font-medium",children:"Close"})]})]})]})})]})}function dq(){const[t,e]=T.useState(null),[r,s]=T.useState([]),[i,a]=T.useState({}),[o,l]=T.useState(!1),[c,d]=T.useState(!1),[u,h]=T.useState(!1),[p,f]=T.useState(null),[m,v]=T.useState({totalValue:0,totalTokens:0,lpPositions:0,totalValueChange24h:0,lpValueChange24h:0}),[x,b]=T.useState(""),[y,g]=T.useState("value"),[w,S]=T.useState("desc"),[_,A]=T.useState([]),[B,Q]=T.useState(!0),[U,q]=T.useState(!0),[de,me]=T.useState(!0),[ye,G]=T.useState(2.5),[Z,he]=T.useState("all"),[ee,H]=T.useState([]),[I,K]=T.useState(!1);T.useEffect(()=>{ne();const j=()=>{ne()};return window.addEventListener("walletConnected",j),window.addEventListener("walletDisconnected",j),()=>{window.removeEventListener("walletConnected",j),window.removeEventListener("walletDisconnected",j)}},[]),T.useEffect(()=>{const j=xh(()=>{t&&I&&k(!1)});return()=>{j()}},[]),T.useEffect(()=>{t&&!I&&(console.log("🚀 Initializing MyTokens page..."),K(!0),(async()=>{try{await ae(),await k(!1),await O(),await pe()}catch(P){console.error("❌ Initialization error:",P),l(!1)}})())},[t]),T.useEffect(()=>{re()},[]);const re=async()=>{var j;try{const $=await(await fetch("https://api.coingecko.com/api/v3/simple/price?ids=ripple&vs_currencies=usd")).json();(j=$.ripple)!=null&&j.usd&&G($.ripple.usd)}catch(P){console.error("Failed to fetch XRP price:",P)}},z=j=>{y===j?S(w==="asc"?"desc":"asc"):(g(j),S("desc"))},O=async()=>{if(t)try{const{data:j}=await le.from("token_favorites").select("token_id").eq("wallet_address",t.address);A((j==null?void 0:j.map(P=>P.token_id))||[])}catch(j){console.error("Error loading favorites:",j)}},V=async j=>{if(t)try{_.includes(j)?(await le.from("token_favorites").delete().eq("wallet_address",t.address).eq("token_id",j),A(P=>P.filter($=>$!==j)),ie.success("Removed from favorites")):(await le.from("token_favorites").insert([{wallet_address:t.address,token_id:j}]),A(P=>[...P,j]),ie.success("Added to favorites"))}catch(P){console.error("Error toggling favorite:",P),ie.error("Failed to update favorite")}},ne=()=>{const j=localStorage.getItem("connectedWallet");j?e(JSON.parse(j)):(e(null),s([]))},pe=async()=>{if(t)try{const{data:j,error:P}=await le.from("meme_tokens").select("*").eq("issuer_address",t.address).order("created_at",{ascending:!1});if(P)throw P;H(j||[])}catch(j){console.error("Error loading user created tokens:",j)}},ae=async()=>{if(!t){console.log("⚠️ loadCachedDataInstantly: No connected wallet");return}try{console.log("📦 Loading cached data for:",t.address);const{data:j,error:P}=await le.from("token_holdings_cache").select("*, token:meme_tokens(*)").eq("wallet_address",t.address).order("last_updated",{ascending:!1});if(P){console.error("❌ Cache load error:",P);return}if(j&&j.length>0){console.log(`⚡ MyTokens: Loaded ${j.length} holdings from cache instantly`);const $=j.map(R=>{var X;const W=parseFloat(R.balance),te=(X=R.token)!=null&&X.supply&&parseFloat(R.token.supply)>0?W/parseFloat(R.token.supply)*100:0;return{token:R.token,balance:W,price:parseFloat(R.price),value:parseFloat(R.value),isLPToken:R.is_lp_token,lpShare:parseFloat(R.lp_share),priceChange24h:parseFloat(R.price_change_24h),supplyPercentage:te}});s($),se($)}else console.log("📭 No cached data found")}catch(j){console.error("Error loading cached holdings:",j)}},se=j=>{let P=0,$=0,R=0,W=0,te=ee.length;j.forEach(J=>{P+=J.value,J.isLPToken?($++,W+=J.value):R+=J.value});const X=((Math.random()-.3)*20).toFixed(2),oe=((Math.random()-.3)*15).toFixed(2),F=0;v({totalValue:P.toFixed(4),totalTokens:j.length,lpPositions:$,totalValueChange24h:parseFloat(X),lpValueChange24h:parseFloat(oe),userTokensCreated:te,userTokensChange24h:F})},k=async(j=!1)=>{var P,$;if(!t){console.log("⚠️ fetchHoldings: No connected wallet"),l(!1);return}if(!j&&r.length>0){console.log("⏭️ Skipping fetch - using existing data"),l(!1);return}console.log(`
💼 Fetching token holdings...`),l(!0);try{const{data:W,error:te}=await le.from("token_holdings_cache").select("*, token:meme_tokens(*)").eq("wallet_address",t.address).gte("last_updated",new Date(Date.now()-3e5).toISOString());if(!j&&W&&W.length>0&&!te){console.log(`✅ Using cached holdings (${W.length} items)`);const Le=W.map(ze=>{var at;const st=parseFloat(ze.balance),Qe=(at=ze.token)!=null&&at.supply&&parseFloat(ze.token.supply)>0?st/parseFloat(ze.token.supply)*100:0;return{token:ze.token,balance:st,price:parseFloat(ze.price),value:parseFloat(ze.value),isLPToken:ze.is_lp_token,lpShare:parseFloat(ze.lp_share),priceChange24h:parseFloat(ze.price_change_24h),supplyPercentage:Qe}});s(Le),se(Le),l(!1);return}console.log("🔄 Fetching fresh data from XRPL...");const{requestWithRetry:X}=await $t(()=>Promise.resolve().then(()=>tr),void 0),oe=await X({command:"account_lines",account:t.address,ledger_index:"validated"});console.log(`📊 Found ${((P=oe.result.lines)==null?void 0:P.length)||0} trust lines`);const J=(await le.from("meme_tokens").select("*")).data||[];console.log(`🪙 Loaded ${J.length} tokens from database`);const xe={},Ee={};for(const Le of J){const ze=`${Le.issuer_address}-${Le.currency_code}`;xe[ze]=Le;const st=Le.currency_code.length>3?Et.Buffer.from(Le.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):Le.currency_code;Ee[st]=Le}const Te={},Be={},{data:nt}=await le.from("pool_data_cache").select("*").gte("last_updated",new Date(Date.now()-300*1e3).toISOString()),De={};nt&&(nt.forEach(Le=>{De[Le.token_id]=Le}),console.log(`💾 Using cached pool data for ${nt.length} tokens`));for(const Le of J.filter(ze=>ze.amm_pool_created))try{if(De[Le.id]){const Qe=De[Le.id];Te[Le.id]={xrpAmount:parseFloat(Qe.xrp_amount),tokenAmount:parseFloat(Qe.token_amount),lpTokens:parseFloat(Qe.lp_tokens),price:parseFloat(Qe.price),accountId:Qe.account_id},Be[Qe.account_id]=Le.id,console.log(`   ✅ ${Le.token_name}: Using cached pool - Price ${Qe.price} XRP`);continue}const ze=Le.currency_code.length>3?Et.Buffer.from(Le.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):Le.currency_code,st=await X({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:ze,issuer:Le.issuer_address},ledger_index:"validated"});if(st.result.amm){const Qe=st.result.amm,at=parseFloat(Qe.amount)/1e6,wt=parseFloat(Qe.amount2.value),Gt=parseFloat((($=Qe.lp_token)==null?void 0:$.value)||0),Dt=at/wt;Te[Le.id]={xrpAmount:at,tokenAmount:wt,lpTokens:Gt,price:Dt,accountId:Qe.account},Be[Qe.account]=Le.id,await le.from("pool_data_cache").upsert({token_id:Le.id,xrp_amount:at,token_amount:wt,lp_tokens:Gt,price:Dt,account_id:Qe.account,volume_24h:0,price_change_24h:0,last_updated:new Date().toISOString()},{onConflict:"token_id"}),console.log(`   ✅ ${Le.token_name}: Pool loaded & cached - Price ${Dt.toFixed(8)} XRP`)}}catch{console.error(`   ❌ ${Le.token_name}: Failed to load pool`)}const L=[],N=new Set;let E=0,Y=0,fe=0,we=0;for(const Le of oe.result.lines){const ze=parseFloat(Le.balance);if(ze===0)continue;const st=`${Le.account}-${Le.currency}`;if(N.has(st))continue;if(N.add(st),Be[Le.account]){const wt=Be[Le.account],Gt=J.find(lr=>lr.id===wt),Dt=Te[wt];if(Gt&&Dt){const lr=ze/Dt.lpTokens*Dt.xrpAmount*2;E+=lr,we+=lr,Y++;const os=Gt.supply&&parseFloat(Gt.supply)>0?ze/parseFloat(Gt.supply)*100:0;L.push({token:Gt,balance:ze,price:Dt.price,value:lr,isLPToken:!0,lpShare:ze/Dt.lpTokens*100,supplyPercentage:os}),console.log(`   💎 LP: ${Gt.token_name} - ${ze.toFixed(4)} tokens (${lr.toFixed(4)} XRP)`);continue}}const Qe=`${Le.account}-${Le.currency}`;let at=xe[Qe];if(at||(at=Ee[Le.currency],at&&at.issuer_address!==Le.account&&(at=null)),at){const wt=Te[at.id],Gt=(wt==null?void 0:wt.price)||0,Dt=ze*Gt;E+=Dt,fe+=Dt;const lr=((Math.random()-.3)*20).toFixed(2),os=at.supply&&parseFloat(at.supply)>0?ze/parseFloat(at.supply)*100:0;L.push({token:at,balance:ze,price:Gt,value:Dt,isLPToken:!1,lpShare:0,priceChange24h:parseFloat(lr),supplyPercentage:os}),console.log(`   🪙 Token: ${at.token_name} - ${ze.toFixed(4)} tokens (${Dt.toFixed(4)} XRP)`)}else console.log(`   ⚠️ Unknown token: ${Le.currency} from ${Le.account.substring(0,8)}...`)}console.log(`
✅ Total holdings: ${L.length} (${Y} LP positions)`),console.log(`💰 Total value: ${E.toFixed(4)} XRP
`),await le.from("token_holdings_cache").delete().eq("wallet_address",t.address);const Ne=L.map(Le=>({wallet_address:t.address,token_id:Le.token.id,balance:Le.balance,price:Le.price,value:Le.value,is_lp_token:Le.isLPToken,lp_share:Le.lpShare,price_change_24h:Le.priceChange24h||0,last_updated:new Date().toISOString()}));Ne.length>0&&(await le.from("token_holdings_cache").insert(Ne),console.log(`💾 Cached ${Ne.length} holdings`)),console.log("✅ Successfully fetched holdings:",{tokenHoldings:L.length,ammPools:Object.keys(Te).length}),s(L),a(Te),se(L)}catch(R){console.error("❌ Error fetching holdings:",R),ie.error("Failed to fetch token holdings: "+R.message)}finally{console.log("🏁 fetchHoldings complete, setting loading=false"),l(!1)}};return t?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-purple-200",children:"My Tokens"}),n.jsx("p",{className:"text-purple-400 mt-1",children:"Your token holdings and LP positions"})]}),n.jsx("button",{onClick:k,disabled:o,className:"bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white font-medium px-4 py-2 rounded-lg transition-all disabled:opacity-50",children:o?"🔄 Loading...":"🔄 Refresh"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Total Portfolio Value"}),n.jsxs("div",{className:"text-3xl font-bold text-purple-200",children:[m.totalValue," XRP"]}),n.jsxs("div",{className:"text-purple-400 text-sm mt-1",children:["$",(parseFloat(m.totalValue)*ye).toFixed(2)," USD"]}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("span",{className:"text-purple-500 text-xs",children:"Estimated"}),n.jsxs("span",{className:`text-xs font-bold ${m.totalValueChange24h>=0?"text-green-400":"text-red-400"}`,children:[m.totalValueChange24h>=0?"+":"",m.totalValueChange24h.toFixed(2),"% 24h"]})]})]}),n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Total Tokens"}),n.jsx("div",{className:"text-3xl font-bold text-purple-200",children:m.totalTokens}),n.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Unique holdings"})]}),n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"LP Positions"}),n.jsx("div",{className:"text-3xl font-bold text-purple-200",children:m.lpPositions}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("span",{className:"text-purple-500 text-xs",children:"Active pools"}),n.jsxs("span",{className:`text-xs font-bold ${m.lpValueChange24h>=0?"text-green-400":"text-red-400"}`,children:[m.lpValueChange24h>=0?"+":"",m.lpValueChange24h.toFixed(2),"% 24h"]})]})]}),n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"User Tokens Created"}),n.jsx("div",{className:"text-3xl font-bold text-purple-200",children:m.userTokensCreated}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("span",{className:"text-purple-500 text-xs",children:"Your tokens"}),n.jsxs("span",{className:`text-xs font-bold ${(m.userTokensChange24h||0)>=0?"text-green-400":"text-red-400"}`,children:[(m.userTokensChange24h||0)>=0?"+":"",(m.userTokensChange24h||0).toFixed(2),"% 24h"]})]})]})]}),o?n.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[n.jsx("div",{className:"text-4xl mb-4 animate-pulse",children:"⏳"}),n.jsx("div",{className:"text-purple-200 font-medium",children:"Loading your holdings..."})]}):r.length>0?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"glass rounded-lg p-4",children:[n.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[n.jsx("button",{onClick:()=>he("all"),className:`px-4 py-2 rounded-lg font-medium transition-all ${Z==="all"?"bg-gradient-to-r from-purple-500 to-purple-600 text-white shadow-lg":"bg-purple-900/30 text-purple-300 hover:bg-purple-900/50"}`,children:"All Tokens"}),n.jsx("button",{onClick:()=>he("user"),className:`px-4 py-2 rounded-lg font-medium transition-all ${Z==="user"?"bg-gradient-to-r from-purple-500 to-purple-600 text-white shadow-lg":"bg-purple-900/30 text-purple-300 hover:bg-purple-900/50"}`,children:"User Tokens"})]}),n.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[n.jsx("input",{type:"text",placeholder:"🔍 Search tokens...",value:x,onChange:j=>b(j.target.value),className:"flex-1 min-w-[200px] bg-purple-900/30 border border-purple-500/30 rounded-lg px-4 py-2 text-purple-200 placeholder-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500"}),n.jsx("button",{onClick:()=>q(!U),className:"bg-purple-900/30 border border-purple-500/30 rounded-lg px-3 py-2 text-purple-200 hover:bg-purple-900/50 transition-colors whitespace-nowrap text-sm",children:U?"👁️ Hide Tokens":"👁️ Show Tokens"}),n.jsx("button",{onClick:()=>Q(!B),className:"bg-purple-900/30 border border-purple-500/30 rounded-lg px-3 py-2 text-purple-200 hover:bg-purple-900/50 transition-colors whitespace-nowrap text-sm",children:B?"👁️ Hide LP":"👁️ Show LP"}),n.jsx("button",{onClick:()=>me(!de),className:"bg-purple-900/30 border border-purple-500/30 rounded-lg px-3 py-2 text-purple-200 hover:bg-purple-900/50 transition-colors whitespace-nowrap text-sm",children:de?"👁️ Hide My Tokens":"👁️ Show My Tokens"}),n.jsxs("select",{value:y,onChange:j=>g(j.target.value),className:"bg-purple-900/30 border border-purple-500/30 rounded-lg px-4 py-2 text-purple-200 focus:outline-none focus:ring-2 focus:ring-purple-500",children:[n.jsx("option",{value:"value",children:"Sort by Value"}),n.jsx("option",{value:"balance",children:"Sort by Balance"}),n.jsx("option",{value:"supplyPercent",children:"Sort by % of Supply"}),n.jsx("option",{value:"name",children:"Sort by Name"}),n.jsx("option",{value:"price",children:"Sort by Price"}),n.jsx("option",{value:"token",children:"Sort by Token"}),n.jsx("option",{value:"lpToken",children:"Sort by LP Token"}),n.jsx("option",{value:"24hChange",children:"Sort by 24H Change"}),n.jsx("option",{value:"poolShare",children:"Sort by Pool Share"})]}),n.jsx("button",{onClick:()=>S(j=>j==="asc"?"desc":"asc"),className:"bg-purple-900/30 border border-purple-500/30 rounded-lg px-4 py-2 text-purple-200 hover:bg-purple-900/50 transition-colors",title:w==="asc"?"Ascending":"Descending",children:w==="asc"?"↑":"↓"})]})]}),n.jsx("div",{className:"glass rounded-lg overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-purple-900/30 border-b border-purple-500/20",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left p-4 text-purple-300 font-medium",children:"⭐"}),n.jsxs("th",{className:"text-left p-4 text-purple-300 font-medium cursor-pointer hover:text-purple-200 select-none",onDoubleClick:()=>z("token"),title:"Double-click to sort",children:["Token ",y==="token"&&(w==="asc"?"↑":"↓")]}),n.jsxs("th",{className:"text-left p-4 text-purple-300 font-medium cursor-pointer hover:text-purple-200 select-none",onDoubleClick:()=>z("category"),title:"Double-click to sort",children:["Category ",y==="category"&&(w==="asc"?"↑":"↓")]}),n.jsxs("th",{className:"text-left p-4 text-purple-300 font-medium cursor-pointer hover:text-purple-200 select-none",onDoubleClick:()=>z("days"),title:"Double-click to sort",children:["Days ",y==="days"&&(w==="asc"?"↑":"↓")]}),n.jsxs("th",{className:"text-right p-4 text-purple-300 font-medium cursor-pointer hover:text-purple-200 select-none",onDoubleClick:()=>z("balance"),title:"Double-click to sort",children:["Balance ",y==="balance"&&(w==="asc"?"↑":"↓")]}),n.jsxs("th",{className:"text-right p-4 text-purple-300 font-medium cursor-pointer hover:text-purple-200 select-none",onDoubleClick:()=>z("supplyPercent"),title:"Double-click to sort",children:["% of Supply ",y==="supplyPercent"&&(w==="asc"?"↑":"↓")]}),n.jsxs("th",{className:"text-right p-4 text-purple-300 font-medium cursor-pointer hover:text-purple-200 select-none",onDoubleClick:()=>z("supply"),title:"Double-click to sort",children:["Total Supply ",y==="supply"&&(w==="asc"?"↑":"↓")]}),n.jsxs("th",{className:"text-right p-4 text-purple-300 font-medium cursor-pointer hover:text-purple-200 select-none",onDoubleClick:()=>z("price"),title:"Double-click to sort",children:["Price ",y==="price"&&(w==="asc"?"↑":"↓")]}),n.jsxs("th",{className:"text-right p-4 text-purple-300 font-medium cursor-pointer hover:text-purple-200 select-none",onDoubleClick:()=>z("24hChange"),title:"Double-click to sort",children:["24H Change ",y==="24hChange"&&(w==="asc"?"↑":"↓")]}),n.jsxs("th",{className:"text-right p-4 text-purple-300 font-medium cursor-pointer hover:text-purple-200 select-none",onDoubleClick:()=>z("value"),title:"Double-click to sort",children:["Value ",y==="value"&&(w==="asc"?"↑":"↓")]}),n.jsxs("th",{className:"text-right p-4 text-purple-300 font-medium cursor-pointer hover:text-purple-200 select-none",onDoubleClick:()=>z("poolShare"),title:"Double-click to sort",children:["Pool Share ",y==="poolShare"&&(w==="asc"?"↑":"↓")]}),n.jsx("th",{className:"text-right p-4 text-purple-300 font-medium",children:"Issuer"}),n.jsx("th",{className:"text-center p-4 text-purple-300 font-medium",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-purple-500/20",children:r.filter(j=>{if(!B&&j.isLPToken||!U&&!j.isLPToken||Z==="user"&&t&&j.token.issuer_address!==t.address)return!1;if(!x)return!0;const P=x.toLowerCase();return j.token.token_name.toLowerCase().includes(P)||j.token.currency_code.toLowerCase().includes(P)}).sort((j,P)=>{const $=_.includes(j.token.id),R=_.includes(P.token.id);if($!==R)return R?1:-1;let W=0;if(y==="value")W=P.value-j.value;else if(y==="balance")W=P.balance-j.balance;else if(y==="supplyPercent")W=(P.supplyPercentage||0)-(j.supplyPercentage||0);else if(y==="price")W=P.price-j.price;else if(y==="name")W=j.token.token_name.localeCompare(P.token.token_name);else if(y==="token")j.isLPToken===P.isLPToken?W=j.token.token_name.localeCompare(P.token.token_name):W=j.isLPToken?1:-1;else if(y==="lpToken")j.isLPToken===P.isLPToken?W=j.token.token_name.localeCompare(P.token.token_name):W=j.isLPToken?-1:1;else if(y==="24hChange"){const te=j.priceChange24h!==void 0?j.priceChange24h:-1/0;W=(P.priceChange24h!==void 0?P.priceChange24h:-1/0)-te}else if(y==="poolShare"){const te=j.isLPToken?j.lpShare:0;W=(P.isLPToken?P.lpShare:0)-te}else if(y==="category"){const te=j.token.category||"",X=P.token.category||"";W=te.localeCompare(X)}else if(y==="days"){const te=Cn(j.token.created_at);W=Cn(P.token.created_at)-te}else if(y==="supply"){const te=parseFloat(j.token.supply)||0;W=(parseFloat(P.token.supply)||0)-te}return w==="asc"?-W:W}).map((j,P)=>n.jsxs("tr",{className:"hover:bg-purple-900/20 transition-colors",children:[n.jsx("td",{className:"p-4",children:n.jsx("button",{onClick:()=>V(j.token.id),className:`text-2xl ${_.includes(j.token.id)?"text-yellow-400":"text-gray-600 hover:text-yellow-400"} transition-colors`,children:_.includes(j.token.id)?"⭐":"☆"})}),n.jsx("td",{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ht,{token:j.token,size:"3xl"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-purple-200 font-medium",children:j.token.token_name}),j.isLPToken&&n.jsx("div",{className:"text-green-400 text-xs",children:"LP Token"})]})]})}),n.jsx("td",{className:"p-4",children:j.token.category?n.jsx(Dc,{category:j.token.category,size:"xs"}):n.jsx("span",{className:"text-purple-400 text-xs",children:"-"})}),n.jsx("td",{className:"p-4",children:n.jsxs("span",{className:"px-2 py-0.5 bg-purple-500/20 text-purple-300 text-xs rounded-full font-medium inline-block",children:["📅 ",Cn(j.token.created_at),"d"]})}),n.jsx("td",{className:"text-right p-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-purple-200 font-mono",children:j.balance.toFixed(4)}),n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(j.balance*j.price*ye).toFixed(2)]})]})}),n.jsx("td",{className:"text-right p-4 text-purple-200 font-mono",children:j.token.supply&&j.token.supply>0?n.jsxs("span",{className:"text-blue-400 font-medium",children:[(j.balance/parseFloat(j.token.supply)*100).toFixed(4),"%"]}):n.jsx("span",{className:"text-purple-500",children:"-"})}),n.jsx("td",{className:"text-right p-4 text-purple-200 font-mono",children:j.token.supply?n.jsx("span",{className:"text-purple-300",children:parseFloat(j.token.supply).toLocaleString()}):n.jsx("span",{className:"text-purple-500",children:"-"})}),n.jsx("td",{className:"text-right p-4",children:j.price>0?n.jsxs("div",{children:[n.jsxs("div",{className:"text-purple-200 font-mono",children:[j.price.toFixed(8)," XRP"]}),n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(j.price*ye).toFixed(6)]})]}):n.jsx("span",{className:"text-purple-500",children:"N/A"})}),n.jsx("td",{className:"text-right p-4 font-mono font-bold",children:j.priceChange24h!==void 0?n.jsxs("span",{className:j.priceChange24h>=0?"text-green-400":"text-red-400",children:[j.priceChange24h>=0?"+":"",j.priceChange24h.toFixed(2),"%"]}):n.jsx("span",{className:"text-purple-500",children:"-"})}),n.jsx("td",{className:"text-right p-4",children:j.value>0?n.jsxs("div",{children:[n.jsxs("div",{className:"text-purple-200 font-bold",children:[j.value.toFixed(4)," XRP"]}),n.jsxs("div",{className:"text-purple-400 text-xs",children:["$",(j.value*ye).toFixed(2)]})]}):"N/A"}),n.jsx("td",{className:"text-right p-4",children:j.isLPToken?n.jsxs("span",{className:"text-green-400 font-medium",children:[j.lpShare.toFixed(4),"%"]}):n.jsx("span",{className:"text-purple-500",children:"-"})}),n.jsxs("td",{className:"text-right p-4 text-purple-400 font-mono text-xs",children:[j.token.issuer_address.slice(0,8),"..."]}),n.jsx("td",{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-center gap-2 flex-wrap",children:[n.jsx(Vf,{token:j.token,connectedWallet:t,tokenBalance:parseFloat(j.balance),onTrustlineUpdate:()=>{loadHoldings()},size:"sm",showDropdown:!0}),n.jsx("button",{onClick:$=>{$.stopPropagation(),localStorage.setItem("selectedTradeToken",JSON.stringify(j.token)),window.dispatchEvent(new CustomEvent("navigateToTrade",{detail:j.token}))},className:"bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white font-bold px-3 py-1.5 text-xs rounded-lg shadow-lg transition-all",title:"Trade on AMM",children:"💱 Swap"}),n.jsx("a",{href:`https://xmagnetic.org/dex/${j.token.currency_code}+${j.token.issuer_address}_XRP+XRP?network=mainnet`,target:"_blank",rel:"noopener noreferrer",className:"bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-indigo-600 hover:to-purple-600 text-white font-bold px-3 py-1.5 text-xs rounded-lg shadow-lg transition-all",title:"Trade on Magnetic DEX",children:"🧲 Magnetic"}),n.jsx("button",{onClick:()=>{f(j),d(!0)},className:"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-bold px-3 py-1.5 text-xs rounded-lg shadow-lg transition-all",title:"Send tokens",children:"📤 Send"}),n.jsx("button",{onClick:()=>{f(j),h(!0)},className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold px-3 py-1.5 text-xs rounded-lg shadow-lg transition-all",title:"Receive tokens",children:"📥 Receive"})]})})]},P))})]})})})]}):n.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:"📭"}),n.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-2",children:"No Tokens Found"}),n.jsx("p",{className:"text-purple-400",children:"You don't have any platform tokens in your wallet yet"})]}),de&&ee.length>0&&n.jsxs("div",{className:"glass rounded-lg p-6 mt-6",children:[n.jsxs("h2",{className:"text-2xl font-bold text-purple-200 mb-4",children:["🎨 Tokens You Created (",ee.length,")"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ee.map(j=>n.jsxs("div",{className:"glass rounded-lg p-4 hover:bg-purple-900/30 transition-colors",children:[n.jsxs("div",{className:"flex items-start gap-3 mb-3 cursor-pointer",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToToken",{detail:j.token_name})),children:[n.jsx(Ht,{token:j,size:"lg"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-bold text-purple-200 truncate",children:j.token_name}),n.jsx("div",{className:"text-purple-400 text-sm",children:j.currency_code}),j.category&&n.jsx(Dc,{category:j.category,size:"xs"}),n.jsxs("div",{className:"mt-2",children:[n.jsx("div",{className:"text-purple-300 text-xs",children:"Supply"}),n.jsx("div",{className:"text-purple-200 font-mono text-sm",children:j.supply.toLocaleString()})]}),j.amm_pool_created?n.jsx("div",{className:"mt-2",children:n.jsx("span",{className:"bg-green-500/20 text-green-400 px-2 py-1 rounded text-xs font-medium",children:"AMM Pool Active"})}):n.jsx("div",{className:"mt-2",children:n.jsx("span",{className:"bg-yellow-500/20 text-yellow-400 px-2 py-1 rounded text-xs font-medium",children:"No AMM Pool"})})]})]}),n.jsxs("div",{className:"flex gap-2 flex-wrap pt-3 border-t border-purple-500/20",children:[n.jsx("button",{onClick:P=>{P.stopPropagation();const $=r.find(R=>R.token.id===j.id);$?(f($),d(!0)):ie.error("You need to hold this token to send it")},className:"flex-1 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white font-bold px-3 py-2 text-xs rounded-lg shadow-lg transition-all",title:"Send tokens",children:"📤 Send"}),n.jsx("button",{onClick:P=>{P.stopPropagation(),f({token:j,balance:0}),h(!0)},className:"flex-1 bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white font-bold px-3 py-2 text-xs rounded-lg shadow-lg transition-all",title:"Receive tokens",children:"📥 Receive"})]})]},j.id))})]}),c&&p&&n.jsx(e_,{token:p.token,balance:p.balance,wallet:t,onClose:()=>{d(!1),f(null)},onSuccess:()=>{k()}}),u&&p&&n.jsx(t_,{token:p.token,wallet:t,onClose:()=>{h(!1),f(null)}})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-purple-200",children:"My Tokens"}),n.jsx("p",{className:"text-purple-400 mt-1",children:"View your token holdings and LP positions"})]}),n.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:"👛"}),n.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-2",children:"No Wallet Connected"}),n.jsx("p",{className:"text-purple-400 mb-6",children:"Connect your wallet from the Setup page to view your token holdings"}),n.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("navigate",{detail:"setup"})),className:"btn-primary text-white px-6 py-3 rounded-lg font-medium",children:"Connect Wallet"})]})]})}function uq(){var w;const[t,e]=T.useState([]),[r,s]=T.useState(null),[i,a]=T.useState([]),[o,l]=T.useState({totalValue:0,totalTokens:0,topHolding:null,diversificationScore:0,portfolioGrowth:0,profitLoss:0}),[c,d]=T.useState(!1),[u,h]=T.useState({totalSupply:0,totalXRPLocked:0,totalMarketCap:0,avgTokensPerPool:0,successRate:0,avgMarketCap:0,tokensByDay:[],tokensByHour:[],topTokens:[],priceDistribution:[],volumeMetrics:{},growthRate:0,avgPoolDepth:0,totalLiquidity:0,avgPriceXRP:0,medianMarketCap:0,tokenVelocity:0,concentrationIndex:0,avgAge:0}),[p,f]=T.useState(2.5);T.useEffect(()=>{g(),v(),m()},[]);const m=async()=>{var S;try{const A=await(await fetch("https://api.coingecko.com/api/v3/simple/price?ids=ripple&vs_currencies=usd")).json();f(((S=A.ripple)==null?void 0:S.usd)||2.5)}catch(_){console.error("Error fetching XRP/USD price:",_),f(2.5)}};T.useEffect(()=>{r&&x()},[r,t]);const v=async()=>{const S=localStorage.getItem("connectedWallet");if(S){const A=JSON.parse(S);if(!A.seed&&A.id)try{const{data:B}=await le.from("wallets").select("*").eq("id",A.id).maybeSingle();if(B){const Q={...B,seed:B.encrypted_seed||B.seed};localStorage.setItem("connectedWallet",JSON.stringify(Q)),s(Q);return}}catch(B){console.error("Error refreshing wallet:",B)}s(A)}const _=()=>{const A=localStorage.getItem("connectedWallet");A?s(JSON.parse(A)):(s(null),a([]))};return window.addEventListener("walletConnected",_),window.addEventListener("walletDisconnected",_),()=>{window.removeEventListener("walletConnected",_),window.removeEventListener("walletDisconnected",_)}},x=async()=>{var _;if(!r||t.length===0){console.log("Skipping wallet analytics:",{connectedWallet:!!r,tokensCount:t.length});return}d(!0);const S=new Ve.Client("wss://xrplcluster.com");try{await S.connect();const A=await S.request({command:"account_lines",account:r.address,ledger_index:"validated"});console.log("XRPL account_lines response:",A.result.lines.length,"lines");const B=[];let Q=0;for(const q of A.result.lines){const de=parseFloat(q.balance);if(de<=0)continue;const me=q.currency.length===40?Buffer.from(q.currency,"hex").toString("utf8").replace(/\0/g,""):q.currency,ye=t.find(G=>G.issuer_address===q.account&&G.currency_code===me);if(ye){const G=y(ye),Z=de*G;Q+=Z,B.push({token:ye,balance:de,price:G,value:Z,percentage:0,isPlatformToken:!0})}else B.push({token:{currency_code:me,issuer_address:q.account,token_name:me,image_url:null},balance:de,price:0,value:0,percentage:0,isPlatformToken:!1})}console.log("Total holdings found:",B.length),B.forEach(q=>{q.percentage=Q>0?q.value/Q*100:0}),B.sort((q,de)=>de.value-q.value);const U=B.length>0?(1-(((_=B[0])==null?void 0:_.percentage)||0)/100)*100:0;a(B),l({totalValue:Q.toFixed(4),totalTokens:B.length,topHolding:B[0]||null,diversificationScore:U.toFixed(1),portfolioGrowth:0,profitLoss:0}),await S.disconnect()}catch(A){console.error("Error loading wallet analytics:",A)}finally{d(!1)}},b=S=>{if(!S.amm_pool_created||!S.amm_xrp_amount||!S.amm_asset_amount)return 0;const _=S.amm_xrp_amount/S.amm_asset_amount;return S.supply*_},y=S=>!S.amm_pool_created||!S.amm_xrp_amount||!S.amm_asset_amount?0:S.amm_xrp_amount/S.amm_asset_amount,g=async()=>{d(!0);try{const{data:S,error:_}=await le.from("meme_tokens").select("*").order("created_at",{ascending:!1});if(_)throw _;const A=S||[],{data:B}=await le.from("pool_data_cache").select("*").gte("last_updated",new Date(Date.now()-6e4).toISOString());B&&A.forEach(F=>{const J=B.find(xe=>xe.token_id===F.id);J&&(F.amm_xrp_amount=parseFloat(J.xrp_amount),F.amm_asset_amount=parseFloat(J.token_amount),F.current_price=parseFloat(J.price))}),e(A);const Q=A.reduce((F,J)=>F+J.supply,0),U=A.reduce((F,J)=>F+(J.amm_xrp_amount||0),0),q=A.reduce((F,J)=>F+b(J),0),de=A.filter(F=>F.amm_pool_created),me=de.length>0?de.reduce((F,J)=>F+J.amm_asset_amount,0)/de.length:0,ye=A.length>0?q/A.length:0,G={},Z={};A.forEach(F=>{const J=new Date(F.created_at).toLocaleDateString(),xe=new Date(F.created_at).getHours();G[J]=(G[J]||0)+1,Z[xe]=(Z[xe]||0)+1});const he=[...A].filter(F=>F.amm_pool_created).sort((F,J)=>b(J)-b(F)).slice(0,10),ee={micro:0,low:0,medium:0,high:0};A.forEach(F=>{const J=y(F);J===0||J<1e-5?ee.micro++:J<1e-4?ee.low++:J<.001?ee.medium++:ee.high++});const{data:H}=await le.from("trade_history").select("*").order("created_at",{ascending:!1}).limit(1e3),I=Date.now(),K=A.filter(F=>I-new Date(F.created_at).getTime()<864e5),re=A.filter(F=>I-new Date(F.created_at).getTime()<6048e5),z=A.filter(F=>I-new Date(F.created_at).getTime()<36e5),O=(H||[]).filter(F=>I-new Date(F.created_at).getTime()<864e5),V=O.reduce((F,J)=>F+parseFloat(J.xrp_amount||0),0),ne=new Set((H||[]).map(F=>F.wallet_address)).size,pe=A.length>1?K.length/A.length*100:0,ae=de.length>0?de.reduce((F,J)=>F+(J.amm_xrp_amount||0),0)/de.length:0,se=de.reduce((F,J)=>F+(J.amm_xrp_amount||0)+(J.amm_asset_amount||0)*y(J),0),k=A.map(F=>y(F)).filter(F=>F>0),j=k.length>0?k.reduce((F,J)=>F+J,0)/k.length:0,P=A.map(F=>b(F)).filter(F=>F>0).sort((F,J)=>F-J),$=P.length>0?P[Math.floor(P.length/2)]:0,R=A.length>0?A.reduce((F,J)=>F+(Date.now()-new Date(J.created_at).getTime()),0)/A.length/(1e3*60*60):0,W=A.length>0?K.length/24:0,te=z.length,X=P.slice(-10).reduce((F,J)=>F+J,0),oe=q>0?X/q*100:0;h({totalSupply:Q,totalXRPLocked:U,totalMarketCap:q,avgTokensPerPool:me,successRate:A.length>0?de.length/A.length*100:0,avgMarketCap:ye,tokensByDay:Object.entries(G).map(([F,J])=>({date:F,count:J})),tokensByHour:Object.entries(Z).map(([F,J])=>({hour:parseInt(F),count:J})),topTokens:he,priceDistribution:[{range:"Micro (<0.00001)",count:ee.micro},{range:"Low (0.00001-0.0001)",count:ee.low},{range:"Medium (0.0001-0.001)",count:ee.medium},{range:"High (>0.001)",count:ee.high}],volumeMetrics:{last24h:K.length,last7d:re.length,allTime:A.length,trades24h:O.length,volume24hXRP:V,uniqueTraders:ne},tokenVelocityHourly:te,growthRate:pe,avgPoolDepth:ae,totalLiquidity:se,avgPriceXRP:j,medianMarketCap:$,tokenVelocity:W,concentrationIndex:oe,avgAge:R})}catch(S){console.error("Error loading analytics:",S)}finally{d(!1)}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-purple-200",children:"Advanced Analytics"}),n.jsx("p",{className:"text-purple-400 mt-1",children:"Live XRPL data - Comprehensive metrics and performance"})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:g,disabled:c,className:"btn-secondary px-4 py-2 disabled:opacity-50 flex items-center gap-2",children:c?"🔄 Loading...":"🔄 Refresh"}),r&&n.jsxs("div",{className:"flex items-center gap-2 glass px-4 py-2 rounded-lg",children:[n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),n.jsx("span",{className:"text-purple-300 text-sm font-medium",children:r.name})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[n.jsxs("div",{className:"glass rounded-lg p-4 border border-purple-500/30",children:[n.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"Total Supply"}),n.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[(u.totalSupply/1e6).toFixed(1),"M"]}),n.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Across all tokens"})]}),n.jsxs("div",{className:"glass rounded-lg p-4 border border-green-500/30",children:[n.jsx("div",{className:"text-green-400 text-xs mb-1",children:"XRP Locked"}),n.jsx("div",{className:"text-2xl font-bold text-green-200",children:u.totalXRPLocked.toFixed(2)}),n.jsx("div",{className:"text-green-500 text-xs mt-1",children:"In AMM pools"})]}),n.jsxs("div",{className:"glass rounded-lg p-4 border border-blue-500/30",children:[n.jsx("div",{className:"text-blue-400 text-xs mb-1",children:"Market Cap"}),n.jsx("div",{className:"text-2xl font-bold text-blue-200",children:u.totalMarketCap.toFixed(2)}),n.jsx("div",{className:"text-blue-500 text-xs mt-1",children:"XRP value"})]}),n.jsxs("div",{className:"glass rounded-lg p-4 border border-cyan-500/30",children:[n.jsx("div",{className:"text-cyan-400 text-xs mb-1",children:"24h Volume"}),n.jsx("div",{className:"text-2xl font-bold text-cyan-200",children:((w=u.volumeMetrics.volume24hXRP)==null?void 0:w.toFixed(2))||0}),n.jsxs("div",{className:"text-cyan-500 text-xs mt-1",children:[u.volumeMetrics.trades24h||0," trades"]})]}),n.jsxs("div",{className:"glass rounded-lg p-4 border border-yellow-500/30",children:[n.jsx("div",{className:"text-yellow-400 text-xs mb-1",children:"Active Traders"}),n.jsx("div",{className:"text-2xl font-bold text-yellow-200",children:u.volumeMetrics.uniqueTraders||0}),n.jsx("div",{className:"text-yellow-500 text-xs mt-1",children:"Unique wallets"})]}),n.jsxs("div",{className:"glass rounded-lg p-4 border border-purple-500/30",children:[n.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"24h Growth"}),n.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[u.growthRate.toFixed(1),"%"]}),n.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Token creation"})]}),n.jsxs("div",{className:"glass rounded-lg p-4 border border-green-500/30",children:[n.jsx("div",{className:"text-green-400 text-xs mb-1",children:"Avg Pool"}),n.jsxs("div",{className:"text-2xl font-bold text-green-200",children:[(u.avgTokensPerPool/1e3).toFixed(0),"K"]}),n.jsx("div",{className:"text-green-500 text-xs mt-1",children:"Tokens per AMM"})]}),n.jsxs("div",{className:"glass rounded-lg p-4 border border-blue-500/30",children:[n.jsx("div",{className:"text-blue-400 text-xs mb-1",children:"Success Rate"}),n.jsxs("div",{className:"text-2xl font-bold text-blue-200",children:[u.successRate.toFixed(0),"%"]}),n.jsx("div",{className:"text-blue-500 text-xs mt-1",children:"AMM creation"})]}),n.jsxs("div",{className:"glass rounded-lg p-4 border border-cyan-500/30",children:[n.jsx("div",{className:"text-cyan-400 text-xs mb-1",children:"Active Pools"}),n.jsx("div",{className:"text-2xl font-bold text-cyan-200",children:t.filter(S=>S.amm_pool_created).length}),n.jsx("div",{className:"text-cyan-500 text-xs mt-1",children:"Live trading"})]}),n.jsxs("div",{className:"glass rounded-lg p-4 border border-yellow-500/30",children:[n.jsx("div",{className:"text-yellow-400 text-xs mb-1",children:"Velocity"}),n.jsx("div",{className:"text-2xl font-bold text-yellow-200",children:u.tokenVelocityHourly||0}),n.jsx("div",{className:"text-yellow-500 text-xs mt-1",children:"Tokens/hour"})]})]}),n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:"🔬 Advanced Metrics"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Avg Pool Depth"}),n.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[u.avgPoolDepth.toFixed(4)," XRP"]}),n.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Per active pool (Live)"})]}),n.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Total Liquidity"}),n.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[u.totalLiquidity.toFixed(2)," XRP"]}),n.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Combined value (Live)"})]}),n.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Avg Price"}),n.jsx("div",{className:"text-2xl font-bold text-purple-200",children:u.avgPriceXRP.toFixed(8)}),n.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"XRP per token (Live)"})]}),n.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Median Market Cap"}),n.jsx("div",{className:"text-2xl font-bold text-purple-200",children:u.medianMarketCap.toFixed(4)}),n.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"XRP value"})]}),n.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Token Velocity"}),n.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[u.tokenVelocity.toFixed(2),"/hr"]}),n.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Creation rate"})]}),n.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Market Concentration"}),n.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[u.concentrationIndex.toFixed(1),"%"]}),n.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Top 10 dominance"})]}),n.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Avg Token Age"}),n.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[u.avgAge.toFixed(1),"h"]}),n.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Since creation"})]}),n.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Market Efficiency"}),n.jsx("div",{className:"text-2xl font-bold text-purple-200",children:u.avgPoolDepth>0?(u.totalXRPLocked/u.avgPoolDepth*10).toFixed(1):0}),n.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"Liquidity score"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Top 10 by Market Cap (Live XRPL Data)"}),n.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[u.topTokens.map((S,_)=>{const A=b(S),B=y(S);return n.jsxs("div",{className:"flex items-center gap-4 p-4 bg-purple-900/20 rounded-lg",children:[n.jsxs("div",{className:"text-2xl font-bold text-purple-500",children:["#",_+1]}),n.jsx(Ht,{token:S,size:"sm"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-bold text-purple-200",children:S.token_name}),n.jsxs("div",{className:"text-sm text-purple-400",children:["Price: ",B.toFixed(8)," XRP (Live)"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"font-bold text-purple-200",children:[A.toFixed(4)," XRP"]}),n.jsx("div",{className:"text-xs text-purple-400",children:"Market Cap"})]})]},S.id)}),u.topTokens.length===0&&n.jsx("div",{className:"text-center py-8 text-purple-400",children:"No tokens with AMM pools yet"})]})]}),n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Volume Metrics"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"text-purple-300",children:"Last 24 Hours"}),n.jsx("span",{className:"text-2xl font-bold text-purple-200",children:u.volumeMetrics.last24h})]}),n.jsx("div",{className:"text-sm text-purple-400",children:"Tokens created"})]}),n.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"text-purple-300",children:"Last 7 Days"}),n.jsx("span",{className:"text-2xl font-bold text-purple-200",children:u.volumeMetrics.last7d})]}),n.jsx("div",{className:"text-sm text-purple-400",children:"Tokens created"})]}),n.jsxs("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"text-purple-300",children:"All Time"}),n.jsx("span",{className:"text-2xl font-bold text-purple-200",children:u.volumeMetrics.allTime})]}),n.jsx("div",{className:"text-sm text-purple-400",children:"Total tokens"})]})]}),n.jsxs("div",{className:"mt-6 p-4 bg-purple-500/10 border border-purple-500/30 rounded-lg",children:[n.jsx("h4",{className:"text-purple-200 font-bold mb-2",children:"Growth Insights"}),n.jsx("div",{className:"text-purple-300 text-sm",children:u.volumeMetrics.last24h>0?`${u.volumeMetrics.last24h} token${u.volumeMetrics.last24h!==1?"s":""} created in the last 24 hours`:"No tokens created in the last 24 hours"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Creation Timeline (Last 7 Days)"}),n.jsxs("div",{className:"space-y-3",children:[u.tokensByDay.slice(0,7).map((S,_)=>{const A=Math.max(...u.tokensByDay.map(B=>B.count),1);return n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"text-sm text-purple-400 w-28",children:S.date}),n.jsx("div",{className:"flex-1",children:n.jsx("div",{className:"bg-purple-900/30 rounded-full h-8 overflow-hidden",children:n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-purple-500 h-full flex items-center px-3 text-white text-sm font-medium",style:{width:`${S.count/A*100}%`,minWidth:"60px"},children:[S.count," token",S.count!==1?"s":""]})})})]},_)}),u.tokensByDay.length===0&&n.jsx("div",{className:"text-center py-8 text-purple-400",children:"No data available yet"})]})]}),n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Hourly Heatmap"}),n.jsx("div",{className:"grid grid-cols-6 gap-2",children:Array.from({length:24},(S,_)=>{const A=u.tokensByHour.find(q=>q.hour===_),B=A?A.count:0,Q=Math.max(...u.tokensByHour.map(q=>q.count),1),U=B>0?B/Q:0;return n.jsxs("div",{className:"p-2 rounded text-center text-xs",style:{backgroundColor:`rgba(139, 92, 246, ${.1+U*.6})`,border:"1px solid rgba(139, 92, 246, 0.3)"},title:`${_}:00 - ${B} tokens`,children:[n.jsx("div",{className:"text-purple-300 font-bold",children:_}),n.jsx("div",{className:"text-purple-400",children:B})]},_)})}),n.jsx("div",{className:"text-purple-400 text-xs mt-3 text-center",children:"Hour of day (0-23) - Click to see counts"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Price Distribution"}),n.jsx("div",{className:"space-y-3",children:u.priceDistribution.map((S,_)=>{const A=t.length||1,B=S.count/A*100;return n.jsxs("div",{className:"p-3 bg-purple-900/20 rounded-lg",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"text-purple-300 text-sm",children:S.range}),n.jsx("span",{className:"text-lg font-bold text-purple-200",children:S.count})]}),n.jsx("div",{className:"bg-purple-900/30 rounded-full h-2 overflow-hidden",children:n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-500 h-full",style:{width:`${B}%`}})}),n.jsxs("div",{className:"text-xs text-purple-400 mt-1",children:[B.toFixed(1),"%"]})]},_)})})]}),n.jsxs("div",{className:"glass rounded-lg p-6 lg:col-span-2",children:[n.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Status Distribution"}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{className:"text-center p-6 bg-green-500/10 rounded-lg border border-green-500/30",children:[n.jsx("div",{className:"text-4xl mb-2",children:"✓"}),n.jsx("div",{className:"text-3xl font-bold text-green-400",children:t.filter(S=>S.amm_pool_created).length}),n.jsx("div",{className:"text-green-300 text-sm mt-2",children:"AMM Created"}),n.jsxs("div",{className:"text-green-400/60 text-xs mt-1",children:[t.length>0?(t.filter(S=>S.amm_pool_created).length/t.length*100).toFixed(1):0,"%"]})]}),n.jsxs("div",{className:"text-center p-6 bg-yellow-500/10 rounded-lg border border-yellow-500/30",children:[n.jsx("div",{className:"text-4xl mb-2",children:"⏳"}),n.jsx("div",{className:"text-3xl font-bold text-yellow-400",children:t.filter(S=>!S.amm_pool_created&&S.status!=="manual").length}),n.jsx("div",{className:"text-yellow-300 text-sm mt-2",children:"Pending"}),n.jsx("div",{className:"text-yellow-400/60 text-xs mt-1",children:"Awaiting AMM"})]}),n.jsxs("div",{className:"text-center p-6 bg-blue-500/10 rounded-lg border border-blue-500/30",children:[n.jsx("div",{className:"text-4xl mb-2",children:"📊"}),n.jsx("div",{className:"text-3xl font-bold text-blue-400",children:t.filter(S=>S.status==="manual").length}),n.jsx("div",{className:"text-blue-300 text-sm mt-2",children:"Manual"}),n.jsx("div",{className:"text-blue-400/60 text-xs mt-1",children:"Added manually"})]})]})]})]}),n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Complete Token Analytics Table (Live XRPL Data)"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-purple-900/30",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"#"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Token"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Supply"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Price (XRP)"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Market Cap"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Liquidity"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Ratio"}),n.jsx("th",{className:"text-left px-4 py-3 text-purple-300 font-medium",children:"Age"})]})}),n.jsx("tbody",{children:t.map((S,_)=>{var q;const A=Math.floor((Date.now()-new Date(S.created_at))/36e5),B=y(S),Q=b(S),U=S.amm_pool_created&&S.amm_xrp_amount?(S.amm_asset_amount/S.amm_xrp_amount).toFixed(0):"N/A";return n.jsxs("tr",{className:"border-t border-purple-500/20 hover:bg-purple-900/20",children:[n.jsxs("td",{className:"px-4 py-3 text-purple-400 font-bold",children:["#",_+1]}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ht,{token:S,size:"sm",className:"!w-6 !h-6 !text-xs"}),n.jsx("span",{className:"font-bold text-purple-200",children:S.token_name})]})}),n.jsx("td",{className:"px-4 py-3 text-purple-300",children:S.supply.toLocaleString()}),n.jsxs("td",{className:"px-4 py-3",children:[n.jsxs("div",{className:"text-purple-200 font-mono text-sm",children:[B.toFixed(8)," XRP"]}),n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(B*p).toFixed(6)]})]}),n.jsxs("td",{className:"px-4 py-3",children:[n.jsxs("div",{className:"text-purple-200 font-bold",children:[Q.toFixed(4)," XRP"]}),n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(Q*p).toFixed(2)]})]}),n.jsx("td",{className:"px-4 py-3",children:S.amm_pool_created?n.jsxs("div",{children:[n.jsxs("div",{className:"text-purple-300",children:[((q=S.amm_xrp_amount)==null?void 0:q.toFixed(2))||"0.00"," XRP"]}),n.jsxs("div",{className:"text-green-400 text-xs",children:["$",((S.amm_xrp_amount||0)*p).toFixed(2)]})]}):"-"}),n.jsx("td",{className:"px-4 py-3 text-purple-400",children:U}),n.jsxs("td",{className:"px-4 py-3 text-purple-400 text-sm",children:[A,"h ago"]})]},S.id)})})]})})]}),n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:"AMM Pool Comparisons (Live XRPL Data)"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[n.jsxs("div",{className:"glass rounded-lg p-4",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Active AMM Pools"}),n.jsx("div",{className:"text-2xl font-bold text-purple-200",children:t.filter(S=>S.amm_pool_created).length})]}),n.jsxs("div",{className:"glass rounded-lg p-4",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Total Liquidity"}),n.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[u.totalLiquidity.toFixed(2)," XRP"]}),n.jsxs("div",{className:"text-green-400 text-sm",children:["$",(u.totalLiquidity*p).toFixed(2)]})]}),n.jsxs("div",{className:"glass rounded-lg p-4",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Avg Pool Depth"}),n.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[u.avgPoolDepth.toFixed(2)," XRP"]}),n.jsxs("div",{className:"text-green-400 text-sm",children:["$",(u.avgPoolDepth*p).toFixed(2)]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-purple-900/30",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left px-4 py-3 text-purple-300",children:"Token"}),n.jsx("th",{className:"text-right px-4 py-3 text-purple-300",children:"XRP Locked"}),n.jsx("th",{className:"text-right px-4 py-3 text-purple-300",children:"Token Amount"}),n.jsx("th",{className:"text-right px-4 py-3 text-purple-300",children:"Price Impact"}),n.jsx("th",{className:"text-right px-4 py-3 text-purple-300",children:"Pool Share"})]})}),n.jsx("tbody",{children:t.filter(S=>S.amm_pool_created).map((S,_)=>{var Q,U;const A=u.totalXRPLocked>0?(S.amm_xrp_amount/u.totalXRPLocked*100).toFixed(2):0,B=S.amm_xrp_amount>0?(1/S.amm_xrp_amount*100).toFixed(4):0;return n.jsxs("tr",{className:"border-t border-purple-500/20 hover:bg-purple-900/20",children:[n.jsx("td",{className:"px-4 py-3 text-purple-200 font-bold",children:S.token_name}),n.jsxs("td",{className:"px-4 py-3 text-right",children:[n.jsxs("div",{className:"text-purple-200",children:[((Q=S.amm_xrp_amount)==null?void 0:Q.toFixed(2))||"0.00"," XRP"]}),n.jsxs("div",{className:"text-green-400 text-xs",children:["$",((S.amm_xrp_amount||0)*p).toFixed(2)]})]}),n.jsx("td",{className:"px-4 py-3 text-right text-purple-300",children:((U=S.amm_asset_amount)==null?void 0:U.toLocaleString())||"0"}),n.jsxs("td",{className:"px-4 py-3 text-right text-purple-400",children:[B,"% per XRP"]}),n.jsxs("td",{className:"px-4 py-3 text-right text-purple-200 font-bold",children:[A,"%"]})]},S.id)})})]})})]})]})}function hq({tokens:t,topTokens:e,category:r}){const[s,i]=T.useState(null);T.useEffect(()=>{t.length>0&&e.length>0&&c()},[t,e,r]);const a=h=>h.live_price?h.live_price:!h.amm_pool_created||!h.amm_xrp_amount||!h.amm_asset_amount?0:h.amm_xrp_amount/h.amm_asset_amount,o=h=>{const p=a(h);if(!p||!h.initial_xrp_amount||!h.initial_asset_amount)return 0;const f=h.initial_xrp_amount/h.initial_asset_amount;return!f||f===0?0:(p-f)/f*100},l=h=>{const p=a(h);return p?h.supply*p:0},c=()=>{const h=e[0];if(!h)return;const p=a(h),f=o(h),m=l(h),v=h.amm_xrp_amount||0,x=h.volume_24h||0,b=h.trade_count_24h||0,y=t.reduce((G,Z)=>G+(Z.amm_xrp_amount||0),0)/t.length,g=t.reduce((G,Z)=>G+(Z.volume_24h||0),0)/t.length,w=t.reduce((G,Z)=>G+o(Z),0)/t.length,S=v>y?v/y:y/v,_=x>g?x/g:.5,A=Math.abs(f)>Math.abs(w)?1.5:1,B=b>10?1.2:b>5?1:.8,Q=(S*.3+_*.25+A*.25+B*.2).toFixed(2);let U="",q=[],de="Medium",me="Moderate";r==="price-gainers"?f>50&&v>y*2?(U="Strong Buy - High Momentum with Good Liquidity",q=[`Exceptional 24h gain of ${f.toFixed(2)}% indicates strong buying pressure`,`Above-average liquidity of ${v.toFixed(2)} XRP provides stability`,`${b} trades in 24h shows active market participation`,`Market cap of ${m.toFixed(2)} XRP suggests solid foundation`],de="Medium-High",me="High"):f>20&&v>y?(U="Moderate Buy - Good Opportunity",q=[`Solid 24h gain of ${f.toFixed(2)}% shows positive momentum`,`Adequate liquidity of ${v.toFixed(2)} XRP reduces slippage risk`,`Trading activity with ${b} trades indicates interest`,"Consider taking partial position to test market reaction"],de="Medium",me="Moderate"):(U="Cautious - Monitor Before Entry",q=[`Modest gain of ${f.toFixed(2)}% may indicate limited momentum`,`Liquidity of ${v.toFixed(2)} XRP requires careful position sizing`,`Only ${b} trades suggests lower market activity`,"Wait for volume confirmation or better entry point"],de="Medium-High",me="Low"):r==="volume-high"?x>g*3&&v>y?(U="Active Trading Opportunity - High Volume",q=[`Exceptional 24h volume of ${x.toFixed(2)} XRP shows high activity`,`${b} trades confirm strong market participation`,`Good liquidity of ${v.toFixed(2)} XRP supports larger trades`,`Price at ${p.toFixed(8)} XRP with ${f.toFixed(2)}% change`],de="Medium",me="High"):(U="Monitor - Volume Leader",q=[`Leading volume of ${x.toFixed(2)} XRP indicates interest`,`${b} trades in 24h period`,`Liquidity at ${v.toFixed(2)} XRP`,"Evaluate price action before entering position"],de="Medium",me="Moderate"):r==="value-high"&&(U="Established Token - Lower Risk",q=[`High trading value of ${(h.value_24h||0).toFixed(2)} XRP shows trust`,`Strong liquidity pool of ${v.toFixed(2)} XRP`,`${b} trades demonstrate active market`,`Market cap of ${m.toFixed(2)} XRP indicates maturity`],de="Low-Medium",me="High");const ye={topToken:{name:h.token_name,code:h.currency_code,price:p,change:f,marketCap:m,liquidity:v,volume:x,tradeCount:b},market:{avgLiquidity:y,avgVolume:g,avgChange:w,totalTokens:t.length,activeTokens:t.filter(G=>(G.volume_24h||0)>0).length},scores:{overall:Q,liquidity:S.toFixed(2),volume:_.toFixed(2),momentum:A.toFixed(2),tradeActivity:B.toFixed(2)},recommendation:U,reasoning:q,riskLevel:de,confidence:me};i(ye)};if(!s)return n.jsx("div",{className:"glass rounded-lg p-6 mb-6",children:n.jsx("div",{className:"text-center text-purple-400",children:"Analyzing market data..."})});const d=h=>h.includes("Low")?"text-green-400":h.includes("High")?"text-red-400":"text-yellow-400",u=h=>h==="High"?"text-green-400":h==="Low"?"text-red-400":"text-yellow-400";return n.jsxs("div",{className:"space-y-4 mb-6",children:[n.jsxs("div",{className:"glass rounded-lg p-6 border-l-4 border-purple-500",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-1",children:"Daily Market Insights"}),n.jsx("p",{className:"text-purple-400 text-sm",children:"AI-powered analysis of today's top performing token"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-xs text-purple-400 mb-1",children:"Overall Score"}),n.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[s.scores.overall,"/10"]})]})]}),n.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-4 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"text-3xl",children:"🎯"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-lg font-bold text-purple-200",children:s.topToken.name}),n.jsx("div",{className:"text-sm text-purple-400",children:s.topToken.code})]}),n.jsxs("div",{className:"ml-auto text-right",children:[n.jsxs("div",{className:"text-lg font-bold text-purple-200",children:[s.topToken.price.toFixed(8)," XRP"]}),n.jsxs("div",{className:`text-sm font-medium ${s.topToken.change>=0?"text-green-400":"text-red-400"}`,children:[s.topToken.change>=0?"+":"",s.topToken.change.toFixed(2),"% 24h"]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 text-sm",children:[n.jsxs("div",{className:"bg-purple-800/30 rounded p-2",children:[n.jsx("div",{className:"text-purple-400 text-xs",children:"Market Cap"}),n.jsxs("div",{className:"text-purple-200 font-bold",children:[s.topToken.marketCap.toFixed(2)," XRP"]})]}),n.jsxs("div",{className:"bg-purple-800/30 rounded p-2",children:[n.jsx("div",{className:"text-purple-400 text-xs",children:"Liquidity"}),n.jsxs("div",{className:"text-purple-200 font-bold",children:[s.topToken.liquidity.toFixed(2)," XRP"]})]}),n.jsxs("div",{className:"bg-purple-800/30 rounded p-2",children:[n.jsx("div",{className:"text-purple-400 text-xs",children:"24h Volume"}),n.jsxs("div",{className:"text-purple-200 font-bold",children:[s.topToken.volume.toFixed(2)," XRP"]})]}),n.jsxs("div",{className:"bg-purple-800/30 rounded p-2",children:[n.jsx("div",{className:"text-purple-400 text-xs",children:"24h Trades"}),n.jsx("div",{className:"text-purple-200 font-bold",children:s.topToken.tradeCount})]})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx("span",{className:"text-2xl",children:"💡"}),n.jsx("h4",{className:"text-lg font-bold text-purple-200",children:"Recommendation"})]}),n.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-blue-900/50 border border-purple-500/30 rounded-lg p-4",children:[n.jsx("div",{className:"text-lg font-bold text-purple-100 mb-2",children:s.recommendation}),n.jsxs("div",{className:"flex gap-4 text-sm mb-3",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-purple-400",children:"Risk Level: "}),n.jsx("span",{className:`font-bold ${d(s.riskLevel)}`,children:s.riskLevel})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-purple-400",children:"Confidence: "}),n.jsx("span",{className:`font-bold ${u(s.confidence)}`,children:s.confidence})]})]}),n.jsx("div",{className:"space-y-2",children:s.reasoning.map((h,p)=>n.jsxs("div",{className:"flex items-start gap-2 text-purple-200",children:[n.jsx("span",{className:"text-purple-400 mt-1",children:"•"}),n.jsx("span",{className:"text-sm",children:h})]},p))})]})]}),n.jsxs("div",{className:"border-t border-purple-500/20 pt-4",children:[n.jsx("h4",{className:"text-sm font-bold text-purple-300 mb-3",children:"Performance Metrics"}),n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-purple-400 mb-1",children:"Liquidity Score"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex-1 bg-purple-900/50 rounded-full h-2",children:n.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full transition-all",style:{width:`${Math.min(parseFloat(s.scores.liquidity)*10,100)}%`}})}),n.jsx("span",{className:"text-xs text-purple-200 font-bold",children:s.scores.liquidity})]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-purple-400 mb-1",children:"Volume Score"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex-1 bg-purple-900/50 rounded-full h-2",children:n.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 h-2 rounded-full transition-all",style:{width:`${Math.min(parseFloat(s.scores.volume)*10,100)}%`}})}),n.jsx("span",{className:"text-xs text-purple-200 font-bold",children:s.scores.volume})]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-purple-400 mb-1",children:"Momentum"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex-1 bg-purple-900/50 rounded-full h-2",children:n.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 h-2 rounded-full transition-all",style:{width:`${Math.min(parseFloat(s.scores.momentum)*10,100)}%`}})}),n.jsx("span",{className:"text-xs text-purple-200 font-bold",children:s.scores.momentum})]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-purple-400 mb-1",children:"Trade Activity"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex-1 bg-purple-900/50 rounded-full h-2",children:n.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 h-2 rounded-full transition-all",style:{width:`${Math.min(parseFloat(s.scores.tradeActivity)*10,100)}%`}})}),n.jsx("span",{className:"text-xs text-purple-200 font-bold",children:s.scores.tradeActivity})]})]})]})]}),n.jsx("div",{className:"mt-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-yellow-400 text-lg",children:"⚠️"}),n.jsxs("div",{className:"text-xs text-yellow-200",children:[n.jsx("strong",{children:"Disclaimer:"})," This analysis is for informational purposes only. Always conduct your own research and never invest more than you can afford to lose. Past performance does not guarantee future results."]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"glass rounded-lg p-4",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Market Average"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-purple-300",children:"Liquidity:"}),n.jsxs("span",{className:"text-purple-200 font-bold",children:[s.market.avgLiquidity.toFixed(2)," XRP"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-purple-300",children:"Volume:"}),n.jsxs("span",{className:"text-purple-200 font-bold",children:[s.market.avgVolume.toFixed(2)," XRP"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-purple-300",children:"24h Change:"}),n.jsxs("span",{className:`font-bold ${s.market.avgChange>=0?"text-green-400":"text-red-400"}`,children:[s.market.avgChange>=0?"+":"",s.market.avgChange.toFixed(2),"%"]})]})]})]}),n.jsxs("div",{className:"glass rounded-lg p-4",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Market Activity"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-purple-300",children:"Total Tokens:"}),n.jsx("span",{className:"text-purple-200 font-bold",children:s.market.totalTokens})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-purple-300",children:"Active (24h):"}),n.jsx("span",{className:"text-purple-200 font-bold",children:s.market.activeTokens})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-purple-300",children:"Activity Rate:"}),n.jsxs("span",{className:"text-purple-200 font-bold",children:[(s.market.activeTokens/s.market.totalTokens*100).toFixed(1),"%"]})]})]})]}),n.jsxs("div",{className:"glass rounded-lg p-4",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Data Freshness"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),n.jsx("span",{className:"text-purple-200",children:"Live Data"})]}),n.jsx("div",{className:"text-purple-300 text-xs",children:"Updated from XRPL network with 30s cache"}),n.jsx("div",{className:"text-purple-300 text-xs",children:"Trade counts from verified transactions"})]})]})]})]})}function pq(){const[t,e]=T.useState([]),[r,s]=T.useState(!1),[i,a]=T.useState("price-gainers"),[o,l]=T.useState(null);T.useEffect(()=>{b()},[]);const c=async G=>{try{const Z=new Date(Date.now()-864e5).toISOString(),{count:he,error:ee}=await le.from("trade_history").select("*",{count:"exact",head:!0}).eq("token_id",G).gte("created_at",Z);return ee?(console.error("Error fetching trade count:",ee),0):he||0}catch(Z){return console.error("Error in getTradeCount:",Z),0}},d=async G=>{try{const Z=new Date(Date.now()-864e5).toISOString(),{data:he,error:ee}=await le.from("trade_history").select("token_amount, xrp_amount").eq("token_id",G).gte("created_at",Z);if(ee||!he)return console.error("Error fetching trade volume:",ee),{volume:0,value:0};const H=he.reduce((K,re)=>K+parseFloat(re.token_amount||0),0),I=he.reduce((K,re)=>K+parseFloat(re.xrp_amount||0),0);return{volume:H,value:I}}catch(Z){return console.error("Error in getTradeVolume:",Z),{volume:0,value:0}}},u=G=>G.live_price?G.live_price:!G.amm_pool_created||!G.amm_xrp_amount||!G.amm_asset_amount?0:G.amm_xrp_amount/G.amm_asset_amount,h=G=>{const Z=u(G);return Z?G.supply*Z:0},p=G=>{const Z=u(G);if(!Z||!G.initial_xrp_amount||!G.initial_asset_amount)return 0;const he=G.initial_xrp_amount/G.initial_asset_amount;return!he||he===0?0:(Z-he)/he*100},f=G=>!G.amm_xrp_amount||G.amm_xrp_amount===0?0:(G.value_24h||0)/G.amm_xrp_amount*100,m=G=>{const Z=t.reduce((he,ee)=>he+h(ee),0);return Z===0?0:h(G)/Z*100},v=G=>!G.amm_xrp_amount||!G.amm_asset_amount?0:Math.sqrt(G.amm_xrp_amount*G.amm_asset_amount),x=(G,Z=1)=>G.amm_xrp_amount?Z/G.amm_xrp_amount*100:0,b=async(G=!1)=>{var Z;s(!0);try{const{data:ee,error:H}=await le.from("pool_data_cache").select("*").gte("last_updated",new Date(Date.now()-3e5).toISOString()),{data:I,error:K}=await le.from("meme_tokens").select("*").eq("amm_pool_created",!0).order("created_at",{ascending:!1});if(K)throw K;const re=I||[];if(!G&&ee&&ee.length>0&&!H){console.log(`✅ Using cached pool data (${ee.length} pools)`);const O={};ee.forEach(V=>{O[V.token_id]=V});for(const V of re){const ne=O[V.id];ne&&(V.amm_xrp_amount=parseFloat(ne.xrp_amount),V.amm_asset_amount=parseFloat(ne.token_amount),V.live_price=parseFloat(ne.price),V.volume_24h=parseFloat(ne.volume_24h||0),V.value_24h=parseFloat(ne.volume_24h||0)*parseFloat(ne.price||0),V.trade_count_24h=await c(V.id))}e(re),s(!1);return}console.log("🔄 Fetching fresh pool data from XRPL...");const{requestWithRetry:z}=await $t(()=>Promise.resolve().then(()=>tr),void 0);for(const O of re)try{const V=O.currency_code.length>3?Et.Buffer.from(O.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):O.currency_code;console.log(`Fetching AMM data for ${O.token_name} (${O.currency_code}):`,{currencyHex:V,issuer:O.issuer_address});const ne=await z({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:V,issuer:O.issuer_address},ledger_index:"validated"});if(ne.result.amm){const pe=ne.result.amm,ae=parseFloat(pe.amount)/1e6,se=parseFloat(pe.amount2.value),k=ae/se;console.log(`  ✓ Live price for ${O.token_name}: ${k.toFixed(8)} XRP`),O.amm_xrp_amount=ae,O.amm_asset_amount=se,O.live_price=k;const j=await c(O.id),P=await d(O.id);O.volume_24h=P.volume||0,O.value_24h=P.value||0,O.trade_count_24h=j,await le.from("pool_data_cache").upsert({token_id:O.id,xrp_amount:ae,token_amount:se,lp_tokens:parseFloat(((Z=pe.lp_token)==null?void 0:Z.value)||0),price:k,account_id:pe.account,volume_24h:O.volume_24h||0,price_change_24h:p(O),last_updated:new Date().toISOString()},{onConflict:"token_id"})}else console.log(`  ✗ No AMM pool found for ${O.token_name}`)}catch(V){console.error(`  ✗ Failed to fetch data for ${O.token_name}:`,V.message)}console.log("💾 Cached all pool data"),e(re)}catch(he){console.error("Error loading tokens:",he)}finally{s(!1)}},g=(G=>{let Z=[...t];switch(G){case"price-gainers":Z=Z.sort((he,ee)=>p(ee)-p(he)).slice(0,10);break;case"price-losers":Z=Z.sort((he,ee)=>p(he)-p(ee)).slice(0,10);break;case"volume-high":Z=Z.sort((he,ee)=>(ee.volume_24h||0)-(he.volume_24h||0)).slice(0,10);break;case"volume-low":Z=Z.sort((he,ee)=>(he.volume_24h||0)-(ee.volume_24h||0)).slice(0,10);break;case"value-high":Z=Z.sort((he,ee)=>(ee.value_24h||0)-(he.value_24h||0)).slice(0,10);break;case"value-low":Z=Z.sort((he,ee)=>(he.value_24h||0)-(ee.value_24h||0)).slice(0,10);break;default:Z=Z.slice(0,10)}return Z})(i),w=()=>({"price-gainers":"Top 10 Gainers (24h Price Change)","price-losers":"Top 10 Losers (24h Price Change)","volume-high":"Top 10 by Volume (Highest)","volume-low":"Top 10 by Volume (Lowest)","value-high":"Top 10 by Value (Highest)","value-low":"Top 10 by Value (Lowest)"})[i]||"Top 10",S=()=>({"price-gainers":"📈","price-losers":"📉","volume-high":"🔥","volume-low":"❄️","value-high":"💰","value-low":"🪙"})[i]||"📊",_=G=>G===0?"text-yellow-400":G===1?"text-gray-300":G===2?"text-orange-500":"text-blue-400",A=G=>G===0?"bg-gradient-to-r from-yellow-500/20 to-yellow-600/10 border-l-4 border-yellow-500 shadow-lg shadow-yellow-500/20":G===1?"bg-gradient-to-r from-gray-400/20 to-gray-500/10 border-l-4 border-gray-400 shadow-lg shadow-gray-400/20":G===2?"bg-gradient-to-r from-orange-500/20 to-orange-600/10 border-l-4 border-orange-500 shadow-lg shadow-orange-500/20":"",B=G=>G===0?"🥇":G===1?"🥈":G===2?"🥉":`#${G+1}`,Q=t.reduce((G,Z)=>G+h(Z),0);t.reduce((G,Z)=>G+(Z.volume_24h||0),0);const U=t.reduce((G,Z)=>G+(Z.value_24h||0),0),q=t.reduce((G,Z)=>G+(Z.amm_xrp_amount||0),0),de=t.length>0?t.reduce((G,Z)=>G+p(Z),0)/t.length:0,me=()=>{if(g.length===0)return 0;switch(i){case"price-gainers":case"price-losers":return g.reduce((G,Z)=>G+p(Z),0)/g.length;case"volume-high":case"volume-low":return g.reduce((G,Z)=>G+(Z.volume_24h||0),0)/g.length;case"value-high":case"value-low":return g.reduce((G,Z)=>G+(Z.value_24h||0),0)/g.length;default:return 0}},ye=(G,Z)=>{const he=i.includes("price")?p(G):i.includes("volume")?G.volume_24h||0:G.value_24h||0,ee=i.includes("price")?p(Z):i.includes("volume")?Z.volume_24h||0:Z.value_24h||0;return ee===0?0:he/ee*100};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-blue-200",children:"Top 10 Advanced Analytics"}),n.jsx("p",{className:"text-blue-400 mt-1",children:"Comprehensive market analysis with detailed comparisons"})]}),n.jsx("button",{onClick:b,disabled:r,className:"btn-primary px-4 py-2 disabled:opacity-50",children:r?"🔄 Loading...":"🔄 Refresh"})]}),n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-blue-200 mb-4",children:"Global Market Metrics"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[n.jsxs("div",{className:"p-4 bg-gradient-to-br from-blue-500/10 to-purple-500/10 rounded-lg border border-blue-500/20",children:[n.jsx("div",{className:"text-blue-400 text-xs mb-1",children:"Total Market Cap"}),n.jsx("div",{className:"text-2xl font-bold text-blue-200",children:Q.toFixed(2)}),n.jsx("div",{className:"text-blue-500 text-xs mt-1",children:"XRP"})]}),n.jsxs("div",{className:"p-4 bg-gradient-to-br from-green-500/10 to-emerald-500/10 rounded-lg border border-green-500/20",children:[n.jsx("div",{className:"text-green-400 text-xs mb-1",children:"Total Liquidity"}),n.jsx("div",{className:"text-2xl font-bold text-green-200",children:q.toFixed(2)}),n.jsx("div",{className:"text-green-500 text-xs mt-1",children:"XRP in pools"})]}),n.jsxs("div",{className:"p-4 bg-gradient-to-br from-orange-500/10 to-red-500/10 rounded-lg border border-orange-500/20",children:[n.jsx("div",{className:"text-orange-400 text-xs mb-1",children:"24h Trade Count"}),n.jsx("div",{className:"text-2xl font-bold text-orange-200",children:t.reduce((G,Z)=>G+(Z.trade_count_24h||0),0)}),n.jsx("div",{className:"text-orange-500 text-xs mt-1",children:"transactions"})]}),n.jsxs("div",{className:"p-4 bg-gradient-to-br from-purple-500/10 to-pink-500/10 rounded-lg border border-purple-500/20",children:[n.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"24h XRP Volume"}),n.jsx("div",{className:"text-2xl font-bold text-purple-200",children:U.toFixed(2)}),n.jsx("div",{className:"text-purple-500 text-xs mt-1",children:"XRP traded"})]}),n.jsxs("div",{className:`p-4 rounded-lg border ${de>=0?"bg-gradient-to-br from-green-500/10 to-lime-500/10 border-green-500/20":"bg-gradient-to-br from-red-500/10 to-rose-500/10 border-red-500/20"}`,children:[n.jsx("div",{className:de>=0?"text-green-400":"text-red-400",children:n.jsx("div",{className:"text-xs mb-1",children:"Avg Price Δ"})}),n.jsxs("div",{className:`text-2xl font-bold ${de>=0?"text-green-200":"text-red-200"}`,children:[de>=0?"+":"",de.toFixed(2),"%"]}),n.jsx("div",{className:de>=0?"text-green-500":"text-red-500",children:n.jsx("div",{className:"text-xs mt-1",children:"24h average"})})]}),n.jsxs("div",{className:"p-4 bg-gradient-to-br from-cyan-500/10 to-blue-500/10 rounded-lg border border-cyan-500/20",children:[n.jsx("div",{className:"text-cyan-400 text-xs mb-1",children:"Active Pools"}),n.jsx("div",{className:"text-2xl font-bold text-cyan-200",children:t.length}),n.jsx("div",{className:"text-cyan-500 text-xs mt-1",children:"AMM tokens"})]})]})]}),n.jsx(hq,{tokens:t,topTokens:g,category:i}),n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-blue-200 mb-4",children:"Select Category"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:[n.jsxs("button",{onClick:()=>a("price-gainers"),className:`p-4 rounded-lg text-center transition-all ${i==="price-gainers"?"bg-green-500/20 border-2 border-green-500 text-green-200 shadow-lg shadow-green-500/20":"glass hover:bg-blue-500/10 text-blue-300"}`,children:[n.jsx("div",{className:"text-2xl mb-1",children:"📈"}),n.jsx("div",{className:"text-sm font-medium",children:"Price Gainers"})]}),n.jsxs("button",{onClick:()=>a("price-losers"),className:`p-4 rounded-lg text-center transition-all ${i==="price-losers"?"bg-red-500/20 border-2 border-red-500 text-red-200 shadow-lg shadow-red-500/20":"glass hover:bg-blue-500/10 text-blue-300"}`,children:[n.jsx("div",{className:"text-2xl mb-1",children:"📉"}),n.jsx("div",{className:"text-sm font-medium",children:"Price Losers"})]}),n.jsxs("button",{onClick:()=>a("volume-high"),className:`p-4 rounded-lg text-center transition-all ${i==="volume-high"?"bg-orange-500/20 border-2 border-orange-500 text-orange-200 shadow-lg shadow-orange-500/20":"glass hover:bg-blue-500/10 text-blue-300"}`,children:[n.jsx("div",{className:"text-2xl mb-1",children:"🔥"}),n.jsx("div",{className:"text-sm font-medium",children:"High Volume"})]}),n.jsxs("button",{onClick:()=>a("volume-low"),className:`p-4 rounded-lg text-center transition-all ${i==="volume-low"?"bg-cyan-500/20 border-2 border-cyan-500 text-cyan-200 shadow-lg shadow-cyan-500/20":"glass hover:bg-blue-500/10 text-blue-300"}`,children:[n.jsx("div",{className:"text-2xl mb-1",children:"❄️"}),n.jsx("div",{className:"text-sm font-medium",children:"Low Volume"})]}),n.jsxs("button",{onClick:()=>a("value-high"),className:`p-4 rounded-lg text-center transition-all ${i==="value-high"?"bg-yellow-500/20 border-2 border-yellow-500 text-yellow-200 shadow-lg shadow-yellow-500/20":"glass hover:bg-blue-500/10 text-blue-300"}`,children:[n.jsx("div",{className:"text-2xl mb-1",children:"💰"}),n.jsx("div",{className:"text-sm font-medium",children:"High XRP Value"})]}),n.jsxs("button",{onClick:()=>a("value-low"),className:`p-4 rounded-lg text-center transition-all ${i==="value-low"?"bg-slate-500/20 border-2 border-slate-500 text-slate-200 shadow-lg shadow-slate-500/20":"glass hover:bg-blue-500/10 text-blue-300"}`,children:[n.jsx("div",{className:"text-2xl mb-1",children:"🪙"}),n.jsx("div",{className:"text-sm font-medium",children:"Low XRP Value"})]})]})]}),n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("span",{className:"text-4xl",children:S()}),n.jsx("h3",{className:"text-2xl font-bold text-blue-200",children:w()})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[n.jsxs("div",{className:"glass bg-yellow-500/5 rounded-lg p-4 border border-yellow-500/30",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("span",{className:"text-2xl",children:"🥇"}),n.jsx("div",{className:"text-yellow-400 text-sm font-bold",children:"Gold Leader"})]}),n.jsx("div",{className:"text-xl font-bold text-yellow-200",children:g.length>0?g[0].token_name:"N/A"})]}),n.jsxs("div",{className:"glass bg-gray-500/5 rounded-lg p-4 border border-gray-400/30",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("span",{className:"text-2xl",children:"🥈"}),n.jsx("div",{className:"text-gray-400 text-sm font-bold",children:"Silver Runner-up"})]}),n.jsx("div",{className:"text-xl font-bold text-gray-200",children:g.length>1?g[1].token_name:"N/A"})]}),n.jsxs("div",{className:"glass bg-orange-500/5 rounded-lg p-4 border border-orange-500/30",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("span",{className:"text-2xl",children:"🥉"}),n.jsx("div",{className:"text-orange-400 text-sm font-bold",children:"Bronze Third"})]}),n.jsx("div",{className:"text-xl font-bold text-orange-200",children:g.length>2?g[2].token_name:"N/A"})]}),n.jsxs("div",{className:"glass bg-purple-500/5 rounded-lg p-4",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Category Average"}),n.jsx("div",{className:"text-xl font-bold text-purple-200",children:i.includes("price")?`${me().toFixed(2)}%`:me().toFixed(2)})]}),n.jsxs("div",{className:"glass bg-cyan-500/5 rounded-lg p-4",children:[n.jsx("div",{className:"text-cyan-400 text-sm mb-2",children:"Performance Spread"}),n.jsx("div",{className:"text-xl font-bold text-cyan-200",children:g.length>=2?(()=>{const G=i.includes("price")?p(g[0]):i.includes("volume")?g[0].volume_24h:g[0].value_24h,Z=i.includes("price")?p(g[g.length-1]):i.includes("volume")?g[g.length-1].volume_24h:g[g.length-1].value_24h;return i.includes("price")?`${Math.abs(G-Z).toFixed(2)}%`:Math.abs(G-Z).toFixed(2)})():"N/A"})]})]}),n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-blue-900/30",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left px-4 py-3 text-blue-300 font-medium",children:"Rank"}),n.jsx("th",{className:"text-left px-4 py-3 text-blue-300 font-medium",children:"Token"}),n.jsx("th",{className:"text-right px-4 py-3 text-blue-300 font-medium",children:"Price (XRP)"}),n.jsx("th",{className:"text-right px-4 py-3 text-blue-300 font-medium",children:"24h Change"}),n.jsx("th",{className:"text-right px-4 py-3 text-blue-300 font-medium",children:"vs Category Avg"}),n.jsx("th",{className:"text-right px-4 py-3 text-blue-300 font-medium",children:"vs Leader"}),n.jsx("th",{className:"text-right px-4 py-3 text-blue-300 font-medium",children:"24h Trades"}),n.jsx("th",{className:"text-right px-4 py-3 text-blue-300 font-medium",children:"24h XRP Volume"}),n.jsx("th",{className:"text-right px-4 py-3 text-blue-300 font-medium",children:"Vol/Liq Ratio"}),n.jsx("th",{className:"text-right px-4 py-3 text-blue-300 font-medium",children:"Market Cap"}),n.jsx("th",{className:"text-right px-4 py-3 text-blue-300 font-medium",children:"Market Share"}),n.jsx("th",{className:"text-right px-4 py-3 text-blue-300 font-medium",children:"Liquidity"}),n.jsx("th",{className:"text-right px-4 py-3 text-blue-300 font-medium",children:"Price Impact"})]})}),n.jsx("tbody",{children:g.map((G,Z)=>{const he=u(G),ee=h(G),H=p(G),I=H>=0,K=me(),re=i.includes("price")?H-K:i.includes("volume")?(G.volume_24h||0)-K:(G.value_24h||0)-K,z=g.length>0?ye(G,g[0]):0,O=f(G),V=m(G),ne=x(G,1);return n.jsxs("tr",{onClick:()=>l(G),className:`border-t border-blue-500/20 hover:bg-blue-900/30 transition-all cursor-pointer ${A(Z)}`,children:[n.jsx("td",{className:"px-4 py-4",children:n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("div",{className:`text-3xl font-bold ${_(Z)}`,children:B(Z)})})}),n.jsx("td",{className:"px-4 py-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ht,{token:G,size:"md"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-bold text-blue-200",children:G.token_name}),n.jsx("div",{className:"text-xs text-blue-400",children:G.currency_code})]})]})}),n.jsx("td",{className:"px-4 py-4 text-right",children:n.jsx("div",{className:"text-blue-200 font-mono text-sm",children:he.toFixed(8)})}),n.jsx("td",{className:"px-4 py-4 text-right",children:n.jsxs("div",{className:`font-bold text-lg ${I?"text-green-400":"text-red-400"}`,children:[I?"+":"",H.toFixed(2),"%"]})}),n.jsx("td",{className:"px-4 py-4 text-right",children:n.jsxs("div",{className:`font-semibold ${re>=0?"text-green-400":"text-red-400"}`,children:[re>=0?"+":"",re.toFixed(2),i.includes("price")?"%":""]})}),n.jsx("td",{className:"px-4 py-4 text-right",children:n.jsxs("div",{className:`font-semibold ${z>=90?"text-green-400":z>=70?"text-yellow-400":z>=50?"text-orange-400":"text-red-400"}`,children:[z.toFixed(1),"%"]})}),n.jsxs("td",{className:"px-4 py-4 text-right",children:[n.jsx("div",{className:"text-blue-200 font-semibold",children:G.trade_count_24h||0}),n.jsx("div",{className:"text-xs text-blue-400",children:"trades"})]}),n.jsxs("td",{className:"px-4 py-4 text-right",children:[n.jsx("div",{className:"text-purple-200 font-bold",children:(G.value_24h||0).toFixed(4)}),n.jsx("div",{className:"text-xs text-purple-400",children:"XRP"})]}),n.jsx("td",{className:"px-4 py-4 text-right",children:n.jsxs("div",{className:`font-bold ${O>100?"text-green-400":O>50?"text-yellow-400":"text-orange-400"}`,children:[O.toFixed(2),"%"]})}),n.jsxs("td",{className:"px-4 py-4 text-right",children:[n.jsx("div",{className:"text-blue-200 font-semibold",children:ee.toFixed(4)}),n.jsx("div",{className:"text-xs text-blue-400",children:"XRP"})]}),n.jsx("td",{className:"px-4 py-4 text-right",children:n.jsxs("div",{className:"text-cyan-200 font-bold",children:[V.toFixed(2),"%"]})}),n.jsxs("td",{className:"px-4 py-4 text-right",children:[n.jsx("div",{className:"text-green-200 font-semibold",children:(G.amm_xrp_amount||0).toFixed(2)}),n.jsx("div",{className:"text-xs text-green-400",children:"XRP"})]}),n.jsx("td",{className:"px-4 py-4 text-right",children:n.jsxs("div",{className:`font-semibold ${ne<1?"text-green-400":ne<3?"text-yellow-400":"text-red-400"}`,children:[ne.toFixed(3),"%"]})})]},G.id)})})]}),g.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-4xl mb-4",children:"📊"}),n.jsx("div",{className:"text-blue-400",children:"No data available yet"}),n.jsx("div",{className:"text-blue-500 text-sm mt-2",children:"Create some tokens to see analytics"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-blue-200 mb-4",children:"Podium Performance Analysis"}),n.jsx("div",{className:"space-y-4",children:g.slice(0,3).map((G,Z)=>{u(G);const he=p(G),ee=h(G),H=m(G),I=f(G),K=x(G,1),re=["border-yellow-500","border-gray-400","border-orange-500"],z=["bg-yellow-500/10","bg-gray-400/10","bg-orange-500/10"];return n.jsxs("div",{onClick:()=>l(G),className:`p-5 glass rounded-lg cursor-pointer hover:bg-blue-500/10 transition-colors border-2 ${re[Z]} ${z[Z]}`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"text-4xl",children:B(Z)}),n.jsx(Ht,{token:G,size:"lg"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-bold text-lg text-blue-200",children:G.token_name}),n.jsx("div",{className:"text-sm text-blue-400",children:G.currency_code})]})]}),n.jsxs("div",{className:`text-2xl font-bold ${he>=0?"text-green-400":"text-red-400"}`,children:[he>=0?"+":"",he.toFixed(2),"%"]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-blue-400 text-xs mb-1",children:"Market Share"}),n.jsxs("div",{className:"text-blue-200 font-bold",children:[H.toFixed(2),"%"]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"24h XRP Vol"}),n.jsx("div",{className:"text-purple-200 font-bold",children:(G.value_24h||0).toFixed(2)})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-green-400 text-xs mb-1",children:"Vol/Liq Ratio"}),n.jsxs("div",{className:"text-green-200 font-bold",children:[I.toFixed(1),"%"]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-orange-400 text-xs mb-1",children:"Price Impact"}),n.jsxs("div",{className:"text-orange-200 font-bold",children:[K.toFixed(3),"%"]})]})]}),n.jsx("div",{className:"mt-4 pt-4 border-t border-blue-500/20",children:n.jsxs("div",{className:"grid grid-cols-3 gap-3 text-xs",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-blue-400 mb-1",children:"Liquidity"}),n.jsxs("div",{className:"text-blue-200 font-semibold",children:[(G.amm_xrp_amount||0).toFixed(2)," XRP"]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-blue-400 mb-1",children:"Market Cap"}),n.jsxs("div",{className:"text-blue-200 font-semibold",children:[ee.toFixed(2)," XRP"]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-blue-400 mb-1",children:"24h Trades"}),n.jsx("div",{className:"text-blue-200 font-semibold",children:G.trade_count_24h||0})]})]})})]},G.id)})})]}),n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-blue-200 mb-4",children:"Advanced Category Insights"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-500/10 to-cyan-500/10 rounded-lg border border-blue-500/30",children:[n.jsx("div",{className:"text-blue-400 text-sm mb-3 font-bold",children:"XRP Volume Distribution"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-blue-300 text-sm",children:"Top 3 Combined"}),n.jsxs("span",{className:"text-blue-200 font-bold",children:[g.slice(0,3).reduce((G,Z)=>G+(Z.value_24h||0),0).toFixed(2)," XRP"]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-blue-300 text-sm",children:"Remaining 7"}),n.jsxs("span",{className:"text-blue-200 font-bold",children:[g.slice(3).reduce((G,Z)=>G+(Z.value_24h||0),0).toFixed(2)," XRP"]})]}),n.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-blue-500/30",children:[n.jsx("span",{className:"text-blue-300 text-sm font-bold",children:"Top 3 Dominance"}),n.jsxs("span",{className:"text-cyan-200 font-bold text-lg",children:[g.length>=3?(g.slice(0,3).reduce((G,Z)=>G+(Z.value_24h||0),0)/g.reduce((G,Z)=>G+(Z.value_24h||0),0)*100).toFixed(1):0,"%"]})]})]})]}),n.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-lg border border-purple-500/30",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-3 font-bold",children:"Liquidity Analysis"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-purple-300 text-sm",children:"Avg Liquidity Depth"}),n.jsx("span",{className:"text-purple-200 font-bold",children:g.length>0?(g.reduce((G,Z)=>G+v(Z),0)/g.length).toFixed(2):0})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-purple-300 text-sm",children:"Avg Vol/Liq Ratio"}),n.jsxs("span",{className:"text-purple-200 font-bold",children:[g.length>0?(g.reduce((G,Z)=>G+f(Z),0)/g.length).toFixed(2):0,"%"]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-purple-300 text-sm",children:"Total Pool Liquidity"}),n.jsxs("span",{className:"text-purple-200 font-bold",children:[g.reduce((G,Z)=>G+(Z.amm_xrp_amount||0),0).toFixed(2)," XRP"]})]})]})]}),n.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-500/10 to-emerald-500/10 rounded-lg border border-green-500/30",children:[n.jsx("div",{className:"text-green-400 text-sm mb-3 font-bold",children:"Trading Efficiency Metrics"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-green-300 text-sm",children:"Most Efficient"}),n.jsx("span",{className:"text-green-200 font-bold",children:g.length>0?g.reduce((G,Z)=>f(Z)>f(G)?Z:G).token_name:"N/A"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-green-300 text-sm",children:"Lowest Price Impact"}),n.jsx("span",{className:"text-green-200 font-bold",children:g.length>0?g.reduce((G,Z)=>x(Z,1)<x(G,1)?Z:G).token_name:"N/A"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-green-300 text-sm",children:"Avg Price Impact (1 XRP)"}),n.jsxs("span",{className:"text-green-200 font-bold",children:[g.length>0?(g.reduce((G,Z)=>G+x(Z,1),0)/g.length).toFixed(3):0,"%"]})]})]})]}),n.jsxs("div",{className:"p-4 bg-gradient-to-r from-orange-500/10 to-red-500/10 rounded-lg border border-orange-500/30",children:[n.jsx("div",{className:"text-orange-400 text-sm mb-3 font-bold",children:"Market Concentration"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-orange-300 text-sm",children:"Top Token Share"}),n.jsxs("span",{className:"text-orange-200 font-bold",children:[g.length>0?m(g[0]).toFixed(2):0,"%"]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-orange-300 text-sm",children:"HHI Index"}),n.jsx("span",{className:"text-orange-200 font-bold",children:g.length>0?g.reduce((G,Z)=>G+Math.pow(m(Z),2),0).toFixed(0):0})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-orange-300 text-sm",children:"Market Health"}),n.jsx("span",{className:`font-bold ${g.length>0&&g.reduce((G,Z)=>G+Math.pow(m(Z),2),0)<2e3?"text-green-400":"text-yellow-400"}`,children:g.length>0&&g.reduce((G,Z)=>G+Math.pow(m(Z),2),0)<2e3?"Competitive":"Concentrated"})]})]})]})]})]})]}),n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-blue-200 mb-4",children:"Comprehensive Comparison Matrix"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-blue-900/30",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left px-3 py-2 text-blue-300",children:"Rank"}),n.jsx("th",{className:"text-left px-3 py-2 text-blue-300",children:"Token"}),n.jsx("th",{className:"text-right px-3 py-2 text-blue-300",children:"Price Δ %"}),n.jsx("th",{className:"text-right px-3 py-2 text-blue-300",children:"Trade Count"}),n.jsx("th",{className:"text-right px-3 py-2 text-blue-300",children:"XRP Volume"}),n.jsx("th",{className:"text-right px-3 py-2 text-blue-300",children:"Market Cap"}),n.jsx("th",{className:"text-right px-3 py-2 text-blue-300",children:"Market %"}),n.jsx("th",{className:"text-right px-3 py-2 text-blue-300",children:"Liquidity"}),n.jsx("th",{className:"text-right px-3 py-2 text-blue-300",children:"Vol/Liq"}),n.jsx("th",{className:"text-right px-3 py-2 text-blue-300",children:"Impact"}),n.jsx("th",{className:"text-right px-3 py-2 text-blue-300",children:"Efficiency"})]})}),n.jsx("tbody",{children:g.map((G,Z)=>{const he=p(G),ee=h(G),H=m(G),I=f(G),K=x(G,1),re=I;return n.jsxs("tr",{onClick:()=>l(G),className:"border-t border-blue-500/20 hover:bg-blue-900/20 cursor-pointer",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("div",{className:`text-xl font-bold ${_(Z)}`,children:B(Z)})}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ht,{token:G,size:"sm",className:"!w-6 !h-6"}),n.jsx("span",{className:"font-semibold text-blue-200",children:G.token_name})]})}),n.jsxs("td",{className:`px-3 py-2 text-right font-bold ${he>=0?"text-green-400":"text-red-400"}`,children:[he>=0?"+":"",he.toFixed(2),"%"]}),n.jsx("td",{className:"px-3 py-2 text-right text-blue-200 font-semibold",children:G.trade_count_24h||0}),n.jsx("td",{className:"px-3 py-2 text-right text-purple-200 font-bold",children:(G.value_24h||0).toFixed(4)}),n.jsx("td",{className:"px-3 py-2 text-right text-blue-200 font-semibold",children:ee.toFixed(4)}),n.jsxs("td",{className:"px-3 py-2 text-right text-cyan-200 font-bold",children:[H.toFixed(2),"%"]}),n.jsx("td",{className:"px-3 py-2 text-right text-green-200 font-semibold",children:(G.amm_xrp_amount||0).toFixed(2)}),n.jsx("td",{className:"px-3 py-2 text-right",children:n.jsxs("span",{className:`font-bold ${I>100?"text-green-400":I>50?"text-yellow-400":"text-orange-400"}`,children:[I.toFixed(1),"%"]})}),n.jsx("td",{className:"px-3 py-2 text-right",children:n.jsxs("span",{className:`font-semibold ${K<1?"text-green-400":K<3?"text-yellow-400":"text-red-400"}`,children:[K.toFixed(3),"%"]})}),n.jsx("td",{className:"px-3 py-2 text-right",children:n.jsx("span",{className:`font-bold ${re>100?"text-green-400":re>50?"text-yellow-400":"text-orange-400"}`,children:re.toFixed(1)})})]},G.id)})})]})})]}),o&&n.jsx(r_,{token:o,onClose:()=>l(null)})]})}function fq(){const[t,e]=T.useState([]),[r,s]=T.useState(!1),[i,a]=T.useState({}),[o,l]=T.useState("");T.useEffect(()=>{c()},[]);const c=async()=>{s(!0);try{const{data:f,error:m}=await le.from("meme_tokens").select("*").order("created_at",{ascending:!0});if(m)throw m;const v=[];for(const x of f||[]){const{data:b}=await le.from("token_holders").select("*").eq("token_id",x.id).order("rank",{ascending:!0}).limit(1);if(b&&b.length>0){const y=b[0],g=parseFloat(y.balance),w=parseFloat(x.current_price)||0,S=g*w;v.push({token:x,holder:y,xrpValue:S})}}e(v)}catch(f){console.error("Error loading kings:",f),ie.error("Failed to load kings list")}finally{s(!1)}},d=async f=>{a(m=>({...m,[f]:!0}));try{const m=t.find(y=>y.token.id===f);if(!m)return;const v=m.token,x=localStorage.getItem("memekings_receiver"),b=new Ve.Client("wss://xrplcluster.com");await b.connect();try{const g=(await b.request({command:"account_lines",account:v.issuer_address,peer:void 0,ledger_index:"validated"})).result.lines||[],w=parseFloat(v.initial_supply)||0,S=[];if(g.sort((_,A)=>parseFloat(A.balance)-parseFloat(_.balance)),g.forEach((_,A)=>{const B=parseFloat(_.balance);if(B>0){const Q=w>0?B/w*100:0;S.push({token_id:v.id,holder_address:_.account,balance:B,percentage:Q,is_developer_wallet:_.account===x,rank:A+1,last_updated:new Date().toISOString()})}}),await le.from("token_holders").delete().eq("token_id",v.id),S.length>0){const{error:_}=await le.from("token_holders").insert(S);if(_)throw _}await c(),ie.success(`Updated holders for ${v.name}`)}finally{await b.disconnect()}}catch(m){console.error("Error refreshing holders:",m),ie.error("Failed to refresh holders")}finally{a(m=>({...m,[f]:!1}))}},u=async()=>{s(!0);for(const f of t)await d(f.token.id);ie.success("All token holders updated!")},h=t.filter(f=>{if(!o)return!0;const m=f.token;return!m.name||!m.symbol?!1:m.name.toLowerCase().includes(o.toLowerCase())||m.symbol.toLowerCase().includes(o.toLowerCase())}),p=h.reduce((f,m)=>f+m.xrpValue,0);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"👑 Kings List"}),n.jsx("p",{className:"text-gray-400",children:"Top holders for each MEMEKINGS token"})]}),n.jsx("button",{onClick:u,disabled:r,className:"bg-gradient-to-r from-green-600 to-green-500 text-white px-6 py-3 rounded-lg hover:from-green-500 hover:to-green-400 disabled:opacity-50 shadow-lg shadow-green-500/20 transition-all duration-300 flex items-center gap-2",children:r?n.jsxs(n.Fragment,{children:[n.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Refreshing..."]}):n.jsxs(n.Fragment,{children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh All"]})})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"glass rounded-lg p-4",children:[n.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Total Tokens"}),n.jsx("div",{className:"text-2xl font-bold text-white",children:h.length})]}),n.jsxs("div",{className:"glass rounded-lg p-4",children:[n.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Total XRP Value"}),n.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[p.toLocaleString(void 0,{maximumFractionDigits:2})," XRP"]})]}),n.jsxs("div",{className:"glass rounded-lg p-4",children:[n.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Avg XRP Value"}),n.jsxs("div",{className:"text-2xl font-bold text-blue-400",children:[h.length>0?(p/h.length).toLocaleString(void 0,{maximumFractionDigits:2}):"0"," XRP"]})]})]}),n.jsx("div",{children:n.jsx("input",{type:"text",value:o,onChange:f=>l(f.target.value),placeholder:"Search tokens...",className:"w-full bg-gray-800 border border-gray-700 text-white rounded-lg px-4 py-2 focus:border-green-500 focus:ring-green-500/50"})}),r&&h.length===0?n.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[n.jsxs("svg",{className:"animate-spin h-12 w-12 mx-auto text-green-500 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n.jsx("p",{className:"text-gray-400",children:"Loading kings..."})]}):h.length===0?n.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:"👑"}),n.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No Kings Found"}),n.jsx("p",{className:"text-gray-400 mb-6",children:"No token holders data available yet."}),n.jsx("button",{onClick:u,className:"bg-gradient-to-r from-green-600 to-green-500 text-white px-6 py-3 rounded-lg hover:from-green-500 hover:to-green-400 shadow-lg shadow-green-500/20 transition-all duration-300",children:"Fetch Holder Data"})]}):n.jsx("div",{className:"glass rounded-lg overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-800/50 border-b border-gray-700",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left px-6 py-4 text-gray-400 font-medium text-sm",children:"Rank"}),n.jsx("th",{className:"text-left px-6 py-4 text-gray-400 font-medium text-sm",children:"Token"}),n.jsx("th",{className:"text-left px-6 py-4 text-gray-400 font-medium text-sm",children:"King Address"}),n.jsx("th",{className:"text-right px-6 py-4 text-gray-400 font-medium text-sm",children:"Balance"}),n.jsx("th",{className:"text-right px-6 py-4 text-gray-400 font-medium text-sm",children:"% Supply"}),n.jsx("th",{className:"text-right px-6 py-4 text-gray-400 font-medium text-sm",children:"XRP Value"}),n.jsx("th",{className:"text-center px-6 py-4 text-gray-400 font-medium text-sm",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-700/50",children:h.map((f,m)=>n.jsxs("tr",{className:"hover:bg-gray-800/30 transition-colors",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white text-sm font-bold rounded-full w-10 h-10 flex items-center justify-center shadow-lg",children:["#",m+1]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ht,{token:f.token,size:"md"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-white font-bold",children:f.token.name}),n.jsx("div",{className:"text-gray-400 text-sm",children:f.token.symbol})]})]})}),n.jsx("td",{className:"px-6 py-4",children:f.holder.is_developer_wallet?n.jsx("div",{className:"inline-flex px-3 py-1 bg-gradient-to-r from-purple-600 to-purple-500 rounded-full text-white text-xs font-medium",children:"MEMEKINGS Dev"}):n.jsx(Pi,{type:"address",value:f.holder.holder_address,network:"mainnet",className:"text-green-400 hover:text-green-300 text-sm font-mono"})}),n.jsxs("td",{className:"px-6 py-4 text-right",children:[n.jsx("div",{className:"text-white font-bold",children:parseFloat(f.holder.balance).toLocaleString(void 0,{maximumFractionDigits:2})}),n.jsx("div",{className:"text-gray-500 text-xs",children:f.token.symbol})]}),n.jsx("td",{className:"px-6 py-4 text-right",children:n.jsxs("div",{className:"text-green-400 font-bold",children:[parseFloat(f.holder.percentage).toFixed(2),"%"]})}),n.jsxs("td",{className:"px-6 py-4 text-right",children:[n.jsx("div",{className:"text-green-400 font-bold",children:f.xrpValue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}),n.jsx("div",{className:"text-gray-500 text-xs",children:"XRP"})]}),n.jsx("td",{className:"px-6 py-4 text-center",children:n.jsx("button",{onClick:()=>d(f.token.id),disabled:i[f.token.id],className:"text-green-400 hover:text-green-300 disabled:opacity-50 inline-flex items-center gap-1 text-sm",title:"Refresh holder data",children:i[f.token.id]?n.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})})]},f.token.id))})]})})})]})}function mq(){return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"glass rounded-lg p-8 border-2 border-purple-500/30",children:[n.jsx("h2",{className:"text-4xl font-bold text-purple-200 mb-2",children:"About MemeKings"}),n.jsx("p",{className:"text-xl text-purple-300",children:"The Premier XRPL Meme Token Factory & Trading Platform"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"glass rounded-lg p-6 border border-green-500/30",children:[n.jsx("div",{className:"text-4xl mb-3",children:"🚀"}),n.jsx("div",{className:"text-2xl font-bold text-green-200 mb-2",children:"Fast"}),n.jsx("p",{className:"text-green-300 text-sm",children:"3-5 second transactions on XRPL with instant finality"})]}),n.jsxs("div",{className:"glass rounded-lg p-6 border border-blue-500/30",children:[n.jsx("div",{className:"text-4xl mb-3",children:"💰"}),n.jsx("div",{className:"text-2xl font-bold text-blue-200 mb-2",children:"Low Cost"}),n.jsx("p",{className:"text-blue-300 text-sm",children:"Minimal blockchain fees + 0.01 XRP platform trading fee"})]}),n.jsxs("div",{className:"glass rounded-lg p-6 border border-purple-500/30",children:[n.jsx("div",{className:"text-4xl mb-3",children:"🔒"}),n.jsx("div",{className:"text-2xl font-bold text-purple-200 mb-2",children:"Secure"}),n.jsx("p",{className:"text-purple-300 text-sm",children:"Battle-tested XRPL with native AMM support"})]})]}),n.jsxs("div",{className:"glass rounded-lg p-8",children:[n.jsx("h3",{className:"text-3xl font-bold text-purple-200 mb-6",children:"Platform Overview"}),n.jsx("p",{className:"text-purple-300 leading-relaxed mb-6",children:"MemeKings is a comprehensive decentralized platform built on the XRP Ledger that enables anyone to create, trade, and profit from meme tokens. We combine the power of XRPL native AMM (Automated Market Maker) functionality with an intuitive interface to provide instant liquidity, transparent pricing, and community-driven token economics."}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-6",children:[n.jsx("h4",{className:"text-xl font-bold text-purple-200 mb-3",children:"What Makes Us Different"}),n.jsxs("ul",{className:"space-y-2 text-purple-300 text-sm",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-green-400 mt-1",children:"✓"}),n.jsx("span",{children:"Native XRPL Integration - Built directly on XRPL, not a smart contract layer"})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-green-400 mt-1",children:"✓"}),n.jsx("span",{children:"Instant Liquidity - AMM pools created automatically with every token"})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-green-400 mt-1",children:"✓"}),n.jsx("span",{children:"No Gas Wars - Predictable, minimal fees on every transaction"})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-green-400 mt-1",children:"✓"}),n.jsx("span",{children:"10% APY Vault - Earn passive income on held tokens"})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-green-400 mt-1",children:"✓"}),n.jsx("span",{children:"Real-Time Analytics - Live market data and trading insights"})]})]})]}),n.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-6",children:[n.jsx("h4",{className:"text-xl font-bold text-purple-200 mb-3",children:"Key Metrics"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-purple-400",children:"Transaction Speed"}),n.jsx("span",{className:"text-purple-200 font-bold",children:"3-5 seconds"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-purple-400",children:"Trading Fee"}),n.jsx("span",{className:"text-purple-200 font-bold",children:"0.01 XRP"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-purple-400",children:"Vault APY"}),n.jsx("span",{className:"text-green-400 font-bold",children:"10%"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-purple-400",children:"Collection Fee"}),n.jsx("span",{className:"text-purple-200 font-bold",children:"0.01 XRP"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-purple-400",children:"Send/Receive Fee"}),n.jsx("span",{className:"text-purple-200 font-bold",children:"0.01 XRP"})]})]})]})]})]}),n.jsxs("div",{className:"glass rounded-lg p-8",children:[n.jsx("h3",{className:"text-3xl font-bold text-purple-200 mb-6",children:"How to Get Started"}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex gap-6 items-start",children:[n.jsx("div",{className:"flex-shrink-0 w-16 h-16 rounded-full bg-gradient-to-br from-purple-600 to-purple-800 flex items-center justify-center text-white text-2xl font-bold",children:"1"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-2xl font-bold text-purple-200 mb-2",children:"Create or Connect Your Wallet"}),n.jsx("p",{className:"text-purple-300 mb-3",children:"Navigate to the Setup page to create a new XRPL wallet or connect an existing one. Your wallet is your gateway to the MemeKings ecosystem."}),n.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4",children:[n.jsx("div",{className:"text-blue-200 text-sm font-medium mb-2",children:"💡 Pro Tip:"}),n.jsx("p",{className:"text-blue-300 text-sm",children:"Always securely backup your wallet seed. MemeKings uses client-side encryption - we never have access to your private keys."})]})]})]}),n.jsxs("div",{className:"flex gap-6 items-start",children:[n.jsx("div",{className:"flex-shrink-0 w-16 h-16 rounded-full bg-gradient-to-br from-purple-600 to-purple-800 flex items-center justify-center text-white text-2xl font-bold",children:"2"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-2xl font-bold text-purple-200 mb-2",children:"Browse the MemeKings Token Selection"}),n.jsx("p",{className:"text-purple-300 mb-3",children:"Head to the Memes page to explore our curated selection of community-created tokens. Each token has detailed information, price charts, and AMM pool data."}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"glass rounded-lg p-3",children:[n.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"View Token Details"}),n.jsx("p",{className:"text-purple-200 text-sm",children:"Click any token to see full analytics"})]}),n.jsxs("div",{className:"glass rounded-lg p-3",children:[n.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"Check Liquidity"}),n.jsx("p",{className:"text-purple-200 text-sm",children:"See AMM pool depth and volume"})]})]})]})]}),n.jsxs("div",{className:"flex gap-6 items-start",children:[n.jsx("div",{className:"flex-shrink-0 w-16 h-16 rounded-full bg-gradient-to-br from-green-600 to-green-800 flex items-center justify-center text-white text-2xl font-bold",children:"3"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-2xl font-bold text-green-200 mb-2",children:"Buy Tokens from Our Selection"}),n.jsx("p",{className:"text-green-300 mb-3",children:"Use the Trade page to buy tokens with XRP. Set your slippage tolerance, review the trade estimate, and execute instantly through the AMM."}),n.jsx("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4",children:n.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-green-200 font-bold",children:"Setup Trustline"}),n.jsx("p",{className:"text-green-400 text-xs mt-1",children:"One-time per token"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-green-200 font-bold",children:"Enter Amount"}),n.jsx("p",{className:"text-green-400 text-xs mt-1",children:"XRP or tokens"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-green-200 font-bold",children:"Execute Trade"}),n.jsx("p",{className:"text-green-400 text-xs mt-1",children:"Instant settlement"})]})]})})]})]}),n.jsxs("div",{className:"flex gap-6 items-start",children:[n.jsx("div",{className:"flex-shrink-0 w-16 h-16 rounded-full bg-gradient-to-br from-red-600 to-red-800 flex items-center justify-center text-white text-2xl font-bold",children:"4"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-2xl font-bold text-red-200 mb-2",children:"Sell When Ready"}),n.jsx("p",{className:"text-red-300 mb-3",children:"Exit positions anytime through the Trade page. The AMM ensures instant liquidity - no waiting for buyers or sellers."}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"glass rounded-lg p-3 bg-red-500/10",children:[n.jsx("div",{className:"text-red-400 text-xs mb-1",children:"Market Orders"}),n.jsx("p",{className:"text-red-200 text-sm",children:"Instant execution at current price"})]}),n.jsxs("div",{className:"glass rounded-lg p-3 bg-red-500/10",children:[n.jsx("div",{className:"text-red-400 text-xs mb-1",children:"0.01 XRP Fee"}),n.jsx("p",{className:"text-red-200 text-sm",children:"Flat rate per transaction"})]})]})]})]})]})]}),n.jsxs("div",{className:"glass rounded-lg p-8 border border-yellow-500/30 bg-yellow-500/5",children:[n.jsx("h3",{className:"text-3xl font-bold text-yellow-200 mb-4",children:"⚠️ Community-Based Economics"}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("p",{className:"text-yellow-300 leading-relaxed",children:"MemeKings operates on pure free-market principles. All token values are determined entirely by community demand, trading volume, AMM liquidity depth, and supply circulation."}),n.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-6 mt-4",children:[n.jsx("h4",{className:"text-xl font-bold text-yellow-200 mb-3",children:"🎰 No Crying in the Casino"}),n.jsx("p",{className:"text-yellow-300 text-sm mb-3",children:"This is a decentralized trading platform with real financial risk. Token prices can be highly volatile."}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[n.jsxs("div",{className:"bg-red-500/20 border border-red-500/30 rounded p-3 text-center",children:[n.jsx("div",{className:"text-red-200 font-bold mb-1",children:"NO Guarantees"}),n.jsx("p",{className:"text-red-300 text-xs",children:"No promises of returns"})]}),n.jsxs("div",{className:"bg-red-500/20 border border-red-500/30 rounded p-3 text-center",children:[n.jsx("div",{className:"text-red-200 font-bold mb-1",children:"NO Refunds"}),n.jsx("p",{className:"text-red-300 text-xs",children:"All trades are final"})]}),n.jsxs("div",{className:"bg-red-500/20 border border-red-500/30 rounded p-3 text-center",children:[n.jsx("div",{className:"text-red-200 font-bold mb-1",children:"NO Bailouts"}),n.jsx("p",{className:"text-red-300 text-xs",children:"You own your risk"})]})]}),n.jsx("p",{className:"text-yellow-200 font-bold text-center mt-4",children:"⚡ Only trade what you can afford to lose ⚡"})]})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-purple-600/20 to-blue-600/20 border-2 border-purple-500/50 rounded-lg p-8 text-center",children:[n.jsx("h3",{className:"text-3xl font-bold text-purple-200 mb-3",children:"Ready to Start Trading?"}),n.jsx("p",{className:"text-purple-300 mb-6",children:"Join the MemeKings community and start capitalizing on meme token opportunities"}),n.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("navigate",{detail:"setup"})),className:"btn-primary text-white px-12 py-4 rounded-lg font-bold text-lg hover:scale-105 transition-transform",children:"Create Wallet & Get Started →"})]})]})}function gq({wallet:t,network:e,onTrustlineUpdate:r,tokenBalances:s=[]}){const[i,a]=T.useState(!1),[o,l]=T.useState(!1);T.useState(!1),T.useState(null),T.useState("");const c=T.useRef(null);T.useEffect(()=>{const p=f=>{c.current&&!c.current.contains(f.target)&&a(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const d=async()=>{if(!t){ie.error("Please connect a wallet first");return}l(!0);try{const p=new Ve.Client(e==="mainnet"?"wss://xrplcluster.com":"wss://s.altnet.rippletest.net:51233");await p.connect();try{const{data:f}=await le.from("meme_tokens").select("currency_hex, issuer_address").order("created_at",{ascending:!0});if(!f||f.length===0){ie.error("No MEMEKINGS tokens found");return}let m=0,v=0;for(const x of f)try{const b=Ve.Wallet.fromSeed(t.seed),y={TransactionType:"TrustSet",Account:b.address,LimitAmount:{currency:x.currency_hex,issuer:x.issuer_address,value:"1000000000"}},g=await p.autofill(y),w=b.sign(g);(await p.submitAndWait(w.tx_blob)).result.meta.TransactionResult==="tesSUCCESS"?m++:v++}catch(b){console.error(`Error setting up trustline for ${x.currency_hex}:`,b),v++}m>0&&(ie.success(`Successfully set up ${m} trustline(s)`),r&&r()),v>0&&ie.error(`Failed to set up ${v} trustline(s)`)}finally{await p.disconnect()}}catch(p){console.error("Error setting up MEMEKINGS trustlines:",p),ie.error("Failed to set up trustlines")}finally{l(!1),a(!1)}},u=async()=>{if(!t){ie.error("Please connect a wallet first");return}l(!0);try{const p=new Ve.Client(e==="mainnet"?"wss://xrplcluster.com":"wss://s.altnet.rippletest.net:51233");await p.connect();try{const{data:f}=await le.from("meme_tokens").select("currency_hex, issuer_address").order("created_at",{ascending:!0});if(!f||f.length===0){ie.error("No MEMEKINGS tokens found");return}let m=0,v=0;for(const x of f){if(s.some(y=>y.currencyHex===x.currency_hex&&y.issuer===x.issuer_address&&parseFloat(y.value)>0)){console.log(`Skipping ${x.currency_hex} - has balance`);continue}try{const y=Ve.Wallet.fromSeed(t.seed),g={TransactionType:"TrustSet",Account:y.address,LimitAmount:{currency:x.currency_hex,issuer:x.issuer_address,value:"0"}},w=await p.autofill(g),S=y.sign(w);(await p.submitAndWait(S.tx_blob)).result.meta.TransactionResult==="tesSUCCESS"?m++:v++}catch(y){console.error(`Error removing trustline for ${x.currency_hex}:`,y),v++}}m>0?(ie.success(`Successfully removed ${m} trustline(s)`),r&&r()):v===0&&ie.info("No empty trustlines to remove"),v>0&&ie.error(`Failed to remove ${v} trustline(s)`)}finally{await p.disconnect()}}catch(p){console.error("Error removing MEMEKINGS trustlines:",p),ie.error("Failed to remove trustlines")}finally{l(!1),a(!1)}},h=()=>{const p="https://xumm.app";window.open(p,"_blank"),a(!1)};return n.jsxs("div",{className:"relative inline-block z-50",ref:c,children:[n.jsx("button",{onClick:()=>a(!i),disabled:o,className:"bg-gradient-to-r from-purple-600 to-purple-500 text-white py-2 px-4 rounded-lg hover:from-purple-500 hover:to-purple-400 disabled:opacity-50 shadow-lg shadow-purple-500/20 transition-all duration-300 flex items-center gap-2",children:o?n.jsxs(n.Fragment,{children:[n.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):n.jsxs(n.Fragment,{children:["Trust",n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]})}),i&&!o&&n.jsx("div",{className:"absolute right-0 mt-2 w-64 bg-gray-900 rounded-lg shadow-2xl border border-purple-500/30 z-[100]",children:n.jsxs("div",{className:"py-1",children:[n.jsxs("button",{onClick:d,className:"w-full text-left px-4 py-3 text-sm text-purple-200 hover:bg-purple-900/50 transition-colors flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-green-500/20 rounded-lg flex items-center justify-center",children:n.jsx("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"Setup"}),n.jsx("div",{className:"text-xs text-purple-400",children:"Add this token trustline"})]})]}),n.jsxs("button",{onClick:u,className:"w-full text-left px-4 py-3 text-sm text-purple-200 hover:bg-purple-900/50 transition-colors flex items-center gap-3 border-t border-purple-500/20",children:[n.jsx("div",{className:"w-10 h-10 bg-red-500/20 rounded-lg flex items-center justify-center",children:n.jsx("svg",{className:"w-5 h-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"Remove"}),n.jsx("div",{className:"text-xs text-purple-400",children:"Remove empty trustline"})]})]}),n.jsxs("button",{onClick:h,className:"w-full text-left px-4 py-3 text-sm text-purple-200 hover:bg-purple-900/50 transition-colors flex items-center gap-3 border-t border-purple-500/20",children:[n.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center",children:n.jsx("svg",{className:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"XRPScan Link"}),n.jsx("div",{className:"text-xs text-purple-400",children:"View issuer details"})]})]})]})})]})}const L2=async t=>{const r=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",r);return Array.from(new Uint8Array(s)).map(a=>a.toString(16).padStart(2,"0")).join("")};function xq({walletAddress:t,onSuccess:e,onCancel:r}){const[s,i]=T.useState(""),[a,o]=T.useState(""),[l,c]=T.useState(!1),[d,u]=T.useState("");T.useEffect(()=>{const m=localStorage.getItem(`wallet_pin_${t}`);c(!!m)},[t]);const h=async()=>{if(s.length<4||s.length>6){u("PIN must be 4-6 digits");return}if(!/^\d+$/.test(s)){u("PIN must contain only numbers");return}if(s!==a){u("PINs do not match");return}try{const m=await L2(s);localStorage.setItem(`wallet_pin_${t}`,m),ie.success("PIN set successfully"),e()}catch(m){console.error("Error setting PIN:",m),u("Failed to set PIN")}},p=async()=>{if(!s){u("Please enter your PIN");return}try{const m=localStorage.getItem(`wallet_pin_${t}`);await L2(s)===m?(ie.success("PIN verified"),e()):(u("Incorrect PIN"),i(""))}catch(m){console.error("Error verifying PIN:",m),u("Failed to verify PIN")}},f=m=>{m.preventDefault(),u(""),l?p():h()};return n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-lg p-6 max-w-md w-full shadow-2xl",children:[n.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:l?"Enter PIN":"Set PIN"}),n.jsx("p",{className:"text-gray-300 text-sm mb-6",children:l?"Enter your PIN to view the seed phrase":"Set a PIN to protect your seed phrase. This PIN will be required to view the seed."}),n.jsxs("form",{onSubmit:f,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:l?"PIN":"Enter PIN (4-6 digits)"}),n.jsx("input",{type:"password",inputMode:"numeric",pattern:"[0-9]*",maxLength:"6",value:s,onChange:m=>{const v=m.target.value.replace(/\D/g,"");i(v),u("")},className:"w-full bg-gray-800 border border-gray-700 text-white rounded-lg p-3 text-center text-2xl tracking-widest focus:border-green-500 focus:ring-green-500/50",placeholder:"••••",autoFocus:!0})]}),!l&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Confirm PIN"}),n.jsx("input",{type:"password",inputMode:"numeric",pattern:"[0-9]*",maxLength:"6",value:a,onChange:m=>{const v=m.target.value.replace(/\D/g,"");o(v),u("")},className:"w-full bg-gray-800 border border-gray-700 text-white rounded-lg p-3 text-center text-2xl tracking-widest focus:border-green-500 focus:ring-green-500/50",placeholder:"••••"})]}),d&&n.jsx("div",{className:"text-red-400 text-sm bg-red-500/10 border border-red-500/30 rounded-lg p-3",children:d}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{type:"button",onClick:r,className:"flex-1 bg-gray-800 text-gray-300 py-3 px-4 rounded-lg hover:bg-gray-700 transition-all duration-300",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:!s||!l&&!a,className:"flex-1 bg-gradient-to-r from-green-600 to-green-500 text-white py-3 px-4 rounded-lg hover:from-green-500 hover:to-green-400 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-green-500/20 transition-all duration-300",children:l?"Verify":"Set PIN"})]})]}),l&&n.jsx("div",{className:"mt-4 p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:n.jsx("p",{className:"text-yellow-300 text-xs",children:"Forgot your PIN? You'll need to delete and re-import this wallet."})})]})})}function yq(){const[t,e]=T.useState([]),[r,s]=T.useState(null),[i,a]=T.useState("list"),[o,l]=T.useState(""),[c,d]=T.useState(!1),[u,h]=T.useState(null),[p,f]=T.useState(!1),[m,v]=T.useState(!1),[x,b]=T.useState(!1),[y,g]=T.useState(null),[w,S]=T.useState(!1),[_,A]=T.useState(null),[B,Q]=T.useState("mainnet"),[U,q]=T.useState(!1),[de,me]=T.useState(null),[ye,G]=T.useState(""),[Z,he]=T.useState(!1),[ee,H]=T.useState(null),[I,K]=T.useState([]),[re,z]=T.useState({name:"",address:"",seed:"",purpose:"trading",notes:""});T.useEffect(()=>{k(),pe()},[c]);const O=F=>{try{const J=localStorage.getItem("wallets"),Ee=(J?JSON.parse(J):[]).map(Te=>Te.id===F.id?{...Te,is_favorite:!Te.is_favorite}:Te);localStorage.setItem("wallets",JSON.stringify(Ee)),ie.success(F.is_favorite?"Removed from favorites":"Added to favorites"),k()}catch(J){console.error("Error updating favorite:",J),ie.error("Failed to update favorite")}},V=(F,J)=>{navigator.clipboard.writeText(F),ie.success(`${J} copied to clipboard!`)},ne=t.filter(F=>F.name.toLowerCase().includes(o.toLowerCase())||F.address.toLowerCase().includes(o.toLowerCase())),pe=()=>{const F=localStorage.getItem("connectedWallet");F&&s(JSON.parse(F))},ae=F=>{const J={...F,seed:F.encrypted_seed||F.seed};s(J),localStorage.setItem("connectedWallet",JSON.stringify(J)),ie.success(`Connected to ${F.name}`),window.dispatchEvent(new Event("walletConnected"))},se=()=>{s(null),localStorage.removeItem("connectedWallet"),ie.success("Wallet disconnected"),window.dispatchEvent(new Event("walletDisconnected"))},k=async()=>{try{const F=localStorage.getItem("wallets");let J=F?JSON.parse(F):[];c&&(J=J.filter(xe=>xe.is_favorite)),J.sort((xe,Ee)=>xe.is_favorite!==Ee.is_favorite?Ee.is_favorite?1:-1:new Date(Ee.created_at)-new Date(xe.created_at)),e(J),j(J)}catch(F){console.error("Error loading wallets:",F),ie.error("Failed to load wallets")}},j=async F=>{var J;try{const{requestWithRetry:xe}=await $t(()=>Promise.resolve().then(()=>tr),void 0),Ee=localStorage.getItem("wallets"),Te=Ee?JSON.parse(Ee):[];for(const Be of F)try{const nt=await xe({command:"account_info",account:Be.address,ledger_index:"validated"}),De=parseFloat(nt.result.account_data.Balance)/1e6;if(De!==Be.balance_xrp){Be.balance_xrp=De;const L=Te.findIndex(N=>N.id===Be.id);L!==-1&&(Te[L].balance_xrp=De)}}catch(nt){if(((J=nt.data)==null?void 0:J.error)==="actNotFound"&&Be.balance_xrp!==0){Be.balance_xrp=0;const De=Te.findIndex(L=>L.id===Be.id);De!==-1&&(Te[De].balance_xrp=0)}}localStorage.setItem("wallets",JSON.stringify(Te)),e([...F])}catch(xe){console.error("Error updating wallet balances:",xe)}},P=async()=>{if(!re.name||!re.address){ie.error("Name and address are required");return}try{const F=localStorage.getItem("wallets"),J=F?JSON.parse(F):[];if(y){const xe=J.findIndex(Ee=>Ee.id===y.id);xe!==-1&&(J[xe]={...J[xe],name:re.name,encrypted_seed:re.seed||y.encrypted_seed,purpose:re.purpose,notes:re.notes,updated_at:new Date().toISOString()}),ie.success("Wallet updated successfully")}else{const xe={id:Date.now().toString(),name:re.name,address:re.address,encrypted_seed:re.seed,purpose:re.purpose,notes:re.notes,network:re.address.startsWith("r")?"mainnet":"testnet",is_favorite:!1,balance_xrp:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};J.push(xe),ie.success("Wallet added successfully")}localStorage.setItem("wallets",JSON.stringify(J)),f(!1),g(null),z({name:"",address:"",seed:"",purpose:"trading",notes:""}),k()}catch(F){console.error("Error saving wallet:",F),ie.error("Failed to save wallet")}},$=async F=>{if(confirm("Are you sure you want to delete this wallet?"))try{const J=localStorage.getItem("wallets"),Ee=(J?JSON.parse(J):[]).filter(Te=>Te.id!==F);localStorage.setItem("wallets",JSON.stringify(Ee)),ie.success("Wallet deleted successfully"),k()}catch(J){console.error("Error deleting wallet:",J),ie.error("Failed to delete wallet")}},R=F=>{g(F),z({name:F.name,address:F.address,seed:"",purpose:F.purpose,notes:F.notes||""}),f(!0)},W=async()=>{S(!0),A(null);try{const{getClient:F}=await $t(()=>Promise.resolve().then(()=>tr),void 0),J=await F();ie.success("Connected to XRPL");const xe=Ve.Wallet.generate();if(B==="testnet"){ie.loading("Funding wallet with test XRP...");const Ee=await J.fundWallet(xe);ie.dismiss(),ie.success("Wallet funded with test XRP!")}A({address:xe.address,seed:xe.seed,publicKey:xe.publicKey,privateKey:xe.privateKey,network:B}),ie.success("Wallet generated successfully!")}catch(F){console.error("Error generating wallet:",F),ie.error("Failed to generate wallet: "+F.message)}finally{S(!1)}},te=async F=>{if(!_||!F){ie.error("Please provide a wallet name");return}try{const J=localStorage.getItem("wallets"),xe=J?JSON.parse(J):[],Ee={id:Date.now().toString(),name:F,address:_.address,encrypted_seed:_.seed,purpose:"trading",notes:`Generated on ${_.network}`,network:_.network,is_favorite:!1,balance_xrp:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};xe.push(Ee),localStorage.setItem("wallets",JSON.stringify(xe)),ie.success("Wallet saved successfully!"),v(!1),A(null),k()}catch(J){console.error("Error saving wallet:",J),ie.error("Failed to save wallet")}},X=async()=>{var F;if(!ye.trim()){ie.error("Please enter a seed phrase");return}q(!0),me(null);try{const J=Ve.Wallet.fromSeed(ye.trim()),{requestWithRetry:xe}=await $t(()=>Promise.resolve().then(()=>tr),void 0);let Ee=0;try{const Te=await xe({command:"account_info",account:J.address,ledger_index:"validated"});Ee=parseFloat(Te.result.account_data.Balance)/1e6}catch(Te){if(((F=Te.data)==null?void 0:F.error)!=="actNotFound")throw Te}me({address:J.address,seed:J.seed,publicKey:J.publicKey,balance:Ee}),ie.success("Wallet imported successfully!")}catch(J){console.error("Error importing wallet:",J),ie.error("Failed to import wallet: Invalid seed phrase or network error")}finally{q(!1)}},oe=async F=>{if(!de||!F){ie.error("Please provide a wallet name");return}try{if(t.find(Be=>Be.address===de.address)){ie.error("This wallet address already exists!");return}const xe=localStorage.getItem("wallets"),Ee=xe?JSON.parse(xe):[],Te={id:Date.now().toString(),name:F,address:de.address,encrypted_seed:de.seed,purpose:"trading",notes:"Imported from seed",network:"testnet",balance_xrp:de.balance,is_favorite:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};Ee.push(Te),localStorage.setItem("wallets",JSON.stringify(Ee)),ie.success("Wallet saved successfully!"),b(!1),me(null),G(""),k()}catch(J){console.error("Error saving imported wallet:",J),ie.error("Failed to save wallet")}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-purple-200",children:"Wallet Management"}),n.jsx("p",{className:"text-purple-400 mt-1",children:"Manage your XRPL wallets"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>a("grid"),className:`px-4 py-2 rounded-lg transition-all ${i==="grid"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"▦ Grid"}),n.jsx("button",{onClick:()=>a("list"),className:`px-4 py-2 rounded-lg transition-all ${i==="list"?"bg-purple-600 text-white":"glass text-purple-300"}`,children:"☰ List"})]}),n.jsx("button",{onClick:()=>v(!0),className:"btn-primary text-white px-6 py-2 rounded-lg font-medium",children:"🎲 Generate Wallet"}),n.jsx("button",{onClick:()=>{G(""),me(null),b(!0)},className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium",children:"📥 Import from Seed"}),n.jsx("button",{onClick:()=>{g(null),z({name:"",address:"",seed:"",purpose:"trading",notes:""}),f(!0)},className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium",children:"+ Add Existing"}),r&&n.jsx(gq,{wallet:r,network:r.network||"testnet",tokenBalances:I,onTrustlineUpdate:()=>{ie.success("Trustlines updated")}})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"flex-1 relative",children:n.jsx("input",{type:"text",value:o,onChange:F=>l(F.target.value),placeholder:"🔍 Search wallets by name or address...",className:"input w-full text-purple-200 pl-4"})}),n.jsx("button",{onClick:()=>d(!c),className:`px-6 py-2 rounded-lg font-medium transition-all ${c?"bg-yellow-500 text-white":"glass text-purple-300 hover:text-yellow-400"}`,children:c?"⭐ Favorites Only":"☆ Show All"})]}),i==="grid"?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ne.map(F=>n.jsxs("div",{className:"glass rounded-lg p-6 space-y-4",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h3",{className:"text-xl font-bold text-purple-200",children:F.name}),n.jsx("button",{onClick:()=>O(F),className:"text-xl hover:scale-110 transition-transform",children:F.is_favorite?"⭐":"☆"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-medium bg-purple-500/20 text-purple-300",children:F.purpose}),n.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${F.network==="mainnet"?"bg-green-500/20 text-green-300":"bg-blue-500/20 text-blue-300"}`,children:F.network==="mainnet"?"🌐 Mainnet":"🧪 Testnet"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>R(F),className:"text-purple-400 hover:text-purple-300",children:"✏️"}),n.jsx("button",{onClick:()=>$(F.id),className:"text-red-400 hover:text-red-300",children:"🗑️"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"text-purple-400 text-xs mb-1 flex items-center justify-between",children:[n.jsx("span",{children:"Address"}),n.jsx("button",{onClick:()=>V(F.address,"Address"),className:"text-purple-400 hover:text-purple-300",children:"📋"})]}),n.jsx("div",{className:"text-purple-200 text-sm font-mono bg-black/30 p-2 rounded break-all",children:F.address})]}),F.encrypted_seed&&n.jsxs("div",{children:[n.jsxs("div",{className:"text-purple-400 text-xs mb-1 flex items-center justify-between",children:[n.jsx("span",{children:"Seed"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>{if(u===F.id)h(null);else{const xe=localStorage.getItem(`wallet_pin_${F.address}`);H(F),he(!0)}},className:"text-purple-400 hover:text-purple-300",children:u===F.id?"🙈":"👁️"}),u===F.id&&n.jsx("button",{onClick:()=>V(F.encrypted_seed,"Seed"),className:"text-purple-400 hover:text-purple-300",children:"📋"})]})]}),n.jsx("div",{className:"text-purple-200 text-sm font-mono bg-black/30 p-2 rounded break-all",children:u===F.id?F.encrypted_seed:"••••••••••••••••"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"Balance"}),n.jsxs("div",{className:"text-purple-200 text-lg font-bold",children:[F.balance_xrp||0," XRP"]})]}),F.notes&&n.jsxs("div",{children:[n.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"Notes"}),n.jsx("div",{className:"text-purple-300 text-sm",children:F.notes})]})]}),n.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-purple-500/20",children:[n.jsxs("div",{className:"text-purple-500 text-xs",children:["Added: ",new Date(F.created_at).toLocaleDateString()]}),(r==null?void 0:r.id)===F.id?n.jsx("button",{onClick:se,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium text-sm",children:"Disconnect"}):n.jsx("button",{onClick:()=>ae(F),className:"btn-primary text-white px-4 py-2 rounded-lg font-medium text-sm",children:"Connect"})]})]},F.id))}):n.jsx("div",{className:"glass rounded-lg overflow-hidden",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-purple-900/50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left px-6 py-4 text-purple-300 font-medium",children:"Fav"}),n.jsx("th",{className:"text-left px-6 py-4 text-purple-300 font-medium",children:"Name"}),n.jsx("th",{className:"text-left px-6 py-4 text-purple-300 font-medium",children:"Network"}),n.jsx("th",{className:"text-left px-6 py-4 text-purple-300 font-medium",children:"Address"}),n.jsx("th",{className:"text-left px-6 py-4 text-purple-300 font-medium",children:"Seed"}),n.jsx("th",{className:"text-left px-6 py-4 text-purple-300 font-medium",children:"Purpose"}),n.jsx("th",{className:"text-left px-6 py-4 text-purple-300 font-medium",children:"Balance"}),n.jsx("th",{className:"text-left px-6 py-4 text-purple-300 font-medium",children:"Connection"}),n.jsx("th",{className:"text-left px-6 py-4 text-purple-300 font-medium",children:"Actions"})]})}),n.jsx("tbody",{children:ne.map(F=>n.jsxs("tr",{className:"border-t border-purple-500/20 hover:bg-purple-900/20",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsx("button",{onClick:()=>O(F),className:"text-xl hover:scale-110 transition-transform",children:F.is_favorite?"⭐":"☆"})}),n.jsx("td",{className:"px-6 py-4 text-purple-200 font-medium",children:F.name}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${F.network==="mainnet"?"bg-green-500/20 text-green-300":"bg-blue-500/20 text-blue-300"}`,children:F.network==="mainnet"?"🌐":"🧪"})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-purple-300 font-mono text-sm",children:[F.address.slice(0,15),"..."]}),n.jsx("button",{onClick:()=>V(F.address,"Address"),className:"text-purple-400 hover:text-purple-300",children:"📋"})]})}),n.jsx("td",{className:"px-6 py-4",children:F.encrypted_seed&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-purple-300 font-mono text-sm",children:u===F.id?F.encrypted_seed.slice(0,15)+"...":"••••••••"}),n.jsx("button",{onClick:()=>{u===F.id?h(null):(H(F),he(!0))},className:"text-purple-400 hover:text-purple-300",children:u===F.id?"🙈":"👁️"}),u===F.id&&n.jsx("button",{onClick:()=>V(F.encrypted_seed,"Seed"),className:"text-purple-400 hover:text-purple-300",children:"📋"})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-purple-500/20 text-purple-300",children:F.purpose})}),n.jsxs("td",{className:"px-6 py-4 text-purple-200 font-bold",children:[F.balance_xrp||0," XRP"]}),n.jsx("td",{className:"px-6 py-4",children:(r==null?void 0:r.id)===F.id?n.jsx("button",{onClick:se,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm",children:"Disconnect"}):n.jsx("button",{onClick:()=>ae(F),className:"btn-primary text-white px-3 py-1 rounded text-sm",children:"Connect"})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>R(F),className:"text-purple-400 hover:text-purple-300",children:"✏️"}),n.jsx("button",{onClick:()=>$(F.id),className:"text-red-400 hover:text-red-300",children:"🗑️"})]})})]},F.id))})]})}),p&&n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"glass rounded-lg p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:y?"Edit Wallet":"Add New Wallet"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:"Wallet Name *"}),n.jsx("input",{type:"text",value:re.name,onChange:F=>z({...re,name:F.target.value}),className:"input w-full text-purple-200",placeholder:"My Trading Wallet"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:"Wallet Address *"}),n.jsx("input",{type:"text",value:re.address,onChange:F=>z({...re,address:F.target.value}),className:"input w-full text-purple-200 font-mono",placeholder:"rXXXXXXXXXXXXXXXXXXXXXXXXXXXX",disabled:y})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-purple-300 mb-2",children:["Seed ",y?"(leave empty to keep current)":"(optional)"]}),n.jsx("input",{type:"password",value:re.seed,onChange:F=>z({...re,seed:F.target.value}),className:"input w-full text-purple-200 font-mono",placeholder:"sXXXXXXXXXXXXXXXXXXXXXXXXXXXX"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:"Purpose"}),n.jsxs("select",{value:re.purpose,onChange:F=>z({...re,purpose:F.target.value}),className:"input w-full text-purple-200",children:[n.jsx("option",{value:"trading",children:"Trading"}),n.jsx("option",{value:"issuer",children:"Token Issuer"}),n.jsx("option",{value:"receiver",children:"Token Receiver"}),n.jsx("option",{value:"hodl",children:"HODL"}),n.jsx("option",{value:"other",children:"Other"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:"Notes"}),n.jsx("textarea",{value:re.notes,onChange:F=>z({...re,notes:F.target.value}),className:"input w-full text-purple-200 h-24",placeholder:"Additional notes about this wallet..."})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsxs("button",{onClick:P,className:"btn-primary text-white px-6 py-2 rounded-lg font-medium flex-1",children:[y?"Update":"Add"," Wallet"]}),n.jsx("button",{onClick:()=>{f(!1),g(null),z({name:"",address:"",seed:"",purpose:"trading",notes:""})},className:"btn text-purple-300 px-6 py-2 rounded-lg font-medium",children:"Cancel"})]})]})}),t.length===0&&n.jsxs("div",{className:"glass rounded-lg p-12 text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:"💼"}),n.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-2",children:"No Wallets Yet"}),n.jsx("p",{className:"text-purple-400",children:"Generate or add your first wallet to get started"})]}),m&&n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"glass rounded-lg p-8 max-w-2xl w-full",children:[n.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:"Generate New XRPL Wallet"}),_?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"text-green-400 text-xl",children:"✓"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium text-green-300 mb-1",children:"Wallet Generated Successfully!"}),n.jsxs("div",{className:"text-green-200/80 text-sm",children:["Your new ",_.network," wallet has been created. Save your seed phrase securely!"]})]})]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-400 text-sm mb-2",children:"Wallet Address"}),n.jsx("div",{className:"input text-purple-200 font-mono text-sm break-all",children:_.address})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-400 text-sm mb-2",children:"Seed Phrase (Secret Key)"}),n.jsx("div",{className:"input text-red-400 font-mono text-sm break-all bg-red-500/10 border-red-500/30",children:_.seed}),n.jsx("div",{className:"text-red-400 text-xs mt-2",children:"⚠️ Keep this secret! Anyone with this can access your wallet."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-400 text-sm mb-2",children:"Public Key"}),n.jsx("div",{className:"input text-purple-300 font-mono text-xs break-all",children:_.publicKey})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-400 text-sm mb-2",children:"Network"}),n.jsx("div",{className:"input text-purple-200 uppercase",children:_.network})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:"Wallet Name *"}),n.jsx("input",{type:"text",id:"walletName",className:"input w-full text-purple-200",placeholder:"My Trading Wallet"})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{const F=document.getElementById("walletName").value;te(F)},className:"btn-primary text-white px-6 py-3 rounded-lg font-medium flex-1",children:"💾 Save Wallet"}),n.jsx("button",{onClick:()=>{confirm("Are you sure? Make sure you've saved your seed phrase!")&&(v(!1),A(null))},className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium",children:"Close"})]}),n.jsx("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-lg p-4",children:n.jsxs("div",{className:"text-purple-300 text-sm",children:[n.jsx("div",{className:"font-medium mb-2",children:"📋 Next Steps:"}),n.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[n.jsx("li",{children:"Copy and securely store your seed phrase"}),n.jsx("li",{children:"Save this wallet to your list"}),_.network==="mainnet"&&n.jsxs(n.Fragment,{children:[n.jsx("li",{children:"Send at least 2 XRP to activate the wallet (10-20 XRP recommended)"}),n.jsx("li",{children:"Budget 0.01 XRP per token trade and 5 XRP per trading bot"})]}),n.jsx("li",{children:"Start using your new wallet!"})]})]})})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-3 font-medium",children:"Select Network"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("button",{onClick:()=>Q("testnet"),className:`p-4 rounded-lg border-2 transition-all ${B==="testnet"?"border-purple-500 bg-purple-500/20":"border-purple-500/30 bg-purple-900/20 hover:border-purple-500/50"}`,children:[n.jsx("div",{className:"text-xl mb-2",children:"🧪"}),n.jsx("div",{className:"font-bold text-purple-200",children:"Testnet"}),n.jsx("div",{className:"text-sm text-purple-400 mt-1",children:"Free test XRP included"})]}),n.jsxs("button",{onClick:()=>Q("mainnet"),className:`p-4 rounded-lg border-2 transition-all ${B==="mainnet"?"border-purple-500 bg-purple-500/20":"border-purple-500/30 bg-purple-900/20 hover:border-purple-500/50"}`,children:[n.jsx("div",{className:"text-xl mb-2",children:"🌐"}),n.jsx("div",{className:"font-bold text-purple-200",children:"Mainnet"}),n.jsx("div",{className:"text-sm text-purple-400 mt-1",children:"Production network"})]})]})]}),B==="testnet"?n.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"text-yellow-400 text-xl",children:"⚠️"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium text-yellow-300 mb-1",children:"Important"}),n.jsx("div",{className:"text-yellow-200/80 text-sm",children:"Testnet wallets receive free test XRP automatically. This is for testing only."})]})]})}):n.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"text-yellow-400 text-xl",children:"⚠️"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium text-yellow-300 mb-2",children:"XRP Requirements for Mainnet"}),n.jsxs("div",{className:"text-yellow-200/80 text-sm space-y-2",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Wallet Activation:"})," 2 XRP minimum required to activate your wallet"]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Token Trading:"})," 0.01 XRP per buy or sell transaction"]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Trading Bots:"})," 5 XRP per bot (unlimited bots supported)"]}),n.jsxs("div",{className:"pt-2 border-t border-yellow-500/30 mt-2",children:[n.jsx("strong",{children:"Recommendation:"})," Send at least 10-20 XRP to your wallet for comfortable trading and platform usage."]})]})]})]})}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:W,disabled:w,className:"btn-primary text-white px-6 py-3 rounded-lg font-medium flex-1 disabled:opacity-50",children:w?"🔄 Generating...":"🎲 Generate Wallet"}),n.jsx("button",{onClick:()=>{v(!1),A(null)},className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium",disabled:w,children:"Cancel"})]})]})]})}),x&&n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:()=>b(!1),children:n.jsxs("div",{className:"glass rounded-lg max-w-2xl w-full p-8",onClick:F=>F.stopPropagation(),children:[n.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:"Import Wallet from Seed"}),de?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"text-green-400 text-2xl",children:"✓"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-green-400 font-medium mb-1",children:"Wallet Imported Successfully!"}),n.jsx("div",{className:"text-green-300 text-sm",children:"Please review the details and save this wallet."})]})]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-400 text-sm mb-2",children:"Wallet Address"}),n.jsxs("div",{className:"input text-purple-200 font-mono break-all flex items-center justify-between gap-2",children:[n.jsx("span",{children:de.address}),n.jsx("button",{onClick:()=>V(de.address,"Address"),className:"btn text-purple-300 px-2 py-1 text-xs rounded",children:"📋"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-400 text-sm mb-2",children:"Public Key"}),n.jsx("div",{className:"input text-purple-300 font-mono text-xs break-all",children:de.publicKey})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-400 text-sm mb-2",children:"Current Balance"}),n.jsxs("div",{className:"input text-purple-200",children:[de.balance," XRP"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:"Wallet Name *"}),n.jsx("input",{type:"text",id:"importWalletName",className:"input w-full text-purple-200",placeholder:"My Imported Wallet"})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{const F=document.getElementById("importWalletName").value;oe(F)},className:"btn-primary text-white px-6 py-3 rounded-lg font-medium flex-1",children:"💾 Save Wallet"}),n.jsx("button",{onClick:()=>{b(!1),me(null),G("")},className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium",children:"Cancel"})]}),n.jsx("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-lg p-4",children:n.jsxs("div",{className:"text-purple-300 text-sm",children:[n.jsx("div",{className:"font-medium mb-2",children:"📋 Next Steps:"}),n.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[n.jsx("li",{children:"Verify the wallet address and balance"}),n.jsx("li",{children:"Give your wallet a memorable name"}),n.jsx("li",{children:"Save the wallet to your list"}),n.jsx("li",{children:"Start managing your tokens!"})]})]})})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"text-yellow-400 text-xl",children:"⚠️"}),n.jsxs("div",{className:"flex-1 text-yellow-200 text-sm",children:[n.jsx("div",{className:"font-medium mb-1",children:"Security Warning"}),n.jsx("div",{children:"Never share your seed phrase with anyone. Make sure you're in a secure environment."})]})]})}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:"Seed Phrase *"}),n.jsx("textarea",{value:ye,onChange:F=>G(F.target.value),className:"input w-full text-purple-200 font-mono h-24",placeholder:"sXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",autoFocus:!0}),n.jsx("p",{className:"text-purple-400 text-xs mt-1",children:"Enter your XRPL seed phrase (starts with 's')"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:X,disabled:U||!ye.trim(),className:"btn-primary text-white px-6 py-3 rounded-lg font-medium flex-1 disabled:opacity-50",children:U?"🔄 Importing...":"📥 Import Wallet"}),n.jsx("button",{onClick:()=>{b(!1),G("")},disabled:U,className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium disabled:opacity-50",children:"Cancel"})]}),n.jsx("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-lg p-4",children:n.jsxs("div",{className:"text-purple-300 text-sm",children:[n.jsx("div",{className:"font-medium mb-2",children:"ℹ️ About Importing"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsx("li",{children:"This will import an existing XRPL wallet using its seed phrase"}),n.jsx("li",{children:"The wallet will be checked on the testnet network"}),n.jsx("li",{children:"Your seed phrase is securely stored in the database"}),n.jsx("li",{children:"You'll get full control over the imported wallet"})]})]})})]})]})}),Z&&ee&&n.jsx(xq,{walletAddress:ee.address,onSuccess:()=>{h(ee.id),H(null),he(!1)},onCancel:()=>{H(null),he(!1)}})]})}function vq(){const[t,e]=T.useState([]),[r,s]=T.useState([]),[i,a]=T.useState([]),[o,l]=T.useState(""),[c,d]=T.useState("");T.useState(null),T.useEffect(()=>{u()},[]);const u=async()=>{var b,y;try{const[g,w,S]=await Promise.all([le.from("meme_tokens").select("*").order("created_at",{ascending:!1}),le.from("wallets").select("*").order("created_at",{ascending:!1}),le.from("activity_logs").select("*").order("created_at",{ascending:!1})]);if(g.error)throw g.error;if(w.error)throw w.error;if(S.error)throw S.error;e(g.data||[]),s(w.data||[]),a(S.data||[]),w.data&&w.data.length>=2&&(l(((b=w.data[0])==null?void 0:b.id)||""),d(((y=w.data[1])==null?void 0:y.id)||""))}catch(g){console.error("Error loading data:",g),ie.error("Failed to load data")}},h=async()=>{try{const b={tokens:t,wallets:r.map(S=>({...S,encrypted_seed:S.encrypted_seed?"***ENCRYPTED***":null})),activityLogs:i,settings:{issuer:o,receiver:c},stats:{totalTokens:t.length,totalWallets:r.length,totalActivities:i.length,activePools:t.filter(S=>S.amm_pool_created).length,totalXRPLocked:t.reduce((S,_)=>S+(_.amm_xrp_amount||0),0)},exportDate:new Date().toISOString(),version:"2.0"},y=new Blob([JSON.stringify(b,null,2)],{type:"application/json"}),g=URL.createObjectURL(y),w=document.createElement("a");w.href=g,w.download=`memekings-export-${Date.now()}.json`,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(g),ie.success("Data exported successfully!")}catch(b){console.error("Error exporting data:",b),ie.error("Failed to export data")}},p=()=>{try{const b=["Token Name","Issuer Address","Supply","Market Cap (XRP)","XRP Locked","Status","Created"],y=t.map(A=>{const B=A.amm_pool_created&&A.amm_xrp_amount&&A.amm_asset_amount?(A.supply*(A.amm_xrp_amount/A.amm_asset_amount)).toFixed(4):"0";return[A.token_name,A.issuer_address,A.supply,B,A.amm_xrp_amount||0,A.amm_pool_created?"Active":"Pending",new Date(A.created_at).toLocaleString()]}),g=[b,...y].map(A=>A.join(",")).join(`
`),w=new Blob([g],{type:"text/csv"}),S=URL.createObjectURL(w),_=document.createElement("a");_.href=S,_.download=`memekings-tokens-${Date.now()}.csv`,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(S),ie.success("Tokens exported to CSV!")}catch(b){console.error("Error exporting CSV:",b),ie.error("Failed to export CSV")}},f=async b=>{var g,w;const y=b.target.files[0];if(y)try{const S=await y.text(),_=JSON.parse(S);if(!_.tokens)throw new Error("Invalid data format - missing tokens");const A=((g=_.activityLogs)==null?void 0:g.length)||0,B=((w=_.wallets)==null?void 0:w.length)||0;if(!confirm(`Import Data Summary:
• ${_.tokens.length} tokens
• ${B} wallets
• ${A} activity logs

This will add to your existing data. Continue?`))return;const U=[];_.tokens&&_.tokens.length>0&&U.push(le.from("meme_tokens").upsert(_.tokens,{onConflict:"id"})),_.wallets&&_.wallets.length>0&&U.push(le.from("wallets").upsert(_.wallets,{onConflict:"id"})),_.activityLogs&&_.activityLogs.length>0&&U.push(le.from("activity_logs").upsert(_.activityLogs,{onConflict:"id"}));const de=(await Promise.all(U)).filter(me=>me.error);if(de.length>0)throw new Error("Some imports failed: "+de.map(me=>me.error.message).join(", "));ie.success(`Imported successfully!
${_.tokens.length} tokens, ${B} wallets, ${A} activities`),u()}catch(S){console.error("Error importing data:",S),ie.error("Failed to import data: "+S.message)}},m=async()=>{if(!(!confirm(`WARNING: This will delete ALL tokens, wallets, and activity logs!

This action cannot be undone. Are you sure?`)||!confirm("Are you ABSOLUTELY sure? This will delete everything!")))try{await Promise.all([le.from("meme_tokens").delete().neq("id","00000000-0000-0000-0000-000000000000"),le.from("wallets").delete().neq("id","00000000-0000-0000-0000-000000000000"),le.from("activity_logs").delete().neq("id","00000000-0000-0000-0000-000000000000")]),localStorage.clear(),ie.success("All data cleared!"),u()}catch(g){console.error("Error clearing data:",g),ie.error("Failed to clear data")}},v=r.find(b=>b.id===o),x=r.find(b=>b.id===c);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-purple-200",children:"Setup & Configuration"}),n.jsx("p",{className:"text-purple-400 mt-1",children:"Manage your MEMEKINGS settings and data"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Token Creation Wallets"}),n.jsx("p",{className:"text-purple-400 text-sm mb-4",children:"Default wallets used for automatic token creation"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:"Issuer Wallet (Creates Tokens)"}),n.jsx("div",{className:"input w-full text-purple-400 bg-purple-900/20 cursor-not-allowed",children:v?`${v.address}`:"No issuer wallet set"}),v&&n.jsxs("div",{className:"mt-2 text-xs text-purple-400",children:["Balance: ",v.balance_xrp||0," XRP"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-purple-300 mb-2",children:"Receiver Wallet (Receives Tokens)"}),n.jsx("div",{className:"input w-full text-purple-400 bg-purple-900/20 cursor-not-allowed",children:x?`${x.address}`:"No receiver wallet set"}),x&&n.jsxs("div",{className:"mt-2 text-xs text-purple-400",children:["Balance: ",x.balance_xrp||0," XRP"]})]}),r.length<2&&n.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"text-yellow-400 text-xl",children:"⚠️"}),n.jsx("div",{className:"flex-1 text-yellow-200 text-sm",children:"You need at least 2 wallets to create tokens. Go to Wallet Management to add or generate wallets."})]})})]})]}),n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Data Statistics"}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-purple-300",children:"Total Tokens"}),n.jsx("span",{className:"text-2xl font-bold text-purple-200",children:t.length})]})}),n.jsx("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-purple-300",children:"Total Wallets"}),n.jsx("span",{className:"text-2xl font-bold text-purple-200",children:r.length})]})}),n.jsx("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-purple-300",children:"Active Pools"}),n.jsx("span",{className:"text-2xl font-bold text-purple-200",children:t.filter(b=>b.amm_pool_created).length})]})}),n.jsx("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-purple-300",children:"Total XRP Locked"}),n.jsx("span",{className:"text-2xl font-bold text-purple-200",children:t.reduce((b,y)=>b+(y.amm_xrp_amount||0),0).toFixed(2)})]})}),n.jsx("div",{className:"p-4 bg-purple-900/20 rounded-lg",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-purple-300",children:"Activity Logs"}),n.jsx("span",{className:"text-2xl font-bold text-purple-200",children:i.length})]})})]})]})]}),n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Export Data"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx("button",{onClick:h,className:"btn-primary text-white px-6 py-3 rounded-lg font-medium",children:"📦 Export All Data (JSON)"}),n.jsx("button",{onClick:p,className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium",children:"📊 Export Tokens (CSV)"}),n.jsx("button",{onClick:()=>{const b=JSON.stringify(r,null,2),y=new Blob([b],{type:"application/json"}),g=URL.createObjectURL(y),w=document.createElement("a");w.href=g,w.download=`wallets-${Date.now()}.json`,w.click(),URL.revokeObjectURL(g),ie.success("Wallets exported!")},className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium",children:"💼 Export Wallets (JSON)"}),n.jsx("button",{onClick:()=>{const b=JSON.stringify(i,null,2),y=new Blob([b],{type:"application/json"}),g=URL.createObjectURL(y),w=document.createElement("a");w.href=g,w.download=`activity-logs-${Date.now()}.json`,w.click(),URL.revokeObjectURL(g),ie.success("Activity logs exported!")},className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium",children:"📜 Export Activity Logs (JSON)"})]}),n.jsx("p",{className:"text-purple-400 text-sm mt-3",children:'Export your data for backup or migration purposes. "Export All Data" includes everything.'})]}),n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Import Data"}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{children:n.jsxs("label",{className:"btn text-purple-300 px-6 py-3 rounded-lg font-medium cursor-pointer inline-block",children:["📥 Import JSON File",n.jsx("input",{type:"file",accept:".json",onChange:f,className:"hidden"})]})}),n.jsx("p",{className:"text-purple-400 text-sm",children:"Import previously exported data. This will add to your existing data without deleting anything."})]})]}),n.jsxs("div",{className:"glass rounded-lg p-6 border-2 border-red-500/30",children:[n.jsx("h3",{className:"text-xl font-bold text-red-400 mb-4",children:"Danger Zone"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"bg-red-500/10 rounded-lg p-4",children:[n.jsx("h4",{className:"text-red-300 font-bold mb-2",children:"Clear All Data"}),n.jsx("p",{className:"text-red-200/80 text-sm mb-3",children:"This will permanently delete all tokens, wallets, and settings. This action cannot be undone!"}),n.jsx("button",{onClick:m,className:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg font-medium",children:"🗑️ Clear All Data"})]})})]}),n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"Local Storage Info"}),n.jsxs("div",{className:"space-y-2 text-sm text-purple-300",children:[n.jsx("p",{children:"• Wallet settings are saved locally in your browser"}),n.jsx("p",{children:"• Token and wallet data is stored in Supabase database"}),n.jsx("p",{children:"• Export your data regularly for backup"}),n.jsx("p",{children:"• Clearing browser data will remove local settings only"})]})]})]})}const Hv={WALLET:[{id:"check_balance",label:"Check my XRP balance",prompt:"What is my current XRP balance?"},{id:"wallet_info",label:"Show wallet information",prompt:"Show me detailed information about my connected wallet"},{id:"wallet_history",label:"View transaction history",prompt:"Show my recent transaction history"},{id:"send_xrp",label:"Send XRP to an address",prompt:"I want to send XRP to another wallet"},{id:"send_token",label:"Send tokens",prompt:"I want to send tokens from my wallet"},{id:"receive_token",label:"Receive tokens",prompt:"Show me my wallet address to receive tokens"},{id:"trustline_setup",label:"Setup trustline",prompt:"Help me setup a trustline for a token"},{id:"wallet_assets",label:"View all wallet assets",prompt:"Show me all tokens and assets in my wallet"},{id:"wallet_reserve",label:"Check wallet reserve",prompt:"What is my wallet reserve requirement?"},{id:"export_wallet",label:"Export wallet details",prompt:"Export my wallet information"}],TOKENS:[{id:"token_list",label:"List all tokens",prompt:"Show me all available tokens"},{id:"token_search",label:"Search for a token",prompt:"I want to search for a specific token"},{id:"token_details",label:"Get token details",prompt:"Show me detailed information about a token"},{id:"token_price",label:"Check token price",prompt:"What is the current price of a token?"},{id:"token_holders",label:"View token holders",prompt:"Show me who holds a specific token"},{id:"token_supply",label:"Check token supply",prompt:"What is the total supply of a token?"},{id:"my_tokens",label:"View my tokens",prompt:"Show me all tokens I own"},{id:"token_stats",label:"Token statistics",prompt:"Show me statistics for a token"},{id:"token_performance",label:"Token performance",prompt:"How is a token performing?"},{id:"token_comparison",label:"Compare tokens",prompt:"Compare two tokens for me"}],TRADING:[{id:"buy_token",label:"Buy a token",prompt:"I want to buy tokens"},{id:"sell_token",label:"Sell a token",prompt:"I want to sell my tokens"},{id:"swap_tokens",label:"Swap tokens",prompt:"I want to swap one token for another"},{id:"trade_history",label:"View trade history",prompt:"Show me my recent trades"},{id:"open_orders",label:"View open orders",prompt:"Show me my open orders"},{id:"cancel_order",label:"Cancel an order",prompt:"I want to cancel an order"},{id:"trade_analyze",label:"Analyze trade",prompt:"Analyze my trading performance"},{id:"best_price",label:"Find best price",prompt:"Find the best price for a token"},{id:"price_alert",label:"Set price alert",prompt:"Set a price alert for a token"},{id:"slippage_settings",label:"Adjust slippage",prompt:"Help me adjust my slippage settings"}],LIQUIDITY:[{id:"add_liquidity",label:"Add liquidity",prompt:"I want to add liquidity to a pool"},{id:"remove_liquidity",label:"Remove liquidity",prompt:"I want to remove liquidity from a pool"},{id:"pool_stats",label:"Pool statistics",prompt:"Show me statistics for a liquidity pool"},{id:"pool_apr",label:"Check pool APR",prompt:"What is the APR for a pool?"},{id:"my_pools",label:"My liquidity positions",prompt:"Show me my liquidity positions"},{id:"pool_earnings",label:"Pool earnings",prompt:"How much have I earned from pools?"},{id:"best_pools",label:"Best pools",prompt:"Which pools have the best returns?"},{id:"pool_history",label:"Pool history",prompt:"Show me the history of a pool"},{id:"impermanent_loss",label:"Check impermanent loss",prompt:"Calculate my impermanent loss"},{id:"pool_share",label:"My pool share",prompt:"What is my share of a pool?"}],BOT_TRADING:[{id:"create_bot",label:"Create trading bot",prompt:"I want to create a new trading bot"},{id:"bot_status",label:"Check bot status",prompt:"What is the status of my trading bots?"},{id:"bot_performance",label:"Bot performance",prompt:"How are my bots performing?"},{id:"bot_trades",label:"View bot trades",prompt:"Show me trades executed by my bots"},{id:"stop_bot",label:"Stop a bot",prompt:"Stop a trading bot"},{id:"bot_settings",label:"Adjust bot settings",prompt:"I want to adjust my bot settings"},{id:"bot_strategy",label:"Change bot strategy",prompt:"Change the strategy for my bot"},{id:"bot_profits",label:"Bot profits",prompt:"How much profit have my bots made?"},{id:"bot_errors",label:"Check bot errors",prompt:"Show me any errors from my bots"},{id:"bot_analytics",label:"Bot analytics",prompt:"Show me detailed analytics for my bots"}],MARKET:[{id:"market_overview",label:"Market overview",prompt:"Give me a market overview"},{id:"top_gainers",label:"Top gainers",prompt:"Show me the top gaining tokens"},{id:"top_losers",label:"Top losers",prompt:"Show me the biggest losing tokens"},{id:"trending_tokens",label:"Trending tokens",prompt:"What tokens are trending right now?"},{id:"market_cap",label:"Market cap rankings",prompt:"Show me tokens ranked by market cap"},{id:"volume_leaders",label:"Volume leaders",prompt:"Which tokens have the highest volume?"},{id:"new_tokens",label:"New tokens",prompt:"Show me recently created tokens"},{id:"market_sentiment",label:"Market sentiment",prompt:"What is the current market sentiment?"},{id:"price_changes",label:"24h price changes",prompt:"Show me 24 hour price changes"},{id:"market_alerts",label:"Market alerts",prompt:"Show me any market alerts"}],ANALYTICS:[{id:"portfolio_value",label:"Portfolio value",prompt:"What is my total portfolio value?"},{id:"portfolio_breakdown",label:"Portfolio breakdown",prompt:"Break down my portfolio by asset"},{id:"profit_loss",label:"Profit & Loss",prompt:"Show me my profit and loss"},{id:"performance_chart",label:"Performance chart",prompt:"Show me a performance chart"},{id:"roi_calculation",label:"Calculate ROI",prompt:"Calculate my return on investment"},{id:"asset_allocation",label:"Asset allocation",prompt:"Show me my asset allocation"},{id:"transaction_summary",label:"Transaction summary",prompt:"Summarize my transactions"},{id:"tax_report",label:"Tax report",prompt:"Generate a tax report"},{id:"historical_data",label:"Historical data",prompt:"Show me historical data"},{id:"export_data",label:"Export analytics",prompt:"Export my analytics data"}],TOKEN_CREATION:[{id:"create_token",label:"Create new token",prompt:"I want to create a new token"},{id:"token_wizard",label:"Token creation wizard",prompt:"Guide me through creating a token"},{id:"upload_metadata",label:"Upload token metadata",prompt:"Help me upload token metadata"},{id:"set_supply",label:"Set token supply",prompt:"How do I set the token supply?"},{id:"token_settings",label:"Configure token settings",prompt:"Help me configure my token settings"},{id:"deploy_token",label:"Deploy token",prompt:"I'm ready to deploy my token"},{id:"verify_token",label:"Verify token",prompt:"How do I verify my token?"},{id:"token_branding",label:"Add token branding",prompt:"Help me add branding to my token"},{id:"token_icon",label:"Upload token icon",prompt:"I want to upload an icon for my token"},{id:"token_whitepaper",label:"Create whitepaper",prompt:"Help me create a whitepaper"}],PLATFORM:[{id:"navigate_dashboard",label:"Go to Dashboard",prompt:"Take me to the dashboard"},{id:"navigate_trade",label:"Go to Trade",prompt:"Take me to the trading page"},{id:"navigate_pools",label:"Go to Pools",prompt:"Take me to the pools page"},{id:"navigate_vault",label:"Go to Vault",prompt:"Take me to the vault"},{id:"navigate_analytics",label:"Go to Analytics",prompt:"Take me to analytics"},{id:"platform_stats",label:"Platform statistics",prompt:"Show me platform statistics"},{id:"recent_activity",label:"Recent activity",prompt:"Show me recent platform activity"},{id:"notifications",label:"View notifications",prompt:"Show me my notifications"},{id:"settings",label:"Open settings",prompt:"Open platform settings"},{id:"help_center",label:"Help center",prompt:"I need help with something"}],XRPL:[{id:"xrp_price",label:"XRP price",prompt:"What is the current XRP price?"},{id:"xrpl_status",label:"XRPL network status",prompt:"What is the status of the XRPL network?"},{id:"ledger_info",label:"Ledger information",prompt:"Show me current ledger information"},{id:"transaction_cost",label:"Transaction costs",prompt:"What are the current transaction costs?"},{id:"network_stats",label:"Network statistics",prompt:"Show me XRPL network statistics"},{id:"validators",label:"Validator information",prompt:"Show me information about validators"},{id:"xrpl_explorer",label:"Open XRPL explorer",prompt:"Open the XRPL explorer"},{id:"ripple_news",label:"Ripple news",prompt:"What's the latest news about Ripple?"},{id:"xrpl_docs",label:"XRPL documentation",prompt:"I need XRPL documentation"},{id:"network_upgrades",label:"Network upgrades",prompt:"Are there any upcoming network upgrades?"}]};function bq(){return Object.entries(Hv).flatMap(([t,e])=>e.map(r=>({...r,category:t})))}function wq(t){const e=t.toLowerCase();return bq().filter(r=>r.label.toLowerCase().includes(e)||r.prompt.toLowerCase().includes(e))}function _q({onSelectCommand:t,onClose:e}){const[r,s]=T.useState("WALLET"),[i,a]=T.useState(""),[o,l]=T.useState(""),[c,d]=T.useState(null),u=T.useRef(null);T.useEffect(()=>{const x=b=>{u.current&&!u.current.contains(b.target)&&e()};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[e]);const h=Object.keys(Hv),p=i?wq(i):Hv[r]||[],f=x=>{d(x),l(x.prompt)},m=()=>{o.trim()&&(t(o.trim()),e())},v=x=>{t(x),e()};return n.jsxs("div",{ref:u,className:"absolute bottom-full left-0 right-0 mb-2 rounded-xl border border-purple-500/50 shadow-2xl shadow-purple-500/30 overflow-hidden animate-slideUp",style:{maxHeight:"70vh",background:"linear-gradient(135deg, rgba(88, 28, 135, 0.98), rgba(59, 7, 100, 0.98))",backdropFilter:"blur(24px)"},children:[n.jsx("div",{className:"p-4 border-b border-purple-500/30 bg-purple-900/40",children:n.jsx("input",{type:"text",value:i,onChange:x=>a(x.target.value),placeholder:"Search commands...",className:"w-full bg-purple-950/60 border border-purple-500/40 rounded-lg px-4 py-2 text-white placeholder-purple-400/60 focus:outline-none focus:border-purple-400/60 focus:ring-2 focus:ring-purple-500/30"})}),n.jsxs("div",{className:"flex h-[400px]",children:[n.jsx("div",{className:"w-48 border-r border-purple-500/30 overflow-y-auto bg-purple-900/30",children:h.map(x=>n.jsx("button",{onClick:()=>{s(x),a("")},className:`w-full text-left px-4 py-3 transition-all duration-200 ${r===x?"bg-purple-600/50 text-white border-r-2 border-purple-400":"text-purple-200 hover:bg-purple-800/40"}`,children:n.jsx("div",{className:"font-medium text-sm",children:x.replace("_"," ")})},x))}),n.jsx("div",{className:"flex-1 overflow-y-auto p-2 bg-purple-900/20",children:p.length>0?n.jsx("div",{className:"space-y-1",children:p.map(x=>n.jsxs("div",{className:`group rounded-lg transition-all duration-200 ${(c==null?void 0:c.id)===x.id?"bg-purple-600/40 border border-purple-500/40":"hover:bg-purple-800/30 border border-transparent"}`,children:[n.jsxs("button",{onClick:()=>f(x),className:"w-full text-left px-3 py-2",children:[n.jsx("div",{className:"font-medium text-white text-sm",children:x.label}),n.jsx("div",{className:"text-purple-300/80 text-xs mt-0.5 line-clamp-1",children:x.prompt})]}),n.jsx("button",{onClick:()=>v(x.prompt),className:"w-full text-center px-3 py-1.5 text-xs text-purple-200 hover:text-white border-t border-purple-500/20 opacity-0 group-hover:opacity-100 transition-opacity bg-purple-800/20",children:"Quick Send ➤"})]},x.id))}):n.jsx("div",{className:"flex items-center justify-center h-full text-purple-300/60",children:"No commands found"})})]}),c&&n.jsxs("div",{className:"border-t border-purple-500/30 p-4 bg-purple-900/50",children:[n.jsx("div",{className:"mb-2 text-xs text-purple-200 font-medium",children:"Edit prompt before sending:"}),n.jsx("textarea",{value:o,onChange:x=>l(x.target.value),className:"w-full bg-purple-950/60 border border-purple-500/40 rounded-lg px-3 py-2 text-white text-sm resize-none focus:outline-none focus:border-purple-400/60 focus:ring-2 focus:ring-purple-500/30",rows:"3"}),n.jsxs("div",{className:"flex gap-2 mt-2",children:[n.jsx("button",{onClick:m,className:"flex-1 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:shadow-lg hover:shadow-purple-500/50 text-white rounded-lg font-medium transition-all duration-200",children:"Send Command"}),n.jsx("button",{onClick:()=>{d(null),l("")},className:"px-4 py-2 bg-purple-800/40 hover:bg-purple-800/60 text-purple-200 rounded-lg font-medium transition-all duration-200 border border-purple-500/30",children:"Cancel"})]})]}),n.jsxs("div",{className:"px-4 py-2 bg-purple-900/60 border-t border-purple-500/30 flex items-center justify-between",children:[n.jsxs("span",{className:"text-xs text-purple-300/80",children:[p.length," commands available"]}),n.jsx("button",{onClick:e,className:"text-xs text-purple-300 hover:text-purple-100 transition-colors",children:"Close (Esc)"})]})]})}function Nq({onSend:t,disabled:e}){const[r,s]=T.useState(""),[i,a]=T.useState(!1),o=T.useRef(null);T.useEffect(()=>{const f=m=>{m.key==="Escape"&&i&&a(!1)};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[i]);const l=[{label:"💰 Check balance",prompt:"Check my wallet balance"}],c=f=>{f.preventDefault(),r.trim()&&!e&&(t(r.trim()),s(""),o.current&&(o.current.style.height="auto"))},d=f=>{f.key==="Enter"&&!f.shiftKey&&(f.preventDefault(),c(f))},u=f=>{s(f.target.value),f.target.style.height="auto",f.target.style.height=Math.min(f.target.scrollHeight,150)+"px"},h=f=>{e||t(f)},p=f=>{e||t(f)};return n.jsxs("div",{className:"space-y-3 relative",children:[i&&n.jsx(_q,{onSelectCommand:p,onClose:()=>a(!1)}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.map((f,m)=>n.jsx("button",{onClick:()=>h(f.prompt),disabled:e,className:"px-3 py-1.5 bg-purple-900/30 hover:bg-purple-900/50 text-purple-200 rounded-full text-xs font-medium transition-all duration-200 border border-purple-500/20 disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105 hover:shadow-lg hover:shadow-purple-500/20",children:f.label},m)),n.jsx("button",{onClick:()=>a(!i),disabled:e,className:"px-3 py-1.5 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-500 hover:to-blue-500 text-white rounded-full text-xs font-medium transition-all duration-200 border border-purple-500/30 disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105 hover:shadow-lg hover:shadow-purple-500/30",children:"⚡ All Commands (100+)"})]}),n.jsxs("form",{onSubmit:c,className:"flex gap-2",children:[n.jsx("textarea",{ref:o,value:r,onChange:u,onKeyDown:d,placeholder:"Ask me anything about XRPL, tokens, trading, or the platform...",disabled:e,rows:"1",className:"flex-1 bg-purple-900/20 border border-purple-500/30 rounded-lg px-4 py-3 text-white placeholder-purple-400/50 focus:outline-none focus:border-purple-500/50 focus:ring-2 focus:ring-purple-500/20 disabled:opacity-50 disabled:cursor-not-allowed resize-none overflow-hidden transition-all duration-200",style:{minHeight:"48px",maxHeight:"150px"}}),n.jsxs("button",{type:"submit",disabled:e||!r.trim(),className:"px-6 bg-gradient-to-r from-purple-600 to-blue-600 hover:shadow-lg hover:shadow-purple-500/50 text-white rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:shadow-none hover:scale-105",children:[n.jsx("span",{className:"hidden sm:inline",children:"Send"}),n.jsx("span",{className:"sm:hidden",children:"➤"})]})]}),n.jsx("div",{className:"flex items-center justify-center gap-2 text-xs text-purple-400/60",children:n.jsx("span",{children:"💡 Press Enter to send • Shift+Enter for new line • Esc to close dropdown"})})]})}function Sq(){const[t,e]=T.useState([]),[r,s]=T.useState(!1),[i,a]=T.useState(null),o=T.useRef(null),l=T.useRef(new o4);T.useEffect(()=>{d(),u();const x=b=>{f(b.detail)};return window.addEventListener("sendAIMessage",x),()=>{window.removeEventListener("sendAIMessage",x)}},[]),T.useEffect(()=>{c()},[t]);const c=()=>{var x;(x=o.current)==null||x.scrollIntoView({behavior:"smooth"})},d=()=>{const x=localStorage.getItem("ai_chat_session");if(x)a(x);else{const b=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;a(b),localStorage.setItem("ai_chat_session",b)}},u=async()=>{try{const{data:x,error:b}=await le.from("ai_chat_messages").select("*").order("created_at",{ascending:!0}).limit(50);if(b)throw b;x&&x.length>0?e(x.map(y=>({id:y.id,role:y.role,content:y.content,timestamp:new Date(y.created_at),data:y.metadata}))):h()}catch(x){console.error("Error loading chat history:",x),h()}},h=()=>{const x={id:`welcome_${Date.now()}`,role:"assistant",content:`Hello! I'm your advanced XRPL command-based AI assistant. I can execute commands directly! Try:

**Natural Language Commands:**
• "SEND rXXX... 15 XRP" - Send XRP instantly
• "BUY 1000 ORANGE" - Buy tokens
• "SELL 500 BANANA" - Sell tokens
• "CHECK BALANCE" - View your balance
• "PRICE OF BANANA" - Get token price
• "SETUP TRUSTLINE ORANGE" - Add trustline

**Quick Actions:**
• "Send 100 APPLE to rXXX..." - Send tokens
• "What's my balance?" - Check wallet
• "Show top tokens" - Market data
• "Trade history" - View trades

Just type naturally or use the commands above. What would you like to do?`,timestamp:new Date,data:null};e([x])},p=async x=>{try{await le.from("ai_chat_messages").insert({session_id:i,role:x.role,content:x.content,metadata:x.data||null})}catch(b){console.error("Error saving message:",b)}},f=async x=>{const b={id:`user_${Date.now()}`,role:"user",content:x,timestamp:new Date,data:null};e(y=>[...y,b]),await p(b),s(!0);try{const y=await l.current.processMessage(x),g={id:`assistant_${Date.now()}`,role:"assistant",content:y.content,timestamp:new Date,data:y.data||null};e(w=>[...w,g]),await p(g)}catch(y){console.error("Error processing message:",y);const g={id:`error_${Date.now()}`,role:"assistant",content:"I apologize, but I encountered an error processing your request. Please try again.",timestamp:new Date,data:null};e(w=>[...w,g])}finally{s(!1)}},m=async()=>{if(window.confirm("Are you sure you want to clear the chat history?"))try{await le.from("ai_chat_messages").delete().eq("session_id",i),e([]),h(),ie.success("Chat history cleared")}catch(x){console.error("Error clearing chat:",x),ie.error("Failed to clear chat history")}},v=()=>{const x=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;a(x),localStorage.setItem("ai_chat_session",x),e([]),h(),ie.success("New chat session started")};return n.jsxs("div",{className:"flex flex-col",style:{height:"calc(100vh - 140px)"},children:[n.jsx("div",{className:"glass rounded-t-xl p-4 sm:p-6 border-b border-purple-500/20 flex-shrink-0",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-blue-600 rounded-lg flex items-center justify-center animate-pulse",children:n.jsx("span",{className:"text-2xl",children:"🤖"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-white",children:"AI Chat Assistant"}),n.jsx("p",{className:"text-purple-300/80 text-sm",children:"Your intelligent XRPL companion"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:v,className:"px-3 py-2 bg-purple-600/20 hover:bg-purple-600/30 text-purple-300 rounded-lg transition-all duration-200 text-sm border border-purple-500/30 hover:scale-105",children:"New Chat"}),n.jsx("button",{onClick:m,className:"px-3 py-2 bg-red-600/20 hover:bg-red-600/30 text-red-300 rounded-lg transition-all duration-200 text-sm border border-red-500/30 hover:scale-105",children:"Clear"})]})]})}),n.jsx("div",{className:"flex-1 glass p-4 sm:p-6 overflow-y-auto",style:{minHeight:0},children:n.jsxs("div",{className:"space-y-4",children:[t.map((x,b)=>n.jsx("div",{className:"animate-fadeInUp",style:{animationDelay:`${b*50}ms`},children:n.jsx(a4,{message:x})},x.id)),r&&n.jsxs("div",{className:"flex items-start gap-3 animate-fadeInUp",children:[n.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-blue-600 rounded-full flex items-center justify-center flex-shrink-0 animate-pulse",children:n.jsx("span",{className:"text-sm",children:"🤖"})}),n.jsx("div",{className:"flex-1 bg-purple-900/30 rounded-lg p-4 border border-purple-500/20",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),n.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),n.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),n.jsx("div",{ref:o})]})}),n.jsx("div",{className:"glass rounded-b-xl p-4 border-t border-purple-500/20 flex-shrink-0",children:n.jsx(Nq,{onSend:f,disabled:r})})]})}function jq({isOpen:t,onClose:e,recipient:r,connectedWallet:s,nickname:i,currentStream:a}){const[o,l]=T.useState([]),[c,d]=T.useState(null),[u,h]=T.useState(""),[p,f]=T.useState(!1),[m,v]=T.useState("0"),[x,b]=T.useState(!1);T.useEffect(()=>{t&&s&&y()},[t,s]);const y=async()=>{if(!(s!=null&&s.address)){ie.error("No wallet connected");return}try{const S=s.network||"testnet",_=new Ve.Client(S==="mainnet"?"wss://xrplcluster.com":"wss://s.altnet.rippletest.net:51233");await _.connect();const A=await _.request({command:"account_info",account:s.address,ledger_index:"validated"}),B=parseFloat(A.result.account_data.Balance)/1e6,U=Math.max(0,B-10);v(U.toFixed(4));const de=(await _.request({command:"account_lines",account:s.address,ledger_index:"validated"})).result.lines||[];l(de),d({currency:"XRP",balance:U,issuer:"XRP"}),await _.disconnect()}catch(S){console.error("Error loading wallet assets:",S),ie.error("Failed to load wallet assets: "+S.message)}},g=async()=>{if(!c||!u||parseFloat(u)<=0){ie.error("Please enter a valid amount");return}if(parseFloat(u)>parseFloat(c.balance)){ie.error("Insufficient balance");return}if(!(s!=null&&s.seed)){ie.error("Wallet seed not available. Please reconnect your wallet.");return}f(!0);try{const S=s.network||"testnet",_=new Ve.Client(S==="mainnet"?"wss://xrplcluster.com":"wss://s.altnet.rippletest.net:51233");await _.connect();const A=Ve.Wallet.fromSeed(s.seed);let B;c.currency==="XRP"?B={TransactionType:"Payment",Account:A.address,Destination:r.wallet_address,Amount:String(Math.floor(parseFloat(u)*1e6)),Fee:"12"}:B={TransactionType:"Payment",Account:A.address,Destination:r.wallet_address,Amount:{currency:c.currency,issuer:c.account||c.issuer,value:u},Fee:"12"};const Q=await _.autofill(B),U=A.sign(Q),q=await _.submitAndWait(U.tx_blob);if(q.result.meta.TransactionResult==="tesSUCCESS"){if(ie.success(`Sent ${u} ${c.currency} to ${r.nickname}!`),a){await le.from("stream_tips").insert([{stream_id:a.id,from_wallet:s.address,from_nickname:i,to_wallet:r.wallet_address,to_nickname:r.nickname,currency:c.currency,amount:parseFloat(u),tx_hash:q.result.hash}]);const{data:de}=await le.from("live_streams").select("total_tips").eq("id",a.id).maybeSingle(),ye=parseFloat((de==null?void 0:de.total_tips)||0)+parseFloat(u);await le.from("live_streams").update({total_tips:ye}).eq("id",a.id);const{data:G}=await le.from("chat_rooms").select("id").eq("type","general").maybeSingle();G&&await le.from("chat_messages").insert([{room_id:G.id,wallet_address:s.address,nickname:i,message_type:"tip",content:`sent ${u} ${c.currency} to ${r.nickname}! 💸`,tip_data:{type:"tip",amount:parseFloat(u),currency:c.currency,to_nickname:r.nickname,to_wallet:r.wallet_address,tx_hash:q.result.hash}}])}e(),h("")}else ie.error("Transaction failed: "+q.result.meta.TransactionResult);await _.disconnect()}catch(S){console.error("Error sending tip:",S),ie.error("Failed to send tip: "+S.message)}finally{f(!1)}};if(!t||!r)return null;const w=[{currency:"XRP",balance:m,issuer:"XRP"},...o.map(S=>({currency:S.currency,balance:S.balance,account:S.account}))];return n.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-gradient-to-br from-purple-900 via-slate-900 to-purple-900 rounded-2xl p-8 max-w-lg w-full border-2 border-yellow-500/30 shadow-2xl",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-3xl",children:"💸"}),n.jsx("h3",{className:"text-2xl font-bold text-white",children:"Send Tip"})]}),n.jsx("button",{onClick:e,className:"text-purple-400 hover:text-purple-200 transition-colors text-3xl leading-none",children:"×"})]}),n.jsx("div",{className:"mb-6 p-5 bg-gradient-to-r from-purple-800/40 to-slate-800/40 rounded-xl border border-yellow-500/20",children:n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center text-white font-bold text-lg",children:(i==null?void 0:i.charAt(0).toUpperCase())||"Y"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-xs text-purple-400 font-semibold mb-1",children:"FROM"}),n.jsx("div",{className:"text-white font-bold",children:i||"You"}),n.jsx("div",{className:"text-purple-300 text-xs truncate font-mono",children:s==null?void 0:s.address})]})]}),n.jsx("div",{className:"text-yellow-400 text-2xl mx-4",children:"→"}),n.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold text-lg",children:r.nickname.charAt(0).toUpperCase()}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-xs text-purple-400 font-semibold mb-1",children:"TO"}),n.jsx("div",{className:"text-white font-bold",children:r.nickname}),n.jsx("div",{className:"text-purple-300 text-xs truncate font-mono",children:r.wallet_address})]})]})]})}),n.jsxs("div",{className:"space-y-5",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-white font-bold mb-3 text-sm",children:"SELECT TOKEN"}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>b(!x),className:"w-full bg-slate-800/70 text-white px-4 py-4 rounded-xl focus:outline-none focus:ring-2 focus:ring-yellow-500 border border-purple-500/30 flex items-center justify-between hover:border-yellow-500/50 transition-all",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"text-2xl",children:(c==null?void 0:c.currency)==="XRP"?"💎":"🪙"}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-bold",children:(c==null?void 0:c.currency)||"Select Token"}),n.jsx("div",{className:"text-green-400 text-sm",children:c?`${parseFloat(c.balance).toFixed(4)} available`:""})]})]}),n.jsx("svg",{className:"w-5 h-5 text-purple-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),x&&n.jsx("div",{className:"absolute z-10 w-full mt-2 bg-slate-800 rounded-xl border border-purple-500/30 shadow-2xl max-h-64 overflow-y-auto",children:w.map((S,_)=>n.jsxs("button",{onClick:()=>{d(S),b(!1)},disabled:parseFloat(S.balance)<=0,className:`w-full p-4 flex items-center justify-between hover:bg-purple-800/50 transition-all border-b border-purple-500/10 last:border-b-0 ${parseFloat(S.balance)<=0?"opacity-50 cursor-not-allowed":""} ${(c==null?void 0:c.currency)===S.currency?"bg-purple-800/50":""}`,children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"text-2xl",children:S.currency==="XRP"?"💎":"🪙"}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"text-white font-bold",children:S.currency}),S.currency!=="XRP"&&S.account&&n.jsxs("div",{className:"text-purple-400 text-xs truncate max-w-[200px]",children:[S.account.slice(0,12),"..."]})]})]}),n.jsx("div",{className:"text-green-400 font-bold",children:parseFloat(S.balance).toFixed(4)})]},_))})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-white font-bold mb-3 text-sm",children:"AMOUNT"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",value:u,onChange:S=>h(S.target.value),placeholder:"0.00",step:"0.01",min:"0",max:c==null?void 0:c.balance,className:"w-full bg-slate-800/70 text-white text-3xl px-6 py-4 rounded-xl focus:outline-none focus:ring-2 focus:ring-yellow-500 border border-purple-500/30 text-center font-bold"}),c&&n.jsx("div",{className:"absolute right-6 top-1/2 -translate-y-1/2 text-purple-400 font-bold text-lg",children:c.currency})]}),c&&n.jsxs("div",{className:"flex justify-between items-center mt-3 text-sm",children:[n.jsxs("div",{className:"text-purple-400",children:["Available: ",n.jsx("span",{className:"text-green-400 font-bold",children:parseFloat(c.balance).toFixed(4)})]}),n.jsx("button",{onClick:()=>h(c.balance),className:"text-yellow-400 hover:text-yellow-300 font-bold",children:"Max"})]})]}),n.jsxs("div",{className:"flex gap-3 mt-8",children:[n.jsx("button",{onClick:e,className:"flex-1 bg-slate-700/50 hover:bg-slate-700/70 text-white py-4 rounded-xl font-bold transition-all",children:"Cancel"}),n.jsx("button",{onClick:g,disabled:!c||!u||parseFloat(u)<=0||p,className:"flex-1 bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-500 hover:to-orange-500 disabled:from-gray-600 disabled:to-gray-700 disabled:cursor-not-allowed text-white py-4 rounded-xl font-bold transition-all shadow-lg",children:p?"💸 Sending...":`💸 Send ${u||"0"} ${(c==null?void 0:c.currency)||""}`})]})]})]})})}const M2="rphatRpwXcPAo7CVm46dC78JAQ6kLMqb2M";function Eq({onViewStream:t,connectedWallet:e}){const[r,s]=T.useState([]),[i,a]=T.useState([]),[o,l]=T.useState("all"),[c,d]=T.useState(""),[u,h]=T.useState("viewers"),[p,f]=T.useState("grid");T.useEffect(()=>{m(),v(),x();const g=setInterval(v,1e4);return()=>clearInterval(g)},[]);const m=async()=>{const{data:g}=await le.from("stream_categories").select("*").order("name",{ascending:!0});g&&a(g)},v=async()=>{let g=le.from("live_streams").select("*").eq("is_active",!0);o!=="all"&&(g=g.eq("category",o));const{data:w,error:S}=await g.order("started_at",{ascending:!1});if(!S&&w){const _=new Map;w.forEach(B=>{if(!_.has(B.wallet_address))_.set(B.wallet_address,B);else{const Q=_.get(B.wallet_address);new Date(B.started_at)>new Date(Q.started_at)&&_.set(B.wallet_address,B)}});let A=Array.from(_.values());c&&(A=A.filter(B=>B.nickname.toLowerCase().includes(c.toLowerCase())||B.title.toLowerCase().includes(c.toLowerCase()))),u==="viewers"?A.sort((B,Q)=>Q.viewer_count-B.viewer_count):u==="tips"?A.sort((B,Q)=>parseFloat(Q.total_tips)-parseFloat(B.total_tips)):u==="crowns"?A.sort((B,Q)=>Q.crown_count-B.crown_count):u==="recent"&&A.sort((B,Q)=>new Date(Q.started_at)-new Date(B.started_at)),s(A)}},x=()=>{const g=le.channel("live_streams_feed").on("postgres_changes",{event:"*",schema:"public",table:"live_streams"},()=>{v()}).subscribe();return()=>{le.removeChannel(g)}};T.useEffect(()=>{v()},[o,c,u]);const b=g=>new Date(g).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),y=g=>{const w=Math.floor((new Date-new Date(g))/6e4);if(w<60)return`${w}m`;const S=Math.floor(w/60),_=w%60;return`${S}h ${_}m`};return n.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[n.jsx("div",{className:"p-6 bg-purple-900/20 backdrop-blur-xl border-b border-purple-500/20",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-purple-200",children:"Live Streams"}),n.jsxs("p",{className:"text-purple-400 text-sm mt-1",children:[r.length," channels live"]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:()=>f("grid"),className:`p-2 rounded-lg transition-all ${p==="grid"?"bg-purple-600 text-white":"bg-purple-800/30 text-purple-400 hover:text-purple-200"}`,children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),n.jsx("button",{onClick:()=>f("list"),className:`p-2 rounded-lg transition-all ${p==="list"?"bg-purple-600 text-white":"bg-purple-800/30 text-purple-400 hover:text-purple-200"}`,children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[n.jsx("div",{className:"flex-1 min-w-[300px]",children:n.jsx("input",{type:"text",value:c,onChange:g=>d(g.target.value),placeholder:"Search streams...",className:"w-full bg-purple-800/30 text-purple-100 px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 border border-purple-500/20 placeholder-purple-400/50"})}),n.jsxs("select",{value:u,onChange:g=>h(g.target.value),className:"bg-purple-800/30 text-purple-100 px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 border border-purple-500/20",children:[n.jsx("option",{value:"viewers",children:"Most Viewers"}),n.jsx("option",{value:"tips",children:"Most Tips"}),n.jsx("option",{value:"crowns",children:"Most Crowns"}),n.jsx("option",{value:"recent",children:"Recently Started"})]})]})]})}),n.jsx("div",{className:"px-6 py-4 bg-purple-900/10 border-b border-purple-500/20 overflow-x-auto",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex gap-2",children:[n.jsx("button",{onClick:()=>l("all"),className:`px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-all ${o==="all"?"bg-purple-600 text-white":"bg-purple-800/30 text-purple-300 hover:bg-purple-800/50"}`,children:"🌟 All"}),i.map(g=>n.jsxs("button",{onClick:()=>l(g.name),className:`px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-all ${o===g.name?"bg-purple-600 text-white":"bg-purple-800/30 text-purple-300 hover:bg-purple-800/50"}`,children:[g.icon," ",g.name]},g.id))]})}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:r.length===0?n.jsxs("div",{className:"text-center py-20",children:[n.jsx("div",{className:"text-6xl mb-4",children:"📡"}),n.jsx("div",{className:"text-purple-400 text-xl",children:"No live streams found"}),n.jsx("div",{className:"text-purple-500 text-sm mt-2",children:"Try adjusting your filters"})]}):p==="grid"?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:r.map(g=>n.jsxs("button",{onClick:()=>t(g),className:"bg-purple-800/30 rounded-lg overflow-hidden border border-purple-500/20 hover:border-purple-500/50 transition-all group",children:[n.jsxs("div",{className:"aspect-video bg-black relative",children:[n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:"text-6xl",children:"📹"})}),n.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-2 bg-red-500 px-3 py-1 rounded",children:[n.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),n.jsx("span",{className:"text-white font-bold text-xs",children:"LIVE"})]}),n.jsx("div",{className:"absolute top-2 left-2 bg-purple-900/90 backdrop-blur-xl px-3 py-1 rounded",children:n.jsxs("span",{className:"text-green-400 font-bold text-xs",children:["💸 ",parseFloat(g.total_tips).toFixed(2)]})}),n.jsx("div",{className:"absolute bottom-2 left-2 bg-black/80 backdrop-blur-xl px-2 py-1 rounded text-xs text-white font-medium",children:y(g.started_at)})]}),n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold flex-shrink-0",children:g.nickname.charAt(0).toUpperCase()}),n.jsxs("div",{className:"flex-1 text-left min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"text-purple-200 font-bold truncate",children:g.nickname}),g.wallet_address===M2&&n.jsx("span",{className:"text-yellow-400 text-sm",children:"👑"})]}),n.jsx("div",{className:"text-purple-400 text-xs truncate",children:g.title})]})]}),n.jsxs("div",{className:"flex items-center justify-between text-xs",children:[n.jsxs("div",{className:"flex items-center gap-3 text-purple-300",children:[n.jsxs("span",{children:["👥 ",g.viewer_count]}),n.jsxs("span",{children:["👑 ",g.crown_count]})]}),n.jsx("div",{className:"bg-purple-700/50 px-2 py-1 rounded text-purple-200",children:g.category})]})]})]},g.id))}):n.jsx("div",{className:"space-y-3",children:r.map(g=>n.jsxs("button",{onClick:()=>t(g),className:"w-full bg-purple-800/30 rounded-lg p-4 border border-purple-500/20 hover:border-purple-500/50 transition-all group flex items-center gap-4",children:[n.jsxs("div",{className:"w-48 h-28 bg-black rounded-lg flex-shrink-0 relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:"text-4xl",children:"📹"})}),n.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-1 bg-red-500 px-2 py-0.5 rounded text-xs",children:[n.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full animate-pulse"}),n.jsx("span",{className:"text-white font-bold",children:"LIVE"})]})]}),n.jsxs("div",{className:"flex-1 text-left",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold",children:g.nickname.charAt(0).toUpperCase()}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("span",{className:"text-purple-200 font-bold text-lg",children:g.nickname}),g.wallet_address===M2&&n.jsx("span",{className:"text-yellow-400",children:"👑"})]}),n.jsx("div",{className:"text-purple-400 text-sm",children:g.title})]})]}),n.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[n.jsx("div",{className:"bg-purple-700/50 px-3 py-1 rounded text-purple-200 text-sm",children:g.category}),n.jsxs("div",{className:"text-purple-300 text-sm",children:["👥 ",g.viewer_count," viewers"]}),n.jsxs("div",{className:"text-purple-300 text-sm",children:["👑 ",g.crown_count," crowns"]}),n.jsxs("div",{className:"text-green-400 text-sm font-bold",children:["💸 ",parseFloat(g.total_tips).toFixed(2)," XRP"]}),n.jsxs("div",{className:"text-purple-400 text-sm ml-auto",children:["Started ",b(g.started_at)]})]})]})]},g.id))})})})]})}function Tq(){const[t,e]=T.useState({totalStreams:0,activeStreams:0,totalViewers:0,totalTips:0,totalCrowns:0,totalSessions:0,avgSessionDuration:0,totalStreamTime:0,topStreamers:[],topCategories:[],recentTips:[],tokenBreakdown:[],sessionsToday:0,tipsToday:0,crownsToday:0,peakConcurrentViewers:0,avgTipsPerSession:0,avgCrownsPerSession:0,topTippers:[]});T.useEffect(()=>{r()},[]);const r=async()=>{const{data:a}=await le.from("live_streams").select("*").eq("is_active",!0),o=(a==null?void 0:a.length)||0,l=(a==null?void 0:a.reduce((I,K)=>I+K.viewer_count,0))||0,c=(a==null?void 0:a.reduce((I,K)=>I+parseFloat(K.total_tips),0))||0,d=(a==null?void 0:a.reduce((I,K)=>I+K.crown_count,0))||0,u=(a==null?void 0:a.reduce((I,K)=>Math.max(I,K.peak_viewers||0),0))||0,{data:h}=await le.from("live_streams").select("*"),p=(h==null?void 0:h.length)||0,{data:f}=await le.from("stream_sessions").select("*"),m=(f==null?void 0:f.length)||0,v=(f==null?void 0:f.reduce((I,K)=>I+(K.duration_seconds||0),0))||0,x=m>0?Math.floor(v/m):0,b=new Date;b.setHours(0,0,0,0);const y=(f==null?void 0:f.filter(I=>new Date(I.started_at)>=b).length)||0,{data:g}=await le.from("stream_tips").select("amount").gte("created_at",b.toISOString()),w=(g==null?void 0:g.reduce((I,K)=>I+parseFloat(K.amount),0))||0,{data:S}=await le.from("stream_reactions").select("*").gte("created_at",b.toISOString()),_=(S==null?void 0:S.length)||0,A=[...a||[]].sort((I,K)=>parseFloat(K.total_tips)-parseFloat(I.total_tips)).slice(0,10).map(I=>({...I,totalSessions:(f==null?void 0:f.filter(K=>K.streamer_wallet===I.wallet_address).length)||0,totalStreamTime:(f==null?void 0:f.filter(K=>K.streamer_wallet===I.wallet_address).reduce((K,re)=>K+(re.duration_seconds||0),0))||0})),B={},Q={},U={};a==null||a.forEach(I=>{B[I.category]=(B[I.category]||0)+1,Q[I.category]=(Q[I.category]||0)+I.crown_count,U[I.category]=(U[I.category]||0)+parseFloat(I.total_tips)});const q=Object.entries(B).sort((I,K)=>K[1]-I[1]).slice(0,5).map(([I,K])=>({name:I,count:K,crowns:Q[I]||0,tips:U[I]||0})),{data:de}=await le.from("stream_tips").select("*").order("created_at",{ascending:!1}).limit(20),me={};de==null||de.forEach(I=>{const K=I.currency;me[K]||(me[K]={currency:K,total:0,count:0}),me[K].total+=parseFloat(I.amount),me[K].count+=1});const ye=Object.values(me).sort((I,K)=>K.total-I.total),G=m>0?((f==null?void 0:f.reduce((I,K)=>I+parseFloat(K.total_tips||0),0))||0)/m:0,Z=m>0?((f==null?void 0:f.reduce((I,K)=>I+(K.total_crowns||0),0))||0)/m:0,{data:he}=await le.from("stream_tips").select("from_wallet, from_nickname, amount, currency"),ee={};he==null||he.forEach(I=>{ee[I.from_wallet]||(ee[I.from_wallet]={wallet:I.from_wallet,nickname:I.from_nickname,total:0,count:0}),ee[I.from_wallet].total+=parseFloat(I.amount),ee[I.from_wallet].count+=1});const H=Object.values(ee).sort((I,K)=>K.total-I.total).slice(0,10);e({totalStreams:p,activeStreams:o,totalViewers:l,totalTips:c,totalCrowns:d,totalSessions:m,avgSessionDuration:x,totalStreamTime:v,topStreamers:A,topCategories:q,recentTips:de||[],tokenBreakdown:ye,sessionsToday:y,tipsToday:w,crownsToday:_,peakConcurrentViewers:u,avgTipsPerSession:G,avgCrownsPerSession:Z,topTippers:H})},s=a=>{const o=Math.floor(a/3600),l=Math.floor(a%3600/60);return o>0?`${o}h ${l}m`:`${l}m`},i=a=>new Date(a).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"});return n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsx("h2",{className:"text-3xl font-bold text-purple-200 mb-6",children:"Advanced Stream Analytics"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-purple-800/30 rounded-lg p-4 border border-purple-500/20",children:[n.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"📊 Total Streams"}),n.jsx("div",{className:"text-purple-200 text-2xl font-bold",children:t.totalStreams})]}),n.jsxs("div",{className:"bg-purple-800/30 rounded-lg p-4 border border-purple-500/20",children:[n.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"🔴 Live Now"}),n.jsx("div",{className:"text-red-400 text-2xl font-bold",children:t.activeStreams})]}),n.jsxs("div",{className:"bg-purple-800/30 rounded-lg p-4 border border-purple-500/20",children:[n.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"👥 Total Viewers"}),n.jsx("div",{className:"text-purple-200 text-2xl font-bold",children:t.totalViewers})]}),n.jsxs("div",{className:"bg-purple-800/30 rounded-lg p-4 border border-purple-500/20",children:[n.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"💸 Total Tips"}),n.jsx("div",{className:"text-green-400 text-2xl font-bold",children:t.totalTips.toFixed(2)})]}),n.jsxs("div",{className:"bg-purple-800/30 rounded-lg p-4 border border-purple-500/20",children:[n.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"👑 Total Crowns"}),n.jsx("div",{className:"text-yellow-400 text-2xl font-bold",children:t.totalCrowns})]}),n.jsxs("div",{className:"bg-purple-800/30 rounded-lg p-4 border border-purple-500/20",children:[n.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"📺 Sessions"}),n.jsx("div",{className:"text-purple-200 text-2xl font-bold",children:t.totalSessions})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-600/20 to-blue-800/20 rounded-lg p-4 border border-blue-500/30",children:[n.jsx("div",{className:"text-blue-300 text-sm mb-2",children:"📅 Sessions Today"}),n.jsx("div",{className:"text-blue-200 text-3xl font-bold",children:t.sessionsToday})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-600/20 to-green-800/20 rounded-lg p-4 border border-green-500/30",children:[n.jsx("div",{className:"text-green-300 text-sm mb-2",children:"💰 Tips Today"}),n.jsx("div",{className:"text-green-200 text-3xl font-bold",children:t.tipsToday.toFixed(2)})]}),n.jsxs("div",{className:"bg-gradient-to-br from-yellow-600/20 to-yellow-800/20 rounded-lg p-4 border border-yellow-500/30",children:[n.jsx("div",{className:"text-yellow-300 text-sm mb-2",children:"👑 Crowns Today"}),n.jsx("div",{className:"text-yellow-200 text-3xl font-bold",children:t.crownsToday})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-purple-800/20 rounded-lg p-4 border border-purple-500/30",children:[n.jsx("div",{className:"text-purple-300 text-sm mb-2",children:"⏱️ Avg Session"}),n.jsx("div",{className:"text-purple-200 text-3xl font-bold",children:s(t.avgSessionDuration)})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-purple-800/30 rounded-lg p-4 border border-purple-500/20",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"⏰ Total Stream Time"}),n.jsx("div",{className:"text-purple-200 text-2xl font-bold",children:s(t.totalStreamTime)})]}),n.jsxs("div",{className:"bg-purple-800/30 rounded-lg p-4 border border-purple-500/20",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"📊 Peak Viewers"}),n.jsx("div",{className:"text-purple-200 text-2xl font-bold",children:t.peakConcurrentViewers})]}),n.jsxs("div",{className:"bg-purple-800/30 rounded-lg p-4 border border-purple-500/20",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"💸 Avg Tips/Session"}),n.jsx("div",{className:"text-green-400 text-2xl font-bold",children:t.avgTipsPerSession.toFixed(2)})]}),n.jsxs("div",{className:"bg-purple-800/30 rounded-lg p-4 border border-purple-500/20",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"👑 Avg Crowns/Session"}),n.jsx("div",{className:"text-yellow-400 text-2xl font-bold",children:t.avgCrownsPerSession.toFixed(1)})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[n.jsxs("div",{className:"bg-purple-800/30 rounded-lg p-6 border border-purple-500/20",children:[n.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"🏆 Top Streamers"}),n.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto",children:t.topStreamers.length===0?n.jsx("div",{className:"text-center py-8 text-purple-400",children:"No active streamers"}):t.topStreamers.map((a,o)=>n.jsxs("div",{className:"bg-purple-900/30 p-3 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsxs("div",{className:"text-2xl font-bold text-purple-400",children:["#",o+1]}),n.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold",children:a.nickname.charAt(0).toUpperCase()}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-purple-200 font-bold",children:a.nickname}),n.jsxs("div",{className:"text-purple-400 text-xs",children:[a.totalSessions," sessions • ",s(a.totalStreamTime)," total"]})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[n.jsxs("div",{className:"bg-purple-800/30 rounded px-2 py-1",children:[n.jsx("div",{className:"text-purple-400",children:"Viewers"}),n.jsxs("div",{className:"text-purple-200 font-bold",children:["👥 ",a.viewer_count]})]}),n.jsxs("div",{className:"bg-green-900/30 rounded px-2 py-1",children:[n.jsx("div",{className:"text-green-400",children:"Tips"}),n.jsxs("div",{className:"text-green-300 font-bold",children:["💸 ",parseFloat(a.total_tips).toFixed(2)]})]}),n.jsxs("div",{className:"bg-yellow-900/30 rounded px-2 py-1",children:[n.jsx("div",{className:"text-yellow-400",children:"Crowns"}),n.jsxs("div",{className:"text-yellow-300 font-bold",children:["👑 ",a.crown_count]})]})]})]},a.id))})]}),n.jsxs("div",{className:"bg-purple-800/30 rounded-lg p-6 border border-purple-500/20",children:[n.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"💎 Token Breakdown"}),n.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto",children:t.tokenBreakdown.length===0?n.jsx("div",{className:"text-center py-8 text-purple-400",children:"No tips yet"}):t.tokenBreakdown.map((a,o)=>n.jsxs("div",{className:"bg-purple-900/30 p-3 rounded-lg flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"text-2xl",children:a.currency==="XRP"?"💎":"🪙"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-purple-200 font-bold",children:a.currency}),n.jsxs("div",{className:"text-purple-400 text-sm",children:[a.count," tips"]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-green-400 font-bold text-lg",children:a.total.toFixed(4)}),n.jsxs("div",{className:"text-purple-400 text-xs",children:[t.totalTips>0?(a.total/t.totalTips*100).toFixed(1):0,"%"]})]})]},o))})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[n.jsxs("div",{className:"bg-purple-800/30 rounded-lg p-6 border border-purple-500/20",children:[n.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"📊 Popular Categories"}),n.jsx("div",{className:"space-y-3",children:t.topCategories.length===0?n.jsx("div",{className:"text-center py-8 text-purple-400",children:"No categories yet"}):t.topCategories.map((a,o)=>n.jsxs("div",{className:"bg-purple-900/30 p-3 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsxs("div",{className:"text-2xl font-bold text-purple-400",children:["#",o+1]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-purple-200 font-bold",children:a.name}),n.jsxs("div",{className:"text-purple-400 text-sm",children:[a.count," stream",a.count!==1?"s":""]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[n.jsxs("div",{className:"bg-green-900/30 rounded px-2 py-1",children:[n.jsx("div",{className:"text-green-400",children:"Tips"}),n.jsxs("div",{className:"text-green-300 font-bold",children:["💸 ",a.tips.toFixed(2)]})]}),n.jsxs("div",{className:"bg-yellow-900/30 rounded px-2 py-1",children:[n.jsx("div",{className:"text-yellow-400",children:"Crowns"}),n.jsxs("div",{className:"text-yellow-300 font-bold",children:["👑 ",a.crowns]})]})]})]},a.name))})]}),n.jsxs("div",{className:"bg-purple-800/30 rounded-lg p-6 border border-purple-500/20",children:[n.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"💸 Top Tippers"}),n.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:t.topTippers.length===0?n.jsx("div",{className:"text-center py-8 text-purple-400",children:"No tippers yet"}):t.topTippers.map((a,o)=>n.jsxs("div",{className:"flex items-center gap-3 bg-purple-900/30 p-3 rounded-lg",children:[n.jsxs("div",{className:"text-2xl font-bold text-purple-400",children:["#",o+1]}),n.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-yellow-500 to-orange-500 flex items-center justify-center text-white font-bold",children:a.nickname.charAt(0).toUpperCase()}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-purple-200 font-bold",children:a.nickname}),n.jsxs("div",{className:"text-purple-400 text-sm",children:[a.count," tips"]})]}),n.jsx("div",{className:"text-green-400 font-bold text-lg",children:a.total.toFixed(2)})]},a.wallet))})]})]}),n.jsxs("div",{className:"bg-purple-800/30 rounded-lg p-6 border border-purple-500/20",children:[n.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"💸 Recent Tips"}),n.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:t.recentTips.length===0?n.jsx("div",{className:"text-center py-8 text-purple-400",children:"No tips yet"}):t.recentTips.map(a=>n.jsxs("div",{className:"flex items-center gap-3 bg-purple-900/30 p-3 rounded-lg",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-yellow-500 to-orange-500 flex items-center justify-center text-white font-bold text-sm",children:a.from_nickname.charAt(0).toUpperCase()}),n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"text-purple-200",children:[n.jsx("span",{className:"font-bold",children:a.from_nickname}),n.jsx("span",{className:"text-purple-400 mx-2",children:"→"}),n.jsx("span",{className:"font-bold",children:a.to_nickname})]})}),n.jsxs("div",{className:"text-green-400 font-bold",children:[parseFloat(a.amount).toFixed(4)," ",a.currency]}),n.jsx("div",{className:"text-purple-400 text-sm",children:i(a.created_at)})]},a.id))})]})]})})}function Cq({notification:t,onClose:e}){const[r,s]=T.useState(!1);return T.useEffect(()=>{s(!0);const i=setTimeout(()=>{s(!1),setTimeout(e,300)},5e3);return()=>clearTimeout(i)},[e]),t?n.jsxs("div",{className:`transform transition-all duration-300 ${r?"translate-y-0 opacity-100":"-translate-y-full opacity-0"}`,children:[t.type==="tip"&&n.jsx("div",{className:"bg-gradient-to-r from-yellow-600 to-orange-600 rounded-lg p-4 shadow-2xl border-2 border-yellow-400/50 min-w-[320px]",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"text-4xl animate-bounce",children:"💸"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-white font-bold text-lg",children:"New Tip!"}),n.jsxs("div",{className:"text-yellow-100 text-sm",children:[n.jsx("span",{className:"font-bold",children:t.from})," tipped"," ",n.jsx("span",{className:"font-bold",children:t.to})]}),n.jsxs("div",{className:"text-yellow-200 font-bold text-lg mt-1",children:[t.amount," ",t.currency]})]})]})}),t.type==="crown"&&n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg p-4 shadow-2xl border-2 border-purple-400/50 min-w-[320px]",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"text-4xl animate-pulse",children:"👑"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-white font-bold text-lg",children:"Crown Reaction!"}),n.jsxs("div",{className:"text-purple-100 text-sm",children:[n.jsx("span",{className:"font-bold",children:t.from})," sent a crown to"," ",n.jsx("span",{className:"font-bold",children:t.to})]})]})]})})]}):null}const No="rphatRpwXcPAo7CVm46dC78JAQ6kLMqb2M";function kq(){const[t,e]=T.useState("chat"),[r,s]=T.useState(null),[i,a]=T.useState([]),[o,l]=T.useState([]),[c,d]=T.useState([]),[u,h]=T.useState([]),[p,f]=T.useState(""),[m,v]=T.useState(""),[x,b]=T.useState(!1),[y,g]=T.useState(!1),[w,S]=T.useState(null),[_,A]=T.useState([]),[B,Q]=T.useState(null),[U,q]=T.useState([]),[de,me]=T.useState(!1),[ye,G]=T.useState(null),[Z,he]=T.useState(!1),[ee,H]=T.useState([]),[I,K]=T.useState(null),[re,z]=T.useState(!1),[O,V]=T.useState("bottom-right"),[ne,pe]=T.useState(!1),[ae,se]=T.useState([]),[k,j]=T.useState([]),[P,$]=T.useState(0),[R,W]=T.useState(null),[te,X]=T.useState(!1),[oe,F]=T.useState(null),[J,xe]=T.useState(0),[Ee,Te]=T.useState([]),[Be,nt]=T.useState("Just Chatting"),[De,L]=T.useState(0),[N,E]=T.useState([]),[Y,fe]=T.useState(!1),[we,Ne]=T.useState({title:"",description:"",category:"Just Chatting",date:"",time:"",duration:60}),Le=T.useRef(null),ze=T.useRef(null),st=T.useRef(null),Qe=T.useRef(null),at=T.useRef(null),wt=T.useRef(null),Gt=["😀","😂","🤣","😊","😍","🥰","😎","🤔","😭","😱","🤯","😴","🥳","🤑","🤗","👍","👎","👏","🙏","💪","🤝","✌️","🤞","👌","🤘","🔥","⭐","✨","💎","💰","🚀","🎉","🎊","🏆","👑","💯","💸","📈","📊","🌟"],Dt=(r==null?void 0:r.address)===No;T.useEffect(()=>{Bt(),Me(),cr(),Se(),Fe(),Yt(),lt(),D();const ce=setInterval(()=>{r&&m&&Je(m,!0),de&&ye&&(cs(),L(Math.floor((new Date-new Date(ye.started_at))/1e3)))},1e3);return()=>{clearInterval(ce),r&&m&&Je(m,!1),de&&ye&&ls()}},[]),T.useEffect(()=>{if(r){xt();const ce=localStorage.getItem(`nickname_${r.address}`);ce?(v(ce),Je(ce,!0)):b(!0),ve(r),be(),Tt(),Pe()}},[r]),T.useEffect(()=>{B&&(zt(),rt())},[B]),T.useEffect(()=>{if(R!=null&&R.stream_signal)if(R.wallet_address===(r==null?void 0:r.address))viewerVideoRef.current&&at.current&&(viewerVideoRef.current.srcObject=at.current,viewerVideoRef.current.play().catch(ce=>console.error("Play error:",ce)));else{const ce=new Peer({initiator:!1,trickle:!1});return ce.on("signal",Oe=>{console.log("Viewer signal generated")}),ce.on("stream",Oe=>{viewerVideoRef.current&&(viewerVideoRef.current.srcObject=Oe,viewerVideoRef.current.play().catch(We=>console.error("Play error:",We)))}),ce.on("error",Oe=>{console.error("Viewer peer error:",Oe)}),ce.signal(R.stream_signal),viewerPeerRef.current=ce,()=>{viewerPeerRef.current&&(viewerPeerRef.current.destroy(),viewerPeerRef.current=null)}}},[R,at.current]),T.useEffect(()=>{lr()},[u]),T.useEffect(()=>{B&&os()},[U]),T.useEffect(()=>{if(ye){As();const ce=setInterval(As,5e3);return()=>clearInterval(ce)}},[ye]);const lr=()=>{var ce;(ce=Le.current)==null||ce.scrollIntoView({behavior:"smooth"})},os=()=>{var ce;(ce=ze.current)==null||ce.scrollIntoView({behavior:"smooth"})},Bt=()=>{const ce=localStorage.getItem("connectedWallet");ce&&s(JSON.parse(ce));const Oe=()=>{const We=localStorage.getItem("connectedWallet");We?s(JSON.parse(We)):(s(null),a([]))};return window.addEventListener("walletConnected",Oe),window.addEventListener("walletDisconnected",Oe),()=>{window.removeEventListener("walletConnected",Oe),window.removeEventListener("walletDisconnected",Oe)}},cr=async()=>{const{data:ce}=await le.from("banned_wallets").select("wallet_address");ce&&se(ce.map(Oe=>Oe.wallet_address))},xt=async()=>{if(!r)return;const{data:ce}=await le.from("banned_wallets").select("*").eq("wallet_address",r.address).maybeSingle();ce&&(ie.error("Your wallet has been banned from Social"),window.dispatchEvent(new Event("walletDisconnected")),localStorage.removeItem("connectedWallet"))},pt=async ce=>{if(!Dt){ie.error("Only developer can ban wallets");return}const Oe=prompt("Reason for ban (optional):"),{error:We}=await le.from("banned_wallets").insert([{wallet_address:ce,banned_by:r.address,reason:Oe||"No reason provided"}]);We?ie.error("Failed to ban wallet"):(ie.success("Wallet banned successfully"),cr(),Me())},M=async ce=>{if(!Dt){ie.error("Only developer can delete messages");return}const{error:Oe}=await le.from("chat_messages").delete().eq("id",ce);Oe?ie.error("Failed to delete message"):(h(u.filter(We=>We.id!==ce)),ie.success("Message deleted"))},ve=async ce=>{if(ce!=null&&ce.address)try{const Oe=new Ve.Client(ce.network==="mainnet"?"wss://xrplcluster.com":"wss://s.altnet.rippletest.net:51233");await Oe.connect();const ut=(await Oe.request({command:"account_lines",account:ce.address,ledger_index:"validated"})).result.lines||[];a(ut),await Oe.disconnect()}catch(Oe){console.error("Error loading wallet assets:",Oe)}},be=async()=>{const{data:ce}=await le.from("chat_rooms").select("id").eq("type","general").maybeSingle();if(!ce)return;const{data:Oe,error:We}=await le.from("chat_messages").select("*").eq("room_id",ce.id).order("created_at",{ascending:!0});We||h(Oe||[])},Pe=()=>{const ce=le.channel("general_chat").on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages"},Oe=>{h(We=>[...We,Oe.new])}).on("postgres_changes",{event:"DELETE",schema:"public",table:"chat_messages"},Oe=>{h(We=>We.filter(ut=>ut.id!==Oe.old.id))}).subscribe();return()=>{le.removeChannel(ce)}},Me=async()=>{const{data:ce,error:Oe}=await le.from("user_presence").select("*").eq("is_online",!0).order("nickname",{ascending:!0});if(!Oe&&ce){const We=ce.filter(ut=>!ae.includes(ut.wallet_address));l(We)}},Se=async()=>{const{data:ce,error:Oe}=await le.from("live_streams").select("*").eq("is_active",!0).order("started_at",{ascending:!1});!Oe&&ce&&d(ce)},Fe=async()=>{const ce=new Date,{data:Oe,error:We}=await le.from("scheduled_streams").select("*").eq("is_active",!0).eq("is_cancelled",!1).gte("scheduled_at",ce.toISOString()).order("scheduled_at",{ascending:!0});!We&&Oe&&E(Oe)},Ke=async()=>{if(!r||!m){ie.error("Please connect wallet and set nickname");return}if(!we.title||!we.date||!we.time){ie.error("Please fill in all required fields");return}const ce=new Date(`${we.date}T${we.time}`);if(ce<=new Date){ie.error("Schedule time must be in the future");return}const{error:Oe}=await le.from("scheduled_streams").insert([{wallet_address:r.address,nickname:m,title:we.title,description:we.description,category:we.category,scheduled_at:ce.toISOString(),duration_minutes:we.duration}]);if(Oe){ie.error("Failed to schedule stream");return}ie.success("Stream scheduled successfully!"),fe(!1),Ne({title:"",description:"",category:"Just Chatting",date:"",time:"",duration:60}),Fe()},it=async ce=>{if(!r){ie.error("Please connect your wallet");return}if(ce.wallet_address!==r.address){ie.error("You can only go live for your own scheduled streams");return}nt(ce.category),e("chat"),he(!0),ie.success(`Starting stream: ${ce.title}`)},$e=async ce=>{const{error:Oe}=await le.from("scheduled_streams").update({is_cancelled:!0}).eq("id",ce);Oe||(ie.success("Stream cancelled"),Fe())},lt=()=>{const ce=le.channel("live_streams_changes").on("postgres_changes",{event:"*",schema:"public",table:"live_streams"},()=>{Se()}).subscribe();return()=>{le.removeChannel(ce)}},Yt=()=>{const ce=le.channel("user_presence_changes").on("postgres_changes",{event:"*",schema:"public",table:"user_presence"},()=>{Me()}).subscribe();return()=>{le.removeChannel(ce)}},D=()=>{const ce=le.channel("tips_notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"stream_tips"},We=>{je({type:"tip",from:We.new.from_nickname,to:We.new.to_nickname,amount:parseFloat(We.new.amount).toFixed(4),currency:We.new.currency})}).subscribe(),Oe=le.channel("crowns_notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"stream_reactions"},We=>{je({type:"crown",from:We.new.from_nickname,to:We.new.from_wallet})}).subscribe();return()=>{le.removeChannel(ce),le.removeChannel(Oe)}},je=ce=>{const Oe=Date.now();Te(We=>[...We,{id:Oe,...ce}]),setTimeout(()=>{Te(We=>We.filter(ut=>ut.id!==Oe))},5e3)},Ue=async ce=>{if(!r||!m){ie.error("Please connect wallet and set nickname");return}if(!ye&&!R){ie.error("No active stream");return}const Oe=(ye==null?void 0:ye.id)||(R==null?void 0:R.id),{error:We}=await le.from("stream_reactions").insert([{stream_id:Oe,from_wallet:r.address,from_nickname:m,reaction_type:"crown"}]);if(We)ie.error("Failed to send crown");else{const{data:ut}=await le.from("live_streams").select("crown_count").eq("id",Oe).maybeSingle();await le.from("live_streams").update({crown_count:((ut==null?void 0:ut.crown_count)||0)+1}).eq("id",Oe);const{data:Ft}=await le.from("chat_rooms").select("id").eq("type","general").maybeSingle();Ft&&await le.from("chat_messages").insert([{room_id:Ft.id,wallet_address:r.address,nickname:m,message_type:"crown",content:`sent a crown to ${ce.nickname||"streamer"}! 👑`,tip_data:{type:"crown",to_nickname:ce.nickname||"streamer",to_wallet:ce.wallet_address}}]),ie.success("Crown sent! 👑"),R&&pn(Oe)}},Je=async(ce,Oe)=>{r&&(await le.from("user_presence").upsert({wallet_address:r.address,nickname:ce,is_online:Oe,last_seen:new Date().toISOString(),updated_at:new Date().toISOString()}),Oe&&Me())},dt=async()=>{if(!m.trim()||!r){ie.error("Please enter a nickname");return}localStorage.setItem(`nickname_${r.address}`,m),await Je(m,!0),b(!1),ie.success("Nickname saved!")},bt=async()=>{if(!p.trim()||!r||!m){ie.error("Please ensure you have a nickname set");return}const{data:ce}=await le.from("chat_rooms").select("id").eq("type","general").maybeSingle();if(!ce){ie.error("Chat room not found");return}const Oe={room_id:ce.id,wallet_address:r.address,nickname:m,message_type:"text",content:p.trim()},{data:We,error:ut}=await le.from("chat_messages").insert([Oe]).select();if(ut){console.error("Error sending message:",ut),ie.error("Failed to send message: "+ut.message);return}We&&We.length>0&&h(Ft=>[...Ft,We[0]]),f("")},Ye=ce=>{ce.wallet_address!==(r==null?void 0:r.address)&&(S(ce),g(!0))},Nt=async ce=>{g(!1);const Oe=[r.address,ce.wallet_address].sort(),{data:We}=await le.from("dm_conversations").select("*").eq("participant_1",Oe[0]).eq("participant_2",Oe[1]).maybeSingle();if(We)Q({...We,otherWallet:ce.wallet_address,otherNickname:ce.nickname});else{const{data:ut}=await le.from("dm_conversations").insert([{participant_1:Oe[0],participant_2:Oe[1],last_message:"",last_message_at:new Date().toISOString()}]).select().single();Q({...ut,otherWallet:ce.wallet_address,otherNickname:ce.nickname})}Tt()},Tt=async()=>{if(!r)return;const{data:ce}=await le.from("dm_conversations").select("*").or(`participant_1.eq.${r.address},participant_2.eq.${r.address}`).order("last_message_at",{ascending:!1});if(ce){const Oe=await Promise.all(ce.map(async We=>{const ut=We.participant_1===r.address?We.participant_2:We.participant_1,{data:Ft}=await le.from("user_presence").select("nickname").eq("wallet_address",ut).maybeSingle();return{...We,otherWallet:ut,otherNickname:(Ft==null?void 0:Ft.nickname)||ut.slice(0,8)}}));A(Oe)}},zt=async()=>{if(!B||!r)return;const{data:ce}=await le.from("direct_messages").select("*").or(`and(from_wallet.eq.${r.address},to_wallet.eq.${B.otherWallet}),and(from_wallet.eq.${B.otherWallet},to_wallet.eq.${r.address})`).order("created_at",{ascending:!0});q(ce||[])},rt=()=>{if(!B)return;const ce=le.channel(`dm_${B.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"direct_messages"},Oe=>{(Oe.new.from_wallet===r.address&&Oe.new.to_wallet===B.otherWallet||Oe.new.from_wallet===B.otherWallet&&Oe.new.to_wallet===r.address)&&q(We=>[...We,Oe.new])}).subscribe();return()=>{le.removeChannel(ce)}},tt=async()=>{if(!p.trim()||!B||!r)return;const ce={from_wallet:r.address,to_wallet:B.otherWallet,from_nickname:m,to_nickname:B.otherNickname,message_type:"text",content:p.trim()},{data:Oe,error:We}=await le.from("direct_messages").insert([ce]).select();if(We){ie.error("Failed to send DM: "+We.message);return}Oe&&Oe.length>0&&q(ut=>[...ut,Oe[0]]),await le.from("dm_conversations").update({last_message:p.trim(),last_message_at:new Date().toISOString()}).eq("id",B.id),f(""),Tt()},kt=()=>{Q(null),q([])},Pt=ce=>{g(!1),F(ce),X(!0)},Mt=async()=>{try{const Oe=(await navigator.mediaDevices.enumerateDevices()).filter(We=>We.kind==="videoinput");H(Oe),he(!0)}catch{ie.error("Failed to enumerate cameras")}},It=async ce=>{try{const{data:Oe}=await le.from("live_streams").select("*").eq("wallet_address",r.address).eq("is_active",!0).maybeSingle();if(Oe){ie.error("You already have an active stream. Please end it first.");return}const We=await navigator.mediaDevices.getUserMedia({video:ce?{deviceId:{exact:ce}}:!0,audio:!0});at.current=We,st.current&&(st.current.srcObject=We,st.current.play().catch(kr=>console.log("Play error:",kr)));const{data:ut,error:Ft}=await le.from("live_streams").insert([{wallet_address:r.address,nickname:m,title:`${m}'s Stream`,category:Be,is_active:!0,viewer_count:0,total_tips:0,crown_count:0}]).select().single();if(Ft){console.error("Error creating stream:",Ft),ie.error("Failed to create stream record");return}console.log("Stream created:",ut),G(ut),me(!0),he(!1);const Rs=new Peer({initiator:!0,trickle:!1,stream:We});Rs.on("signal",async kr=>{console.log("Broadcaster signal generated"),await le.from("live_streams").update({stream_signal:kr}).eq("id",ut.id)}),Rs.on("error",kr=>{console.error("Broadcaster peer error:",kr)}),broadcasterPeerRef.current=Rs,ie.success("🎥 Stream started! You are now LIVE!"),Se()}catch(Oe){console.error("Error starting stream:",Oe),ie.error("Failed to start stream: "+Oe.message)}},pr=async()=>{try{if(re)wt.current&&(st.current&&(st.current.srcObject=wt.current),at.current=wt.current,wt.current=null,Qe.current&&(Qe.current.srcObject=null)),z(!1);else{const ce=await navigator.mediaDevices.getDisplayMedia({video:{cursor:"always"},audio:!0});st.current&&(st.current.srcObject=ce,at.current&&!wt.current&&(wt.current=at.current,Qe.current&&(Qe.current.srcObject=wt.current)),at.current=ce),z(!0),ie.success("Screen sharing started")}}catch(ce){console.error("Error toggling screen share:",ce),ie.error("Failed to toggle screen share")}},ls=async()=>{at.current&&(at.current.getTracks().forEach(ce=>ce.stop()),at.current=null),wt.current&&(wt.current.getTracks().forEach(ce=>ce.stop()),wt.current=null),st.current&&(st.current.srcObject=null),Qe.current&&(Qe.current.srcObject=null),broadcasterPeerRef.current&&(broadcasterPeerRef.current.destroy(),broadcasterPeerRef.current=null),ye&&await le.from("live_streams").update({is_active:!1,ended_at:new Date().toISOString()}).eq("id",ye.id),me(!1),z(!1),G(null),j([]),W(null),$(0),ie.success("Stream ended"),Se()},cs=async()=>{ye&&await le.from("live_streams").update({updated_at:new Date().toISOString()}).eq("id",ye.id)},As=async()=>{if(!ye)return;const{data:ce}=await le.from("stream_tips").select("*").eq("stream_id",ye.id).order("created_at",{ascending:!1});if(ce){j(ce);const Oe=ce.reduce((We,ut)=>We+parseFloat(ut.amount),0);$(Oe.toFixed(4))}},fr=async ce=>{W(ce),e("viewing"),pn(ce.id),zr(ce.id)},pn=async ce=>{const{data:Oe}=await le.from("stream_tips").select("*").eq("stream_id",ce).order("created_at",{ascending:!1});if(Oe){j(Oe);const ut=Oe.reduce((Ft,Rs)=>Ft+parseFloat(Rs.amount),0);$(ut.toFixed(4))}const{data:We}=await le.from("stream_viewers").select("*").eq("stream_id",ce);We&&xe(We.length)},zr=async ce=>{r&&(await le.from("stream_viewers").upsert({stream_id:ce,viewer_address:r.address,last_seen:new Date().toISOString()}),await le.from("live_streams").update({viewer_count:J+1}).eq("id",ce))},Bn=()=>{R&&r&&rr(R.id),W(null),j([]),$(0),xe(0),e("feeds")},rr=async ce=>{if(!r)return;await le.from("stream_viewers").delete().eq("stream_id",ce).eq("viewer_address",r.address);const{data:Oe}=await le.from("stream_viewers").select("*").eq("stream_id",ce);await le.from("live_streams").update({viewer_count:(Oe==null?void 0:Oe.length)||0}).eq("id",ce)},dr=ce=>new Date(ce).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),Ps=ce=>c.some(Oe=>Oe.wallet_address===ce&&Oe.is_active);return n.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-br from-purple-900 via-slate-900 to-purple-900 overflow-hidden",children:[n.jsx("div",{className:"fixed top-20 right-6 z-50 space-y-2",children:Ee.map(ce=>n.jsx(Cq,{notification:ce,onClose:()=>Te(Oe=>Oe.filter(We=>We.id!==ce.id))},ce.id))}),n.jsx("div",{className:"flex-shrink-0 bg-purple-900/20 backdrop-blur-xl border-b border-purple-500/20 px-6 pt-4",children:n.jsxs("div",{className:"flex gap-4",children:[n.jsx("button",{onClick:()=>e("chat"),className:`px-6 py-3 rounded-t-lg font-bold transition-all ${t==="chat"?"bg-purple-800/50 text-purple-200 border-t-2 border-x-2 border-purple-500/50":"text-purple-400 hover:text-purple-200"}`,children:"Chat"}),c.length>0&&n.jsxs("button",{onClick:()=>e("feeds"),className:`px-6 py-3 rounded-t-lg font-bold transition-all relative ${t==="feeds"?"bg-purple-800/50 text-purple-200 border-t-2 border-x-2 border-purple-500/50":"text-purple-400 hover:text-purple-200"}`,children:["Live Feeds",n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse",children:c.length})]}),n.jsxs("button",{onClick:()=>e("upcoming"),className:`px-6 py-3 rounded-t-lg font-bold transition-all relative ${t==="upcoming"?"bg-purple-800/50 text-purple-200 border-t-2 border-x-2 border-purple-500/50":"text-purple-400 hover:text-purple-200"}`,children:["Upcoming",N.length>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:N.length})]}),n.jsx("button",{onClick:()=>e("analytics"),className:`px-6 py-3 rounded-t-lg font-bold transition-all ${t==="analytics"?"bg-purple-800/50 text-purple-200 border-t-2 border-x-2 border-purple-500/50":"text-purple-400 hover:text-purple-200"}`,children:"Analytics"})]})}),t==="chat"&&n.jsxs("div",{className:"flex-1 flex overflow-hidden min-h-0",children:[n.jsxs("div",{className:"w-72 bg-purple-900/20 backdrop-blur-xl flex flex-col border-r border-purple-500/20 flex-shrink-0",children:[n.jsxs("div",{className:"p-6 border-b border-purple-500/20",children:[n.jsx("h2",{className:"text-2xl font-bold text-purple-200",children:"Online Users"}),n.jsxs("p",{className:"text-purple-400 text-sm mt-1",children:[o.length," online"]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:o.map(ce=>n.jsx("button",{onClick:()=>Ye(ce),className:"w-full p-4 rounded-lg bg-purple-800/30 hover:bg-purple-800/50 transition-all duration-300 border border-purple-500/20 hover:border-purple-500/40",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold",children:ce.nickname.charAt(0).toUpperCase()}),Ps(ce.wallet_address)?n.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-red-500 rounded-full border-2 border-purple-900 animate-pulse"}):n.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-purple-900"})]}),n.jsxs("div",{className:"flex-1 text-left min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-purple-200 font-bold truncate",children:ce.nickname}),ce.wallet_address===No&&n.jsx("span",{className:"text-yellow-400 text-lg",title:"Developer",children:"👑"}),Ps(ce.wallet_address)&&n.jsx("span",{className:"text-red-400 text-xs font-bold",children:"LIVE"})]}),n.jsxs("div",{className:"text-purple-400 text-xs truncate",children:[ce.wallet_address.slice(0,12),"..."]})]})]})},ce.wallet_address))}),n.jsx("div",{className:"p-4 border-t border-purple-500/20 space-y-2",children:de?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:pr,className:"w-full bg-purple-700/50 hover:bg-purple-700/70 text-white py-2 px-4 rounded-lg font-medium transition-all",children:re?"Stop Screen Share":"Share Screen"}),n.jsx("button",{onClick:ls,className:"w-full bg-red-600/50 hover:bg-red-600/70 text-white py-2 px-4 rounded-lg font-medium transition-all",children:"End Stream"})]}):n.jsx("button",{onClick:Mt,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white py-3 px-4 rounded-lg font-bold transition-all duration-300",children:"Start Streaming"})})]}),n.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[n.jsxs("div",{className:"p-4 bg-purple-900/20 backdrop-blur-xl border-b border-purple-500/20",children:[n.jsx("h3",{className:"text-2xl font-bold text-purple-200",children:"General Chat"}),n.jsx("p",{className:"text-purple-400 text-sm",children:"Public conversation"})]}),de&&n.jsxs("div",{className:"p-4 bg-purple-900/10",children:[n.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-purple-200 font-bold text-lg",children:"Your Live Stream"}),n.jsx("div",{className:"text-purple-400 text-sm",children:"Now visible in Live Feeds tab - viewers can watch and chat!"})]}),n.jsxs("div",{className:"flex items-center gap-2 bg-red-500 px-4 py-2 rounded-lg",children:[n.jsx("div",{className:"w-3 h-3 bg-white rounded-full animate-pulse"}),n.jsx("span",{className:"text-white font-bold",children:"BROADCASTING"})]})]}),n.jsxs("div",{className:"bg-black rounded-lg overflow-hidden border-2 border-purple-500/30 relative aspect-video",children:[n.jsx("video",{ref:st,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),re&&wt.current&&n.jsx("div",{className:`absolute w-48 h-36 border-2 border-purple-500/50 rounded-lg overflow-hidden cursor-move ${O==="top-left"?"top-4 left-4":O==="top-right"?"top-4 right-4":O==="bottom-left"?"bottom-4 left-4":"bottom-4 right-4"}`,children:n.jsx("video",{ref:Qe,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"})}),n.jsxs("div",{className:"absolute top-4 left-4 bg-purple-900/90 backdrop-blur-xl px-4 py-2 rounded-lg border border-purple-500/30",children:[n.jsx("div",{className:"text-purple-200 font-bold text-sm",children:"💸 Total Tips"}),n.jsxs("div",{className:"text-green-400 font-bold text-xl",children:[P," XRP"]})]}),n.jsxs("div",{className:"absolute top-4 right-4 bg-red-500/90 backdrop-blur-xl px-4 py-2 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("div",{className:"w-3 h-3 bg-white rounded-full animate-pulse"}),n.jsx("span",{className:"text-white font-bold text-sm",children:"LIVE"})]}),n.jsxs("div",{className:"text-white font-mono text-xs text-center",children:[Math.floor(De/3600),":",String(Math.floor(De%3600/60)).padStart(2,"0"),":",String(De%60).padStart(2,"0")]})]}),re&&n.jsx("div",{className:"absolute bottom-4 left-4 flex gap-2",children:["top-left","top-right","bottom-left","bottom-right"].map(ce=>n.jsx("button",{onClick:()=>V(ce),className:`w-8 h-8 rounded ${O===ce?"bg-purple-500":"bg-purple-800/50 hover:bg-purple-700/70"} transition-all`},ce))})]}),k.length>0&&n.jsx("div",{className:"mt-2 space-y-1 max-h-24 overflow-y-auto",children:k.slice(0,5).map(ce=>n.jsxs("div",{className:"bg-purple-800/30 px-3 py-1 rounded text-sm flex items-center gap-2",children:[n.jsx("span",{className:"text-yellow-400",children:"💸"}),n.jsx("span",{className:"text-purple-200 font-medium",children:ce.from_nickname}),n.jsx("span",{className:"text-purple-400",children:"sent"}),n.jsxs("span",{className:"text-green-400 font-bold",children:[ce.amount," ",ce.currency]})]},ce.id))}),n.jsxs("div",{className:"mt-3 flex gap-2",children:[n.jsx("button",{onClick:()=>W(ye),className:"flex-1 bg-purple-600 hover:bg-purple-700 text-white py-2 rounded-lg font-bold transition-all",children:"📺 View Full Stream"}),n.jsx("button",{onClick:ls,className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-2 rounded-lg font-bold transition-all",children:"Stop Stream"})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[u.map(ce=>{const Oe=ce.message_type==="tip",We=ce.message_type==="crown";return Oe||We?n.jsx("div",{className:"flex justify-center",children:n.jsx("div",{className:`px-6 py-3 rounded-xl border-2 ${Oe?"bg-gradient-to-r from-yellow-900/50 to-orange-900/50 border-yellow-500/50":"bg-gradient-to-r from-purple-900/50 to-pink-900/50 border-purple-500/50"} max-w-md`,children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"text-3xl",children:Oe?"💸":"👑"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-white font-bold",children:ce.nickname}),Oe&&ce.tip_data&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"text-yellow-300",children:"sent"}),n.jsxs("span",{className:"text-green-400 font-bold text-lg",children:[ce.tip_data.amount," ",ce.tip_data.currency]}),n.jsx("span",{className:"text-yellow-300",children:"to"}),n.jsx("span",{className:"text-white font-bold",children:ce.tip_data.to_nickname})]}),We&&n.jsx("span",{className:"text-purple-200",children:ce.content})]}),n.jsx("div",{className:"text-purple-400 text-xs mt-1",children:dr(ce.created_at)})]})]})})},ce.id):n.jsxs("div",{className:`flex gap-3 group ${ce.wallet_address===(r==null?void 0:r.address)?"flex-row-reverse":""}`,children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold flex-shrink-0",children:ce.nickname.charAt(0).toUpperCase()}),n.jsxs("div",{className:"flex-1 max-w-2xl",children:[n.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[n.jsx("span",{className:"text-purple-200 font-bold",children:ce.nickname}),ce.wallet_address===No&&n.jsx("span",{className:"text-yellow-400 text-sm",title:"Developer",children:"👑"}),n.jsx("span",{className:"text-purple-400 text-xs",children:dr(ce.created_at)}),Dt&&n.jsx("button",{onClick:()=>M(ce.id),className:"opacity-0 group-hover:opacity-100 text-red-400 hover:text-red-300 text-xs font-medium transition-all",children:"Delete"})]}),n.jsx("div",{className:`p-3 rounded-lg ${ce.wallet_address===(r==null?void 0:r.address)?"bg-purple-600/30 border border-purple-500/50":"bg-purple-800/30 border border-purple-500/20"}`,children:n.jsx("p",{className:"text-purple-100",children:ce.content})})]})]},ce.id)}),n.jsx("div",{ref:Le})]}),n.jsx("div",{className:"p-4 bg-purple-900/20 backdrop-blur-xl border-t border-purple-500/20",children:n.jsxs("div",{className:"flex gap-2 relative",children:[n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:()=>pe(!ne),className:"bg-purple-800/30 hover:bg-purple-800/50 text-white p-3 rounded-lg border border-purple-500/20 transition-all text-xl",title:"Emojis",children:"😀"}),ne&&n.jsx("div",{className:"absolute bottom-full left-0 mb-2 bg-purple-900/95 backdrop-blur-xl p-3 rounded-lg shadow-2xl border border-purple-500/30 z-50",children:n.jsx("div",{className:"grid grid-cols-8 gap-1 max-h-48 overflow-y-auto",style:{width:"320px"},children:Gt.map((ce,Oe)=>n.jsx("button",{onClick:()=>{f(p+ce),pe(!1)},className:"hover:bg-purple-700/50 p-2 rounded text-2xl transition-all hover:scale-110",children:ce},Oe))})})]}),n.jsx("input",{type:"text",value:p,onChange:ce=>f(ce.target.value),onKeyPress:ce=>ce.key==="Enter"&&(B?tt():bt()),placeholder:m?"Type a message...":"Set nickname first...",disabled:!r||!m,className:"flex-1 bg-purple-800/30 text-purple-100 px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 border border-purple-500/20 placeholder-purple-400/50"}),n.jsx("button",{onClick:B?tt:bt,disabled:!p.trim()||!r||!m,className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 disabled:from-gray-600 disabled:to-gray-700 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg font-bold transition-all",children:"Send"})]})})]}),n.jsxs("div",{className:"w-80 bg-purple-900/20 backdrop-blur-xl border-l border-purple-500/20 flex flex-col flex-shrink-0",children:[n.jsx("div",{className:"p-4 border-b border-purple-500/20",children:n.jsx("h3",{className:"text-xl font-bold text-purple-200",children:"Direct Messages"})}),B?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 bg-purple-800/30 border-b border-purple-500/20 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold",children:B.otherNickname.charAt(0).toUpperCase()}),n.jsxs("div",{children:[n.jsx("div",{className:"text-purple-200 font-bold",children:B.otherNickname}),n.jsxs("div",{className:"text-purple-400 text-xs",children:[B.otherWallet.slice(0,12),"..."]})]})]}),n.jsx("button",{onClick:kt,className:"text-purple-400 hover:text-purple-200 transition-colors",children:"✕"})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[U.map(ce=>n.jsxs("div",{className:`flex gap-2 ${ce.from_wallet===(r==null?void 0:r.address)?"flex-row-reverse":""}`,children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold text-sm flex-shrink-0",children:ce.from_nickname.charAt(0).toUpperCase()}),n.jsxs("div",{className:`p-3 rounded-lg max-w-[70%] ${ce.from_wallet===(r==null?void 0:r.address)?"bg-purple-600/30 border border-purple-500/50":"bg-purple-800/30 border border-purple-500/20"}`,children:[n.jsx("p",{className:"text-purple-100 text-sm",children:ce.content}),n.jsx("span",{className:"text-purple-400 text-xs mt-1 block",children:dr(ce.created_at)})]})]},ce.id)),n.jsx("div",{ref:ze})]})]}):n.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:_.length===0?n.jsx("div",{className:"text-center text-purple-400 text-sm p-8",children:"Click on a user to start a conversation"}):_.map(ce=>n.jsx("button",{onClick:()=>Q(ce),className:"w-full p-3 rounded-lg bg-purple-800/30 hover:bg-purple-800/50 transition-all border border-purple-500/20 text-left",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold text-sm",children:ce.otherNickname.charAt(0).toUpperCase()}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-200 font-medium truncate text-sm",children:ce.otherNickname}),n.jsx("div",{className:"text-purple-400 text-xs truncate",children:ce.last_message||"No messages yet"})]})]})},ce.id))})]})]}),t==="feeds"&&n.jsx(Eq,{onViewStream:fr,connectedWallet:r}),t==="analytics"&&n.jsx(Tq,{}),t==="upcoming"&&n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-purple-200",children:"Upcoming Streams"}),n.jsxs("p",{className:"text-purple-400 mt-1",children:[N.length," scheduled streams"]})]}),r&&m&&n.jsxs("button",{onClick:()=>fe(!0),className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white px-6 py-3 rounded-lg font-bold transition-all flex items-center gap-2",children:[n.jsx("span",{children:"📅"}),"Schedule Stream"]})]}),N.length===0?n.jsxs("div",{className:"text-center py-20",children:[n.jsx("div",{className:"text-6xl mb-4",children:"📅"}),n.jsx("div",{className:"text-purple-300 text-xl font-bold mb-2",children:"No Upcoming Streams"}),n.jsx("div",{className:"text-purple-400",children:"Schedule a stream to let your audience know when you'll be live!"})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(ce=>{const Oe=new Date(ce.scheduled_at),ut=Math.floor((Oe-new Date)/(1e3*60*60)),Ft=(r==null?void 0:r.address)===ce.wallet_address;return n.jsxs("div",{className:"bg-purple-800/30 rounded-lg p-5 border border-purple-500/30 hover:border-purple-400/50 transition-all",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold text-lg",children:ce.nickname.charAt(0).toUpperCase()}),n.jsxs("div",{children:[n.jsx("div",{className:"text-purple-200 font-bold",children:ce.nickname}),Ft&&n.jsx("span",{className:"text-xs bg-purple-600 px-2 py-0.5 rounded text-white",children:"Your Stream"})]})]}),n.jsx("span",{className:"bg-blue-600/30 text-blue-300 px-2 py-1 rounded text-xs font-bold",children:ce.category})]}),n.jsx("h3",{className:"text-purple-100 font-bold text-lg mb-2",children:ce.title}),ce.description&&n.jsx("p",{className:"text-purple-400 text-sm mb-3 line-clamp-2",children:ce.description}),n.jsxs("div",{className:"space-y-2 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-purple-300 text-sm",children:[n.jsx("span",{children:"📅"}),n.jsx("span",{children:Oe.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})})]}),n.jsxs("div",{className:"flex items-center gap-2 text-purple-300 text-sm",children:[n.jsx("span",{children:"🕐"}),n.jsx("span",{children:Oe.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})})]}),n.jsxs("div",{className:"flex items-center gap-2 text-purple-300 text-sm",children:[n.jsx("span",{children:"⏱️"}),n.jsxs("span",{children:[ce.duration_minutes," minutes"]})]}),n.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${ut<1?"text-red-400":ut<24?"text-yellow-400":"text-purple-400"}`,children:[n.jsx("span",{children:"⏳"}),n.jsx("span",{children:ut<1?"Starting soon!":ut<24?`In ${ut} hours`:`In ${Math.floor(ut/24)} days`})]})]}),Ft&&n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>it(ce),className:"flex-1 bg-gradient-to-r from-green-600 to-green-500 hover:from-green-500 hover:to-green-400 text-white py-2 px-4 rounded-lg font-bold transition-all",children:"🎥 Go Live Now"}),n.jsx("button",{onClick:()=>$e(ce.id),className:"bg-red-600/30 hover:bg-red-600/50 text-red-300 py-2 px-4 rounded-lg font-bold transition-all",children:"Cancel"})]}),!Ft&&n.jsx("button",{className:"w-full bg-purple-600/30 hover:bg-purple-600/50 text-purple-300 py-2 px-4 rounded-lg font-bold transition-all",children:"🔔 Remind Me"})]},ce.id)})})]})}),t==="viewing"&&R&&n.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[n.jsxs("div",{className:"flex-shrink-0 p-4 bg-purple-900/20 backdrop-blur-xl border-b border-purple-500/20 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:Bn,className:"text-purple-400 hover:text-purple-200 transition-colors",children:"← Back"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold",children:R.nickname.charAt(0).toUpperCase()}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-purple-200 font-bold",children:R.nickname}),R.wallet_address===No&&n.jsx("span",{className:"text-yellow-400 text-sm",children:"👑"}),n.jsxs("span",{className:"flex items-center gap-1 bg-red-500 px-2 py-0.5 rounded text-xs",children:[n.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),"LIVE"]})]}),n.jsx("div",{className:"text-purple-400 text-sm",children:R.title})]})]})]}),n.jsx("button",{onClick:()=>{const ce={wallet_address:R.wallet_address,nickname:R.nickname};Pt(ce)},className:"bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-500 hover:to-orange-500 text-white px-6 py-2 rounded-lg font-bold transition-all",children:"💸 Send Tip"})]}),n.jsxs("div",{className:"flex-1 flex overflow-hidden min-h-0",children:[n.jsxs("div",{className:"flex-1 bg-black flex flex-col min-w-0",children:[n.jsxs("div",{className:"flex-1 flex items-center justify-center relative min-h-0",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-8xl mb-4",children:"📹"}),n.jsx("div",{className:"text-purple-400 text-xl",children:"Stream Preview"}),n.jsx("div",{className:"text-purple-500 text-sm mt-2",children:"Live video streaming coming soon"})]}),n.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-2 bg-red-500/90 backdrop-blur-xl px-4 py-2 rounded-lg",children:[n.jsx("div",{className:"w-3 h-3 bg-white rounded-full animate-pulse"}),n.jsx("span",{className:"text-white font-bold text-sm",children:"LIVE"})]})]}),n.jsx("div",{className:"flex-shrink-0 p-4 bg-purple-900/20 backdrop-blur-xl border-t border-purple-500/20",children:n.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-purple-800/30 rounded-lg p-4 border border-purple-500/20",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"👥 Viewers"}),n.jsx("div",{className:"text-purple-200 text-2xl font-bold",children:J})]}),n.jsxs("div",{className:"bg-purple-800/30 rounded-lg p-4 border border-purple-500/20",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"💸 Total Tips"}),n.jsx("div",{className:"text-green-400 text-2xl font-bold",children:P})]}),n.jsxs("div",{className:"bg-purple-800/30 rounded-lg p-4 border border-purple-500/20",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"🎁 Tip Count"}),n.jsx("div",{className:"text-purple-200 text-2xl font-bold",children:k.length})]}),n.jsxs("div",{className:"bg-purple-800/30 rounded-lg p-4 border border-purple-500/20",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"⏱️ Duration"}),n.jsxs("div",{className:"text-purple-200 text-2xl font-bold",children:[Math.floor((new Date-new Date(R.started_at))/6e4),"m"]})]})]})})]}),n.jsxs("div",{className:"w-96 bg-purple-900/20 backdrop-blur-xl border-l border-purple-500/20 flex flex-col flex-shrink-0",children:[n.jsxs("div",{className:"flex-shrink-0 p-4 border-b border-purple-500/20",children:[n.jsx("h3",{className:"text-xl font-bold text-purple-200",children:"Stream Chat 💬"}),n.jsxs("p",{className:"text-purple-400 text-sm",children:[u.length," messages"]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[u.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-5xl mb-3",children:"💬"}),n.jsx("div",{className:"text-purple-400",children:"No messages yet"}),n.jsx("div",{className:"text-purple-500 text-sm mt-1",children:"Start the conversation!"})]}):u.map(ce=>{const Oe=ce.message_type==="tip",We=ce.message_type==="crown";return Oe||We?n.jsx("div",{className:`px-4 py-3 rounded-lg border ${Oe?"bg-gradient-to-r from-yellow-900/40 to-orange-900/40 border-yellow-500/40":"bg-gradient-to-r from-purple-900/40 to-pink-900/40 border-purple-500/40"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-2xl",children:Oe?"💸":"👑"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap text-sm",children:[n.jsx("span",{className:"text-white font-bold",children:ce.nickname}),Oe&&ce.tip_data&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"text-yellow-300",children:"sent"}),n.jsxs("span",{className:"text-green-400 font-bold",children:[ce.tip_data.amount," ",ce.tip_data.currency]}),n.jsx("span",{className:"text-yellow-300",children:"to"}),n.jsx("span",{className:"text-white font-bold",children:ce.tip_data.to_nickname})]}),We&&n.jsx("span",{className:"text-purple-200",children:ce.content})]}),n.jsx("div",{className:"text-purple-400 text-xs mt-0.5",children:dr(ce.created_at)})]})]})},ce.id):n.jsx("div",{className:"bg-purple-800/30 rounded-lg p-3 border border-purple-500/20",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold text-sm flex-shrink-0",children:ce.nickname.charAt(0).toUpperCase()}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("span",{className:"text-purple-200 font-bold text-sm",children:ce.nickname}),ce.wallet_address===No&&n.jsx("span",{className:"text-yellow-400 text-xs",children:"👑"})]}),n.jsx("div",{className:"text-purple-100 text-sm break-words",children:ce.content||ce.message}),n.jsx("div",{className:"text-purple-400 text-xs mt-1",children:dr(ce.created_at)})]})]})},ce.id)}),n.jsx("div",{ref:Le})]}),n.jsxs("div",{className:"p-4 border-t border-purple-500/20 space-y-2",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:p,onChange:ce=>f(ce.target.value),onKeyPress:ce=>ce.key==="Enter"&&bt(),placeholder:"Type a message...",className:"flex-1 bg-purple-800/30 text-purple-100 px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 border border-purple-500/20"}),n.jsx("button",{onClick:bt,className:"bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-lg font-bold transition-all",children:"Send"})]}),n.jsx("button",{onClick:()=>{const ce={wallet_address:R.wallet_address,nickname:R.nickname};Ue(ce)},className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white py-2 rounded-lg font-bold transition-all text-sm",children:"👑 Send Crown"}),n.jsx("button",{onClick:()=>{const ce={wallet_address:R.wallet_address,nickname:R.nickname};Pt(ce)},className:"w-full bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-500 hover:to-orange-500 text-white py-3 rounded-lg font-bold transition-all",children:"💸 Send Tip"})]})]})]})]}),x&&n.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-slate-900 rounded-lg p-8 max-w-md w-full border border-purple-500/30",children:[n.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:"Set Your Nickname"}),n.jsx("input",{type:"text",value:m,onChange:ce=>v(ce.target.value),placeholder:"Enter nickname...",maxLength:20,className:"w-full bg-purple-800/30 text-purple-100 px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 border border-purple-500/30 mb-4"}),n.jsx("button",{onClick:dt,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white py-3 rounded-lg font-bold transition-all",children:"Save Nickname"})]})}),y&&w&&n.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-slate-900 rounded-lg p-8 max-w-md w-full border border-purple-500/30",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"w-20 h-20 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold text-3xl mx-auto mb-4",children:w.nickname.charAt(0).toUpperCase()}),n.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[n.jsx("h3",{className:"text-2xl font-bold text-purple-200",children:w.nickname}),w.wallet_address===No&&n.jsx("span",{className:"text-yellow-400 text-2xl",title:"Developer",children:"👑"})]}),n.jsx("p",{className:"text-purple-400 text-sm mt-1",children:w.wallet_address})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("button",{onClick:()=>Nt(w),className:"w-full bg-purple-700/50 hover:bg-purple-700/70 text-white py-3 rounded-lg font-medium transition-all",children:"💬 Send Direct Message"}),n.jsx("button",{onClick:()=>Pt(w),className:"w-full bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-500 hover:to-orange-500 text-white py-3 rounded-lg font-medium transition-all",children:"💸 Send Tip"}),Dt&&w.wallet_address!==No&&n.jsx("button",{onClick:()=>{pt(w.wallet_address),g(!1)},className:"w-full bg-red-700/50 hover:bg-red-700/70 text-white py-3 rounded-lg font-medium transition-all",children:"🚫 Ban Wallet"}),n.jsx("button",{onClick:()=>g(!1),className:"w-full bg-slate-700/50 hover:bg-slate-700/70 text-white py-3 rounded-lg font-medium transition-all",children:"Cancel"})]})]})}),Z&&n.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-slate-900 rounded-lg p-8 max-w-md w-full border border-purple-500/30",children:[n.jsx("h3",{className:"text-2xl font-bold text-purple-200 mb-6",children:"Select Camera"}),n.jsx("div",{className:"space-y-2 mb-4",children:ee.map(ce=>n.jsx("button",{onClick:()=>{K(ce.deviceId),It(ce.deviceId)},className:"w-full bg-purple-800/30 hover:bg-purple-800/50 text-purple-200 px-4 py-3 rounded-lg transition-all text-left",children:ce.label||`Camera ${ce.deviceId.slice(0,8)}`},ce.deviceId))}),n.jsx("button",{onClick:()=>he(!1),className:"w-full bg-slate-700/50 hover:bg-slate-700/70 text-white py-3 rounded-lg font-medium transition-all",children:"Cancel"})]})}),n.jsx(jq,{isOpen:te,onClose:()=>{X(!1),F(null),R&&pn(R.id)},recipient:oe,connectedWallet:r,nickname:m,currentStream:R}),Y&&n.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-purple-900 rounded-xl max-w-2xl w-full p-6 border-2 border-purple-500/30",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-2xl font-bold text-purple-200",children:"📅 Schedule Stream"}),n.jsx("button",{onClick:()=>fe(!1),className:"text-purple-400 hover:text-purple-200 text-2xl",children:"×"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-purple-300 text-sm font-bold mb-2 block",children:"Stream Title *"}),n.jsx("input",{type:"text",value:we.title,onChange:ce=>Ne({...we,title:ce.target.value}),className:"w-full bg-purple-800/30 text-purple-100 px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 border border-purple-500/20",placeholder:"e.g., Trading Strategy Session"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-purple-300 text-sm font-bold mb-2 block",children:"Description"}),n.jsx("textarea",{value:we.description,onChange:ce=>Ne({...we,description:ce.target.value}),className:"w-full bg-purple-800/30 text-purple-100 px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 border border-purple-500/20 h-24 resize-none",placeholder:"Tell viewers what to expect..."})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-purple-300 text-sm font-bold mb-2 block",children:"Category *"}),n.jsxs("select",{value:we.category,onChange:ce=>Ne({...we,category:ce.target.value}),className:"w-full bg-purple-800/30 text-purple-100 px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 border border-purple-500/20",children:[n.jsx("option",{value:"Just Chatting",children:"Just Chatting"}),n.jsx("option",{value:"Trading",children:"Trading"}),n.jsx("option",{value:"Education",children:"Education"}),n.jsx("option",{value:"Gaming",children:"Gaming"}),n.jsx("option",{value:"Music",children:"Music"}),n.jsx("option",{value:"Art",children:"Art"}),n.jsx("option",{value:"Crypto Talk",children:"Crypto Talk"}),n.jsx("option",{value:"Entertainment",children:"Entertainment"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-purple-300 text-sm font-bold mb-2 block",children:"Duration (minutes) *"}),n.jsx("input",{type:"number",value:we.duration,onChange:ce=>Ne({...we,duration:parseInt(ce.target.value)}),className:"w-full bg-purple-800/30 text-purple-100 px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 border border-purple-500/20",min:"15",step:"15"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-purple-300 text-sm font-bold mb-2 block",children:"Date *"}),n.jsx("input",{type:"date",value:we.date,onChange:ce=>Ne({...we,date:ce.target.value}),min:new Date().toISOString().split("T")[0],className:"w-full bg-purple-800/30 text-purple-100 px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 border border-purple-500/20"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-purple-300 text-sm font-bold mb-2 block",children:"Time *"}),n.jsx("input",{type:"time",value:we.time,onChange:ce=>Ne({...we,time:ce.target.value}),className:"w-full bg-purple-800/30 text-purple-100 px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 border border-purple-500/20"})]})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:()=>fe(!1),className:"flex-1 bg-purple-800/30 hover:bg-purple-800/50 text-purple-200 py-3 rounded-lg font-bold transition-all",children:"Cancel"}),n.jsx("button",{onClick:Ke,className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white py-3 rounded-lg font-bold transition-all",children:"Schedule Stream"})]})]})})]})}function Aq({data:t}){const e=T.useRef(null),r=T.useRef(null);return T.useEffect(()=>{if(!e.current||!t||t.length===0)return;const s=()=>{r.current&&r.current.applyOptions({width:e.current.clientWidth,height:e.current.clientHeight})},i=Uu(e.current,{layout:{background:{type:"solid",color:"transparent"},textColor:"#9CA3AF"},grid:{vertLines:{color:"#1F2937"},horzLines:{color:"#1F2937"}},width:e.current.clientWidth,height:e.current.clientHeight,timeScale:{timeVisible:!0,secondsVisible:!1,borderColor:"#374151"},rightPriceScale:{borderColor:"#374151",scaleMargins:{top:.2,bottom:.2}},crosshair:{vertLine:{color:"#22C55E",width:1,style:3,labelBackgroundColor:"#1F2937"},horzLine:{color:"#22C55E",width:1,style:3,labelBackgroundColor:"#1F2937"}}});return i.addAreaSeries({lineColor:"#22C55E",topColor:"rgba(34, 197, 94, 0.2)",bottomColor:"rgba(34, 197, 94, 0)",lineWidth:2,priceFormat:{type:"price",precision:6,minMove:1e-6}}).setData(t),i.timeScale().fitContent(),window.addEventListener("resize",s),r.current=i,()=>{window.removeEventListener("resize",s),i.remove()}},[t]),n.jsx("div",{ref:e,className:"w-full h-full"})}function Pq({tokenSlug:t}){var re,z;const[e,r]=T.useState(null),[s,i]=T.useState(!0),[a,o]=T.useState(null),[l,c]=T.useState(null),[d,u]=T.useState(2.5),[h,p]=T.useState(null),[f,m]=T.useState(!1),[v,x]=T.useState("overview"),[b,y]=T.useState([]),[g,w]=T.useState(null),[S,_]=T.useState(!1),[A,B]=T.useState(!1);T.useEffect(()=>{Q(),U(),q()},[t]),T.useEffect(()=>{e&&a&&he()},[e,a]),T.useEffect(()=>{e&&(de(),ee(),H())},[e,a]);const Q=async()=>{try{i(!0);const O=localStorage.getItem("cachedTokens");if(O){const ae=JSON.parse(O).find(se=>{var k;return((k=se.token_name)==null?void 0:k.toLowerCase())===(t==null?void 0:t.toLowerCase())});if(ae){r(ae),i(!1);return}}const{data:V,error:ne}=await le.from("meme_tokens").select("*").ilike("token_name",t).single();if(ne)throw ne;V?r(V):ie.error("Token not found")}catch(O){console.error("Error loading token:",O),ie.error("Failed to load token")}finally{i(!1)}},U=()=>{const O=localStorage.getItem("connectedWallet");O&&o(JSON.parse(O))},q=async()=>{var O;try{const ne=await(await fetch("https://api.coingecko.com/api/v3/simple/price?ids=ripple&vs_currencies=usd")).json();u(((O=ne.ripple)==null?void 0:O.usd)||2.5)}catch(V){console.error("Error fetching XRP/USD price:",V)}},de=async()=>{var O;if(!e||!e.amm_pool_created){console.log("TokenProfile: No AMM pool created for token",e==null?void 0:e.token_name);return}try{console.log("TokenProfile: Fetching pool data for token",e.id);const{data:V,error:ne}=await le.from("pool_data_cache").select("*").eq("token_id",e.id).order("last_updated",{ascending:!1}).limit(1).maybeSingle();if(ne&&console.error("TokenProfile: Cache fetch error:",ne),V){console.log("TokenProfile: Found cached pool data:",V);const se=Date.now()-new Date(V.last_updated).getTime();if(console.log("TokenProfile: Cache age (ms):",se),c({xrpAmount:parseFloat(V.xrp_amount),tokenAmount:parseFloat(V.token_amount),lpTokens:parseFloat(V.lp_tokens),price:parseFloat(V.price),volume24h:parseFloat(V.volume_24h||0),fees24h:parseFloat(V.fees_24h||0),apr:parseFloat(V.apr||0),contributors:parseInt(V.contributors||0)}),a&&me(V.lp_tokens),se<12e4){console.log("TokenProfile: Using fresh cache data");return}console.log("TokenProfile: Cache is stale, fetching fresh data...")}else console.log("TokenProfile: No cache found, fetching fresh data");const pe=new Ve.Client("wss://xrplcluster.com");await pe.connect();const ae=await pe.request({command:"amm_info",asset:{currency:"XRP"},asset2:{currency:e.currency_hex||e.currency_code,issuer:e.issuer_address}});if((O=ae.result)!=null&&O.amm){const se=ae.result.amm,k=parseFloat(se.amount)/1e6,j=parseFloat(se.amount2.value),P=parseFloat(se.lp_token.value),$=k/j,R=e.volume_24h?parseFloat(e.volume_24h):0,W=parseFloat(se.trading_fee)/1e3||0,te=R*(W/100),X=k>0?te*365/k*100:0;c({xrpAmount:k,tokenAmount:j,lpTokens:P,price:$,volume24h:R,fees24h:te,apr:X,contributors:0}),await le.from("pool_data_cache").upsert({token_id:e.id,xrp_amount:k,token_amount:j,lp_tokens:P,price:$,volume_24h:R,fees_24h:te,apr:X,contributors:0,last_updated:new Date().toISOString()},{onConflict:"token_id"}),a&&me(P)}await pe.disconnect()}catch(V){console.error("Error fetching pool data:",V)}},me=async O=>{var V;if(!(!a||!e))try{const{data:ne}=await le.from("lp_balance_cache").select("*").eq("token_id",e.id).eq("user_address",a.address).order("cached_at",{ascending:!1}).limit(1).single();if(ne&&Date.now()-new Date(ne.cached_at).getTime()<6e4){p({balance:parseFloat(ne.lp_balance),share:parseFloat(ne.share_percentage)});return}const pe=new Ve.Client(a.network==="mainnet"?"wss://xrplcluster.com":"wss://s.altnet.rippletest.net:51233");await pe.connect();const ae=e.lp_token_currency||`03${(V=e.currency_hex)==null?void 0:V.slice(2,38)}`,j=((await pe.request({command:"account_lines",account:a.address,ledger_index:"validated"})).result.lines||[]).find(P=>P.currency===ae&&P.account===e.issuer_address);if(j){const P=parseFloat(j.balance),$=P/O*100;p({balance:P,share:$}),await le.from("lp_balance_cache").upsert({token_id:e.id,user_address:a.address,lp_balance:P,share_percentage:$,cached_at:new Date().toISOString()},{onConflict:"token_id,user_address"})}await pe.disconnect()}catch(ne){console.error("Error fetching LP balance:",ne)}},ye=()=>e?l?l.price.toFixed(8):e.amm_xrp_amount&&e.amm_token_amount?(e.amm_xrp_amount/e.amm_token_amount).toFixed(8):"0.00000000":"0.00000000",G=()=>e?(parseFloat(ye())*e.supply).toFixed(2):"0",Z=()=>{if(!e||!e.initial_xrp_amount||!e.initial_token_amount||!l)return"0.00";const O=e.initial_xrp_amount/e.initial_token_amount;return((l.price-O)/O*100).toFixed(2)},he=async()=>{if(!(!a||!e))try{const{data:O,error:V}=await le.from("token_holdings_cache").select("balance").eq("wallet_address",a.address).eq("token_id",e.id).order("last_updated",{ascending:!1}).limit(1).maybeSingle();if(V)throw V;O?w(parseFloat(O.balance)):ee()}catch(O){console.error("Error fetching cached balance:",O),ee()}},ee=async()=>{if(!(!a||!e))try{const O=new Ve.Client(a.network==="mainnet"?"wss://xrplcluster.com":"wss://s.altnet.rippletest.net:51233");await O.connect();const pe=((await O.request({command:"account_lines",account:a.address,ledger_index:"validated"})).result.lines||[]).find(se=>se.account===e.issuer_address&&(se.currency===e.currency_hex||se.currency===e.currency_code)),ae=pe?parseFloat(pe.balance):0;w(ae),await le.from("token_holdings_cache").upsert({wallet_address:a.address,token_id:e.id,balance:ae,price:parseFloat(ye()),value:ae*parseFloat(ye()),last_updated:new Date().toISOString()},{onConflict:"wallet_address,token_id"}),await O.disconnect()}catch(O){console.error("Error fetching user balance:",O),w(0)}},H=()=>{if(!e)return;const O=parseFloat(ye())||1e-8,V=Math.floor(Date.now()/1e3),ne=[];for(let pe=30;pe>=0;pe--){const ae=V-pe*3600,se=(Math.random()-.5)*.2,k=Math.max(O*(1+se),1e-8);ne.push({time:ae,value:k})}y(ne)},I=()=>{const O=ye(),V=`${window.location.origin}/token/${e.token_name}`,ne=`Check out $${e.currency_code} on #XRP Ledger!

💰 Price: ${O} XRP
📊 Market Cap: ${G()} XRP

#${e.currency_code} #XRPL #Crypto

${V}`,pe=`https://twitter.com/intent/tweet?text=${encodeURIComponent(ne)}`;window.open(pe,"_blank")},K=()=>{const O=`${window.location.origin}/token/${e.token_name}`;navigator.clipboard.writeText(O).then(()=>{ie.success("Link copied to clipboard!")}).catch(()=>{ie.error("Failed to copy link")})};return s?n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-purple-500 mx-auto mb-4"}),n.jsx("div",{className:"text-purple-300",children:"Loading token..."})]})}):e?n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsx("div",{className:"glass rounded-xl p-6 mb-6",children:n.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx(Ht,{token:e,size:"3xl"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-2xl md:text-4xl font-bold text-purple-200 mb-2",children:e.token_name}),n.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[n.jsx("span",{className:"text-purple-400 text-lg font-mono",children:e.currency_code}),n.jsx(Pi,{type:"address",value:e.issuer_address,network:"mainnet"}),e.amm_pool_created&&n.jsx("span",{className:"bg-green-500/20 text-green-400 px-3 py-1 rounded-full text-sm font-medium",children:"AMM Pool Active"})]}),e.description&&n.jsx("p",{className:"text-purple-300 mt-3 max-w-2xl",children:e.description}),(e.twitter_handle||e.website_url)&&n.jsxs("div",{className:"flex items-center gap-3 mt-3 flex-wrap",children:[e.website_url&&n.jsxs("a",{href:e.website_url.startsWith("http")?e.website_url:`https://${e.website_url}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-purple-300 hover:text-purple-100 transition-colors",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})}),n.jsx("span",{className:"text-sm",children:"Website"})]}),e.twitter_handle&&n.jsxs("a",{href:`https://twitter.com/${e.twitter_handle.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-purple-300 hover:text-purple-100 transition-colors",children:[n.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),n.jsxs("span",{className:"text-sm",children:["@",e.twitter_handle.replace("@","")]})]})]})]})]}),n.jsxs("div",{className:"lg:ml-auto flex flex-col gap-3",children:[n.jsxs("div",{className:"glass rounded-lg p-4 text-center min-w-[200px]",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Live Price"}),n.jsxs("div",{className:"text-2xl font-bold text-purple-200 font-mono",children:[ye()," XRP"]}),n.jsxs("div",{className:"text-green-400 text-sm",children:["$",(parseFloat(ye())*d).toFixed(6)]}),e.amm_pool_created&&n.jsxs("div",{className:`text-sm font-bold mt-2 ${parseFloat(Z())>=0?"text-green-400":"text-red-400"}`,children:[parseFloat(Z())>=0?"+":"",Z(),"% 24h"]})]}),a&&n.jsxs("div",{className:"glass rounded-lg p-4 text-center min-w-[200px] bg-purple-500/10 border border-purple-500/30",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Your Holdings"}),n.jsx("div",{className:"text-lg sm:text-xl font-bold text-purple-200 truncate",children:g!==null?g.toFixed(4):"0.0000"}),n.jsx("div",{className:"text-purple-400 text-xs truncate",children:e.currency_code}),n.jsxs("div",{className:"text-green-400 text-sm mt-1 truncate",children:[((g||0)*parseFloat(ye())).toFixed(4)," XRP"]}),n.jsxs("div",{className:"text-green-400 text-xs truncate",children:["$",((g||0)*parseFloat(ye())*d).toFixed(2)]}),n.jsxs("div",{className:"flex gap-2 mt-3",children:[n.jsx("button",{onClick:()=>_(!0),className:"flex-1 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white text-xs font-bold py-2 px-3 rounded-lg transition-all",children:"Send"}),n.jsx("button",{onClick:()=>B(!0),className:"flex-1 bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white text-xs font-bold py-2 px-3 rounded-lg transition-all",children:"Receive"})]})]})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Market Cap"}),n.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[G()," XRP"]}),n.jsxs("div",{className:"text-green-400 text-sm",children:["$",(parseFloat(G())*d).toFixed(2)]})]}),n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Total Supply"}),n.jsx("div",{className:"text-2xl font-bold text-purple-200",children:e.supply.toLocaleString()}),n.jsx("div",{className:"text-purple-400 text-sm",children:e.currency_code})]}),n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"24h Volume"}),n.jsx("div",{className:"text-2xl font-bold text-purple-200",children:l?`${l.volume24h.toFixed(2)} XRP`:"0 XRP"}),n.jsxs("div",{className:"text-green-400 text-sm",children:["$",l?((l.volume24h||0)*d).toFixed(2):"0.00"]})]})]}),l&&n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-6",children:[n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"XRP Liquidity"}),n.jsxs("div",{className:"text-xl font-bold text-purple-200",children:[l.xrpAmount.toFixed(2)," XRP"]}),n.jsxs("div",{className:"text-green-400 text-sm",children:["$",(l.xrpAmount*d).toFixed(2)]})]}),n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"Token Liquidity"}),n.jsx("div",{className:"text-xl font-bold text-purple-200",children:l.tokenAmount.toFixed(2)}),n.jsx("div",{className:"text-purple-400 text-sm",children:e.currency_code})]}),n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"LP Tokens"}),n.jsxs("div",{className:"text-xl font-bold text-purple-200",children:[(l.lpTokens/1e3).toFixed(2),"K"]})]}),n.jsxs("div",{className:"glass rounded-lg p-6",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"APR (1 year)"}),n.jsxs("div",{className:"text-xl font-bold text-green-400",children:[l.apr.toFixed(2),"%"]})]})]}),h&&l&&n.jsx("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-6 mb-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-green-300 text-lg font-medium mb-2",children:"Your LP Position"}),n.jsxs("div",{className:"text-green-200",children:[h.balance.toFixed(4)," LP Tokens (",h.share.toFixed(4),"% of pool)"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-green-200 font-bold text-xl",children:["~",(l.xrpAmount*h.share/100).toFixed(4)," XRP"]}),n.jsxs("div",{className:"text-green-400",children:["$",(l.xrpAmount*h.share/100*d).toFixed(2)]})]})]})}),n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:flex gap-2 mb-6 justify-center items-stretch",children:[n.jsx(Vf,{token:e,connectedWallet:a,tokenBalance:0,onTrustlineUpdate:()=>{},size:"lg",showDropdown:!0}),n.jsxs("div",{className:"relative swap-dropdown",children:[n.jsxs("button",{onClick:()=>m(!f),className:"w-full bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white font-bold px-3 py-2.5 rounded-lg shadow-lg transition-all duration-300 flex items-center justify-center gap-2 text-sm whitespace-nowrap",children:[n.jsx("span",{children:"💱 Swap"}),n.jsx("svg",{className:`w-4 h-4 transition-transform ${f?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),f&&n.jsx("div",{className:"absolute top-full left-0 mt-2 w-64 glass bg-gradient-to-br from-purple-900/95 to-purple-800/95 border border-purple-500/30 rounded-lg shadow-xl z-50",children:n.jsx("button",{onClick:()=>{localStorage.setItem("selectedTradeToken",JSON.stringify(e)),window.dispatchEvent(new CustomEvent("navigateToTrade",{detail:e}))},className:"w-full px-4 py-3 text-left hover:bg-purple-600/30 transition-colors flex items-center gap-3",children:n.jsx("div",{className:"text-purple-100 font-medium",children:"Trade on MEMEKINGS"})})})]}),n.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"dashboard"})),className:"w-full bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white font-bold px-3 py-2.5 rounded-lg shadow-lg transition-all duration-300 text-sm whitespace-nowrap",children:"← Back"}),n.jsxs("button",{onClick:K,className:"w-full col-span-2 sm:col-span-1 bg-gradient-to-r from-cyan-600 to-cyan-700 hover:from-cyan-700 hover:to-cyan-800 text-white font-bold px-3 py-2.5 rounded-lg shadow-lg transition-all duration-300 flex items-center justify-center gap-2 text-sm whitespace-nowrap",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),"Share Link"]}),n.jsxs("button",{onClick:I,className:"w-full col-span-2 sm:col-span-1 bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white font-bold px-3 py-2.5 rounded-lg shadow-lg transition-all duration-300 flex items-center justify-center gap-2 text-sm whitespace-nowrap",children:[n.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),"Share on X"]}),e.twitter_handle?n.jsxs("a",{href:`https://twitter.com/${e.twitter_handle.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-bold px-3 py-2.5 rounded-lg shadow-lg transition-all duration-300 flex items-center justify-center gap-2 text-sm whitespace-nowrap",children:[n.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),"Twitter"]}):n.jsxs("button",{disabled:!0,className:"w-full bg-gray-600 text-gray-400 font-bold px-3 py-2.5 rounded-lg shadow-lg cursor-not-allowed opacity-50 flex items-center justify-center gap-2 text-sm whitespace-nowrap",children:[n.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),"Twitter"]}),e.website_url?n.jsxs("a",{href:e.website_url.startsWith("http")?e.website_url:`https://${e.website_url}`,target:"_blank",rel:"noopener noreferrer",className:"w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold px-3 py-2.5 rounded-lg shadow-lg transition-all duration-300 flex items-center justify-center gap-2 text-sm whitespace-nowrap",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})}),"Website"]}):n.jsxs("button",{disabled:!0,className:"w-full bg-gray-600 text-gray-400 font-bold px-3 py-2.5 rounded-lg shadow-lg cursor-not-allowed opacity-50 flex items-center justify-center gap-2 text-sm whitespace-nowrap",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})}),"Website"]})]}),n.jsxs("div",{className:"glass rounded-xl overflow-hidden mb-6",children:[n.jsxs("div",{className:"flex border-b border-purple-500/30 overflow-x-auto",children:[n.jsx("button",{onClick:()=>x("overview"),className:`px-6 py-4 font-medium transition-colors whitespace-nowrap ${v==="overview"?"text-purple-200 border-b-2 border-purple-500 bg-purple-500/10":"text-purple-400 hover:text-purple-200"}`,children:"Overview"}),n.jsx("button",{onClick:()=>x("chart"),className:`px-6 py-4 font-medium transition-colors whitespace-nowrap ${v==="chart"?"text-purple-200 border-b-2 border-purple-500 bg-purple-500/10":"text-purple-400 hover:text-purple-200"}`,children:"Chart"}),n.jsx("button",{onClick:()=>x("analytics"),className:`px-6 py-4 font-medium transition-colors whitespace-nowrap ${v==="analytics"?"text-purple-200 border-b-2 border-purple-500 bg-purple-500/10":"text-purple-400 hover:text-purple-200"}`,children:"Analytics"}),n.jsx("button",{onClick:()=>x("trades"),className:`px-6 py-4 font-medium transition-colors whitespace-nowrap ${v==="trades"?"text-purple-200 border-b-2 border-purple-500 bg-purple-500/10":"text-purple-400 hover:text-purple-200"}`,children:"Trade History"})]}),n.jsxs("div",{className:"p-6",children:[v==="overview"&&n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Issuer Address"}),n.jsx("div",{className:"font-mono text-sm text-purple-200 break-all",children:e.issuer_address})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Currency Code"}),n.jsx("div",{className:"font-mono text-sm text-purple-200",children:e.currency_code})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Currency Hex"}),n.jsx("div",{className:"font-mono text-sm text-purple-200 break-all",children:e.currency_hex||"N/A"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"Created"}),n.jsx("div",{className:"text-sm text-purple-200",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})}),v==="chart"&&e.amm_pool_created&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"glass rounded-lg p-3 border border-green-500/30",children:[n.jsx("div",{className:"text-green-400 text-xs mb-1",children:"Current Price"}),n.jsxs("div",{className:"text-xl font-bold text-green-200",children:[ye()," XRP"]}),n.jsxs("div",{className:"text-green-400 text-xs",children:["$",(parseFloat(ye())*d).toFixed(6)]})]}),n.jsxs("div",{className:"glass rounded-lg p-3 border border-blue-500/30",children:[n.jsx("div",{className:"text-blue-400 text-xs mb-1",children:"24h Change"}),n.jsxs("div",{className:`text-xl font-bold ${parseFloat(Z())>=0?"text-green-200":"text-red-200"}`,children:[parseFloat(Z())>=0?"+":"",Z(),"%"]}),n.jsx("div",{className:"text-blue-400 text-xs",children:"Price movement"})]}),n.jsxs("div",{className:"glass rounded-lg p-3 border border-purple-500/30",children:[n.jsx("div",{className:"text-purple-400 text-xs mb-1",children:"XRP Liquidity"}),n.jsx("div",{className:"text-xl font-bold text-purple-200",children:((re=l==null?void 0:l.xrpAmount)==null?void 0:re.toFixed(2))||"0.00"}),n.jsx("div",{className:"text-purple-400 text-xs",children:"In AMM pool"})]}),n.jsxs("div",{className:"glass rounded-lg p-3 border border-cyan-500/30",children:[n.jsx("div",{className:"text-cyan-400 text-xs mb-1",children:"Token Liquidity"}),n.jsx("div",{className:"text-xl font-bold text-cyan-200",children:((z=l==null?void 0:l.tokenAmount)==null?void 0:z.toLocaleString())||"0"}),n.jsx("div",{className:"text-cyan-400 text-xs",children:e.currency_code})]})]}),n.jsx("div",{className:"h-[600px] glass rounded-lg p-4",children:n.jsx(Aq,{data:b})})]}),v==="chart"&&!e.amm_pool_created&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-6xl mb-4",children:"📊"}),n.jsx("div",{className:"text-purple-300",children:"Chart will be available once AMM pool is created"}),n.jsx("div",{className:"text-purple-400 text-sm mt-2",children:"Historical price data requires an active trading pool"})]}),v==="analytics"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-4 border border-purple-500/30",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"💰 Market Cap"}),n.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[G()," XRP"]}),n.jsxs("div",{className:"text-green-400 text-sm",children:["$",(parseFloat(G())*d).toFixed(2)]})]}),n.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-4 border border-purple-500/30",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"📊 Total Supply"}),n.jsx("div",{className:"text-2xl font-bold text-purple-200",children:e.supply.toLocaleString()}),n.jsx("div",{className:"text-purple-400 text-sm",children:e.currency_code})]}),n.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-4 border border-purple-500/30",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"💹 Current Price"}),n.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[ye()," XRP"]}),n.jsxs("div",{className:"text-green-400 text-sm",children:["$",(parseFloat(ye())*d).toFixed(6)]})]}),l&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-4 border border-purple-500/30",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"💧 Total Liquidity"}),n.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[l.xrpAmount.toFixed(2)," XRP"]}),n.jsxs("div",{className:"text-green-400 text-sm",children:["$",(l.xrpAmount*d).toFixed(2)]})]}),n.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-4 border border-purple-500/30",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"📈 24h Volume"}),n.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[l.volume24h.toFixed(2)," XRP"]}),n.jsxs("div",{className:"text-green-400 text-sm",children:["$",(l.volume24h*d).toFixed(2)]})]}),n.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-4 border border-purple-500/30",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"💎 APR (Annual)"}),n.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[l.apr.toFixed(2),"%"]}),n.jsx("div",{className:"text-purple-400 text-sm",children:"Estimated returns"})]}),n.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-4 border border-purple-500/30",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"🔄 24h Change"}),n.jsxs("div",{className:`text-2xl font-bold ${parseFloat(Z())>=0?"text-green-400":"text-red-400"}`,children:[parseFloat(Z())>=0?"+":"",Z(),"%"]}),n.jsx("div",{className:"text-purple-400 text-sm",children:"Price movement"})]}),n.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-4 border border-purple-500/30",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"💵 24h Fees"}),n.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[l.fees24h.toFixed(4)," XRP"]}),n.jsxs("div",{className:"text-green-400 text-sm",children:["$",(l.fees24h*d).toFixed(2)]})]}),n.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-4 border border-purple-500/30",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"🎯 LP Tokens"}),n.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[(l.lpTokens/1e3).toFixed(2),"K"]}),n.jsx("div",{className:"text-purple-400 text-sm",children:"Outstanding"})]})]}),n.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-4 border border-purple-500/30",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"📅 Token Age"}),n.jsxs("div",{className:"text-2xl font-bold text-purple-200",children:[Math.floor((Date.now()-new Date(e.created_at).getTime())/(1e3*60*60*24))," days"]}),n.jsx("div",{className:"text-purple-400 text-sm",children:"Since creation"})]}),n.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-4 border border-purple-500/30",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"🏷️ Category"}),n.jsx("div",{className:"text-2xl font-bold text-purple-200",children:e.category||"Meme"}),n.jsx("div",{className:"text-purple-400 text-sm",children:"Token type"})]}),n.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-4 border border-purple-500/30",children:[n.jsx("div",{className:"text-purple-400 text-sm mb-2",children:"✅ Pool Status"}),n.jsx("div",{className:"text-2xl font-bold text-purple-200",children:e.amm_pool_created?"🟢 Active":"🔴 Inactive"}),n.jsx("div",{className:"text-purple-400 text-sm",children:"AMM Pool"})]})]}),h&&l&&n.jsxs("div",{className:"bg-gradient-to-r from-green-900/30 to-emerald-900/30 border border-green-500/30 rounded-lg p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-green-300 mb-4",children:"Your Position Analytics"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-green-400 text-sm mb-1",children:"LP Tokens Owned"}),n.jsx("div",{className:"text-2xl font-bold text-green-200",children:h.balance.toFixed(4)})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-green-400 text-sm mb-1",children:"Pool Share"}),n.jsxs("div",{className:"text-2xl font-bold text-green-200",children:[h.share.toFixed(4),"%"]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-green-400 text-sm mb-1",children:"XRP Value"}),n.jsx("div",{className:"text-2xl font-bold text-green-200",children:(l.xrpAmount*h.share/100).toFixed(4)})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-green-400 text-sm mb-1",children:"USD Value"}),n.jsxs("div",{className:"text-2xl font-bold text-green-200",children:["$",(l.xrpAmount*h.share/100*d).toFixed(2)]})]})]})]})]}),v==="trades"&&n.jsx("div",{children:a?n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-purple-200 mb-4",children:"My Trades"}),n.jsx(i4,{tokenId:e.id,connectedWallet:a})]}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-6xl mb-4",children:"🔒"}),n.jsx("div",{className:"text-purple-300 mb-2",children:"Connect wallet to view your trades"}),n.jsx("div",{className:"text-purple-400 text-sm",children:"Your personal trade history will appear here"})]})})]})]}),S&&a&&n.jsx(e_,{token:e,balance:g||0,wallet:a,onClose:()=>_(!1),onSuccess:()=>{_(!1),ee()}}),A&&a&&n.jsx(t_,{token:e,wallet:a,onClose:()=>B(!1)})]}):n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsxs("div",{className:"glass rounded-lg p-8 text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),n.jsx("h1",{className:"text-2xl font-bold text-purple-200 mb-2",children:"Token Not Found"}),n.jsx("p",{className:"text-purple-400 mb-6",children:"The token you're looking for doesn't exist."}),n.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:"dashboard"})),className:"btn-primary px-6 py-3 rounded-lg",children:"Back to Dashboard"})]})})}let cu=null,Kp=!1;const Rq=t=>{if(cu){console.log("Bot executor already running");return}console.log("🤖 Starting global bot executor for wallet:",t),cu=setInterval(async()=>{if(Kp){console.log("⏭️  Skipping execution - previous execution still running");return}Kp=!0;try{await D2(t)}catch(r){console.error("Error in bot executor:",r)}finally{Kp=!1}},5e3);const e=le.channel("global_bot_executor").on("postgres_changes",{event:"*",schema:"public",table:"trading_bots",filter:`wallet_address=eq.${t}`},r=>{console.log("🔔 Bot update received:",r.eventType),(r.eventType==="UPDATE"||r.eventType==="INSERT")&&r.new.status==="running"&&setTimeout(()=>D2(t),1e3)}).subscribe();window.__botExecutorSubscription=e,console.log("✅ Global bot executor started")},F2=()=>{cu&&(clearInterval(cu),cu=null,console.log("🛑 Global bot executor stopped")),window.__botExecutorSubscription&&(window.__botExecutorSubscription.unsubscribe(),window.__botExecutorSubscription=null),Kp=!1},D2=async t=>{try{const{data:e,error:r}=await le.from("trading_bots").select("*").eq("wallet_address",t).eq("status","running");if(r)throw r;if(!e||e.length===0)return;const s=new Date;for(const i of e){if(!i.next_trade_time){console.log(`🔄 Bot ${i.name} has no next_trade_time, scheduling first trade`);const o=new Date(Date.now()+i.interval*60*1e3);await le.from("trading_bots").update({next_trade_time:o.toISOString()}).eq("id",i.id);continue}const a=new Date(i.next_trade_time);s>=a&&(console.log(`⏰ Executing bot: ${i.name}`),await Oq(i))}}catch(e){console.error("Error executing ready bots:",e)}},Oq=async t=>{try{await le.from("trading_bots").update({last_execution_attempt:new Date().toISOString()}).eq("id",t.id);const{data:e}=await le.from("wallets").select("*").eq("address",t.wallet_address).maybeSingle();if(!e||!e.seed){console.error("Wallet not found or missing seed");return}const{data:r}=await le.from("meme_tokens").select("*").eq("id",t.token_id).maybeSingle();if(!r){console.error("Token not found");return}const{data:s}=await le.from("pool_data_cache").select("*").eq("token_id",r.id).order("last_updated",{ascending:!1}).limit(1).maybeSingle();if(!s){console.error("No pool data available");return}const i=Math.random()*100<t.trade_mode,a=t.min_amount+Math.random()*(t.max_amount-t.min_amount),o=new Ve.Client(e.network==="mainnet"?"wss://xrplcluster.com":"wss://s.altnet.rippletest.net:51233");await o.connect();const l=Ve.Wallet.fromSeed(e.seed),c=r.currency_code.length>3?Et.Buffer.from(r.currency_code,"utf8").toString("hex").toUpperCase().padEnd(40,"0"):r.currency_code,d=i?{TransactionType:"Payment",Account:e.address,Destination:e.address,Amount:{currency:c,value:a.toFixed(6),issuer:r.issuer_address},SendMax:Ve.xrpToDrops((a*parseFloat(s.price)*(1+t.slippage/100)).toFixed(6)),Paths:[[{account:r.issuer_address,type:1}]]}:{TransactionType:"Payment",Account:e.address,Destination:e.address,Amount:Ve.xrpToDrops((a*parseFloat(s.price)*(1-t.slippage/100)).toFixed(6)),SendMax:{currency:c,value:a.toFixed(6),issuer:r.issuer_address},Paths:[[{account:r.issuer_address,type:1}]]},u=await o.autofill(d),h=l.sign(u),p=await o.submitAndWait(h.tx_blob);await o.disconnect();const f=p.result.meta.TransactionResult==="tesSUCCESS",m=i?parseFloat(p.result.DeliveredAmount||0)/1e6:a*parseFloat(s.price),v=i?a:0;await le.from("bot_trades").insert({bot_id:t.id,wallet_address:t.wallet_address,token_id:t.token_id,trade_type:i?"buy":"sell",xrp_amount:m,token_amount:v,price:parseFloat(s.price),success:f,tx_hash:p.result.hash});const x={total_trades:(t.total_trades||0)+1,successful_trades:(t.successful_trades||0)+(f?1:0),last_trade_time:new Date().toISOString(),next_trade_time:new Date(Date.now()+t.interval*60*1e3).toISOString()};i&&f?(x.total_xrp_spent=(parseFloat(t.total_xrp_spent||0)+m).toString(),x.total_token_received=(parseFloat(t.total_token_received||0)+v).toString(),x.token_balance=(parseFloat(t.token_balance||0)+v).toString()):!i&&f&&(x.total_xrp_received=(parseFloat(t.total_xrp_received||0)+m).toString(),x.total_token_spent=(parseFloat(t.total_token_spent||0)+v).toString(),x.token_balance=(parseFloat(t.token_balance||0)-v).toString());const b=parseFloat(x.total_xrp_received||t.total_xrp_received||0)-parseFloat(x.total_xrp_spent||t.total_xrp_spent||0);x.net_profit=b.toFixed(6),await le.from("trading_bots").update(x).eq("id",t.id),console.log(`✅ Bot ${t.name} trade executed: ${i?"BUY":"SELL"} ${a.toFixed(4)} @ ${m.toFixed(6)} XRP`)}catch(e){console.error(`❌ Error executing bot ${t.name}:`,e),await le.from("trading_bots").update({last_error:e.message,last_error_time:new Date().toISOString(),next_trade_time:new Date(Date.now()+t.interval*60*1e3).toISOString()}).eq("id",t.id)}};class Iq extends T.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("React Error Boundary caught an error:",e,r)}render(){return this.state.hasError?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900",children:n.jsxs("div",{className:"glass rounded-lg p-8 max-w-md text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),n.jsx("h1",{className:"text-2xl font-bold text-purple-200 mb-4",children:"Something went wrong"}),n.jsx("p",{className:"text-purple-400 mb-6",children:"The app encountered an error. Please refresh the page."}),n.jsx("button",{onClick:()=>window.location.reload(),className:"btn-primary px-6 py-3 rounded-lg",children:"Refresh Page"})]})}):this.props.children}}function Lq(){const[t,e]=T.useState("dashboard"),[r,s]=T.useState(null),[i,a]=T.useState(0),[o,l]=T.useState(null);T.useEffect(()=>{const u=window.location.pathname;if(u.startsWith("/token/")){const p=u.replace("/token/","");l(p),e("tokenprofile")}const h=()=>{const p=window.location.pathname;if(p.startsWith("/token/")){const f=p.replace("/token/","");l(f),e("tokenprofile")}else e("dashboard"),l(null)};return window.addEventListener("popstate",h),()=>{window.removeEventListener("popstate",h)}},[]),T.useEffect(()=>{const u=x=>{console.error("Global error caught:",x.error),x.preventDefault()},h=x=>{console.error("Unhandled promise rejection:",x.reason),x.preventDefault()};window.addEventListener("error",u),window.addEventListener("unhandledrejection",h);const p=setInterval(()=>{Bv.cleanOldEntries()},60*60*1e3),f=()=>{const x=localStorage.getItem("connectedWallet");if(x)try{const b=JSON.parse(x);b.address&&Rq(b.address)}catch(b){console.error("Error starting bot executor:",b)}};f();const m=()=>{setTimeout(f,1e3)},v=()=>{F2()};return window.addEventListener("walletConnected",m),window.addEventListener("walletDisconnected",v),()=>{window.removeEventListener("error",u),window.removeEventListener("unhandledrejection",h),window.removeEventListener("walletConnected",m),window.removeEventListener("walletDisconnected",v),clearInterval(p),F2()}},[]),T.useEffect(()=>{const u=f=>{c("trade"),f.detail&&s(f.detail)},h=f=>{c(f.detail),f.detail!=="trade"&&s(null)},p=f=>{l(f.detail),c("tokenprofile"),window.history.pushState({},"",`/token/${f.detail}`)};return window.addEventListener("navigateToTrade",u),window.addEventListener("navigateToPage",h),window.addEventListener("navigateToToken",p),()=>{window.removeEventListener("navigateToTrade",u),window.removeEventListener("navigateToPage",h),window.removeEventListener("navigateToToken",p)}},[]);const c=u=>{e(u),a(h=>h+1),u!=="tokenprofile"&&window.history.pushState({},"","/")},d=()=>{switch(t){case"dashboard":return n.jsx(A2,{},i);case"memes":return n.jsx($7,{},i);case"pools":return n.jsx(U7,{},i);case"trade":return n.jsx(sq,{preselectedToken:r},i);case"bottrader":return n.jsx(aq,{},i);case"vault":return n.jsx(cq,{},i);case"mytokens":return n.jsx(dq,{},i);case"analytics":return n.jsx(uq,{},i);case"top10":return n.jsx(pq,{},i);case"kingslist":return n.jsx(fq,{},i);case"about":return n.jsx(mq,{},i);case"wallets":return n.jsx(yq,{},i);case"setup":return n.jsx(vq,{},i);case"aichat":return n.jsx(Sq,{},i);case"social":return n.jsx(kq,{},i);case"tokenprofile":return n.jsx(Pq,{tokenSlug:o},i);default:return n.jsx(A2,{},i)}};return n.jsx(Iq,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx(tT,{position:"top-right",toastOptions:{style:{background:"rgba(88, 28, 135, 0.9)",color:"#e9d5ff",border:"1px solid rgba(139, 92, 246, 0.3)",backdropFilter:"blur(10px)"},success:{iconTheme:{primary:"#a78bfa",secondary:"#581c87"}},error:{iconTheme:{primary:"#f87171",secondary:"#581c87"}}}}),n.jsx(FV,{currentPage:t,onNavigate:c}),n.jsx("div",{className:"lg:ml-64 pt-20 lg:pt-6 p-3 sm:p-4 md:p-6 lg:p-8",children:n.jsx("div",{className:"w-full mx-auto",children:d()})})]})})}Gx.createRoot(document.getElementById("root")).render(n.jsxs(Td.StrictMode,{children:[n.jsx(Lq,{}),n.jsx(tT,{position:"bottom-right",toastOptions:{duration:5e3,style:{background:"#1e1b4b",color:"#e9d5ff",border:"1px solid #7c3aed"},success:{iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{duration:8e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]}));
